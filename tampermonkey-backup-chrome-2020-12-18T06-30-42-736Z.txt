{"created_by":"Tampermonkey","version":"1","scripts":[{"name":"AC-baidu:重定向优化百度搜狗谷歌必应搜索_favicon_双列","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":["www.baidu.com"],"orig_excludes":["*://*.google*/sorry*"],"orig_includes":["*://ipv6.baidu.com/*","*://www.baidu.com/*","*://www1.baidu.com/*","*://m.baidu.com/*","*://xueshu.baidu.com/s*","*://www.so.com/s?*","*://*.bing.com/*","*://encrypted.google.*/search*","*://*.google*/search*","*://*.google*/webhp*","*://*.zhihu.com/*","*://*duckduckgo.com/*","*://*.dogedoge.com/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"Config":"s{\"isRedirectEnable\":true,\"isAdsEnable\":false,\"isAutopage\":true,\"isBlockEnable\":false,\"isBlockDisplay\":false,\"isBlockBtnNotDisplay\":false,\"AdsStyleEnable\":true,\"baidu\":{\"name\":\"baidu\",\"AdsStyleMode\":\"3\",\"HuYanMode\":false},\"google\":{\"name\":\"google\",\"AdsStyleMode\":\"3\",\"HuYanMode\":false},\"bing\":{\"name\":\"bing\",\"AdsStyleMode\":\"3\",\"HuYanMode\":false},\"duck\":{\"name\":\"duck\",\"AdsStyleMode\":\"3\",\"HuYanMode\":false},\"doge\":{\"name\":\"doge\",\"AdsStyleMode\":\"3\",\"HuYanMode\":false},\"sogou\":{\"name\":\"sogou\",\"AdsStyleMode\":\"1\",\"HuYanMode\":false},\"Style_BaiduLite\":false,\"defaultHuYanColor\":\"#DEF1EF\",\"isUserColorEnable\":true,\"isFaviconEnable\":true,\"defaultFaviconUrl\":\"https://ae01.alicdn.com/kf/HTB1dRY0X8OD3KVjSZFFq6An9pXay.jpg\",\"doDisableSug\":true,\"isRightDisplayEnable\":false,\"isCounterEnable\":true,\"isALineEnable\":false,\"isUserStyleEnable\":false,\"normalizeDuck\":true,\"isEnLang\":false,\"isGooleInBaiduModeEnable\":false,\"UserBlockList\":[],\"UserStyleText\":\"/**计数器的颜色样式*/\\ndiv .AC-CounterT{\\n  background: #FD9999;\\n}\\n/**右侧栏的样式-其实不开启更好看一些*/\\n#content_right{\\n  padding: 20px 15px 15px;\\n  border-radius: 5px;\\n  background-color: #fff;\\n  box-sizing: border-box;\\n  box-shadow: 0 0 20px 2px rgba(0, 0, 0, .1);\\n  -webkit-box-shadow: 0 0 20px 2px rgba(0, 0, 0, .1);\\n  -moz-box-shadow: 0 0 20px 2px rgba(0, 0, 0, .1);\\n}\\n/****可以加一些自己的背景图片,替换引号内的内容为可外链的图片即可****/\\nbody[baidu]{\\n  background-repeat: repeat-y;\\n  background-size: 100%;\\n  background-attachment:fixed;\\n  background-image: url('https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1564756277250&di=868b9eac9be14df1dedd8c7d6a710844&imgtype=0&src=http%3A%2F%2Fphotocdn.sohu.com%2F20130530%2FImg377502333.jpg');\\n}\\n/*****窗口背景的透明虚化效果*****/\\nbody>#wrapper,body>.wrap,body>#main,body #appbar,body #hdtbSum{\\n  background: rgba(225,225,225,0.8);\\n}\\n/**隐藏首页的大图标-修复可能导致外援样式异常**/\\nbody[baidu] #s_lg_img_new{\\n  display:none !important;\\n}\\n#wrapper #content_left .result, #wrapper #content_left .c-container{\\n  border-radius: 5px;\\n}\",\"oldVersion\":\"24.12\",\"lastSaveTime\":1608270296137}"},"ts":1608270296137},"enabled":true,"position":1,"file_url":"https://greasyfork.org/scripts/14178-ac-baidu-%E9%87%8D%E5%AE%9A%E5%90%91%E4%BC%98%E5%8C%96%E7%99%BE%E5%BA%A6%E6%90%9C%E7%8B%97%E8%B0%B7%E6%AD%8C%E5%BF%85%E5%BA%94%E6%90%9C%E7%B4%A2-favicon-%E5%8F%8C%E5%88%97/code/AC-baidu:%E9%87%8D%E5%AE%9A%E5%90%91%E4%BC%98%E5%8C%96%E7%99%BE%E5%BA%A6%E6%90%9C%E7%8B%97%E8%B0%B7%E6%AD%8C%E5%BF%85%E5%BA%94%E6%90%9C%E7%B4%A2_favicon_%E5%8F%8C%E5%88%97.user.js","uuid":"958f5fa4-1970-45a3-bbd1-d8d950a35c81","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgQUMtYmFpZHU66YeN5a6a5ZCR5LyY5YyW55m+5bqm5pCc54uX6LC35q2M5b+F5bqU5pCc57SiX2Zhdmljb25f5Y+M5YiXCi8vIEBuYW1lOmVuICAgIEFDLWJhaWR1Omdvb2dsZV9zb2dvdV9iaW5nX1JlZGlyZWN0UmVtb3ZlX2Zhdmljb25fYWRhd2F5X1R3b0xpbmUKLy8gQG5hbWU6emggICAgQUMtYmFpZHU66YeN5a6a5ZCR5LyY5YyW55m+5bqm5pCc54uX6LC35q2M5b+F5bqU5pCc57SiX2Zhdmljb25f5Y+M5YiXCi8vIEBuYW1lOnpoLUNOICBBQy1iYWlkdTrph43lrprlkJHkvJjljJbnmb7luqbmkJzni5fosLfmrYzlv4XlupTmkJzntKJfZmF2aWNvbl/lj4zliJcKLy8gQG5hbWU6amEgICAgQUMtYmFpZHU66YeN5a6a5ZCR5pyA6YGp5YyWQmFpZHXjga7mkJzni5fjga5Hb29nbGXjga5CaW5n5qSc57Si57WQ5p6c44Gu44Oq44OA44Kk44Os44Kv44OI6Zmk5Y67K2Zhdmljb24KLy8gQGRlc2NyaXB0aW9uICAxLue5numBjueZvuW6puOAgeaQnOeLl+OAgeiwt+atjOOAgeWlveaQnOaQnOe0oue1kOaenOS4reeahOiHquW3seeahOi3s+i9iemPiOaOpe+8jOebtOaOpeioquWVj+WOn+Wni+e2sumggS3lj43mraPpg73og73nnIvmh4IgMi7mlrDlop7oh6rlrprkuYnnvZHnq5nmi6bmiKrlip/og70gM+a3u+WKoEZhdmljb27mmL7npLogNC7pobXpnaJDU1MgNS7mt7vliqDorqHmlbAgNi7lvIDlhbPpgInmi6nku6XkuIrlip/og70gNy7oh6rliqjnv7vpobXlip/og70KLy8gQGRlc2NyaXB0aW9uOmVuICAxLmJ5cGFzcyB0aGUgcmVkaXJlY3QgbGluayBhdCBiYWlkdVxzb2dvdVxnb29nbGVcaGFvc291OyAyLnJlbW92ZSBhZHMgYXQgYmFpZHU7IDMuYWRkIEZhdmljb24gZm9yIGVhY2ggd2Vic2l0ZTsgNC5yZW5kZXIgeW91ciBvd24gc3R5bGU7IDUuY291bnRlcjsgNi5Td2l0Y2ggdG8gaGFuZGxlIGFsbCA3LkF1dG8gUGFnZXIKLy8gQGRlc2NyaXB0aW9uOmphICAxLui/guWbnkJhaWR144CBU29nb3XjgIFHb29nbGXjgIFIYW9zb3XmpJzntKLmpJzntKLntZDmnpzjga7kuK3jga7oh6rliIbjga7pgbfnp7vjg6rjg7Pjgq87IDIuQmFpZHXjga7kvZnliIbjgarluoPlkYrjgpLlj5bjgorpmaTjgY87IDMu44Kz44Oh44Oz44OI44KS6L+95YqgOyA0LuODmuODvOOCuOOBruOCq+OCueOCv+ODoENTUDsgNS7jgqvjgqbjg7Pjg4jjgpLov73liqA7IDYu44K544Kk44OD44OB44Gv5Lul5LiK44Gu5qmf6IO944KS6YG45oqe44GX44G+44GZOyA3LuiHquWLleODmuODvOOCuOOCgeOBj+OCii4KLy8gQGljb24gICAgaHR0cHM6Ly9hZTAxLmFsaWNkbi5jb20va2YvSGFjMWE1ODA1NWM1MDQ3Y2RiOTEzNDllOTFhYTIwOGQ1ay5qcGcKLy8gQGF1dGhvciAgICBBQwovLyBAbGljZW5zZSAgICBHUEwtMy4wLW9ubHkKLy8gQGNyZWF0ZSAgICAgMjAxNS0xMS0yNQovLyBAcnVuLWF0ICAgICBkb2N1bWVudC1zdGFydAovLyBAdmVyc2lvbiAgICAyNC4xMgovLyBAY29ubmVjdCAgICB3d3cuYmFpZHUuY29tCi8vIEBpbmNsdWRlICAgICo6Ly9pcHY2LmJhaWR1LmNvbS8qCi8vIEBpbmNsdWRlICAgICo6Ly93d3cuYmFpZHUuY29tLyoKLy8gQGluY2x1ZGUgICAgKjovL3d3dzEuYmFpZHUuY29tLyoKLy8gQGluY2x1ZGUgICAgKjovL20uYmFpZHUuY29tLyoKLy8gQGluY2x1ZGUgICAgKjovL3h1ZXNodS5iYWlkdS5jb20vcyoKLy8gQGluY2x1ZGUgICAgKjovL3d3dy5zby5jb20vcz8qCi8vIEBpbmNsdWRlICAgICo6Ly8qLmJpbmcuY29tLyoKLy8gQGluY2x1ZGUgICAgKjovL2VuY3J5cHRlZC5nb29nbGUuKi9zZWFyY2gqCi8vIEBpbmNsdWRlICAgICo6Ly8qLmdvb2dsZSovc2VhcmNoKgovLyBAaW5jbHVkZSAgICAqOi8vKi5nb29nbGUqL3dlYmhwKgovLyBAaW5jbHVkZSAgICAqOi8vKi56aGlodS5jb20vKgovLyBAaW5jbHVkZSAgICAqOi8vKmR1Y2tkdWNrZ28uY29tLyoKLy8gQGluY2x1ZGUgICAgKjovLyouZG9nZWRvZ2UuY29tLyoKLy8gQGV4Y2x1ZGUgICAgKjovLyouZ29vZ2xlKi9zb3JyeSoKLy8gQG5hbWVzcGFjZSAgMTM1MzQ2NDUzOUBxcS5jb20KLy8gQHN1cHBvcnRVUkwgIGh0dHBzOi8vYWMudHVqaWR1LmNvbS8KLy8gQGhvbWUtdXJsICAgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy96aC1UVy9zY3JpcHRzLzE0MTc4Ci8vIEBob21lLXVybDIgIGh0dHBzOi8vZ2l0aHViLmNvbS9sYW5ncmVuMTM1My9HTV9zY3JpcHQKLy8gQGhvbWVwYWdlVVJMICBodHRwczovL2dyZWFzeWZvcmsub3JnL3poLVRXL3NjcmlwdHMvMTQxNzgKLy8gQGNvcHlyaWdodCAgMjAxNS0yMDIwLCBBQwovLyBAbGFzdG1vZGlmaWVkICAyMDIwLTA5LTI3Ci8vIEBmZWVkYmFjay11cmwgIGh0dHBzOi8vYWMudHVqaWR1LmNvbQovLyBAbm90ZSAgICAyMDIwLjEwLTE5LVYyNC4xMiDmi6bmiKrml7bmlK/mjIFVUkzlnLDlnYDnmoTljLnphY3vvIzosIPmlbRmYXZpY29u5Lya5b2x5ZON5qCH6aKY5paH5a2X6YCJ5Lit55qE6Zeu6aKY77yb5L+u5aSN6LC35q2M5oum5oiq5qih5byP5aSx5pWI55qE6Zeu6aKY77yM5L+u5aSN6LC35q2M57yW5Y+36Zeu6aKY77yb5L+u5aSN5b+F5bqU5Zu+54mH5YGP5Y+z55qE6Zeu6aKYCi8vIEBub3RlICAgIDIwMjAuMDktMjktVjI0LjExIOmSiOWvueeZvuW6puW+i+W4iOWHveWGheWuueWvueiEmuacrOi/m+ihjOiwg+aVtO+8jOaJqeWxleKAnOeZvuW6puS8mOWMluKAneW3sue7j+awuOS5heS4i+e6vwovLyBAbm90ZSAgICAyMDIwLjA5LTI3LVYyNC4xMCDkv67lpI3nmb7luqbmi6bmiKrmqKHlvI/nmoTpl67popjku6Xlj4rlsI/lnLDlnYDlsL7ms6jvvJvkv67lpI3lpb3mkJznmoTmi6bmiKrlip/og73vvJvkv67lpI3pg6jliIbmoLflvI/pl67popgKLy8gQG5vdGUgICAgMjAyMC4wOS0xMi1WMjQuMDkg5L+u5aSN57+76aG15aSx5pWI55qE6Zeu6aKY77yb5pu05paw6YOo5YiG5qC35byP5YaF5a65Ci8vIEBub3RlICAgIDIwMjAuMDktMTEtVjI0LjA4IOabtOaNolZ1ZeeahGNkbuWcsOWdgO+8jOWwvemHj+WKoOW/q+aVsOaNrueahOi9veWFpemAn+W6pu+8m+S4uuS6huWFvOWuuXNhZmFyaeWwhueZvuW6pueahGh0dHBz5Zyw5Z2A5pu/5o2i5Li65LqGaHR0cOWcsOWdgO+8m+S/ruWkjWZhdmljb27ojrflj5bnmoTpl67popjvvJvlop7liqBmYXZpY29u5Yqo5oCB5Yi35paw77yb5L+u5aSN6YOo5YiG5qC35byP6Zeu6aKYCi8vIEBub3RlICAgIDIwMjAuMDgtMDYtVjI0LjA3IOS/ruWkjeS/neWtmOaXoOaViOeahOmXrumimO+8m+S/ruWkjeeZvuW6puWcqOWNleWIl+WxheS4reeahOaXtuWAmemUmeS9jeeahOmXrumimAovLyBAbm90ZSAgICAyMDIwLjA4LTA1LVYyNC4wNiDkv67lpI3oh6rlrprkuYnlgbblsJTmiZPkuI3lvIDnmoTpl67popjvvJvkv67lpI3lrprml7blmajlj6/og73kvJrpgKDmiJDnmoTlpLHmlYjnmoTpl67popjvvJvkv67lpI3lvZPlrZjlnKjlpJrkuKrohJrmnKzlj6/og73pgKDmiJDnmoTlhrLnqoHpl67popgKLy8gQG5vdGUgICAgMjAyMC4wOC0wMy1WMjQuMDUg5pu05paw5L+u5aSN5oqk55y85qih5byP55qE6Zeu6aKY77yb5L+u5aSN5omp5bGV5LiK5YG25bCU5aSx5pWI55qE6Zeu6aKY77yb5penRWRnZeS8vOS5jue7j+W4uOacieS/neWtmOS4jeeUn+aViOeahOmXrumimO+8jOa1i+ivleS4jeaYr+aIkeeahOWOn+WboAovLyBAbm90ZSAgICAyMDIwLjA4LTAyLVYyNC4wNCDliqjmgIHmoLflvI/liIfmjaLvvIzlpJrliJfmlYjmnpzkuIDplK7liIfmjaLvvIzml6DpnIDliLfmlrAg5L+u5aSN5ZCE56eN5qC35byP6Zeu6aKYIOS/ruWkjeW/heW6lOe/u+mhtemXrumimCDmtYvor5XlhbzlrrlHTeWSjFZNLuW9u+W6leS4jeaUr+aMgeaQnOeLl+aQnOe0oi0t5Yir6Zeu5Li65LuA5LmI77yM5oiR6L+Y5oOz5aSa5rS75Yeg5bm0Ci8vIEBub3RlICAgIDIwMjAuMDctMjctVjI0LjImMyDmm7TmjaJWdWXkuLo3NeWboueahOWcsOWdgCDkv67lpI3nmb7luqbnmoRsaXRl5qih5byP5YiH5o2i5peg5pWI55qE6Zeu6aKYCi8vIEBub3RlICAgIDIwMjAuMDctMjctVjI0LjAxIOabtOaWsOaUr+aMgUxpbnV45LiL55qERmlyZWZveCBlbW3kv67lpI3kuIrmrKHmj5DkuqTov4fkuo7nnYDmgKXlr7zoh7TnmoTmoLflvI/mnKrmj5DkuqQg5pu05paw5pSv5oyBRG9nZURvZ2XlpJrlkInmkJzntKIt5L2G5LiN5aSE55CG6YeN5a6a5ZCRCi8vIEBub3RlICAgIDIwMjAuMDctMjYtVjI0LjAwIOmDqOWIhuWGheWuueabtOaNouS4ulZ1ZeWIneWni+WMlu+8jOWHj+WwkeS4gOWumueahOi1hOa6kOWNoOeUqCAmJiDmlrDlop5EdWNrR29Hb+eahOagt+W8j+aViOaenCAtIOiAg+iZkeWIsER1Y2tHb0dv55qE54m55oCn77yM5LiN5a+55YW26L+b6KGM5bm/5ZGK6L+H5rukCi8vIEBub3RlICAgIDIwMjAuMDctMDktVjIzLjMzIOS/ruWkjWJpbmfnmoTpobbpg6jliIfmjaLplJnkvY3nmoTpl67popjvvJvlop7liqB3dzEuYmFpZHUuY29t5Z+f77yb5L+u5aSN5ZCE56eN5qC35byPKOeZvuW6puOAgeiwt+atjOOAgeWlveaQnOOAgeW/heW6lCnplJnkvY3nmoTpl67popgKLy8gQG5vdGUgICAgMjAyMC4wNC0yNC1WMjMuMzIg54mI5pys5YCS6YCA77ya5a6J5YWo6LW36KeB77ya6buY6K6k5YWz6Zet5pCc54uX55qE6Ieq5a6a5LmJ5Z+f5ZCN5oum5oiq5Yqf6IO95ZKM6YeN5a6a5ZCR5Yqf6IO9LeS7peWQjuiAg+iZkeabtOaNouaWueW8j++8m+m7mOiupOS4jeW8gOWQr+mHjeWumuWQkeWKn+iDveOAgem7mOiupOS4jeW8gOWQr+W5v+WRiuaLpuaIquWKn+iDve+8m+abtOaWsOmDqOWIhuivtOaYjuWGheWuue+8m+WQjOaXtuS5n+WvuemDqOWIhuaUr+aMgeS4jeWIsOS9jeeahO+8jOWFvOWuueS4jeWlveeahOaViOaenOWQkeWkp+WutuivtOS4gOWjsOaKseatie+8jOS5i+WQjuaIkeS8muabtOWKoOWKquWKm+iuqeaQnOe0oue7k+aenOabtOWKoOaWueS+v+afpeeci+WSjOS9v+eUqAovLyBAbm90ZSAgICAyMDIwLjAzLTI3LVYyMy4zMSDkv67lpI1nb29nbGXnlLHkuo7pobXpnaLnu5PmnoTmm7TmlrDlr7zoh7TnmoRibG9ja+WKn+iDveWkseaViOeahOmXrumimO+8jOWQjOaXtuS/ruWkjeiwt+atjOaKpOecvOaooeW8j+S5n+WkseaViOeahOmXrumimOOAguaWsOWinue/u+mhteeahOaMiemSruS6i+S7tu+8jOaWsOWinuS9v+eUqOWcqOe6v2NvbmZpZ++8jOmBv+WFjeeUseS6jumhtemdoue7k+aehOaUueWKqOWPiOmcgOimgemHjeaWsOaPkOS6pOiEmuacrOabtOaWsAovLyBAbm90ZSAgICAyMDE3LjA1LjEyIC0+IDIwMjAuMDMtMjYgJiYgVjguNiAtPiBWMjMuMzAg5ZCE56eN5ZCE5qC355qE5Y6G5Y+y5pu05paw6K6w5b2V77yM5LuO5LiA5Liq54mI5pys6L+t5Luj5Yiw5Y+m5LiA5Liq54mI5pysCi8vIEBub3RlICAgIDIwMTcuMDUuMTItVjguNCDmlrDlop7vvJrpu5jorqTlsY/olL3osLfmrYznmoTlronlhajmkJzntKLlip/og70KLy8gQG5vdGUgICAgMjAxNy4wNS4wNS1WOC4zIOS/ruWkjWluY2x1ZGXojIPlm7TlpKrlsI/lr7zoh7TnmoTnmb7luqbnn6XpgZPnmoTlsY/olL3pl67popgKLy8gQG5vdGUgICAgMjAxNy4wNS4wNC1WOC4yIOe7iOS6juS/ruWkjeS6hueZvuW6puefpemBk+WbvueJh+abv+aNouS6huaWh+Wtl+eahOi/meS4quWkp0JVRzsg6aG65L6/5aSE55CG5LqGc3VwZXJhcGkuemhpZGFvLmJhaWR1LmNvbTsg5paw5aKe6LC35q2M5pCc57Si57uT5p6c6YeN5a6a5ZCR5Y676ZmkCi8vIEBub3RlICAgIDIwMTcuMDUuMDQtVjguMSDnu4jkuo7kv67lpI3kuobnmb7luqbnn6XpgZPlm77niYfmm7/mjaLkuobmloflrZfnmoTov5nkuKrlpKdCVUfvvIzpobrkvr/lpITnkIbkuoZzdXBlcmFwaS56aGlkYW8uYmFpZHUuY29tCi8vIEBub3RlICAgIDIwMTcuMDUuMDQtVjguMCDnu4jkuo7kv67lpI3kuobnmb7luqbnn6XpgZPlm77niYfmm7/mjaLkuobmloflrZfnmoTov5nkuKrlpKdCVUfvvIzlvoXmtYvor5UKLy8gQG5vdGUgICAgMjAxNy4wMy4yOC1WNy42IOS/ruWkjeWcqFZpb2xlbnRNb25rZXnkuIrnmoTkuI3mlK/mjIHnmoTpl67popgKLy8gQG5vdGUgICAgMjAxNy4wMy4yOC1WNy41IOWwneivleS/ruWkjWNocm9tZeS4iueahOmXrumimAovLyBAbm90ZSAgICAyMDE3LjAzLjIxLVY3LjQg5bCd6K+V5aSE55CGRWRnZeS4iuS4jeaUr+aMgeeahOmXrumimO+8jOe7k+aenOWPkeeOsOaYr0VkZ2XmnKzouqvnmoRUYW1wZXJNb25rZXnmlK/mjIHmnInpl67popgKLy8gQG5vdGUgICAgMjAxNy4wMy4xOS1WNy4zIOS/ruWkjeaJk+W8gOeZvuW6puS5i+WQjuWGjeasoeeCueWHu+KAnOeZvuW6puS4gOS4i+KAneWvvOiHtOeahOaXoOazleabtOaWsOmHjeWumuWQkemXrumimAovLyBAbm90ZSAgICAyMDE3LjAzLjE5LVY3LjIg5pyq55+l5Y6f5ZugY2hyb21l55qETXV0YXRpb25PYnNlcnZlcuaXoOazleS9v+eUqOS6hu+8jOe7p+e7reWbnuW9kuS7peWJjeeahERPTU5vZGVJbnNlcnRlZAovLyBAbm90ZSAgICAyMDE3LjAyLjE3LVY3LjAg5L+u5aSN5pCc54uX55qE5pCc57Si57uT5p6c6YeN5a6a5ZCR6Zeu6aKYK+aUueS4quWQjeWtlwovLyBAbm90ZSAgICAyMDE3LjAyLjE3LVY2Ljkg5L+u5aSN5pCc54uX55qE5pCc57Si57uT5p6c6YeN5a6a5ZCR6Zeu6aKYCi8vIEBub3RlICAgIDIwMTYuMTAuMjctVjYuNyDkv67lpI3kuobku6XliY3nmoTph43lpI3or7fmsYLvvIznjrDlnKjnmoTor7fmsYLmlbDlupTor6XlsI/kuoblvojlpJrvvIznvZHnu5zkuZ/lsLHkuI3ljaHkuobvvIzmhJ/op4nokIzokIzlk5IKLy8gQG5vdGUgICAgMjAxNi4wNC4yNC1WNi42IOaBouWkjeS7peWJjeeahOeJiOacrO+8jOWboOS4uuWFvOWuueaAp+mXrumimAovLyBAbm90ZSAgICAyMDE1LjEyLjAxLVY1LjAg5Yqg5YWl5pCc54uX55qE5pSv5oyB77yM5L2G5piv5pSv5oyB5LiN5piv5b6I5aW9Ci8vIEBub3RlICAgIDIwMTUuMTEuMjUtVjIuMCDkvJjljJbvvIzlt7Lnu4/mmK/nnJ/lrp7lnLDlnYDnmoTkuI3lho3lsJ3or5Xojrflj5YKLy8gQG5vdGUgICAgMjAxNS4xMS4yNS1WMS4wIOWujOaIkOWOu+aOieeZvuW6pumHjeWumuWQkeeahOWKn+iDvQovLyBAcmVzb3VyY2UgIGJhaWR1Q29tbW9uU3R5bGUgICBodHRwOi8vaWJhaWR1Lm50YW93LmNvbS9uZXdjc3MvYmFpZHVDb21tb25TdHlsZS5jc3M/dD0yNC4xMgovLyBAcmVzb3VyY2UgIGJhaWR1T25lUGFnZVN0eWxlICBodHRwOi8vaWJhaWR1Lm50YW93LmNvbS9uZXdjc3MvYmFpZHVPbmVQYWdlU3R5bGUuY3NzP3Q9MjQuMTIKLy8gQHJlc291cmNlICBiYWlkdVR3b1BhZ2VTdHlsZSAgaHR0cDovL2liYWlkdS5udGFvdy5jb20vbmV3Y3NzL2JhaWR1VHdvUGFnZVN0eWxlLmNzcz90PTI0LjEyCi8vIEByZXNvdXJjZSAgYmFpZHVMaXRlU3R5bGUgICAgIGh0dHA6Ly9pYmFpZHUubnRhb3cuY29tL25ld2Nzcy9iYWlkdUxpdGVTdHlsZS5jc3M/dD0yNC4xMgovLyBAcmVzb3VyY2UgIGdvb2dsZUNvbW1vblN0eWxlICBodHRwOi8vaWJhaWR1Lm50YW93LmNvbS9uZXdjc3MvZ29vZ2xlQ29tbW9uU3R5bGUuY3NzP3Q9MjQuMTIKLy8gQHJlc291cmNlICBnb29nbGVPbmVQYWdlU3R5bGUgaHR0cDovL2liYWlkdS5udGFvdy5jb20vbmV3Y3NzL2dvb2dsZU9uZVBhZ2VTdHlsZS5jc3M/dD0yNC4xMgovLyBAcmVzb3VyY2UgIGdvb2dsZVR3b1BhZ2VTdHlsZSBodHRwOi8vaWJhaWR1Lm50YW93LmNvbS9uZXdjc3MvZ29vZ2xlVHdvUGFnZVN0eWxlLmNzcz90PTI0LjEyCi8vIEByZXNvdXJjZSAgYmluZ0NvbW1vblN0eWxlICAgIGh0dHA6Ly9pYmFpZHUubnRhb3cuY29tL25ld2Nzcy9iaW5nQ29tbW9uU3R5bGUuY3NzP3Q9MjQuMTIKLy8gQHJlc291cmNlICBiaW5nT25lUGFnZVN0eWxlICAgaHR0cDovL2liYWlkdS5udGFvdy5jb20vbmV3Y3NzL2JpbmdPbmVQYWdlU3R5bGUuY3NzP3Q9MjQuMTIKLy8gQHJlc291cmNlICBiaW5nVHdvUGFnZVN0eWxlICAgaHR0cDovL2liYWlkdS5udGFvdy5jb20vbmV3Y3NzL2JpbmdUd29QYWdlU3R5bGUuY3NzP3Q9MjQuMTIKLy8gQHJlc291cmNlICBkdWNrQ29tbW9uU3R5bGUgICAgaHR0cDovL2liYWlkdS5udGFvdy5jb20vbmV3Y3NzL2R1Y2tDb21tb25TdHlsZS5jc3M/dD0yNC4xMgovLyBAcmVzb3VyY2UgIGR1Y2tPbmVQYWdlU3R5bGUgICBodHRwOi8vaWJhaWR1Lm50YW93LmNvbS9uZXdjc3MvZHVja09uZVBhZ2VTdHlsZS5jc3M/dD0yNC4xMgovLyBAcmVzb3VyY2UgIGR1Y2tUd29QYWdlU3R5bGUgICBodHRwOi8vaWJhaWR1Lm50YW93LmNvbS9uZXdjc3MvZHVja1R3b1BhZ2VTdHlsZS5jc3M/dD0yNC4xMgovLyBAcmVzb3VyY2UgIGRvZ2VDb21tb25TdHlsZSAgICBodHRwOi8vaWJhaWR1Lm50YW93LmNvbS9uZXdjc3MvZG9nZUNvbW1vblN0eWxlLmNzcz90PTI0LjEyCi8vIEByZXNvdXJjZSAgZG9nZU9uZVBhZ2VTdHlsZSAgIGh0dHA6Ly9pYmFpZHUubnRhb3cuY29tL25ld2Nzcy9kb2dlT25lUGFnZVN0eWxlLmNzcz90PTI0LjEyCi8vIEByZXNvdXJjZSAgZG9nZVR3b1BhZ2VTdHlsZSAgIGh0dHA6Ly9pYmFpZHUubnRhb3cuY29tL25ld2Nzcy9kb2dlVHdvUGFnZVN0eWxlLmNzcz90PTI0LjEyCi8vIEByZXNvdXJjZSAgTWFpbkh1WWFuU3R5bGUgICAgIGh0dHA6Ly9pYmFpZHUubnRhb3cuY29tL25ld2Nzcy9IdVlhblN0eWxlLmNzcz90PTI0LjEyCi8vIEByZXNvdXJjZSAgU2l0ZUNvbmZpZ1J1bGVzICAgIGh0dHA6Ly9pYmFpZHUubnRhb3cuY29tL25ld2Nzcy9TaXRlQ29uZmlnUnVsZXMuY29uZj90PTI0LjEyCi8vIEByZXF1aXJlIGh0dHBzOi8vY2RuLnN0YXRpY2ZpbGUub3JnL3Z1ZS8yLjYuMTEvdnVlLmpzCi8vIEByZXF1aXJlIGh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vdnVlQDIuNi4xMi9kaXN0L3Z1ZS5qcwovLyBAZ3JhbnQgICAgR01fZ2V0VmFsdWUKLy8gQGdyYW50ICAgIEdNLmdldFZhbHVlCi8vIEBncmFudCAgICBHTV9zZXRWYWx1ZQovLyBAZ3JhbnQgICAgR00uc2V0VmFsdWUKLy8gQGdyYW50ICAgIEdNX2FkZFN0eWxlCi8vIEBncmFudCAgICBHTV9nZXRSZXNvdXJjZVVybAovLyBAZ3JhbnQgICAgR00uZ2V0UmVzb3VyY2VVcmwKLy8gQGdyYW50ICAgIEdNX3htbGh0dHBSZXF1ZXN0Ci8vIEBncmFudCAgICBHTV9nZXRSZXNvdXJjZVRleHQKLy8gQGdyYW50ICAgIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQKLy8gQGdyYW50ICAgIHVuc2FmZVdpbmRvdwovLyA9PS9Vc2VyU2NyaXB0PT0KCgohZnVuY3Rpb24gKCkgewogIGxldCBpc2RlYnVnID0gZmFsc2U7CiAgbGV0IGlzTG9jYWxEZWJ1ZyA9IGlzZGVidWcgfHwgZmFsc2U7CiAgbGV0IGRlYnVnID0gaXNkZWJ1ZyA/IGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSkgOiBmdW5jdGlvbiAoKSB7CiAgfTsKICBsZXQgYWNDc3NMb2FkRmxhZyA9IGZhbHNlOwoKICBsZXQgaW5FeHRNb2RlID0gdHlwZW9mIChpc0V4dGVuc2lvbikgIT09ICJ1bmRlZmluZWQiOwogIGxldCBpbkdNTW9kZSA9IHR5cGVvZiAoR01faW5mby5zY3JpcHRIYW5kbGVyKSAhPT0gInVuZGVmaW5lZCI7IC8vID0gIkdyZWFzZW1vbmtleSIgfHwgIlRhbXBlcm1vbmtleSIgfHwgIlZpb2xlbnRNb25rZXkiCiAgLy8g5paw54mI5pys55qER3JlYXNlTW9ua2V55piv5bim5pyJc2NyaXB0SGFuZGxlcu+8jOS9huaYr+ayoeaciUdNX2dldFJlc291cmNlVGV4dO+8m+aXp+eJiOacrOS4jeW4pnNjcmlwdEhhbmRsZXLvvIzkvYbmmK/mnIlHTV9nZXRSZXNvdXJjZVRleHQKICAvLyBsZXQgaXNOZXdHTSA9IHR5cGVvZihHTV9pbmZvLnNjcmlwdEhhbmRsZXIpICE9PSAidW5kZWZpbmVkIiAmJiBHTV9pbmZvLnNjcmlwdEhhbmRsZXIudG9Mb3dlckNhc2UoKSA9PT0gImdyZWFzZW1vbmtleSI7CiAgbGV0IGlzTmV3R00gPSBmYWxzZTsKICAvLyBpbkV4dE1vZGUgJiBpbkdNTW9kZQogIC8vIHRydWUgICAgdHJ1ZSA95omp5bGV5LiL55qER03ku6PnoIEg5LiN5omn6KGMCiAgLy8gdHJ1ZSAgICBmYWxzZT3mianlsZXkuIvku6PnoIEg5omn6KGMCiAgLy8gZmFsc2UgIHRydWUgPeS7hUdN5Luj56CBIOaJp+ihjAogIC8vIGZhbHNlICBmYWxzZT3lvILluLgg5L2G5piv6L+Y5piv6KaB5omn6KGM5Luj56CBCiAgZGVidWcoIueoi+W6j+W8gOWniyIpOwogIGlmIChpbkV4dE1vZGUgPT09IHRydWUgJiYgaW5HTU1vZGUgPT09IHRydWUgfHwgdHlwZW9mKHdpbmRvdy5BQzY2NkluaXQpICE9PSAndW5kZWZpbmVkJykgewogICAgY29uc29sZS5sb2coIuaJqeWxleaooeW8jy3ohJrmnKzkuI3lkK/nlKgiKTsKICAgIHJldHVybjsKICB9CiAgd2luZG93LkFDNjY2SW5pdCA9IHRydWUKICBpZiAodHlwZW9mIChHTSkgPT09ICJ1bmRlZmluZWQiKSB7CiAgICAvLyDov5nkuKrmmK9WaW9sZW50TW9ua2V555qE5pSv5oyB6YCJ6aG5CiAgICBHTSA9IHt9OwogICAgR00uc2V0VmFsdWUgPSBHTV9zZXRWYWx1ZTsKICAgIEdNLmdldFZhbHVlID0gR01fZ2V0VmFsdWU7CiAgfQogIChmdW5jdGlvbiAoKSB7CiAgICBkZWJ1Zygi56iL5bqP5omn6KGMIik7CiAgICBsZXQgbmVlZERpc3BsYXlOZXdGdW4gPSB0cnVlOyAvLyDmnKzmrKHmm7TmlrDmmK/lkKbmnInmlrDlip/og73pnIDopoHlsZXnpLoKICAgIGlmICh3aW5kb3cuTm9kZUxpc3QgJiYgIU5vZGVMaXN0LnByb3RvdHlwZS5mb3JFYWNoKSB7CiAgICAgIE5vZGVMaXN0LnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNhbGxiYWNrLCB0aGlzQXJnKSB7CiAgICAgICAgdGhpc0FyZyA9IHRoaXNBcmcgfHwgd2luZG93OwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB0aGlzW2ldLCBpLCB0aGlzKTsKICAgICAgICB9CiAgICAgIH07CiAgICB9CiAgICBpZiAoIUFycmF5LnByb3RvdHlwZS5hY3B1c2gpIHsKICAgICAgLyoqCiAgICAgICAqIOi/m+ihjOS4jemHjeWkjeaPkuWFpe+8jOaPkuWFpeWQjuaJp+ihjOWbnuiwg+WHveaVsAogICAgICAgKiBAcGFyYW0gZGF0YSDlvoXmj5LlhaXmlbDmja4KICAgICAgICogQHBhcmFtIGNhbGxiYWNrIOWbnuiwg+WHveaVsAogICAgICAgKi8KICAgICAgQXJyYXkucHJvdG90eXBlLmFjcHVzaCA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykgewogICAgICAgIC8vIOWmguaenOaYr+Weg+WcvuaVsOaNru+8jOmCo+S5iOWPr+S7peS4ouW8g+eahAogICAgICAgIGlmIChkYXRhID09IG51bGwgfHwgZGF0YSA9PSAiIikgcmV0dXJuOwogICAgICAgIC8vIOWmguaenOaVsOaNruS4reacieWbnui9pu+8jOmCo+aVsOaNruS5n+aYr+aXoOaViOeahOato+aWh+iAjOW3sgogICAgICAgIGlmIChkYXRhLnJlcGxhY2UoLyh7fH18LHxcK3zvvJp844CCfFxuKS8pICE9PSBkYXRhKSByZXR1cm47CiAgICAgICAgaWYgKHRoaXMuZmluZEluZGV4KG0gPT4gbSA9PT0gZGF0YSkgPCAwKSB7CiAgICAgICAgICB0aGlzLnB1c2goZGF0YSk7CiAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayh0aGlzKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIEFycmF5LnByb3RvdHlwZS5hY3JlbW92ZSA9IGZ1bmN0aW9uIChkYXRhLCBjYWxsYmFjaykgewogICAgICAgIGxldCBkZWxJZCA9IHRoaXMuZmluZEluZGV4KG0gPT4gbSA9PT0gZGF0YSk7CiAgICAgICAgaWYgKGRlbElkID49IDApIHsKICAgICAgICAgIHRoaXMuc3BsaWNlKGRlbElkLCAxKTsKICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHRoaXMpOwogICAgICAgIH0gLy8g5Yig6ZmkZGVsSWTnmoTmlbDmja7vvIzliKDpmaTkuIDkuKoKICAgICAgfTsKICAgIH0KICAgIC8vIGxldCBSZWRpcmVjdE1hcCA9IG5ldyBNYXAoKTsKICAgIGxldCBBQ0NvbmZpZyA9IHt9OwogICAgbGV0IERCQ29uZmlnID0ge307IC8vIOS7heS9nOS4uuaZrumAmkFDQ29uZmln55qE5Y6f5aeL5aSH5Lu977yM5Zyo5YW25LuW6Z2e5YWz6ZSu5L2N572u5pe26L+b6KGM5L+d5a2Y5L2/55SoCiAgICAvKuWtmOWcqOWvueacquWIneWni+WMluWPmOmHj+eahOWIneWni+WMlui1i+WAvC3ml6DpnIDmi4Xlv4Pov63ku6Plhbzlrrnpl67popgqLwogICAgbGV0IERlZmF1bHRDb25maWcgPSB7CiAgICAgIGlzUmVkaXJlY3RFbmFibGU6IGZhbHNlLCAgLy8g5piv5ZCm5byA5ZCv6YeN5a6a5ZCR5Yqf6IO9CiAgICAgIGlzQWRzRW5hYmxlOiBmYWxzZSwgLy8g5piv5ZCm5byA5ZCv5Y675bm/5ZGK5qih5byPCiAgICAgIGlzQXV0b3BhZ2U6IHRydWUsICAvLyDmmK/lkKblvIDlkK/oh6rliqjnv7vpobXlip/og70KICAgICAgaXNCbG9ja0VuYWJsZTogZmFsc2UsIC8vIOaYr+WQpuW8gOWQr+WOu+aLpuaIquaooeW8jwogICAgICBpc0Jsb2NrRGlzcGxheTogZmFsc2UsIC8vIOaYr+WQpuWIoOmZpOW3suaLpuaIqueahOadoeebrgogICAgICBpc0Jsb2NrQnRuTm90RGlzcGxheTogZmFsc2UsIC8vIOaYr+WQpuaYvuekumJsb2Nr5oyJ6ZKuCiAgICAgIEFkc1N0eWxlRW5hYmxlOiB0cnVlLCAvLyDmmK/lkKblvIDlkK/oh6rlrprkuYnmoLflvI/mqKHlvI8KCiAgICAgIGJhaWR1OiB7CiAgICAgICAgbmFtZTogJ2JhaWR1JywgIC8vIENTUyBsb2FkIOeahOWJjee8gOagh+W/lwogICAgICAgIEFkc1N0eWxlTW9kZTogJzEnLCAvLyAwLeS4jeW4pmNzc++8mzEt5Y2V5YiX6Z2g5bem77ybMi3ljZXliJflsYXkuK3vvJszLeWPjOWIl+WxheS4rQogICAgICAgIEh1WWFuTW9kZTogZmFsc2UsIC8vIOaKpOecvOaooeW8jy3nmb7luqYKICAgICAgfSwKICAgICAgZ29vZ2xlOiB7CiAgICAgICAgbmFtZTogJ2dvb2dsZScsCiAgICAgICAgQWRzU3R5bGVNb2RlOiAnMycsIC8vIDAt5LiN5bimY3Nz77ybMS3ljZXliJfpnaDlt6bvvJsyLeWNleWIl+WxheS4re+8mzMt5Y+M5YiX5bGF5LitCiAgICAgICAgSHVZYW5Nb2RlOiBmYWxzZSwgLy8g5oqk55y85qih5byPLeiwt+atjAogICAgICB9LAogICAgICBiaW5nOiB7CiAgICAgICAgbmFtZTogJ2JpbmcnLAogICAgICAgIEFkc1N0eWxlTW9kZTogJzMnLCAvLyAwLeS4jeW4pmNzc++8mzEt5Y2V5YiX6Z2g5bem77ybMi3ljZXliJflsYXkuK3vvJszLeWPjOWIl+WxheS4rQogICAgICAgIEh1WWFuTW9kZTogZmFsc2UsIC8vIOaKpOecvOaooeW8jy3lv4XlupQKICAgICAgfSwKICAgICAgZHVjazogewogICAgICAgIG5hbWU6ICdkdWNrJywKICAgICAgICBBZHNTdHlsZU1vZGU6ICczJywgLy8gMC3kuI3luKZjc3PvvJsxLeWNleWIl+mdoOW3pu+8mzIt5Y2V5YiX5bGF5Lit77ybMy3lj4zliJflsYXkuK0KICAgICAgICBIdVlhbk1vZGU6IGZhbHNlLCAvLyDmiqTnnLzmqKHlvI8tRHVja0dPR08KICAgICAgfSwKICAgICAgZG9nZTogewogICAgICAgIG5hbWU6ICdkb2dlJywKICAgICAgICBBZHNTdHlsZU1vZGU6ICczJywgLy8gMC3kuI3luKZjc3PvvJsxLeWNleWIl+mdoOW3pu+8mzIt5Y2V5YiX5bGF5Lit77ybMy3lj4zliJflsYXkuK0KICAgICAgICBIdVlhbk1vZGU6IGZhbHNlLCAvLyDmiqTnnLzmqKHlvI8tRHVja0dPR08KICAgICAgfSwKICAgICAgc29nb3U6IHsKICAgICAgICBuYW1lOiAnc29nb3UnLAogICAgICAgIEFkc1N0eWxlTW9kZTogJzEnLCAvLyAwLeS4jeW4pmNzc++8mzEt5Y2V5YiX6Z2g5bem77ybMi3ljZXliJflsYXkuK3vvJszLeWPjOWIl+WxheS4rQogICAgICAgIEh1WWFuTW9kZTogZmFsc2UsIC8vIOaKpOecvOaooeW8jy3mkJzni5cKICAgICAgfSwKCiAgICAgIFN0eWxlX0JhaWR1TGl0ZTogZmFsc2UsIC8vIEJhaWR1X0xpdGXmoLflvI/ooagKCiAgICAgIGRlZmF1bHRIdVlhbkNvbG9yOiAiI0RFRjFFRiIsCiAgICAgIGlzVXNlckNvbG9yRW5hYmxlOiB0cnVlLCAvLyDmmK/lkKblvIDlkK9mYXZpY29u5Zu+5qCH5Yqf6IO9CiAgICAgIGlzRmF2aWNvbkVuYWJsZTogdHJ1ZSwgLy8g5piv5ZCm5byA5ZCvZmF2aWNvbuWbvuagh+WKn+iDvQogICAgICBkZWZhdWx0RmF2aWNvblVybDogImh0dHBzOi8vYWUwMS5hbGljZG4uY29tL2tmL0hUQjFkUlkwWDhPRDNLVmpTWkZGcTZBbjlwWGF5LmpwZyIsIC8vIOm7mOiupOWbvuagh+WcsOWdgAogICAgICBkb0Rpc2FibGVTdWc6IHRydWUsIC8vIOaYr+WQpuemgeatoueZvuW6puaQnOe0oumihOa1iwogICAgICBpc1JpZ2h0RGlzcGxheUVuYWJsZTogdHJ1ZSwgLy8g5piv5ZCm5byA5ZCv5Y+z5L6n6L655qCPCiAgICAgIGlzQ291bnRlckVuYWJsZTogZmFsc2UsIC8vIOaYr+WQpuaYvuekuuiuoeaVsOWZqAogICAgICBpc0FMaW5lRW5hYmxlOiBmYWxzZSwgLy8g5piv5ZCm56aB5q2i5LiL5YiS57q/CiAgICAgIGlzVXNlclN0eWxlRW5hYmxlOiBmYWxzZSwgLy8g5piv5ZCm5byA5ZCv6Ieq5a6a5LmJ5qC35byPCiAgICAgIG5vcm1hbGl6ZUR1Y2s6IHRydWUsIC8vIOaYr+WQpuaMieeFp+W4uOeUqOS5oOaDr+WOu+mFjee9rkR1Y2tEdWNrR28KICAgICAgaXNFbkxhbmc6IGZhbHNlLAogICAgICBpc0dvb2xlSW5CYWlkdU1vZGVFbmFibGU6IGZhbHNlLCAvLyDmmK/lkKblvIDlkK/osLfmrYzmkJzntKLnu5PmnpzpobXnmoTnmb7luqblm77moIfmmL7npLoKICAgICAgVXNlckJsb2NrTGlzdDogW10sCiAgICAgIFVzZXJTdHlsZVRleHQ6CiAgICAgICAgYC8qKuiuoeaVsOWZqOeahOminOiJsuagt+W8jyovCmRpdiAuQUMtQ291bnRlclR7CiAgYmFja2dyb3VuZDogI0ZEOTk5OTsKfQovKirlj7PkvqfmoI/nmoTmoLflvI8t5YW25a6e5LiN5byA5ZCv5pu05aW955yL5LiA5LqbKi8KI2NvbnRlbnRfcmlnaHR7CiAgcGFkZGluZzogMjBweCAxNXB4IDE1cHg7CiAgYm9yZGVyLXJhZGl1czogNXB4OwogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICBib3gtc2hhZG93OiAwIDAgMjBweCAycHggcmdiYSgwLCAwLCAwLCAuMSk7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDAgMjBweCAycHggcmdiYSgwLCAwLCAwLCAuMSk7CiAgLW1vei1ib3gtc2hhZG93OiAwIDAgMjBweCAycHggcmdiYSgwLCAwLCAwLCAuMSk7Cn0KLyoqKirlj6/ku6XliqDkuIDkupvoh6rlt7HnmoTog4zmma/lm77niYcs5pu/5o2i5byV5Y+35YaF55qE5YaF5a655Li65Y+v5aSW6ZO+55qE5Zu+54mH5Y2z5Y+vKioqKi8KYm9keVtiYWlkdV17CiAgYmFja2dyb3VuZC1yZXBlYXQ6IHJlcGVhdC15OwogIGJhY2tncm91bmQtc2l6ZTogMTAwJTsKICBiYWNrZ3JvdW5kLWF0dGFjaG1lbnQ6Zml4ZWQ7CiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCdodHRwczovL3RpbWdzYS5iYWlkdS5jb20vdGltZz9pbWFnZSZxdWFsaXR5PTgwJnNpemU9Yjk5OTlfMTAwMDAmc2VjPTE1NjQ3NTYyNzcyNTAmZGk9ODY4YjllYWM5YmUxNGRmMWRlZGQ4YzdkNmE3MTA4NDQmaW1ndHlwZT0wJnNyYz1odHRwJTNBJTJGJTJGcGhvdG9jZG4uc29odS5jb20lMkYyMDEzMDUzMCUyRkltZzM3NzUwMjMzMy5qcGcnKTsKfQovKioqKirnqpflj6Pog4zmma/nmoTpgI/mmI7omZrljJbmlYjmnpwqKioqKi8KYm9keT4jd3JhcHBlcixib2R5Pi53cmFwLGJvZHk+I21haW4sYm9keSAjYXBwYmFyLGJvZHkgI2hkdGJTdW17CiAgYmFja2dyb3VuZDogcmdiYSgyMjUsMjI1LDIyNSwwLjgpOwp9Ci8qKumakOiXj+mmlumhteeahOWkp+Wbvuaghy3kv67lpI3lj6/og73lr7zoh7TlpJbmj7TmoLflvI/lvILluLgqKi8KYm9keVtiYWlkdV0gI3NfbGdfaW1nX25ld3sKICBkaXNwbGF5Om5vbmUgIWltcG9ydGFudDsKfQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQsICN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtY29udGFpbmVyewogIGJvcmRlci1yYWRpdXM6IDVweDsKfWAsCiAgICAgIG9sZFZlcnNpb246ICIiLAogICAgICBsYXN0U2F2ZVRpbWU6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLAogICAgfTsKICAgIGxldCBDT05TVCA9IHsKICAgICAgaGFzTmV3RnVuY05lZWREaXNwbGF5OiB0cnVlLAogICAgICBzb3J0SW5kZXg6IDEsCiAgICAgIGlzR29vZ2xlSW1hZ2VVcmw6IGZhbHNlLAogICAgICB1c2VJdGVtOiB7fSwKICAgICAgU3R5bGVNYW5nZXI6IGZ1bmN0aW9uICgpIHsKICAgICAgfSwKICAgIH07CgogICAgdmFyIGN1clNpdGUgPSB7CiAgICAgIFNpdGVUeXBlSUQ6IDEsICAvLyDlvZPliY3nq5nngrnnmoRJRAogICAgICBNYWluVHlwZTogIiIsICAgIC8vIOS4u+S9k+iKgueCue+8jOW+iOWkmuS4queahOeItuiKgueCuQogICAgICBTdHlwZV9Ob3JtYWw6ICIiLCAvLyDph43lrprlkJHpgInmi6nlmajvvIzlj6rmnInnmb7luqYt5pCc54uXLeWlveaQnAogICAgICBGYXZpY29uVHlwZTogIiIsICAvLyBmYXZpY29u55qE5Z+f5ZCN5qOA5p+l5ZmoY2l0Ze+8jOeUqOS6juiOt+WPlmhvc3TnlKgKICAgICAgRmF2aWNvbkFkZFRvOiAiIiwgLy8gZmF2aWNvbumAieaLqeWZqO+8jOeUqOS6juaPkuWFpeWIsHRpdGxl5LmL5YmN55qECiAgICAgIENvdW50ZXJUeXBlOiAiIiwgIC8vIOiuoeaVsOWZqOa3u+WKoOeahOS9jee9ru+8jOS4gOiIrOWSjGZhdmljb27kvY3nva7kuIDoh7QKICAgICAgQmxvY2tUeXBlOiAiIiwgIC8vIOWxj+iUveaMiemSrueahOS9jee9ru+8jOS4gOiIrOWcqHRpdGxl5LmL5ZCOCiAgICB9OwogICAgbGV0IERCU2l0ZSA9IHsKICAgICAgYmFpZHU6IHsKICAgICAgICBTaXRlVHlwZUlEOiAxLAogICAgICAgIE1haW5UeXBlOiAiI2NvbnRlbnRfbGVmdCAuYy1jb250YWluZXIiLAogICAgICAgIFN0eXBlX05vcm1hbDogImgzLnQ+YSwgLmMtY29udGFpbmVyIGFydGljbGUgYSIsCiAgICAgICAgRmF2aWNvblR5cGU6ICIuYy1zaG93dXJsIiwKICAgICAgICBGYXZpY29uQWRkVG86ICJoMyIsCiAgICAgICAgQ291bnRlclR5cGU6ICIjY29udGVudF9sZWZ0PiNkb3VibGU+ZGl2W3NyY2lkXSAqW2NsYXNzfj10XSxbY2xhc3N+PW9wX2Jlc3RfYW5zd2VyX3F1ZXN0aW9uXSwjY29udGVudF9sZWZ0PmRpdltzcmNpZF0gKltjbGFzc349dF0sW2NsYXNzfj1vcF9iZXN0X2Fuc3dlcl9xdWVzdGlvbl0iLAogICAgICAgIEJsb2NrVHlwZTogImgzIGEiLAogICAgICAgIHBhZ2VyOiB7CiAgICAgICAgICBuZXh0TGluazogJy8vZGl2W0BpZD0icGFnZSJdLy9hW2NvbnRhaW5zKHRleHQoKSwi5LiL5LiA6aG1IildW0BocmVmXScsCiAgICAgICAgICBwYWdlRWxlbWVudDogImNzcztkaXYjY29udGVudF9sZWZ0ID4gKiIsCiAgICAgICAgICBIVF9pbnNlcnQ6IFsiY3NzO2RpdiNjb250ZW50X2xlZnQiLCAyXSwKICAgICAgICAgIHJlcGxhY2VFOiAiY3NzOyNwYWdlIiwKICAgICAgICAgIHN0eWxpc2g6ICIuYXV0b3BhZ2VyaXplX3BhZ2VfaW5mbywgZGl2LnNwLXNlcGFyYXRvciB7bWFyZ2luLWJvdHRvbTogMTBweCAhaW1wb3J0YW50O30iLAogICAgICAgIH0KICAgICAgfSwKICAgICAgc29nb3U6IHsKICAgICAgICBTaXRlVHlwZUlEOiAyLAogICAgICAgIE1haW5UeXBlOiAiI21haW4gLnJlc3VsdHM+ZGl2IiwKICAgICAgICBTdHlwZV9Ob3JtYWw6ICJoMy5wdD5hLCBoMy52clRpdGxlPmEiLAogICAgICAgIEZhdmljb25UeXBlOiAiY2l0ZVtpZCo9J2NhY2hlcmVzdWx0X2luZm9fJ10iLAogICAgICAgIEZhdmljb25BZGRUbzogImgzIiwKICAgICAgICBDb3VudGVyVHlwZTogIi5yZXN1bHRzPmRpdiIsCiAgICAgICAgQmxvY2tUeXBlOiAiaDMgYSIsCiAgICAgICAgcGFnZXI6IHsKICAgICAgICAgIG5leHRMaW5rOiAiLy9kaXZbQGlkPVwicGFnZWJhcl9jb250YWluZXJcIl0vL2FbQGlkPVwic29nb3VfbmV4dFwiXSIsCiAgICAgICAgICBwYWdlRWxlbWVudDogIi8vZGl2W0BjbGFzcz1cInJlc3VsdHNcIl0vZGl2IiwKICAgICAgICAgIEhUX2luc2VydDogWyIvL2RpdltAY2xhc3M9XCJyZXN1bHRzXCJdIiwgMl0sCiAgICAgICAgICByZXBsYWNlRTogImlkKFwicGFnZWJhcl9jb250YWluZXJcIikiCiAgICAgICAgfQogICAgICB9LAogICAgICBoYW9zb3U6IHsKICAgICAgICBTaXRlVHlwZUlEOiAzLAogICAgICAgIE1haW5UeXBlOiAiLnJlcy1saXN0IiwKICAgICAgICBTdHlwZV9Ob3JtYWw6ICIucmVzLWxpc3QgaDM+YSIsCiAgICAgICAgRmF2aWNvblR5cGU6ICJjaXRlIiwKICAgICAgICBGYXZpY29uQWRkVG86ICJoMyIsCiAgICAgICAgQ291bnRlclR5cGU6ICIucmVzdWx0cz5kaXYiLAogICAgICAgIEJsb2NrVHlwZTogImgzIGEiLAogICAgICAgIHBhZ2VyOiB7CiAgICAgICAgICBuZXh0TGluazogIi8vZGl2W0BpZD0ncGFnZSddLy9hW3RleHQoKT0n5LiL5LiA6aG1PiddIHwgaWQoJ3NuZXh0JykiLAogICAgICAgICAgcGFnZUVsZW1lbnQ6ICIvL2RpdltAaWQ9J2NvbnRhaW5lciddL2RpdiIsCiAgICAgICAgICBIVF9pbnNlcnQ6IFsiLy9kaXZbQGlkPSdjb250YWluZXInXSIsIDJdLAogICAgICAgICAgcmVwbGFjZUU6ICJpZCgncGFnZScpIgogICAgICAgIH0KICAgICAgfSwKICAgICAgZ29vZ2xlOiB7CiAgICAgICAgU2l0ZVR5cGVJRDogNCwKICAgICAgICBNYWluVHlwZTogIiNyc28gLmciLAogICAgICAgIEZhdmljb25UeXBlOiAiLmlVaDMwIiwKICAgICAgICBGYXZpY29uQWRkVG86ICJoMyIsCiAgICAgICAgQ291bnRlclR5cGU6ICIjcnNvIC5nIGgzLC5feUU+ZGl2W2NsYXNzfj1fa2tdIGgzIiwKICAgICAgICBCbG9ja1R5cGU6ICIucmM+LnI+YSIsCiAgICAgICAgcGFnZXI6IHsKICAgICAgICAgIG5leHRMaW5rOiAnaWQoInBubmV4dCIpIHwgaWQoIm5hdmJhciBuYXZjbnQgbmF2IikvL3RkW3NwYW5dL2ZvbGxvd2luZy1zaWJsaW5nOjp0ZFsxXS9hIHwgaWQoIm5uIikvcGFyZW50OjphJywKICAgICAgICAgIHBhZ2VFbGVtZW50OiAnLy9kaXZbQGlkPSJyZXMiXScsCiAgICAgICAgICBIVF9pbnNlcnQ6IFsiY3NzOyNyZXMiLCAyXSwKICAgICAgICAgIHJlcGxhY2VFOiAnLy9kaXZbQGlkPSJuYXZjbnQiXSB8IC8vZGl2W0BpZD0iZm9vdCJdW0Byb2xlPSJuYXZpZ2F0aW9uIl0nCiAgICAgICAgfQogICAgICB9LAogICAgICBiaW5nOiB7CiAgICAgICAgU2l0ZVR5cGVJRDogNSwKICAgICAgICBNYWluVHlwZTogIiNiX3Jlc3VsdHM+bGkiLAogICAgICAgIEZhdmljb25UeXBlOiAiLmJfYXR0cmlidXRpb24+Y2l0ZSIsCiAgICAgICAgRmF2aWNvbkFkZFRvOiAiaDIiLAogICAgICAgIENvdW50ZXJUeXBlOiAiI2JfcmVzdWx0cz5saVtjbGFzc349Yl9hbnNdPmgyLCNiX3Jlc3VsdHM+bGlbY2xhc3N+PWJfYWxnb10+aDIsI2JfcmVzdWx0cz5saVtjbGFzc349Yl9hbGdvXT5oMiIsCiAgICAgICAgQmxvY2tUeXBlOiAiaDIgYSIsCiAgICAgICAgcGFnZXI6IHsKICAgICAgICAgIG5leHRMaW5rOiAiLy9hW2NvbnRhaW5zKEBjbGFzcyxcInNiX3BhZ05cIildIiwKICAgICAgICAgIHBhZ2VFbGVtZW50OiAiaWQoXCJiX3Jlc3VsdHNcIikvbGlbbm90KGNvbnRhaW5zKEBjbGFzcyxcImJfcGFnXCIpIG9yIGNvbnRhaW5zKEBjbGFzcyxcImJfYW5zIGJfdG9wXCIpKV0iLAogICAgICAgICAgSFRfaW5zZXJ0OiBbImlkKFwiYl9yZXN1bHRzXCIpL2xpW0BjbGFzcz1cImJfcGFnXCJdIiwgMV0sCiAgICAgICAgICByZXBsYWNlRTogImlkKFwiYl9yZXN1bHRzXCIpLy9uYXZbQHJvbGU9XCJuYXZpZ2F0aW9uXCJdIiwKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGR1Y2s6IHsKICAgICAgICBTaXRlVHlwZUlEOiAxMCwKICAgICAgICBNYWluVHlwZTogIiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIiwKICAgICAgICBGYXZpY29uVHlwZTogIi5yZXN1bHRzX2xpbmtzX2RlZXAgLnJlc3VsdF9fdXJsX19kb21haW4iLAogICAgICAgIEZhdmljb25BZGRUbzogImgyIiwKICAgICAgICBDb3VudGVyVHlwZTogIiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIiwKICAgICAgICBCbG9ja1R5cGU6ICJoMiBhIiwKICAgICAgICBwYWdlcjogewogICAgICAgICAgbmV4dExpbms6ICIvL2FbY29udGFpbnMoQGNsYXNzLFwic2JfcGFnTlwiKV0iLAogICAgICAgICAgcGFnZUVsZW1lbnQ6ICJpZChcImJfcmVzdWx0c1wiKS9saVtub3QoY29udGFpbnMoQGNsYXNzLFwiYl9wYWdcIikgb3IgY29udGFpbnMoQGNsYXNzLFwiYl9hbnMgYl90b3BcIikpXSIsCiAgICAgICAgICBIVF9pbnNlcnQ6IFsiaWQoXCJiX3Jlc3VsdHNcIikvbGlbQGNsYXNzPVwiYl9wYWdcIl0iLCAxXSwKICAgICAgICAgIHJlcGxhY2VFOiAiaWQoXCJiX3Jlc3VsdHNcIikvL25hdltAcm9sZT1cIm5hdmlnYXRpb25cIl0iLAogICAgICAgIH0KICAgICAgfSwKICAgICAgZG9nZTogewogICAgICAgIFNpdGVUeXBlSUQ6IDExLAogICAgICAgIE1haW5UeXBlOiAiI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAiLAogICAgICAgIEZhdmljb25UeXBlOiAiLnJlc3VsdHNfbGlua3NfZGVlcCAucmVzdWx0X191cmxfX2RvbWFpbiIsCiAgICAgICAgRmF2aWNvbkFkZFRvOiAiaDIiLAogICAgICAgIENvdW50ZXJUeXBlOiAiI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgaDIiLAogICAgICAgIEJsb2NrVHlwZTogImgyIGEiLAogICAgICAgIHBhZ2VyOiB7CiAgICAgICAgICBuZXh0TGluazogIi8vYVtjb250YWlucyhAY2xhc3MsXCJzYl9wYWdOXCIpXSIsCiAgICAgICAgICBwYWdlRWxlbWVudDogImlkKFwiYl9yZXN1bHRzXCIpL2xpW25vdChjb250YWlucyhAY2xhc3MsXCJiX3BhZ1wiKSBvciBjb250YWlucyhAY2xhc3MsXCJiX2FucyBiX3RvcFwiKSldIiwKICAgICAgICAgIEhUX2luc2VydDogWyJpZChcImJfcmVzdWx0c1wiKS9saVtAY2xhc3M9XCJiX3BhZ1wiXSIsIDFdLAogICAgICAgICAgcmVwbGFjZUU6ICJpZChcImJfcmVzdWx0c1wiKS8vbmF2W0Byb2xlPVwibmF2aWdhdGlvblwiXSIsCiAgICAgICAgfQogICAgICB9LAogICAgICBtQmFpZHU6IHsKICAgICAgICBTaXRlVHlwZUlEOiA2LAogICAgICAgIE1haW5UeXBlOiAiI2JfcmVzdWx0cz5saSIsCiAgICAgICAgRmF2aWNvblR5cGU6ICIuYl9hdHRyaWJ1dGlvbj5jaXRlIiwKICAgICAgICBGYXZpY29uQWRkVG86ICJoMiIsCiAgICAgICAgQ291bnRlclR5cGU6ICIjYl9yZXN1bHRzPmxpW2NsYXNzfj1iX2Fuc10+aDIsI2JfcmVzdWx0cz5saVtjbGFzc349Yl9hbGdvXT5oMiwjYl9yZXN1bHRzPmxpW2NsYXNzfj1iX2FsZ29dPmgyIiwKICAgICAgICBCbG9ja1R5cGU6ICJoMiBhIiwKICAgICAgfSwKICAgICAgemhpaHU6IHsKICAgICAgICBTaXRlVHlwZUlEOiA3LAogICAgICB9LAogICAgICBiYWlkdV94dWVzaHU6IHsKICAgICAgICBTaXRlVHlwZUlEOiA4LAogICAgICAgIE1haW5UeXBlOiAiI2NvbnRlbnRfbGVmdCAucmVzdWx0IiwKICAgICAgICBTdHlwZV9Ob3JtYWw6ICJoMy50PmEsICNyZXN1bHRzIC5jLWNvbnRhaW5lcj4uYy1ibG9ja2EiLAogICAgICAgIEZhdmljb25UeXBlOiAiLnJlc3VsdC1vcCwgLmMtc2hvd3VybCIsIC8vIGJhaWR1IOS8vOS5juimgeaUueeJiOS6hu+8nwogICAgICAgIEZhdmljb25BZGRUbzogImgzIiwKICAgICAgICBDb3VudGVyVHlwZTogIiNjb250ZW50X2xlZnQ+I2RvdWJsZT5kaXZbc3JjaWRdICpbY2xhc3N+PXRdLFtjbGFzc349b3BfYmVzdF9hbnN3ZXJfcXVlc3Rpb25dLCNjb250ZW50X2xlZnQ+ZGl2W3NyY2lkXSAqW2NsYXNzfj10XSxbY2xhc3N+PW9wX2Jlc3RfYW5zd2VyX3F1ZXN0aW9uXSIsCiAgICAgICAgQmxvY2tUeXBlOiAiaDMgYSIsCiAgICAgIH0sCiAgICAgIG90aGVyOiB7CiAgICAgICAgU2l0ZVR5cGVJRDogOSwKICAgICAgfQogICAgfTsKICAgIGxldCBTaXRlVHlwZSA9IHsKICAgICAgQkFJRFU6IERCU2l0ZS5iYWlkdS5TaXRlVHlwZUlELAogICAgICBNQkFJRFU6IERCU2l0ZS5tQmFpZHUuU2l0ZVR5cGVJRCwKICAgICAgU09HT1U6IERCU2l0ZS5zb2dvdS5TaXRlVHlwZUlELAogICAgICBTTzogREJTaXRlLmhhb3NvdS5TaXRlVHlwZUlELAogICAgICBHT09HTEU6IERCU2l0ZS5nb29nbGUuU2l0ZVR5cGVJRCwKICAgICAgQklORzogREJTaXRlLmJpbmcuU2l0ZVR5cGVJRCwKICAgICAgRFVDSzogREJTaXRlLmR1Y2suU2l0ZVR5cGVJRCwKICAgICAgRE9HRTogREJTaXRlLmRvZ2UuU2l0ZVR5cGVJRCwKICAgICAgWkhJSFU6IERCU2l0ZS56aGlodS5TaXRlVHlwZUlELAogICAgICBCQUlEVV9YVUVTSFU6IERCU2l0ZS5iYWlkdV94dWVzaHUuU2l0ZVR5cGVJRCwKICAgICAgT1RIRVJTOiA4CiAgICB9OwogICAgbGV0IG90aGVyRGF0YSA9IHsKICAgICAgb3RoZXI6IHsKICAgICAgICBzaG93U2Vjb25kUGFuZWw6IGZhbHNlLCAvLyDlsZXnpLrnrKzkuoxwYW5lbAogICAgICAgIHNob3dCbG9ja0xpc3RBcmVhOiBmYWxzZSwgLy8gYmxvY2tMaXN05bGV56S65L2NdGV4dGFyZWEKICAgICAgICBhZGRCbG9ja0l0ZW06ICIiLCAgICAgLy8g55So5oi35omL5Yqo6L6T5YWl55qE5oum5oiq6KeE5YiZCiAgICAgICAgY3VySG9zdHM6IFtdLCAgICAgICAgIC8vIOWtmOaUvuW3sue7j+iuv+mXrueahGhvc3Rz5pWw5o2u5YaF5a65CiAgICAgIH0KICAgIH07ICAvLyDliLDml7blgJnmjILovb3liLBvdGhlcuS4igogICAgbGV0IEFsbERhdGEgPSB7CiAgICAgIEFDQ29uZmlnOiB7fSwKICAgICAgb3RoZXI6IG90aGVyRGF0YS5vdGhlciwKICAgICAgQ09OU1Q6IENPTlNULAogICAgICBsYW46IHsKICAgICAgICB1c2U6IHt9LAogICAgICAgIHpoX2NuOiB7CiAgICAgICAgICBtZW51X3RleHQ6ICLoh6rlrprkuYkiLAogICAgICAgICAgY3VyTGFuZzogInpoX2NuIiwKICAgICAgICAgIGZpZWxkc2V0X3BhbmVsOiB7CiAgICAgICAgICAgIHBhbmVsX3RpdGxlOiAiQUMt6YeN5a6a5ZCR6K6+572uICIgKyBHTV9pbmZvLnNjcmlwdC52ZXJzaW9uICsgKGluRXh0TW9kZT8gJ0V4dCc6JycpLAogICAgICAgICAgICBzZXR0aW5nX3BhbmVsOiB7CiAgICAgICAgICAgICAgcmVkaXJlY3RfdGV4dDogIuS4u+WKn+iDvS3ph43lrprlkJHlip/og70iLAogICAgICAgICAgICAgIHJlZGlyZWN0X3RpdGxlOiAi6YeN5a6a5ZCR5Yqf6IO955qE5byA5ZCv5LiO5ZCmIiwKICAgICAgICAgICAgICB1c2VFbl90ZXh0OiAiRW4tTGFuZ3VhZ2UiLAogICAgICAgICAgICAgIHVzZUVuX3RpdGxlOiAiVXNpbmcgRW5nbGlzaCBsYW5ndWFnZSB0byBkaXNwbGF5IiwKICAgICAgICAgICAgICBhZHNfdGV4dDogIumZhOWKoDEt5Y675bm/5ZGK5Yqf6IO9IiwKICAgICAgICAgICAgICBhZHNfdGl0bGU6ICLljrvpmaTpg6jliIbpobXpnaLnmoTlub/lkYrkv6Hmga/vvIzov5jkvaDkuIDkuKrlubLlh4DmlbTmtIHnmoTpobXpnaIiLAogICAgICAgICAgICAgIGF1dG9wYWdlX3RleHQ6ICLoh6rliqjnv7vpobUiLAogICAgICAgICAgICAgIGF1dG9wYWdlX3RpdGxlOiAi6Ieq5Yqo57+76aG1IiwKICAgICAgICAgICAgICBibG9ja2VuYWJsZV90ZXh0OiAi6ZmE5YqgMi3oh6rkuLvmi6bmiKrln5/lkI0iLAogICAgICAgICAgICAgIGJsb2NrZW5hYmxlX3RpdGxlOiAi54K55Ye76aG16Z2iYmxvY2vmjInpkq7mt7vliqDkvaDmg7PopoHpmpDol4/nmoTlnLDlnYDvvIzohJrmnKzlsIboh6rliqjpmpDol4/pg6jliIbnu5PmnpzkuLrlsI/mqKrluYXvvIxESVnmjInpkq7kuK3ngrnlh7vooajmoLzlhoXlrrnlj6/ku6Xlj5bmtojpmpDol48iLAogICAgICAgICAgICAgIGJsb2NrRGl5QnRuX3RleHQ6ICJESVkiLAogICAgICAgICAgICAgIGJsb2NrRGl5QnRuX3RpdGxlOiAi6Ieq5a6a5LmJQkxPQ0siLAogICAgICAgICAgICAgIGJsb2NrQXV0b1JlbW92ZV90ZXh0OiAi6ZqQ6JeP57uT5p6cIiwKICAgICAgICAgICAgICBibG9ja0F1dG9SZW1vdmVfdGl0bGU6ICLoh6rliqjpmpDol4/lt7Lnu4/lsY/olL3nmoTln5/lkI0iLAogICAgICAgICAgICAgIGJsb2NrQnRuU2hvd190ZXh0OiAi6ZqQ6JePJ2Jsb2NrJ+aMiemSriIsCiAgICAgICAgICAgICAgYmxvY2tCdG5TaG93X3RpdGxlOiAi6ZqQ6JeP5o6JYmxvY2vmjInpkq7nmoTmmL7npLoiLAoKICAgICAgICAgICAgICB1c2VyU3R5bGVfdGV4dDogIumZhOWKoDMt6Ieq5a6a5LmJ5qC35byPIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmFpZHVfbGFibGU6ICLlsZXlvIDnmb7luqborr7nva4+PiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JhaWR1X29yaWdpbjogIueZvuW6pi3ljp/lp4vmqKHlvI8iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iYWlkdV9odXlhbjogIueZvuW6pi3miqTnnLzmqKHlvI8iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iYWlkdV9iYWlkdUxpdGU6ICLnmb7luqZMaXRl5qC35byPIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmFpZHVfMWxpbmU6ICLljZXliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iYWlkdV8xbGluZV9lbnRlcjogIuWNleWIl+WxheS4rSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JhaWR1XzJsaW5lOiAi5Y+M5YiXIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmFpZHVfM2xpbmU6ICLkuInliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iYWlkdV80bGluZTogIuWbm+WIlyIsCgogICAgICAgICAgICAgIHVzZXJTdHlsZV9nb29nbGVfbGFibGU6ICLlsZXlvIDosLfmrYzorr7nva4+PiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV9vcmlnaW46ICLosLfmrYwt5Y6f5aeL5qih5byPIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZ29vZ2xlX2h1eWFuOiAi6LC35q2MLeaKpOecvOaooeW8jyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV9nb29nbGVMaXRlOiAi6LC35q2MLeS8quijheeZvuW6piIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV8xbGluZTogIuWNleWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV8xbGluZV9lbnRlcjogIuWNleWIl+WxheS4rSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV8ybGluZTogIuWPjOWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV8zbGluZTogIuS4ieWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV80bGluZTogIuWbm+WIlyIsCgogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nX2xhYmxlOiAi5bGV5byA5b+F5bqU6K6+572uPj4iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nX29yaWdpbjogIuW/heW6lC3ljp/lp4vmqKHlvI8iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nX2h1eWFuOiAi5b+F5bqULeaKpOecvOaooeW8jyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JpbmdfMWxpbmU6ICLljZXliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nXzFsaW5lX2VudGVyOiAi5Y2V5YiX5bGF5LitIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmluZ18ybGluZTogIuWPjOWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JpbmdfM2xpbmU6ICLkuInliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nXzRsaW5lOiAi5Zub5YiXIiwKCiAgICAgICAgICAgICAgdXNlclN0eWxlX3NvZ291X2xhYmxlOiAi5bGV5byA5pCc54uX6K6+572uPj4iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9zb2dvdV9vcmlnaW46ICLmkJzni5ct5Y6f5aeL5qih5byPIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfc29nb3VfaHV5YW46ICLmkJzni5ct5oqk55y85qih5byPIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfc29nb3VfMWxpbmU6ICLljZXliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9zb2dvdV8xbGluZV9lbnRlcjogIuWNleWIl+WxheS4rSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX3NvZ291XzJsaW5lOiAi5Y+M5YiXIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfc29nb3VfM2xpbmU6ICLkuInliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9zb2dvdV80bGluZTogIuWbm+WIlyIsCgogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrX2xhYmxlOiAi5bGV5byA6bit6bit5pCc6K6+572uPj4iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrX29yaWdpbjogIum4rem4rS3ljp/lp4vmqKHlvI8iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrX2h1eWFuOiAi6bit6bitLeaKpOecvOaooeW8jyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfbm9ybWFsOiAi6bit6bitLeW4uOingemFjee9riIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfMWxpbmU6ICLljZXliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrXzFsaW5lX2VudGVyOiAi5Y2V5YiX5bGF5LitIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZHVja18ybGluZTogIuWPjOWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfM2xpbmU6ICLkuInliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrXzRsaW5lOiAi5Zub5YiXIiwKCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfbGFibGU6ICLlsZXlvIDlpJrlkInorr7nva4+PiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2Vfb3JpZ2luOiAi5aSa5ZCJLeWOn+Wni+aooeW8jyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfaHV5YW46ICLlpJrlkIkt5oqk55y85qih5byPIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZG9nZV9ub3JtYWw6ICLlpJrlkIkt5bi46KeB6YWN572uIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZG9nZV8xbGluZTogIuWNleWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfMWxpbmVfZW50ZXI6ICLljZXliJflsYXkuK0iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kb2dlXzJsaW5lOiAi5Y+M5YiXIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZG9nZV8zbGluZTogIuS4ieWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfNGxpbmU6ICLlm5vliJciLAoKICAgICAgICAgICAgICBodXlhbk1vZGVfdGV4dDogIumZhOWKoDQt5oqk55y86aKc6Imy6YWN572uLeiHquWumuS5iTPkuK3pnIDlr7nlupTlvIDlkK8iLAogICAgICAgICAgICAgIGh1eWFuTW9kZV90aXRsZTogIu+8gemcgOimgeWcqOiHquWumuS5ieagt+W8j+S4reWQr+eUqOaKpOecvOaooeW8jyIsCiAgICAgICAgICAgICAgaHV5YW5Db2xvcl90ZXh0OiAi6buY6K6k5oqk55y86aKc6Imy77yaIiwKICAgICAgICAgICAgICBodXlhbkNvbG9yX3RpdGxlOiAi6Ieq5a6a5LmJ55qE5oqk55y86aKc6Imy77yaIiwKICAgICAgICAgICAgICBodXlhbkNvbG9yTW9yZV90ZXh0OiAi5pu05aSa6aKc6Imy6YCJ5oupIiwKCiAgICAgICAgICAgICAgZmF2aWNvbl90ZXh0OiAi6ZmE5YqgNS1GYXZpY29u5Yqf6IO9IiwKICAgICAgICAgICAgICBmYXZpY29uX3RpdGxlOiAiQUMt5re75YqgRmF2aWNvbiIsCiAgICAgICAgICAgICAgZmF2aWNvbl9kZWZhdWx0SWNvbl90ZXh0OiAiRmF2aWNvbum7mOiupOWbvuagh++8miIsCgogICAgICAgICAgICAgIHNlYXJjaE9yaWdpbl90ZXh0OiAi6ZmE5YqgNi3np7vpmaTnmb7luqbmkJzntKLpooTmtYso5paH5a2X6Ieq5Yqo5pCc57SiKSIsCiAgICAgICAgICAgICAgc2VhcmNoT3JpZ2luX3RpdGxlOiAiQUMt56e76Zmk5pCc57Si6aKE5rWLIiwKCiAgICAgICAgICAgICAgc2hvd1JpZ2h0X3RleHQ6ICLpmYTliqA3LeaYvuekuuWPs+S+p+agjyIsCiAgICAgICAgICAgICAgc2hvd0NvdW50ZXJfdGV4dDogIumZhOWKoDgt57yW5Y+35Yqf6IO9IiwKICAgICAgICAgICAgICBzaG93QUxpbmVfdGV4dDogIumZhOWKoDkt5paH5a2X5LiL5YiS57q/IiwKICAgICAgICAgICAgICBzaG93VXNlclN0eWxlX3RleHQ6ICLpmYTliqAxMC3oh6rlrprkuYnmoLflvI8iLAoKICAgICAgICAgICAgICBjb250YWN0TWVfdGV4dDogIuiBlOezu+S9nOiAhSzmj5Dlu7rorq4s5a+75rGC5biu5YqpLOiHquWumuS5ieagt+W8jyzohJrmnKzlrprliLbngrnmiJEiLAogICAgICAgICAgICAgIGNvbnRhY3RNZV91cmw6ICJodHRwczovL2FjLnR1amlkdS5jb20iLAoKICAgICAgICAgICAgICBzZXR0aW5nX3BhbmVsX3NlY29uZDogewogICAgICAgICAgICAgICAgYmFja0J0bl90ZXh0OiAiPC3ov5Tlm54iLAogICAgICAgICAgICAgICAgYmxvY2tMYWJlbF90ZXh0OiAiIOaLpuaIquWIl+ihqCAg5oOz6KaB55Sf5pWI55qE6K+d6ZyA6KaB5omL5Yqo5L+d5a2YIiwKICAgICAgICAgICAgICAgIGJsb2NrRWRpdEJ0bl90ZXh0OiAi57yW6L6R5YiX6KGoIiwKICAgICAgICAgICAgICAgIGJsb2NrRWRpdEJ0bkVuZF90ZXh0OiAi57uT5p2f57yW6L6RIiwKICAgICAgICAgICAgICAgIGFkZEJsb2NrTGFiZWxfdGV4dDogIuWFqOWMuemFjeaLpuaIqu+8miIsCiAgICAgICAgICAgICAgICBhZGRCdG5MYWJlbF90ZXh0OiAi5re75YqgIiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGNhbmNlbEJ0bl90ZXh0OiAi5Y+W5raIIiwKICAgICAgICAgICAgICBva0J0bl90ZXh0OiAi5L+d5a2YIiwKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgZW46IHsKICAgICAgICAgIG1lbnVfdGV4dDogIkNVU1RPTSIsCiAgICAgICAgICBjdXJMYW5nOiAiZW4iLAogICAgICAgICAgZmllbGRzZXRfcGFuZWw6IHsKICAgICAgICAgICAgcGFuZWxfdGl0bGU6ICJBQyBSZWRpcmVjdCBTZXR0aW5ncyAiICsgR01faW5mby5zY3JpcHQudmVyc2lvbiArIChpbkV4dE1vZGU/ICdFeHQnOicnKSwKICAgICAgICAgICAgc2V0dGluZ19wYW5lbDogewogICAgICAgICAgICAgIHJlZGlyZWN0X3RleHQ6ICJNYWluLVJlZGlyZWN0RnVuYyIsCiAgICAgICAgICAgICAgcmVkaXJlY3RfdGl0bGU6ICJUdXJuIG9uIG9yIG9mZiByZWRpcmVjdCIsCiAgICAgICAgICAgICAgdXNlRW5fdGV4dDogIkVuLUxhbmd1YWdlIiwKICAgICAgICAgICAgICB1c2VFbl90aXRsZTogIuS9v+eUqOiLseaWh+aYvuekuumhtemdoiIsCiAgICAgICAgICAgICAgYWRzX3RleHQ6ICJBZGQxLVJlbW92ZSBBZHMiLAogICAgICAgICAgICAgIGFkc190aXRsZTogIlJlbW92ZSB0aGUgYWRzIG9uIHRoZSBwYWdlLCBhbmQgcmV0dXJuIHlvdSBhIGNsZWFuIHBhZ2UiLAogICAgICAgICAgICAgIGF1dG9wYWdlX3RleHQ6ICJBdXRvIFBhZ2VyIiwKICAgICAgICAgICAgICBhdXRvcGFnZV90aXRsZTogIkF1dG8gUGFnZXIiLAogICAgICAgICAgICAgIGJsb2NrZW5hYmxlX3RleHQ6ICJBZGQyLUJsb2NrIGhvc3QiLAogICAgICAgICAgICAgIGJsb2NrZW5hYmxlX3RpdGxlOiAiQ2xpY2sgdGhlIEJsb2NrIGJ1dHRvbiB0byBhZGQgdGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gaGlkZS4gVGhlIHNjcmlwdCB3aWxsIGhpZGUgaXQgd2l0aCBzbWFsbCBiYW5uZXIgYXV0b21hdGljYWxseS4gRElZIGJ1dHRvbiBmb3IgZWRpdHRpbmcgdGhlIGhpZGluZyBsaXN0IiwKICAgICAgICAgICAgICBibG9ja0RpeUJ0bl90ZXh0OiAiRElZIiwKICAgICAgICAgICAgICBibG9ja0RpeUJ0bl90aXRsZTogIkVkaXQgQkxPQ0siLAogICAgICAgICAgICAgIGJsb2NrQXV0b1JlbW92ZV90ZXh0OiAiQXV0byByZW1vdmUiLAogICAgICAgICAgICAgIGJsb2NrQXV0b1JlbW92ZV90aXRsZTogInJlbW92ZSB0aGUgYmxvY2sgcmVzdWx0cyBhdXRvbWF0aWNhbGx5IiwKICAgICAgICAgICAgICBibG9ja0J0blNob3dfdGV4dDogIkhpZGUgJ0Jsb2NrJyBidXR0b24iLAogICAgICAgICAgICAgIGJsb2NrQnRuU2hvd190aXRsZTogIkhpZGUgJ0Jsb2NrJyBidXR0b24iLAoKICAgICAgICAgICAgICB1c2VyU3R5bGVfdGV4dDogIkFkZDMtQ3VzdG9tU3R5bGUiLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iYWlkdV9sYWJsZTogIkV4cGFuZCBCYWlkdSBTZXR0aW5ncz4+IiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmFpZHVfb3JpZ2luOiAiQmFpZHUtT3JpZ2luIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmFpZHVfaHV5YW46ICJCYWlkdS1FeWVTYXZlIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmFpZHVfYmFpZHVMaXRlOiAiQmFpZHVMaXRlU3R5bGUiLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iYWlkdV8xbGluZTogIlNpbmdsZVJvdyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JhaWR1XzFsaW5lX2VudGVyOiAiU2luZ2xlQ2VudGVyIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmFpZHVfMmxpbmU6ICJUd28iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iYWlkdV8zbGluZTogIlRocmVlIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmFpZHVfNGxpbmU6ICJGb3VyIiwKCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV9sYWJsZTogIkV4cGFuZCBHb29nbGUgU2V0dGluZ3M+PiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV9vcmlnaW46ICJHb29nbGUtT3JpZ2luIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZ29vZ2xlX2h1eWFuOiAiR29vZ2xlLUV5ZVNhdmUiLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9nb29nbGVfZ29vZ2xlTGl0ZTogIkZha2UgQmFpZHUiLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9nb29nbGVfMWxpbmU6ICJTaW5nbGVSb3ciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9nb29nbGVfMWxpbmVfZW50ZXI6ICJTaW5nbGVDZW50ZXIiLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9nb29nbGVfMmxpbmU6ICJUd28iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9nb29nbGVfM2xpbmU6ICJUaHJlZSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV80bGluZTogIkZvdXIiLAoKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmluZ19sYWJsZTogIkV4cGFuZCBCaW5nIFNldHRpbmdzPj4iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nX29yaWdpbjogIkJpbmctT3JpZ2luIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmluZ19odXlhbjogIkJpbmctRXllU2F2ZSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JpbmdfMWxpbmU6ICJTaW5nbGVSb3ciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nXzFsaW5lX2VudGVyOiAiU2luZ2xlQ2VudGVyIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmluZ18ybGluZTogIlR3byIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JpbmdfM2xpbmU6ICJUaHJlZSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JpbmdfNGxpbmU6ICJGb3VyIiwKCiAgICAgICAgICAgICAgdXNlclN0eWxlX3NvZ291X2xhYmxlOiAiRXhwYW5kIFNvR291IFNldHRpbmdzPj4iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9zb2dvdV9vcmlnaW46ICJTb0dvdS1PcmlnaW4iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9zb2dvdV9odXlhbjogIlNvR291LUV5ZVNhdmUiLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9zb2dvdV8xbGluZTogIlNpbmdsZVJvdyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX3NvZ291XzFsaW5lX2VudGVyOiAiU2luZ2xlQ2VudGVyIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfc29nb3VfMmxpbmU6ICJUd28iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9zb2dvdV8zbGluZTogIlRocmVlIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfc29nb3VfNGxpbmU6ICJGb3VyIiwKCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfbGFibGU6ICJFeHBhbmQgRHVja0R1Y2tHbyBTZXR0aW5ncz4+IiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZHVja19vcmlnaW46ICJEdWNrRHVjay1PcmlnaW4iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrX2h1eWFuOiAiRHVja0R1Y2stRXllU2F2ZSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfbm9ybWFsOiAiRHVja0R1Y2stTm9ybWFsIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZHVja18xbGluZTogIlNpbmdsZVJvdyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfMWxpbmVfZW50ZXI6ICJTaW5nbGVDZW50ZXIiLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrXzJsaW5lOiAiVHdvIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZHVja18zbGluZTogIlRocmVlIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZHVja180bGluZTogIkZvdXIiLAoKICAgICAgICAgICAgICB1c2VyU3R5bGVfZG9nZV9sYWJsZTogIkV4cGFuZCBEb2dlRG9nZSBTZXR0aW5ncz4+IiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZG9nZV9vcmlnaW46ICJEb2dlRG9nZS1PcmlnaW4iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kb2dlX2h1eWFuOiAiRG9nZURvZ2UtRXllU2F2ZSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2Vfbm9ybWFsOiAiRG9nZURvZ2UtTm9ybWFsIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZG9nZV8xbGluZTogIlNpbmdsZVJvdyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfMWxpbmVfZW50ZXI6ICJTaW5nbGVDZW50ZXIiLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kb2dlXzJsaW5lOiAiVHdvIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZG9nZV8zbGluZTogIlRocmVlIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZG9nZV80bGluZTogIkZvdXIiLAoKICAgICAgICAgICAgICBodXlhbk1vZGVfdGV4dDogIkFkZDQtRXllU2F2ZSBDb2xvciBTZXR0aW5nLU5lZWQgb3BlbmVkIGluIEFkZDMiLAogICAgICAgICAgICAgIGh1eWFuTW9kZV90aXRsZTogIu+8gU9wZW4gRXllU2F2ZSBNb2RlIGluIEN1c3RvbVN0eWxlIGlzIE11c3QiLAogICAgICAgICAgICAgIGh1eWFuQ29sb3JfdGV4dDogIkRlZmF1bHQgRXllU2F2ZSBDb2xvcu+8miIsCiAgICAgICAgICAgICAgaHV5YW5Db2xvcl90aXRsZTogIlRoZSBjb2xvciBvZiBFeWVTYXZl77yaIiwKICAgICAgICAgICAgICBodXlhbkNvbG9yTW9yZV90ZXh0OiAiTW9yZSBDb2xvciIsCgogICAgICAgICAgICAgIGZhdmljb25fdGV4dDogIkFkZDUtRmF2aWNvbi5GdW5jIiwKICAgICAgICAgICAgICBmYXZpY29uX3RpdGxlOiAiQUMtQWRkRmF2aWNvbiIsCiAgICAgICAgICAgICAgZmF2aWNvbl9kZWZhdWx0SWNvbl90ZXh0OiAiRmF2aWNvbkZhaWxlZEltZ++8mu+8miIsCgogICAgICAgICAgICAgIHNlYXJjaE9yaWdpbl90ZXh0OiAiQUMtUmVtb3ZlIEJhaWR1IEF1dG9QcmVkaWN0IGluIHRleHQgc2VhcmNoIiwKICAgICAgICAgICAgICBzZWFyY2hPcmlnaW5fdGl0bGU6ICJBZGQ2LVJlbW92ZSBCYWlkdSBBdXRvUHJlZGljdCBpbiB0ZXh0IHNlYXJjaCIsCgogICAgICAgICAgICAgIHNob3dSaWdodF90ZXh0OiAiQWRkNy1SaWdodCBTaWRlIENvbHVtbiIsCiAgICAgICAgICAgICAgc2hvd0NvdW50ZXJfdGV4dDogIkFkZDgtTnVtRnVuYyIsCiAgICAgICAgICAgICAgc2hvd0FMaW5lX3RleHQ6ICJBZGQ5LVRleHRVbmRlckxpbmUiLAogICAgICAgICAgICAgIHNob3dVc2VyU3R5bGVfdGV4dDogIkFkZDEwLVlvdXIgb3duIFN0eWxlIiwKCiAgICAgICAgICAgICAgY29udGFjdE1lX3RleHQ6ICJGb3IgY29udGFjdCB0aGUgd3JpdHRlciwgc3VnZ2VzdHMsIGFzayBmb3IgaGVscCB0aGVuIGNsaWNrIG1lIiwKICAgICAgICAgICAgICBjb250YWN0TWVfdXJsOiAiaHR0cHM6Ly9naXRodWIuY29tL2xhbmdyZW4xMzUzL0dNX3NjcmlwdC8iLAoKICAgICAgICAgICAgICBzZXR0aW5nX3BhbmVsX3NlY29uZDogewogICAgICAgICAgICAgICAgYmFja0J0bl90ZXh0OiAiPC1CYWNrIiwKICAgICAgICAgICAgICAgIGJsb2NrTGFiZWxfdGV4dDogIiZuYnNwO0Jsb2NrIExpc3QmbmJzcDsmbmJzcDtDbGljayBTYXZlIEJ1dHRvbiBpZiB5b3Ugd2FudCB3byBzYXZlIHRoZSBsaXN0IiwKICAgICAgICAgICAgICAgIGJsb2NrRWRpdEJ0bl90ZXh0OiAiRWRpdCBMaXN0IiwKICAgICAgICAgICAgICAgIGJsb2NrRWRpdEJ0bkVuZF90ZXh0OiAiRW5kIEVkaXQiLAogICAgICAgICAgICAgICAgYWRkQmxvY2tMYWJlbF90ZXh0OiAiQWRkIEJsb2NrIGl0ZW3vvJoiLAogICAgICAgICAgICAgICAgYWRkQnRuTGFiZWxfdGV4dDogIkFkZCIsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBjYW5jZWxCdG5fdGV4dDogIkNhbmNlbCIsCiAgICAgICAgICAgICAgb2tCdG5fdGV4dDogIlNhdmUiLAogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9OwogICAgbGV0IHZ1ZVZNID0gbnVsbDsKICAgIC8qKuWIneWni+WMluaJgOacieeahOiuvue9rioqLwogICAgUHJvbWlzZS5hbGwoW0dNLmdldFZhbHVlKCJDb25maWciKV0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgaWYgKGRhdGFbMF0gIT0gbnVsbCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBBQ0NvbmZpZyA9IEpTT04ucGFyc2UoZGF0YVswXSk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgQUNDb25maWcgPSBkYXRhWzBdOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBBQ0NvbmZpZyA9IERlZmF1bHRDb25maWc7CiAgICAgIH0KICAgICAgZm9yICh2YXIga2V5IGluIERlZmF1bHRDb25maWcpIHsKICAgICAgICBpZiAodHlwZW9mIChBQ0NvbmZpZ1trZXldKSA9PSAidW5kZWZpbmVkIikgewogICAgICAgICAgQUNDb25maWdba2V5XSA9IERlZmF1bHRDb25maWdba2V5XTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKEFDQ29uZmlnLmlzVXNlclN0eWxlRW5hYmxlID09PSBmYWxzZSAmJiAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSBBQ0NvbmZpZy5sYXN0U2F2ZVRpbWUgPiAyNTkyMDAwMDAwKSkgeyAvLyDlpKfnuqYzMOWkqeaXtumXtAogICAgICAgIC8vIOWmguaenOeUqOaIt+WPlua2iOS6huiuvue9ru+8jOW5tuS4lOmVv+aXtumXtCgz5aSpKeayoeaciei/m+ihjOi/h+WkhOeQhu+8jOmCo+S5iOebtOaOpeWwhuaVsOaNrue9ruepuiAtPiDnlKjkuo7liLfmlrDmlbDmja4KICAgICAgICBjb25zb2xlLmxvZygiYWMtYmFpZHUgY3NzIHJlc2V0IGZvciB0aW1lIik7CiAgICAgICAgQUNDb25maWcubGFzdFNhdmVUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgQUNDb25maWcuVXNlclN0eWxlVGV4dCA9IERlZmF1bHRDb25maWcuVXNlclN0eWxlVGV4dDsKICAgICAgfQogICAgICBBbGxEYXRhLkFDQ29uZmlnID0gQUNDb25maWc7CiAgICAgIERCQ29uZmlnID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShBQ0NvbmZpZykpOyAvLyDmmoLml7bkvZzkuLrkuIDkuKrljp/lp4vkv53lrZgKICAgICAgQWxsRGF0YS5sYW4udXNlID0gQUNDb25maWcuaXNFbkxhbmcgPyBBbGxEYXRhLmxhbi5lbiA6IEFsbERhdGEubGFuLnpoX2NuOwogICAgICAvLyDliJ3lp4vljJblrozmiJDkuYvlkI7miY3og73osIPnlKjmraPluLjlh73mlbAKICAgICAgY2FsbGJhY2soKTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChleGNlcHQpIHsKICAgICAgY29uc29sZS5sb2coZXhjZXB0KTsKICAgIH0pOwoKICAgIGZ1bmN0aW9uIFJlZ19HZXQoSFRNTCwgcmVnKSB7CiAgICAgIGxldCBSZWdFID0gbmV3IFJlZ0V4cChyZWcpOwogICAgICB0cnkgewogICAgICAgIHJldHVybiBSZWdFLmV4ZWMoSFRNTClbMV07CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gIiI7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBnZXRFbGVtZW50QnlYcGF0aChlLCB0LCByKSB7CiAgICAgIHIgPSByIHx8IGRvY3VtZW50LCB0ID0gdCB8fCByOwogICAgICB0cnkgewogICAgICAgIHJldHVybiByLmV2YWx1YXRlKGUsIHQsIG51bGwsIFhQYXRoUmVzdWx0LkZJUlNUX09SREVSRURfTk9ERV9UWVBFLCBudWxsKS5zaW5nbGVOb2RlVmFsdWU7CiAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICByZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKCLml6DmlYjnmoR4cGF0aCIpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0QWxsRWxlbWVudHMoZSwgdCwgciwgbiwgbykgewogICAgICBsZXQgZ2V0QWxsRWxlbWVudHNCeVhwYXRoID0gZnVuY3Rpb24oZSwgdCwgcikgewogICAgICAgIHJldHVybiByID0gciB8fCBkb2N1bWVudCwgdCA9IHQgfHwgciwgci5ldmFsdWF0ZShlLCB0LCBudWxsLCBYUGF0aFJlc3VsdC5PUkRFUkVEX05PREVfU05BUFNIT1RfVFlQRSwgbnVsbCk7CiAgICAgIH0KCiAgICAgIHZhciBpLCBzID0gW107CiAgICAgIGlmICghZSkgcmV0dXJuIHM7CiAgICAgIGlmIChyID0gciB8fCBkb2N1bWVudCwgbiA9IG4gfHwgd2luZG93LCBvID0gbyB8fCB2b2lkIDAsIHQgPSB0IHx8IHIsICJzdHJpbmciID09IHR5cGVvZiBlKSBpID0gMCA9PT0gZS5zZWFyY2goL15jc3M7L2kpID8gZnVuY3Rpb24gZ2V0QWxsRWxlbWVudHNCeUNTUyhlLCB0KSB7CiAgICAgICAgcmV0dXJuICh0IHx8IGRvY3VtZW50KS5xdWVyeVNlbGVjdG9yQWxsKGUpOwogICAgICB9KGUuc2xpY2UoNCksIHQpIDogZ2V0QWxsRWxlbWVudHNCeVhwYXRoKGUsIHQsIHIpOyBlbHNlIHsKICAgICAgICBpZiAoIShpID0gZShyLCBuLCBvKSkpIHJldHVybiBzOwogICAgICAgIGlmIChpLm5vZGVUeXBlKSByZXR1cm4gc1swXSA9IGksIHM7CiAgICAgIH0KICAgICAgcmV0dXJuIGZ1bmN0aW9uIG1ha2VBcnJheShlKSB7CiAgICAgICAgdmFyIHQsIHIsIG4sIG8gPSBbXTsKICAgICAgICBpZiAoZS5wb3ApIHsKICAgICAgICAgIGZvciAodCA9IDAsIHIgPSBlLmxlbmd0aDsgdCA8IHI7IHQrKykgKG4gPSBlW3RdKSAmJiAobi5ub2RlVHlwZSA/IG8ucHVzaChuKSA6IG8gPSBvLmNvbmNhdChtYWtlQXJyYXkobikpKTsKICAgICAgICAgIHJldHVybiBhKCkobyk7CiAgICAgICAgfQogICAgICAgIGlmIChlLml0ZW0pIHsKICAgICAgICAgIGZvciAodCA9IGUubGVuZ3RoOyB0Oykgb1stLXRdID0gZVt0XTsKICAgICAgICAgIHJldHVybiBvOwogICAgICAgIH0KICAgICAgICBpZiAoZS5pdGVyYXRlTmV4dCkgewogICAgICAgICAgZm9yICh0ID0gZS5zbmFwc2hvdExlbmd0aDsgdDspIG9bLS10XSA9IGUuc25hcHNob3RJdGVtKHQpOwogICAgICAgICAgcmV0dXJuIG87CiAgICAgICAgfQogICAgICB9KGkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNhbGxiYWNrKCkgewogICAgICBpZiAoQUNDb25maWcub2xkVmVyc2lvbiA9PT0gR01faW5mby5zY3JpcHQudmVyc2lvbikgewogICAgICAgIENPTlNULmhhc05ld0Z1bmNOZWVkRGlzcGxheSA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIENPTlNULmhhc05ld0Z1bmNOZWVkRGlzcGxheSA9IG5lZWREaXNwbGF5TmV3RnVuOwogICAgICB9CgogICAgICAhZnVuY3Rpb24gKCkgewogICAgICAgIGxldCBpbnNlcnRMb2NrZWQgPSBmYWxzZTsKICAgICAgICBpZiAodHlwZW9mIEdNX2dldFJlc291cmNlVGV4dCA9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgR00uZ2V0UmVzb3VyY2VUZXh0ID0gR01fZ2V0UmVzb3VyY2VUZXh0ID0gYXN5bmMgZnVuY3Rpb24gKGFSZXNvdXJjZU5hbWUpIHsKICAgICAgICAgICAgbGV0IHJlcyA9IGF3YWl0IChhd2FpdCBmZXRjaChhd2FpdCBHTS5nZXRSZXNvdXJjZVVybChhUmVzb3VyY2VOYW1lKSkpLnRleHQoKTsKICAgICAgICAgICAgbGV0IHNhdmVSZXMgPSBhd2FpdCBHTS5nZXRWYWx1ZShhUmVzb3VyY2VOYW1lKTsKICAgICAgICAgICAgaWYgKHR5cGVvZiAoc2F2ZVJlcykgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgR00uc2V0VmFsdWUoYVJlc291cmNlTmFtZSwgcmVzKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gc2F2ZVJlczsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoR01fZ2V0UmVzb3VyY2VUZXh0KSB7CiAgICAgICAgICAvLyDku4XlnKjmlK/mjIFHTV9nZXRSZXNvdXJjZVRleHTnmoTlrrnlmajkuIrov5vooYzliqjmgIHmlbDmja7mm7TmlrAKICAgICAgICAgIC8vIOS4lOiDvemYsuatouiwt+atjOeZvuW6pumhtemdouinhOWImeWkp+WPmOWKqOWPiOmcgOimgeabtOaWsOiEmuacrCAtIOeJueWIq+aYr+a2ieWPiue/u+mhteWPguaVsAogICAgICAgICAgbGV0IGNvbmZpZyA9IEdNX2dldFJlc291cmNlVGV4dCgiU2l0ZUNvbmZpZ1J1bGVzIik7CiAgICAgICAgICBldmFsKGNvbmZpZyk7CiAgICAgICAgICBpZiAodHlwZW9mIChvbmxpbmVEQikgPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcigi57q/5LiK5pWw5o2u5Li656m6Iik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBEQlNpdGUgPSBvbmxpbmVEQjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGxvY2F0aW9uLmhvc3QuaW5jbHVkZXMoInh1ZXNodS5iYWlkdS5jb20iKSkgewogICAgICAgICAgY3VyU2l0ZSA9IERCU2l0ZS5iYWlkdV94dWVzaHU7CiAgICAgICAgfSBlbHNlIGlmIChsb2NhdGlvbi5ob3N0LmluY2x1ZGVzKCIuYmFpZHUuY29tIikpIHsKICAgICAgICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50LnJlcGxhY2UoLyhhbmRyb2lkfG1vYmlsZXxpcGhvbmUpL2lnbSwgIiIpICE9PSBuYXZpZ2F0b3IudXNlckFnZW50KSB7CiAgICAgICAgICAgIGN1clNpdGUgPSBEQlNpdGUubUJhaWR1OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY3VyU2l0ZSA9IERCU2l0ZS5iYWlkdTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKGxvY2F0aW9uLmhvc3QuaW5jbHVkZXMoInpoaWh1LmNvbSIpKSB7CiAgICAgICAgICBjdXJTaXRlID0gREJTaXRlLnpoaWh1OwogICAgICAgIH0gZWxzZSBpZiAobG9jYXRpb24uaG9zdC5pbmNsdWRlcygic29nb3UiKSkgewogICAgICAgICAgY3VyU2l0ZSA9IERCU2l0ZS5zb2dvdTsKICAgICAgICB9IGVsc2UgaWYgKGxvY2F0aW9uLmhvc3QuaW5jbHVkZXMoInNvLmNvbSIpKSB7CiAgICAgICAgICBjdXJTaXRlID0gREJTaXRlLmhhb3NvdTsKICAgICAgICB9IGVsc2UgaWYgKGxvY2F0aW9uLmhvc3QuaW5jbHVkZXMoImdvb2dsZSIpKSB7CiAgICAgICAgICBjdXJTaXRlID0gREJTaXRlLmdvb2dsZTsKICAgICAgICB9IGVsc2UgaWYgKGxvY2F0aW9uLmhvc3QuaW5jbHVkZXMoImJpbmciKSkgewogICAgICAgICAgY3VyU2l0ZSA9IERCU2l0ZS5iaW5nOwogICAgICAgIH0gZWxzZSBpZiAobG9jYXRpb24uaG9zdC5pbmNsdWRlcygiZHVja2R1Y2tnbyIpKSB7CiAgICAgICAgICBjdXJTaXRlID0gREJTaXRlLmR1Y2s7CiAgICAgICAgfSBlbHNlIGlmIChsb2NhdGlvbi5ob3N0LmluY2x1ZGVzKCJkb2dlZG9nZSIpKSB7CiAgICAgICAgICBjdXJTaXRlID0gREJTaXRlLmRvZ2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGN1clNpdGUgPSBEQlNpdGUub3RoZXI7CiAgICAgICAgfQogICAgICAgIGN1clNpdGUucGFnZU51bSA9IDE7IC8vIOW9k+WJjemhteaVsAogICAgICAgIGN1clNpdGUucGFnZUxvYWRpbmcgPSBmYWxzZTsKICAgICAgICBjdXJTaXRlLnBhZ2VVcmwgPSAiIjsKICAgICAgICBpZiAoCiAgICAgICAgICAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5HT09HTEUgJiYgbG9jYXRpb24uaHJlZi5yZXBsYWNlKC90Ym09KGlzY2h8bGNsfHNob3B8ZmxtKS8sICIiKSAhPT0gbG9jYXRpb24uaHJlZiApIHx8CiAgICAgICAgICAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5CSU5HICYmIGxvY2F0aW9uLmhyZWYucmVwbGFjZSgvaW1hZ2VzXC9zZWFyY2gvLCAiIikgIT09IGxvY2F0aW9uLmhyZWYgKQogICAgICAgICkgewogICAgICAgICAgLy8g5Zu+54mH56uZIOOAgeWcsOWbvuermeOAgei0reeJqeermQogICAgICAgICAgY29uc29sZS5sb2coIueJueauiuermSzkuI3liqDovb3moLflvI/vvIzkuI3mt7vliqBtZW51Iik7CiAgICAgICAgICBDT05TVC5pc0dvb2dsZUltYWdlVXJsID0gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJBSURVKSB7CiAgICAgICAgICBDT05TVC51c2VJdGVtID0gQUNDb25maWcuYmFpZHU7CiAgICAgICAgfSBlbHNlIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkdPT0dMRSkgewogICAgICAgICAgQ09OU1QudXNlSXRlbSA9IEFDQ29uZmlnLmdvb2dsZTsKICAgICAgICB9IGVsc2UgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuQklORykgewogICAgICAgICAgQ09OU1QudXNlSXRlbSA9IEFDQ29uZmlnLmJpbmc7CiAgICAgICAgfSBlbHNlIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkRVQ0spIHsKICAgICAgICAgIENPTlNULnVzZUl0ZW0gPSBBQ0NvbmZpZy5kdWNrOwogICAgICAgIH0gZWxzZSBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5ET0dFKSB7CiAgICAgICAgICBDT05TVC51c2VJdGVtID0gQUNDb25maWcuZG9nZTsKICAgICAgICB9IGVsc2UgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuU09HT1UpIHsKICAgICAgICAgIENPTlNULnVzZUl0ZW0gPSBBQ0NvbmZpZy5zb2dvdTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgQ09OU1QudXNlSXRlbSA9IEFDQ29uZmlnLmJhaWR1OwogICAgICAgIH0KCiAgICAgICAgaWYoY3VyU2l0ZS5TaXRlVHlwZUlEID09IFNpdGVUeXBlLkJBSURVX1hVRVNIVSl7CiAgICAgICAgICBDT05TVC51c2VJdGVtLkFkc1N0eWxlTW9kZSA9IDI7IC8vIOWNleWIl+WxheS4reWNs+WPrwogICAgICAgIH0KCiAgICAgICAgaWYgKEFDQ29uZmlnLkFkc1N0eWxlRW5hYmxlKSB7CiAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlciA9IEZTQmFpZHUoKTsgLy8g5re75Yqg6K6+572u6aG5LeWNleWPjOWIl+aYvuekugogICAgICAgIH0KCiAgICAgICAgY29uc29sZS5sb2coIiVjW0FDLVJlZGlyZWN0XSAlY0xldCBNZSBJbnRyb2R1Y2UgeW91IGEgVmVyeSBHb29kIFNlYXJjaCBFbmdpbmXvvJolYyAlcyAlY1NlYXJjaCBFbmdpbmUuIiwgImZvbnQtd2VpZ2h0OmJvbGQ7Y29sb3I6Y29ybmZsb3dlcmJsdWUiLCAiY29sb3I6MCIsICJmb250LXdlaWdodDpib2xkO2NvbG9yOmRhcmtvcmFuZ2UiLCBDT05TVC51c2VJdGVtLm5hbWUucmVwbGFjZShDT05TVC51c2VJdGVtLm5hbWVbMF0sIENPTlNULnVzZUl0ZW0ubmFtZVswXS50b1VwcGVyQ2FzZSgpKSwgImZvbnQtd2VpZ2h0Om5vcm1hbDtjb2xvcjowIik7CgogICAgICAgIGxldCBTaXRlQmxvY2sgPSB7CiAgICAgICAgICAvKioKICAgICAgICAgICAqIOWIneWni+WMlkJsb2Nr5qC35byPCiAgICAgICAgICAgKi8KICAgICAgICAgIGluaXRTdHlsZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBBQ19hZGRTdHlsZSgiYnV0dG9uLmdoaGlkZXIuZ2hoYlthYy11c2VyLWFsdGVyPScxJ106OmJlZm9yZXtjb250ZW50Oiflj5bmtoggLSAnO30jc3AtYWMtY29udGFpbmVyIC5hYy1ibG9jay1pdGVte2NvbG9yOiNBQUE7bWFyZ2luLWxlZnQ6NDhweDt9I3NwLWFjLWNvbnRhaW5lciAuYWMtYmxvY2staXRlbWRlbHtmbG9hdDpyaWdodDttYXJnaW4tbGVmdDowO3BhZGRpbmc6MCAyMHB4O2N1cnNvcjpwb2ludGVyO30jc3AtYWMtY29udGFpbmVyIC5hYy1ibG9jay1pdGVtZGVsOmhvdmVye2NvbG9yOnJlZDt9I3NwLWFjLWNvbnRhaW5lciAuYWMtYmxvY2staGlnaHtjb2xvcjojMDAwO30uYWMtYmxvY2tMaXN0IGxpOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2EzY2FmZjtjb2xvcjp3aGl0ZSAhaW1wb3J0YW50O2N1cnNvcjpwb2ludGVyO30gKlthYy1uZWVkaGlkZV0gKntkaXNwbGF5Om5vbmV9ICpbYWMtbmVlZGhpZGVdIC5ibG9ja1Nob3d7ZGlzcGxheTp1bnNldDtjdXJzb3I6cG9pbnRlcjt9ICpbYWMtbmVlZGhpZGVdIC5ibG9ja1Nob3c6aG92ZXJ7Ym9yZGVyOjFweCBzb2xpZCAjREREfWJ1dHRvbi5naGhpZGVye2NvbG9yOiM1NTU7YmFja2dyb3VuZC1jb2xvcjojZmNmY2ZjO2ZvbnQtZmFtaWx5OnNhbnMtc2VyaWY7bWFyZ2luOmF1dG8gMnB4O2JvcmRlcjoxcHggc29saWQgI2NjYztib3JkZXItcmFkaXVzOjRweDtwYWRkaW5nOjJweCAzcHh9YnV0dG9uLmdoaGlkZXJ7Zm9udC1zaXplOjEycHh9YnV0dG9uLmdoaGlkZXI6aG92ZXJ7Y29sb3I6IzAwNmFmZjtiYWNrZ3JvdW5kOiNmZmZ9IiwKICAgICAgICAgICAgICAiQUMtQmxvY2tTdHlsZSIpOwogICAgICAgICAgfSwKICAgICAgICAgIC8qKgogICAgICAgICAgICog5Yid5aeL5YyW5bGP6JS95oyJ6ZKu5Yqg6L29CiAgICAgICAgICAgKi8KICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbGV0IGNoZWNrTm9kZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGN1clNpdGUuTWFpblR5cGUgKyAiOm5vdChbYWNibG9ja10pIik7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hlY2tOb2Rlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBsZXQgY3VyTm9kZSA9IGNoZWNrTm9kZXNbaV07CiAgICAgICAgICAgICAgICBsZXQgZmF2aWNvbk5vZGUgPSBjdXJOb2RlLnF1ZXJ5U2VsZWN0b3IoY3VyU2l0ZS5GYXZpY29uVHlwZSk7CiAgICAgICAgICAgICAgICAvLyBpZihjdXJOb2RlLmhhc0F0dHJpYnV0ZSgiYWNibG9jayIpKSBjb250aW51ZTsKICAgICAgICAgICAgICAgIGxldCBob3N0ID0gZ2V0Tm9kZUhvc3QoZmF2aWNvbk5vZGUpLmN1ckhvc3Q7CiAgICAgICAgICAgICAgICAvLyBpZihob3N0ID09IG51bGwpIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgbGV0IGZhTm9kZSA9IGN1ck5vZGUucXVlcnlTZWxlY3RvcihjdXJTaXRlLkJsb2NrVHlwZSk7CiAgICAgICAgICAgICAgICBsZXQgbm9kZVN0eWxlID0gImRpc3BsYXk6dW5zZXQ7IjsKICAgICAgICAgICAgICAgIGlmIChBQ0NvbmZpZy5pc0Jsb2NrQnRuTm90RGlzcGxheSkgewogICAgICAgICAgICAgICAgICBub2RlU3R5bGUgPSAiZGlzcGxheTpub25lOyI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmYU5vZGUuaW5zZXJ0QWRqYWNlbnRIVE1MKCJhZnRlcmVuZCIsIGA8YnV0dG9uIHN0eWxlPScke25vZGVTdHlsZX0nIGNsYXNzPSdnaGhpZGVyIGdoaGInIGhyZWY9IiR7ZmF2aWNvbk5vZGUuaHJlZiB8fCBmYXZpY29uTm9kZS5pbm5lclRleHR9IiBtZXRhPSIke2hvc3R9IiBkYXRhLWhvc3Q9IiR7aG9zdH0iIHRpdGxlPScke3RoaXMuZ2V0QmxvY2tCdG5UaXRsZShob3N0KX0nPmJsb2NrPC9idXR0b24+YCk7CgogICAgICAgICAgICAgICAgY3VyTm9kZS5zZXRBdHRyaWJ1dGUoImFjYmxvY2siLCAiMCIpOwogICAgICAgICAgICAgICAgY3VyTm9kZS5zZXRBdHRyaWJ1dGUoImFjYmxvY2siLCAiMCIpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5pbml0TGlzdGVuZXIoKTsKICAgICAgICAgICAgdGhpcy5yZW5kZXJEaXNwbGF5KCk7CiAgICAgICAgICB9LAogICAgICAgICAgZ2V0QmxvY2tCdG5UaXRsZShob3N0KXsKICAgICAgICAgICAgcmV0dXJuIGDngrnlh7vljbPlj6/lsY/olL0gJHtob3N0fSDmlL7lvIDvvIzpnIDopoHlnKjoh6rlrprkuYnkuK3miYvliqjphY3nva7mlL7lvIBgOwogICAgICAgICAgfSwKICAgICAgICAgIGluaXRMaXN0ZW5lcjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsZXQgY2hlY2tOb2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImJ1dHRvbi5naGhpZGVyOm5vdChbYWNFbnZdKSIpOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoZWNrTm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBjaGVja05vZGVzW2ldLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgdGhpcy5kb0hpZGVFbnYpOwogICAgICAgICAgICAgIGNoZWNrTm9kZXNbaV0uc2V0QXR0cmlidXRlKCJhY0VudiIsICIwIik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBkb0hpZGVFbnY6IGZ1bmN0aW9uIChlbnYpIHsKICAgICAgICAgICAgLy8g5YWI5o+S5YWl5pWw5o2uLS0t6K6w5b6X6L+Y6KaB5YaZ5YWl5a2Y5YKoCiAgICAgICAgICAgIGxldCBub2RlID0gZW52LnNvdXJjZVRhcmdldCB8fCBlbnYudGFyZ2V0OwogICAgICAgICAgICBsZXQgaG9zdCA9IG5vZGUuZGF0YXNldC5ob3N0OwogICAgICAgICAgICBpZiAobm9kZS5nZXRBdHRyaWJ1dGUoImFjLXVzZXItYWx0ZXIiKSA9PSAxKSB7CiAgICAgICAgICAgICAgLy8g5bey57uP5bGP6JS95LmL5ZCO77yM5YaN5qyh54K55Ye7YmxvY2vlupTor6XmmK/lj5bmtojnirbmgIEKICAgICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZSgiYWMtdXNlci1hbHRlciIpOwogICAgICAgICAgICAgIEFDQ29uZmlnLlVzZXJCbG9ja0xpc3QuYWNyZW1vdmUoaG9zdCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8g5q2j5bi45bGP6JS95pON5L2cCiAgICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoImFjLXVzZXItYWx0ZXIiKTsKICAgICAgICAgICAgICBBQ0NvbmZpZy5Vc2VyQmxvY2tMaXN0LmFjcHVzaChob3N0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBEQkNvbmZpZy5Vc2VyQmxvY2tMaXN0ID0gQUNDb25maWcuVXNlckJsb2NrTGlzdDsKICAgICAgICAgICAgR01fc2V0VmFsdWUoIkNvbmZpZyIsIEpTT04uc3RyaW5naWZ5KERCQ29uZmlnKSk7IC8vIOeCueWHu+S4gOasoe+8jOS/neWtmOS4gOasoQogICAgICAgICAgICBTaXRlQmxvY2sucmVuZGVyRGlzcGxheSgpOwogICAgICAgICAgICBlbnYuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICB9LAogICAgICAgICAgLy8g5Yi35paw5pi+56S65pWI5p6cLS3ogJfml7bmk43kvZwKICAgICAgICAgIHJlbmRlckRpc3BsYXk6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbGV0IGNoZWNrTm9kZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGN1clNpdGUuTWFpblR5cGUpOwogICAgICAgICAgICBsZXQgZmxhZyA9ICJhYy1uZWVkaGlkZSI7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hlY2tOb2Rlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBsZXQgY3VyTm9kZSA9IGNoZWNrTm9kZXNbaV07CiAgICAgICAgICAgICAgICBsZXQge2N1ckhvc3QsIGN1clVybH0gPSBnZXROb2RlSG9zdChjdXJOb2RlLnF1ZXJ5U2VsZWN0b3IoY3VyU2l0ZS5GYXZpY29uVHlwZSkpOwogICAgICAgICAgICAgICAgY3VyVXJsID0gY3VyVXJsIHx8ICIiOwogICAgICAgICAgICAgICAgaWYgKGN1ckhvc3QgPT0gbnVsbCkgY29udGludWU7CiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGxldCBCbG9ja0J0biA9IGN1ck5vZGUucXVlcnlTZWxlY3RvcigiLmdoaGlkZXIuZ2hoYiIpOwogICAgICAgICAgICAgICAgICBCbG9ja0J0bi5kYXRhc2V0Lmhvc3QgPSBCbG9ja0J0bi5kYXRhc2V0Lm1ldGEgPSBjdXJIb3N0OwogICAgICAgICAgICAgICAgICBCbG9ja0J0bi50aXRsZSA9IHRoaXMuZ2V0QmxvY2tCdG5UaXRsZShjdXJIb3N0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChjdXJOb2RlLnF1ZXJ5U2VsZWN0b3IoImJ1dHRvblthYy11c2VyLWFsdGVyXSIpICE9IG51bGwpIGNvbnRpbnVlOyAvLyDnlKjmiLfmiYvliqjngrnov4fmmL7npLrnmoTvvIzpgqPkuYjot7Pov4djaGVjawogICAgICAgICAgICAgICAgbGV0IHJlZ0xpc3QgPSB2dWVWTS5jYWxfVXNlckJsb2NrTGlzdFJlZ2V4OyAvLyDkvb/nlKhWdWXnmoRjb21wdXRlZOWxnuaAp+iuoeeul+eahOaVsOaNruWAvO+8jOS4gOiIrOagueacrOS4jeabtOaWsAogICAgICAgICAgICAgICAgaWYgKCFjdXJVcmwuaW5jbHVkZXMoInd3dy5iYWlkdS5jb20vbGluayIpICYmIHJlZ0xpc3QuZmluZEluZGV4KG9uZSA9PiB7CiAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uZS50ZXN0KGN1ckhvc3QpIHx8IG9uZS50ZXN0KGN1clVybCk7IC8vIOiAl+aXtuaTjeS9nAogICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0gPT09IGN1ckhvc3Q7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pID49IDApIHsKICAgICAgICAgICAgICAgICAgLy8g5Y+q5qOA5p+l5Zyo5bGP6JS96KGo5Lit55qE5pWw5o2uCiAgICAgICAgICAgICAgICAgIGlmICghY3VyTm9kZS5oYXNBdHRyaWJ1dGUoZmxhZykpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoQUNDb25maWcuaXNCbG9ja0Rpc3BsYXkpIHsgLy8g5a+55LqO5LiN5pi+56S655qE5pWw5o2u5Y+v5Lul6L+b6KGM56e76Zmk5pON5L2cCiAgICAgICAgICAgICAgICAgICAgICBjdXJOb2RlLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGxldCBjdXJUaXRsZSA9IGN1ck5vZGUucXVlcnlTZWxlY3RvcihjdXJTaXRlLkJsb2NrVHlwZSk7CiAgICAgICAgICAgICAgICAgICAgY3VyVGl0bGUgPSBjdXJUaXRsZS5pbm5lclRleHQgfHwgY3VyVGl0bGUudGV4dENvbnRlbnQ7CgogICAgICAgICAgICAgICAgICAgIGlmIChjdXJOb2RlLmhhc0F0dHJpYnV0ZShmbGFnKSkgewogICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIuWGsueqgeS6hu+8ge+8ge+8gSIpOwogICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBjdXJOb2RlLnNldEF0dHJpYnV0ZShmbGFnLCAiMSIpOwogICAgICAgICAgICAgICAgICAgIGN1ck5vZGUuaW5zZXJ0QWRqYWNlbnRIVE1MKCJhZnRlckJlZ2luIiwgYDxzcGFuIGNsYXNzPSJibG9ja1Nob3ciIHRpdGxlPSLlpoLmnpzpnIDopoHkuIDnm7TmmL7npLrvvIzor7flnKjoh6rlrprkuYnkuK1ESVnnm67lvZXnp7vpmaTmnKzlnLDlnYAiPiR7Y3VyVGl0bGV9Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IC1ibG9jayBieSAke2N1ckhvc3R9PC9zcGFuPmApOwoKICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24gKHhjdXIpIHsKICAgICAgICAgICAgICAgICAgICAgIC8vIOW3sue7j+Wxj+iUveS5i+WQjueahOWGheWuue+8jOeCueWHu+S4gOS4i+aYvuekuuWOn+Wni+WGheWuuQogICAgICAgICAgICAgICAgICAgICAgeGN1ci5xdWVyeVNlbGVjdG9yKCIuYmxvY2tTaG93IikuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbiAoZW52KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCJidXR0b24uZ2hoaWRlciIpLnNldEF0dHJpYnV0ZSgiYWMtdXNlci1hbHRlciIsICIxIik7IC8vIOi/meS4quWxnuaAp+eUqOS6juS/neaMgeWcqERPTeabtOaWsOaXtu+8jOaMiemSruS4jeWPmAogICAgICAgICAgICAgICAgICAgICAgICB4Y3VyLnJlbW92ZUF0dHJpYnV0ZShmbGFnKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2FmZUZ1bmN0aW9uKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB4Y3VyLnF1ZXJ5U2VsZWN0b3IoIi5ibG9ja1Nob3ciKS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVudi5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pKGN1ck5vZGUpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBjdXJOb2RlLnJlbW92ZUF0dHJpYnV0ZShmbGFnKTsKICAgICAgICAgICAgICAgICAgc2FmZUZ1bmN0aW9uKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBjdXJOb2RlLnF1ZXJ5U2VsZWN0b3IoIi5ibG9ja1Nob3ciKS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIGZ1bmN0aW9uIGFkZFN0eWxlKGNzcykgeyAvL+a3u+WKoENTU+eahOS7o+eggS0tY29weeeahAogICAgICAgICAgbGV0IHBpID0gZG9jdW1lbnQuY3JlYXRlUHJvY2Vzc2luZ0luc3RydWN0aW9uKAogICAgICAgICAgICAneG1sLXN0eWxlc2hlZXQnLAogICAgICAgICAgICAndHlwZT0idGV4dC9jc3MiIG11c3Q9ImZhbHNlIiBocmVmPSJkYXRhOnRleHQvY3NzO3V0Zi04LCcgKyBlbmNvZGVVUklDb21wb25lbnQoY3NzKSArICciJwogICAgICAgICAgKTsKICAgICAgICAgIHJldHVybiBkb2N1bWVudC5pbnNlcnRCZWZvcmUocGksIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoQUNDb25maWcuaXNBZHNFbmFibGUpIHsKICAgICAgICAgIC8vIGRpc3BsYXnlt7Lnu4/ml6Dms5XpmpDol4/ku5bku6zkuobvvIzpnIDopoHnlKjnu53lr7nnmoTpmpDol48KICAgICAgICAgIGFkZFN0eWxlKCIjYm90dG9tYWRze2Rpc3BsYXk6bm9uZTt9ICNjb250ZW50X2xlZnQ+ZGl2Om5vdChbaWRdKT5kaXZbY21hdGNoaWRdLCAjY29udGVudF9sZWZ0PmRpdltpZCo9JzMwMCddOm5vdChbY2xhc3MqPSdyZXN1bHQnXSksI2NvbnRlbnRfcmlnaHQgdGQ+ZGl2Om5vdChbaWRdKSwjY29udGVudF9yaWdodD5icntwb3NpdGlvbjphYnNvbHV0ZTt0b3A6LTY2NjZweDt9Iik7CiAgICAgICAgfQogICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkdPT0dMRSAmJiBBQ0NvbmZpZy5pc0dvb2xlSW5CYWlkdU1vZGVFbmFibGUpIHsKICAgICAgICAgIHNhZmVXYWl0RnVuYygiI2xvZ28gaW1nLCAjbG9nb2NvbnQgaW1nIiwgZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgICAgICAgbGV0IGZhTm9kZSA9IG5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlOwogICAgICAgICAgICBmYU5vZGUuY2xhc3NMaXN0LmFkZCgiYmFpZHUiKTsKICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoInNyYyIpOwogICAgICAgICAgICBub2RlLnNyYyA9ICJodHRwczovL3BpYy5ybWIuYmRzdGF0aWMuY29tL2M4NjI1NWU4MDI4Njk2MTM5ZDNlM2U0YmI0NGMwNDdiLnBuZyI7CiAgICAgICAgICAgIG5vZGUud2lkdGggPSAiMTI1IjsKICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoImhlaWdodCIpOwogICAgICAgICAgfSk7CiAgICAgICAgICBzYWZlV2FpdEZ1bmMoIiNtYWluIC5sb2dvIGltZ1thbHQ9J0dvb2dsZSddIiwgZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoInNyY3NldCIpOwogICAgICAgICAgICBub2RlLnNyYyA9ICJodHRwczovL3d3dy5iYWlkdS5jb20vaW1nL2JkX2xvZ28xLnBuZz93aGVyZT1zdXBlciI7CiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCJoZWlnaHQiLCAiNTkiKTsKICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICBzYWZlV2FpdEZ1bmMoImZvcm1bcm9sZT0nc2VhcmNoJ10gLmxvZ28gaW1nIiwgZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoInNyY3NldCIpOwogICAgICAgICAgICBub2RlLnNyYyA9ICJodHRwczovL3d3dy5iYWlkdS5jb20vaW1nL2JkX2xvZ28xLnBuZz93aGVyZT1zdXBlciI7CiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCJoZWlnaHQiLCAiNTkiKTsKICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IGRvY3VtZW50LnRpdGxlLnJlcGxhY2UoL15Hb29nbGUvLCAi55m+5bqm5LiA5LiL77yM5L2g5bCx55+l6YGTIikKICAgICAgICAgIC5yZXBsYWNlKC8gLSBHb29nbGUg5pCc57SiLywgIl/nmb7luqbmkJzntKIiKQogICAgICAgICAgLnJlcGxhY2UoLyAtIEdvb2dsZSBTZWFyY2gvLCAiX+eZvuW6puaQnOe0oiIpOwogICAgICAgICAgc2FmZVdhaXRGdW5jKCJoZWFkIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsZXQgbGlua1RhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImxpbmtbdHlwZT0naW1hZ2UveC1pY29uJ10iKSB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7CiAgICAgICAgICAgIGxpbmtUYXJnZXQudHlwZSA9ICdpbWFnZS94LWljb24nOwogICAgICAgICAgICBsaW5rVGFyZ2V0LnJlbCA9ICdzaG9ydGN1dCBpY29uJzsKICAgICAgICAgICAgbGlua1RhcmdldC5ocmVmID0gJ2h0dHBzOi8vd3d3LmJhaWR1LmNvbS9mYXZpY29uLmljbyc7CiAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGlua1RhcmdldCk7CiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgICBpZiAoQUNDb25maWcubm9ybWFsaXplRHVjayAmJiBjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkRVQ0spIHsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIERERy5zZXR0aW5ncy5zZXQoImtuIiwgMSwgeyAgLy8g5paw56qX5Y+j5omT5byA6aG16Z2iCiAgICAgICAgICAgICAgICBzYXZlVG9DbG91ZDogdHJ1ZSwKICAgICAgICAgICAgICAgIGZvcmNlVGhlbWU6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBEREcuc2V0dGluZ3Muc2V0KCJrYXYiLCAxLCB7IC8vIOi/nue7reaYvuekuuaQnOe0oue7k+aenAogICAgICAgICAgICAgICAgc2F2ZVRvQ2xvdWQ6IHRydWUsCiAgICAgICAgICAgICAgICBmb3JjZVRoZW1lOiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgNTAwMCk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEICE9PSBTaXRlVHlwZS5PVEhFUlMpIHsKICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NTm9kZUluc2VydGVkJywgTWFpbkNhbGxiYWNrLCBmYWxzZSk7CiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgTWFpbkNhbGxiYWNrLCBmYWxzZSk7CiAgICAgICAgICAgIFJBRkludGVydmFsKGZ1bmN0aW9uICgpewogICAgICAgICAgICAgIGlmIChkb2N1bWVudC5ib2R5ICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICFkb2N1bWVudC5ib2R5Lmhhc0F0dHJpYnV0ZShDT05TVC51c2VJdGVtLm5hbWUpICYmIGRvY3VtZW50LmJvZHkuc2V0QXR0cmlidXRlKENPTlNULnVzZUl0ZW0ubmFtZSwgIjEiKTsKICAgICAgICAgICAgICAgICFkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucyhDT05TVC51c2VJdGVtLm5hbWUpICYmIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChDT05TVC51c2VJdGVtLm5hbWUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoQUNDb25maWcuQWRzU3R5bGVFbmFibGUpIHsgLy8g5Y2V54us5LiN6ZyA6KaB5a6a5pe25ZmoLemgu+e5geinpuWPkS3ovb3lhaVjc3MKICAgICAgICAgICAgICAgIEZTQmFpZHUoKTsKICAgICAgICAgICAgICAgIEFkZEN1c3RvbVN0eWxlKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCAyMzApOwogICAgICAgICAgICBSQUZJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmFwaWREZWFsKCk7IC8vIOWumuacn+iwg+eUqO+8jOmBv+WFjeacieaXtuWAmURPTeaPkuWFpeayoeacieaJp+ihjOWvvOiHtOeahOmXrumimAogICAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJBSURVICYmIGxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoInRuPW5ld3MiKSkgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zZXRBdHRyaWJ1dGUoIm5ld3MiLCAiMSIpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUF0dHJpYnV0ZSgibmV3cyIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgODAwKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICB9CiAgICAgICAgc2FmZVdhaXRGdW5jKCIjc3AtYWMtY29udGVudCIsIGZ1bmN0aW9uIChjaGVja05vZGUpIHsKICAgICAgICAgIHZhciBvcHRpb25zID0gewogICAgICAgICAgICBlbDogY2hlY2tOb2RlLAogICAgICAgICAgICBkYXRhOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIEFsbERhdGE7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG1ldGhvZHM6IHsKICAgICAgICAgICAgICBsYWJlbFNob3dIaWRlRW52KGUpIHsKICAgICAgICAgICAgICAgIGxldCBjdXIgPSBlLnNyY0VsZW1lbnQgfHwgZS50YXJnZXQ7CiAgICAgICAgICAgICAgICBsZXQgY2xhc3NOYW1lID0gY3VyLnBhcmVudE5vZGUuY2xhc3NOYW1lLnJlcGxhY2UoImNvbnRhaW5lci1sYWJlbCAiLCAiIik7CiAgICAgICAgICAgICAgICBBQ19hZGRTdHlsZSgiLlhYPmxhYmVsLC5YWD5icntkaXNwbGF5OnVuc2V0ICFpbXBvcnRhbnQ7fS5YWD4ubGFiZWxfaGlkZXtkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9Ii5yZXBsYWNlKC9YWC9nbSwgY2xhc3NOYW1lKSwKICAgICAgICAgICAgICAgICAgIkFDLVNob3dIaWRlSXRlbS0iICsgY2xhc3NOYW1lLCAiYm9keSIpOwogICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHN5bmNUb0Jsb2NrTGlzdChlbnYpIHsKICAgICAgICAgICAgICAgIHRoaXMuQUNDb25maWcuVXNlckJsb2NrTGlzdCA9IGVudi50YXJnZXQudmFsdWUuc3BsaXQoIlxuIikuZmlsdGVyKGl0ZW0gPT4gaXRlbSAhPT0gJycpOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgcmVtb3ZlQUJsb2NrTGlzdEl0ZW0oZSkgewogICAgICAgICAgICAgICAgLy8g54K55Ye756e76Zmk5p+Q5LiqaG9zdOaVsOaNruaXtgogICAgICAgICAgICAgICAgbGV0IHRhcmdldCA9IGUuc3JjRWxlbWVudCB8fCBlLnRhcmdldDsKICAgICAgICAgICAgICAgIGlmICh0YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAibGFiZWwiKSB7CiAgICAgICAgICAgICAgICAgIGxldCBob3N0ID0gdGFyZ2V0LmRhdGFzZXQuaG9zdDsKICAgICAgICAgICAgICAgICAgQUNDb25maWcuVXNlckJsb2NrTGlzdC5hY3JlbW92ZShob3N0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGNrQWRkUnVsZSgpIHsKICAgICAgICAgICAgICAgIC8vIOaJi+WKqOWinuWKoOenu+mZpOinhOWImQogICAgICAgICAgICAgICAgQUNDb25maWcuVXNlckJsb2NrTGlzdC5hY3B1c2godGhpcy5vdGhlci5hZGRCbG9ja0l0ZW0pOwogICAgICAgICAgICAgICAgdGhpcy5vdGhlci5hZGRCbG9ja0l0ZW0gPSAiIjsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGxvYWRDdXN0b21TdHlsZSgpIHsKICAgICAgICAgICAgICAgIEFDX2FkZFN0eWxlKEFDQ29uZmlnLlVzZXJTdHlsZVRleHQsICJBQy11c2VyU3R5bGUiLCAiaGVhZCIsIHRydWUpOyAvLyDnlKjmiLfoh6rlrprkuYnnmoTmoLflvI/ooagKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHNhdmVDb25maWcoKSB7CiAgICAgICAgICAgICAgICB0aGlzLkFDQ29uZmlnLmxhc3RTYXZlVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgICAgICAgICAgR01fc2V0VmFsdWUoIkNvbmZpZyIsIEpTT04uc3RyaW5naWZ5KHRoaXMuQUNDb25maWcpKTsKICAgICAgICAgICAgICAgIGlmKCF0aGlzLkFDQ29uZmlnLmRvRGlzYWJsZVN1Zyl7CiAgICAgICAgICAgICAgICAgIGFjU2V0Q29va2llKCJPUklHSU4iLCAxLCAid3d3LmJhaWR1LmNvbSIsIG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gODY0MDAwMDApOwogICAgICAgICAgICAgICAgICBhY1NldENvb2tpZSgiSVNTVyIsIDEsIG51bGwsIG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gODY0MDAwMDApOwogICAgICAgICAgICAgICAgICBhY1NldENvb2tpZSgiSVNTVyIsIDEsICJ3d3cuYmFpZHUuY29tIiwgbmV3IERhdGUoKS5nZXRUaW1lKCkgLSA4NjQwMDAwMCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgICAgfSwgMjAwKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHVzZVRoaXNIdXlhbkNvbG9yKGVudikgewogICAgICAgICAgICAgICAgdGhpcy5BQ0NvbmZpZy5kZWZhdWx0SHVZYW5Db2xvciA9IGVudi50YXJnZXQudmFsdWUgfHwgZW52LnRhcmdldC5kYXRhc2V0LnZhbHVlOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5BQ0NvbmZpZy5kZWZhdWx0SHVZYW5Db2xvcik7CiAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkSHVZYW5TdHlsZSh0aGlzLkFDQ29uZmlnLmRlZmF1bHRIdVlhbkNvbG9yKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGdldFVzZXJCbG9ja0xpc3RSZWdleCgpIHsKICAgICAgICAgICAgICAgIHZhciBsaXN0ID0gW107CiAgICAgICAgICAgICAgICB0aGlzLkFDQ29uZmlnLlVzZXJCbG9ja0xpc3QuZm9yRWFjaChvbmUgPT4gewogICAgICAgICAgICAgICAgICBvbmUgIT09IG51bGwgJiYgbGlzdC5wdXNoKG5ldyBSZWdFeHAob25lLnJlcGxhY2UoIioiLCAiLioiKSkpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKHRoaXMub3RoZXIuYWRkQmxvY2tJdGVtKSAhPT0gInVuZGVmaW5lZCIgJiYgdGhpcy5vdGhlci5hZGRCbG9ja0l0ZW0gIT09ICIiKSB7CiAgICAgICAgICAgICAgICAgIGxpc3QucHVzaChuZXcgUmVnRXhwKHRoaXMub3RoZXIuYWRkQmxvY2tJdGVtLnJlcGxhY2UoIioiLCAiLioiKSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGxpc3Q7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBjb21wdXRlZDogewogICAgICAgICAgICAgIGdldEJsb2NrTGlzdCgpIHsgLy8g5Lya6Ieq5Yqo55qEcmVuZGVy5YiwaHRtbOS4iuWOu++8jOS4jeeUqOaJi+WKqOWOu+a4suafk+S4gOmBjQogICAgICAgICAgICAgICAgbGV0IGluc0hUTUwgPSAiIjsKICAgICAgICAgICAgICAgIGxldCBVc2VyQmxvY2tSZWdMaXN0ID0gdGhpcy5jYWxfVXNlckJsb2NrTGlzdFJlZ2V4OwogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLkFDQ29uZmlnLlVzZXJCbG9ja0xpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgbGV0IGluc0NsYXNzID0gdGhpcy5vdGhlci5jdXJIb3N0cy5maW5kSW5kZXgobSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgIGxldCBbY3VySG9zdCwgY3VyVXJsXSA9IG0uc3BsaXQoIiMjIyIpOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFVzZXJCbG9ja1JlZ0xpc3RbaV0udGVzdChjdXJIb3N0KSB8fCBVc2VyQmxvY2tSZWdMaXN0W2ldLnRlc3QoY3VyVXJsKTsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbSA9PT0gQUNDb25maWcuVXNlckJsb2NrTGlzdFtpXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pID49IDAgPyAiIGFjLWJsb2NrLWhpZ2giIDogIiI7IC8vIOWmguaenOW9k+WJjemhtemdouWtmOWcqO+8jOWImemrmOS6rgogICAgICAgICAgICAgICAgICBpbnNIVE1MICs9IGA8bGk+PGxhYmVsIGNsYXNzPSJhYy1ibG9jay1pdGVtJHtpbnNDbGFzc30iIGRhdGEtaG9zdD0iJHt0aGlzLkFDQ29uZmlnLlVzZXJCbG9ja0xpc3RbaV19Ij4ke3RoaXMuQUNDb25maWcuVXNlckJsb2NrTGlzdFtpXX08L2xhYmVsPjxsYWJlbCBjbGFzcz0iYWMtYmxvY2staXRlbSBhYy1ibG9jay1pdGVtZGVsIiBkYXRhLWhvc3Q9IiR7dGhpcy5BQ0NvbmZpZy5Vc2VyQmxvY2tMaXN0W2ldfSI+eDwvbGFiZWw+PC9saT5cbmA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gaW5zSFRNTDsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGNhbF9kaXlCbG9ja0xpc3RCdG4oKSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5vdGhlci5zaG93QmxvY2tMaXN0QXJlYSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuc2V0dGluZ19wYW5lbF9zZWNvbmQuYmxvY2tFZGl0QnRuRW5kX3RleHQ7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuc2V0dGluZ19wYW5lbF9zZWNvbmQuYmxvY2tFZGl0QnRuX3RleHQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBjYWxfVXNlckJsb2NrTGlzdFJlZ2V4KCkgewogICAgICAgICAgICAgICAgdmFyIGxpc3QgPSBbXTsKICAgICAgICAgICAgICAgIHRoaXMuQUNDb25maWcuVXNlckJsb2NrTGlzdC5mb3JFYWNoKG9uZSA9PiB7CiAgICAgICAgICAgICAgICAgIG9uZSAhPT0gbnVsbCAmJiBsaXN0LnB1c2gobmV3IFJlZ0V4cChvbmUucmVwbGFjZSgiKiIsICIuKiIpKSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAodGhpcy5vdGhlci5hZGRCbG9ja0l0ZW0pICE9PSAidW5kZWZpbmVkIiAmJiB0aGlzLm90aGVyLmFkZEJsb2NrSXRlbSAhPT0gIiIpIHsKICAgICAgICAgICAgICAgICAgbGlzdC5wdXNoKG5ldyBSZWdFeHAodGhpcy5vdGhlci5hZGRCbG9ja0l0ZW0ucmVwbGFjZSgiKiIsICIuKiIpKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gbGlzdDsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIEFkc1N0eWxlTW9kZUNoYW5nZSgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB7djE6IENPTlNULnVzZUl0ZW0uQWRzU3R5bGVNb2RlLCB2MjogQ09OU1QudXNlSXRlbS5IdVlhbk1vZGUsIHYzOiBBQ0NvbmZpZy5TdHlsZV9CYWlkdUxpdGUsIHY0OiBBQ0NvbmZpZy5pc0Zhdmljb25FbmFibGV9OwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgQ29uZmlnQ2hhbmdlKCl7CiAgICAgICAgICAgICAgICByZXR1cm4ge3YxOiBBQ0NvbmZpZy5pc0VuTGFuZ307CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB3YXRjaDogewogICAgICAgICAgICAgIEFkc1N0eWxlTW9kZUNoYW5nZShkYXRhKSB7CiAgICAgICAgICAgICAgICAvLyDpnIDopoHlhYjliKDpmaTljp/mnInnmoToioLngrnmlbDmja4KICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHtyZXMsIG5vZGV9ID0gY2hlY2tEb2NtZW50SGFzTm9kZSgiQUMtIikKICAgICAgICAgICAgICAgICAgaWYgKHJlcykgbm9kZS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgZWxzZSBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHNhZmVSZW1vdmUoInN0eWxlW2NsYXNzPSdBQy1TdHlsZS1leHBhbmQnXSxzdHlsZVtjbGFzcz0nQUMtVHdvUGFnZUV4U3R5bGUnXSxzdHlsZVtjbGFzcz0nQUMtVGhyZWVQYWdlRXhTdHlsZSddLHN0eWxlW2NsYXNzPSdBQy1Gb3VyUGFnZUV4U3R5bGUnXSxzdHlsZVtjbGFzcz0nQUMtc3R5bGUtbG9nbyddLHN0eWxlW2NsYXNzPSdBQy1iYWlkdUxpdGVTdHlsZSddLHN0eWxlW2NsYXNzPSdBQy1iYWlkdUh1WWFuU3R5bGUtRmlsZSddIik7CiAgICAgICAgICAgICAgICBhY0Nzc0xvYWRGbGFnID0gZmFsc2U7CiAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5pbml0KCk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBDb25maWdDaGFuZ2UoKXsKICAgICAgICAgICAgICAgIEFsbERhdGEubGFuLnVzZSA9IEFDQ29uZmlnLmlzRW5MYW5nID8gQWxsRGF0YS5sYW4uZW4gOiBBbGxEYXRhLmxhbi56aF9jbjsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNteXVzZXIiKS5yZW1vdmUoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgICBpZiAodHlwZW9mIChWdWUpICE9ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgIGlmIChWdWUudmVyc2lvbi5jaGFyQXQoMCkgPT0gMikgewogICAgICAgICAgICAgIHZ1ZVZNID0gbmV3IFZ1ZShvcHRpb25zKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB2dWVWTSA9IFZ1ZS5jcmVhdGVBcHAob3B0aW9ucykubW91bnQoY2hlY2tOb2RlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcigiVnVlIOacquWujOaIkOWIneWni+WMli0t56iL5bqP5peg5rOV5pyJ5pWI5omn6KGMIik7CiAgICAgICAgICB9CiAgICAgICAgfSwgMjUwKTsKCiAgICAgICAgZnVuY3Rpb24gTWFpbkNhbGxiYWNrKGUpIHsKICAgICAgICAgIGlmIChlLnRhcmdldCAhPSBudWxsICYmIHR5cGVvZiAoZS50YXJnZXQuY2xhc3NOYW1lKSA9PSAic3RyaW5nIiAmJiBlLnRhcmdldC5jbGFzc05hbWUudG9VcHBlckNhc2UoKS5pbmRleE9mKCJBQy0iKSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0gLy/lsY/olL3mjonlm6DkuLrlop7liqBjc3Plr7zoh7TnmoTop6blj5FpbnNlcnTliqjkvZwKICAgICAgICAgIHJhcGlkRGVhbCgpOwogICAgICAgICAgSW5zZXJ0U2V0dGluZ01lbnUoKTsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBTaG93U2V0dGluZygpOwogICAgICAgICAgfSwgMTAwMCkgLy8g5rue5ZCO56qX5Y+j55qE5Yqg6L2977yM5YeP5bCR5YmN5pyfQ1BV5LqJ55SoCiAgICAgICAgfQoKICAgICAgICAvKuS7peS4i+S7o+eggeWkp+mDqOWIhuadpea6kOS6jlN1cHJlUHJlbG9hZGVyIOaEn+iwoiBzd2R5aCAmJiB5d3poYWlxaSAmJiBOTEYg5Lul5Y+KIG1hY2g2IOWkp+S9rCovCiAgICAgICAgZnVuY3Rpb24gYWNfc3BmdW5jKGUpIHsKICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICB2YXIgdCwgciA9IGUuY3VycmVudFRhcmdldDsKICAgICAgICAgIHZhciBUd2VlbiA9IHsKICAgICAgICAgICAgICAgIExpbmVhcjogZnVuY3Rpb24gTGluZWFyKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgKiBlIC8gbiArIHQ7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgUXVhZDogewogICAgICAgICAgICAgICAgICBlYXNlSW46IGZ1bmN0aW9uIGVhc2VJbihlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgKiAoZSAvPSBuKSAqIGUgKyB0OwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBlYXNlT3V0OiBmdW5jdGlvbiBlYXNlT3V0KGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gLXIgKiAoZSAvPSBuKSAqIChlIC0gMikgKyB0OwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBlYXNlSW5PdXQ6IGZ1bmN0aW9uIGVhc2VJbk91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlIC89IG4gLyAyKSA8IDEgPyByIC8gMiAqIGUgKiBlICsgdCA6IC1yIC8gMiAqICgtLWUgKiAoZSAtIDIpIC0gMSkgKyB0OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgQ3ViaWM6IHsKICAgICAgICAgICAgICAgICAgZWFzZUluOiBmdW5jdGlvbiBlYXNlSW4oZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByICogKGUgLz0gbikgKiBlICogZSArIHQ7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VPdXQ6IGZ1bmN0aW9uIGVhc2VPdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByICogKChlID0gZSAvIG4gLSAxKSAqIGUgKiBlICsgMSkgKyB0OwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBlYXNlSW5PdXQ6IGZ1bmN0aW9uIGVhc2VJbk91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlIC89IG4gLyAyKSA8IDEgPyByIC8gMiAqIGUgKiBlICogZSArIHQgOiByIC8gMiAqICgoZSAtPSAyKSAqIGUgKiBlICsgMikgKyB0OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgUXVhcnQ6IHsKICAgICAgICAgICAgICAgICAgZWFzZUluOiBmdW5jdGlvbiBlYXNlSW4oZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByICogKGUgLz0gbikgKiBlICogZSAqIGUgKyB0OwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBlYXNlT3V0OiBmdW5jdGlvbiBlYXNlT3V0KGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gLXIgKiAoKGUgPSBlIC8gbiAtIDEpICogZSAqIGUgKiBlIC0gMSkgKyB0OwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBlYXNlSW5PdXQ6IGZ1bmN0aW9uIGVhc2VJbk91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlIC89IG4gLyAyKSA8IDEgPyByIC8gMiAqIGUgKiBlICogZSAqIGUgKyB0IDogLXIgLyAyICogKChlIC09IDIpICogZSAqIGUgKiBlIC0gMikgKyB0OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgUXVpbnQ6IHsKICAgICAgICAgICAgICAgICAgZWFzZUluOiBmdW5jdGlvbiBlYXNlSW4oZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByICogKGUgLz0gbikgKiBlICogZSAqIGUgKiBlICsgdDsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZWFzZU91dDogZnVuY3Rpb24gZWFzZU91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgKiAoKGUgPSBlIC8gbiAtIDEpICogZSAqIGUgKiBlICogZSArIDEpICsgdDsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZWFzZUluT3V0OiBmdW5jdGlvbiBlYXNlSW5PdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAoZSAvPSBuIC8gMikgPCAxID8gciAvIDIgKiBlICogZSAqIGUgKiBlICogZSArIHQgOiByIC8gMiAqICgoZSAtPSAyKSAqIGUgKiBlICogZSAqIGUgKyAyKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBTaW5lOiB7CiAgICAgICAgICAgICAgICAgIGVhc2VJbjogZnVuY3Rpb24gZWFzZUluKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gLXIgKiBNYXRoLmNvcyhlIC8gbiAqIChNYXRoLlBJIC8gMikpICsgciArIHQ7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VPdXQ6IGZ1bmN0aW9uIGVhc2VPdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByICogTWF0aC5zaW4oZSAvIG4gKiAoTWF0aC5QSSAvIDIpKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VJbk91dDogZnVuY3Rpb24gZWFzZUluT3V0KGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gLXIgLyAyICogKE1hdGguY29zKE1hdGguUEkgKiBlIC8gbikgLSAxKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBFeHBvOiB7CiAgICAgICAgICAgICAgICAgIGVhc2VJbjogZnVuY3Rpb24gZWFzZUluKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCA9PSBlID8gdCA6IHIgKiBNYXRoLnBvdygyLCAxMCAqIChlIC8gbiAtIDEpKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VPdXQ6IGZ1bmN0aW9uIGVhc2VPdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBlID09IG4gPyB0ICsgciA6IHIgKiAoMSAtIE1hdGgucG93KDIsIC0xMCAqIGUgLyBuKSkgKyB0OwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBlYXNlSW5PdXQ6IGZ1bmN0aW9uIGVhc2VJbk91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDAgPT0gZSA/IHQgOiBlID09IG4gPyB0ICsgciA6IChlIC89IG4gLyAyKSA8IDEgPyByIC8gMiAqIE1hdGgucG93KDIsIDEwICogKGUgLSAxKSkgKyB0IDogciAvIDIgKiAoMiAtIE1hdGgucG93KDIsIC0xMCAqIC0tZSkpICsgdDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIENpcmM6IHsKICAgICAgICAgICAgICAgICAgZWFzZUluOiBmdW5jdGlvbiBlYXNlSW4oZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAtciAqIChNYXRoLnNxcnQoMSAtIChlIC89IG4pICogZSkgLSAxKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VPdXQ6IGZ1bmN0aW9uIGVhc2VPdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByICogTWF0aC5zcXJ0KDEgLSAoZSA9IGUgLyBuIC0gMSkgKiBlKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VJbk91dDogZnVuY3Rpb24gZWFzZUluT3V0KGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGUgLz0gbiAvIDIpIDwgMSA/IC1yIC8gMiAqIChNYXRoLnNxcnQoMSAtIGUgKiBlKSAtIDEpICsgdCA6IHIgLyAyICogKE1hdGguc3FydCgxIC0gKGUgLT0gMikgKiBlKSArIDEpICsgdDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIEVsYXN0aWM6IHsKICAgICAgICAgICAgICAgICAgZWFzZUluOiBmdW5jdGlvbiBlYXNlSW4oZSwgdCwgciwgbiwgYSwgbykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAwID09IGUgPyB0IDogMSA9PSAoZSAvPSBuKSA/IHQgKyByIDogKG8gfHwgKG8gPSAuMyAqIG4pLCAhYSB8fCBhIDwgTWF0aC5hYnMocikgPyAoYSA9IHIsCiAgICAgICAgICAgICAgICAgICAgICBpID0gbyAvIDQpIDogaSA9IG8gLyAoMiAqIE1hdGguUEkpICogTWF0aC5hc2luKHIgLyBhKSwgLWEgKiBNYXRoLnBvdygyLCAxMCAqIChlIC09IDEpKSAqIE1hdGguc2luKChlICogbiAtIGkpICogKDIgKiBNYXRoLlBJKSAvIG8pICsgdCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGk7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VPdXQ6IGZ1bmN0aW9uIGVhc2VPdXQoZSwgdCwgciwgbiwgYSwgbykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAwID09IGUgPyB0IDogMSA9PSAoZSAvPSBuKSA/IHQgKyByIDogKG8gfHwgKG8gPSAuMyAqIG4pLCAhYSB8fCBhIDwgTWF0aC5hYnMocikgPyAoYSA9IHIsCiAgICAgICAgICAgICAgICAgICAgICBpID0gbyAvIDQpIDogaSA9IG8gLyAoMiAqIE1hdGguUEkpICogTWF0aC5hc2luKHIgLyBhKSwgYSAqIE1hdGgucG93KDIsIC0xMCAqIGUpICogTWF0aC5zaW4oKGUgKiBuIC0gaSkgKiAoMiAqIE1hdGguUEkpIC8gbykgKyByICsgdCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGk7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VJbk91dDogZnVuY3Rpb24gZWFzZUluT3V0KGUsIHQsIHIsIG4sIGEsIG8pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCA9PSBlID8gdCA6IDIgPT0gKGUgLz0gbiAvIDIpID8gdCArIHIgOiAobyB8fCAobyA9IG4gKiAoLjMgKiAxLjUpKSwgIWEgfHwgYSA8IE1hdGguYWJzKHIpID8gKGEgPSByLAogICAgICAgICAgICAgICAgICAgICAgaSA9IG8gLyA0KSA6IGkgPSBvIC8gKDIgKiBNYXRoLlBJKSAqIE1hdGguYXNpbihyIC8gYSksIGUgPCAxID8gYSAqIE1hdGgucG93KDIsIDEwICogKGUgLT0gMSkpICogTWF0aC5zaW4oKGUgKiBuIC0gaSkgKiAoMiAqIE1hdGguUEkpIC8gbykgKiAtLjUgKyB0IDogYSAqIE1hdGgucG93KDIsIC0xMCAqIChlIC09IDEpKSAqIE1hdGguc2luKChlICogbiAtIGkpICogKDIgKiBNYXRoLlBJKSAvIG8pICogLjUgKyByICsgdCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBCYWNrOiB7CiAgICAgICAgICAgICAgICAgIGVhc2VJbjogZnVuY3Rpb24gZWFzZUluKGUsIHQsIHIsIG4sIGEpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSBhICYmIChhID0gMS43MDE1OCksIHIgKiAoZSAvPSBuKSAqIGUgKiAoKGEgKyAxKSAqIGUgLSBhKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VPdXQ6IGZ1bmN0aW9uIGVhc2VPdXQoZSwgdCwgciwgbiwgYSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IGEgJiYgKGEgPSAxLjcwMTU4KSwgciAqICgoZSA9IGUgLyBuIC0gMSkgKiBlICogKChhICsgMSkgKiBlICsgYSkgKyAxKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VJbk91dDogZnVuY3Rpb24gZWFzZUluT3V0KGUsIHQsIHIsIG4sIGEpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSBhICYmIChhID0gMS43MDE1OCksIChlIC89IG4gLyAyKSA8IDEgPyByIC8gMiAqIChlICogZSAqICgoMSArIChhICo9IDEuNTI1KSkgKiBlIC0gYSkpICsgdCA6IHIgLyAyICogKChlIC09IDIpICogZSAqICgoMSArIChhICo9IDEuNTI1KSkgKiBlICsgYSkgKyAyKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBCb3VuY2U6IHsKICAgICAgICAgICAgICAgICAgZWFzZUluOiBmdW5jdGlvbiBlYXNlSW4oZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByIC0gVHdlZW4uQm91bmNlLmVhc2VPdXQobiAtIGUsIDAsIHIsIG4pICsgdDsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZWFzZU91dDogZnVuY3Rpb24gZWFzZU91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlIC89IG4pIDwgMSAvIDIuNzUgPyByICogKDcuNTYyNSAqIGUgKiBlKSArIHQgOiBlIDwgMiAvIDIuNzUgPyByICogKDcuNTYyNSAqIChlIC09IDEuNSAvIDIuNzUpICogZSArIC43NSkgKyB0IDogZSA8IDIuNSAvIDIuNzUgPyByICogKDcuNTYyNSAqIChlIC09IDIuMjUgLyAyLjc1KSAqIGUgKyAuOTM3NSkgKyB0IDogciAqICg3LjU2MjUgKiAoZSAtPSAyLjYyNSAvIDIuNzUpICogZSArIC45ODQzNzUpICsgdDsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZWFzZUluT3V0OiBmdW5jdGlvbiBlYXNlSW5PdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBlIDwgbiAvIDIgPyAuNSAqIFR3ZWVuLkJvdW5jZS5lYXNlSW4oMiAqIGUsIDAsIHIsIG4pICsgdCA6IC41ICogVHdlZW4uQm91bmNlLmVhc2VPdXQoMiAqIGUgLSBuLCAwLCByLCBuKSArIC41ICogciArIHQ7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIFR3ZWVuTSA9IFsiTGluZWFyIiwgIlF1YWQiLCAiQ3ViaWMiLCAiUXVhcnQiLCAiUXVpbnQiLCAiU2luZSIsICJFeHBvIiwgIkNpcmMiLCAiRWxhc3RpYyIsICJCYWNrIiwgIkJvdW5jZSJdLAogICAgICAgICAgICAgIFR3ZWVuRWFzZSA9IFsiZWFzZUluIiwgImVhc2VPdXQiLCAiZWFzZUluT3V0Il07CiAgICAgICAgICB2YXIgcHJlZnMgPSB7CiAgICAgICAgICAgIHNfbWV0aG9kOiAzLAogICAgICAgICAgICBzX2Vhc2U6IDIsCiAgICAgICAgICAgIHNfRlBTOiA2MCwKICAgICAgICAgICAgc19kdXJhdGlvbjogMzMzLAogICAgICAgICAgfTsKCiAgICAgICAgICBmdW5jdGlvbiBnZXRSZWxhdGl2ZURpdihlKSB7CiAgICAgICAgICAgIHZhciB0ID0gci5pZDsKICAgICAgICAgICAgcmV0dXJuICh0ID0gdC5yZXBsYWNlKC8oc3Atc2VwYXJhdG9yLSkoLispLywgKGZ1bmN0aW9uICh0LCByLCBuKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHIgKyBTdHJpbmcoTnVtYmVyKG4pICsgKCJwcmUiID09IGUgPyAtMSA6IDEpKTsKICAgICAgICAgICAgfSkpKSA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHQpIDogbnVsbDsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBzcF90cmFuc2l0aW9uKGUsIHQpIHsKICAgICAgICAgICAgdmFyIHIgPSBzcF90cmFuc2l0aW9uLlR3ZWVuRjsKICAgICAgICAgICAgciB8fCAociA9IChyID0gVHdlZW5bVHdlZW5NW3ByZWZzLnNfbWV0aG9kXV0pW1R3ZWVuRWFzZVtwcmVmcy5zX2Vhc2VdXSB8fCByLCBzcF90cmFuc2l0aW9uLlR3ZWVuRiA9IHIpOwogICAgICAgICAgICB2YXIgbiA9IDFlMyAvIHByZWZzLnNfRlBTLCBhID0gMCwgbyA9IGUsIGkgPSB0IC0gZSwgcyA9IE1hdGguY2VpbChwcmVmcy5zX2R1cmF0aW9uIC8gbiksCiAgICAgICAgICAgICAgICBjID0gd2luZG93LnNjcm9sbFg7CiAgICAgICAgICAgICFmdW5jdGlvbiB0cmFuc2l0aW9uKCkgewogICAgICAgICAgICAgIHZhciBlID0gTWF0aC5jZWlsKHIoYSwgbywgaSwgcykpOwogICAgICAgICAgICAgIHdpbmRvdy5zY3JvbGwoYywgZSksIGEgPCBzICYmIChhKyssIHNldFRpbWVvdXQodHJhbnNpdGlvbiwgbikpOwogICAgICAgICAgICB9KCk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gc2Nyb2xsSXQoZSwgdCkgewogICAgICAgICAgICBzcF90cmFuc2l0aW9uKGUsIHQpOwogICAgICAgICAgfQoKICAgICAgICAgIHN3aXRjaCAoZS50YXJnZXQuaWQpIHsKICAgICAgICAgICAgY2FzZSAic3Atc3AtZ290b3AiOgogICAgICAgICAgICAgIHNjcm9sbEl0KHdpbmRvdy5zY3JvbGxZLCAwKTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgInNwLXNwLWdvcHJlIjoKICAgICAgICAgICAgICB2YXIgbiA9IGdldFJlbGF0aXZlRGl2KCJwcmUiKTsKICAgICAgICAgICAgICBpZiAoIW4pIHJldHVybjsKICAgICAgICAgICAgICB0ID0gd2luZG93LnNjcm9sbFk7CiAgICAgICAgICAgICAgdmFyIGEgPSBuLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDsKICAgICAgICAgICAgICBhID0gdCAtIChyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCAtIGEpOwogICAgICAgICAgICAgIHNjcm9sbEl0KHQsIGEpOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAic3Atc3AtZ29uZXh0IjoKICAgICAgICAgICAgICB2YXIgbyA9IGdldFJlbGF0aXZlRGl2KCJuZXh0Iik7CiAgICAgICAgICAgICAgaWYgKCFvKSByZXR1cm47CiAgICAgICAgICAgICAgdCA9IHdpbmRvdy5zY3JvbGxZOwogICAgICAgICAgICAgIHZhciBpID0gby5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7CiAgICAgICAgICAgICAgaSA9IHQgKyAoLXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgaSk7CiAgICAgICAgICAgICAgc2Nyb2xsSXQodCwgaSk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICJzcC1zcC1nb2JvdHRvbSI6CiAgICAgICAgICAgICAgc2Nyb2xsSXQod2luZG93LnNjcm9sbFksIE1hdGgubWF4KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQsIGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0KSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB3aW5kb3dzY3JvbGwoZm4pIHsKICAgICAgICAgIHZhciBiZWZvcmVTY3JvbGxUb3AgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wLAogICAgICAgICAgICAgIGZuID0gZm4gfHwgZnVuY3Rpb24gKCkge307CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgLy8g5bu25pe25omn6KGM77yM6YG/5YWN5Yia6L295YWl5Yiw6aG16Z2i5bCx6Kem5Y+R57+76aG15LqL5Lu2CiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJzY3JvbGwiLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIHZhciBhZnRlclNjcm9sbFRvcCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AsCiAgICAgICAgICAgICAgICAgIGRlbHRhID0gYWZ0ZXJTY3JvbGxUb3AgLSBiZWZvcmVTY3JvbGxUb3A7CiAgICAgICAgICAgICAgaWYgKGRlbHRhID09IDApIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICBmbihkZWx0YSA+IDAgPyAiZG93biIgOiAidXAiLCBlKTsKICAgICAgICAgICAgICBiZWZvcmVTY3JvbGxUb3AgPSBhZnRlclNjcm9sbFRvcDsKICAgICAgICAgICAgfSwgZmFsc2UpOwogICAgICAgICAgfSwgMTAwMCkKICAgICAgICB9CgogICAgICAgIHdpbmRvd3Njcm9sbChmdW5jdGlvbiAoZGlyZWN0aW9uLCBlKSB7CiAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAiZG93biIpIHsgLy8g5LiL5ruR5omN5YeG5aSH57+76aG1CiAgICAgICAgICAgIGxldCBzcGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtZnctYV9lbmFibGUiKTsKICAgICAgICAgICAgLy8g5byA5ZCv5ZCO77yM5LiU5Zyo6Z2e77yIc3VwcmVwcmVsb2FkZXLlkK/nlKjvvInml7blnYflj68KICAgICAgICAgICAgaWYgKEFDQ29uZmlnLmlzQXV0b3BhZ2UgPT09IHRydWUgJiYgIShzcGwgJiYgc3BsLmNoZWNrZWQgPT09IHRydWUpKSB7CiAgICAgICAgICAgICAgdmFyIHNjcm9sbFRvcCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwogICAgICAgICAgICAgIGxldCBzY3JvbGxEZWx0YSA9IDY2NjsKICAgICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5HT09HTEUpIHNjcm9sbERlbHRhID0gMTAyNDsgLy8g5q+V56uf6LC35q2M5Yqg6L2957yT5oWi55qE6Zeu6aKYCiAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQgPD0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCArIHNjcm9sbFRvcCArIHNjcm9sbERlbHRhICYmIGN1clNpdGUucGFnZUxvYWRpbmcgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICBjdXJTaXRlLnBhZ2VMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkRVQ0spIHsgLy8g5Y+v5Lul55So5bey5pyJ55qE5pa55rOV5p2l5a6e546w5LqGCiAgICAgICAgICAgICAgICAgIGlmICghQUNDb25maWcubm9ybWFsaXplRHVjayB8fCBwYXJzZUludChBQ0NvbmZpZy5kdWNrLkFkc1N0eWxlTW9kZSkgPj0gMykgeyAgLy8g5aaC5p6c5rKh5pyJ5byA5ZCv77yM6YKj5LmI5omL5Yqo57+76aG1IHx8IOWmguaenOaYr+WPjOWIl+eahOaXtuWAme+8jOS8vOS5juW5tuS4jeS8muiHquWKqOinpuWPkee/u+mhteaViOaenAogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNsaW5rcyAucmVzdWx0LS1tb3JlIGEiKS5jbGljaygpOwogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgY3VyU2l0ZS5wYWdlTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0sIDUwMDApOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBTaG93UGFnZXIubG9hZE1vcmVQYWdlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdmFyIFNob3dQYWdlciA9IHsKICAgICAgICAgIGdldEZ1bGxIcmVmOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpZihlID09IG51bGwpIHJldHVybiAnJzsKICAgICAgICAgICAgInN0cmluZyIgIT0gdHlwZW9mIGUgJiYgKGUgPSBlLmdldEF0dHJpYnV0ZSgiaHJlZiIpKTsKICAgICAgICAgICAgdmFyIHQgPSB0aGlzLmdldEZ1bGxIcmVmLmE7CiAgICAgICAgICAgIHJldHVybiB0IHx8ICh0aGlzLmdldEZ1bGxIcmVmLmEgPSB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpKSwgdC5ocmVmID0gZSwgdC5ocmVmOwogICAgICAgICAgfSwKICAgICAgICAgIGNyZWF0ZURvY3VtZW50QnlTdHJpbmc6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChlKSB7CiAgICAgICAgICAgICAgaWYgKCJIVE1MIiAhPT0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lKSByZXR1cm4gKG5ldyBET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyhlLCAiYXBwbGljYXRpb24veGh0bWwreG1sIik7CiAgICAgICAgICAgICAgdmFyIHQ7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHQgPSAobmV3IERPTVBhcnNlcikucGFyc2VGcm9tU3RyaW5nKGUsICJ0ZXh0L2h0bWwiKTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gdDsKICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KSB0ID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCJBRG9jdW1lbnQiKTsgZWxzZSB0cnkgewogICAgICAgICAgICAgICAgKHQgPSBkb2N1bWVudC5jbG9uZU5vZGUoITEpKS5hcHBlbmRDaGlsZCh0LmltcG9ydE5vZGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCAhMSkpLAogICAgICAgICAgICAgICAgICB0LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0LmNyZWF0ZUVsZW1lbnQoImhlYWQiKSksIHQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKHQuY3JlYXRlRWxlbWVudCgiYm9keSIpKTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICh0KSB7CiAgICAgICAgICAgICAgICB2YXIgciA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7CiAgICAgICAgICAgICAgICByLnNlbGVjdE5vZGVDb250ZW50cyhkb2N1bWVudC5ib2R5KTsKICAgICAgICAgICAgICAgIHZhciBuID0gci5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoZSk7CiAgICAgICAgICAgICAgICB0LmJvZHkuYXBwZW5kQ2hpbGQobik7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBhLCBvID0gewogICAgICAgICAgICAgICAgICBUSVRMRTogITAsCiAgICAgICAgICAgICAgICAgIE1FVEE6ICEwLAogICAgICAgICAgICAgICAgICBMSU5LOiAhMCwKICAgICAgICAgICAgICAgICAgU1RZTEU6ICEwLAogICAgICAgICAgICAgICAgICBCQVNFOiAhMAogICAgICAgICAgICAgICAgfSwgaSA9IHQuYm9keSwgcyA9IGkuY2hpbGROb2RlcywgYyA9IHMubGVuZ3RoIC0gMTsgYyA+PSAwOyBjLS0pIG9bKGEgPSBzW2NdKS5ub2RlTmFtZV0gJiYgaS5yZW1vdmVDaGlsZChhKTsKICAgICAgICAgICAgICAgIHJldHVybiB0OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGNvbnNvbGUuZXJyb3IoIltBQy1TY3JpcHRdIiwgIuayoeacieaJvuWIsOimgei9rOaIkERPTeeahOWtl+espuS4siIpOwogICAgICAgICAgfSwKICAgICAgICAgIGxvYWRNb3JlUGFnZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoY3VyU2l0ZS5wYWdlcikgewogICAgICAgICAgICAgIGxldCBjdXJQYWdlRWxlID0gZ2V0RWxlbWVudEJ5WHBhdGgoY3VyU2l0ZS5wYWdlci5uZXh0TGluayk7CiAgICAgICAgICAgICAgdmFyIHVybCA9IHRoaXMuZ2V0RnVsbEhyZWYoY3VyUGFnZUVsZSk7CiAgICAgICAgICAgICAgaWYoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5HT09HTEUgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdtYWNpbnRvc2gnKSkgewogICAgICAgICAgICAgICAgLy8gTUFSSyDkuLrkuoblhbzlrrnnmb7luqblnKhzYWZhcmnkuIvnmoQKICAgICAgICAgICAgICAgIHVybCA9IHVybC5yZXBsYWNlKCdodHRwczovLycsICdodHRwOi8vJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmKHVybCA9PT0gJycpIHJldHVybjsKICAgICAgICAgICAgICB2YXIgc2VwSW1ncyA9IHsKICAgICAgICAgICAgICAgIHRvcDogImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQllBQUFBV0NBWUFBQURFdEd3N0FBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBV3RKUkVGVWVOcmNsRTByUkdFVXg4YzFHVXBSSklWSVpHZGhaQ1ZyMzhHR2hhSTBaWHdDa2xpZ2xDaFpFY3ZKeGhkZ1lXT2pMRVVwbS9FeWlMenplK284ZFR6ZE8zUGxqb1ZUdjdyUGM4LzVkKzY1NTV4WXJFaFdvcDZib2RhNSs2bDl3aldjV3BGK1dJYnFDSko5aEZSY0RyM1FBSWtJaEt1Z3o1UERma1NpeGtwaHo1YWlBbnFnRThyZ1dSeEdvU09QeUJrc3dRdVV3eXNjdzRIcm1GQ1pMOEt0L0pBZzdtRUZQRW1vNEZkUHdrMEJVY3NkeklhcDBUUThxTUFQdUlDY0VqTG5kK1ZqU2pjZkpOZ0ljL0RrWkdTeW1ZR3NuSzlFWk1yeGU0TUZhTkdpWmpDMmZUNXpRM3A3UURLMWRSMkdTbGp6aWNsQXZSVWU4bkhZVkE0amp2QzQzTmZBdWsvc21CMlFOcWNzV3hLY0xiQUtURm5TMGhXRDZuMjdGZDZGTHFpREk1aVFtUTlqcGlWVDBzTko2YVlkN2RBRTNRSEJiaW5TQVg1SldXYXh1TG84RjM1amgvYkJLOVkrL3IvQ2w2cExjbm5hOE52dURHTW5zbHBiWlJwWFpZVC8zcjRFR0FDWkwzWkwyYWZORkFBQUFBQkpSVTVFcmtKZ2dnPT0iLAogICAgICAgICAgICAgICAgYm90dG9tOiAiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCWUFBQUFXQ0FZQUFBREV0R3c3QUFBQUdYUkZXSFJUYjJaMGQyRnlaUUJCWkc5aVpTQkpiV0ZuWlZKbFlXUjVjY2xsUEFBQUFYRkpSRUZVZU5yTTFjOHJCR0VjeC9GZHRDRWtMcVl0cGR3a0tTVUhVaHh3SVRkSytaM3lNMmNPTG5KMzlDYzQ0U2dIU2NtSndsRnhzSWRsQ1NjTzYvMnQ3Nk9ucDUyZFhUdGJubm8xTTgrUHo4NCt6ek16a2NnL0tBM29SVHpNMEE0Y0k0VlRkSVVWUElNM3BQR081YUFCSlRrR3gxQnFqWW1GRlp4VzdubkJ3WG1Yb2dXWDZiRUdjMmpFSVU3K2tOV0RVU1N3WnlxbmRTdkozTjFnMkJtMG9MdEIyait3N3JRUDRNcHFYelJUMFlSYVBXL0J0aE1lZFlMczYwSHNvRTJ2cTlCc1B3QUphOFhGTFVhMGZVcnZST28vc2FUMVE5YWRHaW1kbHQ4eWo2VFQ2UTZkMnZhaWRhOVlSYnRQNkVxbUJaQzVmSEE2WCtBQXoxYndFYzZjZms5K29hWk00Tm9aSkw3MCtKMmhUYVp0TnBldDA0MXpLOHlQL01nbCtyT0YxZW1yMFVNMXhuQWZFUHlJU2QwSm5vNnZ0eCtRdU02UFoyMmxwTzdkYkVWMlNpdjZyUGVJak5zMUhkWUM3aXhmRytZQnFkVFZEcVBJdjZpSVd2TzdpWEdVRnhBcWk3MlByYUo5SUg4RUdBQ1FjWWpZUmQ1R0h3QUFBQUJKUlU1RXJrSmdnZz09IiwKICAgICAgICAgICAgICAgIHByZTogImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQllBQUFBV0NBWUFBQURFdEd3N0FBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBU2xKUkVGVWVOcGlZQmpPb0JpSXJ3SnhGUkF6VXN2UVZpRCtDTVQvZ2ZnVEVQZFJ5OUJQVUVOaCtBc1E5MUppYUF1U1M5SHhaM0lOYjhIaTB2K1V1cndGNnFML1JPQnZRTnhEcktGZmtUVCtBK0puUVB3QktmSkEvTDlJYW43aWM3a01FSGNDOFE4MEYzVUFjUnNRdjRieTMwSU5hVUpUOXdlYVdoU1FEUlVCNHVWWXZMa1lpQVdBT0JvcHZFRkJsQXJFUEVBOEc0dWU5VUFzQVRNNEVZdUNKVWdLTXRBTUxvU0tDd1B4WEN4NmMxaWdDbFRRZ21VWlZQTnJITUVHeTNtZ1lDa0NZaVlnVGtDU1Y0VVp2QTJJallCWURJZ3ZRYlB2T3lKVEVDaWQ1d0h4YnlBMkJ1TDNRTHdSV1lFc0VKdmcwSXdlRkVVNDFJRU1sZ2N4V0pBRUgwTXhKZUFzak1GRXE2SncrQnI4QmltVmZNQ1RERWtHN0VCY0E4VDNvV1VKeDREVll3QUJCZ0Nhbm5uU3piZ3dJUUFBQUFCSlJVNUVya0pnZ2c9PSIsCiAgICAgICAgICAgICAgICBuZXh0OiAiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCWUFBQUFXQ0FZQUFBREV0R3c3QUFBQUdYUkZXSFJUYjJaMGQyRnlaUUJCWkc5aVpTQkpiV0ZuWlZKbFlXUjVjY2xsUEFBQUFUMUpSRUZVZU5yYzFiMUtBMEVZaGVFbC9pQVJGRkVrS2w2RDBVSzhDckVWckN3RWV4RkN0QklsUldJanNmRWlMTDBGS3pzN1FVV3hNMnBpRk1Va3ZoUE93TEFzMlRHdUNuN3drTmxsNWpDNyt3MEpndjlhdmRqQU9iYlFuMVR3Q3U3UXdoV1c0eGFrUElPSE1LenhHQ2FTQ202aW9YSExaMEhxcHo3S3J3UlBJdnZOdkJsTTJ6WXlOWThjTWpoREhvOWZDQnpFcm5JcUtOamdSU3hwdklBQmJPTGVzMk1LV0hmdVhkaFhjUjJhdktySjR6R2hJOWdMaFFicTlYYVpnR08xa3V0SU96SUhwS3A3TmF3aGpZT0lOU2VZNmxGd0hhY3cxN1A2TlRXSGQ0eHFuTmJjUzgzTE9idHNhQ1BiRVcrZ1hVVzhPRHN3QzI3eG9Pc24zT0REbWZPR3NzOVhMdUU1NGpHanZQcUd1dUcxbUZEelpJZmROSHlubmRlN0RiVzFyNUR3VHN0SkhQMmlFNTVZcUQzNmViWFpEdnIrN0wvc1U0QUJBSXBWWldub0E1R2tBQUFBQUVsRlRrU3VRbUNDIiwKICAgICAgICAgICAgICAgIG5leHRfZ3JheTogImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQllBQUFBV0NBWUFBQURFdEd3N0FBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBdHhKUkVGVWVOcmNsYzlMMm1FY3g3LzZOYlZacVJWajdwSU9sSVV1WjFITWd2MEJEY3FUN0pyc2tIMTNFTFBCRjdlVHZ6MTBIem5XUUJsQlJJZkJYSWZCTG1xWHNjdllaV1BLck1OSVU5QXBtcnIzNC93Nmkwb3ZNWmp3K0gwK3ovTjhYdCtQbi9mbjgwaFIvK1dIWVJoQklwRndSS1BSei9GNC9LbkQ0UkIyOHhIMEFoNGNISHlvVUNqc0lwRklJWlBKSGttbDBtOVlmbjJaRDc4WGNMMWVINnJWYWxJTUNtTVV0cUtiRDcvSGJOUXhhcTE1b3hjSC9sWHBjbVhndG5oMnUvMm1YQzYvRHFFK3NTeExsVXFsbmlFMFRWUEJZSkFxRm90NitHVjlQdCtQSnRobXM4MHNMUzJ4RW9ua2hsZ3Mvamd3TU9CY1hWM041ZlA1cmxDY3A5YlgxeVdMaTR1ZWNyazhVNmxVc2hEWTN3UmJMSllGR0tac05rc3E0Tjc4L0x3WTloT24wNWs1T2pxaStQelRHZVB4ZUZ3WlVsNnZkOGhrTXZrUERnNnNaSjJNNWVYbHIxd3FVdTJrQTVKT3B5MklBTytvTzlmVzFuNW1NcGsybkRqbWNqa0tOVTI1WEM2NTJXeDJwVklwNjVtWEoybnlqVVBwcWFrcE5aeHVBOFk1VDg3T3pzb2JqY1lIcFZLcEdoc2JlMUN0VmtYWXF4UUtoVGRxdGZxTDFXcjFKcFBKeHh5VTVMcS92ejhhQ29YOFRURGF0WWlGaEY2dnh4NXRBSndtOE9QajQ4bTV1Ym1LU3FVYUFXd1NhOWVRdzZKR28vbHVOQm9OaDRlSGJBZTBKaEFJTnNMaDhMTkFJSkNpdWRoeEIrUWgybHVkVGlmREFRTHZJM0FJY2grUmtsOGpKbHJoQ2JPcWdmb0xtRGVwT0YvQmZHTnJhMnNGRlpGdHZxZ3pNYkZZakFpeXA5VnFoNFZDNGNUSnlZbVE5MGVwSVFKdEhSTzFiQTVhUmhBdmRuWjJHSS9IODdjRXo1WVBnZU9TMlJzZkh4OUI3dStnT2k2OHlRQXRZWDl6ZDNlWGdaQ25hL3M4Qnk1eXBHVVV6aE9JU0hnTzlCZldYd0c2Y2haNkliaVZjNkx3bnNGZ0dJVkFlcEx6ams0cllXMXplM3ViY2J2ZDUzZmpaVjJGYXFHUTYzZlQwOVBETU85aTlCRW9vbjBKOVJtLzMzOXhtM2RyMmYzOWZWTFg3d0Z2b01Wdm9ZV2ZSeUlSRm5kRC9aLzhuZjBXWUFBOEVDMVovWk5tNGdBQUFBQkpSVTVFcmtKZ2dnPT0iLAogICAgICAgICAgICAgICAgcHJlX2dyYXk6ICJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJZQUFBQVdDQVlBQUFERXRHdzdBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQXNsSlJFRlVlTnJjbFR0TVdtRVV4ei91dlR6bElVaHBOTVIwYUdOanJOSFNtSFRxUkp5YWR1alFEYlNHUndKVWFZQ21EaXpxVUV3Nk9EVk5HZ2JwWUNmU3BGSU5DUXpGUjlveU1YUnNYRkNzQVhrSUtOTC9SN2dHV3hPc1NkUEVrNXpjM08rZTg3dm4rNTl6djB2SXBiU0ppUW15dWJuNUxCS0pwTmJYMTErNFhDNUJ1eHkyWFlETlppTU9oMk9XNHppUFRDYlRpOFhpa2VIaDRTc1NpZVFUWG5JeHNOMXVKMWFyZFZZZ0VEZ1BEdytWOVhxZDFHbzFNY3V5ZzdBdXVWeStzcmEyOW5kZ1ZFbkd4OGRuaEVLaHMxcXRLZ0UvZVhaOGZDekMrcTMrL242dFNxVmFTU1FTNXdNN25VNWlNcGxtc0YxWHBWSTVCZVh0Nk9oSUJGa0dBZTlTS3BWL3dObXpLaldielJUNnRGd3VLODZDVXFQcmtJVldQalF3TUtCV0tCU240T3p2MExHeHNSbVJTRFNGU2p1YTBEbzhUUldBUytCNStCNjhnL0loaXhDTnZRUE4xV2p1aWVac1MvZjFhTlEwd3pCdWFDcWxVQ1FSdFZyOUVzMUs0a1ZEV0pOaHJRakFJaXFNbGtxbGU4MDRGbmtqQm9PaEV6djR2ckd4a1cyQUxSYUxGcnErUW9BVjJuRTh0TGUzZHpFWURFNXZiMjkzOXZYMVBjQmtpS1ZTYVExakZvckZZcStOUnFNdW04M2Vic1l6bUpxN3NHdTR4aGtLeHNEZkIvQXhuTzg2MGV2MW9lWGxaVThnRU1nbWswa0ZxbXc4bzlkVUtpV2ZuNTh2aE1QaDU0aDdTK09wUVhOU0xCWWZlanllUjF5enc5ZGJSb24wOVBTOFcxMWRuZkw1ZkpsOFBrKzBXaTNoazV2eUNOQlk0dlY2ZjBJbTkram9LSk5PcDgxOG84RzcwYWg0YVducEl6U0tZQ2EvZFhkM0IrUHh1SE55Y2pLenM3TnpBbXMxK3FGUXkrVnlkRFJ6MFdqVXBkUHAzdEI4VEZNMEZBcUZHeFhQemMxOXBsSnJOSnFyYU1vWHQ5dE50M1N1YytUZzRJQ2VKZm1GaFFWTG9WQXdvS0c3ZnIvL0I4Y0hBTDZGeTlaRkRpbmFHL3I1dzc3eWE4eS9PaEV2S1JoanRJdXAyWU1UZUJiM21YWTUzSG5BbU5rUCsvdjdOekhUVHdBTzRmNzlmL3VkL1JKZ0FPTGNSTlpxTG9qTUFBQUFBRWxGVGtTdVFtQ0MiLAogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgQUNfYWRkU3R5bGUoIi5zcC1zZXBhcmF0b3J7bGluZS1oZWlnaHQ6MS44ICFpbXBvcnRhbnQ7b3BhY2l0eToxICFpbXBvcnRhbnQ7cG9zaXRpb246cmVsYXRpdmUgIWltcG9ydGFudDtmbG9hdDpub25lICFpbXBvcnRhbnQ7dG9wOjAgIWltcG9ydGFudDtsZWZ0OjAgIWltcG9ydGFudDttaW4td2lkdGg6MzY2cHg7d2lkdGg6YXV0bzt0ZXh0LWFsaWduOmNlbnRlciAhaW1wb3J0YW50O2ZvbnQtc2l6ZToxNHB4ICFpbXBvcnRhbnQ7ZGlzcGxheTpibG9jayAhaW1wb3J0YW50O3BhZGRpbmc6M3B4IDAgIWltcG9ydGFudDttYXJnaW46NXB4IDEwcHggOHB4O2NsZWFyOmJvdGggIWltcG9ydGFudDtib3JkZXItc3R5bGU6c29saWQgIWltcG9ydGFudDtib3JkZXItY29sb3I6I2NjY2NjYyAhaW1wb3J0YW50O2JvcmRlci13aWR0aDoxcHggIWltcG9ydGFudDstbW96LWJvcmRlci1yYWRpdXM6MzBweCAhaW1wb3J0YW50O2JvcmRlci1yYWRpdXM6MzBweCAhaW1wb3J0YW50O2JhY2tncm91bmQtY29sb3I6I2ZmZmZmZiAhaW1wb3J0YW50O30uc3Atc2VwYXJhdG9yOmhvdmVye2JveC1zaGFkb3c6MCAwIDExcHggcmdiYSgzMywzMywzMywwLjIpO30jc3Atc2VwYXJhdG9yLWhvdmVye2Rpc3BsYXk6bm9uZTt9LnNwLXNlcGFyYXRvcjpob3ZlciAjc3Atc2VwYXJhdG9yLWhvdmVye2Rpc3BsYXk6YmxvY2s7fS5zcC1zZXBhcmF0b3IgLnNwLXNvbWVpbmZve3Bvc2l0aW9uOmFic29sdXRlICFpbXBvcnRhbnQ7cmlnaHQ6MTBweCAhaW1wb3J0YW50O2ZvbnQtc2l6ZToxMnB4ICFpbXBvcnRhbnQ7Zm9udC1zdHlsZTppdGFsaWMgIWltcG9ydGFudDtiYWNrZ3JvdW5kOm5vbmUgIWltcG9ydGFudDt9LnNwLXNlcGFyYXRvciBzcGFue3ZlcnRpY2FsLWFsaWduOiBtaWRkbGU7Y3Vyc29yOiBwb2ludGVyO3BhZGRpbmc6IDA7bWFyZ2luOiAwIDVweDtkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHdpZHRoOjIycHg7aGVpZ2h0OjIycHg7fS5zcC1zZXBhcmF0b3IgYXttYXJnaW46MCAyMHB4IDAgLTZweCAhaW1wb3J0YW50O2Rpc3BsYXk6aW5saW5lICFpbXBvcnRhbnQ7dGV4dC1zaGFkb3c6I2ZmZiAwIDFweCAwICFpbXBvcnRhbnQ7YmFja2dyb3VuZDpub25lICFpbXBvcnRhbnQ7Y29sb3I6IzU5NTk1OSAhaW1wb3J0YW50O30uc3Atc2VwYXJhdG9yIGlucHV0e3BhZGRpbmc6MCAhaW1wb3J0YW50O2xpbmUtaGVpZ2h0OjIzcHggIWltcG9ydGFudDt9LnNwLXNlcGFyYXRvciAuc3AtbWQtc3Bhbntmb250LXdlaWdodDpib2xkICFpbXBvcnRhbnQ7bWFyZ2luOjAgMjBweCAhaW1wb3J0YW50O30jc3Atc3AtbWQtbnVtYmVye3dpZHRoOjZjaCAhaW1wb3J0YW50O3ZlcnRpY2FsLWFsaWduOm1pZGRsZSAhaW1wb3J0YW50O2Rpc3BsYXk6aW5saW5lLWJsb2NrICFpbXBvcnRhbnQ7dGV4dC1hbGlnbjpsZWZ0ICFpbXBvcnRhbnQ7fSIgKwogICAgICAgICAgICAgICAgYC5hY19zcF90b3B7YmFja2dyb3VuZC1pbWFnZTp1cmwoJyR7c2VwSW1ncy50b3B9Jyl9YCArCiAgICAgICAgICAgICAgICBgLmFjX3NwX3ByZXtiYWNrZ3JvdW5kLWltYWdlOnVybCgnJHtzZXBJbWdzLnByZX0nKX1gICsKICAgICAgICAgICAgICAgIGAuYWNfc3BfbmV4dHtiYWNrZ3JvdW5kLWltYWdlOnVybCgnJHtzZXBJbWdzLm5leHR9Jyl9YCArCiAgICAgICAgICAgICAgICBgLmFjX3NwX2JvdHRvbXtiYWNrZ3JvdW5kLWltYWdlOnVybCgnJHtzZXBJbWdzLmJvdHRvbX0nKX1gICsKICAgICAgICAgICAgICAgIGAuYWNfc3BfbmV4dF9ncmF5e2JhY2tncm91bmQtaW1hZ2U6dXJsKCcke3NlcEltZ3MubmV4dF9ncmF5fScpfWAgKwogICAgICAgICAgICAgICAgYC5hY19zcF9wcmVfZ3JheXtiYWNrZ3JvdW5kLWltYWdlOnVybCgnJHtzZXBJbWdzLnByZV9ncmF5fScpfWAsCiAgICAgICAgICAgICAgICAiQUMtUHJlbG9hZCIpCiAgICAgICAgICAgICAgaWYgKGN1clNpdGUucGFnZVVybCA9PT0gdXJsKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJbQUMtU2NyaXB0XSIsICLnv7vpobXliLDovr7lupXpg6jkuoYgLSDmiJbogIXlvILluLggLSDlh7rnjrDlvILluLjor7fnm7TmjqXlj43ppojkvZzogIXkv67mlLkiKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9Ly8g5LiN5Lya6YeN5aSN5Yqg6L2955u45ZCM55qE6aG16Z2iCiAgICAgICAgICAgICAgY3VyU2l0ZS5wYWdlVXJsID0gdXJsOwogICAgICAgICAgICAgIC8vIOWvuXVybOeahOaVsOaNrui/m+ihjOivu+WPlgogICAgICAgICAgICAgIGN1clNpdGUucGFnZXIuc3RhcnRGaWx0ZXIgJiYgY3VyU2l0ZS5wYWdlci5zdGFydEZpbHRlcigpOwogICAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgICAgbWV0aG9kOiAiR0VUIiwKICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDUwMDAsCiAgICAgICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHZhciBuZXdCb2R5ID0gU2hvd1BhZ2VyLmNyZWF0ZURvY3VtZW50QnlTdHJpbmcocmVzcG9uc2UucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAvLyB4eC5ldmFsdWF0ZSh4cGF0aCwgeHgpCiAgICAgICAgICAgICAgICAgICAgbGV0IHBhZ2VFbGVtcyA9IGdldEFsbEVsZW1lbnRzKGN1clNpdGUucGFnZXIucGFnZUVsZW1lbnQsIG5ld0JvZHksIG5ld0JvZHkpOwogICAgICAgICAgICAgICAgICAgIGxldCB0b0VsZW1lbnQgPSBnZXRBbGxFbGVtZW50cyhjdXJTaXRlLnBhZ2VyLkhUX2luc2VydFswXSlbMF07CiAgICAgICAgICAgICAgICAgICAgaWYgKHBhZ2VFbGVtcy5sZW5ndGggPj0gMCkgewogICAgICAgICAgICAgICAgICAgICAgLy8g5aSE55CG5pyA5ZCO5LiA5Liq57+76aG15oyJ6ZKuCiAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV4dEVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiI3NwLXNwLWdvbmV4dCIpOwogICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRFcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsYXN0RSA9IG5leHRFc1tuZXh0RXMubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RFLmNsYXNzTGlzdC5yZXBsYWNlKCJhY19zcF9uZXh0X2dyYXkiLCAiYWNfc3BfbmV4dCIpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgLy8g5o+S5YWl57+76aG15oyJ6ZKu5YWD57SgCiAgICAgICAgICAgICAgICAgICAgICBjdXJTaXRlLnBhZ2VOdW0rKzsKICAgICAgICAgICAgICAgICAgICAgIGxldCBhZGRUbyA9ICJiZWZvcmVlbmQiOwogICAgICAgICAgICAgICAgICAgICAgaWYgKGN1clNpdGUucGFnZXIuSFRfaW5zZXJ0WzFdID09IDEpIGFkZFRvID0gImJlZm9yZWJlZ2luIjsKICAgICAgICAgICAgICAgICAgICAgIHRvRWxlbWVudC5pbnNlcnRBZGphY2VudEhUTUwoYWRkVG8sIGA8ZGl2IGNsYXNzPSdzcC1zZXBhcmF0b3IgQUMnIGlkPSdzcC1zZXBhcmF0b3ItQUNYJz4KICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz0nc3Atc3AtbmV4dGxpbmsnIHRhcmdldD0nX2JsYW5rJz48Yj7nrKwgPHNwYW4gc3R5bGU9J2NvbG9yOiM1OTU5NTkhaW1wb3J0YW50Oyc+QUNYPC9zcGFuPiDpobU8L2I+PC9hPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJzcC1zcC1nb3RvcCIgY2xhc3M9J2FjX3NwX3RvcCcgdGl0bGU9J+WOu+WIsOmhtumDqCc+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJzcC1zcC1nb3ByZSIgY2xhc3M9JyR7Y3VyU2l0ZS5wYWdlTnVtIDw9IDIgPyAiYWNfc3BfcHJlX2dyYXkiIDogImFjX3NwX3ByZSJ9JyB0aXRsZT0n5LiK5rua5LiA6aG1JyA+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJzcC1zcC1nb25leHQiIGNsYXNzPSdhY19zcF9uZXh0X2dyYXknIHRpdGxlPSfkuIvmu5rkuIDpobUnPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0ic3Atc3AtZ29ib3R0b20iIGNsYXNzPSdhY19zcF9ib3R0b20nIHRpdGxlPSfljrvliLDlupXpg6gnID48L3NwYW4+PC9kaXY+YAogICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL0FDWC9nbSwgY3VyU2l0ZS5wYWdlTnVtKSk7CiAgICAgICAgICAgICAgICAgICAgICAvLyDmj5LlhaXmlrDpobXpnaLlhYPntKAKICAgICAgICAgICAgICAgICAgICAgIHBhZ2VFbGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChvbmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdG9FbGVtZW50Lmluc2VydEFkamFjZW50RWxlbWVudChhZGRUbywgb25lKTsKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLnNwLXNlcGFyYXRvci5BQzpub3QoW2JpbmRdKSIpLmZvckVhY2goZnVuY3Rpb24gKHBlcikgewogICAgICAgICAgICAgICAgICAgICAgICBwZXIuc2V0QXR0cmlidXRlKCJiaW5kIiwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHBlci5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGFjX3NwZnVuYyk7CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgIC8vIOabv+aNouW+heabv+aNouWFg+e0oAogICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9yaUUgPSBnZXRBbGxFbGVtZW50cyhjdXJTaXRlLnBhZ2VyLnJlcGxhY2VFKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlcEUgPSBnZXRBbGxFbGVtZW50cyhjdXJTaXRlLnBhZ2VyLnJlcGxhY2VFLCBuZXdCb2R5LCBuZXdCb2R5KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9yaUUubGVuZ3RoID09PSByZXBFLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3JpRS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpRVtpXS5vdXRlckhUTUwgPSByZXBFW2ldLm91dGVySFRNTDsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgY3VyU2l0ZS5wYWdlTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9uZXJyb3I6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgY3VyU2l0ZS5wYWdlTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgIH07CgogICAgICAgIGZ1bmN0aW9uIEFkZEN1c3RvbVN0eWxlKCkgewogICAgICAgICAgaWYgKCFBQ0NvbmZpZy5pc1JpZ2h0RGlzcGxheUVuYWJsZSkgewogICAgICAgICAgICAvLyDnp7vpmaTlj7PovrnmoI8gLeazqOaEj+WcqCN3cmFwcGVyPiNjb24tYXQ+I3Jlc3VsdC1vcCB4cGF0aC1sb2fmnInml7blgJnlvojph43opoHvvIzkuI3og73pmpDol48KICAgICAgICAgICAgQUNfYWRkU3R5bGUoIiNjb250ZW50X3JpZ2h0e2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50O30jY29udGVudF9yaWdodCB0ZD5kaXY6bm90KFtpZF0pe2Rpc3BsYXk6bm9uZTt9I2NvbnRlbnRfcmlnaHQgLnJlc3VsdC1vcDpub3QoW2lkXSl7ZGlzcGxheTpub25lIWltcG9ydGFudDt9I3Joc3tkaXNwbGF5Om5vbmU7fSIsCiAgICAgICAgICAgICAgIkFDLVJpZ2h0UmVtb3ZlIik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoQ09OU1QudXNlSXRlbS5BZHNTdHlsZU1vZGUgPT0gMikgewogICAgICAgICAgICAgIC8vIOmdnuWPjOWIl+aooeW8j+S4i+WwveWPr+iDveeahOaYvuekuuWPs+S+p+agjwogICAgICAgICAgICAgIEFDX2FkZFN0eWxlKCJAbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOiAxMjUwcHgpIHsjY29udGFpbmVye3dpZHRoOiA4MCUgIWltcG9ydGFudDt9LmNvbnRhaW5lcl9sICNjb250ZW50X3JpZ2h0e21hcmdpbi1yaWdodDogY2FsYygxOCUgLSAyMTBweCk7cG9zaXRpb246IGFic29sdXRlO3JpZ2h0OiAtMjAwcHg7ZGlzcGxheTpibG9jayAhaW1wb3J0YW50O292ZXJmbG93OmhpZGRlbjt3aWR0aDogMjJ2dyAhaW1wb3J0YW50O30iLAogICAgICAgICAgICAgICAgIkFDLVJpZ2h0UmVtb3ZlIik7CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgIHNhZmVSZW1vdmUoInN0eWxlW2NsYXNzPSdBQy1SaWdodFJlbW92ZSddIikKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKCFBQ0NvbmZpZy5pc0FMaW5lRW5hYmxlKSB7CiAgICAgICAgICAgIEFDX2FkZFN0eWxlKCJhLGEgZW17dGV4dC1kZWNvcmF0aW9uOm5vbmV9IiwgIkFDLU5vTGluZSIsICJib2R5Iik7Ly8g56e76Zmk6L+Z5Lqb5Liq5LiL5YiS57q/CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoQUNDb25maWcuaXNVc2VyU3R5bGVFbmFibGUpIHsKICAgICAgICAgICAgQUNfYWRkU3R5bGUoQUNDb25maWcuVXNlclN0eWxlVGV4dCwgIkFDLXVzZXJTdHlsZSIpOy8vIOeUqOaIt+iHquWumuS5ieeahOagt+W8j+ihqAogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8g5Li65LqG5pa55L6/6LCD5pW05qC35byP5ZKM5p+l55yL5pWI5p6c77yM5pqC5pe25LiN56e76ZmkCiAgICAgICAgICAgIC8vIHNhZmVSZW1vdmUoInN0eWxlW2NsYXNzPSdBQy11c2VyU3R5bGUnXSIpCiAgICAgICAgICB9CiAgICAgICAgICBBQ19hZGRTdHlsZSgKICAgICAgICAgICAgIi5vcHItcmVjb21tZW5kcy1tZXJnZS1pbWd0ZXh0e2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnQ7fSIgKyAvLyDnp7vpmaTnmb7luqbmtY/op4jlmajmjqjlub8KICAgICAgICAgICAgIi5yZXNfdG9wX2Jhbm5lcntkaXNwbGF5Om5vbmUhaW1wb3J0YW50O30iICsgLy8g56e76Zmk5Y+v6IO955qE55m+5bqmSFRUUFPliqvmjIHmmL7npLrpl67popgKICAgICAgICAgICAgIi5oZWFkQmxvY2ssIGJvZHk+ZGl2LnJlc3VsdC1vcHtkaXNwbGF5Om5vbmU7fSIgLy8g56e76Zmk55m+5bqm55qE5pCc57Si57uT5p6c6aG26YOo5LiA5p2h55qE5bu66K6u5paH5a2XICYg56e76Zmk5Y+v6IO95Ye6546w55qE55m95bGP546w6LGhCiAgICAgICAgICAgICwgIkFDLXNwZWNpYWwtQkFJRFUiCiAgICAgICAgICApOwogICAgICAgICAgLyoi6Ieq5a6a5LmJIuaMiemSruaViOaenCovCiAgICAgICAgICBBQ19hZGRTdHlsZSgiLmFjaGlkZXtkaXNwbGF5Om5vbmU7fSAubmV3RnVuY0hpZ2hMaWdodHtjb2xvcjpyZWQ7Zm9udC13ZWlnaHQ6IDEwMDtiYWNrZ3JvdW5kLWNvbG9yOiB5ZWxsb3c7Zm9udC13ZWlnaHQ6IDYwMDt9I3NwLWFjLWNvbnRhaW5lciBsYWJlbHtkaXNwbGF5OmlubGluZTt9I3V7d2lkdGg6MzE5cHh9I3UgI215dXNlcntkaXNwbGF5OmlubGluZS1ibG9jazttYXJnaW46IDEzcHggLTEwcHggMCAyNHB4O30uc2l0ZS13cmFwcGVyICNteXVzZXIsLnNvZ291LXNldC1ib3ggI215dXNlciwjZ2J3ICNteXVzZXJ7bWFyZ2luLXJpZ2h0OjE1cHg7fSAjbXl1c2VyLCNteXVzZXIgLm15dXNlcmNvbmZpZ3twYWRkaW5nOjA7bWFyZ2luOjB9I215dXNlcntkaXNwbGF5OmlubGluZS1ibG9jazt9I215dXNlciAubXl1c2VyY29uZmlne2Rpc3BsYXk6aW5saW5lLWJsb2NrO2xpbmUtaGVpZ2h0OjEuNTtiYWNrZ3JvdW5kOiM0ZTZlZjI7Y29sb3I6I2ZmZjtmb250LXdlaWdodDo3MDA7dGV4dC1hbGlnbjpjZW50ZXI7cGFkZGluZzo2cHg7Ym9yZGVyOjJweCBzb2xpZCAjRTVFNUU1O30jbXl1c2VyIC5teXVzZXJjb25maWd7Ym94LXNoYWRvdzowIDAgMTBweCAzcHggcmdiYSgwLDAsMCwuMSk7Ym9yZGVyLXJhZGl1czogNnB4fSNteXVzZXIgLm15dXNlcmNvbmZpZzpob3ZlcntiYWNrZ3JvdW5kOiM0NjYyZDkgIWltcG9ydGFudDtjb2xvcjojZmZmO2N1cnNvcjpwb2ludGVyO2JvcmRlcjoycHggc29saWQgIzczQTZGODt9Ym9keVtkb2dlXSAjaGVhZGVye21heC13aWR0aDogdW5zZXQ7fWJvZHlbZG9nZV0gI215dXNlcntwb3NpdGlvbjogYWJzb2x1dGU7cmlnaHQ6IDQwcHg7fSIsCiAgICAgICAgICAgICJBQy1NRU5VX0J0biIpOwogICAgICAgICAgLyroh6rlrprkuYnpobXpnaLlhoXlrrnmlYjmnpwqLwogICAgICAgICAgQUNfYWRkU3R5bGUoJ2JvZHlbYmFpZHVdICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbDpub3QoW2NsYXNzKj0iYmFpZHUiXSk+bGFiZWw6bm90KFtjbGFzcz0ibGFiZWxfaGlkZSJdKSxcbicgKwogICAgICAgICAgICAnICBib2R5W2dvb2dsZV0gI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsOm5vdChbY2xhc3MqPSJnb29nbGUiXSk+bGFiZWw6bm90KFtjbGFzcz0ibGFiZWxfaGlkZSJdKSxcbicgKwogICAgICAgICAgICAnICBib2R5W2JpbmddICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbDpub3QoW2NsYXNzKj0iYmluZyJdKT5sYWJlbDpub3QoW2NsYXNzPSJsYWJlbF9oaWRlIl0pLFxuJyArCiAgICAgICAgICAgICcgIGJvZHlbc29nb3VdICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbDpub3QoW2NsYXNzKj0ic29nb3UiXSk+bGFiZWw6bm90KFtjbGFzcz0ibGFiZWxfaGlkZSJdKSxcbicgKwogICAgICAgICAgICAnICBib2R5W2R1Y2tdICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbDpub3QoW2NsYXNzKj0iZHVjayJdKT5sYWJlbDpub3QoW2NsYXNzPSJsYWJlbF9oaWRlIl0pLFxuJyArCiAgICAgICAgICAgICcgIGJvZHlbZG9nZV0gI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsOm5vdChbY2xhc3MqPSJkb2dlIl0pPmxhYmVsOm5vdChbY2xhc3M9ImxhYmVsX2hpZGUiXSksXG4nICsKICAgICAgICAgICAgJyAgYm9keVtiYWlkdV0gI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsOm5vdChbY2xhc3MqPSJiYWlkdSJdKT5icixcbicgKwogICAgICAgICAgICAnICBib2R5W2dvb2dsZV0gI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsOm5vdChbY2xhc3MqPSJnb29nbGUiXSk+YnIsXG4nICsKICAgICAgICAgICAgJyAgYm9keVtiaW5nXSAjc3AtYWMtY29udGFpbmVyIC5jb250YWluZXItbGFiZWw6bm90KFtjbGFzcyo9ImJpbmciXSk+YnIsXG4nICsKICAgICAgICAgICAgJyAgYm9keVtkdWNrXSAjc3AtYWMtY29udGFpbmVyIC5jb250YWluZXItbGFiZWw6bm90KFtjbGFzcyo9ImR1Y2siXSk+YnIsXG4nICsKICAgICAgICAgICAgJyAgYm9keVtkb2dlXSAjc3AtYWMtY29udGFpbmVyIC5jb250YWluZXItbGFiZWw6bm90KFtjbGFzcyo9ImRvZ2UiXSk+YnIsXG4nICsKICAgICAgICAgICAgJyAgYm9keVtzb2dvdV0gI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsOm5vdChbY2xhc3MqPSJzb2dvdSJdKT5icixcbicgKwogICAgICAgICAgICAnICBib2R5W2JhaWR1XSAjc3AtYWMtY29udGFpbmVyIC5jb250YWluZXItbGFiZWxbY2xhc3MqPSJiYWlkdSJdPi5sYWJlbF9oaWRlLFxuJyArCiAgICAgICAgICAgICcgIGJvZHlbZ29vZ2xlXSAjc3AtYWMtY29udGFpbmVyIC5jb250YWluZXItbGFiZWxbY2xhc3MqPSJnb29nbGUiXT4ubGFiZWxfaGlkZSxcbicgKwogICAgICAgICAgICAnICBib2R5W2JpbmddICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbFtjbGFzcyo9ImJpbmciXT4ubGFiZWxfaGlkZSxcbicgKwogICAgICAgICAgICAnICBib2R5W3NvZ291XSAjc3AtYWMtY29udGFpbmVyIC5jb250YWluZXItbGFiZWxbY2xhc3MqPSJzb2dvdSJdPi5sYWJlbF9oaWRlLFxuJyArCiAgICAgICAgICAgICcgIGJvZHlbZHVja10gI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsW2NsYXNzKj0iZHVjayJdPi5sYWJlbF9oaWRlLFxuJyArCiAgICAgICAgICAgICcgIGJvZHlbZG9nZV0gI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsW2NsYXNzKj0iZG9nZSJdPi5sYWJlbF9oaWRlXG4nICsgLy8g5rOo5oSP5bC+6YOo6YCX5Y+3CiAgICAgICAgICAgICd7JyArCiAgICAgICAgICAgICdkaXNwbGF5Om5vbmU7XG4nICsKICAgICAgICAgICAgJ30jc3AtYWMtY29udGFpbmVyIC5sYWJlbF9oaWRle2N1cnNvcjpwb2ludGVyO21hcmdpbi1sZWZ0OjglO2NvbG9yOmJsdWV9I3NwLWFjLWNvbnRhaW5lciAubGlua2hyZWYsI3NwLWFjLWNvbnRhaW5lciAubGFiZWxfaGlkZTpob3Zlcntjb2xvcjpyZWR9I3NwLWFjLWNvbnRhaW5lciAubGlua2hyZWY6aG92ZXJ7Zm9udC13ZWlnaHQ6Ym9sZH0jc3AtYWMtY29udGFpbmVyIGxhYmVsLm1lbnUtYm94LXNtYWxse21heC13aWR0aDoxNnB4O21heC1oZWlnaHQ6MTZweDtjdXJzb3I6cG9pbnRlcjtkaXNwbGF5OmlubGluZS1ibG9ja30uQUMtQ291bnRlclR7YmFja2dyb3VuZDojRkQ5OTk5fWJvZHkgICNzcC1hYy1jb250YWluZXJ7cG9zaXRpb246Zml4ZWQ7dG9wOjMuOXZ3O3JpZ2h0OjguOHZ3fSNzcC1hYy1jb250YWluZXJ7ei1pbmRleDo5OTk5OTk7dGV4dC1hbGlnbjpsZWZ0O2JhY2tncm91bmQtY29sb3I6d2hpdGV9I3NwLWFjLWNvbnRhaW5lciAqe2ZvbnQtc2l6ZToxM3B4O2NvbG9yOmJsYWNrO2Zsb2F0Om5vbmV9I3NwLWFjLW1haW4taGVhZHtwb3NpdGlvbjpyZWxhdGl2ZTt0b3A6MDtsZWZ0OjB9I3NwLWFjLXNwYW4taW5mb3twb3NpdGlvbjphYnNvbHV0ZTtyaWdodDoxcHg7dG9wOjA7Zm9udC1zaXplOjEwcHg7bGluZS1oZWlnaHQ6MTBweDtiYWNrZ3JvdW5kOm5vbmU7Zm9udC1zdHlsZTppdGFsaWM7Y29sb3I6IzVhNWE1YTt0ZXh0LXNoYWRvdzp3aGl0ZSAwcHggMXB4IDFweH0jc3AtYWMtY29udGFpbmVyIGlucHV0e3ZlcnRpY2FsLWFsaWduOm1pZGRsZTtkaXNwbGF5OmlubGluZS1ibG9jaztvdXRsaW5lOm5vbmU7aGVpZ2h0OmF1dG87cGFkZGluZzowcHg7bWFyZ2luLWJvdHRvbTowcHg7bWFyZ2luLXRvcDowcHh9I3NwLWFjLWNvbnRhaW5lciBpbnB1dFt0eXBlPSJudW1iZXIiXXt3aWR0aDo1MHB4O3RleHQtYWxpZ246bGVmdH0jc3AtYWMtY29udGFpbmVyIGlucHV0W3R5cGU9ImNoZWNrYm94Il17Ym9yZGVyOjFweCBzb2xpZCAjQjRCNEI0O3BhZGRpbmc6MXB4O21hcmdpbjozcHg7d2lkdGg6MTNweDtoZWlnaHQ6MTNweDtiYWNrZ3JvdW5kOm5vbmU7Y3Vyc29yOnBvaW50ZXI7dmlzaWJpbGl0eTp2aXNpYmxlO3Bvc2l0aW9uOnN0YXRpY30jc3AtYWMtY29udGFpbmVyIGlucHV0W3R5cGU9ImJ1dHRvbiJde2JvcmRlcjoxcHggc29saWQgI2NjYztjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kOm5vbmU7d2lkdGg6YXV0bztoZWlnaHQ6YXV0b30jc3AtYWMtY29udGFpbmVyIGxpe2xpc3Qtc3R5bGU6bm9uZTttYXJnaW46M3B4IDA7Ym9yZGVyOm5vbmU7ZmxvYXQ6bm9uZTtjdXJzb3I6ZGVmYXVsdDt9I3NwLWFjLWNvbnRhaW5lciBmaWVsZHNldHtib3JkZXI6MnB4IGdyb292ZSAjY2NjOy1tb3otYm9yZGVyLXJhZGl1czozcHg7Ym9yZGVyLXJhZGl1czozcHg7cGFkZGluZzo0cHggOXB4IDZweCA5cHg7bWFyZ2luOjJweDtkaXNwbGF5OmJsb2NrO3dpZHRoOmF1dG87aGVpZ2h0OmF1dG99I3NwLWFjLWNvbnRhaW5lciBsZWdlbmR7bGluZS1oZWlnaHQ6MjBweDttYXJnaW4tYm90dG9tOjBweH0jc3AtYWMtY29udGFpbmVyIGZpZWxkc2V0ID4gdWx7cGFkZGluZzowO21hcmdpbjowfSNzcC1hYy1jb250YWluZXIgdWwjc3AtYWMtYV91c2VpZnJhbWUtZXh0ZW5ke3BhZGRpbmctbGVmdDo0MHB4fSNzcC1hYy1yZWN0e3Bvc2l0aW9uOnJlbGF0aXZlO3RvcDowO2xlZnQ6MDtmbG9hdDpyaWdodDtoZWlnaHQ6MTBweDt3aWR0aDoxMHB4O3BhZGRpbmc6MDttYXJnaW46MDstbW96LWJvcmRlci1yYWRpdXM6M3B4O2JvcmRlci1yYWRpdXM6M3B4O2JvcmRlcjoxcHggc29saWQgd2hpdGU7LXdlYmtpdC1ib3gtc2hhZG93Omluc2V0IDAgNXB4IDAgcmdiYSgyNTUsMjU1LDI1NSwwLjMpLDAgMCAzcHggcmdiYSgwLDAsMCwwLjgpOy1tb3otYm94LXNoYWRvdzppbnNldCAwIDVweCAwIHJnYmEoMjU1LDI1NSwyNTUsMC4zKSwwIDAgM3B4IHJnYmEoMCwwLDAsMC44KTtib3gtc2hhZG93Omluc2V0IDAgNXB4IDAgcmdiYSgyNTUsMjU1LDI1NSwwLjMpLDAgMCAzcHggcmdiYSgwLDAsMCwwLjgpO29wYWNpdHk6MC44fSNzcC1hYy1kb3QsI3NwLWFjLWN1ci1tb2Rle3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6OTk5OTt3aWR0aDo1cHg7aGVpZ2h0OjVweDtwYWRkaW5nOjA7LW1vei1ib3JkZXItcmFkaXVzOjNweDtib3JkZXItcmFkaXVzOjNweDtib3JkZXI6MXB4IHNvbGlkIHdoaXRlO29wYWNpdHk6MTstd2Via2l0LWJveC1zaGFkb3c6aW5zZXQgMCAtMnB4IDFweCByZ2JhKDAsMCwwLDAuMyksaW5zZXQgMCAycHggMXB4IHJnYmEoMjU1LDI1NSwyNTUsMC4zKSwwcHggMXB4IDJweCByZ2JhKDAsMCwwLDAuOSk7LW1vei1ib3gtc2hhZG93Omluc2V0IDAgLTJweCAxcHggcmdiYSgwLDAsMCwwLjMpLGluc2V0IDAgMnB4IDFweCByZ2JhKDI1NSwyNTUsMjU1LDAuMyksMHB4IDFweCAycHggcmdiYSgwLDAsMCwwLjkpO2JveC1zaGFkb3c6aW5zZXQgMCAtMnB4IDFweCByZ2JhKDAsMCwwLDAuMyksaW5zZXQgMCAycHggMXB4IHJnYmEoMjU1LDI1NSwyNTUsMC4zKSwwcHggMXB4IDJweCByZ2JhKDAsMCwwLDAuOSl9I3NwLWFjLWRvdHtyaWdodDotM3B4O3RvcDotM3B4fSNzcC1hYy1jdXItbW9kZXtsZWZ0Oi0zcHg7dG9wOi0zcHg7d2lkdGg6NnB4O2hlaWdodDo2cHh9I3NwLWFjLWNvbnRlbnR7cGFkZGluZzowO21hcmdpbjowcHg7LW1vei1ib3JkZXItcmFkaXVzOjNweDtib3JkZXItcmFkaXVzOjNweDtib3JkZXI6MXB4IHNvbGlkICNBMEEwQTA7LXdlYmtpdC1ib3gtc2hhZG93Oi0ycHggMnB4IDVweCByZ2JhKDAsMCwwLDAuMyk7LW1vei1ib3gtc2hhZG93Oi0ycHggMnB4IDVweCByZ2JhKDAsMCwwLDAuMyk7Ym94LXNoYWRvdzotMnB4IDJweCA1cHggcmdiYSgwLDAsMCwwLjMpfSNzcC1hYy1tYWlue3BhZGRpbmc6NXB4O2JvcmRlcjoxcHggc29saWQgd2hpdGU7LW1vei1ib3JkZXItcmFkaXVzOjNweDtib3JkZXItcmFkaXVzOjNweDtiYWNrZ3JvdW5kLWNvbG9yOiNGMkYyRjc7YmFja2dyb3VuZDotbW96LWxpbmVhci1ncmFkaWVudCh0b3AsI0ZDRkNGQywjRjJGMkY3IDEwMCUpO2JhY2tncm91bmQ6LXdlYmtpdC1ncmFkaWVudChsaW5lYXIsMCAwLDAgMTAwJSxmcm9tKCNGQ0ZDRkMpLHRvKCNGMkYyRjcpKX0jc3AtYWMtZm9vdHtwb3NpdGlvbjpyZWxhdGl2ZTtsZWZ0OjA7cmlnaHQ6MDttaW4taGVpZ2h0OjIwcHh9I3NwLWFjLXNhdmVidXR0b257cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7cmlnaHQ6MnB4fSNzcC1hYy1jb250YWluZXIgLmVuZGJ1dHRvbnttYXJnaW4tdG9wOjhweH0jc3AtYWMtY29udGFpbmVyIC5zcC1hYy1zcGFuYnV0dG9ue2JvcmRlcjoxcHggc29saWQgI2NjYzstbW96LWJvcmRlci1yYWRpdXM6M3B4O2JvcmRlci1yYWRpdXM6M3B4O3BhZGRpbmc6MnB4IDNweDtjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOiNGOUY5Rjk7LXdlYmtpdC1ib3gtc2hhZG93Omluc2V0IDAgMTBweCA1cHggd2hpdGU7LW1vei1ib3gtc2hhZG93Omluc2V0IDAgMTBweCA1cHggd2hpdGU7Ym94LXNoYWRvdzppbnNldCAwIDEwcHggNXB4IHdoaXRlfSNzcC1hYy1jb250YWluZXIgLnNwLWFjLXNwYW5idXR0b246aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojREREfWxhYmVsW2NsYXNzPSJuZXdGdW5jIl17Y29sb3I6Ymx1ZX0nLAogICAgICAgICAgICAiQUMtTUVOVV9QYWdlIik7CiAgICAgICAgfQoKICAgICAgICBBZGRDdXN0b21TdHlsZSgpOwogICAgICAgIHRyeSB7CiAgICAgICAgICBHTV9yZWdpc3Rlck1lbnVDb21tYW5kKCdBQy3ph43lrprlkJHohJrmnKzorr7nva4nLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1jb250ZW50Iikuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICB9KTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgfQoKICAgICAgICAvKirov5nkuJzopb/ku6XlkI7kvJrnlKjkuIoqKi8KICAgICAgICBmdW5jdGlvbiBnZXRTZWFyY2hWYWx1ZSgpIHsKICAgICAgICAgIGxldCBrdmwgPSBsb2NhdGlvbi5zZWFyY2guc3Vic3RyKDEpLnNwbGl0KCImIik7CiAgICAgICAgICBsZXQgc2VhcmNoViA9ICIiOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrdmwubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgbGV0IHZhbHVlID0ga3ZsW2ldLnJlcGxhY2UoL14od2R8cXVlcnl8cSk9LywgIiIpOwogICAgICAgICAgICBpZiAodmFsdWUgIT09IGt2bFtpXSkgewogICAgICAgICAgICAgIHNlYXJjaFYgPSB2YWx1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgLy8gICcrJyDnmb7luqbjgIHmkJzni5fjgIHlv4XlupTjgIHosLfmrYzjgIHlpb3mkJwKICAgICAgICAgIHNlYXJjaFYgPSBzZWFyY2hWLnJlcGxhY2UoIisiLCAiICIpOwogICAgICAgICAgcmV0dXJuIHNlYXJjaFY7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByYXBpZERlYWwoKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAoaW5zZXJ0TG9ja2VkID09PSBmYWxzZSAmJiBjdXJTaXRlLlNpdGVUeXBlSUQgIT09IFNpdGVUeXBlLk9USEVSUykgewogICAgICAgICAgICAgIGluc2VydExvY2tlZCA9IHRydWU7CiAgICAgICAgICAgICAgQUNIYW5kbGUoKTsgLy8g5aSE55CG5Li76YeN5a6a5ZCRCiAgICAgICAgICAgICAgaWYgKEFDQ29uZmlnLmlzRmF2aWNvbkVuYWJsZSkgeyAvLyDmmL7npLpmYXZpY29u5Zu+5qCHCiAgICAgICAgICAgICAgICBBQ19hZGRTdHlsZSgiaDM6OmJlZm9yZSwgaDI6OmJlZm9yZSB7Y29udGVudDogJyAnO2Rpc3BsYXk6aW5saW5lLWJsb2NrfSIsICJBQy1TdHlsZS1GYXZpY29uIiwgImhlYWQiKTsKICAgICAgICAgICAgICAgIGFkZEZhdmljb24oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjdXJTaXRlLkZhdmljb25UeXBlKSk7IC8vIOa3u+WKoEZhdmljb27mmL7npLoKICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIHNhZmVSZW1vdmUoImltZy5BQy1mYXZpY29uVCIpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjdXJTaXRlLkZhdmljb25UeXBlKS5mb3JFYWNoKChvbmUpID0+IHsKICAgICAgICAgICAgICAgICAgb25lLnJlbW92ZUF0dHJpYnV0ZSgiYWNfZmF2aWNvbnN0YXR1cyIpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKEFDQ29uZmlnLmlzQWRzRW5hYmxlKSB7IC8vIOenu+mZpOWkmuS9meeahOW5v+WRiuWGheWuuQogICAgICAgICAgICAgICAgcmVtb3ZlQURfYmFpZHVfc29nb3UoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKEFDQ29uZmlnLmlzQ291bnRlckVuYWJsZSkgeyAvLyDmmL7npLrorqHmlbDlmagKICAgICAgICAgICAgICAgIGFkZENvdW50ZXIoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjdXJTaXRlLkNvdW50ZXJUeXBlKSk7CiAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuQUMtQ291bnRlclQiKS5mb3JFYWNoKG9uZSA9PiB7CiAgICAgICAgICAgICAgICAgIG9uZS5wYXJlbnRFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnU29ydEluZGV4Jyk7CiAgICAgICAgICAgICAgICAgIG9uZS5yZW1vdmUoKQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKEFDQ29uZmlnLmRvRGlzYWJsZVN1ZykgeyAvLyDkuI3lkK/nlKjnp7vliqjpooTmtYtb6buY6K6kXQogICAgICAgICAgICAgICAgYWNTZXRDb29raWUoIk9SSUdJTiIsIDIsICJ3d3cuYmFpZHUuY29tIik7CiAgICAgICAgICAgICAgICBhY1NldENvb2tpZSgiSVNTVyIsIDEpOwogICAgICAgICAgICAgICAgYWNTZXRDb29raWUoIklTU1ciLCAxLCAid3d3LmJhaWR1LmNvbSIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoQUNDb25maWcuaXNCbG9ja0VuYWJsZSAmJiBjdXJTaXRlLlNpdGVUeXBlSUQgIT09IFNpdGVUeXBlLlNPR09VKSB7IC8vIOWQr+eUqOWxj+iUveWKn+iDvS0g5a+55q+P5LiA5Liq5paw5aKe55qE5Zyw5Z2A6YO96KaB5aSE55CGCiAgICAgICAgICAgICAgICBTaXRlQmxvY2suaW5pdFN0eWxlKCk7CiAgICAgICAgICAgICAgICBTaXRlQmxvY2suaW5pdCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGluc2VydExvY2tlZCA9IGZhbHNlOwogICAgICAgICAgICAgIH0sIDIwMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBhY1NldENvb2tpZShjbmFtZSwgY3ZhbHVlLCBkb21haW4sIGV4ZGF5cykgewogICAgICAgICAgZXhkYXlzID0gZXhkYXlzIHx8IDMwOwogICAgICAgICAgbGV0IGQgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgZG9tYWluID0gKGRvbWFpbiA/ICJkb21haW49IiArIGRvbWFpbiA6ICIiKSArICI7IjsKICAgICAgICAgIGQuc2V0VGltZShkLmdldFRpbWUoKSArIChleGRheXMgKiAyNCAqIDYwICogNjAgKiAxMDAwKSk7CiAgICAgICAgICBsZXQgZXhwaXJlcyA9ICJleHBpcmVzPSIgKyBkLnRvVVRDU3RyaW5nKCk7CiAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBjbmFtZSArICI9IiArIGN2YWx1ZSArICI7ICIgKyBkb21haW4gKyBleHBpcmVzICsgIjtwYXRoPS8iOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBnZXROb2RlSG9zdChzaXRldHBOb2RlKSB7CiAgICAgICAgICBpZihzaXRldHBOb2RlIGluc3RhbmNlb2YgSFRNTEFuY2hvckVsZW1lbnQpewogICAgICAgICAgICByZXR1cm4ge2N1ckhvc3Q6IHNpdGV0cE5vZGUuaG9zdCwgY3VyVXJsOiBzaXRldHBOb2RlLmhyZWZ9OwogICAgICAgICAgfQogICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuQkFJRFUpIHsKICAgICAgICAgICAgdmFyIGhyZWYgPSBudWxsOwogICAgICAgICAgICBpZiAoc2l0ZXRwTm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7CiAgICAgICAgICAgICAgaHJlZiA9IHNpdGV0cE5vZGUuZ2V0QXR0cmlidXRlKCJocmVmIikKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaHJlZiAhPSBudWxsICYmIGhyZWYuaW5jbHVkZXMoImJhaWR1LmNvbS9saW5rIikpIHsKICAgICAgICAgICAgICAvLyDlt7Lnu4/op6PmnpDlh7rmnaXkuoYKICAgICAgICAgICAgICByZXR1cm4gIHtjdXJIb3N0OiBnZXRUZXh0SG9zdChocmVmKSwgY3VyVXJsOiBocmVmfTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHtjdXJIb3N0OiBnZXRUZXh0SG9zdChzaXRldHBOb2RlLmlubmVyVGV4dCB8fCBzaXRldHBOb2RlLnRleHRDb250ZW50KSwgY3VyVXJsOiBudWxsfTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIEFDSGFuZGxlKCkgewogICAgICAgICAgLy8g5aSE55CG5Li76YeN5a6a5ZCRCiAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5PVEhFUlMgfHwgY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5TT0dPVSkgcmV0dXJuOwogICAgICAgICAgaWYgKEFDQ29uZmlnLmlzUmVkaXJlY3RFbmFibGUpIHsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU3R5cGVfTm9ybWFsICE9PSBudWxsICYmIGN1clNpdGUuU3R5cGVfTm9ybWFsICE9PSAiIikgewogICAgICAgICAgICAgIC8vIOeZvuW6puaQnOeLl+WOu+mHjeWumuWQkS3mma7pgJrmqKHlvI/jgJDms6jmhI/kuI3og73kuLpkb2N1bWVudC5xdWVyeS4u44CRCiAgICAgICAgICAgICAgcmVzZXRVUkxOb3JtYWwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjdXJTaXRlLlN0eXBlX05vcm1hbCkpOwogICAgICAgICAgICAgIGlmIChjaGVja0lTQmFpZHVNYWluKCkpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5zX2Zvcm0gLmluZGV4LWxvZ28tc3JjW3NyYyo9J2dpZiddLCAuc19mb3JtIC5pbmRleC1sb2dvLXNyY25ld1tzcmMqPSdnaWYnXSIpLmZvckVhY2goZnVuY3Rpb24gKHBlcikgewogICAgICAgICAgICAgICAgICBwZXIuc3JjID0gImh0dHBzOi8vcGljLnJtYi5iZHN0YXRpYy5jb20vYzg2MjU1ZTgwMjg2OTYxMzlkM2UzZTRiYjQ0YzA0N2IucG5nIjsKICAgICAgICAgICAgICAgICAgLy8g56We5aWH55qE55m+5bqm55m+5a625Y+3CiAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vaW1nc2EuYmFpZHUuY29tL2ZleC9waWMvaXRlbS84NzE4MzY3YWRhYjQ0YWVkY2M5MWFiMmJiZTFjODcwMWEwOGJmYjI2LmpwZwogICAgICAgICAgICAgICAgICAvLyBodHRwczovL2JhaWR1Lm50YW93LmNvbS9uZXdjc3MvYmFpZHUucG5nCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuR09PR0xFKSByZW1vdmVPbk1vdXNlRG93bkZ1bmMoKTsgLy8g56e76Zmkb25Nb3VzZURvd27kuovku7bvvIzosLfmrYzljrvph43lrprlkJEKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuTUJBSURVKSByZW1vdmVNb2JpbGVCYWlkdURpcmVjdExpbmsoKTsgLy8g5aSE55CG55m+5bqm5omL5py654mI5pys55qE6YeN5a6a5ZCR5Zyw5Z2ACiAgICAgICAgICAgIHJlbW92ZVJlZGlyZWN0TGlua1RhcmdldCgpOyAvLyDlj6rnp7vpmaTnn6XkuY7nmoTph43lrprlkJHpl67popggJiDnmb7luqblrabmnK/ph43lrprlkJHpl67popgKICAgICAgICAgICAgc2FmZVJlbW92ZSgiLnJlc190b3BfYmFubmVyIik7IC8vIOenu+mZpOeZvuW6puWPr+iDveaYvuekuueahOWKq+aMgQogICAgICAgICAgfQoKICAgICAgICAgIHRyeSB7IC8vIOaUvuWFpeW8guW4uOaNleiOt++8jOmYsuatoueUseS6jmh0bWzmj5LlhaXov4fmhaLlr7zoh7TnmoRqc+e7iOatogogICAgICAgICAgICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1zdHlsZSIpLmNoZWNrZWQpIHsKICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dFtuYW1lKj0nc3AtYWMtYV9mb3JjZV9zdHlsZV8nXSIpLmZvckVhY2gocGVyID0+IHsKICAgICAgICAgICAgICAgIHBlci5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgImRpc2FibGVkIik7CiAgICAgICAgICAgICAgICBwZXIucGFyZW50Tm9kZS5zZXRBdHRyaWJ1dGUoInRpdGxlIiwgIuivt+W8gOWQr+iHquWumuS5ieagt+W8jyIpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiaW5wdXRbbmFtZSo9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfJ10iKS5mb3JFYWNoKHBlciA9PiB7CiAgICAgICAgICAgICAgICBwZXIucmVtb3ZlQXR0cmlidXRlKCJkaXNhYmxlZCIpOwogICAgICAgICAgICAgICAgcGVyLnBhcmVudE5vZGUuc2V0QXR0cmlidXRlKCJ0aXRsZSIsICJBQy3oh6rlrprkuYnmoLflvI/lhoXlrrkiKQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWFjLWJsb2NrIikuY2hlY2tlZCkgewogICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIiNzcC1hYy1yZW1vdmVCbG9jaywgI3NwLWFjLWJsb2NrQnRuRGlzcGxheSIpLmZvckVhY2gocGVyID0+IHsKICAgICAgICAgICAgICAgIHBlci5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgImRpc2FibGVkIik7CiAgICAgICAgICAgICAgICBwZXIucGFyZW50Tm9kZS5zZXRBdHRyaWJ1dGUoInRpdGxlIiwgIuivt+W8gOWQr+iHquWumuS5ieagt+W8jyIpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiI3NwLWFjLXJlbW92ZUJsb2NrLCAjc3AtYWMtYmxvY2tCdG5EaXNwbGF5IikuZm9yRWFjaChwZXIgPT4gewogICAgICAgICAgICAgICAgcGVyLnJlbW92ZUF0dHJpYnV0ZSgiZGlzYWJsZWQiKTsKICAgICAgICAgICAgICAgIHBlci5wYXJlbnROb2RlLnNldEF0dHJpYnV0ZSgidGl0bGUiLCAiQUMt6Ieq5Li75oum5oiq5Yqf6IO9IikKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gQUN0b2dnbGVTZXR0aW5nRGlzcGxheShlKSB7CiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgLy8g5pi+56S677yf6ZqQ6JeP6K6+572u55WM6Z2iCiAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmlmcmFtZS1mYXRoZXIgaWZyYW1lIikgPT0gbnVsbCkgewogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuaWZyYW1lLWZhdGhlciIpLmluc2VydEFkamFjZW50SFRNTCgiYmVmb3JlZW5kIiwgIjxpZnJhbWUgc3JjPSdodHRwczovL2doYnRucy5jb20vZ2l0aHViLWJ0bi5odG1sP3VzZXI9bGFuZ3JlbjEzNTMmcmVwbz1HTV9zY3JpcHQmdHlwZT1zdGFyJmNvdW50PXRydWUnIGZyYW1lYm9yZGVyPScwJyBzY3JvbGxpbmc9JzAnIHN0eWxlPSdoZWlnaHQ6IDIwcHg7bWF4LXdpZHRoOiAxMDhweDtwYWRkaW5nLWxlZnQ6NXB4O2JveC1zaXppbmc6IGJvcmRlci1ib3g7bWFyZ2luLWJvdHRvbTogLTVweDtkaXNwbGF5OnVuc2V0ICFpbXBvcnRhbnQ7Jz48L2lmcmFtZT4iKTsKICAgICAgICAgIH0KICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWFjLWNvbnRlbnQiKS5zdHlsZS5kaXNwbGF5ID09PSAnYmxvY2snKSB7CiAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWFjLWNvbnRlbnQiKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIERCQ29uZmlnLm9sZFZlcnNpb24gPSBBQ0NvbmZpZy5vbGRWZXJzaW9uID0gR01faW5mby5zY3JpcHQudmVyc2lvbjsgLy8g5Y+q6ZyA6KaB5YaZ5Ye65LiA6YOo5YiG55qE5YWz6ZSu5pWw5o2u5Y2z5Y+vCiAgICAgICAgICAgICAgR01fc2V0VmFsdWUoIkNvbmZpZyIsIEpTT04uc3RyaW5naWZ5KERCQ29uZmlnKSk7CiAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmFjLW5ld3ZlcnNpb25EaXNwbGF5Iikuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtY29udGVudCIpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCAxMDApOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gU2hvd1NldHRpbmcoKSB7CiAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5PVEhFUlMpIHJldHVybjsKICAgICAgICAgIC8vIOWmguaenOS4jeWtmOWcqOeahOivne+8jOmCo+S5iOiHquW3seWIm+W7uuS4gOS4qi1jb3B5IGZyb20gc3VwZXJQcmVsb2FkCiAgICAgICAgICBpZiAoZG9jdW1lbnQuYm9keSAhPT0gbnVsbCAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtY29udGFpbmVyIikgPT09IG51bGwpIHsKICAgICAgICAgICAgbGV0IENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBDb250YWluZXIuaWQgPSAic3AtYWMtY29udGFpbmVyIjsKICAgICAgICAgICAgQ29udGFpbmVyLmlubmVySFRNTCA9CiAgICAgICAgICAgICAgYDxkaXYgaWQ9InNwLWFjLWNvbnRlbnQiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJzcC1hYy1tYWluIj4KICAgICAgICAgICAgICAgICAgPGZpZWxkc2V0IGlkPSJzcC1hYy1hdXRvcGFnZXItZmllbGQiIHN0eWxlPSJkaXNwbGF5OmJsb2NrOyI+CiAgICAgICAgICAgICAgICAgICAgPGxlZ2VuZCBjbGFzcz0iaWZyYW1lLWZhdGhlciI+CiAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9ImxpbmtocmVmIiBocmVmPSJodHRwczovL3d3dy5udGFvdy5jb20vYWJvdXRzY3JpcHQuaHRtbCIgdGFyZ2V0PSJfYmxhbmsiIHYtdGV4dD0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5wYW5lbF90aXRsZSI+PC9hPgogICAgICAgICAgICAgICAgICAgIDwvbGVnZW5kPgogICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0ic2V0dGluZy1tYWluIiB2LXNob3c9IiFvdGhlci5zaG93U2Vjb25kUGFuZWwiPgogICAgICAgICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwucmVkaXJlY3RfdGl0bGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0ic3AtYWMtcmVkaXJlY3QiIG5hbWU9InNwLWFjLWFfc2VwYXJhdG9yIiB0eXBlPSJjaGVja2JveCIgIHYtbW9kZWw9IkFDQ29uZmlnLmlzUmVkaXJlY3RFbmFibGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5yZWRpcmVjdF90ZXh0IH19CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9InNwLWFjLWlzRW5MYW5nIiBuYW1lPSJzcC1hYy1hX2ZvcmNlIiB0eXBlPSJjaGVja2JveCIgdi1tb2RlbD0iQUNDb25maWcuaXNFbkxhbmciPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VFbl90ZXh0IH19CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuYWRzX3RpdGxlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9InNwLWFjLWFkcyIgbmFtZT0ic3AtYWMtYV9mb3JjZSIgdHlwZT0iY2hlY2tib3giIHYtbW9kZWw9IkFDQ29uZmlnLmlzQWRzRW5hYmxlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuYWRzX3RleHQgfX0KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmF1dG9wYWdlX3RpdGxlIiBjbGFzcz0iIj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9InNwLWFjLWlzQXV0b3BhZ2UiIG5hbWU9InNwLWFjLWFfZm9yY2UiIHR5cGU9ImNoZWNrYm94IiB2LW1vZGVsPSJBQ0NvbmZpZy5pc0F1dG9wYWdlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuYXV0b3BhZ2VfdGV4dCB9fQogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgIDxsaT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuYmxvY2tlbmFibGVfdGl0bGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0ic3AtYWMtYmxvY2siIG5hbWU9InNwLWFjLWFfZm9yY2UiIHR5cGU9ImNoZWNrYm94IiB2LW1vZGVsPSJBQ0NvbmZpZy5pc0Jsb2NrRW5hYmxlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuYmxvY2tlbmFibGVfdGV4dCB9fQogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0ic3AtYWMtYmxvY2tkaXlidXR0b24iIGNsYXNzPSJzcC1hYy1zcGFuYnV0dG9uIiBAY2xpY2s9Im90aGVyLnNob3dTZWNvbmRQYW5lbCA9IHRydWUiIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmJsb2NrRGl5QnRuX3RpdGxlIiBzdHlsZT0ibWFyZ2luLWxlZnQ6IDVweDtjb2xvcjogIzg4ODg4ODsiIHYtdGV4dD0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmJsb2NrRGl5QnRuX3RleHQiPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmJsb2NrZW5hYmxlX3RleHQiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5ibG9ja0F1dG9SZW1vdmVfdGl0bGUiIHYtbW9kZWw9IkFDQ29uZmlnLmlzQmxvY2tEaXNwbGF5IiBpZD0ic3AtYWMtcmVtb3ZlQmxvY2siIHR5cGU9ImNoZWNrYm94Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuYmxvY2tBdXRvUmVtb3ZlX3RleHQgfX0KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmJsb2NrQnRuU2hvd190aXRsZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmJsb2NrQnRuU2hvd190aXRsZSIgIHYtbW9kZWw9IkFDQ29uZmlnLmlzQmxvY2tCdG5Ob3REaXNwbGF5IiBpZD0ic3AtYWMtYmxvY2tCdG5EaXNwbGF5IiB0eXBlPSJjaGVja2JveCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmJsb2NrQnRuU2hvd190ZXh0IH19CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX3RleHQiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0ic3AtYWMtc3R5bGUiIG5hbWU9InNwLWFjLWFfZm9yY2UiIHR5cGU9ImNoZWNrYm94IiB2LW1vZGVsPSJBQ0NvbmZpZy5BZHNTdHlsZUVuYWJsZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV90ZXh0IH19CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICA8IS0tLS0tLS0tLS0tLeeZvuW6puagt+W8jy0tLS0tLS0tLS0tLS0tPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImNvbnRhaW5lci1sYWJlbCBiYWlkdSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJsYWJlbF9oaWRlIiB2LXRleHQ9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfYmFpZHVfbGFibGUiIEBjbGljaz0ibGFiZWxTaG93SGlkZUVudiI+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9Im1hcmdpbi1sZWZ0OjIwcHgiPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2JhaWR1IiB2YWx1ZT0iMCIgdi1tb2RlbD0iQUNDb25maWcuYmFpZHUuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9iYWlkdV9vcmlnaW4gfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgIG5hbWU9J3NwLWFjLWh1eWFuX3N0eWxlX2JhaWR1JyB0eXBlPSdjaGVja2JveCcgdi1tb2RlbD0iQUNDb25maWcuYmFpZHUuSHVZYW5Nb2RlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2JhaWR1X2h1eWFuIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9IiI+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfYmFpZHVsaXRlIiB0eXBlPSJjaGVja2JveCIgdi1tb2RlbD0iQUNDb25maWcuU3R5bGVfQmFpZHVMaXRlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2JhaWR1X2JhaWR1TGl0ZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWxlZnQ6MjBweCI+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfYmFpZHUiIHZhbHVlPSIxIiB2LW1vZGVsPSJBQ0NvbmZpZy5iYWlkdS5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2JhaWR1XzFsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfYmFpZHUiIHZhbHVlPSIyIiB0eXBlPSJyYWRpbyIgdi1tb2RlbD0iQUNDb25maWcuYmFpZHUuQWRzU3R5bGVNb2RlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2JhaWR1XzFsaW5lX2VudGVyIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfYmFpZHUiIHZhbHVlPSIzIiB0eXBlPSJyYWRpbyIgdi1tb2RlbD0iQUNDb25maWcuYmFpZHUuQWRzU3R5bGVNb2RlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2JhaWR1XzJsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfYmFpZHUiIHZhbHVlPSI0IiB0eXBlPSJyYWRpbyIgdi1tb2RlbD0iQUNDb25maWcuYmFpZHUuQWRzU3R5bGVNb2RlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2JhaWR1XzNsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfYmFpZHUiIHZhbHVlPSI1IiB0eXBlPSJyYWRpbyIgdi1tb2RlbD0iQUNDb25maWcuYmFpZHUuQWRzU3R5bGVNb2RlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2JhaWR1XzRsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8YnI+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0tLS0tLS0tLS0t55m+5bqm5qC35byPLS0tLS0tLS0tLS0tLS0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImhlaWdodDogMXB4O3dpZHRoOjI2N3B4O21hcmdpbi1sZWZ0OjI1cHg7YmFja2dyb3VuZC1jb2xvcjojZDhkOGQ4O21hcmdpbi10b3A6MXB4OyI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0tLS0tLS0tLS0t6LC35q2M5qC35byPLS0tLS0tLS0tLS0tLS0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iY29udGFpbmVyLWxhYmVsIGdvb2dsZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJsYWJlbF9oaWRlIiB2LXRleHQ9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZ29vZ2xlX2xhYmxlIiBAY2xpY2s9ImxhYmVsU2hvd0hpZGVFbnYiPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJtYXJnaW4tbGVmdDoyMHB4Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9nb29nbGUiIHZhbHVlPSIwIiB0eXBlPSJyYWRpbyIgdi1tb2RlbD0iQUNDb25maWcuZ29vZ2xlLkFkc1N0eWxlTW9kZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9nb29nbGVfb3JpZ2luIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2dvb2dsZV9odXlhbiI+PGlucHV0IG5hbWU9InNwLWFjLWh1eWFuX3N0eWxlX2dvb2dsZSIgdi1tb2RlbD0iQUNDb25maWcuZ29vZ2xlLkh1WWFuTW9kZSIgdHlwZT0iY2hlY2tib3giPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZ29vZ2xlX2h1eWFuIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2dvb2dsZV9nb29nbGVMaXRlIiBzdHlsZT0iIj48aW5wdXQgbmFtZT0ic3AtYWMtZ29vZ2xlX2luX2JhaWR1bW9kZSIgdi1tb2RlbD0iQUNDb25maWcuaXNHb29sZUluQmFpZHVNb2RlRW5hYmxlIiB0eXBlPSJjaGVja2JveCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9nb29nbGVfZ29vZ2xlTGl0ZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWxlZnQ6MjBweCI+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZ29vZ2xlIiB2YWx1ZT0iMSIgdi1tb2RlbD0iQUNDb25maWcuZ29vZ2xlLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZ29vZ2xlXzFsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZ29vZ2xlIiB2YWx1ZT0iMiIgdi1tb2RlbD0iQUNDb25maWcuZ29vZ2xlLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iIGNoZWNrZWQ9IiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9nb29nbGVfMWxpbmVfZW50ZXIgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9nb29nbGUiIHZhbHVlPSIzIiB2LW1vZGVsPSJBQ0NvbmZpZy5nb29nbGUuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9nb29nbGVfMmxpbmUgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9nb29nbGUiIHZhbHVlPSI0IiB2LW1vZGVsPSJBQ0NvbmZpZy5nb29nbGUuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9nb29nbGVfM2xpbmUgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9nb29nbGUiIHZhbHVlPSI1IiB2LW1vZGVsPSJBQ0NvbmZpZy5nb29nbGUuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9nb29nbGVfNGxpbmUgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxicj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3osLfmrYzmoLflvI8tLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iaGVpZ2h0OiAxcHg7d2lkdGg6MjY3cHg7bWFyZ2luLWxlZnQ6MjVweDtiYWNrZ3JvdW5kLWNvbG9yOiNkOGQ4ZDg7bWFyZ2luLXRvcDoxcHg7Ij48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3lv4XlupTmoLflvI8tLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJjb250YWluZXItbGFiZWwgYmluZyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJsYWJlbF9oaWRlIiB2LXRleHQ9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfYmluZ19sYWJsZSIgQGNsaWNrPSJsYWJlbFNob3dIaWRlRW52Ij48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWxlZnQ6MjBweCI+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfYmluZyIgdi1tb2RlbD0iQUNDb25maWcuYmluZy5BZHNTdHlsZU1vZGUiIHZhbHVlPSIwIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9iaW5nX29yaWdpbiB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9iaW5nX2h1eWFuIj48aW5wdXQgbmFtZT0ic3AtYWMtaHV5YW5fc3R5bGVfYmluZyIgdi1tb2RlbD0iQUNDb25maWcuYmluZy5IdVlhbk1vZGUiIHR5cGU9ImNoZWNrYm94Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2JpbmdfaHV5YW4gfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxicj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9Im1hcmdpbi1sZWZ0OjIwcHgiPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2JpbmciIHYtbW9kZWw9IkFDQ29uZmlnLmJpbmcuQWRzU3R5bGVNb2RlIiB2YWx1ZT0iMSIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfYmluZ18xbGluZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2JpbmciIHZhbHVlPSIyIiB2LW1vZGVsPSJBQ0NvbmZpZy5iaW5nLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfYmluZ18xbGluZV9lbnRlciB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2JpbmciIHZhbHVlPSIzIiB2LW1vZGVsPSJBQ0NvbmZpZy5iaW5nLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iIGNoZWNrZWQ9IiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9iaW5nXzJsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfYmluZyIgdmFsdWU9IjQiIHYtbW9kZWw9IkFDQ29uZmlnLmJpbmcuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9iaW5nXzNsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfYmluZyIgdmFsdWU9IjUiIHYtbW9kZWw9IkFDQ29uZmlnLmJpbmcuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9iaW5nXzRsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3lv4XlupTmoLflvI8tLS0tLS0tLS0tLS0tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImhlaWdodDogMXB4O3dpZHRoOjI2N3B4O21hcmdpbi1sZWZ0OjI1cHg7YmFja2dyb3VuZC1jb2xvcjojZDhkOGQ4O21hcmdpbi10b3A6MXB4OyI+PC9kaXY+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAmbHQ7ISZuZGFzaDsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1O+aQnOeLl+agt+W8jyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyZuZGFzaDsmZ3Q7LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImNvbnRhaW5lci1sYWJlbCBzb2dvdSI+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ibGFiZWxfaGlkZSIgdi10ZXh0PSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX3NvZ291X2xhYmxlIiBAY2xpY2s9ImxhYmVsU2hvd0hpZGVFbnYiPjwvbGFiZWw+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWxlZnQ6MjBweCI+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfc29nb3UiIHYtbW9kZWw9IkFDQ29uZmlnLnNvZ291LkFkc1N0eWxlTW9kZSIgdmFsdWU9IjAiIHR5cGU9InJhZGlvIj4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9zb2dvdV9vcmlnaW4gfX0tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9zb2dvdV9odXlhbiI+PGlucHV0IG5hbWU9InNwLWFjLWh1eWFuX3N0eWxlX3NvZ291IiB2LW1vZGVsPSJBQ0NvbmZpZy5zb2dvdS5IdVlhbk1vZGUiIHR5cGU9ImNoZWNrYm94Ij4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9zb2dvdV9odXlhbiB9fS0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPi0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICA8YnI+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWxlZnQ6MjBweCI+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX3NvZ291IiB2YWx1ZT0iMSIgdi1tb2RlbD0iQUNDb25maWcuc29nb3UuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfc29nb3VfMWxpbmUgfX0tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX3NvZ291IiB2YWx1ZT0iMiIgdi1tb2RlbD0iQUNDb25maWcuc29nb3UuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfc29nb3VfMWxpbmVfZW50ZXIgfX0tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX3NvZ291IiB2YWx1ZT0iMyIgdi1tb2RlbD0iQUNDb25maWcuc29nb3UuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyIgY2hlY2tlZD0iIj4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9zb2dvdV8ybGluZSB9fS0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPi0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfc29nb3UiIHZhbHVlPSI0IiB2LW1vZGVsPSJBQ0NvbmZpZy5zb2dvdS5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIj4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9zb2dvdV8zbGluZSB9fS0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPi0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfc29nb3UiIHZhbHVlPSI1IiB2LW1vZGVsPSJBQ0NvbmZpZy5zb2dvdS5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIj4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9zb2dvdV80bGluZSB9fS0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPi0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICZsdDshJm5kYXNoOyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU75pCc54uX5qC35byPJiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7Jm5kYXNoOyZndDstLT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iaGVpZ2h0OiAxcHg7d2lkdGg6MjY3cHg7bWFyZ2luLWxlZnQ6MjVweDtiYWNrZ3JvdW5kLWNvbG9yOiNkOGQ4ZDg7bWFyZ2luLXRvcDoxcHg7Ij48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3puK3puK3mkJzmoLflvI8tLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJjb250YWluZXItbGFiZWwgZHVjayI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJsYWJlbF9oaWRlIiB2LXRleHQ9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZHVja19sYWJsZSIgQGNsaWNrPSJsYWJlbFNob3dIaWRlRW52Ij48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWxlZnQ6MjBweCI+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZHVjayIgdi1tb2RlbD0iQUNDb25maWcuZHVjay5BZHNTdHlsZU1vZGUiIHZhbHVlPSIwIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kdWNrX29yaWdpbiB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kdWNrX2h1eWFuIj48aW5wdXQgbmFtZT0ic3AtYWMtaHV5YW5fc3R5bGVfZHVjayIgdi1tb2RlbD0iQUNDb25maWcuZHVjay5IdVlhbk1vZGUiIHR5cGU9ImNoZWNrYm94Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2R1Y2tfaHV5YW4gfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2R1Y2tfbm9ybWFsIiBzdHlsZT0iIj48aW5wdXQgdi1tb2RlbD0iQUNDb25maWcubm9ybWFsaXplRHVjayIgdHlwZT0iY2hlY2tib3giPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZHVja19ub3JtYWwgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxicj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9Im1hcmdpbi1sZWZ0OjIwcHgiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2R1Y2siIHZhbHVlPSIxIiB2LW1vZGVsPSJBQ0NvbmZpZy5kdWNrLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZHVja18xbGluZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2R1Y2siIHZhbHVlPSIyIiB2LW1vZGVsPSJBQ0NvbmZpZy5kdWNrLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZHVja18xbGluZV9lbnRlciB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2R1Y2siIHZhbHVlPSIzIiB2LW1vZGVsPSJBQ0NvbmZpZy5kdWNrLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iIGNoZWNrZWQ9IiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kdWNrXzJsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZHVjayIgdmFsdWU9IjQiIHYtbW9kZWw9IkFDQ29uZmlnLmR1Y2suQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kdWNrXzNsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZHVjayIgdmFsdWU9IjUiIHYtbW9kZWw9IkFDQ29uZmlnLmR1Y2suQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kdWNrXzRsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3puK3puK3mkJzmoLflvI8tLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iaGVpZ2h0OiAxcHg7d2lkdGg6MjY3cHg7bWFyZ2luLWxlZnQ6MjVweDtiYWNrZ3JvdW5kLWNvbG9yOiNkOGQ4ZDg7bWFyZ2luLXRvcDoxcHg7Ij48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3lpJrlkInmoLflvI8tLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJjb250YWluZXItbGFiZWwgZG9nZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJsYWJlbF9oaWRlIiB2LXRleHQ9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZG9nZV9sYWJsZSIgQGNsaWNrPSJsYWJlbFNob3dIaWRlRW52Ij48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWxlZnQ6MjBweCI+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZG9nZSIgdi1tb2RlbD0iQUNDb25maWcuZG9nZS5BZHNTdHlsZU1vZGUiIHZhbHVlPSIwIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kb2dlX29yaWdpbiB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kb2dlX2h1eWFuIj48aW5wdXQgbmFtZT0ic3AtYWMtaHV5YW5fc3R5bGVfZG9nZSIgdi1tb2RlbD0iQUNDb25maWcuZG9nZS5IdVlhbk1vZGUiIHR5cGU9ImNoZWNrYm94Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2RvZ2VfaHV5YW4gfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2RvZ2Vfbm9ybWFsIiBzdHlsZT0iIj48aW5wdXQgdi1tb2RlbD0iQUNDb25maWcubm9ybWFsaXplRG9nZSIgdHlwZT0iY2hlY2tib3giPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZG9nZV9ub3JtYWwgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxicj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9Im1hcmdpbi1sZWZ0OjIwcHgiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2RvZ2UiIHZhbHVlPSIxIiB2LW1vZGVsPSJBQ0NvbmZpZy5kb2dlLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZG9nZV8xbGluZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2RvZ2UiIHZhbHVlPSIyIiB2LW1vZGVsPSJBQ0NvbmZpZy5kb2dlLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZG9nZV8xbGluZV9lbnRlciB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2RvZ2UiIHZhbHVlPSIzIiB2LW1vZGVsPSJBQ0NvbmZpZy5kb2dlLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iIGNoZWNrZWQ9IiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kb2dlXzJsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZG9nZSIgdmFsdWU9IjQiIHYtbW9kZWw9IkFDQ29uZmlnLmRvZ2UuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kb2dlXzNsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZG9nZSIgdmFsdWU9IjUiIHYtbW9kZWw9IkFDQ29uZmlnLmRvZ2UuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kb2dlXzRsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgIDwhLS0tLS0tLS0tLS0t5aSa5ZCJ5qC35byPLS0tLS0tLS0tLS0tLS0+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3miqTnnLzmqKHlvI/orr7nva4tLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICAgIDxsaT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmh1eWFuTW9kZV90aXRsZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPSJzcC1hYy11c2VyY29sb3IiIHYtbW9kZWw9IkFDQ29uZmlnLmlzVXNlckNvbG9yRW5hYmxlIiBuYW1lPSJzcC1hYy1hX2ZvcmNlIiB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD0iIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuaHV5YW5Nb2RlX3RleHQgfX0KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgICA8bGk+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ibWVudS1ib3gtY29udGFpbmVyIiA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5odXlhbk1vZGVfdGl0bGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWxlZnQ6MjBweDsiIHYtdGV4dD0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmh1eWFuQ29sb3JfdGV4dCI+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9InNwLWFjLW1lbnVodXlhbkNvbG9yIiBAaW5wdXQuc3RvcD0idXNlVGhpc0h1eWFuQ29sb3IiIHYtbW9kZWw9IkFDQ29uZmlnLmRlZmF1bHRIdVlhbkNvbG9yIiB0eXBlPSJjb2xvciIgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuaHV5YW5Db2xvcl90aXRsZSIgc3R5bGU9ImN1cnNvcjogcG9pbnRlcjttYXJnaW4tdG9wOi0wLjA1cmVtO2hlaWdodDoyM3B4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJtZW51LWJveC1zbWFsbCIgZGF0YS12YWx1ZT0iI0RFRjFFRiIgQGNsaWNrLnN0b3A9InVzZVRoaXNIdXlhbkNvbG9yIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjojREVGMUVGOyI+Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9Im1lbnUtYm94LXNtYWxsIiBkYXRhLXZhbHVlPSIjRjNGMkVFIiBAY2xpY2suc3RvcD0idXNlVGhpc0h1eWFuQ29sb3IiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiNGM0YyRUU7Ij4mbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDs8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ibWVudS1ib3gtc21hbGwiIGRhdGEtdmFsdWU9IiNFNUU1RTUiIEBjbGljay5zdG9wPSJ1c2VUaGlzSHV5YW5Db2xvciIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6I0U1RTVFNTsiPiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOzwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJsaW5raHJlZiIgZGF0YS1ocmVmPSJodHRwczovL3d3dy5udGFvdy5jb20vY29sb3JwaWNrZXIuaHRtbCIgc3R5bGU9ImN1cnNvcjpwb2ludGVyO21hcmdpbi1yaWdodDogMTBweDsiIG9uY2xpY2s9IndpbmRvdy5vcGVuKHRoaXMuZGF0YXNldC5ocmVmKSIgdi10ZXh0PSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuaHV5YW5Db2xvck1vcmVfdGV4dCI+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgICA8IS0tLS0tLS0tLS0tLUZhdmljb27lm77moIforr7nva4tLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICAgIDxsaT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5mYXZpY29uX3RpdGxlIiB2LW1vZGVsPSJBQ0NvbmZpZy5pc0Zhdmljb25FbmFibGUiIGlkPSJzcC1hYy1mYXZpY29uIiBuYW1lPSJzcC1hYy1hX2ZvcmNlIiB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD0iIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuZmF2aWNvbl90ZXh0IH19CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJtYXJnaW4tbGVmdDoyMHB4OyIgdi10ZXh0PSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuZmF2aWNvbl9kZWZhdWx0SWNvbl90ZXh0Ij48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0ic3AtYWMtZmF2aWNvblVybCIgbmFtZT0ic3AtYWMtYV9mb3JjZSIgdi1tb2RlbD0iQUNDb25maWcuZGVmYXVsdEZhdmljb25VcmwiIHZhbHVlPSJodHRwczovL2FlMDEuYWxpY2RuLmNvbS9rZi9IVEIxZFJZMFg4T0QzS1ZqU1pGRnE2QW45cFhheS5qcGciIHN0eWxlPSJ3aWR0aDo1NSU7bWFyZ2luLXRvcDotMC4zZW07IiB0eXBlPSJpbnB1dCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3np7vpmaTnmb7luqbmkJzntKLpooTmtYstLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICAgIDxsaT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5zZWFyY2hPcmlnaW5fdGl0bGUiIHYtbW9kZWw9IkFDQ29uZmlnLmRvRGlzYWJsZVN1ZyIgaWQ9InNwLWFjLXN1Z19vcmlnaW4iIG5hbWU9InNwLWFjLWFfZm9yY2UiIHR5cGU9ImNoZWNrYm94IiBjaGVja2VkPSIiPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5zZWFyY2hPcmlnaW5fdGV4dCB9fQogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgIDwhLS0tLS0tLS0tLS0t6ZmE5YqgN+OAgTjjgIE5LS0tLS0tLS0tLS0tLS0+CiAgICAgICAgICAgICAgICAgICAgICA8bGk+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9InNwLWFjLXJpZ2h0IiB2LW1vZGVsPSJBQ0NvbmZpZy5pc1JpZ2h0RGlzcGxheUVuYWJsZSIgdHlwZT0iY2hlY2tib3giPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5zaG93UmlnaHRfdGV4dCB9fQogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPSJzcC1hYy1jb3VudGVyIiB2LW1vZGVsPSJBQ0NvbmZpZy5pc0NvdW50ZXJFbmFibGUiIG5hbWU9InNwLWFjLWFfZm9yY2UiIHR5cGU9ImNoZWNrYm94Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuc2hvd0NvdW50ZXJfdGV4dCB9fQogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPSJzcC1hYy1hbGluZSIgdi1tb2RlbD0iQUNDb25maWcuaXNBTGluZUVuYWJsZSIgbmFtZT0ic3AtYWMtYV9mb3JjZSIgdHlwZT0iY2hlY2tib3giPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5zaG93QUxpbmVfdGV4dCB9fQogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgIDwhLS0tLS0tLS0tLS0t6Ieq5a6a5LmJ5qC35byP5YaF5a65LS0tLS0tLS0tLS0tLS0+CiAgICAgICAgICAgICAgICAgICAgICA8bGk+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9InNwLWFjLXVzZXJzdHlsZSIgdi1tb2RlbD0iQUNDb25maWcuaXNVc2VyU3R5bGVFbmFibGUiIG5hbWU9InNwLWFjLWFfZm9yY2UiIHR5cGU9ImNoZWNrYm94Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuc2hvd1VzZXJTdHlsZV90ZXh0IH19CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgaWQ9InNwLWFjLXVzZXJzdHlsZVRFWFQiIHYtbW9kZWw9IkFDQ29uZmlnLlVzZXJTdHlsZVRleHQiIEBrZXl1cD0ibG9hZEN1c3RvbVN0eWxlIiBAY2hhbmdlPSJsb2FkQ3VzdG9tU3R5bGUiIEBwYXN0ZT0ibG9hZEN1c3RvbVN0eWxlIiBuYW1lPSJzcC1hYy1hX2ZvcmNlIiBzdHlsZT0id2lkdGg6ODUlO2hlaWdodDogNjZweDttYXJnaW4tbGVmdDozMHB4OyIgdHlwZT0iaW5wdXQiID48L3RleHRhcmVhPgogICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgIDxsaT4KICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9ImxpbmtocmVmIiB0YXJnZXQ9Il9ibGFuayIgOmhyZWY9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5jb250YWN0TWVfdXJsIiB2LXRleHQ9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5jb250YWN0TWVfdGV4dCI+PC9hPgogICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICA8L3VsPgogICAgICAgICAgICAgICAgICAgIDwhLS0tLS0tLS0tLS0t5oum5oiq5Z+f5ZCN6K6+572ucGFuZWwtLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9InNldHRpbmctc2Vjb25kIiB2LXNob3c9Im90aGVyLnNob3dTZWNvbmRQYW5lbCI+CiAgICAgICAgICAgICAgICAgICAgICA8bGkgc3R5bGU9J21hcmdpbi1ib3R0b206IDhweCAhaW1wb3J0YW50Oyc+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0nc3AtYWMtYmxvY2tkaXlidXR0b24tYmFjaycgQGNsaWNrPSJvdGhlci5zaG93U2Vjb25kUGFuZWwgPSBvdGhlci5zaG93QmxvY2tMaXN0QXJlYSA9IGZhbHNlIiBjbGFzcz0nc3AtYWMtc3BhbmJ1dHRvbic+e3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnNldHRpbmdfcGFuZWxfc2Vjb25kLmJhY2tCdG5fdGV4dCB9fTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnNldHRpbmdfcGFuZWxfc2Vjb25kLmJsb2NrTGFiZWxfdGV4dCB9fX0KICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgICA8bGkgc3R5bGU9J21hcmdpbi1ib3R0b206IDhweCAhaW1wb3J0YW50Oyc+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSdzcC1hYy1ibG9ja2RpeWJ1dHRvbi1kaXlsaXN0JyBjbGFzcz0nc3AtYWMtc3BhbmJ1dHRvbicgQGNsaWNrPSJvdGhlci5zaG93QmxvY2tMaXN0QXJlYSA9ICFvdGhlci5zaG93QmxvY2tMaXN0QXJlYSIgdi10ZXh0PSJjYWxfZGl5QmxvY2tMaXN0QnRuIj48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSdhYy1ibG9ja0xpc3QnIEBjbGljaz0icmVtb3ZlQUJsb2NrTGlzdEl0ZW0iIHN0eWxlPSdtYXgtaGVpZ2h0OjYwdmg7b3ZlcmZsb3cteTogc2Nyb2xsOyc+CiAgICAgICAgICAgICAgICAgICAgICAgIDx1bCB2LXNob3c9IiFvdGhlci5zaG93QmxvY2tMaXN0QXJlYSIgdi1odG1sPSJnZXRCbG9ja0xpc3QiPjwvdWw+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSdhYy1ibG9ja0JveENvbicgc3R5bGU9J21heC1oZWlnaHQ6IDYwdmg7dGV4dC1hbGlnbjogY2VudGVyO21hcmdpbi1sZWZ0OiAyNnB4Oyc+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSB2LXNob3c9Im90aGVyLnNob3dCbG9ja0xpc3RBcmVhIiAgQGtleXVwPSJzeW5jVG9CbG9ja0xpc3QiIEBjaGFuZ2U9InN5bmNUb0Jsb2NrTGlzdCIgQHBhc3RlPSJzeW5jVG9CbG9ja0xpc3QiIHJvd3M9IjIwIiB2LXRleHQ9IkFDQ29uZmlnLlVzZXJCbG9ja0xpc3Quam9pbignXFxuJykiPjwvdGV4dGFyZWE+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuc2V0dGluZ19wYW5lbF9zZWNvbmQuYWRkQmxvY2tMYWJlbF90ZXh0IH19PGlucHV0IGNsYXNzPSJzcC1hYy1hZGRSdWxlT25lIiBAa2V5dXAuZW50ZXI9ImNrQWRkUnVsZSIgdi1tb2RlbD0ib3RoZXIuYWRkQmxvY2tJdGVtIiBzdHlsZT0nd2lkdGg6NTUlOyc+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSdzcC1hYy1hZGRSdWxlYnV0dG9uJyBjbGFzcz0nc3AtYWMtc3BhbmJ1dHRvbiBlbmRidXR0b24nIEBjbGljaz0iY2tBZGRSdWxlIiBzdHlsZT0ncG9zaXRpb246IHJlbGF0aXZlICFpbXBvcnRhbnQ7bGluZS1oZWlnaHQ6IDE3cHg7JyB2LXRleHQ9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5zZXR0aW5nX3BhbmVsX3NlY29uZC5hZGRCdG5MYWJlbF90ZXh0Ij7mlrDlop48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3kv53lrZjjgIHlj5bmtojmjInpkq4tLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0ic3AtYWMtY2FuY2VsYnV0dG9uIiBjbGFzcz0ic3AtYWMtc3BhbmJ1dHRvbiBlbmRidXR0b24iIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmNhbmNlbEJ0bl90ZXh0IiBzdHlsZT0icG9zaXRpb246IHJlbGF0aXZlO2Zsb2F0OiBsZWZ0OyIgdi10ZXh0PSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuY2FuY2VsQnRuX3RleHQiPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0ic3AtYWMtc2F2ZWJ1dHRvbiIgQGNsaWNrPSJzYXZlQ29uZmlnIiBjbGFzcz0ic3AtYWMtc3BhbmJ1dHRvbiBlbmRidXR0b24iIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLm9rQnRuX3RleHQiIHN0eWxlPSJwb3NpdGlvbjogcmVsYXRpdmU7ZmxvYXQ6IHJpZ2h0OyIgdi10ZXh0PSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwub2tCdG5fdGV4dCI+PC9zcGFuPgogICAgICAgICAgICAgICAgICA8L2ZpZWxkc2V0PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgPC9kaXY+YDsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKENvbnRhaW5lcik7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgbGV0IGFsbE5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLkFDLWZhdmljb25ULCAuQUMtQ291bnRlclQiKTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxsTm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKGFsbE5vZGVzW2ldLmdldEF0dHJpYnV0ZSgnYWNDbGljaycpID09IG51bGwpIHsKICAgICAgICAgICAgICBhbGxOb2Rlc1tpXS5zZXRBdHRyaWJ1dGUoJ2FjQ2xpY2snLCAnMScpOwogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBhbGxOb2Rlc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBBQ3RvZ2dsZVNldHRpbmdEaXNwbGF5KGUpOwogICAgICAgICAgICAgICAgfSwgdHJ1ZSk7CiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJib2R5ICNzcC1hYy1jb250YWluZXIiKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsgLy8g6Zi75q2i54K55Ye76Ieq6Lqr55qE5pe25YCZ5YWz6ZetCiAgICAgICAgICAgIH0sIGZhbHNlKTsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiYm9keSIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICBzYWZlRnVuY3Rpb24oICgpID0+IHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1jb250ZW50Iikuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9LCBmYWxzZSk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICB9CgogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlTW9iaWxlQmFpZHVEaXJlY3RMaW5rKCkgewogICAgICAgICAgbGV0IG5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiI3BhZ2UgI3BhZ2UtYmQgI3Jlc3VsdHMgLnJlc3VsdDpub3QoW2FjX3JlZGlyZWN0U3RhdHVzXSkiKTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgbGV0IGN1ck5vZGUgPSBub2Rlc1tpXTsKICAgICAgICAgICAgc2FmZUZ1bmN0aW9uKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBsZXQgY3VyRGF0YSA9IEpTT04ucGFyc2UoY3VyTm9kZS5kYXRhc2V0LmxvZy5yZXBsYWNlKC8nL2dtLCAiXCIiKSk7CiAgICAgICAgICAgICAgbGV0IHRydWVMaW5rID0gY3VyRGF0YS5tdTsKICAgICAgICAgICAgICBjdXJOb2RlLnF1ZXJ5U2VsZWN0b3IoImFydGljbGUiKS5zZXRBdHRyaWJ1dGUoInJsLWxpbmstaHJlZiIsIHRydWVMaW5rKTsKICAgICAgICAgICAgICBjdXJOb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoImEiKS5mb3JFYWNoKGZ1bmN0aW9uIChwZXIpIHsKICAgICAgICAgICAgICAgIHBlci5zZXRBdHRyaWJ1dGUoImhyZWYiLCB0cnVlTGluayk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjdXJOb2RlLnNldEF0dHJpYnV0ZSgiYWNfcmVkaXJlY3RTdGF0dXMiLCAiMSIpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlT25Nb3VzZURvd25GdW5jKCkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IHJlc3VsdE5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmcgLnJjIGEiKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHROb2Rlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGxldCBvbmUgPSByZXN1bHROb2Rlc1tpXTsKICAgICAgICAgICAgICBvbmUuc2V0QXR0cmlidXRlKCJvbm1vdXNlZG93biIsICIiKTsgLy8g6LC35q2M5Y676YeN5a6a5ZCR5bmy5omwCiAgICAgICAgICAgICAgb25lLnNldEF0dHJpYnV0ZSgidGFyZ2V0IiwgIl9ibGFuayIpOyAvLyDosLfmrYzpk77mjqXmlrDmoIfnrb7miZPlvIAKICAgICAgICAgICAgfQogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbW92ZVJlZGlyZWN0TGlua1RhcmdldCgpIHsKICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLlpISUhVKSB7CiAgICAgICAgICAgIGxldCBub2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5SaWNoVGV4dCBhW2hyZWYqPScvL2xpbmsuemhpaHUuY29tLz90YXJnZXQnXSIpOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgbGV0IHVybCA9IGRlY29kZVVSSUNvbXBvbmVudChub2Rlc1tpXS5ocmVmLnJlcGxhY2UoL2h0dHBzPzpcL1wvbGlua1wuemhpaHVcLmNvbVwvXD90YXJnZXQ9LywgIiIpKTsKICAgICAgICAgICAgICBub2Rlc1tpXS5ocmVmID0gdXJsOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuQkFJRFVfWFVFU0hVKSB7CiAgICAgICAgICAgIGxldCB4bm9kZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJhW2hyZWYqPSdzY192dXJsPWh0dHAnXSIpOwogICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaSA8IHhub2Rlcy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgIGxldCB4dXJsID0gZ2V0VXJsQXR0cmlidXRlKHhub2Rlc1tqXS5ocmVmLCAic2NfdnVybCIsIHRydWUpOwogICAgICAgICAgICAgIHhub2Rlc1tqXS5ocmVmID0geHVybDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8g5o+Q5Y+WdXJs5YWD57Sg55qE5Y+C5pWw5YC8CiAgICAgICAgZnVuY3Rpb24gZ2V0VXJsQXR0cmlidXRlKHVybCwgYXR0cmlidXRlLCBuZWVkRGVjb2RlKSB7CiAgICAgICAgICBsZXQgc2VhcmNoVmFsdWVTID0gKHVybC5zdWJzdHIoMSkgKyAiIikuc3BsaXQoIiYiKTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VhcmNoVmFsdWVTLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGxldCBrZXlfdmFsdWUgPSBzZWFyY2hWYWx1ZVNbaV0uc3BsaXQoIj0iKTsKICAgICAgICAgICAgbGV0IHJlZyA9IG5ldyBSZWdFeHAoIl4iICsgYXR0cmlidXRlICsgIiQiKTsKICAgICAgICAgICAgaWYgKHJlZy50ZXN0KGtleV92YWx1ZVswXSkpIHsKICAgICAgICAgICAgICBsZXQgc2VhcmNoV29yZHMgPSBrZXlfdmFsdWVbMV07CiAgICAgICAgICAgICAgcmV0dXJuIG5lZWREZWNvZGUgPyBkZWNvZGVVUklDb21wb25lbnQoc2VhcmNoV29yZHMpIDogc2VhcmNoV29yZHM7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlc2V0VVJMTm9ybWFsKGxpc3QpIHsKICAgICAgICAgIC8vIOazqOaEj+aciemHjeWkjeeahOWcsOWdgO+8jOWwvemHj+WvuemHjeWkjeWcsOWdgOi/m+ihjOWOu+mHjQogICAgICAgICAgdmFyIGhhc0RlYWxIcmVmU2V0ID0gbmV3IFNldCgpOwogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIC8vIOatpOaWueazleaYr+W8guatpe+8jOaVheWcqOe7k+adn+eahOaXtuWAmeS9v+eUqGnkvJrlh7rpl67popgt5Lil6YeNIQogICAgICAgICAgICAvLyDph4fnlKjpl63ljIXnmoTmlrnms5XmnaXov5vooYzmlbDmja7nmoTkvKDpgJIKICAgICAgICAgICAgbGV0IGN1ck5vZGUgPSBsaXN0W2ldOwogICAgICAgICAgICBsZXQgY3VyaHJlZiA9IGN1ck5vZGUuaHJlZjsKICAgICAgICAgICAgaWYgKGxpc3RbaV0gIT09IG51bGwgJiYgbGlzdFtpXS5nZXRBdHRyaWJ1dGUoImFjX3JlZGlyZWN0U3RhdHVzIikgPT0gbnVsbCkgewogICAgICAgICAgICAgIGxpc3RbaV0uc2V0QXR0cmlidXRlKCJhY19yZWRpcmVjdFN0YXR1cyIsICIwIik7CiAgICAgICAgICAgICAgbGV0IGxlbjEgPSBoYXNEZWFsSHJlZlNldC5zaXplOwogICAgICAgICAgICAgIGhhc0RlYWxIcmVmU2V0LmFkZChjdXJocmVmKTsKICAgICAgICAgICAgICBsZXQgbGVuMiA9IGhhc0RlYWxIcmVmU2V0LnNpemU7CiAgICAgICAgICAgICAgaWYgKGxlbjEgPT09IGxlbjIpIGNvbnRpbnVlOyAvLyDor7TmmI7mlbDmja7lt7Lnu4/lpITnkIbov4fvvIzlrZjlnKjnm7jlkIznmoTorrDlvZUKICAgICAgICAgICAgICBpZiAoY3VyaHJlZi5pbmNsdWRlcygid3d3LmJhaWR1LmNvbS9saW5rIikgfHwKICAgICAgICAgICAgICAgIGN1cmhyZWYuaW5jbHVkZXMoIm0uYmFpZHUuY29tL2Zyb20iKSB8fAogICAgICAgICAgICAgICAgY3VyaHJlZi5pbmNsdWRlcygid3d3LnNvZ291LmNvbS9saW5rIikgfHwKICAgICAgICAgICAgICAgIGN1cmhyZWYuaW5jbHVkZXMoInNvLmNvbS9saW5rIikpIHsKICAgICAgICAgICAgICAgIChmdW5jdGlvbiAoY19jdXJub2RlLCBjX2N1cmhyZWYpIHsKICAgICAgICAgICAgICAgICAgbGV0IHVybCA9IGNfY3VyaHJlZi5yZXBsYWNlKC9eaHR0cDovLCAiaHR0cHM6Iik7CiAgICAgICAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJBSURVICYmICF1cmwuaW5jbHVkZXMoImVxaWQiKSkgewogICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOaYr+eZvuW6pu+8jOW5tuS4lOayoeacieW4puacieino+aekOWPguaVsO+8jOmCo+S5iOaJi+WKqOW4puS4igogICAgICAgICAgICAgICAgICAgIHVybCA9IHVybCArICImd2Q9JmVxaWQ9IjsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBsZXQgZ21SZXF1ZXN0Tm9kZSA9IEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICAvLyBmcm9tOiAiYWN4aHIiLAogICAgICAgICAgICAgICAgICAgIGV4dERhdGE6IGNfY3VyaHJlZiwgLy8g55So5LqO5omp5bGVCiAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyJBY2NlcHQiOiAiKi8qIiwgIlJlZmVyZXIiOiBjX2N1cmhyZWYucmVwbGFjZSgvXmh0dHA6LywgImh0dHBzOiIpfSwKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDgwMDAsCiAgICAgICAgICAgICAgICAgICAgb25yZWFkeXN0YXRlY2hhbmdlOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsgLy8gTUFSSyDmnInml7blgJnov5nkuKrlh73mlbDmoLnmnKzkuI3ov5vmnaUgLSDosIPor5XnmoTpl67popggLSB0aW1lb3V0CiAgICAgICAgICAgICAgICAgICAgICAvLyDnlLHkuo7mmK/nibnmrorov5Tlm54t5bm25LiU5aW95pCcLeaQnOeLly3nmb7luqbpg73mmK/ov5nkuKrmoLzlvI/vvIzmlYXmj5Dlh7oKICAgICAgICAgICAgICAgICAgICAgIERlYWxSZWRpcmVjdChnbVJlcXVlc3ROb2RlLCBjX2N1cmhyZWYsIHJlc3BvbnNlLnJlc3BvbnNlVGV4dCwgIlVSTD0nKFteJ10rKSciKQogICAgICAgICAgICAgICAgICAgICAgLy8g6L+Z5Liq5piv5Zyo5LiK6Z2i5peg5rOV5aSE55CG55qE5oOF5Ya15LiL77yM5aSH55So55qEIHRtLWZpbmFsdXJsZGhkZyAgdG0tZmluYWx1cmxtZmRoCiAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UucmVzcG9uc2VIZWFkZXJzLmluY2x1ZGVzKCJ0bS1maW5hbHVybCIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWxVUkwgPSBSZWdfR2V0KHJlc3BvbnNlLnJlc3BvbnNlSGVhZGVycywgInRtLWZpbmFsdXJsXFx3KzogKFteXFxzXSspIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWxVUkwgPT0gbnVsbCB8fCByZWxVUkwgPT09ICIiIHx8IHJlbFVSTC5pbmNsdWRlcygid3d3LmJhaWR1LmNvbS9zZWFyY2gvZXJyb3IiKSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICBEZWFsUmVkaXJlY3QoZ21SZXF1ZXN0Tm9kZSwgY19jdXJocmVmLCByZWxVUkwpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KShjdXJOb2RlLCBjdXJocmVmKTsgLy/kvKDpgJLml6fnmoTnvZHlnYDov4fljrvvvIzor7vkvZxjX2N1cmhyZWYKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gY3VyTm9kZS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW92ZXIiLCAoKT0+IHsKICAgICAgICAgICAgICAvLyAgIGNvbnN0IEFCS2V5ID0gUmVkaXJlY3RNYXAuZ2V0KGN1ck5vZGUuaHJlZik7IC8vIOWOn+WniyAtPiDkuYvlkI7nmoTpk77mjqUKICAgICAgICAgICAgICAvLyAgIGlmKEFCS2V5KSBjdXJOb2RlLmhyZWYgPSBBQktleTsKICAgICAgICAgICAgICAvLyB9KQogICAgICAgICAgICAgIC8vIGN1ck5vZGUuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdXQiLCAoKT0+IHsKICAgICAgICAgICAgICAvLyAgIGNvbnN0IEJBS2V5ID0gUmVkaXJlY3RNYXAuZ2V0KGN1ck5vZGUuaHJlZik7IC8vIOS5i+WQjueahOi/nuaOpSAtPiDljp/lp4sKICAgICAgICAgICAgICAvLyAgIGlmKEJBS2V5KSBjdXJOb2RlLmhyZWYgPSBCQUtleTsKICAgICAgICAgICAgICAvLyB9KQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaGFzRGVhbEhyZWZTZXQuc2l6ZSA+IDAgJiYgbGlzdC5sZW5ndGggLSBoYXNEZWFsSHJlZlNldC5zaXplID4gMCkgY29uc29sZS5sb2coIuS4ouW8g+aOiSIsIGxpc3QubGVuZ3RoIC0gaGFzRGVhbEhyZWZTZXQuc2l6ZSwgIuS4qumHjeWkjemTvuaOpSIpOwogICAgICAgIH0KCiAgICAgICAgdmFyIERlYWxSZWRpcmVjdCA9IGZ1bmN0aW9uIChyZXF1ZXN0LCBjdXJOb2RlSHJlZiwgcmVzcFRleHQsIFJlZ1RleHQpIHsKICAgICAgICAgIGlmIChyZXNwVGV4dCA9PSBudWxsIHx8IHR5cGVvZiAocmVzcFRleHQpID09ICJ1bmRlZmluZWQiKSByZXR1cm47CiAgICAgICAgICBsZXQgcmVzdWx0UmVzcG9uc2VVcmwgPSAiIjsKICAgICAgICAgIGlmIChSZWdUZXh0ICE9IG51bGwpIHsKICAgICAgICAgICAgcmVzdWx0UmVzcG9uc2VVcmwgPSBSZWdfR2V0KHJlc3BUZXh0LCBSZWdUZXh0KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdFJlc3BvbnNlVXJsID0gcmVzcFRleHQ7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAocmVzdWx0UmVzcG9uc2VVcmwgIT09IG51bGwgJiYgcmVzdWx0UmVzcG9uc2VVcmwgIT09ICIiICYmICFyZXN1bHRSZXNwb25zZVVybC5pbmNsdWRlcygid3d3LmJhaWR1LmNvbS9saW5rIikpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5TT0dPVSkgY3VyTm9kZUhyZWYgPSBjdXJOb2RlSHJlZi5yZXBsYWNlKC9eaHR0cHM6XC9cL3d3dy5zb2dvdS5jb20vLCAiIik7CiAgICAgICAgICAgICAgbGV0IGhvc3QgPSBnZXRUZXh0SG9zdChyZXN1bHRSZXNwb25zZVVybCk7CiAgICAgICAgICAgICAgLy8gUmVkaXJlY3RNYXAuc2V0KGN1ck5vZGVIcmVmLCByZXN1bHRSZXNwb25zZVVybCk7IC8vIOi/m+ihjOS4gOS4quaVsOaNruWFs+iBlAogICAgICAgICAgICAgIC8vIFJlZGlyZWN0TWFwLnNldChyZXN1bHRSZXNwb25zZVVybCwgY3VyTm9kZUhyZWYpOyAvLyDov5vooYzkuIDkuKrmlbDmja7lhbPogZQKICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIqW2hyZWYqPSciICsgY3VyTm9kZUhyZWYgKyAiJ10iKS5mb3JFYWNoKCBwZXIgPT4gewogICAgICAgICAgICAgICAgbGV0IGNoYW5nZU5vZGUgPSBwZXI7CgogICAgICAgICAgICAgICAgY2hhbmdlTm9kZS5zZXRBdHRyaWJ1dGUoImFjX3JlZGlyZWN0U3RhdHVzIiwgIjIiKTsKICAgICAgICAgICAgICAgIGNoYW5nZU5vZGUuaHJlZiA9IHJlc3VsdFJlc3BvbnNlVXJsOwogICAgICAgICAgICAgICAgLy8gY2hhbmdlTm9kZS5zZXRBdHRyaWJ1dGUoImRhdGEtb3JpaHJlZiIsIGNoYW5nZU5vZGUuaHJlZik7CiAgICAgICAgICAgICAgICBpZiAoY2hhbmdlTm9kZS5oYXNBdHRyaWJ1dGUoIm1ldGEiKSkgewogICAgICAgICAgICAgICAgICBjaGFuZ2VOb2RlLnNldEF0dHJpYnV0ZSgibWV0YSIsIGhvc3QpOwogICAgICAgICAgICAgICAgICBjaGFuZ2VOb2RlLmRhdGFzZXQuaG9zdCA9IGhvc3Q7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoY2hhbmdlTm9kZS50ZXh0ICYmIGNoYW5nZU5vZGUudGV4dC5sZW5ndGggPCAxMCAmJiAhY2hhbmdlTm9kZS50ZXh0LmluY2x1ZGVzKGhvc3QpCiAgICAgICAgICAgICAgICAgIC8vIOS4jeiDveaYr3JlZGlyZWN0IHVybCDkuI3og73mmK9oMlxoM+S4i+ebtOWxnumTvuaOpQogICAgICAgICAgICAgICAgICAmJiAhY2hhbmdlTm9kZS5wYXJlbnRFbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygiaCIpKSB7CiAgICAgICAgICAgICAgICAgIGNoYW5nZU5vZGUuaW5zZXJ0QWRqYWNlbnRIVE1MKCJiZWZvcmVFbmQiLCAiJm5ic3A7LSZuYnNwOyIgKyBob3N0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KQoKICAgICAgICAgICAgICBvdGhlckRhdGEub3RoZXIuY3VySG9zdHMuYWNwdXNoKGhvc3QgKyAiIyMjIiArIHJlc3VsdFJlc3BvbnNlVXJsKTsKICAgICAgICAgICAgICByZXF1ZXN0LmFib3J0KCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIGZ1bmN0aW9uIHJlbW92ZUFEX2JhaWR1X3NvZ291KCkgeyAvLyDnp7vpmaTnvZHnq5noh6rmnInlub/lkYoKICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJBSURVKSB7CgogICAgICAgICAgICAvLyDnp7vpmaRzaGFkb3dET03lub/lkYrvvJvmkJzntKLlhbPplK7lrZfvvJrmt5jlrp3vvJvnhLblkI7ngrnlh7vmkJzntKLmoYbvvIzlub/lkYrkvJrlpJrmrKHph43njrBzaGFkb3dkb20KICAgICAgICAgICAgc2FmZUZ1bmN0aW9uKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAkKCcuYy1jb250YWluZXIgL2RlZXAvIC5jLWNvbnRhaW5lcicpLmhhcygnLmYxMz5zcGFuOmNvbnRhaW5zKCLlub/lkYoiKScpLnJlbW92ZSgpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIOenu+mZpOWPs+S+p+agj+W5v+WRigogICAgICAgICAgICBzYWZlUmVtb3ZlX3hwYXRoKCJpZCgnY29udGVudF9yaWdodCcpL2RpdlsuLy9hW2NvbnRhaW5zKHRleHQoKSwgJ+W5v+WRiicpXV0iKTsKICAgICAgICAgICAgLy8g56e76Zmk5qCH5YeG5bm/5ZGKCiAgICAgICAgICAgIHNhZmVSZW1vdmVfeHBhdGgoImlkKCdjb250ZW50X2xlZnQnKS9kaXZbLi8vc3Bhbltjb250YWlucyh0ZXh0KCksICflub/lkYonKV1dIik7CiAgICAgICAgICAgIC8vIOenu+mZpOWPs+S+p+agj+mhtumDqC3lupXpg6jml6DnlKjlub/lkYoKICAgICAgICAgICAgc2FmZVJlbW92ZV94cGF0aCgiaWQoJ2NvbnRlbnRfcmlnaHQnKS9iciIpOwogICAgICAgICAgICBzYWZlUmVtb3ZlX3hwYXRoKCJpZCgnY29udGVudF9yaWdodCcpL2Rpdltub3QoQGlkKV0iKTsKICAgICAgICAgICAgLy8g56e76Zmk6aG26YOo5Y+v6IO95Ye6546w55qEICLkuLrmgqjmjqjojZAiCiAgICAgICAgICAgIHNhZmVSZW1vdmVfeHBhdGgoImlkKCdjb250ZW50X2xlZnQnKS8vZGl2W2NvbnRhaW5zKEBjbGFzcywgJ19ycycpXSIpOwoKICAgICAgICAgIH0gZWxzZSBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5NQkFJRFUpIHsKICAgICAgICAgICAgLyoqKirnp7vpmaTmiYvmnLrmqKHlvI/kuIrnmoTpg6jliIblub/lkYoqKioqLwogICAgICAgICAgICBzYWZlUmVtb3ZlX3hwYXRoKCJpZCgncGFnZS1iZCcpL2Rpdltub3QoY29udGFpbnMoQGNsYXNzLCAncmVzdWx0JykpXSIpOwogICAgICAgICAgICBzYWZlUmVtb3ZlX3hwYXRoKCJpZCgncGFnZS1iZCcpL2Rpdltub3QoQGNsYXNzKV0iKTsKICAgICAgICAgICAgc2FmZVJlbW92ZV94cGF0aCgiLy9kaXZbQGNsYXNzPSduYS1saWtlLWNvbnRhaW5lciddIik7CiAgICAgICAgICAgIC8vIHNhZmVGdW5jdGlvbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIC8vICAgJCgnI3BhZ2UtYmQgI3Jlc3VsdHM+ZGl2Om5vdChbY2xhc3MqPSJyZXN1bHQiXSknKS5yZW1vdmUoKTsKICAgICAgICAgICAgLy8gfSk7CiAgICAgICAgICAgIC8vIHNhZmVGdW5jdGlvbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIC8vICAgJCgnI3BhZ2UtYmQgI3Jlc3VsdHM+ZGl2Om5vdChbY2xhc3NdKScpLnJlbW92ZSgpOwogICAgICAgICAgICAvLyB9KTsKICAgICAgICAgIH0gZWxzZSBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5TTykgewogICAgICAgICAgICBzYWZlUmVtb3ZlKCIjc29fa3ctYWQiKTsKICAgICAgICAgICAgc2FmZVJlbW92ZSgiI20tc3ByZWFkLWxlZnQiKTsKICAgICAgICAgICAgLy8g56e76Zmk5pCc57Si5Lit5bqV6YOo5bm/5ZGKCiAgICAgICAgICAgIHNhZmVSZW1vdmUoIiNtLXNwcmVhZC1ib3R0b20iKTsKICAgICAgICAgICAgLy8g56e76Zmk5Y+z5L6n5qCP6aG26YOo5bm/5ZGKCiAgICAgICAgICAgIHNhZmVSZW1vdmVfeHBhdGgoImlkKCdyaWdodHRvcF9ib3gnKS8vbGlbLi8vc3Bhbltjb250YWlucyh0ZXh0KCksICflub/lkYonKV1dIik7CiAgICAgICAgICB9IGVsc2UgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuQklORykgewogICAgICAgICAgICBzYWZlUmVtb3ZlKCIuYl9hZCIpOwogICAgICAgICAgfSBlbHNlIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkdPT0dMRSkgewogICAgICAgICAgICBzYWZlUmVtb3ZlKCIjYm90dG9tYWRzIik7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBhZGRDb3VudGVyKGNpdGVMaXN0KSB7CiAgICAgICAgICBsZXQgY3NzVGV4dCA9ICJwb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4OjE7bWFyZ2luLXJpZ2h0OjRweDtkaXNwbGF5OmlubGluZS1ibG9jaztjb2xvcjp3aGl0ZTtmb250LWZhbWlseTon5b6u6L2v6ZuF6buRJztmb250LXNpemU6MTZweDt0ZXh0LWFsaWduOmNlbnRlcjt3aWR0aDoyMnB4O2xpbmUtaGVpZ2h0OjIycHg7Ym9yZGVyLXJhZGl1czo1MCU7IjsKICAgICAgICAgIGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2l0ZUxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgbGV0IGluZGV4ID0gY2l0ZUxpc3RbaV0uZ2V0QXR0cmlidXRlKCdTb3J0SW5kZXgnKTsKICAgICAgICAgICAgaWYgKGluZGV4ID09PSBudWxsIHx8IHR5cGVvZiAoaW5kZXgpID09PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICAgIGNpdGVMaXN0W2ldLnNldEF0dHJpYnV0ZSgnU29ydEluZGV4JywgQ09OU1Quc29ydEluZGV4KTsKICAgICAgICAgICAgICBjaXRlTGlzdFtpXS5pbm5lciA9IGNpdGVMaXN0W2ldLmlubmVySFRNTDsKICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gIjxlbSBjbGFzcz0nQUMtQ291bnRlclQnIHN0eWxlPSIgKyBjc3NUZXh0ICsgIj4iICsgQ09OU1Quc29ydEluZGV4ICsgIjwvZW0+IjsKICAgICAgICAgICAgICBjaXRlTGlzdFtpXS5pbm5lckhUTUwgPSBkaXYuaW5uZXJIVE1MICsgY2l0ZUxpc3RbaV0uaW5uZXI7CiAgICAgICAgICAgICAgQ09OU1Quc29ydEluZGV4Kys7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAoaSArIDEpICUgMTAwKSB7IC8vIOaMiemcgOabtOaWsAogICAgICAgICAgICAgICAgY2l0ZUxpc3RbaV0ucXVlcnlTZWxlY3RvcigiLkFDLUNvdW50ZXJUIikuaW5uZXJUZXh0ID0gKGkgKyAxKSAlIDEwMDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciBIb3N0UmVnID0gbmV3IFJlZ0V4cCgvKGh0dHBzPzpcL1wvKT8oW14vXHNdKykvaSk7CgogICAgICAgIGZ1bmN0aW9uIGdldFRleHRIb3N0KHNiZWZvcmUpIHsKICAgICAgICAgIHNiZWZvcmUgPSAoc2JlZm9yZSAmJiBzYmVmb3JlLnRyaW0oKSkucmVwbGFjZSgvXHMtXHNcZHs0fS1cZHsxLDJ9LVxkezEsMn0vLCAiIikgfHwgIiI7CiAgICAgICAgICBsZXQgc2VuZDsKICAgICAgICAgIGxldCByZXN1bHQgPSBzYmVmb3JlLnNwbGl0KCctJyk7CiAgICAgICAgICAvLyAtLeaQnOeLl+eZvuW6puS4k+eUqO+8m+WmguaenOesrOS4gOS4quaYr+S4reaWh+eahOivne+8jOWcsOWdgOWwseaYr+esrOS6jOS4qgogICAgICAgICAgaWYgKChyZXN1bHQubGVuZ3RoID4gMSAmJiBuZXcgUmVnRXhwKCJbXFx1NEUwMC1cXHU5RkZGXSsiLCAiZyIpLnRlc3Qoc2JlZm9yZSkpICYmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJBSURVIHx8IGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuU09HT1UpKSB7CiAgICAgICAgICAgIHNiZWZvcmUgPSByZXN1bHRbMV07CiAgICAgICAgICB9CiAgICAgICAgICAvLyDmraTml7ZzYmVmb3Jl5Yeg5LmO5piv562J5LqO572R5Z2A5LqG77yM5L2G5piv5pyJ5pe25YCZ5Lya5pyJ5aSa55qE56m65qC877yM5aSa55qE5YaF5a6577yM5aSa55qE5YmN57yAaHR0cO+8jOWkmuS9meeahOi3r+W+hAogICAgICAgICAgbGV0IHJlcyA9IEhvc3RSZWcuZXhlYyhzYmVmb3JlKTsKICAgICAgICAgIHNlbmQgPSAocmVzICYmIHJlc1syXS50cmltKCkpIHx8ICIiOwogICAgICAgICAgLy8gc2VuZCA9IHNiZWZvcmUucmVwbGFjZSgvKFwvW14vXSp8XHMqKS8sICIiKS5yZXBsYWNlKC88W14+XSo+L2csICIiKS5yZXBsYWNlKC9odHRwcz86XC9cLy9nLCAiIikucmVwbGFjZSgvPFwvP3N0cm9uZz4vZywgIiIpLnJlcGxhY2UoLzxcLz9iPi9nLCAiIikucmVwbGFjZSgvPD8+Py9nLCAiIikucmVwbGFjZSgvKCB8XC8pLiovZywgIiIpLnJlcGxhY2UoL1wuXC4uKi8sICIiKTsKICAgICAgICAgIGlmIChzZW5kID09PSAiIikgcmV0dXJuIG51bGw7CiAgICAgICAgICBpZiAoc2VuZC5pbmRleE9mKCIuIikgPCAwKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGlmIChzZW5kLmluZGV4T2YoIuKGtSIpID49IDApIHJldHVybiBudWxsOwogICAgICAgICAgcmV0dXJuIHNlbmQudHJpbSgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYWRkRmF2aWNvbihjaXRlTGlzdCkgewogICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCAhPT0gU2l0ZVR5cGUuRE9HRSkgewogICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgY2l0ZUxpc3QubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICAgICAgaWYgKG51bGwgPT0gY2l0ZUxpc3RbaW5kZXhdLmdldEF0dHJpYnV0ZSgiYWNfZmF2aWNvblN0YXR1cyIpKSB7CiAgICAgICAgICAgICAgICBsZXQgY3VyTm9kZSA9IGNpdGVMaXN0W2luZGV4XTsKICAgICAgICAgICAgICAgIGxldCB0YXJnZXROb2RlID0gY3VyTm9kZTsKICAgICAgICAgICAgICAgIGxldCB7IGN1ckhvc3QsIGN1clVybCB9ID0gZ2V0Tm9kZUhvc3QodGFyZ2V0Tm9kZSk7CiAgICAgICAgICAgICAgICBpZiAoY3VySG9zdCA9PSBudWxsIHx8IChjdXJVcmwgJiYgY3VyVXJsLmluY2x1ZGVzKCJ3d3cuYmFpZHUuY29tL2xpbmsiKSkpIHsgLy8g6Lez6L+HYmFpZHUuY2xpY2sKICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBvdGhlckRhdGEub3RoZXIuY3VySG9zdHMuYWNwdXNoKGN1ckhvc3QgKyAiIyMjIiArIGN1clVybCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBsZXQgZmF2aWNvblVybCA9IGN1ckhvc3Q7CiAgICAgICAgICAgICAgICBsZXQgSUkgPSAwOwogICAgICAgICAgICAgICAgZm9yICg7IElJIDw9IDU7IElJKyspIHsKICAgICAgICAgICAgICAgICAgdGFyZ2V0Tm9kZSA9IHRhcmdldE5vZGUucGFyZW50Tm9kZTsKICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldE5vZGUgIT0gbnVsbCAmJiB0YXJnZXROb2RlLnF1ZXJ5U2VsZWN0b3IoY3VyU2l0ZS5GYXZpY29uQWRkVG8pICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhpbmRleCsiLiIrZmF2aWNvblVybCsiLS0iK0lJKTsKICAgICAgICAgICAgICAgIGlmIChJSSA8PSA1KSB7CiAgICAgICAgICAgICAgICAgIC8vIOWFiOeUqOeItuiKgueCueWIpOaWreS4gOS4i+aYr+WQpuWtmOWcqGltZwogICAgICAgICAgICAgICAgICBsZXQgdG1wSFRNTCA9IHRhcmdldE5vZGUuaW5uZXJIVE1MOwogICAgICAgICAgICAgICAgICBsZXQgcG9zID0gdG1wSFRNTC5pbmRleE9mKCJmYXYtdXJsIikKICAgICAgICAgICAgICAgICAgICAmIHRtcEhUTUwuaW5kZXhPZigiZmF2dXJsIikKICAgICAgICAgICAgICAgICAgICAmIHRtcEhUTUwuaW5kZXhPZigidGl0LWljbyIpCiAgICAgICAgICAgICAgICAgICAgJiB0bXBIVE1MLmluZGV4T2YoImltZ19mYXYgcm1zX2ltZyIpCiAgICAgICAgICAgICAgICAgICAgJiB0bXBIVE1MLmluZGV4T2YoImMtdG9vbC0iKQogICAgICAgICAgICAgICAgICAgICYgdG1wSFRNTC5pbmRleE9mKCJzcGFuIGNsYXNzPVwiYy1pY29uIGMtaWNvbi0iKQogICAgICAgICAgICAgICAgICAgICYgdG1wSFRNTC5pbmRleE9mKCJpbWcgY2xhc3M9XCJ4QTMzR2MiKTsKICAgICAgICAgICAgICAgICAgLy/ku5boh6rlt7Hlt7Lnu4/lgZrkuoZmYXZpY29u5LqGCiAgICAgICAgICAgICAgICAgIGlmIChwb3MgPiAtMSkgewogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCLlt7LmnInlm77niYfvvJoiKTsKICAgICAgICAgICAgICAgICAgICBjdXJOb2RlLnNldEF0dHJpYnV0ZSgiYWNfZmF2aWNvblN0YXR1cyIsICItMiIpOwogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHRhcmdldE5vZGUgPSB0YXJnZXROb2RlLnF1ZXJ5U2VsZWN0b3IoY3VyU2l0ZS5GYXZpY29uQWRkVG8pOwogICAgICAgICAgICAgICAgICAvLyDnibnmrorlpITnkIZCSU5HCiAgICAgICAgICAgICAgICAgIC8vIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT0gU2l0ZVR5cGUuQklORykgY3VyTm9kZSA9IGN1ck5vZGUucXVlcnlTZWxlY3RvcigiaDIiKTsKICAgICAgICAgICAgICAgICAgLy9odHRwczovL2FwaS5ieWkucHcvZmF2aWNvbi8/dXJsPT8/Pz8g5LiN56iz5a6aCiAgICAgICAgICAgICAgICAgIC8vaHR0cDovLyIrZmF2aWNvblVybCsiL2Nkbi5pY28/ZGVmYXVsdGljb249aHR0cDovL3Nvei5pbS9mYXZpY29uLmljbyDkuI3nqLPlrpoKICAgICAgICAgICAgICAgICAgLy9odHRwczovL3d3dy54dHdpbmQuY29tL2FwaS9pbmRleC5waHA/dXJsPT8/Pz8g5oyC5LqG44CC44CC44CCCiAgICAgICAgICAgICAgICAgIC8vaHR0cHM6Ly9zdGF0aWNzLmRuc3BvZC5jbi9wcm94eV9mYXZpY29uL18vZmF2aWNvbj9kb21haW49c2luYS5jbgogICAgICAgICAgICAgICAgICAvL3d3dy5nb29nbGUuY29tL3MyL2Zhdmljb25zP2RvbWFpbj03NjQzNTAxNzcubG9mdGVyLmNvbQogICAgICAgICAgICAgICAgICAvL+WmguaenOWcsOWdgOS4jeato+ehru+8jOmCo+S5iOS4ouW8gwogICAgICAgICAgICAgICAgICBsZXQgaG9zdCA9IGZhdmljb25VcmwucmVwbGFjZSgvW14uXStcLihbXi5dKylcLihbXi5dKykvLCAiJDEuJDIiKTsKICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldE5vZGUucXVlcnlTZWxlY3RvcigiLkFDLWZhdmljb25UIikgPT0gbnVsbCAmJiBob3N0Lmxlbmd0aCA+IDMpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgaW5zTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwogICAgICAgICAgICAgICAgICAgIC8vIGN1ck5vZGUgPSBjdXJOb2RlLmNoaWxkcmVuWzBdIHx8IGN1ck5vZGUuZmlyc3RDaGlsZCA7IC8vIGZpcnN0Q2hpbGTlrrnmmJPpgYfliLB0ZXh05a+56LGhCiAgICAgICAgICAgICAgICAgICAgY3VyTm9kZS5zZXRBdHRyaWJ1dGUoImFjX2Zhdmljb25TdGF0dXMiLCAiMSIpOwogICAgICAgICAgICAgICAgICAgIC8vIGN1ck5vZGUuaW5zZXJ0QmVmb3JlKGluc05vZGUsIGN1ck5vZGUuZmlyc3RDaGlsZCk7CiAgICAgICAgICAgICAgICAgICAgaW5zTm9kZS5jbGFzc05hbWUgPSAiQUMtZmF2aWNvblQiOwogICAgICAgICAgICAgICAgICAgIGluc05vZGUuc2V0QXR0cmlidXRlKCJyZWZlcnJlcnBvbGljeSIsICJuby1yZWZlcnJlciIpOwogICAgICAgICAgICAgICAgICAgIGluc05vZGUuc3R5bGUgPSAicG9zaXRpb246cmVsYXRpdmU7ei1pbmRleDoxO3ZlcnRpY2FsLWFsaWduOnN1YjtoZWlnaHQ6MTZweDt3aWR0aDoxNnB4O21hcmdpbi1yaWdodDo1cHg7bWFyZ2luLWJvdHRvbTogMnB4O3VzZXItc2VsZWN0Om5vbmU7IjsKCiAgICAgICAgICAgICAgICAgICAgaW5zTm9kZS5zcmMgPSAiaHR0cHM6Ly9mYXZpY29uLnlhbmRleC5uZXQvZmF2aWNvbi92Mi8iICsgKGN1ck5vZGUuaHJlZiB8fCBob3N0KTsgLy8gTUFSSyB5YW5kZXjmlK/mjIHov5nnp43mn6Xor6Lop4TliJkKICAgICAgICAgICAgICAgICAgICBpbnNOb2RlLnNldEF0dHJpYnV0ZSgiZmF2aWNvbklEIiwgIjAiKTsKICAgICAgICAgICAgICAgICAgICBpbnNOb2RlLnNldEF0dHJpYnV0ZSgib25kcmFnc3RhcnQiLCAicmV0dXJuIGZhbHNlOyIpIC8vIOemgeatouaLluWKqOWbvueJhy3pgb/lhY3mi5bplJnkuoYKICAgICAgICAgICAgICAgICAgICAvLyBjdXJOb2RlLmlubmVySFRNTCA9IGluc05vZGUub3V0ZXJIVE1MICsgY3VyTm9kZS5pbm5lckhUTUw7CiAgICAgICAgICAgICAgICAgICAgLy8gY3VyTm9kZS5pbnNlcnRBZGphY2VudEhUTUwoImFmdGVyRW5kIiwgaW5zTm9kZS5pbm5lckhUTUwpOwogICAgICAgICAgICAgICAgICAgIGxldCBiZWZvcmVJbmRleCA9IDA7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldE5vZGUuY2hpbGROb2Rlc1tiZWZvcmVJbmRleF0uY2xhc3NOYW1lID09PSAiQUMtQ291bnRlclQiKSB7CiAgICAgICAgICAgICAgICAgICAgICBiZWZvcmVJbmRleCA9IDE7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRhcmdldE5vZGUuaW5zZXJ0QmVmb3JlKGluc05vZGUsIHRhcmdldE5vZGUuY2hpbGROb2Rlc1tiZWZvcmVJbmRleF0pOwogICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbiAoeGN1cikgewogICAgICAgICAgICAgICAgICAgICAgaW5zTm9kZS5vbmxvYWQgPSBmdW5jdGlvbiAoZW52KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbWdOb2RlID0geGN1ci5xdWVyeVNlbGVjdG9yKCIuQUMtZmF2aWNvblQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltZ05vZGUubmF0dXJhbFdpZHRoIDwgMTApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdOb2RlLnNldEF0dHJpYnV0ZSgib2xkLXNyYyIsIGltZ05vZGUuc3JjKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdOb2RlLnNyYyA9IEFDQ29uZmlnLmRlZmF1bHRGYXZpY29uVXJsOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGltZ05vZGUub25sb2FkID0gImphdmFzY3JpcHQ6dm9pZCgwKTsiOwogICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9KSh0YXJnZXROb2RlKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIGNoZWNrTm9kZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIjbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCIpOwogICAgICAgICAgICBmb3IgKGxldCBmYU5vZGUgb2YgY2hlY2tOb2RlcykgewogICAgICAgICAgICAgIGxldCBmYXZpY29uTm9kZSA9IGZhTm9kZS5xdWVyeVNlbGVjdG9yKCIucmVzdWx0X19pY29uIGltZyIpOwogICAgICAgICAgICAgIGxldCBiZWZvcmVOb2RlID0gZmFOb2RlLnF1ZXJ5U2VsZWN0b3IoIi5yZXN1bHRfX3RpdGxlIGEiKTsKICAgICAgICAgICAgICBpZihmYXZpY29uTm9kZSAmJiBiZWZvcmVOb2RlKXsKICAgICAgICAgICAgICAgIGZhdmljb25Ob2RlLnN0eWxlID0gInZlcnRpY2FsLWFsaWduOm1pZGRsZTttYXJnaW4tcmlnaHQ6NXB4OyI7CiAgICAgICAgICAgICAgICBiZWZvcmVOb2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGZhdmljb25Ob2RlLCBiZWZvcmVOb2RlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIEluc2VydFNldHRpbmdNZW51KCkgewogICAgICAgICAgaWYgKChjdXJTaXRlLlNpdGVUeXBlSUQgIT09IFNpdGVUeXBlLk9USEVSUykgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI215dXNlciIpID09IG51bGwpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBsZXQgcGFyZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3UsICNnYj5kaXY+ZGl2PmRpdiwgI2JfaGVhZGVyPiNpZF9oLCAudG9wLWJhciAuc29nb3Utc2V0LWJveCwgI2hlYWRlcl93cmFwcGVyIC5qcy1obC1idXR0b24sIGJvZHlbZG9nZV0gI2hlYWRlcl93cmFwcGVyICNoZWFkZXIiKTsgLy9iYWlkdTsgZ29vZ2xlOyBiaW5nOyDmkJzni5cKICAgICAgICAgICAgICBwYXJlbnQuc3R5bGUgPSAid2lkdGg6IGF1dG87IjsKICAgICAgICAgICAgICBsZXQgdXNlckFkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgICAgICB1c2VyQWRpdi5pZCA9ICJteXVzZXIiOwogICAgICAgICAgICAgIHVzZXJBZGl2LmlubmVySFRNTCA9IGA8aW5wdXQgdHlwZT0nc3VibWl0JyBjbGFzcz0nbXl1c2VyY29uZmlnJyB2YWx1ZT0nJHtBbGxEYXRhLmxhbi51c2UubWVudV90ZXh0fScvPjxzcGFuIGNsYXNzPSdhYy1uZXd2ZXJzaW9uRGlzcGxheScgc3R5bGU9J2JhY2tncm91bmQtY29sb3I6IHJlZDtmbG9hdDogbGVmdDtoZWlnaHQ6IDhweDt3aWR0aDogOHB4O2JvcmRlci1yYWRpdXM6IDRweDtkaXNwbGF5OiR7KENPTlNULmhhc05ld0Z1bmNOZWVkRGlzcGxheSA/ICJ1bnNldCIgOiAibm9uZSIpfSc+Jm5ic3A7PC9zcGFuPmA7CiAgICAgICAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZSh1c2VyQWRpdiwgcGFyZW50LmNoaWxkTm9kZXNbMF0pOwogICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNteXVzZXIgLm15dXNlcmNvbmZpZyIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBBQ3RvZ2dsZVNldHRpbmdEaXNwbGF5KGUpOwogICAgICAgICAgICAgIH0sIHRydWUpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0oKTsgLy8g6K+75Y+W5Liq5Lq66K6+572u5L+h5oGvCiAgICAgIC8qKgogICAgICAgKiBAcGFyYW0gY2FsbGJhY2sg5Zue6LCD5Ye95pWw77yM6ZyA6KaB6L+U5Zue5piv5ZCm57uT5p2fVHJ1ZeOAgUZhbHNl44CB5ZCm5YiZ55u45b2T5LqO5a6a5pe25ZmoCiAgICAgICAqIGNhbGxiYWNrIHJldHVybjoKICAgICAgICogIHRydWUgPSDlgJLorqHml7YKICAgICAgICogIGZhbHNlID0g6K6h5pe25ZmoCiAgICAgICAqICBub25lID0g6K6h5pe25ZmoCiAgICAgICAqIEBwYXJhbSBwZXJpb2Qg5ZGo5pyf77yM5aaCOjIwMG1zCiAgICAgICAqIEBwYXJhbSBydW5Ob3cg56uL5Y2z5omn6KGMCiAgICAgICAqLwogICAgICBmdW5jdGlvbiBSQUZJbnRlcnZhbChjYWxsYmFjaywgcGVyaW9kLCBydW5Ob3cpIHsKICAgICAgICAvLyDkuIDnp5I2MOasoe+8jOWvueW6lDHnp5IxMDAwbXMKICAgICAgICBjb25zdCBuZWVkQ291bnQgPSBwZXJpb2QgLyAxMDAwICogNjA7CiAgICAgICAgbGV0IHRpbWVzID0gMDsgLy8g5bey57uP6K6h5pWw55qE5pWw6YePCgogICAgICAgIGlmKHJ1bk5vdyA9PT0gdHJ1ZSl7IC8vIOWvueS6jueri+WNs+aJp+ihjOWHveaVsOeahOeri+WNs+WIpOWumu+8jOWQpuWImei/m+ihjAogICAgICAgICAgY29uc3Qgc2hvdWxkRmluaXNoID0gY2FsbGJhY2soKTsKICAgICAgICAgIGlmKHNob3VsZEZpbmlzaCkgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc3RlcCgpIHsKICAgICAgICAgIGlmKHRpbWVzIDwgbmVlZENvdW50KXsKICAgICAgICAgICAgLy8g6K6h5pWw5pyq57uT5p2fLee7p+e7reiuoeaVsAogICAgICAgICAgICB0aW1lcysrOwogICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCkKICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAvLyDorqHmlbDnu5PmnZ8t5YGc5q2i6K6h5pWw77yM5Yik5a6a57uT5p6cCiAgICAgICAgICAgIGNvbnN0IHNob3VsZEZpbmlzaCA9IGNhbGxiYWNrKCkgfHwgZmFsc2U7CiAgICAgICAgICAgIGlmKCFzaG91bGRGaW5pc2gpewogICAgICAgICAgICAgIC8vIOi/lOWbnuWAvOS4umZhbHNl77yM6YeN5ZCv6K6h5pWw5ZmoCiAgICAgICAgICAgICAgdGltZXMgPSAwOwogICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKQogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAvLyDov5Tlm57lgLzkuLp0cnVl77yM57uT5p2f6K6h5pWw5ZmoCiAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApOwogICAgICB9CgogICAgICBmdW5jdGlvbiBzYWZlRnVuY3Rpb24oZnVuYykgewogICAgICAgIHRyeSB7CiAgICAgICAgICBmdW5jKCk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIH0KICAgICAgfQoKICAgICAgZnVuY3Rpb24gc2FmZVdhaXRGdW5jKHNlbGVjdG9yLCBjYWxsYmFja0Z1bmMsIHRpbWUsIG5vdENsZWFyKSB7CiAgICAgICAgdGltZSA9IHRpbWUgfHwgNTA7CiAgICAgICAgbm90Q2xlYXIgPSBub3RDbGVhciB8fCBmYWxzZTsKICAgICAgICBsZXQgZG9DbGVhciA9ICFub3RDbGVhcjsKICAgICAgICBSQUZJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoKHR5cGVvZiAoc2VsZWN0b3IpID09ICJzdHJpbmciICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpICE9IG51bGwpKSB7CiAgICAgICAgICAgIGNhbGxiYWNrRnVuYyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSk7CiAgICAgICAgICAgIGlmIChkb0NsZWFyKSByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0gZWxzZSBpZiAoKHR5cGVvZiAoc2VsZWN0b3IpID09ICJmdW5jdGlvbiIgJiYgc2VsZWN0b3IoKS5sZW5ndGggPiAwKSkgewogICAgICAgICAgICBjYWxsYmFja0Z1bmMoc2VsZWN0b3IoKVswXSk7CiAgICAgICAgICAgIGlmIChkb0NsZWFyKSByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9LCB0aW1lLCB0cnVlKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gQUNfYWRkU3R5bGUoY3NzLCBjbGFzc05hbWUsIGFkZFRvVGFyZ2V0LCBpc1JlbG9hZCwgaW5pdFR5cGUpIHsgLy8g5re75YqgQ1NT5Luj56CB77yM5LiN6ICD6JmR5paH5pys6L295YWl5pe26Ze077yM5Y+q5omn6KGM5LiA5qyhLeaXoOiuuuaIkOWKn+S4juWQpu+8jOW4puaciWNsYXNzTmFtZQogICAgICAgIFJBRkludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8qKgogICAgICAgICAgICogYWRkVG9UYXJnZXTov5nph4zkuI3opoHkvb/nlKhoZWFk5qCH562+LGhlYWTmoIfnrb7nmoRjc3PkvJrlnKhodG1s6L295YWl5pe25Yqg6L2977yMCiAgICAgICAgICAgKiBodG1s5Yqg6L295ZCO5Ly85LmO5LiN5Lya5YaN5qyh5Yqg6L2977yMYm9keeS8muiHquWKqOWKoOi9vQogICAgICAgICAgICogKiovCiAgICAgICAgICBsZXQgYWRkVG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFkZFRvVGFyZ2V0KTsKICAgICAgICAgIGlmICh0eXBlb2YgKGFkZFRvVGFyZ2V0KSA9PSAidW5kZWZpbmVkIikKICAgICAgICAgICAgYWRkVG8gPSAoZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5ib2R5IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCB8fCBkb2N1bWVudCk7CiAgICAgICAgICBpc1JlbG9hZCA9IGlzUmVsb2FkIHx8IGZhbHNlOyAvLyDpu5jorqTmmK/pnZ7liqDovb3lnosKICAgICAgICAgIGluaXRUeXBlID0gaW5pdFR5cGUgfHwgInRleHQvY3NzIjsKICAgICAgICAgIC8vIOWmguaenOayoeacieebruagh+iKgueCuSjliJnnm7TmjqXliqApIHx8IOacieebruagh+iKgueCueS4lOaJvuWIsOS6huiKgueCuSjov5vooYzmlrDlop4pCiAgICAgICAgICBpZiAodHlwZW9mIChhZGRUb1RhcmdldCkgPT0gInVuZGVmaW5lZCIgfHwgKHR5cGVvZiAoYWRkVG9UYXJnZXQpICE9ICJ1bmRlZmluZWQiICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWRkVG9UYXJnZXQpICE9IG51bGwpKSB7CiAgICAgICAgICAgIC8vIGNsZWFySW50ZXJ2YWwodG91dCk7CiAgICAgICAgICAgIC8vIOWmguaenHRydWUg5by66KGM6KaG55uW77yM5LiN566h5pyJ5rKh5pyJLS3lhYjliKDpmaQKICAgICAgICAgICAgLy8g5aaC5p6cZmFsc2XvvIzkuI3opobnm5bvvIzkvYbmmK/lpoLmnpzmnInnmoTor53vvIzopoHpgIDlh7rvvIzkuI3lrZjlnKjliJnmlrDlop4tLeaXoOmcgOWIoOmZpAogICAgICAgICAgICBpZiAoaXNSZWxvYWQgPT09IHRydWUpIHsKICAgICAgICAgICAgICBzYWZlUmVtb3ZlKCIuIiArIGNsYXNzTmFtZSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZWxvYWQgPT09IGZhbHNlICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi4iICsgY2xhc3NOYW1lKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgLy8g6IqC54K55a2Y5ZyoICYmIOS4jeWHhuWkh+imhueblgogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsKICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSAhPSBudWxsKSBjc3NOb2RlLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTsKICAgICAgICAgICAgY3NzTm9kZS5zZXRBdHRyaWJ1dGUoInR5cGUiLCBpbml0VHlwZSk7CiAgICAgICAgICAgIGNzc05vZGUuaW5uZXJIVE1MID0gY3NzOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGFkZFRvLmFwcGVuZENoaWxkKGNzc05vZGUpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZS5tZXNzYWdlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9LCAyMCwgdHJ1ZSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHNhZmVSZW1vdmUoY3NzU2VsZWN0b3IpIHsKICAgICAgICBzYWZlRnVuY3Rpb24oKCkgPT4gewogICAgICAgICAgbGV0IHJlbW92ZU5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjc3NTZWxlY3Rvcik7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlbW92ZU5vZGVzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICByZW1vdmVOb2Rlc1tpXS5yZW1vdmUoKTsKICAgICAgICB9KQogICAgICB9CgogICAgICBmdW5jdGlvbiBzYWZlUmVtb3ZlX3hwYXRoKHhwYXRoU2VsZWN0b3IpIHsKICAgICAgICBzYWZlRnVuY3Rpb24oKCkgPT4gewogICAgICAgICAgbGV0IHJlbW92ZU5vZGVzID0gZ2V0QWxsRWxlbWVudHMoeHBhdGhTZWxlY3Rvcik7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlbW92ZU5vZGVzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICByZW1vdmVOb2Rlc1tpXS5yZW1vdmUoKTsKICAgICAgICB9KQogICAgICB9CgogICAgICBmdW5jdGlvbiBjaGVja0lTQmFpZHVNYWluKCkgeyAvLyDpppbpobU9dHJ1ZTvpnZ7pppbpobU9ZmFsc2UKICAgICAgICAvLyDlpoLmnpzmmK/nmb7luqYgJiYgIOayoeaciSjnmb7luqbmkJzntKLnu5PmnpznmoTmoIflv5ctW+WtmOWcqF3nmb7luqbnmoTlhoXlrrkpIHJldHVybjsKICAgICAgICByZXR1cm4gIShjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJBSURVICYmICEobG9jYXRpb24uaHJlZi5yZXBsYWNlKC8oJnxcPykod2R8d29yZCk9LywgIiIpICE9PSBsb2NhdGlvbi5ocmVmIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNjb250ZW50X2xlZnQiKSB8fAogICAgICAgICAgICAoKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNrdyIpICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNrdyIpLmdldEF0dHJpYnV0ZSgidmFsdWUiKSkgfHwgIiIpICE9PSAiIikKICAgICAgICApCiAgICAgIH0KCiAgICAgIC8qKgogICAgICAgKiDmo4Dmn6Vkb2N1bWVudOeahOWtkOiKgueCueaYr+WQpuWQq+acieWFg+e0oAogICAgICAgKiBAcGFyYW0gbm9kZUNsYXNzIOW+heajgOafpeWFg+e0oAogICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHxGCiAgICAgICAqLwogICAgICBmdW5jdGlvbiBjaGVja0RvY21lbnRIYXNOb2RlKG5vZGVDbGFzcykgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZG9jdW1lbnQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgaWYgKGRvY3VtZW50LmNoaWxkTm9kZXNbaV0uZGF0YSAmJiBkb2N1bWVudC5jaGlsZE5vZGVzW2ldLmRhdGEuaW5kZXhPZihub2RlQ2xhc3MpID4gMCkKICAgICAgICAgICAgcmV0dXJuIHtyZXM6IHRydWUsIG5vZGU6IGRvY3VtZW50LmNoaWxkTm9kZXNbaV19OwogICAgICAgIH0KICAgICAgICByZXR1cm4ge3JlczogZmFsc2UsIG5vZGU6IG51bGx9OwogICAgICB9CgogICAgICBmdW5jdGlvbiBGU0JhaWR1KCkgeyAvLyB0aGFua3MgZm9yIGNvZGUgZnJvbSDmta7nlJ9A5pyq5q2HIEBwYWdlIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvemgtVFcvc2NyaXB0cy8zMTY0MgogICAgICAgIC8vIGRlYnVnKCLliJ3lp4vljJZGU0JBSURVIik7CgogICAgICAgIENPTlNULlN0eWxlTWFuZ2VyID0gewogICAgICAgICAgLyoqCiAgICAgICAgICAgKiDlr7zlhaVjc3PlhoXlrrnkuLrjgJDmlofmnKzmoLzlvI/jgJHvvIHvvIHvvIEKICAgICAgICAgICAqIEBwYXJhbSBkYXRhIGNzc+WGheWuuQogICAgICAgICAgICogQHBhcmFtIHRvQ2xhc3NOYW1lIOmihOacn+eahOexu+WQjQogICAgICAgICAgICovCiAgICAgICAgICBpbXBvcnRTdHlsZTogZnVuY3Rpb24gKGRhdGEsIHRvQ2xhc3NOYW1lLCB1c2VOb3JtYWxDU1MsIG11c3RMb2FkKSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgKGRhdGEpID09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgICAgLy8g6L+Z5Liq5bGF54S25ZyoVk3kuIrlh7rpl67popjkuobvvIzlvojlpYfmgKoKICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJHTV9nZXRSZXNvdXJjZVRleHTojrflj5blhoXlrrnmlbDmja7lvILluLgiKTsKICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgfQogICAgICAgICAgICB1c2VOb3JtYWxDU1MgPSB1c2VOb3JtYWxDU1MgfHwgZmFsc2U7CiAgICAgICAgICAgIG11c3RMb2FkID0gbXVzdExvYWQgfHwgZmFsc2U7CiAgICAgICAgICAgIC8vIOaZrumAmua1j+iniOWZqOaooeW8jy0t5L2G5piv5Ly85LmO5qC35byP5Yqg6L2955qE5LyY5YWI57qn5L2O5LqOaGVhZOS4reeahHN0eWxl5LyY5YWI57qnCiAgICAgICAgICAgIGlmICghdXNlTm9ybWFsQ1NTKSB7CiAgICAgICAgICAgICAgLy8g6YCa6L+HbXVzdOWPguaVsOadpeWIpOWumnN0eWxl5piv5ZCm5Yqg6L29CiAgICAgICAgICAgICAgLy8gZGF0YSA9IGRhdGEucmVwbGFjZSgvYmFpZHUuY29tI1wkIy9pZ20sICcnKTsKICAgICAgICAgICAgICBpZiAoZGF0YS5pbmRleE9mKCJodHRwIikgIT09IDApIGRhdGEgPSAiZGF0YTp0ZXh0L2Nzczt1dGYtOCwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGRhdGEpOwogICAgICAgICAgICAgIHZhciB7cmVzLH0gPSBjaGVja0RvY21lbnRIYXNOb2RlKHRvQ2xhc3NOYW1lKTsKICAgICAgICAgICAgICBpZiAoIXJlcykgewogICAgICAgICAgICAgICAgbGV0IHBpID0gZG9jdW1lbnQuY3JlYXRlUHJvY2Vzc2luZ0luc3RydWN0aW9uKAogICAgICAgICAgICAgICAgICAieG1sLXN0eWxlc2hlZXQiLAogICAgICAgICAgICAgICAgICBgdHlwZT0idGV4dC9jc3MiIG11c3Q9IiR7bXVzdExvYWR9IiBjbGFzcz0iJHt0b0NsYXNzTmFtZX0iIGhyZWY9IiR7ZGF0YX0iYAogICAgICAgICAgICAgICAgKTsgLy8g5rOo5oSP5b+F6aG76KaB5Y+M5byV5Y+3CiAgICAgICAgICAgICAgICBkb2N1bWVudC5pbnNlcnRCZWZvcmUocGksIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8qICoqKioqKioqKirlpJrph43moLflvI8t5YW85a65ZWRnZSAmJiDpu5HlpJzohJrmnKwqKioqKioqKioqKiogKi8KICAgICAgICAgICAgICBBQ19hZGRTdHlsZShkYXRhLCB0b0NsYXNzTmFtZSwgImhlYWQiLCBmYWxzZSwgInRleHQvY3NzIik7CiAgICAgICAgICAgICAgLyogKioqKioqKioqKuWkmumHjeagt+W8jy3lhbzlrrllZGdlICYmIOm7keWknOiEmuacrCoqKioqKioqKioqKiAqLwogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgLy/liqDovb3mma7pgJrmoLflvI8KICAgICAgICAgIGxvYWRDb21tb25TdHlsZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0aGlzLmxvYWRTdHlsZShDT05TVC51c2VJdGVtLm5hbWUgKyAiQ29tbW9uU3R5bGUiLCBDT05TVC51c2VJdGVtLm5hbWUgKyAiQ29tbW9uU3R5bGUiKTsKICAgICAgICAgIH0sCiAgICAgICAgICBsb2FkQmFpZHVMaXRlU3R5bGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZFN0eWxlKCJiYWlkdUxpdGVTdHlsZSIsICJiYWlkdUxpdGVTdHlsZSIsIG51bGwsIGZhbHNlLCB0cnVlKTsKICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZFBsYWluVG9DU1MoImJhaWR1TGl0ZVN0eWxlIik7CiAgICAgICAgICB9LAogICAgICAgICAgbG9hZFN0eWxlOiBhc3luYyBmdW5jdGlvbiAoc3R5bGVOYW1lLCBpbnNDbGFzc05hbWUsIHNldFVybCwgdXNlTm9ybWFsQ1NTLCBtdXN0TG9hZCkgewogICAgICAgICAgICAvLyDlhajpg6jph4fnlKh0ZXh0L2Nzc+eahOWGheWuueadpei9veWFpQogICAgICAgICAgICAvLyDlpoLmnpzmmK9kZWJ1Z+aooeW8j+OAguaIluiAheaYr2dt5qih5byPCiAgICAgICAgICAgIGlmIChpc0xvY2FsRGVidWcpIHsKICAgICAgICAgICAgICBkZWJ1Zygi5pys5ZywLeWKoOi9veagt+W8j++8miIgKyBpbnNDbGFzc05hbWUpOwogICAgICAgICAgICAgIHNldFVybCA9IHNldFVybCB8fCAiaHR0cDovLzEyNy4wLjAuMS8iICsgc3R5bGVOYW1lICsgIi5jc3MiOwogICAgICAgICAgICAgIHRoaXMuaW1wb3J0U3R5bGUoc2V0VXJsLCAiQUMtIiArIGluc0NsYXNzTmFtZSwgdXNlTm9ybWFsQ1NTLCBtdXN0TG9hZCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNOZXdHTSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgIC8vIOS7heeUqOS6jkdyZWFzZU1vbmtleTQuMCsKICAgICAgICAgICAgICBkZWJ1Zygi54m55q6K5qih5byPLeWKoOi9veagt+W8j++8miIgKyBpbnNDbGFzc05hbWUpOwogICAgICAgICAgICAgIHNldFVybCA9IHNldFVybCB8fCAiaHR0cHM6Ly9iYWlkdS5odHQ1LmNvbS9uZXdjc3MvIiArIHN0eWxlTmFtZSArICIuY3NzIjsKICAgICAgICAgICAgICB0aGlzLmltcG9ydFN0eWxlKHNldFVybCwgIkFDLSIgKyBpbnNDbGFzc05hbWUsIHVzZU5vcm1hbENTUywgbXVzdExvYWQpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGRlYnVnKCLliqDovb3moLflvI/vvJoiICsgaW5zQ2xhc3NOYW1lKTsKICAgICAgICAgICAgICAvLyBUYW1wZXJNb25rZXkgKyBHcmVhc2VNb25rZXkgPCA0LjAgKyBWaW9sZW50TW9ua2V5ICg0LjBHcmVhc2VNb25rZXnkuI3mlK/mjIFHZXRSZXNvdXJjZeaWueazlSkKICAgICAgICAgICAgICB0aGlzLmltcG9ydFN0eWxlKGF3YWl0IEdNX2dldFJlc291cmNlVGV4dChzdHlsZU5hbWUpLCAiQUMtIiArIGluc0NsYXNzTmFtZSwgdXNlTm9ybWFsQ1NTLCBtdXN0TG9hZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICAvL+WKoOi9veaKpOecvOaooeW8j+agt+W8jwogICAgICAgICAgbG9hZEh1WWFuU3R5bGU6IGZ1bmN0aW9uIChjb2xvcikgewogICAgICAgICAgICBsZXQgc3R5bGUgPSAiYm9keVtiYWlkdV0sI3dyYXBwZXIgI2hlYWQsI3dyYXBwZXIgI3NfdGFiLGZvcm0uZm0gLnNfaXB0X3dyLmJne2JhY2tncm91bmQtY29sb3I6I2ZmZn0jY29udGFpbmVyICNjb250ZW50X2xlZnQgLnJlc3VsdC1vcCwjY29udGFpbmVyICNjb250ZW50X2xlZnQgLnJlc3VsdCwjY29udGFpbmVyICNycywjY29udGFpbmVyICNjb250ZW50X3JpZ2h0e2JhY2tncm91bmQtY29sb3I6I2FhYTtib3JkZXI6MXB4IGRvdWJsZSAjYTJkN2Q0O2JvcmRlci1yYWRpdXM6MH0jY29udGFpbmVyICNjb250ZW50X2xlZnQgLnJlc3VsdC1vcDpob3ZlciwjY29udGFpbmVyICNjb250ZW50X2xlZnQgLnJlc3VsdDpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNjY2MhaW1wb3J0YW50fSNjb250YWluZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LW9wIGgzLCNjb250YWluZXIgI2NvbnRlbnRfbGVmdCAuYy1jb250YWluZXIgaDMsI2NvbnRhaW5lciAjcnMgLnR0e2JhY2tncm91bmQtY29sb3I6I2JiYn0ubmFfY250IC5ud3NfaXRtLC5ud3NfaXRtYiwjYl9jb250ZW50ICNiX3Jlc3VsdHMgbGksYm9keSAjYl9oZWFkZXJ7YmFja2dyb3VuZC1jb2xvcjojYWFhO2JvcmRlcjoxcHggZG91YmxlICNhMmQ3ZDQ7Ym9yZGVyLXJhZGl1czowfSNiX2NvbnRlbnQgI2JfcmVzdWx0cyBsaTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNjY2MhaW1wb3J0YW50fSNiX2NvbnRlbnQgI2JfcmVzdWx0cyBsaSBoMntiYWNrZ3JvdW5kLWNvbG9yOiNiYmJ9I3JzbyAuZywuYmtXTWdkPi5nLC5ia1dNZ2QgZy1pbm5lci1jYXJkLCNyaHNjb2wgI3JocywjcmhzY29sICNyaHMgLmc+ZGl2LC5jMnh6VGIgLmcsLnJ1VGNJZCAuZywuZm0wNklmIC5nLC5jVW5RS2UgLmcsLkhhblFtZiAuZ3tiYWNrZ3JvdW5kLWNvbG9yOiNhYWE7Ym9yZGVyOjFweCBkb3VibGUgI2EyZDdkNDtib3JkZXItcmFkaXVzOjB9I3JzbyAuZzpob3ZlciwuYmtXTWdkPi5nOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2NjYyFpbXBvcnRhbnR9LmJrV01nZCAuZyBkaXYuciwjcnNvIC5nIGgze2JhY2tncm91bmQtY29sb3I6I2JiYn0iOwogICAgICAgICAgICBpZiAoQUNDb25maWcuaXNVc2VyQ29sb3JFbmFibGUpIHsKICAgICAgICAgICAgICBjb2xvciA9IGNvbG9yIHx8IEFDQ29uZmlnLmRlZmF1bHRIdVlhbkNvbG9yIHx8ICIjRkZGRkZGIjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBjb2xvciA9IGNvbG9yIHx8ICIjRkZGRkZGIjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoY29sb3IuaW5kZXhPZigiIyIpICE9PSAwIHx8IGNvbG9yLmxlbmd0aCA8IDcpIHJldHVybjsKICAgICAgICAgICAgaWYgKGlzTmV3R00gPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgc3R5bGUgPSBHTV9nZXRSZXNvdXJjZVRleHQoIk1haW5IdVlhblN0eWxlIik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3R5bGUgPSBzdHlsZQogICAgICAgICAgICAucmVwbGFjZSgvI2FhYShhKikvaWdtLCBjb2xvcikKICAgICAgICAgICAgLnJlcGxhY2UoLyNiYmIoYiopL2lnbSwgdGhpcy5MaWdodGVyKGNvbG9yLCAtNDApKQogICAgICAgICAgICAucmVwbGFjZSgvI2NjYyhjKikvaWdtLCB0aGlzLkxpZ2h0ZXIoY29sb3IsIDQ1KSk7CiAgICAgICAgICAgIEFDX2FkZFN0eWxlKHN0eWxlLCAiQUMtIiArIENPTlNULnVzZUl0ZW0ubmFtZSArICJIdVlhblN0eWxlIiArIChpc05ld0dNID8gIiIgOiAiLUZpbGUiKSwgImhlYWQiLCB0cnVlKTsgLy8g6ZyA6KaB5L+u5pS555qE77yM5omA5Lul5Li6dHJ1ZQogICAgICAgICAgfSwKICAgICAgICAgIGNsaXAyNTU6IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICBpZiAodmFsdWUgPiAyNTUpIHJldHVybiAyNTU7CiAgICAgICAgICAgIGlmICh2YWx1ZSA8IDApIHJldHVybiAwOwogICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgICB9LAogICAgICAgICAgTGlnaHRlcjogZnVuY3Rpb24gKG9yaVJHQiwgZGVsdGFZKSB7CiAgICAgICAgICAgIC8vIOaMieavlOS+i+e8qeaUviArIDEvZGVsdGFZCiAgICAgICAgICAgIC8vIEhFWCAyIFJHQgogICAgICAgICAgICBsZXQgcmdiID0gb3JpUkdCLnJlcGxhY2UoIiMiLCAiIik7CiAgICAgICAgICAgIGxldCBSID0gcGFyc2VJbnQoIjB4IiArIHJnYi5zdWJzdHIoMCwgMikpOwogICAgICAgICAgICBsZXQgRyA9IHBhcnNlSW50KCIweCIgKyByZ2Iuc3Vic3RyKDIsIDIpKTsKICAgICAgICAgICAgbGV0IEIgPSBwYXJzZUludCgiMHgiICsgcmdiLnN1YnN0cig0LCAyKSk7CiAgICAgICAgICAgIC8vIFJHQiAyIFlVVgogICAgICAgICAgICBsZXQgWSA9ICgoNjYgKiBSICsgMTI5ICogRyArIDI1ICogQiArIDEyOCkgPj4gOCkgKyAxNjsKICAgICAgICAgICAgbGV0IFUgPSAoKC0zOCAqIFIgLSA3NCAqIEcgKyAxMTIgKiBCICsgMTI4KSA+PiA4KSArIDEyODsKICAgICAgICAgICAgbGV0IFYgPSAoKDExMiAqIFIgLSA5NCAqIEcgLSAxOCAqIEIgKyAxMjgpID4+IDgpICsgMTI4OwogICAgICAgICAgICBZID0gWSAqICgxICsgMS4wIC8gZGVsdGFZKTsvLyDmj5Dpq5jkuq7luqYKICAgICAgICAgICAgLy8gWVVWIDIgUkdCCiAgICAgICAgICAgIFIgPSB0aGlzLmNsaXAyNTUoKDI5OCAqIChZIC0gMTYpICsgNDA5ICogKFYgLSAxMjgpICsgMTI4KSA+PiA4KTsKICAgICAgICAgICAgRyA9IHRoaXMuY2xpcDI1NSgoMjk4ICogKFkgLSAxNikgLSAxMDAgKiAoVSAtIDEyOCkgLSAyMDggKiAoViAtIDEyOCkgKyAxMjgpID4+IDgpOwogICAgICAgICAgICBCID0gdGhpcy5jbGlwMjU1KCgyOTggKiAoWSAtIDE2KSArIDUxNiAqIChVIC0gMTI4KSArIDEyOCkgPj4gOCk7CiAgICAgICAgICAgIHJldHVybiAiIyIgKyAoKFIgPDwgMTYpICsgKEcgPDwgOCkgKyBCKS50b1N0cmluZygxNik7CiAgICAgICAgICB9LAogICAgICAgICAgLy/liqDovb3ljZXpobXmoLflvI8KICAgICAgICAgIGxvYWRPbmVQYWdlU3R5bGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy5sb2FkU3R5bGUoQ09OU1QudXNlSXRlbS5uYW1lICsgIk9uZVBhZ2VTdHlsZSIsIENPTlNULnVzZUl0ZW0ubmFtZSArICJPbmVQYWdlU3R5bGUiKTsKICAgICAgICAgIH0sCiAgICAgICAgICAvL+WKoOi9veWPjOmhteagt+W8jwogICAgICAgICAgbG9hZFR3b1BhZ2VTdHlsZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0aGlzLmxvYWRTdHlsZShDT05TVC51c2VJdGVtLm5hbWUgKyAiVHdvUGFnZVN0eWxlIiwgQ09OU1QudXNlSXRlbS5uYW1lICsgIlR3b1BhZ2VTdHlsZSIpOwogICAgICAgICAgICBsZXQgY3NzSGVhZCA9ICIiOwogICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5CQUlEVSkgY3NzSGVhZCA9ICIjY29udGFpbmVyICNjb250ZW50X2xlZnQsIGJvZHlbbmV3c10gI2NvbnRhaW5lciAjY29udGVudF9sZWZ0PmRpdjpub3QoW2NsYXNzXSk6bm90KFtpZF0pIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuR09PR0xFKSBjc3NIZWFkID0gIi5zcmcsICNyc28iOwogICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5CSU5HKSBjc3NIZWFkID0gIiNiX2NvbnRlbnQgI2JfcmVzdWx0cyI7CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLlNPR09VKSBjc3NIZWFkID0gIiNtYWluIC5yZXN1bHRzIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuRFVDSykgY3NzSGVhZCA9ICIjbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tbWFpbiAjbGlua3MiOwogICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5ET0dFKSBjc3NIZWFkID0gIiNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1tYWluICNsaW5rcyI7CiAgICAgICAgICAgIEFDX2FkZFN0eWxlKGNzc0hlYWQgKyAie2dyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDIsbWlubWF4KDUwJSwxZnIpKTtncmlkLXRlbXBsYXRlLWFyZWFzOid4bWFpbiB4bWFpbic7fS5BQy5zcC1zZXBhcmF0b3J7Z3JpZC1jb2x1bW4tc3RhcnQ6IDE7Z3JpZC1jb2x1bW4tZW5kOiB4bWFpbi1lbmQ7fSIsCiAgICAgICAgICAgICAgIkFDLVR3b1BhZ2VFeFN0eWxlIiwgImhlYWQiKTsKICAgICAgICAgIH0sCiAgICAgICAgICAvLyDliqDovb3kuInliJfmoLflvI8KICAgICAgICAgIGxvYWRUaHJlZVBhZ2VTdHlsZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsZXQgY3NzSGVhZCA9ICIiOwogICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5CQUlEVSkgY3NzSGVhZCA9ICIjY29udGFpbmVyICNjb250ZW50X2xlZnQsIGJvZHlbbmV3c10gI2NvbnRhaW5lciAjY29udGVudF9sZWZ0PmRpdjpub3QoW2NsYXNzXSk6bm90KFtpZF0pIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuR09PR0xFKSBjc3NIZWFkID0gIi5zcmcsICNyc28iOwogICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5CSU5HKSBjc3NIZWFkID0gIiNiX2NvbnRlbnQgI2JfcmVzdWx0cyI7CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLlNPR09VKSBjc3NIZWFkID0gIiNtYWluIC5yZXN1bHRzIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuRFVDSykgY3NzSGVhZCA9ICIjbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tbWFpbiAjbGlua3MiOwogICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5ET0dFKSBjc3NIZWFkID0gIiNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1tYWluICNsaW5rcyI7CiAgICAgICAgICAgIEFDX2FkZFN0eWxlKGNzc0hlYWQgKyAie2dyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDMsbWlubWF4KDMzJSwxZnIpKTtncmlkLXRlbXBsYXRlLWFyZWFzOid4bWFpbiB4bWFpbiB4bWFpbic7fSIsCiAgICAgICAgICAgICAgIkFDLVRocmVlUGFnZUV4U3R5bGUiLCAiaGVhZCIpOwogICAgICAgICAgfSwKICAgICAgICAgIC8vIOWKoOi9veWbm+WIl+agt+W8jwogICAgICAgICAgbG9hZEZvdXJQYWdlU3R5bGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbGV0IGNzc0hlYWQgPSAiIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuQkFJRFUpIGNzc0hlYWQgPSAiI2NvbnRhaW5lciAjY29udGVudF9sZWZ0LCBib2R5W25ld3NdICNjb250YWluZXIgI2NvbnRlbnRfbGVmdD5kaXY6bm90KFtjbGFzc10pOm5vdChbaWRdKSI7CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkdPT0dMRSkgY3NzSGVhZCA9ICIuc3JnLCAjcnNvIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuQklORykgY3NzSGVhZCA9ICIjYl9jb250ZW50ICNiX3Jlc3VsdHMiOwogICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5TT0dPVSkgY3NzSGVhZCA9ICIjbWFpbiAucmVzdWx0cyI7CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkRPR0UpIGNzc0hlYWQgPSAiI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW4gI2xpbmtzIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuRE9HRSkgY3NzSGVhZCA9ICIjbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tbWFpbiAjbGlua3MiOwogICAgICAgICAgICBBQ19hZGRTdHlsZShjc3NIZWFkICsgIntncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCg0LG1pbm1heCgyNSUsMWZyKSk7Z3JpZC10ZW1wbGF0ZS1hcmVhczoneG1haW4geG1haW4geG1haW4geG1haW4nO30iLAogICAgICAgICAgICAgICJBQy1Gb3VyUGFnZUV4U3R5bGUiLCAiaGVhZCIpOwogICAgICAgICAgfSwKICAgICAgICAgIGxvYWRQbGFpblRvQ1NTOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZG9jdW1lbnQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGxldCBjdXJOb2RlID0gZG9jdW1lbnQuY2hpbGROb2Rlc1tpXTsKICAgICAgICAgICAgICBpZiAoY3VyTm9kZS5kZWwpIGN1ck5vZGUucmVtb3ZlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc2FmZVJlbW92ZSgic3R5bGVbY2xhc3MqPSdBQyddW2RlbD0nMSddIik7CiAgICAgICAgICB9LAogICAgICAgICAgLy8g56aB5q2i54us56uL55qE5qC35byP5Yqg6L29CiAgICAgICAgICBsb2FkQ1NTVG9QbGFpbjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRvY3VtZW50LmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBsZXQgY3VyTm9kZSA9IGRvY3VtZW50LmNoaWxkTm9kZXNbaV07CiAgICAgICAgICAgICAgLy8g5aaC5p6c5piv5a2Y5ZyoY3Nz77yMIOS4lOmdnuW/hemhu+aVsOaNrgogICAgICAgICAgICAgIGlmIChjdXJOb2RlLnRhcmdldCA9PT0gInhtbC1zdHlsZXNoZWV0IiAmJiBjdXJOb2RlLmRhdGEuaW5kZXhPZigibXVzdD1cInRydWUiKSA8IDApIHsKICAgICAgICAgICAgICAgIGN1ck5vZGUuZGF0YSA9ICIiOwogICAgICAgICAgICAgICAgY3VyTm9kZS5kZWwgPSB0cnVlOwoKICAgICAgICAgICAgICAgIC8vIOWvueS6jmVkZ2XlkoxzYWZhcmnpg73nibnmrorlpITnkIbkuIDkuIvlkKcKICAgICAgICAgICAgICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZigiZWRnZSIpID4gMCB8fCBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZigic2FmYXJpIikgPiAwKSB7CiAgICAgICAgICAgICAgICAgIGN1ck5vZGUucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgaW5pdCgpIHsKICAgICAgICAgICAgQ29udHJvbE1hbmFnZXIuaW5pdCgpOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgdmFyIENvbnRyb2xNYW5hZ2VyID0gewogICAgICAgICAgLy/lsYXkuK3mmL7npLogLS0tIOW/hemhu+aYr+eZvuW6puWSjOiwt+atjOeahOaQnOe0oue7k+aenOmhtemdou+8jOWFtuS7lumhtemdouS4jeiDveWKoOi9veeahC0t5bey57uP6YCa6L+H6ISa5pysaW5jbHVkZeagh+etvumZkOWItuS6huS4gOmDqOWIhgogICAgICAgICAgY2VudGVyRGlzcGxheTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAvLyDlpoLmnpzmmK/nmb7luqYgJiYgKCjlnLDlnYDmm7/mjaItPuWMheWQq3dk5YWz6ZSu6K+NW+abv+aNouS5i+WQjuS4jeetiS3mmK/nmb7luqbnu5PmnpzpobXpnaJdKSB8fCDmnInlj7PovrnmoI8t6IKv5a6a5piv55m+5bqm5pCc57Si57uT5p6c6aG1IHx8IHZhbHVl5Lit5a2Y5Zyo5pCc57Si5YaF5a65KSByZXR1cm47CiAgICAgICAgICAgIGlmICghY2hlY2tJU0JhaWR1TWFpbigpKSB7CiAgICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZENTU1RvUGxhaW4oKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEFDX2FkZFN0eWxlKCIubWluaWRpdiAjbG9nbyBpbWd7d2lkdGg6IDEwMHB4O2hlaWdodDogdW5zZXQ7bWFyZ2luLXRvcDogMC4zcmVtO30iLCAiQUMtc3R5bGUtbG9nbyIsICJoZWFkIik7CiAgICAgICAgICAgIGxldCByZXN1bHQgPSBwYXJzZUludChDT05TVC51c2VJdGVtLkFkc1N0eWxlTW9kZSB8fCAtMSk7CiAgICAgICAgICAgIGlmIChhY0Nzc0xvYWRGbGFnID09PSBmYWxzZSAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuQUNFeHRlbnNpb24iKSA9PT0gbnVsbCkgewogICAgICAgICAgICAgIGRlYnVnKCJpbuagt+W8j+WNs+WwhuWKoOi9vToiICsgcmVzdWx0KTsKICAgICAgICAgICAgICBsZXQgZXhwYW5kU3R5bGUgPSAiI3dyYXBwZXIgI3JzLCAjd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQsICN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtY29udGFpbmVye21pbi13aWR0aDo2NzBweDt9LmMtc3BhbjE4e3dpZHRoOjc4JSFpbXBvcnRhbnQ7bWluLXdpZHRoOjU1MHB4O30uYy1zcGFuMjR7d2lkdGg6IGF1dG8haW1wb3J0YW50O30iOwogICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IDEpIHsKICAgICAgICAgICAgICAgIEFDX2FkZFN0eWxlKGV4cGFuZFN0eWxlLCAiQUMtU3R5bGUtZXhwYW5kIiwgImhlYWQiKTsKICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRDb21tb25TdHlsZSgpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0ID09PSAyKSB7Ly/ljZXpobXlsYXkuK0KICAgICAgICAgICAgICAgIEFDX2FkZFN0eWxlKGV4cGFuZFN0eWxlLCAiQUMtU3R5bGUtZXhwYW5kIiwgImhlYWQiKTsKICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRDb21tb25TdHlsZSgpOwogICAgICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZE9uZVBhZ2VTdHlsZSgpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0ID09PSAzKSB7IC8v5Y+M6aG15bGF5LitCiAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkQ29tbW9uU3R5bGUoKTsKICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRUd29QYWdlU3R5bGUoKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdCA9PT0gNCkgeyAvLyDkuInliJcKICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRDb21tb25TdHlsZSgpOwogICAgICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZFR3b1BhZ2VTdHlsZSgpOwogICAgICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZFRocmVlUGFnZVN0eWxlKCk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgPT09IDUpIHsgLy8g5Zub5YiXCiAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkQ29tbW9uU3R5bGUoKTsKICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRUd29QYWdlU3R5bGUoKTsKICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRGb3VyUGFnZVN0eWxlKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGFjQ3NzTG9hZEZsYWcgPSB0cnVlOwogICAgICAgICAgICAgIGRlYnVnKCJpbuagt+W8j+i/kOihjOe7k+adnyIpOwogICAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJBSURVICYmIEFDQ29uZmlnLlN0eWxlX0JhaWR1TGl0ZSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgQUNfYWRkU3R5bGUoR01fZ2V0UmVzb3VyY2VUZXh0KCJiYWlkdUxpdGVTdHlsZSIpLCAiQUMtYmFpZHVMaXRlU3R5bGUiLCAiaGVhZCIpCiAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkQmFpZHVMaXRlU3R5bGUoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgIT09IFNpdGVUeXBlLkJBSURVICYmIGN1clNpdGUuU2l0ZVR5cGVJRCAhPT0gU2l0ZVR5cGUuQkFJRFVfWFVFU0hVICYmIGN1clNpdGUuU2l0ZVR5cGVJRCAhPT0gU2l0ZVR5cGUuR09PR0xFICYmIGN1clNpdGUuU2l0ZVR5cGVJRCAhPT0gU2l0ZVR5cGUuQklORyAmJiBjdXJTaXRlLlNpdGVUeXBlSUQgIT09IFNpdGVUeXBlLlNPR09VICYmIGN1clNpdGUuU2l0ZVR5cGVJRCAhPT0gU2l0ZVR5cGUuRFVDSyAmJiBjdXJTaXRlLlNpdGVUeXBlSUQgIT09IFNpdGVUeXBlLkRPR0UpIHJldHVybjsKCiAgICAgICAgICAgIC8vIOWmguaenOaYr+iwt+atjCAmJiAo5Zyw5Z2A5pu/5o2iLT7mmK/osLfmrYzlm77lg4/pobXpnaIgfHwg5piv5Zyw5Zu+6aG16Z2iKVvmm7/mjaLopoHlj5hdIHJldHVybjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuR09PR0xFICYmIGxvY2F0aW9uLmhyZWYucmVwbGFjZSgvdGJtPShpc2NofGxjbHxzaG9wfGZsbSkvLCAiIikgIT09IGxvY2F0aW9uLmhyZWYpIHsKICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkQ1NTVG9QbGFpbigpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICAvKirmiqTnnLxTdHlsZeacgOWQjui9veWFpSoqLwogICAgICAgICAgICBpZiAoQ09OU1QudXNlSXRlbS5IdVlhbk1vZGUgPT09IHRydWUgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcigic3R5bGVbY2xhc3MqPSdkYXJrcmVhZGVyJ10iKSAhPSBudWxsKSBDT05TVC5TdHlsZU1hbmdlci5sb2FkSHVZYW5TdHlsZSgpOwoKICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZFBsYWluVG9DU1MoKTsKICAgICAgICAgIH0sCiAgICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChDT05TVC5pc0dvb2dsZUltYWdlVXJsKSByZXR1cm47CiAgICAgICAgICAgIHRoaXMuY2VudGVyRGlzcGxheSgpOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgLy8gZGVidWcoIuiwg+eUqOWKoOi9veiHquWumuS5iWNzcyIpOwogICAgICAgIENvbnRyb2xNYW5hZ2VyLmluaXQoKTsKICAgICAgICByZXR1cm4gQ09OU1QuU3R5bGVNYW5nZXI7CiAgICAgIH0KICAgIH0KICB9KSgpOwp9KCk7Cg==","resources":[{"meta":{"name":"baiduCommonStyle.css","url":"http://ibaidu.ntaow.com/newcss/baiduCommonStyle.css?t=24.12","ts":1607929008943,"mimetype":"text/css"},"source":"aWZyYW1lOm5vdChbc3JjKj1jaHJvbWVdKSwucmVzX3RvcF9iYW5uZXIgI2Zvb3QsI3BhZ2UgLmZrLCNoZWFkIC5oZWFkQmxvY2ssI3JzX3RvcF9uZXcsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdD50YWJsZSwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLXJlY29tbWVuZCwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5sZWZ0QmxvY2ssI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucnJlY29tLWJ0bi1wYXJlbnQsI2RlbW8sI3dyYXBwZXIgI2dvdG9QYWdlLGJvZHk+ZGl2LnJlc3VsdC1vcCwucnJlY29tLWNvbnRhaW5lciwuY2h1bndhbi13cmFwcGVye2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9I3dyYXBwZXIgI2NvbnRlbnRfcmlnaHR7bWFyZ2luLXJpZ2h0Oi02JX1ib2R5W2JhaWR1XXtiYWNrZ3JvdW5kLWNvbG9yOiNmNWY1ZjU7dHJhbnNpdGlvbjphbGwgMS41c30jYWxhX2ltZ19yZXN1bHRze292ZXJmbG93OmhpZGRlbn1ib2R5IGEsYm9keSBhIGVtLCN1IGEsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Atc29mdC10aXRsZSBhIGVtLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdCBoMyBhIGVte3RleHQtZGVjb3JhdGlvbjpub25lfWJvZHkgYTpob3Zlcixib2R5IGE6aG92ZXIgZW17dGV4dC1kZWNvcmF0aW9uOm5vbmV9I3dyYXBwZXIgI3NfdGFie2JvcmRlci1ib3R0b206I2UwZTBlMCAxcHggc29saWQ7YmFja2dyb3VuZC1jb2xvcjojZjhmOGY4fWJvZHkgI2hlYWR7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDI0OCwyNDgsMjQ4LC40KTtib3JkZXItYm90dG9tOm5vbmU7YmFja2Ryb3AtZmlsdGVyOmJsdXIoMTBweCl9Zm9ybS5mbXtiYWNrZ3JvdW5kLWNvbG9yOnVuc2V0fWZvcm0uZm0gLmJkc3VnIGxpe3dpZHRoOmF1dG87Y29sb3I6IzAwMDtmb250OjE1cHggYXJpYWw7bGluZS1oZWlnaHQ6MjZweH1mb3JtLmZtIC5zX2lwdF93ci5iZ3tiYWNrZ3JvdW5kOiNmZmY7d2lkdGg6NjYlO21pbi13aWR0aDo1NzBweH0jY29udGVudF9sZWZ0IC5uZXctcG1kIC5jLXNwYW45LCNjb250ZW50X2xlZnQgLm5ldy1wbWQgLmMtc3BhbjEwe3dpZHRoOnVuc2V0O2Zsb2F0OnVuc2V0fSNoZWFkIC5oZWFkX3dyYXBwZXJ7d2lkdGg6dW5zZXR9Zm9ybS5mbSAuc19idG57YmFja2dyb3VuZDojMzQ3NmQyO2JvcmRlci1ib3R0b206MXB4IHNvbGlkICMzNDc2ZDJ9Zm9ybS5mbSAuc19idG46aG92ZXJ7YmFja2dyb3VuZDojNGY3ZmJmO2JvcmRlci1ib3R0b206MXB4IHNvbGlkICMzNDc2ZDJ9I3dyYXBwZXIgI3NfdGFiIGJ7Y29sb3I6IzM0NzZkMjtib3JkZXItYm90dG9tOjNweCAjMzQ3NmQyIHNvbGlkfSN3cmFwcGVyIC5oZWFkX251bXNfY29udF9vdXRlciAuc2VhcmNoX3Rvb2xfY29udGVyLCN3cmFwcGVyIC5oZWFkX251bXNfY29udF9vdXRlciAubnVtc3t3aWR0aDo2MzBweH0jd3JhcHBlciAjY29udGVudF9sZWZ0e2FuaW1hdGlvbi1uYW1lOmFuaV9ib3R0b21Ub3RvcDstd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbjouMnM7LXdlYmtpdC1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2V9I2hlYWQgLmhlYWRfd3JhcHBlcnthbmltYXRpb24tbmFtZTphbmlfbGVmdFRvcmlnaHQ7LXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb246LjJzOy13ZWJraXQtYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjplYXNlLW91dH0jd3JhcHBlciAjcnMsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LCN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtY29udGFpbmVye3dpZHRoOjY3MHB4O3BhZGRpbmc6MCAyMHB4IDE1cHg7bWFyZ2luLXRvcDowO21hcmdpbi1ib3R0b206MzBweDtib3JkZXItcmFkaXVzOjA7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JveC1zaXppbmc6Ym9yZGVyLWJveDtib3JkZXI6MXB4IHNvbGlkIHJnYmEoMCwwLDAsLjEpO3RyYW5zaXRpb246YWxsIC4ycyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzO292ZXJmbG93OmhpZGRlbn0jd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lcjpob3Zlciwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQ6aG92ZXIsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy1jb250YWluZXI6aG92ZXIgYXJ0aWNsZXtib3JkZXI6MXB4IHNvbGlkIHJnYmEoMCwwLDAsLjMpO2JveC1zaGFkb3c6MCAwIDFweCBncmV5Oy13ZWJraXQtYm94LXNoYWRvdzowIDAgMXB4IGdyZXk7LW1vei1ib3gtc2hhZG93OjAgMCAxcHggZ3JheX0jd3JhcHBlciAjcnNbYWMtbmVlZGhpZGVdLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdFthYy1uZWVkaGlkZV0sI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy1jb250YWluZXJbYWMtbmVlZGhpZGVde3BhZGRpbmc6NXB4O3BhZGRpbmctbGVmdDoxNXB4fSN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdFt0cGw9c29mdF0gLm9wLXNvZnQtdGl0bGUsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0IGgzLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtY29udGFpbmVyIGgze2JhY2tncm91bmQtY29sb3I6I2Y4ZjhmODttYXJnaW46MCAtMjBweCAxMHB4O3BhZGRpbmc6OHB4IDIwcHggNXB4O2JvcmRlci1yYWRpdXM6NXB4IDVweCAwIDB9I3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuZjEzIGEsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuZjEzIGVtLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtc3BhbjE4IGEsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuc3ViTGlua19mYWN0b3J5IGEsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuc3ViTGlua19hbnN3ZXIgYSwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLXRhYnMtY29udGVudCBhLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wX29mZmljYWxfd2VpYm9fY29udGVudCBhLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wX29mZmljYWxfd2VpYm9fcHogYSwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcF90aWViYTJfdGFibGlua3NfY29udGFpbmVyIGEsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3AtdGllYmEtZ2VuZXJhbC1yaWdodCwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcF9kcTAxX3RpdGxlLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wX2RxMDFfdGFibGUgYSwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcF9kcTAxX21vcmVsaW5rIGEsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3AtdGllYmEtZ2VuZXJhbC1tYWlucGwgYSwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcC1zZS1saXN0ZW4tcmVjb21tZW5kLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtb2Zmc2V0PmRpdiBhe3RleHQtZGVjb3JhdGlvbjpub25lO2NvbG9yOiMzNDc2ZDJ9I3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuZjEzIGE6aG92ZXIsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuZjEzIGVtOmhvdmVyLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLnN1YkxpbmtfZmFjdG9yeSBhOmhvdmVyLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLnN1YkxpbmtfYW5zd2VyIGE6aG92ZXIsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy10YWJzLWNvbnRlbnQgYTpob3Zlciwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcF90aWViYTJfdGFibGlua3NfY29udGFpbmVyIGE6aG92ZXIsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3AtdGllYmEtZ2VuZXJhbC1yaWdodDpob3Zlciwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcF9kcTAxX3RpdGxlOmhvdmVyLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wX2RxMDFfdGFibGUgYTpob3Zlciwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcF9kcTAxX21vcmVsaW5rIGE6aG92ZXIsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3AtdGllYmEtZ2VuZXJhbC1tYWlucGwgYTpob3Zlciwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcC1zZS1saXN0ZW4tcmVjb21tZW5kOmhvdmVyLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtb2Zmc2V0PmRpdiBhOmhvdmVye3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmUhaW1wb3J0YW50fSN3cmFwcGVyICNjb250ZW50X2xlZnQgLmYxMyBhe2NvbG9yOmdyZWVufSN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtc3BhbjE4LCN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtc3BhbjI0e3dpZHRoOjEwMCU7bWluLXdpZHRoOnVuc2V0fSN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtYm9yZGVye3dpZHRoOmF1dG87Ym9yZGVyOm5vbmU7Ym9yZGVyLWJvdHRvbS1jb2xvcjp0cmFuc3BhcmVudDtib3JkZXItcmlnaHQtY29sb3I6dHJhbnNwYXJlbnQ7Ym94LXNoYWRvdzowIDAgMCB0cmFuc3BhcmVudDstd2Via2l0LWJveC1zaGFkb3c6MCAwIDAgdHJhbnNwYXJlbnQ7LW1vei1ib3gtc2hhZG93OjAgMCAwIHRyYW5zcGFyZW50Oy1vLWJveC1zaGFkb3c6MCAwIDAgdHJhbnNwYXJlbnR9I3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuc2VfY29tX2lycmVndWxhcl9nYWxsZXJ5IHVsIGxpLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wX2ppbmd5YW5fbGlzdCwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQgLm9wLWltZy1hZGRyZXNzLWxpbmstdHlwZXtkaXNwbGF5OmlubGluZS1ibG9jazttYXJnaW4tbGVmdDoxMHB4fSN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtY29udGFpbmVyW3RwbD1zb2Z0XSAub3Atc29mdC10aXRsZSBhLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtY29udGFpbmVyW3RwbD1zb2Z0XSAub3Atc29mdC10aXRsZSBhIGVtLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtY29udGFpbmVyIGgzIGEsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0IGgzIGEgZW0sI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LW9wIGgzIGEgZW17Y29sb3I6IzM0NzZkMjtmb250LXdlaWdodDo3MDB9I3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Atc29mdC10aXRsZSBhLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdCBoMyBhLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdC1vcCBoMyBhe3Bvc2l0aW9uOnJlbGF0aXZlfSN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXNvZnQtdGl0bGUgYTpob3ZlcjphZnRlciwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQgaDMgYTpob3ZlcjphZnRlciwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3AgaDMgYTpob3ZlcjphZnRlcntsZWZ0OjA7d2lkdGg6MTAwJTstd2Via2l0LXRyYW5zaXRpb246d2lkdGggMzUwbXM7LW1vei10cmFuc2l0aW9uOndpZHRoIDM1MG1zO3RyYW5zaXRpb246d2lkdGggMzUwbXN9I3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Atc29mdC10aXRsZSBhOmFmdGVyLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdCBoMyBhOmFmdGVyLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdC1vcCBoMyBhOmFmdGVye2NvbnRlbnQ6IiI7cG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyLWJvdHRvbToycHggc29saWQgIzM0NzZkMjtib3R0b206LTJweDtsZWZ0OjEwMCU7d2lkdGg6MDstd2Via2l0LXRyYW5zaXRpb246d2lkdGggMzUwbXMsbGVmdCAzNTBtczstbW96LXRyYW5zaXRpb246d2lkdGggMzUwbXMsbGVmdCAzNTBtczt0cmFuc2l0aW9uOndpZHRoIDM1MG1zLGxlZnQgMzUwbXN9I3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0IGgzLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdC1vcCBoMywjd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lciBoM3tmb250LXdlaWdodDo3MDA7Zm9udC1zaXplOm1lZGl1bX0jd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcC1zb2Z0LXRpdGxlIGEgI2NvbnRlbnRfbGVmdCAucmVzdWx0IGgzIGEsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Atc29mdC10aXRsZSBhICNjb250ZW50X2xlZnQgLnJlc3VsdC1vcCBoMyBhe3Bvc2l0aW9uOnJlbGF0aXZlfSN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXNvZnQtdGl0bGUgYTp2aXNpdGVkLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXNvZnQtdGl0bGUgYTp2aXNpdGVkIGVtLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdCBoMyBhOnZpc2l0ZWQsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0IGgzIGE6dmlzaXRlZCBlbXtjb2xvcjojNjA5fSN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXNvZnQtdGl0bGUgYTp2aXNpdGVkOmhvdmVyOmFmdGVyLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdCBoMyBhOnZpc2l0ZWQ6aG92ZXI6YWZ0ZXIsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LW9wIGgzIGE6dmlzaXRlZDpob3ZlcjphZnRlcntsZWZ0OjA7d2lkdGg6MTAwJTstd2Via2l0LXRyYW5zaXRpb246d2lkdGggMzUwbXM7LW1vei10cmFuc2l0aW9uOndpZHRoIDM1MG1zO3RyYW5zaXRpb246d2lkdGggMzUwbXN9I3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Atc29mdC10aXRsZSBhOnZpc2l0ZWQ6YWZ0ZXIsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0IGgzIGE6dmlzaXRlZDphZnRlciwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3AgaDMgYTp2aXNpdGVkOmFmdGVye2NvbnRlbnQ6IiI7cG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyLWJvdHRvbToycHggc29saWQgIzYwOTtib3R0b206LTJweDtsZWZ0OjEwMCU7d2lkdGg6MDstd2Via2l0LXRyYW5zaXRpb246d2lkdGggMzUwbXMsbGVmdCAzNTBtczstbW96LXRyYW5zaXRpb246d2lkdGggMzUwbXMsbGVmdCAzNTBtczt0cmFuc2l0aW9uOndpZHRoIDM1MG1zLGxlZnQgMzUwbXN9I3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy1ncm91cC13cmFwcGVye3BhZGRpbmc6MDttYXJnaW46MCAyMHB4IDIwcHggMTBweH0jd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLWdyb3VwLXdyYXBwZXIgLmMtZ3JvdXB7bWFyZ2luOjA7cGFkZGluZy10b3A6MTBweH0jd3JhcHBlciAjcnN7bWFyZ2luLXRvcDowO3BhZGRpbmc6MCAyMHB4IDE1cHg7Ym9yZGVyLXJhZGl1czo1cHg7ei1pbmRleDoxfS53cmFwcGVyX25ldyAjZm9ybSAuYmRzdWctbmV3e3BhZGRpbmctcmlnaHQ6MTFweH0jd3JhcHBlciAjcnMgLnR0e21hcmdpbjowIC0yMHB4IDVweDtwYWRkaW5nOjVweCAyMHB4O2JhY2tncm91bmQtY29sb3I6I2Y4ZjhmODtib3JkZXItcmFkaXVzOjVweCA1cHggMCAwfSN3cmFwcGVyICNycyB0YWJsZXt3aWR0aDo2MzBweDtwYWRkaW5nOjVweCAxNXB4fSN3cmFwcGVyICNycyB0YWJsZSB0ciBhe21hcmdpbi10b3A6NXB4O21hcmdpbi1ib3R0b206NXB4O2NvbG9yOiMzNDc2ZDJ9I3dyYXBwZXIgI3JzIHRhYmxlIHRyIGE6aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZX0jd3JhcHBlciAjcGFnZXttaW4td2lkdGg6NzEwcHg7aGVpZ2h0OjQwcHg7bGluZS1oZWlnaHQ6NDBweDtwYWRkaW5nLXRvcDo1cHg7bWFyZ2luLWJvdHRvbTo1MHB4O21hcmdpbi1sZWZ0OjB9Lm9wLWltZy1hZGRyZXNzLWRlc2t0b3AtY29udHtvdmVyZmxvdzpoaWRkZW59I3dyYXBwZXIgI3BhZ2UgYSwjd3JhcHBlciAjcGFnZSBzdHJvbmd7Y29sb3I6IzM0NzZkMjtoZWlnaHQ6YXV0b30jd3JhcHBlciAjcGFnZSAubntoZWlnaHQ6MzRweH0jd3JhcHBlciAjcGFnZSAubjpob3Zlciwjd3JhcHBlciAjcGFnZSBhOmhvdmVyIC5wY3tib3JkZXI6MXB4IHNvbGlkIHRyYW5zcGFyZW50O2JhY2tncm91bmQ6I2Q4ZDhkODtjb2xvcjojMDA1N2RhfSN3cmFwcGVyICNwYWdlIHN0cm9uZyAucGN7YmFja2dyb3VuZDojMzQ3NmQyO2NvbG9yOiNmZmZ9Lm9wLWltZy1hZGRyZXNzLWRpdmlkZS1oaWdoe292ZXJmbG93OmhpZGRlbn0jd3JhcHBlciAja3d7d2lkdGg6OTQlfSNjb250YWluZXIuc2FtX25ld2dyaWQgLmMtY29udGFpbmVyIC50IC5BQy1mYXZpY29uVH5hLCNjb250YWluZXIuc2FtX25ld2dyaWQgLmMtY29udGFpbmVyIC50IC5jLWljb25+YXtkaXNwbGF5OmlubGluZX1ib2R5ICN3cmFwcGVyICNjb250ZW50X2xlZnQgYVtocmVmKj1vZmZpY2lhbF17Y29sb3I6I2ZmZn0jY29udGVudF9sZWZ0IC5jLWdyb3VwLW1pZGRsZSwjY29udGVudF9sZWZ0IC5jLWdyb3VwLXRvcHttYXJnaW4tYm90dG9tOjMwcHghaW1wb3J0YW50fUAtd2Via2l0LWtleWZyYW1lcyBhbmlfYm90dG9tVG90b3B7MCV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgzMnB4KTtvcGFjaXR5OjB9MjAle29wYWNpdHk6MH0zMCV7b3BhY2l0eTouOH0xMDAle29wYWNpdHk6MX19QC13ZWJraXQta2V5ZnJhbWVzIGFuaV9sZWZ0VG9yaWdodHswJXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVYKC0zMnB4KTtvcGFjaXR5OjB9MjAle29wYWNpdHk6MH0zMCV7b3BhY2l0eTouOH0xMDAle29wYWNpdHk6MX19QC13ZWJraXQta2V5ZnJhbWVzIGFuaV90b3BUb2J1dHRvbXswJXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKC0zMnB4KTtvcGFjaXR5OjB9MjAle29wYWNpdHk6MH0zMCV7b3BhY2l0eTouOH0xMDAle29wYWNpdHk6MX19I2NvbnRhaW5lci5zYW1fbmV3Z3JpZCAjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lciAuYy1jb250YWluZXJ7d2lkdGg6YXV0bzttaW4td2lkdGg6dW5zZXR9LmMtY29udGFpbmVyIC5jLXJlc3VsdC1jb250ZW50e3BhZGRpbmctdG9wOjIwcHh9I3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy1jb250YWluZXIgYXJ0aWNsZXtwYWRkaW5nLXRvcDoxNXB4O2JvcmRlcjp1bnNldCFpbXBvcnRhbnQ7Ym94LXNoYWRvdzp1bnNldCFpbXBvcnRhbnR9Ym9keSAud3JhcHBlcl9uZXcgI2hlYWQuZml4LWhlYWQgLnNfZm9ybXtoZWlnaHQ6NzBweH0uQUMuc3Atc2VwYXJhdG9ye21hcmdpbi10b3A6LTEwcHg7d2lkdGg6NjUwcHh9I3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy1jb250YWluZXJbdHBsPXJlY29tbWVuZF9saXN0XXtwYWRkaW5nLXRvcDoxMHB4O2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXJ9QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDoxMjgwcHgpeyN1IC50b2luZGV4LCN1ICNpbXNne2Rpc3BsYXk6bm9uZX19QG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDoxOTIxcHgpeyNoZWFkIC5oZWFkX3dyYXBwZXJ7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoLTE0MHB4LDAsMXB4KTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoLTE0MHB4LDAsMXB4KTtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2Rpc3BsYXk6ZmxleH19"},{"meta":{"name":"baiduOnePageStyle.css","url":"http://ibaidu.ntaow.com/newcss/baiduOnePageStyle.css?t=24.12","ts":1607929008944,"mimetype":"text/css"},"source":"I3dyYXBwZXJfd3JhcHBlciAjY29udGFpbmVye3dpZHRoOjEwMCU7bWFyZ2luLWxlZnQ6dW5zZXR9Zm9ybS5mbXtwb3NpdGlvbjpyZWxhdGl2ZTtiYWNrZ3JvdW5kLWNvbG9yOnVuc2V0fWJvZHlbYmFpZHVdIC5wYWdlZm9vdC5nanttYXJnaW4tdG9wOjEwMHB4fSNyZXN1bHRfbG9nb3twb3NpdGlvbjpyZWxhdGl2ZX0jc190YWIgYiwjc190YWIgYXtwb3NpdGlvbjpyZWxhdGl2ZX0jd3JhcHBlciAuaGVhZF9udW1zX2NvbnRfb3V0ZXJ7cG9zaXRpb246YWJzb2x1dGU7bGVmdDoyMCU7d2lkdGg6NjAlfSN3cmFwcGVyICNjb250ZW50X2xlZnQsI3dyYXBwZXIgI2NvbnRhaW5lci5zYW1fbmV3Z3JpZCAjcnMsI3dyYXBwZXIgI3BhZ2V7dG9wOjM1cHg7cG9zaXRpb246cmVsYXRpdmU7cGFkZGluZy1sZWZ0OjA7d2lkdGg6NDAlIWltcG9ydGFudDttaW4td2lkdGg6NjcwcHg7ZmxvYXQ6dW5zZXQ7bWFyZ2luLWxlZnQ6dW5zZXQ7bWFyZ2luOjAgYXV0b30jd3JhcHBlciAjY29udGFpbmVyLnNhbV9uZXdncmlkICNjb250ZW50X2xlZnR7cGFkZGluZy1sZWZ0OjIwcHh9I3dyYXBwZXIgI3BhZ2V7YmFja2dyb3VuZDp1bnNldH0jd3JhcHBlciAjcnMgdGh7dGV4dC1hbGlnbjpjZW50ZXJ9I3dyYXBwZXIgI3Jze3Bvc2l0aW9uOnJlbGF0aXZlO21hcmdpbjozMHB4IGF1dG8gLTIwcHh9I3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy1jb250YWluZXJ7d2lkdGg6MTAwJSFpbXBvcnRhbnQ7bWluLXdpZHRoOjY1MHB4fUBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6MTAwMHB4KXsjd3JhcHBlciAjY29udGVudF9sZWZ0LCN3cmFwcGVyICNyc3ttaW4td2lkdGg6ODAwcHh9fSN3cmFwcGVyICNjb250ZW50X3JpZ2h0e21hcmdpbi1yaWdodDpjYWxjKDE1dncgLSAyMTBweCk7ZGlzcGxheTpub25lfUBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6MTYwMHB4KXsjd3JhcHBlciAjY29udGVudF9yaWdodHtkaXNwbGF5OmJsb2NrO2Zsb2F0OnVuc2V0O3Bvc2l0aW9uOmFic29sdXRlfX0jd3JhcHBlciAjcGFnZSBhLCN3cmFwcGVyICNwYWdlIHN0cm9uZ3ttYXJnaW4tcmlnaHQ6MjJweCFpbXBvcnRhbnR9I3dyYXBwZXIgI3BhZ2UgLnBhZ2UtaW5uZXJ7cGFkZGluZy1sZWZ0OjIycHg7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXJ9LnNfdGFiX2lubmVye2Rpc3BsYXk6YmxvY2shaW1wb3J0YW50fSNjb250YWluZXIgLmhpbnRfY29tbW9uX3Jlc3RvcHtwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OmNhbGMoNDV2dyAtIDUwMHB4KTttYXJnaW4tdG9wOjI1cHh9LkFDLnNwLXNlcGFyYXRvcnt3aWR0aDphdXRvfSNzZWotY29udGFpbmVye3BhZGRpbmctbGVmdDpjYWxjKDQ0JSAtIDQ3OHB4KSFpbXBvcnRhbnR9LnNfZm9ybV93cmFwcGVye2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfSN3cmFwcGVyICNzX3RhYntwYWRkaW5nLWxlZnQ6MDttYXJnaW4tbGVmdDowO2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfSN3cmFwcGVyICNjb250YWluZXIgLmhlYWRfbnVtc19jb250X291dGVyIC5zZWFyY2hfdG9vbF9jb250ZXIsI3dyYXBwZXIgI2NvbnRhaW5lciAuaGVhZF9udW1zX2NvbnRfb3V0ZXIgLm51bXN7d2lkdGg6NjklO21hcmdpbi1sZWZ0OjE2JX1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOjE0NTBweCl7Zm9ybS5mbSAuc19pcHRfd3IuYmd7bWluLXdpZHRoOjMzMHB4fX0="},{"meta":{"name":"baiduTwoPageStyle.css","url":"http://ibaidu.ntaow.com/newcss/baiduTwoPageStyle.css?t=24.12","ts":1607929008944,"mimetype":"text/css"},"source":"I3dyYXBwZXJfd3JhcHBlciAjY29udGFpbmVye3dpZHRoOmF1dG99Zm9ybS5mbXtwb3NpdGlvbjpyZWxhdGl2ZTtiYWNrZ3JvdW5kLWNvbG9yOnVuc2V0fSNzX3RhYiBiLCNzX3RhYiBhe3Bvc2l0aW9uOnJlbGF0aXZlfSN3cmFwcGVyICNzX3RhYntwYWRkaW5nLWxlZnQ6MDttYXJnaW4tbGVmdDowO2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfSN3cmFwcGVyIC5oZWFkX251bXNfY29udF9vdXRlciAuc2VhcmNoX3Rvb2xfY29udGVyLCN3cmFwcGVyIC5oZWFkX251bXNfY29udF9vdXRlciAubnVtc3t3aWR0aDo4MCU7bWFyZ2luLWxlZnQ6MTAlfSN3cmFwcGVyIC5oZWFkX251bXNfY29udF9vdXRlciwuaGludF9jb21tb25fcmVzdG9wLCNoZWFkZXJfdG9wX2Jhcntwb3NpdGlvbjpyZWxhdGl2ZTtsZWZ0OjEwJTt3aWR0aDo4MCV9I3dyYXBwZXIgI2hlYWRlcl90b3BfYmFye21hcmdpbi1ib3R0b206MH1ib2R5ICNjb250YWluZXIuc2FtX25ld2dyaWQgI2NvbnRlbnRfbGVmdHt3aWR0aDo4MCV9I3dyYXBwZXIgI2NvbnRlbnRfbGVmdHtkaXNwbGF5OmlubGluZS1ncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczo1MCUgNTAlO2dyaWQtdGVtcGxhdGUtYXJlYXM6InhtYWluIHhtYWluIjttYXJnaW46MCBhdXRvO3Bvc2l0aW9uOnJlbGF0aXZlO3BhZGRpbmctbGVmdDo1JTtmbG9hdDp1bnNldDt3aWR0aDo4MCU7bWFyZ2luLWxlZnQ6NyU7bWFyZ2luLWJvdHRvbTozMHB4fWJvZHlbbmV3c10gI3dyYXBwZXIgI2NvbnRlbnRfbGVmdD5kaXY6bm90KFtjbGFzc10pOm5vdChbaWRdKXtkaXNwbGF5OmlubGluZS1ncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczo1MCUgNTAlO2dyaWQtdGVtcGxhdGUtYXJlYXM6InhtYWluIHhtYWluIn0jd3JhcHBlciAjY29udGVudF9yaWdodHtkaXNwbGF5Om5vbmUhaW1wb3J0YW50fSN3cmFwcGVyX3dyYXBwZXIgI2NvbnRhaW5lciAjcnN7cG9zaXRpb246cmVsYXRpdmU7bWFyZ2luOjAgYXV0b30jd3JhcHBlciAjcGFnZXttaW4td2lkdGg6NzEwcHg7aGVpZ2h0OjQwcHg7bGluZS1oZWlnaHQ6NDBweDtwYWRkaW5nOjVweCAxMHB4O21hcmdpbjowIGF1dG87dGV4dC1hbGlnbjpjZW50ZXI7cG9zaXRpb246cmVsYXRpdmV9I3dyYXBwZXIgI3BhZ2UgLnBhZ2UtaW5uZXJ7cGFkZGluZy1sZWZ0OjB9I3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LCN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtY29udGFpbmVye3dpZHRoOnVuc2V0IWltcG9ydGFudDttYXgtd2lkdGg6MTAwJTttYXJnaW4tbGVmdDo1cHg7bWFyZ2luLXJpZ2h0OjE1cHh9I3dyYXBwZXIgI2NvbnRlbnRfbGVmdD4qOm5vdChbY2xhc3MqPXJlc3VsdF0pOm5vdChbY2xhc3MqPWMtZ3JvdXAtd3JhcHBlcl0pe2dyaWQtY29sdW1uLXN0YXJ0OjE7Z3JpZC1jb2x1bW4tZW5kOnhtYWluLWVuZH0uYy1jb250YWluZXIgaDMgYXt6LWluZGV4OjF9LkFDLnNwLXNlcGFyYXRvcnt3aWR0aDphdXRvfSNzZWotY29udGFpbmVye3BhZGRpbmctbGVmdDpjYWxjKDEyJSAtIDExM3B4KSFpbXBvcnRhbnR9LnNfZm9ybV93cmFwcGVye2p1c3RpZnktY29udGVudDpjZW50ZXI7ZGlzcGxheTpmbGV4fSN3cmFwcGVyIC5oZWFkX251bXNfY29udF9vdXRlciAuc2VhcmNoX3Rvb2xfY29udGVyLCN3cmFwcGVyIC5oZWFkX251bXNfY29udF9vdXRlciAubnVtc3t3aWR0aDo4MCV9QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDoxMzg4cHgpe2Zvcm0uZm0gLnNfaXB0X3dyLmJne21pbi13aWR0aDo0MDBweH0ud3JhcHBlcl9uZXcgI3Jlc3VsdF9sb2dve21hcmdpbi1sZWZ0Oi0xMDBweH19"},{"meta":{"name":"baiduLiteStyle.css","url":"http://ibaidu.ntaow.com/newcss/baiduLiteStyle.css?t=24.12","ts":1607932532013,"mimetype":"text/css"},"source":"Kntmb250LWZhbWlseTotYXBwbGUtc3lzdGVtLGhlbHZldGljYSBuZXVlLEhlbHZldGljYSxuaW1idXMgc2FucyBsLEFyaWFsLGxpYmVyYXRpb24gc2FucyxwaW5nZmFuZyBzYyxoaXJhZ2lubyBzYW5zIGdiLHNvdXJjZSBoYW4gc2FucyBjbixzb3VyY2UgaGFuIHNhbnMgc2MsbWljcm9zb2Z0IHlhaGVpLHdlbnF1YW55aSBtaWNybyBoZWksd2VucXVhbnlpIHplbiBoZWksc3QgaGVpdGksU2ltSGVpLHdlbnF1YW55aSB6ZW4gaGVpIHNoYXJwLHNhbnMtc2VyaWZ9Ojotd2Via2l0LXNjcm9sbGJhcnt3aWR0aDo2cHg7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudH06Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNre2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwuMSl9Ojotd2Via2l0LXNjcm9sbGJhci10aHVtYntib3JkZXItcmFkaXVzOjNweDtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsLjIpO3RyYW5zaXRpb246YWxsIC40cyBlYXNlOy1tb3otdHJhbnNpdGlvbjphbGwgLjRzIGVhc2U7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuNHMgZWFzZTstby10cmFuc2l0aW9uOmFsbCAuNHMgZWFzZX06Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iOmhvdmVye2JvcmRlci1yYWRpdXM6M3B4O2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwuNCk7dHJhbnNpdGlvbjphbGwgLjRzIGVhc2U7LW1vei10cmFuc2l0aW9uOmFsbCAuNHMgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC40cyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC40cyBlYXNlfS5hbmltYXRlZHstd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbjoxczthbmltYXRpb24tZHVyYXRpb246MXM7YW5pbWF0aW9uLWZpbGwtbW9kZTpib3RofUAtd2Via2l0LWtleWZyYW1lcyBmYWRlSW5VcHtmcm9te29wYWNpdHk6MDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDEwMCUsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsMTAwJSwwKX10b3tvcGFjaXR5OjE7LXdlYmtpdC10cmFuc2Zvcm06bm9uZTt0cmFuc2Zvcm06bm9uZX19QGtleWZyYW1lcyBmYWRlSW5VcHtmcm9te29wYWNpdHk6MDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDEwMCUsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsMTAwJSwwKX10b3tvcGFjaXR5OjE7LXdlYmtpdC10cmFuc2Zvcm06bm9uZTt0cmFuc2Zvcm06bm9uZX19LmZhZGVJblVwey13ZWJraXQtYW5pbWF0aW9uLW5hbWU6ZmFkZUluVXA7YW5pbWF0aW9uLW5hbWU6ZmFkZUluVXB9QC13ZWJraXQta2V5ZnJhbWVzIGJvdW5jZUluUmlnaHR7NjAlLDc1JSw5MCUsZnJvbSx0b3std2Via2l0LWFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKC4yMTUsLjYxLC4zNTUsMSk7YW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoLjIxNSwuNjEsLjM1NSwxKX1mcm9te29wYWNpdHk6MDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgzMDAwcHgsMCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMzAwMHB4LDAsMCl9NjAle29wYWNpdHk6MTstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgtMjVweCwwLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgtMjVweCwwLDApfTc1JXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgxMHB4LDAsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDEwcHgsMCwwKX05MCV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoLTVweCwwLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgtNXB4LDAsMCl9dG97LXdlYmtpdC10cmFuc2Zvcm06bm9uZTt0cmFuc2Zvcm06bm9uZX19QGtleWZyYW1lcyBib3VuY2VJblJpZ2h0ezYwJSw3NSUsOTAlLGZyb20sdG97LXdlYmtpdC1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllciguMjE1LC42MSwuMzU1LDEpO2FuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKC4yMTUsLjYxLC4zNTUsMSl9ZnJvbXtvcGFjaXR5OjA7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMzAwMHB4LDAsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDMwMDBweCwwLDApfTYwJXtvcGFjaXR5OjE7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoLTI1cHgsMCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoLTI1cHgsMCwwKX03NSV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMTBweCwwLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgxMHB4LDAsMCl9OTAley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKC01cHgsMCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoLTVweCwwLDApfXRvey13ZWJraXQtdHJhbnNmb3JtOm5vbmU7dHJhbnNmb3JtOm5vbmV9fS5ib3VuY2VJblJpZ2h0ey13ZWJraXQtYW5pbWF0aW9uLW5hbWU6Ym91bmNlSW5SaWdodDthbmltYXRpb24tbmFtZTpib3VuY2VJblJpZ2h0fUAtd2Via2l0LWtleWZyYW1lcyBib3VuY2VJblVwezYwJSw3NSUsOTAlLGZyb20sdG97LXdlYmtpdC1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllciguMjE1LC42MSwuMzU1LDEpO2FuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKC4yMTUsLjYxLC4zNTUsMSl9ZnJvbXtvcGFjaXR5OjA7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwzMDAwcHgsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsMzAwMHB4LDApfTYwJXtvcGFjaXR5OjE7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwtMjBweCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwtMjBweCwwKX03NSV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwxMHB4LDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDEwcHgsMCl9OTAley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsLTVweCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwtNXB4LDApfXRvey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsMCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwwLDApfX1he3RleHQtZGVjb3JhdGlvbjpub25lO21hcmdpbi1ib3R0b206MnB4fS5jLXNob3d1cmw6aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7Ym9yZGVyOm5vbmU7b3BhY2l0eTouODt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30ucmVzLWdhcC1yaWdodDE2OmhvdmVye2JvcmRlci1ib3R0b206IzM0NzZkMiAxLjJweCBzb2xpZH0uYy1zaG93dXJse3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfS5jLXRpcC1hcnJvdzpob3Zlcnt0ZXh0LWRlY29yYXRpb246bm9uZTtib3JkZXI6bm9uZX0uYy1kZWZhdWx0IGF7dGV4dC1kZWNvcmF0aW9uOm5vbmU7Ym9yZGVyOm5vbmV9LmMtZ2FwLWJvdHRvbSBhOmhvdmVye3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmV9Lm9wX2RpY3QzX21vcmVsaW5rIGE6aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZX0uYy1idG46aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOm5vbmUhaW1wb3J0YW50fXRkIGE6aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZX1lbXt0ZXh0LWRlY29yYXRpb246bm9uZSFpbXBvcnRhbnR9I3Nfd3JhcHtkaXNwbGF5Om5vbmV9LnMtdG9wLW5hdntkaXNwbGF5Om5vbmV9I3NfY3RuZXJfbWVudXN7ZGlzcGxheTpub25lfSNzX21lbnVfZ3VyZHtkaXNwbGF5Om5vbmV9I3Nfc3RycHhfc3BhbjF7ZGlzcGxheTpub25lfSNmdENvbntkaXNwbGF5Om5vbmV9I2JvdHRvbV9jb250YWluZXJ7ZGlzcGxheTpub25lfSNsZ3tiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7aGVpZ2h0OjcwcHg7cGFkZGluZy10b3A6MTUwcHh9I2xnIGltZ3tkaXNwbGF5Om5vbmV9I2xnIGF7ZGlzcGxheTpub25lfSNoZWFkX3dyYXBwZXJ7cGFkZGluZy1ib3R0b206MH0uc19mb3JtX3dyYXBwZXJ7bWFyZ2luLXRvcDphdXRvO2Rpc3BsYXk6ZmxleH0jc19sZ19pbWcsI3NfbGdfaW1nX25ld3tkaXNwbGF5Om5vbmUhaW1wb3J0YW50fSNmb3JtIC5zX2lwdF93cntib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOjNweDt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwcztiYWNrZ3JvdW5kLXBvc2l0aW9uOjEwMCUhaW1wb3J0YW50O2hlaWdodDozOXB4O2ZvbnQtZmFtaWx5Oi1hcHBsZS1zeXN0ZW0saGVsdmV0aWNhIG5ldWUsSGVsdmV0aWNhLG5pbWJ1cyBzYW5zIGwsQXJpYWwsbGliZXJhdGlvbiBzYW5zLHBpbmdmYW5nIHNjLGhpcmFnaW5vIHNhbnMgZ2Isc291cmNlIGhhbiBzYW5zIGNuLHNvdXJjZSBoYW4gc2FucyBzYyxtaWNyb3NvZnQgeWFoZWksd2VucXVhbnlpIG1pY3JvIGhlaSx3ZW5xdWFueWkgemVuIGhlaSxzdCBoZWl0aSxTaW1IZWksd2VucXVhbnlpIHplbiBoZWkgc2hhcnAsc2Fucy1zZXJpZjtwYWRkaW5nLXRvcDo0cHh9LnNfaXB0e2ZvbnQtZmFtaWx5Oi1hcHBsZS1zeXN0ZW0saGVsdmV0aWNhIG5ldWUsSGVsdmV0aWNhLG5pbWJ1cyBzYW5zIGwsQXJpYWwsbGliZXJhdGlvbiBzYW5zLHBpbmdmYW5nIHNjLGhpcmFnaW5vIHNhbnMgZ2Isc291cmNlIGhhbiBzYW5zIGNuLHNvdXJjZSBoYW4gc2FucyBzYyxtaWNyb3NvZnQgeWFoZWksd2VucXVhbnlpIG1pY3JvIGhlaSx3ZW5xdWFueWkgemVuIGhlaSxzdCBoZWl0aSxTaW1IZWksd2VucXVhbnlpIHplbiBoZWkgc2hhcnAsc2Fucy1zZXJpZn0jZm9ybSAuc19pcHRfd3I6aG92ZXJ7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czoycHg7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9LmlwdGhvdmVye3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfS5pcHRmb2N1c3tib3gtc2hhZG93OjAgMnB4IDVweCAwIHJnYmEoMCwwLDAsLjE2KSwwIDJweCAxMHB4IDAgcmdiYSgwLDAsMCwuMTIpfWJvZHkgI2Zvcm0gLnNfYnRue3dpZHRoOjMycHg7aGVpZ2h0OjMycHg7Ym9yZGVyLXJhZGl1czo1MCU7Zm9udC1zaXplOjA7Ym9yZGVyOm5vbmU7Ym94LXNoYWRvdzpub25lO21hcmdpbi1sZWZ0OjA7ei1pbmRleDoxMDA7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7bWFyZ2luLXRvcDowO29wYWNpdHk6MH1ib2R5ICNmb3JtIC5zX2J0bjpob3ZlcntvcGFjaXR5Oi41O2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Ym9yZGVyOm5vbmU7Ym94LXNoYWRvdzpub25lO3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfWJvZHkgI2Zvcm0gLnNfYnRuX3dye3dpZHRoOjMycHg7aGVpZ2h0OjMycHg7Ym9yZGVyLXJhZGl1czo1MCU7Zm9udC1zaXplOjA7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudDtiYWNrZ3JvdW5kLXBvc2l0aW9uOjUwJTtib3JkZXI6bm9uZTtib3gtc2hhZG93Om5vbmU7bWFyZ2luLWxlZnQ6NXB4O3otaW5kZXg6MTAwO3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzO21hcmdpbi10b3A6NnB4fWJvZHkgI2Zvcm0gLnNfYnRuX3dyOmhvdmVye29wYWNpdHk6LjU7YmFja2dyb3VuZDp0cmFuc3BhcmVudDtib3JkZXI6bm9uZTtib3gtc2hhZG93Om5vbmU7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9LmJ0bmhvdmVye29wYWNpdHk6LjU7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudCFpbXBvcnRhbnQ7Ym9yZGVyOm5vbmUhaW1wb3J0YW50O2JveC1zaGFkb3c6bm9uZTt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30uaGludF90b3BycV90aXBze21hcmdpbi1ib3R0b206MTJweH0uc19mb3Jte2hlaWdodDo3NXB4O3BhZGRpbmctdG9wOjEwcHh9I3NfdGFie3BhZGRpbmc6ODdweCAwIDAgMTIxcHh9I2hlYWQuc19kb3due2JveC1zaGFkb3c6MCAwIDVweCAjNjY2O3BhZGRpbmctYm90dG9tOjhweH0uYmRzdWd7dG9wOjQycHg7Ym94LXNoYWRvdzowIDJweCA1cHggMCByZ2JhKDAsMCwwLC4xNiksMCAycHggMTBweCAwIHJnYmEoMCwwLDAsLjEyKTtib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOjAgMCAycHggMnB4O2ZvbnQtZmFtaWx5Oi1hcHBsZS1zeXN0ZW0saGVsdmV0aWNhIG5ldWUsSGVsdmV0aWNhLG5pbWJ1cyBzYW5zIGwsQXJpYWwsbGliZXJhdGlvbiBzYW5zLHBpbmdmYW5nIHNjLGhpcmFnaW5vIHNhbnMgZ2Isc291cmNlIGhhbiBzYW5zIGNuLHNvdXJjZSBoYW4gc2FucyBzYyxtaWNyb3NvZnQgeWFoZWksd2VucXVhbnlpIG1pY3JvIGhlaSx3ZW5xdWFueWkgemVuIGhlaSxzdCBoZWl0aSxTaW1IZWksd2VucXVhbnlpIHplbiBoZWkgc2hhcnAsc2Fucy1zZXJpZn0uYmdzdWcgbGl7Zm9udC1mYW1pbHk6SGVsdmV0aWNhLG1pY3Jvc29mdCB5YWhlaSB1aSFpbXBvcnRhbnQ7d2lkdGg6MTAwJSFpbXBvcnRhbnQ7bGluZS1oZWlnaHQ6MzZweCFpbXBvcnRhbnR9LmJnc3VnIHVsIGxpe2xpbmUtaGVpZ2h0OjMycHghaW1wb3J0YW50fS5iZHN1Zy1vdmVyZmxvd3tmb250LWZhbWlseTpIZWx2ZXRpY2EsbWljcm9zb2Z0IHlhaGVpIHVpIWltcG9ydGFudDt3aWR0aDo1ODNweCFpbXBvcnRhbnR9I3F1aWNrZGVsZXRle3RvcDo1cHghaW1wb3J0YW50O29wYWNpdHk6LjV9I2t3X3RpcHtmb250LWZhbWlseTpIZWx2ZXRpY2EsbWljcm9zb2Z0IHlhaGVpIHVpIGxpZ2h0fSNyZXN1bHRfbG9nb3tiYWNrZ3JvdW5kLWltYWdlOnVybChkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NEtQQ0V0TFNCSFpXNWxjbUYwYjNJNklFRmtiMkpsSUVsc2JIVnpkSEpoZEc5eUlERTVMakl1TVN3Z1UxWkhJRVY0Y0c5eWRDQlFiSFZuTFVsdUlDNGdVMVpISUZabGNuTnBiMjQ2SURZdU1EQWdRblZwYkdRZ01Da2dJQzB0UGdvOGMzWm5JSFpsY25OcGIyNDlJakV1TVNJZ2FXUTlJdVdidnVXeGdsOHhJaUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGh0Ykc1ek9uaHNhVzVyUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMM2hzYVc1cklpQjRQU0l3Y0hnaUlIazlJakJ3ZUNJS0NTQjJhV1YzUW05NFBTSXdJREFnTVRBeElETXpJaUJ6ZEhsc1pUMGlaVzVoWW14bExXSmhZMnRuY205MWJtUTZibVYzSURBZ01DQXhNREVnTXpNN0lpQjRiV3c2YzNCaFkyVTlJbkJ5WlhObGNuWmxJajRLUEhOMGVXeGxJSFI1Y0dVOUluUmxlSFF2WTNOeklqNEtDUzV6ZERCN1ptbHNiRG9qTkRnM09VSkVPMzBLQ1M1emRERjdabWxzYkRvalJFUTBORE0yTzMwS0NTNXpkREo3Wm1sc2JEb2pSa1pHUmtaR08zMEtQQzl6ZEhsc1pUNEtQSEJoZEdnZ1kyeGhjM005SW5OME1DSWdaRDBpVFRVd0xqUXNNVFV1TTJNdE15NDRMREF1TXkwMExESXVOaTAxTGpjc05DNDNZeTB4TGpnc01pNHlMVFV1TlN3MExqRXROaXcyTGpkakxUQXVOaXd6TGpNc01TNHpMRFV1TVN3ekxEVXVOMk14TGprc01DNDJMRFl1TWkwd0xqVXNPQzQwTFRBdU5XZ3dMaklLQ1dnd0xqSmpNaTR5TERBc05pNDBMREV1TVN3NExqUXNNQzQxWXpFdU9DMHdMallzTXk0MUxUTXVNaXd6TFRVdU4yTXRNQzQwTFRJdU1TMDBMalF0TkM0MUxUWXVNaTAyTGpkRE5UUXVNaXd4T0N3MU5DNHpMREUxTGpZc05UQXVOQ3d4TlM0emVpQk5NemNzTVRRdU9Bb0pZekFzTWk0MExERXVOaXcwTGpNc015NDBMRFF1TTJNeExqa3NNQ3d6TGpRdE1TNDVMRE11TkMwMExqTmpNQzB5TGpRdE1TNDJMVFF1TXkwekxqUXROQzR6VXpNM0xERXlMalVzTXpjc01UUXVPSG9nVFRRekxqa3NPQzQyWXpBc01pNDFMREV1TlN3MExqVXNNeTR6TERRdU5Rb0pZekV1T0N3d0xETXVNeTB5TGpFc015NHpMVFF1TlZNME9TdzBMakVzTkRjdU1TdzBMakZETkRVdU15dzBMRFF6TGprc05pdzBNeTQ1TERndU5ub2dUVFV5TGpJc09DNDFZekFzTWk0ekxERXVOQ3cwTGpNc015NHlMRFF1TTNNekxqSXRNUzQ1TERNdU1pMDBMak56TFRFdU5DMDBMak10TXk0eUxUUXVNd29KVXpVeUxqSXNOaTR5TERVeUxqSXNPQzQxZWlCTk5UY3VOU3d4TlM0NVl6QXNNaTR6TERFdU5TdzBMak1zTXk0ekxEUXVNMk14TGpnc01Dd3pMak10TVM0NUxETXVNeTAwTGpOekxURXVOUzAwTGpNdE15NHpMVFF1TTBNMU9DNDVMREV4TGpZc05UY3VOU3d4TXk0MkxEVTNMalVzTVRVdU9Yb2lMejRLUEhCaGRHZ2dZMnhoYzNNOUluTjBNU0lnWkQwaVRUUXNNekF1TkhZdE5TNHhhRFl1TkdNeExqWXNNQ3d4TGpZc01DNHpMREV1Tml3eWRqRXVOR013TERFdU5pMHlMak1zTVM0NExUTXVPU3d4TGpoTU5Dd3pNQzQwVERRc016QXVOSG9nVFRRc01qTjJMVFF1T0dnMExqRUtDV014TGpZc01Dd3pMamtzTUN3ekxqa3NNaTR4ZGpBdU1XTXdMREV1TkMwd0xqVXNNaTQyTFRFdU9Dd3lMalpETVRBdU15d3lNeXcwTERJekxEUXNNak42SUUweExqY3NNVFoyTVRZdU0yZzJMalJqTXl3d0xEWXVNaXd3TERZdU1pMHpMaloyTFRFdU1XTXdMVEV1Tmkwd0xqRXRNaTQzTFRFdU1TMHpMalVLQ1dNeExUQXVPQ3d4TGpFdE1pNHpMREV1TVMwekxqWnNNQ3d3WXpBdE5DNDFMVE11TWkwMExqVXROaTR5TFRRdU5Vd3hMamNzTVRaTU1TNDNMREUyZWlJdlBnbzhjR0YwYUNCamJHRnpjejBpYzNReElpQmtQU0pOTWpVc01qZ3VPV010TVM0eExERXVNUzB6TGpNc01TNHpMVE11TlN3eExqTmpMVEV1TXl3d0xUSXVOeTB3TGpVdE1pNDNMVEl1TVdNd0xURXVOQ3d3TGpVdE1pNHpMREl1TVMweUxqTmpNUzR6TERBc01pNDRMREF1TVN3MExqRXNNQzQyVmpJNExqbDZDZ2tnVFRJeExqUXNNekl1TTJNd0xqUXNNQ3d5TGpNdE1DNHhMRE11Tnkwd0xqbHNNQzR5TERBdU4yZ3lMakYyTFRndU9XTXdMVE11TmkweUxqTXROUzAxTGpjdE5XTXRNUzQ0TERBdE5DNHpMREF1TnkwMExqY3NNQzQ1YkRBdU5Dd3lMak5qTVM0MkxUQXVOaXd6TFRBdU5pdzBMakl0TUM0MkNnbGpNUzQ0TERBc015NHpMREF1Tml3ekxqTXNNaTQyVmpJMFl5MHhMVEF1TkMweUxqUXRNQzQyTFRRdU1TMHdMalpqTFRNc01DMDBMalVzTVM0MkxUUXVOU3cwTGpkRE1UWXVOQ3d6TVM0NExERTVMallzTXpJdU15d3lNUzQwTERNeUxqTjZJaTgrQ2p4d1lYUm9JR05zWVhOelBTSnpkREVpSUdROUlrMHpNQzR5TERFMkxqRmpNQ3d3TGpZc01DNDJMREV1TWl3eExqTXNNUzR5WXpBdU9Dd3dMREV1TXkwd0xqWXNNUzR6TFRFdU1tTXdMVEF1Tnkwd0xqWXRNUzR6TFRFdU15MHhMak5ETXpBdU9Dd3hOQzQ0TERNd0xqSXNNVFV1TXl3ek1DNHlMREUyTGpGNkNna2dUVE13TGpNc016SXVNV2d5TGpSV01UZ3VOV2d0TWk0MFZqTXlMakY2SWk4K0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERFaUlHUTlJazAzTVM0eUxESXlMakZvT0M0MFl6QXVOQ3d3TGpFc01DNDJMREF1TXl3d0xqWXNNQzQzZGpJdU5tZ3RPUzQzZGkweUxqWkROekF1Tml3eU1pNDBMRGN3TGpnc01qSXVNaXczTVM0eUxESXlMakY2SUUwM01TNHlMRE13TGpVS0NXTXRNQzQwTERBdE1DNDJMVEF1TXkwd0xqY3RNQzQ0ZGkweUxqWm9PUzQzZGpJdU5tTXdMREF1TkMwd0xqSXNNQzQzTFRBdU5pd3dMamRJTnpFdU1ub2dUVGN6TGpZc01UaGpMVEF1TVN3d0xqUXRNQzR4TERBdU9TMHdMalFzTVM0M1l5MHdMakVzTUM0ekxUQXVNU3d3TGpVdE1DNHhMREF1TndvSmFDMHlMalpqTFRFdU15d3dMakV0TVM0NUxEQXVPQzB5TERKMk55NDVZekF1TVN3eExqRXNNQzQ0TERFdU9Dd3lMREV1T1dneE1HTXhMakl0TUM0eExERXVPQzB3TGpjc01TNDVMVEV1T0hZdE55NDVZeTB3TGpFdE1TNHpMVEF1TnkweExqa3RNUzQ1TFRJdU1XZ3ROUW9KWXpBdU1TMHdMak1zTUM0eExUQXVPQ3d3TGpNdE1TNDBZekF1TVMwd0xqUXNNQzR4TFRBdU55d3dMakV0TUM0NWFEY3VNbll0TVM0NFNEWTNMalJXTVRoTU56TXVOaXd4T0V3M015NDJMREU0ZWlJdlBnbzhjR0YwYUNCamJHRnpjejBpYzNReElpQmtQU0pOT1RNdU55d3lNaTQzWXkwd0xqUXRNQzR4TFRBdU5TMHdMakl0TUM0MUxUQXVOWFl0TUM0MmFETXVNbll3TGpaakxUQXVNU3d3TGpNdE1DNHlMREF1TkMwd0xqVXNNQzQxU0RrekxqZDZJRTA1Tmk0MkxESTBMakVLQ1dNeExqRXRNQzR4TERFdU5pMHdMalVzTVM0MkxURXVOSFl0TVdneUxqTjJMVEV1TldndE1pNHpkaTB4TGpGb0xURXVPSFl4TGpGb0xUTXVNbll0TVM0eGFDMHhMamgyTVM0eGFDMHlMak4yTVM0MWFESXVNM1l4WXpBdU1Td3dMamtzTUM0MkxERXVOQ3d4TGpZc01TNDBTRGsyTGpaNkNna2dUVGswTGpnc016QXVOR014TGpZc01DNDRMRE11TkN3eExqTXNOUzQwTERFdU9Hd3dMamt0TVM0M1l5MHhMalF0TUM0eUxUSXVPUzB3TGpZdE5DNDBMVEV1TVdNeExqRXRNQzQ0TERJdE1TNDJMREl1TnkweUxqVmpNQzR6TFRBdU5Dd3dMalF0TUM0NUxEQXVNaTB4TGpNS0NXTXRNQzR6TFRBdU5pMHdMamd0TUM0NUxURXVOQzB3TGpsb0xUbDJNUzQxYURjdU4yTXdMaklzTUN3d0xqUXNNQzR4TERBdU5Dd3dMakZ6TUN3d0xqRXRNQzR4TERBdU0yTXRNQzQyTERBdU5pMHhMalFzTVM0ekxUSXVNeXd4TGpoakxURXVNaTB3TGpjdE1pNHhMVEV1TXkweUxqUXRNUzQ0YUMweUxqSUtDV013TGprc01Td3hMamdzTVM0NUxESXVPU3d5TGpkakxURXVOaXd3TGpZdE15NHpMREV1TVMwMExqa3NNUzR6YkRBdU9Td3hMalpET1RFdU15d3pNUzQ0TERrekxqSXNNekV1TVN3NU5DNDRMRE13TGpSNklFMDRPQzR6TERJMUxqSjJMVFpqTUM0eExUQXVOaXd3TGpNdE1DNDVMREF1T0Mwd0xqa0tDV2d4TVM0NGRpMHhMalpJT1RWakxUQXVNUzB3TGpFdE1pNHlMVEF1TVMweUxqSXNNR2d0TkM0M1l5MHhMakVzTUM0eExURXVOeXd3TGprdE1TNDRMREl1TWxZeU5XTXdMakVzTWk0eExUQXVOQ3cwTGpRdE1TNHhMRFl1TjJ3eExqa3NNQzQyQ2dsRE9EY3VPU3d5T1M0NUxEZzRMak1zTWpjdU5pdzRPQzR6TERJMUxqSjZJaTgrQ2p4d1lYUm9JR05zWVhOelBTSnpkRElpSUdROUlrMDBOaTR6TERJMExqSmpNQzQyTERBc01TNHlMREF1TVN3eExqY3NNQzQwZGpNdU5HTXdMREF1TXkwd0xqWXNNUzB4TGprc01XTXRNUzQxTERBdE1TNDRMVEF1TmkweExqZ3RNaTR4ZGkwd0xqWUtDVU0wTkM0eUxESTBMamdzTkRRdU55d3lOQzR5TERRMkxqTXNNalF1TW5vZ1RUUTVMaklzTWpBdU4wZzBPSFl5TGpWRE5EY3VOaXd5TXk0eExEUTNMREl6TERRMkxqTXNNak5qTFRJdU55d3dMVE11TXl3eExUTXVNeXd6TGpWMk1DNHpZekFzTWk0MExEQXVPU3d6TGpNc015NHlMRE11TXdvSll6QXVPQ3d3TERFdU15MHdMakVzTVM0NExUQXVOV3d3TGpFc01DNDJhREV1TVV3ME9TNHlMREl3TGpkTU5Ea3VNaXd5TUM0M2VpSXZQZ284Y0dGMGFDQmpiR0Z6Y3owaWMzUXlJaUJrUFNKTk5UWXVOeXd5TTJndE1TNHlkalV1TW1NdE1DNDJMREF1TkMweExqY3NNQzQyTFRJdU5Dd3dMalpqTFRBdU9Dd3dMVEV0TUM0MExURXRNUzR6ZGkwMExqWm9MVEV1TVhZMExqaGpNQ3d4TGpZc01DNDFMREl1TXl3eUxqRXNNaTR6Q2dsak1Td3dMREl1TVMwd0xqTXNNaTQyTFRBdU5td3dMakVzTUM0MmFERXVNVll5TTNvaUx6NEtQSEJoZEdnZ1kyeGhjM005SW5OME1TSWdaRDBpVFRreUxqY3NNVFV1TjJNd0xUQXVOeXd3TGpZdE1TNHpMREV1TWkweExqTmpNQzQyTERBc01TNHlMREF1Tml3eExqSXNNUzR6VXprMExqVXNNVGNzT1RNdU9Td3hOME01TXk0ekxERTJMamtzT1RJdU55d3hOaTR6TERreUxqY3NNVFV1TjNvaUx6NEtQQzl6ZG1jK0NnPT0pO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlcjt3aWR0aDoxMDFweDtoZWlnaHQ6MzNweDttYXJnaW4tdG9wOjlweH0jcmVzdWx0X2xvZ28gaW1ne2Rpc3BsYXk6bm9uZTt2aXNpYmlsaXR5OmhpZGRlbn0jcmVzdWx0X2xvZ28gYSBpbWd7ZGlzcGxheTpub25lO3Zpc2liaWxpdHk6aGlkZGVufS5jLWNvbnRhaW5lcntsaW5lLWhlaWdodDoxLjY1fSNyc3tiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50IWltcG9ydGFudH0uYy1ib3JkZXJ7LXdlYmtpdC1ib3gtc2hhZG93OjAgMnB4IDVweCAwIHJnYmEoMCwwLDAsLjE2KSwwIDJweCAxMHB4IDAgcmdiYSgwLDAsMCwuMTIpO2JveC1zaGFkb3c6MCAycHggNXB4IDAgcmdiYSgwLDAsMCwuMTYpLDAgMnB4IDEwcHggMCByZ2JhKDAsMCwwLC4xMik7Ym9yZGVyLXJhZGl1czoycHg7Ym9yZGVyOm5vbmU7cGFkZGluZzoyMHB4O3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfS5jLWJvcmRlcjpob3Zlcntib3gtc2hhZG93OjAgM3B4IDEwcHggcmdiYSgwLDAsMCwuMTYpLDAgM3B4IDEwcHggcmdiYSgwLDAsMCwuMjMpO3RyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30uYy10YWJzLW5hdntib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOjJweCAycHggMCAwO3RyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30uYy10YWJzLW5hdi1tb3ZldG9we21hcmdpbi1sZWZ0Oi0yMHB4O21hcmdpbi1yaWdodDotMjBweDttYXJnaW4tdG9wOi0yMHB4O3RyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30uYy10YWJzLW5hdi1zZWxlY3RlZHtib3JkZXItdG9wOm5vbmUhaW1wb3J0YW50O2JvcmRlci1sZWZ0Om5vbmUhaW1wb3J0YW50O2JvcmRlci1yaWdodDpub25lIWltcG9ydGFudDt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9LmMtdGFicy1uYXYtc2Vwe2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9I3BhZ2UgYXtoZWlnaHQ6MzRweDtib3JkZXItcmFkaXVzOjJweDtib3JkZXI6bm9uZSFpbXBvcnRhbnQ7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudDt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9I3BhZ2UgYTpob3Zlcnt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9I3BhZ2UgYSAucGM6aG92ZXJ7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfSNwYWdlIHN0cm9uZ3toZWlnaHQ6MzRweDtib3JkZXItcmFkaXVzOjJweDtwb3NpdGlvbjpyZWxhdGl2ZTt0b3A6LTJweDt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9I3BhZ2Ugc3Ryb25nIC5wY3tsaW5lLWhlaWdodDozNHB4O3RyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30uZmt7ZGlzcGxheTpub25lIWltcG9ydGFudH0ucGN7Ym9yZGVyOm5vbmUhaW1wb3J0YW50O2hlaWdodDozNXB4O3RyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30ucGM6aG92ZXJ7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfSNzX3RhYiBhe3dpZHRoOjU5cHg7bGluZS1oZWlnaHQ6NDRweH0jc190YWIgYnt3aWR0aDo1OXB4O2xpbmUtaGVpZ2h0OjQ0cHh9I3NfdGFie3BhZGRpbmctYm90dG9tOjhweDtwYWRkaW5nLXRvcDo4OXB4fS5jLWljb24tdGllYmF7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyfS50b2luZGV4e2Rpc3BsYXk6bm9uZX0ud3JhcHBlcl9uZXcgLnNfdGFiX2lubmVye3BhZGRpbmctdG9wOjEwcHh9LndyYXBwZXJfbmV3IC5zX2lwdF93cntiYWNrZ3JvdW5kOiNmZmZ9LndyYXBwZXJfbmV3LndyYXBwZXJfcyAjZm9ybSAuYmRzdWctbmV3e3dpZHRoOjkzJX0jdSAucGZ7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyO2ZvbnQtc2l6ZTowO3BhZGRpbmc6MTRweDtvcGFjaXR5Oi44Oy1tb3otdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstby10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTtwYWRkaW5nLXRvcDoxOHB4O3BhZGRpbmctYm90dG9tOjEwcHh9I3UgLnBmOmhvdmVye29wYWNpdHk6MTstbW96LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7LW8tdHJhbnNpdGlvbjphbGwgLjNzIGVhc2V9LndyYXBwZXJfbmV3ICN1PmEucGZ7Y29sb3I6dHJhbnNwYXJlbnQ7bWFyZ2luOjRweCAwIDAgMjRweH0ud3JhcHBlcl9uZXcgI3U+YS5wZjpob3Zlcntjb2xvcjp0cmFuc3BhcmVudH0ucGYgLmMtaWNvbntkaXNwbGF5Om5vbmUhaW1wb3J0YW50fS5jLWljb24tdHJpYW5nbGUtZG93bntkaXNwbGF5Om5vbmV9LmJkcGZtZW51e2JveC1zaGFkb3c6MCAycHggNXB4IDAgcmdiYSgwLDAsMCwuMTYpLDAgMnB4IDEwcHggMCByZ2JhKDAsMCwwLC4xMik7Ym9yZGVyLXJhZGl1czoycHghaW1wb3J0YW50O2JvcmRlcjpub25lO3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzO21hcmdpbi1sZWZ0Oi0xMHB4O21hcmdpbi10b3A6MzBweDt6LWluZGV4Ojg4ODghaW1wb3J0YW50fS5iZHBmbWVudSBhOmhvdmVye3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfS5iZG51YXJyb3d7ZGlzcGxheTpub25lIWltcG9ydGFudH0uc2V0cHJlZntib3JkZXItcmFkaXVzOjJweCAycHggMCAwO3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfS5zZXRwcmVmOmhvdmVye3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfSN1IC5sYntwYWRkaW5nOjIzcHg7Ym9yZGVyLXJhZGl1czo1MHB4O2ZvbnQtc2l6ZTowO3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjUwcHg7dG9wOjM4MDAlO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlcjtib3gtc2hhZG93OnJnYmEoMCwwLDAsLjE1Njg2MykgMCAzcHggMTBweCxyZ2JhKDAsMCwwLC4yMjc0NTEpIDAgM3B4IDEwcHg7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9I3UgLmxiOmhvdmVye3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfSN1IC5sYjphY3RpdmV7Ym94LXNoYWRvdzowIDEwcHggMzBweCByZ2JhKDAsMCwwLC4xOSksMCA2cHggMTBweCByZ2JhKDAsMCwwLC4yMyk7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9LnRhbmctZm9yZWdyb3VuZHtib3JkZXItcmFkaXVzOjJweDtib3gtc2hhZG93OjAgMTlweCA2MHB4IHJnYmEoMCwwLDAsLjMpLDAgMTVweCAyMHB4IHJnYmEoMCwwLDAsLjIyKX0jc191cGZ1bmNfbWVudXN7ZGlzcGxheTpub25lfSNiZ3tiYWNrZ3JvdW5kLWNvbG9yOiNmZmYhaW1wb3J0YW50O2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6M3B4O3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzO2JhY2tncm91bmQtcG9zaXRpb246MTAwJSFpbXBvcnRhbnQ7ei1pbmRleDotMTt3aWR0aDo2MDBweDtoZWlnaHQ6MzlweDtmb250LWZhbWlseTotYXBwbGUtc3lzdGVtLGhlbHZldGljYSBuZXVlLEhlbHZldGljYSxuaW1idXMgc2FucyBsLEFyaWFsLGxpYmVyYXRpb24gc2FucyxwaW5nZmFuZyBzYyxoaXJhZ2lubyBzYW5zIGdiLHNvdXJjZSBoYW4gc2FucyBjbixzb3VyY2UgaGFuIHNhbnMgc2MsbWljcm9zb2Z0IHlhaGVpLHdlbnF1YW55aSBtaWNybyBoZWksd2VucXVhbnlpIHplbiBoZWksc3QgaGVpdGksU2ltSGVpLHdlbnF1YW55aSB6ZW4gaGVpIHNoYXJwLHNhbnMtc2VyaWY7cGFkZGluZy10b3A6NXB4IWltcG9ydGFudH0jaGVhZF93cmFwcGVyIC5zX2lwdHtib3JkZXI6MCFpbXBvcnRhbnQ7aGVpZ2h0OjIwcHghaW1wb3J0YW50O2JvcmRlci1yYWRpdXM6MnB4O3dpZHRoOjU4NnB4IWltcG9ydGFudH0jaGVhZF93cmFwcGVyIC5ub2JnX3NfZm1faG92ZXJ7Ym9yZGVyOjAhaW1wb3J0YW50fSNoZWFkX3dyYXBwZXIgLm5vYmdfc19mbV9mb2N1c3tib3JkZXI6MCFpbXBvcnRhbnQ7Ym9yZGVyLXRvcDowIHNvbGlkICNmZmYhaW1wb3J0YW50O2JvcmRlci1ib3R0b206MCBzb2xpZCAjZmZmIWltcG9ydGFudDtib3JkZXItbGVmdDowIHNvbGlkICNmZmYhaW1wb3J0YW50O2JvcmRlci1yaWdodDoxcHggc29saWQgIzM4Zn0ucy10aXRsZS1pbWFnZXtib3JkZXI6bm9uZSFpbXBvcnRhbnQ7Ym9yZGVyLXRvcDowIHNvbGlkICNmZmYhaW1wb3J0YW50O2JvcmRlci1ib3R0b206MCBzb2xpZCAjZmZmIWltcG9ydGFudDtib3JkZXItbGVmdDowIHNvbGlkICNmZmYhaW1wb3J0YW50O2JvcmRlci1yaWdodDowIHNvbGlkICNmZmYhaW1wb3J0YW50fSNzX2xnX2ltZ3tkaXNwbGF5Om5vbmV9I2Zvcm17LXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb246LjJzO2FuaW1hdGlvbi1kdXJhdGlvbjouMnM7LXdlYmtpdC1hbmltYXRpb24tZmlsbC1tb2RlOmJvdGg7YW5pbWF0aW9uLWZpbGwtbW9kZTpib3RoO2FuaW1hdGlvbi1uYW1lOmZhZGVJblVwOy13ZWJraXQtYW5pbWF0aW9uLW5hbWU6ZmFkZUluVXA7YW5pbWF0aW9uLWRlbGF5Oi4zczstd2Via2l0LWFuaW1hdGlvbi1kZWxheTouM3N9Ym9keTpub3QoW25ld3NdKSAjaGVhZF93cmFwcGVyICNmb3JtLmZte21pbi13aWR0aDo1MCU7d2lkdGg6MTEwJX0ucy1wLXRvcHt0cmFuc2Zvcm06c2NhbGUoLjgpO2JvdHRvbTo5cHghaW1wb3J0YW50fS5tbmF2e2Rpc3BsYXk6bm9uZX0jdV9zcCAubW5hdntkaXNwbGF5Om5vbmV9I3UxIGEubGJ7cGFkZGluZzoyM3B4O2JvcmRlci1yYWRpdXM6NTAlO2ZvbnQtc2l6ZTowO3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjQ0cHg7dG9wOjEwNDAlO2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0S1BDRXRMU0JIWlc1bGNtRjBiM0k2SUVGa2IySmxJRWxzYkhWemRISmhkRzl5SURFNUxqSXVNU3dnVTFaSElFVjRjRzl5ZENCUWJIVm5MVWx1SUM0Z1UxWkhJRlpsY25OcGIyNDZJRFl1TURBZ1FuVnBiR1FnTUNrZ0lDMHRQZ284YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUl1V2J2dVd4Z2w4eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lLQ1NCMmFXVjNRbTk0UFNJd0lEQWdORFlnTkRZaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURRMklEUTJPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0NqeHpkSGxzWlNCMGVYQmxQU0owWlhoMEwyTnpjeUkrQ2drdWMzUXdlMlpwYkd3NkkwWkdSa1pHUmp0OUNqd3ZjM1I1YkdVK0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERBaUlHUTlJazB5TXl3eU0yTXlMamtzTUN3MUxqSXRNaTR6TERVdU1pMDFMakp6TFRJdU15MDFMakl0TlM0eUxUVXVNbk10TlM0eUxESXVNeTAxTGpJc05TNHlVekl3TGpFc01qTXNNak1zTWpONklFMHlNeXd5TlM0MkNnbGpMVE11TlN3d0xURXdMalFzTVM0M0xURXdMalFzTlM0eWRqSXVObWd5TUM0M2RpMHlMalpETXpNdU5Dd3lOeTR6TERJMkxqVXNNalV1Tml3eU15d3lOUzQyZWlJdlBnbzhMM04yWno0Syk7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyO2JveC1zaGFkb3c6cmdiYSgwLDAsMCwuMTU2ODYzKSAwIDNweCAxMHB4LHJnYmEoMCwwLDAsLjIyNzQ1MSkgMCAzcHggMTBweDt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwcztsaW5lLWhlaWdodDowO3otaW5kZXg6MTAwfSN1MSBhLmxiOmhvdmVye3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfSN1MSBhLmxiOmFjdGl2ZXtib3gtc2hhZG93OjAgMTBweCAzMHB4IHJnYmEoMCwwLDAsLjE5KSwwIDZweCAxMHB4IHJnYmEoMCwwLDAsLjIzKTt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30jdTEgYS5wZntiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7Zm9udC1zaXplOjA7cGFkZGluZzoxNHB4O29wYWNpdHk6Ljg7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlO3otaW5kZXg6MH0jdTEgYS5icml7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudDtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7Zm9udC1zaXplOjA7cGFkZGluZzoycHg7b3BhY2l0eTouODstbW96LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7LW8tdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7Ym9yZGVyOm5vbmU7bWFyZ2luLXRvcDoxMnB4fSN3cmFwcGVyIC5iZGJyaWltZ3RpdGxle3BhZGRpbmctdG9wOjIzcHh9I3dyYXBwZXIgLmJkYnJpLmJkYnJpaW1nIC5iZG1haW5saW5rIGF7Ym9yZGVyOm5vbmV9I3dyYXBwZXIgLmJkYnJpe3otaW5kZXg6Mn0jd3JhcHBlciAjdV9zcCAuc19icml7cGFkZGluZzo1cHg7Ym9yZGVyLXJhZGl1czo1MCU7Zm9udC1zaXplOjA7d2lkdGg6MzJweDtoZWlnaHQ6MzJweDtiYWNrZ3JvdW5kLWltYWdlOnVybChkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NE5DandoTFMwZ1IyVnVaWEpoZEc5eU9pQkJaRzlpWlNCSmJHeDFjM1J5WVhSdmNpQXhPUzR5TGpFc0lGTldSeUJGZUhCdmNuUWdVR3gxWnkxSmJpQXVJRk5XUnlCV1pYSnphVzl1T2lBMkxqQXdJRUoxYVd4a0lEQXBJQ0F0TFQ0TkNqeHpkbWNnZG1WeWMybHZiajBpTVM0eElpQnBaRDBpNVp1KzViR0NYekVpSUhodGJHNXpQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeUlnZUcxc2JuTTZlR3hwYm1zOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6RTVPVGt2ZUd4cGJtc2lJSGc5SWpCd2VDSWdlVDBpTUhCNElnMEtDU0IyYVdWM1FtOTRQU0l3SURBZ016SWdNeklpSUhOMGVXeGxQU0psYm1GaWJHVXRZbUZqYTJkeWIzVnVaRHB1WlhjZ01DQXdJRE15SURNeU95SWdlRzFzT25Od1lXTmxQU0p3Y21WelpYSjJaU0krRFFvOGMzUjViR1VnZEhsd1pUMGlkR1Y0ZEM5amMzTWlQZzBLQ1M1emREQjdabWxzYkRvalJrWkdSa1pHTzMwTkNqd3ZjM1I1YkdVK0RRbzhjR0YwYUNCamJHRnpjejBpYzNRd0lpQmtQU0pOTVRBc01UTm9NM1l0TTJndE0xWXhNM29nVFRFMExqVXNNakpvTTNZdE0yZ3RNME14TkM0MUxERTVMREUwTGpVc01qSXNNVFF1TlN3eU1ub2dUVEV3TERJeWFETjJMVE5vTFROV01qSjZJRTB4TUN3eE55NDFhRE4yTFROb0xUTldNVGN1TlhvTkNna2dUVEUwTGpVc01UY3VOV2d6ZGkwemFDMHpRekUwTGpVc01UUXVOU3d4TkM0MUxERTNMalVzTVRRdU5Td3hOeTQxZWlCTk1Ua3NNVEIyTTJnemRpMHpTREU1ZWlCTk1UUXVOU3d4TTJnemRpMHphQzB6UXpFMExqVXNNVEFzTVRRdU5Td3hNeXd4TkM0MUxERXplaUJOTVRrc01UY3VOV2d6ZGkwemFDMHpEUW9KVmpFM0xqVjZJRTB4T1N3eU1tZ3pkaTB6YUMwelZqSXllaUl2UGcwS1BDOXpkbWMrRFFvPSk7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyO2JveC1zaGFkb3c6cmdiYSgwLDAsMCwuMTU2ODYzKSAwIDNweCAxMHB4LHJnYmEoMCwwLDAsLjIyNzQ1MSkgMCAzcHggMTBweDt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwcztsaW5lLWhlaWdodDowO3otaW5kZXg6MTAwO21hcmdpbi1yaWdodDoyMnB4O21hcmdpbi10b3A6MXB4fSN1X3NwIC5zX2JkYnJpaW1ndGl0bGV7cGFkZGluZy10b3A6NzNweH0jc191c2Vyc2V0dGluZ190b3B7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyO2ZvbnQtc2l6ZTowO3BhZGRpbmc6MTRweDtvcGFjaXR5Oi44Oy1tb3otdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstby10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTttYXJnaW4tdG9wOjEycHg7bWFyZ2luLXJpZ2h0OjRweDt6LWluZGV4Oi0xMDB9I3NfdG9wX3dyYXB7ei1pbmRleDotMTA7Ym9yZGVyLWJvdHRvbTp1bnNldH0jdSAudG9pbmRleHtkaXNwbGF5Om5vbmUhaW1wb3J0YW50fSNzX3VzZXJuYW1lX3RvcHt0ZXh0LWRlY29yYXRpb246bm9uZTttYXJnaW4tdG9wOjI2cHg7bWFyZ2luLWxlZnQ6NXB4O2JvcmRlcjpub25lO3BhZGRpbmctbGVmdDoxMHB4O3BhZGRpbmctcmlnaHQ6MTBweDtib3JkZXItcmFkaXVzOjE2cHg7bWFyZ2luLXJpZ2h0Oi0zcHh9LnVzZXItbmFtZXt0ZXh0LWRlY29yYXRpb246bm9uZSFpbXBvcnRhbnR9Lm1lbnUtYXJyb3d7ZGlzcGxheTpub25lIWltcG9ydGFudH0uc191c2VyX25hbWVfbWVudXt0ZXh0LWFsaWduOmNlbnRlciFpbXBvcnRhbnR9LnMtdXNlci1zZXQtbWVudS5tZW51LXRvcHt3aWR0aDoxMDBweH0ucy11c2VyLXNldC1tZW51IGRpdntib3JkZXI6bm9uZSFpbXBvcnRhbnQ7Ym94LXNoYWRvdzpyZ2JhKDAsMCwwLC4xNTY4NjMpIDAgM3B4IDEwcHgscmdiYSgwLDAsMCwuMjI3NDUxKSAwIDNweCAxMHB4fS5zLXVzZXItc2V0LW1lbnV7cGFkZGluZy10b3A6MDttYXJnaW4tdG9wOjM2cHg7Ym9yZGVyLXJhZGl1czoycHghaW1wb3J0YW50fS5zLXVzZXItc2V0LW1lbnUgYXtwYWRkaW5nLWxlZnQ6MjVweDstbW96LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7LW8tdHJhbnNpdGlvbjphbGwgLjNzIGVhc2V9LnMtdXNlci1zZXQtbWVudSBhOmhvdmVyey1tb3otdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstby10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZX0jdXNlcnt0ZXh0LWRlY29yYXRpb246bm9uZSFpbXBvcnRhbnQ7bWFyZ2luLXRvcDozMHB4O21hcmdpbi1sZWZ0OjVweDtib3JkZXI6bm9uZTtwYWRkaW5nLWxlZnQ6MTBweDtwYWRkaW5nLXJpZ2h0OjEwcHg7Ym9yZGVyLXJhZGl1czoxNnB4O21hcmdpbi1yaWdodDotM3B4O2hlaWdodDoyM3B4O3BhZGRpbmctdG9wOjhweDstd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbjoxczthbmltYXRpb24tZHVyYXRpb246MXM7LXdlYmtpdC1hbmltYXRpb24tZmlsbC1tb2RlOmJvdGg7YW5pbWF0aW9uLWZpbGwtbW9kZTpib3RoO2FuaW1hdGlvbi1uYW1lOmJvdW5jZUluUmlnaHQ7LXdlYmtpdC1hbmltYXRpb24tbmFtZTpib3VuY2VJblJpZ2h0fS51c2VybWVudXtib3JkZXI6bm9uZSFpbXBvcnRhbnQ7Ym94LXNoYWRvdzpyZ2JhKDAsMCwwLC4xNTY4NjMpIDAgM3B4IDEwcHgscmdiYSgwLDAsMCwuMjI3NDUxKSAwIDNweCAxMHB4IWltcG9ydGFudDstd2Via2l0LWJveC1zaGFkb3c6cmdiYSgwLDAsMCwuMTU2ODYzKSAwIDNweCAxMHB4LHJnYmEoMCwwLDAsLjIyNzQ1MSkgMCAzcHggMTBweCFpbXBvcnRhbnQ7d2lkdGg6ODNweDtib3JkZXItcmFkaXVzOjJweCFpbXBvcnRhbnQ7dG9wOjM1cHghaW1wb3J0YW50O21hcmdpbjowIGF1dG99LnVzZXJuYW1lIGF7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlO2JvcmRlci1yYWRpdXM6MnB4fS51c2VybmFtZSBhOmhvdmVye2JhY2tncm91bmQ6IzM0NzZkMiFpbXBvcnRhbnQ7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlfS51c2VybmFtZSBhOmFjdGl2ZXtiYWNrZ3JvdW5kOiMzNDc2ZDIhaW1wb3J0YW50Oy1tb3otdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstby10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZX0jdXNlciAuYy1pY29ue2Rpc3BsYXk6bm9uZX0jaW1zZ3tiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7Zm9udC1zaXplOjA7cGFkZGluZzoxNHB4O29wYWNpdHk6Ljg7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlO3otaW5kZXg6MDtwYWRkaW5nLXRvcDoyNXB4O3BhZGRpbmctYm90dG9tOjIxcHh9I2ltc2c6aG92ZXJ7b3BhY2l0eToxfS5oZWFkX3dyYXBwZXIgI2Jkcy1tZXNzYWdlLXdyYXBwZXJ7dG9wOjY0cHh9LnMtbW9kLW1zZ3tib3gtc2hhZG93OnJnYmEoMCwwLDAsLjE1Njg2MykgMCAzcHggMTBweCxyZ2JhKDAsMCwwLC4yMjc0NTEpIDAgM3B4IDEwcHghaW1wb3J0YW50Oy13ZWJraXQtYm94LXNoYWRvdzpyZ2JhKDAsMCwwLC4xNTY4NjMpIDAgM3B4IDEwcHgscmdiYSgwLDAsMCwuMjI3NDUxKSAwIDNweCAxMHB4IWltcG9ydGFudDtib3JkZXItcmFkaXVzOjNweH0ubXNnLWJ0bntib3JkZXItcmFkaXVzOjJweDt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfS5tc2ctYnRuOmhvdmVye2JvcmRlci1yYWRpdXM6MnB4O2JveC1zaGFkb3c6MCAxcHggNnB4IHJnYmEoMCwwLDAsLjEyKSwwIDFweCA0cHggcmdiYSgwLDAsMCwuMTIpO3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9Lm1zZy1idG46YWN0aXZle2JvcmRlci1yYWRpdXM6MnB4O2JveC1zaGFkb3c6cmdiYSgwLDAsMCwuMTU2ODYzKSAwIDNweCAxMHB4LHJnYmEoMCwwLDAsLjIyNzQ1MSkgMCAzcHggMTBweCFpbXBvcnRhbnQ7LXdlYmtpdC1ib3gtc2hhZG93OnJnYmEoMCwwLDAsLjE1Njg2MykgMCAzcHggMTBweCxyZ2JhKDAsMCwwLC4yMjc0NTEpIDAgM3B4IDEwcHghaW1wb3J0YW50O3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9Lm5vLXVzZTpob3Zlcntib3gtc2hhZG93Om5vbmUhaW1wb3J0YW50fS50b3AtbG9nbyBpbWd7ZGlzcGxheTpub25lfS50b3AtbG9nb3tiYWNrZ3JvdW5kLWltYWdlOnVybChkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NEtQQ0V0TFNCSFpXNWxjbUYwYjNJNklFRmtiMkpsSUVsc2JIVnpkSEpoZEc5eUlERTVMakl1TVN3Z1UxWkhJRVY0Y0c5eWRDQlFiSFZuTFVsdUlDNGdVMVpISUZabGNuTnBiMjQ2SURZdU1EQWdRblZwYkdRZ01Da2dJQzB0UGdvOGMzWm5JSFpsY25OcGIyNDlJakV1TVNJZ2FXUTlJdVdidnVXeGdsOHhJaUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGh0Ykc1ek9uaHNhVzVyUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMM2hzYVc1cklpQjRQU0l3Y0hnaUlIazlJakJ3ZUNJS0NTQjJhV1YzUW05NFBTSXdJREFnTVRBeElETXpJaUJ6ZEhsc1pUMGlaVzVoWW14bExXSmhZMnRuY205MWJtUTZibVYzSURBZ01DQXhNREVnTXpNN0lpQjRiV3c2YzNCaFkyVTlJbkJ5WlhObGNuWmxJajRLUEhOMGVXeGxJSFI1Y0dVOUluUmxlSFF2WTNOeklqNEtDUzV6ZERCN1ptbHNiRG9qTkRnM09VSkVPMzBLQ1M1emRERjdabWxzYkRvalJFUTBORE0yTzMwS0NTNXpkREo3Wm1sc2JEb2pSa1pHUmtaR08zMEtQQzl6ZEhsc1pUNEtQSEJoZEdnZ1kyeGhjM005SW5OME1DSWdaRDBpVFRVd0xqUXNNVFV1TTJNdE15NDRMREF1TXkwMExESXVOaTAxTGpjc05DNDNZeTB4TGpnc01pNHlMVFV1TlN3MExqRXROaXcyTGpkakxUQXVOaXd6TGpNc01TNHpMRFV1TVN3ekxEVXVOMk14TGprc01DNDJMRFl1TWkwd0xqVXNPQzQwTFRBdU5XZ3dMaklLQ1dnd0xqSmpNaTR5TERBc05pNDBMREV1TVN3NExqUXNNQzQxWXpFdU9DMHdMallzTXk0MUxUTXVNaXd6TFRVdU4yTXRNQzQwTFRJdU1TMDBMalF0TkM0MUxUWXVNaTAyTGpkRE5UUXVNaXd4T0N3MU5DNHpMREUxTGpZc05UQXVOQ3d4TlM0emVpQk5NemNzTVRRdU9Bb0pZekFzTWk0MExERXVOaXcwTGpNc015NDBMRFF1TTJNeExqa3NNQ3d6TGpRdE1TNDVMRE11TkMwMExqTmpNQzB5TGpRdE1TNDJMVFF1TXkwekxqUXROQzR6VXpNM0xERXlMalVzTXpjc01UUXVPSG9nVFRRekxqa3NPQzQyWXpBc01pNDFMREV1TlN3MExqVXNNeTR6TERRdU5Rb0pZekV1T0N3d0xETXVNeTB5TGpFc015NHpMVFF1TlZNME9TdzBMakVzTkRjdU1TdzBMakZETkRVdU15dzBMRFF6TGprc05pdzBNeTQ1TERndU5ub2dUVFV5TGpJc09DNDFZekFzTWk0ekxERXVOQ3cwTGpNc015NHlMRFF1TTNNekxqSXRNUzQ1TERNdU1pMDBMak56TFRFdU5DMDBMak10TXk0eUxUUXVNd29KVXpVeUxqSXNOaTR5TERVeUxqSXNPQzQxZWlCTk5UY3VOU3d4TlM0NVl6QXNNaTR6TERFdU5TdzBMak1zTXk0ekxEUXVNMk14TGpnc01Dd3pMak10TVM0NUxETXVNeTAwTGpOekxURXVOUzAwTGpNdE15NHpMVFF1TTBNMU9DNDVMREV4TGpZc05UY3VOU3d4TXk0MkxEVTNMalVzTVRVdU9Yb2lMejRLUEhCaGRHZ2dZMnhoYzNNOUluTjBNU0lnWkQwaVRUUXNNekF1TkhZdE5TNHhhRFl1TkdNeExqWXNNQ3d4TGpZc01DNHpMREV1Tml3eWRqRXVOR013TERFdU5pMHlMak1zTVM0NExUTXVPU3d4TGpoTU5Dd3pNQzQwVERRc016QXVOSG9nVFRRc01qTjJMVFF1T0dnMExqRUtDV014TGpZc01Dd3pMamtzTUN3ekxqa3NNaTR4ZGpBdU1XTXdMREV1TkMwd0xqVXNNaTQyTFRFdU9Dd3lMalpETVRBdU15d3lNeXcwTERJekxEUXNNak42SUUweExqY3NNVFoyTVRZdU0yZzJMalJqTXl3d0xEWXVNaXd3TERZdU1pMHpMaloyTFRFdU1XTXdMVEV1Tmkwd0xqRXRNaTQzTFRFdU1TMHpMalVLQ1dNeExUQXVPQ3d4TGpFdE1pNHpMREV1TVMwekxqWnNNQ3d3WXpBdE5DNDFMVE11TWkwMExqVXROaTR5TFRRdU5Vd3hMamNzTVRaTU1TNDNMREUyZWlJdlBnbzhjR0YwYUNCamJHRnpjejBpYzNReElpQmtQU0pOTWpVc01qZ3VPV010TVM0eExERXVNUzB6TGpNc01TNHpMVE11TlN3eExqTmpMVEV1TXl3d0xUSXVOeTB3TGpVdE1pNDNMVEl1TVdNd0xURXVOQ3d3TGpVdE1pNHpMREl1TVMweUxqTmpNUzR6TERBc01pNDRMREF1TVN3MExqRXNNQzQyVmpJNExqbDZDZ2tnVFRJeExqUXNNekl1TTJNd0xqUXNNQ3d5TGpNdE1DNHhMRE11Tnkwd0xqbHNNQzR5TERBdU4yZ3lMakYyTFRndU9XTXdMVE11TmkweUxqTXROUzAxTGpjdE5XTXRNUzQ0TERBdE5DNHpMREF1TnkwMExqY3NNQzQ1YkRBdU5Dd3lMak5qTVM0MkxUQXVOaXd6TFRBdU5pdzBMakl0TUM0MkNnbGpNUzQ0TERBc015NHpMREF1Tml3ekxqTXNNaTQyVmpJMFl5MHhMVEF1TkMweUxqUXRNQzQyTFRRdU1TMHdMalpqTFRNc01DMDBMalVzTVM0MkxUUXVOU3cwTGpkRE1UWXVOQ3d6TVM0NExERTVMallzTXpJdU15d3lNUzQwTERNeUxqTjZJaTgrQ2p4d1lYUm9JR05zWVhOelBTSnpkREVpSUdROUlrMHpNQzR5TERFMkxqRmpNQ3d3TGpZc01DNDJMREV1TWl3eExqTXNNUzR5WXpBdU9Dd3dMREV1TXkwd0xqWXNNUzR6TFRFdU1tTXdMVEF1Tnkwd0xqWXRNUzR6TFRFdU15MHhMak5ETXpBdU9Dd3hOQzQ0TERNd0xqSXNNVFV1TXl3ek1DNHlMREUyTGpGNkNna2dUVE13TGpNc016SXVNV2d5TGpSV01UZ3VOV2d0TWk0MFZqTXlMakY2SWk4K0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERFaUlHUTlJazAzTVM0eUxESXlMakZvT0M0MFl6QXVOQ3d3TGpFc01DNDJMREF1TXl3d0xqWXNNQzQzZGpJdU5tZ3RPUzQzZGkweUxqWkROekF1Tml3eU1pNDBMRGN3TGpnc01qSXVNaXczTVM0eUxESXlMakY2SUUwM01TNHlMRE13TGpVS0NXTXRNQzQwTERBdE1DNDJMVEF1TXkwd0xqY3RNQzQ0ZGkweUxqWm9PUzQzZGpJdU5tTXdMREF1TkMwd0xqSXNNQzQzTFRBdU5pd3dMamRJTnpFdU1ub2dUVGN6TGpZc01UaGpMVEF1TVN3d0xqUXRNQzR4TERBdU9TMHdMalFzTVM0M1l5MHdMakVzTUM0ekxUQXVNU3d3TGpVdE1DNHhMREF1TndvSmFDMHlMalpqTFRFdU15d3dMakV0TVM0NUxEQXVPQzB5TERKMk55NDVZekF1TVN3eExqRXNNQzQ0TERFdU9Dd3lMREV1T1dneE1HTXhMakl0TUM0eExERXVPQzB3TGpjc01TNDVMVEV1T0hZdE55NDVZeTB3TGpFdE1TNHpMVEF1TnkweExqa3RNUzQ1TFRJdU1XZ3ROUW9KWXpBdU1TMHdMak1zTUM0eExUQXVPQ3d3TGpNdE1TNDBZekF1TVMwd0xqUXNNQzR4TFRBdU55d3dMakV0TUM0NWFEY3VNbll0TVM0NFNEWTNMalJXTVRoTU56TXVOaXd4T0V3M015NDJMREU0ZWlJdlBnbzhjR0YwYUNCamJHRnpjejBpYzNReElpQmtQU0pOT1RNdU55d3lNaTQzWXkwd0xqUXRNQzR4TFRBdU5TMHdMakl0TUM0MUxUQXVOWFl0TUM0MmFETXVNbll3TGpaakxUQXVNU3d3TGpNdE1DNHlMREF1TkMwd0xqVXNNQzQxU0RrekxqZDZJRTA1Tmk0MkxESTBMakVLQ1dNeExqRXRNQzR4TERFdU5pMHdMalVzTVM0MkxURXVOSFl0TVdneUxqTjJMVEV1TldndE1pNHpkaTB4TGpGb0xURXVPSFl4TGpGb0xUTXVNbll0TVM0eGFDMHhMamgyTVM0eGFDMHlMak4yTVM0MWFESXVNM1l4WXpBdU1Td3dMamtzTUM0MkxERXVOQ3d4TGpZc01TNDBTRGsyTGpaNkNna2dUVGswTGpnc016QXVOR014TGpZc01DNDRMRE11TkN3eExqTXNOUzQwTERFdU9Hd3dMamt0TVM0M1l5MHhMalF0TUM0eUxUSXVPUzB3TGpZdE5DNDBMVEV1TVdNeExqRXRNQzQ0TERJdE1TNDJMREl1TnkweUxqVmpNQzR6TFRBdU5Dd3dMalF0TUM0NUxEQXVNaTB4TGpNS0NXTXRNQzR6TFRBdU5pMHdMamd0TUM0NUxURXVOQzB3TGpsb0xUbDJNUzQxYURjdU4yTXdMaklzTUN3d0xqUXNNQzR4TERBdU5Dd3dMakZ6TUN3d0xqRXRNQzR4TERBdU0yTXRNQzQyTERBdU5pMHhMalFzTVM0ekxUSXVNeXd4TGpoakxURXVNaTB3TGpjdE1pNHhMVEV1TXkweUxqUXRNUzQ0YUMweUxqSUtDV013TGprc01Td3hMamdzTVM0NUxESXVPU3d5TGpkakxURXVOaXd3TGpZdE15NHpMREV1TVMwMExqa3NNUzR6YkRBdU9Td3hMalpET1RFdU15d3pNUzQ0TERrekxqSXNNekV1TVN3NU5DNDRMRE13TGpSNklFMDRPQzR6TERJMUxqSjJMVFpqTUM0eExUQXVOaXd3TGpNdE1DNDVMREF1T0Mwd0xqa0tDV2d4TVM0NGRpMHhMalpJT1RWakxUQXVNUzB3TGpFdE1pNHlMVEF1TVMweUxqSXNNR2d0TkM0M1l5MHhMakVzTUM0eExURXVOeXd3TGprdE1TNDRMREl1TWxZeU5XTXdMakVzTWk0eExUQXVOQ3cwTGpRdE1TNHhMRFl1TjJ3eExqa3NNQzQyQ2dsRE9EY3VPU3d5T1M0NUxEZzRMak1zTWpjdU5pdzRPQzR6TERJMUxqSjZJaTgrQ2p4d1lYUm9JR05zWVhOelBTSnpkRElpSUdROUlrMDBOaTR6TERJMExqSmpNQzQyTERBc01TNHlMREF1TVN3eExqY3NNQzQwZGpNdU5HTXdMREF1TXkwd0xqWXNNUzB4TGprc01XTXRNUzQxTERBdE1TNDRMVEF1TmkweExqZ3RNaTR4ZGkwd0xqWUtDVU0wTkM0eUxESTBMamdzTkRRdU55d3lOQzR5TERRMkxqTXNNalF1TW5vZ1RUUTVMaklzTWpBdU4wZzBPSFl5TGpWRE5EY3VOaXd5TXk0eExEUTNMREl6TERRMkxqTXNNak5qTFRJdU55d3dMVE11TXl3eExUTXVNeXd6TGpWMk1DNHpZekFzTWk0MExEQXVPU3d6TGpNc015NHlMRE11TXdvSll6QXVPQ3d3TERFdU15MHdMakVzTVM0NExUQXVOV3d3TGpFc01DNDJhREV1TVV3ME9TNHlMREl3TGpkTU5Ea3VNaXd5TUM0M2VpSXZQZ284Y0dGMGFDQmpiR0Z6Y3owaWMzUXlJaUJrUFNKTk5UWXVOeXd5TTJndE1TNHlkalV1TW1NdE1DNDJMREF1TkMweExqY3NNQzQyTFRJdU5Dd3dMalpqTFRBdU9Dd3dMVEV0TUM0MExURXRNUzR6ZGkwMExqWm9MVEV1TVhZMExqaGpNQ3d4TGpZc01DNDFMREl1TXl3eUxqRXNNaTR6Q2dsak1Td3dMREl1TVMwd0xqTXNNaTQyTFRBdU5td3dMakVzTUM0MmFERXVNVll5TTNvaUx6NEtQSEJoZEdnZ1kyeGhjM005SW5OME1TSWdaRDBpVFRreUxqY3NNVFV1TjJNd0xUQXVOeXd3TGpZdE1TNHpMREV1TWkweExqTmpNQzQyTERBc01TNHlMREF1Tml3eExqSXNNUzR6VXprMExqVXNNVGNzT1RNdU9Td3hOME01TXk0ekxERTJMamtzT1RJdU55d3hOaTR6TERreUxqY3NNVFV1TjNvaUx6NEtQQzl6ZG1jK0NnPT0pO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlcjtoZWlnaHQ6MTAwcHg7d2lkdGg6MjAwcHh9I3Vfc3AgLnNfYnJpe2JvcmRlcjowIWltcG9ydGFudH0ucGFzcy10ZXh0LWlucHV0e2JhY2tncm91bmQtaW1hZ2U6bm9uZSFpbXBvcnRhbnR9LnBhc3MtdGV4dC1pbnB1dC1mb2N1c3tiYWNrZ3JvdW5kLWltYWdlOm5vbmUhaW1wb3J0YW50fSNwYXNzcG9ydC1sb2dpbi1wb3B7Zm9udC1mYW1pbHk6LWFwcGxlLXN5c3RlbSxoZWx2ZXRpY2EgbmV1ZSxIZWx2ZXRpY2EsbmltYnVzIHNhbnMgbCxBcmlhbCxsaWJlcmF0aW9uIHNhbnMscGluZ2Zhbmcgc2MsaGlyYWdpbm8gc2FucyBnYixzb3VyY2UgaGFuIHNhbnMgY24sc291cmNlIGhhbiBzYW5zIHNjLG1pY3Jvc29mdCB5YWhlaSx3ZW5xdWFueWkgbWljcm8gaGVpLHdlbnF1YW55aSB6ZW4gaGVpLHN0IGhlaXRpLFNpbUhlaSx3ZW5xdWFueWkgemVuIGhlaSBzaGFycCxzYW5zLXNlcmlmO2JvcmRlci1yYWRpdXM6MnB4fSNUQU5HUkFNX19QU1BfMl9fdGl0bGVUZXh0e2ZvbnQtZmFtaWx5OkhlbHZldGljYSxtaWNyb3NvZnQgeWFoZWkgdWkgbGlnaHR9LnBhc3MtZmd0cHdke2ZvbnQtZmFtaWx5OkhlbHZldGljYSxtaWNyb3NvZnQgeWFoZWkgdWkhaW1wb3J0YW50fS5wYXNzLXNtcy1idG57Zm9udC1mYW1pbHk6SGVsdmV0aWNhLG1pY3Jvc29mdCB5YWhlaSB1aSFpbXBvcnRhbnR9LnBhc3MtcmVnbGlua3tmb250LWZhbWlseTpIZWx2ZXRpY2EsbWljcm9zb2Z0IHlhaGVpIHVpIWltcG9ydGFudH0udGFuZy1mb3JlZ3JvdW5ke2JvcmRlci1yYWRpdXM6MnB4IWltcG9ydGFudDtib3JkZXI6MCFpbXBvcnRhbnR9LnRhbmctdGl0bGV7Ym9yZGVyLXJhZGl1czoycHggMnB4IDAgMCFpbXBvcnRhbnR9LnRhbmctcGFzcy1wb3AtbG9naW4gZGl2LnRhbmctdGl0bGV7Ym9yZGVyLXJhZGl1czoycHggMnB4IDAgMCFpbXBvcnRhbnR9LnBhc3MtY2hlY2tib3gtaW5wdXR7d2lkdGg6MTdweDtoZWlnaHQ6MTdweDtib3JkZXI6I2UwZTBlMCAzcHggc29saWQhaW1wb3J0YW50O2JhY2tncm91bmQtY29sb3I6I2ZmZiFpbXBvcnRhbnQ7Ym94LXNoYWRvdzpub25lfS50YW5nLXBhc3MtcG9wLWxvZ2luLWNvbG9yLWJsdWUgLnBhc3MtYnV0dG9uOmZvY3Vze2JveC1zaGFkb3c6cmdiYSgwLDAsMCwuMTU2ODYzKSAwIDNweCAxMHB4LHJnYmEoMCwwLDAsLjIyNzQ1MSkgMCAzcHggMTBweCFpbXBvcnRhbnQ7LXdlYmtpdC1ib3gtc2hhZG93OnJnYmEoMCwwLDAsLjE1Njg2MykgMCAzcHggMTBweCxyZ2JhKDAsMCwwLC4yMjc0NTEpIDAgM3B4IDEwcHghaW1wb3J0YW50fS5ycmVjb20tYnRuLXBhcmVudHtkaXNwbGF5Om5vbmUhaW1wb3J0YW50fS5zLXAtdG9we2JvdHRvbTotOHB4IWltcG9ydGFudH1pbnB1dFt0eXBlPXRleHRdOmZvY3Vze2JvcmRlcjpub25lIWltcG9ydGFudDtib3JkZXItdG9wOjAgc29saWQgI2ZmZiFpbXBvcnRhbnQ7Ym9yZGVyLWJvdHRvbTowIHNvbGlkICNmZmYhaW1wb3J0YW50O2JvcmRlci1sZWZ0OjAgc29saWQgI2ZmZiFpbXBvcnRhbnQ7Ym9yZGVyLXJpZ2h0OjAgc29saWQgI2ZmZiFpbXBvcnRhbnR9YVtzb2Z0X2lkXXtkaXNwbGF5Om5vbmV9Lm9wLXNvZnQtYnRuYm94IC5jLWdhcC1sZWZ0LXNtYWxse21hcmdpbi1sZWZ0OjAhaW1wb3J0YW50O2NvbG9yOiNmZmY7YmFja2dyb3VuZC1jb2xvcjojMzQ3NmQyO3BhZGRpbmc6N3B4IDE1cHg7Ym9yZGVyLXJhZGl1czoycHg7Zm9udC1zaXplOjE0cHg7dHJhbnNpdGlvbjphbGwgLjNzIGVhc2V9Lm9wLXNvZnQtYnRuYm94IC5jLWdhcC1sZWZ0LXNtYWxsOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzcwOThkMDt0cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTtib3gtc2hhZG93OjAgMnB4IDVweCAwIHJnYmEoMCwwLDAsLjE2KSwwIDJweCAxMHB4IDAgcmdiYSgwLDAsMCwuMTIpfS5zb3V0dS1pbnB1dC1pbWFnZXt0b3A6NnB4O2xlZnQ6NXB4fSNrd3tiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50fS5zLXNraW4taGFzYmcgI2t3e2JveC1zaGFkb3c6MCAwIDAgcmdiYSgwLDAsMCwuMil9LnMtc2tpbi1oYXNiZyAuYnRuX3dye3dpZHRoOjM1cHh9I3NfdXNlcnNldHRpbmdfdG9we21hcmdpbi10b3A6LTdweH0jc191c2VybmFtZV90b3B7bWFyZ2luLXRvcDo3cHh9I3Vfc3B7cGFkZGluZy10b3A6MTZweH0uaXB0X3JlY3tiYWNrZ3JvdW5kOjAgMDtiYWNrZ3JvdW5kLWltYWdlOm5vbmV9LmlwdF9yZWM6aG92ZXJ7YmFja2dyb3VuZDowIDA7YmFja2dyb3VuZC1pbWFnZTpub25lfS5pcHRfcmVjOmFmdGVye2Rpc3BsYXk6bm9uZTttYXJnaW4tdG9wOjUwcHh9LmJkcGZtZW51LC51c2VybWVudXtib3JkZXI6bm9uZTtib3gtc2hhZG93Om5vbmU7LXdlYmtpdC1ib3gtc2hhZG93Om5vbmU7LW1vei1ib3gtc2hhZG93Om5vbmU7LW8tYm94LXNoYWRvdzpub25lfS5xcmNvZGVDb257dmlzaWJpbGl0eTpoaWRkZW59I2hlYWQgLmhlYWRCbG9ja3ttYXJnaW46MTJweCAwIDZweCAxMjFweH1he2NvbG9yOiMzNDc2ZDJ9aDMgYTpob3Zlcntib3JkZXItYm90dG9tOiMzNDc2ZDIgMS4ycHggc29saWR9LmMtc2hvd3VybHtjb2xvcjojNGNhZjUwfS5vcC1zZS1saXN0ZW4tcmVjb21tZW5kOmhvdmVye2JvcmRlci1ib3R0b206IzM0NzZkMiAxLjJweCBzb2xpZH0uYy1nYXAtYm90dG9tLXNtYWxsIGE6aG92ZXJ7Ym9yZGVyLWJvdHRvbTojMzQ3NmQyIDEuMnB4IHNvbGlkfS5jLXJvdyBhOmhvdmVye2JvcmRlci1ib3R0b206IzM0NzZkMiAxLjJweCBzb2xpZH0jcnMgYTpob3Zlcntib3JkZXItYm90dG9tOiMzNDc2ZDIgMS4ycHggc29saWR9LmhpbnRfdG9wcnFfdGlwc19pdGVtcyBhOmhvdmVye2JvcmRlci1ib3R0b206IzM0NzZkMiAxLjJweCBzb2xpZH0uYzpob3Zlcntib3JkZXItYm90dG9tOiMzNDc2ZDIgMS4ycHggc29saWR9ZW17Y29sb3I6I2VhNDMzNX0ub3AtdmlkZW8tdmFzdC11bCBsaSBhe21hcmdpbi1ib3R0b206dW5zZXR9Ym9keXtiYWNrZ3JvdW5kLWNvbG9yOiNmN2Y3Zjd9I2Zvcm0gLnNfYnRue2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnR9I3dyYXBwZXIgI2hlYWR7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDI0OCwyNDgsMjQ4LC40KTtib3JkZXItYm90dG9tOm5vbmU7YmFja2Ryb3AtZmlsdGVyOmJsdXIoMTBweCl9LmMtdGFicy1uYXZ7YmFja2dyb3VuZC1jb2xvcjojZWVlfS5jLXRhYnMtbmF2LXNlbGVjdGVke2JvcmRlci1ib3R0b206I2Y0NDMzNiAycHggc29saWQhaW1wb3J0YW50O2JhY2tncm91bmQtY29sb3I6IzIxOTZmMyFpbXBvcnRhbnQ7Y29sb3I6I2ZmZiFpbXBvcnRhbnR9I3BhZ2UgYXtiYWNrZ3JvdW5kOiNmZmY7Y29sb3I6IzQyNDI0Mn0jcGFnZSBhOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2UwZTBlMCFpbXBvcnRhbnR9I3BhZ2UgYSAucGM6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZTBlMGUwfSNwYWdlIHN0cm9uZ3tiYWNrZ3JvdW5kLWNvbG9yOiM0Mjg1ZjQhaW1wb3J0YW50O2NvbG9yOiNmZmZ9I3BhZ2Ugc3Ryb25nIC5wY3tiYWNrZ3JvdW5kLWNvbG9yOiM0Mjg1ZjQhaW1wb3J0YW50fS5wYzpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNlMGUwZTB9I3NfdGFiIGJ7Ym9yZGVyLWJvdHRvbTozcHggIzM0NzZkMiBzb2xpZDtjb2xvcjojMzQ3NmQyfSNzX3RhYntib3JkZXItYm90dG9tOiNlMGUwZTAgMXB4IHNvbGlkfS5iZHBmbWVudSBhOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzM0NzZkMiFpbXBvcnRhbnR9LnNldHByZWY6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojMzQ3NmQyIWltcG9ydGFudH0jdSAubGJ7YmFja2dyb3VuZC1jb2xvcjojMzQ3NmQyfSN1IC5sYjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiM2MThjYzd9I3UgLmxiOmFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOiM3ZGEwZDB9I2Jne2JhY2tncm91bmQtY29sb3I6I2ZmZiFpbXBvcnRhbnQ7YmFja2dyb3VuZDojZmZmfSN1MSBhLmxie2JhY2tncm91bmQtY29sb3I6IzM0NzZkMn0jdTEgYS5sYjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiM2MThjYzd9I3UxIGEubGI6YWN0aXZle2JhY2tncm91bmQtY29sb3I6IzdkYTBkMH0jdV9zcCAuc19icml7YmFja2dyb3VuZC1jb2xvcjojZjQ0MzM2fSNzX3VzZXJuYW1lX3RvcHtiYWNrZ3JvdW5kLWNvbG9yOiNlMGUwZTB9LnMtdXNlci1zZXQtbWVudSBhOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzM0NzZkMiFpbXBvcnRhbnR9I3VzZXJ7YmFja2dyb3VuZC1jb2xvcjojZTBlMGUwfS5tc2ctc2V0dGluZy1idG57YmFja2dyb3VuZC1jb2xvcjojMzQ3NmQyIWltcG9ydGFudH0ubm8tdXNle2JhY2tncm91bmQtY29sb3I6I2U1ZTVlNSFpbXBvcnRhbnR9LnBhc3MtdGV4dC1pbnB1dHtib3JkZXItYm90dG9tOiNlMGUwZTAgMnB4IHNvbGlkIWltcG9ydGFudDtib3JkZXItbGVmdDojZmZmIDAgc29saWQhaW1wb3J0YW50O2JvcmRlci1yaWdodDojZmZmIDAgc29saWQhaW1wb3J0YW50O2JvcmRlci10b3A6I2ZmZiAwIHNvbGlkIWltcG9ydGFudH0ucGFzcy10ZXh0LWlucHV0LWZvY3Vze2JvcmRlci1ib3R0b206IzM0NzZkMiAycHggc29saWQhaW1wb3J0YW50O2JvcmRlci1sZWZ0OiNmZmYgMCBzb2xpZCFpbXBvcnRhbnQ7Ym9yZGVyLXJpZ2h0OiNmZmYgMCBzb2xpZCFpbXBvcnRhbnQ7Ym9yZGVyLXRvcDojZmZmIDAgc29saWQhaW1wb3J0YW50fS50YW5nLXBhc3MtcG9wLWxvZ2luLWNvbG9yLWJsdWUgLnBhc3MtYnV0dG9ue2JhY2tncm91bmQtY29sb3I6IzM0NzZkMn0udGFuZy1wYXNzLXBvcC1sb2dpbi1jb2xvci1ibHVlIC5wYXNzLWJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiM2MThjYzd9I2xne21hcmdpbi1sZWZ0Oi0zcmVtO2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0TkNqd2hMUzBnUjJWdVpYSmhkRzl5T2lCQlpHOWlaU0JKYkd4MWMzUnlZWFJ2Y2lBeE9TNHlMakVzSUZOV1J5QkZlSEJ2Y25RZ1VHeDFaeTFKYmlBdUlGTldSeUJXWlhKemFXOXVPaUEyTGpBd0lFSjFhV3hrSURBcElDQXRMVDROQ2p4emRtY2dkbVZ5YzJsdmJqMGlNUzR4SWlCcFpEMGk1YkdDWHpFaUlIaHRiRzV6UFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eU1EQXdMM04yWnlJZ2VHMXNibk02ZUd4cGJtczlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MekU1T1RrdmVHeHBibXNpSUhnOUlqQndlQ0lnZVQwaU1IQjRJZzBLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNalU1SURFeE5pSWdjM1I1YkdVOUltVnVZV0pzWlMxaVlXTnJaM0p2ZFc1a09tNWxkeUF3SURBZ01qVTVJREV4TmpzaUlIaHRiRHB6Y0dGalpUMGljSEpsYzJWeWRtVWlQZzBLUEhOMGVXeGxJSFI1Y0dVOUluUmxlSFF2WTNOeklqNE5DZ2t1YzNRd2UyWnBiR3c2SXpReU9EVkdORHQ5RFFvSkxuTjBNWHRtYVd4c09pTkZRVFF6TXpVN2ZRMEtDUzV6ZERKN1ptbHNiRG9qUmtaR1JrWkdPMzBOQ2p3dmMzUjViR1UrRFFvOGNHRjBhQ0JqYkdGemN6MGljM1F3SWlCa1BTSk5NVEk0TGpJc056ZGpMVFV1TkN3d0xqUXROUzQyTERNdU55MDRMakVzTmk0M1l5MHlMalVzTXk0eExUY3VOeXcxTGpndE9DNDBMRGt1TldNdE1DNDRMRFF1Tnl3eExqZ3NOeTR5TERRdU15dzRZekl1Tnl3d0xqa3NPQzQ0TFRBdU55d3hNUzQ1TFRBdU53MEtDV2d3TGpOb01DNHpZek11TVN3d0xEa3VNU3d4TGpZc01URXVPU3d3TGpkak1pNDFMVEF1T1N3MExqa3ROQzQxTERRdU15MDRZeTB3TGpVdE15MDJMakl0Tmk0MExUZ3VOeTA1TGpWRE1UTXpMallzT0RBdU55d3hNek11Tnl3M055NDBMREV5T0M0eUxEYzNlaUJOTVRBNUxqTXNOell1TXcwS0NXTXdMRE11TkN3eUxqSXNOaTR4TERRdU9DdzJMakZqTWk0M0xEQXNOQzQ0TFRJdU55dzBMamd0Tmk0eGN5MHlMakl0Tmk0eExUUXVPQzAyTGpGVE1UQTVMak1zTnpNc01UQTVMak1zTnpZdU0zb2dUVEV4T1N3Mk55NDFZekFzTXk0MUxESXVNU3cyTGpRc05DNDJMRFl1TkEwS0NXTXlMallzTUN3MExqY3RNaTQ1TERRdU55MDJMalJ6TFRJdU1TMDJMalF0TkM0M0xUWXVORU14TWpFc05qRXNNVEU1TERZekxqa3NNVEU1TERZM0xqVjZJRTB4TXpBdU55dzJOeTQwWXpBc015NHpMRElzTml3MExqVXNObk0wTGpVdE1pNDNMRFF1TlMwMll6QXRNeTR6TFRJdE5pMDBMalV0TmcwS0NWTXhNekF1Tnl3Mk5DNHhMREV6TUM0M0xEWTNMalI2SUUweE16Z3VNaXczTnk0NFl6QXNNeTR6TERJdU1TdzJMRFF1Tml3Mll6SXVOaXd3TERRdU55MHlMamNzTkM0M0xUWmpNQzB6TGpNdE1pNHhMVFl0TkM0M0xUWkRNVFF3TGpJc056RXVPQ3d4TXpndU1pdzNOQzQxTERFek9DNHlMRGMzTGpoNklnMEtDUzgrRFFvOGNHRjBhQ0JqYkdGemN6MGljM1F4SWlCa1BTSk5Oakl1T0N3NU9DNHlWamt4YURsak1pNHlMREFzTWk0ekxEQXVOQ3d5TGpNc01pNDRkakpqTUN3eUxqTXRNeTR5TERJdU5TMDFMalVzTWk0MWFDMDFMamhXT1RndU1ub2dUVFl5TGpnc09EY3VPRlk0TVdnMUxqZ05DZ2xqTWk0ekxEQXNOUzQxTERBc05TNDFMRE4yTUM0eFl6QXNNaTB3TGpjc015NDNMVEl1TlN3ekxqZEROekV1Tml3NE55NDRMRFl5TGpnc09EY3VPQ3cyTWk0NExEZzNMamg2SUUwMU9TNDFMRGMzTGpsMk1qTm9PUzR4WXpRdU15d3dMRGd1Tnl3d0xEZ3VOeTAxTGpGMkxURXVOUTBLQ1dNd0xUSXVNeTB3TGpJdE15NDRMVEV1TlMwMExqbGpNUzQwTFRFdU1Td3hMalV0TXk0eUxERXVOUzAxTGpGc01Dd3dZekF0Tmk0ekxUUXVOUzAyTGpNdE9DNDNMVFl1TTB3MU9TNDFMRGMzTGpsTU5Ua3VOU3czTnk0NWVpSXZQZzBLUEhCaGRHZ2dZMnhoYzNNOUluTjBNU0lnWkQwaVRUa3lMalFzT1RZdU1XTXRNUzQxTERFdU5pMDBMallzTVM0NExUUXVPU3d4TGpoakxURXVPU3d3TFRNdU9DMHdMamN0TXk0NExUSXVPV013TFRJc01DNDNMVE11TXl3eUxqa3RNeTR6WXpFdU9Dd3dMRFFzTUM0eUxEVXVPQ3d3TGpoV09UWXVNWG9OQ2drZ1RUZzNMak1zTVRBd0xqbGpNQzQxTERBc015NHpMVEF1TWl3MUxqSXRNUzR6YkRBdU15d3hhREl1T1ZZNE9HTXdMVFV1TVMwekxqSXROeTR4TFRndE55NHhZeTB5TGpVc01DMDJMakVzTVMwMkxqWXNNUzR5YkRBdU5pd3pMakpqTWk0eUxUQXVPQ3cwTGpJdE1DNDVMRFV1T1Mwd0xqa05DZ2xqTWk0MkxEQXNOQzQyTERBdU9TdzBMallzTXk0M2RqRXVNV010TVM0MExUQXVOUzB6TGpRdE1DNDVMVFV1T0Mwd0xqbGpMVFF1TWl3d0xUWXVNeXd5TGpNdE5pNHpMRFl1TmtNNE1DNHpMREV3TUM0ekxEZzBMamNzTVRBd0xqa3NPRGN1TXl3eE1EQXVPWG9pTHo0TkNqeHdZWFJvSUdOc1lYTnpQU0p6ZERFaUlHUTlJazA1T1M0M0xEYzRMakZqTUN3d0xqa3NNQzQ1TERFdU55d3hMamdzTVM0M1l6RXVNU3d3TERFdU9TMHdMamdzTVM0NUxURXVOMk13TFRFdE1DNDRMVEV1T0MweExqa3RNUzQ0UXpFd01DNDJMRGMyTGpNc09Ua3VOeXczTnl3NU9TNDNMRGM0TGpGNkRRb0pJRTA1T1M0NUxERXdNQzQyYURNdU5GWTRNUzQxYUMwekxqUldNVEF3TGpaNklpOCtEUW84Y0dGMGFDQmpiR0Z6Y3owaWMzUXhJaUJrUFNKTk1UVTNMallzT0RZdU5tZ3hNUzQ0WXpBdU5Td3dMakVzTUM0NExEQXVOQ3d3TGprc01YWXpMalpvTFRFekxqZDJMVE11TmtNeE5UWXVOeXc0Tnl3eE5UY3NPRFl1Tnl3eE5UY3VOaXc0Tmk0MmVpQk5NVFUzTGpZc09UZ3VOQTBLQ1dNdE1DNDJMREF0TUM0NUxUQXVOQzB4TFRFdU1YWXRNeTQyYURFekxqZDJNeTQzWXpBc01DNDJMVEF1TXl3eExUQXVPU3d4U0RFMU55NDJlaUJOTVRZd0xqa3NPREF1TjJNdE1DNHhMREF1TlMwd0xqSXNNUzR6TFRBdU5Td3lMalJqTFRBdU1Td3dMalF0TUM0eExEQXVOeTB3TGpJc01XZ3RNeTQzRFFvSll5MHhMamdzTUM0eExUSXVOeXd4TGpFdE1pNDRMREl1T0ZZNU9HTXdMakVzTVM0MkxERXVNU3d5TGpVc01pNDRMREl1TjJneE5DNHhZekV1Tnkwd0xqRXNNaTQyTFRFc01pNDNMVEl1TlZZNE4yTXRNQzR4TFRFdU9DMHhMVEl1TnkweUxqY3RNaTQ1YUMwM0RRb0pZekF1TVMwd0xqUXNNQzR5TFRFdU1Td3dMalF0TW1Nd0xqRXRNQzQyTERBdU1TMHhMREF1TWkweExqTm9NVEF1TW5ZdE1pNDJhQzB5TWk0eWRqSXVOa3d4TmpBdU9TdzRNQzQzVERFMk1DNDVMRGd3TGpkNklpOCtEUW84Y0dGMGFDQmpiR0Z6Y3owaWMzUXhJaUJrUFNKTk1UZzVMalFzT0RjdU5HTXRNQzQxTFRBdU1TMHdMamN0TUM0ekxUQXVOeTB3TGpkMkxUQXVPV2cwTGpWMk1DNDVZeTB3TGpFc01DNDBMVEF1TXl3d0xqWXRNQzQzTERBdU4wZ3hPRGt1TkhvZ1RURTVNeTQwTERnNUxqUU5DZ2xqTVM0MUxUQXVNU3d5TGpJdE1DNDNMREl1TXkweVZqZzJhRE11TW5ZdE1pNHhhQzB6TGpKMkxURXVObWd0TWk0MWRqRXVObWd0TkM0MWRpMHhMalpvTFRJdU5uWXhMalpvTFRNdU1sWTRObWd6TGpKMk1TNDBZekF1TVN3eExqTXNNQzQ0TERJc01pNHlMREpJTVRrekxqUjZJRTB4T1RBdU9TdzVPQzR6RFFvSll6SXVNeXd4TGpFc05DNDRMREV1T1N3M0xqWXNNaTQyYkRFdU1pMHlMalJqTFRJdE1DNHpMVFF1TVMwd0xqZ3ROaTR5TFRFdU5tTXhMalV0TVM0eExESXVPQzB5TGpJc015NDRMVE11TldNd0xqUXRNQzQyTERBdU5TMHhMaklzTUM0ekxURXVPV010TUM0MExUQXVPQzB4TGpFdE1TNHlMVEl0TVM0eURRb0phQzB4TWk0M2RqSXVNV2d4TUM0NFl6QXVNeXd3TERBdU5Td3dMakVzTUM0MkxEQXVNbk13TERBdU1pMHdMaklzTUM0MFl5MHdMamtzTUM0NUxUSXNNUzQ0TFRNdU15d3lMalpqTFRFdU55MHhMVEl1T1MweExqa3RNeTQwTFRJdU5tZ3RNeTR4WXpFdU1pd3hMalFzTWk0MkxESXVOeXcwTGpFc015NDREUW9KWXkweUxqTXNNQzQ1TFRRdU5pd3hMalV0Tmk0NUxERXVPR3d4TGpNc01pNHlRekU0TlM0NUxERXdNQzR5TERFNE9DNDJMRGs1TGpNc01Ua3dMamtzT1RndU0zb2dUVEU0TVM0M0xEa3dMamwyTFRndU5XTXdMakV0TUM0NExEQXVOQzB4TGpJc01TNHhMVEV1TTJneE5pNDNkaTB5TGpOb0xUZ3VNdzBLQ1dNdE1DNHhMVEF1TWkwekxqRXRNQzR4TFRNdU1Td3dhQzAyTGpkakxURXVOU3d3TGpJdE1pNDBMREV1TXkweUxqVXNNeTR4ZGpndU4yTXdMakVzTXkwd0xqVXNOaTR5TFRFdU5pdzVMalJzTWk0M0xEQXVPRU14T0RFdU1TdzVOeTQyTERFNE1TNDNMRGswTGpNc01UZ3hMamNzT1RBdU9Yb2lMejROQ2p4d1lYUm9JR05zWVhOelBTSnpkRElpSUdROUlrMHhNakl1TlN3NE9TNDFZekF1T0N3d0xERXVOeXd3TGpJc01pNDBMREF1TlhZMExqaGpNQ3d3TGpRdE1DNDVMREV1TkMweUxqY3NNUzQwWXkweUxqRXNNQzB5TGpZdE1DNDVMVEl1TmkweUxqbDJMVEF1T0EwS0NVTXhNVGt1TlN3NU1DNDBMREV5TUM0eUxEZzVMalVzTVRJeUxqVXNPRGt1TlhvZ1RURXlOaTQyTERnMExqWm9MVEV1TjNZekxqVmpMVEF1Tmkwd0xqSXRNUzQxTFRBdU15MHlMalF0TUM0ell5MHpMamdzTUMwMExqWXNNUzQwTFRRdU5pdzBMamwyTUM0MERRb0pZekFzTXk0MExERXVNeXcwTGpZc05DNDFMRFF1Tm1NeExqRXNNQ3d4TGprdE1DNHlMREl1Tmkwd0xqZHNNQzR5TERBdU9HZ3hMalZNTVRJMkxqWXNPRFF1Tmt3eE1qWXVOaXc0TkM0MmVpSXZQZzBLUEhCaGRHZ2dZMnhoYzNNOUluTjBNaUlnWkQwaVRURXpOeTR4TERnM0xqaG9MVEV1TjNZM0xqUmpMVEF1T1N3d0xqVXRNaTQwTERBdU9DMHpMalFzTUM0NFl5MHhMakVzTUMweExqUXRNQzQyTFRFdU5DMHhMamwyTFRZdU5VZ3hNamwyTmk0NFl6QXNNaTR6TERBdU55d3pMaklzTWk0NUxETXVNZzBLQ1dNeExqUXNNQ3d5TGprdE1DNDBMRE11Tmkwd0xqaHNNQzR4TERBdU9HZ3hMalZXT0RjdU9Ib2lMejROQ2p4d1lYUm9JR05zWVhOelBTSnpkREVpSUdROUlrMHhPRGN1T1N3M055NDFZekF0TVN3d0xqZ3RNUzQ0TERFdU55MHhMamh6TVM0M0xEQXVPQ3d4TGpjc01TNDRjeTB3TGpnc01TNDRMVEV1Tnl3eExqaERNVGc0TGpjc056a3VNaXd4T0RjdU9TdzNPQzQwTERFNE55NDVMRGMzTGpWNklpOCtEUW84TDNOMlp6NE5DZz09KX0jZm9ybSAuc19idG57YmFja2dyb3VuZC1pbWFnZTp1cmwoZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejRLUENFdExTQkhaVzVsY21GMGIzSTZJRUZrYjJKbElFbHNiSFZ6ZEhKaGRHOXlJREU1TGpJdU1Td2dVMVpISUVWNGNHOXlkQ0JRYkhWbkxVbHVJQzRnVTFaSElGWmxjbk5wYjI0NklEWXVNREFnUW5WcGJHUWdNQ2tnSUMwdFBnbzhjM1puSUhabGNuTnBiMjQ5SWpFdU1TSWdhV1E5SXVXYnZ1V3hnbDh4SWlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhodGJHNXpPbmhzYVc1clBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1TDNoc2FXNXJJaUI0UFNJd2NIZ2lJSGs5SWpCd2VDSUtDU0IyYVdWM1FtOTRQU0l3SURBZ016SWdNeklpSUhOMGVXeGxQU0psYm1GaWJHVXRZbUZqYTJkeWIzVnVaRHB1WlhjZ01DQXdJRE15SURNeU95SWdlRzFzT25Od1lXTmxQU0p3Y21WelpYSjJaU0krQ2p4emRIbHNaU0IwZVhCbFBTSjBaWGgwTDJOemN5SStDZ2t1YzNRd2UyWnBiR3c2SXpRM056bENSRHQ5Q2p3dmMzUjViR1UrQ2p4d1lYUm9JR05zWVhOelBTSnpkREFpSUdROUlrMHhOQzQ0TERJeExqVmpMVEF1TkN3d0xUQXVOeXd3TFRFdU1TMHdMakZqTFRJdU1TMHdMak10TXk0NUxURXVOQzAxTGpJdE0yTXRNUzR6TFRFdU55MHhMamd0TXk0M0xURXVOaTAxTGpoak1DNHpMVEl1TVN3eExqUXRNeTQ1TERNdE5TNHlDZ2xqTVM0M0xURXVNeXd6TGpndE1TNDRMRFV1T0MweExqWmpNaTR4TERBdU15d3pMamtzTVM0MExEVXVNaXd6WXpFdU15d3hMamNzTVM0NExETXVPQ3d4TGpZc05TNDRZeTB3TGpNc01pNHhMVEV1TkN3ekxqa3RNeXcxTGpKRE1UZ3VNaXd5TVN3eE5pNDFMREl4TGpVc01UUXVPQ3d5TVM0MWVnb0pJRTB4TkM0NExEZ3VNV010TVM0eUxEQXRNaTQwTERBdU5DMHpMak1zTVM0eFl5MHlMalFzTVM0NExUSXVPU3cxTGpNdE1TdzNMamRqTVM0NExESXVOQ3cxTGpNc01pNDVMRGN1Tnl3eFl6RXVNaTB3TGprc01TNDVMVEl1TWl3eUxqRXRNeTQyWXpBdU1pMHhMalV0TUM0eUxUSXVPUzB4TGpFdE5DNHhDZ2xUTVRjc09DNDBMREUxTGpVc09DNHlRekUxTGpNc09DNHlMREUxTERndU1Td3hOQzQ0TERndU1Yb2lMejRLUEdjK0NnazhaejRLQ1FrOGNHRjBhQ0JqYkdGemN6MGljM1F3SWlCa1BTSk5NalV1TXl3eU55NDFUREkxTGpNc01qY3VOV010TUM0MkxEQXVOQzB4TGpRc01DNHpMVEV1T0Mwd0xqSnNMVFV1TVMwMkxqZGpMVEF1TkMwd0xqWXRNQzR6TFRFdU5Dd3dMakl0TVM0NGJEQXNNQW9KQ1Fsak1DNDJMVEF1TkN3eExqUXRNQzR6TERFdU9Dd3dMakpzTlM0eExEWXVOME15Tml3eU5pNHpMREkxTGprc01qY3VNU3d5TlM0ekxESTNMalY2SWk4K0NnazhMMmMrQ2p3dlp6NEtQQzl6ZG1jK0NnPT0pIWltcG9ydGFudH0jZm9ybSAuc19idG5fd3J7YmFja2dyb3VuZC1pbWFnZTp1cmwoZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejRLUENFdExTQkhaVzVsY21GMGIzSTZJRUZrYjJKbElFbHNiSFZ6ZEhKaGRHOXlJREU1TGpJdU1Td2dVMVpISUVWNGNHOXlkQ0JRYkhWbkxVbHVJQzRnVTFaSElGWmxjbk5wYjI0NklEWXVNREFnUW5WcGJHUWdNQ2tnSUMwdFBnbzhjM1puSUhabGNuTnBiMjQ5SWpFdU1TSWdhV1E5SXVXYnZ1V3hnbDh4SWlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhodGJHNXpPbmhzYVc1clBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1TDNoc2FXNXJJaUI0UFNJd2NIZ2lJSGs5SWpCd2VDSUtDU0IyYVdWM1FtOTRQU0l3SURBZ016SWdNeklpSUhOMGVXeGxQU0psYm1GaWJHVXRZbUZqYTJkeWIzVnVaRHB1WlhjZ01DQXdJRE15SURNeU95SWdlRzFzT25Od1lXTmxQU0p3Y21WelpYSjJaU0krQ2p4emRIbHNaU0IwZVhCbFBTSjBaWGgwTDJOemN5SStDZ2t1YzNRd2UyWnBiR3c2SXpRM056bENSRHQ5Q2p3dmMzUjViR1UrQ2p4d1lYUm9JR05zWVhOelBTSnpkREFpSUdROUlrMHhOQzQ0TERJeExqVmpMVEF1TkN3d0xUQXVOeXd3TFRFdU1TMHdMakZqTFRJdU1TMHdMak10TXk0NUxURXVOQzAxTGpJdE0yTXRNUzR6TFRFdU55MHhMamd0TXk0M0xURXVOaTAxTGpoak1DNHpMVEl1TVN3eExqUXRNeTQ1TERNdE5TNHlDZ2xqTVM0M0xURXVNeXd6TGpndE1TNDRMRFV1T0MweExqWmpNaTR4TERBdU15d3pMamtzTVM0MExEVXVNaXd6WXpFdU15d3hMamNzTVM0NExETXVPQ3d4TGpZc05TNDRZeTB3TGpNc01pNHhMVEV1TkN3ekxqa3RNeXcxTGpKRE1UZ3VNaXd5TVN3eE5pNDFMREl4TGpVc01UUXVPQ3d5TVM0MWVnb0pJRTB4TkM0NExEZ3VNV010TVM0eUxEQXRNaTQwTERBdU5DMHpMak1zTVM0eFl5MHlMalFzTVM0NExUSXVPU3cxTGpNdE1TdzNMamRqTVM0NExESXVOQ3cxTGpNc01pNDVMRGN1Tnl3eFl6RXVNaTB3TGprc01TNDVMVEl1TWl3eUxqRXRNeTQyWXpBdU1pMHhMalV0TUM0eUxUSXVPUzB4TGpFdE5DNHhDZ2xUTVRjc09DNDBMREUxTGpVc09DNHlRekUxTGpNc09DNHlMREUxTERndU1Td3hOQzQ0TERndU1Yb2lMejRLUEdjK0NnazhaejRLQ1FrOGNHRjBhQ0JqYkdGemN6MGljM1F3SWlCa1BTSk5NalV1TXl3eU55NDFUREkxTGpNc01qY3VOV010TUM0MkxEQXVOQzB4TGpRc01DNHpMVEV1T0Mwd0xqSnNMVFV1TVMwMkxqZGpMVEF1TkMwd0xqWXRNQzR6TFRFdU5Dd3dMakl0TVM0NGJEQXNNQW9KQ1Fsak1DNDJMVEF1TkN3eExqUXRNQzR6TERFdU9Dd3dMakpzTlM0eExEWXVOME15Tml3eU5pNHpMREkxTGprc01qY3VNU3d5TlM0ekxESTNMalY2SWk4K0NnazhMMmMrQ2p3dlp6NEtQQzl6ZG1jK0NnPT0pIWltcG9ydGFudH0uYy1pY29uLXRpZWJhe2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0S1BDRXRMU0JIWlc1bGNtRjBiM0k2SUVGa2IySmxJRWxzYkhWemRISmhkRzl5SURFNUxqSXVNU3dnVTFaSElFVjRjRzl5ZENCUWJIVm5MVWx1SUM0Z1UxWkhJRlpsY25OcGIyNDZJRFl1TURBZ1FuVnBiR1FnTUNrZ0lDMHRQZ284YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUl1V2J2dVd4Z2w4eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNalFnTWpRaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURJMElESTBPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0NqeHpkSGxzWlNCMGVYQmxQU0owWlhoMEwyTnpjeUkrQ2drdWMzUXdlMlpwYkd3Nkl6TTNRVUpGTXp0OUNna3VjM1F4ZTJacGJHdzZJMFpHUmtaR1JqdDlDand2YzNSNWJHVStDanh3WVhSb0lHTnNZWE56UFNKemREQWlJR1E5SWsweU1DNDVMREl6TGpOSU15NHhZeTB4TGpFc01DMHlMVEF1T1MweUxUSldNaTQ0WXpBdE1TNHhMREF1T1MweUxESXRNbWd4Tnk0NFl6RXVNU3d3TERJc01DNDVMRElzTW5ZeE9DNDFRekl5TGprc01qSXVOQ3d5TWl3eU15NHpMREl3TGprc01qTXVNM29pQ2drdlBnbzhaejRLQ1R4d1lYUm9JR05zWVhOelBTSnpkREVpSUdROUlrMDFMaklzTVRrdU9VdzBMREU1TGpKak1TNDFMVEV1T1N3eUxqTXRNeTQ1TERJdU5DMDFMamhqTUMweExEQXVNUzB6TGpFc01DNHhMVFl1TTBnNFl6QXNNaTR5TERBc05DNHpMVEF1TVN3MkxqUmpNQ3d3TGpZdE1DNHhMREV1TWkwd0xqTXNNUzQ0Q2drSmFERXVNV013TGpVc01DNDRMREV1TWl3eUxqUXNNaTR5TERRdU5rZzVZeTB3TGpZdE1TNDFMVEV1TWkweUxqZ3RNUzQyTFRNdU9VTTNMREUzTGpJc05pNHpMREU0TGpZc05TNHlMREU1TGpsNklFMDBMakVzTVRRdU9GWTJMakZqTUMweExqSXNNQzQxTFRFdU9Dd3hMall0TVM0NGFETUtDUWxqTVN3d0xERXVOaXd3TGpjc01TNDJMREV1T0hZNExqWklPQzQ1VmpZdU0yTXdMVEF1TkMwd0xqTXRNQzQyTFRBdU5pMHdMalpvTFRKakxUQXVOQ3d3TFRBdU5pd3dMakl0TUM0MkxEQXVOblk0TGpWSU5DNHhlaUJOTVRJdU9Td3hPUzQxWXkweExqRXNNQzB4TGpjdE1DNDJMVEV1T0MweExqWldNVE1LQ1Fsak1DMHhMakVzTUM0M0xURXVOeXd4TGpndE1TNDRhREZXTkM0eGFERXVOM1l5TGpWSU1qQldPR2d0TkM0emRqTXVNbWd4TGpoak1TNHhMREFzTVM0M0xEQXVOeXd4TGpnc01TNDRkalF1T0dNd0xERXVNUzB3TGpZc01TNDJMVEV1T0N3eExqZElNVEl1T1hvZ1RURXlMamdzTVRNdU0zWTBMak1LQ1Fsak1Dd3dMalFzTUM0ekxEQXVOeXd3TGpjc01DNDNhRE11TW1Nd0xqVXNNQ3d3TGpjdE1DNHpMREF1T0Mwd0xqZDJMVFF1TkdNd0xUQXVOQzB3TGpNdE1DNDNMVEF1Tnkwd0xqZG9MVE11TTBNeE15NHhMREV5TGpZc01USXVPU3d4TWk0NExERXlMamdzTVRNdU0zb2lMejRLUEM5blBnbzhMM04yWno0Syl9I3UgLnBme2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0S1BDRXRMU0JIWlc1bGNtRjBiM0k2SUVGa2IySmxJRWxzYkhWemRISmhkRzl5SURFNUxqSXVNU3dnVTFaSElFVjRjRzl5ZENCUWJIVm5MVWx1SUM0Z1UxWkhJRlpsY25OcGIyNDZJRFl1TURBZ1FuVnBiR1FnTUNrZ0lDMHRQZ284YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUl1V2J2dVd4Z2w4eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNeklnTXpJaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURNeUlETXlPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0NqeHpkSGxzWlNCMGVYQmxQU0owWlhoMEwyTnpjeUkrQ2drdWMzUXdlMlpwYkd3Nkl6WkVOa1EyUkR0OUNqd3ZjM1I1YkdVK0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERBaUlHUTlJazB5TlM0eUxERTNMakpqTUMwd0xqUXNNQzR4TFRBdU9Dd3dMakV0TVM0eVl6QXRNQzQwTERBdE1DNDRMVEF1TVMweExqSnNNaTQyTFRKak1DNHlMVEF1TWl3d0xqTXRNQzQxTERBdU1TMHdMamhzTFRJdU5TMDBMak1LQ1dNdE1DNHhMVEF1TXkwd0xqVXRNQzQwTFRBdU9DMHdMak5zTFRNdU1Td3hMakpqTFRBdU5pMHdMalV0TVM0ekxUQXVPUzB5TGpFdE1TNHliQzB3TGpVdE15NHpZekF0TUM0ekxUQXVNeTB3TGpVdE1DNDJMVEF1TldndE5XTXRNQzR6TERBdE1DNDJMREF1TWkwd0xqWXNNQzQxYkMwd0xqVXNNeTR6Q2dsakxUQXVPQ3d3TGpNdE1TNDBMREF1TnkweUxqRXNNUzR5VERjdU15dzNMalJETnl3M0xqTXNOaTQzTERjdU5DdzJMalVzTnk0M1REUXNNVEV1T1dNdE1DNHlMREF1TXkwd0xqRXNNQzQyTERBdU1Td3dMamhzTWk0MkxESmpNQ3d3TGpRdE1DNHhMREF1T0Mwd0xqRXNNUzR5Q2dsak1Dd3dMalFzTUN3d0xqZ3NNQzR4TERFdU1td3RNaTQyTERKakxUQXVNaXd3TGpJdE1DNHpMREF1TlMwd0xqRXNNQzQ0YkRJdU5TdzBMak5qTUM0eExEQXVNeXd3TGpVc01DNDBMREF1T0N3d0xqTnNNeTR4TFRFdU1tTXdMallzTUM0MUxERXVNeXd3TGprc01pNHhMREV1TW13d0xqVXNNeTR6Q2dsak1Dd3dMak1zTUM0ekxEQXVOU3d3TGpZc01DNDFhRFZqTUM0ekxEQXNNQzQyTFRBdU1pd3dMall0TUM0MWJEQXVOUzB6TGpOak1DNDRMVEF1TXl3eExqUXRNQzQzTERJdU1TMHhMakpzTXk0eExERXVNbU13TGpNc01DNHhMREF1Tml3d0xEQXVPQzB3TGpOc01pNDFMVFF1TXdvSll6QXVNUzB3TGpNc01DNHhMVEF1Tmkwd0xqRXRNQzQ0VERJMUxqSXNNVGN1TW5vZ1RURTJMREl3TGpOakxUSXVOQ3d3TFRRdU15MHhMamt0TkM0ekxUUXVNM014TGprdE5DNHpMRFF1TXkwMExqTnpOQzR6TERFdU9TdzBMak1zTkM0elV6RTRMalFzTWpBdU15d3hOaXd5TUM0emVpSXZQZ284TDNOMlp6NEspfSN1IC5sYntiYWNrZ3JvdW5kLWltYWdlOnVybChkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NEtQQ0V0TFNCSFpXNWxjbUYwYjNJNklFRmtiMkpsSUVsc2JIVnpkSEpoZEc5eUlERTVMakl1TVN3Z1UxWkhJRVY0Y0c5eWRDQlFiSFZuTFVsdUlDNGdVMVpISUZabGNuTnBiMjQ2SURZdU1EQWdRblZwYkdRZ01Da2dJQzB0UGdvOGMzWm5JSFpsY25OcGIyNDlJakV1TVNJZ2FXUTlJdVdidnVXeGdsOHhJaUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGh0Ykc1ek9uaHNhVzVyUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMM2hzYVc1cklpQjRQU0l3Y0hnaUlIazlJakJ3ZUNJS0NTQjJhV1YzUW05NFBTSXdJREFnTkRZZ05EWWlJSE4wZVd4bFBTSmxibUZpYkdVdFltRmphMmR5YjNWdVpEcHVaWGNnTUNBd0lEUTJJRFEyT3lJZ2VHMXNPbk53WVdObFBTSndjbVZ6WlhKMlpTSStDanh6ZEhsc1pTQjBlWEJsUFNKMFpYaDBMMk56Y3lJK0Nna3VjM1F3ZTJacGJHdzZJMFpHUmtaR1JqdDlDand2YzNSNWJHVStDanh3WVhSb0lHTnNZWE56UFNKemREQWlJR1E5SWsweU15d3lNMk15TGprc01DdzFMakl0TWk0ekxEVXVNaTAxTGpKekxUSXVNeTAxTGpJdE5TNHlMVFV1TW5NdE5TNHlMREl1TXkwMUxqSXNOUzR5VXpJd0xqRXNNak1zTWpNc01qTjZJRTB5TXl3eU5TNDJDZ2xqTFRNdU5Td3dMVEV3TGpRc01TNDNMVEV3TGpRc05TNHlkakl1Tm1neU1DNDNkaTB5TGpaRE16TXVOQ3d5Tnk0ekxESTJMalVzTWpVdU5pd3lNeXd5TlM0MmVpSXZQZ284TDNOMlp6NEspfSN1MSBhLnBme2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0S1BDRXRMU0JIWlc1bGNtRjBiM0k2SUVGa2IySmxJRWxzYkhWemRISmhkRzl5SURFNUxqSXVNU3dnVTFaSElFVjRjRzl5ZENCUWJIVm5MVWx1SUM0Z1UxWkhJRlpsY25OcGIyNDZJRFl1TURBZ1FuVnBiR1FnTUNrZ0lDMHRQZ284YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUl1V2J2dVd4Z2w4eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNeklnTXpJaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURNeUlETXlPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0NqeHpkSGxzWlNCMGVYQmxQU0owWlhoMEwyTnpjeUkrQ2drdWMzUXdlMlpwYkd3Nkl6WkVOa1EyUkR0OUNqd3ZjM1I1YkdVK0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERBaUlHUTlJazB5TlM0eUxERTNMakpqTUMwd0xqUXNNQzR4TFRBdU9Dd3dMakV0TVM0eVl6QXRNQzQwTERBdE1DNDRMVEF1TVMweExqSnNNaTQyTFRKak1DNHlMVEF1TWl3d0xqTXRNQzQxTERBdU1TMHdMamhzTFRJdU5TMDBMak1LQ1dNdE1DNHhMVEF1TXkwd0xqVXRNQzQwTFRBdU9DMHdMak5zTFRNdU1Td3hMakpqTFRBdU5pMHdMalV0TVM0ekxUQXVPUzB5TGpFdE1TNHliQzB3TGpVdE15NHpZekF0TUM0ekxUQXVNeTB3TGpVdE1DNDJMVEF1TldndE5XTXRNQzR6TERBdE1DNDJMREF1TWkwd0xqWXNNQzQxYkMwd0xqVXNNeTR6Q2dsakxUQXVPQ3d3TGpNdE1TNDBMREF1TnkweUxqRXNNUzR5VERjdU15dzNMalJETnl3M0xqTXNOaTQzTERjdU5DdzJMalVzTnk0M1REUXNNVEV1T1dNdE1DNHlMREF1TXkwd0xqRXNNQzQyTERBdU1Td3dMamhzTWk0MkxESmpNQ3d3TGpRdE1DNHhMREF1T0Mwd0xqRXNNUzR5Q2dsak1Dd3dMalFzTUN3d0xqZ3NNQzR4TERFdU1td3RNaTQyTERKakxUQXVNaXd3TGpJdE1DNHpMREF1TlMwd0xqRXNNQzQ0YkRJdU5TdzBMak5qTUM0eExEQXVNeXd3TGpVc01DNDBMREF1T0N3d0xqTnNNeTR4TFRFdU1tTXdMallzTUM0MUxERXVNeXd3TGprc01pNHhMREV1TW13d0xqVXNNeTR6Q2dsak1Dd3dMak1zTUM0ekxEQXVOU3d3TGpZc01DNDFhRFZqTUM0ekxEQXNNQzQyTFRBdU1pd3dMall0TUM0MWJEQXVOUzB6TGpOak1DNDRMVEF1TXl3eExqUXRNQzQzTERJdU1TMHhMakpzTXk0eExERXVNbU13TGpNc01DNHhMREF1Tml3d0xEQXVPQzB3TGpOc01pNDFMVFF1TXdvSll6QXVNUzB3TGpNc01DNHhMVEF1Tmkwd0xqRXRNQzQ0VERJMUxqSXNNVGN1TW5vZ1RURTJMREl3TGpOakxUSXVOQ3d3TFRRdU15MHhMamt0TkM0ekxUUXVNM014TGprdE5DNHpMRFF1TXkwMExqTnpOQzR6TERFdU9TdzBMak1zTkM0elV6RTRMalFzTWpBdU15d3hOaXd5TUM0emVpSXZQZ284TDNOMlp6NEspfSN1MSBhLnBmLCN1MSBhLmxie2NvbG9yOnRyYW5zcGFyZW50IWltcG9ydGFudH0jdTEgYS5icml7YmFja2dyb3VuZC1pbWFnZTp1cmwoZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejRLUENFdExTQkhaVzVsY21GMGIzSTZJRUZrYjJKbElFbHNiSFZ6ZEhKaGRHOXlJREU1TGpJdU1Td2dVMVpISUVWNGNHOXlkQ0JRYkhWbkxVbHVJQzRnVTFaSElGWmxjbk5wYjI0NklEWXVNREFnUW5WcGJHUWdNQ2tnSUMwdFBnbzhjM1puSUhabGNuTnBiMjQ5SWpFdU1TSWdhV1E5SXVXYnZ1V3hnbDh4SWlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhodGJHNXpPbmhzYVc1clBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1TDNoc2FXNXJJaUI0UFNJd2NIZ2lJSGs5SWpCd2VDSUtDU0IyYVdWM1FtOTRQU0l3SURBZ016SWdNeklpSUhOMGVXeGxQU0psYm1GaWJHVXRZbUZqYTJkeWIzVnVaRHB1WlhjZ01DQXdJRE15SURNeU95SWdlRzFzT25Od1lXTmxQU0p3Y21WelpYSjJaU0krQ2p4emRIbHNaU0IwZVhCbFBTSjBaWGgwTDJOemN5SStDZ2t1YzNRd2UyWnBiR3c2SXpaRU5rUTJSRHQ5Q2p3dmMzUjViR1UrQ2p4d1lYUm9JR05zWVhOelBTSnpkREFpSUdROUlrMHpMamNzT1M0NGFEWXVNbFl6TGpkSU15NDNWamt1T0hvZ1RURXlMamtzTWpndU0yZzJMakoyTFRZdU1tZ3ROaTR5VmpJNExqTjZJRTB6TGpjc01qZ3VNMmcyTGpKMkxUWXVNa2d6TGpkV01qZ3VNM29nVFRNdU55d3hPUzR4YURZdU1uWXROaTR5Q2dsSU15NDNWakU1TGpGNklFMHhNaTQ1TERFNUxqRm9OaTR5ZGkwMkxqSm9MVFl1TWxZeE9TNHhlaUJOTWpJdU1pd3pMamQyTmk0eWFEWXVNbFl6TGpkSU1qSXVNbm9nVFRFeUxqa3NPUzQ0YURZdU1sWXpMamRvTFRZdU1sWTVMamg2SUUweU1pNHlMREU1TGpGb05pNHlkaTAyTGpKb0xUWXVNbFl4T1M0eENnbDZJRTB5TWk0eUxESTRMak5vTmk0eWRpMDJMakpvTFRZdU1sWXlPQzR6ZWlJdlBnbzhMM04yWno0Syl9I3NfdXNlcnNldHRpbmdfdG9we2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0S1BDRXRMU0JIWlc1bGNtRjBiM0k2SUVGa2IySmxJRWxzYkhWemRISmhkRzl5SURFNUxqSXVNU3dnVTFaSElFVjRjRzl5ZENCUWJIVm5MVWx1SUM0Z1UxWkhJRlpsY25OcGIyNDZJRFl1TURBZ1FuVnBiR1FnTUNrZ0lDMHRQZ284YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUl1V2J2dVd4Z2w4eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNeklnTXpJaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURNeUlETXlPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0NqeHpkSGxzWlNCMGVYQmxQU0owWlhoMEwyTnpjeUkrQ2drdWMzUXdlMlpwYkd3Nkl6WkVOa1EyUkR0OUNqd3ZjM1I1YkdVK0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERBaUlHUTlJazB5TlM0eUxERTNMakpqTUMwd0xqUXNNQzR4TFRBdU9Dd3dMakV0TVM0eVl6QXRNQzQwTERBdE1DNDRMVEF1TVMweExqSnNNaTQyTFRKak1DNHlMVEF1TWl3d0xqTXRNQzQxTERBdU1TMHdMamhzTFRJdU5TMDBMak1LQ1dNdE1DNHhMVEF1TXkwd0xqVXRNQzQwTFRBdU9DMHdMak5zTFRNdU1Td3hMakpqTFRBdU5pMHdMalV0TVM0ekxUQXVPUzB5TGpFdE1TNHliQzB3TGpVdE15NHpZekF0TUM0ekxUQXVNeTB3TGpVdE1DNDJMVEF1TldndE5XTXRNQzR6TERBdE1DNDJMREF1TWkwd0xqWXNNQzQxYkMwd0xqVXNNeTR6Q2dsakxUQXVPQ3d3TGpNdE1TNDBMREF1TnkweUxqRXNNUzR5VERjdU15dzNMalJETnl3M0xqTXNOaTQzTERjdU5DdzJMalVzTnk0M1REUXNNVEV1T1dNdE1DNHlMREF1TXkwd0xqRXNNQzQyTERBdU1Td3dMamhzTWk0MkxESmpNQ3d3TGpRdE1DNHhMREF1T0Mwd0xqRXNNUzR5Q2dsak1Dd3dMalFzTUN3d0xqZ3NNQzR4TERFdU1td3RNaTQyTERKakxUQXVNaXd3TGpJdE1DNHpMREF1TlMwd0xqRXNNQzQ0YkRJdU5TdzBMak5qTUM0eExEQXVNeXd3TGpVc01DNDBMREF1T0N3d0xqTnNNeTR4TFRFdU1tTXdMallzTUM0MUxERXVNeXd3TGprc01pNHhMREV1TW13d0xqVXNNeTR6Q2dsak1Dd3dMak1zTUM0ekxEQXVOU3d3TGpZc01DNDFhRFZqTUM0ekxEQXNNQzQyTFRBdU1pd3dMall0TUM0MWJEQXVOUzB6TGpOak1DNDRMVEF1TXl3eExqUXRNQzQzTERJdU1TMHhMakpzTXk0eExERXVNbU13TGpNc01DNHhMREF1Tml3d0xEQXVPQzB3TGpOc01pNDFMVFF1TXdvSll6QXVNUzB3TGpNc01DNHhMVEF1Tmkwd0xqRXRNQzQ0VERJMUxqSXNNVGN1TW5vZ1RURTJMREl3TGpOakxUSXVOQ3d3TFRRdU15MHhMamt0TkM0ekxUUXVNM014TGprdE5DNHpMRFF1TXkwMExqTnpOQzR6TERFdU9TdzBMak1zTkM0elV6RTRMalFzTWpBdU15d3hOaXd5TUM0emVpSXZQZ284TDNOMlp6NEspfSNpbXNne2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0TkNqd2hMUzBnUjJWdVpYSmhkRzl5T2lCQlpHOWlaU0JKYkd4MWMzUnlZWFJ2Y2lBeE9TNHlMakVzSUZOV1J5QkZlSEJ2Y25RZ1VHeDFaeTFKYmlBdUlGTldSeUJXWlhKemFXOXVPaUEyTGpBd0lFSjFhV3hrSURBcElDQXRMVDROQ2p4emRtY2dkbVZ5YzJsdmJqMGlNUzR4SWlCcFpEMGk1WnUrNWJHQ1h6RWlJSGh0Ykc1elBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHlNREF3TDNOMlp5SWdlRzFzYm5NNmVHeHBibXM5SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpFNU9Ua3ZlR3hwYm1zaUlIZzlJakJ3ZUNJZ2VUMGlNSEI0SWcwS0NTQjJhV1YzUW05NFBTSXdJREFnTXpJZ016SWlJSE4wZVd4bFBTSmxibUZpYkdVdFltRmphMmR5YjNWdVpEcHVaWGNnTUNBd0lETXlJRE15T3lJZ2VHMXNPbk53WVdObFBTSndjbVZ6WlhKMlpTSStEUW84YzNSNWJHVWdkSGx3WlQwaWRHVjRkQzlqYzNNaVBnMEtDUzV6ZERCN1ptbHNiRG9qTmtRMlJEWkVPMzBOQ2p3dmMzUjViR1UrRFFvOGNHRjBhQ0JqYkdGemN6MGljM1F3SWlCa1BTSk5NalV1TXl3MExqWm9MVEU1UXpVc05DNDJMRE11T1N3MUxqY3NNeTQ1TERkc01Dd3lNUzQwYkRRdU9DMDBMamhvTVRZdU5tTXhMak1zTUN3eUxqUXRNUzR4TERJdU5DMHlMalJXTjBNeU55NDNMRFV1Tnl3eU5pNDJMRFF1Tml3eU5TNHpMRFF1Tm5vTkNna2dUVEl5TGprc01UZ3VPVWc0TGpaMkxUSXVOR2d4TkM0elZqRTRMamw2SUUweU1pNDVMREUxTGpOSU9DNDJkaTB5TGpSb01UUXVNMVl4TlM0emVpQk5Nakl1T1N3eE1TNDNTRGd1TmxZNUxqUm9NVFF1TTFZeE1TNDNlaUl2UGcwS1BDOXpkbWMrRFFvPSl9LmMtY29udGFpbmVye2JhY2tncm91bmQ6I2ZmZjtib3JkZXItcmFkaXVzOjJweDtwYWRkaW5nOjI1cHg7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwcztib3gtc2hhZG93OjAgMXB4IDRweCAwIHJnYmEoMCwwLDAsLjE0KTt3aWR0aDo1NDlweH1oMyBhOnZpc2l0ZWR7b3BhY2l0eTouNCFpbXBvcnRhbnQ7Y29sb3I6I2JiYiFpbXBvcnRhbnR9LmMtY29udGFpbmVyOmhvdmVye3RyYW5zaXRpb246YWxsIC41cyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzO2JveC1zaGFkb3c6cmdiYSgwLDAsMCwuMTE3NjQ3KSAwIDFweCA2cHgscmdiYSgwLDAsMCwuMTE3NjQ3KSAwIDFweCA0cHh9LmMtY29udGFpbmVyOmFjdGl2ZXt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzO2JveC1zaGFkb3c6cmdiYSgwLDAsMCwuMTg4MjM1KSAwIDEwcHggMzBweCxyZ2JhKDAsMCwwLC4yMjc0NTEpIDAgNnB4IDEwcHh9LnR7cGFkZGluZy1ib3R0b206MTBweH0uYy1ib3JkZXJ7d2lkdGg6NTU5cHg7Ym94LXNoYWRvdzpub25lIWltcG9ydGFudDttYXJnaW4tdG9wOjE3cHg7bWFyZ2luLWJvdHRvbToyM3B4O2JvcmRlci10b3A6I2VlZSAxcHggc29saWQ7Ym9yZGVyLWJvdHRvbTojZWVlIDFweCBzb2xpZH0jaGVscHtwYWRkaW5nLWxlZnQ6MTA3cHghaW1wb3J0YW50fS5jLXRvb2xzIGF7Ym9yZGVyOjAhaW1wb3J0YW50fS5mMTMgYTpob3Zlcntib3JkZXI6bm9uZSFpbXBvcnRhbnR9LmYxMyAubTpob3Zlcntib3JkZXItYm90dG9tOnNvbGlkIDFweCAjNjY2IWltcG9ydGFudH0uZyAubTpob3Zlcntib3JkZXItYm90dG9tOnNvbGlkIDFweCAjNjY2IWltcG9ydGFudH0uYy1yb3cgYTpob3Zlcntib3JkZXItYm90dG9tOiMzNDc2ZDIgMXB4IHNvbGlkfS5jLXNwYW42IGE6aG92ZXJ7Ym9yZGVyLWJvdHRvbTpub25lfS5vcF92ZF9taW5pbmV3ZXN0X2xpbms6aG92ZXJ7b3BhY2l0eTouOH0ub3AtdGllYmEtb2ZmaWNhbC1sb29rbW9yZSBhOmhvdmVye2JvcmRlci1ib3R0b206IzM0NzZkMiAxcHggc29saWR9b3AtdGllYmEtZ2VuZXJhbC1sb29rbW9yZSBhOmhvdmVye2JvcmRlci1ib3R0b206IzM0NzZkMiAxcHggc29saWR9LmMtdGlwLW1lbnUgdWwgbGkgYXtjb2xvcjojMzQ3NmQyIWltcG9ydGFudH1oMyBhOmhvdmVye2JvcmRlcjpub25lIWltcG9ydGFudDtvcGFjaXR5Oi43O3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9aDMgYXt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfS5zaXRlbGlua19zdW1tYXJ5IGE6aG92ZXJ7Ym9yZGVyLWJvdHRvbTojMzQ3NmQyIDFweCBzb2xpZH0uYy1ncmF5OmhvdmVye2JvcmRlci1ib3R0b206IzY2NiAxcHggc29saWR9Lm9wX2tlZnV0YWJsZV9jb21taXR0ZWw6aG92ZXJ7Ym9yZGVyLWJvdHRvbTojNjY2IDFweCBzb2xpZH0ub3Atc29mdC1idG5ib3ggYTpob3Zlcntib3JkZXI6bm9uZSFpbXBvcnRhbnR9Lm9wLXNvZnQtYXMtcGMtZG93bmJ0bnttYXJnaW4tbGVmdDowIWltcG9ydGFudDtjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzM0NzZkMjtwYWRkaW5nOjNweCAxNXB4O2JvcmRlci1yYWRpdXM6MnB4O2ZvbnQtc2l6ZToxNHB4O3RyYW5zaXRpb246YWxsIC4zcyBlYXNlO2JvcmRlcjpub25lO21hcmdpbi10b3A6LTNweH0ub3Atc29mdC1hcy1wYy1kb3duYnRuOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzcwOThkMDt0cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTtib3gtc2hhZG93OjAgMnB4IDVweCAwIHJnYmEoMCwwLDAsLjE2KSwwIDJweCAxMHB4IDAgcmdiYSgwLDAsMCwuMTIpO2JhY2tncm91bmQtaW1hZ2U6bm9uZX0uYy1idG4tcHJpbWFyeXttYXJnaW4tbGVmdDowIWltcG9ydGFudDtjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzM0NzZkMjtwYWRkaW5nOjNweCAxNXB4O2JvcmRlci1yYWRpdXM6MnB4O2ZvbnQtc2l6ZToxNHB4O3RyYW5zaXRpb246YWxsIC4zcyBlYXNlO2JvcmRlcjpub25lO21hcmdpbi10b3A6LTNweH0uYy1idG4tcHJpbWFyeTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiM3MDk4ZDA7dHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7Ym94LXNoYWRvdzowIDJweCA1cHggMCByZ2JhKDAsMCwwLC4xNiksMCAycHggMTBweCAwIHJnYmEoMCwwLDAsLjEyKTtiYWNrZ3JvdW5kLWltYWdlOm5vbmV9Lm9wLXNvZnQtdGl0bGUgYTpob3Zlcntib3JkZXI6bm9uZSFpbXBvcnRhbnQ7b3BhY2l0eTouNzt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfS5vcC1zb2Z0LXRpdGxlIGF7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30ubnVtc3t3aWR0aDo1OThweH0uc2VhcmNoX3Rvb2xfY29udGVye3dpZHRoOjU5OHB4fS5vcF9vZmZpY2FsX3dlaWJvX290aGVyIGE6aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOm5vbmUhaW1wb3J0YW50fS5vcF9vZmZpY2FsX3dlaWJvX2luZm8gYTpob3Zlcnt0ZXh0LWRlY29yYXRpb246bm9uZSFpbXBvcnRhbnR9Lm9wX29mZmljYWxfd2VpYm9fY29udGVudCBhOmhvdmVye3RleHQtZGVjb3JhdGlvbjpub25lIWltcG9ydGFudH0uYy1idG57Ym9yZGVyOm5vbmUhaW1wb3J0YW50fS5vcC16eC1uZXctbXZpZGVvLWluZm86aG92ZXJ7Ym9yZGVyLWJvdHRvbTpub25lfS5vcC16eC1uZXctbXZpZGVvLXJsdCBhOmhvdmVye2JvcmRlci1ib3R0b206IzM0NzZkMiAxcHggc29saWR9Lm9wLXp4LW5ldy1tdmlkZW8tb25lbGluZSBhOmhvdmVye2JvcmRlci1ib3R0b206IzM0NzZkMiAxcHggc29saWR9LmhpbnRfY29tbW9uX3Jlc3RvcHtjb2xvcjojZWE0MzM1O2ZvbnQtc2l6ZTptZWRpdW07Zm9udC13ZWlnaHQ6NzAwfS5vcC10aWViYS1nZW5lcmFsLW1haW4tY29sIHA6aG92ZXJ7Ym9yZGVyOm5vbmUhaW1wb3J0YW50fS5jLXRleHR7YmFja2dyb3VuZDojMzQ3NmQyO2NvbG9yOiNmZmY7Ym9yZGVyOiMzNDc2ZDIgMXB4IHNvbGlkO3BhZGRpbmctdG9wOjNweDtib3JkZXItcmFkaXVzOjJweH0uYy10ZXh0OmhvdmVye2JhY2tncm91bmQ6MCAwO2NvbG9yOiMzNDc2ZDI7Ym9yZGVyOiMzNDc2ZDIgMXB4IHNvbGlkIWltcG9ydGFudDtwYWRkaW5nLXRvcDozcHg7Ym9yZGVyLXJhZGl1czoycHh9"},{"meta":{"name":"googleCommonStyle.css","url":"http://ibaidu.ntaow.com/newcss/googleCommonStyle.css?t=24.12","ts":1607932532014,"mimetype":"text/css"},"source":"ZGl2LnJlc190b3BfYmFubmVyLCNwYWdlIC5maywjaGVhZCAuaGVhZEJsb2NrLCNyc190b3BfbmV3LCNjb250ZW50X3JpZ2h0LCNyc28+dGFibGUsI3Jzbz5kaXZbaWQqPSIzMCJdLCNyc28gLmMtcmVjb21tZW5kLCNyc28gLmxlZnRCbG9jaywjcnNvIC5oaXRfdG9wX25ldywjcnNvICNmbGQsI3JzbyBkaXYucnJlY29tLWJ0bi1wYXJlbnQsI2NvbnRlbnRfcmlnaHQsI2NlbnRlcl9jb2w+I3RhdywjZmxkLCNkZW1ve2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9Ym9keVtnb29nbGVde2JhY2tncm91bmQtY29sb3I6I2ZkZmRmZH0jdG9wX25hdiAjaGR0YntiYWNrZ3JvdW5kOnVuc2V0fSNjbnQgI2hkdGJTdW0sI2NudD4jYXBwYmFye2JhY2tncm91bmQ6dHJhbnNwYXJlbnR9I2Zvcm0gLmJkc3Vne3dpZHRoOjc2JX0jYWxhX2ltZ19yZXN1bHRze292ZXJmbG93OmhpZGRlbn1hLGEgZW0sI3UgYXt0ZXh0LWRlY29yYXRpb246bm9uZX1hOmhvdmVyLGE6aG92ZXIgaDN7dGV4dC1kZWNvcmF0aW9uOm5vbmUhaW1wb3J0YW50fSNoZWFkLCNzX3RhYntiYWNrZ3JvdW5kLWNvbG9yOiNmOGY4Zjh9I2hlYWR7Ym9yZGVyLWJvdHRvbTpub25lfSNmb3Jte2JhY2tncm91bmQtY29sb3I6dW5zZXR9I2Zvcm0gLmJkc3VnIGxpe3dpZHRoOmF1dG87Y29sb3I6IzAwMDtmb250OjE1cHggYXJpYWw7bGluZS1oZWlnaHQ6MjZweH0jZm9ybSAuc19pcHRfd3IuYmd7YmFja2dyb3VuZDojZmZmO3dpZHRoOjc2JX0jZm9ybSAuc19idG57YmFja2dyb3VuZDojMzQ3NmQyO2JvcmRlci1ib3R0b206MXB4IHNvbGlkICMzNDc2ZDJ9I2Zvcm0gLnNfYnRuOmhvdmVye2JhY2tncm91bmQ6IzM0NzZkMjtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjMzQ3NmQyfSNzX3RhYiBie2NvbG9yOiMzNDc2ZDI7Ym9yZGVyLWJvdHRvbTozcHggIzM0NzZkMiBzb2xpZH0jc190YWJ7Ym9yZGVyLWJvdHRvbTojZTBlMGUwIDFweCBzb2xpZH0jY29udGFpbmVyIC5oZWFkX251bXNfY29udF9vdXRlciAuc2VhcmNoX3Rvb2xfY29udGVyLCNjb250YWluZXIgLmhlYWRfbnVtc19jb250X291dGVyIC5udW1ze3dpZHRoOjYzMHB4fSNzZWFyY2ggI3Jzb3thbmltYXRpb24tbmFtZTphbmlfYm90dG9tVG90b3A7YW5pbWF0aW9uLWR1cmF0aW9uOi4zczthbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2V9LnNycCBmb3Jte2FuaW1hdGlvbi1uYW1lOmFuaV9sZWZ0VG9yaWdodDthbmltYXRpb24tZHVyYXRpb246LjNzO2FuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246ZWFzZS1vdXR9I3JzbyAualVta0ZiOmhvdmVye21hcmdpbjowIGF1dG87Ym9yZGVyLWxlZnQ6dW5zZXQ7cGFkZGluZzowIDIwcHggMTVweDttYXJnaW4tYm90dG9tOjQwcHh9I3JzLCNyc28+Lmd7d2lkdGg6NzYwcHg7cGFkZGluZzowIDIwcHggMTVweDttYXJnaW4tdG9wOjA7bWFyZ2luLWJvdHRvbTo0MHB4O2JvcmRlci1yYWRpdXM6NXB4O2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym9yZGVyOjFweCBzb2xpZCByZ2JhKDAsMCwwLC4xKTt0cmFuc2l0aW9uOmFsbCAuMjVzIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9I3JzLCNyc28gLmcgZGl2LnJjIC5ze21heC13aWR0aDp1bnNldH0jcnNvIC5nOmhvdmVye2JvcmRlcjoxcHggc29saWQgcmdiYSgwLDAsMCwuMyk7Ym94LXNoYWRvdzowIDAgMXB4IGdyZXk7LXdlYmtpdC1ib3gtc2hhZG93OjAgMCAxcHggZ3JleTstbW96LWJveC1zaGFkb3c6MCAwIDFweCBncmF5fSNyc28gLmdbdHBsPXNvZnRdIC5vcC1zb2Z0LXRpdGxlLCNyc28gLmcgZGl2LnJ7bWFyZ2luOjAgLTIwcHggMTBweDtwYWRkaW5nOjhweCAyMHB4IDVweDtib3JkZXItcmFkaXVzOjVweCA1cHggMCAwfSNyc28gLmYxMyBhLCNyc28gLmYxMyBlbSwjcnNvIC5jLXNwYW4xOCBhLCNyc28gLnN1YkxpbmtfZmFjdG9yeSBhLCNyc28gLmMtdGFicy1jb250ZW50IGEsI3JzbyAub3Bfb2ZmaWNhbF93ZWlib19jb250ZW50IGEsI3JzbyAub3Bfb2ZmaWNhbF93ZWlib19weiBhLCNyc28gLm9wX3RpZWJhMl90YWJsaW5rc19jb250YWluZXIgYSwjcnNvIC5vcC10aWViYS1nZW5lcmFsLXJpZ2h0LCNyc28gLm9wX2RxMDFfdGl0bGUsI3JzbyAub3BfZHEwMV90YWJsZSBhLCNyc28gLm9wX2RxMDFfbW9yZWxpbmsgYSwjcnNvIC5vcC10aWViYS1nZW5lcmFsLW1haW5wbCBhLCNyc28gLm9wLXNlLWxpc3Rlbi1yZWNvbW1lbmQsI3JzbyAuYy1vZmZzZXQ+ZGl2IGF7dGV4dC1kZWNvcmF0aW9uOm5vbmU7Y29sb3I6IzM0NzZkMn0jcnNvIC5mMTMgYTpob3ZlciwjcnNvIC5mMTMgZW06aG92ZXIsI3JzbyAuc3ViTGlua19mYWN0b3J5IGE6aG92ZXIsI3JzbyAuYy10YWJzLWNvbnRlbnQgYTpob3ZlciwjcnNvIC5vcF90aWViYTJfdGFibGlua3NfY29udGFpbmVyIGE6aG92ZXIsI3JzbyAub3AtdGllYmEtZ2VuZXJhbC1yaWdodDpob3ZlciwjcnNvIC5vcF9kcTAxX3RpdGxlOmhvdmVyLCNyc28gLm9wX2RxMDFfdGFibGUgYTpob3ZlciwjcnNvIC5vcF9kcTAxX21vcmVsaW5rIGE6aG92ZXIsI3JzbyAub3AtdGllYmEtZ2VuZXJhbC1tYWlucGwgYTpob3ZlciwjcnNvIC5vcC1zZS1saXN0ZW4tcmVjb21tZW5kOmhvdmVyLCNyc28gLmMtb2Zmc2V0PmRpdiBhOmhvdmVye3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmUhaW1wb3J0YW50fSNyc28gLmYxMyBhe2NvbG9yOmdyZWVufSNyc28gLmMtc3BhbjE4LCNyc28gLmMtc3BhbjI0e3dpZHRoOjEwMCU7bWluLXdpZHRoOnVuc2V0fSNyc28gLmMtYm9yZGVye3dpZHRoOmF1dG87Ym9yZGVyOm5vbmU7Ym9yZGVyLWJvdHRvbS1jb2xvcjp0cmFuc3BhcmVudDtib3JkZXItcmlnaHQtY29sb3I6dHJhbnNwYXJlbnQ7Ym94LXNoYWRvdzowIDAgMCB0cmFuc3BhcmVudDstd2Via2l0LWJveC1zaGFkb3c6MCAwIDAgdHJhbnNwYXJlbnQ7LW1vei1ib3gtc2hhZG93OjAgMCAwIHRyYW5zcGFyZW50Oy1vLWJveC1zaGFkb3c6MCAwIDAgdHJhbnNwYXJlbnR9I3JzbyAuc2VfY29tX2lycmVndWxhcl9nYWxsZXJ5IHVsIGxpLCNyc28gLm9wX2ppbmd5YW5fbGlzdCwjcnNvIC5nIC5vcC1pbWctYWRkcmVzcy1saW5rLXR5cGV7ZGlzcGxheTppbmxpbmUtYmxvY2s7bWFyZ2luLWxlZnQ6MTBweH0jcnNvIC5nW3RwbD1zb2Z0XSAub3Atc29mdC10aXRsZSBhLCNyc28gLmdbdHBsPXNvZnRdIC5vcC1zb2Z0LXRpdGxlIGEgZW0sI3JzbyAuZyBkaXYucj5hLCNyc28gLmcgYSBoMywjcnNvIC5nIGRpdi5yPmEgZW0sLm13ICNyZXMgaDMsLm13ICNleHRyYXJlcyBoM3tjb2xvcjojMzQ3NmQyO2ZvbnQtd2VpZ2h0OjcwMH0jcnNvIC5vcC1zb2Z0LXRpdGxlIGE6dmlzaXRlZCwjcnNvIC5vcC1zb2Z0LXRpdGxlIGE6dmlzaXRlZCBlbSwjcnNvIC5nIGRpdi5yPmE6dmlzaXRlZCwjcnNvIC5nIGRpdi5yPmE6dmlzaXRlZCBlbSwjcnNvIC5nIGE6dmlzaXRlZCBoM3tjb2xvcjojNjA5fSNyc28gLm9wLXNvZnQtdGl0bGUgYSwjcnNvIC5nIGRpdi5yPmF7cG9zaXRpb246cmVsYXRpdmV9I3JzbyAub3Atc29mdC10aXRsZSBhIGVtLCNyc28gLmcgZGl2LnI+YSBlbXt0ZXh0LWRlY29yYXRpb246bm9uZX0jcnNvIC5vcC1zb2Z0LXRpdGxlIGE6aG92ZXI6YWZ0ZXIsI3JzbyAuZyBkaXYucj5hOmhvdmVyOmFmdGVye2xlZnQ6MDt3aWR0aDoxMDAlOy13ZWJraXQtdHJhbnNpdGlvbjp3aWR0aCAzNTBtczstbW96LXRyYW5zaXRpb246d2lkdGggMzUwbXM7dHJhbnNpdGlvbjp3aWR0aCAzNTBtc30jcnNvIC5vcC1zb2Z0LXRpdGxlIGE6YWZ0ZXIsI3JzbyAuZyBkaXYucj5hOmFmdGVye2NvbnRlbnQ6IiI7cG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyLWJvdHRvbToycHggc29saWQgIzM0NzZkMjtib3R0b206LTJweDtsZWZ0OjEwMCU7d2lkdGg6MDstd2Via2l0LXRyYW5zaXRpb246d2lkdGggMzUwbXMsbGVmdCAzNTBtczstbW96LXRyYW5zaXRpb246d2lkdGggMzUwbXMsbGVmdCAzNTBtczt0cmFuc2l0aW9uOndpZHRoIDM1MG1zLGxlZnQgMzUwbXN9I3JzbyAub3Atc29mdC10aXRsZSBhLCNyc28gLmcgZGl2LnI+YXtwb3NpdGlvbjpyZWxhdGl2ZX0jcnNvIC5vcC1zb2Z0LXRpdGxlIGE6dmlzaXRlZDpob3ZlcjphZnRlciwjcnNvIC5nIGRpdi5yPmE6dmlzaXRlZDpob3ZlcjphZnRlcntsZWZ0OjA7d2lkdGg6MTAwJTstd2Via2l0LXRyYW5zaXRpb246d2lkdGggMzUwbXM7LW1vei10cmFuc2l0aW9uOndpZHRoIDM1MG1zO3RyYW5zaXRpb246d2lkdGggMzUwbXN9I3JzbyAub3Atc29mdC10aXRsZSBhOnZpc2l0ZWQ6YWZ0ZXIsI3JzbyAuZyBkaXYucj5hOnZpc2l0ZWQ6YWZ0ZXJ7Y29udGVudDoiIjtwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXItYm90dG9tOjJweCBzb2xpZCAjNjA5O2JvdHRvbTotMnB4O2xlZnQ6MTAwJTt3aWR0aDowOy13ZWJraXQtdHJhbnNpdGlvbjp3aWR0aCAzNTBtcyxsZWZ0IDM1MG1zOy1tb3otdHJhbnNpdGlvbjp3aWR0aCAzNTBtcyxsZWZ0IDM1MG1zO3RyYW5zaXRpb246d2lkdGggMzUwbXMsbGVmdCAzNTBtc30jcnN7bWFyZ2luLXRvcDowO3BhZGRpbmc6MCAyMHB4IDE1cHg7Ym9yZGVyLXJhZGl1czo1cHh9I3JzIC50dHttYXJnaW46MCAtMjBweCA1cHg7cGFkZGluZzo1cHggMjBweDtiYWNrZ3JvdW5kLWNvbG9yOiNmOGY4Zjg7Ym9yZGVyLXJhZGl1czo1cHggNXB4IDAgMH0jcnMgdGFibGV7d2lkdGg6NjMwcHg7cGFkZGluZzo1cHggMTVweH0jcnMgdGFibGUgdHIgYXttYXJnaW4tdG9wOjVweDttYXJnaW4tYm90dG9tOjVweDtjb2xvcjojMzQ3NmQyfSNycyB0YWJsZSB0ciBhOmhvdmVye3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmV9I3BhZ2V7bWluLXdpZHRoOjcxMHB4O2hlaWdodDo0MHB4O2xpbmUtaGVpZ2h0OjQwcHg7cGFkZGluZy10b3A6NXB4O21hcmdpbjowIDAgNTBweCA4MHB4fS5vcC1pbWctYWRkcmVzcy1kZXNrdG9wLWNvbnR7b3ZlcmZsb3c6aGlkZGVufSNwYWdlIGEsI3BhZ2Ugc3Ryb25ne2NvbG9yOiMzNDc2ZDI7aGVpZ2h0OmF1dG87Ym94LXNoYWRvdzowIDAgMjBweCAycHggcmdiYSgwLDAsMCwuMSk7LXdlYmtpdC1ib3gtc2hhZG93OjAgMCAyMHB4IDJweCByZ2JhKDAsMCwwLC4xKTstbW96LWJveC1zaGFkb3c6MCAwIDIwcHggMnB4IHJnYmEoMCwwLDAsLjEpfSNwYWdlIC5uOmhvdmVyLCNwYWdlIGE6aG92ZXIgLnBje2JvcmRlcjoxcHggc29saWQgdHJhbnNwYXJlbnQ7YmFja2dyb3VuZDojZDhkOGQ4O2NvbG9yOiMwMDU3ZGF9I3BhZ2Ugc3Ryb25nIC5wY3tiYWNrZ3JvdW5kOiMzNDc2ZDI7Y29sb3I6I2ZmZn1Aa2V5ZnJhbWVzIGFuaV9ib3R0b21Ub3RvcHswJXt0cmFuc2Zvcm06dHJhbnNsYXRlWSgzMnB4KTtvcGFjaXR5OjB9MjAle29wYWNpdHk6MH0zMCV7b3BhY2l0eTouOH0xMDAle29wYWNpdHk6MX19QGtleWZyYW1lcyBhbmlfbGVmdFRvcmlnaHR7MCV7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTMycHgpO29wYWNpdHk6MH0yMCV7b3BhY2l0eTowfTMwJXtvcGFjaXR5Oi44fTEwMCV7b3BhY2l0eToxfX0jcnNvPmRpdjpub3QoW2NsYXNzXSl7bWFyZ2luLWxlZnQ6MThweDttYXJnaW4tcmlnaHQ6MThweH0jcnNvIC5nIC5leHAtb3V0bGluZXtkaXNwbGF5Om5vbmV9I21haW4gLm13ICNyaHN7bWFyZ2luLWxlZnQ6MTAyMHB4fSNyZXMgLmcgLnRze21heC13aWR0aDp1bnNldH1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOjE0MDBweCl7Lm13ICNyaHN7ZGlzcGxheTpub25lfX1jaXRle2ZvbnQtd2VpZ2h0OjQwMDt3aGl0ZS1zcGFjZTpub3dyYXB9ZGl2LnJlc190b3BfYmFubmVyICNmb290LCNwYWcgI3JlcyAucntsaW5lLWhlaWdodDoxLjN9I3Jlc3twYWRkaW5nOjB9I3JzLCNyc28gLmd7bWFyZ2luLWJvdHRvbToyMHB4O2JvcmRlci1yYWRpdXM6MTBweH0jcnNvIC5nIGRpdi5ye2JvcmRlci1yYWRpdXM6MTBweCAxMHB4IDAgMH0jcnNvIC5nIC5jYXJkLXNlY3Rpb24sI2NlbnRlcl9jb2wgLmtwLWJsa3t3aWR0aDoxMDAlIWltcG9ydGFudH0uYzJ4elRiIC5nLC5ydVRjSWQgLmcsLmZtMDZJZiAuZywuY1VuUUtlIC5nLC5IYW5RbWYgLmd7d2lkdGg6NzU4cHg7cGFkZGluZy1sZWZ0OjIwcHghaW1wb3J0YW50O3BhZGRpbmctcmlnaHQ6MjBweCFpbXBvcnRhbnQ7Ym94LXNoYWRvdzowIDAgMCAwICMwMDB9ZGl2IC54Znh4NWR7bWFyZ2luLWJvdHRvbTotMThweCFpbXBvcnRhbnQ7bWFyZ2luLXRvcDotMjVweCFpbXBvcnRhbnR9ZGl2IC54YXFKemYueGZ4eDVkIC5rbm8tZnRye21hcmdpbi10b3A6MTBweCFpbXBvcnRhbnR9ZGl2IC5rbm8tZnRyIGF7cG9zaXRpb246c3RpY2t5fS5tdyAjcmVzIGgzLC5tdyAjZXh0cmFyZXMgaDN7Zm9udC1zaXplOm1lZGl1bX0jcnNvPi5nIC5yPmE+ZGl2e3dpZHRoOjM1cmVtfWRpdi5yY1thYy1uZWVkaGlkZV17bWFyZ2luLXRvcDo1cHg7bWFyZ2luLWJvdHRvbTotMTVweH0ubG9nb3t0b3A6dW5zZXR9Ym9keVtnb29nbGVdIC5iaWcgLmJhaWR1e3RyYW5zZm9ybTp1bnNldCFpbXBvcnRhbnQ7bWFyZ2luLXRvcDotMTBweDttYXJnaW4tbGVmdDotMnJlbX1ib2R5W2dvb2dsZV0gLmJpZyAuYmFpZHUgI2xvZ28gaW1ne21hcmdpbi10b3A6LTE1cHh9Ym9keVtnb29nbGVdIC5iaWcubWluaWRpdiAuYmFpZHUgI2xvZ28gaW1ne2hlaWdodDo1OXB4O3dpZHRoOnVuc2V0O21hcmdpbi10b3A6LTE4cHh9LkFDLnNwLXNlcGFyYXRvcnttYXJnaW4tdG9wOi0yMHB4fS5yYyAuSXNadmVje21heC13aWR0aDp1bnNldH0="},{"meta":{"name":"googleOnePageStyle.css","url":"http://ibaidu.ntaow.com/newcss/googleOnePageStyle.css?t=24.12","ts":1607932532011,"mimetype":"text/css"},"source":"I3Jzb3twb3NpdGlvbjpyZWxhdGl2ZTtmbG9hdDp1bnNldH0jcnNvIC5qVW1rRmI6aG92ZXJ7bWFyZ2luLWJvdHRvbTozMHB4O21hcmdpbi1sZWZ0OjIwcHh9I3JzbyAuZ3t3aWR0aDp1bnNldDttYXJnaW4tbGVmdDoyMHB4O292ZXJmbG93OmhpZGRlbjtwYWRkaW5nOjAgMjBweCAxNXB4O21hcmdpbi10b3A6MDttYXJnaW4tYm90dG9tOjMwcHg7Ym9yZGVyLXJhZGl1czo1cHg7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JveC1zaXppbmc6Ym9yZGVyLWJveDt0cmFuc2l0aW9uOmFsbCAuMjVzIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9LnNlYXJjaD4jaXJlcyAjcnNvPi5ne21heC13aWR0aDp1bnNldH0jbWFpbiAubXcgI3Joc3tkaXNwbGF5Om5vbmV9I21haW4gLm13e21heC13aWR0aDp1bnNldH0jbWFpbiAjY250LCNjbnQgI2NlbnRlcl9jb2wsI2NudCAjZm9vdHt3aWR0aDo1MHZ3O21hcmdpbjowIGF1dG99Ym9keSAjYXBwYmFyLGJvZHkgLnJoc2NvbCxib2R5ICN0b3BfbmF2LGJvZHkgI2ZiYXJ7bWluLXdpZHRoOnVuc2V0fSNyc28gZy1zY3JvbGxpbmctY2Fyb3VzZWx7bWFyZ2luOnVuc2V0O21hcmdpbi1sZWZ0OjIwcHh9LmNvbHt3aWR0aDoxMDAlIWltcG9ydGFudH0uY29sICNjZW50ZXJfY29se3dpZHRoOjEwMCUhaW1wb3J0YW50O21hcmdpbi1sZWZ0OnVuc2V0IWltcG9ydGFudH0uc3JwIC5iaWcgI3RzZnt3aWR0aDo4MzNweH0uc3JwIGZvcm17bWFyZ2luOjAgYXV0b30jdG9wX25hdnttaW4td2lkdGg6dW5zZXR9LnNycCBmb3JtIGRpdltqc2NvbnRyb2xsZXJde21hcmdpbi1sZWZ0OnVuc2V0O21hcmdpbjowIGF1dG99Zy1zZWN0aW9uLXdpdGgtaGVhZGVye3RleHQtYWxpZ246Y2VudGVyfQ=="},{"meta":{"name":"googleTwoPageStyle.css","url":"http://ibaidu.ntaow.com/newcss/googleTwoPageStyle.css?t=24.12","ts":1607929008951,"mimetype":"text/css"},"source":"I3Jzb3twb3NpdGlvbjpyZWxhdGl2ZTtmbG9hdDp1bnNldH0jcnNvIC5qVW1rRmI6aG92ZXJ7bWFyZ2luLWJvdHRvbTozMHB4O21hcmdpbi1sZWZ0OjIwcHh9I3JzbyAuZywudmtfY3t3aWR0aDp1bnNldDttYXJnaW4tbGVmdDoyMHB4O292ZXJmbG93OmhpZGRlbjtwYWRkaW5nOjEwcHggMjBweCAxNXB4O21hcmdpbi10b3A6MDttYXJnaW4tYm90dG9tOjI1cHg7Ym9yZGVyLXJhZGl1czo1cHg7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JveC1zaXppbmc6Ym9yZGVyLWJveDt0cmFuc2l0aW9uOmFsbCAuMjVzIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9LnNlYXJjaD4jaXJlcyAjcnNvPi5ne21heC13aWR0aDp1bnNldH0jbWFpbiAubXcgI3Joc3tkaXNwbGF5Om5vbmV9I21haW4gLm13e21heC13aWR0aDp1bnNldH0jbWFpbiAjY250LCNjbnQgI2NlbnRlcl9jb2wsI2NudCAjZm9vdHt3aWR0aDo4MHZ3O21hcmdpbjowIGF1dG99Ym9keSAjYXBwYmFyLGJvZHkgLnJoc2NvbCxib2R5ICN0b3BfbmF2LGJvZHkgI2ZiYXJ7bWluLXdpZHRoOnVuc2V0fSNyc28gLkNPRW9pZHttYXJnaW46dW5zZXR9LmNvbHt3aWR0aDoxMDAlIWltcG9ydGFudH0uY29sICNjZW50ZXJfY29se3dpZHRoOjEwMCUhaW1wb3J0YW50O21hcmdpbi1sZWZ0OnVuc2V0IWltcG9ydGFudH0uc3JnLCNyc297ZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczpyZXBlYXQoYXV0by1maXQsbWlubWF4KDUwJSwxZnIpKTtncmlkLXRlbXBsYXRlLWFyZWFzOiJ4bWFpbiB4bWFpbiJ9I3Jzbz5kaXY6bm90KC5nKSwjcnNvIC5zcmd7Z3JpZC1jb2x1bW4tc3RhcnQ6MTtncmlkLWNvbHVtbi1lbmQ6eG1haW4tZW5kfS5zcnAgZm9ybXttYXJnaW46MCBhdXRvfS5zcnAgZm9ybSBkaXZbanNjb250cm9sbGVyXXttYXJnaW4tbGVmdDp1bnNldDttYXJnaW46MCBhdXRvfWctc2VjdGlvbi13aXRoLWhlYWRlcnt0ZXh0LWFsaWduOmNlbnRlcn0="},{"meta":{"name":"bingCommonStyle.css","url":"http://ibaidu.ntaow.com/newcss/bingCommonStyle.css?t=24.12","ts":1607932532022,"mimetype":"text/css"},"source":"Ym9keXtiYWNrZ3JvdW5kLWNvbG9yOiNmNWY1ZjV9I2JfY29udGVudCAjYl9yZXN1bHRzPmxpOm5vdCgjbWZhX3Jvb3Qpe3dpZHRoOjY3MHB4O3BhZGRpbmc6MTJweCAyMHB4IWltcG9ydGFudDttYXJnaW4tdG9wOjA7bWFyZ2luLWJvdHRvbToyNXB4O2JvcmRlci1yYWRpdXM6NXB4O2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym9yZGVyOjFweCBzb2xpZCByZ2JhKDAsMCwwLC4xKTt0cmFuc2l0aW9uOmFsbCAuMjVzIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7b3ZlcmZsb3c6aGlkZGVufSNiX2NvbnRlbnQgI2JfcmVzdWx0cyBhLCNiX2NvbnRlbnQgI2JfcmVzdWx0cyBoMiBhe3Bvc2l0aW9uOnJlbGF0aXZlO2NvbG9yOiMzNDc2ZDJ9I2JfY29udGVudCAjYl9yZXN1bHRzIGgyIGEsI2JfcmVzdWx0cyBoMiBzdHJvbmd7Zm9udC13ZWlnaHQ6NzAwO2ZvbnQtc2l6ZTptZWRpdW19I2JfY29udGVudCAjYl9yZXN1bHRzPmxpOmhvdmVye2JvcmRlcjoxcHggc29saWQgcmdiYSgwLDAsMCwuMyk7YmFja2dyb3VuZDojZmNmY2ZjIWltcG9ydGFudDtib3gtc2hhZG93OjAgMCAxcHggZ3JleTstd2Via2l0LWJveC1zaGFkb3c6MCAwIDFweCBncmV5Oy1tb3otYm94LXNoYWRvdzowIDAgMXB4IGdyYXl9I2JfY29udGVudD4jYl9yZXN1bHRzIGxpOm5vdCgjbWZhX3Jvb3QpIGgye2JhY2tncm91bmQtY29sb3I6I2Y4ZjhmODttYXJnaW46LTEycHggLTIwcHggMTBweDtwYWRkaW5nOjhweCAyMHB4IDVweDtib3JkZXItcmFkaXVzOjVweCA1cHggMCAwfWEsYSBzdHJvbmd7dGV4dC1kZWNvcmF0aW9uOm5vbmV9I2JfY29udGVudCAjYl9yZXN1bHRzIGEgc3Ryb25nLCNiX2NvbnRlbnQgI2JfcmVzdWx0cyBoMiBhIHN0cm9uZ3t0ZXh0LWRlY29yYXRpb246bm9uZX0uYl9hbGdvOmZpcnN0LWNoaWxkOmhvdmVyIGgyIGF7dGV4dC1kZWNvcmF0aW9uOm5vbmUhaW1wb3J0YW50fSNiX2NvbnRlbnQgI2JfcmVzdWx0cyBhOmhvdmVyOmFmdGVyLCNiX2NvbnRlbnQgI2JfcmVzdWx0cyBoMiBhOmhvdmVyOmFmdGVye2xlZnQ6MDt3aWR0aDoxMDAlOy13ZWJraXQtdHJhbnNpdGlvbjp3aWR0aCAzNTBtczstbW96LXRyYW5zaXRpb246d2lkdGggMzUwbXM7dHJhbnNpdGlvbjp3aWR0aCAzNTBtc30jYl9jb250ZW50ICNiX3Jlc3VsdHMgYTpob3ZlciwjYl9jb250ZW50ICNiX3Jlc3VsdHMgaDIgYTpob3Zlcnt0ZXh0LWRlY29yYXRpb246bm9uZX0jYl9jb250ZW50ICNiX3Jlc3VsdHMgYTphZnRlciwjYl9jb250ZW50ICNiX3Jlc3VsdHMgaDIgYTphZnRlcntjb250ZW50OiIiO3Bvc2l0aW9uOmFic29sdXRlO2JvcmRlci1ib3R0b206MnB4IHNvbGlkICMzNDc2ZDI7Ym90dG9tOi0ycHg7bGVmdDoxMDAlO3dpZHRoOjA7LXdlYmtpdC10cmFuc2l0aW9uOndpZHRoIDM1MG1zLGxlZnQgMzUwbXM7LW1vei10cmFuc2l0aW9uOndpZHRoIDM1MG1zLGxlZnQgMzUwbXM7dHJhbnNpdGlvbjp3aWR0aCAzNTBtcyxsZWZ0IDM1MG1zfSNiX2NvbnRlbnQgI2JfcmVzdWx0cyBoMiBhOnZpc2l0ZWQsI2JfY29udGVudCAjYl9yZXN1bHRzIGgyIGE6dmlzaXRlZCBzdHJvbmcsI2JfY29udGVudCAjYl9yZXN1bHRzIGgyIGgyIGE6dmlzaXRlZCwjYl9jb250ZW50ICNiX3Jlc3VsdHMgaDIgaDIgYTp2aXNpdGVkIHN0cm9uZ3tjb2xvcjojNjA5fSNiX2NvbnRlbnQgI2JfcmVzdWx0cyBoMiBhOnZpc2l0ZWQ6aG92ZXI6YWZ0ZXIsI2JfY29udGVudCAjYl9yZXN1bHRzIGgyIGgyIGE6dmlzaXRlZDpob3ZlcjphZnRlcntsZWZ0OjA7d2lkdGg6MTAwJTstd2Via2l0LXRyYW5zaXRpb246d2lkdGggMzUwbXM7LW1vei10cmFuc2l0aW9uOndpZHRoIDM1MG1zO3RyYW5zaXRpb246d2lkdGggMzUwbXN9I2JfY29udGVudD5vbCNiX2NvbnRleHR7ZGlzcGxheTpub25lfWJvZHkgI2JfaGVhZGVye2JhY2tncm91bmQtY29sb3I6I2Y1ZjVmNX0jYl9jb250ZW50IC5iX3VuZGVyU2VhcmNoYm94e21hcmdpbi10b3A6MTBweH0jYl9oZWFkZXIgLmJfc2NvcGViYXJ7bWFyZ2luOnVuc2V0fS50c2YtcD4ubG9nb2NvbnQsI3Nlai1jb250YWluZXJ7bWFyZ2luLXJpZ2h0OjM1MHB4O3RleHQtYWxpZ246Y2VudGVyfS50c2YtcD4uc2ZpYmJiY3ttYXJnaW4tcmlnaHQ6MzUwcHg7dGV4dC1hbGlnbjpjZW50ZXJ9LmJfc2VhcmNoYm94Rm9ybSAuc2FfdG17dGV4dC1hbGlnbjpsZWZ0fWJvZHkgI2JfaGVhZGVyICNlc3Rfc3dpdGNoe21hcmdpbjowIGF1dG87cGFkZGluZy1yaWdodDoxMCV9Ym9keSAjZXN0X2NuOjphZnRlcixib2R5ICNlc3RfZW46OmFmdGVye3RyYW5zZm9ybTpzY2FsZSgxLjEsMS4zKSBwZXJzcGVjdGl2ZSguNWVtKSByb3RhdGVYKDBkZWcpOy13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDEuMSwxLjMpIHBlcnNwZWN0aXZlKC41ZW0pIHJvdGF0ZVgoMGRlZyl9QG1lZGlhKG1heC13aWR0aDoxMTAwcHgpe2JvZHkgI2JfaGVhZGVyICNlc3Rfc3dpdGNoe3RyYW5zZm9ybTp0cmFuc2xhdGVYKDEuMnJlbSl9fSNiX2NvbnRlbnR7YW5pbWF0aW9uLW5hbWU6YW5pX2JvdHRvbVRvdG9wO2FuaW1hdGlvbi1kdXJhdGlvbjouNnM7YW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjplYXNlfWJvZHkgI2JfaGVhZGVye2FuaW1hdGlvbi1uYW1lOmFuaV90b3BUb2J1dHRvbTthbmltYXRpb24tZHVyYXRpb246LjZzO2FuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246ZWFzZS1vdXR9Ym9keXthbmltYXRpb24tbmFtZTphbmlfaGlkZVRvU2hvdzthbmltYXRpb24tZHVyYXRpb246LjZzO2FuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246ZWFzZS1vdXR9LkFDLnNwLXNlcGFyYXRvcnttYXJnaW4tdG9wOi0xNXB4fUBrZXlmcmFtZXMgYW5pX2xlZnRUb3JpZ2h0ezAle3RyYW5zZm9ybTp0cmFuc2xhdGVYKC0zMnB4KTtvcGFjaXR5OjB9MjAle29wYWNpdHk6MH0zMCV7b3BhY2l0eTouOH0xMDAle29wYWNpdHk6MX19QGtleWZyYW1lcyBhbmlfYm90dG9tVG90b3B7MCV7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMzJweCk7b3BhY2l0eTowfTIwJXtvcGFjaXR5OjB9MzAle29wYWNpdHk6Ljh9MTAwJXtvcGFjaXR5OjF9fUAtd2Via2l0LWtleWZyYW1lcyBhbmlfdG9wVG9idXR0b217MCV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgtMzJweCk7b3BhY2l0eTowfTIwJXtvcGFjaXR5OjB9MzAle29wYWNpdHk6Ljh9MTAwJXtvcGFjaXR5OjF9fUAtd2Via2l0LWtleWZyYW1lcyBhbmlfaGlkZVRvU2hvd3swJXtkaXNwbGF5Om5vbmU7b3BhY2l0eTowfTIwJXtkaXNwbGF5Om5vbmU7b3BhY2l0eTowfTMwJXtkaXNwbGF5Om5vbmU7b3BhY2l0eTouOH0xMDAle29wYWNpdHk6MX19"},{"meta":{"name":"bingOnePageStyle.css","url":"http://ibaidu.ntaow.com/newcss/bingOnePageStyle.css?t=24.12","ts":1607932532022,"mimetype":"text/css"},"source":"I2JfY29udGVudCBhc2lkZXtkaXNwbGF5Om5vbmV9I2JfY29udGVudCAjYl9yZXN1bHRze3dpZHRoOjczdnc7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczpjZW50ZXI7bWF4LXdpZHRoOjEwMDBweH1ib2R5ICNiX2hlYWRlcnt3aWR0aDo3MnZ3O3RleHQtYWxpZ246Y2VudGVyO21hcmdpbjowIGF1dG99Ym9keSAjYl9jb250ZW50e2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO21hcmdpbi1sZWZ0OnVuc2V0O3BhZGRpbmctbGVmdDp1bnNldH0jYl9jb250ZW50ICNiX3Jlc3VsdHM+bGk6bm90KCNtZmFfcm9vdCl7d2lkdGg6OTglfQ=="},{"meta":{"name":"bingTwoPageStyle.css","url":"http://ibaidu.ntaow.com/newcss/bingTwoPageStyle.css?t=24.12","ts":1607932532023,"mimetype":"text/css"},"source":"I2NvbnRhaW5lciAjY29udGVudF9sZWZ0IC5oaXRfdG9wX25ldywjYl9jb250ZW50IGFzaWRlLCNiX3Jlc3VsdHMgI21mYV9yb290e2Rpc3BsYXk6bm9uZX0jYl9jb250ZW50ICNiX3Jlc3VsdHN7d2lkdGg6NzN2dztncmlkLXRlbXBsYXRlLWNvbHVtbnM6cmVwZWF0KGF1dG8tZml0LG1pbm1heCg1MCUsMWZyKSk7Z3JpZC10ZW1wbGF0ZS1hcmVhczoieG1haW4geG1haW4iO2Rpc3BsYXk6aW5saW5lLWdyaWR9I2JfY29udGVudCAjYl9yZXN1bHRzPmxpOm5vdCgjbWZhX3Jvb3Qpe3dpZHRoOjk4JTttYXJnaW4tbGVmdDoxJX0jYl9yZXN1bHRzIC5iX2FsZ28gLmJfZGVlcCB1bHt3aWR0aDo1MCV9I2JfbXNnLCNiX3BhZ3tncmlkLWNvbHVtbi1lbmQ6eG1haW4tZW5kO2dyaWQtY29sdW1uLXN0YXJ0OjE7YmFja2dyb3VuZC1jb2xvcjojZmZmfWJvZHkgI2JfY29udGVudHtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OmNlbnRlcjttYXJnaW4tbGVmdDp1bnNldDtwYWRkaW5nLWxlZnQ6dW5zZXR9Ym9keSAjYl9oZWFkZXJ7d2lkdGg6NzJ2dzt0ZXh0LWFsaWduOmNlbnRlcjttYXJnaW46MCBhdXRvfQ=="},{"meta":{"name":"duckCommonStyle.css","url":"http://ibaidu.ntaow.com/newcss/duckCommonStyle.css?t=24.12","ts":1607932532036,"mimetype":"text/css"},"source":"Ym9keXtiYWNrZ3JvdW5kLWNvbG9yOiNmNWY1ZjV9LnJlc3VsdF9faWNvbiAucmVzdWx0X19pY29uX19pbWcsLnJlc3VsdF9faWNvbiAucmVzdWx0X19pY29uIGltZ3tkaXNwbGF5Om5vbmV9I2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgaDJ7Zm9udC13ZWlnaHQ6NjAwfSNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1tYWlue21heC13aWR0aDo2NzBweH0jbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcHt3aWR0aDo2NzBweDtvdmVyZmxvdzpoaWRkZW47bWFyZ2luLXRvcDowO21hcmdpbi1ib3R0b206MjVweDtib3JkZXItcmFkaXVzOjVweDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Ym94LXNpemluZzpib3JkZXItYm94O2JvcmRlcjoxcHggc29saWQgcmdiYSgwLDAsMCwuMSk7dHJhbnNpdGlvbjphbGwgLjI1cyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfSNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIC5yZXN1bHRfX3RpdGxlIGF7b3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7bWF4LXdpZHRoOjY0MHB4O2NvbG9yOiMzNDc2ZDI7Zm9udC1zaXplOnNtYWxsZXJ9I2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgLnJlc3VsdF9fYm9keXtwYWRkaW5nOjEycHggMjBweCFpbXBvcnRhbnR9I2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXA6aG92ZXJ7Ym9yZGVyOjFweCBzb2xpZCByZ2JhKDAsMCwwLC4zKTtib3gtc2hhZG93OjAgMCAxcHggZ3JleTstd2Via2l0LWJveC1zaGFkb3c6MCAwIDFweCBncmV5Oy1tb3otYm94LXNoYWRvdzowIDAgMXB4IGdyYXl9I2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgaDJ7YmFja2dyb3VuZC1jb2xvcjojZjhmOGY4O21hcmdpbjotMTJweCAtMjBweCAwO3BhZGRpbmc6OHB4IDIwcHggNXB4O2JvcmRlci1yYWRpdXM6NXB4IDVweCAwIDB9I2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgaDIgYTpob3ZlcjphZnRlcntsZWZ0OjA7d2lkdGg6MTAwJTstd2Via2l0LXRyYW5zaXRpb246d2lkdGggMzUwbXM7LW1vei10cmFuc2l0aW9uOndpZHRoIDM1MG1zO3RyYW5zaXRpb246d2lkdGggMzUwbXN9I2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgaDIgYTphZnRlcntjb250ZW50OiIiO3Bvc2l0aW9uOmFic29sdXRlO2JvcmRlci1ib3R0b206MnB4IHNvbGlkICMzNDc2ZDI7Ym90dG9tOjFweDtsZWZ0OjEwMCU7d2lkdGg6MDstd2Via2l0LXRyYW5zaXRpb246d2lkdGggMzUwbXMsbGVmdCAzNTBtczstbW96LXRyYW5zaXRpb246d2lkdGggMzUwbXMsbGVmdCAzNTBtczt0cmFuc2l0aW9uOndpZHRoIDM1MG1zLGxlZnQgMzUwbXN9I2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgaDIgYTp2aXNpdGVkLCNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIGE6dmlzaXRlZCBzdHJvbmd7Y29sb3I6IzYwOX0jbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMiBhOnZpc2l0ZWQ6aG92ZXI6YWZ0ZXIsI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgaDIgYTp2aXNpdGVkOmhvdmVyOmFmdGVye2xlZnQ6MDt3aWR0aDoxMDAlOy13ZWJraXQtdHJhbnNpdGlvbjp3aWR0aCAzNTBtczstbW96LXRyYW5zaXRpb246d2lkdGggMzUwbXM7dHJhbnNpdGlvbjp3aWR0aCAzNTBtc30jbGlua3Nfd3JhcHBlciAjbGlua3N7YW5pbWF0aW9uLW5hbWU6YW5pX2JvdHRvbVRvdG9wO2FuaW1hdGlvbi1kdXJhdGlvbjouM3M7YW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjplYXNlfSNoZWFkZXJfd3JhcHBlciAuaGVhZGVyX19zZWFyY2gtd3JhcHthbmltYXRpb24tbmFtZTphbmlfbGVmdFRvcmlnaHQ7YW5pbWF0aW9uLWR1cmF0aW9uOi4zczthbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2Utb3V0fUBrZXlmcmFtZXMgYW5pX2xlZnRUb3JpZ2h0ezAle3RyYW5zZm9ybTp0cmFuc2xhdGVYKC0zMnB4KTtvcGFjaXR5OjB9MjAle29wYWNpdHk6MH0zMCV7b3BhY2l0eTouOH0xMDAle29wYWNpdHk6MX19QGtleWZyYW1lcyBhbmlfYm90dG9tVG90b3B7MCV7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMzJweCk7b3BhY2l0eTowfTIwJXtvcGFjaXR5OjB9MzAle29wYWNpdHk6Ljh9MTAwJXtvcGFjaXR5OjF9fQ=="},{"meta":{"name":"duckOnePageStyle.css","url":"http://ibaidu.ntaow.com/newcss/duckOnePageStyle.css?t=24.12","ts":1607932532035,"mimetype":"text/css"},"source":"LmpzLXNpZGViYXItYWRzLCNvcmdhbmljLW1vZHVsZSwucGlubmVkLXRvLWJvdHRvbXtkaXNwbGF5Om5vbmV9LmpzLXJlc3VsdC1oaWRkZW4tZWx7ZGlzcGxheTpub25lIWltcG9ydGFudH0uc2l0ZS13cmFwcGVyICN3ZWJfY29udGVudF93cmFwcGVyIC5jd3tqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2Rpc3BsYXk6ZmxleDttYXgtd2lkdGg6dW5zZXQ7bWFyZ2luLWxlZnQ6LTE1MHB4fSNoZWFkZXJfd3JhcHBlciAjaGVhZGVyLCN3ZWJfY29udGVudF93cmFwcGVyICNsaW5rc193cmFwcGVyIC5zZWFyY2gtZmlsdGVycy13cmFwLCN3ZWJfY29udGVudF93cmFwcGVyICNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1tZXNzYWdle2p1c3RpZnktY29udGVudDpjZW50ZXI7ZGlzcGxheTpncmlkfSNoZWFkZXJfd3JhcHBlciAjaGVhZGVye21heC13aWR0aDp1bnNldH0jaGVhZGVyX3dyYXBwZXIgI2hlYWRlciAuaGVhZGVyX19zZWFyY2gtd3JhcHt3aWR0aDo1MDBweH0jbGlua3Nfd3JhcHBlcntkaXNwbGF5OmlubGluZS1mbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXJ9I2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW57ZmxvYXQ6dW5zZXR9I2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLXNpZGViYXJ7bWluLXdpZHRoOnVuc2V0O21hcmdpbjp1bnNldH0uYm9keS0tc2VycCAuZm9vdGVye2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3BhZGRpbmctbGVmdDp1bnNldH0="},{"meta":{"name":"duckTwoPageStyle.css","url":"http://ibaidu.ntaow.com/newcss/duckTwoPageStyle.css?t=24.12","ts":1607932532038,"mimetype":"text/css"},"source":"LmpzLXNpZGViYXItYWRzLCNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1zaWRlYmFyLCNvcmdhbmljLW1vZHVsZSwucGlubmVkLXRvLWJvdHRvbXtkaXNwbGF5Om5vbmV9LmpzLXJlc3VsdC1oaWRkZW4tZWx7ZGlzcGxheTpub25lIWltcG9ydGFudH0uc2l0ZS13cmFwcGVyICN3ZWJfY29udGVudF93cmFwcGVyIC5jd3tqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2Rpc3BsYXk6ZmxleDttYXgtd2lkdGg6dW5zZXQ7bWFyZ2luLWxlZnQ6LTE1MHB4fSNoZWFkZXJfd3JhcHBlciAjaGVhZGVyLCN3ZWJfY29udGVudF93cmFwcGVyICNsaW5rc193cmFwcGVyIC5zZWFyY2gtZmlsdGVycy13cmFwLCN3ZWJfY29udGVudF93cmFwcGVyICNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1tZXNzYWdle2p1c3RpZnktY29udGVudDpjZW50ZXI7ZGlzcGxheTpncmlkfSNoZWFkZXJfd3JhcHBlciAjaGVhZGVye21heC13aWR0aDp1bnNldH0jaGVhZGVyX3dyYXBwZXIgI2hlYWRlciAuaGVhZGVyX19zZWFyY2gtd3JhcHt3aWR0aDo1MDBweH0jbGlua3Nfd3JhcHBlcntkaXNwbGF5OmlubGluZS1mbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXJ9I2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW57ZmxvYXQ6dW5zZXQ7bWF4LXdpZHRoOnVuc2V0fSNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1zaWRlYmFye21pbi13aWR0aDp1bnNldDttYXJnaW46dW5zZXR9I2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW4gI2xpbmtze3dpZHRoOjgwdnc7ZGlzcGxheTppbmxpbmUtZ3JpZDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6NTAlIDUwJTtncmlkLXRlbXBsYXRlLWFyZWFzOiJ4bWFpbiB4bWFpbiJ9I2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW4gI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXB7d2lkdGg6dW5zZXQ7bWFyZ2luLXJpZ2h0OjE1cHh9I2xpbmtzIC5yZXN1bHQtLW1vcmUsI2xpbmtzIC5yZXN1bHQtLXNlcHtncmlkLWNvbHVtbi1zdGFydDoxO2dyaWQtY29sdW1uLWVuZDp4bWFpbi1lbmQ7d2lkdGg6dW5zZXQhaW1wb3J0YW50O3BhZGRpbmc6MDtwYWRkaW5nLXJpZ2h0OjE1cHh9I2xpbmtzIC5yZXN1bHQtLXNlcHttYXJnaW4tYm90dG9tOjJlbX0uYm9keS0tc2VycCAuZm9vdGVye2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3BhZGRpbmctbGVmdDp1bnNldH0="},{"meta":{"name":"dogeCommonStyle.css","url":"http://ibaidu.ntaow.com/newcss/dogeCommonStyle.css?t=24.12","ts":1607932532052,"mimetype":"text/css"},"source":"Ym9keXtiYWNrZ3JvdW5kLWNvbG9yOiNmNWY1ZjV9LnJlc3VsdHNfbGlua3NfZGVlcCAucmVzdWx0X19pY29ue2Rpc3BsYXk6bm9uZX0jbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMntmb250LXdlaWdodDo2MDB9I2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW57bWF4LXdpZHRoOjY3MHB4fSNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwe3dpZHRoOjY3MHB4O292ZXJmbG93OmhpZGRlbjttYXJnaW4tdG9wOjA7bWFyZ2luLWJvdHRvbToyNXB4O2JvcmRlci1yYWRpdXM6NXB4O2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym9yZGVyOjFweCBzb2xpZCByZ2JhKDAsMCwwLC4xKTt0cmFuc2l0aW9uOmFsbCAuMjVzIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9I2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgLnJlc3VsdF9fdGl0bGUgYXtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpczttYXgtd2lkdGg6NjQwcHg7Y29sb3I6IzM0NzZkMjtmb250LXNpemU6c21hbGxlcn0jbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCAucmVzdWx0X19ib2R5e3BhZGRpbmc6MTJweCAyMHB4IWltcG9ydGFudH0jbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcDpob3Zlcntib3JkZXI6MXB4IHNvbGlkIHJnYmEoMCwwLDAsLjMpO2JveC1zaGFkb3c6MCAwIDFweCBncmV5Oy13ZWJraXQtYm94LXNoYWRvdzowIDAgMXB4IGdyZXk7LW1vei1ib3gtc2hhZG93OjAgMCAxcHggZ3JheX0jbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMntiYWNrZ3JvdW5kLWNvbG9yOiNmOGY4Zjg7bWFyZ2luOi0xMnB4IC0yMHB4IDA7cGFkZGluZzo4cHggMjBweCA1cHg7Ym9yZGVyLXJhZGl1czo1cHggNXB4IDAgMH0jbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMiBhOmhvdmVyOmFmdGVye2xlZnQ6MDt3aWR0aDoxMDAlOy13ZWJraXQtdHJhbnNpdGlvbjp3aWR0aCAzNTBtczstbW96LXRyYW5zaXRpb246d2lkdGggMzUwbXM7dHJhbnNpdGlvbjp3aWR0aCAzNTBtc30jbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMiBhOmFmdGVye2NvbnRlbnQ6IiI7cG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyLWJvdHRvbToycHggc29saWQgIzM0NzZkMjtib3R0b206MXB4O2xlZnQ6MTAwJTt3aWR0aDowOy13ZWJraXQtdHJhbnNpdGlvbjp3aWR0aCAzNTBtcyxsZWZ0IDM1MG1zOy1tb3otdHJhbnNpdGlvbjp3aWR0aCAzNTBtcyxsZWZ0IDM1MG1zO3RyYW5zaXRpb246d2lkdGggMzUwbXMsbGVmdCAzNTBtc30jbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMiBhOnZpc2l0ZWQsI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgaDIgYTp2aXNpdGVkIHN0cm9uZ3tjb2xvcjojNjA5fSNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIGE6dmlzaXRlZDpob3ZlcjphZnRlciwjbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMiBhOnZpc2l0ZWQ6aG92ZXI6YWZ0ZXJ7bGVmdDowO3dpZHRoOjEwMCU7LXdlYmtpdC10cmFuc2l0aW9uOndpZHRoIDM1MG1zOy1tb3otdHJhbnNpdGlvbjp3aWR0aCAzNTBtczt0cmFuc2l0aW9uOndpZHRoIDM1MG1zfSNsaW5rc193cmFwcGVyICNsaW5rc3thbmltYXRpb24tbmFtZTphbmlfYm90dG9tVG90b3A7YW5pbWF0aW9uLWR1cmF0aW9uOi4zczthbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2V9I2hlYWRlcl93cmFwcGVyIC5oZWFkZXJfX3NlYXJjaC13cmFwe2FuaW1hdGlvbi1uYW1lOmFuaV9sZWZ0VG9yaWdodDthbmltYXRpb24tZHVyYXRpb246LjNzO2FuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246ZWFzZS1vdXR9LkFDLnNwLXNlcGFyYXRvcnttYXJnaW4tdG9wOi0xNXB4fUBrZXlmcmFtZXMgYW5pX2xlZnRUb3JpZ2h0ezAle3RyYW5zZm9ybTp0cmFuc2xhdGVYKC0zMnB4KTtvcGFjaXR5OjB9MjAle29wYWNpdHk6MH0zMCV7b3BhY2l0eTouOH0xMDAle29wYWNpdHk6MX19QGtleWZyYW1lcyBhbmlfYm90dG9tVG90b3B7MCV7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMzJweCk7b3BhY2l0eTowfTIwJXtvcGFjaXR5OjB9MzAle29wYWNpdHk6Ljh9MTAwJXtvcGFjaXR5OjF9fQ=="},{"meta":{"name":"dogeOnePageStyle.css","url":"http://ibaidu.ntaow.com/newcss/dogeOnePageStyle.css?t=24.12","ts":1607932532050,"mimetype":"text/css"},"source":"LmpzLXNpZGViYXItYWRzLCNvcmdhbmljLW1vZHVsZSwucGlubmVkLXRvLWJvdHRvbXtkaXNwbGF5Om5vbmV9LmpzLXJlc3VsdC1oaWRkZW4tZWx7ZGlzcGxheTpub25lIWltcG9ydGFudH0uc2l0ZS13cmFwcGVyICN3ZWJfY29udGVudF93cmFwcGVyIC5jd3tqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2Rpc3BsYXk6ZmxleDttYXgtd2lkdGg6dW5zZXR9QG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDoxMDAwcHgpeyNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwe3dpZHRoOjEwMCV9fSNoZWFkZXJfd3JhcHBlciAjaGVhZGVyLCN3ZWJfY29udGVudF93cmFwcGVyICNsaW5rc193cmFwcGVyIC5zZWFyY2gtZmlsdGVycy13cmFwLCN3ZWJfY29udGVudF93cmFwcGVyICNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1tZXNzYWdle2p1c3RpZnktY29udGVudDpjZW50ZXI7ZGlzcGxheTpncmlkfSNoZWFkZXJfd3JhcHBlciAjaGVhZGVye21heC13aWR0aDp1bnNldH0jaGVhZGVyX3dyYXBwZXIgI2hlYWRlciAuaGVhZGVyX19zZWFyY2gtd3JhcHt3aWR0aDo1MDBweH0jbGlua3Nfd3JhcHBlcntkaXNwbGF5OmlubGluZS1mbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXI7cGFkZGluZy1sZWZ0OjB9I2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW57ZmxvYXQ6dW5zZXQ7bWF4LXdpZHRoOjg2MHB4fSNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1zaWRlYmFye21pbi13aWR0aDp1bnNldDttYXJnaW46dW5zZXR9LmJvZHktLXNlcnAgLmZvb3RlcntkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OmNlbnRlcjtwYWRkaW5nLWxlZnQ6dW5zZXR9"},{"meta":{"name":"dogeTwoPageStyle.css","url":"http://ibaidu.ntaow.com/newcss/dogeTwoPageStyle.css?t=24.12","ts":1607932532056,"mimetype":"text/css"},"source":"LmpzLXNpZGViYXItYWRzLCNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1zaWRlYmFyLCNvcmdhbmljLW1vZHVsZSwucGlubmVkLXRvLWJvdHRvbXtkaXNwbGF5Om5vbmV9LmpzLXJlc3VsdC1oaWRkZW4tZWx7ZGlzcGxheTpub25lIWltcG9ydGFudH0uc2l0ZS13cmFwcGVyICN3ZWJfY29udGVudF93cmFwcGVyIC5jd3tqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2Rpc3BsYXk6ZmxleDttYXgtd2lkdGg6dW5zZXQ7bWFyZ2luLWxlZnQ6LTE1MHB4fSNoZWFkZXJfd3JhcHBlciAjaGVhZGVyLCN3ZWJfY29udGVudF93cmFwcGVyICNsaW5rc193cmFwcGVyIC5zZWFyY2gtZmlsdGVycy13cmFwLCN3ZWJfY29udGVudF93cmFwcGVyICNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1tZXNzYWdle2p1c3RpZnktY29udGVudDpjZW50ZXI7ZGlzcGxheTpncmlkfSNoZWFkZXJfd3JhcHBlciAjaGVhZGVye21heC13aWR0aDp1bnNldH0jaGVhZGVyX3dyYXBwZXIgI2hlYWRlciAuaGVhZGVyX19zZWFyY2gtd3JhcHt3aWR0aDo1MDBweH0jbGlua3Nfd3JhcHBlcntkaXNwbGF5OmlubGluZS1mbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXJ9I2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW57ZmxvYXQ6dW5zZXQ7bWF4LXdpZHRoOnVuc2V0fSNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1zaWRlYmFye21pbi13aWR0aDp1bnNldDttYXJnaW46dW5zZXR9I2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW4gI2xpbmtze3dpZHRoOjgwdnc7ZGlzcGxheTppbmxpbmUtZ3JpZDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6NTAlIDUwJTtncmlkLXRlbXBsYXRlLWFyZWFzOiJ4bWFpbiB4bWFpbiJ9I2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW4gI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXB7d2lkdGg6dW5zZXQ7bWFyZ2luLXJpZ2h0OjE1cHh9I2xpbmtzIC5yZXN1bHQtLW1vcmUsI2xpbmtzIC5yZXN1bHQtLXNlcHtncmlkLWNvbHVtbi1zdGFydDoxO2dyaWQtY29sdW1uLWVuZDp4bWFpbi1lbmQ7d2lkdGg6dW5zZXQhaW1wb3J0YW50O3BhZGRpbmc6MDtwYWRkaW5nLXJpZ2h0OjE1cHh9I2xpbmtzIC5yZXN1bHQtLXNlcHttYXJnaW4tYm90dG9tOjJlbX0uYm9keS0tc2VycCAuZm9vdGVye2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3BhZGRpbmctbGVmdDp1bnNldH0="},{"meta":{"name":"HuYanStyle.css","url":"http://ibaidu.ntaow.com/newcss/HuYanStyle.css?t=24.12","ts":1607932532057,"mimetype":"text/css"},"source":"Ym9keVtiYWlkdV0sI3dyYXBwZXIgI2hlYWQsI3dyYXBwZXIgI3NfdGFiLGZvcm0uZm0gLnNfaXB0X3dyLmJne2JhY2tncm91bmQtY29sb3I6I2ZmZn0jd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3AsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LCN3cmFwcGVyICNjb250ZW50X2xlZnQgYXJ0aWNsZSwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lciwjd3JhcHBlciAjcnMsI3dyYXBwZXIgI2NvbnRlbnRfcmlnaHR7YmFja2dyb3VuZC1jb2xvcjojYWFhO2JvcmRlcjoxcHggZG91YmxlICNhMmQ3ZDQ7Ym9yZGVyLXJhZGl1czowfSN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdC1vcDpob3Zlciwjd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQ6aG92ZXIsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LW9wOmhvdmVyIGFydGljbGV7YmFja2dyb3VuZC1jb2xvcjojY2NjIWltcG9ydGFudH0jd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQgaDMsI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LW9wIGgzLCN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtY29udGFpbmVyIGgzLCN3cmFwcGVyICNycyAudHR7YmFja2dyb3VuZC1jb2xvcjojYmJifS5uYV9jbnQgLm53c19pdG0sLm53c19pdG1iLCNiX2NvbnRlbnQgI2JfcmVzdWx0cz5saTpub3QoI21mYV9yb290KSxib2R5ICNiX2hlYWRlcntiYWNrZ3JvdW5kLWNvbG9yOiNhYWE7Ym9yZGVyOjFweCBkb3VibGUgI2EyZDdkNDtib3JkZXItcmFkaXVzOjB9I2JfY29udGVudCAjYl9yZXN1bHRzIGxpOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2NjYyFpbXBvcnRhbnR9I2JfY29udGVudCAjYl9yZXN1bHRzIGxpIGgye2JhY2tncm91bmQtY29sb3I6I2JiYn1ib2R5W2dvb2dsZV17YmFja2dyb3VuZC1jb2xvcjojZmRmZGZkfSNyc28gLmcsLmJrV01nZD4uZywuYmtXTWdkIGctaW5uZXItY2FyZCwjcmhzY29sICNyaHMsI3Joc2NvbCAjcmhzIC5nPmRpdiwuYzJ4elRiIC5nLC5ydVRjSWQgLmcsLmZtMDZJZiAuZywuY1VuUUtlIC5nLC5IYW5RbWYgLmcsI3JzbyAuZywjcnNvPmRpdjpub3QoLmcpPip7YmFja2dyb3VuZC1jb2xvcjojYWFhO2JvcmRlcjoxcHggc29saWQgIzljZDJjZmFhO2JvcmRlci1yYWRpdXM6MH0jcnNvIC5nOmhvdmVyLC5ia1dNZ2Q+Lmc6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojY2NjIWltcG9ydGFudDtib3JkZXI6MXB4IGRvdWJsZSAjOWNkMmNmfS5ia1dNZ2QgLmcgZGl2LnIsI3JzbyAuZyBoM3tiYWNrZ3JvdW5kLWNvbG9yOiNiYmJ9Ym9keVtzb2dvdV0sI3BhZ2ViYXJfY29udGFpbmVyIGF7YmFja2dyb3VuZC1jb2xvcjojZmRmZGZkfSNtYWluIC5yZXN1bHRzPmRpdntiYWNrZ3JvdW5kLWNvbG9yOiNhYWE7Ym9yZGVyOjFweCBzb2xpZCAjOWNkMmNmYWE7Ym9yZGVyLXJhZGl1czowfSNtYWluIC5yZXN1bHRzPmRpdjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNjY2MhaW1wb3J0YW50O2JvcmRlcjoxcHggZG91YmxlICM5Y2QyY2Z9I21haW4gLnJlc3VsdHM+ZGl2IGgze2JhY2tncm91bmQtY29sb3I6I2JiYn1ib2R5W2R1Y2tdLGJvZHlbZG9nZV17YmFja2dyb3VuZC1jb2xvcjojZmRmZGZkfSNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwe2JhY2tncm91bmQtY29sb3I6I2FhYTtib3JkZXI6MXB4IHNvbGlkICM5Y2QyY2ZhYTtib3JkZXItcmFkaXVzOjB9I2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXA6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojY2NjIWltcG9ydGFudDtib3JkZXI6MXB4IGRvdWJsZSAjOWNkMmNmfSNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgye2JhY2tncm91bmQtY29sb3I6I2JiYn0="},{"meta":{"name":"SiteConfigRules.conf","url":"http://ibaidu.ntaow.com/newcss/SiteConfigRules.conf?t=24.12","ts":1607932532061,"mimetype":"text/plain"},"source":"b25saW5lREIgPSB7DQogICBiYWlkdTogew0KICAgICAgIFNpdGVUeXBlSUQ6IDEsDQogICAgICAgTWFpblR5cGU6ICIjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lciIsDQogICAgICAgU3R5cGVfTm9ybWFsOiAiaDMudD5hLCAuYy1jb250YWluZXIgYXJ0aWNsZSBhIiwNCiAgICAgICBGYXZpY29uVHlwZTogIi5jLXNob3d1cmwiLA0KICAgICAgIEZhdmljb25BZGRUbzogImgzIiwNCiAgICAgICBDb3VudGVyVHlwZTogIiNjb250ZW50X2xlZnQ+I2RvdWJsZT5kaXZbc3JjaWRdICpbY2xhc3N+PXRdLFtjbGFzc349b3BfYmVzdF9hbnN3ZXJfcXVlc3Rpb25dLCNjb250ZW50X2xlZnQ+ZGl2W3NyY2lkXSAqW2NsYXNzfj10XSxbY2xhc3N+PW9wX2Jlc3RfYW5zd2VyX3F1ZXN0aW9uXSIsDQogICAgICAgQmxvY2tUeXBlOiAiaDMgYSIsDQogICAgICAgcGFnZXI6ew0KICAgICAgICAgICBuZXh0TGluazogJy8vZGl2W0BpZD0icGFnZSJdLy9hW2NvbnRhaW5zKHRleHQoKSwiw6TCuMKLw6TCuMKAw6nCocK1IildW0BocmVmXScsDQogICAgICAgICAgIHBhZ2VFbGVtZW50OiAiY3NzO2RpdiNjb250ZW50X2xlZnQgPiAqIiwNCiAgICAgICAgICAgSFRfaW5zZXJ0OiBbICJjc3M7ZGl2I2NvbnRlbnRfbGVmdCIsIDIgXSwNCiAgICAgICAgICAgcmVwbGFjZUU6ICJjc3M7I3BhZ2UiLA0KICAgICAgICAgICBzdHlsaXNoOiAiLmF1dG9wYWdlcml6ZV9wYWdlX2luZm8sIGRpdi5zcC1zZXBhcmF0b3Ige21hcmdpbi1ib3R0b206IDEwcHggIWltcG9ydGFudDt9IiwNCiAgICAgICB9DQogICB9LA0KICAgc29nb3U6IHsNCiAgICAgICBTaXRlVHlwZUlEOiAyLA0KICAgICAgIE1haW5UeXBlOiAiI21haW4gLnJlc3VsdHM+ZGl2IiwNCiAgICAgICBTdHlwZV9Ob3JtYWw6ICJoMy5wdD5hLCBoMy52clRpdGxlPmEiLA0KICAgICAgIEZhdmljb25UeXBlOiAiY2l0ZVtpZCo9J2NhY2hlcmVzdWx0X2luZm9fJ10iLA0KICAgICAgIEZhdmljb25BZGRUbzogImgzIiwNCiAgICAgICBDb3VudGVyVHlwZTogIi5yZXN1bHRzPmRpdiIsDQogICAgICAgQmxvY2tUeXBlOiAiaDMgYSIsDQogICAgICAgcGFnZXI6ew0KICAgICAgICAgICBuZXh0TGluazogIi8vZGl2W0BpZD1cInBhZ2ViYXJfY29udGFpbmVyXCJdLy9hW0BpZD1cInNvZ291X25leHRcIl0iLA0KICAgICAgICAgICBwYWdlRWxlbWVudDogIi8vZGl2W0BjbGFzcz0ncmVzdWx0cyddL2RpdiIsDQogICAgICAgICAgIEhUX2luc2VydDogWyIvL2RpdltAY2xhc3M9J3Jlc3VsdHMnXSIsIDJdLA0KICAgICAgICAgICByZXBsYWNlRTogImlkKCdwYWdlYmFyX2NvbnRhaW5lcicpIg0KICAgICAgIH0NCiAgIH0sDQogICBoYW9zb3U6IHsNCiAgICAgICBTaXRlVHlwZUlEOiAzLA0KICAgICAgIE1haW5UeXBlOiAiLnJlcy1saXN0IiwNCiAgICAgICBTdHlwZV9Ob3JtYWw6ICIucmVzLWxpc3QgaDM+YSIsDQogICAgICAgRmF2aWNvblR5cGU6ICJjaXRlIiwNCiAgICAgICBGYXZpY29uQWRkVG86ICJoMyIsDQogICAgICAgQ291bnRlclR5cGU6ICIucmVzdWx0cz5kaXYiLA0KICAgICAgIEJsb2NrVHlwZTogImgzIGEiLA0KICAgICAgIHBhZ2VyOnsNCiAgICAgICAgICAgbmV4dExpbms6ICIvL2RpdltAaWQ9J3BhZ2UnXS8vYVt0ZXh0KCk9J8OkwrjCi8OkwrjCgMOpwqHCtT4nXSB8IGlkKCdzbmV4dCcpIiwNCiAgICAgICAgICAgcGFnZUVsZW1lbnQ6ICIvL2RpdltAaWQ9J2NvbnRhaW5lciddL2RpdiIsDQogICAgICAgICAgIEhUX2luc2VydDogWyIvL2RpdltAaWQ9J2NvbnRhaW5lciddIiwgMl0sDQogICAgICAgICAgIHJlcGxhY2VFOiAiaWQoJ3BhZ2UnKSINCiAgICAgICB9DQogICB9LA0KICAgZ29vZ2xlOiB7DQogICAgICAgU2l0ZVR5cGVJRDogNCwNCiAgICAgICBNYWluVHlwZTogIiNyc28gLmciLA0KICAgICAgIEZhdmljb25UeXBlOiAiLmlVaDMwIiwNCiAgICAgICBGYXZpY29uQWRkVG86ICJoMyIsDQogICAgICAgQ291bnRlclR5cGU6ICIjcnNvIC5nIGgzLC5feUU+ZGl2W2NsYXNzfj1fa2tdIGgzIiwNCiAgICAgICBCbG9ja1R5cGU6ICIucmM+ZGl2PmEiLA0KICAgICAgIHBhZ2VyOnsNCiAgICAgICAgICAgbmV4dExpbms6ICdpZCgicG5uZXh0IikgfCBpZCgibmF2YmFyIG5hdmNudCBuYXYiKS8vdGRbc3Bhbl0vZm9sbG93aW5nLXNpYmxpbmc6OnRkWzFdL2EgfCBpZCgibm4iKS9wYXJlbnQ6OmEnLA0KICAgICAgICAgICBwYWdlRWxlbWVudDogJy8vZGl2W0BpZD0icmVzIl0nLA0KICAgICAgICAgICBIVF9pbnNlcnQ6IFsgImNzczsjcmVzIiwgMiBdLA0KICAgICAgICAgICByZXBsYWNlRTogJy8vZGl2W0BpZD0ibmF2Y250Il0gfCAvL2RpdltAaWQ9ImZvb3QiXVtAcm9sZT0ibmF2aWdhdGlvbiJdJw0KICAgICAgIH0NCiAgIH0sDQogICBiaW5nOiB7DQogICAgICAgU2l0ZVR5cGVJRDogNSwNCiAgICAgICBNYWluVHlwZTogIiNiX3Jlc3VsdHM+bGkiLA0KICAgICAgIEZhdmljb25UeXBlOiAiLmJfYXR0cmlidXRpb24+Y2l0ZSIsDQogICAgICAgRmF2aWNvbkFkZFRvOiAiaDIiLA0KICAgICAgIENvdW50ZXJUeXBlOiAiI2JfcmVzdWx0cz5saVtjbGFzc349Yl9hbnNdPmgyLCNiX3Jlc3VsdHM+bGlbY2xhc3N+PWJfYWxnb10+aDIsI2JfcmVzdWx0cz5saVtjbGFzc349Yl9hbGdvXT5oMiIsDQogICAgICAgQmxvY2tUeXBlOiAiaDIgYSIsDQogICAgICAgcGFnZXI6ew0KICAgICAgICAgICBuZXh0TGluazogIi8vYVtjb250YWlucyhAY2xhc3MsXCJzYl9wYWdOXCIpXSIsDQogICAgICAgICAgIHBhZ2VFbGVtZW50OiAiaWQoXCJiX3Jlc3VsdHNcIikvbGlbbm90KGNvbnRhaW5zKEBjbGFzcyxcImJfcGFnXCIpIG9yIGNvbnRhaW5zKEBjbGFzcyxcImJfYW5zIGJfdG9wXCIpKV0iLA0KICAgICAgICAgICBIVF9pbnNlcnQ6IFsiaWQoXCJiX3Jlc3VsdHNcIikvbGlbQGNsYXNzPVwiYl9wYWdcIl0iLCAxXSwNCiAgICAgICAgICAgcmVwbGFjZUU6ICJpZChcImJfcmVzdWx0c1wiKS8vbmF2W0Byb2xlPVwibmF2aWdhdGlvblwiXSIsDQogICAgICAgfQ0KICAgfSwNCiAgIGR1Y2s6IHsNCiAgICAgICBTaXRlVHlwZUlEOiAxMCwNCiAgICAgICBNYWluVHlwZTogIiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIiwNCiAgICAgICBGYXZpY29uVHlwZTogIi5yZXN1bHRzX2xpbmtzX2RlZXAgLnJlc3VsdF9fdXJsX19kb21haW4iLA0KICAgICAgIEZhdmljb25BZGRUbzogImgyIiwNCiAgICAgICBDb3VudGVyVHlwZTogIiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIiwNCiAgICAgICBCbG9ja1R5cGU6ICJoMiBhIiwNCiAgICAgICBwYWdlcjp7DQogICAgICAgICAgIG5leHRMaW5rOiAiLy9hW2NvbnRhaW5zKEBjbGFzcyxcInNiX3BhZ05cIildIiwNCiAgICAgICAgICAgcGFnZUVsZW1lbnQ6ICJpZChcImJfcmVzdWx0c1wiKS9saVtub3QoY29udGFpbnMoQGNsYXNzLFwiYl9wYWdcIikgb3IgY29udGFpbnMoQGNsYXNzLFwiYl9hbnMgYl90b3BcIikpXSIsDQogICAgICAgICAgIEhUX2luc2VydDogWyJpZChcImJfcmVzdWx0c1wiKS9saVtAY2xhc3M9XCJiX3BhZ1wiXSIsIDFdLA0KICAgICAgICAgICByZXBsYWNlRTogImlkKFwiYl9yZXN1bHRzXCIpLy9uYXZbQHJvbGU9XCJuYXZpZ2F0aW9uXCJdIiwNCiAgICAgICB9DQogICB9LA0KICAgZG9nZTogew0KICAgICAgU2l0ZVR5cGVJRDogMTEsDQogICAgICBNYWluVHlwZTogIiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIiwNCiAgICAgIEZhdmljb25UeXBlOiAiLnJlc3VsdHNfbGlua3NfZGVlcCAucmVzdWx0X191cmxfX2RvbWFpbiIsDQogICAgICBGYXZpY29uQWRkVG86ICJoMiIsDQogICAgICBDb3VudGVyVHlwZTogIiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIiwNCiAgICAgIEJsb2NrVHlwZTogImgyIGEiLA0KICAgICAgcGFnZXI6ew0KICAgICAgICAgIG5leHRMaW5rOiAiLy9hW2NvbnRhaW5zKEBjbGFzcywgJ3Jlc3VsdC0tbW9yZScpXSIsDQogICAgICAgICAgcGFnZUVsZW1lbnQ6ICJpZCgnbGlua3Nfd3JhcHBlcicpLy9kaXZbY29udGFpbnMoQGNsYXNzLCAncmVzdWx0c19saW5rc19kZWVwJyldIiwNCiAgICAgICAgICBIVF9pbnNlcnQ6IFsiaWQoJ2xpbmtzX3dyYXBwZXInKS8vZGl2W0BpZD0nbGlua3MnXS9kaXZbY29udGFpbnMoQGNsYXNzLCAncmVzdWx0LS1tb3JlJyldIiwgMV0sDQogICAgICAgICAgcmVwbGFjZUU6ICJpZCgnbGlua3Nfd3JhcHBlcicpLy9kaXZbY29udGFpbnMoQGNsYXNzLCAncmVzdWx0LS1tb3JlJyldL2FbY29udGFpbnModGV4dCgpLCAnw6TCuMKLw6TCuMKAw6nCocK1JyldW0BocmVmXSIsDQogICAgICB9DQogICB9LA0KICAgbUJhaWR1OnsNCiAgICAgICBTaXRlVHlwZUlEOiA2LA0KICAgICAgIE1haW5UeXBlOiAiI2JfcmVzdWx0cz5saSIsDQogICAgICAgRmF2aWNvblR5cGU6ICIuYl9hdHRyaWJ1dGlvbj5jaXRlIiwNCiAgICAgICBGYXZpY29uQWRkVG86ICJoMiIsDQogICAgICAgQ291bnRlclR5cGU6ICIjYl9yZXN1bHRzPmxpW2NsYXNzfj1iX2Fuc10+aDIsI2JfcmVzdWx0cz5saVtjbGFzc349Yl9hbGdvXT5oMiwjYl9yZXN1bHRzPmxpW2NsYXNzfj1iX2FsZ29dPmgyIiwNCiAgICAgICBCbG9ja1R5cGU6ICJoMiBhIiwNCiAgIH0sDQogICB6aGlodTogew0KICAgICAgIFNpdGVUeXBlSUQ6IDcsDQogICB9LA0KICAgYmFpZHVfeHVlc2h1OnsNCiAgICAgICBTaXRlVHlwZUlEOiA4LA0KICAgICAgIE1haW5UeXBlOiAiI2NvbnRlbnRfbGVmdCAucmVzdWx0IiwNCiAgICAgICBTdHlwZV9Ob3JtYWw6ICJoMy50PmEsICNyZXN1bHRzIC5jLWNvbnRhaW5lcj4uYy1ibG9ja2EiLA0KICAgICAgIEZhdmljb25UeXBlOiAiLnJlc3VsdC1vcCwgLmMtc2hvd3VybCIsDQogICAgICAgRmF2aWNvbkFkZFRvOiAiaDMiLA0KICAgICAgIENvdW50ZXJUeXBlOiAiI2NvbnRlbnRfbGVmdD4jZG91YmxlPmRpdltzcmNpZF0gKltjbGFzc349dF0sW2NsYXNzfj1vcF9iZXN0X2Fuc3dlcl9xdWVzdGlvbl0sI2NvbnRlbnRfbGVmdD5kaXZbc3JjaWRdICpbY2xhc3N+PXRdLFtjbGFzc349b3BfYmVzdF9hbnN3ZXJfcXVlc3Rpb25dIiwNCiAgICAgICBCbG9ja1R5cGU6ICJoMyBhIiwNCiAgIH0sDQogICBvdGhlcjogew0KICAgICAgIFNpdGVUeXBlSUQ6IDksDQogICB9DQp9DQo="}],"requires":[{"meta":{"name":"vue.js","url":"https://cdn.staticfile.org/vue/2.6.11/vue.js","ts":1607929008900,"mimetype":"text/javascript"},"source":"LyohCiAqIFZ1ZS5qcyB2Mi42LjExCiAqIChjKSAyMDE0LTIwMTkgRXZhbiBZb3UKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLgogKi8KKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHsKICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6CiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDoKICAoZ2xvYmFsID0gZ2xvYmFsIHx8IHNlbGYsIGdsb2JhbC5WdWUgPSBmYWN0b3J5KCkpOwp9KHRoaXMsIGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnOwoKICAvKiAgKi8KCiAgdmFyIGVtcHR5T2JqZWN0ID0gT2JqZWN0LmZyZWV6ZSh7fSk7CgogIC8vIFRoZXNlIGhlbHBlcnMgcHJvZHVjZSBiZXR0ZXIgVk0gY29kZSBpbiBKUyBlbmdpbmVzIGR1ZSB0byB0aGVpcgogIC8vIGV4cGxpY2l0bmVzcyBhbmQgZnVuY3Rpb24gaW5saW5pbmcuCiAgZnVuY3Rpb24gaXNVbmRlZiAodikgewogICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCB8fCB2ID09PSBudWxsCiAgfQoKICBmdW5jdGlvbiBpc0RlZiAodikgewogICAgcmV0dXJuIHYgIT09IHVuZGVmaW5lZCAmJiB2ICE9PSBudWxsCiAgfQoKICBmdW5jdGlvbiBpc1RydWUgKHYpIHsKICAgIHJldHVybiB2ID09PSB0cnVlCiAgfQoKICBmdW5jdGlvbiBpc0ZhbHNlICh2KSB7CiAgICByZXR1cm4gdiA9PT0gZmFsc2UKICB9CgogIC8qKgogICAqIENoZWNrIGlmIHZhbHVlIGlzIHByaW1pdGl2ZS4KICAgKi8KICBmdW5jdGlvbiBpc1ByaW1pdGl2ZSAodmFsdWUpIHsKICAgIHJldHVybiAoCiAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwKICAgICAgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fAogICAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmUKICAgICAgdHlwZW9mIHZhbHVlID09PSAnc3ltYm9sJyB8fAogICAgICB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJwogICAgKQogIH0KCiAgLyoqCiAgICogUXVpY2sgb2JqZWN0IGNoZWNrIC0gdGhpcyBpcyBwcmltYXJpbHkgdXNlZCB0byB0ZWxsCiAgICogT2JqZWN0cyBmcm9tIHByaW1pdGl2ZSB2YWx1ZXMgd2hlbiB3ZSBrbm93IHRoZSB2YWx1ZQogICAqIGlzIGEgSlNPTi1jb21wbGlhbnQgdHlwZS4KICAgKi8KICBmdW5jdGlvbiBpc09iamVjdCAob2JqKSB7CiAgICByZXR1cm4gb2JqICE9PSBudWxsICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnCiAgfQoKICAvKioKICAgKiBHZXQgdGhlIHJhdyB0eXBlIHN0cmluZyBvZiBhIHZhbHVlLCBlLmcuLCBbb2JqZWN0IE9iamVjdF0uCiAgICovCiAgdmFyIF90b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7CgogIGZ1bmN0aW9uIHRvUmF3VHlwZSAodmFsdWUpIHsKICAgIHJldHVybiBfdG9TdHJpbmcuY2FsbCh2YWx1ZSkuc2xpY2UoOCwgLTEpCiAgfQoKICAvKioKICAgKiBTdHJpY3Qgb2JqZWN0IHR5cGUgY2hlY2suIE9ubHkgcmV0dXJucyB0cnVlCiAgICogZm9yIHBsYWluIEphdmFTY3JpcHQgb2JqZWN0cy4KICAgKi8KICBmdW5jdGlvbiBpc1BsYWluT2JqZWN0IChvYmopIHsKICAgIHJldHVybiBfdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBPYmplY3RdJwogIH0KCiAgZnVuY3Rpb24gaXNSZWdFeHAgKHYpIHsKICAgIHJldHVybiBfdG9TdHJpbmcuY2FsbCh2KSA9PT0gJ1tvYmplY3QgUmVnRXhwXScKICB9CgogIC8qKgogICAqIENoZWNrIGlmIHZhbCBpcyBhIHZhbGlkIGFycmF5IGluZGV4LgogICAqLwogIGZ1bmN0aW9uIGlzVmFsaWRBcnJheUluZGV4ICh2YWwpIHsKICAgIHZhciBuID0gcGFyc2VGbG9hdChTdHJpbmcodmFsKSk7CiAgICByZXR1cm4gbiA+PSAwICYmIE1hdGguZmxvb3IobikgPT09IG4gJiYgaXNGaW5pdGUodmFsKQogIH0KCiAgZnVuY3Rpb24gaXNQcm9taXNlICh2YWwpIHsKICAgIHJldHVybiAoCiAgICAgIGlzRGVmKHZhbCkgJiYKICAgICAgdHlwZW9mIHZhbC50aGVuID09PSAnZnVuY3Rpb24nICYmCiAgICAgIHR5cGVvZiB2YWwuY2F0Y2ggPT09ICdmdW5jdGlvbicKICAgICkKICB9CgogIC8qKgogICAqIENvbnZlcnQgYSB2YWx1ZSB0byBhIHN0cmluZyB0aGF0IGlzIGFjdHVhbGx5IHJlbmRlcmVkLgogICAqLwogIGZ1bmN0aW9uIHRvU3RyaW5nICh2YWwpIHsKICAgIHJldHVybiB2YWwgPT0gbnVsbAogICAgICA/ICcnCiAgICAgIDogQXJyYXkuaXNBcnJheSh2YWwpIHx8IChpc1BsYWluT2JqZWN0KHZhbCkgJiYgdmFsLnRvU3RyaW5nID09PSBfdG9TdHJpbmcpCiAgICAgICAgPyBKU09OLnN0cmluZ2lmeSh2YWwsIG51bGwsIDIpCiAgICAgICAgOiBTdHJpbmcodmFsKQogIH0KCiAgLyoqCiAgICogQ29udmVydCBhbiBpbnB1dCB2YWx1ZSB0byBhIG51bWJlciBmb3IgcGVyc2lzdGVuY2UuCiAgICogSWYgdGhlIGNvbnZlcnNpb24gZmFpbHMsIHJldHVybiBvcmlnaW5hbCBzdHJpbmcuCiAgICovCiAgZnVuY3Rpb24gdG9OdW1iZXIgKHZhbCkgewogICAgdmFyIG4gPSBwYXJzZUZsb2F0KHZhbCk7CiAgICByZXR1cm4gaXNOYU4obikgPyB2YWwgOiBuCiAgfQoKICAvKioKICAgKiBNYWtlIGEgbWFwIGFuZCByZXR1cm4gYSBmdW5jdGlvbiBmb3IgY2hlY2tpbmcgaWYgYSBrZXkKICAgKiBpcyBpbiB0aGF0IG1hcC4KICAgKi8KICBmdW5jdGlvbiBtYWtlTWFwICgKICAgIHN0ciwKICAgIGV4cGVjdHNMb3dlckNhc2UKICApIHsKICAgIHZhciBtYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgdmFyIGxpc3QgPSBzdHIuc3BsaXQoJywnKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewogICAgICBtYXBbbGlzdFtpXV0gPSB0cnVlOwogICAgfQogICAgcmV0dXJuIGV4cGVjdHNMb3dlckNhc2UKICAgICAgPyBmdW5jdGlvbiAodmFsKSB7IHJldHVybiBtYXBbdmFsLnRvTG93ZXJDYXNlKCldOyB9CiAgICAgIDogZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4gbWFwW3ZhbF07IH0KICB9CgogIC8qKgogICAqIENoZWNrIGlmIGEgdGFnIGlzIGEgYnVpbHQtaW4gdGFnLgogICAqLwogIHZhciBpc0J1aWx0SW5UYWcgPSBtYWtlTWFwKCdzbG90LGNvbXBvbmVudCcsIHRydWUpOwoKICAvKioKICAgKiBDaGVjayBpZiBhbiBhdHRyaWJ1dGUgaXMgYSByZXNlcnZlZCBhdHRyaWJ1dGUuCiAgICovCiAgdmFyIGlzUmVzZXJ2ZWRBdHRyaWJ1dGUgPSBtYWtlTWFwKCdrZXkscmVmLHNsb3Qsc2xvdC1zY29wZSxpcycpOwoKICAvKioKICAgKiBSZW1vdmUgYW4gaXRlbSBmcm9tIGFuIGFycmF5LgogICAqLwogIGZ1bmN0aW9uIHJlbW92ZSAoYXJyLCBpdGVtKSB7CiAgICBpZiAoYXJyLmxlbmd0aCkgewogICAgICB2YXIgaW5kZXggPSBhcnIuaW5kZXhPZihpdGVtKTsKICAgICAgaWYgKGluZGV4ID4gLTEpIHsKICAgICAgICByZXR1cm4gYXJyLnNwbGljZShpbmRleCwgMSkKICAgICAgfQogICAgfQogIH0KCiAgLyoqCiAgICogQ2hlY2sgd2hldGhlciBhbiBvYmplY3QgaGFzIHRoZSBwcm9wZXJ0eS4KICAgKi8KICB2YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OwogIGZ1bmN0aW9uIGhhc093biAob2JqLCBrZXkpIHsKICAgIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KQogIH0KCiAgLyoqCiAgICogQ3JlYXRlIGEgY2FjaGVkIHZlcnNpb24gb2YgYSBwdXJlIGZ1bmN0aW9uLgogICAqLwogIGZ1bmN0aW9uIGNhY2hlZCAoZm4pIHsKICAgIHZhciBjYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICByZXR1cm4gKGZ1bmN0aW9uIGNhY2hlZEZuIChzdHIpIHsKICAgICAgdmFyIGhpdCA9IGNhY2hlW3N0cl07CiAgICAgIHJldHVybiBoaXQgfHwgKGNhY2hlW3N0cl0gPSBmbihzdHIpKQogICAgfSkKICB9CgogIC8qKgogICAqIENhbWVsaXplIGEgaHlwaGVuLWRlbGltaXRlZCBzdHJpbmcuCiAgICovCiAgdmFyIGNhbWVsaXplUkUgPSAvLShcdykvZzsKICB2YXIgY2FtZWxpemUgPSBjYWNoZWQoZnVuY3Rpb24gKHN0cikgewogICAgcmV0dXJuIHN0ci5yZXBsYWNlKGNhbWVsaXplUkUsIGZ1bmN0aW9uIChfLCBjKSB7IHJldHVybiBjID8gYy50b1VwcGVyQ2FzZSgpIDogJyc7IH0pCiAgfSk7CgogIC8qKgogICAqIENhcGl0YWxpemUgYSBzdHJpbmcuCiAgICovCiAgdmFyIGNhcGl0YWxpemUgPSBjYWNoZWQoZnVuY3Rpb24gKHN0cikgewogICAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKQogIH0pOwoKICAvKioKICAgKiBIeXBoZW5hdGUgYSBjYW1lbENhc2Ugc3RyaW5nLgogICAqLwogIHZhciBoeXBoZW5hdGVSRSA9IC9cQihbQS1aXSkvZzsKICB2YXIgaHlwaGVuYXRlID0gY2FjaGVkKGZ1bmN0aW9uIChzdHIpIHsKICAgIHJldHVybiBzdHIucmVwbGFjZShoeXBoZW5hdGVSRSwgJy0kMScpLnRvTG93ZXJDYXNlKCkKICB9KTsKCiAgLyoqCiAgICogU2ltcGxlIGJpbmQgcG9seWZpbGwgZm9yIGVudmlyb25tZW50cyB0aGF0IGRvIG5vdCBzdXBwb3J0IGl0LAogICAqIGUuZy4sIFBoYW50b21KUyAxLnguIFRlY2huaWNhbGx5LCB3ZSBkb24ndCBuZWVkIHRoaXMgYW55bW9yZQogICAqIHNpbmNlIG5hdGl2ZSBiaW5kIGlzIG5vdyBwZXJmb3JtYW50IGVub3VnaCBpbiBtb3N0IGJyb3dzZXJzLgogICAqIEJ1dCByZW1vdmluZyBpdCB3b3VsZCBtZWFuIGJyZWFraW5nIGNvZGUgdGhhdCB3YXMgYWJsZSB0byBydW4gaW4KICAgKiBQaGFudG9tSlMgMS54LCBzbyB0aGlzIG11c3QgYmUga2VwdCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eS4KICAgKi8KCiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICBmdW5jdGlvbiBwb2x5ZmlsbEJpbmQgKGZuLCBjdHgpIHsKICAgIGZ1bmN0aW9uIGJvdW5kRm4gKGEpIHsKICAgICAgdmFyIGwgPSBhcmd1bWVudHMubGVuZ3RoOwogICAgICByZXR1cm4gbAogICAgICAgID8gbCA+IDEKICAgICAgICAgID8gZm4uYXBwbHkoY3R4LCBhcmd1bWVudHMpCiAgICAgICAgICA6IGZuLmNhbGwoY3R4LCBhKQogICAgICAgIDogZm4uY2FsbChjdHgpCiAgICB9CgogICAgYm91bmRGbi5fbGVuZ3RoID0gZm4ubGVuZ3RoOwogICAgcmV0dXJuIGJvdW5kRm4KICB9CgogIGZ1bmN0aW9uIG5hdGl2ZUJpbmQgKGZuLCBjdHgpIHsKICAgIHJldHVybiBmbi5iaW5kKGN0eCkKICB9CgogIHZhciBiaW5kID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQKICAgID8gbmF0aXZlQmluZAogICAgOiBwb2x5ZmlsbEJpbmQ7CgogIC8qKgogICAqIENvbnZlcnQgYW4gQXJyYXktbGlrZSBvYmplY3QgdG8gYSByZWFsIEFycmF5LgogICAqLwogIGZ1bmN0aW9uIHRvQXJyYXkgKGxpc3QsIHN0YXJ0KSB7CiAgICBzdGFydCA9IHN0YXJ0IHx8IDA7CiAgICB2YXIgaSA9IGxpc3QubGVuZ3RoIC0gc3RhcnQ7CiAgICB2YXIgcmV0ID0gbmV3IEFycmF5KGkpOwogICAgd2hpbGUgKGktLSkgewogICAgICByZXRbaV0gPSBsaXN0W2kgKyBzdGFydF07CiAgICB9CiAgICByZXR1cm4gcmV0CiAgfQoKICAvKioKICAgKiBNaXggcHJvcGVydGllcyBpbnRvIHRhcmdldCBvYmplY3QuCiAgICovCiAgZnVuY3Rpb24gZXh0ZW5kICh0bywgX2Zyb20pIHsKICAgIGZvciAodmFyIGtleSBpbiBfZnJvbSkgewogICAgICB0b1trZXldID0gX2Zyb21ba2V5XTsKICAgIH0KICAgIHJldHVybiB0bwogIH0KCiAgLyoqCiAgICogTWVyZ2UgYW4gQXJyYXkgb2YgT2JqZWN0cyBpbnRvIGEgc2luZ2xlIE9iamVjdC4KICAgKi8KICBmdW5jdGlvbiB0b09iamVjdCAoYXJyKSB7CiAgICB2YXIgcmVzID0ge307CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICBpZiAoYXJyW2ldKSB7CiAgICAgICAgZXh0ZW5kKHJlcywgYXJyW2ldKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlcwogIH0KCiAgLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi8KCiAgLyoqCiAgICogUGVyZm9ybSBubyBvcGVyYXRpb24uCiAgICogU3R1YmJpbmcgYXJncyB0byBtYWtlIEZsb3cgaGFwcHkgd2l0aG91dCBsZWF2aW5nIHVzZWxlc3MgdHJhbnNwaWxlZCBjb2RlCiAgICogd2l0aCAuLi5yZXN0IChodHRwczovL2Zsb3cub3JnL2Jsb2cvMjAxNy8wNS8wNy9TdHJpY3QtRnVuY3Rpb24tQ2FsbC1Bcml0eS8pLgogICAqLwogIGZ1bmN0aW9uIG5vb3AgKGEsIGIsIGMpIHt9CgogIC8qKgogICAqIEFsd2F5cyByZXR1cm4gZmFsc2UuCiAgICovCiAgdmFyIG5vID0gZnVuY3Rpb24gKGEsIGIsIGMpIHsgcmV0dXJuIGZhbHNlOyB9OwoKICAvKiBlc2xpbnQtZW5hYmxlIG5vLXVudXNlZC12YXJzICovCgogIC8qKgogICAqIFJldHVybiB0aGUgc2FtZSB2YWx1ZS4KICAgKi8KICB2YXIgaWRlbnRpdHkgPSBmdW5jdGlvbiAoXykgeyByZXR1cm4gXzsgfTsKCiAgLyoqCiAgICogR2VuZXJhdGUgYSBzdHJpbmcgY29udGFpbmluZyBzdGF0aWMga2V5cyBmcm9tIGNvbXBpbGVyIG1vZHVsZXMuCiAgICovCiAgZnVuY3Rpb24gZ2VuU3RhdGljS2V5cyAobW9kdWxlcykgewogICAgcmV0dXJuIG1vZHVsZXMucmVkdWNlKGZ1bmN0aW9uIChrZXlzLCBtKSB7CiAgICAgIHJldHVybiBrZXlzLmNvbmNhdChtLnN0YXRpY0tleXMgfHwgW10pCiAgICB9LCBbXSkuam9pbignLCcpCiAgfQoKICAvKioKICAgKiBDaGVjayBpZiB0d28gdmFsdWVzIGFyZSBsb29zZWx5IGVxdWFsIC0gdGhhdCBpcywKICAgKiBpZiB0aGV5IGFyZSBwbGFpbiBvYmplY3RzLCBkbyB0aGV5IGhhdmUgdGhlIHNhbWUgc2hhcGU/CiAgICovCiAgZnVuY3Rpb24gbG9vc2VFcXVhbCAoYSwgYikgewogICAgaWYgKGEgPT09IGIpIHsgcmV0dXJuIHRydWUgfQogICAgdmFyIGlzT2JqZWN0QSA9IGlzT2JqZWN0KGEpOwogICAgdmFyIGlzT2JqZWN0QiA9IGlzT2JqZWN0KGIpOwogICAgaWYgKGlzT2JqZWN0QSAmJiBpc09iamVjdEIpIHsKICAgICAgdHJ5IHsKICAgICAgICB2YXIgaXNBcnJheUEgPSBBcnJheS5pc0FycmF5KGEpOwogICAgICAgIHZhciBpc0FycmF5QiA9IEFycmF5LmlzQXJyYXkoYik7CiAgICAgICAgaWYgKGlzQXJyYXlBICYmIGlzQXJyYXlCKSB7CiAgICAgICAgICByZXR1cm4gYS5sZW5ndGggPT09IGIubGVuZ3RoICYmIGEuZXZlcnkoZnVuY3Rpb24gKGUsIGkpIHsKICAgICAgICAgICAgcmV0dXJuIGxvb3NlRXF1YWwoZSwgYltpXSkKICAgICAgICAgIH0pCiAgICAgICAgfSBlbHNlIGlmIChhIGluc3RhbmNlb2YgRGF0ZSAmJiBiIGluc3RhbmNlb2YgRGF0ZSkgewogICAgICAgICAgcmV0dXJuIGEuZ2V0VGltZSgpID09PSBiLmdldFRpbWUoKQogICAgICAgIH0gZWxzZSBpZiAoIWlzQXJyYXlBICYmICFpc0FycmF5QikgewogICAgICAgICAgdmFyIGtleXNBID0gT2JqZWN0LmtleXMoYSk7CiAgICAgICAgICB2YXIga2V5c0IgPSBPYmplY3Qua2V5cyhiKTsKICAgICAgICAgIHJldHVybiBrZXlzQS5sZW5ndGggPT09IGtleXNCLmxlbmd0aCAmJiBrZXlzQS5ldmVyeShmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgIHJldHVybiBsb29zZUVxdWFsKGFba2V5XSwgYltrZXldKQogICAgICAgICAgfSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgIH0gZWxzZSBpZiAoIWlzT2JqZWN0QSAmJiAhaXNPYmplY3RCKSB7CiAgICAgIHJldHVybiBTdHJpbmcoYSkgPT09IFN0cmluZyhiKQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGZhbHNlCiAgICB9CiAgfQoKICAvKioKICAgKiBSZXR1cm4gdGhlIGZpcnN0IGluZGV4IGF0IHdoaWNoIGEgbG9vc2VseSBlcXVhbCB2YWx1ZSBjYW4gYmUKICAgKiBmb3VuZCBpbiB0aGUgYXJyYXkgKGlmIHZhbHVlIGlzIGEgcGxhaW4gb2JqZWN0LCB0aGUgYXJyYXkgbXVzdAogICAqIGNvbnRhaW4gYW4gb2JqZWN0IG9mIHRoZSBzYW1lIHNoYXBlKSwgb3IgLTEgaWYgaXQgaXMgbm90IHByZXNlbnQuCiAgICovCiAgZnVuY3Rpb24gbG9vc2VJbmRleE9mIChhcnIsIHZhbCkgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKGxvb3NlRXF1YWwoYXJyW2ldLCB2YWwpKSB7IHJldHVybiBpIH0KICAgIH0KICAgIHJldHVybiAtMQogIH0KCiAgLyoqCiAgICogRW5zdXJlIGEgZnVuY3Rpb24gaXMgY2FsbGVkIG9ubHkgb25jZS4KICAgKi8KICBmdW5jdGlvbiBvbmNlIChmbikgewogICAgdmFyIGNhbGxlZCA9IGZhbHNlOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCFjYWxsZWQpIHsKICAgICAgICBjYWxsZWQgPSB0cnVlOwogICAgICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgIH0KICB9CgogIHZhciBTU1JfQVRUUiA9ICdkYXRhLXNlcnZlci1yZW5kZXJlZCc7CgogIHZhciBBU1NFVF9UWVBFUyA9IFsKICAgICdjb21wb25lbnQnLAogICAgJ2RpcmVjdGl2ZScsCiAgICAnZmlsdGVyJwogIF07CgogIHZhciBMSUZFQ1lDTEVfSE9PS1MgPSBbCiAgICAnYmVmb3JlQ3JlYXRlJywKICAgICdjcmVhdGVkJywKICAgICdiZWZvcmVNb3VudCcsCiAgICAnbW91bnRlZCcsCiAgICAnYmVmb3JlVXBkYXRlJywKICAgICd1cGRhdGVkJywKICAgICdiZWZvcmVEZXN0cm95JywKICAgICdkZXN0cm95ZWQnLAogICAgJ2FjdGl2YXRlZCcsCiAgICAnZGVhY3RpdmF0ZWQnLAogICAgJ2Vycm9yQ2FwdHVyZWQnLAogICAgJ3NlcnZlclByZWZldGNoJwogIF07CgogIC8qICAqLwoKCgogIHZhciBjb25maWcgPSAoewogICAgLyoqCiAgICAgKiBPcHRpb24gbWVyZ2Ugc3RyYXRlZ2llcyAodXNlZCBpbiBjb3JlL3V0aWwvb3B0aW9ucykKICAgICAqLwogICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lCiAgICBvcHRpb25NZXJnZVN0cmF0ZWdpZXM6IE9iamVjdC5jcmVhdGUobnVsbCksCgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRvIHN1cHByZXNzIHdhcm5pbmdzLgogICAgICovCiAgICBzaWxlbnQ6IGZhbHNlLAoKICAgIC8qKgogICAgICogU2hvdyBwcm9kdWN0aW9uIG1vZGUgdGlwIG1lc3NhZ2Ugb24gYm9vdD8KICAgICAqLwogICAgcHJvZHVjdGlvblRpcDogImRldmVsb3BtZW50IiAhPT0gJ3Byb2R1Y3Rpb24nLAoKICAgIC8qKgogICAgICogV2hldGhlciB0byBlbmFibGUgZGV2dG9vbHMKICAgICAqLwogICAgZGV2dG9vbHM6ICJkZXZlbG9wbWVudCIgIT09ICdwcm9kdWN0aW9uJywKCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gcmVjb3JkIHBlcmYKICAgICAqLwogICAgcGVyZm9ybWFuY2U6IGZhbHNlLAoKICAgIC8qKgogICAgICogRXJyb3IgaGFuZGxlciBmb3Igd2F0Y2hlciBlcnJvcnMKICAgICAqLwogICAgZXJyb3JIYW5kbGVyOiBudWxsLAoKICAgIC8qKgogICAgICogV2FybiBoYW5kbGVyIGZvciB3YXRjaGVyIHdhcm5zCiAgICAgKi8KICAgIHdhcm5IYW5kbGVyOiBudWxsLAoKICAgIC8qKgogICAgICogSWdub3JlIGNlcnRhaW4gY3VzdG9tIGVsZW1lbnRzCiAgICAgKi8KICAgIGlnbm9yZWRFbGVtZW50czogW10sCgogICAgLyoqCiAgICAgKiBDdXN0b20gdXNlciBrZXkgYWxpYXNlcyBmb3Igdi1vbgogICAgICovCiAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmUKICAgIGtleUNvZGVzOiBPYmplY3QuY3JlYXRlKG51bGwpLAoKICAgIC8qKgogICAgICogQ2hlY2sgaWYgYSB0YWcgaXMgcmVzZXJ2ZWQgc28gdGhhdCBpdCBjYW5ub3QgYmUgcmVnaXN0ZXJlZCBhcyBhCiAgICAgKiBjb21wb25lbnQuIFRoaXMgaXMgcGxhdGZvcm0tZGVwZW5kZW50IGFuZCBtYXkgYmUgb3ZlcndyaXR0ZW4uCiAgICAgKi8KICAgIGlzUmVzZXJ2ZWRUYWc6IG5vLAoKICAgIC8qKgogICAgICogQ2hlY2sgaWYgYW4gYXR0cmlidXRlIGlzIHJlc2VydmVkIHNvIHRoYXQgaXQgY2Fubm90IGJlIHVzZWQgYXMgYSBjb21wb25lbnQKICAgICAqIHByb3AuIFRoaXMgaXMgcGxhdGZvcm0tZGVwZW5kZW50IGFuZCBtYXkgYmUgb3ZlcndyaXR0ZW4uCiAgICAgKi8KICAgIGlzUmVzZXJ2ZWRBdHRyOiBubywKCiAgICAvKioKICAgICAqIENoZWNrIGlmIGEgdGFnIGlzIGFuIHVua25vd24gZWxlbWVudC4KICAgICAqIFBsYXRmb3JtLWRlcGVuZGVudC4KICAgICAqLwogICAgaXNVbmtub3duRWxlbWVudDogbm8sCgogICAgLyoqCiAgICAgKiBHZXQgdGhlIG5hbWVzcGFjZSBvZiBhbiBlbGVtZW50CiAgICAgKi8KICAgIGdldFRhZ05hbWVzcGFjZTogbm9vcCwKCiAgICAvKioKICAgICAqIFBhcnNlIHRoZSByZWFsIHRhZyBuYW1lIGZvciB0aGUgc3BlY2lmaWMgcGxhdGZvcm0uCiAgICAgKi8KICAgIHBhcnNlUGxhdGZvcm1UYWdOYW1lOiBpZGVudGl0eSwKCiAgICAvKioKICAgICAqIENoZWNrIGlmIGFuIGF0dHJpYnV0ZSBtdXN0IGJlIGJvdW5kIHVzaW5nIHByb3BlcnR5LCBlLmcuIHZhbHVlCiAgICAgKiBQbGF0Zm9ybS1kZXBlbmRlbnQuCiAgICAgKi8KICAgIG11c3RVc2VQcm9wOiBubywKCiAgICAvKioKICAgICAqIFBlcmZvcm0gdXBkYXRlcyBhc3luY2hyb25vdXNseS4gSW50ZW5kZWQgdG8gYmUgdXNlZCBieSBWdWUgVGVzdCBVdGlscwogICAgICogVGhpcyB3aWxsIHNpZ25pZmljYW50bHkgcmVkdWNlIHBlcmZvcm1hbmNlIGlmIHNldCB0byBmYWxzZS4KICAgICAqLwogICAgYXN5bmM6IHRydWUsCgogICAgLyoqCiAgICAgKiBFeHBvc2VkIGZvciBsZWdhY3kgcmVhc29ucwogICAgICovCiAgICBfbGlmZWN5Y2xlSG9va3M6IExJRkVDWUNMRV9IT09LUwogIH0pOwoKICAvKiAgKi8KCiAgLyoqCiAgICogdW5pY29kZSBsZXR0ZXJzIHVzZWQgZm9yIHBhcnNpbmcgaHRtbCB0YWdzLCBjb21wb25lbnQgbmFtZXMgYW5kIHByb3BlcnR5IHBhdGhzLgogICAqIHVzaW5nIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNTMvc2VtYW50aWNzLXNjcmlwdGluZy5odG1sI3BvdGVudGlhbGN1c3RvbWVsZW1lbnRuYW1lCiAgICogc2tpcHBpbmcgXHUxMDAwMC1cdUVGRkZGIGR1ZSB0byBpdCBmcmVlemluZyB1cCBQaGFudG9tSlMKICAgKi8KICB2YXIgdW5pY29kZVJlZ0V4cCA9IC9hLXpBLVpcdTAwQjdcdTAwQzAtXHUwMEQ2XHUwMEQ4LVx1MDBGNlx1MDBGOC1cdTAzN0RcdTAzN0YtXHUxRkZGXHUyMDBDLVx1MjAwRFx1MjAzRi1cdTIwNDBcdTIwNzAtXHUyMThGXHUyQzAwLVx1MkZFRlx1MzAwMS1cdUQ3RkZcdUY5MDAtXHVGRENGXHVGREYwLVx1RkZGRC87CgogIC8qKgogICAqIENoZWNrIGlmIGEgc3RyaW5nIHN0YXJ0cyB3aXRoICQgb3IgXwogICAqLwogIGZ1bmN0aW9uIGlzUmVzZXJ2ZWQgKHN0cikgewogICAgdmFyIGMgPSAoc3RyICsgJycpLmNoYXJDb2RlQXQoMCk7CiAgICByZXR1cm4gYyA9PT0gMHgyNCB8fCBjID09PSAweDVGCiAgfQoKICAvKioKICAgKiBEZWZpbmUgYSBwcm9wZXJ0eS4KICAgKi8KICBmdW5jdGlvbiBkZWYgKG9iaiwga2V5LCB2YWwsIGVudW1lcmFibGUpIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsLAogICAgICBlbnVtZXJhYmxlOiAhIWVudW1lcmFibGUsCiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUKICAgIH0pOwogIH0KCiAgLyoqCiAgICogUGFyc2Ugc2ltcGxlIHBhdGguCiAgICovCiAgdmFyIGJhaWxSRSA9IG5ldyBSZWdFeHAoKCJbXiIgKyAodW5pY29kZVJlZ0V4cC5zb3VyY2UpICsgIi4kX1xcZF0iKSk7CiAgZnVuY3Rpb24gcGFyc2VQYXRoIChwYXRoKSB7CiAgICBpZiAoYmFpbFJFLnRlc3QocGF0aCkpIHsKICAgICAgcmV0dXJuCiAgICB9CiAgICB2YXIgc2VnbWVudHMgPSBwYXRoLnNwbGl0KCcuJyk7CiAgICByZXR1cm4gZnVuY3Rpb24gKG9iaikgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKCFvYmopIHsgcmV0dXJuIH0KICAgICAgICBvYmogPSBvYmpbc2VnbWVudHNbaV1dOwogICAgICB9CiAgICAgIHJldHVybiBvYmoKICAgIH0KICB9CgogIC8qICAqLwoKICAvLyBjYW4gd2UgdXNlIF9fcHJvdG9fXz8KICB2YXIgaGFzUHJvdG8gPSAnX19wcm90b19fJyBpbiB7fTsKCiAgLy8gQnJvd3NlciBlbnZpcm9ubWVudCBzbmlmZmluZwogIHZhciBpbkJyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJzsKICB2YXIgaW5XZWV4ID0gdHlwZW9mIFdYRW52aXJvbm1lbnQgIT09ICd1bmRlZmluZWQnICYmICEhV1hFbnZpcm9ubWVudC5wbGF0Zm9ybTsKICB2YXIgd2VleFBsYXRmb3JtID0gaW5XZWV4ICYmIFdYRW52aXJvbm1lbnQucGxhdGZvcm0udG9Mb3dlckNhc2UoKTsKICB2YXIgVUEgPSBpbkJyb3dzZXIgJiYgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTsKICB2YXIgaXNJRSA9IFVBICYmIC9tc2llfHRyaWRlbnQvLnRlc3QoVUEpOwogIHZhciBpc0lFOSA9IFVBICYmIFVBLmluZGV4T2YoJ21zaWUgOS4wJykgPiAwOwogIHZhciBpc0VkZ2UgPSBVQSAmJiBVQS5pbmRleE9mKCdlZGdlLycpID4gMDsKICB2YXIgaXNBbmRyb2lkID0gKFVBICYmIFVBLmluZGV4T2YoJ2FuZHJvaWQnKSA+IDApIHx8ICh3ZWV4UGxhdGZvcm0gPT09ICdhbmRyb2lkJyk7CiAgdmFyIGlzSU9TID0gKFVBICYmIC9pcGhvbmV8aXBhZHxpcG9kfGlvcy8udGVzdChVQSkpIHx8ICh3ZWV4UGxhdGZvcm0gPT09ICdpb3MnKTsKICB2YXIgaXNDaHJvbWUgPSBVQSAmJiAvY2hyb21lXC9cZCsvLnRlc3QoVUEpICYmICFpc0VkZ2U7CiAgdmFyIGlzUGhhbnRvbUpTID0gVUEgJiYgL3BoYW50b21qcy8udGVzdChVQSk7CiAgdmFyIGlzRkYgPSBVQSAmJiBVQS5tYXRjaCgvZmlyZWZveFwvKFxkKykvKTsKCiAgLy8gRmlyZWZveCBoYXMgYSAid2F0Y2giIGZ1bmN0aW9uIG9uIE9iamVjdC5wcm90b3R5cGUuLi4KICB2YXIgbmF0aXZlV2F0Y2ggPSAoe30pLndhdGNoOwoKICB2YXIgc3VwcG9ydHNQYXNzaXZlID0gZmFsc2U7CiAgaWYgKGluQnJvd3NlcikgewogICAgdHJ5IHsKICAgICAgdmFyIG9wdHMgPSB7fTsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9wdHMsICdwYXNzaXZlJywgKHsKICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCAoKSB7CiAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogICAgICAgICAgc3VwcG9ydHNQYXNzaXZlID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pKTsgLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL2Zsb3cvaXNzdWVzLzI4NQogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGVzdC1wYXNzaXZlJywgbnVsbCwgb3B0cyk7CiAgICB9IGNhdGNoIChlKSB7fQogIH0KCiAgLy8gdGhpcyBuZWVkcyB0byBiZSBsYXp5LWV2YWxlZCBiZWNhdXNlIHZ1ZSBtYXkgYmUgcmVxdWlyZWQgYmVmb3JlCiAgLy8gdnVlLXNlcnZlci1yZW5kZXJlciBjYW4gc2V0IFZVRV9FTlYKICB2YXIgX2lzU2VydmVyOwogIHZhciBpc1NlcnZlclJlbmRlcmluZyA9IGZ1bmN0aW9uICgpIHsKICAgIGlmIChfaXNTZXJ2ZXIgPT09IHVuZGVmaW5lZCkgewogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgaWYgKCFpbkJyb3dzZXIgJiYgIWluV2VleCAmJiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIC8vIGRldGVjdCBwcmVzZW5jZSBvZiB2dWUtc2VydmVyLXJlbmRlcmVyIGFuZCBhdm9pZAogICAgICAgIC8vIFdlYnBhY2sgc2hpbW1pbmcgdGhlIHByb2Nlc3MKICAgICAgICBfaXNTZXJ2ZXIgPSBnbG9iYWxbJ3Byb2Nlc3MnXSAmJiBnbG9iYWxbJ3Byb2Nlc3MnXS5lbnYuVlVFX0VOViA9PT0gJ3NlcnZlcic7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX2lzU2VydmVyID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBfaXNTZXJ2ZXIKICB9OwoKICAvLyBkZXRlY3QgZGV2dG9vbHMKICB2YXIgZGV2dG9vbHMgPSBpbkJyb3dzZXIgJiYgd2luZG93Ll9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX187CgogIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgZnVuY3Rpb24gaXNOYXRpdmUgKEN0b3IpIHsKICAgIHJldHVybiB0eXBlb2YgQ3RvciA9PT0gJ2Z1bmN0aW9uJyAmJiAvbmF0aXZlIGNvZGUvLnRlc3QoQ3Rvci50b1N0cmluZygpKQogIH0KCiAgdmFyIGhhc1N5bWJvbCA9CiAgICB0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBpc05hdGl2ZShTeW1ib2wpICYmCiAgICB0eXBlb2YgUmVmbGVjdCAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNOYXRpdmUoUmVmbGVjdC5vd25LZXlzKTsKCiAgdmFyIF9TZXQ7CiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovIC8vICRmbG93LWRpc2FibGUtbGluZQogIGlmICh0eXBlb2YgU2V0ICE9PSAndW5kZWZpbmVkJyAmJiBpc05hdGl2ZShTZXQpKSB7CiAgICAvLyB1c2UgbmF0aXZlIFNldCB3aGVuIGF2YWlsYWJsZS4KICAgIF9TZXQgPSBTZXQ7CiAgfSBlbHNlIHsKICAgIC8vIGEgbm9uLXN0YW5kYXJkIFNldCBwb2x5ZmlsbCB0aGF0IG9ubHkgd29ya3Mgd2l0aCBwcmltaXRpdmUga2V5cy4KICAgIF9TZXQgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uICgpIHsKICAgICAgZnVuY3Rpb24gU2V0ICgpIHsKICAgICAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICAgIH0KICAgICAgU2V0LnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiBoYXMgKGtleSkgewogICAgICAgIHJldHVybiB0aGlzLnNldFtrZXldID09PSB0cnVlCiAgICAgIH07CiAgICAgIFNldC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gYWRkIChrZXkpIHsKICAgICAgICB0aGlzLnNldFtrZXldID0gdHJ1ZTsKICAgICAgfTsKICAgICAgU2V0LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uIGNsZWFyICgpIHsKICAgICAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICAgIH07CgogICAgICByZXR1cm4gU2V0OwogICAgfSgpKTsKICB9CgogIC8qICAqLwoKICB2YXIgd2FybiA9IG5vb3A7CiAgdmFyIHRpcCA9IG5vb3A7CiAgdmFyIGdlbmVyYXRlQ29tcG9uZW50VHJhY2UgPSAobm9vcCk7IC8vIHdvcmsgYXJvdW5kIGZsb3cgY2hlY2sKICB2YXIgZm9ybWF0Q29tcG9uZW50TmFtZSA9IChub29wKTsKCiAgewogICAgdmFyIGhhc0NvbnNvbGUgPSB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCc7CiAgICB2YXIgY2xhc3NpZnlSRSA9IC8oPzpefFstX10pKFx3KS9nOwogICAgdmFyIGNsYXNzaWZ5ID0gZnVuY3Rpb24gKHN0cikgeyByZXR1cm4gc3RyCiAgICAgIC5yZXBsYWNlKGNsYXNzaWZ5UkUsIGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLnRvVXBwZXJDYXNlKCk7IH0pCiAgICAgIC5yZXBsYWNlKC9bLV9dL2csICcnKTsgfTsKCiAgICB3YXJuID0gZnVuY3Rpb24gKG1zZywgdm0pIHsKICAgICAgdmFyIHRyYWNlID0gdm0gPyBnZW5lcmF0ZUNvbXBvbmVudFRyYWNlKHZtKSA6ICcnOwoKICAgICAgaWYgKGNvbmZpZy53YXJuSGFuZGxlcikgewogICAgICAgIGNvbmZpZy53YXJuSGFuZGxlci5jYWxsKG51bGwsIG1zZywgdm0sIHRyYWNlKTsKICAgICAgfSBlbHNlIGlmIChoYXNDb25zb2xlICYmICghY29uZmlnLnNpbGVudCkpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCgiW1Z1ZSB3YXJuXTogIiArIG1zZyArIHRyYWNlKSk7CiAgICAgIH0KICAgIH07CgogICAgdGlwID0gZnVuY3Rpb24gKG1zZywgdm0pIHsKICAgICAgaWYgKGhhc0NvbnNvbGUgJiYgKCFjb25maWcuc2lsZW50KSkgewogICAgICAgIGNvbnNvbGUud2FybigiW1Z1ZSB0aXBdOiAiICsgbXNnICsgKAogICAgICAgICAgdm0gPyBnZW5lcmF0ZUNvbXBvbmVudFRyYWNlKHZtKSA6ICcnCiAgICAgICAgKSk7CiAgICAgIH0KICAgIH07CgogICAgZm9ybWF0Q29tcG9uZW50TmFtZSA9IGZ1bmN0aW9uICh2bSwgaW5jbHVkZUZpbGUpIHsKICAgICAgaWYgKHZtLiRyb290ID09PSB2bSkgewogICAgICAgIHJldHVybiAnPFJvb3Q+JwogICAgICB9CiAgICAgIHZhciBvcHRpb25zID0gdHlwZW9mIHZtID09PSAnZnVuY3Rpb24nICYmIHZtLmNpZCAhPSBudWxsCiAgICAgICAgPyB2bS5vcHRpb25zCiAgICAgICAgOiB2bS5faXNWdWUKICAgICAgICAgID8gdm0uJG9wdGlvbnMgfHwgdm0uY29uc3RydWN0b3Iub3B0aW9ucwogICAgICAgICAgOiB2bTsKICAgICAgdmFyIG5hbWUgPSBvcHRpb25zLm5hbWUgfHwgb3B0aW9ucy5fY29tcG9uZW50VGFnOwogICAgICB2YXIgZmlsZSA9IG9wdGlvbnMuX19maWxlOwogICAgICBpZiAoIW5hbWUgJiYgZmlsZSkgewogICAgICAgIHZhciBtYXRjaCA9IGZpbGUubWF0Y2goLyhbXi9cXF0rKVwudnVlJC8pOwogICAgICAgIG5hbWUgPSBtYXRjaCAmJiBtYXRjaFsxXTsKICAgICAgfQoKICAgICAgcmV0dXJuICgKICAgICAgICAobmFtZSA/ICgiPCIgKyAoY2xhc3NpZnkobmFtZSkpICsgIj4iKSA6ICI8QW5vbnltb3VzPiIpICsKICAgICAgICAoZmlsZSAmJiBpbmNsdWRlRmlsZSAhPT0gZmFsc2UgPyAoIiBhdCAiICsgZmlsZSkgOiAnJykKICAgICAgKQogICAgfTsKCiAgICB2YXIgcmVwZWF0ID0gZnVuY3Rpb24gKHN0ciwgbikgewogICAgICB2YXIgcmVzID0gJyc7CiAgICAgIHdoaWxlIChuKSB7CiAgICAgICAgaWYgKG4gJSAyID09PSAxKSB7IHJlcyArPSBzdHI7IH0KICAgICAgICBpZiAobiA+IDEpIHsgc3RyICs9IHN0cjsgfQogICAgICAgIG4gPj49IDE7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlcwogICAgfTsKCiAgICBnZW5lcmF0ZUNvbXBvbmVudFRyYWNlID0gZnVuY3Rpb24gKHZtKSB7CiAgICAgIGlmICh2bS5faXNWdWUgJiYgdm0uJHBhcmVudCkgewogICAgICAgIHZhciB0cmVlID0gW107CiAgICAgICAgdmFyIGN1cnJlbnRSZWN1cnNpdmVTZXF1ZW5jZSA9IDA7CiAgICAgICAgd2hpbGUgKHZtKSB7CiAgICAgICAgICBpZiAodHJlZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHZhciBsYXN0ID0gdHJlZVt0cmVlLmxlbmd0aCAtIDFdOwogICAgICAgICAgICBpZiAobGFzdC5jb25zdHJ1Y3RvciA9PT0gdm0uY29uc3RydWN0b3IpIHsKICAgICAgICAgICAgICBjdXJyZW50UmVjdXJzaXZlU2VxdWVuY2UrKzsKICAgICAgICAgICAgICB2bSA9IHZtLiRwYXJlbnQ7CiAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50UmVjdXJzaXZlU2VxdWVuY2UgPiAwKSB7CiAgICAgICAgICAgICAgdHJlZVt0cmVlLmxlbmd0aCAtIDFdID0gW2xhc3QsIGN1cnJlbnRSZWN1cnNpdmVTZXF1ZW5jZV07CiAgICAgICAgICAgICAgY3VycmVudFJlY3Vyc2l2ZVNlcXVlbmNlID0gMDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgdHJlZS5wdXNoKHZtKTsKICAgICAgICAgIHZtID0gdm0uJHBhcmVudDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuICdcblxuZm91bmQgaW5cblxuJyArIHRyZWUKICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHZtLCBpKSB7IHJldHVybiAoIiIgKyAoaSA9PT0gMCA/ICctLS0+ICcgOiByZXBlYXQoJyAnLCA1ICsgaSAqIDIpKSArIChBcnJheS5pc0FycmF5KHZtKQogICAgICAgICAgICAgID8gKChmb3JtYXRDb21wb25lbnROYW1lKHZtWzBdKSkgKyAiLi4uICgiICsgKHZtWzFdKSArICIgcmVjdXJzaXZlIGNhbGxzKSIpCiAgICAgICAgICAgICAgOiBmb3JtYXRDb21wb25lbnROYW1lKHZtKSkpOyB9KQogICAgICAgICAgLmpvaW4oJ1xuJykKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gKCJcblxuKGZvdW5kIGluICIgKyAoZm9ybWF0Q29tcG9uZW50TmFtZSh2bSkpICsgIikiKQogICAgICB9CiAgICB9OwogIH0KCiAgLyogICovCgogIHZhciB1aWQgPSAwOwoKICAvKioKICAgKiBBIGRlcCBpcyBhbiBvYnNlcnZhYmxlIHRoYXQgY2FuIGhhdmUgbXVsdGlwbGUKICAgKiBkaXJlY3RpdmVzIHN1YnNjcmliaW5nIHRvIGl0LgogICAqLwogIHZhciBEZXAgPSBmdW5jdGlvbiBEZXAgKCkgewogICAgdGhpcy5pZCA9IHVpZCsrOwogICAgdGhpcy5zdWJzID0gW107CiAgfTsKCiAgRGVwLnByb3RvdHlwZS5hZGRTdWIgPSBmdW5jdGlvbiBhZGRTdWIgKHN1YikgewogICAgdGhpcy5zdWJzLnB1c2goc3ViKTsKICB9OwoKICBEZXAucHJvdG90eXBlLnJlbW92ZVN1YiA9IGZ1bmN0aW9uIHJlbW92ZVN1YiAoc3ViKSB7CiAgICByZW1vdmUodGhpcy5zdWJzLCBzdWIpOwogIH07CgogIERlcC5wcm90b3R5cGUuZGVwZW5kID0gZnVuY3Rpb24gZGVwZW5kICgpIHsKICAgIGlmIChEZXAudGFyZ2V0KSB7CiAgICAgIERlcC50YXJnZXQuYWRkRGVwKHRoaXMpOwogICAgfQogIH07CgogIERlcC5wcm90b3R5cGUubm90aWZ5ID0gZnVuY3Rpb24gbm90aWZ5ICgpIHsKICAgIC8vIHN0YWJpbGl6ZSB0aGUgc3Vic2NyaWJlciBsaXN0IGZpcnN0CiAgICB2YXIgc3VicyA9IHRoaXMuc3Vicy5zbGljZSgpOwogICAgaWYgKCFjb25maWcuYXN5bmMpIHsKICAgICAgLy8gc3VicyBhcmVuJ3Qgc29ydGVkIGluIHNjaGVkdWxlciBpZiBub3QgcnVubmluZyBhc3luYwogICAgICAvLyB3ZSBuZWVkIHRvIHNvcnQgdGhlbSBub3cgdG8gbWFrZSBzdXJlIHRoZXkgZmlyZSBpbiBjb3JyZWN0CiAgICAgIC8vIG9yZGVyCiAgICAgIHN1YnMuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYS5pZCAtIGIuaWQ7IH0pOwogICAgfQogICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdWJzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICBzdWJzW2ldLnVwZGF0ZSgpOwogICAgfQogIH07CgogIC8vIFRoZSBjdXJyZW50IHRhcmdldCB3YXRjaGVyIGJlaW5nIGV2YWx1YXRlZC4KICAvLyBUaGlzIGlzIGdsb2JhbGx5IHVuaXF1ZSBiZWNhdXNlIG9ubHkgb25lIHdhdGNoZXIKICAvLyBjYW4gYmUgZXZhbHVhdGVkIGF0IGEgdGltZS4KICBEZXAudGFyZ2V0ID0gbnVsbDsKICB2YXIgdGFyZ2V0U3RhY2sgPSBbXTsKCiAgZnVuY3Rpb24gcHVzaFRhcmdldCAodGFyZ2V0KSB7CiAgICB0YXJnZXRTdGFjay5wdXNoKHRhcmdldCk7CiAgICBEZXAudGFyZ2V0ID0gdGFyZ2V0OwogIH0KCiAgZnVuY3Rpb24gcG9wVGFyZ2V0ICgpIHsKICAgIHRhcmdldFN0YWNrLnBvcCgpOwogICAgRGVwLnRhcmdldCA9IHRhcmdldFN0YWNrW3RhcmdldFN0YWNrLmxlbmd0aCAtIDFdOwogIH0KCiAgLyogICovCgogIHZhciBWTm9kZSA9IGZ1bmN0aW9uIFZOb2RlICgKICAgIHRhZywKICAgIGRhdGEsCiAgICBjaGlsZHJlbiwKICAgIHRleHQsCiAgICBlbG0sCiAgICBjb250ZXh0LAogICAgY29tcG9uZW50T3B0aW9ucywKICAgIGFzeW5jRmFjdG9yeQogICkgewogICAgdGhpcy50YWcgPSB0YWc7CiAgICB0aGlzLmRhdGEgPSBkYXRhOwogICAgdGhpcy5jaGlsZHJlbiA9IGNoaWxkcmVuOwogICAgdGhpcy50ZXh0ID0gdGV4dDsKICAgIHRoaXMuZWxtID0gZWxtOwogICAgdGhpcy5ucyA9IHVuZGVmaW5lZDsKICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICB0aGlzLmZuQ29udGV4dCA9IHVuZGVmaW5lZDsKICAgIHRoaXMuZm5PcHRpb25zID0gdW5kZWZpbmVkOwogICAgdGhpcy5mblNjb3BlSWQgPSB1bmRlZmluZWQ7CiAgICB0aGlzLmtleSA9IGRhdGEgJiYgZGF0YS5rZXk7CiAgICB0aGlzLmNvbXBvbmVudE9wdGlvbnMgPSBjb21wb25lbnRPcHRpb25zOwogICAgdGhpcy5jb21wb25lbnRJbnN0YW5jZSA9IHVuZGVmaW5lZDsKICAgIHRoaXMucGFyZW50ID0gdW5kZWZpbmVkOwogICAgdGhpcy5yYXcgPSBmYWxzZTsKICAgIHRoaXMuaXNTdGF0aWMgPSBmYWxzZTsKICAgIHRoaXMuaXNSb290SW5zZXJ0ID0gdHJ1ZTsKICAgIHRoaXMuaXNDb21tZW50ID0gZmFsc2U7CiAgICB0aGlzLmlzQ2xvbmVkID0gZmFsc2U7CiAgICB0aGlzLmlzT25jZSA9IGZhbHNlOwogICAgdGhpcy5hc3luY0ZhY3RvcnkgPSBhc3luY0ZhY3Rvcnk7CiAgICB0aGlzLmFzeW5jTWV0YSA9IHVuZGVmaW5lZDsKICAgIHRoaXMuaXNBc3luY1BsYWNlaG9sZGVyID0gZmFsc2U7CiAgfTsKCiAgdmFyIHByb3RvdHlwZUFjY2Vzc29ycyA9IHsgY2hpbGQ6IHsgY29uZmlndXJhYmxlOiB0cnVlIH0gfTsKCiAgLy8gREVQUkVDQVRFRDogYWxpYXMgZm9yIGNvbXBvbmVudEluc3RhbmNlIGZvciBiYWNrd2FyZHMgY29tcGF0LgogIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgcHJvdG90eXBlQWNjZXNzb3JzLmNoaWxkLmdldCA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzLmNvbXBvbmVudEluc3RhbmNlCiAgfTsKCiAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoIFZOb2RlLnByb3RvdHlwZSwgcHJvdG90eXBlQWNjZXNzb3JzICk7CgogIHZhciBjcmVhdGVFbXB0eVZOb2RlID0gZnVuY3Rpb24gKHRleHQpIHsKICAgIGlmICggdGV4dCA9PT0gdm9pZCAwICkgdGV4dCA9ICcnOwoKICAgIHZhciBub2RlID0gbmV3IFZOb2RlKCk7CiAgICBub2RlLnRleHQgPSB0ZXh0OwogICAgbm9kZS5pc0NvbW1lbnQgPSB0cnVlOwogICAgcmV0dXJuIG5vZGUKICB9OwoKICBmdW5jdGlvbiBjcmVhdGVUZXh0Vk5vZGUgKHZhbCkgewogICAgcmV0dXJuIG5ldyBWTm9kZSh1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBTdHJpbmcodmFsKSkKICB9CgogIC8vIG9wdGltaXplZCBzaGFsbG93IGNsb25lCiAgLy8gdXNlZCBmb3Igc3RhdGljIG5vZGVzIGFuZCBzbG90IG5vZGVzIGJlY2F1c2UgdGhleSBtYXkgYmUgcmV1c2VkIGFjcm9zcwogIC8vIG11bHRpcGxlIHJlbmRlcnMsIGNsb25pbmcgdGhlbSBhdm9pZHMgZXJyb3JzIHdoZW4gRE9NIG1hbmlwdWxhdGlvbnMgcmVseQogIC8vIG9uIHRoZWlyIGVsbSByZWZlcmVuY2UuCiAgZnVuY3Rpb24gY2xvbmVWTm9kZSAodm5vZGUpIHsKICAgIHZhciBjbG9uZWQgPSBuZXcgVk5vZGUoCiAgICAgIHZub2RlLnRhZywKICAgICAgdm5vZGUuZGF0YSwKICAgICAgLy8gIzc5NzUKICAgICAgLy8gY2xvbmUgY2hpbGRyZW4gYXJyYXkgdG8gYXZvaWQgbXV0YXRpbmcgb3JpZ2luYWwgaW4gY2FzZSBvZiBjbG9uaW5nCiAgICAgIC8vIGEgY2hpbGQuCiAgICAgIHZub2RlLmNoaWxkcmVuICYmIHZub2RlLmNoaWxkcmVuLnNsaWNlKCksCiAgICAgIHZub2RlLnRleHQsCiAgICAgIHZub2RlLmVsbSwKICAgICAgdm5vZGUuY29udGV4dCwKICAgICAgdm5vZGUuY29tcG9uZW50T3B0aW9ucywKICAgICAgdm5vZGUuYXN5bmNGYWN0b3J5CiAgICApOwogICAgY2xvbmVkLm5zID0gdm5vZGUubnM7CiAgICBjbG9uZWQuaXNTdGF0aWMgPSB2bm9kZS5pc1N0YXRpYzsKICAgIGNsb25lZC5rZXkgPSB2bm9kZS5rZXk7CiAgICBjbG9uZWQuaXNDb21tZW50ID0gdm5vZGUuaXNDb21tZW50OwogICAgY2xvbmVkLmZuQ29udGV4dCA9IHZub2RlLmZuQ29udGV4dDsKICAgIGNsb25lZC5mbk9wdGlvbnMgPSB2bm9kZS5mbk9wdGlvbnM7CiAgICBjbG9uZWQuZm5TY29wZUlkID0gdm5vZGUuZm5TY29wZUlkOwogICAgY2xvbmVkLmFzeW5jTWV0YSA9IHZub2RlLmFzeW5jTWV0YTsKICAgIGNsb25lZC5pc0Nsb25lZCA9IHRydWU7CiAgICByZXR1cm4gY2xvbmVkCiAgfQoKICAvKgogICAqIG5vdCB0eXBlIGNoZWNraW5nIHRoaXMgZmlsZSBiZWNhdXNlIGZsb3cgZG9lc24ndCBwbGF5IHdlbGwgd2l0aAogICAqIGR5bmFtaWNhbGx5IGFjY2Vzc2luZyBtZXRob2RzIG9uIEFycmF5IHByb3RvdHlwZQogICAqLwoKICB2YXIgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZTsKICB2YXIgYXJyYXlNZXRob2RzID0gT2JqZWN0LmNyZWF0ZShhcnJheVByb3RvKTsKCiAgdmFyIG1ldGhvZHNUb1BhdGNoID0gWwogICAgJ3B1c2gnLAogICAgJ3BvcCcsCiAgICAnc2hpZnQnLAogICAgJ3Vuc2hpZnQnLAogICAgJ3NwbGljZScsCiAgICAnc29ydCcsCiAgICAncmV2ZXJzZScKICBdOwoKICAvKioKICAgKiBJbnRlcmNlcHQgbXV0YXRpbmcgbWV0aG9kcyBhbmQgZW1pdCBldmVudHMKICAgKi8KICBtZXRob2RzVG9QYXRjaC5mb3JFYWNoKGZ1bmN0aW9uIChtZXRob2QpIHsKICAgIC8vIGNhY2hlIG9yaWdpbmFsIG1ldGhvZAogICAgdmFyIG9yaWdpbmFsID0gYXJyYXlQcm90b1ttZXRob2RdOwogICAgZGVmKGFycmF5TWV0aG9kcywgbWV0aG9kLCBmdW5jdGlvbiBtdXRhdG9yICgpIHsKICAgICAgdmFyIGFyZ3MgPSBbXSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsKICAgICAgd2hpbGUgKCBsZW4tLSApIGFyZ3NbIGxlbiBdID0gYXJndW1lbnRzWyBsZW4gXTsKCiAgICAgIHZhciByZXN1bHQgPSBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmdzKTsKICAgICAgdmFyIG9iID0gdGhpcy5fX29iX187CiAgICAgIHZhciBpbnNlcnRlZDsKICAgICAgc3dpdGNoIChtZXRob2QpIHsKICAgICAgICBjYXNlICdwdXNoJzoKICAgICAgICBjYXNlICd1bnNoaWZ0JzoKICAgICAgICAgIGluc2VydGVkID0gYXJnczsKICAgICAgICAgIGJyZWFrCiAgICAgICAgY2FzZSAnc3BsaWNlJzoKICAgICAgICAgIGluc2VydGVkID0gYXJncy5zbGljZSgyKTsKICAgICAgICAgIGJyZWFrCiAgICAgIH0KICAgICAgaWYgKGluc2VydGVkKSB7IG9iLm9ic2VydmVBcnJheShpbnNlcnRlZCk7IH0KICAgICAgLy8gbm90aWZ5IGNoYW5nZQogICAgICBvYi5kZXAubm90aWZ5KCk7CiAgICAgIHJldHVybiByZXN1bHQKICAgIH0pOwogIH0pOwoKICAvKiAgKi8KCiAgdmFyIGFycmF5S2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGFycmF5TWV0aG9kcyk7CgogIC8qKgogICAqIEluIHNvbWUgY2FzZXMgd2UgbWF5IHdhbnQgdG8gZGlzYWJsZSBvYnNlcnZhdGlvbiBpbnNpZGUgYSBjb21wb25lbnQncwogICAqIHVwZGF0ZSBjb21wdXRhdGlvbi4KICAgKi8KICB2YXIgc2hvdWxkT2JzZXJ2ZSA9IHRydWU7CgogIGZ1bmN0aW9uIHRvZ2dsZU9ic2VydmluZyAodmFsdWUpIHsKICAgIHNob3VsZE9ic2VydmUgPSB2YWx1ZTsKICB9CgogIC8qKgogICAqIE9ic2VydmVyIGNsYXNzIHRoYXQgaXMgYXR0YWNoZWQgdG8gZWFjaCBvYnNlcnZlZAogICAqIG9iamVjdC4gT25jZSBhdHRhY2hlZCwgdGhlIG9ic2VydmVyIGNvbnZlcnRzIHRoZSB0YXJnZXQKICAgKiBvYmplY3QncyBwcm9wZXJ0eSBrZXlzIGludG8gZ2V0dGVyL3NldHRlcnMgdGhhdAogICAqIGNvbGxlY3QgZGVwZW5kZW5jaWVzIGFuZCBkaXNwYXRjaCB1cGRhdGVzLgogICAqLwogIHZhciBPYnNlcnZlciA9IGZ1bmN0aW9uIE9ic2VydmVyICh2YWx1ZSkgewogICAgdGhpcy52YWx1ZSA9IHZhbHVlOwogICAgdGhpcy5kZXAgPSBuZXcgRGVwKCk7CiAgICB0aGlzLnZtQ291bnQgPSAwOwogICAgZGVmKHZhbHVlLCAnX19vYl9fJywgdGhpcyk7CiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgICAgaWYgKGhhc1Byb3RvKSB7CiAgICAgICAgcHJvdG9BdWdtZW50KHZhbHVlLCBhcnJheU1ldGhvZHMpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvcHlBdWdtZW50KHZhbHVlLCBhcnJheU1ldGhvZHMsIGFycmF5S2V5cyk7CiAgICAgIH0KICAgICAgdGhpcy5vYnNlcnZlQXJyYXkodmFsdWUpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy53YWxrKHZhbHVlKTsKICAgIH0KICB9OwoKICAvKioKICAgKiBXYWxrIHRocm91Z2ggYWxsIHByb3BlcnRpZXMgYW5kIGNvbnZlcnQgdGhlbSBpbnRvCiAgICogZ2V0dGVyL3NldHRlcnMuIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCB3aGVuCiAgICogdmFsdWUgdHlwZSBpcyBPYmplY3QuCiAgICovCiAgT2JzZXJ2ZXIucHJvdG90eXBlLndhbGsgPSBmdW5jdGlvbiB3YWxrIChvYmopIHsKICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykgewogICAgICBkZWZpbmVSZWFjdGl2ZSQkMShvYmosIGtleXNbaV0pOwogICAgfQogIH07CgogIC8qKgogICAqIE9ic2VydmUgYSBsaXN0IG9mIEFycmF5IGl0ZW1zLgogICAqLwogIE9ic2VydmVyLnByb3RvdHlwZS5vYnNlcnZlQXJyYXkgPSBmdW5jdGlvbiBvYnNlcnZlQXJyYXkgKGl0ZW1zKSB7CiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGl0ZW1zLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICBvYnNlcnZlKGl0ZW1zW2ldKTsKICAgIH0KICB9OwoKICAvLyBoZWxwZXJzCgogIC8qKgogICAqIEF1Z21lbnQgYSB0YXJnZXQgT2JqZWN0IG9yIEFycmF5IGJ5IGludGVyY2VwdGluZwogICAqIHRoZSBwcm90b3R5cGUgY2hhaW4gdXNpbmcgX19wcm90b19fCiAgICovCiAgZnVuY3Rpb24gcHJvdG9BdWdtZW50ICh0YXJnZXQsIHNyYykgewogICAgLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi8KICAgIHRhcmdldC5fX3Byb3RvX18gPSBzcmM7CiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLXByb3RvICovCiAgfQoKICAvKioKICAgKiBBdWdtZW50IGEgdGFyZ2V0IE9iamVjdCBvciBBcnJheSBieSBkZWZpbmluZwogICAqIGhpZGRlbiBwcm9wZXJ0aWVzLgogICAqLwogIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgZnVuY3Rpb24gY29weUF1Z21lbnQgKHRhcmdldCwgc3JjLCBrZXlzKSB7CiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgIHZhciBrZXkgPSBrZXlzW2ldOwogICAgICBkZWYodGFyZ2V0LCBrZXksIHNyY1trZXldKTsKICAgIH0KICB9CgogIC8qKgogICAqIEF0dGVtcHQgdG8gY3JlYXRlIGFuIG9ic2VydmVyIGluc3RhbmNlIGZvciBhIHZhbHVlLAogICAqIHJldHVybnMgdGhlIG5ldyBvYnNlcnZlciBpZiBzdWNjZXNzZnVsbHkgb2JzZXJ2ZWQsCiAgICogb3IgdGhlIGV4aXN0aW5nIG9ic2VydmVyIGlmIHRoZSB2YWx1ZSBhbHJlYWR5IGhhcyBvbmUuCiAgICovCiAgZnVuY3Rpb24gb2JzZXJ2ZSAodmFsdWUsIGFzUm9vdERhdGEpIHsKICAgIGlmICghaXNPYmplY3QodmFsdWUpIHx8IHZhbHVlIGluc3RhbmNlb2YgVk5vZGUpIHsKICAgICAgcmV0dXJuCiAgICB9CiAgICB2YXIgb2I7CiAgICBpZiAoaGFzT3duKHZhbHVlLCAnX19vYl9fJykgJiYgdmFsdWUuX19vYl9fIGluc3RhbmNlb2YgT2JzZXJ2ZXIpIHsKICAgICAgb2IgPSB2YWx1ZS5fX29iX187CiAgICB9IGVsc2UgaWYgKAogICAgICBzaG91bGRPYnNlcnZlICYmCiAgICAgICFpc1NlcnZlclJlbmRlcmluZygpICYmCiAgICAgIChBcnJheS5pc0FycmF5KHZhbHVlKSB8fCBpc1BsYWluT2JqZWN0KHZhbHVlKSkgJiYKICAgICAgT2JqZWN0LmlzRXh0ZW5zaWJsZSh2YWx1ZSkgJiYKICAgICAgIXZhbHVlLl9pc1Z1ZQogICAgKSB7CiAgICAgIG9iID0gbmV3IE9ic2VydmVyKHZhbHVlKTsKICAgIH0KICAgIGlmIChhc1Jvb3REYXRhICYmIG9iKSB7CiAgICAgIG9iLnZtQ291bnQrKzsKICAgIH0KICAgIHJldHVybiBvYgogIH0KCiAgLyoqCiAgICogRGVmaW5lIGEgcmVhY3RpdmUgcHJvcGVydHkgb24gYW4gT2JqZWN0LgogICAqLwogIGZ1bmN0aW9uIGRlZmluZVJlYWN0aXZlJCQxICgKICAgIG9iaiwKICAgIGtleSwKICAgIHZhbCwKICAgIGN1c3RvbVNldHRlciwKICAgIHNoYWxsb3cKICApIHsKICAgIHZhciBkZXAgPSBuZXcgRGVwKCk7CgogICAgdmFyIHByb3BlcnR5ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSk7CiAgICBpZiAocHJvcGVydHkgJiYgcHJvcGVydHkuY29uZmlndXJhYmxlID09PSBmYWxzZSkgewogICAgICByZXR1cm4KICAgIH0KCiAgICAvLyBjYXRlciBmb3IgcHJlLWRlZmluZWQgZ2V0dGVyL3NldHRlcnMKICAgIHZhciBnZXR0ZXIgPSBwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5nZXQ7CiAgICB2YXIgc2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuc2V0OwogICAgaWYgKCghZ2V0dGVyIHx8IHNldHRlcikgJiYgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgewogICAgICB2YWwgPSBvYmpba2V5XTsKICAgIH0KCiAgICB2YXIgY2hpbGRPYiA9ICFzaGFsbG93ICYmIG9ic2VydmUodmFsKTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIGdldDogZnVuY3Rpb24gcmVhY3RpdmVHZXR0ZXIgKCkgewogICAgICAgIHZhciB2YWx1ZSA9IGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiB2YWw7CiAgICAgICAgaWYgKERlcC50YXJnZXQpIHsKICAgICAgICAgIGRlcC5kZXBlbmQoKTsKICAgICAgICAgIGlmIChjaGlsZE9iKSB7CiAgICAgICAgICAgIGNoaWxkT2IuZGVwLmRlcGVuZCgpOwogICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgICAgICAgICAgICBkZXBlbmRBcnJheSh2YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHZhbHVlCiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gcmVhY3RpdmVTZXR0ZXIgKG5ld1ZhbCkgewogICAgICAgIHZhciB2YWx1ZSA9IGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiB2YWw7CiAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tc2VsZi1jb21wYXJlICovCiAgICAgICAgaWYgKG5ld1ZhbCA9PT0gdmFsdWUgfHwgKG5ld1ZhbCAhPT0gbmV3VmFsICYmIHZhbHVlICE9PSB2YWx1ZSkpIHsKICAgICAgICAgIHJldHVybgogICAgICAgIH0KICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLXNlbGYtY29tcGFyZSAqLwogICAgICAgIGlmIChjdXN0b21TZXR0ZXIpIHsKICAgICAgICAgIGN1c3RvbVNldHRlcigpOwogICAgICAgIH0KICAgICAgICAvLyAjNzk4MTogZm9yIGFjY2Vzc29yIHByb3BlcnRpZXMgd2l0aG91dCBzZXR0ZXIKICAgICAgICBpZiAoZ2V0dGVyICYmICFzZXR0ZXIpIHsgcmV0dXJuIH0KICAgICAgICBpZiAoc2V0dGVyKSB7CiAgICAgICAgICBzZXR0ZXIuY2FsbChvYmosIG5ld1ZhbCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhbCA9IG5ld1ZhbDsKICAgICAgICB9CiAgICAgICAgY2hpbGRPYiA9ICFzaGFsbG93ICYmIG9ic2VydmUobmV3VmFsKTsKICAgICAgICBkZXAubm90aWZ5KCk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgLyoqCiAgICogU2V0IGEgcHJvcGVydHkgb24gYW4gb2JqZWN0LiBBZGRzIHRoZSBuZXcgcHJvcGVydHkgYW5kCiAgICogdHJpZ2dlcnMgY2hhbmdlIG5vdGlmaWNhdGlvbiBpZiB0aGUgcHJvcGVydHkgZG9lc24ndAogICAqIGFscmVhZHkgZXhpc3QuCiAgICovCiAgZnVuY3Rpb24gc2V0ICh0YXJnZXQsIGtleSwgdmFsKSB7CiAgICBpZiAoaXNVbmRlZih0YXJnZXQpIHx8IGlzUHJpbWl0aXZlKHRhcmdldCkKICAgICkgewogICAgICB3YXJuKCgiQ2Fubm90IHNldCByZWFjdGl2ZSBwcm9wZXJ0eSBvbiB1bmRlZmluZWQsIG51bGwsIG9yIHByaW1pdGl2ZSB2YWx1ZTogIiArICgodGFyZ2V0KSkpKTsKICAgIH0KICAgIGlmIChBcnJheS5pc0FycmF5KHRhcmdldCkgJiYgaXNWYWxpZEFycmF5SW5kZXgoa2V5KSkgewogICAgICB0YXJnZXQubGVuZ3RoID0gTWF0aC5tYXgodGFyZ2V0Lmxlbmd0aCwga2V5KTsKICAgICAgdGFyZ2V0LnNwbGljZShrZXksIDEsIHZhbCk7CiAgICAgIHJldHVybiB2YWwKICAgIH0KICAgIGlmIChrZXkgaW4gdGFyZ2V0ICYmICEoa2V5IGluIE9iamVjdC5wcm90b3R5cGUpKSB7CiAgICAgIHRhcmdldFtrZXldID0gdmFsOwogICAgICByZXR1cm4gdmFsCiAgICB9CiAgICB2YXIgb2IgPSAodGFyZ2V0KS5fX29iX187CiAgICBpZiAodGFyZ2V0Ll9pc1Z1ZSB8fCAob2IgJiYgb2Iudm1Db3VudCkpIHsKICAgICAgd2FybigKICAgICAgICAnQXZvaWQgYWRkaW5nIHJlYWN0aXZlIHByb3BlcnRpZXMgdG8gYSBWdWUgaW5zdGFuY2Ugb3IgaXRzIHJvb3QgJGRhdGEgJyArCiAgICAgICAgJ2F0IHJ1bnRpbWUgLSBkZWNsYXJlIGl0IHVwZnJvbnQgaW4gdGhlIGRhdGEgb3B0aW9uLicKICAgICAgKTsKICAgICAgcmV0dXJuIHZhbAogICAgfQogICAgaWYgKCFvYikgewogICAgICB0YXJnZXRba2V5XSA9IHZhbDsKICAgICAgcmV0dXJuIHZhbAogICAgfQogICAgZGVmaW5lUmVhY3RpdmUkJDEob2IudmFsdWUsIGtleSwgdmFsKTsKICAgIG9iLmRlcC5ub3RpZnkoKTsKICAgIHJldHVybiB2YWwKICB9CgogIC8qKgogICAqIERlbGV0ZSBhIHByb3BlcnR5IGFuZCB0cmlnZ2VyIGNoYW5nZSBpZiBuZWNlc3NhcnkuCiAgICovCiAgZnVuY3Rpb24gZGVsICh0YXJnZXQsIGtleSkgewogICAgaWYgKGlzVW5kZWYodGFyZ2V0KSB8fCBpc1ByaW1pdGl2ZSh0YXJnZXQpCiAgICApIHsKICAgICAgd2FybigoIkNhbm5vdCBkZWxldGUgcmVhY3RpdmUgcHJvcGVydHkgb24gdW5kZWZpbmVkLCBudWxsLCBvciBwcmltaXRpdmUgdmFsdWU6ICIgKyAoKHRhcmdldCkpKSk7CiAgICB9CiAgICBpZiAoQXJyYXkuaXNBcnJheSh0YXJnZXQpICYmIGlzVmFsaWRBcnJheUluZGV4KGtleSkpIHsKICAgICAgdGFyZ2V0LnNwbGljZShrZXksIDEpOwogICAgICByZXR1cm4KICAgIH0KICAgIHZhciBvYiA9ICh0YXJnZXQpLl9fb2JfXzsKICAgIGlmICh0YXJnZXQuX2lzVnVlIHx8IChvYiAmJiBvYi52bUNvdW50KSkgewogICAgICB3YXJuKAogICAgICAgICdBdm9pZCBkZWxldGluZyBwcm9wZXJ0aWVzIG9uIGEgVnVlIGluc3RhbmNlIG9yIGl0cyByb290ICRkYXRhICcgKwogICAgICAgICctIGp1c3Qgc2V0IGl0IHRvIG51bGwuJwogICAgICApOwogICAgICByZXR1cm4KICAgIH0KICAgIGlmICghaGFzT3duKHRhcmdldCwga2V5KSkgewogICAgICByZXR1cm4KICAgIH0KICAgIGRlbGV0ZSB0YXJnZXRba2V5XTsKICAgIGlmICghb2IpIHsKICAgICAgcmV0dXJuCiAgICB9CiAgICBvYi5kZXAubm90aWZ5KCk7CiAgfQoKICAvKioKICAgKiBDb2xsZWN0IGRlcGVuZGVuY2llcyBvbiBhcnJheSBlbGVtZW50cyB3aGVuIHRoZSBhcnJheSBpcyB0b3VjaGVkLCBzaW5jZQogICAqIHdlIGNhbm5vdCBpbnRlcmNlcHQgYXJyYXkgZWxlbWVudCBhY2Nlc3MgbGlrZSBwcm9wZXJ0eSBnZXR0ZXJzLgogICAqLwogIGZ1bmN0aW9uIGRlcGVuZEFycmF5ICh2YWx1ZSkgewogICAgZm9yICh2YXIgZSA9ICh2b2lkIDApLCBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICBlID0gdmFsdWVbaV07CiAgICAgIGUgJiYgZS5fX29iX18gJiYgZS5fX29iX18uZGVwLmRlcGVuZCgpOwogICAgICBpZiAoQXJyYXkuaXNBcnJheShlKSkgewogICAgICAgIGRlcGVuZEFycmF5KGUpOwogICAgICB9CiAgICB9CiAgfQoKICAvKiAgKi8KCiAgLyoqCiAgICogT3B0aW9uIG92ZXJ3cml0aW5nIHN0cmF0ZWdpZXMgYXJlIGZ1bmN0aW9ucyB0aGF0IGhhbmRsZQogICAqIGhvdyB0byBtZXJnZSBhIHBhcmVudCBvcHRpb24gdmFsdWUgYW5kIGEgY2hpbGQgb3B0aW9uCiAgICogdmFsdWUgaW50byB0aGUgZmluYWwgdmFsdWUuCiAgICovCiAgdmFyIHN0cmF0cyA9IGNvbmZpZy5vcHRpb25NZXJnZVN0cmF0ZWdpZXM7CgogIC8qKgogICAqIE9wdGlvbnMgd2l0aCByZXN0cmljdGlvbnMKICAgKi8KICB7CiAgICBzdHJhdHMuZWwgPSBzdHJhdHMucHJvcHNEYXRhID0gZnVuY3Rpb24gKHBhcmVudCwgY2hpbGQsIHZtLCBrZXkpIHsKICAgICAgaWYgKCF2bSkgewogICAgICAgIHdhcm4oCiAgICAgICAgICAib3B0aW9uIFwiIiArIGtleSArICJcIiBjYW4gb25seSBiZSB1c2VkIGR1cmluZyBpbnN0YW5jZSAiICsKICAgICAgICAgICdjcmVhdGlvbiB3aXRoIHRoZSBgbmV3YCBrZXl3b3JkLicKICAgICAgICApOwogICAgICB9CiAgICAgIHJldHVybiBkZWZhdWx0U3RyYXQocGFyZW50LCBjaGlsZCkKICAgIH07CiAgfQoKICAvKioKICAgKiBIZWxwZXIgdGhhdCByZWN1cnNpdmVseSBtZXJnZXMgdHdvIGRhdGEgb2JqZWN0cyB0b2dldGhlci4KICAgKi8KICBmdW5jdGlvbiBtZXJnZURhdGEgKHRvLCBmcm9tKSB7CiAgICBpZiAoIWZyb20pIHsgcmV0dXJuIHRvIH0KICAgIHZhciBrZXksIHRvVmFsLCBmcm9tVmFsOwoKICAgIHZhciBrZXlzID0gaGFzU3ltYm9sCiAgICAgID8gUmVmbGVjdC5vd25LZXlzKGZyb20pCiAgICAgIDogT2JqZWN0LmtleXMoZnJvbSk7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGtleSA9IGtleXNbaV07CiAgICAgIC8vIGluIGNhc2UgdGhlIG9iamVjdCBpcyBhbHJlYWR5IG9ic2VydmVkLi4uCiAgICAgIGlmIChrZXkgPT09ICdfX29iX18nKSB7IGNvbnRpbnVlIH0KICAgICAgdG9WYWwgPSB0b1trZXldOwogICAgICBmcm9tVmFsID0gZnJvbVtrZXldOwogICAgICBpZiAoIWhhc093bih0bywga2V5KSkgewogICAgICAgIHNldCh0bywga2V5LCBmcm9tVmFsKTsKICAgICAgfSBlbHNlIGlmICgKICAgICAgICB0b1ZhbCAhPT0gZnJvbVZhbCAmJgogICAgICAgIGlzUGxhaW5PYmplY3QodG9WYWwpICYmCiAgICAgICAgaXNQbGFpbk9iamVjdChmcm9tVmFsKQogICAgICApIHsKICAgICAgICBtZXJnZURhdGEodG9WYWwsIGZyb21WYWwpOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gdG8KICB9CgogIC8qKgogICAqIERhdGEKICAgKi8KICBmdW5jdGlvbiBtZXJnZURhdGFPckZuICgKICAgIHBhcmVudFZhbCwKICAgIGNoaWxkVmFsLAogICAgdm0KICApIHsKICAgIGlmICghdm0pIHsKICAgICAgLy8gaW4gYSBWdWUuZXh0ZW5kIG1lcmdlLCBib3RoIHNob3VsZCBiZSBmdW5jdGlvbnMKICAgICAgaWYgKCFjaGlsZFZhbCkgewogICAgICAgIHJldHVybiBwYXJlbnRWYWwKICAgICAgfQogICAgICBpZiAoIXBhcmVudFZhbCkgewogICAgICAgIHJldHVybiBjaGlsZFZhbAogICAgICB9CiAgICAgIC8vIHdoZW4gcGFyZW50VmFsICYgY2hpbGRWYWwgYXJlIGJvdGggcHJlc2VudCwKICAgICAgLy8gd2UgbmVlZCB0byByZXR1cm4gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlCiAgICAgIC8vIG1lcmdlZCByZXN1bHQgb2YgYm90aCBmdW5jdGlvbnMuLi4gbm8gbmVlZCB0bwogICAgICAvLyBjaGVjayBpZiBwYXJlbnRWYWwgaXMgYSBmdW5jdGlvbiBoZXJlIGJlY2F1c2UKICAgICAgLy8gaXQgaGFzIHRvIGJlIGEgZnVuY3Rpb24gdG8gcGFzcyBwcmV2aW91cyBtZXJnZXMuCiAgICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZWREYXRhRm4gKCkgewogICAgICAgIHJldHVybiBtZXJnZURhdGEoCiAgICAgICAgICB0eXBlb2YgY2hpbGRWYWwgPT09ICdmdW5jdGlvbicgPyBjaGlsZFZhbC5jYWxsKHRoaXMsIHRoaXMpIDogY2hpbGRWYWwsCiAgICAgICAgICB0eXBlb2YgcGFyZW50VmFsID09PSAnZnVuY3Rpb24nID8gcGFyZW50VmFsLmNhbGwodGhpcywgdGhpcykgOiBwYXJlbnRWYWwKICAgICAgICApCiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZWRJbnN0YW5jZURhdGFGbiAoKSB7CiAgICAgICAgLy8gaW5zdGFuY2UgbWVyZ2UKICAgICAgICB2YXIgaW5zdGFuY2VEYXRhID0gdHlwZW9mIGNoaWxkVmFsID09PSAnZnVuY3Rpb24nCiAgICAgICAgICA/IGNoaWxkVmFsLmNhbGwodm0sIHZtKQogICAgICAgICAgOiBjaGlsZFZhbDsKICAgICAgICB2YXIgZGVmYXVsdERhdGEgPSB0eXBlb2YgcGFyZW50VmFsID09PSAnZnVuY3Rpb24nCiAgICAgICAgICA/IHBhcmVudFZhbC5jYWxsKHZtLCB2bSkKICAgICAgICAgIDogcGFyZW50VmFsOwogICAgICAgIGlmIChpbnN0YW5jZURhdGEpIHsKICAgICAgICAgIHJldHVybiBtZXJnZURhdGEoaW5zdGFuY2VEYXRhLCBkZWZhdWx0RGF0YSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGRlZmF1bHREYXRhCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICBzdHJhdHMuZGF0YSA9IGZ1bmN0aW9uICgKICAgIHBhcmVudFZhbCwKICAgIGNoaWxkVmFsLAogICAgdm0KICApIHsKICAgIGlmICghdm0pIHsKICAgICAgaWYgKGNoaWxkVmFsICYmIHR5cGVvZiBjaGlsZFZhbCAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHdhcm4oCiAgICAgICAgICAnVGhlICJkYXRhIiBvcHRpb24gc2hvdWxkIGJlIGEgZnVuY3Rpb24gJyArCiAgICAgICAgICAndGhhdCByZXR1cm5zIGEgcGVyLWluc3RhbmNlIHZhbHVlIGluIGNvbXBvbmVudCAnICsKICAgICAgICAgICdkZWZpbml0aW9ucy4nLAogICAgICAgICAgdm0KICAgICAgICApOwoKICAgICAgICByZXR1cm4gcGFyZW50VmFsCiAgICAgIH0KICAgICAgcmV0dXJuIG1lcmdlRGF0YU9yRm4ocGFyZW50VmFsLCBjaGlsZFZhbCkKICAgIH0KCiAgICByZXR1cm4gbWVyZ2VEYXRhT3JGbihwYXJlbnRWYWwsIGNoaWxkVmFsLCB2bSkKICB9OwoKICAvKioKICAgKiBIb29rcyBhbmQgcHJvcHMgYXJlIG1lcmdlZCBhcyBhcnJheXMuCiAgICovCiAgZnVuY3Rpb24gbWVyZ2VIb29rICgKICAgIHBhcmVudFZhbCwKICAgIGNoaWxkVmFsCiAgKSB7CiAgICB2YXIgcmVzID0gY2hpbGRWYWwKICAgICAgPyBwYXJlbnRWYWwKICAgICAgICA/IHBhcmVudFZhbC5jb25jYXQoY2hpbGRWYWwpCiAgICAgICAgOiBBcnJheS5pc0FycmF5KGNoaWxkVmFsKQogICAgICAgICAgPyBjaGlsZFZhbAogICAgICAgICAgOiBbY2hpbGRWYWxdCiAgICAgIDogcGFyZW50VmFsOwogICAgcmV0dXJuIHJlcwogICAgICA/IGRlZHVwZUhvb2tzKHJlcykKICAgICAgOiByZXMKICB9CgogIGZ1bmN0aW9uIGRlZHVwZUhvb2tzIChob29rcykgewogICAgdmFyIHJlcyA9IFtdOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBob29rcy5sZW5ndGg7IGkrKykgewogICAgICBpZiAocmVzLmluZGV4T2YoaG9va3NbaV0pID09PSAtMSkgewogICAgICAgIHJlcy5wdXNoKGhvb2tzW2ldKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlcwogIH0KCiAgTElGRUNZQ0xFX0hPT0tTLmZvckVhY2goZnVuY3Rpb24gKGhvb2spIHsKICAgIHN0cmF0c1tob29rXSA9IG1lcmdlSG9vazsKICB9KTsKCiAgLyoqCiAgICogQXNzZXRzCiAgICoKICAgKiBXaGVuIGEgdm0gaXMgcHJlc2VudCAoaW5zdGFuY2UgY3JlYXRpb24pLCB3ZSBuZWVkIHRvIGRvCiAgICogYSB0aHJlZS13YXkgbWVyZ2UgYmV0d2VlbiBjb25zdHJ1Y3RvciBvcHRpb25zLCBpbnN0YW5jZQogICAqIG9wdGlvbnMgYW5kIHBhcmVudCBvcHRpb25zLgogICAqLwogIGZ1bmN0aW9uIG1lcmdlQXNzZXRzICgKICAgIHBhcmVudFZhbCwKICAgIGNoaWxkVmFsLAogICAgdm0sCiAgICBrZXkKICApIHsKICAgIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFZhbCB8fCBudWxsKTsKICAgIGlmIChjaGlsZFZhbCkgewogICAgICBhc3NlcnRPYmplY3RUeXBlKGtleSwgY2hpbGRWYWwsIHZtKTsKICAgICAgcmV0dXJuIGV4dGVuZChyZXMsIGNoaWxkVmFsKQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHJlcwogICAgfQogIH0KCiAgQVNTRVRfVFlQRVMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkgewogICAgc3RyYXRzW3R5cGUgKyAncyddID0gbWVyZ2VBc3NldHM7CiAgfSk7CgogIC8qKgogICAqIFdhdGNoZXJzLgogICAqCiAgICogV2F0Y2hlcnMgaGFzaGVzIHNob3VsZCBub3Qgb3ZlcndyaXRlIG9uZQogICAqIGFub3RoZXIsIHNvIHdlIG1lcmdlIHRoZW0gYXMgYXJyYXlzLgogICAqLwogIHN0cmF0cy53YXRjaCA9IGZ1bmN0aW9uICgKICAgIHBhcmVudFZhbCwKICAgIGNoaWxkVmFsLAogICAgdm0sCiAgICBrZXkKICApIHsKICAgIC8vIHdvcmsgYXJvdW5kIEZpcmVmb3gncyBPYmplY3QucHJvdG90eXBlLndhdGNoLi4uCiAgICBpZiAocGFyZW50VmFsID09PSBuYXRpdmVXYXRjaCkgeyBwYXJlbnRWYWwgPSB1bmRlZmluZWQ7IH0KICAgIGlmIChjaGlsZFZhbCA9PT0gbmF0aXZlV2F0Y2gpIHsgY2hpbGRWYWwgPSB1bmRlZmluZWQ7IH0KICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgaWYgKCFjaGlsZFZhbCkgeyByZXR1cm4gT2JqZWN0LmNyZWF0ZShwYXJlbnRWYWwgfHwgbnVsbCkgfQogICAgewogICAgICBhc3NlcnRPYmplY3RUeXBlKGtleSwgY2hpbGRWYWwsIHZtKTsKICAgIH0KICAgIGlmICghcGFyZW50VmFsKSB7IHJldHVybiBjaGlsZFZhbCB9CiAgICB2YXIgcmV0ID0ge307CiAgICBleHRlbmQocmV0LCBwYXJlbnRWYWwpOwogICAgZm9yICh2YXIga2V5JDEgaW4gY2hpbGRWYWwpIHsKICAgICAgdmFyIHBhcmVudCA9IHJldFtrZXkkMV07CiAgICAgIHZhciBjaGlsZCA9IGNoaWxkVmFsW2tleSQxXTsKICAgICAgaWYgKHBhcmVudCAmJiAhQXJyYXkuaXNBcnJheShwYXJlbnQpKSB7CiAgICAgICAgcGFyZW50ID0gW3BhcmVudF07CiAgICAgIH0KICAgICAgcmV0W2tleSQxXSA9IHBhcmVudAogICAgICAgID8gcGFyZW50LmNvbmNhdChjaGlsZCkKICAgICAgICA6IEFycmF5LmlzQXJyYXkoY2hpbGQpID8gY2hpbGQgOiBbY2hpbGRdOwogICAgfQogICAgcmV0dXJuIHJldAogIH07CgogIC8qKgogICAqIE90aGVyIG9iamVjdCBoYXNoZXMuCiAgICovCiAgc3RyYXRzLnByb3BzID0KICBzdHJhdHMubWV0aG9kcyA9CiAgc3RyYXRzLmluamVjdCA9CiAgc3RyYXRzLmNvbXB1dGVkID0gZnVuY3Rpb24gKAogICAgcGFyZW50VmFsLAogICAgY2hpbGRWYWwsCiAgICB2bSwKICAgIGtleQogICkgewogICAgaWYgKGNoaWxkVmFsICYmICJkZXZlbG9wbWVudCIgIT09ICdwcm9kdWN0aW9uJykgewogICAgICBhc3NlcnRPYmplY3RUeXBlKGtleSwgY2hpbGRWYWwsIHZtKTsKICAgIH0KICAgIGlmICghcGFyZW50VmFsKSB7IHJldHVybiBjaGlsZFZhbCB9CiAgICB2YXIgcmV0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgIGV4dGVuZChyZXQsIHBhcmVudFZhbCk7CiAgICBpZiAoY2hpbGRWYWwpIHsgZXh0ZW5kKHJldCwgY2hpbGRWYWwpOyB9CiAgICByZXR1cm4gcmV0CiAgfTsKICBzdHJhdHMucHJvdmlkZSA9IG1lcmdlRGF0YU9yRm47CgogIC8qKgogICAqIERlZmF1bHQgc3RyYXRlZ3kuCiAgICovCiAgdmFyIGRlZmF1bHRTdHJhdCA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7CiAgICByZXR1cm4gY2hpbGRWYWwgPT09IHVuZGVmaW5lZAogICAgICA/IHBhcmVudFZhbAogICAgICA6IGNoaWxkVmFsCiAgfTsKCiAgLyoqCiAgICogVmFsaWRhdGUgY29tcG9uZW50IG5hbWVzCiAgICovCiAgZnVuY3Rpb24gY2hlY2tDb21wb25lbnRzIChvcHRpb25zKSB7CiAgICBmb3IgKHZhciBrZXkgaW4gb3B0aW9ucy5jb21wb25lbnRzKSB7CiAgICAgIHZhbGlkYXRlQ29tcG9uZW50TmFtZShrZXkpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gdmFsaWRhdGVDb21wb25lbnROYW1lIChuYW1lKSB7CiAgICBpZiAoIW5ldyBSZWdFeHAoKCJeW2EtekEtWl1bXFwtXFwuMC05XyIgKyAodW5pY29kZVJlZ0V4cC5zb3VyY2UpICsgIl0qJCIpKS50ZXN0KG5hbWUpKSB7CiAgICAgIHdhcm4oCiAgICAgICAgJ0ludmFsaWQgY29tcG9uZW50IG5hbWU6ICInICsgbmFtZSArICciLiBDb21wb25lbnQgbmFtZXMgJyArCiAgICAgICAgJ3Nob3VsZCBjb25mb3JtIHRvIHZhbGlkIGN1c3RvbSBlbGVtZW50IG5hbWUgaW4gaHRtbDUgc3BlY2lmaWNhdGlvbi4nCiAgICAgICk7CiAgICB9CiAgICBpZiAoaXNCdWlsdEluVGFnKG5hbWUpIHx8IGNvbmZpZy5pc1Jlc2VydmVkVGFnKG5hbWUpKSB7CiAgICAgIHdhcm4oCiAgICAgICAgJ0RvIG5vdCB1c2UgYnVpbHQtaW4gb3IgcmVzZXJ2ZWQgSFRNTCBlbGVtZW50cyBhcyBjb21wb25lbnQgJyArCiAgICAgICAgJ2lkOiAnICsgbmFtZQogICAgICApOwogICAgfQogIH0KCiAgLyoqCiAgICogRW5zdXJlIGFsbCBwcm9wcyBvcHRpb24gc3ludGF4IGFyZSBub3JtYWxpemVkIGludG8gdGhlCiAgICogT2JqZWN0LWJhc2VkIGZvcm1hdC4KICAgKi8KICBmdW5jdGlvbiBub3JtYWxpemVQcm9wcyAob3B0aW9ucywgdm0pIHsKICAgIHZhciBwcm9wcyA9IG9wdGlvbnMucHJvcHM7CiAgICBpZiAoIXByb3BzKSB7IHJldHVybiB9CiAgICB2YXIgcmVzID0ge307CiAgICB2YXIgaSwgdmFsLCBuYW1lOwogICAgaWYgKEFycmF5LmlzQXJyYXkocHJvcHMpKSB7CiAgICAgIGkgPSBwcm9wcy5sZW5ndGg7CiAgICAgIHdoaWxlIChpLS0pIHsKICAgICAgICB2YWwgPSBwcm9wc1tpXTsKICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIG5hbWUgPSBjYW1lbGl6ZSh2YWwpOwogICAgICAgICAgcmVzW25hbWVdID0geyB0eXBlOiBudWxsIH07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHdhcm4oJ3Byb3BzIG11c3QgYmUgc3RyaW5ncyB3aGVuIHVzaW5nIGFycmF5IHN5bnRheC4nKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdChwcm9wcykpIHsKICAgICAgZm9yICh2YXIga2V5IGluIHByb3BzKSB7CiAgICAgICAgdmFsID0gcHJvcHNba2V5XTsKICAgICAgICBuYW1lID0gY2FtZWxpemUoa2V5KTsKICAgICAgICByZXNbbmFtZV0gPSBpc1BsYWluT2JqZWN0KHZhbCkKICAgICAgICAgID8gdmFsCiAgICAgICAgICA6IHsgdHlwZTogdmFsIH07CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHdhcm4oCiAgICAgICAgIkludmFsaWQgdmFsdWUgZm9yIG9wdGlvbiBcInByb3BzXCI6IGV4cGVjdGVkIGFuIEFycmF5IG9yIGFuIE9iamVjdCwgIiArCiAgICAgICAgImJ1dCBnb3QgIiArICh0b1Jhd1R5cGUocHJvcHMpKSArICIuIiwKICAgICAgICB2bQogICAgICApOwogICAgfQogICAgb3B0aW9ucy5wcm9wcyA9IHJlczsKICB9CgogIC8qKgogICAqIE5vcm1hbGl6ZSBhbGwgaW5qZWN0aW9ucyBpbnRvIE9iamVjdC1iYXNlZCBmb3JtYXQKICAgKi8KICBmdW5jdGlvbiBub3JtYWxpemVJbmplY3QgKG9wdGlvbnMsIHZtKSB7CiAgICB2YXIgaW5qZWN0ID0gb3B0aW9ucy5pbmplY3Q7CiAgICBpZiAoIWluamVjdCkgeyByZXR1cm4gfQogICAgdmFyIG5vcm1hbGl6ZWQgPSBvcHRpb25zLmluamVjdCA9IHt9OwogICAgaWYgKEFycmF5LmlzQXJyYXkoaW5qZWN0KSkgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluamVjdC5sZW5ndGg7IGkrKykgewogICAgICAgIG5vcm1hbGl6ZWRbaW5qZWN0W2ldXSA9IHsgZnJvbTogaW5qZWN0W2ldIH07CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdChpbmplY3QpKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBpbmplY3QpIHsKICAgICAgICB2YXIgdmFsID0gaW5qZWN0W2tleV07CiAgICAgICAgbm9ybWFsaXplZFtrZXldID0gaXNQbGFpbk9iamVjdCh2YWwpCiAgICAgICAgICA/IGV4dGVuZCh7IGZyb206IGtleSB9LCB2YWwpCiAgICAgICAgICA6IHsgZnJvbTogdmFsIH07CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHdhcm4oCiAgICAgICAgIkludmFsaWQgdmFsdWUgZm9yIG9wdGlvbiBcImluamVjdFwiOiBleHBlY3RlZCBhbiBBcnJheSBvciBhbiBPYmplY3QsICIgKwogICAgICAgICJidXQgZ290ICIgKyAodG9SYXdUeXBlKGluamVjdCkpICsgIi4iLAogICAgICAgIHZtCiAgICAgICk7CiAgICB9CiAgfQoKICAvKioKICAgKiBOb3JtYWxpemUgcmF3IGZ1bmN0aW9uIGRpcmVjdGl2ZXMgaW50byBvYmplY3QgZm9ybWF0LgogICAqLwogIGZ1bmN0aW9uIG5vcm1hbGl6ZURpcmVjdGl2ZXMgKG9wdGlvbnMpIHsKICAgIHZhciBkaXJzID0gb3B0aW9ucy5kaXJlY3RpdmVzOwogICAgaWYgKGRpcnMpIHsKICAgICAgZm9yICh2YXIga2V5IGluIGRpcnMpIHsKICAgICAgICB2YXIgZGVmJCQxID0gZGlyc1trZXldOwogICAgICAgIGlmICh0eXBlb2YgZGVmJCQxID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICBkaXJzW2tleV0gPSB7IGJpbmQ6IGRlZiQkMSwgdXBkYXRlOiBkZWYkJDEgfTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIGFzc2VydE9iamVjdFR5cGUgKG5hbWUsIHZhbHVlLCB2bSkgewogICAgaWYgKCFpc1BsYWluT2JqZWN0KHZhbHVlKSkgewogICAgICB3YXJuKAogICAgICAgICJJbnZhbGlkIHZhbHVlIGZvciBvcHRpb24gXCIiICsgbmFtZSArICJcIjogZXhwZWN0ZWQgYW4gT2JqZWN0LCAiICsKICAgICAgICAiYnV0IGdvdCAiICsgKHRvUmF3VHlwZSh2YWx1ZSkpICsgIi4iLAogICAgICAgIHZtCiAgICAgICk7CiAgICB9CiAgfQoKICAvKioKICAgKiBNZXJnZSB0d28gb3B0aW9uIG9iamVjdHMgaW50byBhIG5ldyBvbmUuCiAgICogQ29yZSB1dGlsaXR5IHVzZWQgaW4gYm90aCBpbnN0YW50aWF0aW9uIGFuZCBpbmhlcml0YW5jZS4KICAgKi8KICBmdW5jdGlvbiBtZXJnZU9wdGlvbnMgKAogICAgcGFyZW50LAogICAgY2hpbGQsCiAgICB2bQogICkgewogICAgewogICAgICBjaGVja0NvbXBvbmVudHMoY2hpbGQpOwogICAgfQoKICAgIGlmICh0eXBlb2YgY2hpbGQgPT09ICdmdW5jdGlvbicpIHsKICAgICAgY2hpbGQgPSBjaGlsZC5vcHRpb25zOwogICAgfQoKICAgIG5vcm1hbGl6ZVByb3BzKGNoaWxkLCB2bSk7CiAgICBub3JtYWxpemVJbmplY3QoY2hpbGQsIHZtKTsKICAgIG5vcm1hbGl6ZURpcmVjdGl2ZXMoY2hpbGQpOwoKICAgIC8vIEFwcGx5IGV4dGVuZHMgYW5kIG1peGlucyBvbiB0aGUgY2hpbGQgb3B0aW9ucywKICAgIC8vIGJ1dCBvbmx5IGlmIGl0IGlzIGEgcmF3IG9wdGlvbnMgb2JqZWN0IHRoYXQgaXNuJ3QKICAgIC8vIHRoZSByZXN1bHQgb2YgYW5vdGhlciBtZXJnZU9wdGlvbnMgY2FsbC4KICAgIC8vIE9ubHkgbWVyZ2VkIG9wdGlvbnMgaGFzIHRoZSBfYmFzZSBwcm9wZXJ0eS4KICAgIGlmICghY2hpbGQuX2Jhc2UpIHsKICAgICAgaWYgKGNoaWxkLmV4dGVuZHMpIHsKICAgICAgICBwYXJlbnQgPSBtZXJnZU9wdGlvbnMocGFyZW50LCBjaGlsZC5leHRlbmRzLCB2bSk7CiAgICAgIH0KICAgICAgaWYgKGNoaWxkLm1peGlucykgewogICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGQubWl4aW5zLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgcGFyZW50ID0gbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGQubWl4aW5zW2ldLCB2bSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgdmFyIG9wdGlvbnMgPSB7fTsKICAgIHZhciBrZXk7CiAgICBmb3IgKGtleSBpbiBwYXJlbnQpIHsKICAgICAgbWVyZ2VGaWVsZChrZXkpOwogICAgfQogICAgZm9yIChrZXkgaW4gY2hpbGQpIHsKICAgICAgaWYgKCFoYXNPd24ocGFyZW50LCBrZXkpKSB7CiAgICAgICAgbWVyZ2VGaWVsZChrZXkpOwogICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBtZXJnZUZpZWxkIChrZXkpIHsKICAgICAgdmFyIHN0cmF0ID0gc3RyYXRzW2tleV0gfHwgZGVmYXVsdFN0cmF0OwogICAgICBvcHRpb25zW2tleV0gPSBzdHJhdChwYXJlbnRba2V5XSwgY2hpbGRba2V5XSwgdm0sIGtleSk7CiAgICB9CiAgICByZXR1cm4gb3B0aW9ucwogIH0KCiAgLyoqCiAgICogUmVzb2x2ZSBhbiBhc3NldC4KICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgYmVjYXVzZSBjaGlsZCBpbnN0YW5jZXMgbmVlZCBhY2Nlc3MKICAgKiB0byBhc3NldHMgZGVmaW5lZCBpbiBpdHMgYW5jZXN0b3IgY2hhaW4uCiAgICovCiAgZnVuY3Rpb24gcmVzb2x2ZUFzc2V0ICgKICAgIG9wdGlvbnMsCiAgICB0eXBlLAogICAgaWQsCiAgICB3YXJuTWlzc2luZwogICkgewogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAodHlwZW9mIGlkICE9PSAnc3RyaW5nJykgewogICAgICByZXR1cm4KICAgIH0KICAgIHZhciBhc3NldHMgPSBvcHRpb25zW3R5cGVdOwogICAgLy8gY2hlY2sgbG9jYWwgcmVnaXN0cmF0aW9uIHZhcmlhdGlvbnMgZmlyc3QKICAgIGlmIChoYXNPd24oYXNzZXRzLCBpZCkpIHsgcmV0dXJuIGFzc2V0c1tpZF0gfQogICAgdmFyIGNhbWVsaXplZElkID0gY2FtZWxpemUoaWQpOwogICAgaWYgKGhhc093bihhc3NldHMsIGNhbWVsaXplZElkKSkgeyByZXR1cm4gYXNzZXRzW2NhbWVsaXplZElkXSB9CiAgICB2YXIgUGFzY2FsQ2FzZUlkID0gY2FwaXRhbGl6ZShjYW1lbGl6ZWRJZCk7CiAgICBpZiAoaGFzT3duKGFzc2V0cywgUGFzY2FsQ2FzZUlkKSkgeyByZXR1cm4gYXNzZXRzW1Bhc2NhbENhc2VJZF0gfQogICAgLy8gZmFsbGJhY2sgdG8gcHJvdG90eXBlIGNoYWluCiAgICB2YXIgcmVzID0gYXNzZXRzW2lkXSB8fCBhc3NldHNbY2FtZWxpemVkSWRdIHx8IGFzc2V0c1tQYXNjYWxDYXNlSWRdOwogICAgaWYgKHdhcm5NaXNzaW5nICYmICFyZXMpIHsKICAgICAgd2FybigKICAgICAgICAnRmFpbGVkIHRvIHJlc29sdmUgJyArIHR5cGUuc2xpY2UoMCwgLTEpICsgJzogJyArIGlkLAogICAgICAgIG9wdGlvbnMKICAgICAgKTsKICAgIH0KICAgIHJldHVybiByZXMKICB9CgogIC8qICAqLwoKCgogIGZ1bmN0aW9uIHZhbGlkYXRlUHJvcCAoCiAgICBrZXksCiAgICBwcm9wT3B0aW9ucywKICAgIHByb3BzRGF0YSwKICAgIHZtCiAgKSB7CiAgICB2YXIgcHJvcCA9IHByb3BPcHRpb25zW2tleV07CiAgICB2YXIgYWJzZW50ID0gIWhhc093bihwcm9wc0RhdGEsIGtleSk7CiAgICB2YXIgdmFsdWUgPSBwcm9wc0RhdGFba2V5XTsKICAgIC8vIGJvb2xlYW4gY2FzdGluZwogICAgdmFyIGJvb2xlYW5JbmRleCA9IGdldFR5cGVJbmRleChCb29sZWFuLCBwcm9wLnR5cGUpOwogICAgaWYgKGJvb2xlYW5JbmRleCA+IC0xKSB7CiAgICAgIGlmIChhYnNlbnQgJiYgIWhhc093bihwcm9wLCAnZGVmYXVsdCcpKSB7CiAgICAgICAgdmFsdWUgPSBmYWxzZTsKICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJycgfHwgdmFsdWUgPT09IGh5cGhlbmF0ZShrZXkpKSB7CiAgICAgICAgLy8gb25seSBjYXN0IGVtcHR5IHN0cmluZyAvIHNhbWUgbmFtZSB0byBib29sZWFuIGlmCiAgICAgICAgLy8gYm9vbGVhbiBoYXMgaGlnaGVyIHByaW9yaXR5CiAgICAgICAgdmFyIHN0cmluZ0luZGV4ID0gZ2V0VHlwZUluZGV4KFN0cmluZywgcHJvcC50eXBlKTsKICAgICAgICBpZiAoc3RyaW5nSW5kZXggPCAwIHx8IGJvb2xlYW5JbmRleCA8IHN0cmluZ0luZGV4KSB7CiAgICAgICAgICB2YWx1ZSA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvLyBjaGVjayBkZWZhdWx0IHZhbHVlCiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgewogICAgICB2YWx1ZSA9IGdldFByb3BEZWZhdWx0VmFsdWUodm0sIHByb3AsIGtleSk7CiAgICAgIC8vIHNpbmNlIHRoZSBkZWZhdWx0IHZhbHVlIGlzIGEgZnJlc2ggY29weSwKICAgICAgLy8gbWFrZSBzdXJlIHRvIG9ic2VydmUgaXQuCiAgICAgIHZhciBwcmV2U2hvdWxkT2JzZXJ2ZSA9IHNob3VsZE9ic2VydmU7CiAgICAgIHRvZ2dsZU9ic2VydmluZyh0cnVlKTsKICAgICAgb2JzZXJ2ZSh2YWx1ZSk7CiAgICAgIHRvZ2dsZU9ic2VydmluZyhwcmV2U2hvdWxkT2JzZXJ2ZSk7CiAgICB9CiAgICB7CiAgICAgIGFzc2VydFByb3AocHJvcCwga2V5LCB2YWx1ZSwgdm0sIGFic2VudCk7CiAgICB9CiAgICByZXR1cm4gdmFsdWUKICB9CgogIC8qKgogICAqIEdldCB0aGUgZGVmYXVsdCB2YWx1ZSBvZiBhIHByb3AuCiAgICovCiAgZnVuY3Rpb24gZ2V0UHJvcERlZmF1bHRWYWx1ZSAodm0sIHByb3AsIGtleSkgewogICAgLy8gbm8gZGVmYXVsdCwgcmV0dXJuIHVuZGVmaW5lZAogICAgaWYgKCFoYXNPd24ocHJvcCwgJ2RlZmF1bHQnKSkgewogICAgICByZXR1cm4gdW5kZWZpbmVkCiAgICB9CiAgICB2YXIgZGVmID0gcHJvcC5kZWZhdWx0OwogICAgLy8gd2FybiBhZ2FpbnN0IG5vbi1mYWN0b3J5IGRlZmF1bHRzIGZvciBPYmplY3QgJiBBcnJheQogICAgaWYgKGlzT2JqZWN0KGRlZikpIHsKICAgICAgd2FybigKICAgICAgICAnSW52YWxpZCBkZWZhdWx0IHZhbHVlIGZvciBwcm9wICInICsga2V5ICsgJyI6ICcgKwogICAgICAgICdQcm9wcyB3aXRoIHR5cGUgT2JqZWN0L0FycmF5IG11c3QgdXNlIGEgZmFjdG9yeSBmdW5jdGlvbiAnICsKICAgICAgICAndG8gcmV0dXJuIHRoZSBkZWZhdWx0IHZhbHVlLicsCiAgICAgICAgdm0KICAgICAgKTsKICAgIH0KICAgIC8vIHRoZSByYXcgcHJvcCB2YWx1ZSB3YXMgYWxzbyB1bmRlZmluZWQgZnJvbSBwcmV2aW91cyByZW5kZXIsCiAgICAvLyByZXR1cm4gcHJldmlvdXMgZGVmYXVsdCB2YWx1ZSB0byBhdm9pZCB1bm5lY2Vzc2FyeSB3YXRjaGVyIHRyaWdnZXIKICAgIGlmICh2bSAmJiB2bS4kb3B0aW9ucy5wcm9wc0RhdGEgJiYKICAgICAgdm0uJG9wdGlvbnMucHJvcHNEYXRhW2tleV0gPT09IHVuZGVmaW5lZCAmJgogICAgICB2bS5fcHJvcHNba2V5XSAhPT0gdW5kZWZpbmVkCiAgICApIHsKICAgICAgcmV0dXJuIHZtLl9wcm9wc1trZXldCiAgICB9CiAgICAvLyBjYWxsIGZhY3RvcnkgZnVuY3Rpb24gZm9yIG5vbi1GdW5jdGlvbiB0eXBlcwogICAgLy8gYSB2YWx1ZSBpcyBGdW5jdGlvbiBpZiBpdHMgcHJvdG90eXBlIGlzIGZ1bmN0aW9uIGV2ZW4gYWNyb3NzIGRpZmZlcmVudCBleGVjdXRpb24gY29udGV4dAogICAgcmV0dXJuIHR5cGVvZiBkZWYgPT09ICdmdW5jdGlvbicgJiYgZ2V0VHlwZShwcm9wLnR5cGUpICE9PSAnRnVuY3Rpb24nCiAgICAgID8gZGVmLmNhbGwodm0pCiAgICAgIDogZGVmCiAgfQoKICAvKioKICAgKiBBc3NlcnQgd2hldGhlciBhIHByb3AgaXMgdmFsaWQuCiAgICovCiAgZnVuY3Rpb24gYXNzZXJ0UHJvcCAoCiAgICBwcm9wLAogICAgbmFtZSwKICAgIHZhbHVlLAogICAgdm0sCiAgICBhYnNlbnQKICApIHsKICAgIGlmIChwcm9wLnJlcXVpcmVkICYmIGFic2VudCkgewogICAgICB3YXJuKAogICAgICAgICdNaXNzaW5nIHJlcXVpcmVkIHByb3A6ICInICsgbmFtZSArICciJywKICAgICAgICB2bQogICAgICApOwogICAgICByZXR1cm4KICAgIH0KICAgIGlmICh2YWx1ZSA9PSBudWxsICYmICFwcm9wLnJlcXVpcmVkKSB7CiAgICAgIHJldHVybgogICAgfQogICAgdmFyIHR5cGUgPSBwcm9wLnR5cGU7CiAgICB2YXIgdmFsaWQgPSAhdHlwZSB8fCB0eXBlID09PSB0cnVlOwogICAgdmFyIGV4cGVjdGVkVHlwZXMgPSBbXTsKICAgIGlmICh0eXBlKSB7CiAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0eXBlKSkgewogICAgICAgIHR5cGUgPSBbdHlwZV07CiAgICAgIH0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0eXBlLmxlbmd0aCAmJiAhdmFsaWQ7IGkrKykgewogICAgICAgIHZhciBhc3NlcnRlZFR5cGUgPSBhc3NlcnRUeXBlKHZhbHVlLCB0eXBlW2ldKTsKICAgICAgICBleHBlY3RlZFR5cGVzLnB1c2goYXNzZXJ0ZWRUeXBlLmV4cGVjdGVkVHlwZSB8fCAnJyk7CiAgICAgICAgdmFsaWQgPSBhc3NlcnRlZFR5cGUudmFsaWQ7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoIXZhbGlkKSB7CiAgICAgIHdhcm4oCiAgICAgICAgZ2V0SW52YWxpZFR5cGVNZXNzYWdlKG5hbWUsIHZhbHVlLCBleHBlY3RlZFR5cGVzKSwKICAgICAgICB2bQogICAgICApOwogICAgICByZXR1cm4KICAgIH0KICAgIHZhciB2YWxpZGF0b3IgPSBwcm9wLnZhbGlkYXRvcjsKICAgIGlmICh2YWxpZGF0b3IpIHsKICAgICAgaWYgKCF2YWxpZGF0b3IodmFsdWUpKSB7CiAgICAgICAgd2FybigKICAgICAgICAgICdJbnZhbGlkIHByb3A6IGN1c3RvbSB2YWxpZGF0b3IgY2hlY2sgZmFpbGVkIGZvciBwcm9wICInICsgbmFtZSArICciLicsCiAgICAgICAgICB2bQogICAgICAgICk7CiAgICAgIH0KICAgIH0KICB9CgogIHZhciBzaW1wbGVDaGVja1JFID0gL14oU3RyaW5nfE51bWJlcnxCb29sZWFufEZ1bmN0aW9ufFN5bWJvbCkkLzsKCiAgZnVuY3Rpb24gYXNzZXJ0VHlwZSAodmFsdWUsIHR5cGUpIHsKICAgIHZhciB2YWxpZDsKICAgIHZhciBleHBlY3RlZFR5cGUgPSBnZXRUeXBlKHR5cGUpOwogICAgaWYgKHNpbXBsZUNoZWNrUkUudGVzdChleHBlY3RlZFR5cGUpKSB7CiAgICAgIHZhciB0ID0gdHlwZW9mIHZhbHVlOwogICAgICB2YWxpZCA9IHQgPT09IGV4cGVjdGVkVHlwZS50b0xvd2VyQ2FzZSgpOwogICAgICAvLyBmb3IgcHJpbWl0aXZlIHdyYXBwZXIgb2JqZWN0cwogICAgICBpZiAoIXZhbGlkICYmIHQgPT09ICdvYmplY3QnKSB7CiAgICAgICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGU7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoZXhwZWN0ZWRUeXBlID09PSAnT2JqZWN0JykgewogICAgICB2YWxpZCA9IGlzUGxhaW5PYmplY3QodmFsdWUpOwogICAgfSBlbHNlIGlmIChleHBlY3RlZFR5cGUgPT09ICdBcnJheScpIHsKICAgICAgdmFsaWQgPSBBcnJheS5pc0FycmF5KHZhbHVlKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhbGlkID0gdmFsdWUgaW5zdGFuY2VvZiB0eXBlOwogICAgfQogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IHZhbGlkLAogICAgICBleHBlY3RlZFR5cGU6IGV4cGVjdGVkVHlwZQogICAgfQogIH0KCiAgLyoqCiAgICogVXNlIGZ1bmN0aW9uIHN0cmluZyBuYW1lIHRvIGNoZWNrIGJ1aWx0LWluIHR5cGVzLAogICAqIGJlY2F1c2UgYSBzaW1wbGUgZXF1YWxpdHkgY2hlY2sgd2lsbCBmYWlsIHdoZW4gcnVubmluZwogICAqIGFjcm9zcyBkaWZmZXJlbnQgdm1zIC8gaWZyYW1lcy4KICAgKi8KICBmdW5jdGlvbiBnZXRUeXBlIChmbikgewogICAgdmFyIG1hdGNoID0gZm4gJiYgZm4udG9TdHJpbmcoKS5tYXRjaCgvXlxzKmZ1bmN0aW9uIChcdyspLyk7CiAgICByZXR1cm4gbWF0Y2ggPyBtYXRjaFsxXSA6ICcnCiAgfQoKICBmdW5jdGlvbiBpc1NhbWVUeXBlIChhLCBiKSB7CiAgICByZXR1cm4gZ2V0VHlwZShhKSA9PT0gZ2V0VHlwZShiKQogIH0KCiAgZnVuY3Rpb24gZ2V0VHlwZUluZGV4ICh0eXBlLCBleHBlY3RlZFR5cGVzKSB7CiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZXhwZWN0ZWRUeXBlcykpIHsKICAgICAgcmV0dXJuIGlzU2FtZVR5cGUoZXhwZWN0ZWRUeXBlcywgdHlwZSkgPyAwIDogLTEKICAgIH0KICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBleHBlY3RlZFR5cGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgIGlmIChpc1NhbWVUeXBlKGV4cGVjdGVkVHlwZXNbaV0sIHR5cGUpKSB7CiAgICAgICAgcmV0dXJuIGkKICAgICAgfQogICAgfQogICAgcmV0dXJuIC0xCiAgfQoKICBmdW5jdGlvbiBnZXRJbnZhbGlkVHlwZU1lc3NhZ2UgKG5hbWUsIHZhbHVlLCBleHBlY3RlZFR5cGVzKSB7CiAgICB2YXIgbWVzc2FnZSA9ICJJbnZhbGlkIHByb3A6IHR5cGUgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiIiArIG5hbWUgKyAiXCIuIiArCiAgICAgICIgRXhwZWN0ZWQgIiArIChleHBlY3RlZFR5cGVzLm1hcChjYXBpdGFsaXplKS5qb2luKCcsICcpKTsKICAgIHZhciBleHBlY3RlZFR5cGUgPSBleHBlY3RlZFR5cGVzWzBdOwogICAgdmFyIHJlY2VpdmVkVHlwZSA9IHRvUmF3VHlwZSh2YWx1ZSk7CiAgICB2YXIgZXhwZWN0ZWRWYWx1ZSA9IHN0eWxlVmFsdWUodmFsdWUsIGV4cGVjdGVkVHlwZSk7CiAgICB2YXIgcmVjZWl2ZWRWYWx1ZSA9IHN0eWxlVmFsdWUodmFsdWUsIHJlY2VpdmVkVHlwZSk7CiAgICAvLyBjaGVjayBpZiB3ZSBuZWVkIHRvIHNwZWNpZnkgZXhwZWN0ZWQgdmFsdWUKICAgIGlmIChleHBlY3RlZFR5cGVzLmxlbmd0aCA9PT0gMSAmJgogICAgICAgIGlzRXhwbGljYWJsZShleHBlY3RlZFR5cGUpICYmCiAgICAgICAgIWlzQm9vbGVhbihleHBlY3RlZFR5cGUsIHJlY2VpdmVkVHlwZSkpIHsKICAgICAgbWVzc2FnZSArPSAiIHdpdGggdmFsdWUgIiArIGV4cGVjdGVkVmFsdWU7CiAgICB9CiAgICBtZXNzYWdlICs9ICIsIGdvdCAiICsgcmVjZWl2ZWRUeXBlICsgIiAiOwogICAgLy8gY2hlY2sgaWYgd2UgbmVlZCB0byBzcGVjaWZ5IHJlY2VpdmVkIHZhbHVlCiAgICBpZiAoaXNFeHBsaWNhYmxlKHJlY2VpdmVkVHlwZSkpIHsKICAgICAgbWVzc2FnZSArPSAid2l0aCB2YWx1ZSAiICsgcmVjZWl2ZWRWYWx1ZSArICIuIjsKICAgIH0KICAgIHJldHVybiBtZXNzYWdlCiAgfQoKICBmdW5jdGlvbiBzdHlsZVZhbHVlICh2YWx1ZSwgdHlwZSkgewogICAgaWYgKHR5cGUgPT09ICdTdHJpbmcnKSB7CiAgICAgIHJldHVybiAoIlwiIiArIHZhbHVlICsgIlwiIikKICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ051bWJlcicpIHsKICAgICAgcmV0dXJuICgiIiArIChOdW1iZXIodmFsdWUpKSkKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiAoIiIgKyB2YWx1ZSkKICAgIH0KICB9CgogIGZ1bmN0aW9uIGlzRXhwbGljYWJsZSAodmFsdWUpIHsKICAgIHZhciBleHBsaWNpdFR5cGVzID0gWydzdHJpbmcnLCAnbnVtYmVyJywgJ2Jvb2xlYW4nXTsKICAgIHJldHVybiBleHBsaWNpdFR5cGVzLnNvbWUoZnVuY3Rpb24gKGVsZW0pIHsgcmV0dXJuIHZhbHVlLnRvTG93ZXJDYXNlKCkgPT09IGVsZW07IH0pCiAgfQoKICBmdW5jdGlvbiBpc0Jvb2xlYW4gKCkgewogICAgdmFyIGFyZ3MgPSBbXSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsKICAgIHdoaWxlICggbGVuLS0gKSBhcmdzWyBsZW4gXSA9IGFyZ3VtZW50c1sgbGVuIF07CgogICAgcmV0dXJuIGFyZ3Muc29tZShmdW5jdGlvbiAoZWxlbSkgeyByZXR1cm4gZWxlbS50b0xvd2VyQ2FzZSgpID09PSAnYm9vbGVhbic7IH0pCiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gaGFuZGxlRXJyb3IgKGVyciwgdm0sIGluZm8pIHsKICAgIC8vIERlYWN0aXZhdGUgZGVwcyB0cmFja2luZyB3aGlsZSBwcm9jZXNzaW5nIGVycm9yIGhhbmRsZXIgdG8gYXZvaWQgcG9zc2libGUgaW5maW5pdGUgcmVuZGVyaW5nLgogICAgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVleC9pc3N1ZXMvMTUwNQogICAgcHVzaFRhcmdldCgpOwogICAgdHJ5IHsKICAgICAgaWYgKHZtKSB7CiAgICAgICAgdmFyIGN1ciA9IHZtOwogICAgICAgIHdoaWxlICgoY3VyID0gY3VyLiRwYXJlbnQpKSB7CiAgICAgICAgICB2YXIgaG9va3MgPSBjdXIuJG9wdGlvbnMuZXJyb3JDYXB0dXJlZDsKICAgICAgICAgIGlmIChob29rcykgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhvb2tzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHZhciBjYXB0dXJlID0gaG9va3NbaV0uY2FsbChjdXIsIGVyciwgdm0sIGluZm8pID09PSBmYWxzZTsKICAgICAgICAgICAgICAgIGlmIChjYXB0dXJlKSB7IHJldHVybiB9CiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgZ2xvYmFsSGFuZGxlRXJyb3IoZSwgY3VyLCAnZXJyb3JDYXB0dXJlZCBob29rJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIGdsb2JhbEhhbmRsZUVycm9yKGVyciwgdm0sIGluZm8pOwogICAgfSBmaW5hbGx5IHsKICAgICAgcG9wVGFyZ2V0KCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBpbnZva2VXaXRoRXJyb3JIYW5kbGluZyAoCiAgICBoYW5kbGVyLAogICAgY29udGV4dCwKICAgIGFyZ3MsCiAgICB2bSwKICAgIGluZm8KICApIHsKICAgIHZhciByZXM7CiAgICB0cnkgewogICAgICByZXMgPSBhcmdzID8gaGFuZGxlci5hcHBseShjb250ZXh0LCBhcmdzKSA6IGhhbmRsZXIuY2FsbChjb250ZXh0KTsKICAgICAgaWYgKHJlcyAmJiAhcmVzLl9pc1Z1ZSAmJiBpc1Byb21pc2UocmVzKSAmJiAhcmVzLl9oYW5kbGVkKSB7CiAgICAgICAgcmVzLmNhdGNoKGZ1bmN0aW9uIChlKSB7IHJldHVybiBoYW5kbGVFcnJvcihlLCB2bSwgaW5mbyArICIgKFByb21pc2UvYXN5bmMpIik7IH0pOwogICAgICAgIC8vIGlzc3VlICM5NTExCiAgICAgICAgLy8gYXZvaWQgY2F0Y2ggdHJpZ2dlcmluZyBtdWx0aXBsZSB0aW1lcyB3aGVuIG5lc3RlZCBjYWxscwogICAgICAgIHJlcy5faGFuZGxlZCA9IHRydWU7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgaGFuZGxlRXJyb3IoZSwgdm0sIGluZm8pOwogICAgfQogICAgcmV0dXJuIHJlcwogIH0KCiAgZnVuY3Rpb24gZ2xvYmFsSGFuZGxlRXJyb3IgKGVyciwgdm0sIGluZm8pIHsKICAgIGlmIChjb25maWcuZXJyb3JIYW5kbGVyKSB7CiAgICAgIHRyeSB7CiAgICAgICAgcmV0dXJuIGNvbmZpZy5lcnJvckhhbmRsZXIuY2FsbChudWxsLCBlcnIsIHZtLCBpbmZvKQogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgLy8gaWYgdGhlIHVzZXIgaW50ZW50aW9uYWxseSB0aHJvd3MgdGhlIG9yaWdpbmFsIGVycm9yIGluIHRoZSBoYW5kbGVyLAogICAgICAgIC8vIGRvIG5vdCBsb2cgaXQgdHdpY2UKICAgICAgICBpZiAoZSAhPT0gZXJyKSB7CiAgICAgICAgICBsb2dFcnJvcihlLCBudWxsLCAnY29uZmlnLmVycm9ySGFuZGxlcicpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgbG9nRXJyb3IoZXJyLCB2bSwgaW5mbyk7CiAgfQoKICBmdW5jdGlvbiBsb2dFcnJvciAoZXJyLCB2bSwgaW5mbykgewogICAgewogICAgICB3YXJuKCgiRXJyb3IgaW4gIiArIGluZm8gKyAiOiBcIiIgKyAoZXJyLnRvU3RyaW5nKCkpICsgIlwiIiksIHZtKTsKICAgIH0KICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovCiAgICBpZiAoKGluQnJvd3NlciB8fCBpbldlZXgpICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykgewogICAgICBjb25zb2xlLmVycm9yKGVycik7CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBlcnIKICAgIH0KICB9CgogIC8qICAqLwoKICB2YXIgaXNVc2luZ01pY3JvVGFzayA9IGZhbHNlOwoKICB2YXIgY2FsbGJhY2tzID0gW107CiAgdmFyIHBlbmRpbmcgPSBmYWxzZTsKCiAgZnVuY3Rpb24gZmx1c2hDYWxsYmFja3MgKCkgewogICAgcGVuZGluZyA9IGZhbHNlOwogICAgdmFyIGNvcGllcyA9IGNhbGxiYWNrcy5zbGljZSgwKTsKICAgIGNhbGxiYWNrcy5sZW5ndGggPSAwOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3BpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgY29waWVzW2ldKCk7CiAgICB9CiAgfQoKICAvLyBIZXJlIHdlIGhhdmUgYXN5bmMgZGVmZXJyaW5nIHdyYXBwZXJzIHVzaW5nIG1pY3JvdGFza3MuCiAgLy8gSW4gMi41IHdlIHVzZWQgKG1hY3JvKSB0YXNrcyAoaW4gY29tYmluYXRpb24gd2l0aCBtaWNyb3Rhc2tzKS4KICAvLyBIb3dldmVyLCBpdCBoYXMgc3VidGxlIHByb2JsZW1zIHdoZW4gc3RhdGUgaXMgY2hhbmdlZCByaWdodCBiZWZvcmUgcmVwYWludAogIC8vIChlLmcuICM2ODEzLCBvdXQtaW4gdHJhbnNpdGlvbnMpLgogIC8vIEFsc28sIHVzaW5nIChtYWNybykgdGFza3MgaW4gZXZlbnQgaGFuZGxlciB3b3VsZCBjYXVzZSBzb21lIHdlaXJkIGJlaGF2aW9ycwogIC8vIHRoYXQgY2Fubm90IGJlIGNpcmN1bXZlbnRlZCAoZS5nLiAjNzEwOSwgIzcxNTMsICM3NTQ2LCAjNzgzNCwgIzgxMDkpLgogIC8vIFNvIHdlIG5vdyB1c2UgbWljcm90YXNrcyBldmVyeXdoZXJlLCBhZ2Fpbi4KICAvLyBBIG1ham9yIGRyYXdiYWNrIG9mIHRoaXMgdHJhZGVvZmYgaXMgdGhhdCB0aGVyZSBhcmUgc29tZSBzY2VuYXJpb3MKICAvLyB3aGVyZSBtaWNyb3Rhc2tzIGhhdmUgdG9vIGhpZ2ggYSBwcmlvcml0eSBhbmQgZmlyZSBpbiBiZXR3ZWVuIHN1cHBvc2VkbHkKICAvLyBzZXF1ZW50aWFsIGV2ZW50cyAoZS5nLiAjNDUyMSwgIzY2OTAsIHdoaWNoIGhhdmUgd29ya2Fyb3VuZHMpCiAgLy8gb3IgZXZlbiBiZXR3ZWVuIGJ1YmJsaW5nIG9mIHRoZSBzYW1lIGV2ZW50ICgjNjU2NikuCiAgdmFyIHRpbWVyRnVuYzsKCiAgLy8gVGhlIG5leHRUaWNrIGJlaGF2aW9yIGxldmVyYWdlcyB0aGUgbWljcm90YXNrIHF1ZXVlLCB3aGljaCBjYW4gYmUgYWNjZXNzZWQKICAvLyB2aWEgZWl0aGVyIG5hdGl2ZSBQcm9taXNlLnRoZW4gb3IgTXV0YXRpb25PYnNlcnZlci4KICAvLyBNdXRhdGlvbk9ic2VydmVyIGhhcyB3aWRlciBzdXBwb3J0LCBob3dldmVyIGl0IGlzIHNlcmlvdXNseSBidWdnZWQgaW4KICAvLyBVSVdlYlZpZXcgaW4gaU9TID49IDkuMy4zIHdoZW4gdHJpZ2dlcmVkIGluIHRvdWNoIGV2ZW50IGhhbmRsZXJzLiBJdAogIC8vIGNvbXBsZXRlbHkgc3RvcHMgd29ya2luZyBhZnRlciB0cmlnZ2VyaW5nIGEgZmV3IHRpbWVzLi4uIHNvLCBpZiBuYXRpdmUKICAvLyBQcm9taXNlIGlzIGF2YWlsYWJsZSwgd2Ugd2lsbCB1c2UgaXQ6CiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQsICRmbG93LWRpc2FibGUtbGluZSAqLwogIGlmICh0eXBlb2YgUHJvbWlzZSAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNOYXRpdmUoUHJvbWlzZSkpIHsKICAgIHZhciBwID0gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICB0aW1lckZ1bmMgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHAudGhlbihmbHVzaENhbGxiYWNrcyk7CiAgICAgIC8vIEluIHByb2JsZW1hdGljIFVJV2ViVmlld3MsIFByb21pc2UudGhlbiBkb2Vzbid0IGNvbXBsZXRlbHkgYnJlYWssIGJ1dAogICAgICAvLyBpdCBjYW4gZ2V0IHN0dWNrIGluIGEgd2VpcmQgc3RhdGUgd2hlcmUgY2FsbGJhY2tzIGFyZSBwdXNoZWQgaW50byB0aGUKICAgICAgLy8gbWljcm90YXNrIHF1ZXVlIGJ1dCB0aGUgcXVldWUgaXNuJ3QgYmVpbmcgZmx1c2hlZCwgdW50aWwgdGhlIGJyb3dzZXIKICAgICAgLy8gbmVlZHMgdG8gZG8gc29tZSBvdGhlciB3b3JrLCBlLmcuIGhhbmRsZSBhIHRpbWVyLiBUaGVyZWZvcmUgd2UgY2FuCiAgICAgIC8vICJmb3JjZSIgdGhlIG1pY3JvdGFzayBxdWV1ZSB0byBiZSBmbHVzaGVkIGJ5IGFkZGluZyBhbiBlbXB0eSB0aW1lci4KICAgICAgaWYgKGlzSU9TKSB7IHNldFRpbWVvdXQobm9vcCk7IH0KICAgIH07CiAgICBpc1VzaW5nTWljcm9UYXNrID0gdHJ1ZTsKICB9IGVsc2UgaWYgKCFpc0lFICYmIHR5cGVvZiBNdXRhdGlvbk9ic2VydmVyICE9PSAndW5kZWZpbmVkJyAmJiAoCiAgICBpc05hdGl2ZShNdXRhdGlvbk9ic2VydmVyKSB8fAogICAgLy8gUGhhbnRvbUpTIGFuZCBpT1MgNy54CiAgICBNdXRhdGlvbk9ic2VydmVyLnRvU3RyaW5nKCkgPT09ICdbb2JqZWN0IE11dGF0aW9uT2JzZXJ2ZXJDb25zdHJ1Y3Rvcl0nCiAgKSkgewogICAgLy8gVXNlIE11dGF0aW9uT2JzZXJ2ZXIgd2hlcmUgbmF0aXZlIFByb21pc2UgaXMgbm90IGF2YWlsYWJsZSwKICAgIC8vIGUuZy4gUGhhbnRvbUpTLCBpT1M3LCBBbmRyb2lkIDQuNAogICAgLy8gKCM2NDY2IE11dGF0aW9uT2JzZXJ2ZXIgaXMgdW5yZWxpYWJsZSBpbiBJRTExKQogICAgdmFyIGNvdW50ZXIgPSAxOwogICAgdmFyIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZmx1c2hDYWxsYmFja3MpOwogICAgdmFyIHRleHROb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoU3RyaW5nKGNvdW50ZXIpKTsKICAgIG9ic2VydmVyLm9ic2VydmUodGV4dE5vZGUsIHsKICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZQogICAgfSk7CiAgICB0aW1lckZ1bmMgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGNvdW50ZXIgPSAoY291bnRlciArIDEpICUgMjsKICAgICAgdGV4dE5vZGUuZGF0YSA9IFN0cmluZyhjb3VudGVyKTsKICAgIH07CiAgICBpc1VzaW5nTWljcm9UYXNrID0gdHJ1ZTsKICB9IGVsc2UgaWYgKHR5cGVvZiBzZXRJbW1lZGlhdGUgIT09ICd1bmRlZmluZWQnICYmIGlzTmF0aXZlKHNldEltbWVkaWF0ZSkpIHsKICAgIC8vIEZhbGxiYWNrIHRvIHNldEltbWVkaWF0ZS4KICAgIC8vIFRlY2huaWNhbGx5IGl0IGxldmVyYWdlcyB0aGUgKG1hY3JvKSB0YXNrIHF1ZXVlLAogICAgLy8gYnV0IGl0IGlzIHN0aWxsIGEgYmV0dGVyIGNob2ljZSB0aGFuIHNldFRpbWVvdXQuCiAgICB0aW1lckZ1bmMgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHNldEltbWVkaWF0ZShmbHVzaENhbGxiYWNrcyk7CiAgICB9OwogIH0gZWxzZSB7CiAgICAvLyBGYWxsYmFjayB0byBzZXRUaW1lb3V0LgogICAgdGltZXJGdW5jID0gZnVuY3Rpb24gKCkgewogICAgICBzZXRUaW1lb3V0KGZsdXNoQ2FsbGJhY2tzLCAwKTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBuZXh0VGljayAoY2IsIGN0eCkgewogICAgdmFyIF9yZXNvbHZlOwogICAgY2FsbGJhY2tzLnB1c2goZnVuY3Rpb24gKCkgewogICAgICBpZiAoY2IpIHsKICAgICAgICB0cnkgewogICAgICAgICAgY2IuY2FsbChjdHgpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIGhhbmRsZUVycm9yKGUsIGN0eCwgJ25leHRUaWNrJyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKF9yZXNvbHZlKSB7CiAgICAgICAgX3Jlc29sdmUoY3R4KTsKICAgICAgfQogICAgfSk7CiAgICBpZiAoIXBlbmRpbmcpIHsKICAgICAgcGVuZGluZyA9IHRydWU7CiAgICAgIHRpbWVyRnVuYygpOwogICAgfQogICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lCiAgICBpZiAoIWNiICYmIHR5cGVvZiBQcm9taXNlICE9PSAndW5kZWZpbmVkJykgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICBfcmVzb2x2ZSA9IHJlc29sdmU7CiAgICAgIH0pCiAgICB9CiAgfQoKICAvKiAgKi8KCiAgdmFyIG1hcms7CiAgdmFyIG1lYXN1cmU7CgogIHsKICAgIHZhciBwZXJmID0gaW5Ccm93c2VyICYmIHdpbmRvdy5wZXJmb3JtYW5jZTsKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgaWYgKAogICAgICBwZXJmICYmCiAgICAgIHBlcmYubWFyayAmJgogICAgICBwZXJmLm1lYXN1cmUgJiYKICAgICAgcGVyZi5jbGVhck1hcmtzICYmCiAgICAgIHBlcmYuY2xlYXJNZWFzdXJlcwogICAgKSB7CiAgICAgIG1hcmsgPSBmdW5jdGlvbiAodGFnKSB7IHJldHVybiBwZXJmLm1hcmsodGFnKTsgfTsKICAgICAgbWVhc3VyZSA9IGZ1bmN0aW9uIChuYW1lLCBzdGFydFRhZywgZW5kVGFnKSB7CiAgICAgICAgcGVyZi5tZWFzdXJlKG5hbWUsIHN0YXJ0VGFnLCBlbmRUYWcpOwogICAgICAgIHBlcmYuY2xlYXJNYXJrcyhzdGFydFRhZyk7CiAgICAgICAgcGVyZi5jbGVhck1hcmtzKGVuZFRhZyk7CiAgICAgICAgLy8gcGVyZi5jbGVhck1lYXN1cmVzKG5hbWUpCiAgICAgIH07CiAgICB9CiAgfQoKICAvKiBub3QgdHlwZSBjaGVja2luZyB0aGlzIGZpbGUgYmVjYXVzZSBmbG93IGRvZXNuJ3QgcGxheSB3ZWxsIHdpdGggUHJveHkgKi8KCiAgdmFyIGluaXRQcm94eTsKCiAgewogICAgdmFyIGFsbG93ZWRHbG9iYWxzID0gbWFrZU1hcCgKICAgICAgJ0luZmluaXR5LHVuZGVmaW5lZCxOYU4saXNGaW5pdGUsaXNOYU4sJyArCiAgICAgICdwYXJzZUZsb2F0LHBhcnNlSW50LGRlY29kZVVSSSxkZWNvZGVVUklDb21wb25lbnQsZW5jb2RlVVJJLGVuY29kZVVSSUNvbXBvbmVudCwnICsKICAgICAgJ01hdGgsTnVtYmVyLERhdGUsQXJyYXksT2JqZWN0LEJvb2xlYW4sU3RyaW5nLFJlZ0V4cCxNYXAsU2V0LEpTT04sSW50bCwnICsKICAgICAgJ3JlcXVpcmUnIC8vIGZvciBXZWJwYWNrL0Jyb3dzZXJpZnkKICAgICk7CgogICAgdmFyIHdhcm5Ob25QcmVzZW50ID0gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7CiAgICAgIHdhcm4oCiAgICAgICAgIlByb3BlcnR5IG9yIG1ldGhvZCBcIiIgKyBrZXkgKyAiXCIgaXMgbm90IGRlZmluZWQgb24gdGhlIGluc3RhbmNlIGJ1dCAiICsKICAgICAgICAncmVmZXJlbmNlZCBkdXJpbmcgcmVuZGVyLiBNYWtlIHN1cmUgdGhhdCB0aGlzIHByb3BlcnR5IGlzIHJlYWN0aXZlLCAnICsKICAgICAgICAnZWl0aGVyIGluIHRoZSBkYXRhIG9wdGlvbiwgb3IgZm9yIGNsYXNzLWJhc2VkIGNvbXBvbmVudHMsIGJ5ICcgKwogICAgICAgICdpbml0aWFsaXppbmcgdGhlIHByb3BlcnR5LiAnICsKICAgICAgICAnU2VlOiBodHRwczovL3Z1ZWpzLm9yZy92Mi9ndWlkZS9yZWFjdGl2aXR5Lmh0bWwjRGVjbGFyaW5nLVJlYWN0aXZlLVByb3BlcnRpZXMuJywKICAgICAgICB0YXJnZXQKICAgICAgKTsKICAgIH07CgogICAgdmFyIHdhcm5SZXNlcnZlZFByZWZpeCA9IGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgewogICAgICB3YXJuKAogICAgICAgICJQcm9wZXJ0eSBcIiIgKyBrZXkgKyAiXCIgbXVzdCBiZSBhY2Nlc3NlZCB3aXRoIFwiJGRhdGEuIiArIGtleSArICJcIiBiZWNhdXNlICIgKwogICAgICAgICdwcm9wZXJ0aWVzIHN0YXJ0aW5nIHdpdGggIiQiIG9yICJfIiBhcmUgbm90IHByb3hpZWQgaW4gdGhlIFZ1ZSBpbnN0YW5jZSB0byAnICsKICAgICAgICAncHJldmVudCBjb25mbGljdHMgd2l0aCBWdWUgaW50ZXJuYWxzLiAnICsKICAgICAgICAnU2VlOiBodHRwczovL3Z1ZWpzLm9yZy92Mi9hcGkvI2RhdGEnLAogICAgICAgIHRhcmdldAogICAgICApOwogICAgfTsKCiAgICB2YXIgaGFzUHJveHkgPQogICAgICB0eXBlb2YgUHJveHkgIT09ICd1bmRlZmluZWQnICYmIGlzTmF0aXZlKFByb3h5KTsKCiAgICBpZiAoaGFzUHJveHkpIHsKICAgICAgdmFyIGlzQnVpbHRJbk1vZGlmaWVyID0gbWFrZU1hcCgnc3RvcCxwcmV2ZW50LHNlbGYsY3RybCxzaGlmdCxhbHQsbWV0YSxleGFjdCcpOwogICAgICBjb25maWcua2V5Q29kZXMgPSBuZXcgUHJveHkoY29uZmlnLmtleUNvZGVzLCB7CiAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQgKHRhcmdldCwga2V5LCB2YWx1ZSkgewogICAgICAgICAgaWYgKGlzQnVpbHRJbk1vZGlmaWVyKGtleSkpIHsKICAgICAgICAgICAgd2FybigoIkF2b2lkIG92ZXJ3cml0aW5nIGJ1aWx0LWluIG1vZGlmaWVyIGluIGNvbmZpZy5rZXlDb2RlczogLiIgKyBrZXkpKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0YXJnZXRba2V5XSA9IHZhbHVlOwogICAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgdmFyIGhhc0hhbmRsZXIgPSB7CiAgICAgIGhhczogZnVuY3Rpb24gaGFzICh0YXJnZXQsIGtleSkgewogICAgICAgIHZhciBoYXMgPSBrZXkgaW4gdGFyZ2V0OwogICAgICAgIHZhciBpc0FsbG93ZWQgPSBhbGxvd2VkR2xvYmFscyhrZXkpIHx8CiAgICAgICAgICAodHlwZW9mIGtleSA9PT0gJ3N0cmluZycgJiYga2V5LmNoYXJBdCgwKSA9PT0gJ18nICYmICEoa2V5IGluIHRhcmdldC4kZGF0YSkpOwogICAgICAgIGlmICghaGFzICYmICFpc0FsbG93ZWQpIHsKICAgICAgICAgIGlmIChrZXkgaW4gdGFyZ2V0LiRkYXRhKSB7IHdhcm5SZXNlcnZlZFByZWZpeCh0YXJnZXQsIGtleSk7IH0KICAgICAgICAgIGVsc2UgeyB3YXJuTm9uUHJlc2VudCh0YXJnZXQsIGtleSk7IH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGhhcyB8fCAhaXNBbGxvd2VkCiAgICAgIH0KICAgIH07CgogICAgdmFyIGdldEhhbmRsZXIgPSB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0ICh0YXJnZXQsIGtleSkgewogICAgICAgIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJyAmJiAhKGtleSBpbiB0YXJnZXQpKSB7CiAgICAgICAgICBpZiAoa2V5IGluIHRhcmdldC4kZGF0YSkgeyB3YXJuUmVzZXJ2ZWRQcmVmaXgodGFyZ2V0LCBrZXkpOyB9CiAgICAgICAgICBlbHNlIHsgd2Fybk5vblByZXNlbnQodGFyZ2V0LCBrZXkpOyB9CiAgICAgICAgfQogICAgICAgIHJldHVybiB0YXJnZXRba2V5XQogICAgICB9CiAgICB9OwoKICAgIGluaXRQcm94eSA9IGZ1bmN0aW9uIGluaXRQcm94eSAodm0pIHsKICAgICAgaWYgKGhhc1Byb3h5KSB7CiAgICAgICAgLy8gZGV0ZXJtaW5lIHdoaWNoIHByb3h5IGhhbmRsZXIgdG8gdXNlCiAgICAgICAgdmFyIG9wdGlvbnMgPSB2bS4kb3B0aW9uczsKICAgICAgICB2YXIgaGFuZGxlcnMgPSBvcHRpb25zLnJlbmRlciAmJiBvcHRpb25zLnJlbmRlci5fd2l0aFN0cmlwcGVkCiAgICAgICAgICA/IGdldEhhbmRsZXIKICAgICAgICAgIDogaGFzSGFuZGxlcjsKICAgICAgICB2bS5fcmVuZGVyUHJveHkgPSBuZXcgUHJveHkodm0sIGhhbmRsZXJzKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2bS5fcmVuZGVyUHJveHkgPSB2bTsKICAgICAgfQogICAgfTsKICB9CgogIC8qICAqLwoKICB2YXIgc2Vlbk9iamVjdHMgPSBuZXcgX1NldCgpOwoKICAvKioKICAgKiBSZWN1cnNpdmVseSB0cmF2ZXJzZSBhbiBvYmplY3QgdG8gZXZva2UgYWxsIGNvbnZlcnRlZAogICAqIGdldHRlcnMsIHNvIHRoYXQgZXZlcnkgbmVzdGVkIHByb3BlcnR5IGluc2lkZSB0aGUgb2JqZWN0CiAgICogaXMgY29sbGVjdGVkIGFzIGEgImRlZXAiIGRlcGVuZGVuY3kuCiAgICovCiAgZnVuY3Rpb24gdHJhdmVyc2UgKHZhbCkgewogICAgX3RyYXZlcnNlKHZhbCwgc2Vlbk9iamVjdHMpOwogICAgc2Vlbk9iamVjdHMuY2xlYXIoKTsKICB9CgogIGZ1bmN0aW9uIF90cmF2ZXJzZSAodmFsLCBzZWVuKSB7CiAgICB2YXIgaSwga2V5czsKICAgIHZhciBpc0EgPSBBcnJheS5pc0FycmF5KHZhbCk7CiAgICBpZiAoKCFpc0EgJiYgIWlzT2JqZWN0KHZhbCkpIHx8IE9iamVjdC5pc0Zyb3plbih2YWwpIHx8IHZhbCBpbnN0YW5jZW9mIFZOb2RlKSB7CiAgICAgIHJldHVybgogICAgfQogICAgaWYgKHZhbC5fX29iX18pIHsKICAgICAgdmFyIGRlcElkID0gdmFsLl9fb2JfXy5kZXAuaWQ7CiAgICAgIGlmIChzZWVuLmhhcyhkZXBJZCkpIHsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBzZWVuLmFkZChkZXBJZCk7CiAgICB9CiAgICBpZiAoaXNBKSB7CiAgICAgIGkgPSB2YWwubGVuZ3RoOwogICAgICB3aGlsZSAoaS0tKSB7IF90cmF2ZXJzZSh2YWxbaV0sIHNlZW4pOyB9CiAgICB9IGVsc2UgewogICAgICBrZXlzID0gT2JqZWN0LmtleXModmFsKTsKICAgICAgaSA9IGtleXMubGVuZ3RoOwogICAgICB3aGlsZSAoaS0tKSB7IF90cmF2ZXJzZSh2YWxba2V5c1tpXV0sIHNlZW4pOyB9CiAgICB9CiAgfQoKICAvKiAgKi8KCiAgdmFyIG5vcm1hbGl6ZUV2ZW50ID0gY2FjaGVkKGZ1bmN0aW9uIChuYW1lKSB7CiAgICB2YXIgcGFzc2l2ZSA9IG5hbWUuY2hhckF0KDApID09PSAnJic7CiAgICBuYW1lID0gcGFzc2l2ZSA/IG5hbWUuc2xpY2UoMSkgOiBuYW1lOwogICAgdmFyIG9uY2UkJDEgPSBuYW1lLmNoYXJBdCgwKSA9PT0gJ34nOyAvLyBQcmVmaXhlZCBsYXN0LCBjaGVja2VkIGZpcnN0CiAgICBuYW1lID0gb25jZSQkMSA/IG5hbWUuc2xpY2UoMSkgOiBuYW1lOwogICAgdmFyIGNhcHR1cmUgPSBuYW1lLmNoYXJBdCgwKSA9PT0gJyEnOwogICAgbmFtZSA9IGNhcHR1cmUgPyBuYW1lLnNsaWNlKDEpIDogbmFtZTsKICAgIHJldHVybiB7CiAgICAgIG5hbWU6IG5hbWUsCiAgICAgIG9uY2U6IG9uY2UkJDEsCiAgICAgIGNhcHR1cmU6IGNhcHR1cmUsCiAgICAgIHBhc3NpdmU6IHBhc3NpdmUKICAgIH0KICB9KTsKCiAgZnVuY3Rpb24gY3JlYXRlRm5JbnZva2VyIChmbnMsIHZtKSB7CiAgICBmdW5jdGlvbiBpbnZva2VyICgpIHsKICAgICAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKICAgICAgdmFyIGZucyA9IGludm9rZXIuZm5zOwogICAgICBpZiAoQXJyYXkuaXNBcnJheShmbnMpKSB7CiAgICAgICAgdmFyIGNsb25lZCA9IGZucy5zbGljZSgpOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2xvbmVkLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpbnZva2VXaXRoRXJyb3JIYW5kbGluZyhjbG9uZWRbaV0sIG51bGwsIGFyZ3VtZW50cyQxLCB2bSwgInYtb24gaGFuZGxlciIpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyByZXR1cm4gaGFuZGxlciByZXR1cm4gdmFsdWUgZm9yIHNpbmdsZSBoYW5kbGVycwogICAgICAgIHJldHVybiBpbnZva2VXaXRoRXJyb3JIYW5kbGluZyhmbnMsIG51bGwsIGFyZ3VtZW50cywgdm0sICJ2LW9uIGhhbmRsZXIiKQogICAgICB9CiAgICB9CiAgICBpbnZva2VyLmZucyA9IGZuczsKICAgIHJldHVybiBpbnZva2VyCiAgfQoKICBmdW5jdGlvbiB1cGRhdGVMaXN0ZW5lcnMgKAogICAgb24sCiAgICBvbGRPbiwKICAgIGFkZCwKICAgIHJlbW92ZSQkMSwKICAgIGNyZWF0ZU9uY2VIYW5kbGVyLAogICAgdm0KICApIHsKICAgIHZhciBuYW1lLCBkZWYkJDEsIGN1ciwgb2xkLCBldmVudDsKICAgIGZvciAobmFtZSBpbiBvbikgewogICAgICBkZWYkJDEgPSBjdXIgPSBvbltuYW1lXTsKICAgICAgb2xkID0gb2xkT25bbmFtZV07CiAgICAgIGV2ZW50ID0gbm9ybWFsaXplRXZlbnQobmFtZSk7CiAgICAgIGlmIChpc1VuZGVmKGN1cikpIHsKICAgICAgICB3YXJuKAogICAgICAgICAgIkludmFsaWQgaGFuZGxlciBmb3IgZXZlbnQgXCIiICsgKGV2ZW50Lm5hbWUpICsgIlwiOiBnb3QgIiArIFN0cmluZyhjdXIpLAogICAgICAgICAgdm0KICAgICAgICApOwogICAgICB9IGVsc2UgaWYgKGlzVW5kZWYob2xkKSkgewogICAgICAgIGlmIChpc1VuZGVmKGN1ci5mbnMpKSB7CiAgICAgICAgICBjdXIgPSBvbltuYW1lXSA9IGNyZWF0ZUZuSW52b2tlcihjdXIsIHZtKTsKICAgICAgICB9CiAgICAgICAgaWYgKGlzVHJ1ZShldmVudC5vbmNlKSkgewogICAgICAgICAgY3VyID0gb25bbmFtZV0gPSBjcmVhdGVPbmNlSGFuZGxlcihldmVudC5uYW1lLCBjdXIsIGV2ZW50LmNhcHR1cmUpOwogICAgICAgIH0KICAgICAgICBhZGQoZXZlbnQubmFtZSwgY3VyLCBldmVudC5jYXB0dXJlLCBldmVudC5wYXNzaXZlLCBldmVudC5wYXJhbXMpOwogICAgICB9IGVsc2UgaWYgKGN1ciAhPT0gb2xkKSB7CiAgICAgICAgb2xkLmZucyA9IGN1cjsKICAgICAgICBvbltuYW1lXSA9IG9sZDsKICAgICAgfQogICAgfQogICAgZm9yIChuYW1lIGluIG9sZE9uKSB7CiAgICAgIGlmIChpc1VuZGVmKG9uW25hbWVdKSkgewogICAgICAgIGV2ZW50ID0gbm9ybWFsaXplRXZlbnQobmFtZSk7CiAgICAgICAgcmVtb3ZlJCQxKGV2ZW50Lm5hbWUsIG9sZE9uW25hbWVdLCBldmVudC5jYXB0dXJlKTsKICAgICAgfQogICAgfQogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIG1lcmdlVk5vZGVIb29rIChkZWYsIGhvb2tLZXksIGhvb2spIHsKICAgIGlmIChkZWYgaW5zdGFuY2VvZiBWTm9kZSkgewogICAgICBkZWYgPSBkZWYuZGF0YS5ob29rIHx8IChkZWYuZGF0YS5ob29rID0ge30pOwogICAgfQogICAgdmFyIGludm9rZXI7CiAgICB2YXIgb2xkSG9vayA9IGRlZltob29rS2V5XTsKCiAgICBmdW5jdGlvbiB3cmFwcGVkSG9vayAoKSB7CiAgICAgIGhvb2suYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgLy8gaW1wb3J0YW50OiByZW1vdmUgbWVyZ2VkIGhvb2sgdG8gZW5zdXJlIGl0J3MgY2FsbGVkIG9ubHkgb25jZQogICAgICAvLyBhbmQgcHJldmVudCBtZW1vcnkgbGVhawogICAgICByZW1vdmUoaW52b2tlci5mbnMsIHdyYXBwZWRIb29rKTsKICAgIH0KCiAgICBpZiAoaXNVbmRlZihvbGRIb29rKSkgewogICAgICAvLyBubyBleGlzdGluZyBob29rCiAgICAgIGludm9rZXIgPSBjcmVhdGVGbkludm9rZXIoW3dyYXBwZWRIb29rXSk7CiAgICB9IGVsc2UgewogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgaWYgKGlzRGVmKG9sZEhvb2suZm5zKSAmJiBpc1RydWUob2xkSG9vay5tZXJnZWQpKSB7CiAgICAgICAgLy8gYWxyZWFkeSBhIG1lcmdlZCBpbnZva2VyCiAgICAgICAgaW52b2tlciA9IG9sZEhvb2s7CiAgICAgICAgaW52b2tlci5mbnMucHVzaCh3cmFwcGVkSG9vayk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gZXhpc3RpbmcgcGxhaW4gaG9vawogICAgICAgIGludm9rZXIgPSBjcmVhdGVGbkludm9rZXIoW29sZEhvb2ssIHdyYXBwZWRIb29rXSk7CiAgICAgIH0KICAgIH0KCiAgICBpbnZva2VyLm1lcmdlZCA9IHRydWU7CiAgICBkZWZbaG9va0tleV0gPSBpbnZva2VyOwogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIGV4dHJhY3RQcm9wc0Zyb21WTm9kZURhdGEgKAogICAgZGF0YSwKICAgIEN0b3IsCiAgICB0YWcKICApIHsKICAgIC8vIHdlIGFyZSBvbmx5IGV4dHJhY3RpbmcgcmF3IHZhbHVlcyBoZXJlLgogICAgLy8gdmFsaWRhdGlvbiBhbmQgZGVmYXVsdCB2YWx1ZXMgYXJlIGhhbmRsZWQgaW4gdGhlIGNoaWxkCiAgICAvLyBjb21wb25lbnQgaXRzZWxmLgogICAgdmFyIHByb3BPcHRpb25zID0gQ3Rvci5vcHRpb25zLnByb3BzOwogICAgaWYgKGlzVW5kZWYocHJvcE9wdGlvbnMpKSB7CiAgICAgIHJldHVybgogICAgfQogICAgdmFyIHJlcyA9IHt9OwogICAgdmFyIGF0dHJzID0gZGF0YS5hdHRyczsKICAgIHZhciBwcm9wcyA9IGRhdGEucHJvcHM7CiAgICBpZiAoaXNEZWYoYXR0cnMpIHx8IGlzRGVmKHByb3BzKSkgewogICAgICBmb3IgKHZhciBrZXkgaW4gcHJvcE9wdGlvbnMpIHsKICAgICAgICB2YXIgYWx0S2V5ID0gaHlwaGVuYXRlKGtleSk7CiAgICAgICAgewogICAgICAgICAgdmFyIGtleUluTG93ZXJDYXNlID0ga2V5LnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIGtleSAhPT0ga2V5SW5Mb3dlckNhc2UgJiYKICAgICAgICAgICAgYXR0cnMgJiYgaGFzT3duKGF0dHJzLCBrZXlJbkxvd2VyQ2FzZSkKICAgICAgICAgICkgewogICAgICAgICAgICB0aXAoCiAgICAgICAgICAgICAgIlByb3AgXCIiICsga2V5SW5Mb3dlckNhc2UgKyAiXCIgaXMgcGFzc2VkIHRvIGNvbXBvbmVudCAiICsKICAgICAgICAgICAgICAoZm9ybWF0Q29tcG9uZW50TmFtZSh0YWcgfHwgQ3RvcikpICsgIiwgYnV0IHRoZSBkZWNsYXJlZCBwcm9wIG5hbWUgaXMiICsKICAgICAgICAgICAgICAiIFwiIiArIGtleSArICJcIi4gIiArCiAgICAgICAgICAgICAgIk5vdGUgdGhhdCBIVE1MIGF0dHJpYnV0ZXMgYXJlIGNhc2UtaW5zZW5zaXRpdmUgYW5kIGNhbWVsQ2FzZWQgIiArCiAgICAgICAgICAgICAgInByb3BzIG5lZWQgdG8gdXNlIHRoZWlyIGtlYmFiLWNhc2UgZXF1aXZhbGVudHMgd2hlbiB1c2luZyBpbi1ET00gIiArCiAgICAgICAgICAgICAgInRlbXBsYXRlcy4gWW91IHNob3VsZCBwcm9iYWJseSB1c2UgXCIiICsgYWx0S2V5ICsgIlwiIGluc3RlYWQgb2YgXCIiICsga2V5ICsgIlwiLiIKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgY2hlY2tQcm9wKHJlcywgcHJvcHMsIGtleSwgYWx0S2V5LCB0cnVlKSB8fAogICAgICAgIGNoZWNrUHJvcChyZXMsIGF0dHJzLCBrZXksIGFsdEtleSwgZmFsc2UpOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gcmVzCiAgfQoKICBmdW5jdGlvbiBjaGVja1Byb3AgKAogICAgcmVzLAogICAgaGFzaCwKICAgIGtleSwKICAgIGFsdEtleSwKICAgIHByZXNlcnZlCiAgKSB7CiAgICBpZiAoaXNEZWYoaGFzaCkpIHsKICAgICAgaWYgKGhhc093bihoYXNoLCBrZXkpKSB7CiAgICAgICAgcmVzW2tleV0gPSBoYXNoW2tleV07CiAgICAgICAgaWYgKCFwcmVzZXJ2ZSkgewogICAgICAgICAgZGVsZXRlIGhhc2hba2V5XTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfSBlbHNlIGlmIChoYXNPd24oaGFzaCwgYWx0S2V5KSkgewogICAgICAgIHJlc1trZXldID0gaGFzaFthbHRLZXldOwogICAgICAgIGlmICghcHJlc2VydmUpIHsKICAgICAgICAgIGRlbGV0ZSBoYXNoW2FsdEtleV07CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgIH0KICAgIHJldHVybiBmYWxzZQogIH0KCiAgLyogICovCgogIC8vIFRoZSB0ZW1wbGF0ZSBjb21waWxlciBhdHRlbXB0cyB0byBtaW5pbWl6ZSB0aGUgbmVlZCBmb3Igbm9ybWFsaXphdGlvbiBieQogIC8vIHN0YXRpY2FsbHkgYW5hbHl6aW5nIHRoZSB0ZW1wbGF0ZSBhdCBjb21waWxlIHRpbWUuCiAgLy8KICAvLyBGb3IgcGxhaW4gSFRNTCBtYXJrdXAsIG5vcm1hbGl6YXRpb24gY2FuIGJlIGNvbXBsZXRlbHkgc2tpcHBlZCBiZWNhdXNlIHRoZQogIC8vIGdlbmVyYXRlZCByZW5kZXIgZnVuY3Rpb24gaXMgZ3VhcmFudGVlZCB0byByZXR1cm4gQXJyYXk8Vk5vZGU+LiBUaGVyZSBhcmUKICAvLyB0d28gY2FzZXMgd2hlcmUgZXh0cmEgbm9ybWFsaXphdGlvbiBpcyBuZWVkZWQ6CgogIC8vIDEuIFdoZW4gdGhlIGNoaWxkcmVuIGNvbnRhaW5zIGNvbXBvbmVudHMgLSBiZWNhdXNlIGEgZnVuY3Rpb25hbCBjb21wb25lbnQKICAvLyBtYXkgcmV0dXJuIGFuIEFycmF5IGluc3RlYWQgb2YgYSBzaW5nbGUgcm9vdC4gSW4gdGhpcyBjYXNlLCBqdXN0IGEgc2ltcGxlCiAgLy8gbm9ybWFsaXphdGlvbiBpcyBuZWVkZWQgLSBpZiBhbnkgY2hpbGQgaXMgYW4gQXJyYXksIHdlIGZsYXR0ZW4gdGhlIHdob2xlCiAgLy8gdGhpbmcgd2l0aCBBcnJheS5wcm90b3R5cGUuY29uY2F0LiBJdCBpcyBndWFyYW50ZWVkIHRvIGJlIG9ubHkgMS1sZXZlbCBkZWVwCiAgLy8gYmVjYXVzZSBmdW5jdGlvbmFsIGNvbXBvbmVudHMgYWxyZWFkeSBub3JtYWxpemUgdGhlaXIgb3duIGNoaWxkcmVuLgogIGZ1bmN0aW9uIHNpbXBsZU5vcm1hbGl6ZUNoaWxkcmVuIChjaGlsZHJlbikgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykgewogICAgICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZHJlbltpXSkpIHsKICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgY2hpbGRyZW4pCiAgICAgIH0KICAgIH0KICAgIHJldHVybiBjaGlsZHJlbgogIH0KCiAgLy8gMi4gV2hlbiB0aGUgY2hpbGRyZW4gY29udGFpbnMgY29uc3RydWN0cyB0aGF0IGFsd2F5cyBnZW5lcmF0ZWQgbmVzdGVkIEFycmF5cywKICAvLyBlLmcuIDx0ZW1wbGF0ZT4sIDxzbG90Piwgdi1mb3IsIG9yIHdoZW4gdGhlIGNoaWxkcmVuIGlzIHByb3ZpZGVkIGJ5IHVzZXIKICAvLyB3aXRoIGhhbmQtd3JpdHRlbiByZW5kZXIgZnVuY3Rpb25zIC8gSlNYLiBJbiBzdWNoIGNhc2VzIGEgZnVsbCBub3JtYWxpemF0aW9uCiAgLy8gaXMgbmVlZGVkIHRvIGNhdGVyIHRvIGFsbCBwb3NzaWJsZSB0eXBlcyBvZiBjaGlsZHJlbiB2YWx1ZXMuCiAgZnVuY3Rpb24gbm9ybWFsaXplQ2hpbGRyZW4gKGNoaWxkcmVuKSB7CiAgICByZXR1cm4gaXNQcmltaXRpdmUoY2hpbGRyZW4pCiAgICAgID8gW2NyZWF0ZVRleHRWTm9kZShjaGlsZHJlbildCiAgICAgIDogQXJyYXkuaXNBcnJheShjaGlsZHJlbikKICAgICAgICA/IG5vcm1hbGl6ZUFycmF5Q2hpbGRyZW4oY2hpbGRyZW4pCiAgICAgICAgOiB1bmRlZmluZWQKICB9CgogIGZ1bmN0aW9uIGlzVGV4dE5vZGUgKG5vZGUpIHsKICAgIHJldHVybiBpc0RlZihub2RlKSAmJiBpc0RlZihub2RlLnRleHQpICYmIGlzRmFsc2Uobm9kZS5pc0NvbW1lbnQpCiAgfQoKICBmdW5jdGlvbiBub3JtYWxpemVBcnJheUNoaWxkcmVuIChjaGlsZHJlbiwgbmVzdGVkSW5kZXgpIHsKICAgIHZhciByZXMgPSBbXTsKICAgIHZhciBpLCBjLCBsYXN0SW5kZXgsIGxhc3Q7CiAgICBmb3IgKGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHsKICAgICAgYyA9IGNoaWxkcmVuW2ldOwogICAgICBpZiAoaXNVbmRlZihjKSB8fCB0eXBlb2YgYyA9PT0gJ2Jvb2xlYW4nKSB7IGNvbnRpbnVlIH0KICAgICAgbGFzdEluZGV4ID0gcmVzLmxlbmd0aCAtIDE7CiAgICAgIGxhc3QgPSByZXNbbGFzdEluZGV4XTsKICAgICAgLy8gIG5lc3RlZAogICAgICBpZiAoQXJyYXkuaXNBcnJheShjKSkgewogICAgICAgIGlmIChjLmxlbmd0aCA+IDApIHsKICAgICAgICAgIGMgPSBub3JtYWxpemVBcnJheUNoaWxkcmVuKGMsICgobmVzdGVkSW5kZXggfHwgJycpICsgIl8iICsgaSkpOwogICAgICAgICAgLy8gbWVyZ2UgYWRqYWNlbnQgdGV4dCBub2RlcwogICAgICAgICAgaWYgKGlzVGV4dE5vZGUoY1swXSkgJiYgaXNUZXh0Tm9kZShsYXN0KSkgewogICAgICAgICAgICByZXNbbGFzdEluZGV4XSA9IGNyZWF0ZVRleHRWTm9kZShsYXN0LnRleHQgKyAoY1swXSkudGV4dCk7CiAgICAgICAgICAgIGMuc2hpZnQoKTsKICAgICAgICAgIH0KICAgICAgICAgIHJlcy5wdXNoLmFwcGx5KHJlcywgYyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGlzUHJpbWl0aXZlKGMpKSB7CiAgICAgICAgaWYgKGlzVGV4dE5vZGUobGFzdCkpIHsKICAgICAgICAgIC8vIG1lcmdlIGFkamFjZW50IHRleHQgbm9kZXMKICAgICAgICAgIC8vIHRoaXMgaXMgbmVjZXNzYXJ5IGZvciBTU1IgaHlkcmF0aW9uIGJlY2F1c2UgdGV4dCBub2RlcyBhcmUKICAgICAgICAgIC8vIGVzc2VudGlhbGx5IG1lcmdlZCB3aGVuIHJlbmRlcmVkIHRvIEhUTUwgc3RyaW5ncwogICAgICAgICAgcmVzW2xhc3RJbmRleF0gPSBjcmVhdGVUZXh0Vk5vZGUobGFzdC50ZXh0ICsgYyk7CiAgICAgICAgfSBlbHNlIGlmIChjICE9PSAnJykgewogICAgICAgICAgLy8gY29udmVydCBwcmltaXRpdmUgdG8gdm5vZGUKICAgICAgICAgIHJlcy5wdXNoKGNyZWF0ZVRleHRWTm9kZShjKSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChpc1RleHROb2RlKGMpICYmIGlzVGV4dE5vZGUobGFzdCkpIHsKICAgICAgICAgIC8vIG1lcmdlIGFkamFjZW50IHRleHQgbm9kZXMKICAgICAgICAgIHJlc1tsYXN0SW5kZXhdID0gY3JlYXRlVGV4dFZOb2RlKGxhc3QudGV4dCArIGMudGV4dCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIGRlZmF1bHQga2V5IGZvciBuZXN0ZWQgYXJyYXkgY2hpbGRyZW4gKGxpa2VseSBnZW5lcmF0ZWQgYnkgdi1mb3IpCiAgICAgICAgICBpZiAoaXNUcnVlKGNoaWxkcmVuLl9pc1ZMaXN0KSAmJgogICAgICAgICAgICBpc0RlZihjLnRhZykgJiYKICAgICAgICAgICAgaXNVbmRlZihjLmtleSkgJiYKICAgICAgICAgICAgaXNEZWYobmVzdGVkSW5kZXgpKSB7CiAgICAgICAgICAgIGMua2V5ID0gIl9fdmxpc3QiICsgbmVzdGVkSW5kZXggKyAiXyIgKyBpICsgIl9fIjsKICAgICAgICAgIH0KICAgICAgICAgIHJlcy5wdXNoKGMpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlcwogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIGluaXRQcm92aWRlICh2bSkgewogICAgdmFyIHByb3ZpZGUgPSB2bS4kb3B0aW9ucy5wcm92aWRlOwogICAgaWYgKHByb3ZpZGUpIHsKICAgICAgdm0uX3Byb3ZpZGVkID0gdHlwZW9mIHByb3ZpZGUgPT09ICdmdW5jdGlvbicKICAgICAgICA/IHByb3ZpZGUuY2FsbCh2bSkKICAgICAgICA6IHByb3ZpZGU7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBpbml0SW5qZWN0aW9ucyAodm0pIHsKICAgIHZhciByZXN1bHQgPSByZXNvbHZlSW5qZWN0KHZtLiRvcHRpb25zLmluamVjdCwgdm0pOwogICAgaWYgKHJlc3VsdCkgewogICAgICB0b2dnbGVPYnNlcnZpbmcoZmFsc2UpOwogICAgICBPYmplY3Qua2V5cyhyZXN1bHQpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovCiAgICAgICAgewogICAgICAgICAgZGVmaW5lUmVhY3RpdmUkJDEodm0sIGtleSwgcmVzdWx0W2tleV0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgd2FybigKICAgICAgICAgICAgICAiQXZvaWQgbXV0YXRpbmcgYW4gaW5qZWN0ZWQgdmFsdWUgZGlyZWN0bHkgc2luY2UgdGhlIGNoYW5nZXMgd2lsbCBiZSAiICsKICAgICAgICAgICAgICAib3ZlcndyaXR0ZW4gd2hlbmV2ZXIgdGhlIHByb3ZpZGVkIGNvbXBvbmVudCByZS1yZW5kZXJzLiAiICsKICAgICAgICAgICAgICAiaW5qZWN0aW9uIGJlaW5nIG11dGF0ZWQ6IFwiIiArIGtleSArICJcIiIsCiAgICAgICAgICAgICAgdm0KICAgICAgICAgICAgKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRvZ2dsZU9ic2VydmluZyh0cnVlKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHJlc29sdmVJbmplY3QgKGluamVjdCwgdm0pIHsKICAgIGlmIChpbmplY3QpIHsKICAgICAgLy8gaW5qZWN0IGlzIDphbnkgYmVjYXVzZSBmbG93IGlzIG5vdCBzbWFydCBlbm91Z2ggdG8gZmlndXJlIG91dCBjYWNoZWQKICAgICAgdmFyIHJlc3VsdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICAgIHZhciBrZXlzID0gaGFzU3ltYm9sCiAgICAgICAgPyBSZWZsZWN0Lm93bktleXMoaW5qZWN0KQogICAgICAgIDogT2JqZWN0LmtleXMoaW5qZWN0KTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBrZXkgPSBrZXlzW2ldOwogICAgICAgIC8vICM2NTc0IGluIGNhc2UgdGhlIGluamVjdCBvYmplY3QgaXMgb2JzZXJ2ZWQuLi4KICAgICAgICBpZiAoa2V5ID09PSAnX19vYl9fJykgeyBjb250aW51ZSB9CiAgICAgICAgdmFyIHByb3ZpZGVLZXkgPSBpbmplY3Rba2V5XS5mcm9tOwogICAgICAgIHZhciBzb3VyY2UgPSB2bTsKICAgICAgICB3aGlsZSAoc291cmNlKSB7CiAgICAgICAgICBpZiAoc291cmNlLl9wcm92aWRlZCAmJiBoYXNPd24oc291cmNlLl9wcm92aWRlZCwgcHJvdmlkZUtleSkpIHsKICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBzb3VyY2UuX3Byb3ZpZGVkW3Byb3ZpZGVLZXldOwogICAgICAgICAgICBicmVhawogICAgICAgICAgfQogICAgICAgICAgc291cmNlID0gc291cmNlLiRwYXJlbnQ7CiAgICAgICAgfQogICAgICAgIGlmICghc291cmNlKSB7CiAgICAgICAgICBpZiAoJ2RlZmF1bHQnIGluIGluamVjdFtrZXldKSB7CiAgICAgICAgICAgIHZhciBwcm92aWRlRGVmYXVsdCA9IGluamVjdFtrZXldLmRlZmF1bHQ7CiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gdHlwZW9mIHByb3ZpZGVEZWZhdWx0ID09PSAnZnVuY3Rpb24nCiAgICAgICAgICAgICAgPyBwcm92aWRlRGVmYXVsdC5jYWxsKHZtKQogICAgICAgICAgICAgIDogcHJvdmlkZURlZmF1bHQ7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB3YXJuKCgiSW5qZWN0aW9uIFwiIiArIGtleSArICJcIiBub3QgZm91bmQiKSwgdm0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0CiAgICB9CiAgfQoKICAvKiAgKi8KCgoKICAvKioKICAgKiBSdW50aW1lIGhlbHBlciBmb3IgcmVzb2x2aW5nIHJhdyBjaGlsZHJlbiBWTm9kZXMgaW50byBhIHNsb3Qgb2JqZWN0LgogICAqLwogIGZ1bmN0aW9uIHJlc29sdmVTbG90cyAoCiAgICBjaGlsZHJlbiwKICAgIGNvbnRleHQKICApIHsKICAgIGlmICghY2hpbGRyZW4gfHwgIWNoaWxkcmVuLmxlbmd0aCkgewogICAgICByZXR1cm4ge30KICAgIH0KICAgIHZhciBzbG90cyA9IHt9OwogICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5baV07CiAgICAgIHZhciBkYXRhID0gY2hpbGQuZGF0YTsKICAgICAgLy8gcmVtb3ZlIHNsb3QgYXR0cmlidXRlIGlmIHRoZSBub2RlIGlzIHJlc29sdmVkIGFzIGEgVnVlIHNsb3Qgbm9kZQogICAgICBpZiAoZGF0YSAmJiBkYXRhLmF0dHJzICYmIGRhdGEuYXR0cnMuc2xvdCkgewogICAgICAgIGRlbGV0ZSBkYXRhLmF0dHJzLnNsb3Q7CiAgICAgIH0KICAgICAgLy8gbmFtZWQgc2xvdHMgc2hvdWxkIG9ubHkgYmUgcmVzcGVjdGVkIGlmIHRoZSB2bm9kZSB3YXMgcmVuZGVyZWQgaW4gdGhlCiAgICAgIC8vIHNhbWUgY29udGV4dC4KICAgICAgaWYgKChjaGlsZC5jb250ZXh0ID09PSBjb250ZXh0IHx8IGNoaWxkLmZuQ29udGV4dCA9PT0gY29udGV4dCkgJiYKICAgICAgICBkYXRhICYmIGRhdGEuc2xvdCAhPSBudWxsCiAgICAgICkgewogICAgICAgIHZhciBuYW1lID0gZGF0YS5zbG90OwogICAgICAgIHZhciBzbG90ID0gKHNsb3RzW25hbWVdIHx8IChzbG90c1tuYW1lXSA9IFtdKSk7CiAgICAgICAgaWYgKGNoaWxkLnRhZyA9PT0gJ3RlbXBsYXRlJykgewogICAgICAgICAgc2xvdC5wdXNoLmFwcGx5KHNsb3QsIGNoaWxkLmNoaWxkcmVuIHx8IFtdKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2xvdC5wdXNoKGNoaWxkKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgKHNsb3RzLmRlZmF1bHQgfHwgKHNsb3RzLmRlZmF1bHQgPSBbXSkpLnB1c2goY2hpbGQpOwogICAgICB9CiAgICB9CiAgICAvLyBpZ25vcmUgc2xvdHMgdGhhdCBjb250YWlucyBvbmx5IHdoaXRlc3BhY2UKICAgIGZvciAodmFyIG5hbWUkMSBpbiBzbG90cykgewogICAgICBpZiAoc2xvdHNbbmFtZSQxXS5ldmVyeShpc1doaXRlc3BhY2UpKSB7CiAgICAgICAgZGVsZXRlIHNsb3RzW25hbWUkMV07CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBzbG90cwogIH0KCiAgZnVuY3Rpb24gaXNXaGl0ZXNwYWNlIChub2RlKSB7CiAgICByZXR1cm4gKG5vZGUuaXNDb21tZW50ICYmICFub2RlLmFzeW5jRmFjdG9yeSkgfHwgbm9kZS50ZXh0ID09PSAnICcKICB9CgogIC8qICAqLwoKICBmdW5jdGlvbiBub3JtYWxpemVTY29wZWRTbG90cyAoCiAgICBzbG90cywKICAgIG5vcm1hbFNsb3RzLAogICAgcHJldlNsb3RzCiAgKSB7CiAgICB2YXIgcmVzOwogICAgdmFyIGhhc05vcm1hbFNsb3RzID0gT2JqZWN0LmtleXMobm9ybWFsU2xvdHMpLmxlbmd0aCA+IDA7CiAgICB2YXIgaXNTdGFibGUgPSBzbG90cyA/ICEhc2xvdHMuJHN0YWJsZSA6ICFoYXNOb3JtYWxTbG90czsKICAgIHZhciBrZXkgPSBzbG90cyAmJiBzbG90cy4ka2V5OwogICAgaWYgKCFzbG90cykgewogICAgICByZXMgPSB7fTsKICAgIH0gZWxzZSBpZiAoc2xvdHMuX25vcm1hbGl6ZWQpIHsKICAgICAgLy8gZmFzdCBwYXRoIDE6IGNoaWxkIGNvbXBvbmVudCByZS1yZW5kZXIgb25seSwgcGFyZW50IGRpZCBub3QgY2hhbmdlCiAgICAgIHJldHVybiBzbG90cy5fbm9ybWFsaXplZAogICAgfSBlbHNlIGlmICgKICAgICAgaXNTdGFibGUgJiYKICAgICAgcHJldlNsb3RzICYmCiAgICAgIHByZXZTbG90cyAhPT0gZW1wdHlPYmplY3QgJiYKICAgICAga2V5ID09PSBwcmV2U2xvdHMuJGtleSAmJgogICAgICAhaGFzTm9ybWFsU2xvdHMgJiYKICAgICAgIXByZXZTbG90cy4kaGFzTm9ybWFsCiAgICApIHsKICAgICAgLy8gZmFzdCBwYXRoIDI6IHN0YWJsZSBzY29wZWQgc2xvdHMgdy8gbm8gbm9ybWFsIHNsb3RzIHRvIHByb3h5LAogICAgICAvLyBvbmx5IG5lZWQgdG8gbm9ybWFsaXplIG9uY2UKICAgICAgcmV0dXJuIHByZXZTbG90cwogICAgfSBlbHNlIHsKICAgICAgcmVzID0ge307CiAgICAgIGZvciAodmFyIGtleSQxIGluIHNsb3RzKSB7CiAgICAgICAgaWYgKHNsb3RzW2tleSQxXSAmJiBrZXkkMVswXSAhPT0gJyQnKSB7CiAgICAgICAgICByZXNba2V5JDFdID0gbm9ybWFsaXplU2NvcGVkU2xvdChub3JtYWxTbG90cywga2V5JDEsIHNsb3RzW2tleSQxXSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvLyBleHBvc2Ugbm9ybWFsIHNsb3RzIG9uIHNjb3BlZFNsb3RzCiAgICBmb3IgKHZhciBrZXkkMiBpbiBub3JtYWxTbG90cykgewogICAgICBpZiAoIShrZXkkMiBpbiByZXMpKSB7CiAgICAgICAgcmVzW2tleSQyXSA9IHByb3h5Tm9ybWFsU2xvdChub3JtYWxTbG90cywga2V5JDIpOwogICAgICB9CiAgICB9CiAgICAvLyBhdm9yaWF6IHNlZW1zIHRvIG1vY2sgYSBub24tZXh0ZW5zaWJsZSAkc2NvcGVkU2xvdHMgb2JqZWN0CiAgICAvLyBhbmQgd2hlbiB0aGF0IGlzIHBhc3NlZCBkb3duIHRoaXMgd291bGQgY2F1c2UgYW4gZXJyb3IKICAgIGlmIChzbG90cyAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHNsb3RzKSkgewogICAgICAoc2xvdHMpLl9ub3JtYWxpemVkID0gcmVzOwogICAgfQogICAgZGVmKHJlcywgJyRzdGFibGUnLCBpc1N0YWJsZSk7CiAgICBkZWYocmVzLCAnJGtleScsIGtleSk7CiAgICBkZWYocmVzLCAnJGhhc05vcm1hbCcsIGhhc05vcm1hbFNsb3RzKTsKICAgIHJldHVybiByZXMKICB9CgogIGZ1bmN0aW9uIG5vcm1hbGl6ZVNjb3BlZFNsb3Qobm9ybWFsU2xvdHMsIGtleSwgZm4pIHsKICAgIHZhciBub3JtYWxpemVkID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgcmVzID0gYXJndW1lbnRzLmxlbmd0aCA/IGZuLmFwcGx5KG51bGwsIGFyZ3VtZW50cykgOiBmbih7fSk7CiAgICAgIHJlcyA9IHJlcyAmJiB0eXBlb2YgcmVzID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheShyZXMpCiAgICAgICAgPyBbcmVzXSAvLyBzaW5nbGUgdm5vZGUKICAgICAgICA6IG5vcm1hbGl6ZUNoaWxkcmVuKHJlcyk7CiAgICAgIHJldHVybiByZXMgJiYgKAogICAgICAgIHJlcy5sZW5ndGggPT09IDAgfHwKICAgICAgICAocmVzLmxlbmd0aCA9PT0gMSAmJiByZXNbMF0uaXNDb21tZW50KSAvLyAjOTY1OAogICAgICApID8gdW5kZWZpbmVkCiAgICAgICAgOiByZXMKICAgIH07CiAgICAvLyB0aGlzIGlzIGEgc2xvdCB1c2luZyB0aGUgbmV3IHYtc2xvdCBzeW50YXggd2l0aG91dCBzY29wZS4gYWx0aG91Z2ggaXQgaXMKICAgIC8vIGNvbXBpbGVkIGFzIGEgc2NvcGVkIHNsb3QsIHJlbmRlciBmbiB1c2VycyB3b3VsZCBleHBlY3QgaXQgdG8gYmUgcHJlc2VudAogICAgLy8gb24gdGhpcy4kc2xvdHMgYmVjYXVzZSB0aGUgdXNhZ2UgaXMgc2VtYW50aWNhbGx5IGEgbm9ybWFsIHNsb3QuCiAgICBpZiAoZm4ucHJveHkpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5vcm1hbFNsb3RzLCBrZXksIHsKICAgICAgICBnZXQ6IG5vcm1hbGl6ZWQsCiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gbm9ybWFsaXplZAogIH0KCiAgZnVuY3Rpb24gcHJveHlOb3JtYWxTbG90KHNsb3RzLCBrZXkpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBzbG90c1trZXldOyB9CiAgfQoKICAvKiAgKi8KCiAgLyoqCiAgICogUnVudGltZSBoZWxwZXIgZm9yIHJlbmRlcmluZyB2LWZvciBsaXN0cy4KICAgKi8KICBmdW5jdGlvbiByZW5kZXJMaXN0ICgKICAgIHZhbCwKICAgIHJlbmRlcgogICkgewogICAgdmFyIHJldCwgaSwgbCwga2V5cywga2V5OwogICAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSB8fCB0eXBlb2YgdmFsID09PSAnc3RyaW5nJykgewogICAgICByZXQgPSBuZXcgQXJyYXkodmFsLmxlbmd0aCk7CiAgICAgIGZvciAoaSA9IDAsIGwgPSB2YWwubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgcmV0W2ldID0gcmVuZGVyKHZhbFtpXSwgaSk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHsKICAgICAgcmV0ID0gbmV3IEFycmF5KHZhbCk7CiAgICAgIGZvciAoaSA9IDA7IGkgPCB2YWw7IGkrKykgewogICAgICAgIHJldFtpXSA9IHJlbmRlcihpICsgMSwgaSk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoaXNPYmplY3QodmFsKSkgewogICAgICBpZiAoaGFzU3ltYm9sICYmIHZhbFtTeW1ib2wuaXRlcmF0b3JdKSB7CiAgICAgICAgcmV0ID0gW107CiAgICAgICAgdmFyIGl0ZXJhdG9yID0gdmFsW1N5bWJvbC5pdGVyYXRvcl0oKTsKICAgICAgICB2YXIgcmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpOwogICAgICAgIHdoaWxlICghcmVzdWx0LmRvbmUpIHsKICAgICAgICAgIHJldC5wdXNoKHJlbmRlcihyZXN1bHQudmFsdWUsIHJldC5sZW5ndGgpKTsKICAgICAgICAgIHJlc3VsdCA9IGl0ZXJhdG9yLm5leHQoKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAga2V5cyA9IE9iamVjdC5rZXlzKHZhbCk7CiAgICAgICAgcmV0ID0gbmV3IEFycmF5KGtleXMubGVuZ3RoKTsKICAgICAgICBmb3IgKGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICAgIGtleSA9IGtleXNbaV07CiAgICAgICAgICByZXRbaV0gPSByZW5kZXIodmFsW2tleV0sIGtleSwgaSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBpZiAoIWlzRGVmKHJldCkpIHsKICAgICAgcmV0ID0gW107CiAgICB9CiAgICAocmV0KS5faXNWTGlzdCA9IHRydWU7CiAgICByZXR1cm4gcmV0CiAgfQoKICAvKiAgKi8KCiAgLyoqCiAgICogUnVudGltZSBoZWxwZXIgZm9yIHJlbmRlcmluZyA8c2xvdD4KICAgKi8KICBmdW5jdGlvbiByZW5kZXJTbG90ICgKICAgIG5hbWUsCiAgICBmYWxsYmFjaywKICAgIHByb3BzLAogICAgYmluZE9iamVjdAogICkgewogICAgdmFyIHNjb3BlZFNsb3RGbiA9IHRoaXMuJHNjb3BlZFNsb3RzW25hbWVdOwogICAgdmFyIG5vZGVzOwogICAgaWYgKHNjb3BlZFNsb3RGbikgeyAvLyBzY29wZWQgc2xvdAogICAgICBwcm9wcyA9IHByb3BzIHx8IHt9OwogICAgICBpZiAoYmluZE9iamVjdCkgewogICAgICAgIGlmICghaXNPYmplY3QoYmluZE9iamVjdCkpIHsKICAgICAgICAgIHdhcm4oCiAgICAgICAgICAgICdzbG90IHYtYmluZCB3aXRob3V0IGFyZ3VtZW50IGV4cGVjdHMgYW4gT2JqZWN0JywKICAgICAgICAgICAgdGhpcwogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgcHJvcHMgPSBleHRlbmQoZXh0ZW5kKHt9LCBiaW5kT2JqZWN0KSwgcHJvcHMpOwogICAgICB9CiAgICAgIG5vZGVzID0gc2NvcGVkU2xvdEZuKHByb3BzKSB8fCBmYWxsYmFjazsKICAgIH0gZWxzZSB7CiAgICAgIG5vZGVzID0gdGhpcy4kc2xvdHNbbmFtZV0gfHwgZmFsbGJhY2s7CiAgICB9CgogICAgdmFyIHRhcmdldCA9IHByb3BzICYmIHByb3BzLnNsb3Q7CiAgICBpZiAodGFyZ2V0KSB7CiAgICAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScsIHsgc2xvdDogdGFyZ2V0IH0sIG5vZGVzKQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIG5vZGVzCiAgICB9CiAgfQoKICAvKiAgKi8KCiAgLyoqCiAgICogUnVudGltZSBoZWxwZXIgZm9yIHJlc29sdmluZyBmaWx0ZXJzCiAgICovCiAgZnVuY3Rpb24gcmVzb2x2ZUZpbHRlciAoaWQpIHsKICAgIHJldHVybiByZXNvbHZlQXNzZXQodGhpcy4kb3B0aW9ucywgJ2ZpbHRlcnMnLCBpZCwgdHJ1ZSkgfHwgaWRlbnRpdHkKICB9CgogIC8qICAqLwoKICBmdW5jdGlvbiBpc0tleU5vdE1hdGNoIChleHBlY3QsIGFjdHVhbCkgewogICAgaWYgKEFycmF5LmlzQXJyYXkoZXhwZWN0KSkgewogICAgICByZXR1cm4gZXhwZWN0LmluZGV4T2YoYWN0dWFsKSA9PT0gLTEKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBleHBlY3QgIT09IGFjdHVhbAogICAgfQogIH0KCiAgLyoqCiAgICogUnVudGltZSBoZWxwZXIgZm9yIGNoZWNraW5nIGtleUNvZGVzIGZyb20gY29uZmlnLgogICAqIGV4cG9zZWQgYXMgVnVlLnByb3RvdHlwZS5fawogICAqIHBhc3NpbmcgaW4gZXZlbnRLZXlOYW1lIGFzIGxhc3QgYXJndW1lbnQgc2VwYXJhdGVseSBmb3IgYmFja3dhcmRzIGNvbXBhdAogICAqLwogIGZ1bmN0aW9uIGNoZWNrS2V5Q29kZXMgKAogICAgZXZlbnRLZXlDb2RlLAogICAga2V5LAogICAgYnVpbHRJbktleUNvZGUsCiAgICBldmVudEtleU5hbWUsCiAgICBidWlsdEluS2V5TmFtZQogICkgewogICAgdmFyIG1hcHBlZEtleUNvZGUgPSBjb25maWcua2V5Q29kZXNba2V5XSB8fCBidWlsdEluS2V5Q29kZTsKICAgIGlmIChidWlsdEluS2V5TmFtZSAmJiBldmVudEtleU5hbWUgJiYgIWNvbmZpZy5rZXlDb2Rlc1trZXldKSB7CiAgICAgIHJldHVybiBpc0tleU5vdE1hdGNoKGJ1aWx0SW5LZXlOYW1lLCBldmVudEtleU5hbWUpCiAgICB9IGVsc2UgaWYgKG1hcHBlZEtleUNvZGUpIHsKICAgICAgcmV0dXJuIGlzS2V5Tm90TWF0Y2gobWFwcGVkS2V5Q29kZSwgZXZlbnRLZXlDb2RlKQogICAgfSBlbHNlIGlmIChldmVudEtleU5hbWUpIHsKICAgICAgcmV0dXJuIGh5cGhlbmF0ZShldmVudEtleU5hbWUpICE9PSBrZXkKICAgIH0KICB9CgogIC8qICAqLwoKICAvKioKICAgKiBSdW50aW1lIGhlbHBlciBmb3IgbWVyZ2luZyB2LWJpbmQ9Im9iamVjdCIgaW50byBhIFZOb2RlJ3MgZGF0YS4KICAgKi8KICBmdW5jdGlvbiBiaW5kT2JqZWN0UHJvcHMgKAogICAgZGF0YSwKICAgIHRhZywKICAgIHZhbHVlLAogICAgYXNQcm9wLAogICAgaXNTeW5jCiAgKSB7CiAgICBpZiAodmFsdWUpIHsKICAgICAgaWYgKCFpc09iamVjdCh2YWx1ZSkpIHsKICAgICAgICB3YXJuKAogICAgICAgICAgJ3YtYmluZCB3aXRob3V0IGFyZ3VtZW50IGV4cGVjdHMgYW4gT2JqZWN0IG9yIEFycmF5IHZhbHVlJywKICAgICAgICAgIHRoaXMKICAgICAgICApOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgewogICAgICAgICAgdmFsdWUgPSB0b09iamVjdCh2YWx1ZSk7CiAgICAgICAgfQogICAgICAgIHZhciBoYXNoOwogICAgICAgIHZhciBsb29wID0gZnVuY3Rpb24gKCBrZXkgKSB7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIGtleSA9PT0gJ2NsYXNzJyB8fAogICAgICAgICAgICBrZXkgPT09ICdzdHlsZScgfHwKICAgICAgICAgICAgaXNSZXNlcnZlZEF0dHJpYnV0ZShrZXkpCiAgICAgICAgICApIHsKICAgICAgICAgICAgaGFzaCA9IGRhdGE7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YXIgdHlwZSA9IGRhdGEuYXR0cnMgJiYgZGF0YS5hdHRycy50eXBlOwogICAgICAgICAgICBoYXNoID0gYXNQcm9wIHx8IGNvbmZpZy5tdXN0VXNlUHJvcCh0YWcsIHR5cGUsIGtleSkKICAgICAgICAgICAgICA/IGRhdGEuZG9tUHJvcHMgfHwgKGRhdGEuZG9tUHJvcHMgPSB7fSkKICAgICAgICAgICAgICA6IGRhdGEuYXR0cnMgfHwgKGRhdGEuYXR0cnMgPSB7fSk7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgY2FtZWxpemVkS2V5ID0gY2FtZWxpemUoa2V5KTsKICAgICAgICAgIHZhciBoeXBoZW5hdGVkS2V5ID0gaHlwaGVuYXRlKGtleSk7CiAgICAgICAgICBpZiAoIShjYW1lbGl6ZWRLZXkgaW4gaGFzaCkgJiYgIShoeXBoZW5hdGVkS2V5IGluIGhhc2gpKSB7CiAgICAgICAgICAgIGhhc2hba2V5XSA9IHZhbHVlW2tleV07CgogICAgICAgICAgICBpZiAoaXNTeW5jKSB7CiAgICAgICAgICAgICAgdmFyIG9uID0gZGF0YS5vbiB8fCAoZGF0YS5vbiA9IHt9KTsKICAgICAgICAgICAgICBvblsoInVwZGF0ZToiICsga2V5KV0gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgICB2YWx1ZVtrZXldID0gJGV2ZW50OwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIGxvb3AoIGtleSApOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gZGF0YQogIH0KCiAgLyogICovCgogIC8qKgogICAqIFJ1bnRpbWUgaGVscGVyIGZvciByZW5kZXJpbmcgc3RhdGljIHRyZWVzLgogICAqLwogIGZ1bmN0aW9uIHJlbmRlclN0YXRpYyAoCiAgICBpbmRleCwKICAgIGlzSW5Gb3IKICApIHsKICAgIHZhciBjYWNoZWQgPSB0aGlzLl9zdGF0aWNUcmVlcyB8fCAodGhpcy5fc3RhdGljVHJlZXMgPSBbXSk7CiAgICB2YXIgdHJlZSA9IGNhY2hlZFtpbmRleF07CiAgICAvLyBpZiBoYXMgYWxyZWFkeS1yZW5kZXJlZCBzdGF0aWMgdHJlZSBhbmQgbm90IGluc2lkZSB2LWZvciwKICAgIC8vIHdlIGNhbiByZXVzZSB0aGUgc2FtZSB0cmVlLgogICAgaWYgKHRyZWUgJiYgIWlzSW5Gb3IpIHsKICAgICAgcmV0dXJuIHRyZWUKICAgIH0KICAgIC8vIG90aGVyd2lzZSwgcmVuZGVyIGEgZnJlc2ggdHJlZS4KICAgIHRyZWUgPSBjYWNoZWRbaW5kZXhdID0gdGhpcy4kb3B0aW9ucy5zdGF0aWNSZW5kZXJGbnNbaW5kZXhdLmNhbGwoCiAgICAgIHRoaXMuX3JlbmRlclByb3h5LAogICAgICBudWxsLAogICAgICB0aGlzIC8vIGZvciByZW5kZXIgZm5zIGdlbmVyYXRlZCBmb3IgZnVuY3Rpb25hbCBjb21wb25lbnQgdGVtcGxhdGVzCiAgICApOwogICAgbWFya1N0YXRpYyh0cmVlLCAoIl9fc3RhdGljX18iICsgaW5kZXgpLCBmYWxzZSk7CiAgICByZXR1cm4gdHJlZQogIH0KCiAgLyoqCiAgICogUnVudGltZSBoZWxwZXIgZm9yIHYtb25jZS4KICAgKiBFZmZlY3RpdmVseSBpdCBtZWFucyBtYXJraW5nIHRoZSBub2RlIGFzIHN0YXRpYyB3aXRoIGEgdW5pcXVlIGtleS4KICAgKi8KICBmdW5jdGlvbiBtYXJrT25jZSAoCiAgICB0cmVlLAogICAgaW5kZXgsCiAgICBrZXkKICApIHsKICAgIG1hcmtTdGF0aWModHJlZSwgKCJfX29uY2VfXyIgKyBpbmRleCArIChrZXkgPyAoIl8iICsga2V5KSA6ICIiKSksIHRydWUpOwogICAgcmV0dXJuIHRyZWUKICB9CgogIGZ1bmN0aW9uIG1hcmtTdGF0aWMgKAogICAgdHJlZSwKICAgIGtleSwKICAgIGlzT25jZQogICkgewogICAgaWYgKEFycmF5LmlzQXJyYXkodHJlZSkpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmVlLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRyZWVbaV0gJiYgdHlwZW9mIHRyZWVbaV0gIT09ICdzdHJpbmcnKSB7CiAgICAgICAgICBtYXJrU3RhdGljTm9kZSh0cmVlW2ldLCAoa2V5ICsgIl8iICsgaSksIGlzT25jZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgewogICAgICBtYXJrU3RhdGljTm9kZSh0cmVlLCBrZXksIGlzT25jZSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBtYXJrU3RhdGljTm9kZSAobm9kZSwga2V5LCBpc09uY2UpIHsKICAgIG5vZGUuaXNTdGF0aWMgPSB0cnVlOwogICAgbm9kZS5rZXkgPSBrZXk7CiAgICBub2RlLmlzT25jZSA9IGlzT25jZTsKICB9CgogIC8qICAqLwoKICBmdW5jdGlvbiBiaW5kT2JqZWN0TGlzdGVuZXJzIChkYXRhLCB2YWx1ZSkgewogICAgaWYgKHZhbHVlKSB7CiAgICAgIGlmICghaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHsKICAgICAgICB3YXJuKAogICAgICAgICAgJ3Ytb24gd2l0aG91dCBhcmd1bWVudCBleHBlY3RzIGFuIE9iamVjdCB2YWx1ZScsCiAgICAgICAgICB0aGlzCiAgICAgICAgKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgb24gPSBkYXRhLm9uID0gZGF0YS5vbiA/IGV4dGVuZCh7fSwgZGF0YS5vbikgOiB7fTsKICAgICAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHsKICAgICAgICAgIHZhciBleGlzdGluZyA9IG9uW2tleV07CiAgICAgICAgICB2YXIgb3VycyA9IHZhbHVlW2tleV07CiAgICAgICAgICBvbltrZXldID0gZXhpc3RpbmcgPyBbXS5jb25jYXQoZXhpc3RpbmcsIG91cnMpIDogb3VyczsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBkYXRhCiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gcmVzb2x2ZVNjb3BlZFNsb3RzICgKICAgIGZucywgLy8gc2VlIGZsb3cvdm5vZGUKICAgIHJlcywKICAgIC8vIHRoZSBmb2xsb3dpbmcgYXJlIGFkZGVkIGluIDIuNgogICAgaGFzRHluYW1pY0tleXMsCiAgICBjb250ZW50SGFzaEtleQogICkgewogICAgcmVzID0gcmVzIHx8IHsgJHN0YWJsZTogIWhhc0R5bmFtaWNLZXlzIH07CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZucy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgc2xvdCA9IGZuc1tpXTsKICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc2xvdCkpIHsKICAgICAgICByZXNvbHZlU2NvcGVkU2xvdHMoc2xvdCwgcmVzLCBoYXNEeW5hbWljS2V5cyk7CiAgICAgIH0gZWxzZSBpZiAoc2xvdCkgewogICAgICAgIC8vIG1hcmtlciBmb3IgcmV2ZXJzZSBwcm94eWluZyB2LXNsb3Qgd2l0aG91dCBzY29wZSBvbiB0aGlzLiRzbG90cwogICAgICAgIGlmIChzbG90LnByb3h5KSB7CiAgICAgICAgICBzbG90LmZuLnByb3h5ID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmVzW3Nsb3Qua2V5XSA9IHNsb3QuZm47CiAgICAgIH0KICAgIH0KICAgIGlmIChjb250ZW50SGFzaEtleSkgewogICAgICAocmVzKS4ka2V5ID0gY29udGVudEhhc2hLZXk7CiAgICB9CiAgICByZXR1cm4gcmVzCiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gYmluZER5bmFtaWNLZXlzIChiYXNlT2JqLCB2YWx1ZXMpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgaSArPSAyKSB7CiAgICAgIHZhciBrZXkgPSB2YWx1ZXNbaV07CiAgICAgIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJyAmJiBrZXkpIHsKICAgICAgICBiYXNlT2JqW3ZhbHVlc1tpXV0gPSB2YWx1ZXNbaSArIDFdOwogICAgICB9IGVsc2UgaWYgKGtleSAhPT0gJycgJiYga2V5ICE9PSBudWxsKSB7CiAgICAgICAgLy8gbnVsbCBpcyBhIHNwZWNpYWwgdmFsdWUgZm9yIGV4cGxpY2l0bHkgcmVtb3ZpbmcgYSBiaW5kaW5nCiAgICAgICAgd2FybigKICAgICAgICAgICgiSW52YWxpZCB2YWx1ZSBmb3IgZHluYW1pYyBkaXJlY3RpdmUgYXJndW1lbnQgKGV4cGVjdGVkIHN0cmluZyBvciBudWxsKTogIiArIGtleSksCiAgICAgICAgICB0aGlzCiAgICAgICAgKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGJhc2VPYmoKICB9CgogIC8vIGhlbHBlciB0byBkeW5hbWljYWxseSBhcHBlbmQgbW9kaWZpZXIgcnVudGltZSBtYXJrZXJzIHRvIGV2ZW50IG5hbWVzLgogIC8vIGVuc3VyZSBvbmx5IGFwcGVuZCB3aGVuIHZhbHVlIGlzIGFscmVhZHkgc3RyaW5nLCBvdGhlcndpc2UgaXQgd2lsbCBiZSBjYXN0CiAgLy8gdG8gc3RyaW5nIGFuZCBjYXVzZSB0aGUgdHlwZSBjaGVjayB0byBtaXNzLgogIGZ1bmN0aW9uIHByZXBlbmRNb2RpZmllciAodmFsdWUsIHN5bWJvbCkgewogICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyBzeW1ib2wgKyB2YWx1ZSA6IHZhbHVlCiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gaW5zdGFsbFJlbmRlckhlbHBlcnMgKHRhcmdldCkgewogICAgdGFyZ2V0Ll9vID0gbWFya09uY2U7CiAgICB0YXJnZXQuX24gPSB0b051bWJlcjsKICAgIHRhcmdldC5fcyA9IHRvU3RyaW5nOwogICAgdGFyZ2V0Ll9sID0gcmVuZGVyTGlzdDsKICAgIHRhcmdldC5fdCA9IHJlbmRlclNsb3Q7CiAgICB0YXJnZXQuX3EgPSBsb29zZUVxdWFsOwogICAgdGFyZ2V0Ll9pID0gbG9vc2VJbmRleE9mOwogICAgdGFyZ2V0Ll9tID0gcmVuZGVyU3RhdGljOwogICAgdGFyZ2V0Ll9mID0gcmVzb2x2ZUZpbHRlcjsKICAgIHRhcmdldC5fayA9IGNoZWNrS2V5Q29kZXM7CiAgICB0YXJnZXQuX2IgPSBiaW5kT2JqZWN0UHJvcHM7CiAgICB0YXJnZXQuX3YgPSBjcmVhdGVUZXh0Vk5vZGU7CiAgICB0YXJnZXQuX2UgPSBjcmVhdGVFbXB0eVZOb2RlOwogICAgdGFyZ2V0Ll91ID0gcmVzb2x2ZVNjb3BlZFNsb3RzOwogICAgdGFyZ2V0Ll9nID0gYmluZE9iamVjdExpc3RlbmVyczsKICAgIHRhcmdldC5fZCA9IGJpbmREeW5hbWljS2V5czsKICAgIHRhcmdldC5fcCA9IHByZXBlbmRNb2RpZmllcjsKICB9CgogIC8qICAqLwoKICBmdW5jdGlvbiBGdW5jdGlvbmFsUmVuZGVyQ29udGV4dCAoCiAgICBkYXRhLAogICAgcHJvcHMsCiAgICBjaGlsZHJlbiwKICAgIHBhcmVudCwKICAgIEN0b3IKICApIHsKICAgIHZhciB0aGlzJDEgPSB0aGlzOwoKICAgIHZhciBvcHRpb25zID0gQ3Rvci5vcHRpb25zOwogICAgLy8gZW5zdXJlIHRoZSBjcmVhdGVFbGVtZW50IGZ1bmN0aW9uIGluIGZ1bmN0aW9uYWwgY29tcG9uZW50cwogICAgLy8gZ2V0cyBhIHVuaXF1ZSBjb250ZXh0IC0gdGhpcyBpcyBuZWNlc3NhcnkgZm9yIGNvcnJlY3QgbmFtZWQgc2xvdCBjaGVjawogICAgdmFyIGNvbnRleHRWbTsKICAgIGlmIChoYXNPd24ocGFyZW50LCAnX3VpZCcpKSB7CiAgICAgIGNvbnRleHRWbSA9IE9iamVjdC5jcmVhdGUocGFyZW50KTsKICAgICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lCiAgICAgIGNvbnRleHRWbS5fb3JpZ2luYWwgPSBwYXJlbnQ7CiAgICB9IGVsc2UgewogICAgICAvLyB0aGUgY29udGV4dCB2bSBwYXNzZWQgaW4gaXMgYSBmdW5jdGlvbmFsIGNvbnRleHQgYXMgd2VsbC4KICAgICAgLy8gaW4gdGhpcyBjYXNlIHdlIHdhbnQgdG8gbWFrZSBzdXJlIHdlIGFyZSBhYmxlIHRvIGdldCBhIGhvbGQgdG8gdGhlCiAgICAgIC8vIHJlYWwgY29udGV4dCBpbnN0YW5jZS4KICAgICAgY29udGV4dFZtID0gcGFyZW50OwogICAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmUKICAgICAgcGFyZW50ID0gcGFyZW50Ll9vcmlnaW5hbDsKICAgIH0KICAgIHZhciBpc0NvbXBpbGVkID0gaXNUcnVlKG9wdGlvbnMuX2NvbXBpbGVkKTsKICAgIHZhciBuZWVkTm9ybWFsaXphdGlvbiA9ICFpc0NvbXBpbGVkOwoKICAgIHRoaXMuZGF0YSA9IGRhdGE7CiAgICB0aGlzLnByb3BzID0gcHJvcHM7CiAgICB0aGlzLmNoaWxkcmVuID0gY2hpbGRyZW47CiAgICB0aGlzLnBhcmVudCA9IHBhcmVudDsKICAgIHRoaXMubGlzdGVuZXJzID0gZGF0YS5vbiB8fCBlbXB0eU9iamVjdDsKICAgIHRoaXMuaW5qZWN0aW9ucyA9IHJlc29sdmVJbmplY3Qob3B0aW9ucy5pbmplY3QsIHBhcmVudCk7CiAgICB0aGlzLnNsb3RzID0gZnVuY3Rpb24gKCkgewogICAgICBpZiAoIXRoaXMkMS4kc2xvdHMpIHsKICAgICAgICBub3JtYWxpemVTY29wZWRTbG90cygKICAgICAgICAgIGRhdGEuc2NvcGVkU2xvdHMsCiAgICAgICAgICB0aGlzJDEuJHNsb3RzID0gcmVzb2x2ZVNsb3RzKGNoaWxkcmVuLCBwYXJlbnQpCiAgICAgICAgKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcyQxLiRzbG90cwogICAgfTsKCiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3Njb3BlZFNsb3RzJywgKHsKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQgKCkgewogICAgICAgIHJldHVybiBub3JtYWxpemVTY29wZWRTbG90cyhkYXRhLnNjb3BlZFNsb3RzLCB0aGlzLnNsb3RzKCkpCiAgICAgIH0KICAgIH0pKTsKCiAgICAvLyBzdXBwb3J0IGZvciBjb21waWxlZCBmdW5jdGlvbmFsIHRlbXBsYXRlCiAgICBpZiAoaXNDb21waWxlZCkgewogICAgICAvLyBleHBvc2luZyAkb3B0aW9ucyBmb3IgcmVuZGVyU3RhdGljKCkKICAgICAgdGhpcy4kb3B0aW9ucyA9IG9wdGlvbnM7CiAgICAgIC8vIHByZS1yZXNvbHZlIHNsb3RzIGZvciByZW5kZXJTbG90KCkKICAgICAgdGhpcy4kc2xvdHMgPSB0aGlzLnNsb3RzKCk7CiAgICAgIHRoaXMuJHNjb3BlZFNsb3RzID0gbm9ybWFsaXplU2NvcGVkU2xvdHMoZGF0YS5zY29wZWRTbG90cywgdGhpcy4kc2xvdHMpOwogICAgfQoKICAgIGlmIChvcHRpb25zLl9zY29wZUlkKSB7CiAgICAgIHRoaXMuX2MgPSBmdW5jdGlvbiAoYSwgYiwgYywgZCkgewogICAgICAgIHZhciB2bm9kZSA9IGNyZWF0ZUVsZW1lbnQoY29udGV4dFZtLCBhLCBiLCBjLCBkLCBuZWVkTm9ybWFsaXphdGlvbik7CiAgICAgICAgaWYgKHZub2RlICYmICFBcnJheS5pc0FycmF5KHZub2RlKSkgewogICAgICAgICAgdm5vZGUuZm5TY29wZUlkID0gb3B0aW9ucy5fc2NvcGVJZDsKICAgICAgICAgIHZub2RlLmZuQ29udGV4dCA9IHBhcmVudDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHZub2RlCiAgICAgIH07CiAgICB9IGVsc2UgewogICAgICB0aGlzLl9jID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQpIHsgcmV0dXJuIGNyZWF0ZUVsZW1lbnQoY29udGV4dFZtLCBhLCBiLCBjLCBkLCBuZWVkTm9ybWFsaXphdGlvbik7IH07CiAgICB9CiAgfQoKICBpbnN0YWxsUmVuZGVySGVscGVycyhGdW5jdGlvbmFsUmVuZGVyQ29udGV4dC5wcm90b3R5cGUpOwoKICBmdW5jdGlvbiBjcmVhdGVGdW5jdGlvbmFsQ29tcG9uZW50ICgKICAgIEN0b3IsCiAgICBwcm9wc0RhdGEsCiAgICBkYXRhLAogICAgY29udGV4dFZtLAogICAgY2hpbGRyZW4KICApIHsKICAgIHZhciBvcHRpb25zID0gQ3Rvci5vcHRpb25zOwogICAgdmFyIHByb3BzID0ge307CiAgICB2YXIgcHJvcE9wdGlvbnMgPSBvcHRpb25zLnByb3BzOwogICAgaWYgKGlzRGVmKHByb3BPcHRpb25zKSkgewogICAgICBmb3IgKHZhciBrZXkgaW4gcHJvcE9wdGlvbnMpIHsKICAgICAgICBwcm9wc1trZXldID0gdmFsaWRhdGVQcm9wKGtleSwgcHJvcE9wdGlvbnMsIHByb3BzRGF0YSB8fCBlbXB0eU9iamVjdCk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmIChpc0RlZihkYXRhLmF0dHJzKSkgeyBtZXJnZVByb3BzKHByb3BzLCBkYXRhLmF0dHJzKTsgfQogICAgICBpZiAoaXNEZWYoZGF0YS5wcm9wcykpIHsgbWVyZ2VQcm9wcyhwcm9wcywgZGF0YS5wcm9wcyk7IH0KICAgIH0KCiAgICB2YXIgcmVuZGVyQ29udGV4dCA9IG5ldyBGdW5jdGlvbmFsUmVuZGVyQ29udGV4dCgKICAgICAgZGF0YSwKICAgICAgcHJvcHMsCiAgICAgIGNoaWxkcmVuLAogICAgICBjb250ZXh0Vm0sCiAgICAgIEN0b3IKICAgICk7CgogICAgdmFyIHZub2RlID0gb3B0aW9ucy5yZW5kZXIuY2FsbChudWxsLCByZW5kZXJDb250ZXh0Ll9jLCByZW5kZXJDb250ZXh0KTsKCiAgICBpZiAodm5vZGUgaW5zdGFuY2VvZiBWTm9kZSkgewogICAgICByZXR1cm4gY2xvbmVBbmRNYXJrRnVuY3Rpb25hbFJlc3VsdCh2bm9kZSwgZGF0YSwgcmVuZGVyQ29udGV4dC5wYXJlbnQsIG9wdGlvbnMsIHJlbmRlckNvbnRleHQpCiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodm5vZGUpKSB7CiAgICAgIHZhciB2bm9kZXMgPSBub3JtYWxpemVDaGlsZHJlbih2bm9kZSkgfHwgW107CiAgICAgIHZhciByZXMgPSBuZXcgQXJyYXkodm5vZGVzLmxlbmd0aCk7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm5vZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgcmVzW2ldID0gY2xvbmVBbmRNYXJrRnVuY3Rpb25hbFJlc3VsdCh2bm9kZXNbaV0sIGRhdGEsIHJlbmRlckNvbnRleHQucGFyZW50LCBvcHRpb25zLCByZW5kZXJDb250ZXh0KTsKICAgICAgfQogICAgICByZXR1cm4gcmVzCiAgICB9CiAgfQoKICBmdW5jdGlvbiBjbG9uZUFuZE1hcmtGdW5jdGlvbmFsUmVzdWx0ICh2bm9kZSwgZGF0YSwgY29udGV4dFZtLCBvcHRpb25zLCByZW5kZXJDb250ZXh0KSB7CiAgICAvLyAjNzgxNyBjbG9uZSBub2RlIGJlZm9yZSBzZXR0aW5nIGZuQ29udGV4dCwgb3RoZXJ3aXNlIGlmIHRoZSBub2RlIGlzIHJldXNlZAogICAgLy8gKGUuZy4gaXQgd2FzIGZyb20gYSBjYWNoZWQgbm9ybWFsIHNsb3QpIHRoZSBmbkNvbnRleHQgY2F1c2VzIG5hbWVkIHNsb3RzCiAgICAvLyB0aGF0IHNob3VsZCBub3QgYmUgbWF0Y2hlZCB0byBtYXRjaC4KICAgIHZhciBjbG9uZSA9IGNsb25lVk5vZGUodm5vZGUpOwogICAgY2xvbmUuZm5Db250ZXh0ID0gY29udGV4dFZtOwogICAgY2xvbmUuZm5PcHRpb25zID0gb3B0aW9uczsKICAgIHsKICAgICAgKGNsb25lLmRldnRvb2xzTWV0YSA9IGNsb25lLmRldnRvb2xzTWV0YSB8fCB7fSkucmVuZGVyQ29udGV4dCA9IHJlbmRlckNvbnRleHQ7CiAgICB9CiAgICBpZiAoZGF0YS5zbG90KSB7CiAgICAgIChjbG9uZS5kYXRhIHx8IChjbG9uZS5kYXRhID0ge30pKS5zbG90ID0gZGF0YS5zbG90OwogICAgfQogICAgcmV0dXJuIGNsb25lCiAgfQoKICBmdW5jdGlvbiBtZXJnZVByb3BzICh0bywgZnJvbSkgewogICAgZm9yICh2YXIga2V5IGluIGZyb20pIHsKICAgICAgdG9bY2FtZWxpemUoa2V5KV0gPSBmcm9tW2tleV07CiAgICB9CiAgfQoKICAvKiAgKi8KCiAgLyogICovCgogIC8qICAqLwoKICAvKiAgKi8KCiAgLy8gaW5saW5lIGhvb2tzIHRvIGJlIGludm9rZWQgb24gY29tcG9uZW50IFZOb2RlcyBkdXJpbmcgcGF0Y2gKICB2YXIgY29tcG9uZW50Vk5vZGVIb29rcyA9IHsKICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQgKHZub2RlLCBoeWRyYXRpbmcpIHsKICAgICAgaWYgKAogICAgICAgIHZub2RlLmNvbXBvbmVudEluc3RhbmNlICYmCiAgICAgICAgIXZub2RlLmNvbXBvbmVudEluc3RhbmNlLl9pc0Rlc3Ryb3llZCAmJgogICAgICAgIHZub2RlLmRhdGEua2VlcEFsaXZlCiAgICAgICkgewogICAgICAgIC8vIGtlcHQtYWxpdmUgY29tcG9uZW50cywgdHJlYXQgYXMgYSBwYXRjaAogICAgICAgIHZhciBtb3VudGVkTm9kZSA9IHZub2RlOyAvLyB3b3JrIGFyb3VuZCBmbG93CiAgICAgICAgY29tcG9uZW50Vk5vZGVIb29rcy5wcmVwYXRjaChtb3VudGVkTm9kZSwgbW91bnRlZE5vZGUpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBjaGlsZCA9IHZub2RlLmNvbXBvbmVudEluc3RhbmNlID0gY3JlYXRlQ29tcG9uZW50SW5zdGFuY2VGb3JWbm9kZSgKICAgICAgICAgIHZub2RlLAogICAgICAgICAgYWN0aXZlSW5zdGFuY2UKICAgICAgICApOwogICAgICAgIGNoaWxkLiRtb3VudChoeWRyYXRpbmcgPyB2bm9kZS5lbG0gOiB1bmRlZmluZWQsIGh5ZHJhdGluZyk7CiAgICAgIH0KICAgIH0sCgogICAgcHJlcGF0Y2g6IGZ1bmN0aW9uIHByZXBhdGNoIChvbGRWbm9kZSwgdm5vZGUpIHsKICAgICAgdmFyIG9wdGlvbnMgPSB2bm9kZS5jb21wb25lbnRPcHRpb25zOwogICAgICB2YXIgY2hpbGQgPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSA9IG9sZFZub2RlLmNvbXBvbmVudEluc3RhbmNlOwogICAgICB1cGRhdGVDaGlsZENvbXBvbmVudCgKICAgICAgICBjaGlsZCwKICAgICAgICBvcHRpb25zLnByb3BzRGF0YSwgLy8gdXBkYXRlZCBwcm9wcwogICAgICAgIG9wdGlvbnMubGlzdGVuZXJzLCAvLyB1cGRhdGVkIGxpc3RlbmVycwogICAgICAgIHZub2RlLCAvLyBuZXcgcGFyZW50IHZub2RlCiAgICAgICAgb3B0aW9ucy5jaGlsZHJlbiAvLyBuZXcgY2hpbGRyZW4KICAgICAgKTsKICAgIH0sCgogICAgaW5zZXJ0OiBmdW5jdGlvbiBpbnNlcnQgKHZub2RlKSB7CiAgICAgIHZhciBjb250ZXh0ID0gdm5vZGUuY29udGV4dDsKICAgICAgdmFyIGNvbXBvbmVudEluc3RhbmNlID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2U7CiAgICAgIGlmICghY29tcG9uZW50SW5zdGFuY2UuX2lzTW91bnRlZCkgewogICAgICAgIGNvbXBvbmVudEluc3RhbmNlLl9pc01vdW50ZWQgPSB0cnVlOwogICAgICAgIGNhbGxIb29rKGNvbXBvbmVudEluc3RhbmNlLCAnbW91bnRlZCcpOwogICAgICB9CiAgICAgIGlmICh2bm9kZS5kYXRhLmtlZXBBbGl2ZSkgewogICAgICAgIGlmIChjb250ZXh0Ll9pc01vdW50ZWQpIHsKICAgICAgICAgIC8vIHZ1ZS1yb3V0ZXIjMTIxMgogICAgICAgICAgLy8gRHVyaW5nIHVwZGF0ZXMsIGEga2VwdC1hbGl2ZSBjb21wb25lbnQncyBjaGlsZCBjb21wb25lbnRzIG1heQogICAgICAgICAgLy8gY2hhbmdlLCBzbyBkaXJlY3RseSB3YWxraW5nIHRoZSB0cmVlIGhlcmUgbWF5IGNhbGwgYWN0aXZhdGVkIGhvb2tzCiAgICAgICAgICAvLyBvbiBpbmNvcnJlY3QgY2hpbGRyZW4uIEluc3RlYWQgd2UgcHVzaCB0aGVtIGludG8gYSBxdWV1ZSB3aGljaCB3aWxsCiAgICAgICAgICAvLyBiZSBwcm9jZXNzZWQgYWZ0ZXIgdGhlIHdob2xlIHBhdGNoIHByb2Nlc3MgZW5kZWQuCiAgICAgICAgICBxdWV1ZUFjdGl2YXRlZENvbXBvbmVudChjb21wb25lbnRJbnN0YW5jZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFjdGl2YXRlQ2hpbGRDb21wb25lbnQoY29tcG9uZW50SW5zdGFuY2UsIHRydWUgLyogZGlyZWN0ICovKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSAodm5vZGUpIHsKICAgICAgdmFyIGNvbXBvbmVudEluc3RhbmNlID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2U7CiAgICAgIGlmICghY29tcG9uZW50SW5zdGFuY2UuX2lzRGVzdHJveWVkKSB7CiAgICAgICAgaWYgKCF2bm9kZS5kYXRhLmtlZXBBbGl2ZSkgewogICAgICAgICAgY29tcG9uZW50SW5zdGFuY2UuJGRlc3Ryb3koKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGVhY3RpdmF0ZUNoaWxkQ29tcG9uZW50KGNvbXBvbmVudEluc3RhbmNlLCB0cnVlIC8qIGRpcmVjdCAqLyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgdmFyIGhvb2tzVG9NZXJnZSA9IE9iamVjdC5rZXlzKGNvbXBvbmVudFZOb2RlSG9va3MpOwoKICBmdW5jdGlvbiBjcmVhdGVDb21wb25lbnQgKAogICAgQ3RvciwKICAgIGRhdGEsCiAgICBjb250ZXh0LAogICAgY2hpbGRyZW4sCiAgICB0YWcKICApIHsKICAgIGlmIChpc1VuZGVmKEN0b3IpKSB7CiAgICAgIHJldHVybgogICAgfQoKICAgIHZhciBiYXNlQ3RvciA9IGNvbnRleHQuJG9wdGlvbnMuX2Jhc2U7CgogICAgLy8gcGxhaW4gb3B0aW9ucyBvYmplY3Q6IHR1cm4gaXQgaW50byBhIGNvbnN0cnVjdG9yCiAgICBpZiAoaXNPYmplY3QoQ3RvcikpIHsKICAgICAgQ3RvciA9IGJhc2VDdG9yLmV4dGVuZChDdG9yKTsKICAgIH0KCiAgICAvLyBpZiBhdCB0aGlzIHN0YWdlIGl0J3Mgbm90IGEgY29uc3RydWN0b3Igb3IgYW4gYXN5bmMgY29tcG9uZW50IGZhY3RvcnksCiAgICAvLyByZWplY3QuCiAgICBpZiAodHlwZW9mIEN0b3IgIT09ICdmdW5jdGlvbicpIHsKICAgICAgewogICAgICAgIHdhcm4oKCJJbnZhbGlkIENvbXBvbmVudCBkZWZpbml0aW9uOiAiICsgKFN0cmluZyhDdG9yKSkpLCBjb250ZXh0KTsKICAgICAgfQogICAgICByZXR1cm4KICAgIH0KCiAgICAvLyBhc3luYyBjb21wb25lbnQKICAgIHZhciBhc3luY0ZhY3Rvcnk7CiAgICBpZiAoaXNVbmRlZihDdG9yLmNpZCkpIHsKICAgICAgYXN5bmNGYWN0b3J5ID0gQ3RvcjsKICAgICAgQ3RvciA9IHJlc29sdmVBc3luY0NvbXBvbmVudChhc3luY0ZhY3RvcnksIGJhc2VDdG9yKTsKICAgICAgaWYgKEN0b3IgPT09IHVuZGVmaW5lZCkgewogICAgICAgIC8vIHJldHVybiBhIHBsYWNlaG9sZGVyIG5vZGUgZm9yIGFzeW5jIGNvbXBvbmVudCwgd2hpY2ggaXMgcmVuZGVyZWQKICAgICAgICAvLyBhcyBhIGNvbW1lbnQgbm9kZSBidXQgcHJlc2VydmVzIGFsbCB0aGUgcmF3IGluZm9ybWF0aW9uIGZvciB0aGUgbm9kZS4KICAgICAgICAvLyB0aGUgaW5mb3JtYXRpb24gd2lsbCBiZSB1c2VkIGZvciBhc3luYyBzZXJ2ZXItcmVuZGVyaW5nIGFuZCBoeWRyYXRpb24uCiAgICAgICAgcmV0dXJuIGNyZWF0ZUFzeW5jUGxhY2Vob2xkZXIoCiAgICAgICAgICBhc3luY0ZhY3RvcnksCiAgICAgICAgICBkYXRhLAogICAgICAgICAgY29udGV4dCwKICAgICAgICAgIGNoaWxkcmVuLAogICAgICAgICAgdGFnCiAgICAgICAgKQogICAgICB9CiAgICB9CgogICAgZGF0YSA9IGRhdGEgfHwge307CgogICAgLy8gcmVzb2x2ZSBjb25zdHJ1Y3RvciBvcHRpb25zIGluIGNhc2UgZ2xvYmFsIG1peGlucyBhcmUgYXBwbGllZCBhZnRlcgogICAgLy8gY29tcG9uZW50IGNvbnN0cnVjdG9yIGNyZWF0aW9uCiAgICByZXNvbHZlQ29uc3RydWN0b3JPcHRpb25zKEN0b3IpOwoKICAgIC8vIHRyYW5zZm9ybSBjb21wb25lbnQgdi1tb2RlbCBkYXRhIGludG8gcHJvcHMgJiBldmVudHMKICAgIGlmIChpc0RlZihkYXRhLm1vZGVsKSkgewogICAgICB0cmFuc2Zvcm1Nb2RlbChDdG9yLm9wdGlvbnMsIGRhdGEpOwogICAgfQoKICAgIC8vIGV4dHJhY3QgcHJvcHMKICAgIHZhciBwcm9wc0RhdGEgPSBleHRyYWN0UHJvcHNGcm9tVk5vZGVEYXRhKGRhdGEsIEN0b3IsIHRhZyk7CgogICAgLy8gZnVuY3Rpb25hbCBjb21wb25lbnQKICAgIGlmIChpc1RydWUoQ3Rvci5vcHRpb25zLmZ1bmN0aW9uYWwpKSB7CiAgICAgIHJldHVybiBjcmVhdGVGdW5jdGlvbmFsQ29tcG9uZW50KEN0b3IsIHByb3BzRGF0YSwgZGF0YSwgY29udGV4dCwgY2hpbGRyZW4pCiAgICB9CgogICAgLy8gZXh0cmFjdCBsaXN0ZW5lcnMsIHNpbmNlIHRoZXNlIG5lZWRzIHRvIGJlIHRyZWF0ZWQgYXMKICAgIC8vIGNoaWxkIGNvbXBvbmVudCBsaXN0ZW5lcnMgaW5zdGVhZCBvZiBET00gbGlzdGVuZXJzCiAgICB2YXIgbGlzdGVuZXJzID0gZGF0YS5vbjsKICAgIC8vIHJlcGxhY2Ugd2l0aCBsaXN0ZW5lcnMgd2l0aCAubmF0aXZlIG1vZGlmaWVyCiAgICAvLyBzbyBpdCBnZXRzIHByb2Nlc3NlZCBkdXJpbmcgcGFyZW50IGNvbXBvbmVudCBwYXRjaC4KICAgIGRhdGEub24gPSBkYXRhLm5hdGl2ZU9uOwoKICAgIGlmIChpc1RydWUoQ3Rvci5vcHRpb25zLmFic3RyYWN0KSkgewogICAgICAvLyBhYnN0cmFjdCBjb21wb25lbnRzIGRvIG5vdCBrZWVwIGFueXRoaW5nCiAgICAgIC8vIG90aGVyIHRoYW4gcHJvcHMgJiBsaXN0ZW5lcnMgJiBzbG90CgogICAgICAvLyB3b3JrIGFyb3VuZCBmbG93CiAgICAgIHZhciBzbG90ID0gZGF0YS5zbG90OwogICAgICBkYXRhID0ge307CiAgICAgIGlmIChzbG90KSB7CiAgICAgICAgZGF0YS5zbG90ID0gc2xvdDsKICAgICAgfQogICAgfQoKICAgIC8vIGluc3RhbGwgY29tcG9uZW50IG1hbmFnZW1lbnQgaG9va3Mgb250byB0aGUgcGxhY2Vob2xkZXIgbm9kZQogICAgaW5zdGFsbENvbXBvbmVudEhvb2tzKGRhdGEpOwoKICAgIC8vIHJldHVybiBhIHBsYWNlaG9sZGVyIHZub2RlCiAgICB2YXIgbmFtZSA9IEN0b3Iub3B0aW9ucy5uYW1lIHx8IHRhZzsKICAgIHZhciB2bm9kZSA9IG5ldyBWTm9kZSgKICAgICAgKCJ2dWUtY29tcG9uZW50LSIgKyAoQ3Rvci5jaWQpICsgKG5hbWUgPyAoIi0iICsgbmFtZSkgOiAnJykpLAogICAgICBkYXRhLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb250ZXh0LAogICAgICB7IEN0b3I6IEN0b3IsIHByb3BzRGF0YTogcHJvcHNEYXRhLCBsaXN0ZW5lcnM6IGxpc3RlbmVycywgdGFnOiB0YWcsIGNoaWxkcmVuOiBjaGlsZHJlbiB9LAogICAgICBhc3luY0ZhY3RvcnkKICAgICk7CgogICAgcmV0dXJuIHZub2RlCiAgfQoKICBmdW5jdGlvbiBjcmVhdGVDb21wb25lbnRJbnN0YW5jZUZvclZub2RlICgKICAgIHZub2RlLCAvLyB3ZSBrbm93IGl0J3MgTW91bnRlZENvbXBvbmVudFZOb2RlIGJ1dCBmbG93IGRvZXNuJ3QKICAgIHBhcmVudCAvLyBhY3RpdmVJbnN0YW5jZSBpbiBsaWZlY3ljbGUgc3RhdGUKICApIHsKICAgIHZhciBvcHRpb25zID0gewogICAgICBfaXNDb21wb25lbnQ6IHRydWUsCiAgICAgIF9wYXJlbnRWbm9kZTogdm5vZGUsCiAgICAgIHBhcmVudDogcGFyZW50CiAgICB9OwogICAgLy8gY2hlY2sgaW5saW5lLXRlbXBsYXRlIHJlbmRlciBmdW5jdGlvbnMKICAgIHZhciBpbmxpbmVUZW1wbGF0ZSA9IHZub2RlLmRhdGEuaW5saW5lVGVtcGxhdGU7CiAgICBpZiAoaXNEZWYoaW5saW5lVGVtcGxhdGUpKSB7CiAgICAgIG9wdGlvbnMucmVuZGVyID0gaW5saW5lVGVtcGxhdGUucmVuZGVyOwogICAgICBvcHRpb25zLnN0YXRpY1JlbmRlckZucyA9IGlubGluZVRlbXBsYXRlLnN0YXRpY1JlbmRlckZuczsKICAgIH0KICAgIHJldHVybiBuZXcgdm5vZGUuY29tcG9uZW50T3B0aW9ucy5DdG9yKG9wdGlvbnMpCiAgfQoKICBmdW5jdGlvbiBpbnN0YWxsQ29tcG9uZW50SG9va3MgKGRhdGEpIHsKICAgIHZhciBob29rcyA9IGRhdGEuaG9vayB8fCAoZGF0YS5ob29rID0ge30pOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBob29rc1RvTWVyZ2UubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIGtleSA9IGhvb2tzVG9NZXJnZVtpXTsKICAgICAgdmFyIGV4aXN0aW5nID0gaG9va3Nba2V5XTsKICAgICAgdmFyIHRvTWVyZ2UgPSBjb21wb25lbnRWTm9kZUhvb2tzW2tleV07CiAgICAgIGlmIChleGlzdGluZyAhPT0gdG9NZXJnZSAmJiAhKGV4aXN0aW5nICYmIGV4aXN0aW5nLl9tZXJnZWQpKSB7CiAgICAgICAgaG9va3Nba2V5XSA9IGV4aXN0aW5nID8gbWVyZ2VIb29rJDEodG9NZXJnZSwgZXhpc3RpbmcpIDogdG9NZXJnZTsKICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gbWVyZ2VIb29rJDEgKGYxLCBmMikgewogICAgdmFyIG1lcmdlZCA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgIC8vIGZsb3cgY29tcGxhaW5zIGFib3V0IGV4dHJhIGFyZ3Mgd2hpY2ggaXMgd2h5IHdlIHVzZSBhbnkKICAgICAgZjEoYSwgYik7CiAgICAgIGYyKGEsIGIpOwogICAgfTsKICAgIG1lcmdlZC5fbWVyZ2VkID0gdHJ1ZTsKICAgIHJldHVybiBtZXJnZWQKICB9CgogIC8vIHRyYW5zZm9ybSBjb21wb25lbnQgdi1tb2RlbCBpbmZvICh2YWx1ZSBhbmQgY2FsbGJhY2spIGludG8KICAvLyBwcm9wIGFuZCBldmVudCBoYW5kbGVyIHJlc3BlY3RpdmVseS4KICBmdW5jdGlvbiB0cmFuc2Zvcm1Nb2RlbCAob3B0aW9ucywgZGF0YSkgewogICAgdmFyIHByb3AgPSAob3B0aW9ucy5tb2RlbCAmJiBvcHRpb25zLm1vZGVsLnByb3ApIHx8ICd2YWx1ZSc7CiAgICB2YXIgZXZlbnQgPSAob3B0aW9ucy5tb2RlbCAmJiBvcHRpb25zLm1vZGVsLmV2ZW50KSB8fCAnaW5wdXQnCiAgICA7KGRhdGEuYXR0cnMgfHwgKGRhdGEuYXR0cnMgPSB7fSkpW3Byb3BdID0gZGF0YS5tb2RlbC52YWx1ZTsKICAgIHZhciBvbiA9IGRhdGEub24gfHwgKGRhdGEub24gPSB7fSk7CiAgICB2YXIgZXhpc3RpbmcgPSBvbltldmVudF07CiAgICB2YXIgY2FsbGJhY2sgPSBkYXRhLm1vZGVsLmNhbGxiYWNrOwogICAgaWYgKGlzRGVmKGV4aXN0aW5nKSkgewogICAgICBpZiAoCiAgICAgICAgQXJyYXkuaXNBcnJheShleGlzdGluZykKICAgICAgICAgID8gZXhpc3RpbmcuaW5kZXhPZihjYWxsYmFjaykgPT09IC0xCiAgICAgICAgICA6IGV4aXN0aW5nICE9PSBjYWxsYmFjawogICAgICApIHsKICAgICAgICBvbltldmVudF0gPSBbY2FsbGJhY2tdLmNvbmNhdChleGlzdGluZyk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIG9uW2V2ZW50XSA9IGNhbGxiYWNrOwogICAgfQogIH0KCiAgLyogICovCgogIHZhciBTSU1QTEVfTk9STUFMSVpFID0gMTsKICB2YXIgQUxXQVlTX05PUk1BTElaRSA9IDI7CgogIC8vIHdyYXBwZXIgZnVuY3Rpb24gZm9yIHByb3ZpZGluZyBhIG1vcmUgZmxleGlibGUgaW50ZXJmYWNlCiAgLy8gd2l0aG91dCBnZXR0aW5nIHllbGxlZCBhdCBieSBmbG93CiAgZnVuY3Rpb24gY3JlYXRlRWxlbWVudCAoCiAgICBjb250ZXh0LAogICAgdGFnLAogICAgZGF0YSwKICAgIGNoaWxkcmVuLAogICAgbm9ybWFsaXphdGlvblR5cGUsCiAgICBhbHdheXNOb3JtYWxpemUKICApIHsKICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpIHx8IGlzUHJpbWl0aXZlKGRhdGEpKSB7CiAgICAgIG5vcm1hbGl6YXRpb25UeXBlID0gY2hpbGRyZW47CiAgICAgIGNoaWxkcmVuID0gZGF0YTsKICAgICAgZGF0YSA9IHVuZGVmaW5lZDsKICAgIH0KICAgIGlmIChpc1RydWUoYWx3YXlzTm9ybWFsaXplKSkgewogICAgICBub3JtYWxpemF0aW9uVHlwZSA9IEFMV0FZU19OT1JNQUxJWkU7CiAgICB9CiAgICByZXR1cm4gX2NyZWF0ZUVsZW1lbnQoY29udGV4dCwgdGFnLCBkYXRhLCBjaGlsZHJlbiwgbm9ybWFsaXphdGlvblR5cGUpCiAgfQoKICBmdW5jdGlvbiBfY3JlYXRlRWxlbWVudCAoCiAgICBjb250ZXh0LAogICAgdGFnLAogICAgZGF0YSwKICAgIGNoaWxkcmVuLAogICAgbm9ybWFsaXphdGlvblR5cGUKICApIHsKICAgIGlmIChpc0RlZihkYXRhKSAmJiBpc0RlZigoZGF0YSkuX19vYl9fKSkgewogICAgICB3YXJuKAogICAgICAgICJBdm9pZCB1c2luZyBvYnNlcnZlZCBkYXRhIG9iamVjdCBhcyB2bm9kZSBkYXRhOiAiICsgKEpTT04uc3RyaW5naWZ5KGRhdGEpKSArICJcbiIgKwogICAgICAgICdBbHdheXMgY3JlYXRlIGZyZXNoIHZub2RlIGRhdGEgb2JqZWN0cyBpbiBlYWNoIHJlbmRlciEnLAogICAgICAgIGNvbnRleHQKICAgICAgKTsKICAgICAgcmV0dXJuIGNyZWF0ZUVtcHR5Vk5vZGUoKQogICAgfQogICAgLy8gb2JqZWN0IHN5bnRheCBpbiB2LWJpbmQKICAgIGlmIChpc0RlZihkYXRhKSAmJiBpc0RlZihkYXRhLmlzKSkgewogICAgICB0YWcgPSBkYXRhLmlzOwogICAgfQogICAgaWYgKCF0YWcpIHsKICAgICAgLy8gaW4gY2FzZSBvZiBjb21wb25lbnQgOmlzIHNldCB0byBmYWxzeSB2YWx1ZQogICAgICByZXR1cm4gY3JlYXRlRW1wdHlWTm9kZSgpCiAgICB9CiAgICAvLyB3YXJuIGFnYWluc3Qgbm9uLXByaW1pdGl2ZSBrZXkKICAgIGlmIChpc0RlZihkYXRhKSAmJiBpc0RlZihkYXRhLmtleSkgJiYgIWlzUHJpbWl0aXZlKGRhdGEua2V5KQogICAgKSB7CiAgICAgIHsKICAgICAgICB3YXJuKAogICAgICAgICAgJ0F2b2lkIHVzaW5nIG5vbi1wcmltaXRpdmUgdmFsdWUgYXMga2V5LCAnICsKICAgICAgICAgICd1c2Ugc3RyaW5nL251bWJlciB2YWx1ZSBpbnN0ZWFkLicsCiAgICAgICAgICBjb250ZXh0CiAgICAgICAgKTsKICAgICAgfQogICAgfQogICAgLy8gc3VwcG9ydCBzaW5nbGUgZnVuY3Rpb24gY2hpbGRyZW4gYXMgZGVmYXVsdCBzY29wZWQgc2xvdAogICAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pICYmCiAgICAgIHR5cGVvZiBjaGlsZHJlblswXSA9PT0gJ2Z1bmN0aW9uJwogICAgKSB7CiAgICAgIGRhdGEgPSBkYXRhIHx8IHt9OwogICAgICBkYXRhLnNjb3BlZFNsb3RzID0geyBkZWZhdWx0OiBjaGlsZHJlblswXSB9OwogICAgICBjaGlsZHJlbi5sZW5ndGggPSAwOwogICAgfQogICAgaWYgKG5vcm1hbGl6YXRpb25UeXBlID09PSBBTFdBWVNfTk9STUFMSVpFKSB7CiAgICAgIGNoaWxkcmVuID0gbm9ybWFsaXplQ2hpbGRyZW4oY2hpbGRyZW4pOwogICAgfSBlbHNlIGlmIChub3JtYWxpemF0aW9uVHlwZSA9PT0gU0lNUExFX05PUk1BTElaRSkgewogICAgICBjaGlsZHJlbiA9IHNpbXBsZU5vcm1hbGl6ZUNoaWxkcmVuKGNoaWxkcmVuKTsKICAgIH0KICAgIHZhciB2bm9kZSwgbnM7CiAgICBpZiAodHlwZW9mIHRhZyA9PT0gJ3N0cmluZycpIHsKICAgICAgdmFyIEN0b3I7CiAgICAgIG5zID0gKGNvbnRleHQuJHZub2RlICYmIGNvbnRleHQuJHZub2RlLm5zKSB8fCBjb25maWcuZ2V0VGFnTmFtZXNwYWNlKHRhZyk7CiAgICAgIGlmIChjb25maWcuaXNSZXNlcnZlZFRhZyh0YWcpKSB7CiAgICAgICAgLy8gcGxhdGZvcm0gYnVpbHQtaW4gZWxlbWVudHMKICAgICAgICBpZiAoaXNEZWYoZGF0YSkgJiYgaXNEZWYoZGF0YS5uYXRpdmVPbikpIHsKICAgICAgICAgIHdhcm4oCiAgICAgICAgICAgICgiVGhlIC5uYXRpdmUgbW9kaWZpZXIgZm9yIHYtb24gaXMgb25seSB2YWxpZCBvbiBjb21wb25lbnRzIGJ1dCBpdCB3YXMgdXNlZCBvbiA8IiArIHRhZyArICI+LiIpLAogICAgICAgICAgICBjb250ZXh0CiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICB2bm9kZSA9IG5ldyBWTm9kZSgKICAgICAgICAgIGNvbmZpZy5wYXJzZVBsYXRmb3JtVGFnTmFtZSh0YWcpLCBkYXRhLCBjaGlsZHJlbiwKICAgICAgICAgIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb250ZXh0CiAgICAgICAgKTsKICAgICAgfSBlbHNlIGlmICgoIWRhdGEgfHwgIWRhdGEucHJlKSAmJiBpc0RlZihDdG9yID0gcmVzb2x2ZUFzc2V0KGNvbnRleHQuJG9wdGlvbnMsICdjb21wb25lbnRzJywgdGFnKSkpIHsKICAgICAgICAvLyBjb21wb25lbnQKICAgICAgICB2bm9kZSA9IGNyZWF0ZUNvbXBvbmVudChDdG9yLCBkYXRhLCBjb250ZXh0LCBjaGlsZHJlbiwgdGFnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyB1bmtub3duIG9yIHVubGlzdGVkIG5hbWVzcGFjZWQgZWxlbWVudHMKICAgICAgICAvLyBjaGVjayBhdCBydW50aW1lIGJlY2F1c2UgaXQgbWF5IGdldCBhc3NpZ25lZCBhIG5hbWVzcGFjZSB3aGVuIGl0cwogICAgICAgIC8vIHBhcmVudCBub3JtYWxpemVzIGNoaWxkcmVuCiAgICAgICAgdm5vZGUgPSBuZXcgVk5vZGUoCiAgICAgICAgICB0YWcsIGRhdGEsIGNoaWxkcmVuLAogICAgICAgICAgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbnRleHQKICAgICAgICApOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICAvLyBkaXJlY3QgY29tcG9uZW50IG9wdGlvbnMgLyBjb25zdHJ1Y3RvcgogICAgICB2bm9kZSA9IGNyZWF0ZUNvbXBvbmVudCh0YWcsIGRhdGEsIGNvbnRleHQsIGNoaWxkcmVuKTsKICAgIH0KICAgIGlmIChBcnJheS5pc0FycmF5KHZub2RlKSkgewogICAgICByZXR1cm4gdm5vZGUKICAgIH0gZWxzZSBpZiAoaXNEZWYodm5vZGUpKSB7CiAgICAgIGlmIChpc0RlZihucykpIHsgYXBwbHlOUyh2bm9kZSwgbnMpOyB9CiAgICAgIGlmIChpc0RlZihkYXRhKSkgeyByZWdpc3RlckRlZXBCaW5kaW5ncyhkYXRhKTsgfQogICAgICByZXR1cm4gdm5vZGUKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBjcmVhdGVFbXB0eVZOb2RlKCkKICAgIH0KICB9CgogIGZ1bmN0aW9uIGFwcGx5TlMgKHZub2RlLCBucywgZm9yY2UpIHsKICAgIHZub2RlLm5zID0gbnM7CiAgICBpZiAodm5vZGUudGFnID09PSAnZm9yZWlnbk9iamVjdCcpIHsKICAgICAgLy8gdXNlIGRlZmF1bHQgbmFtZXNwYWNlIGluc2lkZSBmb3JlaWduT2JqZWN0CiAgICAgIG5zID0gdW5kZWZpbmVkOwogICAgICBmb3JjZSA9IHRydWU7CiAgICB9CiAgICBpZiAoaXNEZWYodm5vZGUuY2hpbGRyZW4pKSB7CiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gdm5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgdmFyIGNoaWxkID0gdm5vZGUuY2hpbGRyZW5baV07CiAgICAgICAgaWYgKGlzRGVmKGNoaWxkLnRhZykgJiYgKAogICAgICAgICAgaXNVbmRlZihjaGlsZC5ucykgfHwgKGlzVHJ1ZShmb3JjZSkgJiYgY2hpbGQudGFnICE9PSAnc3ZnJykpKSB7CiAgICAgICAgICBhcHBseU5TKGNoaWxkLCBucywgZm9yY2UpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgLy8gcmVmICM1MzE4CiAgLy8gbmVjZXNzYXJ5IHRvIGVuc3VyZSBwYXJlbnQgcmUtcmVuZGVyIHdoZW4gZGVlcCBiaW5kaW5ncyBsaWtlIDpzdHlsZSBhbmQKICAvLyA6Y2xhc3MgYXJlIHVzZWQgb24gc2xvdCBub2RlcwogIGZ1bmN0aW9uIHJlZ2lzdGVyRGVlcEJpbmRpbmdzIChkYXRhKSB7CiAgICBpZiAoaXNPYmplY3QoZGF0YS5zdHlsZSkpIHsKICAgICAgdHJhdmVyc2UoZGF0YS5zdHlsZSk7CiAgICB9CiAgICBpZiAoaXNPYmplY3QoZGF0YS5jbGFzcykpIHsKICAgICAgdHJhdmVyc2UoZGF0YS5jbGFzcyk7CiAgICB9CiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gaW5pdFJlbmRlciAodm0pIHsKICAgIHZtLl92bm9kZSA9IG51bGw7IC8vIHRoZSByb290IG9mIHRoZSBjaGlsZCB0cmVlCiAgICB2bS5fc3RhdGljVHJlZXMgPSBudWxsOyAvLyB2LW9uY2UgY2FjaGVkIHRyZWVzCiAgICB2YXIgb3B0aW9ucyA9IHZtLiRvcHRpb25zOwogICAgdmFyIHBhcmVudFZub2RlID0gdm0uJHZub2RlID0gb3B0aW9ucy5fcGFyZW50Vm5vZGU7IC8vIHRoZSBwbGFjZWhvbGRlciBub2RlIGluIHBhcmVudCB0cmVlCiAgICB2YXIgcmVuZGVyQ29udGV4dCA9IHBhcmVudFZub2RlICYmIHBhcmVudFZub2RlLmNvbnRleHQ7CiAgICB2bS4kc2xvdHMgPSByZXNvbHZlU2xvdHMob3B0aW9ucy5fcmVuZGVyQ2hpbGRyZW4sIHJlbmRlckNvbnRleHQpOwogICAgdm0uJHNjb3BlZFNsb3RzID0gZW1wdHlPYmplY3Q7CiAgICAvLyBiaW5kIHRoZSBjcmVhdGVFbGVtZW50IGZuIHRvIHRoaXMgaW5zdGFuY2UKICAgIC8vIHNvIHRoYXQgd2UgZ2V0IHByb3BlciByZW5kZXIgY29udGV4dCBpbnNpZGUgaXQuCiAgICAvLyBhcmdzIG9yZGVyOiB0YWcsIGRhdGEsIGNoaWxkcmVuLCBub3JtYWxpemF0aW9uVHlwZSwgYWx3YXlzTm9ybWFsaXplCiAgICAvLyBpbnRlcm5hbCB2ZXJzaW9uIGlzIHVzZWQgYnkgcmVuZGVyIGZ1bmN0aW9ucyBjb21waWxlZCBmcm9tIHRlbXBsYXRlcwogICAgdm0uX2MgPSBmdW5jdGlvbiAoYSwgYiwgYywgZCkgeyByZXR1cm4gY3JlYXRlRWxlbWVudCh2bSwgYSwgYiwgYywgZCwgZmFsc2UpOyB9OwogICAgLy8gbm9ybWFsaXphdGlvbiBpcyBhbHdheXMgYXBwbGllZCBmb3IgdGhlIHB1YmxpYyB2ZXJzaW9uLCB1c2VkIGluCiAgICAvLyB1c2VyLXdyaXR0ZW4gcmVuZGVyIGZ1bmN0aW9ucy4KICAgIHZtLiRjcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQpIHsgcmV0dXJuIGNyZWF0ZUVsZW1lbnQodm0sIGEsIGIsIGMsIGQsIHRydWUpOyB9OwoKICAgIC8vICRhdHRycyAmICRsaXN0ZW5lcnMgYXJlIGV4cG9zZWQgZm9yIGVhc2llciBIT0MgY3JlYXRpb24uCiAgICAvLyB0aGV5IG5lZWQgdG8gYmUgcmVhY3RpdmUgc28gdGhhdCBIT0NzIHVzaW5nIHRoZW0gYXJlIGFsd2F5cyB1cGRhdGVkCiAgICB2YXIgcGFyZW50RGF0YSA9IHBhcmVudFZub2RlICYmIHBhcmVudFZub2RlLmRhdGE7CgogICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi8KICAgIHsKICAgICAgZGVmaW5lUmVhY3RpdmUkJDEodm0sICckYXR0cnMnLCBwYXJlbnREYXRhICYmIHBhcmVudERhdGEuYXR0cnMgfHwgZW1wdHlPYmplY3QsIGZ1bmN0aW9uICgpIHsKICAgICAgICAhaXNVcGRhdGluZ0NoaWxkQ29tcG9uZW50ICYmIHdhcm4oIiRhdHRycyBpcyByZWFkb25seS4iLCB2bSk7CiAgICAgIH0sIHRydWUpOwogICAgICBkZWZpbmVSZWFjdGl2ZSQkMSh2bSwgJyRsaXN0ZW5lcnMnLCBvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnMgfHwgZW1wdHlPYmplY3QsIGZ1bmN0aW9uICgpIHsKICAgICAgICAhaXNVcGRhdGluZ0NoaWxkQ29tcG9uZW50ICYmIHdhcm4oIiRsaXN0ZW5lcnMgaXMgcmVhZG9ubHkuIiwgdm0pOwogICAgICB9LCB0cnVlKTsKICAgIH0KICB9CgogIHZhciBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UgPSBudWxsOwoKICBmdW5jdGlvbiByZW5kZXJNaXhpbiAoVnVlKSB7CiAgICAvLyBpbnN0YWxsIHJ1bnRpbWUgY29udmVuaWVuY2UgaGVscGVycwogICAgaW5zdGFsbFJlbmRlckhlbHBlcnMoVnVlLnByb3RvdHlwZSk7CgogICAgVnVlLnByb3RvdHlwZS4kbmV4dFRpY2sgPSBmdW5jdGlvbiAoZm4pIHsKICAgICAgcmV0dXJuIG5leHRUaWNrKGZuLCB0aGlzKQogICAgfTsKCiAgICBWdWUucHJvdG90eXBlLl9yZW5kZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIHZhciByZWYgPSB2bS4kb3B0aW9uczsKICAgICAgdmFyIHJlbmRlciA9IHJlZi5yZW5kZXI7CiAgICAgIHZhciBfcGFyZW50Vm5vZGUgPSByZWYuX3BhcmVudFZub2RlOwoKICAgICAgaWYgKF9wYXJlbnRWbm9kZSkgewogICAgICAgIHZtLiRzY29wZWRTbG90cyA9IG5vcm1hbGl6ZVNjb3BlZFNsb3RzKAogICAgICAgICAgX3BhcmVudFZub2RlLmRhdGEuc2NvcGVkU2xvdHMsCiAgICAgICAgICB2bS4kc2xvdHMsCiAgICAgICAgICB2bS4kc2NvcGVkU2xvdHMKICAgICAgICApOwogICAgICB9CgogICAgICAvLyBzZXQgcGFyZW50IHZub2RlLiB0aGlzIGFsbG93cyByZW5kZXIgZnVuY3Rpb25zIHRvIGhhdmUgYWNjZXNzCiAgICAgIC8vIHRvIHRoZSBkYXRhIG9uIHRoZSBwbGFjZWhvbGRlciBub2RlLgogICAgICB2bS4kdm5vZGUgPSBfcGFyZW50Vm5vZGU7CiAgICAgIC8vIHJlbmRlciBzZWxmCiAgICAgIHZhciB2bm9kZTsKICAgICAgdHJ5IHsKICAgICAgICAvLyBUaGVyZSdzIG5vIG5lZWQgdG8gbWFpbnRhaW4gYSBzdGFjayBiZWNhdXNlIGFsbCByZW5kZXIgZm5zIGFyZSBjYWxsZWQKICAgICAgICAvLyBzZXBhcmF0ZWx5IGZyb20gb25lIGFub3RoZXIuIE5lc3RlZCBjb21wb25lbnQncyByZW5kZXIgZm5zIGFyZSBjYWxsZWQKICAgICAgICAvLyB3aGVuIHBhcmVudCBjb21wb25lbnQgaXMgcGF0Y2hlZC4KICAgICAgICBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UgPSB2bTsKICAgICAgICB2bm9kZSA9IHJlbmRlci5jYWxsKHZtLl9yZW5kZXJQcm94eSwgdm0uJGNyZWF0ZUVsZW1lbnQpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgaGFuZGxlRXJyb3IoZSwgdm0sICJyZW5kZXIiKTsKICAgICAgICAvLyByZXR1cm4gZXJyb3IgcmVuZGVyIHJlc3VsdCwKICAgICAgICAvLyBvciBwcmV2aW91cyB2bm9kZSB0byBwcmV2ZW50IHJlbmRlciBlcnJvciBjYXVzaW5nIGJsYW5rIGNvbXBvbmVudAogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovCiAgICAgICAgaWYgKHZtLiRvcHRpb25zLnJlbmRlckVycm9yKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICB2bm9kZSA9IHZtLiRvcHRpb25zLnJlbmRlckVycm9yLmNhbGwodm0uX3JlbmRlclByb3h5LCB2bS4kY3JlYXRlRWxlbWVudCwgZSk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIGhhbmRsZUVycm9yKGUsIHZtLCAicmVuZGVyRXJyb3IiKTsKICAgICAgICAgICAgdm5vZGUgPSB2bS5fdm5vZGU7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZub2RlID0gdm0uX3Zub2RlOwogICAgICAgIH0KICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UgPSBudWxsOwogICAgICB9CiAgICAgIC8vIGlmIHRoZSByZXR1cm5lZCBhcnJheSBjb250YWlucyBvbmx5IGEgc2luZ2xlIG5vZGUsIGFsbG93IGl0CiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZub2RlKSAmJiB2bm9kZS5sZW5ndGggPT09IDEpIHsKICAgICAgICB2bm9kZSA9IHZub2RlWzBdOwogICAgICB9CiAgICAgIC8vIHJldHVybiBlbXB0eSB2bm9kZSBpbiBjYXNlIHRoZSByZW5kZXIgZnVuY3Rpb24gZXJyb3JlZCBvdXQKICAgICAgaWYgKCEodm5vZGUgaW5zdGFuY2VvZiBWTm9kZSkpIHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2bm9kZSkpIHsKICAgICAgICAgIHdhcm4oCiAgICAgICAgICAgICdNdWx0aXBsZSByb290IG5vZGVzIHJldHVybmVkIGZyb20gcmVuZGVyIGZ1bmN0aW9uLiBSZW5kZXIgZnVuY3Rpb24gJyArCiAgICAgICAgICAgICdzaG91bGQgcmV0dXJuIGEgc2luZ2xlIHJvb3Qgbm9kZS4nLAogICAgICAgICAgICB2bQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgdm5vZGUgPSBjcmVhdGVFbXB0eVZOb2RlKCk7CiAgICAgIH0KICAgICAgLy8gc2V0IHBhcmVudAogICAgICB2bm9kZS5wYXJlbnQgPSBfcGFyZW50Vm5vZGU7CiAgICAgIHJldHVybiB2bm9kZQogICAgfTsKICB9CgogIC8qICAqLwoKICBmdW5jdGlvbiBlbnN1cmVDdG9yIChjb21wLCBiYXNlKSB7CiAgICBpZiAoCiAgICAgIGNvbXAuX19lc01vZHVsZSB8fAogICAgICAoaGFzU3ltYm9sICYmIGNvbXBbU3ltYm9sLnRvU3RyaW5nVGFnXSA9PT0gJ01vZHVsZScpCiAgICApIHsKICAgICAgY29tcCA9IGNvbXAuZGVmYXVsdDsKICAgIH0KICAgIHJldHVybiBpc09iamVjdChjb21wKQogICAgICA/IGJhc2UuZXh0ZW5kKGNvbXApCiAgICAgIDogY29tcAogIH0KCiAgZnVuY3Rpb24gY3JlYXRlQXN5bmNQbGFjZWhvbGRlciAoCiAgICBmYWN0b3J5LAogICAgZGF0YSwKICAgIGNvbnRleHQsCiAgICBjaGlsZHJlbiwKICAgIHRhZwogICkgewogICAgdmFyIG5vZGUgPSBjcmVhdGVFbXB0eVZOb2RlKCk7CiAgICBub2RlLmFzeW5jRmFjdG9yeSA9IGZhY3Rvcnk7CiAgICBub2RlLmFzeW5jTWV0YSA9IHsgZGF0YTogZGF0YSwgY29udGV4dDogY29udGV4dCwgY2hpbGRyZW46IGNoaWxkcmVuLCB0YWc6IHRhZyB9OwogICAgcmV0dXJuIG5vZGUKICB9CgogIGZ1bmN0aW9uIHJlc29sdmVBc3luY0NvbXBvbmVudCAoCiAgICBmYWN0b3J5LAogICAgYmFzZUN0b3IKICApIHsKICAgIGlmIChpc1RydWUoZmFjdG9yeS5lcnJvcikgJiYgaXNEZWYoZmFjdG9yeS5lcnJvckNvbXApKSB7CiAgICAgIHJldHVybiBmYWN0b3J5LmVycm9yQ29tcAogICAgfQoKICAgIGlmIChpc0RlZihmYWN0b3J5LnJlc29sdmVkKSkgewogICAgICByZXR1cm4gZmFjdG9yeS5yZXNvbHZlZAogICAgfQoKICAgIHZhciBvd25lciA9IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZTsKICAgIGlmIChvd25lciAmJiBpc0RlZihmYWN0b3J5Lm93bmVycykgJiYgZmFjdG9yeS5vd25lcnMuaW5kZXhPZihvd25lcikgPT09IC0xKSB7CiAgICAgIC8vIGFscmVhZHkgcGVuZGluZwogICAgICBmYWN0b3J5Lm93bmVycy5wdXNoKG93bmVyKTsKICAgIH0KCiAgICBpZiAoaXNUcnVlKGZhY3RvcnkubG9hZGluZykgJiYgaXNEZWYoZmFjdG9yeS5sb2FkaW5nQ29tcCkpIHsKICAgICAgcmV0dXJuIGZhY3RvcnkubG9hZGluZ0NvbXAKICAgIH0KCiAgICBpZiAob3duZXIgJiYgIWlzRGVmKGZhY3Rvcnkub3duZXJzKSkgewogICAgICB2YXIgb3duZXJzID0gZmFjdG9yeS5vd25lcnMgPSBbb3duZXJdOwogICAgICB2YXIgc3luYyA9IHRydWU7CiAgICAgIHZhciB0aW1lckxvYWRpbmcgPSBudWxsOwogICAgICB2YXIgdGltZXJUaW1lb3V0ID0gbnVsbAoKICAgICAgOyhvd25lcikuJG9uKCdob29rOmRlc3Ryb3llZCcsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlbW92ZShvd25lcnMsIG93bmVyKTsgfSk7CgogICAgICB2YXIgZm9yY2VSZW5kZXIgPSBmdW5jdGlvbiAocmVuZGVyQ29tcGxldGVkKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBvd25lcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgICAob3duZXJzW2ldKS4kZm9yY2VVcGRhdGUoKTsKICAgICAgICB9CgogICAgICAgIGlmIChyZW5kZXJDb21wbGV0ZWQpIHsKICAgICAgICAgIG93bmVycy5sZW5ndGggPSAwOwogICAgICAgICAgaWYgKHRpbWVyTG9hZGluZyAhPT0gbnVsbCkgewogICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXJMb2FkaW5nKTsKICAgICAgICAgICAgdGltZXJMb2FkaW5nID0gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0aW1lclRpbWVvdXQgIT09IG51bGwpIHsKICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyVGltZW91dCk7CiAgICAgICAgICAgIHRpbWVyVGltZW91dCA9IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwoKICAgICAgdmFyIHJlc29sdmUgPSBvbmNlKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyBjYWNoZSByZXNvbHZlZAogICAgICAgIGZhY3RvcnkucmVzb2x2ZWQgPSBlbnN1cmVDdG9yKHJlcywgYmFzZUN0b3IpOwogICAgICAgIC8vIGludm9rZSBjYWxsYmFja3Mgb25seSBpZiB0aGlzIGlzIG5vdCBhIHN5bmNocm9ub3VzIHJlc29sdmUKICAgICAgICAvLyAoYXN5bmMgcmVzb2x2ZXMgYXJlIHNoaW1tZWQgYXMgc3luY2hyb25vdXMgZHVyaW5nIFNTUikKICAgICAgICBpZiAoIXN5bmMpIHsKICAgICAgICAgIGZvcmNlUmVuZGVyKHRydWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBvd25lcnMubGVuZ3RoID0gMDsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgdmFyIHJlamVjdCA9IG9uY2UoZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgIHdhcm4oCiAgICAgICAgICAiRmFpbGVkIHRvIHJlc29sdmUgYXN5bmMgY29tcG9uZW50OiAiICsgKFN0cmluZyhmYWN0b3J5KSkgKwogICAgICAgICAgKHJlYXNvbiA/ICgiXG5SZWFzb246ICIgKyByZWFzb24pIDogJycpCiAgICAgICAgKTsKICAgICAgICBpZiAoaXNEZWYoZmFjdG9yeS5lcnJvckNvbXApKSB7CiAgICAgICAgICBmYWN0b3J5LmVycm9yID0gdHJ1ZTsKICAgICAgICAgIGZvcmNlUmVuZGVyKHRydWUpOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICB2YXIgcmVzID0gZmFjdG9yeShyZXNvbHZlLCByZWplY3QpOwoKICAgICAgaWYgKGlzT2JqZWN0KHJlcykpIHsKICAgICAgICBpZiAoaXNQcm9taXNlKHJlcykpIHsKICAgICAgICAgIC8vICgpID0+IFByb21pc2UKICAgICAgICAgIGlmIChpc1VuZGVmKGZhY3RvcnkucmVzb2x2ZWQpKSB7CiAgICAgICAgICAgIHJlcy50aGVuKHJlc29sdmUsIHJlamVjdCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChpc1Byb21pc2UocmVzLmNvbXBvbmVudCkpIHsKICAgICAgICAgIHJlcy5jb21wb25lbnQudGhlbihyZXNvbHZlLCByZWplY3QpOwoKICAgICAgICAgIGlmIChpc0RlZihyZXMuZXJyb3IpKSB7CiAgICAgICAgICAgIGZhY3RvcnkuZXJyb3JDb21wID0gZW5zdXJlQ3RvcihyZXMuZXJyb3IsIGJhc2VDdG9yKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoaXNEZWYocmVzLmxvYWRpbmcpKSB7CiAgICAgICAgICAgIGZhY3RvcnkubG9hZGluZ0NvbXAgPSBlbnN1cmVDdG9yKHJlcy5sb2FkaW5nLCBiYXNlQ3Rvcik7CiAgICAgICAgICAgIGlmIChyZXMuZGVsYXkgPT09IDApIHsKICAgICAgICAgICAgICBmYWN0b3J5LmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRpbWVyTG9hZGluZyA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdGltZXJMb2FkaW5nID0gbnVsbDsKICAgICAgICAgICAgICAgIGlmIChpc1VuZGVmKGZhY3RvcnkucmVzb2x2ZWQpICYmIGlzVW5kZWYoZmFjdG9yeS5lcnJvcikpIHsKICAgICAgICAgICAgICAgICAgZmFjdG9yeS5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgZm9yY2VSZW5kZXIoZmFsc2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIHJlcy5kZWxheSB8fCAyMDApOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGlzRGVmKHJlcy50aW1lb3V0KSkgewogICAgICAgICAgICB0aW1lclRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB0aW1lclRpbWVvdXQgPSBudWxsOwogICAgICAgICAgICAgIGlmIChpc1VuZGVmKGZhY3RvcnkucmVzb2x2ZWQpKSB7CiAgICAgICAgICAgICAgICByZWplY3QoCiAgICAgICAgICAgICAgICAgICJ0aW1lb3V0ICgiICsgKHJlcy50aW1lb3V0KSArICJtcykiCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgcmVzLnRpbWVvdXQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgc3luYyA9IGZhbHNlOwogICAgICAvLyByZXR1cm4gaW4gY2FzZSByZXNvbHZlZCBzeW5jaHJvbm91c2x5CiAgICAgIHJldHVybiBmYWN0b3J5LmxvYWRpbmcKICAgICAgICA/IGZhY3RvcnkubG9hZGluZ0NvbXAKICAgICAgICA6IGZhY3RvcnkucmVzb2x2ZWQKICAgIH0KICB9CgogIC8qICAqLwoKICBmdW5jdGlvbiBpc0FzeW5jUGxhY2Vob2xkZXIgKG5vZGUpIHsKICAgIHJldHVybiBub2RlLmlzQ29tbWVudCAmJiBub2RlLmFzeW5jRmFjdG9yeQogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIGdldEZpcnN0Q29tcG9uZW50Q2hpbGQgKGNoaWxkcmVuKSB7CiAgICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZHJlbikpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBjID0gY2hpbGRyZW5baV07CiAgICAgICAgaWYgKGlzRGVmKGMpICYmIChpc0RlZihjLmNvbXBvbmVudE9wdGlvbnMpIHx8IGlzQXN5bmNQbGFjZWhvbGRlcihjKSkpIHsKICAgICAgICAgIHJldHVybiBjCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICAvKiAgKi8KCiAgLyogICovCgogIGZ1bmN0aW9uIGluaXRFdmVudHMgKHZtKSB7CiAgICB2bS5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgIHZtLl9oYXNIb29rRXZlbnQgPSBmYWxzZTsKICAgIC8vIGluaXQgcGFyZW50IGF0dGFjaGVkIGV2ZW50cwogICAgdmFyIGxpc3RlbmVycyA9IHZtLiRvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnM7CiAgICBpZiAobGlzdGVuZXJzKSB7CiAgICAgIHVwZGF0ZUNvbXBvbmVudExpc3RlbmVycyh2bSwgbGlzdGVuZXJzKTsKICAgIH0KICB9CgogIHZhciB0YXJnZXQ7CgogIGZ1bmN0aW9uIGFkZCAoZXZlbnQsIGZuKSB7CiAgICB0YXJnZXQuJG9uKGV2ZW50LCBmbik7CiAgfQoKICBmdW5jdGlvbiByZW1vdmUkMSAoZXZlbnQsIGZuKSB7CiAgICB0YXJnZXQuJG9mZihldmVudCwgZm4pOwogIH0KCiAgZnVuY3Rpb24gY3JlYXRlT25jZUhhbmRsZXIgKGV2ZW50LCBmbikgewogICAgdmFyIF90YXJnZXQgPSB0YXJnZXQ7CiAgICByZXR1cm4gZnVuY3Rpb24gb25jZUhhbmRsZXIgKCkgewogICAgICB2YXIgcmVzID0gZm4uYXBwbHkobnVsbCwgYXJndW1lbnRzKTsKICAgICAgaWYgKHJlcyAhPT0gbnVsbCkgewogICAgICAgIF90YXJnZXQuJG9mZihldmVudCwgb25jZUhhbmRsZXIpOwogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiB1cGRhdGVDb21wb25lbnRMaXN0ZW5lcnMgKAogICAgdm0sCiAgICBsaXN0ZW5lcnMsCiAgICBvbGRMaXN0ZW5lcnMKICApIHsKICAgIHRhcmdldCA9IHZtOwogICAgdXBkYXRlTGlzdGVuZXJzKGxpc3RlbmVycywgb2xkTGlzdGVuZXJzIHx8IHt9LCBhZGQsIHJlbW92ZSQxLCBjcmVhdGVPbmNlSGFuZGxlciwgdm0pOwogICAgdGFyZ2V0ID0gdW5kZWZpbmVkOwogIH0KCiAgZnVuY3Rpb24gZXZlbnRzTWl4aW4gKFZ1ZSkgewogICAgdmFyIGhvb2tSRSA9IC9eaG9vazovOwogICAgVnVlLnByb3RvdHlwZS4kb24gPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KGV2ZW50KSkgewogICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gZXZlbnQubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgICB2bS4kb24oZXZlbnRbaV0sIGZuKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgKHZtLl9ldmVudHNbZXZlbnRdIHx8ICh2bS5fZXZlbnRzW2V2ZW50XSA9IFtdKSkucHVzaChmbik7CiAgICAgICAgLy8gb3B0aW1pemUgaG9vazpldmVudCBjb3N0IGJ5IHVzaW5nIGEgYm9vbGVhbiBmbGFnIG1hcmtlZCBhdCByZWdpc3RyYXRpb24KICAgICAgICAvLyBpbnN0ZWFkIG9mIGEgaGFzaCBsb29rdXAKICAgICAgICBpZiAoaG9va1JFLnRlc3QoZXZlbnQpKSB7CiAgICAgICAgICB2bS5faGFzSG9va0V2ZW50ID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHZtCiAgICB9OwoKICAgIFZ1ZS5wcm90b3R5cGUuJG9uY2UgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIGZ1bmN0aW9uIG9uICgpIHsKICAgICAgICB2bS4kb2ZmKGV2ZW50LCBvbik7CiAgICAgICAgZm4uYXBwbHkodm0sIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgb24uZm4gPSBmbjsKICAgICAgdm0uJG9uKGV2ZW50LCBvbik7CiAgICAgIHJldHVybiB2bQogICAgfTsKCiAgICBWdWUucHJvdG90eXBlLiRvZmYgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIC8vIGFsbAogICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHsKICAgICAgICB2bS5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgICByZXR1cm4gdm0KICAgICAgfQogICAgICAvLyBhcnJheSBvZiBldmVudHMKICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZXZlbnQpKSB7CiAgICAgICAgZm9yICh2YXIgaSQxID0gMCwgbCA9IGV2ZW50Lmxlbmd0aDsgaSQxIDwgbDsgaSQxKyspIHsKICAgICAgICAgIHZtLiRvZmYoZXZlbnRbaSQxXSwgZm4pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdm0KICAgICAgfQogICAgICAvLyBzcGVjaWZpYyBldmVudAogICAgICB2YXIgY2JzID0gdm0uX2V2ZW50c1tldmVudF07CiAgICAgIGlmICghY2JzKSB7CiAgICAgICAgcmV0dXJuIHZtCiAgICAgIH0KICAgICAgaWYgKCFmbikgewogICAgICAgIHZtLl9ldmVudHNbZXZlbnRdID0gbnVsbDsKICAgICAgICByZXR1cm4gdm0KICAgICAgfQogICAgICAvLyBzcGVjaWZpYyBoYW5kbGVyCiAgICAgIHZhciBjYjsKICAgICAgdmFyIGkgPSBjYnMubGVuZ3RoOwogICAgICB3aGlsZSAoaS0tKSB7CiAgICAgICAgY2IgPSBjYnNbaV07CiAgICAgICAgaWYgKGNiID09PSBmbiB8fCBjYi5mbiA9PT0gZm4pIHsKICAgICAgICAgIGNicy5zcGxpY2UoaSwgMSk7CiAgICAgICAgICBicmVhawogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdm0KICAgIH07CgogICAgVnVlLnByb3RvdHlwZS4kZW1pdCA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICB7CiAgICAgICAgdmFyIGxvd2VyQ2FzZUV2ZW50ID0gZXZlbnQudG9Mb3dlckNhc2UoKTsKICAgICAgICBpZiAobG93ZXJDYXNlRXZlbnQgIT09IGV2ZW50ICYmIHZtLl9ldmVudHNbbG93ZXJDYXNlRXZlbnRdKSB7CiAgICAgICAgICB0aXAoCiAgICAgICAgICAgICJFdmVudCBcIiIgKyBsb3dlckNhc2VFdmVudCArICJcIiBpcyBlbWl0dGVkIGluIGNvbXBvbmVudCAiICsKICAgICAgICAgICAgKGZvcm1hdENvbXBvbmVudE5hbWUodm0pKSArICIgYnV0IHRoZSBoYW5kbGVyIGlzIHJlZ2lzdGVyZWQgZm9yIFwiIiArIGV2ZW50ICsgIlwiLiAiICsKICAgICAgICAgICAgIk5vdGUgdGhhdCBIVE1MIGF0dHJpYnV0ZXMgYXJlIGNhc2UtaW5zZW5zaXRpdmUgYW5kIHlvdSBjYW5ub3QgdXNlICIgKwogICAgICAgICAgICAidi1vbiB0byBsaXN0ZW4gdG8gY2FtZWxDYXNlIGV2ZW50cyB3aGVuIHVzaW5nIGluLURPTSB0ZW1wbGF0ZXMuICIgKwogICAgICAgICAgICAiWW91IHNob3VsZCBwcm9iYWJseSB1c2UgXCIiICsgKGh5cGhlbmF0ZShldmVudCkpICsgIlwiIGluc3RlYWQgb2YgXCIiICsgZXZlbnQgKyAiXCIuIgogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdmFyIGNicyA9IHZtLl9ldmVudHNbZXZlbnRdOwogICAgICBpZiAoY2JzKSB7CiAgICAgICAgY2JzID0gY2JzLmxlbmd0aCA+IDEgPyB0b0FycmF5KGNicykgOiBjYnM7CiAgICAgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7CiAgICAgICAgdmFyIGluZm8gPSAiZXZlbnQgaGFuZGxlciBmb3IgXCIiICsgZXZlbnQgKyAiXCIiOwogICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2JzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgaW52b2tlV2l0aEVycm9ySGFuZGxpbmcoY2JzW2ldLCB2bSwgYXJncywgdm0sIGluZm8pOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdm0KICAgIH07CiAgfQoKICAvKiAgKi8KCiAgdmFyIGFjdGl2ZUluc3RhbmNlID0gbnVsbDsKICB2YXIgaXNVcGRhdGluZ0NoaWxkQ29tcG9uZW50ID0gZmFsc2U7CgogIGZ1bmN0aW9uIHNldEFjdGl2ZUluc3RhbmNlKHZtKSB7CiAgICB2YXIgcHJldkFjdGl2ZUluc3RhbmNlID0gYWN0aXZlSW5zdGFuY2U7CiAgICBhY3RpdmVJbnN0YW5jZSA9IHZtOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgYWN0aXZlSW5zdGFuY2UgPSBwcmV2QWN0aXZlSW5zdGFuY2U7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBpbml0TGlmZWN5Y2xlICh2bSkgewogICAgdmFyIG9wdGlvbnMgPSB2bS4kb3B0aW9uczsKCiAgICAvLyBsb2NhdGUgZmlyc3Qgbm9uLWFic3RyYWN0IHBhcmVudAogICAgdmFyIHBhcmVudCA9IG9wdGlvbnMucGFyZW50OwogICAgaWYgKHBhcmVudCAmJiAhb3B0aW9ucy5hYnN0cmFjdCkgewogICAgICB3aGlsZSAocGFyZW50LiRvcHRpb25zLmFic3RyYWN0ICYmIHBhcmVudC4kcGFyZW50KSB7CiAgICAgICAgcGFyZW50ID0gcGFyZW50LiRwYXJlbnQ7CiAgICAgIH0KICAgICAgcGFyZW50LiRjaGlsZHJlbi5wdXNoKHZtKTsKICAgIH0KCiAgICB2bS4kcGFyZW50ID0gcGFyZW50OwogICAgdm0uJHJvb3QgPSBwYXJlbnQgPyBwYXJlbnQuJHJvb3QgOiB2bTsKCiAgICB2bS4kY2hpbGRyZW4gPSBbXTsKICAgIHZtLiRyZWZzID0ge307CgogICAgdm0uX3dhdGNoZXIgPSBudWxsOwogICAgdm0uX2luYWN0aXZlID0gbnVsbDsKICAgIHZtLl9kaXJlY3RJbmFjdGl2ZSA9IGZhbHNlOwogICAgdm0uX2lzTW91bnRlZCA9IGZhbHNlOwogICAgdm0uX2lzRGVzdHJveWVkID0gZmFsc2U7CiAgICB2bS5faXNCZWluZ0Rlc3Ryb3llZCA9IGZhbHNlOwogIH0KCiAgZnVuY3Rpb24gbGlmZWN5Y2xlTWl4aW4gKFZ1ZSkgewogICAgVnVlLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gKHZub2RlLCBoeWRyYXRpbmcpIHsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgdmFyIHByZXZFbCA9IHZtLiRlbDsKICAgICAgdmFyIHByZXZWbm9kZSA9IHZtLl92bm9kZTsKICAgICAgdmFyIHJlc3RvcmVBY3RpdmVJbnN0YW5jZSA9IHNldEFjdGl2ZUluc3RhbmNlKHZtKTsKICAgICAgdm0uX3Zub2RlID0gdm5vZGU7CiAgICAgIC8vIFZ1ZS5wcm90b3R5cGUuX19wYXRjaF9fIGlzIGluamVjdGVkIGluIGVudHJ5IHBvaW50cwogICAgICAvLyBiYXNlZCBvbiB0aGUgcmVuZGVyaW5nIGJhY2tlbmQgdXNlZC4KICAgICAgaWYgKCFwcmV2Vm5vZGUpIHsKICAgICAgICAvLyBpbml0aWFsIHJlbmRlcgogICAgICAgIHZtLiRlbCA9IHZtLl9fcGF0Y2hfXyh2bS4kZWwsIHZub2RlLCBoeWRyYXRpbmcsIGZhbHNlIC8qIHJlbW92ZU9ubHkgKi8pOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIHVwZGF0ZXMKICAgICAgICB2bS4kZWwgPSB2bS5fX3BhdGNoX18ocHJldlZub2RlLCB2bm9kZSk7CiAgICAgIH0KICAgICAgcmVzdG9yZUFjdGl2ZUluc3RhbmNlKCk7CiAgICAgIC8vIHVwZGF0ZSBfX3Z1ZV9fIHJlZmVyZW5jZQogICAgICBpZiAocHJldkVsKSB7CiAgICAgICAgcHJldkVsLl9fdnVlX18gPSBudWxsOwogICAgICB9CiAgICAgIGlmICh2bS4kZWwpIHsKICAgICAgICB2bS4kZWwuX192dWVfXyA9IHZtOwogICAgICB9CiAgICAgIC8vIGlmIHBhcmVudCBpcyBhbiBIT0MsIHVwZGF0ZSBpdHMgJGVsIGFzIHdlbGwKICAgICAgaWYgKHZtLiR2bm9kZSAmJiB2bS4kcGFyZW50ICYmIHZtLiR2bm9kZSA9PT0gdm0uJHBhcmVudC5fdm5vZGUpIHsKICAgICAgICB2bS4kcGFyZW50LiRlbCA9IHZtLiRlbDsKICAgICAgfQogICAgICAvLyB1cGRhdGVkIGhvb2sgaXMgY2FsbGVkIGJ5IHRoZSBzY2hlZHVsZXIgdG8gZW5zdXJlIHRoYXQgY2hpbGRyZW4gYXJlCiAgICAgIC8vIHVwZGF0ZWQgaW4gYSBwYXJlbnQncyB1cGRhdGVkIGhvb2suCiAgICB9OwoKICAgIFZ1ZS5wcm90b3R5cGUuJGZvcmNlVXBkYXRlID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICBpZiAodm0uX3dhdGNoZXIpIHsKICAgICAgICB2bS5fd2F0Y2hlci51cGRhdGUoKTsKICAgICAgfQogICAgfTsKCiAgICBWdWUucHJvdG90eXBlLiRkZXN0cm95ID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICBpZiAodm0uX2lzQmVpbmdEZXN0cm95ZWQpIHsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBjYWxsSG9vayh2bSwgJ2JlZm9yZURlc3Ryb3knKTsKICAgICAgdm0uX2lzQmVpbmdEZXN0cm95ZWQgPSB0cnVlOwogICAgICAvLyByZW1vdmUgc2VsZiBmcm9tIHBhcmVudAogICAgICB2YXIgcGFyZW50ID0gdm0uJHBhcmVudDsKICAgICAgaWYgKHBhcmVudCAmJiAhcGFyZW50Ll9pc0JlaW5nRGVzdHJveWVkICYmICF2bS4kb3B0aW9ucy5hYnN0cmFjdCkgewogICAgICAgIHJlbW92ZShwYXJlbnQuJGNoaWxkcmVuLCB2bSk7CiAgICAgIH0KICAgICAgLy8gdGVhcmRvd24gd2F0Y2hlcnMKICAgICAgaWYgKHZtLl93YXRjaGVyKSB7CiAgICAgICAgdm0uX3dhdGNoZXIudGVhcmRvd24oKTsKICAgICAgfQogICAgICB2YXIgaSA9IHZtLl93YXRjaGVycy5sZW5ndGg7CiAgICAgIHdoaWxlIChpLS0pIHsKICAgICAgICB2bS5fd2F0Y2hlcnNbaV0udGVhcmRvd24oKTsKICAgICAgfQogICAgICAvLyByZW1vdmUgcmVmZXJlbmNlIGZyb20gZGF0YSBvYgogICAgICAvLyBmcm96ZW4gb2JqZWN0IG1heSBub3QgaGF2ZSBvYnNlcnZlci4KICAgICAgaWYgKHZtLl9kYXRhLl9fb2JfXykgewogICAgICAgIHZtLl9kYXRhLl9fb2JfXy52bUNvdW50LS07CiAgICAgIH0KICAgICAgLy8gY2FsbCB0aGUgbGFzdCBob29rLi4uCiAgICAgIHZtLl9pc0Rlc3Ryb3llZCA9IHRydWU7CiAgICAgIC8vIGludm9rZSBkZXN0cm95IGhvb2tzIG9uIGN1cnJlbnQgcmVuZGVyZWQgdHJlZQogICAgICB2bS5fX3BhdGNoX18odm0uX3Zub2RlLCBudWxsKTsKICAgICAgLy8gZmlyZSBkZXN0cm95ZWQgaG9vawogICAgICBjYWxsSG9vayh2bSwgJ2Rlc3Ryb3llZCcpOwogICAgICAvLyB0dXJuIG9mZiBhbGwgaW5zdGFuY2UgbGlzdGVuZXJzLgogICAgICB2bS4kb2ZmKCk7CiAgICAgIC8vIHJlbW92ZSBfX3Z1ZV9fIHJlZmVyZW5jZQogICAgICBpZiAodm0uJGVsKSB7CiAgICAgICAgdm0uJGVsLl9fdnVlX18gPSBudWxsOwogICAgICB9CiAgICAgIC8vIHJlbGVhc2UgY2lyY3VsYXIgcmVmZXJlbmNlICgjNjc1OSkKICAgICAgaWYgKHZtLiR2bm9kZSkgewogICAgICAgIHZtLiR2bm9kZS5wYXJlbnQgPSBudWxsOwogICAgICB9CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gbW91bnRDb21wb25lbnQgKAogICAgdm0sCiAgICBlbCwKICAgIGh5ZHJhdGluZwogICkgewogICAgdm0uJGVsID0gZWw7CiAgICBpZiAoIXZtLiRvcHRpb25zLnJlbmRlcikgewogICAgICB2bS4kb3B0aW9ucy5yZW5kZXIgPSBjcmVhdGVFbXB0eVZOb2RlOwogICAgICB7CiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICAgICAgaWYgKCh2bS4kb3B0aW9ucy50ZW1wbGF0ZSAmJiB2bS4kb3B0aW9ucy50ZW1wbGF0ZS5jaGFyQXQoMCkgIT09ICcjJykgfHwKICAgICAgICAgIHZtLiRvcHRpb25zLmVsIHx8IGVsKSB7CiAgICAgICAgICB3YXJuKAogICAgICAgICAgICAnWW91IGFyZSB1c2luZyB0aGUgcnVudGltZS1vbmx5IGJ1aWxkIG9mIFZ1ZSB3aGVyZSB0aGUgdGVtcGxhdGUgJyArCiAgICAgICAgICAgICdjb21waWxlciBpcyBub3QgYXZhaWxhYmxlLiBFaXRoZXIgcHJlLWNvbXBpbGUgdGhlIHRlbXBsYXRlcyBpbnRvICcgKwogICAgICAgICAgICAncmVuZGVyIGZ1bmN0aW9ucywgb3IgdXNlIHRoZSBjb21waWxlci1pbmNsdWRlZCBidWlsZC4nLAogICAgICAgICAgICB2bQogICAgICAgICAgKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgd2FybigKICAgICAgICAgICAgJ0ZhaWxlZCB0byBtb3VudCBjb21wb25lbnQ6IHRlbXBsYXRlIG9yIHJlbmRlciBmdW5jdGlvbiBub3QgZGVmaW5lZC4nLAogICAgICAgICAgICB2bQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGNhbGxIb29rKHZtLCAnYmVmb3JlTW91bnQnKTsKCiAgICB2YXIgdXBkYXRlQ29tcG9uZW50OwogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoY29uZmlnLnBlcmZvcm1hbmNlICYmIG1hcmspIHsKICAgICAgdXBkYXRlQ29tcG9uZW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBuYW1lID0gdm0uX25hbWU7CiAgICAgICAgdmFyIGlkID0gdm0uX3VpZDsKICAgICAgICB2YXIgc3RhcnRUYWcgPSAidnVlLXBlcmYtc3RhcnQ6IiArIGlkOwogICAgICAgIHZhciBlbmRUYWcgPSAidnVlLXBlcmYtZW5kOiIgKyBpZDsKCiAgICAgICAgbWFyayhzdGFydFRhZyk7CiAgICAgICAgdmFyIHZub2RlID0gdm0uX3JlbmRlcigpOwogICAgICAgIG1hcmsoZW5kVGFnKTsKICAgICAgICBtZWFzdXJlKCgidnVlICIgKyBuYW1lICsgIiByZW5kZXIiKSwgc3RhcnRUYWcsIGVuZFRhZyk7CgogICAgICAgIG1hcmsoc3RhcnRUYWcpOwogICAgICAgIHZtLl91cGRhdGUodm5vZGUsIGh5ZHJhdGluZyk7CiAgICAgICAgbWFyayhlbmRUYWcpOwogICAgICAgIG1lYXN1cmUoKCJ2dWUgIiArIG5hbWUgKyAiIHBhdGNoIiksIHN0YXJ0VGFnLCBlbmRUYWcpOwogICAgICB9OwogICAgfSBlbHNlIHsKICAgICAgdXBkYXRlQ29tcG9uZW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZtLl91cGRhdGUodm0uX3JlbmRlcigpLCBoeWRyYXRpbmcpOwogICAgICB9OwogICAgfQoKICAgIC8vIHdlIHNldCB0aGlzIHRvIHZtLl93YXRjaGVyIGluc2lkZSB0aGUgd2F0Y2hlcidzIGNvbnN0cnVjdG9yCiAgICAvLyBzaW5jZSB0aGUgd2F0Y2hlcidzIGluaXRpYWwgcGF0Y2ggbWF5IGNhbGwgJGZvcmNlVXBkYXRlIChlLmcuIGluc2lkZSBjaGlsZAogICAgLy8gY29tcG9uZW50J3MgbW91bnRlZCBob29rKSwgd2hpY2ggcmVsaWVzIG9uIHZtLl93YXRjaGVyIGJlaW5nIGFscmVhZHkgZGVmaW5lZAogICAgbmV3IFdhdGNoZXIodm0sIHVwZGF0ZUNvbXBvbmVudCwgbm9vcCwgewogICAgICBiZWZvcmU6IGZ1bmN0aW9uIGJlZm9yZSAoKSB7CiAgICAgICAgaWYgKHZtLl9pc01vdW50ZWQgJiYgIXZtLl9pc0Rlc3Ryb3llZCkgewogICAgICAgICAgY2FsbEhvb2sodm0sICdiZWZvcmVVcGRhdGUnKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIHRydWUgLyogaXNSZW5kZXJXYXRjaGVyICovKTsKICAgIGh5ZHJhdGluZyA9IGZhbHNlOwoKICAgIC8vIG1hbnVhbGx5IG1vdW50ZWQgaW5zdGFuY2UsIGNhbGwgbW91bnRlZCBvbiBzZWxmCiAgICAvLyBtb3VudGVkIGlzIGNhbGxlZCBmb3IgcmVuZGVyLWNyZWF0ZWQgY2hpbGQgY29tcG9uZW50cyBpbiBpdHMgaW5zZXJ0ZWQgaG9vawogICAgaWYgKHZtLiR2bm9kZSA9PSBudWxsKSB7CiAgICAgIHZtLl9pc01vdW50ZWQgPSB0cnVlOwogICAgICBjYWxsSG9vayh2bSwgJ21vdW50ZWQnKTsKICAgIH0KICAgIHJldHVybiB2bQogIH0KCiAgZnVuY3Rpb24gdXBkYXRlQ2hpbGRDb21wb25lbnQgKAogICAgdm0sCiAgICBwcm9wc0RhdGEsCiAgICBsaXN0ZW5lcnMsCiAgICBwYXJlbnRWbm9kZSwKICAgIHJlbmRlckNoaWxkcmVuCiAgKSB7CiAgICB7CiAgICAgIGlzVXBkYXRpbmdDaGlsZENvbXBvbmVudCA9IHRydWU7CiAgICB9CgogICAgLy8gZGV0ZXJtaW5lIHdoZXRoZXIgY29tcG9uZW50IGhhcyBzbG90IGNoaWxkcmVuCiAgICAvLyB3ZSBuZWVkIHRvIGRvIHRoaXMgYmVmb3JlIG92ZXJ3cml0aW5nICRvcHRpb25zLl9yZW5kZXJDaGlsZHJlbi4KCiAgICAvLyBjaGVjayBpZiB0aGVyZSBhcmUgZHluYW1pYyBzY29wZWRTbG90cyAoaGFuZC13cml0dGVuIG9yIGNvbXBpbGVkIGJ1dCB3aXRoCiAgICAvLyBkeW5hbWljIHNsb3QgbmFtZXMpLiBTdGF0aWMgc2NvcGVkIHNsb3RzIGNvbXBpbGVkIGZyb20gdGVtcGxhdGUgaGFzIHRoZQogICAgLy8gIiRzdGFibGUiIG1hcmtlci4KICAgIHZhciBuZXdTY29wZWRTbG90cyA9IHBhcmVudFZub2RlLmRhdGEuc2NvcGVkU2xvdHM7CiAgICB2YXIgb2xkU2NvcGVkU2xvdHMgPSB2bS4kc2NvcGVkU2xvdHM7CiAgICB2YXIgaGFzRHluYW1pY1Njb3BlZFNsb3QgPSAhISgKICAgICAgKG5ld1Njb3BlZFNsb3RzICYmICFuZXdTY29wZWRTbG90cy4kc3RhYmxlKSB8fAogICAgICAob2xkU2NvcGVkU2xvdHMgIT09IGVtcHR5T2JqZWN0ICYmICFvbGRTY29wZWRTbG90cy4kc3RhYmxlKSB8fAogICAgICAobmV3U2NvcGVkU2xvdHMgJiYgdm0uJHNjb3BlZFNsb3RzLiRrZXkgIT09IG5ld1Njb3BlZFNsb3RzLiRrZXkpCiAgICApOwoKICAgIC8vIEFueSBzdGF0aWMgc2xvdCBjaGlsZHJlbiBmcm9tIHRoZSBwYXJlbnQgbWF5IGhhdmUgY2hhbmdlZCBkdXJpbmcgcGFyZW50J3MKICAgIC8vIHVwZGF0ZS4gRHluYW1pYyBzY29wZWQgc2xvdHMgbWF5IGFsc28gaGF2ZSBjaGFuZ2VkLiBJbiBzdWNoIGNhc2VzLCBhIGZvcmNlZAogICAgLy8gdXBkYXRlIGlzIG5lY2Vzc2FyeSB0byBlbnN1cmUgY29ycmVjdG5lc3MuCiAgICB2YXIgbmVlZHNGb3JjZVVwZGF0ZSA9ICEhKAogICAgICByZW5kZXJDaGlsZHJlbiB8fCAgICAgICAgICAgICAgIC8vIGhhcyBuZXcgc3RhdGljIHNsb3RzCiAgICAgIHZtLiRvcHRpb25zLl9yZW5kZXJDaGlsZHJlbiB8fCAgLy8gaGFzIG9sZCBzdGF0aWMgc2xvdHMKICAgICAgaGFzRHluYW1pY1Njb3BlZFNsb3QKICAgICk7CgogICAgdm0uJG9wdGlvbnMuX3BhcmVudFZub2RlID0gcGFyZW50Vm5vZGU7CiAgICB2bS4kdm5vZGUgPSBwYXJlbnRWbm9kZTsgLy8gdXBkYXRlIHZtJ3MgcGxhY2Vob2xkZXIgbm9kZSB3aXRob3V0IHJlLXJlbmRlcgoKICAgIGlmICh2bS5fdm5vZGUpIHsgLy8gdXBkYXRlIGNoaWxkIHRyZWUncyBwYXJlbnQKICAgICAgdm0uX3Zub2RlLnBhcmVudCA9IHBhcmVudFZub2RlOwogICAgfQogICAgdm0uJG9wdGlvbnMuX3JlbmRlckNoaWxkcmVuID0gcmVuZGVyQ2hpbGRyZW47CgogICAgLy8gdXBkYXRlICRhdHRycyBhbmQgJGxpc3RlbmVycyBoYXNoCiAgICAvLyB0aGVzZSBhcmUgYWxzbyByZWFjdGl2ZSBzbyB0aGV5IG1heSB0cmlnZ2VyIGNoaWxkIHVwZGF0ZSBpZiB0aGUgY2hpbGQKICAgIC8vIHVzZWQgdGhlbSBkdXJpbmcgcmVuZGVyCiAgICB2bS4kYXR0cnMgPSBwYXJlbnRWbm9kZS5kYXRhLmF0dHJzIHx8IGVtcHR5T2JqZWN0OwogICAgdm0uJGxpc3RlbmVycyA9IGxpc3RlbmVycyB8fCBlbXB0eU9iamVjdDsKCiAgICAvLyB1cGRhdGUgcHJvcHMKICAgIGlmIChwcm9wc0RhdGEgJiYgdm0uJG9wdGlvbnMucHJvcHMpIHsKICAgICAgdG9nZ2xlT2JzZXJ2aW5nKGZhbHNlKTsKICAgICAgdmFyIHByb3BzID0gdm0uX3Byb3BzOwogICAgICB2YXIgcHJvcEtleXMgPSB2bS4kb3B0aW9ucy5fcHJvcEtleXMgfHwgW107CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcEtleXMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIga2V5ID0gcHJvcEtleXNbaV07CiAgICAgICAgdmFyIHByb3BPcHRpb25zID0gdm0uJG9wdGlvbnMucHJvcHM7IC8vIHd0ZiBmbG93PwogICAgICAgIHByb3BzW2tleV0gPSB2YWxpZGF0ZVByb3Aoa2V5LCBwcm9wT3B0aW9ucywgcHJvcHNEYXRhLCB2bSk7CiAgICAgIH0KICAgICAgdG9nZ2xlT2JzZXJ2aW5nKHRydWUpOwogICAgICAvLyBrZWVwIGEgY29weSBvZiByYXcgcHJvcHNEYXRhCiAgICAgIHZtLiRvcHRpb25zLnByb3BzRGF0YSA9IHByb3BzRGF0YTsKICAgIH0KCiAgICAvLyB1cGRhdGUgbGlzdGVuZXJzCiAgICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMgfHwgZW1wdHlPYmplY3Q7CiAgICB2YXIgb2xkTGlzdGVuZXJzID0gdm0uJG9wdGlvbnMuX3BhcmVudExpc3RlbmVyczsKICAgIHZtLiRvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnMgPSBsaXN0ZW5lcnM7CiAgICB1cGRhdGVDb21wb25lbnRMaXN0ZW5lcnModm0sIGxpc3RlbmVycywgb2xkTGlzdGVuZXJzKTsKCiAgICAvLyByZXNvbHZlIHNsb3RzICsgZm9yY2UgdXBkYXRlIGlmIGhhcyBjaGlsZHJlbgogICAgaWYgKG5lZWRzRm9yY2VVcGRhdGUpIHsKICAgICAgdm0uJHNsb3RzID0gcmVzb2x2ZVNsb3RzKHJlbmRlckNoaWxkcmVuLCBwYXJlbnRWbm9kZS5jb250ZXh0KTsKICAgICAgdm0uJGZvcmNlVXBkYXRlKCk7CiAgICB9CgogICAgewogICAgICBpc1VwZGF0aW5nQ2hpbGRDb21wb25lbnQgPSBmYWxzZTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGlzSW5JbmFjdGl2ZVRyZWUgKHZtKSB7CiAgICB3aGlsZSAodm0gJiYgKHZtID0gdm0uJHBhcmVudCkpIHsKICAgICAgaWYgKHZtLl9pbmFjdGl2ZSkgeyByZXR1cm4gdHJ1ZSB9CiAgICB9CiAgICByZXR1cm4gZmFsc2UKICB9CgogIGZ1bmN0aW9uIGFjdGl2YXRlQ2hpbGRDb21wb25lbnQgKHZtLCBkaXJlY3QpIHsKICAgIGlmIChkaXJlY3QpIHsKICAgICAgdm0uX2RpcmVjdEluYWN0aXZlID0gZmFsc2U7CiAgICAgIGlmIChpc0luSW5hY3RpdmVUcmVlKHZtKSkgewogICAgICAgIHJldHVybgogICAgICB9CiAgICB9IGVsc2UgaWYgKHZtLl9kaXJlY3RJbmFjdGl2ZSkgewogICAgICByZXR1cm4KICAgIH0KICAgIGlmICh2bS5faW5hY3RpdmUgfHwgdm0uX2luYWN0aXZlID09PSBudWxsKSB7CiAgICAgIHZtLl9pbmFjdGl2ZSA9IGZhbHNlOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLiRjaGlsZHJlbi5sZW5ndGg7IGkrKykgewogICAgICAgIGFjdGl2YXRlQ2hpbGRDb21wb25lbnQodm0uJGNoaWxkcmVuW2ldKTsKICAgICAgfQogICAgICBjYWxsSG9vayh2bSwgJ2FjdGl2YXRlZCcpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gZGVhY3RpdmF0ZUNoaWxkQ29tcG9uZW50ICh2bSwgZGlyZWN0KSB7CiAgICBpZiAoZGlyZWN0KSB7CiAgICAgIHZtLl9kaXJlY3RJbmFjdGl2ZSA9IHRydWU7CiAgICAgIGlmIChpc0luSW5hY3RpdmVUcmVlKHZtKSkgewogICAgICAgIHJldHVybgogICAgICB9CiAgICB9CiAgICBpZiAoIXZtLl9pbmFjdGl2ZSkgewogICAgICB2bS5faW5hY3RpdmUgPSB0cnVlOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLiRjaGlsZHJlbi5sZW5ndGg7IGkrKykgewogICAgICAgIGRlYWN0aXZhdGVDaGlsZENvbXBvbmVudCh2bS4kY2hpbGRyZW5baV0pOwogICAgICB9CiAgICAgIGNhbGxIb29rKHZtLCAnZGVhY3RpdmF0ZWQnKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGNhbGxIb29rICh2bSwgaG9vaykgewogICAgLy8gIzc1NzMgZGlzYWJsZSBkZXAgY29sbGVjdGlvbiB3aGVuIGludm9raW5nIGxpZmVjeWNsZSBob29rcwogICAgcHVzaFRhcmdldCgpOwogICAgdmFyIGhhbmRsZXJzID0gdm0uJG9wdGlvbnNbaG9va107CiAgICB2YXIgaW5mbyA9IGhvb2sgKyAiIGhvb2siOwogICAgaWYgKGhhbmRsZXJzKSB7CiAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gaGFuZGxlcnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7CiAgICAgICAgaW52b2tlV2l0aEVycm9ySGFuZGxpbmcoaGFuZGxlcnNbaV0sIHZtLCBudWxsLCB2bSwgaW5mbyk7CiAgICAgIH0KICAgIH0KICAgIGlmICh2bS5faGFzSG9va0V2ZW50KSB7CiAgICAgIHZtLiRlbWl0KCdob29rOicgKyBob29rKTsKICAgIH0KICAgIHBvcFRhcmdldCgpOwogIH0KCiAgLyogICovCgogIHZhciBNQVhfVVBEQVRFX0NPVU5UID0gMTAwOwoKICB2YXIgcXVldWUgPSBbXTsKICB2YXIgYWN0aXZhdGVkQ2hpbGRyZW4gPSBbXTsKICB2YXIgaGFzID0ge307CiAgdmFyIGNpcmN1bGFyID0ge307CiAgdmFyIHdhaXRpbmcgPSBmYWxzZTsKICB2YXIgZmx1c2hpbmcgPSBmYWxzZTsKICB2YXIgaW5kZXggPSAwOwoKICAvKioKICAgKiBSZXNldCB0aGUgc2NoZWR1bGVyJ3Mgc3RhdGUuCiAgICovCiAgZnVuY3Rpb24gcmVzZXRTY2hlZHVsZXJTdGF0ZSAoKSB7CiAgICBpbmRleCA9IHF1ZXVlLmxlbmd0aCA9IGFjdGl2YXRlZENoaWxkcmVuLmxlbmd0aCA9IDA7CiAgICBoYXMgPSB7fTsKICAgIHsKICAgICAgY2lyY3VsYXIgPSB7fTsKICAgIH0KICAgIHdhaXRpbmcgPSBmbHVzaGluZyA9IGZhbHNlOwogIH0KCiAgLy8gQXN5bmMgZWRnZSBjYXNlICM2NTY2IHJlcXVpcmVzIHNhdmluZyB0aGUgdGltZXN0YW1wIHdoZW4gZXZlbnQgbGlzdGVuZXJzIGFyZQogIC8vIGF0dGFjaGVkLiBIb3dldmVyLCBjYWxsaW5nIHBlcmZvcm1hbmNlLm5vdygpIGhhcyBhIHBlcmYgb3ZlcmhlYWQgZXNwZWNpYWxseQogIC8vIGlmIHRoZSBwYWdlIGhhcyB0aG91c2FuZHMgb2YgZXZlbnQgbGlzdGVuZXJzLiBJbnN0ZWFkLCB3ZSB0YWtlIGEgdGltZXN0YW1wCiAgLy8gZXZlcnkgdGltZSB0aGUgc2NoZWR1bGVyIGZsdXNoZXMgYW5kIHVzZSB0aGF0IGZvciBhbGwgZXZlbnQgbGlzdGVuZXJzCiAgLy8gYXR0YWNoZWQgZHVyaW5nIHRoYXQgZmx1c2guCiAgdmFyIGN1cnJlbnRGbHVzaFRpbWVzdGFtcCA9IDA7CgogIC8vIEFzeW5jIGVkZ2UgY2FzZSBmaXggcmVxdWlyZXMgc3RvcmluZyBhbiBldmVudCBsaXN0ZW5lcidzIGF0dGFjaCB0aW1lc3RhbXAuCiAgdmFyIGdldE5vdyA9IERhdGUubm93OwoKICAvLyBEZXRlcm1pbmUgd2hhdCBldmVudCB0aW1lc3RhbXAgdGhlIGJyb3dzZXIgaXMgdXNpbmcuIEFubm95aW5nbHksIHRoZQogIC8vIHRpbWVzdGFtcCBjYW4gZWl0aGVyIGJlIGhpLXJlcyAocmVsYXRpdmUgdG8gcGFnZSBsb2FkKSBvciBsb3ctcmVzCiAgLy8gKHJlbGF0aXZlIHRvIFVOSVggZXBvY2gpLCBzbyBpbiBvcmRlciB0byBjb21wYXJlIHRpbWUgd2UgaGF2ZSB0byB1c2UgdGhlCiAgLy8gc2FtZSB0aW1lc3RhbXAgdHlwZSB3aGVuIHNhdmluZyB0aGUgZmx1c2ggdGltZXN0YW1wLgogIC8vIEFsbCBJRSB2ZXJzaW9ucyB1c2UgbG93LXJlcyBldmVudCB0aW1lc3RhbXBzLCBhbmQgaGF2ZSBwcm9ibGVtYXRpYyBjbG9jawogIC8vIGltcGxlbWVudGF0aW9ucyAoIzk2MzIpCiAgaWYgKGluQnJvd3NlciAmJiAhaXNJRSkgewogICAgdmFyIHBlcmZvcm1hbmNlID0gd2luZG93LnBlcmZvcm1hbmNlOwogICAgaWYgKAogICAgICBwZXJmb3JtYW5jZSAmJgogICAgICB0eXBlb2YgcGVyZm9ybWFuY2Uubm93ID09PSAnZnVuY3Rpb24nICYmCiAgICAgIGdldE5vdygpID4gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50JykudGltZVN0YW1wCiAgICApIHsKICAgICAgLy8gaWYgdGhlIGV2ZW50IHRpbWVzdGFtcCwgYWx0aG91Z2ggZXZhbHVhdGVkIEFGVEVSIHRoZSBEYXRlLm5vdygpLCBpcwogICAgICAvLyBzbWFsbGVyIHRoYW4gaXQsIGl0IG1lYW5zIHRoZSBldmVudCBpcyB1c2luZyBhIGhpLXJlcyB0aW1lc3RhbXAsCiAgICAgIC8vIGFuZCB3ZSBuZWVkIHRvIHVzZSB0aGUgaGktcmVzIHZlcnNpb24gZm9yIGV2ZW50IGxpc3RlbmVyIHRpbWVzdGFtcHMgYXMKICAgICAgLy8gd2VsbC4KICAgICAgZ2V0Tm93ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gcGVyZm9ybWFuY2Uubm93KCk7IH07CiAgICB9CiAgfQoKICAvKioKICAgKiBGbHVzaCBib3RoIHF1ZXVlcyBhbmQgcnVuIHRoZSB3YXRjaGVycy4KICAgKi8KICBmdW5jdGlvbiBmbHVzaFNjaGVkdWxlclF1ZXVlICgpIHsKICAgIGN1cnJlbnRGbHVzaFRpbWVzdGFtcCA9IGdldE5vdygpOwogICAgZmx1c2hpbmcgPSB0cnVlOwogICAgdmFyIHdhdGNoZXIsIGlkOwoKICAgIC8vIFNvcnQgcXVldWUgYmVmb3JlIGZsdXNoLgogICAgLy8gVGhpcyBlbnN1cmVzIHRoYXQ6CiAgICAvLyAxLiBDb21wb25lbnRzIGFyZSB1cGRhdGVkIGZyb20gcGFyZW50IHRvIGNoaWxkLiAoYmVjYXVzZSBwYXJlbnQgaXMgYWx3YXlzCiAgICAvLyAgICBjcmVhdGVkIGJlZm9yZSB0aGUgY2hpbGQpCiAgICAvLyAyLiBBIGNvbXBvbmVudCdzIHVzZXIgd2F0Y2hlcnMgYXJlIHJ1biBiZWZvcmUgaXRzIHJlbmRlciB3YXRjaGVyIChiZWNhdXNlCiAgICAvLyAgICB1c2VyIHdhdGNoZXJzIGFyZSBjcmVhdGVkIGJlZm9yZSB0aGUgcmVuZGVyIHdhdGNoZXIpCiAgICAvLyAzLiBJZiBhIGNvbXBvbmVudCBpcyBkZXN0cm95ZWQgZHVyaW5nIGEgcGFyZW50IGNvbXBvbmVudCdzIHdhdGNoZXIgcnVuLAogICAgLy8gICAgaXRzIHdhdGNoZXJzIGNhbiBiZSBza2lwcGVkLgogICAgcXVldWUuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYS5pZCAtIGIuaWQ7IH0pOwoKICAgIC8vIGRvIG5vdCBjYWNoZSBsZW5ndGggYmVjYXVzZSBtb3JlIHdhdGNoZXJzIG1pZ2h0IGJlIHB1c2hlZAogICAgLy8gYXMgd2UgcnVuIGV4aXN0aW5nIHdhdGNoZXJzCiAgICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBxdWV1ZS5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgd2F0Y2hlciA9IHF1ZXVlW2luZGV4XTsKICAgICAgaWYgKHdhdGNoZXIuYmVmb3JlKSB7CiAgICAgICAgd2F0Y2hlci5iZWZvcmUoKTsKICAgICAgfQogICAgICBpZCA9IHdhdGNoZXIuaWQ7CiAgICAgIGhhc1tpZF0gPSBudWxsOwogICAgICB3YXRjaGVyLnJ1bigpOwogICAgICAvLyBpbiBkZXYgYnVpbGQsIGNoZWNrIGFuZCBzdG9wIGNpcmN1bGFyIHVwZGF0ZXMuCiAgICAgIGlmIChoYXNbaWRdICE9IG51bGwpIHsKICAgICAgICBjaXJjdWxhcltpZF0gPSAoY2lyY3VsYXJbaWRdIHx8IDApICsgMTsKICAgICAgICBpZiAoY2lyY3VsYXJbaWRdID4gTUFYX1VQREFURV9DT1VOVCkgewogICAgICAgICAgd2FybigKICAgICAgICAgICAgJ1lvdSBtYXkgaGF2ZSBhbiBpbmZpbml0ZSB1cGRhdGUgbG9vcCAnICsgKAogICAgICAgICAgICAgIHdhdGNoZXIudXNlcgogICAgICAgICAgICAgICAgPyAoImluIHdhdGNoZXIgd2l0aCBleHByZXNzaW9uIFwiIiArICh3YXRjaGVyLmV4cHJlc3Npb24pICsgIlwiIikKICAgICAgICAgICAgICAgIDogImluIGEgY29tcG9uZW50IHJlbmRlciBmdW5jdGlvbi4iCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHdhdGNoZXIudm0KICAgICAgICAgICk7CiAgICAgICAgICBicmVhawogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIC8vIGtlZXAgY29waWVzIG9mIHBvc3QgcXVldWVzIGJlZm9yZSByZXNldHRpbmcgc3RhdGUKICAgIHZhciBhY3RpdmF0ZWRRdWV1ZSA9IGFjdGl2YXRlZENoaWxkcmVuLnNsaWNlKCk7CiAgICB2YXIgdXBkYXRlZFF1ZXVlID0gcXVldWUuc2xpY2UoKTsKCiAgICByZXNldFNjaGVkdWxlclN0YXRlKCk7CgogICAgLy8gY2FsbCBjb21wb25lbnQgdXBkYXRlZCBhbmQgYWN0aXZhdGVkIGhvb2tzCiAgICBjYWxsQWN0aXZhdGVkSG9va3MoYWN0aXZhdGVkUXVldWUpOwogICAgY2FsbFVwZGF0ZWRIb29rcyh1cGRhdGVkUXVldWUpOwoKICAgIC8vIGRldnRvb2wgaG9vawogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoZGV2dG9vbHMgJiYgY29uZmlnLmRldnRvb2xzKSB7CiAgICAgIGRldnRvb2xzLmVtaXQoJ2ZsdXNoJyk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBjYWxsVXBkYXRlZEhvb2tzIChxdWV1ZSkgewogICAgdmFyIGkgPSBxdWV1ZS5sZW5ndGg7CiAgICB3aGlsZSAoaS0tKSB7CiAgICAgIHZhciB3YXRjaGVyID0gcXVldWVbaV07CiAgICAgIHZhciB2bSA9IHdhdGNoZXIudm07CiAgICAgIGlmICh2bS5fd2F0Y2hlciA9PT0gd2F0Y2hlciAmJiB2bS5faXNNb3VudGVkICYmICF2bS5faXNEZXN0cm95ZWQpIHsKICAgICAgICBjYWxsSG9vayh2bSwgJ3VwZGF0ZWQnKTsKICAgICAgfQogICAgfQogIH0KCiAgLyoqCiAgICogUXVldWUgYSBrZXB0LWFsaXZlIGNvbXBvbmVudCB0aGF0IHdhcyBhY3RpdmF0ZWQgZHVyaW5nIHBhdGNoLgogICAqIFRoZSBxdWV1ZSB3aWxsIGJlIHByb2Nlc3NlZCBhZnRlciB0aGUgZW50aXJlIHRyZWUgaGFzIGJlZW4gcGF0Y2hlZC4KICAgKi8KICBmdW5jdGlvbiBxdWV1ZUFjdGl2YXRlZENvbXBvbmVudCAodm0pIHsKICAgIC8vIHNldHRpbmcgX2luYWN0aXZlIHRvIGZhbHNlIGhlcmUgc28gdGhhdCBhIHJlbmRlciBmdW5jdGlvbiBjYW4KICAgIC8vIHJlbHkgb24gY2hlY2tpbmcgd2hldGhlciBpdCdzIGluIGFuIGluYWN0aXZlIHRyZWUgKGUuZy4gcm91dGVyLXZpZXcpCiAgICB2bS5faW5hY3RpdmUgPSBmYWxzZTsKICAgIGFjdGl2YXRlZENoaWxkcmVuLnB1c2godm0pOwogIH0KCiAgZnVuY3Rpb24gY2FsbEFjdGl2YXRlZEhvb2tzIChxdWV1ZSkgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykgewogICAgICBxdWV1ZVtpXS5faW5hY3RpdmUgPSB0cnVlOwogICAgICBhY3RpdmF0ZUNoaWxkQ29tcG9uZW50KHF1ZXVlW2ldLCB0cnVlIC8qIHRydWUgKi8pOwogICAgfQogIH0KCiAgLyoqCiAgICogUHVzaCBhIHdhdGNoZXIgaW50byB0aGUgd2F0Y2hlciBxdWV1ZS4KICAgKiBKb2JzIHdpdGggZHVwbGljYXRlIElEcyB3aWxsIGJlIHNraXBwZWQgdW5sZXNzIGl0J3MKICAgKiBwdXNoZWQgd2hlbiB0aGUgcXVldWUgaXMgYmVpbmcgZmx1c2hlZC4KICAgKi8KICBmdW5jdGlvbiBxdWV1ZVdhdGNoZXIgKHdhdGNoZXIpIHsKICAgIHZhciBpZCA9IHdhdGNoZXIuaWQ7CiAgICBpZiAoaGFzW2lkXSA9PSBudWxsKSB7CiAgICAgIGhhc1tpZF0gPSB0cnVlOwogICAgICBpZiAoIWZsdXNoaW5nKSB7CiAgICAgICAgcXVldWUucHVzaCh3YXRjaGVyKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBpZiBhbHJlYWR5IGZsdXNoaW5nLCBzcGxpY2UgdGhlIHdhdGNoZXIgYmFzZWQgb24gaXRzIGlkCiAgICAgICAgLy8gaWYgYWxyZWFkeSBwYXN0IGl0cyBpZCwgaXQgd2lsbCBiZSBydW4gbmV4dCBpbW1lZGlhdGVseS4KICAgICAgICB2YXIgaSA9IHF1ZXVlLmxlbmd0aCAtIDE7CiAgICAgICAgd2hpbGUgKGkgPiBpbmRleCAmJiBxdWV1ZVtpXS5pZCA+IHdhdGNoZXIuaWQpIHsKICAgICAgICAgIGktLTsKICAgICAgICB9CiAgICAgICAgcXVldWUuc3BsaWNlKGkgKyAxLCAwLCB3YXRjaGVyKTsKICAgICAgfQogICAgICAvLyBxdWV1ZSB0aGUgZmx1c2gKICAgICAgaWYgKCF3YWl0aW5nKSB7CiAgICAgICAgd2FpdGluZyA9IHRydWU7CgogICAgICAgIGlmICghY29uZmlnLmFzeW5jKSB7CiAgICAgICAgICBmbHVzaFNjaGVkdWxlclF1ZXVlKCk7CiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgbmV4dFRpY2soZmx1c2hTY2hlZHVsZXJRdWV1ZSk7CiAgICAgIH0KICAgIH0KICB9CgogIC8qICAqLwoKCgogIHZhciB1aWQkMiA9IDA7CgogIC8qKgogICAqIEEgd2F0Y2hlciBwYXJzZXMgYW4gZXhwcmVzc2lvbiwgY29sbGVjdHMgZGVwZW5kZW5jaWVzLAogICAqIGFuZCBmaXJlcyBjYWxsYmFjayB3aGVuIHRoZSBleHByZXNzaW9uIHZhbHVlIGNoYW5nZXMuCiAgICogVGhpcyBpcyB1c2VkIGZvciBib3RoIHRoZSAkd2F0Y2goKSBhcGkgYW5kIGRpcmVjdGl2ZXMuCiAgICovCiAgdmFyIFdhdGNoZXIgPSBmdW5jdGlvbiBXYXRjaGVyICgKICAgIHZtLAogICAgZXhwT3JGbiwKICAgIGNiLAogICAgb3B0aW9ucywKICAgIGlzUmVuZGVyV2F0Y2hlcgogICkgewogICAgdGhpcy52bSA9IHZtOwogICAgaWYgKGlzUmVuZGVyV2F0Y2hlcikgewogICAgICB2bS5fd2F0Y2hlciA9IHRoaXM7CiAgICB9CiAgICB2bS5fd2F0Y2hlcnMucHVzaCh0aGlzKTsKICAgIC8vIG9wdGlvbnMKICAgIGlmIChvcHRpb25zKSB7CiAgICAgIHRoaXMuZGVlcCA9ICEhb3B0aW9ucy5kZWVwOwogICAgICB0aGlzLnVzZXIgPSAhIW9wdGlvbnMudXNlcjsKICAgICAgdGhpcy5sYXp5ID0gISFvcHRpb25zLmxhenk7CiAgICAgIHRoaXMuc3luYyA9ICEhb3B0aW9ucy5zeW5jOwogICAgICB0aGlzLmJlZm9yZSA9IG9wdGlvbnMuYmVmb3JlOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5kZWVwID0gdGhpcy51c2VyID0gdGhpcy5sYXp5ID0gdGhpcy5zeW5jID0gZmFsc2U7CiAgICB9CiAgICB0aGlzLmNiID0gY2I7CiAgICB0aGlzLmlkID0gKyt1aWQkMjsgLy8gdWlkIGZvciBiYXRjaGluZwogICAgdGhpcy5hY3RpdmUgPSB0cnVlOwogICAgdGhpcy5kaXJ0eSA9IHRoaXMubGF6eTsgLy8gZm9yIGxhenkgd2F0Y2hlcnMKICAgIHRoaXMuZGVwcyA9IFtdOwogICAgdGhpcy5uZXdEZXBzID0gW107CiAgICB0aGlzLmRlcElkcyA9IG5ldyBfU2V0KCk7CiAgICB0aGlzLm5ld0RlcElkcyA9IG5ldyBfU2V0KCk7CiAgICB0aGlzLmV4cHJlc3Npb24gPSBleHBPckZuLnRvU3RyaW5nKCk7CiAgICAvLyBwYXJzZSBleHByZXNzaW9uIGZvciBnZXR0ZXIKICAgIGlmICh0eXBlb2YgZXhwT3JGbiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICB0aGlzLmdldHRlciA9IGV4cE9yRm47CiAgICB9IGVsc2UgewogICAgICB0aGlzLmdldHRlciA9IHBhcnNlUGF0aChleHBPckZuKTsKICAgICAgaWYgKCF0aGlzLmdldHRlcikgewogICAgICAgIHRoaXMuZ2V0dGVyID0gbm9vcDsKICAgICAgICB3YXJuKAogICAgICAgICAgIkZhaWxlZCB3YXRjaGluZyBwYXRoOiBcIiIgKyBleHBPckZuICsgIlwiICIgKwogICAgICAgICAgJ1dhdGNoZXIgb25seSBhY2NlcHRzIHNpbXBsZSBkb3QtZGVsaW1pdGVkIHBhdGhzLiAnICsKICAgICAgICAgICdGb3IgZnVsbCBjb250cm9sLCB1c2UgYSBmdW5jdGlvbiBpbnN0ZWFkLicsCiAgICAgICAgICB2bQogICAgICAgICk7CiAgICAgIH0KICAgIH0KICAgIHRoaXMudmFsdWUgPSB0aGlzLmxhenkKICAgICAgPyB1bmRlZmluZWQKICAgICAgOiB0aGlzLmdldCgpOwogIH07CgogIC8qKgogICAqIEV2YWx1YXRlIHRoZSBnZXR0ZXIsIGFuZCByZS1jb2xsZWN0IGRlcGVuZGVuY2llcy4KICAgKi8KICBXYXRjaGVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiBnZXQgKCkgewogICAgcHVzaFRhcmdldCh0aGlzKTsKICAgIHZhciB2YWx1ZTsKICAgIHZhciB2bSA9IHRoaXMudm07CiAgICB0cnkgewogICAgICB2YWx1ZSA9IHRoaXMuZ2V0dGVyLmNhbGwodm0sIHZtKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgaWYgKHRoaXMudXNlcikgewogICAgICAgIGhhbmRsZUVycm9yKGUsIHZtLCAoImdldHRlciBmb3Igd2F0Y2hlciBcIiIgKyAodGhpcy5leHByZXNzaW9uKSArICJcIiIpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aHJvdyBlCiAgICAgIH0KICAgIH0gZmluYWxseSB7CiAgICAgIC8vICJ0b3VjaCIgZXZlcnkgcHJvcGVydHkgc28gdGhleSBhcmUgYWxsIHRyYWNrZWQgYXMKICAgICAgLy8gZGVwZW5kZW5jaWVzIGZvciBkZWVwIHdhdGNoaW5nCiAgICAgIGlmICh0aGlzLmRlZXApIHsKICAgICAgICB0cmF2ZXJzZSh2YWx1ZSk7CiAgICAgIH0KICAgICAgcG9wVGFyZ2V0KCk7CiAgICAgIHRoaXMuY2xlYW51cERlcHMoKTsKICAgIH0KICAgIHJldHVybiB2YWx1ZQogIH07CgogIC8qKgogICAqIEFkZCBhIGRlcGVuZGVuY3kgdG8gdGhpcyBkaXJlY3RpdmUuCiAgICovCiAgV2F0Y2hlci5wcm90b3R5cGUuYWRkRGVwID0gZnVuY3Rpb24gYWRkRGVwIChkZXApIHsKICAgIHZhciBpZCA9IGRlcC5pZDsKICAgIGlmICghdGhpcy5uZXdEZXBJZHMuaGFzKGlkKSkgewogICAgICB0aGlzLm5ld0RlcElkcy5hZGQoaWQpOwogICAgICB0aGlzLm5ld0RlcHMucHVzaChkZXApOwogICAgICBpZiAoIXRoaXMuZGVwSWRzLmhhcyhpZCkpIHsKICAgICAgICBkZXAuYWRkU3ViKHRoaXMpOwogICAgICB9CiAgICB9CiAgfTsKCiAgLyoqCiAgICogQ2xlYW4gdXAgZm9yIGRlcGVuZGVuY3kgY29sbGVjdGlvbi4KICAgKi8KICBXYXRjaGVyLnByb3RvdHlwZS5jbGVhbnVwRGVwcyA9IGZ1bmN0aW9uIGNsZWFudXBEZXBzICgpIHsKICAgIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDsKICAgIHdoaWxlIChpLS0pIHsKICAgICAgdmFyIGRlcCA9IHRoaXMuZGVwc1tpXTsKICAgICAgaWYgKCF0aGlzLm5ld0RlcElkcy5oYXMoZGVwLmlkKSkgewogICAgICAgIGRlcC5yZW1vdmVTdWIodGhpcyk7CiAgICAgIH0KICAgIH0KICAgIHZhciB0bXAgPSB0aGlzLmRlcElkczsKICAgIHRoaXMuZGVwSWRzID0gdGhpcy5uZXdEZXBJZHM7CiAgICB0aGlzLm5ld0RlcElkcyA9IHRtcDsKICAgIHRoaXMubmV3RGVwSWRzLmNsZWFyKCk7CiAgICB0bXAgPSB0aGlzLmRlcHM7CiAgICB0aGlzLmRlcHMgPSB0aGlzLm5ld0RlcHM7CiAgICB0aGlzLm5ld0RlcHMgPSB0bXA7CiAgICB0aGlzLm5ld0RlcHMubGVuZ3RoID0gMDsKICB9OwoKICAvKioKICAgKiBTdWJzY3JpYmVyIGludGVyZmFjZS4KICAgKiBXaWxsIGJlIGNhbGxlZCB3aGVuIGEgZGVwZW5kZW5jeSBjaGFuZ2VzLgogICAqLwogIFdhdGNoZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZSAoKSB7CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqLwogICAgaWYgKHRoaXMubGF6eSkgewogICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTsKICAgIH0gZWxzZSBpZiAodGhpcy5zeW5jKSB7CiAgICAgIHRoaXMucnVuKCk7CiAgICB9IGVsc2UgewogICAgICBxdWV1ZVdhdGNoZXIodGhpcyk7CiAgICB9CiAgfTsKCiAgLyoqCiAgICogU2NoZWR1bGVyIGpvYiBpbnRlcmZhY2UuCiAgICogV2lsbCBiZSBjYWxsZWQgYnkgdGhlIHNjaGVkdWxlci4KICAgKi8KICBXYXRjaGVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiBydW4gKCkgewogICAgaWYgKHRoaXMuYWN0aXZlKSB7CiAgICAgIHZhciB2YWx1ZSA9IHRoaXMuZ2V0KCk7CiAgICAgIGlmICgKICAgICAgICB2YWx1ZSAhPT0gdGhpcy52YWx1ZSB8fAogICAgICAgIC8vIERlZXAgd2F0Y2hlcnMgYW5kIHdhdGNoZXJzIG9uIE9iamVjdC9BcnJheXMgc2hvdWxkIGZpcmUgZXZlbgogICAgICAgIC8vIHdoZW4gdGhlIHZhbHVlIGlzIHRoZSBzYW1lLCBiZWNhdXNlIHRoZSB2YWx1ZSBtYXkKICAgICAgICAvLyBoYXZlIG11dGF0ZWQuCiAgICAgICAgaXNPYmplY3QodmFsdWUpIHx8CiAgICAgICAgdGhpcy5kZWVwCiAgICAgICkgewogICAgICAgIC8vIHNldCBuZXcgdmFsdWUKICAgICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlOwogICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKICAgICAgICBpZiAodGhpcy51c2VyKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICB0aGlzLmNiLmNhbGwodGhpcy52bSwgdmFsdWUsIG9sZFZhbHVlKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgaGFuZGxlRXJyb3IoZSwgdGhpcy52bSwgKCJjYWxsYmFjayBmb3Igd2F0Y2hlciBcIiIgKyAodGhpcy5leHByZXNzaW9uKSArICJcIiIpKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5jYi5jYWxsKHRoaXMudm0sIHZhbHVlLCBvbGRWYWx1ZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgLyoqCiAgICogRXZhbHVhdGUgdGhlIHZhbHVlIG9mIHRoZSB3YXRjaGVyLgogICAqIFRoaXMgb25seSBnZXRzIGNhbGxlZCBmb3IgbGF6eSB3YXRjaGVycy4KICAgKi8KICBXYXRjaGVyLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uIGV2YWx1YXRlICgpIHsKICAgIHRoaXMudmFsdWUgPSB0aGlzLmdldCgpOwogICAgdGhpcy5kaXJ0eSA9IGZhbHNlOwogIH07CgogIC8qKgogICAqIERlcGVuZCBvbiBhbGwgZGVwcyBjb2xsZWN0ZWQgYnkgdGhpcyB3YXRjaGVyLgogICAqLwogIFdhdGNoZXIucHJvdG90eXBlLmRlcGVuZCA9IGZ1bmN0aW9uIGRlcGVuZCAoKSB7CiAgICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7CiAgICB3aGlsZSAoaS0tKSB7CiAgICAgIHRoaXMuZGVwc1tpXS5kZXBlbmQoKTsKICAgIH0KICB9OwoKICAvKioKICAgKiBSZW1vdmUgc2VsZiBmcm9tIGFsbCBkZXBlbmRlbmNpZXMnIHN1YnNjcmliZXIgbGlzdC4KICAgKi8KICBXYXRjaGVyLnByb3RvdHlwZS50ZWFyZG93biA9IGZ1bmN0aW9uIHRlYXJkb3duICgpIHsKICAgIGlmICh0aGlzLmFjdGl2ZSkgewogICAgICAvLyByZW1vdmUgc2VsZiBmcm9tIHZtJ3Mgd2F0Y2hlciBsaXN0CiAgICAgIC8vIHRoaXMgaXMgYSBzb21ld2hhdCBleHBlbnNpdmUgb3BlcmF0aW9uIHNvIHdlIHNraXAgaXQKICAgICAgLy8gaWYgdGhlIHZtIGlzIGJlaW5nIGRlc3Ryb3llZC4KICAgICAgaWYgKCF0aGlzLnZtLl9pc0JlaW5nRGVzdHJveWVkKSB7CiAgICAgICAgcmVtb3ZlKHRoaXMudm0uX3dhdGNoZXJzLCB0aGlzKTsKICAgICAgfQogICAgICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7CiAgICAgIHdoaWxlIChpLS0pIHsKICAgICAgICB0aGlzLmRlcHNbaV0ucmVtb3ZlU3ViKHRoaXMpOwogICAgICB9CiAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7CiAgICB9CiAgfTsKCiAgLyogICovCgogIHZhciBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24gPSB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgZ2V0OiBub29wLAogICAgc2V0OiBub29wCiAgfTsKCiAgZnVuY3Rpb24gcHJveHkgKHRhcmdldCwgc291cmNlS2V5LCBrZXkpIHsKICAgIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5nZXQgPSBmdW5jdGlvbiBwcm94eUdldHRlciAoKSB7CiAgICAgIHJldHVybiB0aGlzW3NvdXJjZUtleV1ba2V5XQogICAgfTsKICAgIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5zZXQgPSBmdW5jdGlvbiBwcm94eVNldHRlciAodmFsKSB7CiAgICAgIHRoaXNbc291cmNlS2V5XVtrZXldID0gdmFsOwogICAgfTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uKTsKICB9CgogIGZ1bmN0aW9uIGluaXRTdGF0ZSAodm0pIHsKICAgIHZtLl93YXRjaGVycyA9IFtdOwogICAgdmFyIG9wdHMgPSB2bS4kb3B0aW9uczsKICAgIGlmIChvcHRzLnByb3BzKSB7IGluaXRQcm9wcyh2bSwgb3B0cy5wcm9wcyk7IH0KICAgIGlmIChvcHRzLm1ldGhvZHMpIHsgaW5pdE1ldGhvZHModm0sIG9wdHMubWV0aG9kcyk7IH0KICAgIGlmIChvcHRzLmRhdGEpIHsKICAgICAgaW5pdERhdGEodm0pOwogICAgfSBlbHNlIHsKICAgICAgb2JzZXJ2ZSh2bS5fZGF0YSA9IHt9LCB0cnVlIC8qIGFzUm9vdERhdGEgKi8pOwogICAgfQogICAgaWYgKG9wdHMuY29tcHV0ZWQpIHsgaW5pdENvbXB1dGVkKHZtLCBvcHRzLmNvbXB1dGVkKTsgfQogICAgaWYgKG9wdHMud2F0Y2ggJiYgb3B0cy53YXRjaCAhPT0gbmF0aXZlV2F0Y2gpIHsKICAgICAgaW5pdFdhdGNoKHZtLCBvcHRzLndhdGNoKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGluaXRQcm9wcyAodm0sIHByb3BzT3B0aW9ucykgewogICAgdmFyIHByb3BzRGF0YSA9IHZtLiRvcHRpb25zLnByb3BzRGF0YSB8fCB7fTsKICAgIHZhciBwcm9wcyA9IHZtLl9wcm9wcyA9IHt9OwogICAgLy8gY2FjaGUgcHJvcCBrZXlzIHNvIHRoYXQgZnV0dXJlIHByb3BzIHVwZGF0ZXMgY2FuIGl0ZXJhdGUgdXNpbmcgQXJyYXkKICAgIC8vIGluc3RlYWQgb2YgZHluYW1pYyBvYmplY3Qga2V5IGVudW1lcmF0aW9uLgogICAgdmFyIGtleXMgPSB2bS4kb3B0aW9ucy5fcHJvcEtleXMgPSBbXTsKICAgIHZhciBpc1Jvb3QgPSAhdm0uJHBhcmVudDsKICAgIC8vIHJvb3QgaW5zdGFuY2UgcHJvcHMgc2hvdWxkIGJlIGNvbnZlcnRlZAogICAgaWYgKCFpc1Jvb3QpIHsKICAgICAgdG9nZ2xlT2JzZXJ2aW5nKGZhbHNlKTsKICAgIH0KICAgIHZhciBsb29wID0gZnVuY3Rpb24gKCBrZXkgKSB7CiAgICAgIGtleXMucHVzaChrZXkpOwogICAgICB2YXIgdmFsdWUgPSB2YWxpZGF0ZVByb3Aoa2V5LCBwcm9wc09wdGlvbnMsIHByb3BzRGF0YSwgdm0pOwogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqLwogICAgICB7CiAgICAgICAgdmFyIGh5cGhlbmF0ZWRLZXkgPSBoeXBoZW5hdGUoa2V5KTsKICAgICAgICBpZiAoaXNSZXNlcnZlZEF0dHJpYnV0ZShoeXBoZW5hdGVkS2V5KSB8fAogICAgICAgICAgICBjb25maWcuaXNSZXNlcnZlZEF0dHIoaHlwaGVuYXRlZEtleSkpIHsKICAgICAgICAgIHdhcm4oCiAgICAgICAgICAgICgiXCIiICsgaHlwaGVuYXRlZEtleSArICJcIiBpcyBhIHJlc2VydmVkIGF0dHJpYnV0ZSBhbmQgY2Fubm90IGJlIHVzZWQgYXMgY29tcG9uZW50IHByb3AuIiksCiAgICAgICAgICAgIHZtCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBkZWZpbmVSZWFjdGl2ZSQkMShwcm9wcywga2V5LCB2YWx1ZSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKCFpc1Jvb3QgJiYgIWlzVXBkYXRpbmdDaGlsZENvbXBvbmVudCkgewogICAgICAgICAgICB3YXJuKAogICAgICAgICAgICAgICJBdm9pZCBtdXRhdGluZyBhIHByb3AgZGlyZWN0bHkgc2luY2UgdGhlIHZhbHVlIHdpbGwgYmUgIiArCiAgICAgICAgICAgICAgIm92ZXJ3cml0dGVuIHdoZW5ldmVyIHRoZSBwYXJlbnQgY29tcG9uZW50IHJlLXJlbmRlcnMuICIgKwogICAgICAgICAgICAgICJJbnN0ZWFkLCB1c2UgYSBkYXRhIG9yIGNvbXB1dGVkIHByb3BlcnR5IGJhc2VkIG9uIHRoZSBwcm9wJ3MgIiArCiAgICAgICAgICAgICAgInZhbHVlLiBQcm9wIGJlaW5nIG11dGF0ZWQ6IFwiIiArIGtleSArICJcIiIsCiAgICAgICAgICAgICAgdm0KICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgICAvLyBzdGF0aWMgcHJvcHMgYXJlIGFscmVhZHkgcHJveGllZCBvbiB0aGUgY29tcG9uZW50J3MgcHJvdG90eXBlCiAgICAgIC8vIGR1cmluZyBWdWUuZXh0ZW5kKCkuIFdlIG9ubHkgbmVlZCB0byBwcm94eSBwcm9wcyBkZWZpbmVkIGF0CiAgICAgIC8vIGluc3RhbnRpYXRpb24gaGVyZS4KICAgICAgaWYgKCEoa2V5IGluIHZtKSkgewogICAgICAgIHByb3h5KHZtLCAiX3Byb3BzIiwga2V5KTsKICAgICAgfQogICAgfTsKCiAgICBmb3IgKHZhciBrZXkgaW4gcHJvcHNPcHRpb25zKSBsb29wKCBrZXkgKTsKICAgIHRvZ2dsZU9ic2VydmluZyh0cnVlKTsKICB9CgogIGZ1bmN0aW9uIGluaXREYXRhICh2bSkgewogICAgdmFyIGRhdGEgPSB2bS4kb3B0aW9ucy5kYXRhOwogICAgZGF0YSA9IHZtLl9kYXRhID0gdHlwZW9mIGRhdGEgPT09ICdmdW5jdGlvbicKICAgICAgPyBnZXREYXRhKGRhdGEsIHZtKQogICAgICA6IGRhdGEgfHwge307CiAgICBpZiAoIWlzUGxhaW5PYmplY3QoZGF0YSkpIHsKICAgICAgZGF0YSA9IHt9OwogICAgICB3YXJuKAogICAgICAgICdkYXRhIGZ1bmN0aW9ucyBzaG91bGQgcmV0dXJuIGFuIG9iamVjdDpcbicgKwogICAgICAgICdodHRwczovL3Z1ZWpzLm9yZy92Mi9ndWlkZS9jb21wb25lbnRzLmh0bWwjZGF0YS1NdXN0LUJlLWEtRnVuY3Rpb24nLAogICAgICAgIHZtCiAgICAgICk7CiAgICB9CiAgICAvLyBwcm94eSBkYXRhIG9uIGluc3RhbmNlCiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEpOwogICAgdmFyIHByb3BzID0gdm0uJG9wdGlvbnMucHJvcHM7CiAgICB2YXIgbWV0aG9kcyA9IHZtLiRvcHRpb25zLm1ldGhvZHM7CiAgICB2YXIgaSA9IGtleXMubGVuZ3RoOwogICAgd2hpbGUgKGktLSkgewogICAgICB2YXIga2V5ID0ga2V5c1tpXTsKICAgICAgewogICAgICAgIGlmIChtZXRob2RzICYmIGhhc093bihtZXRob2RzLCBrZXkpKSB7CiAgICAgICAgICB3YXJuKAogICAgICAgICAgICAoIk1ldGhvZCBcIiIgKyBrZXkgKyAiXCIgaGFzIGFscmVhZHkgYmVlbiBkZWZpbmVkIGFzIGEgZGF0YSBwcm9wZXJ0eS4iKSwKICAgICAgICAgICAgdm0KICAgICAgICAgICk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChwcm9wcyAmJiBoYXNPd24ocHJvcHMsIGtleSkpIHsKICAgICAgICB3YXJuKAogICAgICAgICAgIlRoZSBkYXRhIHByb3BlcnR5IFwiIiArIGtleSArICJcIiBpcyBhbHJlYWR5IGRlY2xhcmVkIGFzIGEgcHJvcC4gIiArCiAgICAgICAgICAiVXNlIHByb3AgZGVmYXVsdCB2YWx1ZSBpbnN0ZWFkLiIsCiAgICAgICAgICB2bQogICAgICAgICk7CiAgICAgIH0gZWxzZSBpZiAoIWlzUmVzZXJ2ZWQoa2V5KSkgewogICAgICAgIHByb3h5KHZtLCAiX2RhdGEiLCBrZXkpOwogICAgICB9CiAgICB9CiAgICAvLyBvYnNlcnZlIGRhdGEKICAgIG9ic2VydmUoZGF0YSwgdHJ1ZSAvKiBhc1Jvb3REYXRhICovKTsKICB9CgogIGZ1bmN0aW9uIGdldERhdGEgKGRhdGEsIHZtKSB7CiAgICAvLyAjNzU3MyBkaXNhYmxlIGRlcCBjb2xsZWN0aW9uIHdoZW4gaW52b2tpbmcgZGF0YSBnZXR0ZXJzCiAgICBwdXNoVGFyZ2V0KCk7CiAgICB0cnkgewogICAgICByZXR1cm4gZGF0YS5jYWxsKHZtLCB2bSkKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgaGFuZGxlRXJyb3IoZSwgdm0sICJkYXRhKCkiKTsKICAgICAgcmV0dXJuIHt9CiAgICB9IGZpbmFsbHkgewogICAgICBwb3BUYXJnZXQoKTsKICAgIH0KICB9CgogIHZhciBjb21wdXRlZFdhdGNoZXJPcHRpb25zID0geyBsYXp5OiB0cnVlIH07CgogIGZ1bmN0aW9uIGluaXRDb21wdXRlZCAodm0sIGNvbXB1dGVkKSB7CiAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmUKICAgIHZhciB3YXRjaGVycyA9IHZtLl9jb21wdXRlZFdhdGNoZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgIC8vIGNvbXB1dGVkIHByb3BlcnRpZXMgYXJlIGp1c3QgZ2V0dGVycyBkdXJpbmcgU1NSCiAgICB2YXIgaXNTU1IgPSBpc1NlcnZlclJlbmRlcmluZygpOwoKICAgIGZvciAodmFyIGtleSBpbiBjb21wdXRlZCkgewogICAgICB2YXIgdXNlckRlZiA9IGNvbXB1dGVkW2tleV07CiAgICAgIHZhciBnZXR0ZXIgPSB0eXBlb2YgdXNlckRlZiA9PT0gJ2Z1bmN0aW9uJyA/IHVzZXJEZWYgOiB1c2VyRGVmLmdldDsKICAgICAgaWYgKGdldHRlciA9PSBudWxsKSB7CiAgICAgICAgd2FybigKICAgICAgICAgICgiR2V0dGVyIGlzIG1pc3NpbmcgZm9yIGNvbXB1dGVkIHByb3BlcnR5IFwiIiArIGtleSArICJcIi4iKSwKICAgICAgICAgIHZtCiAgICAgICAgKTsKICAgICAgfQoKICAgICAgaWYgKCFpc1NTUikgewogICAgICAgIC8vIGNyZWF0ZSBpbnRlcm5hbCB3YXRjaGVyIGZvciB0aGUgY29tcHV0ZWQgcHJvcGVydHkuCiAgICAgICAgd2F0Y2hlcnNba2V5XSA9IG5ldyBXYXRjaGVyKAogICAgICAgICAgdm0sCiAgICAgICAgICBnZXR0ZXIgfHwgbm9vcCwKICAgICAgICAgIG5vb3AsCiAgICAgICAgICBjb21wdXRlZFdhdGNoZXJPcHRpb25zCiAgICAgICAgKTsKICAgICAgfQoKICAgICAgLy8gY29tcG9uZW50LWRlZmluZWQgY29tcHV0ZWQgcHJvcGVydGllcyBhcmUgYWxyZWFkeSBkZWZpbmVkIG9uIHRoZQogICAgICAvLyBjb21wb25lbnQgcHJvdG90eXBlLiBXZSBvbmx5IG5lZWQgdG8gZGVmaW5lIGNvbXB1dGVkIHByb3BlcnRpZXMgZGVmaW5lZAogICAgICAvLyBhdCBpbnN0YW50aWF0aW9uIGhlcmUuCiAgICAgIGlmICghKGtleSBpbiB2bSkpIHsKICAgICAgICBkZWZpbmVDb21wdXRlZCh2bSwga2V5LCB1c2VyRGVmKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoa2V5IGluIHZtLiRkYXRhKSB7CiAgICAgICAgICB3YXJuKCgiVGhlIGNvbXB1dGVkIHByb3BlcnR5IFwiIiArIGtleSArICJcIiBpcyBhbHJlYWR5IGRlZmluZWQgaW4gZGF0YS4iKSwgdm0pOwogICAgICAgIH0gZWxzZSBpZiAodm0uJG9wdGlvbnMucHJvcHMgJiYga2V5IGluIHZtLiRvcHRpb25zLnByb3BzKSB7CiAgICAgICAgICB3YXJuKCgiVGhlIGNvbXB1dGVkIHByb3BlcnR5IFwiIiArIGtleSArICJcIiBpcyBhbHJlYWR5IGRlZmluZWQgYXMgYSBwcm9wLiIpLCB2bSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBkZWZpbmVDb21wdXRlZCAoCiAgICB0YXJnZXQsCiAgICBrZXksCiAgICB1c2VyRGVmCiAgKSB7CiAgICB2YXIgc2hvdWxkQ2FjaGUgPSAhaXNTZXJ2ZXJSZW5kZXJpbmcoKTsKICAgIGlmICh0eXBlb2YgdXNlckRlZiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24uZ2V0ID0gc2hvdWxkQ2FjaGUKICAgICAgICA/IGNyZWF0ZUNvbXB1dGVkR2V0dGVyKGtleSkKICAgICAgICA6IGNyZWF0ZUdldHRlckludm9rZXIodXNlckRlZik7CiAgICAgIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5zZXQgPSBub29wOwogICAgfSBlbHNlIHsKICAgICAgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uLmdldCA9IHVzZXJEZWYuZ2V0CiAgICAgICAgPyBzaG91bGRDYWNoZSAmJiB1c2VyRGVmLmNhY2hlICE9PSBmYWxzZQogICAgICAgICAgPyBjcmVhdGVDb21wdXRlZEdldHRlcihrZXkpCiAgICAgICAgICA6IGNyZWF0ZUdldHRlckludm9rZXIodXNlckRlZi5nZXQpCiAgICAgICAgOiBub29wOwogICAgICBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24uc2V0ID0gdXNlckRlZi5zZXQgfHwgbm9vcDsKICAgIH0KICAgIGlmIChzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24uc2V0ID09PSBub29wKSB7CiAgICAgIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5zZXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgd2FybigKICAgICAgICAgICgiQ29tcHV0ZWQgcHJvcGVydHkgXCIiICsga2V5ICsgIlwiIHdhcyBhc3NpZ25lZCB0byBidXQgaXQgaGFzIG5vIHNldHRlci4iKSwKICAgICAgICAgIHRoaXMKICAgICAgICApOwogICAgICB9OwogICAgfQogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24pOwogIH0KCiAgZnVuY3Rpb24gY3JlYXRlQ29tcHV0ZWRHZXR0ZXIgKGtleSkgewogICAgcmV0dXJuIGZ1bmN0aW9uIGNvbXB1dGVkR2V0dGVyICgpIHsKICAgICAgdmFyIHdhdGNoZXIgPSB0aGlzLl9jb21wdXRlZFdhdGNoZXJzICYmIHRoaXMuX2NvbXB1dGVkV2F0Y2hlcnNba2V5XTsKICAgICAgaWYgKHdhdGNoZXIpIHsKICAgICAgICBpZiAod2F0Y2hlci5kaXJ0eSkgewogICAgICAgICAgd2F0Y2hlci5ldmFsdWF0ZSgpOwogICAgICAgIH0KICAgICAgICBpZiAoRGVwLnRhcmdldCkgewogICAgICAgICAgd2F0Y2hlci5kZXBlbmQoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHdhdGNoZXIudmFsdWUKICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gY3JlYXRlR2V0dGVySW52b2tlcihmbikgewogICAgcmV0dXJuIGZ1bmN0aW9uIGNvbXB1dGVkR2V0dGVyICgpIHsKICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgdGhpcykKICAgIH0KICB9CgogIGZ1bmN0aW9uIGluaXRNZXRob2RzICh2bSwgbWV0aG9kcykgewogICAgdmFyIHByb3BzID0gdm0uJG9wdGlvbnMucHJvcHM7CiAgICBmb3IgKHZhciBrZXkgaW4gbWV0aG9kcykgewogICAgICB7CiAgICAgICAgaWYgKHR5cGVvZiBtZXRob2RzW2tleV0gIT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIHdhcm4oCiAgICAgICAgICAgICJNZXRob2QgXCIiICsga2V5ICsgIlwiIGhhcyB0eXBlIFwiIiArICh0eXBlb2YgbWV0aG9kc1trZXldKSArICJcIiBpbiB0aGUgY29tcG9uZW50IGRlZmluaXRpb24uICIgKwogICAgICAgICAgICAiRGlkIHlvdSByZWZlcmVuY2UgdGhlIGZ1bmN0aW9uIGNvcnJlY3RseT8iLAogICAgICAgICAgICB2bQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgaWYgKHByb3BzICYmIGhhc093bihwcm9wcywga2V5KSkgewogICAgICAgICAgd2FybigKICAgICAgICAgICAgKCJNZXRob2QgXCIiICsga2V5ICsgIlwiIGhhcyBhbHJlYWR5IGJlZW4gZGVmaW5lZCBhcyBhIHByb3AuIiksCiAgICAgICAgICAgIHZtCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBpZiAoKGtleSBpbiB2bSkgJiYgaXNSZXNlcnZlZChrZXkpKSB7CiAgICAgICAgICB3YXJuKAogICAgICAgICAgICAiTWV0aG9kIFwiIiArIGtleSArICJcIiBjb25mbGljdHMgd2l0aCBhbiBleGlzdGluZyBWdWUgaW5zdGFuY2UgbWV0aG9kLiAiICsKICAgICAgICAgICAgIkF2b2lkIGRlZmluaW5nIGNvbXBvbmVudCBtZXRob2RzIHRoYXQgc3RhcnQgd2l0aCBfIG9yICQuIgogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdm1ba2V5XSA9IHR5cGVvZiBtZXRob2RzW2tleV0gIT09ICdmdW5jdGlvbicgPyBub29wIDogYmluZChtZXRob2RzW2tleV0sIHZtKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGluaXRXYXRjaCAodm0sIHdhdGNoKSB7CiAgICBmb3IgKHZhciBrZXkgaW4gd2F0Y2gpIHsKICAgICAgdmFyIGhhbmRsZXIgPSB3YXRjaFtrZXldOwogICAgICBpZiAoQXJyYXkuaXNBcnJheShoYW5kbGVyKSkgewogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGFuZGxlci5sZW5ndGg7IGkrKykgewogICAgICAgICAgY3JlYXRlV2F0Y2hlcih2bSwga2V5LCBoYW5kbGVyW2ldKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY3JlYXRlV2F0Y2hlcih2bSwga2V5LCBoYW5kbGVyKTsKICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gY3JlYXRlV2F0Y2hlciAoCiAgICB2bSwKICAgIGV4cE9yRm4sCiAgICBoYW5kbGVyLAogICAgb3B0aW9ucwogICkgewogICAgaWYgKGlzUGxhaW5PYmplY3QoaGFuZGxlcikpIHsKICAgICAgb3B0aW9ucyA9IGhhbmRsZXI7CiAgICAgIGhhbmRsZXIgPSBoYW5kbGVyLmhhbmRsZXI7CiAgICB9CiAgICBpZiAodHlwZW9mIGhhbmRsZXIgPT09ICdzdHJpbmcnKSB7CiAgICAgIGhhbmRsZXIgPSB2bVtoYW5kbGVyXTsKICAgIH0KICAgIHJldHVybiB2bS4kd2F0Y2goZXhwT3JGbiwgaGFuZGxlciwgb3B0aW9ucykKICB9CgogIGZ1bmN0aW9uIHN0YXRlTWl4aW4gKFZ1ZSkgewogICAgLy8gZmxvdyBzb21laG93IGhhcyBwcm9ibGVtcyB3aXRoIGRpcmVjdGx5IGRlY2xhcmVkIGRlZmluaXRpb24gb2JqZWN0CiAgICAvLyB3aGVuIHVzaW5nIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSwgc28gd2UgaGF2ZSB0byBwcm9jZWR1cmFsbHkgYnVpbGQgdXAKICAgIC8vIHRoZSBvYmplY3QgaGVyZS4KICAgIHZhciBkYXRhRGVmID0ge307CiAgICBkYXRhRGVmLmdldCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX2RhdGEgfTsKICAgIHZhciBwcm9wc0RlZiA9IHt9OwogICAgcHJvcHNEZWYuZ2V0ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fcHJvcHMgfTsKICAgIHsKICAgICAgZGF0YURlZi5zZXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgd2FybigKICAgICAgICAgICdBdm9pZCByZXBsYWNpbmcgaW5zdGFuY2Ugcm9vdCAkZGF0YS4gJyArCiAgICAgICAgICAnVXNlIG5lc3RlZCBkYXRhIHByb3BlcnRpZXMgaW5zdGVhZC4nLAogICAgICAgICAgdGhpcwogICAgICAgICk7CiAgICAgIH07CiAgICAgIHByb3BzRGVmLnNldCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB3YXJuKCIkcHJvcHMgaXMgcmVhZG9ubHkuIiwgdGhpcyk7CiAgICAgIH07CiAgICB9CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwgJyRkYXRhJywgZGF0YURlZik7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwgJyRwcm9wcycsIHByb3BzRGVmKTsKCiAgICBWdWUucHJvdG90eXBlLiRzZXQgPSBzZXQ7CiAgICBWdWUucHJvdG90eXBlLiRkZWxldGUgPSBkZWw7CgogICAgVnVlLnByb3RvdHlwZS4kd2F0Y2ggPSBmdW5jdGlvbiAoCiAgICAgIGV4cE9yRm4sCiAgICAgIGNiLAogICAgICBvcHRpb25zCiAgICApIHsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgaWYgKGlzUGxhaW5PYmplY3QoY2IpKSB7CiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhdGNoZXIodm0sIGV4cE9yRm4sIGNiLCBvcHRpb25zKQogICAgICB9CiAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgICBvcHRpb25zLnVzZXIgPSB0cnVlOwogICAgICB2YXIgd2F0Y2hlciA9IG5ldyBXYXRjaGVyKHZtLCBleHBPckZuLCBjYiwgb3B0aW9ucyk7CiAgICAgIGlmIChvcHRpb25zLmltbWVkaWF0ZSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBjYi5jYWxsKHZtLCB3YXRjaGVyLnZhbHVlKTsKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgaGFuZGxlRXJyb3IoZXJyb3IsIHZtLCAoImNhbGxiYWNrIGZvciBpbW1lZGlhdGUgd2F0Y2hlciBcIiIgKyAod2F0Y2hlci5leHByZXNzaW9uKSArICJcIiIpKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGZ1bmN0aW9uIHVud2F0Y2hGbiAoKSB7CiAgICAgICAgd2F0Y2hlci50ZWFyZG93bigpOwogICAgICB9CiAgICB9OwogIH0KCiAgLyogICovCgogIHZhciB1aWQkMyA9IDA7CgogIGZ1bmN0aW9uIGluaXRNaXhpbiAoVnVlKSB7CiAgICBWdWUucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgLy8gYSB1aWQKICAgICAgdm0uX3VpZCA9IHVpZCQzKys7CgogICAgICB2YXIgc3RhcnRUYWcsIGVuZFRhZzsKICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICAgIGlmIChjb25maWcucGVyZm9ybWFuY2UgJiYgbWFyaykgewogICAgICAgIHN0YXJ0VGFnID0gInZ1ZS1wZXJmLXN0YXJ0OiIgKyAodm0uX3VpZCk7CiAgICAgICAgZW5kVGFnID0gInZ1ZS1wZXJmLWVuZDoiICsgKHZtLl91aWQpOwogICAgICAgIG1hcmsoc3RhcnRUYWcpOwogICAgICB9CgogICAgICAvLyBhIGZsYWcgdG8gYXZvaWQgdGhpcyBiZWluZyBvYnNlcnZlZAogICAgICB2bS5faXNWdWUgPSB0cnVlOwogICAgICAvLyBtZXJnZSBvcHRpb25zCiAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuX2lzQ29tcG9uZW50KSB7CiAgICAgICAgLy8gb3B0aW1pemUgaW50ZXJuYWwgY29tcG9uZW50IGluc3RhbnRpYXRpb24KICAgICAgICAvLyBzaW5jZSBkeW5hbWljIG9wdGlvbnMgbWVyZ2luZyBpcyBwcmV0dHkgc2xvdywgYW5kIG5vbmUgb2YgdGhlCiAgICAgICAgLy8gaW50ZXJuYWwgY29tcG9uZW50IG9wdGlvbnMgbmVlZHMgc3BlY2lhbCB0cmVhdG1lbnQuCiAgICAgICAgaW5pdEludGVybmFsQ29tcG9uZW50KHZtLCBvcHRpb25zKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2bS4kb3B0aW9ucyA9IG1lcmdlT3B0aW9ucygKICAgICAgICAgIHJlc29sdmVDb25zdHJ1Y3Rvck9wdGlvbnModm0uY29uc3RydWN0b3IpLAogICAgICAgICAgb3B0aW9ucyB8fCB7fSwKICAgICAgICAgIHZtCiAgICAgICAgKTsKICAgICAgfQogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqLwogICAgICB7CiAgICAgICAgaW5pdFByb3h5KHZtKTsKICAgICAgfQogICAgICAvLyBleHBvc2UgcmVhbCBzZWxmCiAgICAgIHZtLl9zZWxmID0gdm07CiAgICAgIGluaXRMaWZlY3ljbGUodm0pOwogICAgICBpbml0RXZlbnRzKHZtKTsKICAgICAgaW5pdFJlbmRlcih2bSk7CiAgICAgIGNhbGxIb29rKHZtLCAnYmVmb3JlQ3JlYXRlJyk7CiAgICAgIGluaXRJbmplY3Rpb25zKHZtKTsgLy8gcmVzb2x2ZSBpbmplY3Rpb25zIGJlZm9yZSBkYXRhL3Byb3BzCiAgICAgIGluaXRTdGF0ZSh2bSk7CiAgICAgIGluaXRQcm92aWRlKHZtKTsgLy8gcmVzb2x2ZSBwcm92aWRlIGFmdGVyIGRhdGEvcHJvcHMKICAgICAgY2FsbEhvb2sodm0sICdjcmVhdGVkJyk7CgogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgaWYgKGNvbmZpZy5wZXJmb3JtYW5jZSAmJiBtYXJrKSB7CiAgICAgICAgdm0uX25hbWUgPSBmb3JtYXRDb21wb25lbnROYW1lKHZtLCBmYWxzZSk7CiAgICAgICAgbWFyayhlbmRUYWcpOwogICAgICAgIG1lYXN1cmUoKCJ2dWUgIiArICh2bS5fbmFtZSkgKyAiIGluaXQiKSwgc3RhcnRUYWcsIGVuZFRhZyk7CiAgICAgIH0KCiAgICAgIGlmICh2bS4kb3B0aW9ucy5lbCkgewogICAgICAgIHZtLiRtb3VudCh2bS4kb3B0aW9ucy5lbCk7CiAgICAgIH0KICAgIH07CiAgfQoKICBmdW5jdGlvbiBpbml0SW50ZXJuYWxDb21wb25lbnQgKHZtLCBvcHRpb25zKSB7CiAgICB2YXIgb3B0cyA9IHZtLiRvcHRpb25zID0gT2JqZWN0LmNyZWF0ZSh2bS5jb25zdHJ1Y3Rvci5vcHRpb25zKTsKICAgIC8vIGRvaW5nIHRoaXMgYmVjYXVzZSBpdCdzIGZhc3RlciB0aGFuIGR5bmFtaWMgZW51bWVyYXRpb24uCiAgICB2YXIgcGFyZW50Vm5vZGUgPSBvcHRpb25zLl9wYXJlbnRWbm9kZTsKICAgIG9wdHMucGFyZW50ID0gb3B0aW9ucy5wYXJlbnQ7CiAgICBvcHRzLl9wYXJlbnRWbm9kZSA9IHBhcmVudFZub2RlOwoKICAgIHZhciB2bm9kZUNvbXBvbmVudE9wdGlvbnMgPSBwYXJlbnRWbm9kZS5jb21wb25lbnRPcHRpb25zOwogICAgb3B0cy5wcm9wc0RhdGEgPSB2bm9kZUNvbXBvbmVudE9wdGlvbnMucHJvcHNEYXRhOwogICAgb3B0cy5fcGFyZW50TGlzdGVuZXJzID0gdm5vZGVDb21wb25lbnRPcHRpb25zLmxpc3RlbmVyczsKICAgIG9wdHMuX3JlbmRlckNoaWxkcmVuID0gdm5vZGVDb21wb25lbnRPcHRpb25zLmNoaWxkcmVuOwogICAgb3B0cy5fY29tcG9uZW50VGFnID0gdm5vZGVDb21wb25lbnRPcHRpb25zLnRhZzsKCiAgICBpZiAob3B0aW9ucy5yZW5kZXIpIHsKICAgICAgb3B0cy5yZW5kZXIgPSBvcHRpb25zLnJlbmRlcjsKICAgICAgb3B0cy5zdGF0aWNSZW5kZXJGbnMgPSBvcHRpb25zLnN0YXRpY1JlbmRlckZuczsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHJlc29sdmVDb25zdHJ1Y3Rvck9wdGlvbnMgKEN0b3IpIHsKICAgIHZhciBvcHRpb25zID0gQ3Rvci5vcHRpb25zOwogICAgaWYgKEN0b3Iuc3VwZXIpIHsKICAgICAgdmFyIHN1cGVyT3B0aW9ucyA9IHJlc29sdmVDb25zdHJ1Y3Rvck9wdGlvbnMoQ3Rvci5zdXBlcik7CiAgICAgIHZhciBjYWNoZWRTdXBlck9wdGlvbnMgPSBDdG9yLnN1cGVyT3B0aW9uczsKICAgICAgaWYgKHN1cGVyT3B0aW9ucyAhPT0gY2FjaGVkU3VwZXJPcHRpb25zKSB7CiAgICAgICAgLy8gc3VwZXIgb3B0aW9uIGNoYW5nZWQsCiAgICAgICAgLy8gbmVlZCB0byByZXNvbHZlIG5ldyBvcHRpb25zLgogICAgICAgIEN0b3Iuc3VwZXJPcHRpb25zID0gc3VwZXJPcHRpb25zOwogICAgICAgIC8vIGNoZWNrIGlmIHRoZXJlIGFyZSBhbnkgbGF0ZS1tb2RpZmllZC9hdHRhY2hlZCBvcHRpb25zICgjNDk3NikKICAgICAgICB2YXIgbW9kaWZpZWRPcHRpb25zID0gcmVzb2x2ZU1vZGlmaWVkT3B0aW9ucyhDdG9yKTsKICAgICAgICAvLyB1cGRhdGUgYmFzZSBleHRlbmQgb3B0aW9ucwogICAgICAgIGlmIChtb2RpZmllZE9wdGlvbnMpIHsKICAgICAgICAgIGV4dGVuZChDdG9yLmV4dGVuZE9wdGlvbnMsIG1vZGlmaWVkT3B0aW9ucyk7CiAgICAgICAgfQogICAgICAgIG9wdGlvbnMgPSBDdG9yLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoc3VwZXJPcHRpb25zLCBDdG9yLmV4dGVuZE9wdGlvbnMpOwogICAgICAgIGlmIChvcHRpb25zLm5hbWUpIHsKICAgICAgICAgIG9wdGlvbnMuY29tcG9uZW50c1tvcHRpb25zLm5hbWVdID0gQ3RvcjsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBvcHRpb25zCiAgfQoKICBmdW5jdGlvbiByZXNvbHZlTW9kaWZpZWRPcHRpb25zIChDdG9yKSB7CiAgICB2YXIgbW9kaWZpZWQ7CiAgICB2YXIgbGF0ZXN0ID0gQ3Rvci5vcHRpb25zOwogICAgdmFyIHNlYWxlZCA9IEN0b3Iuc2VhbGVkT3B0aW9uczsKICAgIGZvciAodmFyIGtleSBpbiBsYXRlc3QpIHsKICAgICAgaWYgKGxhdGVzdFtrZXldICE9PSBzZWFsZWRba2V5XSkgewogICAgICAgIGlmICghbW9kaWZpZWQpIHsgbW9kaWZpZWQgPSB7fTsgfQogICAgICAgIG1vZGlmaWVkW2tleV0gPSBsYXRlc3Rba2V5XTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIG1vZGlmaWVkCiAgfQoKICBmdW5jdGlvbiBWdWUgKG9wdGlvbnMpIHsKICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBWdWUpCiAgICApIHsKICAgICAgd2FybignVnVlIGlzIGEgY29uc3RydWN0b3IgYW5kIHNob3VsZCBiZSBjYWxsZWQgd2l0aCB0aGUgYG5ld2Aga2V5d29yZCcpOwogICAgfQogICAgdGhpcy5faW5pdChvcHRpb25zKTsKICB9CgogIGluaXRNaXhpbihWdWUpOwogIHN0YXRlTWl4aW4oVnVlKTsKICBldmVudHNNaXhpbihWdWUpOwogIGxpZmVjeWNsZU1peGluKFZ1ZSk7CiAgcmVuZGVyTWl4aW4oVnVlKTsKCiAgLyogICovCgogIGZ1bmN0aW9uIGluaXRVc2UgKFZ1ZSkgewogICAgVnVlLnVzZSA9IGZ1bmN0aW9uIChwbHVnaW4pIHsKICAgICAgdmFyIGluc3RhbGxlZFBsdWdpbnMgPSAodGhpcy5faW5zdGFsbGVkUGx1Z2lucyB8fCAodGhpcy5faW5zdGFsbGVkUGx1Z2lucyA9IFtdKSk7CiAgICAgIGlmIChpbnN0YWxsZWRQbHVnaW5zLmluZGV4T2YocGx1Z2luKSA+IC0xKSB7CiAgICAgICAgcmV0dXJuIHRoaXMKICAgICAgfQoKICAgICAgLy8gYWRkaXRpb25hbCBwYXJhbWV0ZXJzCiAgICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpOwogICAgICBhcmdzLnVuc2hpZnQodGhpcyk7CiAgICAgIGlmICh0eXBlb2YgcGx1Z2luLmluc3RhbGwgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICBwbHVnaW4uaW5zdGFsbC5hcHBseShwbHVnaW4sIGFyZ3MpOwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBwbHVnaW4gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICBwbHVnaW4uYXBwbHkobnVsbCwgYXJncyk7CiAgICAgIH0KICAgICAgaW5zdGFsbGVkUGx1Z2lucy5wdXNoKHBsdWdpbik7CiAgICAgIHJldHVybiB0aGlzCiAgICB9OwogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIGluaXRNaXhpbiQxIChWdWUpIHsKICAgIFZ1ZS5taXhpbiA9IGZ1bmN0aW9uIChtaXhpbikgewogICAgICB0aGlzLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnModGhpcy5vcHRpb25zLCBtaXhpbik7CiAgICAgIHJldHVybiB0aGlzCiAgICB9OwogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIGluaXRFeHRlbmQgKFZ1ZSkgewogICAgLyoqCiAgICAgKiBFYWNoIGluc3RhbmNlIGNvbnN0cnVjdG9yLCBpbmNsdWRpbmcgVnVlLCBoYXMgYSB1bmlxdWUKICAgICAqIGNpZC4gVGhpcyBlbmFibGVzIHVzIHRvIGNyZWF0ZSB3cmFwcGVkICJjaGlsZAogICAgICogY29uc3RydWN0b3JzIiBmb3IgcHJvdG90eXBhbCBpbmhlcml0YW5jZSBhbmQgY2FjaGUgdGhlbS4KICAgICAqLwogICAgVnVlLmNpZCA9IDA7CiAgICB2YXIgY2lkID0gMTsKCiAgICAvKioKICAgICAqIENsYXNzIGluaGVyaXRhbmNlCiAgICAgKi8KICAgIFZ1ZS5leHRlbmQgPSBmdW5jdGlvbiAoZXh0ZW5kT3B0aW9ucykgewogICAgICBleHRlbmRPcHRpb25zID0gZXh0ZW5kT3B0aW9ucyB8fCB7fTsKICAgICAgdmFyIFN1cGVyID0gdGhpczsKICAgICAgdmFyIFN1cGVySWQgPSBTdXBlci5jaWQ7CiAgICAgIHZhciBjYWNoZWRDdG9ycyA9IGV4dGVuZE9wdGlvbnMuX0N0b3IgfHwgKGV4dGVuZE9wdGlvbnMuX0N0b3IgPSB7fSk7CiAgICAgIGlmIChjYWNoZWRDdG9yc1tTdXBlcklkXSkgewogICAgICAgIHJldHVybiBjYWNoZWRDdG9yc1tTdXBlcklkXQogICAgICB9CgogICAgICB2YXIgbmFtZSA9IGV4dGVuZE9wdGlvbnMubmFtZSB8fCBTdXBlci5vcHRpb25zLm5hbWU7CiAgICAgIGlmIChuYW1lKSB7CiAgICAgICAgdmFsaWRhdGVDb21wb25lbnROYW1lKG5hbWUpOwogICAgICB9CgogICAgICB2YXIgU3ViID0gZnVuY3Rpb24gVnVlQ29tcG9uZW50IChvcHRpb25zKSB7CiAgICAgICAgdGhpcy5faW5pdChvcHRpb25zKTsKICAgICAgfTsKICAgICAgU3ViLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3VwZXIucHJvdG90eXBlKTsKICAgICAgU3ViLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFN1YjsKICAgICAgU3ViLmNpZCA9IGNpZCsrOwogICAgICBTdWIub3B0aW9ucyA9IG1lcmdlT3B0aW9ucygKICAgICAgICBTdXBlci5vcHRpb25zLAogICAgICAgIGV4dGVuZE9wdGlvbnMKICAgICAgKTsKICAgICAgU3ViWydzdXBlciddID0gU3VwZXI7CgogICAgICAvLyBGb3IgcHJvcHMgYW5kIGNvbXB1dGVkIHByb3BlcnRpZXMsIHdlIGRlZmluZSB0aGUgcHJveHkgZ2V0dGVycyBvbgogICAgICAvLyB0aGUgVnVlIGluc3RhbmNlcyBhdCBleHRlbnNpb24gdGltZSwgb24gdGhlIGV4dGVuZGVkIHByb3RvdHlwZS4gVGhpcwogICAgICAvLyBhdm9pZHMgT2JqZWN0LmRlZmluZVByb3BlcnR5IGNhbGxzIGZvciBlYWNoIGluc3RhbmNlIGNyZWF0ZWQuCiAgICAgIGlmIChTdWIub3B0aW9ucy5wcm9wcykgewogICAgICAgIGluaXRQcm9wcyQxKFN1Yik7CiAgICAgIH0KICAgICAgaWYgKFN1Yi5vcHRpb25zLmNvbXB1dGVkKSB7CiAgICAgICAgaW5pdENvbXB1dGVkJDEoU3ViKTsKICAgICAgfQoKICAgICAgLy8gYWxsb3cgZnVydGhlciBleHRlbnNpb24vbWl4aW4vcGx1Z2luIHVzYWdlCiAgICAgIFN1Yi5leHRlbmQgPSBTdXBlci5leHRlbmQ7CiAgICAgIFN1Yi5taXhpbiA9IFN1cGVyLm1peGluOwogICAgICBTdWIudXNlID0gU3VwZXIudXNlOwoKICAgICAgLy8gY3JlYXRlIGFzc2V0IHJlZ2lzdGVycywgc28gZXh0ZW5kZWQgY2xhc3NlcwogICAgICAvLyBjYW4gaGF2ZSB0aGVpciBwcml2YXRlIGFzc2V0cyB0b28uCiAgICAgIEFTU0VUX1RZUEVTLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHsKICAgICAgICBTdWJbdHlwZV0gPSBTdXBlclt0eXBlXTsKICAgICAgfSk7CiAgICAgIC8vIGVuYWJsZSByZWN1cnNpdmUgc2VsZi1sb29rdXAKICAgICAgaWYgKG5hbWUpIHsKICAgICAgICBTdWIub3B0aW9ucy5jb21wb25lbnRzW25hbWVdID0gU3ViOwogICAgICB9CgogICAgICAvLyBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZSBzdXBlciBvcHRpb25zIGF0IGV4dGVuc2lvbiB0aW1lLgogICAgICAvLyBsYXRlciBhdCBpbnN0YW50aWF0aW9uIHdlIGNhbiBjaGVjayBpZiBTdXBlcidzIG9wdGlvbnMgaGF2ZQogICAgICAvLyBiZWVuIHVwZGF0ZWQuCiAgICAgIFN1Yi5zdXBlck9wdGlvbnMgPSBTdXBlci5vcHRpb25zOwogICAgICBTdWIuZXh0ZW5kT3B0aW9ucyA9IGV4dGVuZE9wdGlvbnM7CiAgICAgIFN1Yi5zZWFsZWRPcHRpb25zID0gZXh0ZW5kKHt9LCBTdWIub3B0aW9ucyk7CgogICAgICAvLyBjYWNoZSBjb25zdHJ1Y3RvcgogICAgICBjYWNoZWRDdG9yc1tTdXBlcklkXSA9IFN1YjsKICAgICAgcmV0dXJuIFN1YgogICAgfTsKICB9CgogIGZ1bmN0aW9uIGluaXRQcm9wcyQxIChDb21wKSB7CiAgICB2YXIgcHJvcHMgPSBDb21wLm9wdGlvbnMucHJvcHM7CiAgICBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHsKICAgICAgcHJveHkoQ29tcC5wcm90b3R5cGUsICJfcHJvcHMiLCBrZXkpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gaW5pdENvbXB1dGVkJDEgKENvbXApIHsKICAgIHZhciBjb21wdXRlZCA9IENvbXAub3B0aW9ucy5jb21wdXRlZDsKICAgIGZvciAodmFyIGtleSBpbiBjb21wdXRlZCkgewogICAgICBkZWZpbmVDb21wdXRlZChDb21wLnByb3RvdHlwZSwga2V5LCBjb21wdXRlZFtrZXldKTsKICAgIH0KICB9CgogIC8qICAqLwoKICBmdW5jdGlvbiBpbml0QXNzZXRSZWdpc3RlcnMgKFZ1ZSkgewogICAgLyoqCiAgICAgKiBDcmVhdGUgYXNzZXQgcmVnaXN0cmF0aW9uIG1ldGhvZHMuCiAgICAgKi8KICAgIEFTU0VUX1RZUEVTLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHsKICAgICAgVnVlW3R5cGVdID0gZnVuY3Rpb24gKAogICAgICAgIGlkLAogICAgICAgIGRlZmluaXRpb24KICAgICAgKSB7CiAgICAgICAgaWYgKCFkZWZpbml0aW9uKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zW3R5cGUgKyAncyddW2lkXQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgICAgIGlmICh0eXBlID09PSAnY29tcG9uZW50JykgewogICAgICAgICAgICB2YWxpZGF0ZUNvbXBvbmVudE5hbWUoaWQpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHR5cGUgPT09ICdjb21wb25lbnQnICYmIGlzUGxhaW5PYmplY3QoZGVmaW5pdGlvbikpIHsKICAgICAgICAgICAgZGVmaW5pdGlvbi5uYW1lID0gZGVmaW5pdGlvbi5uYW1lIHx8IGlkOwogICAgICAgICAgICBkZWZpbml0aW9uID0gdGhpcy5vcHRpb25zLl9iYXNlLmV4dGVuZChkZWZpbml0aW9uKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0eXBlID09PSAnZGlyZWN0aXZlJyAmJiB0eXBlb2YgZGVmaW5pdGlvbiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICBkZWZpbml0aW9uID0geyBiaW5kOiBkZWZpbml0aW9uLCB1cGRhdGU6IGRlZmluaXRpb24gfTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMub3B0aW9uc1t0eXBlICsgJ3MnXVtpZF0gPSBkZWZpbml0aW9uOwogICAgICAgICAgcmV0dXJuIGRlZmluaXRpb24KICAgICAgICB9CiAgICAgIH07CiAgICB9KTsKICB9CgogIC8qICAqLwoKCgogIGZ1bmN0aW9uIGdldENvbXBvbmVudE5hbWUgKG9wdHMpIHsKICAgIHJldHVybiBvcHRzICYmIChvcHRzLkN0b3Iub3B0aW9ucy5uYW1lIHx8IG9wdHMudGFnKQogIH0KCiAgZnVuY3Rpb24gbWF0Y2hlcyAocGF0dGVybiwgbmFtZSkgewogICAgaWYgKEFycmF5LmlzQXJyYXkocGF0dGVybikpIHsKICAgICAgcmV0dXJuIHBhdHRlcm4uaW5kZXhPZihuYW1lKSA+IC0xCiAgICB9IGVsc2UgaWYgKHR5cGVvZiBwYXR0ZXJuID09PSAnc3RyaW5nJykgewogICAgICByZXR1cm4gcGF0dGVybi5zcGxpdCgnLCcpLmluZGV4T2YobmFtZSkgPiAtMQogICAgfSBlbHNlIGlmIChpc1JlZ0V4cChwYXR0ZXJuKSkgewogICAgICByZXR1cm4gcGF0dGVybi50ZXN0KG5hbWUpCiAgICB9CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogICAgcmV0dXJuIGZhbHNlCiAgfQoKICBmdW5jdGlvbiBwcnVuZUNhY2hlIChrZWVwQWxpdmVJbnN0YW5jZSwgZmlsdGVyKSB7CiAgICB2YXIgY2FjaGUgPSBrZWVwQWxpdmVJbnN0YW5jZS5jYWNoZTsKICAgIHZhciBrZXlzID0ga2VlcEFsaXZlSW5zdGFuY2Uua2V5czsKICAgIHZhciBfdm5vZGUgPSBrZWVwQWxpdmVJbnN0YW5jZS5fdm5vZGU7CiAgICBmb3IgKHZhciBrZXkgaW4gY2FjaGUpIHsKICAgICAgdmFyIGNhY2hlZE5vZGUgPSBjYWNoZVtrZXldOwogICAgICBpZiAoY2FjaGVkTm9kZSkgewogICAgICAgIHZhciBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZShjYWNoZWROb2RlLmNvbXBvbmVudE9wdGlvbnMpOwogICAgICAgIGlmIChuYW1lICYmICFmaWx0ZXIobmFtZSkpIHsKICAgICAgICAgIHBydW5lQ2FjaGVFbnRyeShjYWNoZSwga2V5LCBrZXlzLCBfdm5vZGUpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gcHJ1bmVDYWNoZUVudHJ5ICgKICAgIGNhY2hlLAogICAga2V5LAogICAga2V5cywKICAgIGN1cnJlbnQKICApIHsKICAgIHZhciBjYWNoZWQkJDEgPSBjYWNoZVtrZXldOwogICAgaWYgKGNhY2hlZCQkMSAmJiAoIWN1cnJlbnQgfHwgY2FjaGVkJCQxLnRhZyAhPT0gY3VycmVudC50YWcpKSB7CiAgICAgIGNhY2hlZCQkMS5jb21wb25lbnRJbnN0YW5jZS4kZGVzdHJveSgpOwogICAgfQogICAgY2FjaGVba2V5XSA9IG51bGw7CiAgICByZW1vdmUoa2V5cywga2V5KTsKICB9CgogIHZhciBwYXR0ZXJuVHlwZXMgPSBbU3RyaW5nLCBSZWdFeHAsIEFycmF5XTsKCiAgdmFyIEtlZXBBbGl2ZSA9IHsKICAgIG5hbWU6ICdrZWVwLWFsaXZlJywKICAgIGFic3RyYWN0OiB0cnVlLAoKICAgIHByb3BzOiB7CiAgICAgIGluY2x1ZGU6IHBhdHRlcm5UeXBlcywKICAgICAgZXhjbHVkZTogcGF0dGVyblR5cGVzLAogICAgICBtYXg6IFtTdHJpbmcsIE51bWJlcl0KICAgIH0sCgogICAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCAoKSB7CiAgICAgIHRoaXMuY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgICB0aGlzLmtleXMgPSBbXTsKICAgIH0sCgogICAgZGVzdHJveWVkOiBmdW5jdGlvbiBkZXN0cm95ZWQgKCkgewogICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5jYWNoZSkgewogICAgICAgIHBydW5lQ2FjaGVFbnRyeSh0aGlzLmNhY2hlLCBrZXksIHRoaXMua2V5cyk7CiAgICAgIH0KICAgIH0sCgogICAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCAoKSB7CiAgICAgIHZhciB0aGlzJDEgPSB0aGlzOwoKICAgICAgdGhpcy4kd2F0Y2goJ2luY2x1ZGUnLCBmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgcHJ1bmVDYWNoZSh0aGlzJDEsIGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBtYXRjaGVzKHZhbCwgbmFtZSk7IH0pOwogICAgICB9KTsKICAgICAgdGhpcy4kd2F0Y2goJ2V4Y2x1ZGUnLCBmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgcHJ1bmVDYWNoZSh0aGlzJDEsIGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiAhbWF0Y2hlcyh2YWwsIG5hbWUpOyB9KTsKICAgICAgfSk7CiAgICB9LAoKICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyICgpIHsKICAgICAgdmFyIHNsb3QgPSB0aGlzLiRzbG90cy5kZWZhdWx0OwogICAgICB2YXIgdm5vZGUgPSBnZXRGaXJzdENvbXBvbmVudENoaWxkKHNsb3QpOwogICAgICB2YXIgY29tcG9uZW50T3B0aW9ucyA9IHZub2RlICYmIHZub2RlLmNvbXBvbmVudE9wdGlvbnM7CiAgICAgIGlmIChjb21wb25lbnRPcHRpb25zKSB7CiAgICAgICAgLy8gY2hlY2sgcGF0dGVybgogICAgICAgIHZhciBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZShjb21wb25lbnRPcHRpb25zKTsKICAgICAgICB2YXIgcmVmID0gdGhpczsKICAgICAgICB2YXIgaW5jbHVkZSA9IHJlZi5pbmNsdWRlOwogICAgICAgIHZhciBleGNsdWRlID0gcmVmLmV4Y2x1ZGU7CiAgICAgICAgaWYgKAogICAgICAgICAgLy8gbm90IGluY2x1ZGVkCiAgICAgICAgICAoaW5jbHVkZSAmJiAoIW5hbWUgfHwgIW1hdGNoZXMoaW5jbHVkZSwgbmFtZSkpKSB8fAogICAgICAgICAgLy8gZXhjbHVkZWQKICAgICAgICAgIChleGNsdWRlICYmIG5hbWUgJiYgbWF0Y2hlcyhleGNsdWRlLCBuYW1lKSkKICAgICAgICApIHsKICAgICAgICAgIHJldHVybiB2bm9kZQogICAgICAgIH0KCiAgICAgICAgdmFyIHJlZiQxID0gdGhpczsKICAgICAgICB2YXIgY2FjaGUgPSByZWYkMS5jYWNoZTsKICAgICAgICB2YXIga2V5cyA9IHJlZiQxLmtleXM7CiAgICAgICAgdmFyIGtleSA9IHZub2RlLmtleSA9PSBudWxsCiAgICAgICAgICAvLyBzYW1lIGNvbnN0cnVjdG9yIG1heSBnZXQgcmVnaXN0ZXJlZCBhcyBkaWZmZXJlbnQgbG9jYWwgY29tcG9uZW50cwogICAgICAgICAgLy8gc28gY2lkIGFsb25lIGlzIG5vdCBlbm91Z2ggKCMzMjY5KQogICAgICAgICAgPyBjb21wb25lbnRPcHRpb25zLkN0b3IuY2lkICsgKGNvbXBvbmVudE9wdGlvbnMudGFnID8gKCI6OiIgKyAoY29tcG9uZW50T3B0aW9ucy50YWcpKSA6ICcnKQogICAgICAgICAgOiB2bm9kZS5rZXk7CiAgICAgICAgaWYgKGNhY2hlW2tleV0pIHsKICAgICAgICAgIHZub2RlLmNvbXBvbmVudEluc3RhbmNlID0gY2FjaGVba2V5XS5jb21wb25lbnRJbnN0YW5jZTsKICAgICAgICAgIC8vIG1ha2UgY3VycmVudCBrZXkgZnJlc2hlc3QKICAgICAgICAgIHJlbW92ZShrZXlzLCBrZXkpOwogICAgICAgICAga2V5cy5wdXNoKGtleSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNhY2hlW2tleV0gPSB2bm9kZTsKICAgICAgICAgIGtleXMucHVzaChrZXkpOwogICAgICAgICAgLy8gcHJ1bmUgb2xkZXN0IGVudHJ5CiAgICAgICAgICBpZiAodGhpcy5tYXggJiYga2V5cy5sZW5ndGggPiBwYXJzZUludCh0aGlzLm1heCkpIHsKICAgICAgICAgICAgcHJ1bmVDYWNoZUVudHJ5KGNhY2hlLCBrZXlzWzBdLCBrZXlzLCB0aGlzLl92bm9kZSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2bm9kZS5kYXRhLmtlZXBBbGl2ZSA9IHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuIHZub2RlIHx8IChzbG90ICYmIHNsb3RbMF0pCiAgICB9CiAgfTsKCiAgdmFyIGJ1aWx0SW5Db21wb25lbnRzID0gewogICAgS2VlcEFsaXZlOiBLZWVwQWxpdmUKICB9OwoKICAvKiAgKi8KCiAgZnVuY3Rpb24gaW5pdEdsb2JhbEFQSSAoVnVlKSB7CiAgICAvLyBjb25maWcKICAgIHZhciBjb25maWdEZWYgPSB7fTsKICAgIGNvbmZpZ0RlZi5nZXQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBjb25maWc7IH07CiAgICB7CiAgICAgIGNvbmZpZ0RlZi5zZXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgd2FybigKICAgICAgICAgICdEbyBub3QgcmVwbGFjZSB0aGUgVnVlLmNvbmZpZyBvYmplY3QsIHNldCBpbmRpdmlkdWFsIGZpZWxkcyBpbnN0ZWFkLicKICAgICAgICApOwogICAgICB9OwogICAgfQogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZSwgJ2NvbmZpZycsIGNvbmZpZ0RlZik7CgogICAgLy8gZXhwb3NlZCB1dGlsIG1ldGhvZHMuCiAgICAvLyBOT1RFOiB0aGVzZSBhcmUgbm90IGNvbnNpZGVyZWQgcGFydCBvZiB0aGUgcHVibGljIEFQSSAtIGF2b2lkIHJlbHlpbmcgb24KICAgIC8vIHRoZW0gdW5sZXNzIHlvdSBhcmUgYXdhcmUgb2YgdGhlIHJpc2suCiAgICBWdWUudXRpbCA9IHsKICAgICAgd2Fybjogd2FybiwKICAgICAgZXh0ZW5kOiBleHRlbmQsCiAgICAgIG1lcmdlT3B0aW9uczogbWVyZ2VPcHRpb25zLAogICAgICBkZWZpbmVSZWFjdGl2ZTogZGVmaW5lUmVhY3RpdmUkJDEKICAgIH07CgogICAgVnVlLnNldCA9IHNldDsKICAgIFZ1ZS5kZWxldGUgPSBkZWw7CiAgICBWdWUubmV4dFRpY2sgPSBuZXh0VGljazsKCiAgICAvLyAyLjYgZXhwbGljaXQgb2JzZXJ2YWJsZSBBUEkKICAgIFZ1ZS5vYnNlcnZhYmxlID0gZnVuY3Rpb24gKG9iaikgewogICAgICBvYnNlcnZlKG9iaik7CiAgICAgIHJldHVybiBvYmoKICAgIH07CgogICAgVnVlLm9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgQVNTRVRfVFlQRVMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkgewogICAgICBWdWUub3B0aW9uc1t0eXBlICsgJ3MnXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICB9KTsKCiAgICAvLyB0aGlzIGlzIHVzZWQgdG8gaWRlbnRpZnkgdGhlICJiYXNlIiBjb25zdHJ1Y3RvciB0byBleHRlbmQgYWxsIHBsYWluLW9iamVjdAogICAgLy8gY29tcG9uZW50cyB3aXRoIGluIFdlZXgncyBtdWx0aS1pbnN0YW5jZSBzY2VuYXJpb3MuCiAgICBWdWUub3B0aW9ucy5fYmFzZSA9IFZ1ZTsKCiAgICBleHRlbmQoVnVlLm9wdGlvbnMuY29tcG9uZW50cywgYnVpbHRJbkNvbXBvbmVudHMpOwoKICAgIGluaXRVc2UoVnVlKTsKICAgIGluaXRNaXhpbiQxKFZ1ZSk7CiAgICBpbml0RXh0ZW5kKFZ1ZSk7CiAgICBpbml0QXNzZXRSZWdpc3RlcnMoVnVlKTsKICB9CgogIGluaXRHbG9iYWxBUEkoVnVlKTsKCiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZS5wcm90b3R5cGUsICckaXNTZXJ2ZXInLCB7CiAgICBnZXQ6IGlzU2VydmVyUmVuZGVyaW5nCiAgfSk7CgogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUucHJvdG90eXBlLCAnJHNzckNvbnRleHQnLCB7CiAgICBnZXQ6IGZ1bmN0aW9uIGdldCAoKSB7CiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgICAgIHJldHVybiB0aGlzLiR2bm9kZSAmJiB0aGlzLiR2bm9kZS5zc3JDb250ZXh0CiAgICB9CiAgfSk7CgogIC8vIGV4cG9zZSBGdW5jdGlvbmFsUmVuZGVyQ29udGV4dCBmb3Igc3NyIHJ1bnRpbWUgaGVscGVyIGluc3RhbGxhdGlvbgogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUsICdGdW5jdGlvbmFsUmVuZGVyQ29udGV4dCcsIHsKICAgIHZhbHVlOiBGdW5jdGlvbmFsUmVuZGVyQ29udGV4dAogIH0pOwoKICBWdWUudmVyc2lvbiA9ICcyLjYuMTEnOwoKICAvKiAgKi8KCiAgLy8gdGhlc2UgYXJlIHJlc2VydmVkIGZvciB3ZWIgYmVjYXVzZSB0aGV5IGFyZSBkaXJlY3RseSBjb21waWxlZCBhd2F5CiAgLy8gZHVyaW5nIHRlbXBsYXRlIGNvbXBpbGF0aW9uCiAgdmFyIGlzUmVzZXJ2ZWRBdHRyID0gbWFrZU1hcCgnc3R5bGUsY2xhc3MnKTsKCiAgLy8gYXR0cmlidXRlcyB0aGF0IHNob3VsZCBiZSB1c2luZyBwcm9wcyBmb3IgYmluZGluZwogIHZhciBhY2NlcHRWYWx1ZSA9IG1ha2VNYXAoJ2lucHV0LHRleHRhcmVhLG9wdGlvbixzZWxlY3QscHJvZ3Jlc3MnKTsKICB2YXIgbXVzdFVzZVByb3AgPSBmdW5jdGlvbiAodGFnLCB0eXBlLCBhdHRyKSB7CiAgICByZXR1cm4gKAogICAgICAoYXR0ciA9PT0gJ3ZhbHVlJyAmJiBhY2NlcHRWYWx1ZSh0YWcpKSAmJiB0eXBlICE9PSAnYnV0dG9uJyB8fAogICAgICAoYXR0ciA9PT0gJ3NlbGVjdGVkJyAmJiB0YWcgPT09ICdvcHRpb24nKSB8fAogICAgICAoYXR0ciA9PT0gJ2NoZWNrZWQnICYmIHRhZyA9PT0gJ2lucHV0JykgfHwKICAgICAgKGF0dHIgPT09ICdtdXRlZCcgJiYgdGFnID09PSAndmlkZW8nKQogICAgKQogIH07CgogIHZhciBpc0VudW1lcmF0ZWRBdHRyID0gbWFrZU1hcCgnY29udGVudGVkaXRhYmxlLGRyYWdnYWJsZSxzcGVsbGNoZWNrJyk7CgogIHZhciBpc1ZhbGlkQ29udGVudEVkaXRhYmxlVmFsdWUgPSBtYWtlTWFwKCdldmVudHMsY2FyZXQsdHlwaW5nLHBsYWludGV4dC1vbmx5Jyk7CgogIHZhciBjb252ZXJ0RW51bWVyYXRlZFZhbHVlID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHsKICAgIHJldHVybiBpc0ZhbHN5QXR0clZhbHVlKHZhbHVlKSB8fCB2YWx1ZSA9PT0gJ2ZhbHNlJwogICAgICA/ICdmYWxzZScKICAgICAgLy8gYWxsb3cgYXJiaXRyYXJ5IHN0cmluZyB2YWx1ZSBmb3IgY29udGVudGVkaXRhYmxlCiAgICAgIDoga2V5ID09PSAnY29udGVudGVkaXRhYmxlJyAmJiBpc1ZhbGlkQ29udGVudEVkaXRhYmxlVmFsdWUodmFsdWUpCiAgICAgICAgPyB2YWx1ZQogICAgICAgIDogJ3RydWUnCiAgfTsKCiAgdmFyIGlzQm9vbGVhbkF0dHIgPSBtYWtlTWFwKAogICAgJ2FsbG93ZnVsbHNjcmVlbixhc3luYyxhdXRvZm9jdXMsYXV0b3BsYXksY2hlY2tlZCxjb21wYWN0LGNvbnRyb2xzLGRlY2xhcmUsJyArCiAgICAnZGVmYXVsdCxkZWZhdWx0Y2hlY2tlZCxkZWZhdWx0bXV0ZWQsZGVmYXVsdHNlbGVjdGVkLGRlZmVyLGRpc2FibGVkLCcgKwogICAgJ2VuYWJsZWQsZm9ybW5vdmFsaWRhdGUsaGlkZGVuLGluZGV0ZXJtaW5hdGUsaW5lcnQsaXNtYXAsaXRlbXNjb3BlLGxvb3AsbXVsdGlwbGUsJyArCiAgICAnbXV0ZWQsbm9ocmVmLG5vcmVzaXplLG5vc2hhZGUsbm92YWxpZGF0ZSxub3dyYXAsb3BlbixwYXVzZW9uZXhpdCxyZWFkb25seSwnICsKICAgICdyZXF1aXJlZCxyZXZlcnNlZCxzY29wZWQsc2VhbWxlc3Msc2VsZWN0ZWQsc29ydGFibGUsdHJhbnNsYXRlLCcgKwogICAgJ3RydWVzcGVlZCx0eXBlbXVzdG1hdGNoLHZpc2libGUnCiAgKTsKCiAgdmFyIHhsaW5rTlMgPSAnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc7CgogIHZhciBpc1hsaW5rID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgIHJldHVybiBuYW1lLmNoYXJBdCg1KSA9PT0gJzonICYmIG5hbWUuc2xpY2UoMCwgNSkgPT09ICd4bGluaycKICB9OwoKICB2YXIgZ2V0WGxpbmtQcm9wID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgIHJldHVybiBpc1hsaW5rKG5hbWUpID8gbmFtZS5zbGljZSg2LCBuYW1lLmxlbmd0aCkgOiAnJwogIH07CgogIHZhciBpc0ZhbHN5QXR0clZhbHVlID0gZnVuY3Rpb24gKHZhbCkgewogICAgcmV0dXJuIHZhbCA9PSBudWxsIHx8IHZhbCA9PT0gZmFsc2UKICB9OwoKICAvKiAgKi8KCiAgZnVuY3Rpb24gZ2VuQ2xhc3NGb3JWbm9kZSAodm5vZGUpIHsKICAgIHZhciBkYXRhID0gdm5vZGUuZGF0YTsKICAgIHZhciBwYXJlbnROb2RlID0gdm5vZGU7CiAgICB2YXIgY2hpbGROb2RlID0gdm5vZGU7CiAgICB3aGlsZSAoaXNEZWYoY2hpbGROb2RlLmNvbXBvbmVudEluc3RhbmNlKSkgewogICAgICBjaGlsZE5vZGUgPSBjaGlsZE5vZGUuY29tcG9uZW50SW5zdGFuY2UuX3Zub2RlOwogICAgICBpZiAoY2hpbGROb2RlICYmIGNoaWxkTm9kZS5kYXRhKSB7CiAgICAgICAgZGF0YSA9IG1lcmdlQ2xhc3NEYXRhKGNoaWxkTm9kZS5kYXRhLCBkYXRhKTsKICAgICAgfQogICAgfQogICAgd2hpbGUgKGlzRGVmKHBhcmVudE5vZGUgPSBwYXJlbnROb2RlLnBhcmVudCkpIHsKICAgICAgaWYgKHBhcmVudE5vZGUgJiYgcGFyZW50Tm9kZS5kYXRhKSB7CiAgICAgICAgZGF0YSA9IG1lcmdlQ2xhc3NEYXRhKGRhdGEsIHBhcmVudE5vZGUuZGF0YSk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiByZW5kZXJDbGFzcyhkYXRhLnN0YXRpY0NsYXNzLCBkYXRhLmNsYXNzKQogIH0KCiAgZnVuY3Rpb24gbWVyZ2VDbGFzc0RhdGEgKGNoaWxkLCBwYXJlbnQpIHsKICAgIHJldHVybiB7CiAgICAgIHN0YXRpY0NsYXNzOiBjb25jYXQoY2hpbGQuc3RhdGljQ2xhc3MsIHBhcmVudC5zdGF0aWNDbGFzcyksCiAgICAgIGNsYXNzOiBpc0RlZihjaGlsZC5jbGFzcykKICAgICAgICA/IFtjaGlsZC5jbGFzcywgcGFyZW50LmNsYXNzXQogICAgICAgIDogcGFyZW50LmNsYXNzCiAgICB9CiAgfQoKICBmdW5jdGlvbiByZW5kZXJDbGFzcyAoCiAgICBzdGF0aWNDbGFzcywKICAgIGR5bmFtaWNDbGFzcwogICkgewogICAgaWYgKGlzRGVmKHN0YXRpY0NsYXNzKSB8fCBpc0RlZihkeW5hbWljQ2xhc3MpKSB7CiAgICAgIHJldHVybiBjb25jYXQoc3RhdGljQ2xhc3MsIHN0cmluZ2lmeUNsYXNzKGR5bmFtaWNDbGFzcykpCiAgICB9CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogICAgcmV0dXJuICcnCiAgfQoKICBmdW5jdGlvbiBjb25jYXQgKGEsIGIpIHsKICAgIHJldHVybiBhID8gYiA/IChhICsgJyAnICsgYikgOiBhIDogKGIgfHwgJycpCiAgfQoKICBmdW5jdGlvbiBzdHJpbmdpZnlDbGFzcyAodmFsdWUpIHsKICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgewogICAgICByZXR1cm4gc3RyaW5naWZ5QXJyYXkodmFsdWUpCiAgICB9CiAgICBpZiAoaXNPYmplY3QodmFsdWUpKSB7CiAgICAgIHJldHVybiBzdHJpbmdpZnlPYmplY3QodmFsdWUpCiAgICB9CiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgewogICAgICByZXR1cm4gdmFsdWUKICAgIH0KICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgICByZXR1cm4gJycKICB9CgogIGZ1bmN0aW9uIHN0cmluZ2lmeUFycmF5ICh2YWx1ZSkgewogICAgdmFyIHJlcyA9ICcnOwogICAgdmFyIHN0cmluZ2lmaWVkOwogICAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgaWYgKGlzRGVmKHN0cmluZ2lmaWVkID0gc3RyaW5naWZ5Q2xhc3ModmFsdWVbaV0pKSAmJiBzdHJpbmdpZmllZCAhPT0gJycpIHsKICAgICAgICBpZiAocmVzKSB7IHJlcyArPSAnICc7IH0KICAgICAgICByZXMgKz0gc3RyaW5naWZpZWQ7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiByZXMKICB9CgogIGZ1bmN0aW9uIHN0cmluZ2lmeU9iamVjdCAodmFsdWUpIHsKICAgIHZhciByZXMgPSAnJzsKICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZSkgewogICAgICBpZiAodmFsdWVba2V5XSkgewogICAgICAgIGlmIChyZXMpIHsgcmVzICs9ICcgJzsgfQogICAgICAgIHJlcyArPSBrZXk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiByZXMKICB9CgogIC8qICAqLwoKICB2YXIgbmFtZXNwYWNlTWFwID0gewogICAgc3ZnOiAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLAogICAgbWF0aDogJ2h0dHA6Ly93d3cudzMub3JnLzE5OTgvTWF0aC9NYXRoTUwnCiAgfTsKCiAgdmFyIGlzSFRNTFRhZyA9IG1ha2VNYXAoCiAgICAnaHRtbCxib2R5LGJhc2UsaGVhZCxsaW5rLG1ldGEsc3R5bGUsdGl0bGUsJyArCiAgICAnYWRkcmVzcyxhcnRpY2xlLGFzaWRlLGZvb3RlcixoZWFkZXIsaDEsaDIsaDMsaDQsaDUsaDYsaGdyb3VwLG5hdixzZWN0aW9uLCcgKwogICAgJ2RpdixkZCxkbCxkdCxmaWdjYXB0aW9uLGZpZ3VyZSxwaWN0dXJlLGhyLGltZyxsaSxtYWluLG9sLHAscHJlLHVsLCcgKwogICAgJ2EsYixhYmJyLGJkaSxiZG8sYnIsY2l0ZSxjb2RlLGRhdGEsZGZuLGVtLGksa2JkLG1hcmsscSxycCxydCxydGMscnVieSwnICsKICAgICdzLHNhbXAsc21hbGwsc3BhbixzdHJvbmcsc3ViLHN1cCx0aW1lLHUsdmFyLHdicixhcmVhLGF1ZGlvLG1hcCx0cmFjayx2aWRlbywnICsKICAgICdlbWJlZCxvYmplY3QscGFyYW0sc291cmNlLGNhbnZhcyxzY3JpcHQsbm9zY3JpcHQsZGVsLGlucywnICsKICAgICdjYXB0aW9uLGNvbCxjb2xncm91cCx0YWJsZSx0aGVhZCx0Ym9keSx0ZCx0aCx0ciwnICsKICAgICdidXR0b24sZGF0YWxpc3QsZmllbGRzZXQsZm9ybSxpbnB1dCxsYWJlbCxsZWdlbmQsbWV0ZXIsb3B0Z3JvdXAsb3B0aW9uLCcgKwogICAgJ291dHB1dCxwcm9ncmVzcyxzZWxlY3QsdGV4dGFyZWEsJyArCiAgICAnZGV0YWlscyxkaWFsb2csbWVudSxtZW51aXRlbSxzdW1tYXJ5LCcgKwogICAgJ2NvbnRlbnQsZWxlbWVudCxzaGFkb3csdGVtcGxhdGUsYmxvY2txdW90ZSxpZnJhbWUsdGZvb3QnCiAgKTsKCiAgLy8gdGhpcyBtYXAgaXMgaW50ZW50aW9uYWxseSBzZWxlY3RpdmUsIG9ubHkgY292ZXJpbmcgU1ZHIGVsZW1lbnRzIHRoYXQgbWF5CiAgLy8gY29udGFpbiBjaGlsZCBlbGVtZW50cy4KICB2YXIgaXNTVkcgPSBtYWtlTWFwKAogICAgJ3N2ZyxhbmltYXRlLGNpcmNsZSxjbGlwcGF0aCxjdXJzb3IsZGVmcyxkZXNjLGVsbGlwc2UsZmlsdGVyLGZvbnQtZmFjZSwnICsKICAgICdmb3JlaWduT2JqZWN0LGcsZ2x5cGgsaW1hZ2UsbGluZSxtYXJrZXIsbWFzayxtaXNzaW5nLWdseXBoLHBhdGgscGF0dGVybiwnICsKICAgICdwb2x5Z29uLHBvbHlsaW5lLHJlY3Qsc3dpdGNoLHN5bWJvbCx0ZXh0LHRleHRwYXRoLHRzcGFuLHVzZSx2aWV3JywKICAgIHRydWUKICApOwoKICB2YXIgaXNQcmVUYWcgPSBmdW5jdGlvbiAodGFnKSB7IHJldHVybiB0YWcgPT09ICdwcmUnOyB9OwoKICB2YXIgaXNSZXNlcnZlZFRhZyA9IGZ1bmN0aW9uICh0YWcpIHsKICAgIHJldHVybiBpc0hUTUxUYWcodGFnKSB8fCBpc1NWRyh0YWcpCiAgfTsKCiAgZnVuY3Rpb24gZ2V0VGFnTmFtZXNwYWNlICh0YWcpIHsKICAgIGlmIChpc1NWRyh0YWcpKSB7CiAgICAgIHJldHVybiAnc3ZnJwogICAgfQogICAgLy8gYmFzaWMgc3VwcG9ydCBmb3IgTWF0aE1MCiAgICAvLyBub3RlIGl0IGRvZXNuJ3Qgc3VwcG9ydCBvdGhlciBNYXRoTUwgZWxlbWVudHMgYmVpbmcgY29tcG9uZW50IHJvb3RzCiAgICBpZiAodGFnID09PSAnbWF0aCcpIHsKICAgICAgcmV0dXJuICdtYXRoJwogICAgfQogIH0KCiAgdmFyIHVua25vd25FbGVtZW50Q2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogIGZ1bmN0aW9uIGlzVW5rbm93bkVsZW1lbnQgKHRhZykgewogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoIWluQnJvd3NlcikgewogICAgICByZXR1cm4gdHJ1ZQogICAgfQogICAgaWYgKGlzUmVzZXJ2ZWRUYWcodGFnKSkgewogICAgICByZXR1cm4gZmFsc2UKICAgIH0KICAgIHRhZyA9IHRhZy50b0xvd2VyQ2FzZSgpOwogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAodW5rbm93bkVsZW1lbnRDYWNoZVt0YWddICE9IG51bGwpIHsKICAgICAgcmV0dXJuIHVua25vd25FbGVtZW50Q2FjaGVbdGFnXQogICAgfQogICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpOwogICAgaWYgKHRhZy5pbmRleE9mKCctJykgPiAtMSkgewogICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yODIxMDM2NC8xMDcwMjQ0CiAgICAgIHJldHVybiAodW5rbm93bkVsZW1lbnRDYWNoZVt0YWddID0gKAogICAgICAgIGVsLmNvbnN0cnVjdG9yID09PSB3aW5kb3cuSFRNTFVua25vd25FbGVtZW50IHx8CiAgICAgICAgZWwuY29uc3RydWN0b3IgPT09IHdpbmRvdy5IVE1MRWxlbWVudAogICAgICApKQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICh1bmtub3duRWxlbWVudENhY2hlW3RhZ10gPSAvSFRNTFVua25vd25FbGVtZW50Ly50ZXN0KGVsLnRvU3RyaW5nKCkpKQogICAgfQogIH0KCiAgdmFyIGlzVGV4dElucHV0VHlwZSA9IG1ha2VNYXAoJ3RleHQsbnVtYmVyLHBhc3N3b3JkLHNlYXJjaCxlbWFpbCx0ZWwsdXJsJyk7CgogIC8qICAqLwoKICAvKioKICAgKiBRdWVyeSBhbiBlbGVtZW50IHNlbGVjdG9yIGlmIGl0J3Mgbm90IGFuIGVsZW1lbnQgYWxyZWFkeS4KICAgKi8KICBmdW5jdGlvbiBxdWVyeSAoZWwpIHsKICAgIGlmICh0eXBlb2YgZWwgPT09ICdzdHJpbmcnKSB7CiAgICAgIHZhciBzZWxlY3RlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpOwogICAgICBpZiAoIXNlbGVjdGVkKSB7CiAgICAgICAgd2FybigKICAgICAgICAgICdDYW5ub3QgZmluZCBlbGVtZW50OiAnICsgZWwKICAgICAgICApOwogICAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKQogICAgICB9CiAgICAgIHJldHVybiBzZWxlY3RlZAogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGVsCiAgICB9CiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gY3JlYXRlRWxlbWVudCQxICh0YWdOYW1lLCB2bm9kZSkgewogICAgdmFyIGVsbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7CiAgICBpZiAodGFnTmFtZSAhPT0gJ3NlbGVjdCcpIHsKICAgICAgcmV0dXJuIGVsbQogICAgfQogICAgLy8gZmFsc2Ugb3IgbnVsbCB3aWxsIHJlbW92ZSB0aGUgYXR0cmlidXRlIGJ1dCB1bmRlZmluZWQgd2lsbCBub3QKICAgIGlmICh2bm9kZS5kYXRhICYmIHZub2RlLmRhdGEuYXR0cnMgJiYgdm5vZGUuZGF0YS5hdHRycy5tdWx0aXBsZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGVsbS5zZXRBdHRyaWJ1dGUoJ211bHRpcGxlJywgJ211bHRpcGxlJyk7CiAgICB9CiAgICByZXR1cm4gZWxtCiAgfQoKICBmdW5jdGlvbiBjcmVhdGVFbGVtZW50TlMgKG5hbWVzcGFjZSwgdGFnTmFtZSkgewogICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhuYW1lc3BhY2VNYXBbbmFtZXNwYWNlXSwgdGFnTmFtZSkKICB9CgogIGZ1bmN0aW9uIGNyZWF0ZVRleHROb2RlICh0ZXh0KSB7CiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dCkKICB9CgogIGZ1bmN0aW9uIGNyZWF0ZUNvbW1lbnQgKHRleHQpIHsKICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVDb21tZW50KHRleHQpCiAgfQoKICBmdW5jdGlvbiBpbnNlcnRCZWZvcmUgKHBhcmVudE5vZGUsIG5ld05vZGUsIHJlZmVyZW5jZU5vZGUpIHsKICAgIHBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5ld05vZGUsIHJlZmVyZW5jZU5vZGUpOwogIH0KCiAgZnVuY3Rpb24gcmVtb3ZlQ2hpbGQgKG5vZGUsIGNoaWxkKSB7CiAgICBub2RlLnJlbW92ZUNoaWxkKGNoaWxkKTsKICB9CgogIGZ1bmN0aW9uIGFwcGVuZENoaWxkIChub2RlLCBjaGlsZCkgewogICAgbm9kZS5hcHBlbmRDaGlsZChjaGlsZCk7CiAgfQoKICBmdW5jdGlvbiBwYXJlbnROb2RlIChub2RlKSB7CiAgICByZXR1cm4gbm9kZS5wYXJlbnROb2RlCiAgfQoKICBmdW5jdGlvbiBuZXh0U2libGluZyAobm9kZSkgewogICAgcmV0dXJuIG5vZGUubmV4dFNpYmxpbmcKICB9CgogIGZ1bmN0aW9uIHRhZ05hbWUgKG5vZGUpIHsKICAgIHJldHVybiBub2RlLnRhZ05hbWUKICB9CgogIGZ1bmN0aW9uIHNldFRleHRDb250ZW50IChub2RlLCB0ZXh0KSB7CiAgICBub2RlLnRleHRDb250ZW50ID0gdGV4dDsKICB9CgogIGZ1bmN0aW9uIHNldFN0eWxlU2NvcGUgKG5vZGUsIHNjb3BlSWQpIHsKICAgIG5vZGUuc2V0QXR0cmlidXRlKHNjb3BlSWQsICcnKTsKICB9CgogIHZhciBub2RlT3BzID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoewogICAgY3JlYXRlRWxlbWVudDogY3JlYXRlRWxlbWVudCQxLAogICAgY3JlYXRlRWxlbWVudE5TOiBjcmVhdGVFbGVtZW50TlMsCiAgICBjcmVhdGVUZXh0Tm9kZTogY3JlYXRlVGV4dE5vZGUsCiAgICBjcmVhdGVDb21tZW50OiBjcmVhdGVDb21tZW50LAogICAgaW5zZXJ0QmVmb3JlOiBpbnNlcnRCZWZvcmUsCiAgICByZW1vdmVDaGlsZDogcmVtb3ZlQ2hpbGQsCiAgICBhcHBlbmRDaGlsZDogYXBwZW5kQ2hpbGQsCiAgICBwYXJlbnROb2RlOiBwYXJlbnROb2RlLAogICAgbmV4dFNpYmxpbmc6IG5leHRTaWJsaW5nLAogICAgdGFnTmFtZTogdGFnTmFtZSwKICAgIHNldFRleHRDb250ZW50OiBzZXRUZXh0Q29udGVudCwKICAgIHNldFN0eWxlU2NvcGU6IHNldFN0eWxlU2NvcGUKICB9KTsKCiAgLyogICovCgogIHZhciByZWYgPSB7CiAgICBjcmVhdGU6IGZ1bmN0aW9uIGNyZWF0ZSAoXywgdm5vZGUpIHsKICAgICAgcmVnaXN0ZXJSZWYodm5vZGUpOwogICAgfSwKICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlIChvbGRWbm9kZSwgdm5vZGUpIHsKICAgICAgaWYgKG9sZFZub2RlLmRhdGEucmVmICE9PSB2bm9kZS5kYXRhLnJlZikgewogICAgICAgIHJlZ2lzdGVyUmVmKG9sZFZub2RlLCB0cnVlKTsKICAgICAgICByZWdpc3RlclJlZih2bm9kZSk7CiAgICAgIH0KICAgIH0sCiAgICBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95ICh2bm9kZSkgewogICAgICByZWdpc3RlclJlZih2bm9kZSwgdHJ1ZSk7CiAgICB9CiAgfTsKCiAgZnVuY3Rpb24gcmVnaXN0ZXJSZWYgKHZub2RlLCBpc1JlbW92YWwpIHsKICAgIHZhciBrZXkgPSB2bm9kZS5kYXRhLnJlZjsKICAgIGlmICghaXNEZWYoa2V5KSkgeyByZXR1cm4gfQoKICAgIHZhciB2bSA9IHZub2RlLmNvbnRleHQ7CiAgICB2YXIgcmVmID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2UgfHwgdm5vZGUuZWxtOwogICAgdmFyIHJlZnMgPSB2bS4kcmVmczsKICAgIGlmIChpc1JlbW92YWwpIHsKICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVmc1trZXldKSkgewogICAgICAgIHJlbW92ZShyZWZzW2tleV0sIHJlZik7CiAgICAgIH0gZWxzZSBpZiAocmVmc1trZXldID09PSByZWYpIHsKICAgICAgICByZWZzW2tleV0gPSB1bmRlZmluZWQ7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmICh2bm9kZS5kYXRhLnJlZkluRm9yKSB7CiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHJlZnNba2V5XSkpIHsKICAgICAgICAgIHJlZnNba2V5XSA9IFtyZWZdOwogICAgICAgIH0gZWxzZSBpZiAocmVmc1trZXldLmluZGV4T2YocmVmKSA8IDApIHsKICAgICAgICAgIC8vICRmbG93LWRpc2FibGUtbGluZQogICAgICAgICAgcmVmc1trZXldLnB1c2gocmVmKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVmc1trZXldID0gcmVmOwogICAgICB9CiAgICB9CiAgfQoKICAvKioKICAgKiBWaXJ0dWFsIERPTSBwYXRjaGluZyBhbGdvcml0aG0gYmFzZWQgb24gU25hYmJkb20gYnkKICAgKiBTaW1vbiBGcmlpcyBWaW5kdW0gKEBwYWxkZXBpbmQpCiAgICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlCiAgICogaHR0cHM6Ly9naXRodWIuY29tL3BhbGRlcGluZC9zbmFiYmRvbS9ibG9iL21hc3Rlci9MSUNFTlNFCiAgICoKICAgKiBtb2RpZmllZCBieSBFdmFuIFlvdSAoQHl5eDk5MDgwMykKICAgKgogICAqIE5vdCB0eXBlLWNoZWNraW5nIHRoaXMgYmVjYXVzZSB0aGlzIGZpbGUgaXMgcGVyZi1jcml0aWNhbCBhbmQgdGhlIGNvc3QKICAgKiBvZiBtYWtpbmcgZmxvdyB1bmRlcnN0YW5kIGl0IGlzIG5vdCB3b3J0aCBpdC4KICAgKi8KCiAgdmFyIGVtcHR5Tm9kZSA9IG5ldyBWTm9kZSgnJywge30sIFtdKTsKCiAgdmFyIGhvb2tzID0gWydjcmVhdGUnLCAnYWN0aXZhdGUnLCAndXBkYXRlJywgJ3JlbW92ZScsICdkZXN0cm95J107CgogIGZ1bmN0aW9uIHNhbWVWbm9kZSAoYSwgYikgewogICAgcmV0dXJuICgKICAgICAgYS5rZXkgPT09IGIua2V5ICYmICgKICAgICAgICAoCiAgICAgICAgICBhLnRhZyA9PT0gYi50YWcgJiYKICAgICAgICAgIGEuaXNDb21tZW50ID09PSBiLmlzQ29tbWVudCAmJgogICAgICAgICAgaXNEZWYoYS5kYXRhKSA9PT0gaXNEZWYoYi5kYXRhKSAmJgogICAgICAgICAgc2FtZUlucHV0VHlwZShhLCBiKQogICAgICAgICkgfHwgKAogICAgICAgICAgaXNUcnVlKGEuaXNBc3luY1BsYWNlaG9sZGVyKSAmJgogICAgICAgICAgYS5hc3luY0ZhY3RvcnkgPT09IGIuYXN5bmNGYWN0b3J5ICYmCiAgICAgICAgICBpc1VuZGVmKGIuYXN5bmNGYWN0b3J5LmVycm9yKQogICAgICAgICkKICAgICAgKQogICAgKQogIH0KCiAgZnVuY3Rpb24gc2FtZUlucHV0VHlwZSAoYSwgYikgewogICAgaWYgKGEudGFnICE9PSAnaW5wdXQnKSB7IHJldHVybiB0cnVlIH0KICAgIHZhciBpOwogICAgdmFyIHR5cGVBID0gaXNEZWYoaSA9IGEuZGF0YSkgJiYgaXNEZWYoaSA9IGkuYXR0cnMpICYmIGkudHlwZTsKICAgIHZhciB0eXBlQiA9IGlzRGVmKGkgPSBiLmRhdGEpICYmIGlzRGVmKGkgPSBpLmF0dHJzKSAmJiBpLnR5cGU7CiAgICByZXR1cm4gdHlwZUEgPT09IHR5cGVCIHx8IGlzVGV4dElucHV0VHlwZSh0eXBlQSkgJiYgaXNUZXh0SW5wdXRUeXBlKHR5cGVCKQogIH0KCiAgZnVuY3Rpb24gY3JlYXRlS2V5VG9PbGRJZHggKGNoaWxkcmVuLCBiZWdpbklkeCwgZW5kSWR4KSB7CiAgICB2YXIgaSwga2V5OwogICAgdmFyIG1hcCA9IHt9OwogICAgZm9yIChpID0gYmVnaW5JZHg7IGkgPD0gZW5kSWR4OyArK2kpIHsKICAgICAga2V5ID0gY2hpbGRyZW5baV0ua2V5OwogICAgICBpZiAoaXNEZWYoa2V5KSkgeyBtYXBba2V5XSA9IGk7IH0KICAgIH0KICAgIHJldHVybiBtYXAKICB9CgogIGZ1bmN0aW9uIGNyZWF0ZVBhdGNoRnVuY3Rpb24gKGJhY2tlbmQpIHsKICAgIHZhciBpLCBqOwogICAgdmFyIGNicyA9IHt9OwoKICAgIHZhciBtb2R1bGVzID0gYmFja2VuZC5tb2R1bGVzOwogICAgdmFyIG5vZGVPcHMgPSBiYWNrZW5kLm5vZGVPcHM7CgogICAgZm9yIChpID0gMDsgaSA8IGhvb2tzLmxlbmd0aDsgKytpKSB7CiAgICAgIGNic1tob29rc1tpXV0gPSBbXTsKICAgICAgZm9yIChqID0gMDsgaiA8IG1vZHVsZXMubGVuZ3RoOyArK2opIHsKICAgICAgICBpZiAoaXNEZWYobW9kdWxlc1tqXVtob29rc1tpXV0pKSB7CiAgICAgICAgICBjYnNbaG9va3NbaV1dLnB1c2gobW9kdWxlc1tqXVtob29rc1tpXV0pOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGVtcHR5Tm9kZUF0IChlbG0pIHsKICAgICAgcmV0dXJuIG5ldyBWTm9kZShub2RlT3BzLnRhZ05hbWUoZWxtKS50b0xvd2VyQ2FzZSgpLCB7fSwgW10sIHVuZGVmaW5lZCwgZWxtKQogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZVJtQ2IgKGNoaWxkRWxtLCBsaXN0ZW5lcnMpIHsKICAgICAgZnVuY3Rpb24gcmVtb3ZlJCQxICgpIHsKICAgICAgICBpZiAoLS1yZW1vdmUkJDEubGlzdGVuZXJzID09PSAwKSB7CiAgICAgICAgICByZW1vdmVOb2RlKGNoaWxkRWxtKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmVtb3ZlJCQxLmxpc3RlbmVycyA9IGxpc3RlbmVyczsKICAgICAgcmV0dXJuIHJlbW92ZSQkMQogICAgfQoKICAgIGZ1bmN0aW9uIHJlbW92ZU5vZGUgKGVsKSB7CiAgICAgIHZhciBwYXJlbnQgPSBub2RlT3BzLnBhcmVudE5vZGUoZWwpOwogICAgICAvLyBlbGVtZW50IG1heSBoYXZlIGFscmVhZHkgYmVlbiByZW1vdmVkIGR1ZSB0byB2LWh0bWwgLyB2LXRleHQKICAgICAgaWYgKGlzRGVmKHBhcmVudCkpIHsKICAgICAgICBub2RlT3BzLnJlbW92ZUNoaWxkKHBhcmVudCwgZWwpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gaXNVbmtub3duRWxlbWVudCQkMSAodm5vZGUsIGluVlByZSkgewogICAgICByZXR1cm4gKAogICAgICAgICFpblZQcmUgJiYKICAgICAgICAhdm5vZGUubnMgJiYKICAgICAgICAhKAogICAgICAgICAgY29uZmlnLmlnbm9yZWRFbGVtZW50cy5sZW5ndGggJiYKICAgICAgICAgIGNvbmZpZy5pZ25vcmVkRWxlbWVudHMuc29tZShmdW5jdGlvbiAoaWdub3JlKSB7CiAgICAgICAgICAgIHJldHVybiBpc1JlZ0V4cChpZ25vcmUpCiAgICAgICAgICAgICAgPyBpZ25vcmUudGVzdCh2bm9kZS50YWcpCiAgICAgICAgICAgICAgOiBpZ25vcmUgPT09IHZub2RlLnRhZwogICAgICAgICAgfSkKICAgICAgICApICYmCiAgICAgICAgY29uZmlnLmlzVW5rbm93bkVsZW1lbnQodm5vZGUudGFnKQogICAgICApCiAgICB9CgogICAgdmFyIGNyZWF0aW5nRWxtSW5WUHJlID0gMDsKCiAgICBmdW5jdGlvbiBjcmVhdGVFbG0gKAogICAgICB2bm9kZSwKICAgICAgaW5zZXJ0ZWRWbm9kZVF1ZXVlLAogICAgICBwYXJlbnRFbG0sCiAgICAgIHJlZkVsbSwKICAgICAgbmVzdGVkLAogICAgICBvd25lckFycmF5LAogICAgICBpbmRleAogICAgKSB7CiAgICAgIGlmIChpc0RlZih2bm9kZS5lbG0pICYmIGlzRGVmKG93bmVyQXJyYXkpKSB7CiAgICAgICAgLy8gVGhpcyB2bm9kZSB3YXMgdXNlZCBpbiBhIHByZXZpb3VzIHJlbmRlciEKICAgICAgICAvLyBub3cgaXQncyB1c2VkIGFzIGEgbmV3IG5vZGUsIG92ZXJ3cml0aW5nIGl0cyBlbG0gd291bGQgY2F1c2UKICAgICAgICAvLyBwb3RlbnRpYWwgcGF0Y2ggZXJyb3JzIGRvd24gdGhlIHJvYWQgd2hlbiBpdCdzIHVzZWQgYXMgYW4gaW5zZXJ0aW9uCiAgICAgICAgLy8gcmVmZXJlbmNlIG5vZGUuIEluc3RlYWQsIHdlIGNsb25lIHRoZSBub2RlIG9uLWRlbWFuZCBiZWZvcmUgY3JlYXRpbmcKICAgICAgICAvLyBhc3NvY2lhdGVkIERPTSBlbGVtZW50IGZvciBpdC4KICAgICAgICB2bm9kZSA9IG93bmVyQXJyYXlbaW5kZXhdID0gY2xvbmVWTm9kZSh2bm9kZSk7CiAgICAgIH0KCiAgICAgIHZub2RlLmlzUm9vdEluc2VydCA9ICFuZXN0ZWQ7IC8vIGZvciB0cmFuc2l0aW9uIGVudGVyIGNoZWNrCiAgICAgIGlmIChjcmVhdGVDb21wb25lbnQodm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgcGFyZW50RWxtLCByZWZFbG0pKSB7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIHZhciBkYXRhID0gdm5vZGUuZGF0YTsKICAgICAgdmFyIGNoaWxkcmVuID0gdm5vZGUuY2hpbGRyZW47CiAgICAgIHZhciB0YWcgPSB2bm9kZS50YWc7CiAgICAgIGlmIChpc0RlZih0YWcpKSB7CiAgICAgICAgewogICAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5wcmUpIHsKICAgICAgICAgICAgY3JlYXRpbmdFbG1JblZQcmUrKzsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChpc1Vua25vd25FbGVtZW50JCQxKHZub2RlLCBjcmVhdGluZ0VsbUluVlByZSkpIHsKICAgICAgICAgICAgd2FybigKICAgICAgICAgICAgICAnVW5rbm93biBjdXN0b20gZWxlbWVudDogPCcgKyB0YWcgKyAnPiAtIGRpZCB5b3UgJyArCiAgICAgICAgICAgICAgJ3JlZ2lzdGVyIHRoZSBjb21wb25lbnQgY29ycmVjdGx5PyBGb3IgcmVjdXJzaXZlIGNvbXBvbmVudHMsICcgKwogICAgICAgICAgICAgICdtYWtlIHN1cmUgdG8gcHJvdmlkZSB0aGUgIm5hbWUiIG9wdGlvbi4nLAogICAgICAgICAgICAgIHZub2RlLmNvbnRleHQKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZub2RlLmVsbSA9IHZub2RlLm5zCiAgICAgICAgICA/IG5vZGVPcHMuY3JlYXRlRWxlbWVudE5TKHZub2RlLm5zLCB0YWcpCiAgICAgICAgICA6IG5vZGVPcHMuY3JlYXRlRWxlbWVudCh0YWcsIHZub2RlKTsKICAgICAgICBzZXRTY29wZSh2bm9kZSk7CgogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgICAgIHsKICAgICAgICAgIGNyZWF0ZUNoaWxkcmVuKHZub2RlLCBjaGlsZHJlbiwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTsKICAgICAgICAgIGlmIChpc0RlZihkYXRhKSkgewogICAgICAgICAgICBpbnZva2VDcmVhdGVIb29rcyh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTsKICAgICAgICAgIH0KICAgICAgICAgIGluc2VydChwYXJlbnRFbG0sIHZub2RlLmVsbSwgcmVmRWxtKTsKICAgICAgICB9CgogICAgICAgIGlmIChkYXRhICYmIGRhdGEucHJlKSB7CiAgICAgICAgICBjcmVhdGluZ0VsbUluVlByZS0tOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChpc1RydWUodm5vZGUuaXNDb21tZW50KSkgewogICAgICAgIHZub2RlLmVsbSA9IG5vZGVPcHMuY3JlYXRlQ29tbWVudCh2bm9kZS50ZXh0KTsKICAgICAgICBpbnNlcnQocGFyZW50RWxtLCB2bm9kZS5lbG0sIHJlZkVsbSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdm5vZGUuZWxtID0gbm9kZU9wcy5jcmVhdGVUZXh0Tm9kZSh2bm9kZS50ZXh0KTsKICAgICAgICBpbnNlcnQocGFyZW50RWxtLCB2bm9kZS5lbG0sIHJlZkVsbSk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjcmVhdGVDb21wb25lbnQgKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgcmVmRWxtKSB7CiAgICAgIHZhciBpID0gdm5vZGUuZGF0YTsKICAgICAgaWYgKGlzRGVmKGkpKSB7CiAgICAgICAgdmFyIGlzUmVhY3RpdmF0ZWQgPSBpc0RlZih2bm9kZS5jb21wb25lbnRJbnN0YW5jZSkgJiYgaS5rZWVwQWxpdmU7CiAgICAgICAgaWYgKGlzRGVmKGkgPSBpLmhvb2spICYmIGlzRGVmKGkgPSBpLmluaXQpKSB7CiAgICAgICAgICBpKHZub2RlLCBmYWxzZSAvKiBoeWRyYXRpbmcgKi8pOwogICAgICAgIH0KICAgICAgICAvLyBhZnRlciBjYWxsaW5nIHRoZSBpbml0IGhvb2ssIGlmIHRoZSB2bm9kZSBpcyBhIGNoaWxkIGNvbXBvbmVudAogICAgICAgIC8vIGl0IHNob3VsZCd2ZSBjcmVhdGVkIGEgY2hpbGQgaW5zdGFuY2UgYW5kIG1vdW50ZWQgaXQuIHRoZSBjaGlsZAogICAgICAgIC8vIGNvbXBvbmVudCBhbHNvIGhhcyBzZXQgdGhlIHBsYWNlaG9sZGVyIHZub2RlJ3MgZWxtLgogICAgICAgIC8vIGluIHRoYXQgY2FzZSB3ZSBjYW4ganVzdCByZXR1cm4gdGhlIGVsZW1lbnQgYW5kIGJlIGRvbmUuCiAgICAgICAgaWYgKGlzRGVmKHZub2RlLmNvbXBvbmVudEluc3RhbmNlKSkgewogICAgICAgICAgaW5pdENvbXBvbmVudCh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTsKICAgICAgICAgIGluc2VydChwYXJlbnRFbG0sIHZub2RlLmVsbSwgcmVmRWxtKTsKICAgICAgICAgIGlmIChpc1RydWUoaXNSZWFjdGl2YXRlZCkpIHsKICAgICAgICAgICAgcmVhY3RpdmF0ZUNvbXBvbmVudCh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBwYXJlbnRFbG0sIHJlZkVsbSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGluaXRDb21wb25lbnQgKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpIHsKICAgICAgaWYgKGlzRGVmKHZub2RlLmRhdGEucGVuZGluZ0luc2VydCkpIHsKICAgICAgICBpbnNlcnRlZFZub2RlUXVldWUucHVzaC5hcHBseShpbnNlcnRlZFZub2RlUXVldWUsIHZub2RlLmRhdGEucGVuZGluZ0luc2VydCk7CiAgICAgICAgdm5vZGUuZGF0YS5wZW5kaW5nSW5zZXJ0ID0gbnVsbDsKICAgICAgfQogICAgICB2bm9kZS5lbG0gPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZS4kZWw7CiAgICAgIGlmIChpc1BhdGNoYWJsZSh2bm9kZSkpIHsKICAgICAgICBpbnZva2VDcmVhdGVIb29rcyh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTsKICAgICAgICBzZXRTY29wZSh2bm9kZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gZW1wdHkgY29tcG9uZW50IHJvb3QuCiAgICAgICAgLy8gc2tpcCBhbGwgZWxlbWVudC1yZWxhdGVkIG1vZHVsZXMgZXhjZXB0IGZvciByZWYgKCMzNDU1KQogICAgICAgIHJlZ2lzdGVyUmVmKHZub2RlKTsKICAgICAgICAvLyBtYWtlIHN1cmUgdG8gaW52b2tlIHRoZSBpbnNlcnQgaG9vawogICAgICAgIGluc2VydGVkVm5vZGVRdWV1ZS5wdXNoKHZub2RlKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHJlYWN0aXZhdGVDb21wb25lbnQgKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgcmVmRWxtKSB7CiAgICAgIHZhciBpOwogICAgICAvLyBoYWNrIGZvciAjNDMzOTogYSByZWFjdGl2YXRlZCBjb21wb25lbnQgd2l0aCBpbm5lciB0cmFuc2l0aW9uCiAgICAgIC8vIGRvZXMgbm90IHRyaWdnZXIgYmVjYXVzZSB0aGUgaW5uZXIgbm9kZSdzIGNyZWF0ZWQgaG9va3MgYXJlIG5vdCBjYWxsZWQKICAgICAgLy8gYWdhaW4uIEl0J3Mgbm90IGlkZWFsIHRvIGludm9sdmUgbW9kdWxlLXNwZWNpZmljIGxvZ2ljIGluIGhlcmUgYnV0CiAgICAgIC8vIHRoZXJlIGRvZXNuJ3Qgc2VlbSB0byBiZSBhIGJldHRlciB3YXkgdG8gZG8gaXQuCiAgICAgIHZhciBpbm5lck5vZGUgPSB2bm9kZTsKICAgICAgd2hpbGUgKGlubmVyTm9kZS5jb21wb25lbnRJbnN0YW5jZSkgewogICAgICAgIGlubmVyTm9kZSA9IGlubmVyTm9kZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGU7CiAgICAgICAgaWYgKGlzRGVmKGkgPSBpbm5lck5vZGUuZGF0YSkgJiYgaXNEZWYoaSA9IGkudHJhbnNpdGlvbikpIHsKICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBjYnMuYWN0aXZhdGUubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgY2JzLmFjdGl2YXRlW2ldKGVtcHR5Tm9kZSwgaW5uZXJOb2RlKTsKICAgICAgICAgIH0KICAgICAgICAgIGluc2VydGVkVm5vZGVRdWV1ZS5wdXNoKGlubmVyTm9kZSk7CiAgICAgICAgICBicmVhawogICAgICAgIH0KICAgICAgfQogICAgICAvLyB1bmxpa2UgYSBuZXdseSBjcmVhdGVkIGNvbXBvbmVudCwKICAgICAgLy8gYSByZWFjdGl2YXRlZCBrZWVwLWFsaXZlIGNvbXBvbmVudCBkb2Vzbid0IGluc2VydCBpdHNlbGYKICAgICAgaW5zZXJ0KHBhcmVudEVsbSwgdm5vZGUuZWxtLCByZWZFbG0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGluc2VydCAocGFyZW50LCBlbG0sIHJlZiQkMSkgewogICAgICBpZiAoaXNEZWYocGFyZW50KSkgewogICAgICAgIGlmIChpc0RlZihyZWYkJDEpKSB7CiAgICAgICAgICBpZiAobm9kZU9wcy5wYXJlbnROb2RlKHJlZiQkMSkgPT09IHBhcmVudCkgewogICAgICAgICAgICBub2RlT3BzLmluc2VydEJlZm9yZShwYXJlbnQsIGVsbSwgcmVmJCQxKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgbm9kZU9wcy5hcHBlbmRDaGlsZChwYXJlbnQsIGVsbSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gY3JlYXRlQ2hpbGRyZW4gKHZub2RlLCBjaGlsZHJlbiwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKSB7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KGNoaWxkcmVuKSkgewogICAgICAgIHsKICAgICAgICAgIGNoZWNrRHVwbGljYXRlS2V5cyhjaGlsZHJlbik7CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHsKICAgICAgICAgIGNyZWF0ZUVsbShjaGlsZHJlbltpXSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCB2bm9kZS5lbG0sIG51bGwsIHRydWUsIGNoaWxkcmVuLCBpKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoaXNQcmltaXRpdmUodm5vZGUudGV4dCkpIHsKICAgICAgICBub2RlT3BzLmFwcGVuZENoaWxkKHZub2RlLmVsbSwgbm9kZU9wcy5jcmVhdGVUZXh0Tm9kZShTdHJpbmcodm5vZGUudGV4dCkpKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGlzUGF0Y2hhYmxlICh2bm9kZSkgewogICAgICB3aGlsZSAodm5vZGUuY29tcG9uZW50SW5zdGFuY2UpIHsKICAgICAgICB2bm9kZSA9IHZub2RlLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZTsKICAgICAgfQogICAgICByZXR1cm4gaXNEZWYodm5vZGUudGFnKQogICAgfQoKICAgIGZ1bmN0aW9uIGludm9rZUNyZWF0ZUhvb2tzICh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKSB7CiAgICAgIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IGNicy5jcmVhdGUubGVuZ3RoOyArK2kkMSkgewogICAgICAgIGNicy5jcmVhdGVbaSQxXShlbXB0eU5vZGUsIHZub2RlKTsKICAgICAgfQogICAgICBpID0gdm5vZGUuZGF0YS5ob29rOyAvLyBSZXVzZSB2YXJpYWJsZQogICAgICBpZiAoaXNEZWYoaSkpIHsKICAgICAgICBpZiAoaXNEZWYoaS5jcmVhdGUpKSB7IGkuY3JlYXRlKGVtcHR5Tm9kZSwgdm5vZGUpOyB9CiAgICAgICAgaWYgKGlzRGVmKGkuaW5zZXJ0KSkgeyBpbnNlcnRlZFZub2RlUXVldWUucHVzaCh2bm9kZSk7IH0KICAgICAgfQogICAgfQoKICAgIC8vIHNldCBzY29wZSBpZCBhdHRyaWJ1dGUgZm9yIHNjb3BlZCBDU1MuCiAgICAvLyB0aGlzIGlzIGltcGxlbWVudGVkIGFzIGEgc3BlY2lhbCBjYXNlIHRvIGF2b2lkIHRoZSBvdmVyaGVhZAogICAgLy8gb2YgZ29pbmcgdGhyb3VnaCB0aGUgbm9ybWFsIGF0dHJpYnV0ZSBwYXRjaGluZyBwcm9jZXNzLgogICAgZnVuY3Rpb24gc2V0U2NvcGUgKHZub2RlKSB7CiAgICAgIHZhciBpOwogICAgICBpZiAoaXNEZWYoaSA9IHZub2RlLmZuU2NvcGVJZCkpIHsKICAgICAgICBub2RlT3BzLnNldFN0eWxlU2NvcGUodm5vZGUuZWxtLCBpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgYW5jZXN0b3IgPSB2bm9kZTsKICAgICAgICB3aGlsZSAoYW5jZXN0b3IpIHsKICAgICAgICAgIGlmIChpc0RlZihpID0gYW5jZXN0b3IuY29udGV4dCkgJiYgaXNEZWYoaSA9IGkuJG9wdGlvbnMuX3Njb3BlSWQpKSB7CiAgICAgICAgICAgIG5vZGVPcHMuc2V0U3R5bGVTY29wZSh2bm9kZS5lbG0sIGkpOwogICAgICAgICAgfQogICAgICAgICAgYW5jZXN0b3IgPSBhbmNlc3Rvci5wYXJlbnQ7CiAgICAgICAgfQogICAgICB9CiAgICAgIC8vIGZvciBzbG90IGNvbnRlbnQgdGhleSBzaG91bGQgYWxzbyBnZXQgdGhlIHNjb3BlSWQgZnJvbSB0aGUgaG9zdCBpbnN0YW5jZS4KICAgICAgaWYgKGlzRGVmKGkgPSBhY3RpdmVJbnN0YW5jZSkgJiYKICAgICAgICBpICE9PSB2bm9kZS5jb250ZXh0ICYmCiAgICAgICAgaSAhPT0gdm5vZGUuZm5Db250ZXh0ICYmCiAgICAgICAgaXNEZWYoaSA9IGkuJG9wdGlvbnMuX3Njb3BlSWQpCiAgICAgICkgewogICAgICAgIG5vZGVPcHMuc2V0U3R5bGVTY29wZSh2bm9kZS5lbG0sIGkpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYWRkVm5vZGVzIChwYXJlbnRFbG0sIHJlZkVsbSwgdm5vZGVzLCBzdGFydElkeCwgZW5kSWR4LCBpbnNlcnRlZFZub2RlUXVldWUpIHsKICAgICAgZm9yICg7IHN0YXJ0SWR4IDw9IGVuZElkeDsgKytzdGFydElkeCkgewogICAgICAgIGNyZWF0ZUVsbSh2bm9kZXNbc3RhcnRJZHhdLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgcmVmRWxtLCBmYWxzZSwgdm5vZGVzLCBzdGFydElkeCk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBpbnZva2VEZXN0cm95SG9vayAodm5vZGUpIHsKICAgICAgdmFyIGksIGo7CiAgICAgIHZhciBkYXRhID0gdm5vZGUuZGF0YTsKICAgICAgaWYgKGlzRGVmKGRhdGEpKSB7CiAgICAgICAgaWYgKGlzRGVmKGkgPSBkYXRhLmhvb2spICYmIGlzRGVmKGkgPSBpLmRlc3Ryb3kpKSB7IGkodm5vZGUpOyB9CiAgICAgICAgZm9yIChpID0gMDsgaSA8IGNicy5kZXN0cm95Lmxlbmd0aDsgKytpKSB7IGNicy5kZXN0cm95W2ldKHZub2RlKTsgfQogICAgICB9CiAgICAgIGlmIChpc0RlZihpID0gdm5vZGUuY2hpbGRyZW4pKSB7CiAgICAgICAgZm9yIChqID0gMDsgaiA8IHZub2RlLmNoaWxkcmVuLmxlbmd0aDsgKytqKSB7CiAgICAgICAgICBpbnZva2VEZXN0cm95SG9vayh2bm9kZS5jaGlsZHJlbltqXSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcmVtb3ZlVm5vZGVzICh2bm9kZXMsIHN0YXJ0SWR4LCBlbmRJZHgpIHsKICAgICAgZm9yICg7IHN0YXJ0SWR4IDw9IGVuZElkeDsgKytzdGFydElkeCkgewogICAgICAgIHZhciBjaCA9IHZub2Rlc1tzdGFydElkeF07CiAgICAgICAgaWYgKGlzRGVmKGNoKSkgewogICAgICAgICAgaWYgKGlzRGVmKGNoLnRhZykpIHsKICAgICAgICAgICAgcmVtb3ZlQW5kSW52b2tlUmVtb3ZlSG9vayhjaCk7CiAgICAgICAgICAgIGludm9rZURlc3Ryb3lIb29rKGNoKTsKICAgICAgICAgIH0gZWxzZSB7IC8vIFRleHQgbm9kZQogICAgICAgICAgICByZW1vdmVOb2RlKGNoLmVsbSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcmVtb3ZlQW5kSW52b2tlUmVtb3ZlSG9vayAodm5vZGUsIHJtKSB7CiAgICAgIGlmIChpc0RlZihybSkgfHwgaXNEZWYodm5vZGUuZGF0YSkpIHsKICAgICAgICB2YXIgaTsKICAgICAgICB2YXIgbGlzdGVuZXJzID0gY2JzLnJlbW92ZS5sZW5ndGggKyAxOwogICAgICAgIGlmIChpc0RlZihybSkpIHsKICAgICAgICAgIC8vIHdlIGhhdmUgYSByZWN1cnNpdmVseSBwYXNzZWQgZG93biBybSBjYWxsYmFjawogICAgICAgICAgLy8gaW5jcmVhc2UgdGhlIGxpc3RlbmVycyBjb3VudAogICAgICAgICAgcm0ubGlzdGVuZXJzICs9IGxpc3RlbmVyczsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gZGlyZWN0bHkgcmVtb3ZpbmcKICAgICAgICAgIHJtID0gY3JlYXRlUm1DYih2bm9kZS5lbG0sIGxpc3RlbmVycyk7CiAgICAgICAgfQogICAgICAgIC8vIHJlY3Vyc2l2ZWx5IGludm9rZSBob29rcyBvbiBjaGlsZCBjb21wb25lbnQgcm9vdCBub2RlCiAgICAgICAgaWYgKGlzRGVmKGkgPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSkgJiYgaXNEZWYoaSA9IGkuX3Zub2RlKSAmJiBpc0RlZihpLmRhdGEpKSB7CiAgICAgICAgICByZW1vdmVBbmRJbnZva2VSZW1vdmVIb29rKGksIHJtKTsKICAgICAgICB9CiAgICAgICAgZm9yIChpID0gMDsgaSA8IGNicy5yZW1vdmUubGVuZ3RoOyArK2kpIHsKICAgICAgICAgIGNicy5yZW1vdmVbaV0odm5vZGUsIHJtKTsKICAgICAgICB9CiAgICAgICAgaWYgKGlzRGVmKGkgPSB2bm9kZS5kYXRhLmhvb2spICYmIGlzRGVmKGkgPSBpLnJlbW92ZSkpIHsKICAgICAgICAgIGkodm5vZGUsIHJtKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcm0oKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVtb3ZlTm9kZSh2bm9kZS5lbG0pOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlQ2hpbGRyZW4gKHBhcmVudEVsbSwgb2xkQ2gsIG5ld0NoLCBpbnNlcnRlZFZub2RlUXVldWUsIHJlbW92ZU9ubHkpIHsKICAgICAgdmFyIG9sZFN0YXJ0SWR4ID0gMDsKICAgICAgdmFyIG5ld1N0YXJ0SWR4ID0gMDsKICAgICAgdmFyIG9sZEVuZElkeCA9IG9sZENoLmxlbmd0aCAtIDE7CiAgICAgIHZhciBvbGRTdGFydFZub2RlID0gb2xkQ2hbMF07CiAgICAgIHZhciBvbGRFbmRWbm9kZSA9IG9sZENoW29sZEVuZElkeF07CiAgICAgIHZhciBuZXdFbmRJZHggPSBuZXdDaC5sZW5ndGggLSAxOwogICAgICB2YXIgbmV3U3RhcnRWbm9kZSA9IG5ld0NoWzBdOwogICAgICB2YXIgbmV3RW5kVm5vZGUgPSBuZXdDaFtuZXdFbmRJZHhdOwogICAgICB2YXIgb2xkS2V5VG9JZHgsIGlkeEluT2xkLCB2bm9kZVRvTW92ZSwgcmVmRWxtOwoKICAgICAgLy8gcmVtb3ZlT25seSBpcyBhIHNwZWNpYWwgZmxhZyB1c2VkIG9ubHkgYnkgPHRyYW5zaXRpb24tZ3JvdXA+CiAgICAgIC8vIHRvIGVuc3VyZSByZW1vdmVkIGVsZW1lbnRzIHN0YXkgaW4gY29ycmVjdCByZWxhdGl2ZSBwb3NpdGlvbnMKICAgICAgLy8gZHVyaW5nIGxlYXZpbmcgdHJhbnNpdGlvbnMKICAgICAgdmFyIGNhbk1vdmUgPSAhcmVtb3ZlT25seTsKCiAgICAgIHsKICAgICAgICBjaGVja0R1cGxpY2F0ZUtleXMobmV3Q2gpOwogICAgICB9CgogICAgICB3aGlsZSAob2xkU3RhcnRJZHggPD0gb2xkRW5kSWR4ICYmIG5ld1N0YXJ0SWR4IDw9IG5ld0VuZElkeCkgewogICAgICAgIGlmIChpc1VuZGVmKG9sZFN0YXJ0Vm5vZGUpKSB7CiAgICAgICAgICBvbGRTdGFydFZub2RlID0gb2xkQ2hbKytvbGRTdGFydElkeF07IC8vIFZub2RlIGhhcyBiZWVuIG1vdmVkIGxlZnQKICAgICAgICB9IGVsc2UgaWYgKGlzVW5kZWYob2xkRW5kVm5vZGUpKSB7CiAgICAgICAgICBvbGRFbmRWbm9kZSA9IG9sZENoWy0tb2xkRW5kSWR4XTsKICAgICAgICB9IGVsc2UgaWYgKHNhbWVWbm9kZShvbGRTdGFydFZub2RlLCBuZXdTdGFydFZub2RlKSkgewogICAgICAgICAgcGF0Y2hWbm9kZShvbGRTdGFydFZub2RlLCBuZXdTdGFydFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIG5ld0NoLCBuZXdTdGFydElkeCk7CiAgICAgICAgICBvbGRTdGFydFZub2RlID0gb2xkQ2hbKytvbGRTdGFydElkeF07CiAgICAgICAgICBuZXdTdGFydFZub2RlID0gbmV3Q2hbKytuZXdTdGFydElkeF07CiAgICAgICAgfSBlbHNlIGlmIChzYW1lVm5vZGUob2xkRW5kVm5vZGUsIG5ld0VuZFZub2RlKSkgewogICAgICAgICAgcGF0Y2hWbm9kZShvbGRFbmRWbm9kZSwgbmV3RW5kVm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgbmV3Q2gsIG5ld0VuZElkeCk7CiAgICAgICAgICBvbGRFbmRWbm9kZSA9IG9sZENoWy0tb2xkRW5kSWR4XTsKICAgICAgICAgIG5ld0VuZFZub2RlID0gbmV3Q2hbLS1uZXdFbmRJZHhdOwogICAgICAgIH0gZWxzZSBpZiAoc2FtZVZub2RlKG9sZFN0YXJ0Vm5vZGUsIG5ld0VuZFZub2RlKSkgeyAvLyBWbm9kZSBtb3ZlZCByaWdodAogICAgICAgICAgcGF0Y2hWbm9kZShvbGRTdGFydFZub2RlLCBuZXdFbmRWbm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBuZXdDaCwgbmV3RW5kSWR4KTsKICAgICAgICAgIGNhbk1vdmUgJiYgbm9kZU9wcy5pbnNlcnRCZWZvcmUocGFyZW50RWxtLCBvbGRTdGFydFZub2RlLmVsbSwgbm9kZU9wcy5uZXh0U2libGluZyhvbGRFbmRWbm9kZS5lbG0pKTsKICAgICAgICAgIG9sZFN0YXJ0Vm5vZGUgPSBvbGRDaFsrK29sZFN0YXJ0SWR4XTsKICAgICAgICAgIG5ld0VuZFZub2RlID0gbmV3Q2hbLS1uZXdFbmRJZHhdOwogICAgICAgIH0gZWxzZSBpZiAoc2FtZVZub2RlKG9sZEVuZFZub2RlLCBuZXdTdGFydFZub2RlKSkgeyAvLyBWbm9kZSBtb3ZlZCBsZWZ0CiAgICAgICAgICBwYXRjaFZub2RlKG9sZEVuZFZub2RlLCBuZXdTdGFydFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIG5ld0NoLCBuZXdTdGFydElkeCk7CiAgICAgICAgICBjYW5Nb3ZlICYmIG5vZGVPcHMuaW5zZXJ0QmVmb3JlKHBhcmVudEVsbSwgb2xkRW5kVm5vZGUuZWxtLCBvbGRTdGFydFZub2RlLmVsbSk7CiAgICAgICAgICBvbGRFbmRWbm9kZSA9IG9sZENoWy0tb2xkRW5kSWR4XTsKICAgICAgICAgIG5ld1N0YXJ0Vm5vZGUgPSBuZXdDaFsrK25ld1N0YXJ0SWR4XTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKGlzVW5kZWYob2xkS2V5VG9JZHgpKSB7IG9sZEtleVRvSWR4ID0gY3JlYXRlS2V5VG9PbGRJZHgob2xkQ2gsIG9sZFN0YXJ0SWR4LCBvbGRFbmRJZHgpOyB9CiAgICAgICAgICBpZHhJbk9sZCA9IGlzRGVmKG5ld1N0YXJ0Vm5vZGUua2V5KQogICAgICAgICAgICA/IG9sZEtleVRvSWR4W25ld1N0YXJ0Vm5vZGUua2V5XQogICAgICAgICAgICA6IGZpbmRJZHhJbk9sZChuZXdTdGFydFZub2RlLCBvbGRDaCwgb2xkU3RhcnRJZHgsIG9sZEVuZElkeCk7CiAgICAgICAgICBpZiAoaXNVbmRlZihpZHhJbk9sZCkpIHsgLy8gTmV3IGVsZW1lbnQKICAgICAgICAgICAgY3JlYXRlRWxtKG5ld1N0YXJ0Vm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgcGFyZW50RWxtLCBvbGRTdGFydFZub2RlLmVsbSwgZmFsc2UsIG5ld0NoLCBuZXdTdGFydElkeCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2bm9kZVRvTW92ZSA9IG9sZENoW2lkeEluT2xkXTsKICAgICAgICAgICAgaWYgKHNhbWVWbm9kZSh2bm9kZVRvTW92ZSwgbmV3U3RhcnRWbm9kZSkpIHsKICAgICAgICAgICAgICBwYXRjaFZub2RlKHZub2RlVG9Nb3ZlLCBuZXdTdGFydFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIG5ld0NoLCBuZXdTdGFydElkeCk7CiAgICAgICAgICAgICAgb2xkQ2hbaWR4SW5PbGRdID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgIGNhbk1vdmUgJiYgbm9kZU9wcy5pbnNlcnRCZWZvcmUocGFyZW50RWxtLCB2bm9kZVRvTW92ZS5lbG0sIG9sZFN0YXJ0Vm5vZGUuZWxtKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyBzYW1lIGtleSBidXQgZGlmZmVyZW50IGVsZW1lbnQuIHRyZWF0IGFzIG5ldyBlbGVtZW50CiAgICAgICAgICAgICAgY3JlYXRlRWxtKG5ld1N0YXJ0Vm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgcGFyZW50RWxtLCBvbGRTdGFydFZub2RlLmVsbSwgZmFsc2UsIG5ld0NoLCBuZXdTdGFydElkeCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIG5ld1N0YXJ0Vm5vZGUgPSBuZXdDaFsrK25ld1N0YXJ0SWR4XTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKG9sZFN0YXJ0SWR4ID4gb2xkRW5kSWR4KSB7CiAgICAgICAgcmVmRWxtID0gaXNVbmRlZihuZXdDaFtuZXdFbmRJZHggKyAxXSkgPyBudWxsIDogbmV3Q2hbbmV3RW5kSWR4ICsgMV0uZWxtOwogICAgICAgIGFkZFZub2RlcyhwYXJlbnRFbG0sIHJlZkVsbSwgbmV3Q2gsIG5ld1N0YXJ0SWR4LCBuZXdFbmRJZHgsIGluc2VydGVkVm5vZGVRdWV1ZSk7CiAgICAgIH0gZWxzZSBpZiAobmV3U3RhcnRJZHggPiBuZXdFbmRJZHgpIHsKICAgICAgICByZW1vdmVWbm9kZXMob2xkQ2gsIG9sZFN0YXJ0SWR4LCBvbGRFbmRJZHgpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gY2hlY2tEdXBsaWNhdGVLZXlzIChjaGlsZHJlbikgewogICAgICB2YXIgc2VlbktleXMgPSB7fTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciB2bm9kZSA9IGNoaWxkcmVuW2ldOwogICAgICAgIHZhciBrZXkgPSB2bm9kZS5rZXk7CiAgICAgICAgaWYgKGlzRGVmKGtleSkpIHsKICAgICAgICAgIGlmIChzZWVuS2V5c1trZXldKSB7CiAgICAgICAgICAgIHdhcm4oCiAgICAgICAgICAgICAgKCJEdXBsaWNhdGUga2V5cyBkZXRlY3RlZDogJyIgKyBrZXkgKyAiJy4gVGhpcyBtYXkgY2F1c2UgYW4gdXBkYXRlIGVycm9yLiIpLAogICAgICAgICAgICAgIHZub2RlLmNvbnRleHQKICAgICAgICAgICAgKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNlZW5LZXlzW2tleV0gPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGZpbmRJZHhJbk9sZCAobm9kZSwgb2xkQ2gsIHN0YXJ0LCBlbmQpIHsKICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHsKICAgICAgICB2YXIgYyA9IG9sZENoW2ldOwogICAgICAgIGlmIChpc0RlZihjKSAmJiBzYW1lVm5vZGUobm9kZSwgYykpIHsgcmV0dXJuIGkgfQogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcGF0Y2hWbm9kZSAoCiAgICAgIG9sZFZub2RlLAogICAgICB2bm9kZSwKICAgICAgaW5zZXJ0ZWRWbm9kZVF1ZXVlLAogICAgICBvd25lckFycmF5LAogICAgICBpbmRleCwKICAgICAgcmVtb3ZlT25seQogICAgKSB7CiAgICAgIGlmIChvbGRWbm9kZSA9PT0gdm5vZGUpIHsKICAgICAgICByZXR1cm4KICAgICAgfQoKICAgICAgaWYgKGlzRGVmKHZub2RlLmVsbSkgJiYgaXNEZWYob3duZXJBcnJheSkpIHsKICAgICAgICAvLyBjbG9uZSByZXVzZWQgdm5vZGUKICAgICAgICB2bm9kZSA9IG93bmVyQXJyYXlbaW5kZXhdID0gY2xvbmVWTm9kZSh2bm9kZSk7CiAgICAgIH0KCiAgICAgIHZhciBlbG0gPSB2bm9kZS5lbG0gPSBvbGRWbm9kZS5lbG07CgogICAgICBpZiAoaXNUcnVlKG9sZFZub2RlLmlzQXN5bmNQbGFjZWhvbGRlcikpIHsKICAgICAgICBpZiAoaXNEZWYodm5vZGUuYXN5bmNGYWN0b3J5LnJlc29sdmVkKSkgewogICAgICAgICAgaHlkcmF0ZShvbGRWbm9kZS5lbG0sIHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2bm9kZS5pc0FzeW5jUGxhY2Vob2xkZXIgPSB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4KICAgICAgfQoKICAgICAgLy8gcmV1c2UgZWxlbWVudCBmb3Igc3RhdGljIHRyZWVzLgogICAgICAvLyBub3RlIHdlIG9ubHkgZG8gdGhpcyBpZiB0aGUgdm5vZGUgaXMgY2xvbmVkIC0KICAgICAgLy8gaWYgdGhlIG5ldyBub2RlIGlzIG5vdCBjbG9uZWQgaXQgbWVhbnMgdGhlIHJlbmRlciBmdW5jdGlvbnMgaGF2ZSBiZWVuCiAgICAgIC8vIHJlc2V0IGJ5IHRoZSBob3QtcmVsb2FkLWFwaSBhbmQgd2UgbmVlZCB0byBkbyBhIHByb3BlciByZS1yZW5kZXIuCiAgICAgIGlmIChpc1RydWUodm5vZGUuaXNTdGF0aWMpICYmCiAgICAgICAgaXNUcnVlKG9sZFZub2RlLmlzU3RhdGljKSAmJgogICAgICAgIHZub2RlLmtleSA9PT0gb2xkVm5vZGUua2V5ICYmCiAgICAgICAgKGlzVHJ1ZSh2bm9kZS5pc0Nsb25lZCkgfHwgaXNUcnVlKHZub2RlLmlzT25jZSkpCiAgICAgICkgewogICAgICAgIHZub2RlLmNvbXBvbmVudEluc3RhbmNlID0gb2xkVm5vZGUuY29tcG9uZW50SW5zdGFuY2U7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIHZhciBpOwogICAgICB2YXIgZGF0YSA9IHZub2RlLmRhdGE7CiAgICAgIGlmIChpc0RlZihkYXRhKSAmJiBpc0RlZihpID0gZGF0YS5ob29rKSAmJiBpc0RlZihpID0gaS5wcmVwYXRjaCkpIHsKICAgICAgICBpKG9sZFZub2RlLCB2bm9kZSk7CiAgICAgIH0KCiAgICAgIHZhciBvbGRDaCA9IG9sZFZub2RlLmNoaWxkcmVuOwogICAgICB2YXIgY2ggPSB2bm9kZS5jaGlsZHJlbjsKICAgICAgaWYgKGlzRGVmKGRhdGEpICYmIGlzUGF0Y2hhYmxlKHZub2RlKSkgewogICAgICAgIGZvciAoaSA9IDA7IGkgPCBjYnMudXBkYXRlLmxlbmd0aDsgKytpKSB7IGNicy51cGRhdGVbaV0ob2xkVm5vZGUsIHZub2RlKTsgfQogICAgICAgIGlmIChpc0RlZihpID0gZGF0YS5ob29rKSAmJiBpc0RlZihpID0gaS51cGRhdGUpKSB7IGkob2xkVm5vZGUsIHZub2RlKTsgfQogICAgICB9CiAgICAgIGlmIChpc1VuZGVmKHZub2RlLnRleHQpKSB7CiAgICAgICAgaWYgKGlzRGVmKG9sZENoKSAmJiBpc0RlZihjaCkpIHsKICAgICAgICAgIGlmIChvbGRDaCAhPT0gY2gpIHsgdXBkYXRlQ2hpbGRyZW4oZWxtLCBvbGRDaCwgY2gsIGluc2VydGVkVm5vZGVRdWV1ZSwgcmVtb3ZlT25seSk7IH0KICAgICAgICB9IGVsc2UgaWYgKGlzRGVmKGNoKSkgewogICAgICAgICAgewogICAgICAgICAgICBjaGVja0R1cGxpY2F0ZUtleXMoY2gpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGlzRGVmKG9sZFZub2RlLnRleHQpKSB7IG5vZGVPcHMuc2V0VGV4dENvbnRlbnQoZWxtLCAnJyk7IH0KICAgICAgICAgIGFkZFZub2RlcyhlbG0sIG51bGwsIGNoLCAwLCBjaC5sZW5ndGggLSAxLCBpbnNlcnRlZFZub2RlUXVldWUpOwogICAgICAgIH0gZWxzZSBpZiAoaXNEZWYob2xkQ2gpKSB7CiAgICAgICAgICByZW1vdmVWbm9kZXMob2xkQ2gsIDAsIG9sZENoLmxlbmd0aCAtIDEpOwogICAgICAgIH0gZWxzZSBpZiAoaXNEZWYob2xkVm5vZGUudGV4dCkpIHsKICAgICAgICAgIG5vZGVPcHMuc2V0VGV4dENvbnRlbnQoZWxtLCAnJyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKG9sZFZub2RlLnRleHQgIT09IHZub2RlLnRleHQpIHsKICAgICAgICBub2RlT3BzLnNldFRleHRDb250ZW50KGVsbSwgdm5vZGUudGV4dCk7CiAgICAgIH0KICAgICAgaWYgKGlzRGVmKGRhdGEpKSB7CiAgICAgICAgaWYgKGlzRGVmKGkgPSBkYXRhLmhvb2spICYmIGlzRGVmKGkgPSBpLnBvc3RwYXRjaCkpIHsgaShvbGRWbm9kZSwgdm5vZGUpOyB9CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBpbnZva2VJbnNlcnRIb29rICh2bm9kZSwgcXVldWUsIGluaXRpYWwpIHsKICAgICAgLy8gZGVsYXkgaW5zZXJ0IGhvb2tzIGZvciBjb21wb25lbnQgcm9vdCBub2RlcywgaW52b2tlIHRoZW0gYWZ0ZXIgdGhlCiAgICAgIC8vIGVsZW1lbnQgaXMgcmVhbGx5IGluc2VydGVkCiAgICAgIGlmIChpc1RydWUoaW5pdGlhbCkgJiYgaXNEZWYodm5vZGUucGFyZW50KSkgewogICAgICAgIHZub2RlLnBhcmVudC5kYXRhLnBlbmRpbmdJbnNlcnQgPSBxdWV1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICBxdWV1ZVtpXS5kYXRhLmhvb2suaW5zZXJ0KHF1ZXVlW2ldKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICB2YXIgaHlkcmF0aW9uQmFpbGVkID0gZmFsc2U7CiAgICAvLyBsaXN0IG9mIG1vZHVsZXMgdGhhdCBjYW4gc2tpcCBjcmVhdGUgaG9vayBkdXJpbmcgaHlkcmF0aW9uIGJlY2F1c2UgdGhleQogICAgLy8gYXJlIGFscmVhZHkgcmVuZGVyZWQgb24gdGhlIGNsaWVudCBvciBoYXMgbm8gbmVlZCBmb3IgaW5pdGlhbGl6YXRpb24KICAgIC8vIE5vdGU6IHN0eWxlIGlzIGV4Y2x1ZGVkIGJlY2F1c2UgaXQgcmVsaWVzIG9uIGluaXRpYWwgY2xvbmUgZm9yIGZ1dHVyZQogICAgLy8gZGVlcCB1cGRhdGVzICgjNzA2MykuCiAgICB2YXIgaXNSZW5kZXJlZE1vZHVsZSA9IG1ha2VNYXAoJ2F0dHJzLGNsYXNzLHN0YXRpY0NsYXNzLHN0YXRpY1N0eWxlLGtleScpOwoKICAgIC8vIE5vdGU6IHRoaXMgaXMgYSBicm93c2VyLW9ubHkgZnVuY3Rpb24gc28gd2UgY2FuIGFzc3VtZSBlbG1zIGFyZSBET00gbm9kZXMuCiAgICBmdW5jdGlvbiBoeWRyYXRlIChlbG0sIHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIGluVlByZSkgewogICAgICB2YXIgaTsKICAgICAgdmFyIHRhZyA9IHZub2RlLnRhZzsKICAgICAgdmFyIGRhdGEgPSB2bm9kZS5kYXRhOwogICAgICB2YXIgY2hpbGRyZW4gPSB2bm9kZS5jaGlsZHJlbjsKICAgICAgaW5WUHJlID0gaW5WUHJlIHx8IChkYXRhICYmIGRhdGEucHJlKTsKICAgICAgdm5vZGUuZWxtID0gZWxtOwoKICAgICAgaWYgKGlzVHJ1ZSh2bm9kZS5pc0NvbW1lbnQpICYmIGlzRGVmKHZub2RlLmFzeW5jRmFjdG9yeSkpIHsKICAgICAgICB2bm9kZS5pc0FzeW5jUGxhY2Vob2xkZXIgPSB0cnVlOwogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgICAgLy8gYXNzZXJ0IG5vZGUgbWF0Y2gKICAgICAgewogICAgICAgIGlmICghYXNzZXJ0Tm9kZU1hdGNoKGVsbSwgdm5vZGUsIGluVlByZSkpIHsKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoaXNEZWYoZGF0YSkpIHsKICAgICAgICBpZiAoaXNEZWYoaSA9IGRhdGEuaG9vaykgJiYgaXNEZWYoaSA9IGkuaW5pdCkpIHsgaSh2bm9kZSwgdHJ1ZSAvKiBoeWRyYXRpbmcgKi8pOyB9CiAgICAgICAgaWYgKGlzRGVmKGkgPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSkpIHsKICAgICAgICAgIC8vIGNoaWxkIGNvbXBvbmVudC4gaXQgc2hvdWxkIGhhdmUgaHlkcmF0ZWQgaXRzIG93biB0cmVlLgogICAgICAgICAgaW5pdENvbXBvbmVudCh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTsKICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChpc0RlZih0YWcpKSB7CiAgICAgICAgaWYgKGlzRGVmKGNoaWxkcmVuKSkgewogICAgICAgICAgLy8gZW1wdHkgZWxlbWVudCwgYWxsb3cgY2xpZW50IHRvIHBpY2sgdXAgYW5kIHBvcHVsYXRlIGNoaWxkcmVuCiAgICAgICAgICBpZiAoIWVsbS5oYXNDaGlsZE5vZGVzKCkpIHsKICAgICAgICAgICAgY3JlYXRlQ2hpbGRyZW4odm5vZGUsIGNoaWxkcmVuLCBpbnNlcnRlZFZub2RlUXVldWUpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gdi1odG1sIGFuZCBkb21Qcm9wczogaW5uZXJIVE1MCiAgICAgICAgICAgIGlmIChpc0RlZihpID0gZGF0YSkgJiYgaXNEZWYoaSA9IGkuZG9tUHJvcHMpICYmIGlzRGVmKGkgPSBpLmlubmVySFRNTCkpIHsKICAgICAgICAgICAgICBpZiAoaSAhPT0gZWxtLmlubmVySFRNTCkgewogICAgICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmCiAgICAgICAgICAgICAgICAgICFoeWRyYXRpb25CYWlsZWQKICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICBoeWRyYXRpb25CYWlsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1BhcmVudDogJywgZWxtKTsKICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdzZXJ2ZXIgaW5uZXJIVE1MOiAnLCBpKTsKICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdjbGllbnQgaW5uZXJIVE1MOiAnLCBlbG0uaW5uZXJIVE1MKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyBpdGVyYXRlIGFuZCBjb21wYXJlIGNoaWxkcmVuIGxpc3RzCiAgICAgICAgICAgICAgdmFyIGNoaWxkcmVuTWF0Y2ggPSB0cnVlOwogICAgICAgICAgICAgIHZhciBjaGlsZE5vZGUgPSBlbG0uZmlyc3RDaGlsZDsKICAgICAgICAgICAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBjaGlsZHJlbi5sZW5ndGg7IGkkMSsrKSB7CiAgICAgICAgICAgICAgICBpZiAoIWNoaWxkTm9kZSB8fCAhaHlkcmF0ZShjaGlsZE5vZGUsIGNoaWxkcmVuW2kkMV0sIGluc2VydGVkVm5vZGVRdWV1ZSwgaW5WUHJlKSkgewogICAgICAgICAgICAgICAgICBjaGlsZHJlbk1hdGNoID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjaGlsZE5vZGUgPSBjaGlsZE5vZGUubmV4dFNpYmxpbmc7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIC8vIGlmIGNoaWxkTm9kZSBpcyBub3QgbnVsbCwgaXQgbWVhbnMgdGhlIGFjdHVhbCBjaGlsZE5vZGVzIGxpc3QgaXMKICAgICAgICAgICAgICAvLyBsb25nZXIgdGhhbiB0aGUgdmlydHVhbCBjaGlsZHJlbiBsaXN0LgogICAgICAgICAgICAgIGlmICghY2hpbGRyZW5NYXRjaCB8fCBjaGlsZE5vZGUpIHsKICAgICAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJgogICAgICAgICAgICAgICAgICAhaHlkcmF0aW9uQmFpbGVkCiAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgaHlkcmF0aW9uQmFpbGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdQYXJlbnQ6ICcsIGVsbSk7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignTWlzbWF0Y2hpbmcgY2hpbGROb2RlcyB2cy4gVk5vZGVzOiAnLCBlbG0uY2hpbGROb2RlcywgY2hpbGRyZW4pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChpc0RlZihkYXRhKSkgewogICAgICAgICAgdmFyIGZ1bGxJbnZva2UgPSBmYWxzZTsKICAgICAgICAgIGZvciAodmFyIGtleSBpbiBkYXRhKSB7CiAgICAgICAgICAgIGlmICghaXNSZW5kZXJlZE1vZHVsZShrZXkpKSB7CiAgICAgICAgICAgICAgZnVsbEludm9rZSA9IHRydWU7CiAgICAgICAgICAgICAgaW52b2tlQ3JlYXRlSG9va3Modm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7CiAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKCFmdWxsSW52b2tlICYmIGRhdGFbJ2NsYXNzJ10pIHsKICAgICAgICAgICAgLy8gZW5zdXJlIGNvbGxlY3RpbmcgZGVwcyBmb3IgZGVlcCBjbGFzcyBiaW5kaW5ncyBmb3IgZnV0dXJlIHVwZGF0ZXMKICAgICAgICAgICAgdHJhdmVyc2UoZGF0YVsnY2xhc3MnXSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGVsbS5kYXRhICE9PSB2bm9kZS50ZXh0KSB7CiAgICAgICAgZWxtLmRhdGEgPSB2bm9kZS50ZXh0OwogICAgICB9CiAgICAgIHJldHVybiB0cnVlCiAgICB9CgogICAgZnVuY3Rpb24gYXNzZXJ0Tm9kZU1hdGNoIChub2RlLCB2bm9kZSwgaW5WUHJlKSB7CiAgICAgIGlmIChpc0RlZih2bm9kZS50YWcpKSB7CiAgICAgICAgcmV0dXJuIHZub2RlLnRhZy5pbmRleE9mKCd2dWUtY29tcG9uZW50JykgPT09IDAgfHwgKAogICAgICAgICAgIWlzVW5rbm93bkVsZW1lbnQkJDEodm5vZGUsIGluVlByZSkgJiYKICAgICAgICAgIHZub2RlLnRhZy50b0xvd2VyQ2FzZSgpID09PSAobm9kZS50YWdOYW1lICYmIG5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpKQogICAgICAgICkKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbm9kZS5ub2RlVHlwZSA9PT0gKHZub2RlLmlzQ29tbWVudCA/IDggOiAzKQogICAgICB9CiAgICB9CgogICAgcmV0dXJuIGZ1bmN0aW9uIHBhdGNoIChvbGRWbm9kZSwgdm5vZGUsIGh5ZHJhdGluZywgcmVtb3ZlT25seSkgewogICAgICBpZiAoaXNVbmRlZih2bm9kZSkpIHsKICAgICAgICBpZiAoaXNEZWYob2xkVm5vZGUpKSB7IGludm9rZURlc3Ryb3lIb29rKG9sZFZub2RlKTsgfQogICAgICAgIHJldHVybgogICAgICB9CgogICAgICB2YXIgaXNJbml0aWFsUGF0Y2ggPSBmYWxzZTsKICAgICAgdmFyIGluc2VydGVkVm5vZGVRdWV1ZSA9IFtdOwoKICAgICAgaWYgKGlzVW5kZWYob2xkVm5vZGUpKSB7CiAgICAgICAgLy8gZW1wdHkgbW91bnQgKGxpa2VseSBhcyBjb21wb25lbnQpLCBjcmVhdGUgbmV3IHJvb3QgZWxlbWVudAogICAgICAgIGlzSW5pdGlhbFBhdGNoID0gdHJ1ZTsKICAgICAgICBjcmVhdGVFbG0odm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGlzUmVhbEVsZW1lbnQgPSBpc0RlZihvbGRWbm9kZS5ub2RlVHlwZSk7CiAgICAgICAgaWYgKCFpc1JlYWxFbGVtZW50ICYmIHNhbWVWbm9kZShvbGRWbm9kZSwgdm5vZGUpKSB7CiAgICAgICAgICAvLyBwYXRjaCBleGlzdGluZyByb290IG5vZGUKICAgICAgICAgIHBhdGNoVm5vZGUob2xkVm5vZGUsIHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIG51bGwsIG51bGwsIHJlbW92ZU9ubHkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoaXNSZWFsRWxlbWVudCkgewogICAgICAgICAgICAvLyBtb3VudGluZyB0byBhIHJlYWwgZWxlbWVudAogICAgICAgICAgICAvLyBjaGVjayBpZiB0aGlzIGlzIHNlcnZlci1yZW5kZXJlZCBjb250ZW50IGFuZCBpZiB3ZSBjYW4gcGVyZm9ybQogICAgICAgICAgICAvLyBhIHN1Y2Nlc3NmdWwgaHlkcmF0aW9uLgogICAgICAgICAgICBpZiAob2xkVm5vZGUubm9kZVR5cGUgPT09IDEgJiYgb2xkVm5vZGUuaGFzQXR0cmlidXRlKFNTUl9BVFRSKSkgewogICAgICAgICAgICAgIG9sZFZub2RlLnJlbW92ZUF0dHJpYnV0ZShTU1JfQVRUUik7CiAgICAgICAgICAgICAgaHlkcmF0aW5nID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaXNUcnVlKGh5ZHJhdGluZykpIHsKICAgICAgICAgICAgICBpZiAoaHlkcmF0ZShvbGRWbm9kZSwgdm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSkpIHsKICAgICAgICAgICAgICAgIGludm9rZUluc2VydEhvb2sodm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gb2xkVm5vZGUKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgd2FybigKICAgICAgICAgICAgICAgICAgJ1RoZSBjbGllbnQtc2lkZSByZW5kZXJlZCB2aXJ0dWFsIERPTSB0cmVlIGlzIG5vdCBtYXRjaGluZyAnICsKICAgICAgICAgICAgICAgICAgJ3NlcnZlci1yZW5kZXJlZCBjb250ZW50LiBUaGlzIGlzIGxpa2VseSBjYXVzZWQgYnkgaW5jb3JyZWN0ICcgKwogICAgICAgICAgICAgICAgICAnSFRNTCBtYXJrdXAsIGZvciBleGFtcGxlIG5lc3RpbmcgYmxvY2stbGV2ZWwgZWxlbWVudHMgaW5zaWRlICcgKwogICAgICAgICAgICAgICAgICAnPHA+LCBvciBtaXNzaW5nIDx0Ym9keT4uIEJhaWxpbmcgaHlkcmF0aW9uIGFuZCBwZXJmb3JtaW5nICcgKwogICAgICAgICAgICAgICAgICAnZnVsbCBjbGllbnQtc2lkZSByZW5kZXIuJwogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gZWl0aGVyIG5vdCBzZXJ2ZXItcmVuZGVyZWQsIG9yIGh5ZHJhdGlvbiBmYWlsZWQuCiAgICAgICAgICAgIC8vIGNyZWF0ZSBhbiBlbXB0eSBub2RlIGFuZCByZXBsYWNlIGl0CiAgICAgICAgICAgIG9sZFZub2RlID0gZW1wdHlOb2RlQXQob2xkVm5vZGUpOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIHJlcGxhY2luZyBleGlzdGluZyBlbGVtZW50CiAgICAgICAgICB2YXIgb2xkRWxtID0gb2xkVm5vZGUuZWxtOwogICAgICAgICAgdmFyIHBhcmVudEVsbSA9IG5vZGVPcHMucGFyZW50Tm9kZShvbGRFbG0pOwoKICAgICAgICAgIC8vIGNyZWF0ZSBuZXcgbm9kZQogICAgICAgICAgY3JlYXRlRWxtKAogICAgICAgICAgICB2bm9kZSwKICAgICAgICAgICAgaW5zZXJ0ZWRWbm9kZVF1ZXVlLAogICAgICAgICAgICAvLyBleHRyZW1lbHkgcmFyZSBlZGdlIGNhc2U6IGRvIG5vdCBpbnNlcnQgaWYgb2xkIGVsZW1lbnQgaXMgaW4gYQogICAgICAgICAgICAvLyBsZWF2aW5nIHRyYW5zaXRpb24uIE9ubHkgaGFwcGVucyB3aGVuIGNvbWJpbmluZyB0cmFuc2l0aW9uICsKICAgICAgICAgICAgLy8ga2VlcC1hbGl2ZSArIEhPQ3MuICgjNDU5MCkKICAgICAgICAgICAgb2xkRWxtLl9sZWF2ZUNiID8gbnVsbCA6IHBhcmVudEVsbSwKICAgICAgICAgICAgbm9kZU9wcy5uZXh0U2libGluZyhvbGRFbG0pCiAgICAgICAgICApOwoKICAgICAgICAgIC8vIHVwZGF0ZSBwYXJlbnQgcGxhY2Vob2xkZXIgbm9kZSBlbGVtZW50LCByZWN1cnNpdmVseQogICAgICAgICAgaWYgKGlzRGVmKHZub2RlLnBhcmVudCkpIHsKICAgICAgICAgICAgdmFyIGFuY2VzdG9yID0gdm5vZGUucGFyZW50OwogICAgICAgICAgICB2YXIgcGF0Y2hhYmxlID0gaXNQYXRjaGFibGUodm5vZGUpOwogICAgICAgICAgICB3aGlsZSAoYW5jZXN0b3IpIHsKICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNicy5kZXN0cm95Lmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgICAgICBjYnMuZGVzdHJveVtpXShhbmNlc3Rvcik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGFuY2VzdG9yLmVsbSA9IHZub2RlLmVsbTsKICAgICAgICAgICAgICBpZiAocGF0Y2hhYmxlKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBjYnMuY3JlYXRlLmxlbmd0aDsgKytpJDEpIHsKICAgICAgICAgICAgICAgICAgY2JzLmNyZWF0ZVtpJDFdKGVtcHR5Tm9kZSwgYW5jZXN0b3IpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gIzY1MTMKICAgICAgICAgICAgICAgIC8vIGludm9rZSBpbnNlcnQgaG9va3MgdGhhdCBtYXkgaGF2ZSBiZWVuIG1lcmdlZCBieSBjcmVhdGUgaG9va3MuCiAgICAgICAgICAgICAgICAvLyBlLmcuIGZvciBkaXJlY3RpdmVzIHRoYXQgdXNlcyB0aGUgImluc2VydGVkIiBob29rLgogICAgICAgICAgICAgICAgdmFyIGluc2VydCA9IGFuY2VzdG9yLmRhdGEuaG9vay5pbnNlcnQ7CiAgICAgICAgICAgICAgICBpZiAoaW5zZXJ0Lm1lcmdlZCkgewogICAgICAgICAgICAgICAgICAvLyBzdGFydCBhdCBpbmRleCAxIHRvIGF2b2lkIHJlLWludm9raW5nIGNvbXBvbmVudCBtb3VudGVkIGhvb2sKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSQyID0gMTsgaSQyIDwgaW5zZXJ0LmZucy5sZW5ndGg7IGkkMisrKSB7CiAgICAgICAgICAgICAgICAgICAgaW5zZXJ0LmZuc1tpJDJdKCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmVnaXN0ZXJSZWYoYW5jZXN0b3IpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBhbmNlc3RvciA9IGFuY2VzdG9yLnBhcmVudDsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIC8vIGRlc3Ryb3kgb2xkIG5vZGUKICAgICAgICAgIGlmIChpc0RlZihwYXJlbnRFbG0pKSB7CiAgICAgICAgICAgIHJlbW92ZVZub2Rlcyhbb2xkVm5vZGVdLCAwLCAwKTsKICAgICAgICAgIH0gZWxzZSBpZiAoaXNEZWYob2xkVm5vZGUudGFnKSkgewogICAgICAgICAgICBpbnZva2VEZXN0cm95SG9vayhvbGRWbm9kZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpbnZva2VJbnNlcnRIb29rKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIGlzSW5pdGlhbFBhdGNoKTsKICAgICAgcmV0dXJuIHZub2RlLmVsbQogICAgfQogIH0KCiAgLyogICovCgogIHZhciBkaXJlY3RpdmVzID0gewogICAgY3JlYXRlOiB1cGRhdGVEaXJlY3RpdmVzLAogICAgdXBkYXRlOiB1cGRhdGVEaXJlY3RpdmVzLAogICAgZGVzdHJveTogZnVuY3Rpb24gdW5iaW5kRGlyZWN0aXZlcyAodm5vZGUpIHsKICAgICAgdXBkYXRlRGlyZWN0aXZlcyh2bm9kZSwgZW1wdHlOb2RlKTsKICAgIH0KICB9OwoKICBmdW5jdGlvbiB1cGRhdGVEaXJlY3RpdmVzIChvbGRWbm9kZSwgdm5vZGUpIHsKICAgIGlmIChvbGRWbm9kZS5kYXRhLmRpcmVjdGl2ZXMgfHwgdm5vZGUuZGF0YS5kaXJlY3RpdmVzKSB7CiAgICAgIF91cGRhdGUob2xkVm5vZGUsIHZub2RlKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIF91cGRhdGUgKG9sZFZub2RlLCB2bm9kZSkgewogICAgdmFyIGlzQ3JlYXRlID0gb2xkVm5vZGUgPT09IGVtcHR5Tm9kZTsKICAgIHZhciBpc0Rlc3Ryb3kgPSB2bm9kZSA9PT0gZW1wdHlOb2RlOwogICAgdmFyIG9sZERpcnMgPSBub3JtYWxpemVEaXJlY3RpdmVzJDEob2xkVm5vZGUuZGF0YS5kaXJlY3RpdmVzLCBvbGRWbm9kZS5jb250ZXh0KTsKICAgIHZhciBuZXdEaXJzID0gbm9ybWFsaXplRGlyZWN0aXZlcyQxKHZub2RlLmRhdGEuZGlyZWN0aXZlcywgdm5vZGUuY29udGV4dCk7CgogICAgdmFyIGRpcnNXaXRoSW5zZXJ0ID0gW107CiAgICB2YXIgZGlyc1dpdGhQb3N0cGF0Y2ggPSBbXTsKCiAgICB2YXIga2V5LCBvbGREaXIsIGRpcjsKICAgIGZvciAoa2V5IGluIG5ld0RpcnMpIHsKICAgICAgb2xkRGlyID0gb2xkRGlyc1trZXldOwogICAgICBkaXIgPSBuZXdEaXJzW2tleV07CiAgICAgIGlmICghb2xkRGlyKSB7CiAgICAgICAgLy8gbmV3IGRpcmVjdGl2ZSwgYmluZAogICAgICAgIGNhbGxIb29rJDEoZGlyLCAnYmluZCcsIHZub2RlLCBvbGRWbm9kZSk7CiAgICAgICAgaWYgKGRpci5kZWYgJiYgZGlyLmRlZi5pbnNlcnRlZCkgewogICAgICAgICAgZGlyc1dpdGhJbnNlcnQucHVzaChkaXIpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBleGlzdGluZyBkaXJlY3RpdmUsIHVwZGF0ZQogICAgICAgIGRpci5vbGRWYWx1ZSA9IG9sZERpci52YWx1ZTsKICAgICAgICBkaXIub2xkQXJnID0gb2xkRGlyLmFyZzsKICAgICAgICBjYWxsSG9vayQxKGRpciwgJ3VwZGF0ZScsIHZub2RlLCBvbGRWbm9kZSk7CiAgICAgICAgaWYgKGRpci5kZWYgJiYgZGlyLmRlZi5jb21wb25lbnRVcGRhdGVkKSB7CiAgICAgICAgICBkaXJzV2l0aFBvc3RwYXRjaC5wdXNoKGRpcik7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgaWYgKGRpcnNXaXRoSW5zZXJ0Lmxlbmd0aCkgewogICAgICB2YXIgY2FsbEluc2VydCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpcnNXaXRoSW5zZXJ0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBjYWxsSG9vayQxKGRpcnNXaXRoSW5zZXJ0W2ldLCAnaW5zZXJ0ZWQnLCB2bm9kZSwgb2xkVm5vZGUpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgaWYgKGlzQ3JlYXRlKSB7CiAgICAgICAgbWVyZ2VWTm9kZUhvb2sodm5vZGUsICdpbnNlcnQnLCBjYWxsSW5zZXJ0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsSW5zZXJ0KCk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoZGlyc1dpdGhQb3N0cGF0Y2gubGVuZ3RoKSB7CiAgICAgIG1lcmdlVk5vZGVIb29rKHZub2RlLCAncG9zdHBhdGNoJywgZnVuY3Rpb24gKCkgewogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGlyc1dpdGhQb3N0cGF0Y2gubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGNhbGxIb29rJDEoZGlyc1dpdGhQb3N0cGF0Y2hbaV0sICdjb21wb25lbnRVcGRhdGVkJywgdm5vZGUsIG9sZFZub2RlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIGlmICghaXNDcmVhdGUpIHsKICAgICAgZm9yIChrZXkgaW4gb2xkRGlycykgewogICAgICAgIGlmICghbmV3RGlyc1trZXldKSB7CiAgICAgICAgICAvLyBubyBsb25nZXIgcHJlc2VudCwgdW5iaW5kCiAgICAgICAgICBjYWxsSG9vayQxKG9sZERpcnNba2V5XSwgJ3VuYmluZCcsIG9sZFZub2RlLCBvbGRWbm9kZSwgaXNEZXN0cm95KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIHZhciBlbXB0eU1vZGlmaWVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7CgogIGZ1bmN0aW9uIG5vcm1hbGl6ZURpcmVjdGl2ZXMkMSAoCiAgICBkaXJzLAogICAgdm0KICApIHsKICAgIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgaWYgKCFkaXJzKSB7CiAgICAgIC8vICRmbG93LWRpc2FibGUtbGluZQogICAgICByZXR1cm4gcmVzCiAgICB9CiAgICB2YXIgaSwgZGlyOwogICAgZm9yIChpID0gMDsgaSA8IGRpcnMubGVuZ3RoOyBpKyspIHsKICAgICAgZGlyID0gZGlyc1tpXTsKICAgICAgaWYgKCFkaXIubW9kaWZpZXJzKSB7CiAgICAgICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lCiAgICAgICAgZGlyLm1vZGlmaWVycyA9IGVtcHR5TW9kaWZpZXJzOwogICAgICB9CiAgICAgIHJlc1tnZXRSYXdEaXJOYW1lKGRpcildID0gZGlyOwogICAgICBkaXIuZGVmID0gcmVzb2x2ZUFzc2V0KHZtLiRvcHRpb25zLCAnZGlyZWN0aXZlcycsIGRpci5uYW1lLCB0cnVlKTsKICAgIH0KICAgIC8vICRmbG93LWRpc2FibGUtbGluZQogICAgcmV0dXJuIHJlcwogIH0KCiAgZnVuY3Rpb24gZ2V0UmF3RGlyTmFtZSAoZGlyKSB7CiAgICByZXR1cm4gZGlyLnJhd05hbWUgfHwgKChkaXIubmFtZSkgKyAiLiIgKyAoT2JqZWN0LmtleXMoZGlyLm1vZGlmaWVycyB8fCB7fSkuam9pbignLicpKSkKICB9CgogIGZ1bmN0aW9uIGNhbGxIb29rJDEgKGRpciwgaG9vaywgdm5vZGUsIG9sZFZub2RlLCBpc0Rlc3Ryb3kpIHsKICAgIHZhciBmbiA9IGRpci5kZWYgJiYgZGlyLmRlZltob29rXTsKICAgIGlmIChmbikgewogICAgICB0cnkgewogICAgICAgIGZuKHZub2RlLmVsbSwgZGlyLCB2bm9kZSwgb2xkVm5vZGUsIGlzRGVzdHJveSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBoYW5kbGVFcnJvcihlLCB2bm9kZS5jb250ZXh0LCAoImRpcmVjdGl2ZSAiICsgKGRpci5uYW1lKSArICIgIiArIGhvb2sgKyAiIGhvb2siKSk7CiAgICAgIH0KICAgIH0KICB9CgogIHZhciBiYXNlTW9kdWxlcyA9IFsKICAgIHJlZiwKICAgIGRpcmVjdGl2ZXMKICBdOwoKICAvKiAgKi8KCiAgZnVuY3Rpb24gdXBkYXRlQXR0cnMgKG9sZFZub2RlLCB2bm9kZSkgewogICAgdmFyIG9wdHMgPSB2bm9kZS5jb21wb25lbnRPcHRpb25zOwogICAgaWYgKGlzRGVmKG9wdHMpICYmIG9wdHMuQ3Rvci5vcHRpb25zLmluaGVyaXRBdHRycyA9PT0gZmFsc2UpIHsKICAgICAgcmV0dXJuCiAgICB9CiAgICBpZiAoaXNVbmRlZihvbGRWbm9kZS5kYXRhLmF0dHJzKSAmJiBpc1VuZGVmKHZub2RlLmRhdGEuYXR0cnMpKSB7CiAgICAgIHJldHVybgogICAgfQogICAgdmFyIGtleSwgY3VyLCBvbGQ7CiAgICB2YXIgZWxtID0gdm5vZGUuZWxtOwogICAgdmFyIG9sZEF0dHJzID0gb2xkVm5vZGUuZGF0YS5hdHRycyB8fCB7fTsKICAgIHZhciBhdHRycyA9IHZub2RlLmRhdGEuYXR0cnMgfHwge307CiAgICAvLyBjbG9uZSBvYnNlcnZlZCBvYmplY3RzLCBhcyB0aGUgdXNlciBwcm9iYWJseSB3YW50cyB0byBtdXRhdGUgaXQKICAgIGlmIChpc0RlZihhdHRycy5fX29iX18pKSB7CiAgICAgIGF0dHJzID0gdm5vZGUuZGF0YS5hdHRycyA9IGV4dGVuZCh7fSwgYXR0cnMpOwogICAgfQoKICAgIGZvciAoa2V5IGluIGF0dHJzKSB7CiAgICAgIGN1ciA9IGF0dHJzW2tleV07CiAgICAgIG9sZCA9IG9sZEF0dHJzW2tleV07CiAgICAgIGlmIChvbGQgIT09IGN1cikgewogICAgICAgIHNldEF0dHIoZWxtLCBrZXksIGN1cik7CiAgICAgIH0KICAgIH0KICAgIC8vICM0MzkxOiBpbiBJRTksIHNldHRpbmcgdHlwZSBjYW4gcmVzZXQgdmFsdWUgZm9yIGlucHV0W3R5cGU9cmFkaW9dCiAgICAvLyAjNjY2NjogSUUvRWRnZSBmb3JjZXMgcHJvZ3Jlc3MgdmFsdWUgZG93biB0byAxIGJlZm9yZSBzZXR0aW5nIGEgbWF4CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgIGlmICgoaXNJRSB8fCBpc0VkZ2UpICYmIGF0dHJzLnZhbHVlICE9PSBvbGRBdHRycy52YWx1ZSkgewogICAgICBzZXRBdHRyKGVsbSwgJ3ZhbHVlJywgYXR0cnMudmFsdWUpOwogICAgfQogICAgZm9yIChrZXkgaW4gb2xkQXR0cnMpIHsKICAgICAgaWYgKGlzVW5kZWYoYXR0cnNba2V5XSkpIHsKICAgICAgICBpZiAoaXNYbGluayhrZXkpKSB7CiAgICAgICAgICBlbG0ucmVtb3ZlQXR0cmlidXRlTlMoeGxpbmtOUywgZ2V0WGxpbmtQcm9wKGtleSkpOwogICAgICAgIH0gZWxzZSBpZiAoIWlzRW51bWVyYXRlZEF0dHIoa2V5KSkgewogICAgICAgICAgZWxtLnJlbW92ZUF0dHJpYnV0ZShrZXkpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gc2V0QXR0ciAoZWwsIGtleSwgdmFsdWUpIHsKICAgIGlmIChlbC50YWdOYW1lLmluZGV4T2YoJy0nKSA+IC0xKSB7CiAgICAgIGJhc2VTZXRBdHRyKGVsLCBrZXksIHZhbHVlKTsKICAgIH0gZWxzZSBpZiAoaXNCb29sZWFuQXR0cihrZXkpKSB7CiAgICAgIC8vIHNldCBhdHRyaWJ1dGUgZm9yIGJsYW5rIHZhbHVlCiAgICAgIC8vIGUuZy4gPG9wdGlvbiBkaXNhYmxlZD5TZWxlY3Qgb25lPC9vcHRpb24+CiAgICAgIGlmIChpc0ZhbHN5QXR0clZhbHVlKHZhbHVlKSkgewogICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShrZXkpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIHRlY2huaWNhbGx5IGFsbG93ZnVsbHNjcmVlbiBpcyBhIGJvb2xlYW4gYXR0cmlidXRlIGZvciA8aWZyYW1lPiwKICAgICAgICAvLyBidXQgRmxhc2ggZXhwZWN0cyBhIHZhbHVlIG9mICJ0cnVlIiB3aGVuIHVzZWQgb24gPGVtYmVkPiB0YWcKICAgICAgICB2YWx1ZSA9IGtleSA9PT0gJ2FsbG93ZnVsbHNjcmVlbicgJiYgZWwudGFnTmFtZSA9PT0gJ0VNQkVEJwogICAgICAgICAgPyAndHJ1ZScKICAgICAgICAgIDoga2V5OwogICAgICAgIGVsLnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKTsKICAgICAgfQogICAgfSBlbHNlIGlmIChpc0VudW1lcmF0ZWRBdHRyKGtleSkpIHsKICAgICAgZWwuc2V0QXR0cmlidXRlKGtleSwgY29udmVydEVudW1lcmF0ZWRWYWx1ZShrZXksIHZhbHVlKSk7CiAgICB9IGVsc2UgaWYgKGlzWGxpbmsoa2V5KSkgewogICAgICBpZiAoaXNGYWxzeUF0dHJWYWx1ZSh2YWx1ZSkpIHsKICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGVOUyh4bGlua05TLCBnZXRYbGlua1Byb3Aoa2V5KSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZWwuc2V0QXR0cmlidXRlTlMoeGxpbmtOUywga2V5LCB2YWx1ZSk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGJhc2VTZXRBdHRyKGVsLCBrZXksIHZhbHVlKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGJhc2VTZXRBdHRyIChlbCwga2V5LCB2YWx1ZSkgewogICAgaWYgKGlzRmFsc3lBdHRyVmFsdWUodmFsdWUpKSB7CiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShrZXkpOwogICAgfSBlbHNlIHsKICAgICAgLy8gIzcxMzg6IElFMTAgJiAxMSBmaXJlcyBpbnB1dCBldmVudCB3aGVuIHNldHRpbmcgcGxhY2Vob2xkZXIgb24KICAgICAgLy8gPHRleHRhcmVhPi4uLiBibG9jayB0aGUgZmlyc3QgaW5wdXQgZXZlbnQgYW5kIHJlbW92ZSB0aGUgYmxvY2tlcgogICAgICAvLyBpbW1lZGlhdGVseS4KICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICAgIGlmICgKICAgICAgICBpc0lFICYmICFpc0lFOSAmJgogICAgICAgIGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScgJiYKICAgICAgICBrZXkgPT09ICdwbGFjZWhvbGRlcicgJiYgdmFsdWUgIT09ICcnICYmICFlbC5fX2llcGgKICAgICAgKSB7CiAgICAgICAgdmFyIGJsb2NrZXIgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTsKICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2lucHV0JywgYmxvY2tlcik7CiAgICAgICAgfTsKICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGJsb2NrZXIpOwogICAgICAgIC8vICRmbG93LWRpc2FibGUtbGluZQogICAgICAgIGVsLl9faWVwaCA9IHRydWU7IC8qIElFIHBsYWNlaG9sZGVyIHBhdGNoZWQgKi8KICAgICAgfQogICAgICBlbC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSk7CiAgICB9CiAgfQoKICB2YXIgYXR0cnMgPSB7CiAgICBjcmVhdGU6IHVwZGF0ZUF0dHJzLAogICAgdXBkYXRlOiB1cGRhdGVBdHRycwogIH07CgogIC8qICAqLwoKICBmdW5jdGlvbiB1cGRhdGVDbGFzcyAob2xkVm5vZGUsIHZub2RlKSB7CiAgICB2YXIgZWwgPSB2bm9kZS5lbG07CiAgICB2YXIgZGF0YSA9IHZub2RlLmRhdGE7CiAgICB2YXIgb2xkRGF0YSA9IG9sZFZub2RlLmRhdGE7CiAgICBpZiAoCiAgICAgIGlzVW5kZWYoZGF0YS5zdGF0aWNDbGFzcykgJiYKICAgICAgaXNVbmRlZihkYXRhLmNsYXNzKSAmJiAoCiAgICAgICAgaXNVbmRlZihvbGREYXRhKSB8fCAoCiAgICAgICAgICBpc1VuZGVmKG9sZERhdGEuc3RhdGljQ2xhc3MpICYmCiAgICAgICAgICBpc1VuZGVmKG9sZERhdGEuY2xhc3MpCiAgICAgICAgKQogICAgICApCiAgICApIHsKICAgICAgcmV0dXJuCiAgICB9CgogICAgdmFyIGNscyA9IGdlbkNsYXNzRm9yVm5vZGUodm5vZGUpOwoKICAgIC8vIGhhbmRsZSB0cmFuc2l0aW9uIGNsYXNzZXMKICAgIHZhciB0cmFuc2l0aW9uQ2xhc3MgPSBlbC5fdHJhbnNpdGlvbkNsYXNzZXM7CiAgICBpZiAoaXNEZWYodHJhbnNpdGlvbkNsYXNzKSkgewogICAgICBjbHMgPSBjb25jYXQoY2xzLCBzdHJpbmdpZnlDbGFzcyh0cmFuc2l0aW9uQ2xhc3MpKTsKICAgIH0KCiAgICAvLyBzZXQgdGhlIGNsYXNzCiAgICBpZiAoY2xzICE9PSBlbC5fcHJldkNsYXNzKSB7CiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjbHMpOwogICAgICBlbC5fcHJldkNsYXNzID0gY2xzOwogICAgfQogIH0KCiAgdmFyIGtsYXNzID0gewogICAgY3JlYXRlOiB1cGRhdGVDbGFzcywKICAgIHVwZGF0ZTogdXBkYXRlQ2xhc3MKICB9OwoKICAvKiAgKi8KCiAgdmFyIHZhbGlkRGl2aXNpb25DaGFyUkUgPSAvW1x3KS4rXC1fJFxdXS87CgogIGZ1bmN0aW9uIHBhcnNlRmlsdGVycyAoZXhwKSB7CiAgICB2YXIgaW5TaW5nbGUgPSBmYWxzZTsKICAgIHZhciBpbkRvdWJsZSA9IGZhbHNlOwogICAgdmFyIGluVGVtcGxhdGVTdHJpbmcgPSBmYWxzZTsKICAgIHZhciBpblJlZ2V4ID0gZmFsc2U7CiAgICB2YXIgY3VybHkgPSAwOwogICAgdmFyIHNxdWFyZSA9IDA7CiAgICB2YXIgcGFyZW4gPSAwOwogICAgdmFyIGxhc3RGaWx0ZXJJbmRleCA9IDA7CiAgICB2YXIgYywgcHJldiwgaSwgZXhwcmVzc2lvbiwgZmlsdGVyczsKCiAgICBmb3IgKGkgPSAwOyBpIDwgZXhwLmxlbmd0aDsgaSsrKSB7CiAgICAgIHByZXYgPSBjOwogICAgICBjID0gZXhwLmNoYXJDb2RlQXQoaSk7CiAgICAgIGlmIChpblNpbmdsZSkgewogICAgICAgIGlmIChjID09PSAweDI3ICYmIHByZXYgIT09IDB4NUMpIHsgaW5TaW5nbGUgPSBmYWxzZTsgfQogICAgICB9IGVsc2UgaWYgKGluRG91YmxlKSB7CiAgICAgICAgaWYgKGMgPT09IDB4MjIgJiYgcHJldiAhPT0gMHg1QykgeyBpbkRvdWJsZSA9IGZhbHNlOyB9CiAgICAgIH0gZWxzZSBpZiAoaW5UZW1wbGF0ZVN0cmluZykgewogICAgICAgIGlmIChjID09PSAweDYwICYmIHByZXYgIT09IDB4NUMpIHsgaW5UZW1wbGF0ZVN0cmluZyA9IGZhbHNlOyB9CiAgICAgIH0gZWxzZSBpZiAoaW5SZWdleCkgewogICAgICAgIGlmIChjID09PSAweDJmICYmIHByZXYgIT09IDB4NUMpIHsgaW5SZWdleCA9IGZhbHNlOyB9CiAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgYyA9PT0gMHg3QyAmJiAvLyBwaXBlCiAgICAgICAgZXhwLmNoYXJDb2RlQXQoaSArIDEpICE9PSAweDdDICYmCiAgICAgICAgZXhwLmNoYXJDb2RlQXQoaSAtIDEpICE9PSAweDdDICYmCiAgICAgICAgIWN1cmx5ICYmICFzcXVhcmUgJiYgIXBhcmVuCiAgICAgICkgewogICAgICAgIGlmIChleHByZXNzaW9uID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIC8vIGZpcnN0IGZpbHRlciwgZW5kIG9mIGV4cHJlc3Npb24KICAgICAgICAgIGxhc3RGaWx0ZXJJbmRleCA9IGkgKyAxOwogICAgICAgICAgZXhwcmVzc2lvbiA9IGV4cC5zbGljZSgwLCBpKS50cmltKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHB1c2hGaWx0ZXIoKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3dpdGNoIChjKSB7CiAgICAgICAgICBjYXNlIDB4MjI6IGluRG91YmxlID0gdHJ1ZTsgYnJlYWsgICAgICAgICAvLyAiCiAgICAgICAgICBjYXNlIDB4Mjc6IGluU2luZ2xlID0gdHJ1ZTsgYnJlYWsgICAgICAgICAvLyAnCiAgICAgICAgICBjYXNlIDB4NjA6IGluVGVtcGxhdGVTdHJpbmcgPSB0cnVlOyBicmVhayAvLyBgCiAgICAgICAgICBjYXNlIDB4Mjg6IHBhcmVuKys7IGJyZWFrICAgICAgICAgICAgICAgICAvLyAoCiAgICAgICAgICBjYXNlIDB4Mjk6IHBhcmVuLS07IGJyZWFrICAgICAgICAgICAgICAgICAvLyApCiAgICAgICAgICBjYXNlIDB4NUI6IHNxdWFyZSsrOyBicmVhayAgICAgICAgICAgICAgICAvLyBbCiAgICAgICAgICBjYXNlIDB4NUQ6IHNxdWFyZS0tOyBicmVhayAgICAgICAgICAgICAgICAvLyBdCiAgICAgICAgICBjYXNlIDB4N0I6IGN1cmx5Kys7IGJyZWFrICAgICAgICAgICAgICAgICAvLyB7CiAgICAgICAgICBjYXNlIDB4N0Q6IGN1cmx5LS07IGJyZWFrICAgICAgICAgICAgICAgICAvLyB9CiAgICAgICAgfQogICAgICAgIGlmIChjID09PSAweDJmKSB7IC8vIC8KICAgICAgICAgIHZhciBqID0gaSAtIDE7CiAgICAgICAgICB2YXIgcCA9ICh2b2lkIDApOwogICAgICAgICAgLy8gZmluZCBmaXJzdCBub24td2hpdGVzcGFjZSBwcmV2IGNoYXIKICAgICAgICAgIGZvciAoOyBqID49IDA7IGotLSkgewogICAgICAgICAgICBwID0gZXhwLmNoYXJBdChqKTsKICAgICAgICAgICAgaWYgKHAgIT09ICcgJykgeyBicmVhayB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoIXAgfHwgIXZhbGlkRGl2aXNpb25DaGFyUkUudGVzdChwKSkgewogICAgICAgICAgICBpblJlZ2V4ID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGV4cHJlc3Npb24gPSBleHAuc2xpY2UoMCwgaSkudHJpbSgpOwogICAgfSBlbHNlIGlmIChsYXN0RmlsdGVySW5kZXggIT09IDApIHsKICAgICAgcHVzaEZpbHRlcigpOwogICAgfQoKICAgIGZ1bmN0aW9uIHB1c2hGaWx0ZXIgKCkgewogICAgICAoZmlsdGVycyB8fCAoZmlsdGVycyA9IFtdKSkucHVzaChleHAuc2xpY2UobGFzdEZpbHRlckluZGV4LCBpKS50cmltKCkpOwogICAgICBsYXN0RmlsdGVySW5kZXggPSBpICsgMTsKICAgIH0KCiAgICBpZiAoZmlsdGVycykgewogICAgICBmb3IgKGkgPSAwOyBpIDwgZmlsdGVycy5sZW5ndGg7IGkrKykgewogICAgICAgIGV4cHJlc3Npb24gPSB3cmFwRmlsdGVyKGV4cHJlc3Npb24sIGZpbHRlcnNbaV0pOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIGV4cHJlc3Npb24KICB9CgogIGZ1bmN0aW9uIHdyYXBGaWx0ZXIgKGV4cCwgZmlsdGVyKSB7CiAgICB2YXIgaSA9IGZpbHRlci5pbmRleE9mKCcoJyk7CiAgICBpZiAoaSA8IDApIHsKICAgICAgLy8gX2Y6IHJlc29sdmVGaWx0ZXIKICAgICAgcmV0dXJuICgiX2YoXCIiICsgZmlsdGVyICsgIlwiKSgiICsgZXhwICsgIikiKQogICAgfSBlbHNlIHsKICAgICAgdmFyIG5hbWUgPSBmaWx0ZXIuc2xpY2UoMCwgaSk7CiAgICAgIHZhciBhcmdzID0gZmlsdGVyLnNsaWNlKGkgKyAxKTsKICAgICAgcmV0dXJuICgiX2YoXCIiICsgbmFtZSArICJcIikoIiArIGV4cCArIChhcmdzICE9PSAnKScgPyAnLCcgKyBhcmdzIDogYXJncykpCiAgICB9CiAgfQoKICAvKiAgKi8KCgoKICAvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqLwogIGZ1bmN0aW9uIGJhc2VXYXJuIChtc2csIHJhbmdlKSB7CiAgICBjb25zb2xlLmVycm9yKCgiW1Z1ZSBjb21waWxlcl06ICIgKyBtc2cpKTsKICB9CiAgLyogZXNsaW50LWVuYWJsZSBuby11bnVzZWQtdmFycyAqLwoKICBmdW5jdGlvbiBwbHVja01vZHVsZUZ1bmN0aW9uICgKICAgIG1vZHVsZXMsCiAgICBrZXkKICApIHsKICAgIHJldHVybiBtb2R1bGVzCiAgICAgID8gbW9kdWxlcy5tYXAoZnVuY3Rpb24gKG0pIHsgcmV0dXJuIG1ba2V5XTsgfSkuZmlsdGVyKGZ1bmN0aW9uIChfKSB7IHJldHVybiBfOyB9KQogICAgICA6IFtdCiAgfQoKICBmdW5jdGlvbiBhZGRQcm9wIChlbCwgbmFtZSwgdmFsdWUsIHJhbmdlLCBkeW5hbWljKSB7CiAgICAoZWwucHJvcHMgfHwgKGVsLnByb3BzID0gW10pKS5wdXNoKHJhbmdlU2V0SXRlbSh7IG5hbWU6IG5hbWUsIHZhbHVlOiB2YWx1ZSwgZHluYW1pYzogZHluYW1pYyB9LCByYW5nZSkpOwogICAgZWwucGxhaW4gPSBmYWxzZTsKICB9CgogIGZ1bmN0aW9uIGFkZEF0dHIgKGVsLCBuYW1lLCB2YWx1ZSwgcmFuZ2UsIGR5bmFtaWMpIHsKICAgIHZhciBhdHRycyA9IGR5bmFtaWMKICAgICAgPyAoZWwuZHluYW1pY0F0dHJzIHx8IChlbC5keW5hbWljQXR0cnMgPSBbXSkpCiAgICAgIDogKGVsLmF0dHJzIHx8IChlbC5hdHRycyA9IFtdKSk7CiAgICBhdHRycy5wdXNoKHJhbmdlU2V0SXRlbSh7IG5hbWU6IG5hbWUsIHZhbHVlOiB2YWx1ZSwgZHluYW1pYzogZHluYW1pYyB9LCByYW5nZSkpOwogICAgZWwucGxhaW4gPSBmYWxzZTsKICB9CgogIC8vIGFkZCBhIHJhdyBhdHRyICh1c2UgdGhpcyBpbiBwcmVUcmFuc2Zvcm1zKQogIGZ1bmN0aW9uIGFkZFJhd0F0dHIgKGVsLCBuYW1lLCB2YWx1ZSwgcmFuZ2UpIHsKICAgIGVsLmF0dHJzTWFwW25hbWVdID0gdmFsdWU7CiAgICBlbC5hdHRyc0xpc3QucHVzaChyYW5nZVNldEl0ZW0oeyBuYW1lOiBuYW1lLCB2YWx1ZTogdmFsdWUgfSwgcmFuZ2UpKTsKICB9CgogIGZ1bmN0aW9uIGFkZERpcmVjdGl2ZSAoCiAgICBlbCwKICAgIG5hbWUsCiAgICByYXdOYW1lLAogICAgdmFsdWUsCiAgICBhcmcsCiAgICBpc0R5bmFtaWNBcmcsCiAgICBtb2RpZmllcnMsCiAgICByYW5nZQogICkgewogICAgKGVsLmRpcmVjdGl2ZXMgfHwgKGVsLmRpcmVjdGl2ZXMgPSBbXSkpLnB1c2gocmFuZ2VTZXRJdGVtKHsKICAgICAgbmFtZTogbmFtZSwKICAgICAgcmF3TmFtZTogcmF3TmFtZSwKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBhcmc6IGFyZywKICAgICAgaXNEeW5hbWljQXJnOiBpc0R5bmFtaWNBcmcsCiAgICAgIG1vZGlmaWVyczogbW9kaWZpZXJzCiAgICB9LCByYW5nZSkpOwogICAgZWwucGxhaW4gPSBmYWxzZTsKICB9CgogIGZ1bmN0aW9uIHByZXBlbmRNb2RpZmllck1hcmtlciAoc3ltYm9sLCBuYW1lLCBkeW5hbWljKSB7CiAgICByZXR1cm4gZHluYW1pYwogICAgICA/ICgiX3AoIiArIG5hbWUgKyAiLFwiIiArIHN5bWJvbCArICJcIikiKQogICAgICA6IHN5bWJvbCArIG5hbWUgLy8gbWFyayB0aGUgZXZlbnQgYXMgY2FwdHVyZWQKICB9CgogIGZ1bmN0aW9uIGFkZEhhbmRsZXIgKAogICAgZWwsCiAgICBuYW1lLAogICAgdmFsdWUsCiAgICBtb2RpZmllcnMsCiAgICBpbXBvcnRhbnQsCiAgICB3YXJuLAogICAgcmFuZ2UsCiAgICBkeW5hbWljCiAgKSB7CiAgICBtb2RpZmllcnMgPSBtb2RpZmllcnMgfHwgZW1wdHlPYmplY3Q7CiAgICAvLyB3YXJuIHByZXZlbnQgYW5kIHBhc3NpdmUgbW9kaWZpZXIKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgaWYgKAogICAgICB3YXJuICYmCiAgICAgIG1vZGlmaWVycy5wcmV2ZW50ICYmIG1vZGlmaWVycy5wYXNzaXZlCiAgICApIHsKICAgICAgd2FybigKICAgICAgICAncGFzc2l2ZSBhbmQgcHJldmVudCBjYW5cJ3QgYmUgdXNlZCB0b2dldGhlci4gJyArCiAgICAgICAgJ1Bhc3NpdmUgaGFuZGxlciBjYW5cJ3QgcHJldmVudCBkZWZhdWx0IGV2ZW50LicsCiAgICAgICAgcmFuZ2UKICAgICAgKTsKICAgIH0KCiAgICAvLyBub3JtYWxpemUgY2xpY2sucmlnaHQgYW5kIGNsaWNrLm1pZGRsZSBzaW5jZSB0aGV5IGRvbid0IGFjdHVhbGx5IGZpcmUKICAgIC8vIHRoaXMgaXMgdGVjaG5pY2FsbHkgYnJvd3Nlci1zcGVjaWZpYywgYnV0IGF0IGxlYXN0IGZvciBub3cgYnJvd3NlcnMgYXJlCiAgICAvLyB0aGUgb25seSB0YXJnZXQgZW52cyB0aGF0IGhhdmUgcmlnaHQvbWlkZGxlIGNsaWNrcy4KICAgIGlmIChtb2RpZmllcnMucmlnaHQpIHsKICAgICAgaWYgKGR5bmFtaWMpIHsKICAgICAgICBuYW1lID0gIigiICsgbmFtZSArICIpPT09J2NsaWNrJz8nY29udGV4dG1lbnUnOigiICsgbmFtZSArICIpIjsKICAgICAgfSBlbHNlIGlmIChuYW1lID09PSAnY2xpY2snKSB7CiAgICAgICAgbmFtZSA9ICdjb250ZXh0bWVudSc7CiAgICAgICAgZGVsZXRlIG1vZGlmaWVycy5yaWdodDsKICAgICAgfQogICAgfSBlbHNlIGlmIChtb2RpZmllcnMubWlkZGxlKSB7CiAgICAgIGlmIChkeW5hbWljKSB7CiAgICAgICAgbmFtZSA9ICIoIiArIG5hbWUgKyAiKT09PSdjbGljayc/J21vdXNldXAnOigiICsgbmFtZSArICIpIjsKICAgICAgfSBlbHNlIGlmIChuYW1lID09PSAnY2xpY2snKSB7CiAgICAgICAgbmFtZSA9ICdtb3VzZXVwJzsKICAgICAgfQogICAgfQoKICAgIC8vIGNoZWNrIGNhcHR1cmUgbW9kaWZpZXIKICAgIGlmIChtb2RpZmllcnMuY2FwdHVyZSkgewogICAgICBkZWxldGUgbW9kaWZpZXJzLmNhcHR1cmU7CiAgICAgIG5hbWUgPSBwcmVwZW5kTW9kaWZpZXJNYXJrZXIoJyEnLCBuYW1lLCBkeW5hbWljKTsKICAgIH0KICAgIGlmIChtb2RpZmllcnMub25jZSkgewogICAgICBkZWxldGUgbW9kaWZpZXJzLm9uY2U7CiAgICAgIG5hbWUgPSBwcmVwZW5kTW9kaWZpZXJNYXJrZXIoJ34nLCBuYW1lLCBkeW5hbWljKTsKICAgIH0KICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgaWYgKG1vZGlmaWVycy5wYXNzaXZlKSB7CiAgICAgIGRlbGV0ZSBtb2RpZmllcnMucGFzc2l2ZTsKICAgICAgbmFtZSA9IHByZXBlbmRNb2RpZmllck1hcmtlcignJicsIG5hbWUsIGR5bmFtaWMpOwogICAgfQoKICAgIHZhciBldmVudHM7CiAgICBpZiAobW9kaWZpZXJzLm5hdGl2ZSkgewogICAgICBkZWxldGUgbW9kaWZpZXJzLm5hdGl2ZTsKICAgICAgZXZlbnRzID0gZWwubmF0aXZlRXZlbnRzIHx8IChlbC5uYXRpdmVFdmVudHMgPSB7fSk7CiAgICB9IGVsc2UgewogICAgICBldmVudHMgPSBlbC5ldmVudHMgfHwgKGVsLmV2ZW50cyA9IHt9KTsKICAgIH0KCiAgICB2YXIgbmV3SGFuZGxlciA9IHJhbmdlU2V0SXRlbSh7IHZhbHVlOiB2YWx1ZS50cmltKCksIGR5bmFtaWM6IGR5bmFtaWMgfSwgcmFuZ2UpOwogICAgaWYgKG1vZGlmaWVycyAhPT0gZW1wdHlPYmplY3QpIHsKICAgICAgbmV3SGFuZGxlci5tb2RpZmllcnMgPSBtb2RpZmllcnM7CiAgICB9CgogICAgdmFyIGhhbmRsZXJzID0gZXZlbnRzW25hbWVdOwogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoQXJyYXkuaXNBcnJheShoYW5kbGVycykpIHsKICAgICAgaW1wb3J0YW50ID8gaGFuZGxlcnMudW5zaGlmdChuZXdIYW5kbGVyKSA6IGhhbmRsZXJzLnB1c2gobmV3SGFuZGxlcik7CiAgICB9IGVsc2UgaWYgKGhhbmRsZXJzKSB7CiAgICAgIGV2ZW50c1tuYW1lXSA9IGltcG9ydGFudCA/IFtuZXdIYW5kbGVyLCBoYW5kbGVyc10gOiBbaGFuZGxlcnMsIG5ld0hhbmRsZXJdOwogICAgfSBlbHNlIHsKICAgICAgZXZlbnRzW25hbWVdID0gbmV3SGFuZGxlcjsKICAgIH0KCiAgICBlbC5wbGFpbiA9IGZhbHNlOwogIH0KCiAgZnVuY3Rpb24gZ2V0UmF3QmluZGluZ0F0dHIgKAogICAgZWwsCiAgICBuYW1lCiAgKSB7CiAgICByZXR1cm4gZWwucmF3QXR0cnNNYXBbJzonICsgbmFtZV0gfHwKICAgICAgZWwucmF3QXR0cnNNYXBbJ3YtYmluZDonICsgbmFtZV0gfHwKICAgICAgZWwucmF3QXR0cnNNYXBbbmFtZV0KICB9CgogIGZ1bmN0aW9uIGdldEJpbmRpbmdBdHRyICgKICAgIGVsLAogICAgbmFtZSwKICAgIGdldFN0YXRpYwogICkgewogICAgdmFyIGR5bmFtaWNWYWx1ZSA9CiAgICAgIGdldEFuZFJlbW92ZUF0dHIoZWwsICc6JyArIG5hbWUpIHx8CiAgICAgIGdldEFuZFJlbW92ZUF0dHIoZWwsICd2LWJpbmQ6JyArIG5hbWUpOwogICAgaWYgKGR5bmFtaWNWYWx1ZSAhPSBudWxsKSB7CiAgICAgIHJldHVybiBwYXJzZUZpbHRlcnMoZHluYW1pY1ZhbHVlKQogICAgfSBlbHNlIGlmIChnZXRTdGF0aWMgIT09IGZhbHNlKSB7CiAgICAgIHZhciBzdGF0aWNWYWx1ZSA9IGdldEFuZFJlbW92ZUF0dHIoZWwsIG5hbWUpOwogICAgICBpZiAoc3RhdGljVmFsdWUgIT0gbnVsbCkgewogICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShzdGF0aWNWYWx1ZSkKICAgICAgfQogICAgfQogIH0KCiAgLy8gbm90ZTogdGhpcyBvbmx5IHJlbW92ZXMgdGhlIGF0dHIgZnJvbSB0aGUgQXJyYXkgKGF0dHJzTGlzdCkgc28gdGhhdCBpdAogIC8vIGRvZXNuJ3QgZ2V0IHByb2Nlc3NlZCBieSBwcm9jZXNzQXR0cnMuCiAgLy8gQnkgZGVmYXVsdCBpdCBkb2VzIE5PVCByZW1vdmUgaXQgZnJvbSB0aGUgbWFwIChhdHRyc01hcCkgYmVjYXVzZSB0aGUgbWFwIGlzCiAgLy8gbmVlZGVkIGR1cmluZyBjb2RlZ2VuLgogIGZ1bmN0aW9uIGdldEFuZFJlbW92ZUF0dHIgKAogICAgZWwsCiAgICBuYW1lLAogICAgcmVtb3ZlRnJvbU1hcAogICkgewogICAgdmFyIHZhbDsKICAgIGlmICgodmFsID0gZWwuYXR0cnNNYXBbbmFtZV0pICE9IG51bGwpIHsKICAgICAgdmFyIGxpc3QgPSBlbC5hdHRyc0xpc3Q7CiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbGlzdC5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICBpZiAobGlzdFtpXS5uYW1lID09PSBuYW1lKSB7CiAgICAgICAgICBsaXN0LnNwbGljZShpLCAxKTsKICAgICAgICAgIGJyZWFrCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBpZiAocmVtb3ZlRnJvbU1hcCkgewogICAgICBkZWxldGUgZWwuYXR0cnNNYXBbbmFtZV07CiAgICB9CiAgICByZXR1cm4gdmFsCiAgfQoKICBmdW5jdGlvbiBnZXRBbmRSZW1vdmVBdHRyQnlSZWdleCAoCiAgICBlbCwKICAgIG5hbWUKICApIHsKICAgIHZhciBsaXN0ID0gZWwuYXR0cnNMaXN0OwogICAgZm9yICh2YXIgaSA9IDAsIGwgPSBsaXN0Lmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICB2YXIgYXR0ciA9IGxpc3RbaV07CiAgICAgIGlmIChuYW1lLnRlc3QoYXR0ci5uYW1lKSkgewogICAgICAgIGxpc3Quc3BsaWNlKGksIDEpOwogICAgICAgIHJldHVybiBhdHRyCiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIHJhbmdlU2V0SXRlbSAoCiAgICBpdGVtLAogICAgcmFuZ2UKICApIHsKICAgIGlmIChyYW5nZSkgewogICAgICBpZiAocmFuZ2Uuc3RhcnQgIT0gbnVsbCkgewogICAgICAgIGl0ZW0uc3RhcnQgPSByYW5nZS5zdGFydDsKICAgICAgfQogICAgICBpZiAocmFuZ2UuZW5kICE9IG51bGwpIHsKICAgICAgICBpdGVtLmVuZCA9IHJhbmdlLmVuZDsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGl0ZW0KICB9CgogIC8qICAqLwoKICAvKioKICAgKiBDcm9zcy1wbGF0Zm9ybSBjb2RlIGdlbmVyYXRpb24gZm9yIGNvbXBvbmVudCB2LW1vZGVsCiAgICovCiAgZnVuY3Rpb24gZ2VuQ29tcG9uZW50TW9kZWwgKAogICAgZWwsCiAgICB2YWx1ZSwKICAgIG1vZGlmaWVycwogICkgewogICAgdmFyIHJlZiA9IG1vZGlmaWVycyB8fCB7fTsKICAgIHZhciBudW1iZXIgPSByZWYubnVtYmVyOwogICAgdmFyIHRyaW0gPSByZWYudHJpbTsKCiAgICB2YXIgYmFzZVZhbHVlRXhwcmVzc2lvbiA9ICckJHYnOwogICAgdmFyIHZhbHVlRXhwcmVzc2lvbiA9IGJhc2VWYWx1ZUV4cHJlc3Npb247CiAgICBpZiAodHJpbSkgewogICAgICB2YWx1ZUV4cHJlc3Npb24gPQogICAgICAgICIodHlwZW9mICIgKyBiYXNlVmFsdWVFeHByZXNzaW9uICsgIiA9PT0gJ3N0cmluZyciICsKICAgICAgICAiPyAiICsgYmFzZVZhbHVlRXhwcmVzc2lvbiArICIudHJpbSgpIiArCiAgICAgICAgIjogIiArIGJhc2VWYWx1ZUV4cHJlc3Npb24gKyAiKSI7CiAgICB9CiAgICBpZiAobnVtYmVyKSB7CiAgICAgIHZhbHVlRXhwcmVzc2lvbiA9ICJfbigiICsgdmFsdWVFeHByZXNzaW9uICsgIikiOwogICAgfQogICAgdmFyIGFzc2lnbm1lbnQgPSBnZW5Bc3NpZ25tZW50Q29kZSh2YWx1ZSwgdmFsdWVFeHByZXNzaW9uKTsKCiAgICBlbC5tb2RlbCA9IHsKICAgICAgdmFsdWU6ICgiKCIgKyB2YWx1ZSArICIpIiksCiAgICAgIGV4cHJlc3Npb246IEpTT04uc3RyaW5naWZ5KHZhbHVlKSwKICAgICAgY2FsbGJhY2s6ICgiZnVuY3Rpb24gKCIgKyBiYXNlVmFsdWVFeHByZXNzaW9uICsgIikgeyIgKyBhc3NpZ25tZW50ICsgIn0iKQogICAgfTsKICB9CgogIC8qKgogICAqIENyb3NzLXBsYXRmb3JtIGNvZGVnZW4gaGVscGVyIGZvciBnZW5lcmF0aW5nIHYtbW9kZWwgdmFsdWUgYXNzaWdubWVudCBjb2RlLgogICAqLwogIGZ1bmN0aW9uIGdlbkFzc2lnbm1lbnRDb2RlICgKICAgIHZhbHVlLAogICAgYXNzaWdubWVudAogICkgewogICAgdmFyIHJlcyA9IHBhcnNlTW9kZWwodmFsdWUpOwogICAgaWYgKHJlcy5rZXkgPT09IG51bGwpIHsKICAgICAgcmV0dXJuICh2YWx1ZSArICI9IiArIGFzc2lnbm1lbnQpCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gKCIkc2V0KCIgKyAocmVzLmV4cCkgKyAiLCAiICsgKHJlcy5rZXkpICsgIiwgIiArIGFzc2lnbm1lbnQgKyAiKSIpCiAgICB9CiAgfQoKICAvKioKICAgKiBQYXJzZSBhIHYtbW9kZWwgZXhwcmVzc2lvbiBpbnRvIGEgYmFzZSBwYXRoIGFuZCBhIGZpbmFsIGtleSBzZWdtZW50LgogICAqIEhhbmRsZXMgYm90aCBkb3QtcGF0aCBhbmQgcG9zc2libGUgc3F1YXJlIGJyYWNrZXRzLgogICAqCiAgICogUG9zc2libGUgY2FzZXM6CiAgICoKICAgKiAtIHRlc3QKICAgKiAtIHRlc3Rba2V5XQogICAqIC0gdGVzdFt0ZXN0MVtrZXldXQogICAqIC0gdGVzdFsiYSJdW2tleV0KICAgKiAtIHh4eC50ZXN0W2FbYV0udGVzdDFba2V5XV0KICAgKiAtIHRlc3QueHh4LmFbImFzYSJdW3Rlc3QxW2tleV1dCiAgICoKICAgKi8KCiAgdmFyIGxlbiwgc3RyLCBjaHIsIGluZGV4JDEsIGV4cHJlc3Npb25Qb3MsIGV4cHJlc3Npb25FbmRQb3M7CgoKCiAgZnVuY3Rpb24gcGFyc2VNb2RlbCAodmFsKSB7CiAgICAvLyBGaXggaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS9wdWxsLzc3MzAKICAgIC8vIGFsbG93IHYtbW9kZWw9Im9iai52YWwgIiAodHJhaWxpbmcgd2hpdGVzcGFjZSkKICAgIHZhbCA9IHZhbC50cmltKCk7CiAgICBsZW4gPSB2YWwubGVuZ3RoOwoKICAgIGlmICh2YWwuaW5kZXhPZignWycpIDwgMCB8fCB2YWwubGFzdEluZGV4T2YoJ10nKSA8IGxlbiAtIDEpIHsKICAgICAgaW5kZXgkMSA9IHZhbC5sYXN0SW5kZXhPZignLicpOwogICAgICBpZiAoaW5kZXgkMSA+IC0xKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGV4cDogdmFsLnNsaWNlKDAsIGluZGV4JDEpLAogICAgICAgICAga2V5OiAnIicgKyB2YWwuc2xpY2UoaW5kZXgkMSArIDEpICsgJyInCiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBleHA6IHZhbCwKICAgICAgICAgIGtleTogbnVsbAogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHN0ciA9IHZhbDsKICAgIGluZGV4JDEgPSBleHByZXNzaW9uUG9zID0gZXhwcmVzc2lvbkVuZFBvcyA9IDA7CgogICAgd2hpbGUgKCFlb2YoKSkgewogICAgICBjaHIgPSBuZXh0KCk7CiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgICBpZiAoaXNTdHJpbmdTdGFydChjaHIpKSB7CiAgICAgICAgcGFyc2VTdHJpbmcoY2hyKTsKICAgICAgfSBlbHNlIGlmIChjaHIgPT09IDB4NUIpIHsKICAgICAgICBwYXJzZUJyYWNrZXQoY2hyKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiB7CiAgICAgIGV4cDogdmFsLnNsaWNlKDAsIGV4cHJlc3Npb25Qb3MpLAogICAgICBrZXk6IHZhbC5zbGljZShleHByZXNzaW9uUG9zICsgMSwgZXhwcmVzc2lvbkVuZFBvcykKICAgIH0KICB9CgogIGZ1bmN0aW9uIG5leHQgKCkgewogICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KCsraW5kZXgkMSkKICB9CgogIGZ1bmN0aW9uIGVvZiAoKSB7CiAgICByZXR1cm4gaW5kZXgkMSA+PSBsZW4KICB9CgogIGZ1bmN0aW9uIGlzU3RyaW5nU3RhcnQgKGNocikgewogICAgcmV0dXJuIGNociA9PT0gMHgyMiB8fCBjaHIgPT09IDB4MjcKICB9CgogIGZ1bmN0aW9uIHBhcnNlQnJhY2tldCAoY2hyKSB7CiAgICB2YXIgaW5CcmFja2V0ID0gMTsKICAgIGV4cHJlc3Npb25Qb3MgPSBpbmRleCQxOwogICAgd2hpbGUgKCFlb2YoKSkgewogICAgICBjaHIgPSBuZXh0KCk7CiAgICAgIGlmIChpc1N0cmluZ1N0YXJ0KGNocikpIHsKICAgICAgICBwYXJzZVN0cmluZyhjaHIpOwogICAgICAgIGNvbnRpbnVlCiAgICAgIH0KICAgICAgaWYgKGNociA9PT0gMHg1QikgeyBpbkJyYWNrZXQrKzsgfQogICAgICBpZiAoY2hyID09PSAweDVEKSB7IGluQnJhY2tldC0tOyB9CiAgICAgIGlmIChpbkJyYWNrZXQgPT09IDApIHsKICAgICAgICBleHByZXNzaW9uRW5kUG9zID0gaW5kZXgkMTsKICAgICAgICBicmVhawogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBwYXJzZVN0cmluZyAoY2hyKSB7CiAgICB2YXIgc3RyaW5nUXVvdGUgPSBjaHI7CiAgICB3aGlsZSAoIWVvZigpKSB7CiAgICAgIGNociA9IG5leHQoKTsKICAgICAgaWYgKGNociA9PT0gc3RyaW5nUXVvdGUpIHsKICAgICAgICBicmVhawogICAgICB9CiAgICB9CiAgfQoKICAvKiAgKi8KCiAgdmFyIHdhcm4kMTsKCiAgLy8gaW4gc29tZSBjYXNlcywgdGhlIGV2ZW50IHVzZWQgaGFzIHRvIGJlIGRldGVybWluZWQgYXQgcnVudGltZQogIC8vIHNvIHdlIHVzZWQgc29tZSByZXNlcnZlZCB0b2tlbnMgZHVyaW5nIGNvbXBpbGUuCiAgdmFyIFJBTkdFX1RPS0VOID0gJ19fcic7CiAgdmFyIENIRUNLQk9YX1JBRElPX1RPS0VOID0gJ19fYyc7CgogIGZ1bmN0aW9uIG1vZGVsICgKICAgIGVsLAogICAgZGlyLAogICAgX3dhcm4KICApIHsKICAgIHdhcm4kMSA9IF93YXJuOwogICAgdmFyIHZhbHVlID0gZGlyLnZhbHVlOwogICAgdmFyIG1vZGlmaWVycyA9IGRpci5tb2RpZmllcnM7CiAgICB2YXIgdGFnID0gZWwudGFnOwogICAgdmFyIHR5cGUgPSBlbC5hdHRyc01hcC50eXBlOwoKICAgIHsKICAgICAgLy8gaW5wdXRzIHdpdGggdHlwZT0iZmlsZSIgYXJlIHJlYWQgb25seSBhbmQgc2V0dGluZyB0aGUgaW5wdXQncwogICAgICAvLyB2YWx1ZSB3aWxsIHRocm93IGFuIGVycm9yLgogICAgICBpZiAodGFnID09PSAnaW5wdXQnICYmIHR5cGUgPT09ICdmaWxlJykgewogICAgICAgIHdhcm4kMSgKICAgICAgICAgICI8IiArIChlbC50YWcpICsgIiB2LW1vZGVsPVwiIiArIHZhbHVlICsgIlwiIHR5cGU9XCJmaWxlXCI+OlxuIiArCiAgICAgICAgICAiRmlsZSBpbnB1dHMgYXJlIHJlYWQgb25seS4gVXNlIGEgdi1vbjpjaGFuZ2UgbGlzdGVuZXIgaW5zdGVhZC4iLAogICAgICAgICAgZWwucmF3QXR0cnNNYXBbJ3YtbW9kZWwnXQogICAgICAgICk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoZWwuY29tcG9uZW50KSB7CiAgICAgIGdlbkNvbXBvbmVudE1vZGVsKGVsLCB2YWx1ZSwgbW9kaWZpZXJzKTsKICAgICAgLy8gY29tcG9uZW50IHYtbW9kZWwgZG9lc24ndCBuZWVkIGV4dHJhIHJ1bnRpbWUKICAgICAgcmV0dXJuIGZhbHNlCiAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ3NlbGVjdCcpIHsKICAgICAgZ2VuU2VsZWN0KGVsLCB2YWx1ZSwgbW9kaWZpZXJzKTsKICAgIH0gZWxzZSBpZiAodGFnID09PSAnaW5wdXQnICYmIHR5cGUgPT09ICdjaGVja2JveCcpIHsKICAgICAgZ2VuQ2hlY2tib3hNb2RlbChlbCwgdmFsdWUsIG1vZGlmaWVycyk7CiAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ2lucHV0JyAmJiB0eXBlID09PSAncmFkaW8nKSB7CiAgICAgIGdlblJhZGlvTW9kZWwoZWwsIHZhbHVlLCBtb2RpZmllcnMpOwogICAgfSBlbHNlIGlmICh0YWcgPT09ICdpbnB1dCcgfHwgdGFnID09PSAndGV4dGFyZWEnKSB7CiAgICAgIGdlbkRlZmF1bHRNb2RlbChlbCwgdmFsdWUsIG1vZGlmaWVycyk7CiAgICB9IGVsc2UgaWYgKCFjb25maWcuaXNSZXNlcnZlZFRhZyh0YWcpKSB7CiAgICAgIGdlbkNvbXBvbmVudE1vZGVsKGVsLCB2YWx1ZSwgbW9kaWZpZXJzKTsKICAgICAgLy8gY29tcG9uZW50IHYtbW9kZWwgZG9lc24ndCBuZWVkIGV4dHJhIHJ1bnRpbWUKICAgICAgcmV0dXJuIGZhbHNlCiAgICB9IGVsc2UgewogICAgICB3YXJuJDEoCiAgICAgICAgIjwiICsgKGVsLnRhZykgKyAiIHYtbW9kZWw9XCIiICsgdmFsdWUgKyAiXCI+OiAiICsKICAgICAgICAidi1tb2RlbCBpcyBub3Qgc3VwcG9ydGVkIG9uIHRoaXMgZWxlbWVudCB0eXBlLiAiICsKICAgICAgICAnSWYgeW91IGFyZSB3b3JraW5nIHdpdGggY29udGVudGVkaXRhYmxlLCBpdFwncyByZWNvbW1lbmRlZCB0byAnICsKICAgICAgICAnd3JhcCBhIGxpYnJhcnkgZGVkaWNhdGVkIGZvciB0aGF0IHB1cnBvc2UgaW5zaWRlIGEgY3VzdG9tIGNvbXBvbmVudC4nLAogICAgICAgIGVsLnJhd0F0dHJzTWFwWyd2LW1vZGVsJ10KICAgICAgKTsKICAgIH0KCiAgICAvLyBlbnN1cmUgcnVudGltZSBkaXJlY3RpdmUgbWV0YWRhdGEKICAgIHJldHVybiB0cnVlCiAgfQoKICBmdW5jdGlvbiBnZW5DaGVja2JveE1vZGVsICgKICAgIGVsLAogICAgdmFsdWUsCiAgICBtb2RpZmllcnMKICApIHsKICAgIHZhciBudW1iZXIgPSBtb2RpZmllcnMgJiYgbW9kaWZpZXJzLm51bWJlcjsKICAgIHZhciB2YWx1ZUJpbmRpbmcgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ3ZhbHVlJykgfHwgJ251bGwnOwogICAgdmFyIHRydWVWYWx1ZUJpbmRpbmcgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ3RydWUtdmFsdWUnKSB8fCAndHJ1ZSc7CiAgICB2YXIgZmFsc2VWYWx1ZUJpbmRpbmcgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ2ZhbHNlLXZhbHVlJykgfHwgJ2ZhbHNlJzsKICAgIGFkZFByb3AoZWwsICdjaGVja2VkJywKICAgICAgIkFycmF5LmlzQXJyYXkoIiArIHZhbHVlICsgIikiICsKICAgICAgIj9faSgiICsgdmFsdWUgKyAiLCIgKyB2YWx1ZUJpbmRpbmcgKyAiKT4tMSIgKyAoCiAgICAgICAgdHJ1ZVZhbHVlQmluZGluZyA9PT0gJ3RydWUnCiAgICAgICAgICA/ICgiOigiICsgdmFsdWUgKyAiKSIpCiAgICAgICAgICA6ICgiOl9xKCIgKyB2YWx1ZSArICIsIiArIHRydWVWYWx1ZUJpbmRpbmcgKyAiKSIpCiAgICAgICkKICAgICk7CiAgICBhZGRIYW5kbGVyKGVsLCAnY2hhbmdlJywKICAgICAgInZhciAkJGE9IiArIHZhbHVlICsgIiwiICsKICAgICAgICAgICckJGVsPSRldmVudC50YXJnZXQsJyArCiAgICAgICAgICAiJCRjPSQkZWwuY2hlY2tlZD8oIiArIHRydWVWYWx1ZUJpbmRpbmcgKyAiKTooIiArIGZhbHNlVmFsdWVCaW5kaW5nICsgIik7IiArCiAgICAgICdpZihBcnJheS5pc0FycmF5KCQkYSkpeycgKwogICAgICAgICJ2YXIgJCR2PSIgKyAobnVtYmVyID8gJ19uKCcgKyB2YWx1ZUJpbmRpbmcgKyAnKScgOiB2YWx1ZUJpbmRpbmcpICsgIiwiICsKICAgICAgICAgICAgJyQkaT1faSgkJGEsJCR2KTsnICsKICAgICAgICAiaWYoJCRlbC5jaGVja2VkKXskJGk8MCYmKCIgKyAoZ2VuQXNzaWdubWVudENvZGUodmFsdWUsICckJGEuY29uY2F0KFskJHZdKScpKSArICIpfSIgKwogICAgICAgICJlbHNleyQkaT4tMSYmKCIgKyAoZ2VuQXNzaWdubWVudENvZGUodmFsdWUsICckJGEuc2xpY2UoMCwkJGkpLmNvbmNhdCgkJGEuc2xpY2UoJCRpKzEpKScpKSArICIpfSIgKwogICAgICAifWVsc2V7IiArIChnZW5Bc3NpZ25tZW50Q29kZSh2YWx1ZSwgJyQkYycpKSArICJ9IiwKICAgICAgbnVsbCwgdHJ1ZQogICAgKTsKICB9CgogIGZ1bmN0aW9uIGdlblJhZGlvTW9kZWwgKAogICAgZWwsCiAgICB2YWx1ZSwKICAgIG1vZGlmaWVycwogICkgewogICAgdmFyIG51bWJlciA9IG1vZGlmaWVycyAmJiBtb2RpZmllcnMubnVtYmVyOwogICAgdmFyIHZhbHVlQmluZGluZyA9IGdldEJpbmRpbmdBdHRyKGVsLCAndmFsdWUnKSB8fCAnbnVsbCc7CiAgICB2YWx1ZUJpbmRpbmcgPSBudW1iZXIgPyAoIl9uKCIgKyB2YWx1ZUJpbmRpbmcgKyAiKSIpIDogdmFsdWVCaW5kaW5nOwogICAgYWRkUHJvcChlbCwgJ2NoZWNrZWQnLCAoIl9xKCIgKyB2YWx1ZSArICIsIiArIHZhbHVlQmluZGluZyArICIpIikpOwogICAgYWRkSGFuZGxlcihlbCwgJ2NoYW5nZScsIGdlbkFzc2lnbm1lbnRDb2RlKHZhbHVlLCB2YWx1ZUJpbmRpbmcpLCBudWxsLCB0cnVlKTsKICB9CgogIGZ1bmN0aW9uIGdlblNlbGVjdCAoCiAgICBlbCwKICAgIHZhbHVlLAogICAgbW9kaWZpZXJzCiAgKSB7CiAgICB2YXIgbnVtYmVyID0gbW9kaWZpZXJzICYmIG1vZGlmaWVycy5udW1iZXI7CiAgICB2YXIgc2VsZWN0ZWRWYWwgPSAiQXJyYXkucHJvdG90eXBlLmZpbHRlciIgKwogICAgICAiLmNhbGwoJGV2ZW50LnRhcmdldC5vcHRpb25zLGZ1bmN0aW9uKG8pe3JldHVybiBvLnNlbGVjdGVkfSkiICsKICAgICAgIi5tYXAoZnVuY3Rpb24obyl7dmFyIHZhbCA9IFwiX3ZhbHVlXCIgaW4gbyA/IG8uX3ZhbHVlIDogby52YWx1ZTsiICsKICAgICAgInJldHVybiAiICsgKG51bWJlciA/ICdfbih2YWwpJyA6ICd2YWwnKSArICJ9KSI7CgogICAgdmFyIGFzc2lnbm1lbnQgPSAnJGV2ZW50LnRhcmdldC5tdWx0aXBsZSA/ICQkc2VsZWN0ZWRWYWwgOiAkJHNlbGVjdGVkVmFsWzBdJzsKICAgIHZhciBjb2RlID0gInZhciAkJHNlbGVjdGVkVmFsID0gIiArIHNlbGVjdGVkVmFsICsgIjsiOwogICAgY29kZSA9IGNvZGUgKyAiICIgKyAoZ2VuQXNzaWdubWVudENvZGUodmFsdWUsIGFzc2lnbm1lbnQpKTsKICAgIGFkZEhhbmRsZXIoZWwsICdjaGFuZ2UnLCBjb2RlLCBudWxsLCB0cnVlKTsKICB9CgogIGZ1bmN0aW9uIGdlbkRlZmF1bHRNb2RlbCAoCiAgICBlbCwKICAgIHZhbHVlLAogICAgbW9kaWZpZXJzCiAgKSB7CiAgICB2YXIgdHlwZSA9IGVsLmF0dHJzTWFwLnR5cGU7CgogICAgLy8gd2FybiBpZiB2LWJpbmQ6dmFsdWUgY29uZmxpY3RzIHdpdGggdi1tb2RlbAogICAgLy8gZXhjZXB0IGZvciBpbnB1dHMgd2l0aCB2LWJpbmQ6dHlwZQogICAgewogICAgICB2YXIgdmFsdWUkMSA9IGVsLmF0dHJzTWFwWyd2LWJpbmQ6dmFsdWUnXSB8fCBlbC5hdHRyc01hcFsnOnZhbHVlJ107CiAgICAgIHZhciB0eXBlQmluZGluZyA9IGVsLmF0dHJzTWFwWyd2LWJpbmQ6dHlwZSddIHx8IGVsLmF0dHJzTWFwWyc6dHlwZSddOwogICAgICBpZiAodmFsdWUkMSAmJiAhdHlwZUJpbmRpbmcpIHsKICAgICAgICB2YXIgYmluZGluZyA9IGVsLmF0dHJzTWFwWyd2LWJpbmQ6dmFsdWUnXSA/ICd2LWJpbmQ6dmFsdWUnIDogJzp2YWx1ZSc7CiAgICAgICAgd2FybiQxKAogICAgICAgICAgYmluZGluZyArICI9XCIiICsgdmFsdWUkMSArICJcIiBjb25mbGljdHMgd2l0aCB2LW1vZGVsIG9uIHRoZSBzYW1lIGVsZW1lbnQgIiArCiAgICAgICAgICAnYmVjYXVzZSB0aGUgbGF0dGVyIGFscmVhZHkgZXhwYW5kcyB0byBhIHZhbHVlIGJpbmRpbmcgaW50ZXJuYWxseScsCiAgICAgICAgICBlbC5yYXdBdHRyc01hcFtiaW5kaW5nXQogICAgICAgICk7CiAgICAgIH0KICAgIH0KCiAgICB2YXIgcmVmID0gbW9kaWZpZXJzIHx8IHt9OwogICAgdmFyIGxhenkgPSByZWYubGF6eTsKICAgIHZhciBudW1iZXIgPSByZWYubnVtYmVyOwogICAgdmFyIHRyaW0gPSByZWYudHJpbTsKICAgIHZhciBuZWVkQ29tcG9zaXRpb25HdWFyZCA9ICFsYXp5ICYmIHR5cGUgIT09ICdyYW5nZSc7CiAgICB2YXIgZXZlbnQgPSBsYXp5CiAgICAgID8gJ2NoYW5nZScKICAgICAgOiB0eXBlID09PSAncmFuZ2UnCiAgICAgICAgPyBSQU5HRV9UT0tFTgogICAgICAgIDogJ2lucHV0JzsKCiAgICB2YXIgdmFsdWVFeHByZXNzaW9uID0gJyRldmVudC50YXJnZXQudmFsdWUnOwogICAgaWYgKHRyaW0pIHsKICAgICAgdmFsdWVFeHByZXNzaW9uID0gIiRldmVudC50YXJnZXQudmFsdWUudHJpbSgpIjsKICAgIH0KICAgIGlmIChudW1iZXIpIHsKICAgICAgdmFsdWVFeHByZXNzaW9uID0gIl9uKCIgKyB2YWx1ZUV4cHJlc3Npb24gKyAiKSI7CiAgICB9CgogICAgdmFyIGNvZGUgPSBnZW5Bc3NpZ25tZW50Q29kZSh2YWx1ZSwgdmFsdWVFeHByZXNzaW9uKTsKICAgIGlmIChuZWVkQ29tcG9zaXRpb25HdWFyZCkgewogICAgICBjb2RlID0gImlmKCRldmVudC50YXJnZXQuY29tcG9zaW5nKXJldHVybjsiICsgY29kZTsKICAgIH0KCiAgICBhZGRQcm9wKGVsLCAndmFsdWUnLCAoIigiICsgdmFsdWUgKyAiKSIpKTsKICAgIGFkZEhhbmRsZXIoZWwsIGV2ZW50LCBjb2RlLCBudWxsLCB0cnVlKTsKICAgIGlmICh0cmltIHx8IG51bWJlcikgewogICAgICBhZGRIYW5kbGVyKGVsLCAnYmx1cicsICckZm9yY2VVcGRhdGUoKScpOwogICAgfQogIH0KCiAgLyogICovCgogIC8vIG5vcm1hbGl6ZSB2LW1vZGVsIGV2ZW50IHRva2VucyB0aGF0IGNhbiBvbmx5IGJlIGRldGVybWluZWQgYXQgcnVudGltZS4KICAvLyBpdCdzIGltcG9ydGFudCB0byBwbGFjZSB0aGUgZXZlbnQgYXMgdGhlIGZpcnN0IGluIHRoZSBhcnJheSBiZWNhdXNlCiAgLy8gdGhlIHdob2xlIHBvaW50IGlzIGVuc3VyaW5nIHRoZSB2LW1vZGVsIGNhbGxiYWNrIGdldHMgY2FsbGVkIGJlZm9yZQogIC8vIHVzZXItYXR0YWNoZWQgaGFuZGxlcnMuCiAgZnVuY3Rpb24gbm9ybWFsaXplRXZlbnRzIChvbikgewogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoaXNEZWYob25bUkFOR0VfVE9LRU5dKSkgewogICAgICAvLyBJRSBpbnB1dFt0eXBlPXJhbmdlXSBvbmx5IHN1cHBvcnRzIGBjaGFuZ2VgIGV2ZW50CiAgICAgIHZhciBldmVudCA9IGlzSUUgPyAnY2hhbmdlJyA6ICdpbnB1dCc7CiAgICAgIG9uW2V2ZW50XSA9IFtdLmNvbmNhdChvbltSQU5HRV9UT0tFTl0sIG9uW2V2ZW50XSB8fCBbXSk7CiAgICAgIGRlbGV0ZSBvbltSQU5HRV9UT0tFTl07CiAgICB9CiAgICAvLyBUaGlzIHdhcyBvcmlnaW5hbGx5IGludGVuZGVkIHRvIGZpeCAjNDUyMSBidXQgbm8gbG9uZ2VyIG5lY2Vzc2FyeQogICAgLy8gYWZ0ZXIgMi41LiBLZWVwaW5nIGl0IGZvciBiYWNrd2FyZHMgY29tcGF0IHdpdGggZ2VuZXJhdGVkIGNvZGUgZnJvbSA8IDIuNAogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoaXNEZWYob25bQ0hFQ0tCT1hfUkFESU9fVE9LRU5dKSkgewogICAgICBvbi5jaGFuZ2UgPSBbXS5jb25jYXQob25bQ0hFQ0tCT1hfUkFESU9fVE9LRU5dLCBvbi5jaGFuZ2UgfHwgW10pOwogICAgICBkZWxldGUgb25bQ0hFQ0tCT1hfUkFESU9fVE9LRU5dOwogICAgfQogIH0KCiAgdmFyIHRhcmdldCQxOwoKICBmdW5jdGlvbiBjcmVhdGVPbmNlSGFuZGxlciQxIChldmVudCwgaGFuZGxlciwgY2FwdHVyZSkgewogICAgdmFyIF90YXJnZXQgPSB0YXJnZXQkMTsgLy8gc2F2ZSBjdXJyZW50IHRhcmdldCBlbGVtZW50IGluIGNsb3N1cmUKICAgIHJldHVybiBmdW5jdGlvbiBvbmNlSGFuZGxlciAoKSB7CiAgICAgIHZhciByZXMgPSBoYW5kbGVyLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7CiAgICAgIGlmIChyZXMgIT09IG51bGwpIHsKICAgICAgICByZW1vdmUkMihldmVudCwgb25jZUhhbmRsZXIsIGNhcHR1cmUsIF90YXJnZXQpOwogICAgICB9CiAgICB9CiAgfQoKICAvLyAjOTQ0NjogRmlyZWZveCA8PSA1MyAoaW4gcGFydGljdWxhciwgRVNSIDUyKSBoYXMgaW5jb3JyZWN0IEV2ZW50LnRpbWVTdGFtcAogIC8vIGltcGxlbWVudGF0aW9uIGFuZCBkb2VzIG5vdCBmaXJlIG1pY3JvdGFza3MgaW4gYmV0d2VlbiBldmVudCBwcm9wYWdhdGlvbiwgc28KICAvLyBzYWZlIHRvIGV4Y2x1ZGUuCiAgdmFyIHVzZU1pY3JvdGFza0ZpeCA9IGlzVXNpbmdNaWNyb1Rhc2sgJiYgIShpc0ZGICYmIE51bWJlcihpc0ZGWzFdKSA8PSA1Myk7CgogIGZ1bmN0aW9uIGFkZCQxICgKICAgIG5hbWUsCiAgICBoYW5kbGVyLAogICAgY2FwdHVyZSwKICAgIHBhc3NpdmUKICApIHsKICAgIC8vIGFzeW5jIGVkZ2UgY2FzZSAjNjU2NjogaW5uZXIgY2xpY2sgZXZlbnQgdHJpZ2dlcnMgcGF0Y2gsIGV2ZW50IGhhbmRsZXIKICAgIC8vIGF0dGFjaGVkIHRvIG91dGVyIGVsZW1lbnQgZHVyaW5nIHBhdGNoLCBhbmQgdHJpZ2dlcmVkIGFnYWluLiBUaGlzCiAgICAvLyBoYXBwZW5zIGJlY2F1c2UgYnJvd3NlcnMgZmlyZSBtaWNyb3Rhc2sgdGlja3MgYmV0d2VlbiBldmVudCBwcm9wYWdhdGlvbi4KICAgIC8vIHRoZSBzb2x1dGlvbiBpcyBzaW1wbGU6IHdlIHNhdmUgdGhlIHRpbWVzdGFtcCB3aGVuIGEgaGFuZGxlciBpcyBhdHRhY2hlZCwKICAgIC8vIGFuZCB0aGUgaGFuZGxlciB3b3VsZCBvbmx5IGZpcmUgaWYgdGhlIGV2ZW50IHBhc3NlZCB0byBpdCB3YXMgZmlyZWQKICAgIC8vIEFGVEVSIGl0IHdhcyBhdHRhY2hlZC4KICAgIGlmICh1c2VNaWNyb3Rhc2tGaXgpIHsKICAgICAgdmFyIGF0dGFjaGVkVGltZXN0YW1wID0gY3VycmVudEZsdXNoVGltZXN0YW1wOwogICAgICB2YXIgb3JpZ2luYWwgPSBoYW5kbGVyOwogICAgICBoYW5kbGVyID0gb3JpZ2luYWwuX3dyYXBwZXIgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIGlmICgKICAgICAgICAgIC8vIG5vIGJ1YmJsaW5nLCBzaG91bGQgYWx3YXlzIGZpcmUuCiAgICAgICAgICAvLyB0aGlzIGlzIGp1c3QgYSBzYWZldHkgbmV0IGluIGNhc2UgZXZlbnQudGltZVN0YW1wIGlzIHVucmVsaWFibGUgaW4KICAgICAgICAgIC8vIGNlcnRhaW4gd2VpcmQgZW52aXJvbm1lbnRzLi4uCiAgICAgICAgICBlLnRhcmdldCA9PT0gZS5jdXJyZW50VGFyZ2V0IHx8CiAgICAgICAgICAvLyBldmVudCBpcyBmaXJlZCBhZnRlciBoYW5kbGVyIGF0dGFjaG1lbnQKICAgICAgICAgIGUudGltZVN0YW1wID49IGF0dGFjaGVkVGltZXN0YW1wIHx8CiAgICAgICAgICAvLyBiYWlsIGZvciBlbnZpcm9ubWVudHMgdGhhdCBoYXZlIGJ1Z2d5IGV2ZW50LnRpbWVTdGFtcCBpbXBsZW1lbnRhdGlvbnMKICAgICAgICAgIC8vICM5NDYyIGlPUyA5IGJ1ZzogZXZlbnQudGltZVN0YW1wIGlzIDAgYWZ0ZXIgaGlzdG9yeS5wdXNoU3RhdGUKICAgICAgICAgIC8vICM5NjgxIFF0V2ViRW5naW5lIGV2ZW50LnRpbWVTdGFtcCBpcyBuZWdhdGl2ZSB2YWx1ZQogICAgICAgICAgZS50aW1lU3RhbXAgPD0gMCB8fAogICAgICAgICAgLy8gIzk0NDggYmFpbCBpZiBldmVudCBpcyBmaXJlZCBpbiBhbm90aGVyIGRvY3VtZW50IGluIGEgbXVsdGktcGFnZQogICAgICAgICAgLy8gZWxlY3Ryb24vbncuanMgYXBwLCBzaW5jZSBldmVudC50aW1lU3RhbXAgd2lsbCBiZSB1c2luZyBhIGRpZmZlcmVudAogICAgICAgICAgLy8gc3RhcnRpbmcgcmVmZXJlbmNlCiAgICAgICAgICBlLnRhcmdldC5vd25lckRvY3VtZW50ICE9PSBkb2N1bWVudAogICAgICAgICkgewogICAgICAgICAgcmV0dXJuIG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICB9CiAgICAgIH07CiAgICB9CiAgICB0YXJnZXQkMS5hZGRFdmVudExpc3RlbmVyKAogICAgICBuYW1lLAogICAgICBoYW5kbGVyLAogICAgICBzdXBwb3J0c1Bhc3NpdmUKICAgICAgICA/IHsgY2FwdHVyZTogY2FwdHVyZSwgcGFzc2l2ZTogcGFzc2l2ZSB9CiAgICAgICAgOiBjYXB0dXJlCiAgICApOwogIH0KCiAgZnVuY3Rpb24gcmVtb3ZlJDIgKAogICAgbmFtZSwKICAgIGhhbmRsZXIsCiAgICBjYXB0dXJlLAogICAgX3RhcmdldAogICkgewogICAgKF90YXJnZXQgfHwgdGFyZ2V0JDEpLnJlbW92ZUV2ZW50TGlzdGVuZXIoCiAgICAgIG5hbWUsCiAgICAgIGhhbmRsZXIuX3dyYXBwZXIgfHwgaGFuZGxlciwKICAgICAgY2FwdHVyZQogICAgKTsKICB9CgogIGZ1bmN0aW9uIHVwZGF0ZURPTUxpc3RlbmVycyAob2xkVm5vZGUsIHZub2RlKSB7CiAgICBpZiAoaXNVbmRlZihvbGRWbm9kZS5kYXRhLm9uKSAmJiBpc1VuZGVmKHZub2RlLmRhdGEub24pKSB7CiAgICAgIHJldHVybgogICAgfQogICAgdmFyIG9uID0gdm5vZGUuZGF0YS5vbiB8fCB7fTsKICAgIHZhciBvbGRPbiA9IG9sZFZub2RlLmRhdGEub24gfHwge307CiAgICB0YXJnZXQkMSA9IHZub2RlLmVsbTsKICAgIG5vcm1hbGl6ZUV2ZW50cyhvbik7CiAgICB1cGRhdGVMaXN0ZW5lcnMob24sIG9sZE9uLCBhZGQkMSwgcmVtb3ZlJDIsIGNyZWF0ZU9uY2VIYW5kbGVyJDEsIHZub2RlLmNvbnRleHQpOwogICAgdGFyZ2V0JDEgPSB1bmRlZmluZWQ7CiAgfQoKICB2YXIgZXZlbnRzID0gewogICAgY3JlYXRlOiB1cGRhdGVET01MaXN0ZW5lcnMsCiAgICB1cGRhdGU6IHVwZGF0ZURPTUxpc3RlbmVycwogIH07CgogIC8qICAqLwoKICB2YXIgc3ZnQ29udGFpbmVyOwoKICBmdW5jdGlvbiB1cGRhdGVET01Qcm9wcyAob2xkVm5vZGUsIHZub2RlKSB7CiAgICBpZiAoaXNVbmRlZihvbGRWbm9kZS5kYXRhLmRvbVByb3BzKSAmJiBpc1VuZGVmKHZub2RlLmRhdGEuZG9tUHJvcHMpKSB7CiAgICAgIHJldHVybgogICAgfQogICAgdmFyIGtleSwgY3VyOwogICAgdmFyIGVsbSA9IHZub2RlLmVsbTsKICAgIHZhciBvbGRQcm9wcyA9IG9sZFZub2RlLmRhdGEuZG9tUHJvcHMgfHwge307CiAgICB2YXIgcHJvcHMgPSB2bm9kZS5kYXRhLmRvbVByb3BzIHx8IHt9OwogICAgLy8gY2xvbmUgb2JzZXJ2ZWQgb2JqZWN0cywgYXMgdGhlIHVzZXIgcHJvYmFibHkgd2FudHMgdG8gbXV0YXRlIGl0CiAgICBpZiAoaXNEZWYocHJvcHMuX19vYl9fKSkgewogICAgICBwcm9wcyA9IHZub2RlLmRhdGEuZG9tUHJvcHMgPSBleHRlbmQoe30sIHByb3BzKTsKICAgIH0KCiAgICBmb3IgKGtleSBpbiBvbGRQcm9wcykgewogICAgICBpZiAoIShrZXkgaW4gcHJvcHMpKSB7CiAgICAgICAgZWxtW2tleV0gPSAnJzsKICAgICAgfQogICAgfQoKICAgIGZvciAoa2V5IGluIHByb3BzKSB7CiAgICAgIGN1ciA9IHByb3BzW2tleV07CiAgICAgIC8vIGlnbm9yZSBjaGlsZHJlbiBpZiB0aGUgbm9kZSBoYXMgdGV4dENvbnRlbnQgb3IgaW5uZXJIVE1MLAogICAgICAvLyBhcyB0aGVzZSB3aWxsIHRocm93IGF3YXkgZXhpc3RpbmcgRE9NIG5vZGVzIGFuZCBjYXVzZSByZW1vdmFsIGVycm9ycwogICAgICAvLyBvbiBzdWJzZXF1ZW50IHBhdGNoZXMgKCMzMzYwKQogICAgICBpZiAoa2V5ID09PSAndGV4dENvbnRlbnQnIHx8IGtleSA9PT0gJ2lubmVySFRNTCcpIHsKICAgICAgICBpZiAodm5vZGUuY2hpbGRyZW4pIHsgdm5vZGUuY2hpbGRyZW4ubGVuZ3RoID0gMDsgfQogICAgICAgIGlmIChjdXIgPT09IG9sZFByb3BzW2tleV0pIHsgY29udGludWUgfQogICAgICAgIC8vICM2NjAxIHdvcmsgYXJvdW5kIENocm9tZSB2ZXJzaW9uIDw9IDU1IGJ1ZyB3aGVyZSBzaW5nbGUgdGV4dE5vZGUKICAgICAgICAvLyByZXBsYWNlZCBieSBpbm5lckhUTUwvdGV4dENvbnRlbnQgcmV0YWlucyBpdHMgcGFyZW50Tm9kZSBwcm9wZXJ0eQogICAgICAgIGlmIChlbG0uY2hpbGROb2Rlcy5sZW5ndGggPT09IDEpIHsKICAgICAgICAgIGVsbS5yZW1vdmVDaGlsZChlbG0uY2hpbGROb2Rlc1swXSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoa2V5ID09PSAndmFsdWUnICYmIGVsbS50YWdOYW1lICE9PSAnUFJPR1JFU1MnKSB7CiAgICAgICAgLy8gc3RvcmUgdmFsdWUgYXMgX3ZhbHVlIGFzIHdlbGwgc2luY2UKICAgICAgICAvLyBub24tc3RyaW5nIHZhbHVlcyB3aWxsIGJlIHN0cmluZ2lmaWVkCiAgICAgICAgZWxtLl92YWx1ZSA9IGN1cjsKICAgICAgICAvLyBhdm9pZCByZXNldHRpbmcgY3Vyc29yIHBvc2l0aW9uIHdoZW4gdmFsdWUgaXMgdGhlIHNhbWUKICAgICAgICB2YXIgc3RyQ3VyID0gaXNVbmRlZihjdXIpID8gJycgOiBTdHJpbmcoY3VyKTsKICAgICAgICBpZiAoc2hvdWxkVXBkYXRlVmFsdWUoZWxtLCBzdHJDdXIpKSB7CiAgICAgICAgICBlbG0udmFsdWUgPSBzdHJDdXI7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2lubmVySFRNTCcgJiYgaXNTVkcoZWxtLnRhZ05hbWUpICYmIGlzVW5kZWYoZWxtLmlubmVySFRNTCkpIHsKICAgICAgICAvLyBJRSBkb2Vzbid0IHN1cHBvcnQgaW5uZXJIVE1MIGZvciBTVkcgZWxlbWVudHMKICAgICAgICBzdmdDb250YWluZXIgPSBzdmdDb250YWluZXIgfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgc3ZnQ29udGFpbmVyLmlubmVySFRNTCA9ICI8c3ZnPiIgKyBjdXIgKyAiPC9zdmc+IjsKICAgICAgICB2YXIgc3ZnID0gc3ZnQ29udGFpbmVyLmZpcnN0Q2hpbGQ7CiAgICAgICAgd2hpbGUgKGVsbS5maXJzdENoaWxkKSB7CiAgICAgICAgICBlbG0ucmVtb3ZlQ2hpbGQoZWxtLmZpcnN0Q2hpbGQpOwogICAgICAgIH0KICAgICAgICB3aGlsZSAoc3ZnLmZpcnN0Q2hpbGQpIHsKICAgICAgICAgIGVsbS5hcHBlbmRDaGlsZChzdmcuZmlyc3RDaGlsZCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKAogICAgICAgIC8vIHNraXAgdGhlIHVwZGF0ZSBpZiBvbGQgYW5kIG5ldyBWRE9NIHN0YXRlIGlzIHRoZSBzYW1lLgogICAgICAgIC8vIGB2YWx1ZWAgaXMgaGFuZGxlZCBzZXBhcmF0ZWx5IGJlY2F1c2UgdGhlIERPTSB2YWx1ZSBtYXkgYmUgdGVtcG9yYXJpbHkKICAgICAgICAvLyBvdXQgb2Ygc3luYyB3aXRoIFZET00gc3RhdGUgZHVlIHRvIGZvY3VzLCBjb21wb3NpdGlvbiBhbmQgbW9kaWZpZXJzLgogICAgICAgIC8vIFRoaXMgICM0NTIxIGJ5IHNraXBwaW5nIHRoZSB1bm5lY2VzYXJyeSBgY2hlY2tlZGAgdXBkYXRlLgogICAgICAgIGN1ciAhPT0gb2xkUHJvcHNba2V5XQogICAgICApIHsKICAgICAgICAvLyBzb21lIHByb3BlcnR5IHVwZGF0ZXMgY2FuIHRocm93CiAgICAgICAgLy8gZS5nLiBgdmFsdWVgIG9uIDxwcm9ncmVzcz4gdy8gbm9uLWZpbml0ZSB2YWx1ZQogICAgICAgIHRyeSB7CiAgICAgICAgICBlbG1ba2V5XSA9IGN1cjsKICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICB9CiAgICB9CiAgfQoKICAvLyBjaGVjayBwbGF0Zm9ybXMvd2ViL3V0aWwvYXR0cnMuanMgYWNjZXB0VmFsdWUKCgogIGZ1bmN0aW9uIHNob3VsZFVwZGF0ZVZhbHVlIChlbG0sIGNoZWNrVmFsKSB7CiAgICByZXR1cm4gKCFlbG0uY29tcG9zaW5nICYmICgKICAgICAgZWxtLnRhZ05hbWUgPT09ICdPUFRJT04nIHx8CiAgICAgIGlzTm90SW5Gb2N1c0FuZERpcnR5KGVsbSwgY2hlY2tWYWwpIHx8CiAgICAgIGlzRGlydHlXaXRoTW9kaWZpZXJzKGVsbSwgY2hlY2tWYWwpCiAgICApKQogIH0KCiAgZnVuY3Rpb24gaXNOb3RJbkZvY3VzQW5kRGlydHkgKGVsbSwgY2hlY2tWYWwpIHsKICAgIC8vIHJldHVybiB0cnVlIHdoZW4gdGV4dGJveCAoLm51bWJlciBhbmQgLnRyaW0pIGxvc2VzIGZvY3VzIGFuZCBpdHMgdmFsdWUgaXMKICAgIC8vIG5vdCBlcXVhbCB0byB0aGUgdXBkYXRlZCB2YWx1ZQogICAgdmFyIG5vdEluRm9jdXMgPSB0cnVlOwogICAgLy8gIzYxNTcKICAgIC8vIHdvcmsgYXJvdW5kIElFIGJ1ZyB3aGVuIGFjY2Vzc2luZyBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGluIGFuIGlmcmFtZQogICAgdHJ5IHsgbm90SW5Gb2N1cyA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IGVsbTsgfSBjYXRjaCAoZSkge30KICAgIHJldHVybiBub3RJbkZvY3VzICYmIGVsbS52YWx1ZSAhPT0gY2hlY2tWYWwKICB9CgogIGZ1bmN0aW9uIGlzRGlydHlXaXRoTW9kaWZpZXJzIChlbG0sIG5ld1ZhbCkgewogICAgdmFyIHZhbHVlID0gZWxtLnZhbHVlOwogICAgdmFyIG1vZGlmaWVycyA9IGVsbS5fdk1vZGlmaWVyczsgLy8gaW5qZWN0ZWQgYnkgdi1tb2RlbCBydW50aW1lCiAgICBpZiAoaXNEZWYobW9kaWZpZXJzKSkgewogICAgICBpZiAobW9kaWZpZXJzLm51bWJlcikgewogICAgICAgIHJldHVybiB0b051bWJlcih2YWx1ZSkgIT09IHRvTnVtYmVyKG5ld1ZhbCkKICAgICAgfQogICAgICBpZiAobW9kaWZpZXJzLnRyaW0pIHsKICAgICAgICByZXR1cm4gdmFsdWUudHJpbSgpICE9PSBuZXdWYWwudHJpbSgpCiAgICAgIH0KICAgIH0KICAgIHJldHVybiB2YWx1ZSAhPT0gbmV3VmFsCiAgfQoKICB2YXIgZG9tUHJvcHMgPSB7CiAgICBjcmVhdGU6IHVwZGF0ZURPTVByb3BzLAogICAgdXBkYXRlOiB1cGRhdGVET01Qcm9wcwogIH07CgogIC8qICAqLwoKICB2YXIgcGFyc2VTdHlsZVRleHQgPSBjYWNoZWQoZnVuY3Rpb24gKGNzc1RleHQpIHsKICAgIHZhciByZXMgPSB7fTsKICAgIHZhciBsaXN0RGVsaW1pdGVyID0gLzsoPyFbXihdKlwpKS9nOwogICAgdmFyIHByb3BlcnR5RGVsaW1pdGVyID0gLzooLispLzsKICAgIGNzc1RleHQuc3BsaXQobGlzdERlbGltaXRlcikuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICBpZiAoaXRlbSkgewogICAgICAgIHZhciB0bXAgPSBpdGVtLnNwbGl0KHByb3BlcnR5RGVsaW1pdGVyKTsKICAgICAgICB0bXAubGVuZ3RoID4gMSAmJiAocmVzW3RtcFswXS50cmltKCldID0gdG1wWzFdLnRyaW0oKSk7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIHJlcwogIH0pOwoKICAvLyBtZXJnZSBzdGF0aWMgYW5kIGR5bmFtaWMgc3R5bGUgZGF0YSBvbiB0aGUgc2FtZSB2bm9kZQogIGZ1bmN0aW9uIG5vcm1hbGl6ZVN0eWxlRGF0YSAoZGF0YSkgewogICAgdmFyIHN0eWxlID0gbm9ybWFsaXplU3R5bGVCaW5kaW5nKGRhdGEuc3R5bGUpOwogICAgLy8gc3RhdGljIHN0eWxlIGlzIHByZS1wcm9jZXNzZWQgaW50byBhbiBvYmplY3QgZHVyaW5nIGNvbXBpbGF0aW9uCiAgICAvLyBhbmQgaXMgYWx3YXlzIGEgZnJlc2ggb2JqZWN0LCBzbyBpdCdzIHNhZmUgdG8gbWVyZ2UgaW50byBpdAogICAgcmV0dXJuIGRhdGEuc3RhdGljU3R5bGUKICAgICAgPyBleHRlbmQoZGF0YS5zdGF0aWNTdHlsZSwgc3R5bGUpCiAgICAgIDogc3R5bGUKICB9CgogIC8vIG5vcm1hbGl6ZSBwb3NzaWJsZSBhcnJheSAvIHN0cmluZyB2YWx1ZXMgaW50byBPYmplY3QKICBmdW5jdGlvbiBub3JtYWxpemVTdHlsZUJpbmRpbmcgKGJpbmRpbmdTdHlsZSkgewogICAgaWYgKEFycmF5LmlzQXJyYXkoYmluZGluZ1N0eWxlKSkgewogICAgICByZXR1cm4gdG9PYmplY3QoYmluZGluZ1N0eWxlKQogICAgfQogICAgaWYgKHR5cGVvZiBiaW5kaW5nU3R5bGUgPT09ICdzdHJpbmcnKSB7CiAgICAgIHJldHVybiBwYXJzZVN0eWxlVGV4dChiaW5kaW5nU3R5bGUpCiAgICB9CiAgICByZXR1cm4gYmluZGluZ1N0eWxlCiAgfQoKICAvKioKICAgKiBwYXJlbnQgY29tcG9uZW50IHN0eWxlIHNob3VsZCBiZSBhZnRlciBjaGlsZCdzCiAgICogc28gdGhhdCBwYXJlbnQgY29tcG9uZW50J3Mgc3R5bGUgY291bGQgb3ZlcnJpZGUgaXQKICAgKi8KICBmdW5jdGlvbiBnZXRTdHlsZSAodm5vZGUsIGNoZWNrQ2hpbGQpIHsKICAgIHZhciByZXMgPSB7fTsKICAgIHZhciBzdHlsZURhdGE7CgogICAgaWYgKGNoZWNrQ2hpbGQpIHsKICAgICAgdmFyIGNoaWxkTm9kZSA9IHZub2RlOwogICAgICB3aGlsZSAoY2hpbGROb2RlLmNvbXBvbmVudEluc3RhbmNlKSB7CiAgICAgICAgY2hpbGROb2RlID0gY2hpbGROb2RlLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZTsKICAgICAgICBpZiAoCiAgICAgICAgICBjaGlsZE5vZGUgJiYgY2hpbGROb2RlLmRhdGEgJiYKICAgICAgICAgIChzdHlsZURhdGEgPSBub3JtYWxpemVTdHlsZURhdGEoY2hpbGROb2RlLmRhdGEpKQogICAgICAgICkgewogICAgICAgICAgZXh0ZW5kKHJlcywgc3R5bGVEYXRhKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBpZiAoKHN0eWxlRGF0YSA9IG5vcm1hbGl6ZVN0eWxlRGF0YSh2bm9kZS5kYXRhKSkpIHsKICAgICAgZXh0ZW5kKHJlcywgc3R5bGVEYXRhKTsKICAgIH0KCiAgICB2YXIgcGFyZW50Tm9kZSA9IHZub2RlOwogICAgd2hpbGUgKChwYXJlbnROb2RlID0gcGFyZW50Tm9kZS5wYXJlbnQpKSB7CiAgICAgIGlmIChwYXJlbnROb2RlLmRhdGEgJiYgKHN0eWxlRGF0YSA9IG5vcm1hbGl6ZVN0eWxlRGF0YShwYXJlbnROb2RlLmRhdGEpKSkgewogICAgICAgIGV4dGVuZChyZXMsIHN0eWxlRGF0YSk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiByZXMKICB9CgogIC8qICAqLwoKICB2YXIgY3NzVmFyUkUgPSAvXi0tLzsKICB2YXIgaW1wb3J0YW50UkUgPSAvXHMqIWltcG9ydGFudCQvOwogIHZhciBzZXRQcm9wID0gZnVuY3Rpb24gKGVsLCBuYW1lLCB2YWwpIHsKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgaWYgKGNzc1ZhclJFLnRlc3QobmFtZSkpIHsKICAgICAgZWwuc3R5bGUuc2V0UHJvcGVydHkobmFtZSwgdmFsKTsKICAgIH0gZWxzZSBpZiAoaW1wb3J0YW50UkUudGVzdCh2YWwpKSB7CiAgICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KGh5cGhlbmF0ZShuYW1lKSwgdmFsLnJlcGxhY2UoaW1wb3J0YW50UkUsICcnKSwgJ2ltcG9ydGFudCcpOwogICAgfSBlbHNlIHsKICAgICAgdmFyIG5vcm1hbGl6ZWROYW1lID0gbm9ybWFsaXplKG5hbWUpOwogICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7CiAgICAgICAgLy8gU3VwcG9ydCB2YWx1ZXMgYXJyYXkgY3JlYXRlZCBieSBhdXRvcHJlZml4ZXIsIGUuZy4KICAgICAgICAvLyB7ZGlzcGxheTogWyItd2Via2l0LWJveCIsICItbXMtZmxleGJveCIsICJmbGV4Il19CiAgICAgICAgLy8gU2V0IHRoZW0gb25lIGJ5IG9uZSwgYW5kIHRoZSBicm93c2VyIHdpbGwgb25seSBzZXQgdGhvc2UgaXQgY2FuIHJlY29nbml6ZQogICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB2YWwubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgIGVsLnN0eWxlW25vcm1hbGl6ZWROYW1lXSA9IHZhbFtpXTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZWwuc3R5bGVbbm9ybWFsaXplZE5hbWVdID0gdmFsOwogICAgICB9CiAgICB9CiAgfTsKCiAgdmFyIHZlbmRvck5hbWVzID0gWydXZWJraXQnLCAnTW96JywgJ21zJ107CgogIHZhciBlbXB0eVN0eWxlOwogIHZhciBub3JtYWxpemUgPSBjYWNoZWQoZnVuY3Rpb24gKHByb3ApIHsKICAgIGVtcHR5U3R5bGUgPSBlbXB0eVN0eWxlIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLnN0eWxlOwogICAgcHJvcCA9IGNhbWVsaXplKHByb3ApOwogICAgaWYgKHByb3AgIT09ICdmaWx0ZXInICYmIChwcm9wIGluIGVtcHR5U3R5bGUpKSB7CiAgICAgIHJldHVybiBwcm9wCiAgICB9CiAgICB2YXIgY2FwTmFtZSA9IHByb3AuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBwcm9wLnNsaWNlKDEpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2ZW5kb3JOYW1lcy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgbmFtZSA9IHZlbmRvck5hbWVzW2ldICsgY2FwTmFtZTsKICAgICAgaWYgKG5hbWUgaW4gZW1wdHlTdHlsZSkgewogICAgICAgIHJldHVybiBuYW1lCiAgICAgIH0KICAgIH0KICB9KTsKCiAgZnVuY3Rpb24gdXBkYXRlU3R5bGUgKG9sZFZub2RlLCB2bm9kZSkgewogICAgdmFyIGRhdGEgPSB2bm9kZS5kYXRhOwogICAgdmFyIG9sZERhdGEgPSBvbGRWbm9kZS5kYXRhOwoKICAgIGlmIChpc1VuZGVmKGRhdGEuc3RhdGljU3R5bGUpICYmIGlzVW5kZWYoZGF0YS5zdHlsZSkgJiYKICAgICAgaXNVbmRlZihvbGREYXRhLnN0YXRpY1N0eWxlKSAmJiBpc1VuZGVmKG9sZERhdGEuc3R5bGUpCiAgICApIHsKICAgICAgcmV0dXJuCiAgICB9CgogICAgdmFyIGN1ciwgbmFtZTsKICAgIHZhciBlbCA9IHZub2RlLmVsbTsKICAgIHZhciBvbGRTdGF0aWNTdHlsZSA9IG9sZERhdGEuc3RhdGljU3R5bGU7CiAgICB2YXIgb2xkU3R5bGVCaW5kaW5nID0gb2xkRGF0YS5ub3JtYWxpemVkU3R5bGUgfHwgb2xkRGF0YS5zdHlsZSB8fCB7fTsKCiAgICAvLyBpZiBzdGF0aWMgc3R5bGUgZXhpc3RzLCBzdHlsZWJpbmRpbmcgYWxyZWFkeSBtZXJnZWQgaW50byBpdCB3aGVuIGRvaW5nIG5vcm1hbGl6ZVN0eWxlRGF0YQogICAgdmFyIG9sZFN0eWxlID0gb2xkU3RhdGljU3R5bGUgfHwgb2xkU3R5bGVCaW5kaW5nOwoKICAgIHZhciBzdHlsZSA9IG5vcm1hbGl6ZVN0eWxlQmluZGluZyh2bm9kZS5kYXRhLnN0eWxlKSB8fCB7fTsKCiAgICAvLyBzdG9yZSBub3JtYWxpemVkIHN0eWxlIHVuZGVyIGEgZGlmZmVyZW50IGtleSBmb3IgbmV4dCBkaWZmCiAgICAvLyBtYWtlIHN1cmUgdG8gY2xvbmUgaXQgaWYgaXQncyByZWFjdGl2ZSwgc2luY2UgdGhlIHVzZXIgbGlrZWx5IHdhbnRzCiAgICAvLyB0byBtdXRhdGUgaXQuCiAgICB2bm9kZS5kYXRhLm5vcm1hbGl6ZWRTdHlsZSA9IGlzRGVmKHN0eWxlLl9fb2JfXykKICAgICAgPyBleHRlbmQoe30sIHN0eWxlKQogICAgICA6IHN0eWxlOwoKICAgIHZhciBuZXdTdHlsZSA9IGdldFN0eWxlKHZub2RlLCB0cnVlKTsKCiAgICBmb3IgKG5hbWUgaW4gb2xkU3R5bGUpIHsKICAgICAgaWYgKGlzVW5kZWYobmV3U3R5bGVbbmFtZV0pKSB7CiAgICAgICAgc2V0UHJvcChlbCwgbmFtZSwgJycpOwogICAgICB9CiAgICB9CiAgICBmb3IgKG5hbWUgaW4gbmV3U3R5bGUpIHsKICAgICAgY3VyID0gbmV3U3R5bGVbbmFtZV07CiAgICAgIGlmIChjdXIgIT09IG9sZFN0eWxlW25hbWVdKSB7CiAgICAgICAgLy8gaWU5IHNldHRpbmcgdG8gbnVsbCBoYXMgbm8gZWZmZWN0LCBtdXN0IHVzZSBlbXB0eSBzdHJpbmcKICAgICAgICBzZXRQcm9wKGVsLCBuYW1lLCBjdXIgPT0gbnVsbCA/ICcnIDogY3VyKTsKICAgICAgfQogICAgfQogIH0KCiAgdmFyIHN0eWxlID0gewogICAgY3JlYXRlOiB1cGRhdGVTdHlsZSwKICAgIHVwZGF0ZTogdXBkYXRlU3R5bGUKICB9OwoKICAvKiAgKi8KCiAgdmFyIHdoaXRlc3BhY2VSRSA9IC9ccysvOwoKICAvKioKICAgKiBBZGQgY2xhc3Mgd2l0aCBjb21wYXRpYmlsaXR5IGZvciBTVkcgc2luY2UgY2xhc3NMaXN0IGlzIG5vdCBzdXBwb3J0ZWQgb24KICAgKiBTVkcgZWxlbWVudHMgaW4gSUUKICAgKi8KICBmdW5jdGlvbiBhZGRDbGFzcyAoZWwsIGNscykgewogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoIWNscyB8fCAhKGNscyA9IGNscy50cmltKCkpKSB7CiAgICAgIHJldHVybgogICAgfQoKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovCiAgICBpZiAoZWwuY2xhc3NMaXN0KSB7CiAgICAgIGlmIChjbHMuaW5kZXhPZignICcpID4gLTEpIHsKICAgICAgICBjbHMuc3BsaXQod2hpdGVzcGFjZVJFKS5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7IHJldHVybiBlbC5jbGFzc0xpc3QuYWRkKGMpOyB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKGNscyk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHZhciBjdXIgPSAiICIgKyAoZWwuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnKSArICIgIjsKICAgICAgaWYgKGN1ci5pbmRleE9mKCcgJyArIGNscyArICcgJykgPCAwKSB7CiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIChjdXIgKyBjbHMpLnRyaW0oKSk7CiAgICAgIH0KICAgIH0KICB9CgogIC8qKgogICAqIFJlbW92ZSBjbGFzcyB3aXRoIGNvbXBhdGliaWxpdHkgZm9yIFNWRyBzaW5jZSBjbGFzc0xpc3QgaXMgbm90IHN1cHBvcnRlZCBvbgogICAqIFNWRyBlbGVtZW50cyBpbiBJRQogICAqLwogIGZ1bmN0aW9uIHJlbW92ZUNsYXNzIChlbCwgY2xzKSB7CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgIGlmICghY2xzIHx8ICEoY2xzID0gY2xzLnRyaW0oKSkpIHsKICAgICAgcmV0dXJuCiAgICB9CgogICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi8KICAgIGlmIChlbC5jbGFzc0xpc3QpIHsKICAgICAgaWYgKGNscy5pbmRleE9mKCcgJykgPiAtMSkgewogICAgICAgIGNscy5zcGxpdCh3aGl0ZXNwYWNlUkUpLmZvckVhY2goZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGVsLmNsYXNzTGlzdC5yZW1vdmUoYyk7IH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xzKTsKICAgICAgfQogICAgICBpZiAoIWVsLmNsYXNzTGlzdC5sZW5ndGgpIHsKICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2NsYXNzJyk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHZhciBjdXIgPSAiICIgKyAoZWwuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnKSArICIgIjsKICAgICAgdmFyIHRhciA9ICcgJyArIGNscyArICcgJzsKICAgICAgd2hpbGUgKGN1ci5pbmRleE9mKHRhcikgPj0gMCkgewogICAgICAgIGN1ciA9IGN1ci5yZXBsYWNlKHRhciwgJyAnKTsKICAgICAgfQogICAgICBjdXIgPSBjdXIudHJpbSgpOwogICAgICBpZiAoY3VyKSB7CiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIGN1cik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdjbGFzcycpOwogICAgICB9CiAgICB9CiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gcmVzb2x2ZVRyYW5zaXRpb24gKGRlZiQkMSkgewogICAgaWYgKCFkZWYkJDEpIHsKICAgICAgcmV0dXJuCiAgICB9CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqLwogICAgaWYgKHR5cGVvZiBkZWYkJDEgPT09ICdvYmplY3QnKSB7CiAgICAgIHZhciByZXMgPSB7fTsKICAgICAgaWYgKGRlZiQkMS5jc3MgIT09IGZhbHNlKSB7CiAgICAgICAgZXh0ZW5kKHJlcywgYXV0b0Nzc1RyYW5zaXRpb24oZGVmJCQxLm5hbWUgfHwgJ3YnKSk7CiAgICAgIH0KICAgICAgZXh0ZW5kKHJlcywgZGVmJCQxKTsKICAgICAgcmV0dXJuIHJlcwogICAgfSBlbHNlIGlmICh0eXBlb2YgZGVmJCQxID09PSAnc3RyaW5nJykgewogICAgICByZXR1cm4gYXV0b0Nzc1RyYW5zaXRpb24oZGVmJCQxKQogICAgfQogIH0KCiAgdmFyIGF1dG9Dc3NUcmFuc2l0aW9uID0gY2FjaGVkKGZ1bmN0aW9uIChuYW1lKSB7CiAgICByZXR1cm4gewogICAgICBlbnRlckNsYXNzOiAobmFtZSArICItZW50ZXIiKSwKICAgICAgZW50ZXJUb0NsYXNzOiAobmFtZSArICItZW50ZXItdG8iKSwKICAgICAgZW50ZXJBY3RpdmVDbGFzczogKG5hbWUgKyAiLWVudGVyLWFjdGl2ZSIpLAogICAgICBsZWF2ZUNsYXNzOiAobmFtZSArICItbGVhdmUiKSwKICAgICAgbGVhdmVUb0NsYXNzOiAobmFtZSArICItbGVhdmUtdG8iKSwKICAgICAgbGVhdmVBY3RpdmVDbGFzczogKG5hbWUgKyAiLWxlYXZlLWFjdGl2ZSIpCiAgICB9CiAgfSk7CgogIHZhciBoYXNUcmFuc2l0aW9uID0gaW5Ccm93c2VyICYmICFpc0lFOTsKICB2YXIgVFJBTlNJVElPTiA9ICd0cmFuc2l0aW9uJzsKICB2YXIgQU5JTUFUSU9OID0gJ2FuaW1hdGlvbic7CgogIC8vIFRyYW5zaXRpb24gcHJvcGVydHkvZXZlbnQgc25pZmZpbmcKICB2YXIgdHJhbnNpdGlvblByb3AgPSAndHJhbnNpdGlvbic7CiAgdmFyIHRyYW5zaXRpb25FbmRFdmVudCA9ICd0cmFuc2l0aW9uZW5kJzsKICB2YXIgYW5pbWF0aW9uUHJvcCA9ICdhbmltYXRpb24nOwogIHZhciBhbmltYXRpb25FbmRFdmVudCA9ICdhbmltYXRpb25lbmQnOwogIGlmIChoYXNUcmFuc2l0aW9uKSB7CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgIGlmICh3aW5kb3cub250cmFuc2l0aW9uZW5kID09PSB1bmRlZmluZWQgJiYKICAgICAgd2luZG93Lm9ud2Via2l0dHJhbnNpdGlvbmVuZCAhPT0gdW5kZWZpbmVkCiAgICApIHsKICAgICAgdHJhbnNpdGlvblByb3AgPSAnV2Via2l0VHJhbnNpdGlvbic7CiAgICAgIHRyYW5zaXRpb25FbmRFdmVudCA9ICd3ZWJraXRUcmFuc2l0aW9uRW5kJzsKICAgIH0KICAgIGlmICh3aW5kb3cub25hbmltYXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJgogICAgICB3aW5kb3cub253ZWJraXRhbmltYXRpb25lbmQgIT09IHVuZGVmaW5lZAogICAgKSB7CiAgICAgIGFuaW1hdGlvblByb3AgPSAnV2Via2l0QW5pbWF0aW9uJzsKICAgICAgYW5pbWF0aW9uRW5kRXZlbnQgPSAnd2Via2l0QW5pbWF0aW9uRW5kJzsKICAgIH0KICB9CgogIC8vIGJpbmRpbmcgdG8gd2luZG93IGlzIG5lY2Vzc2FyeSB0byBtYWtlIGhvdCByZWxvYWQgd29yayBpbiBJRSBpbiBzdHJpY3QgbW9kZQogIHZhciByYWYgPSBpbkJyb3dzZXIKICAgID8gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZQogICAgICA/IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuYmluZCh3aW5kb3cpCiAgICAgIDogc2V0VGltZW91dAogICAgOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAoZm4pIHsgcmV0dXJuIGZuKCk7IH07CgogIGZ1bmN0aW9uIG5leHRGcmFtZSAoZm4pIHsKICAgIHJhZihmdW5jdGlvbiAoKSB7CiAgICAgIHJhZihmbik7CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIGFkZFRyYW5zaXRpb25DbGFzcyAoZWwsIGNscykgewogICAgdmFyIHRyYW5zaXRpb25DbGFzc2VzID0gZWwuX3RyYW5zaXRpb25DbGFzc2VzIHx8IChlbC5fdHJhbnNpdGlvbkNsYXNzZXMgPSBbXSk7CiAgICBpZiAodHJhbnNpdGlvbkNsYXNzZXMuaW5kZXhPZihjbHMpIDwgMCkgewogICAgICB0cmFuc2l0aW9uQ2xhc3Nlcy5wdXNoKGNscyk7CiAgICAgIGFkZENsYXNzKGVsLCBjbHMpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gcmVtb3ZlVHJhbnNpdGlvbkNsYXNzIChlbCwgY2xzKSB7CiAgICBpZiAoZWwuX3RyYW5zaXRpb25DbGFzc2VzKSB7CiAgICAgIHJlbW92ZShlbC5fdHJhbnNpdGlvbkNsYXNzZXMsIGNscyk7CiAgICB9CiAgICByZW1vdmVDbGFzcyhlbCwgY2xzKTsKICB9CgogIGZ1bmN0aW9uIHdoZW5UcmFuc2l0aW9uRW5kcyAoCiAgICBlbCwKICAgIGV4cGVjdGVkVHlwZSwKICAgIGNiCiAgKSB7CiAgICB2YXIgcmVmID0gZ2V0VHJhbnNpdGlvbkluZm8oZWwsIGV4cGVjdGVkVHlwZSk7CiAgICB2YXIgdHlwZSA9IHJlZi50eXBlOwogICAgdmFyIHRpbWVvdXQgPSByZWYudGltZW91dDsKICAgIHZhciBwcm9wQ291bnQgPSByZWYucHJvcENvdW50OwogICAgaWYgKCF0eXBlKSB7IHJldHVybiBjYigpIH0KICAgIHZhciBldmVudCA9IHR5cGUgPT09IFRSQU5TSVRJT04gPyB0cmFuc2l0aW9uRW5kRXZlbnQgOiBhbmltYXRpb25FbmRFdmVudDsKICAgIHZhciBlbmRlZCA9IDA7CiAgICB2YXIgZW5kID0gZnVuY3Rpb24gKCkgewogICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBvbkVuZCk7CiAgICAgIGNiKCk7CiAgICB9OwogICAgdmFyIG9uRW5kID0gZnVuY3Rpb24gKGUpIHsKICAgICAgaWYgKGUudGFyZ2V0ID09PSBlbCkgewogICAgICAgIGlmICgrK2VuZGVkID49IHByb3BDb3VudCkgewogICAgICAgICAgZW5kKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChlbmRlZCA8IHByb3BDb3VudCkgewogICAgICAgIGVuZCgpOwogICAgICB9CiAgICB9LCB0aW1lb3V0ICsgMSk7CiAgICBlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBvbkVuZCk7CiAgfQoKICB2YXIgdHJhbnNmb3JtUkUgPSAvXGIodHJhbnNmb3JtfGFsbCkoLHwkKS87CgogIGZ1bmN0aW9uIGdldFRyYW5zaXRpb25JbmZvIChlbCwgZXhwZWN0ZWRUeXBlKSB7CiAgICB2YXIgc3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpOwogICAgLy8gSlNET00gbWF5IHJldHVybiB1bmRlZmluZWQgZm9yIHRyYW5zaXRpb24gcHJvcGVydGllcwogICAgdmFyIHRyYW5zaXRpb25EZWxheXMgPSAoc3R5bGVzW3RyYW5zaXRpb25Qcm9wICsgJ0RlbGF5J10gfHwgJycpLnNwbGl0KCcsICcpOwogICAgdmFyIHRyYW5zaXRpb25EdXJhdGlvbnMgPSAoc3R5bGVzW3RyYW5zaXRpb25Qcm9wICsgJ0R1cmF0aW9uJ10gfHwgJycpLnNwbGl0KCcsICcpOwogICAgdmFyIHRyYW5zaXRpb25UaW1lb3V0ID0gZ2V0VGltZW91dCh0cmFuc2l0aW9uRGVsYXlzLCB0cmFuc2l0aW9uRHVyYXRpb25zKTsKICAgIHZhciBhbmltYXRpb25EZWxheXMgPSAoc3R5bGVzW2FuaW1hdGlvblByb3AgKyAnRGVsYXknXSB8fCAnJykuc3BsaXQoJywgJyk7CiAgICB2YXIgYW5pbWF0aW9uRHVyYXRpb25zID0gKHN0eWxlc1thbmltYXRpb25Qcm9wICsgJ0R1cmF0aW9uJ10gfHwgJycpLnNwbGl0KCcsICcpOwogICAgdmFyIGFuaW1hdGlvblRpbWVvdXQgPSBnZXRUaW1lb3V0KGFuaW1hdGlvbkRlbGF5cywgYW5pbWF0aW9uRHVyYXRpb25zKTsKCiAgICB2YXIgdHlwZTsKICAgIHZhciB0aW1lb3V0ID0gMDsKICAgIHZhciBwcm9wQ291bnQgPSAwOwogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoZXhwZWN0ZWRUeXBlID09PSBUUkFOU0lUSU9OKSB7CiAgICAgIGlmICh0cmFuc2l0aW9uVGltZW91dCA+IDApIHsKICAgICAgICB0eXBlID0gVFJBTlNJVElPTjsKICAgICAgICB0aW1lb3V0ID0gdHJhbnNpdGlvblRpbWVvdXQ7CiAgICAgICAgcHJvcENvdW50ID0gdHJhbnNpdGlvbkR1cmF0aW9ucy5sZW5ndGg7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoZXhwZWN0ZWRUeXBlID09PSBBTklNQVRJT04pIHsKICAgICAgaWYgKGFuaW1hdGlvblRpbWVvdXQgPiAwKSB7CiAgICAgICAgdHlwZSA9IEFOSU1BVElPTjsKICAgICAgICB0aW1lb3V0ID0gYW5pbWF0aW9uVGltZW91dDsKICAgICAgICBwcm9wQ291bnQgPSBhbmltYXRpb25EdXJhdGlvbnMubGVuZ3RoOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aW1lb3V0ID0gTWF0aC5tYXgodHJhbnNpdGlvblRpbWVvdXQsIGFuaW1hdGlvblRpbWVvdXQpOwogICAgICB0eXBlID0gdGltZW91dCA+IDAKICAgICAgICA/IHRyYW5zaXRpb25UaW1lb3V0ID4gYW5pbWF0aW9uVGltZW91dAogICAgICAgICAgPyBUUkFOU0lUSU9OCiAgICAgICAgICA6IEFOSU1BVElPTgogICAgICAgIDogbnVsbDsKICAgICAgcHJvcENvdW50ID0gdHlwZQogICAgICAgID8gdHlwZSA9PT0gVFJBTlNJVElPTgogICAgICAgICAgPyB0cmFuc2l0aW9uRHVyYXRpb25zLmxlbmd0aAogICAgICAgICAgOiBhbmltYXRpb25EdXJhdGlvbnMubGVuZ3RoCiAgICAgICAgOiAwOwogICAgfQogICAgdmFyIGhhc1RyYW5zZm9ybSA9CiAgICAgIHR5cGUgPT09IFRSQU5TSVRJT04gJiYKICAgICAgdHJhbnNmb3JtUkUudGVzdChzdHlsZXNbdHJhbnNpdGlvblByb3AgKyAnUHJvcGVydHknXSk7CiAgICByZXR1cm4gewogICAgICB0eXBlOiB0eXBlLAogICAgICB0aW1lb3V0OiB0aW1lb3V0LAogICAgICBwcm9wQ291bnQ6IHByb3BDb3VudCwKICAgICAgaGFzVHJhbnNmb3JtOiBoYXNUcmFuc2Zvcm0KICAgIH0KICB9CgogIGZ1bmN0aW9uIGdldFRpbWVvdXQgKGRlbGF5cywgZHVyYXRpb25zKSB7CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogICAgd2hpbGUgKGRlbGF5cy5sZW5ndGggPCBkdXJhdGlvbnMubGVuZ3RoKSB7CiAgICAgIGRlbGF5cyA9IGRlbGF5cy5jb25jYXQoZGVsYXlzKTsKICAgIH0KCiAgICByZXR1cm4gTWF0aC5tYXguYXBwbHkobnVsbCwgZHVyYXRpb25zLm1hcChmdW5jdGlvbiAoZCwgaSkgewogICAgICByZXR1cm4gdG9NcyhkKSArIHRvTXMoZGVsYXlzW2ldKQogICAgfSkpCiAgfQoKICAvLyBPbGQgdmVyc2lvbnMgb2YgQ2hyb21pdW0gKGJlbG93IDYxLjAuMzE2My4xMDApIGZvcm1hdHMgZmxvYXRpbmcgcG9pbnRlciBudW1iZXJzCiAgLy8gaW4gYSBsb2NhbGUtZGVwZW5kZW50IHdheSwgdXNpbmcgYSBjb21tYSBpbnN0ZWFkIG9mIGEgZG90LgogIC8vIElmIGNvbW1hIGlzIG5vdCByZXBsYWNlZCB3aXRoIGEgZG90LCB0aGUgaW5wdXQgd2lsbCBiZSByb3VuZGVkIGRvd24gKGkuZS4gYWN0aW5nCiAgLy8gYXMgYSBmbG9vciBmdW5jdGlvbikgY2F1c2luZyB1bmV4cGVjdGVkIGJlaGF2aW9ycwogIGZ1bmN0aW9uIHRvTXMgKHMpIHsKICAgIHJldHVybiBOdW1iZXIocy5zbGljZSgwLCAtMSkucmVwbGFjZSgnLCcsICcuJykpICogMTAwMAogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIGVudGVyICh2bm9kZSwgdG9nZ2xlRGlzcGxheSkgewogICAgdmFyIGVsID0gdm5vZGUuZWxtOwoKICAgIC8vIGNhbGwgbGVhdmUgY2FsbGJhY2sgbm93CiAgICBpZiAoaXNEZWYoZWwuX2xlYXZlQ2IpKSB7CiAgICAgIGVsLl9sZWF2ZUNiLmNhbmNlbGxlZCA9IHRydWU7CiAgICAgIGVsLl9sZWF2ZUNiKCk7CiAgICB9CgogICAgdmFyIGRhdGEgPSByZXNvbHZlVHJhbnNpdGlvbih2bm9kZS5kYXRhLnRyYW5zaXRpb24pOwogICAgaWYgKGlzVW5kZWYoZGF0YSkpIHsKICAgICAgcmV0dXJuCiAgICB9CgogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoaXNEZWYoZWwuX2VudGVyQ2IpIHx8IGVsLm5vZGVUeXBlICE9PSAxKSB7CiAgICAgIHJldHVybgogICAgfQoKICAgIHZhciBjc3MgPSBkYXRhLmNzczsKICAgIHZhciB0eXBlID0gZGF0YS50eXBlOwogICAgdmFyIGVudGVyQ2xhc3MgPSBkYXRhLmVudGVyQ2xhc3M7CiAgICB2YXIgZW50ZXJUb0NsYXNzID0gZGF0YS5lbnRlclRvQ2xhc3M7CiAgICB2YXIgZW50ZXJBY3RpdmVDbGFzcyA9IGRhdGEuZW50ZXJBY3RpdmVDbGFzczsKICAgIHZhciBhcHBlYXJDbGFzcyA9IGRhdGEuYXBwZWFyQ2xhc3M7CiAgICB2YXIgYXBwZWFyVG9DbGFzcyA9IGRhdGEuYXBwZWFyVG9DbGFzczsKICAgIHZhciBhcHBlYXJBY3RpdmVDbGFzcyA9IGRhdGEuYXBwZWFyQWN0aXZlQ2xhc3M7CiAgICB2YXIgYmVmb3JlRW50ZXIgPSBkYXRhLmJlZm9yZUVudGVyOwogICAgdmFyIGVudGVyID0gZGF0YS5lbnRlcjsKICAgIHZhciBhZnRlckVudGVyID0gZGF0YS5hZnRlckVudGVyOwogICAgdmFyIGVudGVyQ2FuY2VsbGVkID0gZGF0YS5lbnRlckNhbmNlbGxlZDsKICAgIHZhciBiZWZvcmVBcHBlYXIgPSBkYXRhLmJlZm9yZUFwcGVhcjsKICAgIHZhciBhcHBlYXIgPSBkYXRhLmFwcGVhcjsKICAgIHZhciBhZnRlckFwcGVhciA9IGRhdGEuYWZ0ZXJBcHBlYXI7CiAgICB2YXIgYXBwZWFyQ2FuY2VsbGVkID0gZGF0YS5hcHBlYXJDYW5jZWxsZWQ7CiAgICB2YXIgZHVyYXRpb24gPSBkYXRhLmR1cmF0aW9uOwoKICAgIC8vIGFjdGl2ZUluc3RhbmNlIHdpbGwgYWx3YXlzIGJlIHRoZSA8dHJhbnNpdGlvbj4gY29tcG9uZW50IG1hbmFnaW5nIHRoaXMKICAgIC8vIHRyYW5zaXRpb24uIE9uZSBlZGdlIGNhc2UgdG8gY2hlY2sgaXMgd2hlbiB0aGUgPHRyYW5zaXRpb24+IGlzIHBsYWNlZAogICAgLy8gYXMgdGhlIHJvb3Qgbm9kZSBvZiBhIGNoaWxkIGNvbXBvbmVudC4gSW4gdGhhdCBjYXNlIHdlIG5lZWQgdG8gY2hlY2sKICAgIC8vIDx0cmFuc2l0aW9uPidzIHBhcmVudCBmb3IgYXBwZWFyIGNoZWNrLgogICAgdmFyIGNvbnRleHQgPSBhY3RpdmVJbnN0YW5jZTsKICAgIHZhciB0cmFuc2l0aW9uTm9kZSA9IGFjdGl2ZUluc3RhbmNlLiR2bm9kZTsKICAgIHdoaWxlICh0cmFuc2l0aW9uTm9kZSAmJiB0cmFuc2l0aW9uTm9kZS5wYXJlbnQpIHsKICAgICAgY29udGV4dCA9IHRyYW5zaXRpb25Ob2RlLmNvbnRleHQ7CiAgICAgIHRyYW5zaXRpb25Ob2RlID0gdHJhbnNpdGlvbk5vZGUucGFyZW50OwogICAgfQoKICAgIHZhciBpc0FwcGVhciA9ICFjb250ZXh0Ll9pc01vdW50ZWQgfHwgIXZub2RlLmlzUm9vdEluc2VydDsKCiAgICBpZiAoaXNBcHBlYXIgJiYgIWFwcGVhciAmJiBhcHBlYXIgIT09ICcnKSB7CiAgICAgIHJldHVybgogICAgfQoKICAgIHZhciBzdGFydENsYXNzID0gaXNBcHBlYXIgJiYgYXBwZWFyQ2xhc3MKICAgICAgPyBhcHBlYXJDbGFzcwogICAgICA6IGVudGVyQ2xhc3M7CiAgICB2YXIgYWN0aXZlQ2xhc3MgPSBpc0FwcGVhciAmJiBhcHBlYXJBY3RpdmVDbGFzcwogICAgICA/IGFwcGVhckFjdGl2ZUNsYXNzCiAgICAgIDogZW50ZXJBY3RpdmVDbGFzczsKICAgIHZhciB0b0NsYXNzID0gaXNBcHBlYXIgJiYgYXBwZWFyVG9DbGFzcwogICAgICA/IGFwcGVhclRvQ2xhc3MKICAgICAgOiBlbnRlclRvQ2xhc3M7CgogICAgdmFyIGJlZm9yZUVudGVySG9vayA9IGlzQXBwZWFyCiAgICAgID8gKGJlZm9yZUFwcGVhciB8fCBiZWZvcmVFbnRlcikKICAgICAgOiBiZWZvcmVFbnRlcjsKICAgIHZhciBlbnRlckhvb2sgPSBpc0FwcGVhcgogICAgICA/ICh0eXBlb2YgYXBwZWFyID09PSAnZnVuY3Rpb24nID8gYXBwZWFyIDogZW50ZXIpCiAgICAgIDogZW50ZXI7CiAgICB2YXIgYWZ0ZXJFbnRlckhvb2sgPSBpc0FwcGVhcgogICAgICA/IChhZnRlckFwcGVhciB8fCBhZnRlckVudGVyKQogICAgICA6IGFmdGVyRW50ZXI7CiAgICB2YXIgZW50ZXJDYW5jZWxsZWRIb29rID0gaXNBcHBlYXIKICAgICAgPyAoYXBwZWFyQ2FuY2VsbGVkIHx8IGVudGVyQ2FuY2VsbGVkKQogICAgICA6IGVudGVyQ2FuY2VsbGVkOwoKICAgIHZhciBleHBsaWNpdEVudGVyRHVyYXRpb24gPSB0b051bWJlcigKICAgICAgaXNPYmplY3QoZHVyYXRpb24pCiAgICAgICAgPyBkdXJhdGlvbi5lbnRlcgogICAgICAgIDogZHVyYXRpb24KICAgICk7CgogICAgaWYgKGV4cGxpY2l0RW50ZXJEdXJhdGlvbiAhPSBudWxsKSB7CiAgICAgIGNoZWNrRHVyYXRpb24oZXhwbGljaXRFbnRlckR1cmF0aW9uLCAnZW50ZXInLCB2bm9kZSk7CiAgICB9CgogICAgdmFyIGV4cGVjdHNDU1MgPSBjc3MgIT09IGZhbHNlICYmICFpc0lFOTsKICAgIHZhciB1c2VyV2FudHNDb250cm9sID0gZ2V0SG9va0FyZ3VtZW50c0xlbmd0aChlbnRlckhvb2spOwoKICAgIHZhciBjYiA9IGVsLl9lbnRlckNiID0gb25jZShmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChleHBlY3RzQ1NTKSB7CiAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCB0b0NsYXNzKTsKICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGFjdGl2ZUNsYXNzKTsKICAgICAgfQogICAgICBpZiAoY2IuY2FuY2VsbGVkKSB7CiAgICAgICAgaWYgKGV4cGVjdHNDU1MpIHsKICAgICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgc3RhcnRDbGFzcyk7CiAgICAgICAgfQogICAgICAgIGVudGVyQ2FuY2VsbGVkSG9vayAmJiBlbnRlckNhbmNlbGxlZEhvb2soZWwpOwogICAgICB9IGVsc2UgewogICAgICAgIGFmdGVyRW50ZXJIb29rICYmIGFmdGVyRW50ZXJIb29rKGVsKTsKICAgICAgfQogICAgICBlbC5fZW50ZXJDYiA9IG51bGw7CiAgICB9KTsKCiAgICBpZiAoIXZub2RlLmRhdGEuc2hvdykgewogICAgICAvLyByZW1vdmUgcGVuZGluZyBsZWF2ZSBlbGVtZW50IG9uIGVudGVyIGJ5IGluamVjdGluZyBhbiBpbnNlcnQgaG9vawogICAgICBtZXJnZVZOb2RlSG9vayh2bm9kZSwgJ2luc2VydCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgcGFyZW50ID0gZWwucGFyZW50Tm9kZTsKICAgICAgICB2YXIgcGVuZGluZ05vZGUgPSBwYXJlbnQgJiYgcGFyZW50Ll9wZW5kaW5nICYmIHBhcmVudC5fcGVuZGluZ1t2bm9kZS5rZXldOwogICAgICAgIGlmIChwZW5kaW5nTm9kZSAmJgogICAgICAgICAgcGVuZGluZ05vZGUudGFnID09PSB2bm9kZS50YWcgJiYKICAgICAgICAgIHBlbmRpbmdOb2RlLmVsbS5fbGVhdmVDYgogICAgICAgICkgewogICAgICAgICAgcGVuZGluZ05vZGUuZWxtLl9sZWF2ZUNiKCk7CiAgICAgICAgfQogICAgICAgIGVudGVySG9vayAmJiBlbnRlckhvb2soZWwsIGNiKTsKICAgICAgfSk7CiAgICB9CgogICAgLy8gc3RhcnQgZW50ZXIgdHJhbnNpdGlvbgogICAgYmVmb3JlRW50ZXJIb29rICYmIGJlZm9yZUVudGVySG9vayhlbCk7CiAgICBpZiAoZXhwZWN0c0NTUykgewogICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIHN0YXJ0Q2xhc3MpOwogICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGFjdGl2ZUNsYXNzKTsKICAgICAgbmV4dEZyYW1lKGZ1bmN0aW9uICgpIHsKICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIHN0YXJ0Q2xhc3MpOwogICAgICAgIGlmICghY2IuY2FuY2VsbGVkKSB7CiAgICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIHRvQ2xhc3MpOwogICAgICAgICAgaWYgKCF1c2VyV2FudHNDb250cm9sKSB7CiAgICAgICAgICAgIGlmIChpc1ZhbGlkRHVyYXRpb24oZXhwbGljaXRFbnRlckR1cmF0aW9uKSkgewogICAgICAgICAgICAgIHNldFRpbWVvdXQoY2IsIGV4cGxpY2l0RW50ZXJEdXJhdGlvbik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgd2hlblRyYW5zaXRpb25FbmRzKGVsLCB0eXBlLCBjYik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIGlmICh2bm9kZS5kYXRhLnNob3cpIHsKICAgICAgdG9nZ2xlRGlzcGxheSAmJiB0b2dnbGVEaXNwbGF5KCk7CiAgICAgIGVudGVySG9vayAmJiBlbnRlckhvb2soZWwsIGNiKTsKICAgIH0KCiAgICBpZiAoIWV4cGVjdHNDU1MgJiYgIXVzZXJXYW50c0NvbnRyb2wpIHsKICAgICAgY2IoKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGxlYXZlICh2bm9kZSwgcm0pIHsKICAgIHZhciBlbCA9IHZub2RlLmVsbTsKCiAgICAvLyBjYWxsIGVudGVyIGNhbGxiYWNrIG5vdwogICAgaWYgKGlzRGVmKGVsLl9lbnRlckNiKSkgewogICAgICBlbC5fZW50ZXJDYi5jYW5jZWxsZWQgPSB0cnVlOwogICAgICBlbC5fZW50ZXJDYigpOwogICAgfQoKICAgIHZhciBkYXRhID0gcmVzb2x2ZVRyYW5zaXRpb24odm5vZGUuZGF0YS50cmFuc2l0aW9uKTsKICAgIGlmIChpc1VuZGVmKGRhdGEpIHx8IGVsLm5vZGVUeXBlICE9PSAxKSB7CiAgICAgIHJldHVybiBybSgpCiAgICB9CgogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoaXNEZWYoZWwuX2xlYXZlQ2IpKSB7CiAgICAgIHJldHVybgogICAgfQoKICAgIHZhciBjc3MgPSBkYXRhLmNzczsKICAgIHZhciB0eXBlID0gZGF0YS50eXBlOwogICAgdmFyIGxlYXZlQ2xhc3MgPSBkYXRhLmxlYXZlQ2xhc3M7CiAgICB2YXIgbGVhdmVUb0NsYXNzID0gZGF0YS5sZWF2ZVRvQ2xhc3M7CiAgICB2YXIgbGVhdmVBY3RpdmVDbGFzcyA9IGRhdGEubGVhdmVBY3RpdmVDbGFzczsKICAgIHZhciBiZWZvcmVMZWF2ZSA9IGRhdGEuYmVmb3JlTGVhdmU7CiAgICB2YXIgbGVhdmUgPSBkYXRhLmxlYXZlOwogICAgdmFyIGFmdGVyTGVhdmUgPSBkYXRhLmFmdGVyTGVhdmU7CiAgICB2YXIgbGVhdmVDYW5jZWxsZWQgPSBkYXRhLmxlYXZlQ2FuY2VsbGVkOwogICAgdmFyIGRlbGF5TGVhdmUgPSBkYXRhLmRlbGF5TGVhdmU7CiAgICB2YXIgZHVyYXRpb24gPSBkYXRhLmR1cmF0aW9uOwoKICAgIHZhciBleHBlY3RzQ1NTID0gY3NzICE9PSBmYWxzZSAmJiAhaXNJRTk7CiAgICB2YXIgdXNlcldhbnRzQ29udHJvbCA9IGdldEhvb2tBcmd1bWVudHNMZW5ndGgobGVhdmUpOwoKICAgIHZhciBleHBsaWNpdExlYXZlRHVyYXRpb24gPSB0b051bWJlcigKICAgICAgaXNPYmplY3QoZHVyYXRpb24pCiAgICAgICAgPyBkdXJhdGlvbi5sZWF2ZQogICAgICAgIDogZHVyYXRpb24KICAgICk7CgogICAgaWYgKGlzRGVmKGV4cGxpY2l0TGVhdmVEdXJhdGlvbikpIHsKICAgICAgY2hlY2tEdXJhdGlvbihleHBsaWNpdExlYXZlRHVyYXRpb24sICdsZWF2ZScsIHZub2RlKTsKICAgIH0KCiAgICB2YXIgY2IgPSBlbC5fbGVhdmVDYiA9IG9uY2UoZnVuY3Rpb24gKCkgewogICAgICBpZiAoZWwucGFyZW50Tm9kZSAmJiBlbC5wYXJlbnROb2RlLl9wZW5kaW5nKSB7CiAgICAgICAgZWwucGFyZW50Tm9kZS5fcGVuZGluZ1t2bm9kZS5rZXldID0gbnVsbDsKICAgICAgfQogICAgICBpZiAoZXhwZWN0c0NTUykgewogICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVUb0NsYXNzKTsKICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlQWN0aXZlQ2xhc3MpOwogICAgICB9CiAgICAgIGlmIChjYi5jYW5jZWxsZWQpIHsKICAgICAgICBpZiAoZXhwZWN0c0NTUykgewogICAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUNsYXNzKTsKICAgICAgICB9CiAgICAgICAgbGVhdmVDYW5jZWxsZWQgJiYgbGVhdmVDYW5jZWxsZWQoZWwpOwogICAgICB9IGVsc2UgewogICAgICAgIHJtKCk7CiAgICAgICAgYWZ0ZXJMZWF2ZSAmJiBhZnRlckxlYXZlKGVsKTsKICAgICAgfQogICAgICBlbC5fbGVhdmVDYiA9IG51bGw7CiAgICB9KTsKCiAgICBpZiAoZGVsYXlMZWF2ZSkgewogICAgICBkZWxheUxlYXZlKHBlcmZvcm1MZWF2ZSk7CiAgICB9IGVsc2UgewogICAgICBwZXJmb3JtTGVhdmUoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwZXJmb3JtTGVhdmUgKCkgewogICAgICAvLyB0aGUgZGVsYXllZCBsZWF2ZSBtYXkgaGF2ZSBhbHJlYWR5IGJlZW4gY2FuY2VsbGVkCiAgICAgIGlmIChjYi5jYW5jZWxsZWQpIHsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICAvLyByZWNvcmQgbGVhdmluZyBlbGVtZW50CiAgICAgIGlmICghdm5vZGUuZGF0YS5zaG93ICYmIGVsLnBhcmVudE5vZGUpIHsKICAgICAgICAoZWwucGFyZW50Tm9kZS5fcGVuZGluZyB8fCAoZWwucGFyZW50Tm9kZS5fcGVuZGluZyA9IHt9KSlbKHZub2RlLmtleSldID0gdm5vZGU7CiAgICAgIH0KICAgICAgYmVmb3JlTGVhdmUgJiYgYmVmb3JlTGVhdmUoZWwpOwogICAgICBpZiAoZXhwZWN0c0NTUykgewogICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVDbGFzcyk7CiAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUFjdGl2ZUNsYXNzKTsKICAgICAgICBuZXh0RnJhbWUoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUNsYXNzKTsKICAgICAgICAgIGlmICghY2IuY2FuY2VsbGVkKSB7CiAgICAgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVUb0NsYXNzKTsKICAgICAgICAgICAgaWYgKCF1c2VyV2FudHNDb250cm9sKSB7CiAgICAgICAgICAgICAgaWYgKGlzVmFsaWREdXJhdGlvbihleHBsaWNpdExlYXZlRHVyYXRpb24pKSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGNiLCBleHBsaWNpdExlYXZlRHVyYXRpb24pOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB3aGVuVHJhbnNpdGlvbkVuZHMoZWwsIHR5cGUsIGNiKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgICBsZWF2ZSAmJiBsZWF2ZShlbCwgY2IpOwogICAgICBpZiAoIWV4cGVjdHNDU1MgJiYgIXVzZXJXYW50c0NvbnRyb2wpIHsKICAgICAgICBjYigpOwogICAgICB9CiAgICB9CiAgfQoKICAvLyBvbmx5IHVzZWQgaW4gZGV2IG1vZGUKICBmdW5jdGlvbiBjaGVja0R1cmF0aW9uICh2YWwsIG5hbWUsIHZub2RlKSB7CiAgICBpZiAodHlwZW9mIHZhbCAhPT0gJ251bWJlcicpIHsKICAgICAgd2FybigKICAgICAgICAiPHRyYW5zaXRpb24+IGV4cGxpY2l0ICIgKyBuYW1lICsgIiBkdXJhdGlvbiBpcyBub3QgYSB2YWxpZCBudW1iZXIgLSAiICsKICAgICAgICAiZ290ICIgKyAoSlNPTi5zdHJpbmdpZnkodmFsKSkgKyAiLiIsCiAgICAgICAgdm5vZGUuY29udGV4dAogICAgICApOwogICAgfSBlbHNlIGlmIChpc05hTih2YWwpKSB7CiAgICAgIHdhcm4oCiAgICAgICAgIjx0cmFuc2l0aW9uPiBleHBsaWNpdCAiICsgbmFtZSArICIgZHVyYXRpb24gaXMgTmFOIC0gIiArCiAgICAgICAgJ3RoZSBkdXJhdGlvbiBleHByZXNzaW9uIG1pZ2h0IGJlIGluY29ycmVjdC4nLAogICAgICAgIHZub2RlLmNvbnRleHQKICAgICAgKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGlzVmFsaWREdXJhdGlvbiAodmFsKSB7CiAgICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ251bWJlcicgJiYgIWlzTmFOKHZhbCkKICB9CgogIC8qKgogICAqIE5vcm1hbGl6ZSBhIHRyYW5zaXRpb24gaG9vaydzIGFyZ3VtZW50IGxlbmd0aC4gVGhlIGhvb2sgbWF5IGJlOgogICAqIC0gYSBtZXJnZWQgaG9vayAoaW52b2tlcikgd2l0aCB0aGUgb3JpZ2luYWwgaW4gLmZucwogICAqIC0gYSB3cmFwcGVkIGNvbXBvbmVudCBtZXRob2QgKGNoZWNrIC5fbGVuZ3RoKQogICAqIC0gYSBwbGFpbiBmdW5jdGlvbiAoLmxlbmd0aCkKICAgKi8KICBmdW5jdGlvbiBnZXRIb29rQXJndW1lbnRzTGVuZ3RoIChmbikgewogICAgaWYgKGlzVW5kZWYoZm4pKSB7CiAgICAgIHJldHVybiBmYWxzZQogICAgfQogICAgdmFyIGludm9rZXJGbnMgPSBmbi5mbnM7CiAgICBpZiAoaXNEZWYoaW52b2tlckZucykpIHsKICAgICAgLy8gaW52b2tlcgogICAgICByZXR1cm4gZ2V0SG9va0FyZ3VtZW50c0xlbmd0aCgKICAgICAgICBBcnJheS5pc0FycmF5KGludm9rZXJGbnMpCiAgICAgICAgICA/IGludm9rZXJGbnNbMF0KICAgICAgICAgIDogaW52b2tlckZucwogICAgICApCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gKGZuLl9sZW5ndGggfHwgZm4ubGVuZ3RoKSA+IDEKICAgIH0KICB9CgogIGZ1bmN0aW9uIF9lbnRlciAoXywgdm5vZGUpIHsKICAgIGlmICh2bm9kZS5kYXRhLnNob3cgIT09IHRydWUpIHsKICAgICAgZW50ZXIodm5vZGUpOwogICAgfQogIH0KCiAgdmFyIHRyYW5zaXRpb24gPSBpbkJyb3dzZXIgPyB7CiAgICBjcmVhdGU6IF9lbnRlciwKICAgIGFjdGl2YXRlOiBfZW50ZXIsCiAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSQkMSAodm5vZGUsIHJtKSB7CiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovCiAgICAgIGlmICh2bm9kZS5kYXRhLnNob3cgIT09IHRydWUpIHsKICAgICAgICBsZWF2ZSh2bm9kZSwgcm0pOwogICAgICB9IGVsc2UgewogICAgICAgIHJtKCk7CiAgICAgIH0KICAgIH0KICB9IDoge307CgogIHZhciBwbGF0Zm9ybU1vZHVsZXMgPSBbCiAgICBhdHRycywKICAgIGtsYXNzLAogICAgZXZlbnRzLAogICAgZG9tUHJvcHMsCiAgICBzdHlsZSwKICAgIHRyYW5zaXRpb24KICBdOwoKICAvKiAgKi8KCiAgLy8gdGhlIGRpcmVjdGl2ZSBtb2R1bGUgc2hvdWxkIGJlIGFwcGxpZWQgbGFzdCwgYWZ0ZXIgYWxsCiAgLy8gYnVpbHQtaW4gbW9kdWxlcyBoYXZlIGJlZW4gYXBwbGllZC4KICB2YXIgbW9kdWxlcyA9IHBsYXRmb3JtTW9kdWxlcy5jb25jYXQoYmFzZU1vZHVsZXMpOwoKICB2YXIgcGF0Y2ggPSBjcmVhdGVQYXRjaEZ1bmN0aW9uKHsgbm9kZU9wczogbm9kZU9wcywgbW9kdWxlczogbW9kdWxlcyB9KTsKCiAgLyoqCiAgICogTm90IHR5cGUgY2hlY2tpbmcgdGhpcyBmaWxlIGJlY2F1c2UgZmxvdyBkb2Vzbid0IGxpa2UgYXR0YWNoaW5nCiAgICogcHJvcGVydGllcyB0byBFbGVtZW50cy4KICAgKi8KCiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgaWYgKGlzSUU5KSB7CiAgICAvLyBodHRwOi8vd3d3Lm1hdHRzNDExLmNvbS9wb3N0L2ludGVybmV0LWV4cGxvcmVyLTktb25pbnB1dC8KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3NlbGVjdGlvbmNoYW5nZScsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGVsID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDsKICAgICAgaWYgKGVsICYmIGVsLnZtb2RlbCkgewogICAgICAgIHRyaWdnZXIoZWwsICdpbnB1dCcpOwogICAgICB9CiAgICB9KTsKICB9CgogIHZhciBkaXJlY3RpdmUgPSB7CiAgICBpbnNlcnRlZDogZnVuY3Rpb24gaW5zZXJ0ZWQgKGVsLCBiaW5kaW5nLCB2bm9kZSwgb2xkVm5vZGUpIHsKICAgICAgaWYgKHZub2RlLnRhZyA9PT0gJ3NlbGVjdCcpIHsKICAgICAgICAvLyAjNjkwMwogICAgICAgIGlmIChvbGRWbm9kZS5lbG0gJiYgIW9sZFZub2RlLmVsbS5fdk9wdGlvbnMpIHsKICAgICAgICAgIG1lcmdlVk5vZGVIb29rKHZub2RlLCAncG9zdHBhdGNoJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBkaXJlY3RpdmUuY29tcG9uZW50VXBkYXRlZChlbCwgYmluZGluZywgdm5vZGUpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNldFNlbGVjdGVkKGVsLCBiaW5kaW5nLCB2bm9kZS5jb250ZXh0KTsKICAgICAgICB9CiAgICAgICAgZWwuX3ZPcHRpb25zID0gW10ubWFwLmNhbGwoZWwub3B0aW9ucywgZ2V0VmFsdWUpOwogICAgICB9IGVsc2UgaWYgKHZub2RlLnRhZyA9PT0gJ3RleHRhcmVhJyB8fCBpc1RleHRJbnB1dFR5cGUoZWwudHlwZSkpIHsKICAgICAgICBlbC5fdk1vZGlmaWVycyA9IGJpbmRpbmcubW9kaWZpZXJzOwogICAgICAgIGlmICghYmluZGluZy5tb2RpZmllcnMubGF6eSkgewogICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY29tcG9zaXRpb25zdGFydCcsIG9uQ29tcG9zaXRpb25TdGFydCk7CiAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjb21wb3NpdGlvbmVuZCcsIG9uQ29tcG9zaXRpb25FbmQpOwogICAgICAgICAgLy8gU2FmYXJpIDwgMTAuMiAmIFVJV2ViVmlldyBkb2Vzbid0IGZpcmUgY29tcG9zaXRpb25lbmQgd2hlbgogICAgICAgICAgLy8gc3dpdGNoaW5nIGZvY3VzIGJlZm9yZSBjb25maXJtaW5nIGNvbXBvc2l0aW9uIGNob2ljZQogICAgICAgICAgLy8gdGhpcyBhbHNvIGZpeGVzIHRoZSBpc3N1ZSB3aGVyZSBzb21lIGJyb3dzZXJzIGUuZy4gaU9TIENocm9tZQogICAgICAgICAgLy8gZmlyZXMgImNoYW5nZSIgaW5zdGVhZCBvZiAiaW5wdXQiIG9uIGF1dG9jb21wbGV0ZS4KICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uQ29tcG9zaXRpb25FbmQpOwogICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICAgICAgICBpZiAoaXNJRTkpIHsKICAgICAgICAgICAgZWwudm1vZGVsID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgY29tcG9uZW50VXBkYXRlZDogZnVuY3Rpb24gY29tcG9uZW50VXBkYXRlZCAoZWwsIGJpbmRpbmcsIHZub2RlKSB7CiAgICAgIGlmICh2bm9kZS50YWcgPT09ICdzZWxlY3QnKSB7CiAgICAgICAgc2V0U2VsZWN0ZWQoZWwsIGJpbmRpbmcsIHZub2RlLmNvbnRleHQpOwogICAgICAgIC8vIGluIGNhc2UgdGhlIG9wdGlvbnMgcmVuZGVyZWQgYnkgdi1mb3IgaGF2ZSBjaGFuZ2VkLAogICAgICAgIC8vIGl0J3MgcG9zc2libGUgdGhhdCB0aGUgdmFsdWUgaXMgb3V0LW9mLXN5bmMgd2l0aCB0aGUgcmVuZGVyZWQgb3B0aW9ucy4KICAgICAgICAvLyBkZXRlY3Qgc3VjaCBjYXNlcyBhbmQgZmlsdGVyIG91dCB2YWx1ZXMgdGhhdCBubyBsb25nZXIgaGFzIGEgbWF0Y2hpbmcKICAgICAgICAvLyBvcHRpb24gaW4gdGhlIERPTS4KICAgICAgICB2YXIgcHJldk9wdGlvbnMgPSBlbC5fdk9wdGlvbnM7CiAgICAgICAgdmFyIGN1ck9wdGlvbnMgPSBlbC5fdk9wdGlvbnMgPSBbXS5tYXAuY2FsbChlbC5vcHRpb25zLCBnZXRWYWx1ZSk7CiAgICAgICAgaWYgKGN1ck9wdGlvbnMuc29tZShmdW5jdGlvbiAobywgaSkgeyByZXR1cm4gIWxvb3NlRXF1YWwobywgcHJldk9wdGlvbnNbaV0pOyB9KSkgewogICAgICAgICAgLy8gdHJpZ2dlciBjaGFuZ2UgZXZlbnQgaWYKICAgICAgICAgIC8vIG5vIG1hdGNoaW5nIG9wdGlvbiBmb3VuZCBmb3IgYXQgbGVhc3Qgb25lIHZhbHVlCiAgICAgICAgICB2YXIgbmVlZFJlc2V0ID0gZWwubXVsdGlwbGUKICAgICAgICAgICAgPyBiaW5kaW5nLnZhbHVlLnNvbWUoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIGhhc05vTWF0Y2hpbmdPcHRpb24odiwgY3VyT3B0aW9ucyk7IH0pCiAgICAgICAgICAgIDogYmluZGluZy52YWx1ZSAhPT0gYmluZGluZy5vbGRWYWx1ZSAmJiBoYXNOb01hdGNoaW5nT3B0aW9uKGJpbmRpbmcudmFsdWUsIGN1ck9wdGlvbnMpOwogICAgICAgICAgaWYgKG5lZWRSZXNldCkgewogICAgICAgICAgICB0cmlnZ2VyKGVsLCAnY2hhbmdlJyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgZnVuY3Rpb24gc2V0U2VsZWN0ZWQgKGVsLCBiaW5kaW5nLCB2bSkgewogICAgYWN0dWFsbHlTZXRTZWxlY3RlZChlbCwgYmluZGluZywgdm0pOwogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoaXNJRSB8fCBpc0VkZ2UpIHsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgYWN0dWFsbHlTZXRTZWxlY3RlZChlbCwgYmluZGluZywgdm0pOwogICAgICB9LCAwKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGFjdHVhbGx5U2V0U2VsZWN0ZWQgKGVsLCBiaW5kaW5nLCB2bSkgewogICAgdmFyIHZhbHVlID0gYmluZGluZy52YWx1ZTsKICAgIHZhciBpc011bHRpcGxlID0gZWwubXVsdGlwbGU7CiAgICBpZiAoaXNNdWx0aXBsZSAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgICAgd2FybigKICAgICAgICAiPHNlbGVjdCBtdWx0aXBsZSB2LW1vZGVsPVwiIiArIChiaW5kaW5nLmV4cHJlc3Npb24pICsgIlwiPiAiICsKICAgICAgICAiZXhwZWN0cyBhbiBBcnJheSB2YWx1ZSBmb3IgaXRzIGJpbmRpbmcsIGJ1dCBnb3QgIiArIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLnNsaWNlKDgsIC0xKSksCiAgICAgICAgdm0KICAgICAgKTsKICAgICAgcmV0dXJuCiAgICB9CiAgICB2YXIgc2VsZWN0ZWQsIG9wdGlvbjsKICAgIGZvciAodmFyIGkgPSAwLCBsID0gZWwub3B0aW9ucy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgb3B0aW9uID0gZWwub3B0aW9uc1tpXTsKICAgICAgaWYgKGlzTXVsdGlwbGUpIHsKICAgICAgICBzZWxlY3RlZCA9IGxvb3NlSW5kZXhPZih2YWx1ZSwgZ2V0VmFsdWUob3B0aW9uKSkgPiAtMTsKICAgICAgICBpZiAob3B0aW9uLnNlbGVjdGVkICE9PSBzZWxlY3RlZCkgewogICAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gc2VsZWN0ZWQ7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChsb29zZUVxdWFsKGdldFZhbHVlKG9wdGlvbiksIHZhbHVlKSkgewogICAgICAgICAgaWYgKGVsLnNlbGVjdGVkSW5kZXggIT09IGkpIHsKICAgICAgICAgICAgZWwuc2VsZWN0ZWRJbmRleCA9IGk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGlmICghaXNNdWx0aXBsZSkgewogICAgICBlbC5zZWxlY3RlZEluZGV4ID0gLTE7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBoYXNOb01hdGNoaW5nT3B0aW9uICh2YWx1ZSwgb3B0aW9ucykgewogICAgcmV0dXJuIG9wdGlvbnMuZXZlcnkoZnVuY3Rpb24gKG8pIHsgcmV0dXJuICFsb29zZUVxdWFsKG8sIHZhbHVlKTsgfSkKICB9CgogIGZ1bmN0aW9uIGdldFZhbHVlIChvcHRpb24pIHsKICAgIHJldHVybiAnX3ZhbHVlJyBpbiBvcHRpb24KICAgICAgPyBvcHRpb24uX3ZhbHVlCiAgICAgIDogb3B0aW9uLnZhbHVlCiAgfQoKICBmdW5jdGlvbiBvbkNvbXBvc2l0aW9uU3RhcnQgKGUpIHsKICAgIGUudGFyZ2V0LmNvbXBvc2luZyA9IHRydWU7CiAgfQoKICBmdW5jdGlvbiBvbkNvbXBvc2l0aW9uRW5kIChlKSB7CiAgICAvLyBwcmV2ZW50IHRyaWdnZXJpbmcgYW4gaW5wdXQgZXZlbnQgZm9yIG5vIHJlYXNvbgogICAgaWYgKCFlLnRhcmdldC5jb21wb3NpbmcpIHsgcmV0dXJuIH0KICAgIGUudGFyZ2V0LmNvbXBvc2luZyA9IGZhbHNlOwogICAgdHJpZ2dlcihlLnRhcmdldCwgJ2lucHV0Jyk7CiAgfQoKICBmdW5jdGlvbiB0cmlnZ2VyIChlbCwgdHlwZSkgewogICAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnSFRNTEV2ZW50cycpOwogICAgZS5pbml0RXZlbnQodHlwZSwgdHJ1ZSwgdHJ1ZSk7CiAgICBlbC5kaXNwYXRjaEV2ZW50KGUpOwogIH0KCiAgLyogICovCgogIC8vIHJlY3Vyc2l2ZWx5IHNlYXJjaCBmb3IgcG9zc2libGUgdHJhbnNpdGlvbiBkZWZpbmVkIGluc2lkZSB0aGUgY29tcG9uZW50IHJvb3QKICBmdW5jdGlvbiBsb2NhdGVOb2RlICh2bm9kZSkgewogICAgcmV0dXJuIHZub2RlLmNvbXBvbmVudEluc3RhbmNlICYmICghdm5vZGUuZGF0YSB8fCAhdm5vZGUuZGF0YS50cmFuc2l0aW9uKQogICAgICA/IGxvY2F0ZU5vZGUodm5vZGUuY29tcG9uZW50SW5zdGFuY2UuX3Zub2RlKQogICAgICA6IHZub2RlCiAgfQoKICB2YXIgc2hvdyA9IHsKICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQgKGVsLCByZWYsIHZub2RlKSB7CiAgICAgIHZhciB2YWx1ZSA9IHJlZi52YWx1ZTsKCiAgICAgIHZub2RlID0gbG9jYXRlTm9kZSh2bm9kZSk7CiAgICAgIHZhciB0cmFuc2l0aW9uJCQxID0gdm5vZGUuZGF0YSAmJiB2bm9kZS5kYXRhLnRyYW5zaXRpb247CiAgICAgIHZhciBvcmlnaW5hbERpc3BsYXkgPSBlbC5fX3ZPcmlnaW5hbERpc3BsYXkgPQogICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJyA/ICcnIDogZWwuc3R5bGUuZGlzcGxheTsKICAgICAgaWYgKHZhbHVlICYmIHRyYW5zaXRpb24kJDEpIHsKICAgICAgICB2bm9kZS5kYXRhLnNob3cgPSB0cnVlOwogICAgICAgIGVudGVyKHZub2RlLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gb3JpZ2luYWxEaXNwbGF5OwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSB2YWx1ZSA/IG9yaWdpbmFsRGlzcGxheSA6ICdub25lJzsKICAgICAgfQogICAgfSwKCiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSAoZWwsIHJlZiwgdm5vZGUpIHsKICAgICAgdmFyIHZhbHVlID0gcmVmLnZhbHVlOwogICAgICB2YXIgb2xkVmFsdWUgPSByZWYub2xkVmFsdWU7CgogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgaWYgKCF2YWx1ZSA9PT0gIW9sZFZhbHVlKSB7IHJldHVybiB9CiAgICAgIHZub2RlID0gbG9jYXRlTm9kZSh2bm9kZSk7CiAgICAgIHZhciB0cmFuc2l0aW9uJCQxID0gdm5vZGUuZGF0YSAmJiB2bm9kZS5kYXRhLnRyYW5zaXRpb247CiAgICAgIGlmICh0cmFuc2l0aW9uJCQxKSB7CiAgICAgICAgdm5vZGUuZGF0YS5zaG93ID0gdHJ1ZTsKICAgICAgICBpZiAodmFsdWUpIHsKICAgICAgICAgIGVudGVyKHZub2RlLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSBlbC5fX3ZPcmlnaW5hbERpc3BsYXk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbGVhdmUodm5vZGUsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gdmFsdWUgPyBlbC5fX3ZPcmlnaW5hbERpc3BsYXkgOiAnbm9uZSc7CiAgICAgIH0KICAgIH0sCgogICAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQgKAogICAgICBlbCwKICAgICAgYmluZGluZywKICAgICAgdm5vZGUsCiAgICAgIG9sZFZub2RlLAogICAgICBpc0Rlc3Ryb3kKICAgICkgewogICAgICBpZiAoIWlzRGVzdHJveSkgewogICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSBlbC5fX3ZPcmlnaW5hbERpc3BsYXk7CiAgICAgIH0KICAgIH0KICB9OwoKICB2YXIgcGxhdGZvcm1EaXJlY3RpdmVzID0gewogICAgbW9kZWw6IGRpcmVjdGl2ZSwKICAgIHNob3c6IHNob3cKICB9OwoKICAvKiAgKi8KCiAgdmFyIHRyYW5zaXRpb25Qcm9wcyA9IHsKICAgIG5hbWU6IFN0cmluZywKICAgIGFwcGVhcjogQm9vbGVhbiwKICAgIGNzczogQm9vbGVhbiwKICAgIG1vZGU6IFN0cmluZywKICAgIHR5cGU6IFN0cmluZywKICAgIGVudGVyQ2xhc3M6IFN0cmluZywKICAgIGxlYXZlQ2xhc3M6IFN0cmluZywKICAgIGVudGVyVG9DbGFzczogU3RyaW5nLAogICAgbGVhdmVUb0NsYXNzOiBTdHJpbmcsCiAgICBlbnRlckFjdGl2ZUNsYXNzOiBTdHJpbmcsCiAgICBsZWF2ZUFjdGl2ZUNsYXNzOiBTdHJpbmcsCiAgICBhcHBlYXJDbGFzczogU3RyaW5nLAogICAgYXBwZWFyQWN0aXZlQ2xhc3M6IFN0cmluZywKICAgIGFwcGVhclRvQ2xhc3M6IFN0cmluZywKICAgIGR1cmF0aW9uOiBbTnVtYmVyLCBTdHJpbmcsIE9iamVjdF0KICB9OwoKICAvLyBpbiBjYXNlIHRoZSBjaGlsZCBpcyBhbHNvIGFuIGFic3RyYWN0IGNvbXBvbmVudCwgZS5nLiA8a2VlcC1hbGl2ZT4KICAvLyB3ZSB3YW50IHRvIHJlY3Vyc2l2ZWx5IHJldHJpZXZlIHRoZSByZWFsIGNvbXBvbmVudCB0byBiZSByZW5kZXJlZAogIGZ1bmN0aW9uIGdldFJlYWxDaGlsZCAodm5vZGUpIHsKICAgIHZhciBjb21wT3B0aW9ucyA9IHZub2RlICYmIHZub2RlLmNvbXBvbmVudE9wdGlvbnM7CiAgICBpZiAoY29tcE9wdGlvbnMgJiYgY29tcE9wdGlvbnMuQ3Rvci5vcHRpb25zLmFic3RyYWN0KSB7CiAgICAgIHJldHVybiBnZXRSZWFsQ2hpbGQoZ2V0Rmlyc3RDb21wb25lbnRDaGlsZChjb21wT3B0aW9ucy5jaGlsZHJlbikpCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gdm5vZGUKICAgIH0KICB9CgogIGZ1bmN0aW9uIGV4dHJhY3RUcmFuc2l0aW9uRGF0YSAoY29tcCkgewogICAgdmFyIGRhdGEgPSB7fTsKICAgIHZhciBvcHRpb25zID0gY29tcC4kb3B0aW9uczsKICAgIC8vIHByb3BzCiAgICBmb3IgKHZhciBrZXkgaW4gb3B0aW9ucy5wcm9wc0RhdGEpIHsKICAgICAgZGF0YVtrZXldID0gY29tcFtrZXldOwogICAgfQogICAgLy8gZXZlbnRzLgogICAgLy8gZXh0cmFjdCBsaXN0ZW5lcnMgYW5kIHBhc3MgdGhlbSBkaXJlY3RseSB0byB0aGUgdHJhbnNpdGlvbiBtZXRob2RzCiAgICB2YXIgbGlzdGVuZXJzID0gb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzOwogICAgZm9yICh2YXIga2V5JDEgaW4gbGlzdGVuZXJzKSB7CiAgICAgIGRhdGFbY2FtZWxpemUoa2V5JDEpXSA9IGxpc3RlbmVyc1trZXkkMV07CiAgICB9CiAgICByZXR1cm4gZGF0YQogIH0KCiAgZnVuY3Rpb24gcGxhY2Vob2xkZXIgKGgsIHJhd0NoaWxkKSB7CiAgICBpZiAoL1xkLWtlZXAtYWxpdmUkLy50ZXN0KHJhd0NoaWxkLnRhZykpIHsKICAgICAgcmV0dXJuIGgoJ2tlZXAtYWxpdmUnLCB7CiAgICAgICAgcHJvcHM6IHJhd0NoaWxkLmNvbXBvbmVudE9wdGlvbnMucHJvcHNEYXRhCiAgICAgIH0pCiAgICB9CiAgfQoKICBmdW5jdGlvbiBoYXNQYXJlbnRUcmFuc2l0aW9uICh2bm9kZSkgewogICAgd2hpbGUgKCh2bm9kZSA9IHZub2RlLnBhcmVudCkpIHsKICAgICAgaWYgKHZub2RlLmRhdGEudHJhbnNpdGlvbikgewogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIGlzU2FtZUNoaWxkIChjaGlsZCwgb2xkQ2hpbGQpIHsKICAgIHJldHVybiBvbGRDaGlsZC5rZXkgPT09IGNoaWxkLmtleSAmJiBvbGRDaGlsZC50YWcgPT09IGNoaWxkLnRhZwogIH0KCiAgdmFyIGlzTm90VGV4dE5vZGUgPSBmdW5jdGlvbiAoYykgeyByZXR1cm4gYy50YWcgfHwgaXNBc3luY1BsYWNlaG9sZGVyKGMpOyB9OwoKICB2YXIgaXNWU2hvd0RpcmVjdGl2ZSA9IGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLm5hbWUgPT09ICdzaG93JzsgfTsKCiAgdmFyIFRyYW5zaXRpb24gPSB7CiAgICBuYW1lOiAndHJhbnNpdGlvbicsCiAgICBwcm9wczogdHJhbnNpdGlvblByb3BzLAogICAgYWJzdHJhY3Q6IHRydWUsCgogICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIgKGgpIHsKICAgICAgdmFyIHRoaXMkMSA9IHRoaXM7CgogICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLiRzbG90cy5kZWZhdWx0OwogICAgICBpZiAoIWNoaWxkcmVuKSB7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIC8vIGZpbHRlciBvdXQgdGV4dCBub2RlcyAocG9zc2libGUgd2hpdGVzcGFjZXMpCiAgICAgIGNoaWxkcmVuID0gY2hpbGRyZW4uZmlsdGVyKGlzTm90VGV4dE5vZGUpOwogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgaWYgKCFjaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgICByZXR1cm4KICAgICAgfQoKICAgICAgLy8gd2FybiBtdWx0aXBsZSBlbGVtZW50cwogICAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID4gMSkgewogICAgICAgIHdhcm4oCiAgICAgICAgICAnPHRyYW5zaXRpb24+IGNhbiBvbmx5IGJlIHVzZWQgb24gYSBzaW5nbGUgZWxlbWVudC4gVXNlICcgKwogICAgICAgICAgJzx0cmFuc2l0aW9uLWdyb3VwPiBmb3IgbGlzdHMuJywKICAgICAgICAgIHRoaXMuJHBhcmVudAogICAgICAgICk7CiAgICAgIH0KCiAgICAgIHZhciBtb2RlID0gdGhpcy5tb2RlOwoKICAgICAgLy8gd2FybiBpbnZhbGlkIG1vZGUKICAgICAgaWYgKG1vZGUgJiYgbW9kZSAhPT0gJ2luLW91dCcgJiYgbW9kZSAhPT0gJ291dC1pbicKICAgICAgKSB7CiAgICAgICAgd2FybigKICAgICAgICAgICdpbnZhbGlkIDx0cmFuc2l0aW9uPiBtb2RlOiAnICsgbW9kZSwKICAgICAgICAgIHRoaXMuJHBhcmVudAogICAgICAgICk7CiAgICAgIH0KCiAgICAgIHZhciByYXdDaGlsZCA9IGNoaWxkcmVuWzBdOwoKICAgICAgLy8gaWYgdGhpcyBpcyBhIGNvbXBvbmVudCByb290IG5vZGUgYW5kIHRoZSBjb21wb25lbnQncwogICAgICAvLyBwYXJlbnQgY29udGFpbmVyIG5vZGUgYWxzbyBoYXMgdHJhbnNpdGlvbiwgc2tpcC4KICAgICAgaWYgKGhhc1BhcmVudFRyYW5zaXRpb24odGhpcy4kdm5vZGUpKSB7CiAgICAgICAgcmV0dXJuIHJhd0NoaWxkCiAgICAgIH0KCiAgICAgIC8vIGFwcGx5IHRyYW5zaXRpb24gZGF0YSB0byBjaGlsZAogICAgICAvLyB1c2UgZ2V0UmVhbENoaWxkKCkgdG8gaWdub3JlIGFic3RyYWN0IGNvbXBvbmVudHMgZS5nLiBrZWVwLWFsaXZlCiAgICAgIHZhciBjaGlsZCA9IGdldFJlYWxDaGlsZChyYXdDaGlsZCk7CiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgICBpZiAoIWNoaWxkKSB7CiAgICAgICAgcmV0dXJuIHJhd0NoaWxkCiAgICAgIH0KCiAgICAgIGlmICh0aGlzLl9sZWF2aW5nKSB7CiAgICAgICAgcmV0dXJuIHBsYWNlaG9sZGVyKGgsIHJhd0NoaWxkKQogICAgICB9CgogICAgICAvLyBlbnN1cmUgYSBrZXkgdGhhdCBpcyB1bmlxdWUgdG8gdGhlIHZub2RlIHR5cGUgYW5kIHRvIHRoaXMgdHJhbnNpdGlvbgogICAgICAvLyBjb21wb25lbnQgaW5zdGFuY2UuIFRoaXMga2V5IHdpbGwgYmUgdXNlZCB0byByZW1vdmUgcGVuZGluZyBsZWF2aW5nIG5vZGVzCiAgICAgIC8vIGR1cmluZyBlbnRlcmluZy4KICAgICAgdmFyIGlkID0gIl9fdHJhbnNpdGlvbi0iICsgKHRoaXMuX3VpZCkgKyAiLSI7CiAgICAgIGNoaWxkLmtleSA9IGNoaWxkLmtleSA9PSBudWxsCiAgICAgICAgPyBjaGlsZC5pc0NvbW1lbnQKICAgICAgICAgID8gaWQgKyAnY29tbWVudCcKICAgICAgICAgIDogaWQgKyBjaGlsZC50YWcKICAgICAgICA6IGlzUHJpbWl0aXZlKGNoaWxkLmtleSkKICAgICAgICAgID8gKFN0cmluZyhjaGlsZC5rZXkpLmluZGV4T2YoaWQpID09PSAwID8gY2hpbGQua2V5IDogaWQgKyBjaGlsZC5rZXkpCiAgICAgICAgICA6IGNoaWxkLmtleTsKCiAgICAgIHZhciBkYXRhID0gKGNoaWxkLmRhdGEgfHwgKGNoaWxkLmRhdGEgPSB7fSkpLnRyYW5zaXRpb24gPSBleHRyYWN0VHJhbnNpdGlvbkRhdGEodGhpcyk7CiAgICAgIHZhciBvbGRSYXdDaGlsZCA9IHRoaXMuX3Zub2RlOwogICAgICB2YXIgb2xkQ2hpbGQgPSBnZXRSZWFsQ2hpbGQob2xkUmF3Q2hpbGQpOwoKICAgICAgLy8gbWFyayB2LXNob3cKICAgICAgLy8gc28gdGhhdCB0aGUgdHJhbnNpdGlvbiBtb2R1bGUgY2FuIGhhbmQgb3ZlciB0aGUgY29udHJvbCB0byB0aGUgZGlyZWN0aXZlCiAgICAgIGlmIChjaGlsZC5kYXRhLmRpcmVjdGl2ZXMgJiYgY2hpbGQuZGF0YS5kaXJlY3RpdmVzLnNvbWUoaXNWU2hvd0RpcmVjdGl2ZSkpIHsKICAgICAgICBjaGlsZC5kYXRhLnNob3cgPSB0cnVlOwogICAgICB9CgogICAgICBpZiAoCiAgICAgICAgb2xkQ2hpbGQgJiYKICAgICAgICBvbGRDaGlsZC5kYXRhICYmCiAgICAgICAgIWlzU2FtZUNoaWxkKGNoaWxkLCBvbGRDaGlsZCkgJiYKICAgICAgICAhaXNBc3luY1BsYWNlaG9sZGVyKG9sZENoaWxkKSAmJgogICAgICAgIC8vICM2Njg3IGNvbXBvbmVudCByb290IGlzIGEgY29tbWVudCBub2RlCiAgICAgICAgIShvbGRDaGlsZC5jb21wb25lbnRJbnN0YW5jZSAmJiBvbGRDaGlsZC5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUuaXNDb21tZW50KQogICAgICApIHsKICAgICAgICAvLyByZXBsYWNlIG9sZCBjaGlsZCB0cmFuc2l0aW9uIGRhdGEgd2l0aCBmcmVzaCBvbmUKICAgICAgICAvLyBpbXBvcnRhbnQgZm9yIGR5bmFtaWMgdHJhbnNpdGlvbnMhCiAgICAgICAgdmFyIG9sZERhdGEgPSBvbGRDaGlsZC5kYXRhLnRyYW5zaXRpb24gPSBleHRlbmQoe30sIGRhdGEpOwogICAgICAgIC8vIGhhbmRsZSB0cmFuc2l0aW9uIG1vZGUKICAgICAgICBpZiAobW9kZSA9PT0gJ291dC1pbicpIHsKICAgICAgICAgIC8vIHJldHVybiBwbGFjZWhvbGRlciBub2RlIGFuZCBxdWV1ZSB1cGRhdGUgd2hlbiBsZWF2ZSBmaW5pc2hlcwogICAgICAgICAgdGhpcy5fbGVhdmluZyA9IHRydWU7CiAgICAgICAgICBtZXJnZVZOb2RlSG9vayhvbGREYXRhLCAnYWZ0ZXJMZWF2ZScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcyQxLl9sZWF2aW5nID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMkMS4kZm9yY2VVcGRhdGUoKTsKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIHBsYWNlaG9sZGVyKGgsIHJhd0NoaWxkKQogICAgICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gJ2luLW91dCcpIHsKICAgICAgICAgIGlmIChpc0FzeW5jUGxhY2Vob2xkZXIoY2hpbGQpKSB7CiAgICAgICAgICAgIHJldHVybiBvbGRSYXdDaGlsZAogICAgICAgICAgfQogICAgICAgICAgdmFyIGRlbGF5ZWRMZWF2ZTsKICAgICAgICAgIHZhciBwZXJmb3JtTGVhdmUgPSBmdW5jdGlvbiAoKSB7IGRlbGF5ZWRMZWF2ZSgpOyB9OwogICAgICAgICAgbWVyZ2VWTm9kZUhvb2soZGF0YSwgJ2FmdGVyRW50ZXInLCBwZXJmb3JtTGVhdmUpOwogICAgICAgICAgbWVyZ2VWTm9kZUhvb2soZGF0YSwgJ2VudGVyQ2FuY2VsbGVkJywgcGVyZm9ybUxlYXZlKTsKICAgICAgICAgIG1lcmdlVk5vZGVIb29rKG9sZERhdGEsICdkZWxheUxlYXZlJywgZnVuY3Rpb24gKGxlYXZlKSB7IGRlbGF5ZWRMZWF2ZSA9IGxlYXZlOyB9KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiByYXdDaGlsZAogICAgfQogIH07CgogIC8qICAqLwoKICB2YXIgcHJvcHMgPSBleHRlbmQoewogICAgdGFnOiBTdHJpbmcsCiAgICBtb3ZlQ2xhc3M6IFN0cmluZwogIH0sIHRyYW5zaXRpb25Qcm9wcyk7CgogIGRlbGV0ZSBwcm9wcy5tb2RlOwoKICB2YXIgVHJhbnNpdGlvbkdyb3VwID0gewogICAgcHJvcHM6IHByb3BzLAoKICAgIGJlZm9yZU1vdW50OiBmdW5jdGlvbiBiZWZvcmVNb3VudCAoKSB7CiAgICAgIHZhciB0aGlzJDEgPSB0aGlzOwoKICAgICAgdmFyIHVwZGF0ZSA9IHRoaXMuX3VwZGF0ZTsKICAgICAgdGhpcy5fdXBkYXRlID0gZnVuY3Rpb24gKHZub2RlLCBoeWRyYXRpbmcpIHsKICAgICAgICB2YXIgcmVzdG9yZUFjdGl2ZUluc3RhbmNlID0gc2V0QWN0aXZlSW5zdGFuY2UodGhpcyQxKTsKICAgICAgICAvLyBmb3JjZSByZW1vdmluZyBwYXNzCiAgICAgICAgdGhpcyQxLl9fcGF0Y2hfXygKICAgICAgICAgIHRoaXMkMS5fdm5vZGUsCiAgICAgICAgICB0aGlzJDEua2VwdCwKICAgICAgICAgIGZhbHNlLCAvLyBoeWRyYXRpbmcKICAgICAgICAgIHRydWUgLy8gcmVtb3ZlT25seSAoIWltcG9ydGFudCwgYXZvaWRzIHVubmVjZXNzYXJ5IG1vdmVzKQogICAgICAgICk7CiAgICAgICAgdGhpcyQxLl92bm9kZSA9IHRoaXMkMS5rZXB0OwogICAgICAgIHJlc3RvcmVBY3RpdmVJbnN0YW5jZSgpOwogICAgICAgIHVwZGF0ZS5jYWxsKHRoaXMkMSwgdm5vZGUsIGh5ZHJhdGluZyk7CiAgICAgIH07CiAgICB9LAoKICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyIChoKSB7CiAgICAgIHZhciB0YWcgPSB0aGlzLnRhZyB8fCB0aGlzLiR2bm9kZS5kYXRhLnRhZyB8fCAnc3Bhbic7CiAgICAgIHZhciBtYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgICB2YXIgcHJldkNoaWxkcmVuID0gdGhpcy5wcmV2Q2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuOwogICAgICB2YXIgcmF3Q2hpbGRyZW4gPSB0aGlzLiRzbG90cy5kZWZhdWx0IHx8IFtdOwogICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuID0gW107CiAgICAgIHZhciB0cmFuc2l0aW9uRGF0YSA9IGV4dHJhY3RUcmFuc2l0aW9uRGF0YSh0aGlzKTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmF3Q2hpbGRyZW4ubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgYyA9IHJhd0NoaWxkcmVuW2ldOwogICAgICAgIGlmIChjLnRhZykgewogICAgICAgICAgaWYgKGMua2V5ICE9IG51bGwgJiYgU3RyaW5nKGMua2V5KS5pbmRleE9mKCdfX3ZsaXN0JykgIT09IDApIHsKICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChjKTsKICAgICAgICAgICAgbWFwW2Mua2V5XSA9IGMKICAgICAgICAgICAgOyhjLmRhdGEgfHwgKGMuZGF0YSA9IHt9KSkudHJhbnNpdGlvbiA9IHRyYW5zaXRpb25EYXRhOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIG9wdHMgPSBjLmNvbXBvbmVudE9wdGlvbnM7CiAgICAgICAgICAgIHZhciBuYW1lID0gb3B0cyA/IChvcHRzLkN0b3Iub3B0aW9ucy5uYW1lIHx8IG9wdHMudGFnIHx8ICcnKSA6IGMudGFnOwogICAgICAgICAgICB3YXJuKCgiPHRyYW5zaXRpb24tZ3JvdXA+IGNoaWxkcmVuIG11c3QgYmUga2V5ZWQ6IDwiICsgbmFtZSArICI+IikpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHByZXZDaGlsZHJlbikgewogICAgICAgIHZhciBrZXB0ID0gW107CiAgICAgICAgdmFyIHJlbW92ZWQgPSBbXTsKICAgICAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBwcmV2Q2hpbGRyZW4ubGVuZ3RoOyBpJDErKykgewogICAgICAgICAgdmFyIGMkMSA9IHByZXZDaGlsZHJlbltpJDFdOwogICAgICAgICAgYyQxLmRhdGEudHJhbnNpdGlvbiA9IHRyYW5zaXRpb25EYXRhOwogICAgICAgICAgYyQxLmRhdGEucG9zID0gYyQxLmVsbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgIGlmIChtYXBbYyQxLmtleV0pIHsKICAgICAgICAgICAga2VwdC5wdXNoKGMkMSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZW1vdmVkLnB1c2goYyQxKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdGhpcy5rZXB0ID0gaCh0YWcsIG51bGwsIGtlcHQpOwogICAgICAgIHRoaXMucmVtb3ZlZCA9IHJlbW92ZWQ7CiAgICAgIH0KCiAgICAgIHJldHVybiBoKHRhZywgbnVsbCwgY2hpbGRyZW4pCiAgICB9LAoKICAgIHVwZGF0ZWQ6IGZ1bmN0aW9uIHVwZGF0ZWQgKCkgewogICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLnByZXZDaGlsZHJlbjsKICAgICAgdmFyIG1vdmVDbGFzcyA9IHRoaXMubW92ZUNsYXNzIHx8ICgodGhpcy5uYW1lIHx8ICd2JykgKyAnLW1vdmUnKTsKICAgICAgaWYgKCFjaGlsZHJlbi5sZW5ndGggfHwgIXRoaXMuaGFzTW92ZShjaGlsZHJlblswXS5lbG0sIG1vdmVDbGFzcykpIHsKICAgICAgICByZXR1cm4KICAgICAgfQoKICAgICAgLy8gd2UgZGl2aWRlIHRoZSB3b3JrIGludG8gdGhyZWUgbG9vcHMgdG8gYXZvaWQgbWl4aW5nIERPTSByZWFkcyBhbmQgd3JpdGVzCiAgICAgIC8vIGluIGVhY2ggaXRlcmF0aW9uIC0gd2hpY2ggaGVscHMgcHJldmVudCBsYXlvdXQgdGhyYXNoaW5nLgogICAgICBjaGlsZHJlbi5mb3JFYWNoKGNhbGxQZW5kaW5nQ2JzKTsKICAgICAgY2hpbGRyZW4uZm9yRWFjaChyZWNvcmRQb3NpdGlvbik7CiAgICAgIGNoaWxkcmVuLmZvckVhY2goYXBwbHlUcmFuc2xhdGlvbik7CgogICAgICAvLyBmb3JjZSByZWZsb3cgdG8gcHV0IGV2ZXJ5dGhpbmcgaW4gcG9zaXRpb24KICAgICAgLy8gYXNzaWduIHRvIHRoaXMgdG8gYXZvaWQgYmVpbmcgcmVtb3ZlZCBpbiB0cmVlLXNoYWtpbmcKICAgICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lCiAgICAgIHRoaXMuX3JlZmxvdyA9IGRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0OwoKICAgICAgY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoYykgewogICAgICAgIGlmIChjLmRhdGEubW92ZWQpIHsKICAgICAgICAgIHZhciBlbCA9IGMuZWxtOwogICAgICAgICAgdmFyIHMgPSBlbC5zdHlsZTsKICAgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbW92ZUNsYXNzKTsKICAgICAgICAgIHMudHJhbnNmb3JtID0gcy5XZWJraXRUcmFuc2Zvcm0gPSBzLnRyYW5zaXRpb25EdXJhdGlvbiA9ICcnOwogICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcih0cmFuc2l0aW9uRW5kRXZlbnQsIGVsLl9tb3ZlQ2IgPSBmdW5jdGlvbiBjYiAoZSkgewogICAgICAgICAgICBpZiAoZSAmJiBlLnRhcmdldCAhPT0gZWwpIHsKICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIWUgfHwgL3RyYW5zZm9ybSQvLnRlc3QoZS5wcm9wZXJ0eU5hbWUpKSB7CiAgICAgICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0cmFuc2l0aW9uRW5kRXZlbnQsIGNiKTsKICAgICAgICAgICAgICBlbC5fbW92ZUNiID0gbnVsbDsKICAgICAgICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIG1vdmVDbGFzcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIG1ldGhvZHM6IHsKICAgICAgaGFzTW92ZTogZnVuY3Rpb24gaGFzTW92ZSAoZWwsIG1vdmVDbGFzcykgewogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgICAgIGlmICghaGFzVHJhbnNpdGlvbikgewogICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfQogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgICAgIGlmICh0aGlzLl9oYXNNb3ZlKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5faGFzTW92ZQogICAgICAgIH0KICAgICAgICAvLyBEZXRlY3Qgd2hldGhlciBhbiBlbGVtZW50IHdpdGggdGhlIG1vdmUgY2xhc3MgYXBwbGllZCBoYXMKICAgICAgICAvLyBDU1MgdHJhbnNpdGlvbnMuIFNpbmNlIHRoZSBlbGVtZW50IG1heSBiZSBpbnNpZGUgYW4gZW50ZXJpbmcKICAgICAgICAvLyB0cmFuc2l0aW9uIGF0IHRoaXMgdmVyeSBtb21lbnQsIHdlIG1ha2UgYSBjbG9uZSBvZiBpdCBhbmQgcmVtb3ZlCiAgICAgICAgLy8gYWxsIG90aGVyIHRyYW5zaXRpb24gY2xhc3NlcyBhcHBsaWVkIHRvIGVuc3VyZSBvbmx5IHRoZSBtb3ZlIGNsYXNzCiAgICAgICAgLy8gaXMgYXBwbGllZC4KICAgICAgICB2YXIgY2xvbmUgPSBlbC5jbG9uZU5vZGUoKTsKICAgICAgICBpZiAoZWwuX3RyYW5zaXRpb25DbGFzc2VzKSB7CiAgICAgICAgICBlbC5fdHJhbnNpdGlvbkNsYXNzZXMuZm9yRWFjaChmdW5jdGlvbiAoY2xzKSB7IHJlbW92ZUNsYXNzKGNsb25lLCBjbHMpOyB9KTsKICAgICAgICB9CiAgICAgICAgYWRkQ2xhc3MoY2xvbmUsIG1vdmVDbGFzcyk7CiAgICAgICAgY2xvbmUuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICB0aGlzLiRlbC5hcHBlbmRDaGlsZChjbG9uZSk7CiAgICAgICAgdmFyIGluZm8gPSBnZXRUcmFuc2l0aW9uSW5mbyhjbG9uZSk7CiAgICAgICAgdGhpcy4kZWwucmVtb3ZlQ2hpbGQoY2xvbmUpOwogICAgICAgIHJldHVybiAodGhpcy5faGFzTW92ZSA9IGluZm8uaGFzVHJhbnNmb3JtKQogICAgICB9CiAgICB9CiAgfTsKCiAgZnVuY3Rpb24gY2FsbFBlbmRpbmdDYnMgKGMpIHsKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgaWYgKGMuZWxtLl9tb3ZlQ2IpIHsKICAgICAgYy5lbG0uX21vdmVDYigpOwogICAgfQogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoYy5lbG0uX2VudGVyQ2IpIHsKICAgICAgYy5lbG0uX2VudGVyQ2IoKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHJlY29yZFBvc2l0aW9uIChjKSB7CiAgICBjLmRhdGEubmV3UG9zID0gYy5lbG0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgfQoKICBmdW5jdGlvbiBhcHBseVRyYW5zbGF0aW9uIChjKSB7CiAgICB2YXIgb2xkUG9zID0gYy5kYXRhLnBvczsKICAgIHZhciBuZXdQb3MgPSBjLmRhdGEubmV3UG9zOwogICAgdmFyIGR4ID0gb2xkUG9zLmxlZnQgLSBuZXdQb3MubGVmdDsKICAgIHZhciBkeSA9IG9sZFBvcy50b3AgLSBuZXdQb3MudG9wOwogICAgaWYgKGR4IHx8IGR5KSB7CiAgICAgIGMuZGF0YS5tb3ZlZCA9IHRydWU7CiAgICAgIHZhciBzID0gYy5lbG0uc3R5bGU7CiAgICAgIHMudHJhbnNmb3JtID0gcy5XZWJraXRUcmFuc2Zvcm0gPSAidHJhbnNsYXRlKCIgKyBkeCArICJweCwiICsgZHkgKyAicHgpIjsKICAgICAgcy50cmFuc2l0aW9uRHVyYXRpb24gPSAnMHMnOwogICAgfQogIH0KCiAgdmFyIHBsYXRmb3JtQ29tcG9uZW50cyA9IHsKICAgIFRyYW5zaXRpb246IFRyYW5zaXRpb24sCiAgICBUcmFuc2l0aW9uR3JvdXA6IFRyYW5zaXRpb25Hcm91cAogIH07CgogIC8qICAqLwoKICAvLyBpbnN0YWxsIHBsYXRmb3JtIHNwZWNpZmljIHV0aWxzCiAgVnVlLmNvbmZpZy5tdXN0VXNlUHJvcCA9IG11c3RVc2VQcm9wOwogIFZ1ZS5jb25maWcuaXNSZXNlcnZlZFRhZyA9IGlzUmVzZXJ2ZWRUYWc7CiAgVnVlLmNvbmZpZy5pc1Jlc2VydmVkQXR0ciA9IGlzUmVzZXJ2ZWRBdHRyOwogIFZ1ZS5jb25maWcuZ2V0VGFnTmFtZXNwYWNlID0gZ2V0VGFnTmFtZXNwYWNlOwogIFZ1ZS5jb25maWcuaXNVbmtub3duRWxlbWVudCA9IGlzVW5rbm93bkVsZW1lbnQ7CgogIC8vIGluc3RhbGwgcGxhdGZvcm0gcnVudGltZSBkaXJlY3RpdmVzICYgY29tcG9uZW50cwogIGV4dGVuZChWdWUub3B0aW9ucy5kaXJlY3RpdmVzLCBwbGF0Zm9ybURpcmVjdGl2ZXMpOwogIGV4dGVuZChWdWUub3B0aW9ucy5jb21wb25lbnRzLCBwbGF0Zm9ybUNvbXBvbmVudHMpOwoKICAvLyBpbnN0YWxsIHBsYXRmb3JtIHBhdGNoIGZ1bmN0aW9uCiAgVnVlLnByb3RvdHlwZS5fX3BhdGNoX18gPSBpbkJyb3dzZXIgPyBwYXRjaCA6IG5vb3A7CgogIC8vIHB1YmxpYyBtb3VudCBtZXRob2QKICBWdWUucHJvdG90eXBlLiRtb3VudCA9IGZ1bmN0aW9uICgKICAgIGVsLAogICAgaHlkcmF0aW5nCiAgKSB7CiAgICBlbCA9IGVsICYmIGluQnJvd3NlciA/IHF1ZXJ5KGVsKSA6IHVuZGVmaW5lZDsKICAgIHJldHVybiBtb3VudENvbXBvbmVudCh0aGlzLCBlbCwgaHlkcmF0aW5nKQogIH07CgogIC8vIGRldnRvb2xzIGdsb2JhbCBob29rCiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICBpZiAoaW5Ccm93c2VyKSB7CiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKGNvbmZpZy5kZXZ0b29scykgewogICAgICAgIGlmIChkZXZ0b29scykgewogICAgICAgICAgZGV2dG9vbHMuZW1pdCgnaW5pdCcsIFZ1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGVbY29uc29sZS5pbmZvID8gJ2luZm8nIDogJ2xvZyddKAogICAgICAgICAgICAnRG93bmxvYWQgdGhlIFZ1ZSBEZXZ0b29scyBleHRlbnNpb24gZm9yIGEgYmV0dGVyIGRldmVsb3BtZW50IGV4cGVyaWVuY2U6XG4nICsKICAgICAgICAgICAgJ2h0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUtZGV2dG9vbHMnCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoY29uZmlnLnByb2R1Y3Rpb25UaXAgIT09IGZhbHNlICYmCiAgICAgICAgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnCiAgICAgICkgewogICAgICAgIGNvbnNvbGVbY29uc29sZS5pbmZvID8gJ2luZm8nIDogJ2xvZyddKAogICAgICAgICAgIllvdSBhcmUgcnVubmluZyBWdWUgaW4gZGV2ZWxvcG1lbnQgbW9kZS5cbiIgKwogICAgICAgICAgIk1ha2Ugc3VyZSB0byB0dXJuIG9uIHByb2R1Y3Rpb24gbW9kZSB3aGVuIGRlcGxveWluZyBmb3IgcHJvZHVjdGlvbi5cbiIgKwogICAgICAgICAgIlNlZSBtb3JlIHRpcHMgYXQgaHR0cHM6Ly92dWVqcy5vcmcvZ3VpZGUvZGVwbG95bWVudC5odG1sIgogICAgICAgICk7CiAgICAgIH0KICAgIH0sIDApOwogIH0KCiAgLyogICovCgogIHZhciBkZWZhdWx0VGFnUkUgPSAvXHtceygoPzoufFxyP1xuKSs/KVx9XH0vZzsKICB2YXIgcmVnZXhFc2NhcGVSRSA9IC9bLS4qKz9eJHt9KCl8W1xdXC9cXF0vZzsKCiAgdmFyIGJ1aWxkUmVnZXggPSBjYWNoZWQoZnVuY3Rpb24gKGRlbGltaXRlcnMpIHsKICAgIHZhciBvcGVuID0gZGVsaW1pdGVyc1swXS5yZXBsYWNlKHJlZ2V4RXNjYXBlUkUsICdcXCQmJyk7CiAgICB2YXIgY2xvc2UgPSBkZWxpbWl0ZXJzWzFdLnJlcGxhY2UocmVnZXhFc2NhcGVSRSwgJ1xcJCYnKTsKICAgIHJldHVybiBuZXcgUmVnRXhwKG9wZW4gKyAnKCg/Oi58XFxuKSs/KScgKyBjbG9zZSwgJ2cnKQogIH0pOwoKCgogIGZ1bmN0aW9uIHBhcnNlVGV4dCAoCiAgICB0ZXh0LAogICAgZGVsaW1pdGVycwogICkgewogICAgdmFyIHRhZ1JFID0gZGVsaW1pdGVycyA/IGJ1aWxkUmVnZXgoZGVsaW1pdGVycykgOiBkZWZhdWx0VGFnUkU7CiAgICBpZiAoIXRhZ1JFLnRlc3QodGV4dCkpIHsKICAgICAgcmV0dXJuCiAgICB9CiAgICB2YXIgdG9rZW5zID0gW107CiAgICB2YXIgcmF3VG9rZW5zID0gW107CiAgICB2YXIgbGFzdEluZGV4ID0gdGFnUkUubGFzdEluZGV4ID0gMDsKICAgIHZhciBtYXRjaCwgaW5kZXgsIHRva2VuVmFsdWU7CiAgICB3aGlsZSAoKG1hdGNoID0gdGFnUkUuZXhlYyh0ZXh0KSkpIHsKICAgICAgaW5kZXggPSBtYXRjaC5pbmRleDsKICAgICAgLy8gcHVzaCB0ZXh0IHRva2VuCiAgICAgIGlmIChpbmRleCA+IGxhc3RJbmRleCkgewogICAgICAgIHJhd1Rva2Vucy5wdXNoKHRva2VuVmFsdWUgPSB0ZXh0LnNsaWNlKGxhc3RJbmRleCwgaW5kZXgpKTsKICAgICAgICB0b2tlbnMucHVzaChKU09OLnN0cmluZ2lmeSh0b2tlblZhbHVlKSk7CiAgICAgIH0KICAgICAgLy8gdGFnIHRva2VuCiAgICAgIHZhciBleHAgPSBwYXJzZUZpbHRlcnMobWF0Y2hbMV0udHJpbSgpKTsKICAgICAgdG9rZW5zLnB1c2goKCJfcygiICsgZXhwICsgIikiKSk7CiAgICAgIHJhd1Rva2Vucy5wdXNoKHsgJ0BiaW5kaW5nJzogZXhwIH0pOwogICAgICBsYXN0SW5kZXggPSBpbmRleCArIG1hdGNoWzBdLmxlbmd0aDsKICAgIH0KICAgIGlmIChsYXN0SW5kZXggPCB0ZXh0Lmxlbmd0aCkgewogICAgICByYXdUb2tlbnMucHVzaCh0b2tlblZhbHVlID0gdGV4dC5zbGljZShsYXN0SW5kZXgpKTsKICAgICAgdG9rZW5zLnB1c2goSlNPTi5zdHJpbmdpZnkodG9rZW5WYWx1ZSkpOwogICAgfQogICAgcmV0dXJuIHsKICAgICAgZXhwcmVzc2lvbjogdG9rZW5zLmpvaW4oJysnKSwKICAgICAgdG9rZW5zOiByYXdUb2tlbnMKICAgIH0KICB9CgogIC8qICAqLwoKICBmdW5jdGlvbiB0cmFuc2Zvcm1Ob2RlIChlbCwgb3B0aW9ucykgewogICAgdmFyIHdhcm4gPSBvcHRpb25zLndhcm4gfHwgYmFzZVdhcm47CiAgICB2YXIgc3RhdGljQ2xhc3MgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAnY2xhc3MnKTsKICAgIGlmIChzdGF0aWNDbGFzcykgewogICAgICB2YXIgcmVzID0gcGFyc2VUZXh0KHN0YXRpY0NsYXNzLCBvcHRpb25zLmRlbGltaXRlcnMpOwogICAgICBpZiAocmVzKSB7CiAgICAgICAgd2FybigKICAgICAgICAgICJjbGFzcz1cIiIgKyBzdGF0aWNDbGFzcyArICJcIjogIiArCiAgICAgICAgICAnSW50ZXJwb2xhdGlvbiBpbnNpZGUgYXR0cmlidXRlcyBoYXMgYmVlbiByZW1vdmVkLiAnICsKICAgICAgICAgICdVc2Ugdi1iaW5kIG9yIHRoZSBjb2xvbiBzaG9ydGhhbmQgaW5zdGVhZC4gRm9yIGV4YW1wbGUsICcgKwogICAgICAgICAgJ2luc3RlYWQgb2YgPGRpdiBjbGFzcz0ie3sgdmFsIH19Ij4sIHVzZSA8ZGl2IDpjbGFzcz0idmFsIj4uJywKICAgICAgICAgIGVsLnJhd0F0dHJzTWFwWydjbGFzcyddCiAgICAgICAgKTsKICAgICAgfQogICAgfQogICAgaWYgKHN0YXRpY0NsYXNzKSB7CiAgICAgIGVsLnN0YXRpY0NsYXNzID0gSlNPTi5zdHJpbmdpZnkoc3RhdGljQ2xhc3MpOwogICAgfQogICAgdmFyIGNsYXNzQmluZGluZyA9IGdldEJpbmRpbmdBdHRyKGVsLCAnY2xhc3MnLCBmYWxzZSAvKiBnZXRTdGF0aWMgKi8pOwogICAgaWYgKGNsYXNzQmluZGluZykgewogICAgICBlbC5jbGFzc0JpbmRpbmcgPSBjbGFzc0JpbmRpbmc7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBnZW5EYXRhIChlbCkgewogICAgdmFyIGRhdGEgPSAnJzsKICAgIGlmIChlbC5zdGF0aWNDbGFzcykgewogICAgICBkYXRhICs9ICJzdGF0aWNDbGFzczoiICsgKGVsLnN0YXRpY0NsYXNzKSArICIsIjsKICAgIH0KICAgIGlmIChlbC5jbGFzc0JpbmRpbmcpIHsKICAgICAgZGF0YSArPSAiY2xhc3M6IiArIChlbC5jbGFzc0JpbmRpbmcpICsgIiwiOwogICAgfQogICAgcmV0dXJuIGRhdGEKICB9CgogIHZhciBrbGFzcyQxID0gewogICAgc3RhdGljS2V5czogWydzdGF0aWNDbGFzcyddLAogICAgdHJhbnNmb3JtTm9kZTogdHJhbnNmb3JtTm9kZSwKICAgIGdlbkRhdGE6IGdlbkRhdGEKICB9OwoKICAvKiAgKi8KCiAgZnVuY3Rpb24gdHJhbnNmb3JtTm9kZSQxIChlbCwgb3B0aW9ucykgewogICAgdmFyIHdhcm4gPSBvcHRpb25zLndhcm4gfHwgYmFzZVdhcm47CiAgICB2YXIgc3RhdGljU3R5bGUgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAnc3R5bGUnKTsKICAgIGlmIChzdGF0aWNTdHlsZSkgewogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgewogICAgICAgIHZhciByZXMgPSBwYXJzZVRleHQoc3RhdGljU3R5bGUsIG9wdGlvbnMuZGVsaW1pdGVycyk7CiAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgd2FybigKICAgICAgICAgICAgInN0eWxlPVwiIiArIHN0YXRpY1N0eWxlICsgIlwiOiAiICsKICAgICAgICAgICAgJ0ludGVycG9sYXRpb24gaW5zaWRlIGF0dHJpYnV0ZXMgaGFzIGJlZW4gcmVtb3ZlZC4gJyArCiAgICAgICAgICAgICdVc2Ugdi1iaW5kIG9yIHRoZSBjb2xvbiBzaG9ydGhhbmQgaW5zdGVhZC4gRm9yIGV4YW1wbGUsICcgKwogICAgICAgICAgICAnaW5zdGVhZCBvZiA8ZGl2IHN0eWxlPSJ7eyB2YWwgfX0iPiwgdXNlIDxkaXYgOnN0eWxlPSJ2YWwiPi4nLAogICAgICAgICAgICBlbC5yYXdBdHRyc01hcFsnc3R5bGUnXQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZWwuc3RhdGljU3R5bGUgPSBKU09OLnN0cmluZ2lmeShwYXJzZVN0eWxlVGV4dChzdGF0aWNTdHlsZSkpOwogICAgfQoKICAgIHZhciBzdHlsZUJpbmRpbmcgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ3N0eWxlJywgZmFsc2UgLyogZ2V0U3RhdGljICovKTsKICAgIGlmIChzdHlsZUJpbmRpbmcpIHsKICAgICAgZWwuc3R5bGVCaW5kaW5nID0gc3R5bGVCaW5kaW5nOwogICAgfQogIH0KCiAgZnVuY3Rpb24gZ2VuRGF0YSQxIChlbCkgewogICAgdmFyIGRhdGEgPSAnJzsKICAgIGlmIChlbC5zdGF0aWNTdHlsZSkgewogICAgICBkYXRhICs9ICJzdGF0aWNTdHlsZToiICsgKGVsLnN0YXRpY1N0eWxlKSArICIsIjsKICAgIH0KICAgIGlmIChlbC5zdHlsZUJpbmRpbmcpIHsKICAgICAgZGF0YSArPSAic3R5bGU6KCIgKyAoZWwuc3R5bGVCaW5kaW5nKSArICIpLCI7CiAgICB9CiAgICByZXR1cm4gZGF0YQogIH0KCiAgdmFyIHN0eWxlJDEgPSB7CiAgICBzdGF0aWNLZXlzOiBbJ3N0YXRpY1N0eWxlJ10sCiAgICB0cmFuc2Zvcm1Ob2RlOiB0cmFuc2Zvcm1Ob2RlJDEsCiAgICBnZW5EYXRhOiBnZW5EYXRhJDEKICB9OwoKICAvKiAgKi8KCiAgdmFyIGRlY29kZXI7CgogIHZhciBoZSA9IHsKICAgIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlIChodG1sKSB7CiAgICAgIGRlY29kZXIgPSBkZWNvZGVyIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICBkZWNvZGVyLmlubmVySFRNTCA9IGh0bWw7CiAgICAgIHJldHVybiBkZWNvZGVyLnRleHRDb250ZW50CiAgICB9CiAgfTsKCiAgLyogICovCgogIHZhciBpc1VuYXJ5VGFnID0gbWFrZU1hcCgKICAgICdhcmVhLGJhc2UsYnIsY29sLGVtYmVkLGZyYW1lLGhyLGltZyxpbnB1dCxpc2luZGV4LGtleWdlbiwnICsKICAgICdsaW5rLG1ldGEscGFyYW0sc291cmNlLHRyYWNrLHdicicKICApOwoKICAvLyBFbGVtZW50cyB0aGF0IHlvdSBjYW4sIGludGVudGlvbmFsbHksIGxlYXZlIG9wZW4KICAvLyAoYW5kIHdoaWNoIGNsb3NlIHRoZW1zZWx2ZXMpCiAgdmFyIGNhbkJlTGVmdE9wZW5UYWcgPSBtYWtlTWFwKAogICAgJ2NvbGdyb3VwLGRkLGR0LGxpLG9wdGlvbnMscCx0ZCx0Zm9vdCx0aCx0aGVhZCx0cixzb3VyY2UnCiAgKTsKCiAgLy8gSFRNTDUgdGFncyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9pbmRpY2VzLmh0bWwjZWxlbWVudHMtMwogIC8vIFBocmFzaW5nIENvbnRlbnQgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZG9tLmh0bWwjcGhyYXNpbmctY29udGVudAogIHZhciBpc05vblBocmFzaW5nVGFnID0gbWFrZU1hcCgKICAgICdhZGRyZXNzLGFydGljbGUsYXNpZGUsYmFzZSxibG9ja3F1b3RlLGJvZHksY2FwdGlvbixjb2wsY29sZ3JvdXAsZGQsJyArCiAgICAnZGV0YWlscyxkaWFsb2csZGl2LGRsLGR0LGZpZWxkc2V0LGZpZ2NhcHRpb24sZmlndXJlLGZvb3Rlcixmb3JtLCcgKwogICAgJ2gxLGgyLGgzLGg0LGg1LGg2LGhlYWQsaGVhZGVyLGhncm91cCxocixodG1sLGxlZ2VuZCxsaSxtZW51aXRlbSxtZXRhLCcgKwogICAgJ29wdGdyb3VwLG9wdGlvbixwYXJhbSxycCxydCxzb3VyY2Usc3R5bGUsc3VtbWFyeSx0Ym9keSx0ZCx0Zm9vdCx0aCx0aGVhZCwnICsKICAgICd0aXRsZSx0cix0cmFjaycKICApOwoKICAvKioKICAgKiBOb3QgdHlwZS1jaGVja2luZyB0aGlzIGZpbGUgYmVjYXVzZSBpdCdzIG1vc3RseSB2ZW5kb3IgY29kZS4KICAgKi8KCiAgLy8gUmVndWxhciBFeHByZXNzaW9ucyBmb3IgcGFyc2luZyB0YWdzIGFuZCBhdHRyaWJ1dGVzCiAgdmFyIGF0dHJpYnV0ZSA9IC9eXHMqKFteXHMiJzw+XC89XSspKD86XHMqKD0pXHMqKD86IihbXiJdKikiK3wnKFteJ10qKScrfChbXlxzIic9PD5gXSspKSk/LzsKICB2YXIgZHluYW1pY0FyZ0F0dHJpYnV0ZSA9IC9eXHMqKCg/OnYtW1x3LV0rOnxAfDp8IylcW1tePV0rXF1bXlxzIic8PlwvPV0qKSg/OlxzKig9KVxzKig/OiIoW14iXSopIit8JyhbXiddKiknK3woW15ccyInPTw+YF0rKSkpPy87CiAgdmFyIG5jbmFtZSA9ICJbYS16QS1aX11bXFwtXFwuMC05X2EtekEtWiIgKyAodW5pY29kZVJlZ0V4cC5zb3VyY2UpICsgIl0qIjsKICB2YXIgcW5hbWVDYXB0dXJlID0gIigoPzoiICsgbmNuYW1lICsgIlxcOik/IiArIG5jbmFtZSArICIpIjsKICB2YXIgc3RhcnRUYWdPcGVuID0gbmV3IFJlZ0V4cCgoIl48IiArIHFuYW1lQ2FwdHVyZSkpOwogIHZhciBzdGFydFRhZ0Nsb3NlID0gL15ccyooXC8/KT4vOwogIHZhciBlbmRUYWcgPSBuZXcgUmVnRXhwKCgiXjxcXC8iICsgcW5hbWVDYXB0dXJlICsgIltePl0qPiIpKTsKICB2YXIgZG9jdHlwZSA9IC9ePCFET0NUWVBFIFtePl0rPi9pOwogIC8vICM3Mjk4OiBlc2NhcGUgLSB0byBhdm9pZCBiZWluZyBwYXNzZWQgYXMgSFRNTCBjb21tZW50IHdoZW4gaW5saW5lZCBpbiBwYWdlCiAgdmFyIGNvbW1lbnQgPSAvXjwhXC0tLzsKICB2YXIgY29uZGl0aW9uYWxDb21tZW50ID0gL148IVxbLzsKCiAgLy8gU3BlY2lhbCBFbGVtZW50cyAoY2FuIGNvbnRhaW4gYW55dGhpbmcpCiAgdmFyIGlzUGxhaW5UZXh0RWxlbWVudCA9IG1ha2VNYXAoJ3NjcmlwdCxzdHlsZSx0ZXh0YXJlYScsIHRydWUpOwogIHZhciByZUNhY2hlID0ge307CgogIHZhciBkZWNvZGluZ01hcCA9IHsKICAgICcmbHQ7JzogJzwnLAogICAgJyZndDsnOiAnPicsCiAgICAnJnF1b3Q7JzogJyInLAogICAgJyZhbXA7JzogJyYnLAogICAgJyYjMTA7JzogJ1xuJywKICAgICcmIzk7JzogJ1x0JywKICAgICcmIzM5Oyc6ICInIgogIH07CiAgdmFyIGVuY29kZWRBdHRyID0gLyYoPzpsdHxndHxxdW90fGFtcHwjMzkpOy9nOwogIHZhciBlbmNvZGVkQXR0cldpdGhOZXdMaW5lcyA9IC8mKD86bHR8Z3R8cXVvdHxhbXB8IzM5fCMxMHwjOSk7L2c7CgogIC8vICM1OTkyCiAgdmFyIGlzSWdub3JlTmV3bGluZVRhZyA9IG1ha2VNYXAoJ3ByZSx0ZXh0YXJlYScsIHRydWUpOwogIHZhciBzaG91bGRJZ25vcmVGaXJzdE5ld2xpbmUgPSBmdW5jdGlvbiAodGFnLCBodG1sKSB7IHJldHVybiB0YWcgJiYgaXNJZ25vcmVOZXdsaW5lVGFnKHRhZykgJiYgaHRtbFswXSA9PT0gJ1xuJzsgfTsKCiAgZnVuY3Rpb24gZGVjb2RlQXR0ciAodmFsdWUsIHNob3VsZERlY29kZU5ld2xpbmVzKSB7CiAgICB2YXIgcmUgPSBzaG91bGREZWNvZGVOZXdsaW5lcyA/IGVuY29kZWRBdHRyV2l0aE5ld0xpbmVzIDogZW5jb2RlZEF0dHI7CiAgICByZXR1cm4gdmFsdWUucmVwbGFjZShyZSwgZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBkZWNvZGluZ01hcFttYXRjaF07IH0pCiAgfQoKICBmdW5jdGlvbiBwYXJzZUhUTUwgKGh0bWwsIG9wdGlvbnMpIHsKICAgIHZhciBzdGFjayA9IFtdOwogICAgdmFyIGV4cGVjdEhUTUwgPSBvcHRpb25zLmV4cGVjdEhUTUw7CiAgICB2YXIgaXNVbmFyeVRhZyQkMSA9IG9wdGlvbnMuaXNVbmFyeVRhZyB8fCBubzsKICAgIHZhciBjYW5CZUxlZnRPcGVuVGFnJCQxID0gb3B0aW9ucy5jYW5CZUxlZnRPcGVuVGFnIHx8IG5vOwogICAgdmFyIGluZGV4ID0gMDsKICAgIHZhciBsYXN0LCBsYXN0VGFnOwogICAgd2hpbGUgKGh0bWwpIHsKICAgICAgbGFzdCA9IGh0bWw7CiAgICAgIC8vIE1ha2Ugc3VyZSB3ZSdyZSBub3QgaW4gYSBwbGFpbnRleHQgY29udGVudCBlbGVtZW50IGxpa2Ugc2NyaXB0L3N0eWxlCiAgICAgIGlmICghbGFzdFRhZyB8fCAhaXNQbGFpblRleHRFbGVtZW50KGxhc3RUYWcpKSB7CiAgICAgICAgdmFyIHRleHRFbmQgPSBodG1sLmluZGV4T2YoJzwnKTsKICAgICAgICBpZiAodGV4dEVuZCA9PT0gMCkgewogICAgICAgICAgLy8gQ29tbWVudDoKICAgICAgICAgIGlmIChjb21tZW50LnRlc3QoaHRtbCkpIHsKICAgICAgICAgICAgdmFyIGNvbW1lbnRFbmQgPSBodG1sLmluZGV4T2YoJy0tPicpOwoKICAgICAgICAgICAgaWYgKGNvbW1lbnRFbmQgPj0gMCkgewogICAgICAgICAgICAgIGlmIChvcHRpb25zLnNob3VsZEtlZXBDb21tZW50KSB7CiAgICAgICAgICAgICAgICBvcHRpb25zLmNvbW1lbnQoaHRtbC5zdWJzdHJpbmcoNCwgY29tbWVudEVuZCksIGluZGV4LCBpbmRleCArIGNvbW1lbnRFbmQgKyAzKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYWR2YW5jZShjb21tZW50RW5kICsgMyk7CiAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIC8vIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29uZGl0aW9uYWxfY29tbWVudCNEb3dubGV2ZWwtcmV2ZWFsZWRfY29uZGl0aW9uYWxfY29tbWVudAogICAgICAgICAgaWYgKGNvbmRpdGlvbmFsQ29tbWVudC50ZXN0KGh0bWwpKSB7CiAgICAgICAgICAgIHZhciBjb25kaXRpb25hbEVuZCA9IGh0bWwuaW5kZXhPZignXT4nKTsKCiAgICAgICAgICAgIGlmIChjb25kaXRpb25hbEVuZCA+PSAwKSB7CiAgICAgICAgICAgICAgYWR2YW5jZShjb25kaXRpb25hbEVuZCArIDIpOwogICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICAvLyBEb2N0eXBlOgogICAgICAgICAgdmFyIGRvY3R5cGVNYXRjaCA9IGh0bWwubWF0Y2goZG9jdHlwZSk7CiAgICAgICAgICBpZiAoZG9jdHlwZU1hdGNoKSB7CiAgICAgICAgICAgIGFkdmFuY2UoZG9jdHlwZU1hdGNoWzBdLmxlbmd0aCk7CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICB9CgogICAgICAgICAgLy8gRW5kIHRhZzoKICAgICAgICAgIHZhciBlbmRUYWdNYXRjaCA9IGh0bWwubWF0Y2goZW5kVGFnKTsKICAgICAgICAgIGlmIChlbmRUYWdNYXRjaCkgewogICAgICAgICAgICB2YXIgY3VySW5kZXggPSBpbmRleDsKICAgICAgICAgICAgYWR2YW5jZShlbmRUYWdNYXRjaFswXS5sZW5ndGgpOwogICAgICAgICAgICBwYXJzZUVuZFRhZyhlbmRUYWdNYXRjaFsxXSwgY3VySW5kZXgsIGluZGV4KTsKICAgICAgICAgICAgY29udGludWUKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBTdGFydCB0YWc6CiAgICAgICAgICB2YXIgc3RhcnRUYWdNYXRjaCA9IHBhcnNlU3RhcnRUYWcoKTsKICAgICAgICAgIGlmIChzdGFydFRhZ01hdGNoKSB7CiAgICAgICAgICAgIGhhbmRsZVN0YXJ0VGFnKHN0YXJ0VGFnTWF0Y2gpOwogICAgICAgICAgICBpZiAoc2hvdWxkSWdub3JlRmlyc3ROZXdsaW5lKHN0YXJ0VGFnTWF0Y2gudGFnTmFtZSwgaHRtbCkpIHsKICAgICAgICAgICAgICBhZHZhbmNlKDEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgdGV4dCA9ICh2b2lkIDApLCByZXN0ID0gKHZvaWQgMCksIG5leHQgPSAodm9pZCAwKTsKICAgICAgICBpZiAodGV4dEVuZCA+PSAwKSB7CiAgICAgICAgICByZXN0ID0gaHRtbC5zbGljZSh0ZXh0RW5kKTsKICAgICAgICAgIHdoaWxlICgKICAgICAgICAgICAgIWVuZFRhZy50ZXN0KHJlc3QpICYmCiAgICAgICAgICAgICFzdGFydFRhZ09wZW4udGVzdChyZXN0KSAmJgogICAgICAgICAgICAhY29tbWVudC50ZXN0KHJlc3QpICYmCiAgICAgICAgICAgICFjb25kaXRpb25hbENvbW1lbnQudGVzdChyZXN0KQogICAgICAgICAgKSB7CiAgICAgICAgICAgIC8vIDwgaW4gcGxhaW4gdGV4dCwgYmUgZm9yZ2l2aW5nIGFuZCB0cmVhdCBpdCBhcyB0ZXh0CiAgICAgICAgICAgIG5leHQgPSByZXN0LmluZGV4T2YoJzwnLCAxKTsKICAgICAgICAgICAgaWYgKG5leHQgPCAwKSB7IGJyZWFrIH0KICAgICAgICAgICAgdGV4dEVuZCArPSBuZXh0OwogICAgICAgICAgICByZXN0ID0gaHRtbC5zbGljZSh0ZXh0RW5kKTsKICAgICAgICAgIH0KICAgICAgICAgIHRleHQgPSBodG1sLnN1YnN0cmluZygwLCB0ZXh0RW5kKTsKICAgICAgICB9CgogICAgICAgIGlmICh0ZXh0RW5kIDwgMCkgewogICAgICAgICAgdGV4dCA9IGh0bWw7CiAgICAgICAgfQoKICAgICAgICBpZiAodGV4dCkgewogICAgICAgICAgYWR2YW5jZSh0ZXh0Lmxlbmd0aCk7CiAgICAgICAgfQoKICAgICAgICBpZiAob3B0aW9ucy5jaGFycyAmJiB0ZXh0KSB7CiAgICAgICAgICBvcHRpb25zLmNoYXJzKHRleHQsIGluZGV4IC0gdGV4dC5sZW5ndGgsIGluZGV4KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGVuZFRhZ0xlbmd0aCA9IDA7CiAgICAgICAgdmFyIHN0YWNrZWRUYWcgPSBsYXN0VGFnLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgdmFyIHJlU3RhY2tlZFRhZyA9IHJlQ2FjaGVbc3RhY2tlZFRhZ10gfHwgKHJlQ2FjaGVbc3RhY2tlZFRhZ10gPSBuZXcgUmVnRXhwKCcoW1xcc1xcU10qPykoPC8nICsgc3RhY2tlZFRhZyArICdbXj5dKj4pJywgJ2knKSk7CiAgICAgICAgdmFyIHJlc3QkMSA9IGh0bWwucmVwbGFjZShyZVN0YWNrZWRUYWcsIGZ1bmN0aW9uIChhbGwsIHRleHQsIGVuZFRhZykgewogICAgICAgICAgZW5kVGFnTGVuZ3RoID0gZW5kVGFnLmxlbmd0aDsKICAgICAgICAgIGlmICghaXNQbGFpblRleHRFbGVtZW50KHN0YWNrZWRUYWcpICYmIHN0YWNrZWRUYWcgIT09ICdub3NjcmlwdCcpIHsKICAgICAgICAgICAgdGV4dCA9IHRleHQKICAgICAgICAgICAgICAucmVwbGFjZSgvPCFcLS0oW1xzXFNdKj8pLS0+L2csICckMScpIC8vICM3Mjk4CiAgICAgICAgICAgICAgLnJlcGxhY2UoLzwhXFtDREFUQVxbKFtcc1xTXSo/KV1dPi9nLCAnJDEnKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzaG91bGRJZ25vcmVGaXJzdE5ld2xpbmUoc3RhY2tlZFRhZywgdGV4dCkpIHsKICAgICAgICAgICAgdGV4dCA9IHRleHQuc2xpY2UoMSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAob3B0aW9ucy5jaGFycykgewogICAgICAgICAgICBvcHRpb25zLmNoYXJzKHRleHQpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuICcnCiAgICAgICAgfSk7CiAgICAgICAgaW5kZXggKz0gaHRtbC5sZW5ndGggLSByZXN0JDEubGVuZ3RoOwogICAgICAgIGh0bWwgPSByZXN0JDE7CiAgICAgICAgcGFyc2VFbmRUYWcoc3RhY2tlZFRhZywgaW5kZXggLSBlbmRUYWdMZW5ndGgsIGluZGV4KTsKICAgICAgfQoKICAgICAgaWYgKGh0bWwgPT09IGxhc3QpIHsKICAgICAgICBvcHRpb25zLmNoYXJzICYmIG9wdGlvbnMuY2hhcnMoaHRtbCk7CiAgICAgICAgaWYgKCFzdGFjay5sZW5ndGggJiYgb3B0aW9ucy53YXJuKSB7CiAgICAgICAgICBvcHRpb25zLndhcm4oKCJNYWwtZm9ybWF0dGVkIHRhZyBhdCBlbmQgb2YgdGVtcGxhdGU6IFwiIiArIGh0bWwgKyAiXCIiKSwgeyBzdGFydDogaW5kZXggKyBodG1sLmxlbmd0aCB9KTsKICAgICAgICB9CiAgICAgICAgYnJlYWsKICAgICAgfQogICAgfQoKICAgIC8vIENsZWFuIHVwIGFueSByZW1haW5pbmcgdGFncwogICAgcGFyc2VFbmRUYWcoKTsKCiAgICBmdW5jdGlvbiBhZHZhbmNlIChuKSB7CiAgICAgIGluZGV4ICs9IG47CiAgICAgIGh0bWwgPSBodG1sLnN1YnN0cmluZyhuKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwYXJzZVN0YXJ0VGFnICgpIHsKICAgICAgdmFyIHN0YXJ0ID0gaHRtbC5tYXRjaChzdGFydFRhZ09wZW4pOwogICAgICBpZiAoc3RhcnQpIHsKICAgICAgICB2YXIgbWF0Y2ggPSB7CiAgICAgICAgICB0YWdOYW1lOiBzdGFydFsxXSwKICAgICAgICAgIGF0dHJzOiBbXSwKICAgICAgICAgIHN0YXJ0OiBpbmRleAogICAgICAgIH07CiAgICAgICAgYWR2YW5jZShzdGFydFswXS5sZW5ndGgpOwogICAgICAgIHZhciBlbmQsIGF0dHI7CiAgICAgICAgd2hpbGUgKCEoZW5kID0gaHRtbC5tYXRjaChzdGFydFRhZ0Nsb3NlKSkgJiYgKGF0dHIgPSBodG1sLm1hdGNoKGR5bmFtaWNBcmdBdHRyaWJ1dGUpIHx8IGh0bWwubWF0Y2goYXR0cmlidXRlKSkpIHsKICAgICAgICAgIGF0dHIuc3RhcnQgPSBpbmRleDsKICAgICAgICAgIGFkdmFuY2UoYXR0clswXS5sZW5ndGgpOwogICAgICAgICAgYXR0ci5lbmQgPSBpbmRleDsKICAgICAgICAgIG1hdGNoLmF0dHJzLnB1c2goYXR0cik7CiAgICAgICAgfQogICAgICAgIGlmIChlbmQpIHsKICAgICAgICAgIG1hdGNoLnVuYXJ5U2xhc2ggPSBlbmRbMV07CiAgICAgICAgICBhZHZhbmNlKGVuZFswXS5sZW5ndGgpOwogICAgICAgICAgbWF0Y2guZW5kID0gaW5kZXg7CiAgICAgICAgICByZXR1cm4gbWF0Y2gKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBoYW5kbGVTdGFydFRhZyAobWF0Y2gpIHsKICAgICAgdmFyIHRhZ05hbWUgPSBtYXRjaC50YWdOYW1lOwogICAgICB2YXIgdW5hcnlTbGFzaCA9IG1hdGNoLnVuYXJ5U2xhc2g7CgogICAgICBpZiAoZXhwZWN0SFRNTCkgewogICAgICAgIGlmIChsYXN0VGFnID09PSAncCcgJiYgaXNOb25QaHJhc2luZ1RhZyh0YWdOYW1lKSkgewogICAgICAgICAgcGFyc2VFbmRUYWcobGFzdFRhZyk7CiAgICAgICAgfQogICAgICAgIGlmIChjYW5CZUxlZnRPcGVuVGFnJCQxKHRhZ05hbWUpICYmIGxhc3RUYWcgPT09IHRhZ05hbWUpIHsKICAgICAgICAgIHBhcnNlRW5kVGFnKHRhZ05hbWUpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIHVuYXJ5ID0gaXNVbmFyeVRhZyQkMSh0YWdOYW1lKSB8fCAhIXVuYXJ5U2xhc2g7CgogICAgICB2YXIgbCA9IG1hdGNoLmF0dHJzLmxlbmd0aDsKICAgICAgdmFyIGF0dHJzID0gbmV3IEFycmF5KGwpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykgewogICAgICAgIHZhciBhcmdzID0gbWF0Y2guYXR0cnNbaV07CiAgICAgICAgdmFyIHZhbHVlID0gYXJnc1szXSB8fCBhcmdzWzRdIHx8IGFyZ3NbNV0gfHwgJyc7CiAgICAgICAgdmFyIHNob3VsZERlY29kZU5ld2xpbmVzID0gdGFnTmFtZSA9PT0gJ2EnICYmIGFyZ3NbMV0gPT09ICdocmVmJwogICAgICAgICAgPyBvcHRpb25zLnNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZgogICAgICAgICAgOiBvcHRpb25zLnNob3VsZERlY29kZU5ld2xpbmVzOwogICAgICAgIGF0dHJzW2ldID0gewogICAgICAgICAgbmFtZTogYXJnc1sxXSwKICAgICAgICAgIHZhbHVlOiBkZWNvZGVBdHRyKHZhbHVlLCBzaG91bGREZWNvZGVOZXdsaW5lcykKICAgICAgICB9OwogICAgICAgIGlmIChvcHRpb25zLm91dHB1dFNvdXJjZVJhbmdlKSB7CiAgICAgICAgICBhdHRyc1tpXS5zdGFydCA9IGFyZ3Muc3RhcnQgKyBhcmdzWzBdLm1hdGNoKC9eXHMqLykubGVuZ3RoOwogICAgICAgICAgYXR0cnNbaV0uZW5kID0gYXJncy5lbmQ7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoIXVuYXJ5KSB7CiAgICAgICAgc3RhY2sucHVzaCh7IHRhZzogdGFnTmFtZSwgbG93ZXJDYXNlZFRhZzogdGFnTmFtZS50b0xvd2VyQ2FzZSgpLCBhdHRyczogYXR0cnMsIHN0YXJ0OiBtYXRjaC5zdGFydCwgZW5kOiBtYXRjaC5lbmQgfSk7CiAgICAgICAgbGFzdFRhZyA9IHRhZ05hbWU7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLnN0YXJ0KSB7CiAgICAgICAgb3B0aW9ucy5zdGFydCh0YWdOYW1lLCBhdHRycywgdW5hcnksIG1hdGNoLnN0YXJ0LCBtYXRjaC5lbmQpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcGFyc2VFbmRUYWcgKHRhZ05hbWUsIHN0YXJ0LCBlbmQpIHsKICAgICAgdmFyIHBvcywgbG93ZXJDYXNlZFRhZ05hbWU7CiAgICAgIGlmIChzdGFydCA9PSBudWxsKSB7IHN0YXJ0ID0gaW5kZXg7IH0KICAgICAgaWYgKGVuZCA9PSBudWxsKSB7IGVuZCA9IGluZGV4OyB9CgogICAgICAvLyBGaW5kIHRoZSBjbG9zZXN0IG9wZW5lZCB0YWcgb2YgdGhlIHNhbWUgdHlwZQogICAgICBpZiAodGFnTmFtZSkgewogICAgICAgIGxvd2VyQ2FzZWRUYWdOYW1lID0gdGFnTmFtZS50b0xvd2VyQ2FzZSgpOwogICAgICAgIGZvciAocG9zID0gc3RhY2subGVuZ3RoIC0gMTsgcG9zID49IDA7IHBvcy0tKSB7CiAgICAgICAgICBpZiAoc3RhY2tbcG9zXS5sb3dlckNhc2VkVGFnID09PSBsb3dlckNhc2VkVGFnTmFtZSkgewogICAgICAgICAgICBicmVhawogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBJZiBubyB0YWcgbmFtZSBpcyBwcm92aWRlZCwgY2xlYW4gc2hvcAogICAgICAgIHBvcyA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChwb3MgPj0gMCkgewogICAgICAgIC8vIENsb3NlIGFsbCB0aGUgb3BlbiBlbGVtZW50cywgdXAgdGhlIHN0YWNrCiAgICAgICAgZm9yICh2YXIgaSA9IHN0YWNrLmxlbmd0aCAtIDE7IGkgPj0gcG9zOyBpLS0pIHsKICAgICAgICAgIGlmIChpID4gcG9zIHx8ICF0YWdOYW1lICYmCiAgICAgICAgICAgIG9wdGlvbnMud2FybgogICAgICAgICAgKSB7CiAgICAgICAgICAgIG9wdGlvbnMud2FybigKICAgICAgICAgICAgICAoInRhZyA8IiArIChzdGFja1tpXS50YWcpICsgIj4gaGFzIG5vIG1hdGNoaW5nIGVuZCB0YWcuIiksCiAgICAgICAgICAgICAgeyBzdGFydDogc3RhY2tbaV0uc3RhcnQsIGVuZDogc3RhY2tbaV0uZW5kIH0KICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChvcHRpb25zLmVuZCkgewogICAgICAgICAgICBvcHRpb25zLmVuZChzdGFja1tpXS50YWcsIHN0YXJ0LCBlbmQpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gUmVtb3ZlIHRoZSBvcGVuIGVsZW1lbnRzIGZyb20gdGhlIHN0YWNrCiAgICAgICAgc3RhY2subGVuZ3RoID0gcG9zOwogICAgICAgIGxhc3RUYWcgPSBwb3MgJiYgc3RhY2tbcG9zIC0gMV0udGFnOwogICAgICB9IGVsc2UgaWYgKGxvd2VyQ2FzZWRUYWdOYW1lID09PSAnYnInKSB7CiAgICAgICAgaWYgKG9wdGlvbnMuc3RhcnQpIHsKICAgICAgICAgIG9wdGlvbnMuc3RhcnQodGFnTmFtZSwgW10sIHRydWUsIHN0YXJ0LCBlbmQpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChsb3dlckNhc2VkVGFnTmFtZSA9PT0gJ3AnKSB7CiAgICAgICAgaWYgKG9wdGlvbnMuc3RhcnQpIHsKICAgICAgICAgIG9wdGlvbnMuc3RhcnQodGFnTmFtZSwgW10sIGZhbHNlLCBzdGFydCwgZW5kKTsKICAgICAgICB9CiAgICAgICAgaWYgKG9wdGlvbnMuZW5kKSB7CiAgICAgICAgICBvcHRpb25zLmVuZCh0YWdOYW1lLCBzdGFydCwgZW5kKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIC8qICAqLwoKICB2YXIgb25SRSA9IC9eQHxedi1vbjovOwogIHZhciBkaXJSRSA9IC9edi18XkB8Xjp8XiMvOwogIHZhciBmb3JBbGlhc1JFID0gLyhbXHNcU10qPylccysoPzppbnxvZilccysoW1xzXFNdKikvOwogIHZhciBmb3JJdGVyYXRvclJFID0gLywoW14sXH1cXV0qKSg/OiwoW14sXH1cXV0qKSk/JC87CiAgdmFyIHN0cmlwUGFyZW5zUkUgPSAvXlwofFwpJC9nOwogIHZhciBkeW5hbWljQXJnUkUgPSAvXlxbLipcXSQvOwoKICB2YXIgYXJnUkUgPSAvOiguKikkLzsKICB2YXIgYmluZFJFID0gL146fF5cLnxedi1iaW5kOi87CiAgdmFyIG1vZGlmaWVyUkUgPSAvXC5bXi5cXV0rKD89W15cXV0qJCkvZzsKCiAgdmFyIHNsb3RSRSA9IC9edi1zbG90KDp8JCl8XiMvOwoKICB2YXIgbGluZUJyZWFrUkUgPSAvW1xyXG5dLzsKICB2YXIgd2hpdGVzcGFjZVJFJDEgPSAvXHMrL2c7CgogIHZhciBpbnZhbGlkQXR0cmlidXRlUkUgPSAvW1xzIic8PlwvPV0vOwoKICB2YXIgZGVjb2RlSFRNTENhY2hlZCA9IGNhY2hlZChoZS5kZWNvZGUpOwoKICB2YXIgZW1wdHlTbG90U2NvcGVUb2tlbiA9ICJfZW1wdHlfIjsKCiAgLy8gY29uZmlndXJhYmxlIHN0YXRlCiAgdmFyIHdhcm4kMjsKICB2YXIgZGVsaW1pdGVyczsKICB2YXIgdHJhbnNmb3JtczsKICB2YXIgcHJlVHJhbnNmb3JtczsKICB2YXIgcG9zdFRyYW5zZm9ybXM7CiAgdmFyIHBsYXRmb3JtSXNQcmVUYWc7CiAgdmFyIHBsYXRmb3JtTXVzdFVzZVByb3A7CiAgdmFyIHBsYXRmb3JtR2V0VGFnTmFtZXNwYWNlOwogIHZhciBtYXliZUNvbXBvbmVudDsKCiAgZnVuY3Rpb24gY3JlYXRlQVNURWxlbWVudCAoCiAgICB0YWcsCiAgICBhdHRycywKICAgIHBhcmVudAogICkgewogICAgcmV0dXJuIHsKICAgICAgdHlwZTogMSwKICAgICAgdGFnOiB0YWcsCiAgICAgIGF0dHJzTGlzdDogYXR0cnMsCiAgICAgIGF0dHJzTWFwOiBtYWtlQXR0cnNNYXAoYXR0cnMpLAogICAgICByYXdBdHRyc01hcDoge30sCiAgICAgIHBhcmVudDogcGFyZW50LAogICAgICBjaGlsZHJlbjogW10KICAgIH0KICB9CgogIC8qKgogICAqIENvbnZlcnQgSFRNTCBzdHJpbmcgdG8gQVNULgogICAqLwogIGZ1bmN0aW9uIHBhcnNlICgKICAgIHRlbXBsYXRlLAogICAgb3B0aW9ucwogICkgewogICAgd2FybiQyID0gb3B0aW9ucy53YXJuIHx8IGJhc2VXYXJuOwoKICAgIHBsYXRmb3JtSXNQcmVUYWcgPSBvcHRpb25zLmlzUHJlVGFnIHx8IG5vOwogICAgcGxhdGZvcm1NdXN0VXNlUHJvcCA9IG9wdGlvbnMubXVzdFVzZVByb3AgfHwgbm87CiAgICBwbGF0Zm9ybUdldFRhZ05hbWVzcGFjZSA9IG9wdGlvbnMuZ2V0VGFnTmFtZXNwYWNlIHx8IG5vOwogICAgdmFyIGlzUmVzZXJ2ZWRUYWcgPSBvcHRpb25zLmlzUmVzZXJ2ZWRUYWcgfHwgbm87CiAgICBtYXliZUNvbXBvbmVudCA9IGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gISFlbC5jb21wb25lbnQgfHwgIWlzUmVzZXJ2ZWRUYWcoZWwudGFnKTsgfTsKCiAgICB0cmFuc2Zvcm1zID0gcGx1Y2tNb2R1bGVGdW5jdGlvbihvcHRpb25zLm1vZHVsZXMsICd0cmFuc2Zvcm1Ob2RlJyk7CiAgICBwcmVUcmFuc2Zvcm1zID0gcGx1Y2tNb2R1bGVGdW5jdGlvbihvcHRpb25zLm1vZHVsZXMsICdwcmVUcmFuc2Zvcm1Ob2RlJyk7CiAgICBwb3N0VHJhbnNmb3JtcyA9IHBsdWNrTW9kdWxlRnVuY3Rpb24ob3B0aW9ucy5tb2R1bGVzLCAncG9zdFRyYW5zZm9ybU5vZGUnKTsKCiAgICBkZWxpbWl0ZXJzID0gb3B0aW9ucy5kZWxpbWl0ZXJzOwoKICAgIHZhciBzdGFjayA9IFtdOwogICAgdmFyIHByZXNlcnZlV2hpdGVzcGFjZSA9IG9wdGlvbnMucHJlc2VydmVXaGl0ZXNwYWNlICE9PSBmYWxzZTsKICAgIHZhciB3aGl0ZXNwYWNlT3B0aW9uID0gb3B0aW9ucy53aGl0ZXNwYWNlOwogICAgdmFyIHJvb3Q7CiAgICB2YXIgY3VycmVudFBhcmVudDsKICAgIHZhciBpblZQcmUgPSBmYWxzZTsKICAgIHZhciBpblByZSA9IGZhbHNlOwogICAgdmFyIHdhcm5lZCA9IGZhbHNlOwoKICAgIGZ1bmN0aW9uIHdhcm5PbmNlIChtc2csIHJhbmdlKSB7CiAgICAgIGlmICghd2FybmVkKSB7CiAgICAgICAgd2FybmVkID0gdHJ1ZTsKICAgICAgICB3YXJuJDIobXNnLCByYW5nZSk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjbG9zZUVsZW1lbnQgKGVsZW1lbnQpIHsKICAgICAgdHJpbUVuZGluZ1doaXRlc3BhY2UoZWxlbWVudCk7CiAgICAgIGlmICghaW5WUHJlICYmICFlbGVtZW50LnByb2Nlc3NlZCkgewogICAgICAgIGVsZW1lbnQgPSBwcm9jZXNzRWxlbWVudChlbGVtZW50LCBvcHRpb25zKTsKICAgICAgfQogICAgICAvLyB0cmVlIG1hbmFnZW1lbnQKICAgICAgaWYgKCFzdGFjay5sZW5ndGggJiYgZWxlbWVudCAhPT0gcm9vdCkgewogICAgICAgIC8vIGFsbG93IHJvb3QgZWxlbWVudHMgd2l0aCB2LWlmLCB2LWVsc2UtaWYgYW5kIHYtZWxzZQogICAgICAgIGlmIChyb290LmlmICYmIChlbGVtZW50LmVsc2VpZiB8fCBlbGVtZW50LmVsc2UpKSB7CiAgICAgICAgICB7CiAgICAgICAgICAgIGNoZWNrUm9vdENvbnN0cmFpbnRzKGVsZW1lbnQpOwogICAgICAgICAgfQogICAgICAgICAgYWRkSWZDb25kaXRpb24ocm9vdCwgewogICAgICAgICAgICBleHA6IGVsZW1lbnQuZWxzZWlmLAogICAgICAgICAgICBibG9jazogZWxlbWVudAogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHdhcm5PbmNlKAogICAgICAgICAgICAiQ29tcG9uZW50IHRlbXBsYXRlIHNob3VsZCBjb250YWluIGV4YWN0bHkgb25lIHJvb3QgZWxlbWVudC4gIiArCiAgICAgICAgICAgICJJZiB5b3UgYXJlIHVzaW5nIHYtaWYgb24gbXVsdGlwbGUgZWxlbWVudHMsICIgKwogICAgICAgICAgICAidXNlIHYtZWxzZS1pZiB0byBjaGFpbiB0aGVtIGluc3RlYWQuIiwKICAgICAgICAgICAgeyBzdGFydDogZWxlbWVudC5zdGFydCB9CiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoY3VycmVudFBhcmVudCAmJiAhZWxlbWVudC5mb3JiaWRkZW4pIHsKICAgICAgICBpZiAoZWxlbWVudC5lbHNlaWYgfHwgZWxlbWVudC5lbHNlKSB7CiAgICAgICAgICBwcm9jZXNzSWZDb25kaXRpb25zKGVsZW1lbnQsIGN1cnJlbnRQYXJlbnQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoZWxlbWVudC5zbG90U2NvcGUpIHsKICAgICAgICAgICAgLy8gc2NvcGVkIHNsb3QKICAgICAgICAgICAgLy8ga2VlcCBpdCBpbiB0aGUgY2hpbGRyZW4gbGlzdCBzbyB0aGF0IHYtZWxzZSgtaWYpIGNvbmRpdGlvbnMgY2FuCiAgICAgICAgICAgIC8vIGZpbmQgaXQgYXMgdGhlIHByZXYgbm9kZS4KICAgICAgICAgICAgdmFyIG5hbWUgPSBlbGVtZW50LnNsb3RUYXJnZXQgfHwgJyJkZWZhdWx0IicKICAgICAgICAgICAgOyhjdXJyZW50UGFyZW50LnNjb3BlZFNsb3RzIHx8IChjdXJyZW50UGFyZW50LnNjb3BlZFNsb3RzID0ge30pKVtuYW1lXSA9IGVsZW1lbnQ7CiAgICAgICAgICB9CiAgICAgICAgICBjdXJyZW50UGFyZW50LmNoaWxkcmVuLnB1c2goZWxlbWVudCk7CiAgICAgICAgICBlbGVtZW50LnBhcmVudCA9IGN1cnJlbnRQYXJlbnQ7CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyBmaW5hbCBjaGlsZHJlbiBjbGVhbnVwCiAgICAgIC8vIGZpbHRlciBvdXQgc2NvcGVkIHNsb3RzCiAgICAgIGVsZW1lbnQuY2hpbGRyZW4gPSBlbGVtZW50LmNoaWxkcmVuLmZpbHRlcihmdW5jdGlvbiAoYykgeyByZXR1cm4gIShjKS5zbG90U2NvcGU7IH0pOwogICAgICAvLyByZW1vdmUgdHJhaWxpbmcgd2hpdGVzcGFjZSBub2RlIGFnYWluCiAgICAgIHRyaW1FbmRpbmdXaGl0ZXNwYWNlKGVsZW1lbnQpOwoKICAgICAgLy8gY2hlY2sgcHJlIHN0YXRlCiAgICAgIGlmIChlbGVtZW50LnByZSkgewogICAgICAgIGluVlByZSA9IGZhbHNlOwogICAgICB9CiAgICAgIGlmIChwbGF0Zm9ybUlzUHJlVGFnKGVsZW1lbnQudGFnKSkgewogICAgICAgIGluUHJlID0gZmFsc2U7CiAgICAgIH0KICAgICAgLy8gYXBwbHkgcG9zdC10cmFuc2Zvcm1zCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zdFRyYW5zZm9ybXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBwb3N0VHJhbnNmb3Jtc1tpXShlbGVtZW50LCBvcHRpb25zKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHRyaW1FbmRpbmdXaGl0ZXNwYWNlIChlbCkgewogICAgICAvLyByZW1vdmUgdHJhaWxpbmcgd2hpdGVzcGFjZSBub2RlCiAgICAgIGlmICghaW5QcmUpIHsKICAgICAgICB2YXIgbGFzdE5vZGU7CiAgICAgICAgd2hpbGUgKAogICAgICAgICAgKGxhc3ROb2RlID0gZWwuY2hpbGRyZW5bZWwuY2hpbGRyZW4ubGVuZ3RoIC0gMV0pICYmCiAgICAgICAgICBsYXN0Tm9kZS50eXBlID09PSAzICYmCiAgICAgICAgICBsYXN0Tm9kZS50ZXh0ID09PSAnICcKICAgICAgICApIHsKICAgICAgICAgIGVsLmNoaWxkcmVuLnBvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNoZWNrUm9vdENvbnN0cmFpbnRzIChlbCkgewogICAgICBpZiAoZWwudGFnID09PSAnc2xvdCcgfHwgZWwudGFnID09PSAndGVtcGxhdGUnKSB7CiAgICAgICAgd2Fybk9uY2UoCiAgICAgICAgICAiQ2Fubm90IHVzZSA8IiArIChlbC50YWcpICsgIj4gYXMgY29tcG9uZW50IHJvb3QgZWxlbWVudCBiZWNhdXNlIGl0IG1heSAiICsKICAgICAgICAgICdjb250YWluIG11bHRpcGxlIG5vZGVzLicsCiAgICAgICAgICB7IHN0YXJ0OiBlbC5zdGFydCB9CiAgICAgICAgKTsKICAgICAgfQogICAgICBpZiAoZWwuYXR0cnNNYXAuaGFzT3duUHJvcGVydHkoJ3YtZm9yJykpIHsKICAgICAgICB3YXJuT25jZSgKICAgICAgICAgICdDYW5ub3QgdXNlIHYtZm9yIG9uIHN0YXRlZnVsIGNvbXBvbmVudCByb290IGVsZW1lbnQgYmVjYXVzZSAnICsKICAgICAgICAgICdpdCByZW5kZXJzIG11bHRpcGxlIGVsZW1lbnRzLicsCiAgICAgICAgICBlbC5yYXdBdHRyc01hcFsndi1mb3InXQogICAgICAgICk7CiAgICAgIH0KICAgIH0KCiAgICBwYXJzZUhUTUwodGVtcGxhdGUsIHsKICAgICAgd2Fybjogd2FybiQyLAogICAgICBleHBlY3RIVE1MOiBvcHRpb25zLmV4cGVjdEhUTUwsCiAgICAgIGlzVW5hcnlUYWc6IG9wdGlvbnMuaXNVbmFyeVRhZywKICAgICAgY2FuQmVMZWZ0T3BlblRhZzogb3B0aW9ucy5jYW5CZUxlZnRPcGVuVGFnLAogICAgICBzaG91bGREZWNvZGVOZXdsaW5lczogb3B0aW9ucy5zaG91bGREZWNvZGVOZXdsaW5lcywKICAgICAgc2hvdWxkRGVjb2RlTmV3bGluZXNGb3JIcmVmOiBvcHRpb25zLnNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZiwKICAgICAgc2hvdWxkS2VlcENvbW1lbnQ6IG9wdGlvbnMuY29tbWVudHMsCiAgICAgIG91dHB1dFNvdXJjZVJhbmdlOiBvcHRpb25zLm91dHB1dFNvdXJjZVJhbmdlLAogICAgICBzdGFydDogZnVuY3Rpb24gc3RhcnQgKHRhZywgYXR0cnMsIHVuYXJ5LCBzdGFydCQxLCBlbmQpIHsKICAgICAgICAvLyBjaGVjayBuYW1lc3BhY2UuCiAgICAgICAgLy8gaW5oZXJpdCBwYXJlbnQgbnMgaWYgdGhlcmUgaXMgb25lCiAgICAgICAgdmFyIG5zID0gKGN1cnJlbnRQYXJlbnQgJiYgY3VycmVudFBhcmVudC5ucykgfHwgcGxhdGZvcm1HZXRUYWdOYW1lc3BhY2UodGFnKTsKCiAgICAgICAgLy8gaGFuZGxlIElFIHN2ZyBidWcKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgICBpZiAoaXNJRSAmJiBucyA9PT0gJ3N2ZycpIHsKICAgICAgICAgIGF0dHJzID0gZ3VhcmRJRVNWR0J1ZyhhdHRycyk7CiAgICAgICAgfQoKICAgICAgICB2YXIgZWxlbWVudCA9IGNyZWF0ZUFTVEVsZW1lbnQodGFnLCBhdHRycywgY3VycmVudFBhcmVudCk7CiAgICAgICAgaWYgKG5zKSB7CiAgICAgICAgICBlbGVtZW50Lm5zID0gbnM7CiAgICAgICAgfQoKICAgICAgICB7CiAgICAgICAgICBpZiAob3B0aW9ucy5vdXRwdXRTb3VyY2VSYW5nZSkgewogICAgICAgICAgICBlbGVtZW50LnN0YXJ0ID0gc3RhcnQkMTsKICAgICAgICAgICAgZWxlbWVudC5lbmQgPSBlbmQ7CiAgICAgICAgICAgIGVsZW1lbnQucmF3QXR0cnNNYXAgPSBlbGVtZW50LmF0dHJzTGlzdC5yZWR1Y2UoZnVuY3Rpb24gKGN1bXVsYXRlZCwgYXR0cikgewogICAgICAgICAgICAgIGN1bXVsYXRlZFthdHRyLm5hbWVdID0gYXR0cjsKICAgICAgICAgICAgICByZXR1cm4gY3VtdWxhdGVkCiAgICAgICAgICAgIH0sIHt9KTsKICAgICAgICAgIH0KICAgICAgICAgIGF0dHJzLmZvckVhY2goZnVuY3Rpb24gKGF0dHIpIHsKICAgICAgICAgICAgaWYgKGludmFsaWRBdHRyaWJ1dGVSRS50ZXN0KGF0dHIubmFtZSkpIHsKICAgICAgICAgICAgICB3YXJuJDIoCiAgICAgICAgICAgICAgICAiSW52YWxpZCBkeW5hbWljIGFyZ3VtZW50IGV4cHJlc3Npb246IGF0dHJpYnV0ZSBuYW1lcyBjYW5ub3QgY29udGFpbiAiICsKICAgICAgICAgICAgICAgICJzcGFjZXMsIHF1b3RlcywgPCwgPiwgLyBvciA9LiIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIHN0YXJ0OiBhdHRyLnN0YXJ0ICsgYXR0ci5uYW1lLmluZGV4T2YoIlsiKSwKICAgICAgICAgICAgICAgICAgZW5kOiBhdHRyLnN0YXJ0ICsgYXR0ci5uYW1lLmxlbmd0aAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKGlzRm9yYmlkZGVuVGFnKGVsZW1lbnQpICYmICFpc1NlcnZlclJlbmRlcmluZygpKSB7CiAgICAgICAgICBlbGVtZW50LmZvcmJpZGRlbiA9IHRydWU7CiAgICAgICAgICB3YXJuJDIoCiAgICAgICAgICAgICdUZW1wbGF0ZXMgc2hvdWxkIG9ubHkgYmUgcmVzcG9uc2libGUgZm9yIG1hcHBpbmcgdGhlIHN0YXRlIHRvIHRoZSAnICsKICAgICAgICAgICAgJ1VJLiBBdm9pZCBwbGFjaW5nIHRhZ3Mgd2l0aCBzaWRlLWVmZmVjdHMgaW4geW91ciB0ZW1wbGF0ZXMsIHN1Y2ggYXMgJyArCiAgICAgICAgICAgICI8IiArIHRhZyArICI+IiArICcsIGFzIHRoZXkgd2lsbCBub3QgYmUgcGFyc2VkLicsCiAgICAgICAgICAgIHsgc3RhcnQ6IGVsZW1lbnQuc3RhcnQgfQogICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgIC8vIGFwcGx5IHByZS10cmFuc2Zvcm1zCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcmVUcmFuc2Zvcm1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBlbGVtZW50ID0gcHJlVHJhbnNmb3Jtc1tpXShlbGVtZW50LCBvcHRpb25zKSB8fCBlbGVtZW50OwogICAgICAgIH0KCiAgICAgICAgaWYgKCFpblZQcmUpIHsKICAgICAgICAgIHByb2Nlc3NQcmUoZWxlbWVudCk7CiAgICAgICAgICBpZiAoZWxlbWVudC5wcmUpIHsKICAgICAgICAgICAgaW5WUHJlID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHBsYXRmb3JtSXNQcmVUYWcoZWxlbWVudC50YWcpKSB7CiAgICAgICAgICBpblByZSA9IHRydWU7CiAgICAgICAgfQogICAgICAgIGlmIChpblZQcmUpIHsKICAgICAgICAgIHByb2Nlc3NSYXdBdHRycyhlbGVtZW50KTsKICAgICAgICB9IGVsc2UgaWYgKCFlbGVtZW50LnByb2Nlc3NlZCkgewogICAgICAgICAgLy8gc3RydWN0dXJhbCBkaXJlY3RpdmVzCiAgICAgICAgICBwcm9jZXNzRm9yKGVsZW1lbnQpOwogICAgICAgICAgcHJvY2Vzc0lmKGVsZW1lbnQpOwogICAgICAgICAgcHJvY2Vzc09uY2UoZWxlbWVudCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoIXJvb3QpIHsKICAgICAgICAgIHJvb3QgPSBlbGVtZW50OwogICAgICAgICAgewogICAgICAgICAgICBjaGVja1Jvb3RDb25zdHJhaW50cyhyb290KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICghdW5hcnkpIHsKICAgICAgICAgIGN1cnJlbnRQYXJlbnQgPSBlbGVtZW50OwogICAgICAgICAgc3RhY2sucHVzaChlbGVtZW50KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2xvc2VFbGVtZW50KGVsZW1lbnQpOwogICAgICAgIH0KICAgICAgfSwKCiAgICAgIGVuZDogZnVuY3Rpb24gZW5kICh0YWcsIHN0YXJ0LCBlbmQkMSkgewogICAgICAgIHZhciBlbGVtZW50ID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07CiAgICAgICAgLy8gcG9wIHN0YWNrCiAgICAgICAgc3RhY2subGVuZ3RoIC09IDE7CiAgICAgICAgY3VycmVudFBhcmVudCA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdOwogICAgICAgIGlmIChvcHRpb25zLm91dHB1dFNvdXJjZVJhbmdlKSB7CiAgICAgICAgICBlbGVtZW50LmVuZCA9IGVuZCQxOwogICAgICAgIH0KICAgICAgICBjbG9zZUVsZW1lbnQoZWxlbWVudCk7CiAgICAgIH0sCgogICAgICBjaGFyczogZnVuY3Rpb24gY2hhcnMgKHRleHQsIHN0YXJ0LCBlbmQpIHsKICAgICAgICBpZiAoIWN1cnJlbnRQYXJlbnQpIHsKICAgICAgICAgIHsKICAgICAgICAgICAgaWYgKHRleHQgPT09IHRlbXBsYXRlKSB7CiAgICAgICAgICAgICAgd2Fybk9uY2UoCiAgICAgICAgICAgICAgICAnQ29tcG9uZW50IHRlbXBsYXRlIHJlcXVpcmVzIGEgcm9vdCBlbGVtZW50LCByYXRoZXIgdGhhbiBqdXN0IHRleHQuJywKICAgICAgICAgICAgICAgIHsgc3RhcnQ6IHN0YXJ0IH0KICAgICAgICAgICAgICApOwogICAgICAgICAgICB9IGVsc2UgaWYgKCh0ZXh0ID0gdGV4dC50cmltKCkpKSB7CiAgICAgICAgICAgICAgd2Fybk9uY2UoCiAgICAgICAgICAgICAgICAoInRleHQgXCIiICsgdGV4dCArICJcIiBvdXRzaWRlIHJvb3QgZWxlbWVudCB3aWxsIGJlIGlnbm9yZWQuIiksCiAgICAgICAgICAgICAgICB7IHN0YXJ0OiBzdGFydCB9CiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIC8vIElFIHRleHRhcmVhIHBsYWNlaG9sZGVyIGJ1ZwogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgICAgIGlmIChpc0lFICYmCiAgICAgICAgICBjdXJyZW50UGFyZW50LnRhZyA9PT0gJ3RleHRhcmVhJyAmJgogICAgICAgICAgY3VycmVudFBhcmVudC5hdHRyc01hcC5wbGFjZWhvbGRlciA9PT0gdGV4dAogICAgICAgICkgewogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIHZhciBjaGlsZHJlbiA9IGN1cnJlbnRQYXJlbnQuY2hpbGRyZW47CiAgICAgICAgaWYgKGluUHJlIHx8IHRleHQudHJpbSgpKSB7CiAgICAgICAgICB0ZXh0ID0gaXNUZXh0VGFnKGN1cnJlbnRQYXJlbnQpID8gdGV4dCA6IGRlY29kZUhUTUxDYWNoZWQodGV4dCk7CiAgICAgICAgfSBlbHNlIGlmICghY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgICAvLyByZW1vdmUgdGhlIHdoaXRlc3BhY2Utb25seSBub2RlIHJpZ2h0IGFmdGVyIGFuIG9wZW5pbmcgdGFnCiAgICAgICAgICB0ZXh0ID0gJyc7CiAgICAgICAgfSBlbHNlIGlmICh3aGl0ZXNwYWNlT3B0aW9uKSB7CiAgICAgICAgICBpZiAod2hpdGVzcGFjZU9wdGlvbiA9PT0gJ2NvbmRlbnNlJykgewogICAgICAgICAgICAvLyBpbiBjb25kZW5zZSBtb2RlLCByZW1vdmUgdGhlIHdoaXRlc3BhY2Ugbm9kZSBpZiBpdCBjb250YWlucwogICAgICAgICAgICAvLyBsaW5lIGJyZWFrLCBvdGhlcndpc2UgY29uZGVuc2UgdG8gYSBzaW5nbGUgc3BhY2UKICAgICAgICAgICAgdGV4dCA9IGxpbmVCcmVha1JFLnRlc3QodGV4dCkgPyAnJyA6ICcgJzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRleHQgPSAnICc7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRleHQgPSBwcmVzZXJ2ZVdoaXRlc3BhY2UgPyAnICcgOiAnJzsKICAgICAgICB9CiAgICAgICAgaWYgKHRleHQpIHsKICAgICAgICAgIGlmICghaW5QcmUgJiYgd2hpdGVzcGFjZU9wdGlvbiA9PT0gJ2NvbmRlbnNlJykgewogICAgICAgICAgICAvLyBjb25kZW5zZSBjb25zZWN1dGl2ZSB3aGl0ZXNwYWNlcyBpbnRvIHNpbmdsZSBzcGFjZQogICAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKHdoaXRlc3BhY2VSRSQxLCAnICcpOwogICAgICAgICAgfQogICAgICAgICAgdmFyIHJlczsKICAgICAgICAgIHZhciBjaGlsZDsKICAgICAgICAgIGlmICghaW5WUHJlICYmIHRleHQgIT09ICcgJyAmJiAocmVzID0gcGFyc2VUZXh0KHRleHQsIGRlbGltaXRlcnMpKSkgewogICAgICAgICAgICBjaGlsZCA9IHsKICAgICAgICAgICAgICB0eXBlOiAyLAogICAgICAgICAgICAgIGV4cHJlc3Npb246IHJlcy5leHByZXNzaW9uLAogICAgICAgICAgICAgIHRva2VuczogcmVzLnRva2VucywKICAgICAgICAgICAgICB0ZXh0OiB0ZXh0CiAgICAgICAgICAgIH07CiAgICAgICAgICB9IGVsc2UgaWYgKHRleHQgIT09ICcgJyB8fCAhY2hpbGRyZW4ubGVuZ3RoIHx8IGNoaWxkcmVuW2NoaWxkcmVuLmxlbmd0aCAtIDFdLnRleHQgIT09ICcgJykgewogICAgICAgICAgICBjaGlsZCA9IHsKICAgICAgICAgICAgICB0eXBlOiAzLAogICAgICAgICAgICAgIHRleHQ6IHRleHQKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChjaGlsZCkgewogICAgICAgICAgICBpZiAob3B0aW9ucy5vdXRwdXRTb3VyY2VSYW5nZSkgewogICAgICAgICAgICAgIGNoaWxkLnN0YXJ0ID0gc3RhcnQ7CiAgICAgICAgICAgICAgY2hpbGQuZW5kID0gZW5kOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNoaWxkcmVuLnB1c2goY2hpbGQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgY29tbWVudDogZnVuY3Rpb24gY29tbWVudCAodGV4dCwgc3RhcnQsIGVuZCkgewogICAgICAgIC8vIGFkZGluZyBhbnl0aW5nIGFzIGEgc2libGluZyB0byB0aGUgcm9vdCBub2RlIGlzIGZvcmJpZGRlbgogICAgICAgIC8vIGNvbW1lbnRzIHNob3VsZCBzdGlsbCBiZSBhbGxvd2VkLCBidXQgaWdub3JlZAogICAgICAgIGlmIChjdXJyZW50UGFyZW50KSB7CiAgICAgICAgICB2YXIgY2hpbGQgPSB7CiAgICAgICAgICAgIHR5cGU6IDMsCiAgICAgICAgICAgIHRleHQ6IHRleHQsCiAgICAgICAgICAgIGlzQ29tbWVudDogdHJ1ZQogICAgICAgICAgfTsKICAgICAgICAgIGlmIChvcHRpb25zLm91dHB1dFNvdXJjZVJhbmdlKSB7CiAgICAgICAgICAgIGNoaWxkLnN0YXJ0ID0gc3RhcnQ7CiAgICAgICAgICAgIGNoaWxkLmVuZCA9IGVuZDsKICAgICAgICAgIH0KICAgICAgICAgIGN1cnJlbnRQYXJlbnQuY2hpbGRyZW4ucHVzaChjaGlsZCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIHJldHVybiByb290CiAgfQoKICBmdW5jdGlvbiBwcm9jZXNzUHJlIChlbCkgewogICAgaWYgKGdldEFuZFJlbW92ZUF0dHIoZWwsICd2LXByZScpICE9IG51bGwpIHsKICAgICAgZWwucHJlID0gdHJ1ZTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHByb2Nlc3NSYXdBdHRycyAoZWwpIHsKICAgIHZhciBsaXN0ID0gZWwuYXR0cnNMaXN0OwogICAgdmFyIGxlbiA9IGxpc3QubGVuZ3RoOwogICAgaWYgKGxlbikgewogICAgICB2YXIgYXR0cnMgPSBlbC5hdHRycyA9IG5ldyBBcnJheShsZW4pOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgYXR0cnNbaV0gPSB7CiAgICAgICAgICBuYW1lOiBsaXN0W2ldLm5hbWUsCiAgICAgICAgICB2YWx1ZTogSlNPTi5zdHJpbmdpZnkobGlzdFtpXS52YWx1ZSkKICAgICAgICB9OwogICAgICAgIGlmIChsaXN0W2ldLnN0YXJ0ICE9IG51bGwpIHsKICAgICAgICAgIGF0dHJzW2ldLnN0YXJ0ID0gbGlzdFtpXS5zdGFydDsKICAgICAgICAgIGF0dHJzW2ldLmVuZCA9IGxpc3RbaV0uZW5kOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIGlmICghZWwucHJlKSB7CiAgICAgIC8vIG5vbiByb290IG5vZGUgaW4gcHJlIGJsb2NrcyB3aXRoIG5vIGF0dHJpYnV0ZXMKICAgICAgZWwucGxhaW4gPSB0cnVlOwogICAgfQogIH0KCiAgZnVuY3Rpb24gcHJvY2Vzc0VsZW1lbnQgKAogICAgZWxlbWVudCwKICAgIG9wdGlvbnMKICApIHsKICAgIHByb2Nlc3NLZXkoZWxlbWVudCk7CgogICAgLy8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhpcyBpcyBhIHBsYWluIGVsZW1lbnQgYWZ0ZXIKICAgIC8vIHJlbW92aW5nIHN0cnVjdHVyYWwgYXR0cmlidXRlcwogICAgZWxlbWVudC5wbGFpbiA9ICgKICAgICAgIWVsZW1lbnQua2V5ICYmCiAgICAgICFlbGVtZW50LnNjb3BlZFNsb3RzICYmCiAgICAgICFlbGVtZW50LmF0dHJzTGlzdC5sZW5ndGgKICAgICk7CgogICAgcHJvY2Vzc1JlZihlbGVtZW50KTsKICAgIHByb2Nlc3NTbG90Q29udGVudChlbGVtZW50KTsKICAgIHByb2Nlc3NTbG90T3V0bGV0KGVsZW1lbnQpOwogICAgcHJvY2Vzc0NvbXBvbmVudChlbGVtZW50KTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJhbnNmb3Jtcy5sZW5ndGg7IGkrKykgewogICAgICBlbGVtZW50ID0gdHJhbnNmb3Jtc1tpXShlbGVtZW50LCBvcHRpb25zKSB8fCBlbGVtZW50OwogICAgfQogICAgcHJvY2Vzc0F0dHJzKGVsZW1lbnQpOwogICAgcmV0dXJuIGVsZW1lbnQKICB9CgogIGZ1bmN0aW9uIHByb2Nlc3NLZXkgKGVsKSB7CiAgICB2YXIgZXhwID0gZ2V0QmluZGluZ0F0dHIoZWwsICdrZXknKTsKICAgIGlmIChleHApIHsKICAgICAgewogICAgICAgIGlmIChlbC50YWcgPT09ICd0ZW1wbGF0ZScpIHsKICAgICAgICAgIHdhcm4kMigKICAgICAgICAgICAgIjx0ZW1wbGF0ZT4gY2Fubm90IGJlIGtleWVkLiBQbGFjZSB0aGUga2V5IG9uIHJlYWwgZWxlbWVudHMgaW5zdGVhZC4iLAogICAgICAgICAgICBnZXRSYXdCaW5kaW5nQXR0cihlbCwgJ2tleScpCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBpZiAoZWwuZm9yKSB7CiAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBlbC5pdGVyYXRvcjIgfHwgZWwuaXRlcmF0b3IxOwogICAgICAgICAgdmFyIHBhcmVudCA9IGVsLnBhcmVudDsKICAgICAgICAgIGlmIChpdGVyYXRvciAmJiBpdGVyYXRvciA9PT0gZXhwICYmIHBhcmVudCAmJiBwYXJlbnQudGFnID09PSAndHJhbnNpdGlvbi1ncm91cCcpIHsKICAgICAgICAgICAgd2FybiQyKAogICAgICAgICAgICAgICJEbyBub3QgdXNlIHYtZm9yIGluZGV4IGFzIGtleSBvbiA8dHJhbnNpdGlvbi1ncm91cD4gY2hpbGRyZW4sICIgKwogICAgICAgICAgICAgICJ0aGlzIGlzIHRoZSBzYW1lIGFzIG5vdCB1c2luZyBrZXlzLiIsCiAgICAgICAgICAgICAgZ2V0UmF3QmluZGluZ0F0dHIoZWwsICdrZXknKSwKICAgICAgICAgICAgICB0cnVlIC8qIHRpcCAqLwogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBlbC5rZXkgPSBleHA7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBwcm9jZXNzUmVmIChlbCkgewogICAgdmFyIHJlZiA9IGdldEJpbmRpbmdBdHRyKGVsLCAncmVmJyk7CiAgICBpZiAocmVmKSB7CiAgICAgIGVsLnJlZiA9IHJlZjsKICAgICAgZWwucmVmSW5Gb3IgPSBjaGVja0luRm9yKGVsKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHByb2Nlc3NGb3IgKGVsKSB7CiAgICB2YXIgZXhwOwogICAgaWYgKChleHAgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1mb3InKSkpIHsKICAgICAgdmFyIHJlcyA9IHBhcnNlRm9yKGV4cCk7CiAgICAgIGlmIChyZXMpIHsKICAgICAgICBleHRlbmQoZWwsIHJlcyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgd2FybiQyKAogICAgICAgICAgKCJJbnZhbGlkIHYtZm9yIGV4cHJlc3Npb246ICIgKyBleHApLAogICAgICAgICAgZWwucmF3QXR0cnNNYXBbJ3YtZm9yJ10KICAgICAgICApOwogICAgICB9CiAgICB9CiAgfQoKCgogIGZ1bmN0aW9uIHBhcnNlRm9yIChleHApIHsKICAgIHZhciBpbk1hdGNoID0gZXhwLm1hdGNoKGZvckFsaWFzUkUpOwogICAgaWYgKCFpbk1hdGNoKSB7IHJldHVybiB9CiAgICB2YXIgcmVzID0ge307CiAgICByZXMuZm9yID0gaW5NYXRjaFsyXS50cmltKCk7CiAgICB2YXIgYWxpYXMgPSBpbk1hdGNoWzFdLnRyaW0oKS5yZXBsYWNlKHN0cmlwUGFyZW5zUkUsICcnKTsKICAgIHZhciBpdGVyYXRvck1hdGNoID0gYWxpYXMubWF0Y2goZm9ySXRlcmF0b3JSRSk7CiAgICBpZiAoaXRlcmF0b3JNYXRjaCkgewogICAgICByZXMuYWxpYXMgPSBhbGlhcy5yZXBsYWNlKGZvckl0ZXJhdG9yUkUsICcnKS50cmltKCk7CiAgICAgIHJlcy5pdGVyYXRvcjEgPSBpdGVyYXRvck1hdGNoWzFdLnRyaW0oKTsKICAgICAgaWYgKGl0ZXJhdG9yTWF0Y2hbMl0pIHsKICAgICAgICByZXMuaXRlcmF0b3IyID0gaXRlcmF0b3JNYXRjaFsyXS50cmltKCk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHJlcy5hbGlhcyA9IGFsaWFzOwogICAgfQogICAgcmV0dXJuIHJlcwogIH0KCiAgZnVuY3Rpb24gcHJvY2Vzc0lmIChlbCkgewogICAgdmFyIGV4cCA9IGdldEFuZFJlbW92ZUF0dHIoZWwsICd2LWlmJyk7CiAgICBpZiAoZXhwKSB7CiAgICAgIGVsLmlmID0gZXhwOwogICAgICBhZGRJZkNvbmRpdGlvbihlbCwgewogICAgICAgIGV4cDogZXhwLAogICAgICAgIGJsb2NrOiBlbAogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1lbHNlJykgIT0gbnVsbCkgewogICAgICAgIGVsLmVsc2UgPSB0cnVlOwogICAgICB9CiAgICAgIHZhciBlbHNlaWYgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1lbHNlLWlmJyk7CiAgICAgIGlmIChlbHNlaWYpIHsKICAgICAgICBlbC5lbHNlaWYgPSBlbHNlaWY7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIHByb2Nlc3NJZkNvbmRpdGlvbnMgKGVsLCBwYXJlbnQpIHsKICAgIHZhciBwcmV2ID0gZmluZFByZXZFbGVtZW50KHBhcmVudC5jaGlsZHJlbik7CiAgICBpZiAocHJldiAmJiBwcmV2LmlmKSB7CiAgICAgIGFkZElmQ29uZGl0aW9uKHByZXYsIHsKICAgICAgICBleHA6IGVsLmVsc2VpZiwKICAgICAgICBibG9jazogZWwKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICB3YXJuJDIoCiAgICAgICAgInYtIiArIChlbC5lbHNlaWYgPyAoJ2Vsc2UtaWY9IicgKyBlbC5lbHNlaWYgKyAnIicpIDogJ2Vsc2UnKSArICIgIiArCiAgICAgICAgInVzZWQgb24gZWxlbWVudCA8IiArIChlbC50YWcpICsgIj4gd2l0aG91dCBjb3JyZXNwb25kaW5nIHYtaWYuIiwKICAgICAgICBlbC5yYXdBdHRyc01hcFtlbC5lbHNlaWYgPyAndi1lbHNlLWlmJyA6ICd2LWVsc2UnXQogICAgICApOwogICAgfQogIH0KCiAgZnVuY3Rpb24gZmluZFByZXZFbGVtZW50IChjaGlsZHJlbikgewogICAgdmFyIGkgPSBjaGlsZHJlbi5sZW5ndGg7CiAgICB3aGlsZSAoaS0tKSB7CiAgICAgIGlmIChjaGlsZHJlbltpXS50eXBlID09PSAxKSB7CiAgICAgICAgcmV0dXJuIGNoaWxkcmVuW2ldCiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGNoaWxkcmVuW2ldLnRleHQgIT09ICcgJykgewogICAgICAgICAgd2FybiQyKAogICAgICAgICAgICAidGV4dCBcIiIgKyAoY2hpbGRyZW5baV0udGV4dC50cmltKCkpICsgIlwiIGJldHdlZW4gdi1pZiBhbmQgdi1lbHNlKC1pZikgIiArCiAgICAgICAgICAgICJ3aWxsIGJlIGlnbm9yZWQuIiwKICAgICAgICAgICAgY2hpbGRyZW5baV0KICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGNoaWxkcmVuLnBvcCgpOwogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBhZGRJZkNvbmRpdGlvbiAoZWwsIGNvbmRpdGlvbikgewogICAgaWYgKCFlbC5pZkNvbmRpdGlvbnMpIHsKICAgICAgZWwuaWZDb25kaXRpb25zID0gW107CiAgICB9CiAgICBlbC5pZkNvbmRpdGlvbnMucHVzaChjb25kaXRpb24pOwogIH0KCiAgZnVuY3Rpb24gcHJvY2Vzc09uY2UgKGVsKSB7CiAgICB2YXIgb25jZSQkMSA9IGdldEFuZFJlbW92ZUF0dHIoZWwsICd2LW9uY2UnKTsKICAgIGlmIChvbmNlJCQxICE9IG51bGwpIHsKICAgICAgZWwub25jZSA9IHRydWU7CiAgICB9CiAgfQoKICAvLyBoYW5kbGUgY29udGVudCBiZWluZyBwYXNzZWQgdG8gYSBjb21wb25lbnQgYXMgc2xvdCwKICAvLyBlLmcuIDx0ZW1wbGF0ZSBzbG90PSJ4eHgiPiwgPGRpdiBzbG90LXNjb3BlPSJ4eHgiPgogIGZ1bmN0aW9uIHByb2Nlc3NTbG90Q29udGVudCAoZWwpIHsKICAgIHZhciBzbG90U2NvcGU7CiAgICBpZiAoZWwudGFnID09PSAndGVtcGxhdGUnKSB7CiAgICAgIHNsb3RTY29wZSA9IGdldEFuZFJlbW92ZUF0dHIoZWwsICdzY29wZScpOwogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgaWYgKHNsb3RTY29wZSkgewogICAgICAgIHdhcm4kMigKICAgICAgICAgICJ0aGUgXCJzY29wZVwiIGF0dHJpYnV0ZSBmb3Igc2NvcGVkIHNsb3RzIGhhdmUgYmVlbiBkZXByZWNhdGVkIGFuZCAiICsKICAgICAgICAgICJyZXBsYWNlZCBieSBcInNsb3Qtc2NvcGVcIiBzaW5jZSAyLjUuIFRoZSBuZXcgXCJzbG90LXNjb3BlXCIgYXR0cmlidXRlICIgKwogICAgICAgICAgImNhbiBhbHNvIGJlIHVzZWQgb24gcGxhaW4gZWxlbWVudHMgaW4gYWRkaXRpb24gdG8gPHRlbXBsYXRlPiB0byAiICsKICAgICAgICAgICJkZW5vdGUgc2NvcGVkIHNsb3RzLiIsCiAgICAgICAgICBlbC5yYXdBdHRyc01hcFsnc2NvcGUnXSwKICAgICAgICAgIHRydWUKICAgICAgICApOwogICAgICB9CiAgICAgIGVsLnNsb3RTY29wZSA9IHNsb3RTY29wZSB8fCBnZXRBbmRSZW1vdmVBdHRyKGVsLCAnc2xvdC1zY29wZScpOwogICAgfSBlbHNlIGlmICgoc2xvdFNjb3BlID0gZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ3Nsb3Qtc2NvcGUnKSkpIHsKICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICAgIGlmIChlbC5hdHRyc01hcFsndi1mb3InXSkgewogICAgICAgIHdhcm4kMigKICAgICAgICAgICJBbWJpZ3VvdXMgY29tYmluZWQgdXNhZ2Ugb2Ygc2xvdC1zY29wZSBhbmQgdi1mb3Igb24gPCIgKyAoZWwudGFnKSArICI+ICIgKwogICAgICAgICAgIih2LWZvciB0YWtlcyBoaWdoZXIgcHJpb3JpdHkpLiBVc2UgYSB3cmFwcGVyIDx0ZW1wbGF0ZT4gZm9yIHRoZSAiICsKICAgICAgICAgICJzY29wZWQgc2xvdCB0byBtYWtlIGl0IGNsZWFyZXIuIiwKICAgICAgICAgIGVsLnJhd0F0dHJzTWFwWydzbG90LXNjb3BlJ10sCiAgICAgICAgICB0cnVlCiAgICAgICAgKTsKICAgICAgfQogICAgICBlbC5zbG90U2NvcGUgPSBzbG90U2NvcGU7CiAgICB9CgogICAgLy8gc2xvdD0ieHh4IgogICAgdmFyIHNsb3RUYXJnZXQgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ3Nsb3QnKTsKICAgIGlmIChzbG90VGFyZ2V0KSB7CiAgICAgIGVsLnNsb3RUYXJnZXQgPSBzbG90VGFyZ2V0ID09PSAnIiInID8gJyJkZWZhdWx0IicgOiBzbG90VGFyZ2V0OwogICAgICBlbC5zbG90VGFyZ2V0RHluYW1pYyA9ICEhKGVsLmF0dHJzTWFwWyc6c2xvdCddIHx8IGVsLmF0dHJzTWFwWyd2LWJpbmQ6c2xvdCddKTsKICAgICAgLy8gcHJlc2VydmUgc2xvdCBhcyBhbiBhdHRyaWJ1dGUgZm9yIG5hdGl2ZSBzaGFkb3cgRE9NIGNvbXBhdAogICAgICAvLyBvbmx5IGZvciBub24tc2NvcGVkIHNsb3RzLgogICAgICBpZiAoZWwudGFnICE9PSAndGVtcGxhdGUnICYmICFlbC5zbG90U2NvcGUpIHsKICAgICAgICBhZGRBdHRyKGVsLCAnc2xvdCcsIHNsb3RUYXJnZXQsIGdldFJhd0JpbmRpbmdBdHRyKGVsLCAnc2xvdCcpKTsKICAgICAgfQogICAgfQoKICAgIC8vIDIuNiB2LXNsb3Qgc3ludGF4CiAgICB7CiAgICAgIGlmIChlbC50YWcgPT09ICd0ZW1wbGF0ZScpIHsKICAgICAgICAvLyB2LXNsb3Qgb24gPHRlbXBsYXRlPgogICAgICAgIHZhciBzbG90QmluZGluZyA9IGdldEFuZFJlbW92ZUF0dHJCeVJlZ2V4KGVsLCBzbG90UkUpOwogICAgICAgIGlmIChzbG90QmluZGluZykgewogICAgICAgICAgewogICAgICAgICAgICBpZiAoZWwuc2xvdFRhcmdldCB8fCBlbC5zbG90U2NvcGUpIHsKICAgICAgICAgICAgICB3YXJuJDIoCiAgICAgICAgICAgICAgICAiVW5leHBlY3RlZCBtaXhlZCB1c2FnZSBvZiBkaWZmZXJlbnQgc2xvdCBzeW50YXhlcy4iLAogICAgICAgICAgICAgICAgZWwKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChlbC5wYXJlbnQgJiYgIW1heWJlQ29tcG9uZW50KGVsLnBhcmVudCkpIHsKICAgICAgICAgICAgICB3YXJuJDIoCiAgICAgICAgICAgICAgICAiPHRlbXBsYXRlIHYtc2xvdD4gY2FuIG9ubHkgYXBwZWFyIGF0IHRoZSByb290IGxldmVsIGluc2lkZSAiICsKICAgICAgICAgICAgICAgICJ0aGUgcmVjZWl2aW5nIGNvbXBvbmVudCIsCiAgICAgICAgICAgICAgICBlbAogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHZhciByZWYgPSBnZXRTbG90TmFtZShzbG90QmluZGluZyk7CiAgICAgICAgICB2YXIgbmFtZSA9IHJlZi5uYW1lOwogICAgICAgICAgdmFyIGR5bmFtaWMgPSByZWYuZHluYW1pYzsKICAgICAgICAgIGVsLnNsb3RUYXJnZXQgPSBuYW1lOwogICAgICAgICAgZWwuc2xvdFRhcmdldER5bmFtaWMgPSBkeW5hbWljOwogICAgICAgICAgZWwuc2xvdFNjb3BlID0gc2xvdEJpbmRpbmcudmFsdWUgfHwgZW1wdHlTbG90U2NvcGVUb2tlbjsgLy8gZm9yY2UgaXQgaW50byBhIHNjb3BlZCBzbG90IGZvciBwZXJmCiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIHYtc2xvdCBvbiBjb21wb25lbnQsIGRlbm90ZXMgZGVmYXVsdCBzbG90CiAgICAgICAgdmFyIHNsb3RCaW5kaW5nJDEgPSBnZXRBbmRSZW1vdmVBdHRyQnlSZWdleChlbCwgc2xvdFJFKTsKICAgICAgICBpZiAoc2xvdEJpbmRpbmckMSkgewogICAgICAgICAgewogICAgICAgICAgICBpZiAoIW1heWJlQ29tcG9uZW50KGVsKSkgewogICAgICAgICAgICAgIHdhcm4kMigKICAgICAgICAgICAgICAgICJ2LXNsb3QgY2FuIG9ubHkgYmUgdXNlZCBvbiBjb21wb25lbnRzIG9yIDx0ZW1wbGF0ZT4uIiwKICAgICAgICAgICAgICAgIHNsb3RCaW5kaW5nJDEKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChlbC5zbG90U2NvcGUgfHwgZWwuc2xvdFRhcmdldCkgewogICAgICAgICAgICAgIHdhcm4kMigKICAgICAgICAgICAgICAgICJVbmV4cGVjdGVkIG1peGVkIHVzYWdlIG9mIGRpZmZlcmVudCBzbG90IHN5bnRheGVzLiIsCiAgICAgICAgICAgICAgICBlbAogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGVsLnNjb3BlZFNsb3RzKSB7CiAgICAgICAgICAgICAgd2FybiQyKAogICAgICAgICAgICAgICAgIlRvIGF2b2lkIHNjb3BlIGFtYmlndWl0eSwgdGhlIGRlZmF1bHQgc2xvdCBzaG91bGQgYWxzbyB1c2UgIiArCiAgICAgICAgICAgICAgICAiPHRlbXBsYXRlPiBzeW50YXggd2hlbiB0aGVyZSBhcmUgb3RoZXIgbmFtZWQgc2xvdHMuIiwKICAgICAgICAgICAgICAgIHNsb3RCaW5kaW5nJDEKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICAvLyBhZGQgdGhlIGNvbXBvbmVudCdzIGNoaWxkcmVuIHRvIGl0cyBkZWZhdWx0IHNsb3QKICAgICAgICAgIHZhciBzbG90cyA9IGVsLnNjb3BlZFNsb3RzIHx8IChlbC5zY29wZWRTbG90cyA9IHt9KTsKICAgICAgICAgIHZhciByZWYkMSA9IGdldFNsb3ROYW1lKHNsb3RCaW5kaW5nJDEpOwogICAgICAgICAgdmFyIG5hbWUkMSA9IHJlZiQxLm5hbWU7CiAgICAgICAgICB2YXIgZHluYW1pYyQxID0gcmVmJDEuZHluYW1pYzsKICAgICAgICAgIHZhciBzbG90Q29udGFpbmVyID0gc2xvdHNbbmFtZSQxXSA9IGNyZWF0ZUFTVEVsZW1lbnQoJ3RlbXBsYXRlJywgW10sIGVsKTsKICAgICAgICAgIHNsb3RDb250YWluZXIuc2xvdFRhcmdldCA9IG5hbWUkMTsKICAgICAgICAgIHNsb3RDb250YWluZXIuc2xvdFRhcmdldER5bmFtaWMgPSBkeW5hbWljJDE7CiAgICAgICAgICBzbG90Q29udGFpbmVyLmNoaWxkcmVuID0gZWwuY2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICAgIGlmICghYy5zbG90U2NvcGUpIHsKICAgICAgICAgICAgICBjLnBhcmVudCA9IHNsb3RDb250YWluZXI7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWUKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICBzbG90Q29udGFpbmVyLnNsb3RTY29wZSA9IHNsb3RCaW5kaW5nJDEudmFsdWUgfHwgZW1wdHlTbG90U2NvcGVUb2tlbjsKICAgICAgICAgIC8vIHJlbW92ZSBjaGlsZHJlbiBhcyB0aGV5IGFyZSByZXR1cm5lZCBmcm9tIHNjb3BlZFNsb3RzIG5vdwogICAgICAgICAgZWwuY2hpbGRyZW4gPSBbXTsKICAgICAgICAgIC8vIG1hcmsgZWwgbm9uLXBsYWluIHNvIGRhdGEgZ2V0cyBnZW5lcmF0ZWQKICAgICAgICAgIGVsLnBsYWluID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBnZXRTbG90TmFtZSAoYmluZGluZykgewogICAgdmFyIG5hbWUgPSBiaW5kaW5nLm5hbWUucmVwbGFjZShzbG90UkUsICcnKTsKICAgIGlmICghbmFtZSkgewogICAgICBpZiAoYmluZGluZy5uYW1lWzBdICE9PSAnIycpIHsKICAgICAgICBuYW1lID0gJ2RlZmF1bHQnOwogICAgICB9IGVsc2UgewogICAgICAgIHdhcm4kMigKICAgICAgICAgICJ2LXNsb3Qgc2hvcnRoYW5kIHN5bnRheCByZXF1aXJlcyBhIHNsb3QgbmFtZS4iLAogICAgICAgICAgYmluZGluZwogICAgICAgICk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBkeW5hbWljQXJnUkUudGVzdChuYW1lKQogICAgICAvLyBkeW5hbWljIFtuYW1lXQogICAgICA/IHsgbmFtZTogbmFtZS5zbGljZSgxLCAtMSksIGR5bmFtaWM6IHRydWUgfQogICAgICAvLyBzdGF0aWMgbmFtZQogICAgICA6IHsgbmFtZTogKCJcIiIgKyBuYW1lICsgIlwiIiksIGR5bmFtaWM6IGZhbHNlIH0KICB9CgogIC8vIGhhbmRsZSA8c2xvdC8+IG91dGxldHMKICBmdW5jdGlvbiBwcm9jZXNzU2xvdE91dGxldCAoZWwpIHsKICAgIGlmIChlbC50YWcgPT09ICdzbG90JykgewogICAgICBlbC5zbG90TmFtZSA9IGdldEJpbmRpbmdBdHRyKGVsLCAnbmFtZScpOwogICAgICBpZiAoZWwua2V5KSB7CiAgICAgICAgd2FybiQyKAogICAgICAgICAgImBrZXlgIGRvZXMgbm90IHdvcmsgb24gPHNsb3Q+IGJlY2F1c2Ugc2xvdHMgYXJlIGFic3RyYWN0IG91dGxldHMgIiArCiAgICAgICAgICAiYW5kIGNhbiBwb3NzaWJseSBleHBhbmQgaW50byBtdWx0aXBsZSBlbGVtZW50cy4gIiArCiAgICAgICAgICAiVXNlIHRoZSBrZXkgb24gYSB3cmFwcGluZyBlbGVtZW50IGluc3RlYWQuIiwKICAgICAgICAgIGdldFJhd0JpbmRpbmdBdHRyKGVsLCAna2V5JykKICAgICAgICApOwogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBwcm9jZXNzQ29tcG9uZW50IChlbCkgewogICAgdmFyIGJpbmRpbmc7CiAgICBpZiAoKGJpbmRpbmcgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ2lzJykpKSB7CiAgICAgIGVsLmNvbXBvbmVudCA9IGJpbmRpbmc7CiAgICB9CiAgICBpZiAoZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ2lubGluZS10ZW1wbGF0ZScpICE9IG51bGwpIHsKICAgICAgZWwuaW5saW5lVGVtcGxhdGUgPSB0cnVlOwogICAgfQogIH0KCiAgZnVuY3Rpb24gcHJvY2Vzc0F0dHJzIChlbCkgewogICAgdmFyIGxpc3QgPSBlbC5hdHRyc0xpc3Q7CiAgICB2YXIgaSwgbCwgbmFtZSwgcmF3TmFtZSwgdmFsdWUsIG1vZGlmaWVycywgc3luY0dlbiwgaXNEeW5hbWljOwogICAgZm9yIChpID0gMCwgbCA9IGxpc3QubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgIG5hbWUgPSByYXdOYW1lID0gbGlzdFtpXS5uYW1lOwogICAgICB2YWx1ZSA9IGxpc3RbaV0udmFsdWU7CiAgICAgIGlmIChkaXJSRS50ZXN0KG5hbWUpKSB7CiAgICAgICAgLy8gbWFyayBlbGVtZW50IGFzIGR5bmFtaWMKICAgICAgICBlbC5oYXNCaW5kaW5ncyA9IHRydWU7CiAgICAgICAgLy8gbW9kaWZpZXJzCiAgICAgICAgbW9kaWZpZXJzID0gcGFyc2VNb2RpZmllcnMobmFtZS5yZXBsYWNlKGRpclJFLCAnJykpOwogICAgICAgIC8vIHN1cHBvcnQgLmZvbyBzaG9ydGhhbmQgc3ludGF4IGZvciB0aGUgLnByb3AgbW9kaWZpZXIKICAgICAgICBpZiAobW9kaWZpZXJzKSB7CiAgICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKG1vZGlmaWVyUkUsICcnKTsKICAgICAgICB9CiAgICAgICAgaWYgKGJpbmRSRS50ZXN0KG5hbWUpKSB7IC8vIHYtYmluZAogICAgICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZShiaW5kUkUsICcnKTsKICAgICAgICAgIHZhbHVlID0gcGFyc2VGaWx0ZXJzKHZhbHVlKTsKICAgICAgICAgIGlzRHluYW1pYyA9IGR5bmFtaWNBcmdSRS50ZXN0KG5hbWUpOwogICAgICAgICAgaWYgKGlzRHluYW1pYykgewogICAgICAgICAgICBuYW1lID0gbmFtZS5zbGljZSgxLCAtMSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIHZhbHVlLnRyaW0oKS5sZW5ndGggPT09IDAKICAgICAgICAgICkgewogICAgICAgICAgICB3YXJuJDIoCiAgICAgICAgICAgICAgKCJUaGUgdmFsdWUgZm9yIGEgdi1iaW5kIGV4cHJlc3Npb24gY2Fubm90IGJlIGVtcHR5LiBGb3VuZCBpbiBcInYtYmluZDoiICsgbmFtZSArICJcIiIpCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAobW9kaWZpZXJzKSB7CiAgICAgICAgICAgIGlmIChtb2RpZmllcnMucHJvcCAmJiAhaXNEeW5hbWljKSB7CiAgICAgICAgICAgICAgbmFtZSA9IGNhbWVsaXplKG5hbWUpOwogICAgICAgICAgICAgIGlmIChuYW1lID09PSAnaW5uZXJIdG1sJykgeyBuYW1lID0gJ2lubmVySFRNTCc7IH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobW9kaWZpZXJzLmNhbWVsICYmICFpc0R5bmFtaWMpIHsKICAgICAgICAgICAgICBuYW1lID0gY2FtZWxpemUobmFtZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG1vZGlmaWVycy5zeW5jKSB7CiAgICAgICAgICAgICAgc3luY0dlbiA9IGdlbkFzc2lnbm1lbnRDb2RlKHZhbHVlLCAiJGV2ZW50Iik7CiAgICAgICAgICAgICAgaWYgKCFpc0R5bmFtaWMpIHsKICAgICAgICAgICAgICAgIGFkZEhhbmRsZXIoCiAgICAgICAgICAgICAgICAgIGVsLAogICAgICAgICAgICAgICAgICAoInVwZGF0ZToiICsgKGNhbWVsaXplKG5hbWUpKSksCiAgICAgICAgICAgICAgICAgIHN5bmNHZW4sCiAgICAgICAgICAgICAgICAgIG51bGwsCiAgICAgICAgICAgICAgICAgIGZhbHNlLAogICAgICAgICAgICAgICAgICB3YXJuJDIsCiAgICAgICAgICAgICAgICAgIGxpc3RbaV0KICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICBpZiAoaHlwaGVuYXRlKG5hbWUpICE9PSBjYW1lbGl6ZShuYW1lKSkgewogICAgICAgICAgICAgICAgICBhZGRIYW5kbGVyKAogICAgICAgICAgICAgICAgICAgIGVsLAogICAgICAgICAgICAgICAgICAgICgidXBkYXRlOiIgKyAoaHlwaGVuYXRlKG5hbWUpKSksCiAgICAgICAgICAgICAgICAgICAgc3luY0dlbiwKICAgICAgICAgICAgICAgICAgICBudWxsLAogICAgICAgICAgICAgICAgICAgIGZhbHNlLAogICAgICAgICAgICAgICAgICAgIHdhcm4kMiwKICAgICAgICAgICAgICAgICAgICBsaXN0W2ldCiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIGhhbmRsZXIgdy8gZHluYW1pYyBldmVudCBuYW1lCiAgICAgICAgICAgICAgICBhZGRIYW5kbGVyKAogICAgICAgICAgICAgICAgICBlbCwKICAgICAgICAgICAgICAgICAgKCJcInVwZGF0ZTpcIisoIiArIG5hbWUgKyAiKSIpLAogICAgICAgICAgICAgICAgICBzeW5jR2VuLAogICAgICAgICAgICAgICAgICBudWxsLAogICAgICAgICAgICAgICAgICBmYWxzZSwKICAgICAgICAgICAgICAgICAgd2FybiQyLAogICAgICAgICAgICAgICAgICBsaXN0W2ldLAogICAgICAgICAgICAgICAgICB0cnVlIC8vIGR5bmFtaWMKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoKG1vZGlmaWVycyAmJiBtb2RpZmllcnMucHJvcCkgfHwgKAogICAgICAgICAgICAhZWwuY29tcG9uZW50ICYmIHBsYXRmb3JtTXVzdFVzZVByb3AoZWwudGFnLCBlbC5hdHRyc01hcC50eXBlLCBuYW1lKQogICAgICAgICAgKSkgewogICAgICAgICAgICBhZGRQcm9wKGVsLCBuYW1lLCB2YWx1ZSwgbGlzdFtpXSwgaXNEeW5hbWljKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFkZEF0dHIoZWwsIG5hbWUsIHZhbHVlLCBsaXN0W2ldLCBpc0R5bmFtaWMpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAob25SRS50ZXN0KG5hbWUpKSB7IC8vIHYtb24KICAgICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2Uob25SRSwgJycpOwogICAgICAgICAgaXNEeW5hbWljID0gZHluYW1pY0FyZ1JFLnRlc3QobmFtZSk7CiAgICAgICAgICBpZiAoaXNEeW5hbWljKSB7CiAgICAgICAgICAgIG5hbWUgPSBuYW1lLnNsaWNlKDEsIC0xKTsKICAgICAgICAgIH0KICAgICAgICAgIGFkZEhhbmRsZXIoZWwsIG5hbWUsIHZhbHVlLCBtb2RpZmllcnMsIGZhbHNlLCB3YXJuJDIsIGxpc3RbaV0sIGlzRHluYW1pYyk7CiAgICAgICAgfSBlbHNlIHsgLy8gbm9ybWFsIGRpcmVjdGl2ZXMKICAgICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoZGlyUkUsICcnKTsKICAgICAgICAgIC8vIHBhcnNlIGFyZwogICAgICAgICAgdmFyIGFyZ01hdGNoID0gbmFtZS5tYXRjaChhcmdSRSk7CiAgICAgICAgICB2YXIgYXJnID0gYXJnTWF0Y2ggJiYgYXJnTWF0Y2hbMV07CiAgICAgICAgICBpc0R5bmFtaWMgPSBmYWxzZTsKICAgICAgICAgIGlmIChhcmcpIHsKICAgICAgICAgICAgbmFtZSA9IG5hbWUuc2xpY2UoMCwgLShhcmcubGVuZ3RoICsgMSkpOwogICAgICAgICAgICBpZiAoZHluYW1pY0FyZ1JFLnRlc3QoYXJnKSkgewogICAgICAgICAgICAgIGFyZyA9IGFyZy5zbGljZSgxLCAtMSk7CiAgICAgICAgICAgICAgaXNEeW5hbWljID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgYWRkRGlyZWN0aXZlKGVsLCBuYW1lLCByYXdOYW1lLCB2YWx1ZSwgYXJnLCBpc0R5bmFtaWMsIG1vZGlmaWVycywgbGlzdFtpXSk7CiAgICAgICAgICBpZiAobmFtZSA9PT0gJ21vZGVsJykgewogICAgICAgICAgICBjaGVja0ZvckFsaWFzTW9kZWwoZWwsIHZhbHVlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gbGl0ZXJhbCBhdHRyaWJ1dGUKICAgICAgICB7CiAgICAgICAgICB2YXIgcmVzID0gcGFyc2VUZXh0KHZhbHVlLCBkZWxpbWl0ZXJzKTsKICAgICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgICAgd2FybiQyKAogICAgICAgICAgICAgIG5hbWUgKyAiPVwiIiArIHZhbHVlICsgIlwiOiAiICsKICAgICAgICAgICAgICAnSW50ZXJwb2xhdGlvbiBpbnNpZGUgYXR0cmlidXRlcyBoYXMgYmVlbiByZW1vdmVkLiAnICsKICAgICAgICAgICAgICAnVXNlIHYtYmluZCBvciB0aGUgY29sb24gc2hvcnRoYW5kIGluc3RlYWQuIEZvciBleGFtcGxlLCAnICsKICAgICAgICAgICAgICAnaW5zdGVhZCBvZiA8ZGl2IGlkPSJ7eyB2YWwgfX0iPiwgdXNlIDxkaXYgOmlkPSJ2YWwiPi4nLAogICAgICAgICAgICAgIGxpc3RbaV0KICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgYWRkQXR0cihlbCwgbmFtZSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpLCBsaXN0W2ldKTsKICAgICAgICAvLyAjNjg4NyBmaXJlZm94IGRvZXNuJ3QgdXBkYXRlIG11dGVkIHN0YXRlIGlmIHNldCB2aWEgYXR0cmlidXRlCiAgICAgICAgLy8gZXZlbiBpbW1lZGlhdGVseSBhZnRlciBlbGVtZW50IGNyZWF0aW9uCiAgICAgICAgaWYgKCFlbC5jb21wb25lbnQgJiYKICAgICAgICAgICAgbmFtZSA9PT0gJ211dGVkJyAmJgogICAgICAgICAgICBwbGF0Zm9ybU11c3RVc2VQcm9wKGVsLnRhZywgZWwuYXR0cnNNYXAudHlwZSwgbmFtZSkpIHsKICAgICAgICAgIGFkZFByb3AoZWwsIG5hbWUsICd0cnVlJywgbGlzdFtpXSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBjaGVja0luRm9yIChlbCkgewogICAgdmFyIHBhcmVudCA9IGVsOwogICAgd2hpbGUgKHBhcmVudCkgewogICAgICBpZiAocGFyZW50LmZvciAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfQogICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50OwogICAgfQogICAgcmV0dXJuIGZhbHNlCiAgfQoKICBmdW5jdGlvbiBwYXJzZU1vZGlmaWVycyAobmFtZSkgewogICAgdmFyIG1hdGNoID0gbmFtZS5tYXRjaChtb2RpZmllclJFKTsKICAgIGlmIChtYXRjaCkgewogICAgICB2YXIgcmV0ID0ge307CiAgICAgIG1hdGNoLmZvckVhY2goZnVuY3Rpb24gKG0pIHsgcmV0W20uc2xpY2UoMSldID0gdHJ1ZTsgfSk7CiAgICAgIHJldHVybiByZXQKICAgIH0KICB9CgogIGZ1bmN0aW9uIG1ha2VBdHRyc01hcCAoYXR0cnMpIHsKICAgIHZhciBtYXAgPSB7fTsKICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXR0cnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgIGlmICgKICAgICAgICBtYXBbYXR0cnNbaV0ubmFtZV0gJiYgIWlzSUUgJiYgIWlzRWRnZQogICAgICApIHsKICAgICAgICB3YXJuJDIoJ2R1cGxpY2F0ZSBhdHRyaWJ1dGU6ICcgKyBhdHRyc1tpXS5uYW1lLCBhdHRyc1tpXSk7CiAgICAgIH0KICAgICAgbWFwW2F0dHJzW2ldLm5hbWVdID0gYXR0cnNbaV0udmFsdWU7CiAgICB9CiAgICByZXR1cm4gbWFwCiAgfQoKICAvLyBmb3Igc2NyaXB0IChlLmcuIHR5cGU9IngvdGVtcGxhdGUiKSBvciBzdHlsZSwgZG8gbm90IGRlY29kZSBjb250ZW50CiAgZnVuY3Rpb24gaXNUZXh0VGFnIChlbCkgewogICAgcmV0dXJuIGVsLnRhZyA9PT0gJ3NjcmlwdCcgfHwgZWwudGFnID09PSAnc3R5bGUnCiAgfQoKICBmdW5jdGlvbiBpc0ZvcmJpZGRlblRhZyAoZWwpIHsKICAgIHJldHVybiAoCiAgICAgIGVsLnRhZyA9PT0gJ3N0eWxlJyB8fAogICAgICAoZWwudGFnID09PSAnc2NyaXB0JyAmJiAoCiAgICAgICAgIWVsLmF0dHJzTWFwLnR5cGUgfHwKICAgICAgICBlbC5hdHRyc01hcC50eXBlID09PSAndGV4dC9qYXZhc2NyaXB0JwogICAgICApKQogICAgKQogIH0KCiAgdmFyIGllTlNCdWcgPSAvXnhtbG5zOk5TXGQrLzsKICB2YXIgaWVOU1ByZWZpeCA9IC9eTlNcZCs6LzsKCiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICBmdW5jdGlvbiBndWFyZElFU1ZHQnVnIChhdHRycykgewogICAgdmFyIHJlcyA9IFtdOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhdHRycy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgYXR0ciA9IGF0dHJzW2ldOwogICAgICBpZiAoIWllTlNCdWcudGVzdChhdHRyLm5hbWUpKSB7CiAgICAgICAgYXR0ci5uYW1lID0gYXR0ci5uYW1lLnJlcGxhY2UoaWVOU1ByZWZpeCwgJycpOwogICAgICAgIHJlcy5wdXNoKGF0dHIpOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gcmVzCiAgfQoKICBmdW5jdGlvbiBjaGVja0ZvckFsaWFzTW9kZWwgKGVsLCB2YWx1ZSkgewogICAgdmFyIF9lbCA9IGVsOwogICAgd2hpbGUgKF9lbCkgewogICAgICBpZiAoX2VsLmZvciAmJiBfZWwuYWxpYXMgPT09IHZhbHVlKSB7CiAgICAgICAgd2FybiQyKAogICAgICAgICAgIjwiICsgKGVsLnRhZykgKyAiIHYtbW9kZWw9XCIiICsgdmFsdWUgKyAiXCI+OiAiICsKICAgICAgICAgICJZb3UgYXJlIGJpbmRpbmcgdi1tb2RlbCBkaXJlY3RseSB0byBhIHYtZm9yIGl0ZXJhdGlvbiBhbGlhcy4gIiArCiAgICAgICAgICAiVGhpcyB3aWxsIG5vdCBiZSBhYmxlIHRvIG1vZGlmeSB0aGUgdi1mb3Igc291cmNlIGFycmF5IGJlY2F1c2UgIiArCiAgICAgICAgICAid3JpdGluZyB0byB0aGUgYWxpYXMgaXMgbGlrZSBtb2RpZnlpbmcgYSBmdW5jdGlvbiBsb2NhbCB2YXJpYWJsZS4gIiArCiAgICAgICAgICAiQ29uc2lkZXIgdXNpbmcgYW4gYXJyYXkgb2Ygb2JqZWN0cyBhbmQgdXNlIHYtbW9kZWwgb24gYW4gb2JqZWN0IHByb3BlcnR5IGluc3RlYWQuIiwKICAgICAgICAgIGVsLnJhd0F0dHJzTWFwWyd2LW1vZGVsJ10KICAgICAgICApOwogICAgICB9CiAgICAgIF9lbCA9IF9lbC5wYXJlbnQ7CiAgICB9CiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gcHJlVHJhbnNmb3JtTm9kZSAoZWwsIG9wdGlvbnMpIHsKICAgIGlmIChlbC50YWcgPT09ICdpbnB1dCcpIHsKICAgICAgdmFyIG1hcCA9IGVsLmF0dHJzTWFwOwogICAgICBpZiAoIW1hcFsndi1tb2RlbCddKSB7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIHZhciB0eXBlQmluZGluZzsKICAgICAgaWYgKG1hcFsnOnR5cGUnXSB8fCBtYXBbJ3YtYmluZDp0eXBlJ10pIHsKICAgICAgICB0eXBlQmluZGluZyA9IGdldEJpbmRpbmdBdHRyKGVsLCAndHlwZScpOwogICAgICB9CiAgICAgIGlmICghbWFwLnR5cGUgJiYgIXR5cGVCaW5kaW5nICYmIG1hcFsndi1iaW5kJ10pIHsKICAgICAgICB0eXBlQmluZGluZyA9ICIoIiArIChtYXBbJ3YtYmluZCddKSArICIpLnR5cGUiOwogICAgICB9CgogICAgICBpZiAodHlwZUJpbmRpbmcpIHsKICAgICAgICB2YXIgaWZDb25kaXRpb24gPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1pZicsIHRydWUpOwogICAgICAgIHZhciBpZkNvbmRpdGlvbkV4dHJhID0gaWZDb25kaXRpb24gPyAoIiYmKCIgKyBpZkNvbmRpdGlvbiArICIpIikgOiAiIjsKICAgICAgICB2YXIgaGFzRWxzZSA9IGdldEFuZFJlbW92ZUF0dHIoZWwsICd2LWVsc2UnLCB0cnVlKSAhPSBudWxsOwogICAgICAgIHZhciBlbHNlSWZDb25kaXRpb24gPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1lbHNlLWlmJywgdHJ1ZSk7CiAgICAgICAgLy8gMS4gY2hlY2tib3gKICAgICAgICB2YXIgYnJhbmNoMCA9IGNsb25lQVNURWxlbWVudChlbCk7CiAgICAgICAgLy8gcHJvY2VzcyBmb3Igb24gdGhlIG1haW4gbm9kZQogICAgICAgIHByb2Nlc3NGb3IoYnJhbmNoMCk7CiAgICAgICAgYWRkUmF3QXR0cihicmFuY2gwLCAndHlwZScsICdjaGVja2JveCcpOwogICAgICAgIHByb2Nlc3NFbGVtZW50KGJyYW5jaDAsIG9wdGlvbnMpOwogICAgICAgIGJyYW5jaDAucHJvY2Vzc2VkID0gdHJ1ZTsgLy8gcHJldmVudCBpdCBmcm9tIGRvdWJsZS1wcm9jZXNzZWQKICAgICAgICBicmFuY2gwLmlmID0gIigiICsgdHlwZUJpbmRpbmcgKyAiKT09PSdjaGVja2JveCciICsgaWZDb25kaXRpb25FeHRyYTsKICAgICAgICBhZGRJZkNvbmRpdGlvbihicmFuY2gwLCB7CiAgICAgICAgICBleHA6IGJyYW5jaDAuaWYsCiAgICAgICAgICBibG9jazogYnJhbmNoMAogICAgICAgIH0pOwogICAgICAgIC8vIDIuIGFkZCByYWRpbyBlbHNlLWlmIGNvbmRpdGlvbgogICAgICAgIHZhciBicmFuY2gxID0gY2xvbmVBU1RFbGVtZW50KGVsKTsKICAgICAgICBnZXRBbmRSZW1vdmVBdHRyKGJyYW5jaDEsICd2LWZvcicsIHRydWUpOwogICAgICAgIGFkZFJhd0F0dHIoYnJhbmNoMSwgJ3R5cGUnLCAncmFkaW8nKTsKICAgICAgICBwcm9jZXNzRWxlbWVudChicmFuY2gxLCBvcHRpb25zKTsKICAgICAgICBhZGRJZkNvbmRpdGlvbihicmFuY2gwLCB7CiAgICAgICAgICBleHA6ICIoIiArIHR5cGVCaW5kaW5nICsgIik9PT0ncmFkaW8nIiArIGlmQ29uZGl0aW9uRXh0cmEsCiAgICAgICAgICBibG9jazogYnJhbmNoMQogICAgICAgIH0pOwogICAgICAgIC8vIDMuIG90aGVyCiAgICAgICAgdmFyIGJyYW5jaDIgPSBjbG9uZUFTVEVsZW1lbnQoZWwpOwogICAgICAgIGdldEFuZFJlbW92ZUF0dHIoYnJhbmNoMiwgJ3YtZm9yJywgdHJ1ZSk7CiAgICAgICAgYWRkUmF3QXR0cihicmFuY2gyLCAnOnR5cGUnLCB0eXBlQmluZGluZyk7CiAgICAgICAgcHJvY2Vzc0VsZW1lbnQoYnJhbmNoMiwgb3B0aW9ucyk7CiAgICAgICAgYWRkSWZDb25kaXRpb24oYnJhbmNoMCwgewogICAgICAgICAgZXhwOiBpZkNvbmRpdGlvbiwKICAgICAgICAgIGJsb2NrOiBicmFuY2gyCiAgICAgICAgfSk7CgogICAgICAgIGlmIChoYXNFbHNlKSB7CiAgICAgICAgICBicmFuY2gwLmVsc2UgPSB0cnVlOwogICAgICAgIH0gZWxzZSBpZiAoZWxzZUlmQ29uZGl0aW9uKSB7CiAgICAgICAgICBicmFuY2gwLmVsc2VpZiA9IGVsc2VJZkNvbmRpdGlvbjsKICAgICAgICB9CgogICAgICAgIHJldHVybiBicmFuY2gwCiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIGNsb25lQVNURWxlbWVudCAoZWwpIHsKICAgIHJldHVybiBjcmVhdGVBU1RFbGVtZW50KGVsLnRhZywgZWwuYXR0cnNMaXN0LnNsaWNlKCksIGVsLnBhcmVudCkKICB9CgogIHZhciBtb2RlbCQxID0gewogICAgcHJlVHJhbnNmb3JtTm9kZTogcHJlVHJhbnNmb3JtTm9kZQogIH07CgogIHZhciBtb2R1bGVzJDEgPSBbCiAgICBrbGFzcyQxLAogICAgc3R5bGUkMSwKICAgIG1vZGVsJDEKICBdOwoKICAvKiAgKi8KCiAgZnVuY3Rpb24gdGV4dCAoZWwsIGRpcikgewogICAgaWYgKGRpci52YWx1ZSkgewogICAgICBhZGRQcm9wKGVsLCAndGV4dENvbnRlbnQnLCAoIl9zKCIgKyAoZGlyLnZhbHVlKSArICIpIiksIGRpcik7CiAgICB9CiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gaHRtbCAoZWwsIGRpcikgewogICAgaWYgKGRpci52YWx1ZSkgewogICAgICBhZGRQcm9wKGVsLCAnaW5uZXJIVE1MJywgKCJfcygiICsgKGRpci52YWx1ZSkgKyAiKSIpLCBkaXIpOwogICAgfQogIH0KCiAgdmFyIGRpcmVjdGl2ZXMkMSA9IHsKICAgIG1vZGVsOiBtb2RlbCwKICAgIHRleHQ6IHRleHQsCiAgICBodG1sOiBodG1sCiAgfTsKCiAgLyogICovCgogIHZhciBiYXNlT3B0aW9ucyA9IHsKICAgIGV4cGVjdEhUTUw6IHRydWUsCiAgICBtb2R1bGVzOiBtb2R1bGVzJDEsCiAgICBkaXJlY3RpdmVzOiBkaXJlY3RpdmVzJDEsCiAgICBpc1ByZVRhZzogaXNQcmVUYWcsCiAgICBpc1VuYXJ5VGFnOiBpc1VuYXJ5VGFnLAogICAgbXVzdFVzZVByb3A6IG11c3RVc2VQcm9wLAogICAgY2FuQmVMZWZ0T3BlblRhZzogY2FuQmVMZWZ0T3BlblRhZywKICAgIGlzUmVzZXJ2ZWRUYWc6IGlzUmVzZXJ2ZWRUYWcsCiAgICBnZXRUYWdOYW1lc3BhY2U6IGdldFRhZ05hbWVzcGFjZSwKICAgIHN0YXRpY0tleXM6IGdlblN0YXRpY0tleXMobW9kdWxlcyQxKQogIH07CgogIC8qICAqLwoKICB2YXIgaXNTdGF0aWNLZXk7CiAgdmFyIGlzUGxhdGZvcm1SZXNlcnZlZFRhZzsKCiAgdmFyIGdlblN0YXRpY0tleXNDYWNoZWQgPSBjYWNoZWQoZ2VuU3RhdGljS2V5cyQxKTsKCiAgLyoqCiAgICogR29hbCBvZiB0aGUgb3B0aW1pemVyOiB3YWxrIHRoZSBnZW5lcmF0ZWQgdGVtcGxhdGUgQVNUIHRyZWUKICAgKiBhbmQgZGV0ZWN0IHN1Yi10cmVlcyB0aGF0IGFyZSBwdXJlbHkgc3RhdGljLCBpLmUuIHBhcnRzIG9mCiAgICogdGhlIERPTSB0aGF0IG5ldmVyIG5lZWRzIHRvIGNoYW5nZS4KICAgKgogICAqIE9uY2Ugd2UgZGV0ZWN0IHRoZXNlIHN1Yi10cmVlcywgd2UgY2FuOgogICAqCiAgICogMS4gSG9pc3QgdGhlbSBpbnRvIGNvbnN0YW50cywgc28gdGhhdCB3ZSBubyBsb25nZXIgbmVlZCB0bwogICAqICAgIGNyZWF0ZSBmcmVzaCBub2RlcyBmb3IgdGhlbSBvbiBlYWNoIHJlLXJlbmRlcjsKICAgKiAyLiBDb21wbGV0ZWx5IHNraXAgdGhlbSBpbiB0aGUgcGF0Y2hpbmcgcHJvY2Vzcy4KICAgKi8KICBmdW5jdGlvbiBvcHRpbWl6ZSAocm9vdCwgb3B0aW9ucykgewogICAgaWYgKCFyb290KSB7IHJldHVybiB9CiAgICBpc1N0YXRpY0tleSA9IGdlblN0YXRpY0tleXNDYWNoZWQob3B0aW9ucy5zdGF0aWNLZXlzIHx8ICcnKTsKICAgIGlzUGxhdGZvcm1SZXNlcnZlZFRhZyA9IG9wdGlvbnMuaXNSZXNlcnZlZFRhZyB8fCBubzsKICAgIC8vIGZpcnN0IHBhc3M6IG1hcmsgYWxsIG5vbi1zdGF0aWMgbm9kZXMuCiAgICBtYXJrU3RhdGljJDEocm9vdCk7CiAgICAvLyBzZWNvbmQgcGFzczogbWFyayBzdGF0aWMgcm9vdHMuCiAgICBtYXJrU3RhdGljUm9vdHMocm9vdCwgZmFsc2UpOwogIH0KCiAgZnVuY3Rpb24gZ2VuU3RhdGljS2V5cyQxIChrZXlzKSB7CiAgICByZXR1cm4gbWFrZU1hcCgKICAgICAgJ3R5cGUsdGFnLGF0dHJzTGlzdCxhdHRyc01hcCxwbGFpbixwYXJlbnQsY2hpbGRyZW4sYXR0cnMsc3RhcnQsZW5kLHJhd0F0dHJzTWFwJyArCiAgICAgIChrZXlzID8gJywnICsga2V5cyA6ICcnKQogICAgKQogIH0KCiAgZnVuY3Rpb24gbWFya1N0YXRpYyQxIChub2RlKSB7CiAgICBub2RlLnN0YXRpYyA9IGlzU3RhdGljKG5vZGUpOwogICAgaWYgKG5vZGUudHlwZSA9PT0gMSkgewogICAgICAvLyBkbyBub3QgbWFrZSBjb21wb25lbnQgc2xvdCBjb250ZW50IHN0YXRpYy4gdGhpcyBhdm9pZHMKICAgICAgLy8gMS4gY29tcG9uZW50cyBub3QgYWJsZSB0byBtdXRhdGUgc2xvdCBub2RlcwogICAgICAvLyAyLiBzdGF0aWMgc2xvdCBjb250ZW50IGZhaWxzIGZvciBob3QtcmVsb2FkaW5nCiAgICAgIGlmICgKICAgICAgICAhaXNQbGF0Zm9ybVJlc2VydmVkVGFnKG5vZGUudGFnKSAmJgogICAgICAgIG5vZGUudGFnICE9PSAnc2xvdCcgJiYKICAgICAgICBub2RlLmF0dHJzTWFwWydpbmxpbmUtdGVtcGxhdGUnXSA9PSBudWxsCiAgICAgICkgewogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICB2YXIgY2hpbGQgPSBub2RlLmNoaWxkcmVuW2ldOwogICAgICAgIG1hcmtTdGF0aWMkMShjaGlsZCk7CiAgICAgICAgaWYgKCFjaGlsZC5zdGF0aWMpIHsKICAgICAgICAgIG5vZGUuc3RhdGljID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChub2RlLmlmQ29uZGl0aW9ucykgewogICAgICAgIGZvciAodmFyIGkkMSA9IDEsIGwkMSA9IG5vZGUuaWZDb25kaXRpb25zLmxlbmd0aDsgaSQxIDwgbCQxOyBpJDErKykgewogICAgICAgICAgdmFyIGJsb2NrID0gbm9kZS5pZkNvbmRpdGlvbnNbaSQxXS5ibG9jazsKICAgICAgICAgIG1hcmtTdGF0aWMkMShibG9jayk7CiAgICAgICAgICBpZiAoIWJsb2NrLnN0YXRpYykgewogICAgICAgICAgICBub2RlLnN0YXRpYyA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gbWFya1N0YXRpY1Jvb3RzIChub2RlLCBpc0luRm9yKSB7CiAgICBpZiAobm9kZS50eXBlID09PSAxKSB7CiAgICAgIGlmIChub2RlLnN0YXRpYyB8fCBub2RlLm9uY2UpIHsKICAgICAgICBub2RlLnN0YXRpY0luRm9yID0gaXNJbkZvcjsKICAgICAgfQogICAgICAvLyBGb3IgYSBub2RlIHRvIHF1YWxpZnkgYXMgYSBzdGF0aWMgcm9vdCwgaXQgc2hvdWxkIGhhdmUgY2hpbGRyZW4gdGhhdAogICAgICAvLyBhcmUgbm90IGp1c3Qgc3RhdGljIHRleHQuIE90aGVyd2lzZSB0aGUgY29zdCBvZiBob2lzdGluZyBvdXQgd2lsbAogICAgICAvLyBvdXR3ZWlnaCB0aGUgYmVuZWZpdHMgYW5kIGl0J3MgYmV0dGVyIG9mZiB0byBqdXN0IGFsd2F5cyByZW5kZXIgaXQgZnJlc2guCiAgICAgIGlmIChub2RlLnN0YXRpYyAmJiBub2RlLmNoaWxkcmVuLmxlbmd0aCAmJiAhKAogICAgICAgIG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAxICYmCiAgICAgICAgbm9kZS5jaGlsZHJlblswXS50eXBlID09PSAzCiAgICAgICkpIHsKICAgICAgICBub2RlLnN0YXRpY1Jvb3QgPSB0cnVlOwogICAgICAgIHJldHVybgogICAgICB9IGVsc2UgewogICAgICAgIG5vZGUuc3RhdGljUm9vdCA9IGZhbHNlOwogICAgICB9CiAgICAgIGlmIChub2RlLmNoaWxkcmVuKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgbWFya1N0YXRpY1Jvb3RzKG5vZGUuY2hpbGRyZW5baV0sIGlzSW5Gb3IgfHwgISFub2RlLmZvcik7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChub2RlLmlmQ29uZGl0aW9ucykgewogICAgICAgIGZvciAodmFyIGkkMSA9IDEsIGwkMSA9IG5vZGUuaWZDb25kaXRpb25zLmxlbmd0aDsgaSQxIDwgbCQxOyBpJDErKykgewogICAgICAgICAgbWFya1N0YXRpY1Jvb3RzKG5vZGUuaWZDb25kaXRpb25zW2kkMV0uYmxvY2ssIGlzSW5Gb3IpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gaXNTdGF0aWMgKG5vZGUpIHsKICAgIGlmIChub2RlLnR5cGUgPT09IDIpIHsgLy8gZXhwcmVzc2lvbgogICAgICByZXR1cm4gZmFsc2UKICAgIH0KICAgIGlmIChub2RlLnR5cGUgPT09IDMpIHsgLy8gdGV4dAogICAgICByZXR1cm4gdHJ1ZQogICAgfQogICAgcmV0dXJuICEhKG5vZGUucHJlIHx8ICgKICAgICAgIW5vZGUuaGFzQmluZGluZ3MgJiYgLy8gbm8gZHluYW1pYyBiaW5kaW5ncwogICAgICAhbm9kZS5pZiAmJiAhbm9kZS5mb3IgJiYgLy8gbm90IHYtaWYgb3Igdi1mb3Igb3Igdi1lbHNlCiAgICAgICFpc0J1aWx0SW5UYWcobm9kZS50YWcpICYmIC8vIG5vdCBhIGJ1aWx0LWluCiAgICAgIGlzUGxhdGZvcm1SZXNlcnZlZFRhZyhub2RlLnRhZykgJiYgLy8gbm90IGEgY29tcG9uZW50CiAgICAgICFpc0RpcmVjdENoaWxkT2ZUZW1wbGF0ZUZvcihub2RlKSAmJgogICAgICBPYmplY3Qua2V5cyhub2RlKS5ldmVyeShpc1N0YXRpY0tleSkKICAgICkpCiAgfQoKICBmdW5jdGlvbiBpc0RpcmVjdENoaWxkT2ZUZW1wbGF0ZUZvciAobm9kZSkgewogICAgd2hpbGUgKG5vZGUucGFyZW50KSB7CiAgICAgIG5vZGUgPSBub2RlLnBhcmVudDsKICAgICAgaWYgKG5vZGUudGFnICE9PSAndGVtcGxhdGUnKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgICAgaWYgKG5vZGUuZm9yKSB7CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfQogICAgfQogICAgcmV0dXJuIGZhbHNlCiAgfQoKICAvKiAgKi8KCiAgdmFyIGZuRXhwUkUgPSAvXihbXHckX10rfFwoW14pXSo/XCkpXHMqPT58XmZ1bmN0aW9uKD86XHMrW1x3JF0rKT9ccypcKC87CiAgdmFyIGZuSW52b2tlUkUgPSAvXChbXildKj9cKTsqJC87CiAgdmFyIHNpbXBsZVBhdGhSRSA9IC9eW0EtWmEtel8kXVtcdyRdKig/OlwuW0EtWmEtel8kXVtcdyRdKnxcWydbXiddKj8nXXxcWyJbXiJdKj8iXXxcW1xkK118XFtbQS1aYS16XyRdW1x3JF0qXSkqJC87CgogIC8vIEtleWJvYXJkRXZlbnQua2V5Q29kZSBhbGlhc2VzCiAgdmFyIGtleUNvZGVzID0gewogICAgZXNjOiAyNywKICAgIHRhYjogOSwKICAgIGVudGVyOiAxMywKICAgIHNwYWNlOiAzMiwKICAgIHVwOiAzOCwKICAgIGxlZnQ6IDM3LAogICAgcmlnaHQ6IDM5LAogICAgZG93bjogNDAsCiAgICAnZGVsZXRlJzogWzgsIDQ2XQogIH07CgogIC8vIEtleWJvYXJkRXZlbnQua2V5IGFsaWFzZXMKICB2YXIga2V5TmFtZXMgPSB7CiAgICAvLyAjNzg4MDogSUUxMSBhbmQgRWRnZSB1c2UgYEVzY2AgZm9yIEVzY2FwZSBrZXkgbmFtZS4KICAgIGVzYzogWydFc2MnLCAnRXNjYXBlJ10sCiAgICB0YWI6ICdUYWInLAogICAgZW50ZXI6ICdFbnRlcicsCiAgICAvLyAjOTExMjogSUUxMSB1c2VzIGBTcGFjZWJhcmAgZm9yIFNwYWNlIGtleSBuYW1lLgogICAgc3BhY2U6IFsnICcsICdTcGFjZWJhciddLAogICAgLy8gIzc4MDY6IElFMTEgdXNlcyBrZXkgbmFtZXMgd2l0aG91dCBgQXJyb3dgIHByZWZpeCBmb3IgYXJyb3cga2V5cy4KICAgIHVwOiBbJ1VwJywgJ0Fycm93VXAnXSwKICAgIGxlZnQ6IFsnTGVmdCcsICdBcnJvd0xlZnQnXSwKICAgIHJpZ2h0OiBbJ1JpZ2h0JywgJ0Fycm93UmlnaHQnXSwKICAgIGRvd246IFsnRG93bicsICdBcnJvd0Rvd24nXSwKICAgIC8vICM5MTEyOiBJRTExIHVzZXMgYERlbGAgZm9yIERlbGV0ZSBrZXkgbmFtZS4KICAgICdkZWxldGUnOiBbJ0JhY2tzcGFjZScsICdEZWxldGUnLCAnRGVsJ10KICB9OwoKICAvLyAjNDg2ODogbW9kaWZpZXJzIHRoYXQgcHJldmVudCB0aGUgZXhlY3V0aW9uIG9mIHRoZSBsaXN0ZW5lcgogIC8vIG5lZWQgdG8gZXhwbGljaXRseSByZXR1cm4gbnVsbCBzbyB0aGF0IHdlIGNhbiBkZXRlcm1pbmUgd2hldGhlciB0byByZW1vdmUKICAvLyB0aGUgbGlzdGVuZXIgZm9yIC5vbmNlCiAgdmFyIGdlbkd1YXJkID0gZnVuY3Rpb24gKGNvbmRpdGlvbikgeyByZXR1cm4gKCJpZigiICsgY29uZGl0aW9uICsgIilyZXR1cm4gbnVsbDsiKTsgfTsKCiAgdmFyIG1vZGlmaWVyQ29kZSA9IHsKICAgIHN0b3A6ICckZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7JywKICAgIHByZXZlbnQ6ICckZXZlbnQucHJldmVudERlZmF1bHQoKTsnLAogICAgc2VsZjogZ2VuR3VhcmQoIiRldmVudC50YXJnZXQgIT09ICRldmVudC5jdXJyZW50VGFyZ2V0IiksCiAgICBjdHJsOiBnZW5HdWFyZCgiISRldmVudC5jdHJsS2V5IiksCiAgICBzaGlmdDogZ2VuR3VhcmQoIiEkZXZlbnQuc2hpZnRLZXkiKSwKICAgIGFsdDogZ2VuR3VhcmQoIiEkZXZlbnQuYWx0S2V5IiksCiAgICBtZXRhOiBnZW5HdWFyZCgiISRldmVudC5tZXRhS2V5IiksCiAgICBsZWZ0OiBnZW5HdWFyZCgiJ2J1dHRvbicgaW4gJGV2ZW50ICYmICRldmVudC5idXR0b24gIT09IDAiKSwKICAgIG1pZGRsZTogZ2VuR3VhcmQoIididXR0b24nIGluICRldmVudCAmJiAkZXZlbnQuYnV0dG9uICE9PSAxIiksCiAgICByaWdodDogZ2VuR3VhcmQoIididXR0b24nIGluICRldmVudCAmJiAkZXZlbnQuYnV0dG9uICE9PSAyIikKICB9OwoKICBmdW5jdGlvbiBnZW5IYW5kbGVycyAoCiAgICBldmVudHMsCiAgICBpc05hdGl2ZQogICkgewogICAgdmFyIHByZWZpeCA9IGlzTmF0aXZlID8gJ25hdGl2ZU9uOicgOiAnb246JzsKICAgIHZhciBzdGF0aWNIYW5kbGVycyA9ICIiOwogICAgdmFyIGR5bmFtaWNIYW5kbGVycyA9ICIiOwogICAgZm9yICh2YXIgbmFtZSBpbiBldmVudHMpIHsKICAgICAgdmFyIGhhbmRsZXJDb2RlID0gZ2VuSGFuZGxlcihldmVudHNbbmFtZV0pOwogICAgICBpZiAoZXZlbnRzW25hbWVdICYmIGV2ZW50c1tuYW1lXS5keW5hbWljKSB7CiAgICAgICAgZHluYW1pY0hhbmRsZXJzICs9IG5hbWUgKyAiLCIgKyBoYW5kbGVyQ29kZSArICIsIjsKICAgICAgfSBlbHNlIHsKICAgICAgICBzdGF0aWNIYW5kbGVycyArPSAiXCIiICsgbmFtZSArICJcIjoiICsgaGFuZGxlckNvZGUgKyAiLCI7CiAgICAgIH0KICAgIH0KICAgIHN0YXRpY0hhbmRsZXJzID0gInsiICsgKHN0YXRpY0hhbmRsZXJzLnNsaWNlKDAsIC0xKSkgKyAifSI7CiAgICBpZiAoZHluYW1pY0hhbmRsZXJzKSB7CiAgICAgIHJldHVybiBwcmVmaXggKyAiX2QoIiArIHN0YXRpY0hhbmRsZXJzICsgIixbIiArIChkeW5hbWljSGFuZGxlcnMuc2xpY2UoMCwgLTEpKSArICJdKSIKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBwcmVmaXggKyBzdGF0aWNIYW5kbGVycwogICAgfQogIH0KCiAgZnVuY3Rpb24gZ2VuSGFuZGxlciAoaGFuZGxlcikgewogICAgaWYgKCFoYW5kbGVyKSB7CiAgICAgIHJldHVybiAnZnVuY3Rpb24oKXt9JwogICAgfQoKICAgIGlmIChBcnJheS5pc0FycmF5KGhhbmRsZXIpKSB7CiAgICAgIHJldHVybiAoIlsiICsgKGhhbmRsZXIubWFwKGZ1bmN0aW9uIChoYW5kbGVyKSB7IHJldHVybiBnZW5IYW5kbGVyKGhhbmRsZXIpOyB9KS5qb2luKCcsJykpICsgIl0iKQogICAgfQoKICAgIHZhciBpc01ldGhvZFBhdGggPSBzaW1wbGVQYXRoUkUudGVzdChoYW5kbGVyLnZhbHVlKTsKICAgIHZhciBpc0Z1bmN0aW9uRXhwcmVzc2lvbiA9IGZuRXhwUkUudGVzdChoYW5kbGVyLnZhbHVlKTsKICAgIHZhciBpc0Z1bmN0aW9uSW52b2NhdGlvbiA9IHNpbXBsZVBhdGhSRS50ZXN0KGhhbmRsZXIudmFsdWUucmVwbGFjZShmbkludm9rZVJFLCAnJykpOwoKICAgIGlmICghaGFuZGxlci5tb2RpZmllcnMpIHsKICAgICAgaWYgKGlzTWV0aG9kUGF0aCB8fCBpc0Z1bmN0aW9uRXhwcmVzc2lvbikgewogICAgICAgIHJldHVybiBoYW5kbGVyLnZhbHVlCiAgICAgIH0KICAgICAgcmV0dXJuICgiZnVuY3Rpb24oJGV2ZW50KXsiICsgKGlzRnVuY3Rpb25JbnZvY2F0aW9uID8gKCJyZXR1cm4gIiArIChoYW5kbGVyLnZhbHVlKSkgOiBoYW5kbGVyLnZhbHVlKSArICJ9IikgLy8gaW5saW5lIHN0YXRlbWVudAogICAgfSBlbHNlIHsKICAgICAgdmFyIGNvZGUgPSAnJzsKICAgICAgdmFyIGdlbk1vZGlmaWVyQ29kZSA9ICcnOwogICAgICB2YXIga2V5cyA9IFtdOwogICAgICBmb3IgKHZhciBrZXkgaW4gaGFuZGxlci5tb2RpZmllcnMpIHsKICAgICAgICBpZiAobW9kaWZpZXJDb2RlW2tleV0pIHsKICAgICAgICAgIGdlbk1vZGlmaWVyQ29kZSArPSBtb2RpZmllckNvZGVba2V5XTsKICAgICAgICAgIC8vIGxlZnQvcmlnaHQKICAgICAgICAgIGlmIChrZXlDb2Rlc1trZXldKSB7CiAgICAgICAgICAgIGtleXMucHVzaChrZXkpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnZXhhY3QnKSB7CiAgICAgICAgICB2YXIgbW9kaWZpZXJzID0gKGhhbmRsZXIubW9kaWZpZXJzKTsKICAgICAgICAgIGdlbk1vZGlmaWVyQ29kZSArPSBnZW5HdWFyZCgKICAgICAgICAgICAgWydjdHJsJywgJ3NoaWZ0JywgJ2FsdCcsICdtZXRhJ10KICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChrZXlNb2RpZmllcikgeyByZXR1cm4gIW1vZGlmaWVyc1trZXlNb2RpZmllcl07IH0pCiAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoa2V5TW9kaWZpZXIpIHsgcmV0dXJuICgiJGV2ZW50LiIgKyBrZXlNb2RpZmllciArICJLZXkiKTsgfSkKICAgICAgICAgICAgICAuam9pbignfHwnKQogICAgICAgICAgKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAga2V5cy5wdXNoKGtleSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChrZXlzLmxlbmd0aCkgewogICAgICAgIGNvZGUgKz0gZ2VuS2V5RmlsdGVyKGtleXMpOwogICAgICB9CiAgICAgIC8vIE1ha2Ugc3VyZSBtb2RpZmllcnMgbGlrZSBwcmV2ZW50IGFuZCBzdG9wIGdldCBleGVjdXRlZCBhZnRlciBrZXkgZmlsdGVyaW5nCiAgICAgIGlmIChnZW5Nb2RpZmllckNvZGUpIHsKICAgICAgICBjb2RlICs9IGdlbk1vZGlmaWVyQ29kZTsKICAgICAgfQogICAgICB2YXIgaGFuZGxlckNvZGUgPSBpc01ldGhvZFBhdGgKICAgICAgICA/ICgicmV0dXJuICIgKyAoaGFuZGxlci52YWx1ZSkgKyAiKCRldmVudCkiKQogICAgICAgIDogaXNGdW5jdGlvbkV4cHJlc3Npb24KICAgICAgICAgID8gKCJyZXR1cm4gKCIgKyAoaGFuZGxlci52YWx1ZSkgKyAiKSgkZXZlbnQpIikKICAgICAgICAgIDogaXNGdW5jdGlvbkludm9jYXRpb24KICAgICAgICAgICAgPyAoInJldHVybiAiICsgKGhhbmRsZXIudmFsdWUpKQogICAgICAgICAgICA6IGhhbmRsZXIudmFsdWU7CiAgICAgIHJldHVybiAoImZ1bmN0aW9uKCRldmVudCl7IiArIGNvZGUgKyBoYW5kbGVyQ29kZSArICJ9IikKICAgIH0KICB9CgogIGZ1bmN0aW9uIGdlbktleUZpbHRlciAoa2V5cykgewogICAgcmV0dXJuICgKICAgICAgLy8gbWFrZSBzdXJlIHRoZSBrZXkgZmlsdGVycyBvbmx5IGFwcGx5IHRvIEtleWJvYXJkRXZlbnRzCiAgICAgIC8vICM5NDQxOiBjYW4ndCB1c2UgJ2tleUNvZGUnIGluICRldmVudCBiZWNhdXNlIENocm9tZSBhdXRvZmlsbCBmaXJlcyBmYWtlCiAgICAgIC8vIGtleSBldmVudHMgdGhhdCBkbyBub3QgaGF2ZSBrZXlDb2RlIHByb3BlcnR5Li4uCiAgICAgICJpZighJGV2ZW50LnR5cGUuaW5kZXhPZigna2V5JykmJiIgKwogICAgICAoa2V5cy5tYXAoZ2VuRmlsdGVyQ29kZSkuam9pbignJiYnKSkgKyAiKXJldHVybiBudWxsOyIKICAgICkKICB9CgogIGZ1bmN0aW9uIGdlbkZpbHRlckNvZGUgKGtleSkgewogICAgdmFyIGtleVZhbCA9IHBhcnNlSW50KGtleSwgMTApOwogICAgaWYgKGtleVZhbCkgewogICAgICByZXR1cm4gKCIkZXZlbnQua2V5Q29kZSE9PSIgKyBrZXlWYWwpCiAgICB9CiAgICB2YXIga2V5Q29kZSA9IGtleUNvZGVzW2tleV07CiAgICB2YXIga2V5TmFtZSA9IGtleU5hbWVzW2tleV07CiAgICByZXR1cm4gKAogICAgICAiX2soJGV2ZW50LmtleUNvZGUsIiArCiAgICAgIChKU09OLnN0cmluZ2lmeShrZXkpKSArICIsIiArCiAgICAgIChKU09OLnN0cmluZ2lmeShrZXlDb2RlKSkgKyAiLCIgKwogICAgICAiJGV2ZW50LmtleSwiICsKICAgICAgIiIgKyAoSlNPTi5zdHJpbmdpZnkoa2V5TmFtZSkpICsKICAgICAgIikiCiAgICApCiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gb24gKGVsLCBkaXIpIHsKICAgIGlmIChkaXIubW9kaWZpZXJzKSB7CiAgICAgIHdhcm4oInYtb24gd2l0aG91dCBhcmd1bWVudCBkb2VzIG5vdCBzdXBwb3J0IG1vZGlmaWVycy4iKTsKICAgIH0KICAgIGVsLndyYXBMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoY29kZSkgeyByZXR1cm4gKCJfZygiICsgY29kZSArICIsIiArIChkaXIudmFsdWUpICsgIikiKTsgfTsKICB9CgogIC8qICAqLwoKICBmdW5jdGlvbiBiaW5kJDEgKGVsLCBkaXIpIHsKICAgIGVsLndyYXBEYXRhID0gZnVuY3Rpb24gKGNvZGUpIHsKICAgICAgcmV0dXJuICgiX2IoIiArIGNvZGUgKyAiLCciICsgKGVsLnRhZykgKyAiJywiICsgKGRpci52YWx1ZSkgKyAiLCIgKyAoZGlyLm1vZGlmaWVycyAmJiBkaXIubW9kaWZpZXJzLnByb3AgPyAndHJ1ZScgOiAnZmFsc2UnKSArIChkaXIubW9kaWZpZXJzICYmIGRpci5tb2RpZmllcnMuc3luYyA/ICcsdHJ1ZScgOiAnJykgKyAiKSIpCiAgICB9OwogIH0KCiAgLyogICovCgogIHZhciBiYXNlRGlyZWN0aXZlcyA9IHsKICAgIG9uOiBvbiwKICAgIGJpbmQ6IGJpbmQkMSwKICAgIGNsb2FrOiBub29wCiAgfTsKCiAgLyogICovCgoKCgoKICB2YXIgQ29kZWdlblN0YXRlID0gZnVuY3Rpb24gQ29kZWdlblN0YXRlIChvcHRpb25zKSB7CiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOwogICAgdGhpcy53YXJuID0gb3B0aW9ucy53YXJuIHx8IGJhc2VXYXJuOwogICAgdGhpcy50cmFuc2Zvcm1zID0gcGx1Y2tNb2R1bGVGdW5jdGlvbihvcHRpb25zLm1vZHVsZXMsICd0cmFuc2Zvcm1Db2RlJyk7CiAgICB0aGlzLmRhdGFHZW5GbnMgPSBwbHVja01vZHVsZUZ1bmN0aW9uKG9wdGlvbnMubW9kdWxlcywgJ2dlbkRhdGEnKTsKICAgIHRoaXMuZGlyZWN0aXZlcyA9IGV4dGVuZChleHRlbmQoe30sIGJhc2VEaXJlY3RpdmVzKSwgb3B0aW9ucy5kaXJlY3RpdmVzKTsKICAgIHZhciBpc1Jlc2VydmVkVGFnID0gb3B0aW9ucy5pc1Jlc2VydmVkVGFnIHx8IG5vOwogICAgdGhpcy5tYXliZUNvbXBvbmVudCA9IGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gISFlbC5jb21wb25lbnQgfHwgIWlzUmVzZXJ2ZWRUYWcoZWwudGFnKTsgfTsKICAgIHRoaXMub25jZUlkID0gMDsKICAgIHRoaXMuc3RhdGljUmVuZGVyRm5zID0gW107CiAgICB0aGlzLnByZSA9IGZhbHNlOwogIH07CgoKCiAgZnVuY3Rpb24gZ2VuZXJhdGUgKAogICAgYXN0LAogICAgb3B0aW9ucwogICkgewogICAgdmFyIHN0YXRlID0gbmV3IENvZGVnZW5TdGF0ZShvcHRpb25zKTsKICAgIHZhciBjb2RlID0gYXN0ID8gZ2VuRWxlbWVudChhc3QsIHN0YXRlKSA6ICdfYygiZGl2IiknOwogICAgcmV0dXJuIHsKICAgICAgcmVuZGVyOiAoIndpdGgodGhpcyl7cmV0dXJuICIgKyBjb2RlICsgIn0iKSwKICAgICAgc3RhdGljUmVuZGVyRm5zOiBzdGF0ZS5zdGF0aWNSZW5kZXJGbnMKICAgIH0KICB9CgogIGZ1bmN0aW9uIGdlbkVsZW1lbnQgKGVsLCBzdGF0ZSkgewogICAgaWYgKGVsLnBhcmVudCkgewogICAgICBlbC5wcmUgPSBlbC5wcmUgfHwgZWwucGFyZW50LnByZTsKICAgIH0KCiAgICBpZiAoZWwuc3RhdGljUm9vdCAmJiAhZWwuc3RhdGljUHJvY2Vzc2VkKSB7CiAgICAgIHJldHVybiBnZW5TdGF0aWMoZWwsIHN0YXRlKQogICAgfSBlbHNlIGlmIChlbC5vbmNlICYmICFlbC5vbmNlUHJvY2Vzc2VkKSB7CiAgICAgIHJldHVybiBnZW5PbmNlKGVsLCBzdGF0ZSkKICAgIH0gZWxzZSBpZiAoZWwuZm9yICYmICFlbC5mb3JQcm9jZXNzZWQpIHsKICAgICAgcmV0dXJuIGdlbkZvcihlbCwgc3RhdGUpCiAgICB9IGVsc2UgaWYgKGVsLmlmICYmICFlbC5pZlByb2Nlc3NlZCkgewogICAgICByZXR1cm4gZ2VuSWYoZWwsIHN0YXRlKQogICAgfSBlbHNlIGlmIChlbC50YWcgPT09ICd0ZW1wbGF0ZScgJiYgIWVsLnNsb3RUYXJnZXQgJiYgIXN0YXRlLnByZSkgewogICAgICByZXR1cm4gZ2VuQ2hpbGRyZW4oZWwsIHN0YXRlKSB8fCAndm9pZCAwJwogICAgfSBlbHNlIGlmIChlbC50YWcgPT09ICdzbG90JykgewogICAgICByZXR1cm4gZ2VuU2xvdChlbCwgc3RhdGUpCiAgICB9IGVsc2UgewogICAgICAvLyBjb21wb25lbnQgb3IgZWxlbWVudAogICAgICB2YXIgY29kZTsKICAgICAgaWYgKGVsLmNvbXBvbmVudCkgewogICAgICAgIGNvZGUgPSBnZW5Db21wb25lbnQoZWwuY29tcG9uZW50LCBlbCwgc3RhdGUpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBkYXRhOwogICAgICAgIGlmICghZWwucGxhaW4gfHwgKGVsLnByZSAmJiBzdGF0ZS5tYXliZUNvbXBvbmVudChlbCkpKSB7CiAgICAgICAgICBkYXRhID0gZ2VuRGF0YSQyKGVsLCBzdGF0ZSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgY2hpbGRyZW4gPSBlbC5pbmxpbmVUZW1wbGF0ZSA/IG51bGwgOiBnZW5DaGlsZHJlbihlbCwgc3RhdGUsIHRydWUpOwogICAgICAgIGNvZGUgPSAiX2MoJyIgKyAoZWwudGFnKSArICInIiArIChkYXRhID8gKCIsIiArIGRhdGEpIDogJycpICsgKGNoaWxkcmVuID8gKCIsIiArIGNoaWxkcmVuKSA6ICcnKSArICIpIjsKICAgICAgfQogICAgICAvLyBtb2R1bGUgdHJhbnNmb3JtcwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YXRlLnRyYW5zZm9ybXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb2RlID0gc3RhdGUudHJhbnNmb3Jtc1tpXShlbCwgY29kZSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGNvZGUKICAgIH0KICB9CgogIC8vIGhvaXN0IHN0YXRpYyBzdWItdHJlZXMgb3V0CiAgZnVuY3Rpb24gZ2VuU3RhdGljIChlbCwgc3RhdGUpIHsKICAgIGVsLnN0YXRpY1Byb2Nlc3NlZCA9IHRydWU7CiAgICAvLyBTb21lIGVsZW1lbnRzICh0ZW1wbGF0ZXMpIG5lZWQgdG8gYmVoYXZlIGRpZmZlcmVudGx5IGluc2lkZSBvZiBhIHYtcHJlCiAgICAvLyBub2RlLiAgQWxsIHByZSBub2RlcyBhcmUgc3RhdGljIHJvb3RzLCBzbyB3ZSBjYW4gdXNlIHRoaXMgYXMgYSBsb2NhdGlvbiB0bwogICAgLy8gd3JhcCBhIHN0YXRlIGNoYW5nZSBhbmQgcmVzZXQgaXQgdXBvbiBleGl0aW5nIHRoZSBwcmUgbm9kZS4KICAgIHZhciBvcmlnaW5hbFByZVN0YXRlID0gc3RhdGUucHJlOwogICAgaWYgKGVsLnByZSkgewogICAgICBzdGF0ZS5wcmUgPSBlbC5wcmU7CiAgICB9CiAgICBzdGF0ZS5zdGF0aWNSZW5kZXJGbnMucHVzaCgoIndpdGgodGhpcyl7cmV0dXJuICIgKyAoZ2VuRWxlbWVudChlbCwgc3RhdGUpKSArICJ9IikpOwogICAgc3RhdGUucHJlID0gb3JpZ2luYWxQcmVTdGF0ZTsKICAgIHJldHVybiAoIl9tKCIgKyAoc3RhdGUuc3RhdGljUmVuZGVyRm5zLmxlbmd0aCAtIDEpICsgKGVsLnN0YXRpY0luRm9yID8gJyx0cnVlJyA6ICcnKSArICIpIikKICB9CgogIC8vIHYtb25jZQogIGZ1bmN0aW9uIGdlbk9uY2UgKGVsLCBzdGF0ZSkgewogICAgZWwub25jZVByb2Nlc3NlZCA9IHRydWU7CiAgICBpZiAoZWwuaWYgJiYgIWVsLmlmUHJvY2Vzc2VkKSB7CiAgICAgIHJldHVybiBnZW5JZihlbCwgc3RhdGUpCiAgICB9IGVsc2UgaWYgKGVsLnN0YXRpY0luRm9yKSB7CiAgICAgIHZhciBrZXkgPSAnJzsKICAgICAgdmFyIHBhcmVudCA9IGVsLnBhcmVudDsKICAgICAgd2hpbGUgKHBhcmVudCkgewogICAgICAgIGlmIChwYXJlbnQuZm9yKSB7CiAgICAgICAgICBrZXkgPSBwYXJlbnQua2V5OwogICAgICAgICAgYnJlYWsKICAgICAgICB9CiAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDsKICAgICAgfQogICAgICBpZiAoIWtleSkgewogICAgICAgIHN0YXRlLndhcm4oCiAgICAgICAgICAidi1vbmNlIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIHYtZm9yIHRoYXQgaXMga2V5ZWQuICIsCiAgICAgICAgICBlbC5yYXdBdHRyc01hcFsndi1vbmNlJ10KICAgICAgICApOwogICAgICAgIHJldHVybiBnZW5FbGVtZW50KGVsLCBzdGF0ZSkKICAgICAgfQogICAgICByZXR1cm4gKCJfbygiICsgKGdlbkVsZW1lbnQoZWwsIHN0YXRlKSkgKyAiLCIgKyAoc3RhdGUub25jZUlkKyspICsgIiwiICsga2V5ICsgIikiKQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGdlblN0YXRpYyhlbCwgc3RhdGUpCiAgICB9CiAgfQoKICBmdW5jdGlvbiBnZW5JZiAoCiAgICBlbCwKICAgIHN0YXRlLAogICAgYWx0R2VuLAogICAgYWx0RW1wdHkKICApIHsKICAgIGVsLmlmUHJvY2Vzc2VkID0gdHJ1ZTsgLy8gYXZvaWQgcmVjdXJzaW9uCiAgICByZXR1cm4gZ2VuSWZDb25kaXRpb25zKGVsLmlmQ29uZGl0aW9ucy5zbGljZSgpLCBzdGF0ZSwgYWx0R2VuLCBhbHRFbXB0eSkKICB9CgogIGZ1bmN0aW9uIGdlbklmQ29uZGl0aW9ucyAoCiAgICBjb25kaXRpb25zLAogICAgc3RhdGUsCiAgICBhbHRHZW4sCiAgICBhbHRFbXB0eQogICkgewogICAgaWYgKCFjb25kaXRpb25zLmxlbmd0aCkgewogICAgICByZXR1cm4gYWx0RW1wdHkgfHwgJ19lKCknCiAgICB9CgogICAgdmFyIGNvbmRpdGlvbiA9IGNvbmRpdGlvbnMuc2hpZnQoKTsKICAgIGlmIChjb25kaXRpb24uZXhwKSB7CiAgICAgIHJldHVybiAoIigiICsgKGNvbmRpdGlvbi5leHApICsgIik/IiArIChnZW5UZXJuYXJ5RXhwKGNvbmRpdGlvbi5ibG9jaykpICsgIjoiICsgKGdlbklmQ29uZGl0aW9ucyhjb25kaXRpb25zLCBzdGF0ZSwgYWx0R2VuLCBhbHRFbXB0eSkpKQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICgiIiArIChnZW5UZXJuYXJ5RXhwKGNvbmRpdGlvbi5ibG9jaykpKQogICAgfQoKICAgIC8vIHYtaWYgd2l0aCB2LW9uY2Ugc2hvdWxkIGdlbmVyYXRlIGNvZGUgbGlrZSAoYSk/X20oMCk6X20oMSkKICAgIGZ1bmN0aW9uIGdlblRlcm5hcnlFeHAgKGVsKSB7CiAgICAgIHJldHVybiBhbHRHZW4KICAgICAgICA/IGFsdEdlbihlbCwgc3RhdGUpCiAgICAgICAgOiBlbC5vbmNlCiAgICAgICAgICA/IGdlbk9uY2UoZWwsIHN0YXRlKQogICAgICAgICAgOiBnZW5FbGVtZW50KGVsLCBzdGF0ZSkKICAgIH0KICB9CgogIGZ1bmN0aW9uIGdlbkZvciAoCiAgICBlbCwKICAgIHN0YXRlLAogICAgYWx0R2VuLAogICAgYWx0SGVscGVyCiAgKSB7CiAgICB2YXIgZXhwID0gZWwuZm9yOwogICAgdmFyIGFsaWFzID0gZWwuYWxpYXM7CiAgICB2YXIgaXRlcmF0b3IxID0gZWwuaXRlcmF0b3IxID8gKCIsIiArIChlbC5pdGVyYXRvcjEpKSA6ICcnOwogICAgdmFyIGl0ZXJhdG9yMiA9IGVsLml0ZXJhdG9yMiA/ICgiLCIgKyAoZWwuaXRlcmF0b3IyKSkgOiAnJzsKCiAgICBpZiAoc3RhdGUubWF5YmVDb21wb25lbnQoZWwpICYmCiAgICAgIGVsLnRhZyAhPT0gJ3Nsb3QnICYmCiAgICAgIGVsLnRhZyAhPT0gJ3RlbXBsYXRlJyAmJgogICAgICAhZWwua2V5CiAgICApIHsKICAgICAgc3RhdGUud2FybigKICAgICAgICAiPCIgKyAoZWwudGFnKSArICIgdi1mb3I9XCIiICsgYWxpYXMgKyAiIGluICIgKyBleHAgKyAiXCI+OiBjb21wb25lbnQgbGlzdHMgcmVuZGVyZWQgd2l0aCAiICsKICAgICAgICAidi1mb3Igc2hvdWxkIGhhdmUgZXhwbGljaXQga2V5cy4gIiArCiAgICAgICAgIlNlZSBodHRwczovL3Z1ZWpzLm9yZy9ndWlkZS9saXN0Lmh0bWwja2V5IGZvciBtb3JlIGluZm8uIiwKICAgICAgICBlbC5yYXdBdHRyc01hcFsndi1mb3InXSwKICAgICAgICB0cnVlIC8qIHRpcCAqLwogICAgICApOwogICAgfQoKICAgIGVsLmZvclByb2Nlc3NlZCA9IHRydWU7IC8vIGF2b2lkIHJlY3Vyc2lvbgogICAgcmV0dXJuIChhbHRIZWxwZXIgfHwgJ19sJykgKyAiKCgiICsgZXhwICsgIiksIiArCiAgICAgICJmdW5jdGlvbigiICsgYWxpYXMgKyBpdGVyYXRvcjEgKyBpdGVyYXRvcjIgKyAiKXsiICsKICAgICAgICAicmV0dXJuICIgKyAoKGFsdEdlbiB8fCBnZW5FbGVtZW50KShlbCwgc3RhdGUpKSArCiAgICAgICd9KScKICB9CgogIGZ1bmN0aW9uIGdlbkRhdGEkMiAoZWwsIHN0YXRlKSB7CiAgICB2YXIgZGF0YSA9ICd7JzsKCiAgICAvLyBkaXJlY3RpdmVzIGZpcnN0LgogICAgLy8gZGlyZWN0aXZlcyBtYXkgbXV0YXRlIHRoZSBlbCdzIG90aGVyIHByb3BlcnRpZXMgYmVmb3JlIHRoZXkgYXJlIGdlbmVyYXRlZC4KICAgIHZhciBkaXJzID0gZ2VuRGlyZWN0aXZlcyhlbCwgc3RhdGUpOwogICAgaWYgKGRpcnMpIHsgZGF0YSArPSBkaXJzICsgJywnOyB9CgogICAgLy8ga2V5CiAgICBpZiAoZWwua2V5KSB7CiAgICAgIGRhdGEgKz0gImtleToiICsgKGVsLmtleSkgKyAiLCI7CiAgICB9CiAgICAvLyByZWYKICAgIGlmIChlbC5yZWYpIHsKICAgICAgZGF0YSArPSAicmVmOiIgKyAoZWwucmVmKSArICIsIjsKICAgIH0KICAgIGlmIChlbC5yZWZJbkZvcikgewogICAgICBkYXRhICs9ICJyZWZJbkZvcjp0cnVlLCI7CiAgICB9CiAgICAvLyBwcmUKICAgIGlmIChlbC5wcmUpIHsKICAgICAgZGF0YSArPSAicHJlOnRydWUsIjsKICAgIH0KICAgIC8vIHJlY29yZCBvcmlnaW5hbCB0YWcgbmFtZSBmb3IgY29tcG9uZW50cyB1c2luZyAiaXMiIGF0dHJpYnV0ZQogICAgaWYgKGVsLmNvbXBvbmVudCkgewogICAgICBkYXRhICs9ICJ0YWc6XCIiICsgKGVsLnRhZykgKyAiXCIsIjsKICAgIH0KICAgIC8vIG1vZHVsZSBkYXRhIGdlbmVyYXRpb24gZnVuY3Rpb25zCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YXRlLmRhdGFHZW5GbnMubGVuZ3RoOyBpKyspIHsKICAgICAgZGF0YSArPSBzdGF0ZS5kYXRhR2VuRm5zW2ldKGVsKTsKICAgIH0KICAgIC8vIGF0dHJpYnV0ZXMKICAgIGlmIChlbC5hdHRycykgewogICAgICBkYXRhICs9ICJhdHRyczoiICsgKGdlblByb3BzKGVsLmF0dHJzKSkgKyAiLCI7CiAgICB9CiAgICAvLyBET00gcHJvcHMKICAgIGlmIChlbC5wcm9wcykgewogICAgICBkYXRhICs9ICJkb21Qcm9wczoiICsgKGdlblByb3BzKGVsLnByb3BzKSkgKyAiLCI7CiAgICB9CiAgICAvLyBldmVudCBoYW5kbGVycwogICAgaWYgKGVsLmV2ZW50cykgewogICAgICBkYXRhICs9IChnZW5IYW5kbGVycyhlbC5ldmVudHMsIGZhbHNlKSkgKyAiLCI7CiAgICB9CiAgICBpZiAoZWwubmF0aXZlRXZlbnRzKSB7CiAgICAgIGRhdGEgKz0gKGdlbkhhbmRsZXJzKGVsLm5hdGl2ZUV2ZW50cywgdHJ1ZSkpICsgIiwiOwogICAgfQogICAgLy8gc2xvdCB0YXJnZXQKICAgIC8vIG9ubHkgZm9yIG5vbi1zY29wZWQgc2xvdHMKICAgIGlmIChlbC5zbG90VGFyZ2V0ICYmICFlbC5zbG90U2NvcGUpIHsKICAgICAgZGF0YSArPSAic2xvdDoiICsgKGVsLnNsb3RUYXJnZXQpICsgIiwiOwogICAgfQogICAgLy8gc2NvcGVkIHNsb3RzCiAgICBpZiAoZWwuc2NvcGVkU2xvdHMpIHsKICAgICAgZGF0YSArPSAoZ2VuU2NvcGVkU2xvdHMoZWwsIGVsLnNjb3BlZFNsb3RzLCBzdGF0ZSkpICsgIiwiOwogICAgfQogICAgLy8gY29tcG9uZW50IHYtbW9kZWwKICAgIGlmIChlbC5tb2RlbCkgewogICAgICBkYXRhICs9ICJtb2RlbDp7dmFsdWU6IiArIChlbC5tb2RlbC52YWx1ZSkgKyAiLGNhbGxiYWNrOiIgKyAoZWwubW9kZWwuY2FsbGJhY2spICsgIixleHByZXNzaW9uOiIgKyAoZWwubW9kZWwuZXhwcmVzc2lvbikgKyAifSwiOwogICAgfQogICAgLy8gaW5saW5lLXRlbXBsYXRlCiAgICBpZiAoZWwuaW5saW5lVGVtcGxhdGUpIHsKICAgICAgdmFyIGlubGluZVRlbXBsYXRlID0gZ2VuSW5saW5lVGVtcGxhdGUoZWwsIHN0YXRlKTsKICAgICAgaWYgKGlubGluZVRlbXBsYXRlKSB7CiAgICAgICAgZGF0YSArPSBpbmxpbmVUZW1wbGF0ZSArICIsIjsKICAgICAgfQogICAgfQogICAgZGF0YSA9IGRhdGEucmVwbGFjZSgvLCQvLCAnJykgKyAnfSc7CiAgICAvLyB2LWJpbmQgZHluYW1pYyBhcmd1bWVudCB3cmFwCiAgICAvLyB2LWJpbmQgd2l0aCBkeW5hbWljIGFyZ3VtZW50cyBtdXN0IGJlIGFwcGxpZWQgdXNpbmcgdGhlIHNhbWUgdi1iaW5kIG9iamVjdAogICAgLy8gbWVyZ2UgaGVscGVyIHNvIHRoYXQgY2xhc3Mvc3R5bGUvbXVzdFVzZVByb3AgYXR0cnMgYXJlIGhhbmRsZWQgY29ycmVjdGx5LgogICAgaWYgKGVsLmR5bmFtaWNBdHRycykgewogICAgICBkYXRhID0gIl9iKCIgKyBkYXRhICsgIixcIiIgKyAoZWwudGFnKSArICJcIiwiICsgKGdlblByb3BzKGVsLmR5bmFtaWNBdHRycykpICsgIikiOwogICAgfQogICAgLy8gdi1iaW5kIGRhdGEgd3JhcAogICAgaWYgKGVsLndyYXBEYXRhKSB7CiAgICAgIGRhdGEgPSBlbC53cmFwRGF0YShkYXRhKTsKICAgIH0KICAgIC8vIHYtb24gZGF0YSB3cmFwCiAgICBpZiAoZWwud3JhcExpc3RlbmVycykgewogICAgICBkYXRhID0gZWwud3JhcExpc3RlbmVycyhkYXRhKTsKICAgIH0KICAgIHJldHVybiBkYXRhCiAgfQoKICBmdW5jdGlvbiBnZW5EaXJlY3RpdmVzIChlbCwgc3RhdGUpIHsKICAgIHZhciBkaXJzID0gZWwuZGlyZWN0aXZlczsKICAgIGlmICghZGlycykgeyByZXR1cm4gfQogICAgdmFyIHJlcyA9ICdkaXJlY3RpdmVzOlsnOwogICAgdmFyIGhhc1J1bnRpbWUgPSBmYWxzZTsKICAgIHZhciBpLCBsLCBkaXIsIG5lZWRSdW50aW1lOwogICAgZm9yIChpID0gMCwgbCA9IGRpcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgIGRpciA9IGRpcnNbaV07CiAgICAgIG5lZWRSdW50aW1lID0gdHJ1ZTsKICAgICAgdmFyIGdlbiA9IHN0YXRlLmRpcmVjdGl2ZXNbZGlyLm5hbWVdOwogICAgICBpZiAoZ2VuKSB7CiAgICAgICAgLy8gY29tcGlsZS10aW1lIGRpcmVjdGl2ZSB0aGF0IG1hbmlwdWxhdGVzIEFTVC4KICAgICAgICAvLyByZXR1cm5zIHRydWUgaWYgaXQgYWxzbyBuZWVkcyBhIHJ1bnRpbWUgY291bnRlcnBhcnQuCiAgICAgICAgbmVlZFJ1bnRpbWUgPSAhIWdlbihlbCwgZGlyLCBzdGF0ZS53YXJuKTsKICAgICAgfQogICAgICBpZiAobmVlZFJ1bnRpbWUpIHsKICAgICAgICBoYXNSdW50aW1lID0gdHJ1ZTsKICAgICAgICByZXMgKz0gIntuYW1lOlwiIiArIChkaXIubmFtZSkgKyAiXCIscmF3TmFtZTpcIiIgKyAoZGlyLnJhd05hbWUpICsgIlwiIiArIChkaXIudmFsdWUgPyAoIix2YWx1ZTooIiArIChkaXIudmFsdWUpICsgIiksZXhwcmVzc2lvbjoiICsgKEpTT04uc3RyaW5naWZ5KGRpci52YWx1ZSkpKSA6ICcnKSArIChkaXIuYXJnID8gKCIsYXJnOiIgKyAoZGlyLmlzRHluYW1pY0FyZyA/IGRpci5hcmcgOiAoIlwiIiArIChkaXIuYXJnKSArICJcIiIpKSkgOiAnJykgKyAoZGlyLm1vZGlmaWVycyA/ICgiLG1vZGlmaWVyczoiICsgKEpTT04uc3RyaW5naWZ5KGRpci5tb2RpZmllcnMpKSkgOiAnJykgKyAifSwiOwogICAgICB9CiAgICB9CiAgICBpZiAoaGFzUnVudGltZSkgewogICAgICByZXR1cm4gcmVzLnNsaWNlKDAsIC0xKSArICddJwogICAgfQogIH0KCiAgZnVuY3Rpb24gZ2VuSW5saW5lVGVtcGxhdGUgKGVsLCBzdGF0ZSkgewogICAgdmFyIGFzdCA9IGVsLmNoaWxkcmVuWzBdOwogICAgaWYgKGVsLmNoaWxkcmVuLmxlbmd0aCAhPT0gMSB8fCBhc3QudHlwZSAhPT0gMSkgewogICAgICBzdGF0ZS53YXJuKAogICAgICAgICdJbmxpbmUtdGVtcGxhdGUgY29tcG9uZW50cyBtdXN0IGhhdmUgZXhhY3RseSBvbmUgY2hpbGQgZWxlbWVudC4nLAogICAgICAgIHsgc3RhcnQ6IGVsLnN0YXJ0IH0KICAgICAgKTsKICAgIH0KICAgIGlmIChhc3QgJiYgYXN0LnR5cGUgPT09IDEpIHsKICAgICAgdmFyIGlubGluZVJlbmRlckZucyA9IGdlbmVyYXRlKGFzdCwgc3RhdGUub3B0aW9ucyk7CiAgICAgIHJldHVybiAoImlubGluZVRlbXBsYXRlOntyZW5kZXI6ZnVuY3Rpb24oKXsiICsgKGlubGluZVJlbmRlckZucy5yZW5kZXIpICsgIn0sc3RhdGljUmVuZGVyRm5zOlsiICsgKGlubGluZVJlbmRlckZucy5zdGF0aWNSZW5kZXJGbnMubWFwKGZ1bmN0aW9uIChjb2RlKSB7IHJldHVybiAoImZ1bmN0aW9uKCl7IiArIGNvZGUgKyAifSIpOyB9KS5qb2luKCcsJykpICsgIl19IikKICAgIH0KICB9CgogIGZ1bmN0aW9uIGdlblNjb3BlZFNsb3RzICgKICAgIGVsLAogICAgc2xvdHMsCiAgICBzdGF0ZQogICkgewogICAgLy8gYnkgZGVmYXVsdCBzY29wZWQgc2xvdHMgYXJlIGNvbnNpZGVyZWQgInN0YWJsZSIsIHRoaXMgYWxsb3dzIGNoaWxkCiAgICAvLyBjb21wb25lbnRzIHdpdGggb25seSBzY29wZWQgc2xvdHMgdG8gc2tpcCBmb3JjZWQgdXBkYXRlcyBmcm9tIHBhcmVudC4KICAgIC8vIGJ1dCBpbiBzb21lIGNhc2VzIHdlIGhhdmUgdG8gYmFpbC1vdXQgb2YgdGhpcyBvcHRpbWl6YXRpb24KICAgIC8vIGZvciBleGFtcGxlIGlmIHRoZSBzbG90IGNvbnRhaW5zIGR5bmFtaWMgbmFtZXMsIGhhcyB2LWlmIG9yIHYtZm9yIG9uIHRoZW0uLi4KICAgIHZhciBuZWVkc0ZvcmNlVXBkYXRlID0gZWwuZm9yIHx8IE9iamVjdC5rZXlzKHNsb3RzKS5zb21lKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgdmFyIHNsb3QgPSBzbG90c1trZXldOwogICAgICByZXR1cm4gKAogICAgICAgIHNsb3Quc2xvdFRhcmdldER5bmFtaWMgfHwKICAgICAgICBzbG90LmlmIHx8CiAgICAgICAgc2xvdC5mb3IgfHwKICAgICAgICBjb250YWluc1Nsb3RDaGlsZChzbG90KSAvLyBpcyBwYXNzaW5nIGRvd24gc2xvdCBmcm9tIHBhcmVudCB3aGljaCBtYXkgYmUgZHluYW1pYwogICAgICApCiAgICB9KTsKCiAgICAvLyAjOTUzNDogaWYgYSBjb21wb25lbnQgd2l0aCBzY29wZWQgc2xvdHMgaXMgaW5zaWRlIGEgY29uZGl0aW9uYWwgYnJhbmNoLAogICAgLy8gaXQncyBwb3NzaWJsZSBmb3IgdGhlIHNhbWUgY29tcG9uZW50IHRvIGJlIHJldXNlZCBidXQgd2l0aCBkaWZmZXJlbnQKICAgIC8vIGNvbXBpbGVkIHNsb3QgY29udGVudC4gVG8gYXZvaWQgdGhhdCwgd2UgZ2VuZXJhdGUgYSB1bmlxdWUga2V5IGJhc2VkIG9uCiAgICAvLyB0aGUgZ2VuZXJhdGVkIGNvZGUgb2YgYWxsIHRoZSBzbG90IGNvbnRlbnRzLgogICAgdmFyIG5lZWRzS2V5ID0gISFlbC5pZjsKCiAgICAvLyBPUiB3aGVuIGl0IGlzIGluc2lkZSBhbm90aGVyIHNjb3BlZCBzbG90IG9yIHYtZm9yICh0aGUgcmVhY3Rpdml0eSBtYXkgYmUKICAgIC8vIGRpc2Nvbm5lY3RlZCBkdWUgdG8gdGhlIGludGVybWVkaWF0ZSBzY29wZSB2YXJpYWJsZSkKICAgIC8vICM5NDM4LCAjOTUwNgogICAgLy8gVE9ETzogdGhpcyBjYW4gYmUgZnVydGhlciBvcHRpbWl6ZWQgYnkgcHJvcGVybHkgYW5hbHl6aW5nIGluLXNjb3BlIGJpbmRpbmdzCiAgICAvLyBhbmQgc2tpcCBmb3JjZSB1cGRhdGluZyBvbmVzIHRoYXQgZG8gbm90IGFjdHVhbGx5IHVzZSBzY29wZSB2YXJpYWJsZXMuCiAgICBpZiAoIW5lZWRzRm9yY2VVcGRhdGUpIHsKICAgICAgdmFyIHBhcmVudCA9IGVsLnBhcmVudDsKICAgICAgd2hpbGUgKHBhcmVudCkgewogICAgICAgIGlmICgKICAgICAgICAgIChwYXJlbnQuc2xvdFNjb3BlICYmIHBhcmVudC5zbG90U2NvcGUgIT09IGVtcHR5U2xvdFNjb3BlVG9rZW4pIHx8CiAgICAgICAgICBwYXJlbnQuZm9yCiAgICAgICAgKSB7CiAgICAgICAgICBuZWVkc0ZvcmNlVXBkYXRlID0gdHJ1ZTsKICAgICAgICAgIGJyZWFrCiAgICAgICAgfQogICAgICAgIGlmIChwYXJlbnQuaWYpIHsKICAgICAgICAgIG5lZWRzS2V5ID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDsKICAgICAgfQogICAgfQoKICAgIHZhciBnZW5lcmF0ZWRTbG90cyA9IE9iamVjdC5rZXlzKHNsb3RzKQogICAgICAubWFwKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGdlblNjb3BlZFNsb3Qoc2xvdHNba2V5XSwgc3RhdGUpOyB9KQogICAgICAuam9pbignLCcpOwoKICAgIHJldHVybiAoInNjb3BlZFNsb3RzOl91KFsiICsgZ2VuZXJhdGVkU2xvdHMgKyAiXSIgKyAobmVlZHNGb3JjZVVwZGF0ZSA/ICIsbnVsbCx0cnVlIiA6ICIiKSArICghbmVlZHNGb3JjZVVwZGF0ZSAmJiBuZWVkc0tleSA/ICgiLG51bGwsZmFsc2UsIiArIChoYXNoKGdlbmVyYXRlZFNsb3RzKSkpIDogIiIpICsgIikiKQogIH0KCiAgZnVuY3Rpb24gaGFzaChzdHIpIHsKICAgIHZhciBoYXNoID0gNTM4MTsKICAgIHZhciBpID0gc3RyLmxlbmd0aDsKICAgIHdoaWxlKGkpIHsKICAgICAgaGFzaCA9IChoYXNoICogMzMpIF4gc3RyLmNoYXJDb2RlQXQoLS1pKTsKICAgIH0KICAgIHJldHVybiBoYXNoID4+PiAwCiAgfQoKICBmdW5jdGlvbiBjb250YWluc1Nsb3RDaGlsZCAoZWwpIHsKICAgIGlmIChlbC50eXBlID09PSAxKSB7CiAgICAgIGlmIChlbC50YWcgPT09ICdzbG90JykgewogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgICAgcmV0dXJuIGVsLmNoaWxkcmVuLnNvbWUoY29udGFpbnNTbG90Q2hpbGQpCiAgICB9CiAgICByZXR1cm4gZmFsc2UKICB9CgogIGZ1bmN0aW9uIGdlblNjb3BlZFNsb3QgKAogICAgZWwsCiAgICBzdGF0ZQogICkgewogICAgdmFyIGlzTGVnYWN5U3ludGF4ID0gZWwuYXR0cnNNYXBbJ3Nsb3Qtc2NvcGUnXTsKICAgIGlmIChlbC5pZiAmJiAhZWwuaWZQcm9jZXNzZWQgJiYgIWlzTGVnYWN5U3ludGF4KSB7CiAgICAgIHJldHVybiBnZW5JZihlbCwgc3RhdGUsIGdlblNjb3BlZFNsb3QsICJudWxsIikKICAgIH0KICAgIGlmIChlbC5mb3IgJiYgIWVsLmZvclByb2Nlc3NlZCkgewogICAgICByZXR1cm4gZ2VuRm9yKGVsLCBzdGF0ZSwgZ2VuU2NvcGVkU2xvdCkKICAgIH0KICAgIHZhciBzbG90U2NvcGUgPSBlbC5zbG90U2NvcGUgPT09IGVtcHR5U2xvdFNjb3BlVG9rZW4KICAgICAgPyAiIgogICAgICA6IFN0cmluZyhlbC5zbG90U2NvcGUpOwogICAgdmFyIGZuID0gImZ1bmN0aW9uKCIgKyBzbG90U2NvcGUgKyAiKXsiICsKICAgICAgInJldHVybiAiICsgKGVsLnRhZyA9PT0gJ3RlbXBsYXRlJwogICAgICAgID8gZWwuaWYgJiYgaXNMZWdhY3lTeW50YXgKICAgICAgICAgID8gKCIoIiArIChlbC5pZikgKyAiKT8iICsgKGdlbkNoaWxkcmVuKGVsLCBzdGF0ZSkgfHwgJ3VuZGVmaW5lZCcpICsgIjp1bmRlZmluZWQiKQogICAgICAgICAgOiBnZW5DaGlsZHJlbihlbCwgc3RhdGUpIHx8ICd1bmRlZmluZWQnCiAgICAgICAgOiBnZW5FbGVtZW50KGVsLCBzdGF0ZSkpICsgIn0iOwogICAgLy8gcmV2ZXJzZSBwcm94eSB2LXNsb3Qgd2l0aG91dCBzY29wZSBvbiB0aGlzLiRzbG90cwogICAgdmFyIHJldmVyc2VQcm94eSA9IHNsb3RTY29wZSA/ICIiIDogIixwcm94eTp0cnVlIjsKICAgIHJldHVybiAoIntrZXk6IiArIChlbC5zbG90VGFyZ2V0IHx8ICJcImRlZmF1bHRcIiIpICsgIixmbjoiICsgZm4gKyByZXZlcnNlUHJveHkgKyAifSIpCiAgfQoKICBmdW5jdGlvbiBnZW5DaGlsZHJlbiAoCiAgICBlbCwKICAgIHN0YXRlLAogICAgY2hlY2tTa2lwLAogICAgYWx0R2VuRWxlbWVudCwKICAgIGFsdEdlbk5vZGUKICApIHsKICAgIHZhciBjaGlsZHJlbiA9IGVsLmNoaWxkcmVuOwogICAgaWYgKGNoaWxkcmVuLmxlbmd0aCkgewogICAgICB2YXIgZWwkMSA9IGNoaWxkcmVuWzBdOwogICAgICAvLyBvcHRpbWl6ZSBzaW5nbGUgdi1mb3IKICAgICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJgogICAgICAgIGVsJDEuZm9yICYmCiAgICAgICAgZWwkMS50YWcgIT09ICd0ZW1wbGF0ZScgJiYKICAgICAgICBlbCQxLnRhZyAhPT0gJ3Nsb3QnCiAgICAgICkgewogICAgICAgIHZhciBub3JtYWxpemF0aW9uVHlwZSA9IGNoZWNrU2tpcAogICAgICAgICAgPyBzdGF0ZS5tYXliZUNvbXBvbmVudChlbCQxKSA/ICIsMSIgOiAiLDAiCiAgICAgICAgICA6ICIiOwogICAgICAgIHJldHVybiAoIiIgKyAoKGFsdEdlbkVsZW1lbnQgfHwgZ2VuRWxlbWVudCkoZWwkMSwgc3RhdGUpKSArIG5vcm1hbGl6YXRpb25UeXBlKQogICAgICB9CiAgICAgIHZhciBub3JtYWxpemF0aW9uVHlwZSQxID0gY2hlY2tTa2lwCiAgICAgICAgPyBnZXROb3JtYWxpemF0aW9uVHlwZShjaGlsZHJlbiwgc3RhdGUubWF5YmVDb21wb25lbnQpCiAgICAgICAgOiAwOwogICAgICB2YXIgZ2VuID0gYWx0R2VuTm9kZSB8fCBnZW5Ob2RlOwogICAgICByZXR1cm4gKCJbIiArIChjaGlsZHJlbi5tYXAoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGdlbihjLCBzdGF0ZSk7IH0pLmpvaW4oJywnKSkgKyAiXSIgKyAobm9ybWFsaXphdGlvblR5cGUkMSA/ICgiLCIgKyBub3JtYWxpemF0aW9uVHlwZSQxKSA6ICcnKSkKICAgIH0KICB9CgogIC8vIGRldGVybWluZSB0aGUgbm9ybWFsaXphdGlvbiBuZWVkZWQgZm9yIHRoZSBjaGlsZHJlbiBhcnJheS4KICAvLyAwOiBubyBub3JtYWxpemF0aW9uIG5lZWRlZAogIC8vIDE6IHNpbXBsZSBub3JtYWxpemF0aW9uIG5lZWRlZCAocG9zc2libGUgMS1sZXZlbCBkZWVwIG5lc3RlZCBhcnJheSkKICAvLyAyOiBmdWxsIG5vcm1hbGl6YXRpb24gbmVlZGVkCiAgZnVuY3Rpb24gZ2V0Tm9ybWFsaXphdGlvblR5cGUgKAogICAgY2hpbGRyZW4sCiAgICBtYXliZUNvbXBvbmVudAogICkgewogICAgdmFyIHJlcyA9IDA7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBlbCA9IGNoaWxkcmVuW2ldOwogICAgICBpZiAoZWwudHlwZSAhPT0gMSkgewogICAgICAgIGNvbnRpbnVlCiAgICAgIH0KICAgICAgaWYgKG5lZWRzTm9ybWFsaXphdGlvbihlbCkgfHwKICAgICAgICAgIChlbC5pZkNvbmRpdGlvbnMgJiYgZWwuaWZDb25kaXRpb25zLnNvbWUoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIG5lZWRzTm9ybWFsaXphdGlvbihjLmJsb2NrKTsgfSkpKSB7CiAgICAgICAgcmVzID0gMjsKICAgICAgICBicmVhawogICAgICB9CiAgICAgIGlmIChtYXliZUNvbXBvbmVudChlbCkgfHwKICAgICAgICAgIChlbC5pZkNvbmRpdGlvbnMgJiYgZWwuaWZDb25kaXRpb25zLnNvbWUoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIG1heWJlQ29tcG9uZW50KGMuYmxvY2spOyB9KSkpIHsKICAgICAgICByZXMgPSAxOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gcmVzCiAgfQoKICBmdW5jdGlvbiBuZWVkc05vcm1hbGl6YXRpb24gKGVsKSB7CiAgICByZXR1cm4gZWwuZm9yICE9PSB1bmRlZmluZWQgfHwgZWwudGFnID09PSAndGVtcGxhdGUnIHx8IGVsLnRhZyA9PT0gJ3Nsb3QnCiAgfQoKICBmdW5jdGlvbiBnZW5Ob2RlIChub2RlLCBzdGF0ZSkgewogICAgaWYgKG5vZGUudHlwZSA9PT0gMSkgewogICAgICByZXR1cm4gZ2VuRWxlbWVudChub2RlLCBzdGF0ZSkKICAgIH0gZWxzZSBpZiAobm9kZS50eXBlID09PSAzICYmIG5vZGUuaXNDb21tZW50KSB7CiAgICAgIHJldHVybiBnZW5Db21tZW50KG5vZGUpCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZ2VuVGV4dChub2RlKQogICAgfQogIH0KCiAgZnVuY3Rpb24gZ2VuVGV4dCAodGV4dCkgewogICAgcmV0dXJuICgiX3YoIiArICh0ZXh0LnR5cGUgPT09IDIKICAgICAgPyB0ZXh0LmV4cHJlc3Npb24gLy8gbm8gbmVlZCBmb3IgKCkgYmVjYXVzZSBhbHJlYWR5IHdyYXBwZWQgaW4gX3MoKQogICAgICA6IHRyYW5zZm9ybVNwZWNpYWxOZXdsaW5lcyhKU09OLnN0cmluZ2lmeSh0ZXh0LnRleHQpKSkgKyAiKSIpCiAgfQoKICBmdW5jdGlvbiBnZW5Db21tZW50IChjb21tZW50KSB7CiAgICByZXR1cm4gKCJfZSgiICsgKEpTT04uc3RyaW5naWZ5KGNvbW1lbnQudGV4dCkpICsgIikiKQogIH0KCiAgZnVuY3Rpb24gZ2VuU2xvdCAoZWwsIHN0YXRlKSB7CiAgICB2YXIgc2xvdE5hbWUgPSBlbC5zbG90TmFtZSB8fCAnImRlZmF1bHQiJzsKICAgIHZhciBjaGlsZHJlbiA9IGdlbkNoaWxkcmVuKGVsLCBzdGF0ZSk7CiAgICB2YXIgcmVzID0gIl90KCIgKyBzbG90TmFtZSArIChjaGlsZHJlbiA/ICgiLCIgKyBjaGlsZHJlbikgOiAnJyk7CiAgICB2YXIgYXR0cnMgPSBlbC5hdHRycyB8fCBlbC5keW5hbWljQXR0cnMKICAgICAgPyBnZW5Qcm9wcygoZWwuYXR0cnMgfHwgW10pLmNvbmNhdChlbC5keW5hbWljQXR0cnMgfHwgW10pLm1hcChmdW5jdGlvbiAoYXR0cikgeyByZXR1cm4gKHsKICAgICAgICAgIC8vIHNsb3QgcHJvcHMgYXJlIGNhbWVsaXplZAogICAgICAgICAgbmFtZTogY2FtZWxpemUoYXR0ci5uYW1lKSwKICAgICAgICAgIHZhbHVlOiBhdHRyLnZhbHVlLAogICAgICAgICAgZHluYW1pYzogYXR0ci5keW5hbWljCiAgICAgICAgfSk7IH0pKQogICAgICA6IG51bGw7CiAgICB2YXIgYmluZCQkMSA9IGVsLmF0dHJzTWFwWyd2LWJpbmQnXTsKICAgIGlmICgoYXR0cnMgfHwgYmluZCQkMSkgJiYgIWNoaWxkcmVuKSB7CiAgICAgIHJlcyArPSAiLG51bGwiOwogICAgfQogICAgaWYgKGF0dHJzKSB7CiAgICAgIHJlcyArPSAiLCIgKyBhdHRyczsKICAgIH0KICAgIGlmIChiaW5kJCQxKSB7CiAgICAgIHJlcyArPSAoYXR0cnMgPyAnJyA6ICcsbnVsbCcpICsgIiwiICsgYmluZCQkMTsKICAgIH0KICAgIHJldHVybiByZXMgKyAnKScKICB9CgogIC8vIGNvbXBvbmVudE5hbWUgaXMgZWwuY29tcG9uZW50LCB0YWtlIGl0IGFzIGFyZ3VtZW50IHRvIHNodW4gZmxvdydzIHBlc3NpbWlzdGljIHJlZmluZW1lbnQKICBmdW5jdGlvbiBnZW5Db21wb25lbnQgKAogICAgY29tcG9uZW50TmFtZSwKICAgIGVsLAogICAgc3RhdGUKICApIHsKICAgIHZhciBjaGlsZHJlbiA9IGVsLmlubGluZVRlbXBsYXRlID8gbnVsbCA6IGdlbkNoaWxkcmVuKGVsLCBzdGF0ZSwgdHJ1ZSk7CiAgICByZXR1cm4gKCJfYygiICsgY29tcG9uZW50TmFtZSArICIsIiArIChnZW5EYXRhJDIoZWwsIHN0YXRlKSkgKyAoY2hpbGRyZW4gPyAoIiwiICsgY2hpbGRyZW4pIDogJycpICsgIikiKQogIH0KCiAgZnVuY3Rpb24gZ2VuUHJvcHMgKHByb3BzKSB7CiAgICB2YXIgc3RhdGljUHJvcHMgPSAiIjsKICAgIHZhciBkeW5hbWljUHJvcHMgPSAiIjsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIHByb3AgPSBwcm9wc1tpXTsKICAgICAgdmFyIHZhbHVlID0gdHJhbnNmb3JtU3BlY2lhbE5ld2xpbmVzKHByb3AudmFsdWUpOwogICAgICBpZiAocHJvcC5keW5hbWljKSB7CiAgICAgICAgZHluYW1pY1Byb3BzICs9IChwcm9wLm5hbWUpICsgIiwiICsgdmFsdWUgKyAiLCI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RhdGljUHJvcHMgKz0gIlwiIiArIChwcm9wLm5hbWUpICsgIlwiOiIgKyB2YWx1ZSArICIsIjsKICAgICAgfQogICAgfQogICAgc3RhdGljUHJvcHMgPSAieyIgKyAoc3RhdGljUHJvcHMuc2xpY2UoMCwgLTEpKSArICJ9IjsKICAgIGlmIChkeW5hbWljUHJvcHMpIHsKICAgICAgcmV0dXJuICgiX2QoIiArIHN0YXRpY1Byb3BzICsgIixbIiArIChkeW5hbWljUHJvcHMuc2xpY2UoMCwgLTEpKSArICJdKSIpCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gc3RhdGljUHJvcHMKICAgIH0KICB9CgogIC8vICMzODk1LCAjNDI2OAogIGZ1bmN0aW9uIHRyYW5zZm9ybVNwZWNpYWxOZXdsaW5lcyAodGV4dCkgewogICAgcmV0dXJuIHRleHQKICAgICAgLnJlcGxhY2UoL1x1MjAyOC9nLCAnXFx1MjAyOCcpCiAgICAgIC5yZXBsYWNlKC9cdTIwMjkvZywgJ1xcdTIwMjknKQogIH0KCiAgLyogICovCgoKCiAgLy8gdGhlc2Uga2V5d29yZHMgc2hvdWxkIG5vdCBhcHBlYXIgaW5zaWRlIGV4cHJlc3Npb25zLCBidXQgb3BlcmF0b3JzIGxpa2UKICAvLyB0eXBlb2YsIGluc3RhbmNlb2YgYW5kIGluIGFyZSBhbGxvd2VkCiAgdmFyIHByb2hpYml0ZWRLZXl3b3JkUkUgPSBuZXcgUmVnRXhwKCdcXGInICsgKAogICAgJ2RvLGlmLGZvcixsZXQsbmV3LHRyeSx2YXIsY2FzZSxlbHNlLHdpdGgsYXdhaXQsYnJlYWssY2F0Y2gsY2xhc3MsY29uc3QsJyArCiAgICAnc3VwZXIsdGhyb3csd2hpbGUseWllbGQsZGVsZXRlLGV4cG9ydCxpbXBvcnQscmV0dXJuLHN3aXRjaCxkZWZhdWx0LCcgKwogICAgJ2V4dGVuZHMsZmluYWxseSxjb250aW51ZSxkZWJ1Z2dlcixmdW5jdGlvbixhcmd1bWVudHMnCiAgKS5zcGxpdCgnLCcpLmpvaW4oJ1xcYnxcXGInKSArICdcXGInKTsKCiAgLy8gdGhlc2UgdW5hcnkgb3BlcmF0b3JzIHNob3VsZCBub3QgYmUgdXNlZCBhcyBwcm9wZXJ0eS9tZXRob2QgbmFtZXMKICB2YXIgdW5hcnlPcGVyYXRvcnNSRSA9IG5ldyBSZWdFeHAoJ1xcYicgKyAoCiAgICAnZGVsZXRlLHR5cGVvZix2b2lkJwogICkuc3BsaXQoJywnKS5qb2luKCdcXHMqXFwoW15cXCldKlxcKXxcXGInKSArICdcXHMqXFwoW15cXCldKlxcKScpOwoKICAvLyBzdHJpcCBzdHJpbmdzIGluIGV4cHJlc3Npb25zCiAgdmFyIHN0cmlwU3RyaW5nUkUgPSAvJyg/OlteJ1xcXXxcXC4pKid8Iig/OlteIlxcXXxcXC4pKiJ8YCg/OlteYFxcXXxcXC4pKlwkXHt8XH0oPzpbXmBcXF18XFwuKSpgfGAoPzpbXmBcXF18XFwuKSpgL2c7CgogIC8vIGRldGVjdCBwcm9ibGVtYXRpYyBleHByZXNzaW9ucyBpbiBhIHRlbXBsYXRlCiAgZnVuY3Rpb24gZGV0ZWN0RXJyb3JzIChhc3QsIHdhcm4pIHsKICAgIGlmIChhc3QpIHsKICAgICAgY2hlY2tOb2RlKGFzdCwgd2Fybik7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBjaGVja05vZGUgKG5vZGUsIHdhcm4pIHsKICAgIGlmIChub2RlLnR5cGUgPT09IDEpIHsKICAgICAgZm9yICh2YXIgbmFtZSBpbiBub2RlLmF0dHJzTWFwKSB7CiAgICAgICAgaWYgKGRpclJFLnRlc3QobmFtZSkpIHsKICAgICAgICAgIHZhciB2YWx1ZSA9IG5vZGUuYXR0cnNNYXBbbmFtZV07CiAgICAgICAgICBpZiAodmFsdWUpIHsKICAgICAgICAgICAgdmFyIHJhbmdlID0gbm9kZS5yYXdBdHRyc01hcFtuYW1lXTsKICAgICAgICAgICAgaWYgKG5hbWUgPT09ICd2LWZvcicpIHsKICAgICAgICAgICAgICBjaGVja0Zvcihub2RlLCAoInYtZm9yPVwiIiArIHZhbHVlICsgIlwiIiksIHdhcm4sIHJhbmdlKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChuYW1lID09PSAndi1zbG90JyB8fCBuYW1lWzBdID09PSAnIycpIHsKICAgICAgICAgICAgICBjaGVja0Z1bmN0aW9uUGFyYW1ldGVyRXhwcmVzc2lvbih2YWx1ZSwgKG5hbWUgKyAiPVwiIiArIHZhbHVlICsgIlwiIiksIHdhcm4sIHJhbmdlKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChvblJFLnRlc3QobmFtZSkpIHsKICAgICAgICAgICAgICBjaGVja0V2ZW50KHZhbHVlLCAobmFtZSArICI9XCIiICsgdmFsdWUgKyAiXCIiKSwgd2FybiwgcmFuZ2UpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGNoZWNrRXhwcmVzc2lvbih2YWx1ZSwgKG5hbWUgKyAiPVwiIiArIHZhbHVlICsgIlwiIiksIHdhcm4sIHJhbmdlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAobm9kZS5jaGlsZHJlbikgewogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkrKykgewogICAgICAgICAgY2hlY2tOb2RlKG5vZGUuY2hpbGRyZW5baV0sIHdhcm4pOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIGlmIChub2RlLnR5cGUgPT09IDIpIHsKICAgICAgY2hlY2tFeHByZXNzaW9uKG5vZGUuZXhwcmVzc2lvbiwgbm9kZS50ZXh0LCB3YXJuLCBub2RlKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGNoZWNrRXZlbnQgKGV4cCwgdGV4dCwgd2FybiwgcmFuZ2UpIHsKICAgIHZhciBzdHJpcHBlZCA9IGV4cC5yZXBsYWNlKHN0cmlwU3RyaW5nUkUsICcnKTsKICAgIHZhciBrZXl3b3JkTWF0Y2ggPSBzdHJpcHBlZC5tYXRjaCh1bmFyeU9wZXJhdG9yc1JFKTsKICAgIGlmIChrZXl3b3JkTWF0Y2ggJiYgc3RyaXBwZWQuY2hhckF0KGtleXdvcmRNYXRjaC5pbmRleCAtIDEpICE9PSAnJCcpIHsKICAgICAgd2FybigKICAgICAgICAiYXZvaWQgdXNpbmcgSmF2YVNjcmlwdCB1bmFyeSBvcGVyYXRvciBhcyBwcm9wZXJ0eSBuYW1lOiAiICsKICAgICAgICAiXCIiICsgKGtleXdvcmRNYXRjaFswXSkgKyAiXCIgaW4gZXhwcmVzc2lvbiAiICsgKHRleHQudHJpbSgpKSwKICAgICAgICByYW5nZQogICAgICApOwogICAgfQogICAgY2hlY2tFeHByZXNzaW9uKGV4cCwgdGV4dCwgd2FybiwgcmFuZ2UpOwogIH0KCiAgZnVuY3Rpb24gY2hlY2tGb3IgKG5vZGUsIHRleHQsIHdhcm4sIHJhbmdlKSB7CiAgICBjaGVja0V4cHJlc3Npb24obm9kZS5mb3IgfHwgJycsIHRleHQsIHdhcm4sIHJhbmdlKTsKICAgIGNoZWNrSWRlbnRpZmllcihub2RlLmFsaWFzLCAndi1mb3IgYWxpYXMnLCB0ZXh0LCB3YXJuLCByYW5nZSk7CiAgICBjaGVja0lkZW50aWZpZXIobm9kZS5pdGVyYXRvcjEsICd2LWZvciBpdGVyYXRvcicsIHRleHQsIHdhcm4sIHJhbmdlKTsKICAgIGNoZWNrSWRlbnRpZmllcihub2RlLml0ZXJhdG9yMiwgJ3YtZm9yIGl0ZXJhdG9yJywgdGV4dCwgd2FybiwgcmFuZ2UpOwogIH0KCiAgZnVuY3Rpb24gY2hlY2tJZGVudGlmaWVyICgKICAgIGlkZW50LAogICAgdHlwZSwKICAgIHRleHQsCiAgICB3YXJuLAogICAgcmFuZ2UKICApIHsKICAgIGlmICh0eXBlb2YgaWRlbnQgPT09ICdzdHJpbmcnKSB7CiAgICAgIHRyeSB7CiAgICAgICAgbmV3IEZ1bmN0aW9uKCgidmFyICIgKyBpZGVudCArICI9XyIpKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHdhcm4oKCJpbnZhbGlkICIgKyB0eXBlICsgIiBcIiIgKyBpZGVudCArICJcIiBpbiBleHByZXNzaW9uOiAiICsgKHRleHQudHJpbSgpKSksIHJhbmdlKTsKICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gY2hlY2tFeHByZXNzaW9uIChleHAsIHRleHQsIHdhcm4sIHJhbmdlKSB7CiAgICB0cnkgewogICAgICBuZXcgRnVuY3Rpb24oKCJyZXR1cm4gIiArIGV4cCkpOwogICAgfSBjYXRjaCAoZSkgewogICAgICB2YXIga2V5d29yZE1hdGNoID0gZXhwLnJlcGxhY2Uoc3RyaXBTdHJpbmdSRSwgJycpLm1hdGNoKHByb2hpYml0ZWRLZXl3b3JkUkUpOwogICAgICBpZiAoa2V5d29yZE1hdGNoKSB7CiAgICAgICAgd2FybigKICAgICAgICAgICJhdm9pZCB1c2luZyBKYXZhU2NyaXB0IGtleXdvcmQgYXMgcHJvcGVydHkgbmFtZTogIiArCiAgICAgICAgICAiXCIiICsgKGtleXdvcmRNYXRjaFswXSkgKyAiXCJcbiAgUmF3IGV4cHJlc3Npb246ICIgKyAodGV4dC50cmltKCkpLAogICAgICAgICAgcmFuZ2UKICAgICAgICApOwogICAgICB9IGVsc2UgewogICAgICAgIHdhcm4oCiAgICAgICAgICAiaW52YWxpZCBleHByZXNzaW9uOiAiICsgKGUubWVzc2FnZSkgKyAiIGluXG5cbiIgKwogICAgICAgICAgIiAgICAiICsgZXhwICsgIlxuXG4iICsKICAgICAgICAgICIgIFJhdyBleHByZXNzaW9uOiAiICsgKHRleHQudHJpbSgpKSArICJcbiIsCiAgICAgICAgICByYW5nZQogICAgICAgICk7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIGNoZWNrRnVuY3Rpb25QYXJhbWV0ZXJFeHByZXNzaW9uIChleHAsIHRleHQsIHdhcm4sIHJhbmdlKSB7CiAgICB0cnkgewogICAgICBuZXcgRnVuY3Rpb24oZXhwLCAnJyk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHdhcm4oCiAgICAgICAgImludmFsaWQgZnVuY3Rpb24gcGFyYW1ldGVyIGV4cHJlc3Npb246ICIgKyAoZS5tZXNzYWdlKSArICIgaW5cblxuIiArCiAgICAgICAgIiAgICAiICsgZXhwICsgIlxuXG4iICsKICAgICAgICAiICBSYXcgZXhwcmVzc2lvbjogIiArICh0ZXh0LnRyaW0oKSkgKyAiXG4iLAogICAgICAgIHJhbmdlCiAgICAgICk7CiAgICB9CiAgfQoKICAvKiAgKi8KCiAgdmFyIHJhbmdlID0gMjsKCiAgZnVuY3Rpb24gZ2VuZXJhdGVDb2RlRnJhbWUgKAogICAgc291cmNlLAogICAgc3RhcnQsCiAgICBlbmQKICApIHsKICAgIGlmICggc3RhcnQgPT09IHZvaWQgMCApIHN0YXJ0ID0gMDsKICAgIGlmICggZW5kID09PSB2b2lkIDAgKSBlbmQgPSBzb3VyY2UubGVuZ3RoOwoKICAgIHZhciBsaW5lcyA9IHNvdXJjZS5zcGxpdCgvXHI/XG4vKTsKICAgIHZhciBjb3VudCA9IDA7CiAgICB2YXIgcmVzID0gW107CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGNvdW50ICs9IGxpbmVzW2ldLmxlbmd0aCArIDE7CiAgICAgIGlmIChjb3VudCA+PSBzdGFydCkgewogICAgICAgIGZvciAodmFyIGogPSBpIC0gcmFuZ2U7IGogPD0gaSArIHJhbmdlIHx8IGVuZCA+IGNvdW50OyBqKyspIHsKICAgICAgICAgIGlmIChqIDwgMCB8fCBqID49IGxpbmVzLmxlbmd0aCkgeyBjb250aW51ZSB9CiAgICAgICAgICByZXMucHVzaCgoIiIgKyAoaiArIDEpICsgKHJlcGVhdCQxKCIgIiwgMyAtIFN0cmluZyhqICsgMSkubGVuZ3RoKSkgKyAifCAgIiArIChsaW5lc1tqXSkpKTsKICAgICAgICAgIHZhciBsaW5lTGVuZ3RoID0gbGluZXNbal0ubGVuZ3RoOwogICAgICAgICAgaWYgKGogPT09IGkpIHsKICAgICAgICAgICAgLy8gcHVzaCB1bmRlcmxpbmUKICAgICAgICAgICAgdmFyIHBhZCA9IHN0YXJ0IC0gKGNvdW50IC0gbGluZUxlbmd0aCkgKyAxOwogICAgICAgICAgICB2YXIgbGVuZ3RoID0gZW5kID4gY291bnQgPyBsaW5lTGVuZ3RoIC0gcGFkIDogZW5kIC0gc3RhcnQ7CiAgICAgICAgICAgIHJlcy5wdXNoKCIgICB8ICAiICsgcmVwZWF0JDEoIiAiLCBwYWQpICsgcmVwZWF0JDEoIl4iLCBsZW5ndGgpKTsKICAgICAgICAgIH0gZWxzZSBpZiAoaiA+IGkpIHsKICAgICAgICAgICAgaWYgKGVuZCA+IGNvdW50KSB7CiAgICAgICAgICAgICAgdmFyIGxlbmd0aCQxID0gTWF0aC5taW4oZW5kIC0gY291bnQsIGxpbmVMZW5ndGgpOwogICAgICAgICAgICAgIHJlcy5wdXNoKCIgICB8ICAiICsgcmVwZWF0JDEoIl4iLCBsZW5ndGgkMSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvdW50ICs9IGxpbmVMZW5ndGggKyAxOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBicmVhawogICAgICB9CiAgICB9CiAgICByZXR1cm4gcmVzLmpvaW4oJ1xuJykKICB9CgogIGZ1bmN0aW9uIHJlcGVhdCQxIChzdHIsIG4pIHsKICAgIHZhciByZXN1bHQgPSAnJzsKICAgIGlmIChuID4gMCkgewogICAgICB3aGlsZSAodHJ1ZSkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICAgICAgaWYgKG4gJiAxKSB7IHJlc3VsdCArPSBzdHI7IH0KICAgICAgICBuID4+Pj0gMTsKICAgICAgICBpZiAobiA8PSAwKSB7IGJyZWFrIH0KICAgICAgICBzdHIgKz0gc3RyOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gcmVzdWx0CiAgfQoKICAvKiAgKi8KCgoKICBmdW5jdGlvbiBjcmVhdGVGdW5jdGlvbiAoY29kZSwgZXJyb3JzKSB7CiAgICB0cnkgewogICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKGNvZGUpCiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgZXJyb3JzLnB1c2goeyBlcnI6IGVyciwgY29kZTogY29kZSB9KTsKICAgICAgcmV0dXJuIG5vb3AKICAgIH0KICB9CgogIGZ1bmN0aW9uIGNyZWF0ZUNvbXBpbGVUb0Z1bmN0aW9uRm4gKGNvbXBpbGUpIHsKICAgIHZhciBjYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIGNvbXBpbGVUb0Z1bmN0aW9ucyAoCiAgICAgIHRlbXBsYXRlLAogICAgICBvcHRpb25zLAogICAgICB2bQogICAgKSB7CiAgICAgIG9wdGlvbnMgPSBleHRlbmQoe30sIG9wdGlvbnMpOwogICAgICB2YXIgd2FybiQkMSA9IG9wdGlvbnMud2FybiB8fCB3YXJuOwogICAgICBkZWxldGUgb3B0aW9ucy53YXJuOwoKICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICAgIHsKICAgICAgICAvLyBkZXRlY3QgcG9zc2libGUgQ1NQIHJlc3RyaWN0aW9uCiAgICAgICAgdHJ5IHsKICAgICAgICAgIG5ldyBGdW5jdGlvbigncmV0dXJuIDEnKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBpZiAoZS50b1N0cmluZygpLm1hdGNoKC91bnNhZmUtZXZhbHxDU1AvKSkgewogICAgICAgICAgICB3YXJuJCQxKAogICAgICAgICAgICAgICdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIHRoZSBzdGFuZGFsb25lIGJ1aWxkIG9mIFZ1ZS5qcyBpbiBhbiAnICsKICAgICAgICAgICAgICAnZW52aXJvbm1lbnQgd2l0aCBDb250ZW50IFNlY3VyaXR5IFBvbGljeSB0aGF0IHByb2hpYml0cyB1bnNhZmUtZXZhbC4gJyArCiAgICAgICAgICAgICAgJ1RoZSB0ZW1wbGF0ZSBjb21waWxlciBjYW5ub3Qgd29yayBpbiB0aGlzIGVudmlyb25tZW50LiBDb25zaWRlciAnICsKICAgICAgICAgICAgICAncmVsYXhpbmcgdGhlIHBvbGljeSB0byBhbGxvdyB1bnNhZmUtZXZhbCBvciBwcmUtY29tcGlsaW5nIHlvdXIgJyArCiAgICAgICAgICAgICAgJ3RlbXBsYXRlcyBpbnRvIHJlbmRlciBmdW5jdGlvbnMuJwogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgLy8gY2hlY2sgY2FjaGUKICAgICAgdmFyIGtleSA9IG9wdGlvbnMuZGVsaW1pdGVycwogICAgICAgID8gU3RyaW5nKG9wdGlvbnMuZGVsaW1pdGVycykgKyB0ZW1wbGF0ZQogICAgICAgIDogdGVtcGxhdGU7CiAgICAgIGlmIChjYWNoZVtrZXldKSB7CiAgICAgICAgcmV0dXJuIGNhY2hlW2tleV0KICAgICAgfQoKICAgICAgLy8gY29tcGlsZQogICAgICB2YXIgY29tcGlsZWQgPSBjb21waWxlKHRlbXBsYXRlLCBvcHRpb25zKTsKCiAgICAgIC8vIGNoZWNrIGNvbXBpbGF0aW9uIGVycm9ycy90aXBzCiAgICAgIHsKICAgICAgICBpZiAoY29tcGlsZWQuZXJyb3JzICYmIGNvbXBpbGVkLmVycm9ycy5sZW5ndGgpIHsKICAgICAgICAgIGlmIChvcHRpb25zLm91dHB1dFNvdXJjZVJhbmdlKSB7CiAgICAgICAgICAgIGNvbXBpbGVkLmVycm9ycy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgd2FybiQkMSgKICAgICAgICAgICAgICAgICJFcnJvciBjb21waWxpbmcgdGVtcGxhdGU6XG5cbiIgKyAoZS5tc2cpICsgIlxuXG4iICsKICAgICAgICAgICAgICAgIGdlbmVyYXRlQ29kZUZyYW1lKHRlbXBsYXRlLCBlLnN0YXJ0LCBlLmVuZCksCiAgICAgICAgICAgICAgICB2bQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgd2FybiQkMSgKICAgICAgICAgICAgICAiRXJyb3IgY29tcGlsaW5nIHRlbXBsYXRlOlxuXG4iICsgdGVtcGxhdGUgKyAiXG5cbiIgKwogICAgICAgICAgICAgIGNvbXBpbGVkLmVycm9ycy5tYXAoZnVuY3Rpb24gKGUpIHsgcmV0dXJuICgiLSAiICsgZSk7IH0pLmpvaW4oJ1xuJykgKyAnXG4nLAogICAgICAgICAgICAgIHZtCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChjb21waWxlZC50aXBzICYmIGNvbXBpbGVkLnRpcHMubGVuZ3RoKSB7CiAgICAgICAgICBpZiAob3B0aW9ucy5vdXRwdXRTb3VyY2VSYW5nZSkgewogICAgICAgICAgICBjb21waWxlZC50aXBzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsgcmV0dXJuIHRpcChlLm1zZywgdm0pOyB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbXBpbGVkLnRpcHMuZm9yRWFjaChmdW5jdGlvbiAobXNnKSB7IHJldHVybiB0aXAobXNnLCB2bSk7IH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgLy8gdHVybiBjb2RlIGludG8gZnVuY3Rpb25zCiAgICAgIHZhciByZXMgPSB7fTsKICAgICAgdmFyIGZuR2VuRXJyb3JzID0gW107CiAgICAgIHJlcy5yZW5kZXIgPSBjcmVhdGVGdW5jdGlvbihjb21waWxlZC5yZW5kZXIsIGZuR2VuRXJyb3JzKTsKICAgICAgcmVzLnN0YXRpY1JlbmRlckZucyA9IGNvbXBpbGVkLnN0YXRpY1JlbmRlckZucy5tYXAoZnVuY3Rpb24gKGNvZGUpIHsKICAgICAgICByZXR1cm4gY3JlYXRlRnVuY3Rpb24oY29kZSwgZm5HZW5FcnJvcnMpCiAgICAgIH0pOwoKICAgICAgLy8gY2hlY2sgZnVuY3Rpb24gZ2VuZXJhdGlvbiBlcnJvcnMuCiAgICAgIC8vIHRoaXMgc2hvdWxkIG9ubHkgaGFwcGVuIGlmIHRoZXJlIGlzIGEgYnVnIGluIHRoZSBjb21waWxlciBpdHNlbGYuCiAgICAgIC8vIG1vc3RseSBmb3IgY29kZWdlbiBkZXZlbG9wbWVudCB1c2UKICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICAgIHsKICAgICAgICBpZiAoKCFjb21waWxlZC5lcnJvcnMgfHwgIWNvbXBpbGVkLmVycm9ycy5sZW5ndGgpICYmIGZuR2VuRXJyb3JzLmxlbmd0aCkgewogICAgICAgICAgd2FybiQkMSgKICAgICAgICAgICAgIkZhaWxlZCB0byBnZW5lcmF0ZSByZW5kZXIgZnVuY3Rpb246XG5cbiIgKwogICAgICAgICAgICBmbkdlbkVycm9ycy5tYXAoZnVuY3Rpb24gKHJlZikgewogICAgICAgICAgICAgIHZhciBlcnIgPSByZWYuZXJyOwogICAgICAgICAgICAgIHZhciBjb2RlID0gcmVmLmNvZGU7CgogICAgICAgICAgICAgIHJldHVybiAoKGVyci50b1N0cmluZygpKSArICIgaW5cblxuIiArIGNvZGUgKyAiXG4iKTsKICAgICAgICAgIH0pLmpvaW4oJ1xuJyksCiAgICAgICAgICAgIHZtCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIChjYWNoZVtrZXldID0gcmVzKQogICAgfQogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIGNyZWF0ZUNvbXBpbGVyQ3JlYXRvciAoYmFzZUNvbXBpbGUpIHsKICAgIHJldHVybiBmdW5jdGlvbiBjcmVhdGVDb21waWxlciAoYmFzZU9wdGlvbnMpIHsKICAgICAgZnVuY3Rpb24gY29tcGlsZSAoCiAgICAgICAgdGVtcGxhdGUsCiAgICAgICAgb3B0aW9ucwogICAgICApIHsKICAgICAgICB2YXIgZmluYWxPcHRpb25zID0gT2JqZWN0LmNyZWF0ZShiYXNlT3B0aW9ucyk7CiAgICAgICAgdmFyIGVycm9ycyA9IFtdOwogICAgICAgIHZhciB0aXBzID0gW107CgogICAgICAgIHZhciB3YXJuID0gZnVuY3Rpb24gKG1zZywgcmFuZ2UsIHRpcCkgewogICAgICAgICAgKHRpcCA/IHRpcHMgOiBlcnJvcnMpLnB1c2gobXNnKTsKICAgICAgICB9OwoKICAgICAgICBpZiAob3B0aW9ucykgewogICAgICAgICAgaWYgKG9wdGlvbnMub3V0cHV0U291cmNlUmFuZ2UpIHsKICAgICAgICAgICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lCiAgICAgICAgICAgIHZhciBsZWFkaW5nU3BhY2VMZW5ndGggPSB0ZW1wbGF0ZS5tYXRjaCgvXlxzKi8pWzBdLmxlbmd0aDsKCiAgICAgICAgICAgIHdhcm4gPSBmdW5jdGlvbiAobXNnLCByYW5nZSwgdGlwKSB7CiAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7IG1zZzogbXNnIH07CiAgICAgICAgICAgICAgaWYgKHJhbmdlKSB7CiAgICAgICAgICAgICAgICBpZiAocmFuZ2Uuc3RhcnQgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICBkYXRhLnN0YXJ0ID0gcmFuZ2Uuc3RhcnQgKyBsZWFkaW5nU3BhY2VMZW5ndGg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAocmFuZ2UuZW5kICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgZGF0YS5lbmQgPSByYW5nZS5lbmQgKyBsZWFkaW5nU3BhY2VMZW5ndGg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICh0aXAgPyB0aXBzIDogZXJyb3JzKS5wdXNoKGRhdGEpOwogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgLy8gbWVyZ2UgY3VzdG9tIG1vZHVsZXMKICAgICAgICAgIGlmIChvcHRpb25zLm1vZHVsZXMpIHsKICAgICAgICAgICAgZmluYWxPcHRpb25zLm1vZHVsZXMgPQogICAgICAgICAgICAgIChiYXNlT3B0aW9ucy5tb2R1bGVzIHx8IFtdKS5jb25jYXQob3B0aW9ucy5tb2R1bGVzKTsKICAgICAgICAgIH0KICAgICAgICAgIC8vIG1lcmdlIGN1c3RvbSBkaXJlY3RpdmVzCiAgICAgICAgICBpZiAob3B0aW9ucy5kaXJlY3RpdmVzKSB7CiAgICAgICAgICAgIGZpbmFsT3B0aW9ucy5kaXJlY3RpdmVzID0gZXh0ZW5kKAogICAgICAgICAgICAgIE9iamVjdC5jcmVhdGUoYmFzZU9wdGlvbnMuZGlyZWN0aXZlcyB8fCBudWxsKSwKICAgICAgICAgICAgICBvcHRpb25zLmRpcmVjdGl2ZXMKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIC8vIGNvcHkgb3RoZXIgb3B0aW9ucwogICAgICAgICAgZm9yICh2YXIga2V5IGluIG9wdGlvbnMpIHsKICAgICAgICAgICAgaWYgKGtleSAhPT0gJ21vZHVsZXMnICYmIGtleSAhPT0gJ2RpcmVjdGl2ZXMnKSB7CiAgICAgICAgICAgICAgZmluYWxPcHRpb25zW2tleV0gPSBvcHRpb25zW2tleV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZpbmFsT3B0aW9ucy53YXJuID0gd2FybjsKCiAgICAgICAgdmFyIGNvbXBpbGVkID0gYmFzZUNvbXBpbGUodGVtcGxhdGUudHJpbSgpLCBmaW5hbE9wdGlvbnMpOwogICAgICAgIHsKICAgICAgICAgIGRldGVjdEVycm9ycyhjb21waWxlZC5hc3QsIHdhcm4pOwogICAgICAgIH0KICAgICAgICBjb21waWxlZC5lcnJvcnMgPSBlcnJvcnM7CiAgICAgICAgY29tcGlsZWQudGlwcyA9IHRpcHM7CiAgICAgICAgcmV0dXJuIGNvbXBpbGVkCiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgY29tcGlsZTogY29tcGlsZSwKICAgICAgICBjb21waWxlVG9GdW5jdGlvbnM6IGNyZWF0ZUNvbXBpbGVUb0Z1bmN0aW9uRm4oY29tcGlsZSkKICAgICAgfQogICAgfQogIH0KCiAgLyogICovCgogIC8vIGBjcmVhdGVDb21waWxlckNyZWF0b3JgIGFsbG93cyBjcmVhdGluZyBjb21waWxlcnMgdGhhdCB1c2UgYWx0ZXJuYXRpdmUKICAvLyBwYXJzZXIvb3B0aW1pemVyL2NvZGVnZW4sIGUuZyB0aGUgU1NSIG9wdGltaXppbmcgY29tcGlsZXIuCiAgLy8gSGVyZSB3ZSBqdXN0IGV4cG9ydCBhIGRlZmF1bHQgY29tcGlsZXIgdXNpbmcgdGhlIGRlZmF1bHQgcGFydHMuCiAgdmFyIGNyZWF0ZUNvbXBpbGVyID0gY3JlYXRlQ29tcGlsZXJDcmVhdG9yKGZ1bmN0aW9uIGJhc2VDb21waWxlICgKICAgIHRlbXBsYXRlLAogICAgb3B0aW9ucwogICkgewogICAgdmFyIGFzdCA9IHBhcnNlKHRlbXBsYXRlLnRyaW0oKSwgb3B0aW9ucyk7CiAgICBpZiAob3B0aW9ucy5vcHRpbWl6ZSAhPT0gZmFsc2UpIHsKICAgICAgb3B0aW1pemUoYXN0LCBvcHRpb25zKTsKICAgIH0KICAgIHZhciBjb2RlID0gZ2VuZXJhdGUoYXN0LCBvcHRpb25zKTsKICAgIHJldHVybiB7CiAgICAgIGFzdDogYXN0LAogICAgICByZW5kZXI6IGNvZGUucmVuZGVyLAogICAgICBzdGF0aWNSZW5kZXJGbnM6IGNvZGUuc3RhdGljUmVuZGVyRm5zCiAgICB9CiAgfSk7CgogIC8qICAqLwoKICB2YXIgcmVmJDEgPSBjcmVhdGVDb21waWxlcihiYXNlT3B0aW9ucyk7CiAgdmFyIGNvbXBpbGUgPSByZWYkMS5jb21waWxlOwogIHZhciBjb21waWxlVG9GdW5jdGlvbnMgPSByZWYkMS5jb21waWxlVG9GdW5jdGlvbnM7CgogIC8qICAqLwoKICAvLyBjaGVjayB3aGV0aGVyIGN1cnJlbnQgYnJvd3NlciBlbmNvZGVzIGEgY2hhciBpbnNpZGUgYXR0cmlidXRlIHZhbHVlcwogIHZhciBkaXY7CiAgZnVuY3Rpb24gZ2V0U2hvdWxkRGVjb2RlIChocmVmKSB7CiAgICBkaXYgPSBkaXYgfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBkaXYuaW5uZXJIVE1MID0gaHJlZiA/ICI8YSBocmVmPVwiXG5cIi8+IiA6ICI8ZGl2IGE9XCJcblwiLz4iOwogICAgcmV0dXJuIGRpdi5pbm5lckhUTUwuaW5kZXhPZignJiMxMDsnKSA+IDAKICB9CgogIC8vICMzNjYzOiBJRSBlbmNvZGVzIG5ld2xpbmVzIGluc2lkZSBhdHRyaWJ1dGUgdmFsdWVzIHdoaWxlIG90aGVyIGJyb3dzZXJzIGRvbid0CiAgdmFyIHNob3VsZERlY29kZU5ld2xpbmVzID0gaW5Ccm93c2VyID8gZ2V0U2hvdWxkRGVjb2RlKGZhbHNlKSA6IGZhbHNlOwogIC8vICM2ODI4OiBjaHJvbWUgZW5jb2RlcyBjb250ZW50IGluIGFbaHJlZl0KICB2YXIgc2hvdWxkRGVjb2RlTmV3bGluZXNGb3JIcmVmID0gaW5Ccm93c2VyID8gZ2V0U2hvdWxkRGVjb2RlKHRydWUpIDogZmFsc2U7CgogIC8qICAqLwoKICB2YXIgaWRUb1RlbXBsYXRlID0gY2FjaGVkKGZ1bmN0aW9uIChpZCkgewogICAgdmFyIGVsID0gcXVlcnkoaWQpOwogICAgcmV0dXJuIGVsICYmIGVsLmlubmVySFRNTAogIH0pOwoKICB2YXIgbW91bnQgPSBWdWUucHJvdG90eXBlLiRtb3VudDsKICBWdWUucHJvdG90eXBlLiRtb3VudCA9IGZ1bmN0aW9uICgKICAgIGVsLAogICAgaHlkcmF0aW5nCiAgKSB7CiAgICBlbCA9IGVsICYmIHF1ZXJ5KGVsKTsKCiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgIGlmIChlbCA9PT0gZG9jdW1lbnQuYm9keSB8fCBlbCA9PT0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSB7CiAgICAgIHdhcm4oCiAgICAgICAgIkRvIG5vdCBtb3VudCBWdWUgdG8gPGh0bWw+IG9yIDxib2R5PiAtIG1vdW50IHRvIG5vcm1hbCBlbGVtZW50cyBpbnN0ZWFkLiIKICAgICAgKTsKICAgICAgcmV0dXJuIHRoaXMKICAgIH0KCiAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7CiAgICAvLyByZXNvbHZlIHRlbXBsYXRlL2VsIGFuZCBjb252ZXJ0IHRvIHJlbmRlciBmdW5jdGlvbgogICAgaWYgKCFvcHRpb25zLnJlbmRlcikgewogICAgICB2YXIgdGVtcGxhdGUgPSBvcHRpb25zLnRlbXBsYXRlOwogICAgICBpZiAodGVtcGxhdGUpIHsKICAgICAgICBpZiAodHlwZW9mIHRlbXBsYXRlID09PSAnc3RyaW5nJykgewogICAgICAgICAgaWYgKHRlbXBsYXRlLmNoYXJBdCgwKSA9PT0gJyMnKSB7CiAgICAgICAgICAgIHRlbXBsYXRlID0gaWRUb1RlbXBsYXRlKHRlbXBsYXRlKTsKICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICAgICAgICAgIGlmICghdGVtcGxhdGUpIHsKICAgICAgICAgICAgICB3YXJuKAogICAgICAgICAgICAgICAgKCJUZW1wbGF0ZSBlbGVtZW50IG5vdCBmb3VuZCBvciBpcyBlbXB0eTogIiArIChvcHRpb25zLnRlbXBsYXRlKSksCiAgICAgICAgICAgICAgICB0aGlzCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodGVtcGxhdGUubm9kZVR5cGUpIHsKICAgICAgICAgIHRlbXBsYXRlID0gdGVtcGxhdGUuaW5uZXJIVE1MOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB7CiAgICAgICAgICAgIHdhcm4oJ2ludmFsaWQgdGVtcGxhdGUgb3B0aW9uOicgKyB0ZW1wbGF0ZSwgdGhpcyk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdGhpcwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChlbCkgewogICAgICAgIHRlbXBsYXRlID0gZ2V0T3V0ZXJIVE1MKGVsKTsKICAgICAgfQogICAgICBpZiAodGVtcGxhdGUpIHsKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgICBpZiAoY29uZmlnLnBlcmZvcm1hbmNlICYmIG1hcmspIHsKICAgICAgICAgIG1hcmsoJ2NvbXBpbGUnKTsKICAgICAgICB9CgogICAgICAgIHZhciByZWYgPSBjb21waWxlVG9GdW5jdGlvbnModGVtcGxhdGUsIHsKICAgICAgICAgIG91dHB1dFNvdXJjZVJhbmdlOiAiZGV2ZWxvcG1lbnQiICE9PSAncHJvZHVjdGlvbicsCiAgICAgICAgICBzaG91bGREZWNvZGVOZXdsaW5lczogc2hvdWxkRGVjb2RlTmV3bGluZXMsCiAgICAgICAgICBzaG91bGREZWNvZGVOZXdsaW5lc0ZvckhyZWY6IHNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZiwKICAgICAgICAgIGRlbGltaXRlcnM6IG9wdGlvbnMuZGVsaW1pdGVycywKICAgICAgICAgIGNvbW1lbnRzOiBvcHRpb25zLmNvbW1lbnRzCiAgICAgICAgfSwgdGhpcyk7CiAgICAgICAgdmFyIHJlbmRlciA9IHJlZi5yZW5kZXI7CiAgICAgICAgdmFyIHN0YXRpY1JlbmRlckZucyA9IHJlZi5zdGF0aWNSZW5kZXJGbnM7CiAgICAgICAgb3B0aW9ucy5yZW5kZXIgPSByZW5kZXI7CiAgICAgICAgb3B0aW9ucy5zdGF0aWNSZW5kZXJGbnMgPSBzdGF0aWNSZW5kZXJGbnM7CgogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgICAgIGlmIChjb25maWcucGVyZm9ybWFuY2UgJiYgbWFyaykgewogICAgICAgICAgbWFyaygnY29tcGlsZSBlbmQnKTsKICAgICAgICAgIG1lYXN1cmUoKCJ2dWUgIiArICh0aGlzLl9uYW1lKSArICIgY29tcGlsZSIpLCAnY29tcGlsZScsICdjb21waWxlIGVuZCcpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIG1vdW50LmNhbGwodGhpcywgZWwsIGh5ZHJhdGluZykKICB9OwoKICAvKioKICAgKiBHZXQgb3V0ZXJIVE1MIG9mIGVsZW1lbnRzLCB0YWtpbmcgY2FyZQogICAqIG9mIFNWRyBlbGVtZW50cyBpbiBJRSBhcyB3ZWxsLgogICAqLwogIGZ1bmN0aW9uIGdldE91dGVySFRNTCAoZWwpIHsKICAgIGlmIChlbC5vdXRlckhUTUwpIHsKICAgICAgcmV0dXJuIGVsLm91dGVySFRNTAogICAgfSBlbHNlIHsKICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZWwuY2xvbmVOb2RlKHRydWUpKTsKICAgICAgcmV0dXJuIGNvbnRhaW5lci5pbm5lckhUTUwKICAgIH0KICB9CgogIFZ1ZS5jb21waWxlID0gY29tcGlsZVRvRnVuY3Rpb25zOwoKICByZXR1cm4gVnVlOwoKfSkpOwo="},{"meta":{"name":"vue.js","url":"https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js","ts":1607929008928,"mimetype":"text/javascript"},"source":"LyohCiAqIFZ1ZS5qcyB2Mi42LjEyCiAqIChjKSAyMDE0LTIwMjAgRXZhbiBZb3UKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLgogKi8KKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHsKICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6CiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDoKICAoZ2xvYmFsID0gZ2xvYmFsIHx8IHNlbGYsIGdsb2JhbC5WdWUgPSBmYWN0b3J5KCkpOwp9KHRoaXMsIGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnOwoKICAvKiAgKi8KCiAgdmFyIGVtcHR5T2JqZWN0ID0gT2JqZWN0LmZyZWV6ZSh7fSk7CgogIC8vIFRoZXNlIGhlbHBlcnMgcHJvZHVjZSBiZXR0ZXIgVk0gY29kZSBpbiBKUyBlbmdpbmVzIGR1ZSB0byB0aGVpcgogIC8vIGV4cGxpY2l0bmVzcyBhbmQgZnVuY3Rpb24gaW5saW5pbmcuCiAgZnVuY3Rpb24gaXNVbmRlZiAodikgewogICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCB8fCB2ID09PSBudWxsCiAgfQoKICBmdW5jdGlvbiBpc0RlZiAodikgewogICAgcmV0dXJuIHYgIT09IHVuZGVmaW5lZCAmJiB2ICE9PSBudWxsCiAgfQoKICBmdW5jdGlvbiBpc1RydWUgKHYpIHsKICAgIHJldHVybiB2ID09PSB0cnVlCiAgfQoKICBmdW5jdGlvbiBpc0ZhbHNlICh2KSB7CiAgICByZXR1cm4gdiA9PT0gZmFsc2UKICB9CgogIC8qKgogICAqIENoZWNrIGlmIHZhbHVlIGlzIHByaW1pdGl2ZS4KICAgKi8KICBmdW5jdGlvbiBpc1ByaW1pdGl2ZSAodmFsdWUpIHsKICAgIHJldHVybiAoCiAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwKICAgICAgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fAogICAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmUKICAgICAgdHlwZW9mIHZhbHVlID09PSAnc3ltYm9sJyB8fAogICAgICB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJwogICAgKQogIH0KCiAgLyoqCiAgICogUXVpY2sgb2JqZWN0IGNoZWNrIC0gdGhpcyBpcyBwcmltYXJpbHkgdXNlZCB0byB0ZWxsCiAgICogT2JqZWN0cyBmcm9tIHByaW1pdGl2ZSB2YWx1ZXMgd2hlbiB3ZSBrbm93IHRoZSB2YWx1ZQogICAqIGlzIGEgSlNPTi1jb21wbGlhbnQgdHlwZS4KICAgKi8KICBmdW5jdGlvbiBpc09iamVjdCAob2JqKSB7CiAgICByZXR1cm4gb2JqICE9PSBudWxsICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnCiAgfQoKICAvKioKICAgKiBHZXQgdGhlIHJhdyB0eXBlIHN0cmluZyBvZiBhIHZhbHVlLCBlLmcuLCBbb2JqZWN0IE9iamVjdF0uCiAgICovCiAgdmFyIF90b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7CgogIGZ1bmN0aW9uIHRvUmF3VHlwZSAodmFsdWUpIHsKICAgIHJldHVybiBfdG9TdHJpbmcuY2FsbCh2YWx1ZSkuc2xpY2UoOCwgLTEpCiAgfQoKICAvKioKICAgKiBTdHJpY3Qgb2JqZWN0IHR5cGUgY2hlY2suIE9ubHkgcmV0dXJucyB0cnVlCiAgICogZm9yIHBsYWluIEphdmFTY3JpcHQgb2JqZWN0cy4KICAgKi8KICBmdW5jdGlvbiBpc1BsYWluT2JqZWN0IChvYmopIHsKICAgIHJldHVybiBfdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBPYmplY3RdJwogIH0KCiAgZnVuY3Rpb24gaXNSZWdFeHAgKHYpIHsKICAgIHJldHVybiBfdG9TdHJpbmcuY2FsbCh2KSA9PT0gJ1tvYmplY3QgUmVnRXhwXScKICB9CgogIC8qKgogICAqIENoZWNrIGlmIHZhbCBpcyBhIHZhbGlkIGFycmF5IGluZGV4LgogICAqLwogIGZ1bmN0aW9uIGlzVmFsaWRBcnJheUluZGV4ICh2YWwpIHsKICAgIHZhciBuID0gcGFyc2VGbG9hdChTdHJpbmcodmFsKSk7CiAgICByZXR1cm4gbiA+PSAwICYmIE1hdGguZmxvb3IobikgPT09IG4gJiYgaXNGaW5pdGUodmFsKQogIH0KCiAgZnVuY3Rpb24gaXNQcm9taXNlICh2YWwpIHsKICAgIHJldHVybiAoCiAgICAgIGlzRGVmKHZhbCkgJiYKICAgICAgdHlwZW9mIHZhbC50aGVuID09PSAnZnVuY3Rpb24nICYmCiAgICAgIHR5cGVvZiB2YWwuY2F0Y2ggPT09ICdmdW5jdGlvbicKICAgICkKICB9CgogIC8qKgogICAqIENvbnZlcnQgYSB2YWx1ZSB0byBhIHN0cmluZyB0aGF0IGlzIGFjdHVhbGx5IHJlbmRlcmVkLgogICAqLwogIGZ1bmN0aW9uIHRvU3RyaW5nICh2YWwpIHsKICAgIHJldHVybiB2YWwgPT0gbnVsbAogICAgICA/ICcnCiAgICAgIDogQXJyYXkuaXNBcnJheSh2YWwpIHx8IChpc1BsYWluT2JqZWN0KHZhbCkgJiYgdmFsLnRvU3RyaW5nID09PSBfdG9TdHJpbmcpCiAgICAgICAgPyBKU09OLnN0cmluZ2lmeSh2YWwsIG51bGwsIDIpCiAgICAgICAgOiBTdHJpbmcodmFsKQogIH0KCiAgLyoqCiAgICogQ29udmVydCBhbiBpbnB1dCB2YWx1ZSB0byBhIG51bWJlciBmb3IgcGVyc2lzdGVuY2UuCiAgICogSWYgdGhlIGNvbnZlcnNpb24gZmFpbHMsIHJldHVybiBvcmlnaW5hbCBzdHJpbmcuCiAgICovCiAgZnVuY3Rpb24gdG9OdW1iZXIgKHZhbCkgewogICAgdmFyIG4gPSBwYXJzZUZsb2F0KHZhbCk7CiAgICByZXR1cm4gaXNOYU4obikgPyB2YWwgOiBuCiAgfQoKICAvKioKICAgKiBNYWtlIGEgbWFwIGFuZCByZXR1cm4gYSBmdW5jdGlvbiBmb3IgY2hlY2tpbmcgaWYgYSBrZXkKICAgKiBpcyBpbiB0aGF0IG1hcC4KICAgKi8KICBmdW5jdGlvbiBtYWtlTWFwICgKICAgIHN0ciwKICAgIGV4cGVjdHNMb3dlckNhc2UKICApIHsKICAgIHZhciBtYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgdmFyIGxpc3QgPSBzdHIuc3BsaXQoJywnKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewogICAgICBtYXBbbGlzdFtpXV0gPSB0cnVlOwogICAgfQogICAgcmV0dXJuIGV4cGVjdHNMb3dlckNhc2UKICAgICAgPyBmdW5jdGlvbiAodmFsKSB7IHJldHVybiBtYXBbdmFsLnRvTG93ZXJDYXNlKCldOyB9CiAgICAgIDogZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4gbWFwW3ZhbF07IH0KICB9CgogIC8qKgogICAqIENoZWNrIGlmIGEgdGFnIGlzIGEgYnVpbHQtaW4gdGFnLgogICAqLwogIHZhciBpc0J1aWx0SW5UYWcgPSBtYWtlTWFwKCdzbG90LGNvbXBvbmVudCcsIHRydWUpOwoKICAvKioKICAgKiBDaGVjayBpZiBhbiBhdHRyaWJ1dGUgaXMgYSByZXNlcnZlZCBhdHRyaWJ1dGUuCiAgICovCiAgdmFyIGlzUmVzZXJ2ZWRBdHRyaWJ1dGUgPSBtYWtlTWFwKCdrZXkscmVmLHNsb3Qsc2xvdC1zY29wZSxpcycpOwoKICAvKioKICAgKiBSZW1vdmUgYW4gaXRlbSBmcm9tIGFuIGFycmF5LgogICAqLwogIGZ1bmN0aW9uIHJlbW92ZSAoYXJyLCBpdGVtKSB7CiAgICBpZiAoYXJyLmxlbmd0aCkgewogICAgICB2YXIgaW5kZXggPSBhcnIuaW5kZXhPZihpdGVtKTsKICAgICAgaWYgKGluZGV4ID4gLTEpIHsKICAgICAgICByZXR1cm4gYXJyLnNwbGljZShpbmRleCwgMSkKICAgICAgfQogICAgfQogIH0KCiAgLyoqCiAgICogQ2hlY2sgd2hldGhlciBhbiBvYmplY3QgaGFzIHRoZSBwcm9wZXJ0eS4KICAgKi8KICB2YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OwogIGZ1bmN0aW9uIGhhc093biAob2JqLCBrZXkpIHsKICAgIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KQogIH0KCiAgLyoqCiAgICogQ3JlYXRlIGEgY2FjaGVkIHZlcnNpb24gb2YgYSBwdXJlIGZ1bmN0aW9uLgogICAqLwogIGZ1bmN0aW9uIGNhY2hlZCAoZm4pIHsKICAgIHZhciBjYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICByZXR1cm4gKGZ1bmN0aW9uIGNhY2hlZEZuIChzdHIpIHsKICAgICAgdmFyIGhpdCA9IGNhY2hlW3N0cl07CiAgICAgIHJldHVybiBoaXQgfHwgKGNhY2hlW3N0cl0gPSBmbihzdHIpKQogICAgfSkKICB9CgogIC8qKgogICAqIENhbWVsaXplIGEgaHlwaGVuLWRlbGltaXRlZCBzdHJpbmcuCiAgICovCiAgdmFyIGNhbWVsaXplUkUgPSAvLShcdykvZzsKICB2YXIgY2FtZWxpemUgPSBjYWNoZWQoZnVuY3Rpb24gKHN0cikgewogICAgcmV0dXJuIHN0ci5yZXBsYWNlKGNhbWVsaXplUkUsIGZ1bmN0aW9uIChfLCBjKSB7IHJldHVybiBjID8gYy50b1VwcGVyQ2FzZSgpIDogJyc7IH0pCiAgfSk7CgogIC8qKgogICAqIENhcGl0YWxpemUgYSBzdHJpbmcuCiAgICovCiAgdmFyIGNhcGl0YWxpemUgPSBjYWNoZWQoZnVuY3Rpb24gKHN0cikgewogICAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKQogIH0pOwoKICAvKioKICAgKiBIeXBoZW5hdGUgYSBjYW1lbENhc2Ugc3RyaW5nLgogICAqLwogIHZhciBoeXBoZW5hdGVSRSA9IC9cQihbQS1aXSkvZzsKICB2YXIgaHlwaGVuYXRlID0gY2FjaGVkKGZ1bmN0aW9uIChzdHIpIHsKICAgIHJldHVybiBzdHIucmVwbGFjZShoeXBoZW5hdGVSRSwgJy0kMScpLnRvTG93ZXJDYXNlKCkKICB9KTsKCiAgLyoqCiAgICogU2ltcGxlIGJpbmQgcG9seWZpbGwgZm9yIGVudmlyb25tZW50cyB0aGF0IGRvIG5vdCBzdXBwb3J0IGl0LAogICAqIGUuZy4sIFBoYW50b21KUyAxLnguIFRlY2huaWNhbGx5LCB3ZSBkb24ndCBuZWVkIHRoaXMgYW55bW9yZQogICAqIHNpbmNlIG5hdGl2ZSBiaW5kIGlzIG5vdyBwZXJmb3JtYW50IGVub3VnaCBpbiBtb3N0IGJyb3dzZXJzLgogICAqIEJ1dCByZW1vdmluZyBpdCB3b3VsZCBtZWFuIGJyZWFraW5nIGNvZGUgdGhhdCB3YXMgYWJsZSB0byBydW4gaW4KICAgKiBQaGFudG9tSlMgMS54LCBzbyB0aGlzIG11c3QgYmUga2VwdCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eS4KICAgKi8KCiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICBmdW5jdGlvbiBwb2x5ZmlsbEJpbmQgKGZuLCBjdHgpIHsKICAgIGZ1bmN0aW9uIGJvdW5kRm4gKGEpIHsKICAgICAgdmFyIGwgPSBhcmd1bWVudHMubGVuZ3RoOwogICAgICByZXR1cm4gbAogICAgICAgID8gbCA+IDEKICAgICAgICAgID8gZm4uYXBwbHkoY3R4LCBhcmd1bWVudHMpCiAgICAgICAgICA6IGZuLmNhbGwoY3R4LCBhKQogICAgICAgIDogZm4uY2FsbChjdHgpCiAgICB9CgogICAgYm91bmRGbi5fbGVuZ3RoID0gZm4ubGVuZ3RoOwogICAgcmV0dXJuIGJvdW5kRm4KICB9CgogIGZ1bmN0aW9uIG5hdGl2ZUJpbmQgKGZuLCBjdHgpIHsKICAgIHJldHVybiBmbi5iaW5kKGN0eCkKICB9CgogIHZhciBiaW5kID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQKICAgID8gbmF0aXZlQmluZAogICAgOiBwb2x5ZmlsbEJpbmQ7CgogIC8qKgogICAqIENvbnZlcnQgYW4gQXJyYXktbGlrZSBvYmplY3QgdG8gYSByZWFsIEFycmF5LgogICAqLwogIGZ1bmN0aW9uIHRvQXJyYXkgKGxpc3QsIHN0YXJ0KSB7CiAgICBzdGFydCA9IHN0YXJ0IHx8IDA7CiAgICB2YXIgaSA9IGxpc3QubGVuZ3RoIC0gc3RhcnQ7CiAgICB2YXIgcmV0ID0gbmV3IEFycmF5KGkpOwogICAgd2hpbGUgKGktLSkgewogICAgICByZXRbaV0gPSBsaXN0W2kgKyBzdGFydF07CiAgICB9CiAgICByZXR1cm4gcmV0CiAgfQoKICAvKioKICAgKiBNaXggcHJvcGVydGllcyBpbnRvIHRhcmdldCBvYmplY3QuCiAgICovCiAgZnVuY3Rpb24gZXh0ZW5kICh0bywgX2Zyb20pIHsKICAgIGZvciAodmFyIGtleSBpbiBfZnJvbSkgewogICAgICB0b1trZXldID0gX2Zyb21ba2V5XTsKICAgIH0KICAgIHJldHVybiB0bwogIH0KCiAgLyoqCiAgICogTWVyZ2UgYW4gQXJyYXkgb2YgT2JqZWN0cyBpbnRvIGEgc2luZ2xlIE9iamVjdC4KICAgKi8KICBmdW5jdGlvbiB0b09iamVjdCAoYXJyKSB7CiAgICB2YXIgcmVzID0ge307CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICBpZiAoYXJyW2ldKSB7CiAgICAgICAgZXh0ZW5kKHJlcywgYXJyW2ldKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlcwogIH0KCiAgLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi8KCiAgLyoqCiAgICogUGVyZm9ybSBubyBvcGVyYXRpb24uCiAgICogU3R1YmJpbmcgYXJncyB0byBtYWtlIEZsb3cgaGFwcHkgd2l0aG91dCBsZWF2aW5nIHVzZWxlc3MgdHJhbnNwaWxlZCBjb2RlCiAgICogd2l0aCAuLi5yZXN0IChodHRwczovL2Zsb3cub3JnL2Jsb2cvMjAxNy8wNS8wNy9TdHJpY3QtRnVuY3Rpb24tQ2FsbC1Bcml0eS8pLgogICAqLwogIGZ1bmN0aW9uIG5vb3AgKGEsIGIsIGMpIHt9CgogIC8qKgogICAqIEFsd2F5cyByZXR1cm4gZmFsc2UuCiAgICovCiAgdmFyIG5vID0gZnVuY3Rpb24gKGEsIGIsIGMpIHsgcmV0dXJuIGZhbHNlOyB9OwoKICAvKiBlc2xpbnQtZW5hYmxlIG5vLXVudXNlZC12YXJzICovCgogIC8qKgogICAqIFJldHVybiB0aGUgc2FtZSB2YWx1ZS4KICAgKi8KICB2YXIgaWRlbnRpdHkgPSBmdW5jdGlvbiAoXykgeyByZXR1cm4gXzsgfTsKCiAgLyoqCiAgICogR2VuZXJhdGUgYSBzdHJpbmcgY29udGFpbmluZyBzdGF0aWMga2V5cyBmcm9tIGNvbXBpbGVyIG1vZHVsZXMuCiAgICovCiAgZnVuY3Rpb24gZ2VuU3RhdGljS2V5cyAobW9kdWxlcykgewogICAgcmV0dXJuIG1vZHVsZXMucmVkdWNlKGZ1bmN0aW9uIChrZXlzLCBtKSB7CiAgICAgIHJldHVybiBrZXlzLmNvbmNhdChtLnN0YXRpY0tleXMgfHwgW10pCiAgICB9LCBbXSkuam9pbignLCcpCiAgfQoKICAvKioKICAgKiBDaGVjayBpZiB0d28gdmFsdWVzIGFyZSBsb29zZWx5IGVxdWFsIC0gdGhhdCBpcywKICAgKiBpZiB0aGV5IGFyZSBwbGFpbiBvYmplY3RzLCBkbyB0aGV5IGhhdmUgdGhlIHNhbWUgc2hhcGU/CiAgICovCiAgZnVuY3Rpb24gbG9vc2VFcXVhbCAoYSwgYikgewogICAgaWYgKGEgPT09IGIpIHsgcmV0dXJuIHRydWUgfQogICAgdmFyIGlzT2JqZWN0QSA9IGlzT2JqZWN0KGEpOwogICAgdmFyIGlzT2JqZWN0QiA9IGlzT2JqZWN0KGIpOwogICAgaWYgKGlzT2JqZWN0QSAmJiBpc09iamVjdEIpIHsKICAgICAgdHJ5IHsKICAgICAgICB2YXIgaXNBcnJheUEgPSBBcnJheS5pc0FycmF5KGEpOwogICAgICAgIHZhciBpc0FycmF5QiA9IEFycmF5LmlzQXJyYXkoYik7CiAgICAgICAgaWYgKGlzQXJyYXlBICYmIGlzQXJyYXlCKSB7CiAgICAgICAgICByZXR1cm4gYS5sZW5ndGggPT09IGIubGVuZ3RoICYmIGEuZXZlcnkoZnVuY3Rpb24gKGUsIGkpIHsKICAgICAgICAgICAgcmV0dXJuIGxvb3NlRXF1YWwoZSwgYltpXSkKICAgICAgICAgIH0pCiAgICAgICAgfSBlbHNlIGlmIChhIGluc3RhbmNlb2YgRGF0ZSAmJiBiIGluc3RhbmNlb2YgRGF0ZSkgewogICAgICAgICAgcmV0dXJuIGEuZ2V0VGltZSgpID09PSBiLmdldFRpbWUoKQogICAgICAgIH0gZWxzZSBpZiAoIWlzQXJyYXlBICYmICFpc0FycmF5QikgewogICAgICAgICAgdmFyIGtleXNBID0gT2JqZWN0LmtleXMoYSk7CiAgICAgICAgICB2YXIga2V5c0IgPSBPYmplY3Qua2V5cyhiKTsKICAgICAgICAgIHJldHVybiBrZXlzQS5sZW5ndGggPT09IGtleXNCLmxlbmd0aCAmJiBrZXlzQS5ldmVyeShmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgIHJldHVybiBsb29zZUVxdWFsKGFba2V5XSwgYltrZXldKQogICAgICAgICAgfSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgIH0gZWxzZSBpZiAoIWlzT2JqZWN0QSAmJiAhaXNPYmplY3RCKSB7CiAgICAgIHJldHVybiBTdHJpbmcoYSkgPT09IFN0cmluZyhiKQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGZhbHNlCiAgICB9CiAgfQoKICAvKioKICAgKiBSZXR1cm4gdGhlIGZpcnN0IGluZGV4IGF0IHdoaWNoIGEgbG9vc2VseSBlcXVhbCB2YWx1ZSBjYW4gYmUKICAgKiBmb3VuZCBpbiB0aGUgYXJyYXkgKGlmIHZhbHVlIGlzIGEgcGxhaW4gb2JqZWN0LCB0aGUgYXJyYXkgbXVzdAogICAqIGNvbnRhaW4gYW4gb2JqZWN0IG9mIHRoZSBzYW1lIHNoYXBlKSwgb3IgLTEgaWYgaXQgaXMgbm90IHByZXNlbnQuCiAgICovCiAgZnVuY3Rpb24gbG9vc2VJbmRleE9mIChhcnIsIHZhbCkgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKGxvb3NlRXF1YWwoYXJyW2ldLCB2YWwpKSB7IHJldHVybiBpIH0KICAgIH0KICAgIHJldHVybiAtMQogIH0KCiAgLyoqCiAgICogRW5zdXJlIGEgZnVuY3Rpb24gaXMgY2FsbGVkIG9ubHkgb25jZS4KICAgKi8KICBmdW5jdGlvbiBvbmNlIChmbikgewogICAgdmFyIGNhbGxlZCA9IGZhbHNlOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCFjYWxsZWQpIHsKICAgICAgICBjYWxsZWQgPSB0cnVlOwogICAgICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgIH0KICB9CgogIHZhciBTU1JfQVRUUiA9ICdkYXRhLXNlcnZlci1yZW5kZXJlZCc7CgogIHZhciBBU1NFVF9UWVBFUyA9IFsKICAgICdjb21wb25lbnQnLAogICAgJ2RpcmVjdGl2ZScsCiAgICAnZmlsdGVyJwogIF07CgogIHZhciBMSUZFQ1lDTEVfSE9PS1MgPSBbCiAgICAnYmVmb3JlQ3JlYXRlJywKICAgICdjcmVhdGVkJywKICAgICdiZWZvcmVNb3VudCcsCiAgICAnbW91bnRlZCcsCiAgICAnYmVmb3JlVXBkYXRlJywKICAgICd1cGRhdGVkJywKICAgICdiZWZvcmVEZXN0cm95JywKICAgICdkZXN0cm95ZWQnLAogICAgJ2FjdGl2YXRlZCcsCiAgICAnZGVhY3RpdmF0ZWQnLAogICAgJ2Vycm9yQ2FwdHVyZWQnLAogICAgJ3NlcnZlclByZWZldGNoJwogIF07CgogIC8qICAqLwoKCgogIHZhciBjb25maWcgPSAoewogICAgLyoqCiAgICAgKiBPcHRpb24gbWVyZ2Ugc3RyYXRlZ2llcyAodXNlZCBpbiBjb3JlL3V0aWwvb3B0aW9ucykKICAgICAqLwogICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lCiAgICBvcHRpb25NZXJnZVN0cmF0ZWdpZXM6IE9iamVjdC5jcmVhdGUobnVsbCksCgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRvIHN1cHByZXNzIHdhcm5pbmdzLgogICAgICovCiAgICBzaWxlbnQ6IGZhbHNlLAoKICAgIC8qKgogICAgICogU2hvdyBwcm9kdWN0aW9uIG1vZGUgdGlwIG1lc3NhZ2Ugb24gYm9vdD8KICAgICAqLwogICAgcHJvZHVjdGlvblRpcDogImRldmVsb3BtZW50IiAhPT0gJ3Byb2R1Y3Rpb24nLAoKICAgIC8qKgogICAgICogV2hldGhlciB0byBlbmFibGUgZGV2dG9vbHMKICAgICAqLwogICAgZGV2dG9vbHM6ICJkZXZlbG9wbWVudCIgIT09ICdwcm9kdWN0aW9uJywKCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gcmVjb3JkIHBlcmYKICAgICAqLwogICAgcGVyZm9ybWFuY2U6IGZhbHNlLAoKICAgIC8qKgogICAgICogRXJyb3IgaGFuZGxlciBmb3Igd2F0Y2hlciBlcnJvcnMKICAgICAqLwogICAgZXJyb3JIYW5kbGVyOiBudWxsLAoKICAgIC8qKgogICAgICogV2FybiBoYW5kbGVyIGZvciB3YXRjaGVyIHdhcm5zCiAgICAgKi8KICAgIHdhcm5IYW5kbGVyOiBudWxsLAoKICAgIC8qKgogICAgICogSWdub3JlIGNlcnRhaW4gY3VzdG9tIGVsZW1lbnRzCiAgICAgKi8KICAgIGlnbm9yZWRFbGVtZW50czogW10sCgogICAgLyoqCiAgICAgKiBDdXN0b20gdXNlciBrZXkgYWxpYXNlcyBmb3Igdi1vbgogICAgICovCiAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmUKICAgIGtleUNvZGVzOiBPYmplY3QuY3JlYXRlKG51bGwpLAoKICAgIC8qKgogICAgICogQ2hlY2sgaWYgYSB0YWcgaXMgcmVzZXJ2ZWQgc28gdGhhdCBpdCBjYW5ub3QgYmUgcmVnaXN0ZXJlZCBhcyBhCiAgICAgKiBjb21wb25lbnQuIFRoaXMgaXMgcGxhdGZvcm0tZGVwZW5kZW50IGFuZCBtYXkgYmUgb3ZlcndyaXR0ZW4uCiAgICAgKi8KICAgIGlzUmVzZXJ2ZWRUYWc6IG5vLAoKICAgIC8qKgogICAgICogQ2hlY2sgaWYgYW4gYXR0cmlidXRlIGlzIHJlc2VydmVkIHNvIHRoYXQgaXQgY2Fubm90IGJlIHVzZWQgYXMgYSBjb21wb25lbnQKICAgICAqIHByb3AuIFRoaXMgaXMgcGxhdGZvcm0tZGVwZW5kZW50IGFuZCBtYXkgYmUgb3ZlcndyaXR0ZW4uCiAgICAgKi8KICAgIGlzUmVzZXJ2ZWRBdHRyOiBubywKCiAgICAvKioKICAgICAqIENoZWNrIGlmIGEgdGFnIGlzIGFuIHVua25vd24gZWxlbWVudC4KICAgICAqIFBsYXRmb3JtLWRlcGVuZGVudC4KICAgICAqLwogICAgaXNVbmtub3duRWxlbWVudDogbm8sCgogICAgLyoqCiAgICAgKiBHZXQgdGhlIG5hbWVzcGFjZSBvZiBhbiBlbGVtZW50CiAgICAgKi8KICAgIGdldFRhZ05hbWVzcGFjZTogbm9vcCwKCiAgICAvKioKICAgICAqIFBhcnNlIHRoZSByZWFsIHRhZyBuYW1lIGZvciB0aGUgc3BlY2lmaWMgcGxhdGZvcm0uCiAgICAgKi8KICAgIHBhcnNlUGxhdGZvcm1UYWdOYW1lOiBpZGVudGl0eSwKCiAgICAvKioKICAgICAqIENoZWNrIGlmIGFuIGF0dHJpYnV0ZSBtdXN0IGJlIGJvdW5kIHVzaW5nIHByb3BlcnR5LCBlLmcuIHZhbHVlCiAgICAgKiBQbGF0Zm9ybS1kZXBlbmRlbnQuCiAgICAgKi8KICAgIG11c3RVc2VQcm9wOiBubywKCiAgICAvKioKICAgICAqIFBlcmZvcm0gdXBkYXRlcyBhc3luY2hyb25vdXNseS4gSW50ZW5kZWQgdG8gYmUgdXNlZCBieSBWdWUgVGVzdCBVdGlscwogICAgICogVGhpcyB3aWxsIHNpZ25pZmljYW50bHkgcmVkdWNlIHBlcmZvcm1hbmNlIGlmIHNldCB0byBmYWxzZS4KICAgICAqLwogICAgYXN5bmM6IHRydWUsCgogICAgLyoqCiAgICAgKiBFeHBvc2VkIGZvciBsZWdhY3kgcmVhc29ucwogICAgICovCiAgICBfbGlmZWN5Y2xlSG9va3M6IExJRkVDWUNMRV9IT09LUwogIH0pOwoKICAvKiAgKi8KCiAgLyoqCiAgICogdW5pY29kZSBsZXR0ZXJzIHVzZWQgZm9yIHBhcnNpbmcgaHRtbCB0YWdzLCBjb21wb25lbnQgbmFtZXMgYW5kIHByb3BlcnR5IHBhdGhzLgogICAqIHVzaW5nIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNTMvc2VtYW50aWNzLXNjcmlwdGluZy5odG1sI3BvdGVudGlhbGN1c3RvbWVsZW1lbnRuYW1lCiAgICogc2tpcHBpbmcgXHUxMDAwMC1cdUVGRkZGIGR1ZSB0byBpdCBmcmVlemluZyB1cCBQaGFudG9tSlMKICAgKi8KICB2YXIgdW5pY29kZVJlZ0V4cCA9IC9hLXpBLVpcdTAwQjdcdTAwQzAtXHUwMEQ2XHUwMEQ4LVx1MDBGNlx1MDBGOC1cdTAzN0RcdTAzN0YtXHUxRkZGXHUyMDBDLVx1MjAwRFx1MjAzRi1cdTIwNDBcdTIwNzAtXHUyMThGXHUyQzAwLVx1MkZFRlx1MzAwMS1cdUQ3RkZcdUY5MDAtXHVGRENGXHVGREYwLVx1RkZGRC87CgogIC8qKgogICAqIENoZWNrIGlmIGEgc3RyaW5nIHN0YXJ0cyB3aXRoICQgb3IgXwogICAqLwogIGZ1bmN0aW9uIGlzUmVzZXJ2ZWQgKHN0cikgewogICAgdmFyIGMgPSAoc3RyICsgJycpLmNoYXJDb2RlQXQoMCk7CiAgICByZXR1cm4gYyA9PT0gMHgyNCB8fCBjID09PSAweDVGCiAgfQoKICAvKioKICAgKiBEZWZpbmUgYSBwcm9wZXJ0eS4KICAgKi8KICBmdW5jdGlvbiBkZWYgKG9iaiwga2V5LCB2YWwsIGVudW1lcmFibGUpIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsLAogICAgICBlbnVtZXJhYmxlOiAhIWVudW1lcmFibGUsCiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUKICAgIH0pOwogIH0KCiAgLyoqCiAgICogUGFyc2Ugc2ltcGxlIHBhdGguCiAgICovCiAgdmFyIGJhaWxSRSA9IG5ldyBSZWdFeHAoKCJbXiIgKyAodW5pY29kZVJlZ0V4cC5zb3VyY2UpICsgIi4kX1xcZF0iKSk7CiAgZnVuY3Rpb24gcGFyc2VQYXRoIChwYXRoKSB7CiAgICBpZiAoYmFpbFJFLnRlc3QocGF0aCkpIHsKICAgICAgcmV0dXJuCiAgICB9CiAgICB2YXIgc2VnbWVudHMgPSBwYXRoLnNwbGl0KCcuJyk7CiAgICByZXR1cm4gZnVuY3Rpb24gKG9iaikgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKCFvYmopIHsgcmV0dXJuIH0KICAgICAgICBvYmogPSBvYmpbc2VnbWVudHNbaV1dOwogICAgICB9CiAgICAgIHJldHVybiBvYmoKICAgIH0KICB9CgogIC8qICAqLwoKICAvLyBjYW4gd2UgdXNlIF9fcHJvdG9fXz8KICB2YXIgaGFzUHJvdG8gPSAnX19wcm90b19fJyBpbiB7fTsKCiAgLy8gQnJvd3NlciBlbnZpcm9ubWVudCBzbmlmZmluZwogIHZhciBpbkJyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJzsKICB2YXIgaW5XZWV4ID0gdHlwZW9mIFdYRW52aXJvbm1lbnQgIT09ICd1bmRlZmluZWQnICYmICEhV1hFbnZpcm9ubWVudC5wbGF0Zm9ybTsKICB2YXIgd2VleFBsYXRmb3JtID0gaW5XZWV4ICYmIFdYRW52aXJvbm1lbnQucGxhdGZvcm0udG9Mb3dlckNhc2UoKTsKICB2YXIgVUEgPSBpbkJyb3dzZXIgJiYgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTsKICB2YXIgaXNJRSA9IFVBICYmIC9tc2llfHRyaWRlbnQvLnRlc3QoVUEpOwogIHZhciBpc0lFOSA9IFVBICYmIFVBLmluZGV4T2YoJ21zaWUgOS4wJykgPiAwOwogIHZhciBpc0VkZ2UgPSBVQSAmJiBVQS5pbmRleE9mKCdlZGdlLycpID4gMDsKICB2YXIgaXNBbmRyb2lkID0gKFVBICYmIFVBLmluZGV4T2YoJ2FuZHJvaWQnKSA+IDApIHx8ICh3ZWV4UGxhdGZvcm0gPT09ICdhbmRyb2lkJyk7CiAgdmFyIGlzSU9TID0gKFVBICYmIC9pcGhvbmV8aXBhZHxpcG9kfGlvcy8udGVzdChVQSkpIHx8ICh3ZWV4UGxhdGZvcm0gPT09ICdpb3MnKTsKICB2YXIgaXNDaHJvbWUgPSBVQSAmJiAvY2hyb21lXC9cZCsvLnRlc3QoVUEpICYmICFpc0VkZ2U7CiAgdmFyIGlzUGhhbnRvbUpTID0gVUEgJiYgL3BoYW50b21qcy8udGVzdChVQSk7CiAgdmFyIGlzRkYgPSBVQSAmJiBVQS5tYXRjaCgvZmlyZWZveFwvKFxkKykvKTsKCiAgLy8gRmlyZWZveCBoYXMgYSAid2F0Y2giIGZ1bmN0aW9uIG9uIE9iamVjdC5wcm90b3R5cGUuLi4KICB2YXIgbmF0aXZlV2F0Y2ggPSAoe30pLndhdGNoOwoKICB2YXIgc3VwcG9ydHNQYXNzaXZlID0gZmFsc2U7CiAgaWYgKGluQnJvd3NlcikgewogICAgdHJ5IHsKICAgICAgdmFyIG9wdHMgPSB7fTsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9wdHMsICdwYXNzaXZlJywgKHsKICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCAoKSB7CiAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogICAgICAgICAgc3VwcG9ydHNQYXNzaXZlID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pKTsgLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL2Zsb3cvaXNzdWVzLzI4NQogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGVzdC1wYXNzaXZlJywgbnVsbCwgb3B0cyk7CiAgICB9IGNhdGNoIChlKSB7fQogIH0KCiAgLy8gdGhpcyBuZWVkcyB0byBiZSBsYXp5LWV2YWxlZCBiZWNhdXNlIHZ1ZSBtYXkgYmUgcmVxdWlyZWQgYmVmb3JlCiAgLy8gdnVlLXNlcnZlci1yZW5kZXJlciBjYW4gc2V0IFZVRV9FTlYKICB2YXIgX2lzU2VydmVyOwogIHZhciBpc1NlcnZlclJlbmRlcmluZyA9IGZ1bmN0aW9uICgpIHsKICAgIGlmIChfaXNTZXJ2ZXIgPT09IHVuZGVmaW5lZCkgewogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgaWYgKCFpbkJyb3dzZXIgJiYgIWluV2VleCAmJiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIC8vIGRldGVjdCBwcmVzZW5jZSBvZiB2dWUtc2VydmVyLXJlbmRlcmVyIGFuZCBhdm9pZAogICAgICAgIC8vIFdlYnBhY2sgc2hpbW1pbmcgdGhlIHByb2Nlc3MKICAgICAgICBfaXNTZXJ2ZXIgPSBnbG9iYWxbJ3Byb2Nlc3MnXSAmJiBnbG9iYWxbJ3Byb2Nlc3MnXS5lbnYuVlVFX0VOViA9PT0gJ3NlcnZlcic7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX2lzU2VydmVyID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBfaXNTZXJ2ZXIKICB9OwoKICAvLyBkZXRlY3QgZGV2dG9vbHMKICB2YXIgZGV2dG9vbHMgPSBpbkJyb3dzZXIgJiYgd2luZG93Ll9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX187CgogIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgZnVuY3Rpb24gaXNOYXRpdmUgKEN0b3IpIHsKICAgIHJldHVybiB0eXBlb2YgQ3RvciA9PT0gJ2Z1bmN0aW9uJyAmJiAvbmF0aXZlIGNvZGUvLnRlc3QoQ3Rvci50b1N0cmluZygpKQogIH0KCiAgdmFyIGhhc1N5bWJvbCA9CiAgICB0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBpc05hdGl2ZShTeW1ib2wpICYmCiAgICB0eXBlb2YgUmVmbGVjdCAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNOYXRpdmUoUmVmbGVjdC5vd25LZXlzKTsKCiAgdmFyIF9TZXQ7CiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovIC8vICRmbG93LWRpc2FibGUtbGluZQogIGlmICh0eXBlb2YgU2V0ICE9PSAndW5kZWZpbmVkJyAmJiBpc05hdGl2ZShTZXQpKSB7CiAgICAvLyB1c2UgbmF0aXZlIFNldCB3aGVuIGF2YWlsYWJsZS4KICAgIF9TZXQgPSBTZXQ7CiAgfSBlbHNlIHsKICAgIC8vIGEgbm9uLXN0YW5kYXJkIFNldCBwb2x5ZmlsbCB0aGF0IG9ubHkgd29ya3Mgd2l0aCBwcmltaXRpdmUga2V5cy4KICAgIF9TZXQgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uICgpIHsKICAgICAgZnVuY3Rpb24gU2V0ICgpIHsKICAgICAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICAgIH0KICAgICAgU2V0LnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiBoYXMgKGtleSkgewogICAgICAgIHJldHVybiB0aGlzLnNldFtrZXldID09PSB0cnVlCiAgICAgIH07CiAgICAgIFNldC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gYWRkIChrZXkpIHsKICAgICAgICB0aGlzLnNldFtrZXldID0gdHJ1ZTsKICAgICAgfTsKICAgICAgU2V0LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uIGNsZWFyICgpIHsKICAgICAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICAgIH07CgogICAgICByZXR1cm4gU2V0OwogICAgfSgpKTsKICB9CgogIC8qICAqLwoKICB2YXIgd2FybiA9IG5vb3A7CiAgdmFyIHRpcCA9IG5vb3A7CiAgdmFyIGdlbmVyYXRlQ29tcG9uZW50VHJhY2UgPSAobm9vcCk7IC8vIHdvcmsgYXJvdW5kIGZsb3cgY2hlY2sKICB2YXIgZm9ybWF0Q29tcG9uZW50TmFtZSA9IChub29wKTsKCiAgewogICAgdmFyIGhhc0NvbnNvbGUgPSB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCc7CiAgICB2YXIgY2xhc3NpZnlSRSA9IC8oPzpefFstX10pKFx3KS9nOwogICAgdmFyIGNsYXNzaWZ5ID0gZnVuY3Rpb24gKHN0cikgeyByZXR1cm4gc3RyCiAgICAgIC5yZXBsYWNlKGNsYXNzaWZ5UkUsIGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLnRvVXBwZXJDYXNlKCk7IH0pCiAgICAgIC5yZXBsYWNlKC9bLV9dL2csICcnKTsgfTsKCiAgICB3YXJuID0gZnVuY3Rpb24gKG1zZywgdm0pIHsKICAgICAgdmFyIHRyYWNlID0gdm0gPyBnZW5lcmF0ZUNvbXBvbmVudFRyYWNlKHZtKSA6ICcnOwoKICAgICAgaWYgKGNvbmZpZy53YXJuSGFuZGxlcikgewogICAgICAgIGNvbmZpZy53YXJuSGFuZGxlci5jYWxsKG51bGwsIG1zZywgdm0sIHRyYWNlKTsKICAgICAgfSBlbHNlIGlmIChoYXNDb25zb2xlICYmICghY29uZmlnLnNpbGVudCkpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCgiW1Z1ZSB3YXJuXTogIiArIG1zZyArIHRyYWNlKSk7CiAgICAgIH0KICAgIH07CgogICAgdGlwID0gZnVuY3Rpb24gKG1zZywgdm0pIHsKICAgICAgaWYgKGhhc0NvbnNvbGUgJiYgKCFjb25maWcuc2lsZW50KSkgewogICAgICAgIGNvbnNvbGUud2FybigiW1Z1ZSB0aXBdOiAiICsgbXNnICsgKAogICAgICAgICAgdm0gPyBnZW5lcmF0ZUNvbXBvbmVudFRyYWNlKHZtKSA6ICcnCiAgICAgICAgKSk7CiAgICAgIH0KICAgIH07CgogICAgZm9ybWF0Q29tcG9uZW50TmFtZSA9IGZ1bmN0aW9uICh2bSwgaW5jbHVkZUZpbGUpIHsKICAgICAgaWYgKHZtLiRyb290ID09PSB2bSkgewogICAgICAgIHJldHVybiAnPFJvb3Q+JwogICAgICB9CiAgICAgIHZhciBvcHRpb25zID0gdHlwZW9mIHZtID09PSAnZnVuY3Rpb24nICYmIHZtLmNpZCAhPSBudWxsCiAgICAgICAgPyB2bS5vcHRpb25zCiAgICAgICAgOiB2bS5faXNWdWUKICAgICAgICAgID8gdm0uJG9wdGlvbnMgfHwgdm0uY29uc3RydWN0b3Iub3B0aW9ucwogICAgICAgICAgOiB2bTsKICAgICAgdmFyIG5hbWUgPSBvcHRpb25zLm5hbWUgfHwgb3B0aW9ucy5fY29tcG9uZW50VGFnOwogICAgICB2YXIgZmlsZSA9IG9wdGlvbnMuX19maWxlOwogICAgICBpZiAoIW5hbWUgJiYgZmlsZSkgewogICAgICAgIHZhciBtYXRjaCA9IGZpbGUubWF0Y2goLyhbXi9cXF0rKVwudnVlJC8pOwogICAgICAgIG5hbWUgPSBtYXRjaCAmJiBtYXRjaFsxXTsKICAgICAgfQoKICAgICAgcmV0dXJuICgKICAgICAgICAobmFtZSA/ICgiPCIgKyAoY2xhc3NpZnkobmFtZSkpICsgIj4iKSA6ICI8QW5vbnltb3VzPiIpICsKICAgICAgICAoZmlsZSAmJiBpbmNsdWRlRmlsZSAhPT0gZmFsc2UgPyAoIiBhdCAiICsgZmlsZSkgOiAnJykKICAgICAgKQogICAgfTsKCiAgICB2YXIgcmVwZWF0ID0gZnVuY3Rpb24gKHN0ciwgbikgewogICAgICB2YXIgcmVzID0gJyc7CiAgICAgIHdoaWxlIChuKSB7CiAgICAgICAgaWYgKG4gJSAyID09PSAxKSB7IHJlcyArPSBzdHI7IH0KICAgICAgICBpZiAobiA+IDEpIHsgc3RyICs9IHN0cjsgfQogICAgICAgIG4gPj49IDE7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlcwogICAgfTsKCiAgICBnZW5lcmF0ZUNvbXBvbmVudFRyYWNlID0gZnVuY3Rpb24gKHZtKSB7CiAgICAgIGlmICh2bS5faXNWdWUgJiYgdm0uJHBhcmVudCkgewogICAgICAgIHZhciB0cmVlID0gW107CiAgICAgICAgdmFyIGN1cnJlbnRSZWN1cnNpdmVTZXF1ZW5jZSA9IDA7CiAgICAgICAgd2hpbGUgKHZtKSB7CiAgICAgICAgICBpZiAodHJlZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHZhciBsYXN0ID0gdHJlZVt0cmVlLmxlbmd0aCAtIDFdOwogICAgICAgICAgICBpZiAobGFzdC5jb25zdHJ1Y3RvciA9PT0gdm0uY29uc3RydWN0b3IpIHsKICAgICAgICAgICAgICBjdXJyZW50UmVjdXJzaXZlU2VxdWVuY2UrKzsKICAgICAgICAgICAgICB2bSA9IHZtLiRwYXJlbnQ7CiAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50UmVjdXJzaXZlU2VxdWVuY2UgPiAwKSB7CiAgICAgICAgICAgICAgdHJlZVt0cmVlLmxlbmd0aCAtIDFdID0gW2xhc3QsIGN1cnJlbnRSZWN1cnNpdmVTZXF1ZW5jZV07CiAgICAgICAgICAgICAgY3VycmVudFJlY3Vyc2l2ZVNlcXVlbmNlID0gMDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgdHJlZS5wdXNoKHZtKTsKICAgICAgICAgIHZtID0gdm0uJHBhcmVudDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuICdcblxuZm91bmQgaW5cblxuJyArIHRyZWUKICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHZtLCBpKSB7IHJldHVybiAoIiIgKyAoaSA9PT0gMCA/ICctLS0+ICcgOiByZXBlYXQoJyAnLCA1ICsgaSAqIDIpKSArIChBcnJheS5pc0FycmF5KHZtKQogICAgICAgICAgICAgID8gKChmb3JtYXRDb21wb25lbnROYW1lKHZtWzBdKSkgKyAiLi4uICgiICsgKHZtWzFdKSArICIgcmVjdXJzaXZlIGNhbGxzKSIpCiAgICAgICAgICAgICAgOiBmb3JtYXRDb21wb25lbnROYW1lKHZtKSkpOyB9KQogICAgICAgICAgLmpvaW4oJ1xuJykKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gKCJcblxuKGZvdW5kIGluICIgKyAoZm9ybWF0Q29tcG9uZW50TmFtZSh2bSkpICsgIikiKQogICAgICB9CiAgICB9OwogIH0KCiAgLyogICovCgogIHZhciB1aWQgPSAwOwoKICAvKioKICAgKiBBIGRlcCBpcyBhbiBvYnNlcnZhYmxlIHRoYXQgY2FuIGhhdmUgbXVsdGlwbGUKICAgKiBkaXJlY3RpdmVzIHN1YnNjcmliaW5nIHRvIGl0LgogICAqLwogIHZhciBEZXAgPSBmdW5jdGlvbiBEZXAgKCkgewogICAgdGhpcy5pZCA9IHVpZCsrOwogICAgdGhpcy5zdWJzID0gW107CiAgfTsKCiAgRGVwLnByb3RvdHlwZS5hZGRTdWIgPSBmdW5jdGlvbiBhZGRTdWIgKHN1YikgewogICAgdGhpcy5zdWJzLnB1c2goc3ViKTsKICB9OwoKICBEZXAucHJvdG90eXBlLnJlbW92ZVN1YiA9IGZ1bmN0aW9uIHJlbW92ZVN1YiAoc3ViKSB7CiAgICByZW1vdmUodGhpcy5zdWJzLCBzdWIpOwogIH07CgogIERlcC5wcm90b3R5cGUuZGVwZW5kID0gZnVuY3Rpb24gZGVwZW5kICgpIHsKICAgIGlmIChEZXAudGFyZ2V0KSB7CiAgICAgIERlcC50YXJnZXQuYWRkRGVwKHRoaXMpOwogICAgfQogIH07CgogIERlcC5wcm90b3R5cGUubm90aWZ5ID0gZnVuY3Rpb24gbm90aWZ5ICgpIHsKICAgIC8vIHN0YWJpbGl6ZSB0aGUgc3Vic2NyaWJlciBsaXN0IGZpcnN0CiAgICB2YXIgc3VicyA9IHRoaXMuc3Vicy5zbGljZSgpOwogICAgaWYgKCFjb25maWcuYXN5bmMpIHsKICAgICAgLy8gc3VicyBhcmVuJ3Qgc29ydGVkIGluIHNjaGVkdWxlciBpZiBub3QgcnVubmluZyBhc3luYwogICAgICAvLyB3ZSBuZWVkIHRvIHNvcnQgdGhlbSBub3cgdG8gbWFrZSBzdXJlIHRoZXkgZmlyZSBpbiBjb3JyZWN0CiAgICAgIC8vIG9yZGVyCiAgICAgIHN1YnMuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYS5pZCAtIGIuaWQ7IH0pOwogICAgfQogICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdWJzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICBzdWJzW2ldLnVwZGF0ZSgpOwogICAgfQogIH07CgogIC8vIFRoZSBjdXJyZW50IHRhcmdldCB3YXRjaGVyIGJlaW5nIGV2YWx1YXRlZC4KICAvLyBUaGlzIGlzIGdsb2JhbGx5IHVuaXF1ZSBiZWNhdXNlIG9ubHkgb25lIHdhdGNoZXIKICAvLyBjYW4gYmUgZXZhbHVhdGVkIGF0IGEgdGltZS4KICBEZXAudGFyZ2V0ID0gbnVsbDsKICB2YXIgdGFyZ2V0U3RhY2sgPSBbXTsKCiAgZnVuY3Rpb24gcHVzaFRhcmdldCAodGFyZ2V0KSB7CiAgICB0YXJnZXRTdGFjay5wdXNoKHRhcmdldCk7CiAgICBEZXAudGFyZ2V0ID0gdGFyZ2V0OwogIH0KCiAgZnVuY3Rpb24gcG9wVGFyZ2V0ICgpIHsKICAgIHRhcmdldFN0YWNrLnBvcCgpOwogICAgRGVwLnRhcmdldCA9IHRhcmdldFN0YWNrW3RhcmdldFN0YWNrLmxlbmd0aCAtIDFdOwogIH0KCiAgLyogICovCgogIHZhciBWTm9kZSA9IGZ1bmN0aW9uIFZOb2RlICgKICAgIHRhZywKICAgIGRhdGEsCiAgICBjaGlsZHJlbiwKICAgIHRleHQsCiAgICBlbG0sCiAgICBjb250ZXh0LAogICAgY29tcG9uZW50T3B0aW9ucywKICAgIGFzeW5jRmFjdG9yeQogICkgewogICAgdGhpcy50YWcgPSB0YWc7CiAgICB0aGlzLmRhdGEgPSBkYXRhOwogICAgdGhpcy5jaGlsZHJlbiA9IGNoaWxkcmVuOwogICAgdGhpcy50ZXh0ID0gdGV4dDsKICAgIHRoaXMuZWxtID0gZWxtOwogICAgdGhpcy5ucyA9IHVuZGVmaW5lZDsKICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICB0aGlzLmZuQ29udGV4dCA9IHVuZGVmaW5lZDsKICAgIHRoaXMuZm5PcHRpb25zID0gdW5kZWZpbmVkOwogICAgdGhpcy5mblNjb3BlSWQgPSB1bmRlZmluZWQ7CiAgICB0aGlzLmtleSA9IGRhdGEgJiYgZGF0YS5rZXk7CiAgICB0aGlzLmNvbXBvbmVudE9wdGlvbnMgPSBjb21wb25lbnRPcHRpb25zOwogICAgdGhpcy5jb21wb25lbnRJbnN0YW5jZSA9IHVuZGVmaW5lZDsKICAgIHRoaXMucGFyZW50ID0gdW5kZWZpbmVkOwogICAgdGhpcy5yYXcgPSBmYWxzZTsKICAgIHRoaXMuaXNTdGF0aWMgPSBmYWxzZTsKICAgIHRoaXMuaXNSb290SW5zZXJ0ID0gdHJ1ZTsKICAgIHRoaXMuaXNDb21tZW50ID0gZmFsc2U7CiAgICB0aGlzLmlzQ2xvbmVkID0gZmFsc2U7CiAgICB0aGlzLmlzT25jZSA9IGZhbHNlOwogICAgdGhpcy5hc3luY0ZhY3RvcnkgPSBhc3luY0ZhY3Rvcnk7CiAgICB0aGlzLmFzeW5jTWV0YSA9IHVuZGVmaW5lZDsKICAgIHRoaXMuaXNBc3luY1BsYWNlaG9sZGVyID0gZmFsc2U7CiAgfTsKCiAgdmFyIHByb3RvdHlwZUFjY2Vzc29ycyA9IHsgY2hpbGQ6IHsgY29uZmlndXJhYmxlOiB0cnVlIH0gfTsKCiAgLy8gREVQUkVDQVRFRDogYWxpYXMgZm9yIGNvbXBvbmVudEluc3RhbmNlIGZvciBiYWNrd2FyZHMgY29tcGF0LgogIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgcHJvdG90eXBlQWNjZXNzb3JzLmNoaWxkLmdldCA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzLmNvbXBvbmVudEluc3RhbmNlCiAgfTsKCiAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoIFZOb2RlLnByb3RvdHlwZSwgcHJvdG90eXBlQWNjZXNzb3JzICk7CgogIHZhciBjcmVhdGVFbXB0eVZOb2RlID0gZnVuY3Rpb24gKHRleHQpIHsKICAgIGlmICggdGV4dCA9PT0gdm9pZCAwICkgdGV4dCA9ICcnOwoKICAgIHZhciBub2RlID0gbmV3IFZOb2RlKCk7CiAgICBub2RlLnRleHQgPSB0ZXh0OwogICAgbm9kZS5pc0NvbW1lbnQgPSB0cnVlOwogICAgcmV0dXJuIG5vZGUKICB9OwoKICBmdW5jdGlvbiBjcmVhdGVUZXh0Vk5vZGUgKHZhbCkgewogICAgcmV0dXJuIG5ldyBWTm9kZSh1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBTdHJpbmcodmFsKSkKICB9CgogIC8vIG9wdGltaXplZCBzaGFsbG93IGNsb25lCiAgLy8gdXNlZCBmb3Igc3RhdGljIG5vZGVzIGFuZCBzbG90IG5vZGVzIGJlY2F1c2UgdGhleSBtYXkgYmUgcmV1c2VkIGFjcm9zcwogIC8vIG11bHRpcGxlIHJlbmRlcnMsIGNsb25pbmcgdGhlbSBhdm9pZHMgZXJyb3JzIHdoZW4gRE9NIG1hbmlwdWxhdGlvbnMgcmVseQogIC8vIG9uIHRoZWlyIGVsbSByZWZlcmVuY2UuCiAgZnVuY3Rpb24gY2xvbmVWTm9kZSAodm5vZGUpIHsKICAgIHZhciBjbG9uZWQgPSBuZXcgVk5vZGUoCiAgICAgIHZub2RlLnRhZywKICAgICAgdm5vZGUuZGF0YSwKICAgICAgLy8gIzc5NzUKICAgICAgLy8gY2xvbmUgY2hpbGRyZW4gYXJyYXkgdG8gYXZvaWQgbXV0YXRpbmcgb3JpZ2luYWwgaW4gY2FzZSBvZiBjbG9uaW5nCiAgICAgIC8vIGEgY2hpbGQuCiAgICAgIHZub2RlLmNoaWxkcmVuICYmIHZub2RlLmNoaWxkcmVuLnNsaWNlKCksCiAgICAgIHZub2RlLnRleHQsCiAgICAgIHZub2RlLmVsbSwKICAgICAgdm5vZGUuY29udGV4dCwKICAgICAgdm5vZGUuY29tcG9uZW50T3B0aW9ucywKICAgICAgdm5vZGUuYXN5bmNGYWN0b3J5CiAgICApOwogICAgY2xvbmVkLm5zID0gdm5vZGUubnM7CiAgICBjbG9uZWQuaXNTdGF0aWMgPSB2bm9kZS5pc1N0YXRpYzsKICAgIGNsb25lZC5rZXkgPSB2bm9kZS5rZXk7CiAgICBjbG9uZWQuaXNDb21tZW50ID0gdm5vZGUuaXNDb21tZW50OwogICAgY2xvbmVkLmZuQ29udGV4dCA9IHZub2RlLmZuQ29udGV4dDsKICAgIGNsb25lZC5mbk9wdGlvbnMgPSB2bm9kZS5mbk9wdGlvbnM7CiAgICBjbG9uZWQuZm5TY29wZUlkID0gdm5vZGUuZm5TY29wZUlkOwogICAgY2xvbmVkLmFzeW5jTWV0YSA9IHZub2RlLmFzeW5jTWV0YTsKICAgIGNsb25lZC5pc0Nsb25lZCA9IHRydWU7CiAgICByZXR1cm4gY2xvbmVkCiAgfQoKICAvKgogICAqIG5vdCB0eXBlIGNoZWNraW5nIHRoaXMgZmlsZSBiZWNhdXNlIGZsb3cgZG9lc24ndCBwbGF5IHdlbGwgd2l0aAogICAqIGR5bmFtaWNhbGx5IGFjY2Vzc2luZyBtZXRob2RzIG9uIEFycmF5IHByb3RvdHlwZQogICAqLwoKICB2YXIgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZTsKICB2YXIgYXJyYXlNZXRob2RzID0gT2JqZWN0LmNyZWF0ZShhcnJheVByb3RvKTsKCiAgdmFyIG1ldGhvZHNUb1BhdGNoID0gWwogICAgJ3B1c2gnLAogICAgJ3BvcCcsCiAgICAnc2hpZnQnLAogICAgJ3Vuc2hpZnQnLAogICAgJ3NwbGljZScsCiAgICAnc29ydCcsCiAgICAncmV2ZXJzZScKICBdOwoKICAvKioKICAgKiBJbnRlcmNlcHQgbXV0YXRpbmcgbWV0aG9kcyBhbmQgZW1pdCBldmVudHMKICAgKi8KICBtZXRob2RzVG9QYXRjaC5mb3JFYWNoKGZ1bmN0aW9uIChtZXRob2QpIHsKICAgIC8vIGNhY2hlIG9yaWdpbmFsIG1ldGhvZAogICAgdmFyIG9yaWdpbmFsID0gYXJyYXlQcm90b1ttZXRob2RdOwogICAgZGVmKGFycmF5TWV0aG9kcywgbWV0aG9kLCBmdW5jdGlvbiBtdXRhdG9yICgpIHsKICAgICAgdmFyIGFyZ3MgPSBbXSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsKICAgICAgd2hpbGUgKCBsZW4tLSApIGFyZ3NbIGxlbiBdID0gYXJndW1lbnRzWyBsZW4gXTsKCiAgICAgIHZhciByZXN1bHQgPSBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmdzKTsKICAgICAgdmFyIG9iID0gdGhpcy5fX29iX187CiAgICAgIHZhciBpbnNlcnRlZDsKICAgICAgc3dpdGNoIChtZXRob2QpIHsKICAgICAgICBjYXNlICdwdXNoJzoKICAgICAgICBjYXNlICd1bnNoaWZ0JzoKICAgICAgICAgIGluc2VydGVkID0gYXJnczsKICAgICAgICAgIGJyZWFrCiAgICAgICAgY2FzZSAnc3BsaWNlJzoKICAgICAgICAgIGluc2VydGVkID0gYXJncy5zbGljZSgyKTsKICAgICAgICAgIGJyZWFrCiAgICAgIH0KICAgICAgaWYgKGluc2VydGVkKSB7IG9iLm9ic2VydmVBcnJheShpbnNlcnRlZCk7IH0KICAgICAgLy8gbm90aWZ5IGNoYW5nZQogICAgICBvYi5kZXAubm90aWZ5KCk7CiAgICAgIHJldHVybiByZXN1bHQKICAgIH0pOwogIH0pOwoKICAvKiAgKi8KCiAgdmFyIGFycmF5S2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGFycmF5TWV0aG9kcyk7CgogIC8qKgogICAqIEluIHNvbWUgY2FzZXMgd2UgbWF5IHdhbnQgdG8gZGlzYWJsZSBvYnNlcnZhdGlvbiBpbnNpZGUgYSBjb21wb25lbnQncwogICAqIHVwZGF0ZSBjb21wdXRhdGlvbi4KICAgKi8KICB2YXIgc2hvdWxkT2JzZXJ2ZSA9IHRydWU7CgogIGZ1bmN0aW9uIHRvZ2dsZU9ic2VydmluZyAodmFsdWUpIHsKICAgIHNob3VsZE9ic2VydmUgPSB2YWx1ZTsKICB9CgogIC8qKgogICAqIE9ic2VydmVyIGNsYXNzIHRoYXQgaXMgYXR0YWNoZWQgdG8gZWFjaCBvYnNlcnZlZAogICAqIG9iamVjdC4gT25jZSBhdHRhY2hlZCwgdGhlIG9ic2VydmVyIGNvbnZlcnRzIHRoZSB0YXJnZXQKICAgKiBvYmplY3QncyBwcm9wZXJ0eSBrZXlzIGludG8gZ2V0dGVyL3NldHRlcnMgdGhhdAogICAqIGNvbGxlY3QgZGVwZW5kZW5jaWVzIGFuZCBkaXNwYXRjaCB1cGRhdGVzLgogICAqLwogIHZhciBPYnNlcnZlciA9IGZ1bmN0aW9uIE9ic2VydmVyICh2YWx1ZSkgewogICAgdGhpcy52YWx1ZSA9IHZhbHVlOwogICAgdGhpcy5kZXAgPSBuZXcgRGVwKCk7CiAgICB0aGlzLnZtQ291bnQgPSAwOwogICAgZGVmKHZhbHVlLCAnX19vYl9fJywgdGhpcyk7CiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgICAgaWYgKGhhc1Byb3RvKSB7CiAgICAgICAgcHJvdG9BdWdtZW50KHZhbHVlLCBhcnJheU1ldGhvZHMpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvcHlBdWdtZW50KHZhbHVlLCBhcnJheU1ldGhvZHMsIGFycmF5S2V5cyk7CiAgICAgIH0KICAgICAgdGhpcy5vYnNlcnZlQXJyYXkodmFsdWUpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy53YWxrKHZhbHVlKTsKICAgIH0KICB9OwoKICAvKioKICAgKiBXYWxrIHRocm91Z2ggYWxsIHByb3BlcnRpZXMgYW5kIGNvbnZlcnQgdGhlbSBpbnRvCiAgICogZ2V0dGVyL3NldHRlcnMuIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCB3aGVuCiAgICogdmFsdWUgdHlwZSBpcyBPYmplY3QuCiAgICovCiAgT2JzZXJ2ZXIucHJvdG90eXBlLndhbGsgPSBmdW5jdGlvbiB3YWxrIChvYmopIHsKICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykgewogICAgICBkZWZpbmVSZWFjdGl2ZSQkMShvYmosIGtleXNbaV0pOwogICAgfQogIH07CgogIC8qKgogICAqIE9ic2VydmUgYSBsaXN0IG9mIEFycmF5IGl0ZW1zLgogICAqLwogIE9ic2VydmVyLnByb3RvdHlwZS5vYnNlcnZlQXJyYXkgPSBmdW5jdGlvbiBvYnNlcnZlQXJyYXkgKGl0ZW1zKSB7CiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGl0ZW1zLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICBvYnNlcnZlKGl0ZW1zW2ldKTsKICAgIH0KICB9OwoKICAvLyBoZWxwZXJzCgogIC8qKgogICAqIEF1Z21lbnQgYSB0YXJnZXQgT2JqZWN0IG9yIEFycmF5IGJ5IGludGVyY2VwdGluZwogICAqIHRoZSBwcm90b3R5cGUgY2hhaW4gdXNpbmcgX19wcm90b19fCiAgICovCiAgZnVuY3Rpb24gcHJvdG9BdWdtZW50ICh0YXJnZXQsIHNyYykgewogICAgLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi8KICAgIHRhcmdldC5fX3Byb3RvX18gPSBzcmM7CiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLXByb3RvICovCiAgfQoKICAvKioKICAgKiBBdWdtZW50IGEgdGFyZ2V0IE9iamVjdCBvciBBcnJheSBieSBkZWZpbmluZwogICAqIGhpZGRlbiBwcm9wZXJ0aWVzLgogICAqLwogIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgZnVuY3Rpb24gY29weUF1Z21lbnQgKHRhcmdldCwgc3JjLCBrZXlzKSB7CiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgIHZhciBrZXkgPSBrZXlzW2ldOwogICAgICBkZWYodGFyZ2V0LCBrZXksIHNyY1trZXldKTsKICAgIH0KICB9CgogIC8qKgogICAqIEF0dGVtcHQgdG8gY3JlYXRlIGFuIG9ic2VydmVyIGluc3RhbmNlIGZvciBhIHZhbHVlLAogICAqIHJldHVybnMgdGhlIG5ldyBvYnNlcnZlciBpZiBzdWNjZXNzZnVsbHkgb2JzZXJ2ZWQsCiAgICogb3IgdGhlIGV4aXN0aW5nIG9ic2VydmVyIGlmIHRoZSB2YWx1ZSBhbHJlYWR5IGhhcyBvbmUuCiAgICovCiAgZnVuY3Rpb24gb2JzZXJ2ZSAodmFsdWUsIGFzUm9vdERhdGEpIHsKICAgIGlmICghaXNPYmplY3QodmFsdWUpIHx8IHZhbHVlIGluc3RhbmNlb2YgVk5vZGUpIHsKICAgICAgcmV0dXJuCiAgICB9CiAgICB2YXIgb2I7CiAgICBpZiAoaGFzT3duKHZhbHVlLCAnX19vYl9fJykgJiYgdmFsdWUuX19vYl9fIGluc3RhbmNlb2YgT2JzZXJ2ZXIpIHsKICAgICAgb2IgPSB2YWx1ZS5fX29iX187CiAgICB9IGVsc2UgaWYgKAogICAgICBzaG91bGRPYnNlcnZlICYmCiAgICAgICFpc1NlcnZlclJlbmRlcmluZygpICYmCiAgICAgIChBcnJheS5pc0FycmF5KHZhbHVlKSB8fCBpc1BsYWluT2JqZWN0KHZhbHVlKSkgJiYKICAgICAgT2JqZWN0LmlzRXh0ZW5zaWJsZSh2YWx1ZSkgJiYKICAgICAgIXZhbHVlLl9pc1Z1ZQogICAgKSB7CiAgICAgIG9iID0gbmV3IE9ic2VydmVyKHZhbHVlKTsKICAgIH0KICAgIGlmIChhc1Jvb3REYXRhICYmIG9iKSB7CiAgICAgIG9iLnZtQ291bnQrKzsKICAgIH0KICAgIHJldHVybiBvYgogIH0KCiAgLyoqCiAgICogRGVmaW5lIGEgcmVhY3RpdmUgcHJvcGVydHkgb24gYW4gT2JqZWN0LgogICAqLwogIGZ1bmN0aW9uIGRlZmluZVJlYWN0aXZlJCQxICgKICAgIG9iaiwKICAgIGtleSwKICAgIHZhbCwKICAgIGN1c3RvbVNldHRlciwKICAgIHNoYWxsb3cKICApIHsKICAgIHZhciBkZXAgPSBuZXcgRGVwKCk7CgogICAgdmFyIHByb3BlcnR5ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSk7CiAgICBpZiAocHJvcGVydHkgJiYgcHJvcGVydHkuY29uZmlndXJhYmxlID09PSBmYWxzZSkgewogICAgICByZXR1cm4KICAgIH0KCiAgICAvLyBjYXRlciBmb3IgcHJlLWRlZmluZWQgZ2V0dGVyL3NldHRlcnMKICAgIHZhciBnZXR0ZXIgPSBwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5nZXQ7CiAgICB2YXIgc2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuc2V0OwogICAgaWYgKCghZ2V0dGVyIHx8IHNldHRlcikgJiYgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgewogICAgICB2YWwgPSBvYmpba2V5XTsKICAgIH0KCiAgICB2YXIgY2hpbGRPYiA9ICFzaGFsbG93ICYmIG9ic2VydmUodmFsKTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIGdldDogZnVuY3Rpb24gcmVhY3RpdmVHZXR0ZXIgKCkgewogICAgICAgIHZhciB2YWx1ZSA9IGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiB2YWw7CiAgICAgICAgaWYgKERlcC50YXJnZXQpIHsKICAgICAgICAgIGRlcC5kZXBlbmQoKTsKICAgICAgICAgIGlmIChjaGlsZE9iKSB7CiAgICAgICAgICAgIGNoaWxkT2IuZGVwLmRlcGVuZCgpOwogICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgICAgICAgICAgICBkZXBlbmRBcnJheSh2YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHZhbHVlCiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gcmVhY3RpdmVTZXR0ZXIgKG5ld1ZhbCkgewogICAgICAgIHZhciB2YWx1ZSA9IGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiB2YWw7CiAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tc2VsZi1jb21wYXJlICovCiAgICAgICAgaWYgKG5ld1ZhbCA9PT0gdmFsdWUgfHwgKG5ld1ZhbCAhPT0gbmV3VmFsICYmIHZhbHVlICE9PSB2YWx1ZSkpIHsKICAgICAgICAgIHJldHVybgogICAgICAgIH0KICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLXNlbGYtY29tcGFyZSAqLwogICAgICAgIGlmIChjdXN0b21TZXR0ZXIpIHsKICAgICAgICAgIGN1c3RvbVNldHRlcigpOwogICAgICAgIH0KICAgICAgICAvLyAjNzk4MTogZm9yIGFjY2Vzc29yIHByb3BlcnRpZXMgd2l0aG91dCBzZXR0ZXIKICAgICAgICBpZiAoZ2V0dGVyICYmICFzZXR0ZXIpIHsgcmV0dXJuIH0KICAgICAgICBpZiAoc2V0dGVyKSB7CiAgICAgICAgICBzZXR0ZXIuY2FsbChvYmosIG5ld1ZhbCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhbCA9IG5ld1ZhbDsKICAgICAgICB9CiAgICAgICAgY2hpbGRPYiA9ICFzaGFsbG93ICYmIG9ic2VydmUobmV3VmFsKTsKICAgICAgICBkZXAubm90aWZ5KCk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgLyoqCiAgICogU2V0IGEgcHJvcGVydHkgb24gYW4gb2JqZWN0LiBBZGRzIHRoZSBuZXcgcHJvcGVydHkgYW5kCiAgICogdHJpZ2dlcnMgY2hhbmdlIG5vdGlmaWNhdGlvbiBpZiB0aGUgcHJvcGVydHkgZG9lc24ndAogICAqIGFscmVhZHkgZXhpc3QuCiAgICovCiAgZnVuY3Rpb24gc2V0ICh0YXJnZXQsIGtleSwgdmFsKSB7CiAgICBpZiAoaXNVbmRlZih0YXJnZXQpIHx8IGlzUHJpbWl0aXZlKHRhcmdldCkKICAgICkgewogICAgICB3YXJuKCgiQ2Fubm90IHNldCByZWFjdGl2ZSBwcm9wZXJ0eSBvbiB1bmRlZmluZWQsIG51bGwsIG9yIHByaW1pdGl2ZSB2YWx1ZTogIiArICgodGFyZ2V0KSkpKTsKICAgIH0KICAgIGlmIChBcnJheS5pc0FycmF5KHRhcmdldCkgJiYgaXNWYWxpZEFycmF5SW5kZXgoa2V5KSkgewogICAgICB0YXJnZXQubGVuZ3RoID0gTWF0aC5tYXgodGFyZ2V0Lmxlbmd0aCwga2V5KTsKICAgICAgdGFyZ2V0LnNwbGljZShrZXksIDEsIHZhbCk7CiAgICAgIHJldHVybiB2YWwKICAgIH0KICAgIGlmIChrZXkgaW4gdGFyZ2V0ICYmICEoa2V5IGluIE9iamVjdC5wcm90b3R5cGUpKSB7CiAgICAgIHRhcmdldFtrZXldID0gdmFsOwogICAgICByZXR1cm4gdmFsCiAgICB9CiAgICB2YXIgb2IgPSAodGFyZ2V0KS5fX29iX187CiAgICBpZiAodGFyZ2V0Ll9pc1Z1ZSB8fCAob2IgJiYgb2Iudm1Db3VudCkpIHsKICAgICAgd2FybigKICAgICAgICAnQXZvaWQgYWRkaW5nIHJlYWN0aXZlIHByb3BlcnRpZXMgdG8gYSBWdWUgaW5zdGFuY2Ugb3IgaXRzIHJvb3QgJGRhdGEgJyArCiAgICAgICAgJ2F0IHJ1bnRpbWUgLSBkZWNsYXJlIGl0IHVwZnJvbnQgaW4gdGhlIGRhdGEgb3B0aW9uLicKICAgICAgKTsKICAgICAgcmV0dXJuIHZhbAogICAgfQogICAgaWYgKCFvYikgewogICAgICB0YXJnZXRba2V5XSA9IHZhbDsKICAgICAgcmV0dXJuIHZhbAogICAgfQogICAgZGVmaW5lUmVhY3RpdmUkJDEob2IudmFsdWUsIGtleSwgdmFsKTsKICAgIG9iLmRlcC5ub3RpZnkoKTsKICAgIHJldHVybiB2YWwKICB9CgogIC8qKgogICAqIERlbGV0ZSBhIHByb3BlcnR5IGFuZCB0cmlnZ2VyIGNoYW5nZSBpZiBuZWNlc3NhcnkuCiAgICovCiAgZnVuY3Rpb24gZGVsICh0YXJnZXQsIGtleSkgewogICAgaWYgKGlzVW5kZWYodGFyZ2V0KSB8fCBpc1ByaW1pdGl2ZSh0YXJnZXQpCiAgICApIHsKICAgICAgd2FybigoIkNhbm5vdCBkZWxldGUgcmVhY3RpdmUgcHJvcGVydHkgb24gdW5kZWZpbmVkLCBudWxsLCBvciBwcmltaXRpdmUgdmFsdWU6ICIgKyAoKHRhcmdldCkpKSk7CiAgICB9CiAgICBpZiAoQXJyYXkuaXNBcnJheSh0YXJnZXQpICYmIGlzVmFsaWRBcnJheUluZGV4KGtleSkpIHsKICAgICAgdGFyZ2V0LnNwbGljZShrZXksIDEpOwogICAgICByZXR1cm4KICAgIH0KICAgIHZhciBvYiA9ICh0YXJnZXQpLl9fb2JfXzsKICAgIGlmICh0YXJnZXQuX2lzVnVlIHx8IChvYiAmJiBvYi52bUNvdW50KSkgewogICAgICB3YXJuKAogICAgICAgICdBdm9pZCBkZWxldGluZyBwcm9wZXJ0aWVzIG9uIGEgVnVlIGluc3RhbmNlIG9yIGl0cyByb290ICRkYXRhICcgKwogICAgICAgICctIGp1c3Qgc2V0IGl0IHRvIG51bGwuJwogICAgICApOwogICAgICByZXR1cm4KICAgIH0KICAgIGlmICghaGFzT3duKHRhcmdldCwga2V5KSkgewogICAgICByZXR1cm4KICAgIH0KICAgIGRlbGV0ZSB0YXJnZXRba2V5XTsKICAgIGlmICghb2IpIHsKICAgICAgcmV0dXJuCiAgICB9CiAgICBvYi5kZXAubm90aWZ5KCk7CiAgfQoKICAvKioKICAgKiBDb2xsZWN0IGRlcGVuZGVuY2llcyBvbiBhcnJheSBlbGVtZW50cyB3aGVuIHRoZSBhcnJheSBpcyB0b3VjaGVkLCBzaW5jZQogICAqIHdlIGNhbm5vdCBpbnRlcmNlcHQgYXJyYXkgZWxlbWVudCBhY2Nlc3MgbGlrZSBwcm9wZXJ0eSBnZXR0ZXJzLgogICAqLwogIGZ1bmN0aW9uIGRlcGVuZEFycmF5ICh2YWx1ZSkgewogICAgZm9yICh2YXIgZSA9ICh2b2lkIDApLCBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICBlID0gdmFsdWVbaV07CiAgICAgIGUgJiYgZS5fX29iX18gJiYgZS5fX29iX18uZGVwLmRlcGVuZCgpOwogICAgICBpZiAoQXJyYXkuaXNBcnJheShlKSkgewogICAgICAgIGRlcGVuZEFycmF5KGUpOwogICAgICB9CiAgICB9CiAgfQoKICAvKiAgKi8KCiAgLyoqCiAgICogT3B0aW9uIG92ZXJ3cml0aW5nIHN0cmF0ZWdpZXMgYXJlIGZ1bmN0aW9ucyB0aGF0IGhhbmRsZQogICAqIGhvdyB0byBtZXJnZSBhIHBhcmVudCBvcHRpb24gdmFsdWUgYW5kIGEgY2hpbGQgb3B0aW9uCiAgICogdmFsdWUgaW50byB0aGUgZmluYWwgdmFsdWUuCiAgICovCiAgdmFyIHN0cmF0cyA9IGNvbmZpZy5vcHRpb25NZXJnZVN0cmF0ZWdpZXM7CgogIC8qKgogICAqIE9wdGlvbnMgd2l0aCByZXN0cmljdGlvbnMKICAgKi8KICB7CiAgICBzdHJhdHMuZWwgPSBzdHJhdHMucHJvcHNEYXRhID0gZnVuY3Rpb24gKHBhcmVudCwgY2hpbGQsIHZtLCBrZXkpIHsKICAgICAgaWYgKCF2bSkgewogICAgICAgIHdhcm4oCiAgICAgICAgICAib3B0aW9uIFwiIiArIGtleSArICJcIiBjYW4gb25seSBiZSB1c2VkIGR1cmluZyBpbnN0YW5jZSAiICsKICAgICAgICAgICdjcmVhdGlvbiB3aXRoIHRoZSBgbmV3YCBrZXl3b3JkLicKICAgICAgICApOwogICAgICB9CiAgICAgIHJldHVybiBkZWZhdWx0U3RyYXQocGFyZW50LCBjaGlsZCkKICAgIH07CiAgfQoKICAvKioKICAgKiBIZWxwZXIgdGhhdCByZWN1cnNpdmVseSBtZXJnZXMgdHdvIGRhdGEgb2JqZWN0cyB0b2dldGhlci4KICAgKi8KICBmdW5jdGlvbiBtZXJnZURhdGEgKHRvLCBmcm9tKSB7CiAgICBpZiAoIWZyb20pIHsgcmV0dXJuIHRvIH0KICAgIHZhciBrZXksIHRvVmFsLCBmcm9tVmFsOwoKICAgIHZhciBrZXlzID0gaGFzU3ltYm9sCiAgICAgID8gUmVmbGVjdC5vd25LZXlzKGZyb20pCiAgICAgIDogT2JqZWN0LmtleXMoZnJvbSk7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGtleSA9IGtleXNbaV07CiAgICAgIC8vIGluIGNhc2UgdGhlIG9iamVjdCBpcyBhbHJlYWR5IG9ic2VydmVkLi4uCiAgICAgIGlmIChrZXkgPT09ICdfX29iX18nKSB7IGNvbnRpbnVlIH0KICAgICAgdG9WYWwgPSB0b1trZXldOwogICAgICBmcm9tVmFsID0gZnJvbVtrZXldOwogICAgICBpZiAoIWhhc093bih0bywga2V5KSkgewogICAgICAgIHNldCh0bywga2V5LCBmcm9tVmFsKTsKICAgICAgfSBlbHNlIGlmICgKICAgICAgICB0b1ZhbCAhPT0gZnJvbVZhbCAmJgogICAgICAgIGlzUGxhaW5PYmplY3QodG9WYWwpICYmCiAgICAgICAgaXNQbGFpbk9iamVjdChmcm9tVmFsKQogICAgICApIHsKICAgICAgICBtZXJnZURhdGEodG9WYWwsIGZyb21WYWwpOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gdG8KICB9CgogIC8qKgogICAqIERhdGEKICAgKi8KICBmdW5jdGlvbiBtZXJnZURhdGFPckZuICgKICAgIHBhcmVudFZhbCwKICAgIGNoaWxkVmFsLAogICAgdm0KICApIHsKICAgIGlmICghdm0pIHsKICAgICAgLy8gaW4gYSBWdWUuZXh0ZW5kIG1lcmdlLCBib3RoIHNob3VsZCBiZSBmdW5jdGlvbnMKICAgICAgaWYgKCFjaGlsZFZhbCkgewogICAgICAgIHJldHVybiBwYXJlbnRWYWwKICAgICAgfQogICAgICBpZiAoIXBhcmVudFZhbCkgewogICAgICAgIHJldHVybiBjaGlsZFZhbAogICAgICB9CiAgICAgIC8vIHdoZW4gcGFyZW50VmFsICYgY2hpbGRWYWwgYXJlIGJvdGggcHJlc2VudCwKICAgICAgLy8gd2UgbmVlZCB0byByZXR1cm4gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlCiAgICAgIC8vIG1lcmdlZCByZXN1bHQgb2YgYm90aCBmdW5jdGlvbnMuLi4gbm8gbmVlZCB0bwogICAgICAvLyBjaGVjayBpZiBwYXJlbnRWYWwgaXMgYSBmdW5jdGlvbiBoZXJlIGJlY2F1c2UKICAgICAgLy8gaXQgaGFzIHRvIGJlIGEgZnVuY3Rpb24gdG8gcGFzcyBwcmV2aW91cyBtZXJnZXMuCiAgICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZWREYXRhRm4gKCkgewogICAgICAgIHJldHVybiBtZXJnZURhdGEoCiAgICAgICAgICB0eXBlb2YgY2hpbGRWYWwgPT09ICdmdW5jdGlvbicgPyBjaGlsZFZhbC5jYWxsKHRoaXMsIHRoaXMpIDogY2hpbGRWYWwsCiAgICAgICAgICB0eXBlb2YgcGFyZW50VmFsID09PSAnZnVuY3Rpb24nID8gcGFyZW50VmFsLmNhbGwodGhpcywgdGhpcykgOiBwYXJlbnRWYWwKICAgICAgICApCiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZWRJbnN0YW5jZURhdGFGbiAoKSB7CiAgICAgICAgLy8gaW5zdGFuY2UgbWVyZ2UKICAgICAgICB2YXIgaW5zdGFuY2VEYXRhID0gdHlwZW9mIGNoaWxkVmFsID09PSAnZnVuY3Rpb24nCiAgICAgICAgICA/IGNoaWxkVmFsLmNhbGwodm0sIHZtKQogICAgICAgICAgOiBjaGlsZFZhbDsKICAgICAgICB2YXIgZGVmYXVsdERhdGEgPSB0eXBlb2YgcGFyZW50VmFsID09PSAnZnVuY3Rpb24nCiAgICAgICAgICA/IHBhcmVudFZhbC5jYWxsKHZtLCB2bSkKICAgICAgICAgIDogcGFyZW50VmFsOwogICAgICAgIGlmIChpbnN0YW5jZURhdGEpIHsKICAgICAgICAgIHJldHVybiBtZXJnZURhdGEoaW5zdGFuY2VEYXRhLCBkZWZhdWx0RGF0YSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGRlZmF1bHREYXRhCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICBzdHJhdHMuZGF0YSA9IGZ1bmN0aW9uICgKICAgIHBhcmVudFZhbCwKICAgIGNoaWxkVmFsLAogICAgdm0KICApIHsKICAgIGlmICghdm0pIHsKICAgICAgaWYgKGNoaWxkVmFsICYmIHR5cGVvZiBjaGlsZFZhbCAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHdhcm4oCiAgICAgICAgICAnVGhlICJkYXRhIiBvcHRpb24gc2hvdWxkIGJlIGEgZnVuY3Rpb24gJyArCiAgICAgICAgICAndGhhdCByZXR1cm5zIGEgcGVyLWluc3RhbmNlIHZhbHVlIGluIGNvbXBvbmVudCAnICsKICAgICAgICAgICdkZWZpbml0aW9ucy4nLAogICAgICAgICAgdm0KICAgICAgICApOwoKICAgICAgICByZXR1cm4gcGFyZW50VmFsCiAgICAgIH0KICAgICAgcmV0dXJuIG1lcmdlRGF0YU9yRm4ocGFyZW50VmFsLCBjaGlsZFZhbCkKICAgIH0KCiAgICByZXR1cm4gbWVyZ2VEYXRhT3JGbihwYXJlbnRWYWwsIGNoaWxkVmFsLCB2bSkKICB9OwoKICAvKioKICAgKiBIb29rcyBhbmQgcHJvcHMgYXJlIG1lcmdlZCBhcyBhcnJheXMuCiAgICovCiAgZnVuY3Rpb24gbWVyZ2VIb29rICgKICAgIHBhcmVudFZhbCwKICAgIGNoaWxkVmFsCiAgKSB7CiAgICB2YXIgcmVzID0gY2hpbGRWYWwKICAgICAgPyBwYXJlbnRWYWwKICAgICAgICA/IHBhcmVudFZhbC5jb25jYXQoY2hpbGRWYWwpCiAgICAgICAgOiBBcnJheS5pc0FycmF5KGNoaWxkVmFsKQogICAgICAgICAgPyBjaGlsZFZhbAogICAgICAgICAgOiBbY2hpbGRWYWxdCiAgICAgIDogcGFyZW50VmFsOwogICAgcmV0dXJuIHJlcwogICAgICA/IGRlZHVwZUhvb2tzKHJlcykKICAgICAgOiByZXMKICB9CgogIGZ1bmN0aW9uIGRlZHVwZUhvb2tzIChob29rcykgewogICAgdmFyIHJlcyA9IFtdOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBob29rcy5sZW5ndGg7IGkrKykgewogICAgICBpZiAocmVzLmluZGV4T2YoaG9va3NbaV0pID09PSAtMSkgewogICAgICAgIHJlcy5wdXNoKGhvb2tzW2ldKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlcwogIH0KCiAgTElGRUNZQ0xFX0hPT0tTLmZvckVhY2goZnVuY3Rpb24gKGhvb2spIHsKICAgIHN0cmF0c1tob29rXSA9IG1lcmdlSG9vazsKICB9KTsKCiAgLyoqCiAgICogQXNzZXRzCiAgICoKICAgKiBXaGVuIGEgdm0gaXMgcHJlc2VudCAoaW5zdGFuY2UgY3JlYXRpb24pLCB3ZSBuZWVkIHRvIGRvCiAgICogYSB0aHJlZS13YXkgbWVyZ2UgYmV0d2VlbiBjb25zdHJ1Y3RvciBvcHRpb25zLCBpbnN0YW5jZQogICAqIG9wdGlvbnMgYW5kIHBhcmVudCBvcHRpb25zLgogICAqLwogIGZ1bmN0aW9uIG1lcmdlQXNzZXRzICgKICAgIHBhcmVudFZhbCwKICAgIGNoaWxkVmFsLAogICAgdm0sCiAgICBrZXkKICApIHsKICAgIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFZhbCB8fCBudWxsKTsKICAgIGlmIChjaGlsZFZhbCkgewogICAgICBhc3NlcnRPYmplY3RUeXBlKGtleSwgY2hpbGRWYWwsIHZtKTsKICAgICAgcmV0dXJuIGV4dGVuZChyZXMsIGNoaWxkVmFsKQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHJlcwogICAgfQogIH0KCiAgQVNTRVRfVFlQRVMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkgewogICAgc3RyYXRzW3R5cGUgKyAncyddID0gbWVyZ2VBc3NldHM7CiAgfSk7CgogIC8qKgogICAqIFdhdGNoZXJzLgogICAqCiAgICogV2F0Y2hlcnMgaGFzaGVzIHNob3VsZCBub3Qgb3ZlcndyaXRlIG9uZQogICAqIGFub3RoZXIsIHNvIHdlIG1lcmdlIHRoZW0gYXMgYXJyYXlzLgogICAqLwogIHN0cmF0cy53YXRjaCA9IGZ1bmN0aW9uICgKICAgIHBhcmVudFZhbCwKICAgIGNoaWxkVmFsLAogICAgdm0sCiAgICBrZXkKICApIHsKICAgIC8vIHdvcmsgYXJvdW5kIEZpcmVmb3gncyBPYmplY3QucHJvdG90eXBlLndhdGNoLi4uCiAgICBpZiAocGFyZW50VmFsID09PSBuYXRpdmVXYXRjaCkgeyBwYXJlbnRWYWwgPSB1bmRlZmluZWQ7IH0KICAgIGlmIChjaGlsZFZhbCA9PT0gbmF0aXZlV2F0Y2gpIHsgY2hpbGRWYWwgPSB1bmRlZmluZWQ7IH0KICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgaWYgKCFjaGlsZFZhbCkgeyByZXR1cm4gT2JqZWN0LmNyZWF0ZShwYXJlbnRWYWwgfHwgbnVsbCkgfQogICAgewogICAgICBhc3NlcnRPYmplY3RUeXBlKGtleSwgY2hpbGRWYWwsIHZtKTsKICAgIH0KICAgIGlmICghcGFyZW50VmFsKSB7IHJldHVybiBjaGlsZFZhbCB9CiAgICB2YXIgcmV0ID0ge307CiAgICBleHRlbmQocmV0LCBwYXJlbnRWYWwpOwogICAgZm9yICh2YXIga2V5JDEgaW4gY2hpbGRWYWwpIHsKICAgICAgdmFyIHBhcmVudCA9IHJldFtrZXkkMV07CiAgICAgIHZhciBjaGlsZCA9IGNoaWxkVmFsW2tleSQxXTsKICAgICAgaWYgKHBhcmVudCAmJiAhQXJyYXkuaXNBcnJheShwYXJlbnQpKSB7CiAgICAgICAgcGFyZW50ID0gW3BhcmVudF07CiAgICAgIH0KICAgICAgcmV0W2tleSQxXSA9IHBhcmVudAogICAgICAgID8gcGFyZW50LmNvbmNhdChjaGlsZCkKICAgICAgICA6IEFycmF5LmlzQXJyYXkoY2hpbGQpID8gY2hpbGQgOiBbY2hpbGRdOwogICAgfQogICAgcmV0dXJuIHJldAogIH07CgogIC8qKgogICAqIE90aGVyIG9iamVjdCBoYXNoZXMuCiAgICovCiAgc3RyYXRzLnByb3BzID0KICBzdHJhdHMubWV0aG9kcyA9CiAgc3RyYXRzLmluamVjdCA9CiAgc3RyYXRzLmNvbXB1dGVkID0gZnVuY3Rpb24gKAogICAgcGFyZW50VmFsLAogICAgY2hpbGRWYWwsCiAgICB2bSwKICAgIGtleQogICkgewogICAgaWYgKGNoaWxkVmFsICYmICJkZXZlbG9wbWVudCIgIT09ICdwcm9kdWN0aW9uJykgewogICAgICBhc3NlcnRPYmplY3RUeXBlKGtleSwgY2hpbGRWYWwsIHZtKTsKICAgIH0KICAgIGlmICghcGFyZW50VmFsKSB7IHJldHVybiBjaGlsZFZhbCB9CiAgICB2YXIgcmV0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgIGV4dGVuZChyZXQsIHBhcmVudFZhbCk7CiAgICBpZiAoY2hpbGRWYWwpIHsgZXh0ZW5kKHJldCwgY2hpbGRWYWwpOyB9CiAgICByZXR1cm4gcmV0CiAgfTsKICBzdHJhdHMucHJvdmlkZSA9IG1lcmdlRGF0YU9yRm47CgogIC8qKgogICAqIERlZmF1bHQgc3RyYXRlZ3kuCiAgICovCiAgdmFyIGRlZmF1bHRTdHJhdCA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7CiAgICByZXR1cm4gY2hpbGRWYWwgPT09IHVuZGVmaW5lZAogICAgICA/IHBhcmVudFZhbAogICAgICA6IGNoaWxkVmFsCiAgfTsKCiAgLyoqCiAgICogVmFsaWRhdGUgY29tcG9uZW50IG5hbWVzCiAgICovCiAgZnVuY3Rpb24gY2hlY2tDb21wb25lbnRzIChvcHRpb25zKSB7CiAgICBmb3IgKHZhciBrZXkgaW4gb3B0aW9ucy5jb21wb25lbnRzKSB7CiAgICAgIHZhbGlkYXRlQ29tcG9uZW50TmFtZShrZXkpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gdmFsaWRhdGVDb21wb25lbnROYW1lIChuYW1lKSB7CiAgICBpZiAoIW5ldyBSZWdFeHAoKCJeW2EtekEtWl1bXFwtXFwuMC05XyIgKyAodW5pY29kZVJlZ0V4cC5zb3VyY2UpICsgIl0qJCIpKS50ZXN0KG5hbWUpKSB7CiAgICAgIHdhcm4oCiAgICAgICAgJ0ludmFsaWQgY29tcG9uZW50IG5hbWU6ICInICsgbmFtZSArICciLiBDb21wb25lbnQgbmFtZXMgJyArCiAgICAgICAgJ3Nob3VsZCBjb25mb3JtIHRvIHZhbGlkIGN1c3RvbSBlbGVtZW50IG5hbWUgaW4gaHRtbDUgc3BlY2lmaWNhdGlvbi4nCiAgICAgICk7CiAgICB9CiAgICBpZiAoaXNCdWlsdEluVGFnKG5hbWUpIHx8IGNvbmZpZy5pc1Jlc2VydmVkVGFnKG5hbWUpKSB7CiAgICAgIHdhcm4oCiAgICAgICAgJ0RvIG5vdCB1c2UgYnVpbHQtaW4gb3IgcmVzZXJ2ZWQgSFRNTCBlbGVtZW50cyBhcyBjb21wb25lbnQgJyArCiAgICAgICAgJ2lkOiAnICsgbmFtZQogICAgICApOwogICAgfQogIH0KCiAgLyoqCiAgICogRW5zdXJlIGFsbCBwcm9wcyBvcHRpb24gc3ludGF4IGFyZSBub3JtYWxpemVkIGludG8gdGhlCiAgICogT2JqZWN0LWJhc2VkIGZvcm1hdC4KICAgKi8KICBmdW5jdGlvbiBub3JtYWxpemVQcm9wcyAob3B0aW9ucywgdm0pIHsKICAgIHZhciBwcm9wcyA9IG9wdGlvbnMucHJvcHM7CiAgICBpZiAoIXByb3BzKSB7IHJldHVybiB9CiAgICB2YXIgcmVzID0ge307CiAgICB2YXIgaSwgdmFsLCBuYW1lOwogICAgaWYgKEFycmF5LmlzQXJyYXkocHJvcHMpKSB7CiAgICAgIGkgPSBwcm9wcy5sZW5ndGg7CiAgICAgIHdoaWxlIChpLS0pIHsKICAgICAgICB2YWwgPSBwcm9wc1tpXTsKICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIG5hbWUgPSBjYW1lbGl6ZSh2YWwpOwogICAgICAgICAgcmVzW25hbWVdID0geyB0eXBlOiBudWxsIH07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHdhcm4oJ3Byb3BzIG11c3QgYmUgc3RyaW5ncyB3aGVuIHVzaW5nIGFycmF5IHN5bnRheC4nKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdChwcm9wcykpIHsKICAgICAgZm9yICh2YXIga2V5IGluIHByb3BzKSB7CiAgICAgICAgdmFsID0gcHJvcHNba2V5XTsKICAgICAgICBuYW1lID0gY2FtZWxpemUoa2V5KTsKICAgICAgICByZXNbbmFtZV0gPSBpc1BsYWluT2JqZWN0KHZhbCkKICAgICAgICAgID8gdmFsCiAgICAgICAgICA6IHsgdHlwZTogdmFsIH07CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHdhcm4oCiAgICAgICAgIkludmFsaWQgdmFsdWUgZm9yIG9wdGlvbiBcInByb3BzXCI6IGV4cGVjdGVkIGFuIEFycmF5IG9yIGFuIE9iamVjdCwgIiArCiAgICAgICAgImJ1dCBnb3QgIiArICh0b1Jhd1R5cGUocHJvcHMpKSArICIuIiwKICAgICAgICB2bQogICAgICApOwogICAgfQogICAgb3B0aW9ucy5wcm9wcyA9IHJlczsKICB9CgogIC8qKgogICAqIE5vcm1hbGl6ZSBhbGwgaW5qZWN0aW9ucyBpbnRvIE9iamVjdC1iYXNlZCBmb3JtYXQKICAgKi8KICBmdW5jdGlvbiBub3JtYWxpemVJbmplY3QgKG9wdGlvbnMsIHZtKSB7CiAgICB2YXIgaW5qZWN0ID0gb3B0aW9ucy5pbmplY3Q7CiAgICBpZiAoIWluamVjdCkgeyByZXR1cm4gfQogICAgdmFyIG5vcm1hbGl6ZWQgPSBvcHRpb25zLmluamVjdCA9IHt9OwogICAgaWYgKEFycmF5LmlzQXJyYXkoaW5qZWN0KSkgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluamVjdC5sZW5ndGg7IGkrKykgewogICAgICAgIG5vcm1hbGl6ZWRbaW5qZWN0W2ldXSA9IHsgZnJvbTogaW5qZWN0W2ldIH07CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdChpbmplY3QpKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBpbmplY3QpIHsKICAgICAgICB2YXIgdmFsID0gaW5qZWN0W2tleV07CiAgICAgICAgbm9ybWFsaXplZFtrZXldID0gaXNQbGFpbk9iamVjdCh2YWwpCiAgICAgICAgICA/IGV4dGVuZCh7IGZyb206IGtleSB9LCB2YWwpCiAgICAgICAgICA6IHsgZnJvbTogdmFsIH07CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHdhcm4oCiAgICAgICAgIkludmFsaWQgdmFsdWUgZm9yIG9wdGlvbiBcImluamVjdFwiOiBleHBlY3RlZCBhbiBBcnJheSBvciBhbiBPYmplY3QsICIgKwogICAgICAgICJidXQgZ290ICIgKyAodG9SYXdUeXBlKGluamVjdCkpICsgIi4iLAogICAgICAgIHZtCiAgICAgICk7CiAgICB9CiAgfQoKICAvKioKICAgKiBOb3JtYWxpemUgcmF3IGZ1bmN0aW9uIGRpcmVjdGl2ZXMgaW50byBvYmplY3QgZm9ybWF0LgogICAqLwogIGZ1bmN0aW9uIG5vcm1hbGl6ZURpcmVjdGl2ZXMgKG9wdGlvbnMpIHsKICAgIHZhciBkaXJzID0gb3B0aW9ucy5kaXJlY3RpdmVzOwogICAgaWYgKGRpcnMpIHsKICAgICAgZm9yICh2YXIga2V5IGluIGRpcnMpIHsKICAgICAgICB2YXIgZGVmJCQxID0gZGlyc1trZXldOwogICAgICAgIGlmICh0eXBlb2YgZGVmJCQxID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICBkaXJzW2tleV0gPSB7IGJpbmQ6IGRlZiQkMSwgdXBkYXRlOiBkZWYkJDEgfTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIGFzc2VydE9iamVjdFR5cGUgKG5hbWUsIHZhbHVlLCB2bSkgewogICAgaWYgKCFpc1BsYWluT2JqZWN0KHZhbHVlKSkgewogICAgICB3YXJuKAogICAgICAgICJJbnZhbGlkIHZhbHVlIGZvciBvcHRpb24gXCIiICsgbmFtZSArICJcIjogZXhwZWN0ZWQgYW4gT2JqZWN0LCAiICsKICAgICAgICAiYnV0IGdvdCAiICsgKHRvUmF3VHlwZSh2YWx1ZSkpICsgIi4iLAogICAgICAgIHZtCiAgICAgICk7CiAgICB9CiAgfQoKICAvKioKICAgKiBNZXJnZSB0d28gb3B0aW9uIG9iamVjdHMgaW50byBhIG5ldyBvbmUuCiAgICogQ29yZSB1dGlsaXR5IHVzZWQgaW4gYm90aCBpbnN0YW50aWF0aW9uIGFuZCBpbmhlcml0YW5jZS4KICAgKi8KICBmdW5jdGlvbiBtZXJnZU9wdGlvbnMgKAogICAgcGFyZW50LAogICAgY2hpbGQsCiAgICB2bQogICkgewogICAgewogICAgICBjaGVja0NvbXBvbmVudHMoY2hpbGQpOwogICAgfQoKICAgIGlmICh0eXBlb2YgY2hpbGQgPT09ICdmdW5jdGlvbicpIHsKICAgICAgY2hpbGQgPSBjaGlsZC5vcHRpb25zOwogICAgfQoKICAgIG5vcm1hbGl6ZVByb3BzKGNoaWxkLCB2bSk7CiAgICBub3JtYWxpemVJbmplY3QoY2hpbGQsIHZtKTsKICAgIG5vcm1hbGl6ZURpcmVjdGl2ZXMoY2hpbGQpOwoKICAgIC8vIEFwcGx5IGV4dGVuZHMgYW5kIG1peGlucyBvbiB0aGUgY2hpbGQgb3B0aW9ucywKICAgIC8vIGJ1dCBvbmx5IGlmIGl0IGlzIGEgcmF3IG9wdGlvbnMgb2JqZWN0IHRoYXQgaXNuJ3QKICAgIC8vIHRoZSByZXN1bHQgb2YgYW5vdGhlciBtZXJnZU9wdGlvbnMgY2FsbC4KICAgIC8vIE9ubHkgbWVyZ2VkIG9wdGlvbnMgaGFzIHRoZSBfYmFzZSBwcm9wZXJ0eS4KICAgIGlmICghY2hpbGQuX2Jhc2UpIHsKICAgICAgaWYgKGNoaWxkLmV4dGVuZHMpIHsKICAgICAgICBwYXJlbnQgPSBtZXJnZU9wdGlvbnMocGFyZW50LCBjaGlsZC5leHRlbmRzLCB2bSk7CiAgICAgIH0KICAgICAgaWYgKGNoaWxkLm1peGlucykgewogICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGQubWl4aW5zLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgcGFyZW50ID0gbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGQubWl4aW5zW2ldLCB2bSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgdmFyIG9wdGlvbnMgPSB7fTsKICAgIHZhciBrZXk7CiAgICBmb3IgKGtleSBpbiBwYXJlbnQpIHsKICAgICAgbWVyZ2VGaWVsZChrZXkpOwogICAgfQogICAgZm9yIChrZXkgaW4gY2hpbGQpIHsKICAgICAgaWYgKCFoYXNPd24ocGFyZW50LCBrZXkpKSB7CiAgICAgICAgbWVyZ2VGaWVsZChrZXkpOwogICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBtZXJnZUZpZWxkIChrZXkpIHsKICAgICAgdmFyIHN0cmF0ID0gc3RyYXRzW2tleV0gfHwgZGVmYXVsdFN0cmF0OwogICAgICBvcHRpb25zW2tleV0gPSBzdHJhdChwYXJlbnRba2V5XSwgY2hpbGRba2V5XSwgdm0sIGtleSk7CiAgICB9CiAgICByZXR1cm4gb3B0aW9ucwogIH0KCiAgLyoqCiAgICogUmVzb2x2ZSBhbiBhc3NldC4KICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgYmVjYXVzZSBjaGlsZCBpbnN0YW5jZXMgbmVlZCBhY2Nlc3MKICAgKiB0byBhc3NldHMgZGVmaW5lZCBpbiBpdHMgYW5jZXN0b3IgY2hhaW4uCiAgICovCiAgZnVuY3Rpb24gcmVzb2x2ZUFzc2V0ICgKICAgIG9wdGlvbnMsCiAgICB0eXBlLAogICAgaWQsCiAgICB3YXJuTWlzc2luZwogICkgewogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAodHlwZW9mIGlkICE9PSAnc3RyaW5nJykgewogICAgICByZXR1cm4KICAgIH0KICAgIHZhciBhc3NldHMgPSBvcHRpb25zW3R5cGVdOwogICAgLy8gY2hlY2sgbG9jYWwgcmVnaXN0cmF0aW9uIHZhcmlhdGlvbnMgZmlyc3QKICAgIGlmIChoYXNPd24oYXNzZXRzLCBpZCkpIHsgcmV0dXJuIGFzc2V0c1tpZF0gfQogICAgdmFyIGNhbWVsaXplZElkID0gY2FtZWxpemUoaWQpOwogICAgaWYgKGhhc093bihhc3NldHMsIGNhbWVsaXplZElkKSkgeyByZXR1cm4gYXNzZXRzW2NhbWVsaXplZElkXSB9CiAgICB2YXIgUGFzY2FsQ2FzZUlkID0gY2FwaXRhbGl6ZShjYW1lbGl6ZWRJZCk7CiAgICBpZiAoaGFzT3duKGFzc2V0cywgUGFzY2FsQ2FzZUlkKSkgeyByZXR1cm4gYXNzZXRzW1Bhc2NhbENhc2VJZF0gfQogICAgLy8gZmFsbGJhY2sgdG8gcHJvdG90eXBlIGNoYWluCiAgICB2YXIgcmVzID0gYXNzZXRzW2lkXSB8fCBhc3NldHNbY2FtZWxpemVkSWRdIHx8IGFzc2V0c1tQYXNjYWxDYXNlSWRdOwogICAgaWYgKHdhcm5NaXNzaW5nICYmICFyZXMpIHsKICAgICAgd2FybigKICAgICAgICAnRmFpbGVkIHRvIHJlc29sdmUgJyArIHR5cGUuc2xpY2UoMCwgLTEpICsgJzogJyArIGlkLAogICAgICAgIG9wdGlvbnMKICAgICAgKTsKICAgIH0KICAgIHJldHVybiByZXMKICB9CgogIC8qICAqLwoKCgogIGZ1bmN0aW9uIHZhbGlkYXRlUHJvcCAoCiAgICBrZXksCiAgICBwcm9wT3B0aW9ucywKICAgIHByb3BzRGF0YSwKICAgIHZtCiAgKSB7CiAgICB2YXIgcHJvcCA9IHByb3BPcHRpb25zW2tleV07CiAgICB2YXIgYWJzZW50ID0gIWhhc093bihwcm9wc0RhdGEsIGtleSk7CiAgICB2YXIgdmFsdWUgPSBwcm9wc0RhdGFba2V5XTsKICAgIC8vIGJvb2xlYW4gY2FzdGluZwogICAgdmFyIGJvb2xlYW5JbmRleCA9IGdldFR5cGVJbmRleChCb29sZWFuLCBwcm9wLnR5cGUpOwogICAgaWYgKGJvb2xlYW5JbmRleCA+IC0xKSB7CiAgICAgIGlmIChhYnNlbnQgJiYgIWhhc093bihwcm9wLCAnZGVmYXVsdCcpKSB7CiAgICAgICAgdmFsdWUgPSBmYWxzZTsKICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJycgfHwgdmFsdWUgPT09IGh5cGhlbmF0ZShrZXkpKSB7CiAgICAgICAgLy8gb25seSBjYXN0IGVtcHR5IHN0cmluZyAvIHNhbWUgbmFtZSB0byBib29sZWFuIGlmCiAgICAgICAgLy8gYm9vbGVhbiBoYXMgaGlnaGVyIHByaW9yaXR5CiAgICAgICAgdmFyIHN0cmluZ0luZGV4ID0gZ2V0VHlwZUluZGV4KFN0cmluZywgcHJvcC50eXBlKTsKICAgICAgICBpZiAoc3RyaW5nSW5kZXggPCAwIHx8IGJvb2xlYW5JbmRleCA8IHN0cmluZ0luZGV4KSB7CiAgICAgICAgICB2YWx1ZSA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvLyBjaGVjayBkZWZhdWx0IHZhbHVlCiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgewogICAgICB2YWx1ZSA9IGdldFByb3BEZWZhdWx0VmFsdWUodm0sIHByb3AsIGtleSk7CiAgICAgIC8vIHNpbmNlIHRoZSBkZWZhdWx0IHZhbHVlIGlzIGEgZnJlc2ggY29weSwKICAgICAgLy8gbWFrZSBzdXJlIHRvIG9ic2VydmUgaXQuCiAgICAgIHZhciBwcmV2U2hvdWxkT2JzZXJ2ZSA9IHNob3VsZE9ic2VydmU7CiAgICAgIHRvZ2dsZU9ic2VydmluZyh0cnVlKTsKICAgICAgb2JzZXJ2ZSh2YWx1ZSk7CiAgICAgIHRvZ2dsZU9ic2VydmluZyhwcmV2U2hvdWxkT2JzZXJ2ZSk7CiAgICB9CiAgICB7CiAgICAgIGFzc2VydFByb3AocHJvcCwga2V5LCB2YWx1ZSwgdm0sIGFic2VudCk7CiAgICB9CiAgICByZXR1cm4gdmFsdWUKICB9CgogIC8qKgogICAqIEdldCB0aGUgZGVmYXVsdCB2YWx1ZSBvZiBhIHByb3AuCiAgICovCiAgZnVuY3Rpb24gZ2V0UHJvcERlZmF1bHRWYWx1ZSAodm0sIHByb3AsIGtleSkgewogICAgLy8gbm8gZGVmYXVsdCwgcmV0dXJuIHVuZGVmaW5lZAogICAgaWYgKCFoYXNPd24ocHJvcCwgJ2RlZmF1bHQnKSkgewogICAgICByZXR1cm4gdW5kZWZpbmVkCiAgICB9CiAgICB2YXIgZGVmID0gcHJvcC5kZWZhdWx0OwogICAgLy8gd2FybiBhZ2FpbnN0IG5vbi1mYWN0b3J5IGRlZmF1bHRzIGZvciBPYmplY3QgJiBBcnJheQogICAgaWYgKGlzT2JqZWN0KGRlZikpIHsKICAgICAgd2FybigKICAgICAgICAnSW52YWxpZCBkZWZhdWx0IHZhbHVlIGZvciBwcm9wICInICsga2V5ICsgJyI6ICcgKwogICAgICAgICdQcm9wcyB3aXRoIHR5cGUgT2JqZWN0L0FycmF5IG11c3QgdXNlIGEgZmFjdG9yeSBmdW5jdGlvbiAnICsKICAgICAgICAndG8gcmV0dXJuIHRoZSBkZWZhdWx0IHZhbHVlLicsCiAgICAgICAgdm0KICAgICAgKTsKICAgIH0KICAgIC8vIHRoZSByYXcgcHJvcCB2YWx1ZSB3YXMgYWxzbyB1bmRlZmluZWQgZnJvbSBwcmV2aW91cyByZW5kZXIsCiAgICAvLyByZXR1cm4gcHJldmlvdXMgZGVmYXVsdCB2YWx1ZSB0byBhdm9pZCB1bm5lY2Vzc2FyeSB3YXRjaGVyIHRyaWdnZXIKICAgIGlmICh2bSAmJiB2bS4kb3B0aW9ucy5wcm9wc0RhdGEgJiYKICAgICAgdm0uJG9wdGlvbnMucHJvcHNEYXRhW2tleV0gPT09IHVuZGVmaW5lZCAmJgogICAgICB2bS5fcHJvcHNba2V5XSAhPT0gdW5kZWZpbmVkCiAgICApIHsKICAgICAgcmV0dXJuIHZtLl9wcm9wc1trZXldCiAgICB9CiAgICAvLyBjYWxsIGZhY3RvcnkgZnVuY3Rpb24gZm9yIG5vbi1GdW5jdGlvbiB0eXBlcwogICAgLy8gYSB2YWx1ZSBpcyBGdW5jdGlvbiBpZiBpdHMgcHJvdG90eXBlIGlzIGZ1bmN0aW9uIGV2ZW4gYWNyb3NzIGRpZmZlcmVudCBleGVjdXRpb24gY29udGV4dAogICAgcmV0dXJuIHR5cGVvZiBkZWYgPT09ICdmdW5jdGlvbicgJiYgZ2V0VHlwZShwcm9wLnR5cGUpICE9PSAnRnVuY3Rpb24nCiAgICAgID8gZGVmLmNhbGwodm0pCiAgICAgIDogZGVmCiAgfQoKICAvKioKICAgKiBBc3NlcnQgd2hldGhlciBhIHByb3AgaXMgdmFsaWQuCiAgICovCiAgZnVuY3Rpb24gYXNzZXJ0UHJvcCAoCiAgICBwcm9wLAogICAgbmFtZSwKICAgIHZhbHVlLAogICAgdm0sCiAgICBhYnNlbnQKICApIHsKICAgIGlmIChwcm9wLnJlcXVpcmVkICYmIGFic2VudCkgewogICAgICB3YXJuKAogICAgICAgICdNaXNzaW5nIHJlcXVpcmVkIHByb3A6ICInICsgbmFtZSArICciJywKICAgICAgICB2bQogICAgICApOwogICAgICByZXR1cm4KICAgIH0KICAgIGlmICh2YWx1ZSA9PSBudWxsICYmICFwcm9wLnJlcXVpcmVkKSB7CiAgICAgIHJldHVybgogICAgfQogICAgdmFyIHR5cGUgPSBwcm9wLnR5cGU7CiAgICB2YXIgdmFsaWQgPSAhdHlwZSB8fCB0eXBlID09PSB0cnVlOwogICAgdmFyIGV4cGVjdGVkVHlwZXMgPSBbXTsKICAgIGlmICh0eXBlKSB7CiAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0eXBlKSkgewogICAgICAgIHR5cGUgPSBbdHlwZV07CiAgICAgIH0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0eXBlLmxlbmd0aCAmJiAhdmFsaWQ7IGkrKykgewogICAgICAgIHZhciBhc3NlcnRlZFR5cGUgPSBhc3NlcnRUeXBlKHZhbHVlLCB0eXBlW2ldKTsKICAgICAgICBleHBlY3RlZFR5cGVzLnB1c2goYXNzZXJ0ZWRUeXBlLmV4cGVjdGVkVHlwZSB8fCAnJyk7CiAgICAgICAgdmFsaWQgPSBhc3NlcnRlZFR5cGUudmFsaWQ7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoIXZhbGlkKSB7CiAgICAgIHdhcm4oCiAgICAgICAgZ2V0SW52YWxpZFR5cGVNZXNzYWdlKG5hbWUsIHZhbHVlLCBleHBlY3RlZFR5cGVzKSwKICAgICAgICB2bQogICAgICApOwogICAgICByZXR1cm4KICAgIH0KICAgIHZhciB2YWxpZGF0b3IgPSBwcm9wLnZhbGlkYXRvcjsKICAgIGlmICh2YWxpZGF0b3IpIHsKICAgICAgaWYgKCF2YWxpZGF0b3IodmFsdWUpKSB7CiAgICAgICAgd2FybigKICAgICAgICAgICdJbnZhbGlkIHByb3A6IGN1c3RvbSB2YWxpZGF0b3IgY2hlY2sgZmFpbGVkIGZvciBwcm9wICInICsgbmFtZSArICciLicsCiAgICAgICAgICB2bQogICAgICAgICk7CiAgICAgIH0KICAgIH0KICB9CgogIHZhciBzaW1wbGVDaGVja1JFID0gL14oU3RyaW5nfE51bWJlcnxCb29sZWFufEZ1bmN0aW9ufFN5bWJvbCkkLzsKCiAgZnVuY3Rpb24gYXNzZXJ0VHlwZSAodmFsdWUsIHR5cGUpIHsKICAgIHZhciB2YWxpZDsKICAgIHZhciBleHBlY3RlZFR5cGUgPSBnZXRUeXBlKHR5cGUpOwogICAgaWYgKHNpbXBsZUNoZWNrUkUudGVzdChleHBlY3RlZFR5cGUpKSB7CiAgICAgIHZhciB0ID0gdHlwZW9mIHZhbHVlOwogICAgICB2YWxpZCA9IHQgPT09IGV4cGVjdGVkVHlwZS50b0xvd2VyQ2FzZSgpOwogICAgICAvLyBmb3IgcHJpbWl0aXZlIHdyYXBwZXIgb2JqZWN0cwogICAgICBpZiAoIXZhbGlkICYmIHQgPT09ICdvYmplY3QnKSB7CiAgICAgICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGU7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoZXhwZWN0ZWRUeXBlID09PSAnT2JqZWN0JykgewogICAgICB2YWxpZCA9IGlzUGxhaW5PYmplY3QodmFsdWUpOwogICAgfSBlbHNlIGlmIChleHBlY3RlZFR5cGUgPT09ICdBcnJheScpIHsKICAgICAgdmFsaWQgPSBBcnJheS5pc0FycmF5KHZhbHVlKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhbGlkID0gdmFsdWUgaW5zdGFuY2VvZiB0eXBlOwogICAgfQogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IHZhbGlkLAogICAgICBleHBlY3RlZFR5cGU6IGV4cGVjdGVkVHlwZQogICAgfQogIH0KCiAgLyoqCiAgICogVXNlIGZ1bmN0aW9uIHN0cmluZyBuYW1lIHRvIGNoZWNrIGJ1aWx0LWluIHR5cGVzLAogICAqIGJlY2F1c2UgYSBzaW1wbGUgZXF1YWxpdHkgY2hlY2sgd2lsbCBmYWlsIHdoZW4gcnVubmluZwogICAqIGFjcm9zcyBkaWZmZXJlbnQgdm1zIC8gaWZyYW1lcy4KICAgKi8KICBmdW5jdGlvbiBnZXRUeXBlIChmbikgewogICAgdmFyIG1hdGNoID0gZm4gJiYgZm4udG9TdHJpbmcoKS5tYXRjaCgvXlxzKmZ1bmN0aW9uIChcdyspLyk7CiAgICByZXR1cm4gbWF0Y2ggPyBtYXRjaFsxXSA6ICcnCiAgfQoKICBmdW5jdGlvbiBpc1NhbWVUeXBlIChhLCBiKSB7CiAgICByZXR1cm4gZ2V0VHlwZShhKSA9PT0gZ2V0VHlwZShiKQogIH0KCiAgZnVuY3Rpb24gZ2V0VHlwZUluZGV4ICh0eXBlLCBleHBlY3RlZFR5cGVzKSB7CiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZXhwZWN0ZWRUeXBlcykpIHsKICAgICAgcmV0dXJuIGlzU2FtZVR5cGUoZXhwZWN0ZWRUeXBlcywgdHlwZSkgPyAwIDogLTEKICAgIH0KICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBleHBlY3RlZFR5cGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgIGlmIChpc1NhbWVUeXBlKGV4cGVjdGVkVHlwZXNbaV0sIHR5cGUpKSB7CiAgICAgICAgcmV0dXJuIGkKICAgICAgfQogICAgfQogICAgcmV0dXJuIC0xCiAgfQoKICBmdW5jdGlvbiBnZXRJbnZhbGlkVHlwZU1lc3NhZ2UgKG5hbWUsIHZhbHVlLCBleHBlY3RlZFR5cGVzKSB7CiAgICB2YXIgbWVzc2FnZSA9ICJJbnZhbGlkIHByb3A6IHR5cGUgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiIiArIG5hbWUgKyAiXCIuIiArCiAgICAgICIgRXhwZWN0ZWQgIiArIChleHBlY3RlZFR5cGVzLm1hcChjYXBpdGFsaXplKS5qb2luKCcsICcpKTsKICAgIHZhciBleHBlY3RlZFR5cGUgPSBleHBlY3RlZFR5cGVzWzBdOwogICAgdmFyIHJlY2VpdmVkVHlwZSA9IHRvUmF3VHlwZSh2YWx1ZSk7CiAgICB2YXIgZXhwZWN0ZWRWYWx1ZSA9IHN0eWxlVmFsdWUodmFsdWUsIGV4cGVjdGVkVHlwZSk7CiAgICB2YXIgcmVjZWl2ZWRWYWx1ZSA9IHN0eWxlVmFsdWUodmFsdWUsIHJlY2VpdmVkVHlwZSk7CiAgICAvLyBjaGVjayBpZiB3ZSBuZWVkIHRvIHNwZWNpZnkgZXhwZWN0ZWQgdmFsdWUKICAgIGlmIChleHBlY3RlZFR5cGVzLmxlbmd0aCA9PT0gMSAmJgogICAgICAgIGlzRXhwbGljYWJsZShleHBlY3RlZFR5cGUpICYmCiAgICAgICAgIWlzQm9vbGVhbihleHBlY3RlZFR5cGUsIHJlY2VpdmVkVHlwZSkpIHsKICAgICAgbWVzc2FnZSArPSAiIHdpdGggdmFsdWUgIiArIGV4cGVjdGVkVmFsdWU7CiAgICB9CiAgICBtZXNzYWdlICs9ICIsIGdvdCAiICsgcmVjZWl2ZWRUeXBlICsgIiAiOwogICAgLy8gY2hlY2sgaWYgd2UgbmVlZCB0byBzcGVjaWZ5IHJlY2VpdmVkIHZhbHVlCiAgICBpZiAoaXNFeHBsaWNhYmxlKHJlY2VpdmVkVHlwZSkpIHsKICAgICAgbWVzc2FnZSArPSAid2l0aCB2YWx1ZSAiICsgcmVjZWl2ZWRWYWx1ZSArICIuIjsKICAgIH0KICAgIHJldHVybiBtZXNzYWdlCiAgfQoKICBmdW5jdGlvbiBzdHlsZVZhbHVlICh2YWx1ZSwgdHlwZSkgewogICAgaWYgKHR5cGUgPT09ICdTdHJpbmcnKSB7CiAgICAgIHJldHVybiAoIlwiIiArIHZhbHVlICsgIlwiIikKICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ051bWJlcicpIHsKICAgICAgcmV0dXJuICgiIiArIChOdW1iZXIodmFsdWUpKSkKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiAoIiIgKyB2YWx1ZSkKICAgIH0KICB9CgogIGZ1bmN0aW9uIGlzRXhwbGljYWJsZSAodmFsdWUpIHsKICAgIHZhciBleHBsaWNpdFR5cGVzID0gWydzdHJpbmcnLCAnbnVtYmVyJywgJ2Jvb2xlYW4nXTsKICAgIHJldHVybiBleHBsaWNpdFR5cGVzLnNvbWUoZnVuY3Rpb24gKGVsZW0pIHsgcmV0dXJuIHZhbHVlLnRvTG93ZXJDYXNlKCkgPT09IGVsZW07IH0pCiAgfQoKICBmdW5jdGlvbiBpc0Jvb2xlYW4gKCkgewogICAgdmFyIGFyZ3MgPSBbXSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsKICAgIHdoaWxlICggbGVuLS0gKSBhcmdzWyBsZW4gXSA9IGFyZ3VtZW50c1sgbGVuIF07CgogICAgcmV0dXJuIGFyZ3Muc29tZShmdW5jdGlvbiAoZWxlbSkgeyByZXR1cm4gZWxlbS50b0xvd2VyQ2FzZSgpID09PSAnYm9vbGVhbic7IH0pCiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gaGFuZGxlRXJyb3IgKGVyciwgdm0sIGluZm8pIHsKICAgIC8vIERlYWN0aXZhdGUgZGVwcyB0cmFja2luZyB3aGlsZSBwcm9jZXNzaW5nIGVycm9yIGhhbmRsZXIgdG8gYXZvaWQgcG9zc2libGUgaW5maW5pdGUgcmVuZGVyaW5nLgogICAgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVleC9pc3N1ZXMvMTUwNQogICAgcHVzaFRhcmdldCgpOwogICAgdHJ5IHsKICAgICAgaWYgKHZtKSB7CiAgICAgICAgdmFyIGN1ciA9IHZtOwogICAgICAgIHdoaWxlICgoY3VyID0gY3VyLiRwYXJlbnQpKSB7CiAgICAgICAgICB2YXIgaG9va3MgPSBjdXIuJG9wdGlvbnMuZXJyb3JDYXB0dXJlZDsKICAgICAgICAgIGlmIChob29rcykgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhvb2tzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHZhciBjYXB0dXJlID0gaG9va3NbaV0uY2FsbChjdXIsIGVyciwgdm0sIGluZm8pID09PSBmYWxzZTsKICAgICAgICAgICAgICAgIGlmIChjYXB0dXJlKSB7IHJldHVybiB9CiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgZ2xvYmFsSGFuZGxlRXJyb3IoZSwgY3VyLCAnZXJyb3JDYXB0dXJlZCBob29rJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIGdsb2JhbEhhbmRsZUVycm9yKGVyciwgdm0sIGluZm8pOwogICAgfSBmaW5hbGx5IHsKICAgICAgcG9wVGFyZ2V0KCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBpbnZva2VXaXRoRXJyb3JIYW5kbGluZyAoCiAgICBoYW5kbGVyLAogICAgY29udGV4dCwKICAgIGFyZ3MsCiAgICB2bSwKICAgIGluZm8KICApIHsKICAgIHZhciByZXM7CiAgICB0cnkgewogICAgICByZXMgPSBhcmdzID8gaGFuZGxlci5hcHBseShjb250ZXh0LCBhcmdzKSA6IGhhbmRsZXIuY2FsbChjb250ZXh0KTsKICAgICAgaWYgKHJlcyAmJiAhcmVzLl9pc1Z1ZSAmJiBpc1Byb21pc2UocmVzKSAmJiAhcmVzLl9oYW5kbGVkKSB7CiAgICAgICAgcmVzLmNhdGNoKGZ1bmN0aW9uIChlKSB7IHJldHVybiBoYW5kbGVFcnJvcihlLCB2bSwgaW5mbyArICIgKFByb21pc2UvYXN5bmMpIik7IH0pOwogICAgICAgIC8vIGlzc3VlICM5NTExCiAgICAgICAgLy8gYXZvaWQgY2F0Y2ggdHJpZ2dlcmluZyBtdWx0aXBsZSB0aW1lcyB3aGVuIG5lc3RlZCBjYWxscwogICAgICAgIHJlcy5faGFuZGxlZCA9IHRydWU7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgaGFuZGxlRXJyb3IoZSwgdm0sIGluZm8pOwogICAgfQogICAgcmV0dXJuIHJlcwogIH0KCiAgZnVuY3Rpb24gZ2xvYmFsSGFuZGxlRXJyb3IgKGVyciwgdm0sIGluZm8pIHsKICAgIGlmIChjb25maWcuZXJyb3JIYW5kbGVyKSB7CiAgICAgIHRyeSB7CiAgICAgICAgcmV0dXJuIGNvbmZpZy5lcnJvckhhbmRsZXIuY2FsbChudWxsLCBlcnIsIHZtLCBpbmZvKQogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgLy8gaWYgdGhlIHVzZXIgaW50ZW50aW9uYWxseSB0aHJvd3MgdGhlIG9yaWdpbmFsIGVycm9yIGluIHRoZSBoYW5kbGVyLAogICAgICAgIC8vIGRvIG5vdCBsb2cgaXQgdHdpY2UKICAgICAgICBpZiAoZSAhPT0gZXJyKSB7CiAgICAgICAgICBsb2dFcnJvcihlLCBudWxsLCAnY29uZmlnLmVycm9ySGFuZGxlcicpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgbG9nRXJyb3IoZXJyLCB2bSwgaW5mbyk7CiAgfQoKICBmdW5jdGlvbiBsb2dFcnJvciAoZXJyLCB2bSwgaW5mbykgewogICAgewogICAgICB3YXJuKCgiRXJyb3IgaW4gIiArIGluZm8gKyAiOiBcIiIgKyAoZXJyLnRvU3RyaW5nKCkpICsgIlwiIiksIHZtKTsKICAgIH0KICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovCiAgICBpZiAoKGluQnJvd3NlciB8fCBpbldlZXgpICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykgewogICAgICBjb25zb2xlLmVycm9yKGVycik7CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBlcnIKICAgIH0KICB9CgogIC8qICAqLwoKICB2YXIgaXNVc2luZ01pY3JvVGFzayA9IGZhbHNlOwoKICB2YXIgY2FsbGJhY2tzID0gW107CiAgdmFyIHBlbmRpbmcgPSBmYWxzZTsKCiAgZnVuY3Rpb24gZmx1c2hDYWxsYmFja3MgKCkgewogICAgcGVuZGluZyA9IGZhbHNlOwogICAgdmFyIGNvcGllcyA9IGNhbGxiYWNrcy5zbGljZSgwKTsKICAgIGNhbGxiYWNrcy5sZW5ndGggPSAwOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3BpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgY29waWVzW2ldKCk7CiAgICB9CiAgfQoKICAvLyBIZXJlIHdlIGhhdmUgYXN5bmMgZGVmZXJyaW5nIHdyYXBwZXJzIHVzaW5nIG1pY3JvdGFza3MuCiAgLy8gSW4gMi41IHdlIHVzZWQgKG1hY3JvKSB0YXNrcyAoaW4gY29tYmluYXRpb24gd2l0aCBtaWNyb3Rhc2tzKS4KICAvLyBIb3dldmVyLCBpdCBoYXMgc3VidGxlIHByb2JsZW1zIHdoZW4gc3RhdGUgaXMgY2hhbmdlZCByaWdodCBiZWZvcmUgcmVwYWludAogIC8vIChlLmcuICM2ODEzLCBvdXQtaW4gdHJhbnNpdGlvbnMpLgogIC8vIEFsc28sIHVzaW5nIChtYWNybykgdGFza3MgaW4gZXZlbnQgaGFuZGxlciB3b3VsZCBjYXVzZSBzb21lIHdlaXJkIGJlaGF2aW9ycwogIC8vIHRoYXQgY2Fubm90IGJlIGNpcmN1bXZlbnRlZCAoZS5nLiAjNzEwOSwgIzcxNTMsICM3NTQ2LCAjNzgzNCwgIzgxMDkpLgogIC8vIFNvIHdlIG5vdyB1c2UgbWljcm90YXNrcyBldmVyeXdoZXJlLCBhZ2Fpbi4KICAvLyBBIG1ham9yIGRyYXdiYWNrIG9mIHRoaXMgdHJhZGVvZmYgaXMgdGhhdCB0aGVyZSBhcmUgc29tZSBzY2VuYXJpb3MKICAvLyB3aGVyZSBtaWNyb3Rhc2tzIGhhdmUgdG9vIGhpZ2ggYSBwcmlvcml0eSBhbmQgZmlyZSBpbiBiZXR3ZWVuIHN1cHBvc2VkbHkKICAvLyBzZXF1ZW50aWFsIGV2ZW50cyAoZS5nLiAjNDUyMSwgIzY2OTAsIHdoaWNoIGhhdmUgd29ya2Fyb3VuZHMpCiAgLy8gb3IgZXZlbiBiZXR3ZWVuIGJ1YmJsaW5nIG9mIHRoZSBzYW1lIGV2ZW50ICgjNjU2NikuCiAgdmFyIHRpbWVyRnVuYzsKCiAgLy8gVGhlIG5leHRUaWNrIGJlaGF2aW9yIGxldmVyYWdlcyB0aGUgbWljcm90YXNrIHF1ZXVlLCB3aGljaCBjYW4gYmUgYWNjZXNzZWQKICAvLyB2aWEgZWl0aGVyIG5hdGl2ZSBQcm9taXNlLnRoZW4gb3IgTXV0YXRpb25PYnNlcnZlci4KICAvLyBNdXRhdGlvbk9ic2VydmVyIGhhcyB3aWRlciBzdXBwb3J0LCBob3dldmVyIGl0IGlzIHNlcmlvdXNseSBidWdnZWQgaW4KICAvLyBVSVdlYlZpZXcgaW4gaU9TID49IDkuMy4zIHdoZW4gdHJpZ2dlcmVkIGluIHRvdWNoIGV2ZW50IGhhbmRsZXJzLiBJdAogIC8vIGNvbXBsZXRlbHkgc3RvcHMgd29ya2luZyBhZnRlciB0cmlnZ2VyaW5nIGEgZmV3IHRpbWVzLi4uIHNvLCBpZiBuYXRpdmUKICAvLyBQcm9taXNlIGlzIGF2YWlsYWJsZSwgd2Ugd2lsbCB1c2UgaXQ6CiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQsICRmbG93LWRpc2FibGUtbGluZSAqLwogIGlmICh0eXBlb2YgUHJvbWlzZSAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNOYXRpdmUoUHJvbWlzZSkpIHsKICAgIHZhciBwID0gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICB0aW1lckZ1bmMgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHAudGhlbihmbHVzaENhbGxiYWNrcyk7CiAgICAgIC8vIEluIHByb2JsZW1hdGljIFVJV2ViVmlld3MsIFByb21pc2UudGhlbiBkb2Vzbid0IGNvbXBsZXRlbHkgYnJlYWssIGJ1dAogICAgICAvLyBpdCBjYW4gZ2V0IHN0dWNrIGluIGEgd2VpcmQgc3RhdGUgd2hlcmUgY2FsbGJhY2tzIGFyZSBwdXNoZWQgaW50byB0aGUKICAgICAgLy8gbWljcm90YXNrIHF1ZXVlIGJ1dCB0aGUgcXVldWUgaXNuJ3QgYmVpbmcgZmx1c2hlZCwgdW50aWwgdGhlIGJyb3dzZXIKICAgICAgLy8gbmVlZHMgdG8gZG8gc29tZSBvdGhlciB3b3JrLCBlLmcuIGhhbmRsZSBhIHRpbWVyLiBUaGVyZWZvcmUgd2UgY2FuCiAgICAgIC8vICJmb3JjZSIgdGhlIG1pY3JvdGFzayBxdWV1ZSB0byBiZSBmbHVzaGVkIGJ5IGFkZGluZyBhbiBlbXB0eSB0aW1lci4KICAgICAgaWYgKGlzSU9TKSB7IHNldFRpbWVvdXQobm9vcCk7IH0KICAgIH07CiAgICBpc1VzaW5nTWljcm9UYXNrID0gdHJ1ZTsKICB9IGVsc2UgaWYgKCFpc0lFICYmIHR5cGVvZiBNdXRhdGlvbk9ic2VydmVyICE9PSAndW5kZWZpbmVkJyAmJiAoCiAgICBpc05hdGl2ZShNdXRhdGlvbk9ic2VydmVyKSB8fAogICAgLy8gUGhhbnRvbUpTIGFuZCBpT1MgNy54CiAgICBNdXRhdGlvbk9ic2VydmVyLnRvU3RyaW5nKCkgPT09ICdbb2JqZWN0IE11dGF0aW9uT2JzZXJ2ZXJDb25zdHJ1Y3Rvcl0nCiAgKSkgewogICAgLy8gVXNlIE11dGF0aW9uT2JzZXJ2ZXIgd2hlcmUgbmF0aXZlIFByb21pc2UgaXMgbm90IGF2YWlsYWJsZSwKICAgIC8vIGUuZy4gUGhhbnRvbUpTLCBpT1M3LCBBbmRyb2lkIDQuNAogICAgLy8gKCM2NDY2IE11dGF0aW9uT2JzZXJ2ZXIgaXMgdW5yZWxpYWJsZSBpbiBJRTExKQogICAgdmFyIGNvdW50ZXIgPSAxOwogICAgdmFyIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZmx1c2hDYWxsYmFja3MpOwogICAgdmFyIHRleHROb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoU3RyaW5nKGNvdW50ZXIpKTsKICAgIG9ic2VydmVyLm9ic2VydmUodGV4dE5vZGUsIHsKICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZQogICAgfSk7CiAgICB0aW1lckZ1bmMgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGNvdW50ZXIgPSAoY291bnRlciArIDEpICUgMjsKICAgICAgdGV4dE5vZGUuZGF0YSA9IFN0cmluZyhjb3VudGVyKTsKICAgIH07CiAgICBpc1VzaW5nTWljcm9UYXNrID0gdHJ1ZTsKICB9IGVsc2UgaWYgKHR5cGVvZiBzZXRJbW1lZGlhdGUgIT09ICd1bmRlZmluZWQnICYmIGlzTmF0aXZlKHNldEltbWVkaWF0ZSkpIHsKICAgIC8vIEZhbGxiYWNrIHRvIHNldEltbWVkaWF0ZS4KICAgIC8vIFRlY2huaWNhbGx5IGl0IGxldmVyYWdlcyB0aGUgKG1hY3JvKSB0YXNrIHF1ZXVlLAogICAgLy8gYnV0IGl0IGlzIHN0aWxsIGEgYmV0dGVyIGNob2ljZSB0aGFuIHNldFRpbWVvdXQuCiAgICB0aW1lckZ1bmMgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHNldEltbWVkaWF0ZShmbHVzaENhbGxiYWNrcyk7CiAgICB9OwogIH0gZWxzZSB7CiAgICAvLyBGYWxsYmFjayB0byBzZXRUaW1lb3V0LgogICAgdGltZXJGdW5jID0gZnVuY3Rpb24gKCkgewogICAgICBzZXRUaW1lb3V0KGZsdXNoQ2FsbGJhY2tzLCAwKTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBuZXh0VGljayAoY2IsIGN0eCkgewogICAgdmFyIF9yZXNvbHZlOwogICAgY2FsbGJhY2tzLnB1c2goZnVuY3Rpb24gKCkgewogICAgICBpZiAoY2IpIHsKICAgICAgICB0cnkgewogICAgICAgICAgY2IuY2FsbChjdHgpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIGhhbmRsZUVycm9yKGUsIGN0eCwgJ25leHRUaWNrJyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKF9yZXNvbHZlKSB7CiAgICAgICAgX3Jlc29sdmUoY3R4KTsKICAgICAgfQogICAgfSk7CiAgICBpZiAoIXBlbmRpbmcpIHsKICAgICAgcGVuZGluZyA9IHRydWU7CiAgICAgIHRpbWVyRnVuYygpOwogICAgfQogICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lCiAgICBpZiAoIWNiICYmIHR5cGVvZiBQcm9taXNlICE9PSAndW5kZWZpbmVkJykgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICBfcmVzb2x2ZSA9IHJlc29sdmU7CiAgICAgIH0pCiAgICB9CiAgfQoKICAvKiAgKi8KCiAgdmFyIG1hcms7CiAgdmFyIG1lYXN1cmU7CgogIHsKICAgIHZhciBwZXJmID0gaW5Ccm93c2VyICYmIHdpbmRvdy5wZXJmb3JtYW5jZTsKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgaWYgKAogICAgICBwZXJmICYmCiAgICAgIHBlcmYubWFyayAmJgogICAgICBwZXJmLm1lYXN1cmUgJiYKICAgICAgcGVyZi5jbGVhck1hcmtzICYmCiAgICAgIHBlcmYuY2xlYXJNZWFzdXJlcwogICAgKSB7CiAgICAgIG1hcmsgPSBmdW5jdGlvbiAodGFnKSB7IHJldHVybiBwZXJmLm1hcmsodGFnKTsgfTsKICAgICAgbWVhc3VyZSA9IGZ1bmN0aW9uIChuYW1lLCBzdGFydFRhZywgZW5kVGFnKSB7CiAgICAgICAgcGVyZi5tZWFzdXJlKG5hbWUsIHN0YXJ0VGFnLCBlbmRUYWcpOwogICAgICAgIHBlcmYuY2xlYXJNYXJrcyhzdGFydFRhZyk7CiAgICAgICAgcGVyZi5jbGVhck1hcmtzKGVuZFRhZyk7CiAgICAgICAgLy8gcGVyZi5jbGVhck1lYXN1cmVzKG5hbWUpCiAgICAgIH07CiAgICB9CiAgfQoKICAvKiBub3QgdHlwZSBjaGVja2luZyB0aGlzIGZpbGUgYmVjYXVzZSBmbG93IGRvZXNuJ3QgcGxheSB3ZWxsIHdpdGggUHJveHkgKi8KCiAgdmFyIGluaXRQcm94eTsKCiAgewogICAgdmFyIGFsbG93ZWRHbG9iYWxzID0gbWFrZU1hcCgKICAgICAgJ0luZmluaXR5LHVuZGVmaW5lZCxOYU4saXNGaW5pdGUsaXNOYU4sJyArCiAgICAgICdwYXJzZUZsb2F0LHBhcnNlSW50LGRlY29kZVVSSSxkZWNvZGVVUklDb21wb25lbnQsZW5jb2RlVVJJLGVuY29kZVVSSUNvbXBvbmVudCwnICsKICAgICAgJ01hdGgsTnVtYmVyLERhdGUsQXJyYXksT2JqZWN0LEJvb2xlYW4sU3RyaW5nLFJlZ0V4cCxNYXAsU2V0LEpTT04sSW50bCwnICsKICAgICAgJ3JlcXVpcmUnIC8vIGZvciBXZWJwYWNrL0Jyb3dzZXJpZnkKICAgICk7CgogICAgdmFyIHdhcm5Ob25QcmVzZW50ID0gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7CiAgICAgIHdhcm4oCiAgICAgICAgIlByb3BlcnR5IG9yIG1ldGhvZCBcIiIgKyBrZXkgKyAiXCIgaXMgbm90IGRlZmluZWQgb24gdGhlIGluc3RhbmNlIGJ1dCAiICsKICAgICAgICAncmVmZXJlbmNlZCBkdXJpbmcgcmVuZGVyLiBNYWtlIHN1cmUgdGhhdCB0aGlzIHByb3BlcnR5IGlzIHJlYWN0aXZlLCAnICsKICAgICAgICAnZWl0aGVyIGluIHRoZSBkYXRhIG9wdGlvbiwgb3IgZm9yIGNsYXNzLWJhc2VkIGNvbXBvbmVudHMsIGJ5ICcgKwogICAgICAgICdpbml0aWFsaXppbmcgdGhlIHByb3BlcnR5LiAnICsKICAgICAgICAnU2VlOiBodHRwczovL3Z1ZWpzLm9yZy92Mi9ndWlkZS9yZWFjdGl2aXR5Lmh0bWwjRGVjbGFyaW5nLVJlYWN0aXZlLVByb3BlcnRpZXMuJywKICAgICAgICB0YXJnZXQKICAgICAgKTsKICAgIH07CgogICAgdmFyIHdhcm5SZXNlcnZlZFByZWZpeCA9IGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgewogICAgICB3YXJuKAogICAgICAgICJQcm9wZXJ0eSBcIiIgKyBrZXkgKyAiXCIgbXVzdCBiZSBhY2Nlc3NlZCB3aXRoIFwiJGRhdGEuIiArIGtleSArICJcIiBiZWNhdXNlICIgKwogICAgICAgICdwcm9wZXJ0aWVzIHN0YXJ0aW5nIHdpdGggIiQiIG9yICJfIiBhcmUgbm90IHByb3hpZWQgaW4gdGhlIFZ1ZSBpbnN0YW5jZSB0byAnICsKICAgICAgICAncHJldmVudCBjb25mbGljdHMgd2l0aCBWdWUgaW50ZXJuYWxzLiAnICsKICAgICAgICAnU2VlOiBodHRwczovL3Z1ZWpzLm9yZy92Mi9hcGkvI2RhdGEnLAogICAgICAgIHRhcmdldAogICAgICApOwogICAgfTsKCiAgICB2YXIgaGFzUHJveHkgPQogICAgICB0eXBlb2YgUHJveHkgIT09ICd1bmRlZmluZWQnICYmIGlzTmF0aXZlKFByb3h5KTsKCiAgICBpZiAoaGFzUHJveHkpIHsKICAgICAgdmFyIGlzQnVpbHRJbk1vZGlmaWVyID0gbWFrZU1hcCgnc3RvcCxwcmV2ZW50LHNlbGYsY3RybCxzaGlmdCxhbHQsbWV0YSxleGFjdCcpOwogICAgICBjb25maWcua2V5Q29kZXMgPSBuZXcgUHJveHkoY29uZmlnLmtleUNvZGVzLCB7CiAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQgKHRhcmdldCwga2V5LCB2YWx1ZSkgewogICAgICAgICAgaWYgKGlzQnVpbHRJbk1vZGlmaWVyKGtleSkpIHsKICAgICAgICAgICAgd2FybigoIkF2b2lkIG92ZXJ3cml0aW5nIGJ1aWx0LWluIG1vZGlmaWVyIGluIGNvbmZpZy5rZXlDb2RlczogLiIgKyBrZXkpKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0YXJnZXRba2V5XSA9IHZhbHVlOwogICAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgdmFyIGhhc0hhbmRsZXIgPSB7CiAgICAgIGhhczogZnVuY3Rpb24gaGFzICh0YXJnZXQsIGtleSkgewogICAgICAgIHZhciBoYXMgPSBrZXkgaW4gdGFyZ2V0OwogICAgICAgIHZhciBpc0FsbG93ZWQgPSBhbGxvd2VkR2xvYmFscyhrZXkpIHx8CiAgICAgICAgICAodHlwZW9mIGtleSA9PT0gJ3N0cmluZycgJiYga2V5LmNoYXJBdCgwKSA9PT0gJ18nICYmICEoa2V5IGluIHRhcmdldC4kZGF0YSkpOwogICAgICAgIGlmICghaGFzICYmICFpc0FsbG93ZWQpIHsKICAgICAgICAgIGlmIChrZXkgaW4gdGFyZ2V0LiRkYXRhKSB7IHdhcm5SZXNlcnZlZFByZWZpeCh0YXJnZXQsIGtleSk7IH0KICAgICAgICAgIGVsc2UgeyB3YXJuTm9uUHJlc2VudCh0YXJnZXQsIGtleSk7IH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGhhcyB8fCAhaXNBbGxvd2VkCiAgICAgIH0KICAgIH07CgogICAgdmFyIGdldEhhbmRsZXIgPSB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0ICh0YXJnZXQsIGtleSkgewogICAgICAgIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJyAmJiAhKGtleSBpbiB0YXJnZXQpKSB7CiAgICAgICAgICBpZiAoa2V5IGluIHRhcmdldC4kZGF0YSkgeyB3YXJuUmVzZXJ2ZWRQcmVmaXgodGFyZ2V0LCBrZXkpOyB9CiAgICAgICAgICBlbHNlIHsgd2Fybk5vblByZXNlbnQodGFyZ2V0LCBrZXkpOyB9CiAgICAgICAgfQogICAgICAgIHJldHVybiB0YXJnZXRba2V5XQogICAgICB9CiAgICB9OwoKICAgIGluaXRQcm94eSA9IGZ1bmN0aW9uIGluaXRQcm94eSAodm0pIHsKICAgICAgaWYgKGhhc1Byb3h5KSB7CiAgICAgICAgLy8gZGV0ZXJtaW5lIHdoaWNoIHByb3h5IGhhbmRsZXIgdG8gdXNlCiAgICAgICAgdmFyIG9wdGlvbnMgPSB2bS4kb3B0aW9uczsKICAgICAgICB2YXIgaGFuZGxlcnMgPSBvcHRpb25zLnJlbmRlciAmJiBvcHRpb25zLnJlbmRlci5fd2l0aFN0cmlwcGVkCiAgICAgICAgICA/IGdldEhhbmRsZXIKICAgICAgICAgIDogaGFzSGFuZGxlcjsKICAgICAgICB2bS5fcmVuZGVyUHJveHkgPSBuZXcgUHJveHkodm0sIGhhbmRsZXJzKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2bS5fcmVuZGVyUHJveHkgPSB2bTsKICAgICAgfQogICAgfTsKICB9CgogIC8qICAqLwoKICB2YXIgc2Vlbk9iamVjdHMgPSBuZXcgX1NldCgpOwoKICAvKioKICAgKiBSZWN1cnNpdmVseSB0cmF2ZXJzZSBhbiBvYmplY3QgdG8gZXZva2UgYWxsIGNvbnZlcnRlZAogICAqIGdldHRlcnMsIHNvIHRoYXQgZXZlcnkgbmVzdGVkIHByb3BlcnR5IGluc2lkZSB0aGUgb2JqZWN0CiAgICogaXMgY29sbGVjdGVkIGFzIGEgImRlZXAiIGRlcGVuZGVuY3kuCiAgICovCiAgZnVuY3Rpb24gdHJhdmVyc2UgKHZhbCkgewogICAgX3RyYXZlcnNlKHZhbCwgc2Vlbk9iamVjdHMpOwogICAgc2Vlbk9iamVjdHMuY2xlYXIoKTsKICB9CgogIGZ1bmN0aW9uIF90cmF2ZXJzZSAodmFsLCBzZWVuKSB7CiAgICB2YXIgaSwga2V5czsKICAgIHZhciBpc0EgPSBBcnJheS5pc0FycmF5KHZhbCk7CiAgICBpZiAoKCFpc0EgJiYgIWlzT2JqZWN0KHZhbCkpIHx8IE9iamVjdC5pc0Zyb3plbih2YWwpIHx8IHZhbCBpbnN0YW5jZW9mIFZOb2RlKSB7CiAgICAgIHJldHVybgogICAgfQogICAgaWYgKHZhbC5fX29iX18pIHsKICAgICAgdmFyIGRlcElkID0gdmFsLl9fb2JfXy5kZXAuaWQ7CiAgICAgIGlmIChzZWVuLmhhcyhkZXBJZCkpIHsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBzZWVuLmFkZChkZXBJZCk7CiAgICB9CiAgICBpZiAoaXNBKSB7CiAgICAgIGkgPSB2YWwubGVuZ3RoOwogICAgICB3aGlsZSAoaS0tKSB7IF90cmF2ZXJzZSh2YWxbaV0sIHNlZW4pOyB9CiAgICB9IGVsc2UgewogICAgICBrZXlzID0gT2JqZWN0LmtleXModmFsKTsKICAgICAgaSA9IGtleXMubGVuZ3RoOwogICAgICB3aGlsZSAoaS0tKSB7IF90cmF2ZXJzZSh2YWxba2V5c1tpXV0sIHNlZW4pOyB9CiAgICB9CiAgfQoKICAvKiAgKi8KCiAgdmFyIG5vcm1hbGl6ZUV2ZW50ID0gY2FjaGVkKGZ1bmN0aW9uIChuYW1lKSB7CiAgICB2YXIgcGFzc2l2ZSA9IG5hbWUuY2hhckF0KDApID09PSAnJic7CiAgICBuYW1lID0gcGFzc2l2ZSA/IG5hbWUuc2xpY2UoMSkgOiBuYW1lOwogICAgdmFyIG9uY2UkJDEgPSBuYW1lLmNoYXJBdCgwKSA9PT0gJ34nOyAvLyBQcmVmaXhlZCBsYXN0LCBjaGVja2VkIGZpcnN0CiAgICBuYW1lID0gb25jZSQkMSA/IG5hbWUuc2xpY2UoMSkgOiBuYW1lOwogICAgdmFyIGNhcHR1cmUgPSBuYW1lLmNoYXJBdCgwKSA9PT0gJyEnOwogICAgbmFtZSA9IGNhcHR1cmUgPyBuYW1lLnNsaWNlKDEpIDogbmFtZTsKICAgIHJldHVybiB7CiAgICAgIG5hbWU6IG5hbWUsCiAgICAgIG9uY2U6IG9uY2UkJDEsCiAgICAgIGNhcHR1cmU6IGNhcHR1cmUsCiAgICAgIHBhc3NpdmU6IHBhc3NpdmUKICAgIH0KICB9KTsKCiAgZnVuY3Rpb24gY3JlYXRlRm5JbnZva2VyIChmbnMsIHZtKSB7CiAgICBmdW5jdGlvbiBpbnZva2VyICgpIHsKICAgICAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKICAgICAgdmFyIGZucyA9IGludm9rZXIuZm5zOwogICAgICBpZiAoQXJyYXkuaXNBcnJheShmbnMpKSB7CiAgICAgICAgdmFyIGNsb25lZCA9IGZucy5zbGljZSgpOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2xvbmVkLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpbnZva2VXaXRoRXJyb3JIYW5kbGluZyhjbG9uZWRbaV0sIG51bGwsIGFyZ3VtZW50cyQxLCB2bSwgInYtb24gaGFuZGxlciIpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyByZXR1cm4gaGFuZGxlciByZXR1cm4gdmFsdWUgZm9yIHNpbmdsZSBoYW5kbGVycwogICAgICAgIHJldHVybiBpbnZva2VXaXRoRXJyb3JIYW5kbGluZyhmbnMsIG51bGwsIGFyZ3VtZW50cywgdm0sICJ2LW9uIGhhbmRsZXIiKQogICAgICB9CiAgICB9CiAgICBpbnZva2VyLmZucyA9IGZuczsKICAgIHJldHVybiBpbnZva2VyCiAgfQoKICBmdW5jdGlvbiB1cGRhdGVMaXN0ZW5lcnMgKAogICAgb24sCiAgICBvbGRPbiwKICAgIGFkZCwKICAgIHJlbW92ZSQkMSwKICAgIGNyZWF0ZU9uY2VIYW5kbGVyLAogICAgdm0KICApIHsKICAgIHZhciBuYW1lLCBkZWYkJDEsIGN1ciwgb2xkLCBldmVudDsKICAgIGZvciAobmFtZSBpbiBvbikgewogICAgICBkZWYkJDEgPSBjdXIgPSBvbltuYW1lXTsKICAgICAgb2xkID0gb2xkT25bbmFtZV07CiAgICAgIGV2ZW50ID0gbm9ybWFsaXplRXZlbnQobmFtZSk7CiAgICAgIGlmIChpc1VuZGVmKGN1cikpIHsKICAgICAgICB3YXJuKAogICAgICAgICAgIkludmFsaWQgaGFuZGxlciBmb3IgZXZlbnQgXCIiICsgKGV2ZW50Lm5hbWUpICsgIlwiOiBnb3QgIiArIFN0cmluZyhjdXIpLAogICAgICAgICAgdm0KICAgICAgICApOwogICAgICB9IGVsc2UgaWYgKGlzVW5kZWYob2xkKSkgewogICAgICAgIGlmIChpc1VuZGVmKGN1ci5mbnMpKSB7CiAgICAgICAgICBjdXIgPSBvbltuYW1lXSA9IGNyZWF0ZUZuSW52b2tlcihjdXIsIHZtKTsKICAgICAgICB9CiAgICAgICAgaWYgKGlzVHJ1ZShldmVudC5vbmNlKSkgewogICAgICAgICAgY3VyID0gb25bbmFtZV0gPSBjcmVhdGVPbmNlSGFuZGxlcihldmVudC5uYW1lLCBjdXIsIGV2ZW50LmNhcHR1cmUpOwogICAgICAgIH0KICAgICAgICBhZGQoZXZlbnQubmFtZSwgY3VyLCBldmVudC5jYXB0dXJlLCBldmVudC5wYXNzaXZlLCBldmVudC5wYXJhbXMpOwogICAgICB9IGVsc2UgaWYgKGN1ciAhPT0gb2xkKSB7CiAgICAgICAgb2xkLmZucyA9IGN1cjsKICAgICAgICBvbltuYW1lXSA9IG9sZDsKICAgICAgfQogICAgfQogICAgZm9yIChuYW1lIGluIG9sZE9uKSB7CiAgICAgIGlmIChpc1VuZGVmKG9uW25hbWVdKSkgewogICAgICAgIGV2ZW50ID0gbm9ybWFsaXplRXZlbnQobmFtZSk7CiAgICAgICAgcmVtb3ZlJCQxKGV2ZW50Lm5hbWUsIG9sZE9uW25hbWVdLCBldmVudC5jYXB0dXJlKTsKICAgICAgfQogICAgfQogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIG1lcmdlVk5vZGVIb29rIChkZWYsIGhvb2tLZXksIGhvb2spIHsKICAgIGlmIChkZWYgaW5zdGFuY2VvZiBWTm9kZSkgewogICAgICBkZWYgPSBkZWYuZGF0YS5ob29rIHx8IChkZWYuZGF0YS5ob29rID0ge30pOwogICAgfQogICAgdmFyIGludm9rZXI7CiAgICB2YXIgb2xkSG9vayA9IGRlZltob29rS2V5XTsKCiAgICBmdW5jdGlvbiB3cmFwcGVkSG9vayAoKSB7CiAgICAgIGhvb2suYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgLy8gaW1wb3J0YW50OiByZW1vdmUgbWVyZ2VkIGhvb2sgdG8gZW5zdXJlIGl0J3MgY2FsbGVkIG9ubHkgb25jZQogICAgICAvLyBhbmQgcHJldmVudCBtZW1vcnkgbGVhawogICAgICByZW1vdmUoaW52b2tlci5mbnMsIHdyYXBwZWRIb29rKTsKICAgIH0KCiAgICBpZiAoaXNVbmRlZihvbGRIb29rKSkgewogICAgICAvLyBubyBleGlzdGluZyBob29rCiAgICAgIGludm9rZXIgPSBjcmVhdGVGbkludm9rZXIoW3dyYXBwZWRIb29rXSk7CiAgICB9IGVsc2UgewogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgaWYgKGlzRGVmKG9sZEhvb2suZm5zKSAmJiBpc1RydWUob2xkSG9vay5tZXJnZWQpKSB7CiAgICAgICAgLy8gYWxyZWFkeSBhIG1lcmdlZCBpbnZva2VyCiAgICAgICAgaW52b2tlciA9IG9sZEhvb2s7CiAgICAgICAgaW52b2tlci5mbnMucHVzaCh3cmFwcGVkSG9vayk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gZXhpc3RpbmcgcGxhaW4gaG9vawogICAgICAgIGludm9rZXIgPSBjcmVhdGVGbkludm9rZXIoW29sZEhvb2ssIHdyYXBwZWRIb29rXSk7CiAgICAgIH0KICAgIH0KCiAgICBpbnZva2VyLm1lcmdlZCA9IHRydWU7CiAgICBkZWZbaG9va0tleV0gPSBpbnZva2VyOwogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIGV4dHJhY3RQcm9wc0Zyb21WTm9kZURhdGEgKAogICAgZGF0YSwKICAgIEN0b3IsCiAgICB0YWcKICApIHsKICAgIC8vIHdlIGFyZSBvbmx5IGV4dHJhY3RpbmcgcmF3IHZhbHVlcyBoZXJlLgogICAgLy8gdmFsaWRhdGlvbiBhbmQgZGVmYXVsdCB2YWx1ZXMgYXJlIGhhbmRsZWQgaW4gdGhlIGNoaWxkCiAgICAvLyBjb21wb25lbnQgaXRzZWxmLgogICAgdmFyIHByb3BPcHRpb25zID0gQ3Rvci5vcHRpb25zLnByb3BzOwogICAgaWYgKGlzVW5kZWYocHJvcE9wdGlvbnMpKSB7CiAgICAgIHJldHVybgogICAgfQogICAgdmFyIHJlcyA9IHt9OwogICAgdmFyIGF0dHJzID0gZGF0YS5hdHRyczsKICAgIHZhciBwcm9wcyA9IGRhdGEucHJvcHM7CiAgICBpZiAoaXNEZWYoYXR0cnMpIHx8IGlzRGVmKHByb3BzKSkgewogICAgICBmb3IgKHZhciBrZXkgaW4gcHJvcE9wdGlvbnMpIHsKICAgICAgICB2YXIgYWx0S2V5ID0gaHlwaGVuYXRlKGtleSk7CiAgICAgICAgewogICAgICAgICAgdmFyIGtleUluTG93ZXJDYXNlID0ga2V5LnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIGtleSAhPT0ga2V5SW5Mb3dlckNhc2UgJiYKICAgICAgICAgICAgYXR0cnMgJiYgaGFzT3duKGF0dHJzLCBrZXlJbkxvd2VyQ2FzZSkKICAgICAgICAgICkgewogICAgICAgICAgICB0aXAoCiAgICAgICAgICAgICAgIlByb3AgXCIiICsga2V5SW5Mb3dlckNhc2UgKyAiXCIgaXMgcGFzc2VkIHRvIGNvbXBvbmVudCAiICsKICAgICAgICAgICAgICAoZm9ybWF0Q29tcG9uZW50TmFtZSh0YWcgfHwgQ3RvcikpICsgIiwgYnV0IHRoZSBkZWNsYXJlZCBwcm9wIG5hbWUgaXMiICsKICAgICAgICAgICAgICAiIFwiIiArIGtleSArICJcIi4gIiArCiAgICAgICAgICAgICAgIk5vdGUgdGhhdCBIVE1MIGF0dHJpYnV0ZXMgYXJlIGNhc2UtaW5zZW5zaXRpdmUgYW5kIGNhbWVsQ2FzZWQgIiArCiAgICAgICAgICAgICAgInByb3BzIG5lZWQgdG8gdXNlIHRoZWlyIGtlYmFiLWNhc2UgZXF1aXZhbGVudHMgd2hlbiB1c2luZyBpbi1ET00gIiArCiAgICAgICAgICAgICAgInRlbXBsYXRlcy4gWW91IHNob3VsZCBwcm9iYWJseSB1c2UgXCIiICsgYWx0S2V5ICsgIlwiIGluc3RlYWQgb2YgXCIiICsga2V5ICsgIlwiLiIKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgY2hlY2tQcm9wKHJlcywgcHJvcHMsIGtleSwgYWx0S2V5LCB0cnVlKSB8fAogICAgICAgIGNoZWNrUHJvcChyZXMsIGF0dHJzLCBrZXksIGFsdEtleSwgZmFsc2UpOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gcmVzCiAgfQoKICBmdW5jdGlvbiBjaGVja1Byb3AgKAogICAgcmVzLAogICAgaGFzaCwKICAgIGtleSwKICAgIGFsdEtleSwKICAgIHByZXNlcnZlCiAgKSB7CiAgICBpZiAoaXNEZWYoaGFzaCkpIHsKICAgICAgaWYgKGhhc093bihoYXNoLCBrZXkpKSB7CiAgICAgICAgcmVzW2tleV0gPSBoYXNoW2tleV07CiAgICAgICAgaWYgKCFwcmVzZXJ2ZSkgewogICAgICAgICAgZGVsZXRlIGhhc2hba2V5XTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfSBlbHNlIGlmIChoYXNPd24oaGFzaCwgYWx0S2V5KSkgewogICAgICAgIHJlc1trZXldID0gaGFzaFthbHRLZXldOwogICAgICAgIGlmICghcHJlc2VydmUpIHsKICAgICAgICAgIGRlbGV0ZSBoYXNoW2FsdEtleV07CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgIH0KICAgIHJldHVybiBmYWxzZQogIH0KCiAgLyogICovCgogIC8vIFRoZSB0ZW1wbGF0ZSBjb21waWxlciBhdHRlbXB0cyB0byBtaW5pbWl6ZSB0aGUgbmVlZCBmb3Igbm9ybWFsaXphdGlvbiBieQogIC8vIHN0YXRpY2FsbHkgYW5hbHl6aW5nIHRoZSB0ZW1wbGF0ZSBhdCBjb21waWxlIHRpbWUuCiAgLy8KICAvLyBGb3IgcGxhaW4gSFRNTCBtYXJrdXAsIG5vcm1hbGl6YXRpb24gY2FuIGJlIGNvbXBsZXRlbHkgc2tpcHBlZCBiZWNhdXNlIHRoZQogIC8vIGdlbmVyYXRlZCByZW5kZXIgZnVuY3Rpb24gaXMgZ3VhcmFudGVlZCB0byByZXR1cm4gQXJyYXk8Vk5vZGU+LiBUaGVyZSBhcmUKICAvLyB0d28gY2FzZXMgd2hlcmUgZXh0cmEgbm9ybWFsaXphdGlvbiBpcyBuZWVkZWQ6CgogIC8vIDEuIFdoZW4gdGhlIGNoaWxkcmVuIGNvbnRhaW5zIGNvbXBvbmVudHMgLSBiZWNhdXNlIGEgZnVuY3Rpb25hbCBjb21wb25lbnQKICAvLyBtYXkgcmV0dXJuIGFuIEFycmF5IGluc3RlYWQgb2YgYSBzaW5nbGUgcm9vdC4gSW4gdGhpcyBjYXNlLCBqdXN0IGEgc2ltcGxlCiAgLy8gbm9ybWFsaXphdGlvbiBpcyBuZWVkZWQgLSBpZiBhbnkgY2hpbGQgaXMgYW4gQXJyYXksIHdlIGZsYXR0ZW4gdGhlIHdob2xlCiAgLy8gdGhpbmcgd2l0aCBBcnJheS5wcm90b3R5cGUuY29uY2F0LiBJdCBpcyBndWFyYW50ZWVkIHRvIGJlIG9ubHkgMS1sZXZlbCBkZWVwCiAgLy8gYmVjYXVzZSBmdW5jdGlvbmFsIGNvbXBvbmVudHMgYWxyZWFkeSBub3JtYWxpemUgdGhlaXIgb3duIGNoaWxkcmVuLgogIGZ1bmN0aW9uIHNpbXBsZU5vcm1hbGl6ZUNoaWxkcmVuIChjaGlsZHJlbikgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykgewogICAgICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZHJlbltpXSkpIHsKICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgY2hpbGRyZW4pCiAgICAgIH0KICAgIH0KICAgIHJldHVybiBjaGlsZHJlbgogIH0KCiAgLy8gMi4gV2hlbiB0aGUgY2hpbGRyZW4gY29udGFpbnMgY29uc3RydWN0cyB0aGF0IGFsd2F5cyBnZW5lcmF0ZWQgbmVzdGVkIEFycmF5cywKICAvLyBlLmcuIDx0ZW1wbGF0ZT4sIDxzbG90Piwgdi1mb3IsIG9yIHdoZW4gdGhlIGNoaWxkcmVuIGlzIHByb3ZpZGVkIGJ5IHVzZXIKICAvLyB3aXRoIGhhbmQtd3JpdHRlbiByZW5kZXIgZnVuY3Rpb25zIC8gSlNYLiBJbiBzdWNoIGNhc2VzIGEgZnVsbCBub3JtYWxpemF0aW9uCiAgLy8gaXMgbmVlZGVkIHRvIGNhdGVyIHRvIGFsbCBwb3NzaWJsZSB0eXBlcyBvZiBjaGlsZHJlbiB2YWx1ZXMuCiAgZnVuY3Rpb24gbm9ybWFsaXplQ2hpbGRyZW4gKGNoaWxkcmVuKSB7CiAgICByZXR1cm4gaXNQcmltaXRpdmUoY2hpbGRyZW4pCiAgICAgID8gW2NyZWF0ZVRleHRWTm9kZShjaGlsZHJlbildCiAgICAgIDogQXJyYXkuaXNBcnJheShjaGlsZHJlbikKICAgICAgICA/IG5vcm1hbGl6ZUFycmF5Q2hpbGRyZW4oY2hpbGRyZW4pCiAgICAgICAgOiB1bmRlZmluZWQKICB9CgogIGZ1bmN0aW9uIGlzVGV4dE5vZGUgKG5vZGUpIHsKICAgIHJldHVybiBpc0RlZihub2RlKSAmJiBpc0RlZihub2RlLnRleHQpICYmIGlzRmFsc2Uobm9kZS5pc0NvbW1lbnQpCiAgfQoKICBmdW5jdGlvbiBub3JtYWxpemVBcnJheUNoaWxkcmVuIChjaGlsZHJlbiwgbmVzdGVkSW5kZXgpIHsKICAgIHZhciByZXMgPSBbXTsKICAgIHZhciBpLCBjLCBsYXN0SW5kZXgsIGxhc3Q7CiAgICBmb3IgKGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHsKICAgICAgYyA9IGNoaWxkcmVuW2ldOwogICAgICBpZiAoaXNVbmRlZihjKSB8fCB0eXBlb2YgYyA9PT0gJ2Jvb2xlYW4nKSB7IGNvbnRpbnVlIH0KICAgICAgbGFzdEluZGV4ID0gcmVzLmxlbmd0aCAtIDE7CiAgICAgIGxhc3QgPSByZXNbbGFzdEluZGV4XTsKICAgICAgLy8gIG5lc3RlZAogICAgICBpZiAoQXJyYXkuaXNBcnJheShjKSkgewogICAgICAgIGlmIChjLmxlbmd0aCA+IDApIHsKICAgICAgICAgIGMgPSBub3JtYWxpemVBcnJheUNoaWxkcmVuKGMsICgobmVzdGVkSW5kZXggfHwgJycpICsgIl8iICsgaSkpOwogICAgICAgICAgLy8gbWVyZ2UgYWRqYWNlbnQgdGV4dCBub2RlcwogICAgICAgICAgaWYgKGlzVGV4dE5vZGUoY1swXSkgJiYgaXNUZXh0Tm9kZShsYXN0KSkgewogICAgICAgICAgICByZXNbbGFzdEluZGV4XSA9IGNyZWF0ZVRleHRWTm9kZShsYXN0LnRleHQgKyAoY1swXSkudGV4dCk7CiAgICAgICAgICAgIGMuc2hpZnQoKTsKICAgICAgICAgIH0KICAgICAgICAgIHJlcy5wdXNoLmFwcGx5KHJlcywgYyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGlzUHJpbWl0aXZlKGMpKSB7CiAgICAgICAgaWYgKGlzVGV4dE5vZGUobGFzdCkpIHsKICAgICAgICAgIC8vIG1lcmdlIGFkamFjZW50IHRleHQgbm9kZXMKICAgICAgICAgIC8vIHRoaXMgaXMgbmVjZXNzYXJ5IGZvciBTU1IgaHlkcmF0aW9uIGJlY2F1c2UgdGV4dCBub2RlcyBhcmUKICAgICAgICAgIC8vIGVzc2VudGlhbGx5IG1lcmdlZCB3aGVuIHJlbmRlcmVkIHRvIEhUTUwgc3RyaW5ncwogICAgICAgICAgcmVzW2xhc3RJbmRleF0gPSBjcmVhdGVUZXh0Vk5vZGUobGFzdC50ZXh0ICsgYyk7CiAgICAgICAgfSBlbHNlIGlmIChjICE9PSAnJykgewogICAgICAgICAgLy8gY29udmVydCBwcmltaXRpdmUgdG8gdm5vZGUKICAgICAgICAgIHJlcy5wdXNoKGNyZWF0ZVRleHRWTm9kZShjKSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChpc1RleHROb2RlKGMpICYmIGlzVGV4dE5vZGUobGFzdCkpIHsKICAgICAgICAgIC8vIG1lcmdlIGFkamFjZW50IHRleHQgbm9kZXMKICAgICAgICAgIHJlc1tsYXN0SW5kZXhdID0gY3JlYXRlVGV4dFZOb2RlKGxhc3QudGV4dCArIGMudGV4dCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIGRlZmF1bHQga2V5IGZvciBuZXN0ZWQgYXJyYXkgY2hpbGRyZW4gKGxpa2VseSBnZW5lcmF0ZWQgYnkgdi1mb3IpCiAgICAgICAgICBpZiAoaXNUcnVlKGNoaWxkcmVuLl9pc1ZMaXN0KSAmJgogICAgICAgICAgICBpc0RlZihjLnRhZykgJiYKICAgICAgICAgICAgaXNVbmRlZihjLmtleSkgJiYKICAgICAgICAgICAgaXNEZWYobmVzdGVkSW5kZXgpKSB7CiAgICAgICAgICAgIGMua2V5ID0gIl9fdmxpc3QiICsgbmVzdGVkSW5kZXggKyAiXyIgKyBpICsgIl9fIjsKICAgICAgICAgIH0KICAgICAgICAgIHJlcy5wdXNoKGMpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlcwogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIGluaXRQcm92aWRlICh2bSkgewogICAgdmFyIHByb3ZpZGUgPSB2bS4kb3B0aW9ucy5wcm92aWRlOwogICAgaWYgKHByb3ZpZGUpIHsKICAgICAgdm0uX3Byb3ZpZGVkID0gdHlwZW9mIHByb3ZpZGUgPT09ICdmdW5jdGlvbicKICAgICAgICA/IHByb3ZpZGUuY2FsbCh2bSkKICAgICAgICA6IHByb3ZpZGU7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBpbml0SW5qZWN0aW9ucyAodm0pIHsKICAgIHZhciByZXN1bHQgPSByZXNvbHZlSW5qZWN0KHZtLiRvcHRpb25zLmluamVjdCwgdm0pOwogICAgaWYgKHJlc3VsdCkgewogICAgICB0b2dnbGVPYnNlcnZpbmcoZmFsc2UpOwogICAgICBPYmplY3Qua2V5cyhyZXN1bHQpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovCiAgICAgICAgewogICAgICAgICAgZGVmaW5lUmVhY3RpdmUkJDEodm0sIGtleSwgcmVzdWx0W2tleV0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgd2FybigKICAgICAgICAgICAgICAiQXZvaWQgbXV0YXRpbmcgYW4gaW5qZWN0ZWQgdmFsdWUgZGlyZWN0bHkgc2luY2UgdGhlIGNoYW5nZXMgd2lsbCBiZSAiICsKICAgICAgICAgICAgICAib3ZlcndyaXR0ZW4gd2hlbmV2ZXIgdGhlIHByb3ZpZGVkIGNvbXBvbmVudCByZS1yZW5kZXJzLiAiICsKICAgICAgICAgICAgICAiaW5qZWN0aW9uIGJlaW5nIG11dGF0ZWQ6IFwiIiArIGtleSArICJcIiIsCiAgICAgICAgICAgICAgdm0KICAgICAgICAgICAgKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRvZ2dsZU9ic2VydmluZyh0cnVlKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHJlc29sdmVJbmplY3QgKGluamVjdCwgdm0pIHsKICAgIGlmIChpbmplY3QpIHsKICAgICAgLy8gaW5qZWN0IGlzIDphbnkgYmVjYXVzZSBmbG93IGlzIG5vdCBzbWFydCBlbm91Z2ggdG8gZmlndXJlIG91dCBjYWNoZWQKICAgICAgdmFyIHJlc3VsdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICAgIHZhciBrZXlzID0gaGFzU3ltYm9sCiAgICAgICAgPyBSZWZsZWN0Lm93bktleXMoaW5qZWN0KQogICAgICAgIDogT2JqZWN0LmtleXMoaW5qZWN0KTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBrZXkgPSBrZXlzW2ldOwogICAgICAgIC8vICM2NTc0IGluIGNhc2UgdGhlIGluamVjdCBvYmplY3QgaXMgb2JzZXJ2ZWQuLi4KICAgICAgICBpZiAoa2V5ID09PSAnX19vYl9fJykgeyBjb250aW51ZSB9CiAgICAgICAgdmFyIHByb3ZpZGVLZXkgPSBpbmplY3Rba2V5XS5mcm9tOwogICAgICAgIHZhciBzb3VyY2UgPSB2bTsKICAgICAgICB3aGlsZSAoc291cmNlKSB7CiAgICAgICAgICBpZiAoc291cmNlLl9wcm92aWRlZCAmJiBoYXNPd24oc291cmNlLl9wcm92aWRlZCwgcHJvdmlkZUtleSkpIHsKICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBzb3VyY2UuX3Byb3ZpZGVkW3Byb3ZpZGVLZXldOwogICAgICAgICAgICBicmVhawogICAgICAgICAgfQogICAgICAgICAgc291cmNlID0gc291cmNlLiRwYXJlbnQ7CiAgICAgICAgfQogICAgICAgIGlmICghc291cmNlKSB7CiAgICAgICAgICBpZiAoJ2RlZmF1bHQnIGluIGluamVjdFtrZXldKSB7CiAgICAgICAgICAgIHZhciBwcm92aWRlRGVmYXVsdCA9IGluamVjdFtrZXldLmRlZmF1bHQ7CiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gdHlwZW9mIHByb3ZpZGVEZWZhdWx0ID09PSAnZnVuY3Rpb24nCiAgICAgICAgICAgICAgPyBwcm92aWRlRGVmYXVsdC5jYWxsKHZtKQogICAgICAgICAgICAgIDogcHJvdmlkZURlZmF1bHQ7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB3YXJuKCgiSW5qZWN0aW9uIFwiIiArIGtleSArICJcIiBub3QgZm91bmQiKSwgdm0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0CiAgICB9CiAgfQoKICAvKiAgKi8KCgoKICAvKioKICAgKiBSdW50aW1lIGhlbHBlciBmb3IgcmVzb2x2aW5nIHJhdyBjaGlsZHJlbiBWTm9kZXMgaW50byBhIHNsb3Qgb2JqZWN0LgogICAqLwogIGZ1bmN0aW9uIHJlc29sdmVTbG90cyAoCiAgICBjaGlsZHJlbiwKICAgIGNvbnRleHQKICApIHsKICAgIGlmICghY2hpbGRyZW4gfHwgIWNoaWxkcmVuLmxlbmd0aCkgewogICAgICByZXR1cm4ge30KICAgIH0KICAgIHZhciBzbG90cyA9IHt9OwogICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5baV07CiAgICAgIHZhciBkYXRhID0gY2hpbGQuZGF0YTsKICAgICAgLy8gcmVtb3ZlIHNsb3QgYXR0cmlidXRlIGlmIHRoZSBub2RlIGlzIHJlc29sdmVkIGFzIGEgVnVlIHNsb3Qgbm9kZQogICAgICBpZiAoZGF0YSAmJiBkYXRhLmF0dHJzICYmIGRhdGEuYXR0cnMuc2xvdCkgewogICAgICAgIGRlbGV0ZSBkYXRhLmF0dHJzLnNsb3Q7CiAgICAgIH0KICAgICAgLy8gbmFtZWQgc2xvdHMgc2hvdWxkIG9ubHkgYmUgcmVzcGVjdGVkIGlmIHRoZSB2bm9kZSB3YXMgcmVuZGVyZWQgaW4gdGhlCiAgICAgIC8vIHNhbWUgY29udGV4dC4KICAgICAgaWYgKChjaGlsZC5jb250ZXh0ID09PSBjb250ZXh0IHx8IGNoaWxkLmZuQ29udGV4dCA9PT0gY29udGV4dCkgJiYKICAgICAgICBkYXRhICYmIGRhdGEuc2xvdCAhPSBudWxsCiAgICAgICkgewogICAgICAgIHZhciBuYW1lID0gZGF0YS5zbG90OwogICAgICAgIHZhciBzbG90ID0gKHNsb3RzW25hbWVdIHx8IChzbG90c1tuYW1lXSA9IFtdKSk7CiAgICAgICAgaWYgKGNoaWxkLnRhZyA9PT0gJ3RlbXBsYXRlJykgewogICAgICAgICAgc2xvdC5wdXNoLmFwcGx5KHNsb3QsIGNoaWxkLmNoaWxkcmVuIHx8IFtdKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2xvdC5wdXNoKGNoaWxkKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgKHNsb3RzLmRlZmF1bHQgfHwgKHNsb3RzLmRlZmF1bHQgPSBbXSkpLnB1c2goY2hpbGQpOwogICAgICB9CiAgICB9CiAgICAvLyBpZ25vcmUgc2xvdHMgdGhhdCBjb250YWlucyBvbmx5IHdoaXRlc3BhY2UKICAgIGZvciAodmFyIG5hbWUkMSBpbiBzbG90cykgewogICAgICBpZiAoc2xvdHNbbmFtZSQxXS5ldmVyeShpc1doaXRlc3BhY2UpKSB7CiAgICAgICAgZGVsZXRlIHNsb3RzW25hbWUkMV07CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBzbG90cwogIH0KCiAgZnVuY3Rpb24gaXNXaGl0ZXNwYWNlIChub2RlKSB7CiAgICByZXR1cm4gKG5vZGUuaXNDb21tZW50ICYmICFub2RlLmFzeW5jRmFjdG9yeSkgfHwgbm9kZS50ZXh0ID09PSAnICcKICB9CgogIC8qICAqLwoKICBmdW5jdGlvbiBub3JtYWxpemVTY29wZWRTbG90cyAoCiAgICBzbG90cywKICAgIG5vcm1hbFNsb3RzLAogICAgcHJldlNsb3RzCiAgKSB7CiAgICB2YXIgcmVzOwogICAgdmFyIGhhc05vcm1hbFNsb3RzID0gT2JqZWN0LmtleXMobm9ybWFsU2xvdHMpLmxlbmd0aCA+IDA7CiAgICB2YXIgaXNTdGFibGUgPSBzbG90cyA/ICEhc2xvdHMuJHN0YWJsZSA6ICFoYXNOb3JtYWxTbG90czsKICAgIHZhciBrZXkgPSBzbG90cyAmJiBzbG90cy4ka2V5OwogICAgaWYgKCFzbG90cykgewogICAgICByZXMgPSB7fTsKICAgIH0gZWxzZSBpZiAoc2xvdHMuX25vcm1hbGl6ZWQpIHsKICAgICAgLy8gZmFzdCBwYXRoIDE6IGNoaWxkIGNvbXBvbmVudCByZS1yZW5kZXIgb25seSwgcGFyZW50IGRpZCBub3QgY2hhbmdlCiAgICAgIHJldHVybiBzbG90cy5fbm9ybWFsaXplZAogICAgfSBlbHNlIGlmICgKICAgICAgaXNTdGFibGUgJiYKICAgICAgcHJldlNsb3RzICYmCiAgICAgIHByZXZTbG90cyAhPT0gZW1wdHlPYmplY3QgJiYKICAgICAga2V5ID09PSBwcmV2U2xvdHMuJGtleSAmJgogICAgICAhaGFzTm9ybWFsU2xvdHMgJiYKICAgICAgIXByZXZTbG90cy4kaGFzTm9ybWFsCiAgICApIHsKICAgICAgLy8gZmFzdCBwYXRoIDI6IHN0YWJsZSBzY29wZWQgc2xvdHMgdy8gbm8gbm9ybWFsIHNsb3RzIHRvIHByb3h5LAogICAgICAvLyBvbmx5IG5lZWQgdG8gbm9ybWFsaXplIG9uY2UKICAgICAgcmV0dXJuIHByZXZTbG90cwogICAgfSBlbHNlIHsKICAgICAgcmVzID0ge307CiAgICAgIGZvciAodmFyIGtleSQxIGluIHNsb3RzKSB7CiAgICAgICAgaWYgKHNsb3RzW2tleSQxXSAmJiBrZXkkMVswXSAhPT0gJyQnKSB7CiAgICAgICAgICByZXNba2V5JDFdID0gbm9ybWFsaXplU2NvcGVkU2xvdChub3JtYWxTbG90cywga2V5JDEsIHNsb3RzW2tleSQxXSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvLyBleHBvc2Ugbm9ybWFsIHNsb3RzIG9uIHNjb3BlZFNsb3RzCiAgICBmb3IgKHZhciBrZXkkMiBpbiBub3JtYWxTbG90cykgewogICAgICBpZiAoIShrZXkkMiBpbiByZXMpKSB7CiAgICAgICAgcmVzW2tleSQyXSA9IHByb3h5Tm9ybWFsU2xvdChub3JtYWxTbG90cywga2V5JDIpOwogICAgICB9CiAgICB9CiAgICAvLyBhdm9yaWF6IHNlZW1zIHRvIG1vY2sgYSBub24tZXh0ZW5zaWJsZSAkc2NvcGVkU2xvdHMgb2JqZWN0CiAgICAvLyBhbmQgd2hlbiB0aGF0IGlzIHBhc3NlZCBkb3duIHRoaXMgd291bGQgY2F1c2UgYW4gZXJyb3IKICAgIGlmIChzbG90cyAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHNsb3RzKSkgewogICAgICAoc2xvdHMpLl9ub3JtYWxpemVkID0gcmVzOwogICAgfQogICAgZGVmKHJlcywgJyRzdGFibGUnLCBpc1N0YWJsZSk7CiAgICBkZWYocmVzLCAnJGtleScsIGtleSk7CiAgICBkZWYocmVzLCAnJGhhc05vcm1hbCcsIGhhc05vcm1hbFNsb3RzKTsKICAgIHJldHVybiByZXMKICB9CgogIGZ1bmN0aW9uIG5vcm1hbGl6ZVNjb3BlZFNsb3Qobm9ybWFsU2xvdHMsIGtleSwgZm4pIHsKICAgIHZhciBub3JtYWxpemVkID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgcmVzID0gYXJndW1lbnRzLmxlbmd0aCA/IGZuLmFwcGx5KG51bGwsIGFyZ3VtZW50cykgOiBmbih7fSk7CiAgICAgIHJlcyA9IHJlcyAmJiB0eXBlb2YgcmVzID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheShyZXMpCiAgICAgICAgPyBbcmVzXSAvLyBzaW5nbGUgdm5vZGUKICAgICAgICA6IG5vcm1hbGl6ZUNoaWxkcmVuKHJlcyk7CiAgICAgIHJldHVybiByZXMgJiYgKAogICAgICAgIHJlcy5sZW5ndGggPT09IDAgfHwKICAgICAgICAocmVzLmxlbmd0aCA9PT0gMSAmJiByZXNbMF0uaXNDb21tZW50KSAvLyAjOTY1OAogICAgICApID8gdW5kZWZpbmVkCiAgICAgICAgOiByZXMKICAgIH07CiAgICAvLyB0aGlzIGlzIGEgc2xvdCB1c2luZyB0aGUgbmV3IHYtc2xvdCBzeW50YXggd2l0aG91dCBzY29wZS4gYWx0aG91Z2ggaXQgaXMKICAgIC8vIGNvbXBpbGVkIGFzIGEgc2NvcGVkIHNsb3QsIHJlbmRlciBmbiB1c2VycyB3b3VsZCBleHBlY3QgaXQgdG8gYmUgcHJlc2VudAogICAgLy8gb24gdGhpcy4kc2xvdHMgYmVjYXVzZSB0aGUgdXNhZ2UgaXMgc2VtYW50aWNhbGx5IGEgbm9ybWFsIHNsb3QuCiAgICBpZiAoZm4ucHJveHkpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5vcm1hbFNsb3RzLCBrZXksIHsKICAgICAgICBnZXQ6IG5vcm1hbGl6ZWQsCiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gbm9ybWFsaXplZAogIH0KCiAgZnVuY3Rpb24gcHJveHlOb3JtYWxTbG90KHNsb3RzLCBrZXkpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBzbG90c1trZXldOyB9CiAgfQoKICAvKiAgKi8KCiAgLyoqCiAgICogUnVudGltZSBoZWxwZXIgZm9yIHJlbmRlcmluZyB2LWZvciBsaXN0cy4KICAgKi8KICBmdW5jdGlvbiByZW5kZXJMaXN0ICgKICAgIHZhbCwKICAgIHJlbmRlcgogICkgewogICAgdmFyIHJldCwgaSwgbCwga2V5cywga2V5OwogICAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSB8fCB0eXBlb2YgdmFsID09PSAnc3RyaW5nJykgewogICAgICByZXQgPSBuZXcgQXJyYXkodmFsLmxlbmd0aCk7CiAgICAgIGZvciAoaSA9IDAsIGwgPSB2YWwubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgcmV0W2ldID0gcmVuZGVyKHZhbFtpXSwgaSk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHsKICAgICAgcmV0ID0gbmV3IEFycmF5KHZhbCk7CiAgICAgIGZvciAoaSA9IDA7IGkgPCB2YWw7IGkrKykgewogICAgICAgIHJldFtpXSA9IHJlbmRlcihpICsgMSwgaSk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoaXNPYmplY3QodmFsKSkgewogICAgICBpZiAoaGFzU3ltYm9sICYmIHZhbFtTeW1ib2wuaXRlcmF0b3JdKSB7CiAgICAgICAgcmV0ID0gW107CiAgICAgICAgdmFyIGl0ZXJhdG9yID0gdmFsW1N5bWJvbC5pdGVyYXRvcl0oKTsKICAgICAgICB2YXIgcmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpOwogICAgICAgIHdoaWxlICghcmVzdWx0LmRvbmUpIHsKICAgICAgICAgIHJldC5wdXNoKHJlbmRlcihyZXN1bHQudmFsdWUsIHJldC5sZW5ndGgpKTsKICAgICAgICAgIHJlc3VsdCA9IGl0ZXJhdG9yLm5leHQoKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAga2V5cyA9IE9iamVjdC5rZXlzKHZhbCk7CiAgICAgICAgcmV0ID0gbmV3IEFycmF5KGtleXMubGVuZ3RoKTsKICAgICAgICBmb3IgKGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICAgIGtleSA9IGtleXNbaV07CiAgICAgICAgICByZXRbaV0gPSByZW5kZXIodmFsW2tleV0sIGtleSwgaSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBpZiAoIWlzRGVmKHJldCkpIHsKICAgICAgcmV0ID0gW107CiAgICB9CiAgICAocmV0KS5faXNWTGlzdCA9IHRydWU7CiAgICByZXR1cm4gcmV0CiAgfQoKICAvKiAgKi8KCiAgLyoqCiAgICogUnVudGltZSBoZWxwZXIgZm9yIHJlbmRlcmluZyA8c2xvdD4KICAgKi8KICBmdW5jdGlvbiByZW5kZXJTbG90ICgKICAgIG5hbWUsCiAgICBmYWxsYmFjaywKICAgIHByb3BzLAogICAgYmluZE9iamVjdAogICkgewogICAgdmFyIHNjb3BlZFNsb3RGbiA9IHRoaXMuJHNjb3BlZFNsb3RzW25hbWVdOwogICAgdmFyIG5vZGVzOwogICAgaWYgKHNjb3BlZFNsb3RGbikgeyAvLyBzY29wZWQgc2xvdAogICAgICBwcm9wcyA9IHByb3BzIHx8IHt9OwogICAgICBpZiAoYmluZE9iamVjdCkgewogICAgICAgIGlmICghaXNPYmplY3QoYmluZE9iamVjdCkpIHsKICAgICAgICAgIHdhcm4oCiAgICAgICAgICAgICdzbG90IHYtYmluZCB3aXRob3V0IGFyZ3VtZW50IGV4cGVjdHMgYW4gT2JqZWN0JywKICAgICAgICAgICAgdGhpcwogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgcHJvcHMgPSBleHRlbmQoZXh0ZW5kKHt9LCBiaW5kT2JqZWN0KSwgcHJvcHMpOwogICAgICB9CiAgICAgIG5vZGVzID0gc2NvcGVkU2xvdEZuKHByb3BzKSB8fCBmYWxsYmFjazsKICAgIH0gZWxzZSB7CiAgICAgIG5vZGVzID0gdGhpcy4kc2xvdHNbbmFtZV0gfHwgZmFsbGJhY2s7CiAgICB9CgogICAgdmFyIHRhcmdldCA9IHByb3BzICYmIHByb3BzLnNsb3Q7CiAgICBpZiAodGFyZ2V0KSB7CiAgICAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScsIHsgc2xvdDogdGFyZ2V0IH0sIG5vZGVzKQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIG5vZGVzCiAgICB9CiAgfQoKICAvKiAgKi8KCiAgLyoqCiAgICogUnVudGltZSBoZWxwZXIgZm9yIHJlc29sdmluZyBmaWx0ZXJzCiAgICovCiAgZnVuY3Rpb24gcmVzb2x2ZUZpbHRlciAoaWQpIHsKICAgIHJldHVybiByZXNvbHZlQXNzZXQodGhpcy4kb3B0aW9ucywgJ2ZpbHRlcnMnLCBpZCwgdHJ1ZSkgfHwgaWRlbnRpdHkKICB9CgogIC8qICAqLwoKICBmdW5jdGlvbiBpc0tleU5vdE1hdGNoIChleHBlY3QsIGFjdHVhbCkgewogICAgaWYgKEFycmF5LmlzQXJyYXkoZXhwZWN0KSkgewogICAgICByZXR1cm4gZXhwZWN0LmluZGV4T2YoYWN0dWFsKSA9PT0gLTEKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBleHBlY3QgIT09IGFjdHVhbAogICAgfQogIH0KCiAgLyoqCiAgICogUnVudGltZSBoZWxwZXIgZm9yIGNoZWNraW5nIGtleUNvZGVzIGZyb20gY29uZmlnLgogICAqIGV4cG9zZWQgYXMgVnVlLnByb3RvdHlwZS5fawogICAqIHBhc3NpbmcgaW4gZXZlbnRLZXlOYW1lIGFzIGxhc3QgYXJndW1lbnQgc2VwYXJhdGVseSBmb3IgYmFja3dhcmRzIGNvbXBhdAogICAqLwogIGZ1bmN0aW9uIGNoZWNrS2V5Q29kZXMgKAogICAgZXZlbnRLZXlDb2RlLAogICAga2V5LAogICAgYnVpbHRJbktleUNvZGUsCiAgICBldmVudEtleU5hbWUsCiAgICBidWlsdEluS2V5TmFtZQogICkgewogICAgdmFyIG1hcHBlZEtleUNvZGUgPSBjb25maWcua2V5Q29kZXNba2V5XSB8fCBidWlsdEluS2V5Q29kZTsKICAgIGlmIChidWlsdEluS2V5TmFtZSAmJiBldmVudEtleU5hbWUgJiYgIWNvbmZpZy5rZXlDb2Rlc1trZXldKSB7CiAgICAgIHJldHVybiBpc0tleU5vdE1hdGNoKGJ1aWx0SW5LZXlOYW1lLCBldmVudEtleU5hbWUpCiAgICB9IGVsc2UgaWYgKG1hcHBlZEtleUNvZGUpIHsKICAgICAgcmV0dXJuIGlzS2V5Tm90TWF0Y2gobWFwcGVkS2V5Q29kZSwgZXZlbnRLZXlDb2RlKQogICAgfSBlbHNlIGlmIChldmVudEtleU5hbWUpIHsKICAgICAgcmV0dXJuIGh5cGhlbmF0ZShldmVudEtleU5hbWUpICE9PSBrZXkKICAgIH0KICB9CgogIC8qICAqLwoKICAvKioKICAgKiBSdW50aW1lIGhlbHBlciBmb3IgbWVyZ2luZyB2LWJpbmQ9Im9iamVjdCIgaW50byBhIFZOb2RlJ3MgZGF0YS4KICAgKi8KICBmdW5jdGlvbiBiaW5kT2JqZWN0UHJvcHMgKAogICAgZGF0YSwKICAgIHRhZywKICAgIHZhbHVlLAogICAgYXNQcm9wLAogICAgaXNTeW5jCiAgKSB7CiAgICBpZiAodmFsdWUpIHsKICAgICAgaWYgKCFpc09iamVjdCh2YWx1ZSkpIHsKICAgICAgICB3YXJuKAogICAgICAgICAgJ3YtYmluZCB3aXRob3V0IGFyZ3VtZW50IGV4cGVjdHMgYW4gT2JqZWN0IG9yIEFycmF5IHZhbHVlJywKICAgICAgICAgIHRoaXMKICAgICAgICApOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgewogICAgICAgICAgdmFsdWUgPSB0b09iamVjdCh2YWx1ZSk7CiAgICAgICAgfQogICAgICAgIHZhciBoYXNoOwogICAgICAgIHZhciBsb29wID0gZnVuY3Rpb24gKCBrZXkgKSB7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIGtleSA9PT0gJ2NsYXNzJyB8fAogICAgICAgICAgICBrZXkgPT09ICdzdHlsZScgfHwKICAgICAgICAgICAgaXNSZXNlcnZlZEF0dHJpYnV0ZShrZXkpCiAgICAgICAgICApIHsKICAgICAgICAgICAgaGFzaCA9IGRhdGE7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YXIgdHlwZSA9IGRhdGEuYXR0cnMgJiYgZGF0YS5hdHRycy50eXBlOwogICAgICAgICAgICBoYXNoID0gYXNQcm9wIHx8IGNvbmZpZy5tdXN0VXNlUHJvcCh0YWcsIHR5cGUsIGtleSkKICAgICAgICAgICAgICA/IGRhdGEuZG9tUHJvcHMgfHwgKGRhdGEuZG9tUHJvcHMgPSB7fSkKICAgICAgICAgICAgICA6IGRhdGEuYXR0cnMgfHwgKGRhdGEuYXR0cnMgPSB7fSk7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgY2FtZWxpemVkS2V5ID0gY2FtZWxpemUoa2V5KTsKICAgICAgICAgIHZhciBoeXBoZW5hdGVkS2V5ID0gaHlwaGVuYXRlKGtleSk7CiAgICAgICAgICBpZiAoIShjYW1lbGl6ZWRLZXkgaW4gaGFzaCkgJiYgIShoeXBoZW5hdGVkS2V5IGluIGhhc2gpKSB7CiAgICAgICAgICAgIGhhc2hba2V5XSA9IHZhbHVlW2tleV07CgogICAgICAgICAgICBpZiAoaXNTeW5jKSB7CiAgICAgICAgICAgICAgdmFyIG9uID0gZGF0YS5vbiB8fCAoZGF0YS5vbiA9IHt9KTsKICAgICAgICAgICAgICBvblsoInVwZGF0ZToiICsga2V5KV0gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgICB2YWx1ZVtrZXldID0gJGV2ZW50OwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIGxvb3AoIGtleSApOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gZGF0YQogIH0KCiAgLyogICovCgogIC8qKgogICAqIFJ1bnRpbWUgaGVscGVyIGZvciByZW5kZXJpbmcgc3RhdGljIHRyZWVzLgogICAqLwogIGZ1bmN0aW9uIHJlbmRlclN0YXRpYyAoCiAgICBpbmRleCwKICAgIGlzSW5Gb3IKICApIHsKICAgIHZhciBjYWNoZWQgPSB0aGlzLl9zdGF0aWNUcmVlcyB8fCAodGhpcy5fc3RhdGljVHJlZXMgPSBbXSk7CiAgICB2YXIgdHJlZSA9IGNhY2hlZFtpbmRleF07CiAgICAvLyBpZiBoYXMgYWxyZWFkeS1yZW5kZXJlZCBzdGF0aWMgdHJlZSBhbmQgbm90IGluc2lkZSB2LWZvciwKICAgIC8vIHdlIGNhbiByZXVzZSB0aGUgc2FtZSB0cmVlLgogICAgaWYgKHRyZWUgJiYgIWlzSW5Gb3IpIHsKICAgICAgcmV0dXJuIHRyZWUKICAgIH0KICAgIC8vIG90aGVyd2lzZSwgcmVuZGVyIGEgZnJlc2ggdHJlZS4KICAgIHRyZWUgPSBjYWNoZWRbaW5kZXhdID0gdGhpcy4kb3B0aW9ucy5zdGF0aWNSZW5kZXJGbnNbaW5kZXhdLmNhbGwoCiAgICAgIHRoaXMuX3JlbmRlclByb3h5LAogICAgICBudWxsLAogICAgICB0aGlzIC8vIGZvciByZW5kZXIgZm5zIGdlbmVyYXRlZCBmb3IgZnVuY3Rpb25hbCBjb21wb25lbnQgdGVtcGxhdGVzCiAgICApOwogICAgbWFya1N0YXRpYyh0cmVlLCAoIl9fc3RhdGljX18iICsgaW5kZXgpLCBmYWxzZSk7CiAgICByZXR1cm4gdHJlZQogIH0KCiAgLyoqCiAgICogUnVudGltZSBoZWxwZXIgZm9yIHYtb25jZS4KICAgKiBFZmZlY3RpdmVseSBpdCBtZWFucyBtYXJraW5nIHRoZSBub2RlIGFzIHN0YXRpYyB3aXRoIGEgdW5pcXVlIGtleS4KICAgKi8KICBmdW5jdGlvbiBtYXJrT25jZSAoCiAgICB0cmVlLAogICAgaW5kZXgsCiAgICBrZXkKICApIHsKICAgIG1hcmtTdGF0aWModHJlZSwgKCJfX29uY2VfXyIgKyBpbmRleCArIChrZXkgPyAoIl8iICsga2V5KSA6ICIiKSksIHRydWUpOwogICAgcmV0dXJuIHRyZWUKICB9CgogIGZ1bmN0aW9uIG1hcmtTdGF0aWMgKAogICAgdHJlZSwKICAgIGtleSwKICAgIGlzT25jZQogICkgewogICAgaWYgKEFycmF5LmlzQXJyYXkodHJlZSkpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmVlLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRyZWVbaV0gJiYgdHlwZW9mIHRyZWVbaV0gIT09ICdzdHJpbmcnKSB7CiAgICAgICAgICBtYXJrU3RhdGljTm9kZSh0cmVlW2ldLCAoa2V5ICsgIl8iICsgaSksIGlzT25jZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgewogICAgICBtYXJrU3RhdGljTm9kZSh0cmVlLCBrZXksIGlzT25jZSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBtYXJrU3RhdGljTm9kZSAobm9kZSwga2V5LCBpc09uY2UpIHsKICAgIG5vZGUuaXNTdGF0aWMgPSB0cnVlOwogICAgbm9kZS5rZXkgPSBrZXk7CiAgICBub2RlLmlzT25jZSA9IGlzT25jZTsKICB9CgogIC8qICAqLwoKICBmdW5jdGlvbiBiaW5kT2JqZWN0TGlzdGVuZXJzIChkYXRhLCB2YWx1ZSkgewogICAgaWYgKHZhbHVlKSB7CiAgICAgIGlmICghaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHsKICAgICAgICB3YXJuKAogICAgICAgICAgJ3Ytb24gd2l0aG91dCBhcmd1bWVudCBleHBlY3RzIGFuIE9iamVjdCB2YWx1ZScsCiAgICAgICAgICB0aGlzCiAgICAgICAgKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgb24gPSBkYXRhLm9uID0gZGF0YS5vbiA/IGV4dGVuZCh7fSwgZGF0YS5vbikgOiB7fTsKICAgICAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHsKICAgICAgICAgIHZhciBleGlzdGluZyA9IG9uW2tleV07CiAgICAgICAgICB2YXIgb3VycyA9IHZhbHVlW2tleV07CiAgICAgICAgICBvbltrZXldID0gZXhpc3RpbmcgPyBbXS5jb25jYXQoZXhpc3RpbmcsIG91cnMpIDogb3VyczsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBkYXRhCiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gcmVzb2x2ZVNjb3BlZFNsb3RzICgKICAgIGZucywgLy8gc2VlIGZsb3cvdm5vZGUKICAgIHJlcywKICAgIC8vIHRoZSBmb2xsb3dpbmcgYXJlIGFkZGVkIGluIDIuNgogICAgaGFzRHluYW1pY0tleXMsCiAgICBjb250ZW50SGFzaEtleQogICkgewogICAgcmVzID0gcmVzIHx8IHsgJHN0YWJsZTogIWhhc0R5bmFtaWNLZXlzIH07CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZucy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgc2xvdCA9IGZuc1tpXTsKICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc2xvdCkpIHsKICAgICAgICByZXNvbHZlU2NvcGVkU2xvdHMoc2xvdCwgcmVzLCBoYXNEeW5hbWljS2V5cyk7CiAgICAgIH0gZWxzZSBpZiAoc2xvdCkgewogICAgICAgIC8vIG1hcmtlciBmb3IgcmV2ZXJzZSBwcm94eWluZyB2LXNsb3Qgd2l0aG91dCBzY29wZSBvbiB0aGlzLiRzbG90cwogICAgICAgIGlmIChzbG90LnByb3h5KSB7CiAgICAgICAgICBzbG90LmZuLnByb3h5ID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmVzW3Nsb3Qua2V5XSA9IHNsb3QuZm47CiAgICAgIH0KICAgIH0KICAgIGlmIChjb250ZW50SGFzaEtleSkgewogICAgICAocmVzKS4ka2V5ID0gY29udGVudEhhc2hLZXk7CiAgICB9CiAgICByZXR1cm4gcmVzCiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gYmluZER5bmFtaWNLZXlzIChiYXNlT2JqLCB2YWx1ZXMpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgaSArPSAyKSB7CiAgICAgIHZhciBrZXkgPSB2YWx1ZXNbaV07CiAgICAgIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJyAmJiBrZXkpIHsKICAgICAgICBiYXNlT2JqW3ZhbHVlc1tpXV0gPSB2YWx1ZXNbaSArIDFdOwogICAgICB9IGVsc2UgaWYgKGtleSAhPT0gJycgJiYga2V5ICE9PSBudWxsKSB7CiAgICAgICAgLy8gbnVsbCBpcyBhIHNwZWNpYWwgdmFsdWUgZm9yIGV4cGxpY2l0bHkgcmVtb3ZpbmcgYSBiaW5kaW5nCiAgICAgICAgd2FybigKICAgICAgICAgICgiSW52YWxpZCB2YWx1ZSBmb3IgZHluYW1pYyBkaXJlY3RpdmUgYXJndW1lbnQgKGV4cGVjdGVkIHN0cmluZyBvciBudWxsKTogIiArIGtleSksCiAgICAgICAgICB0aGlzCiAgICAgICAgKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGJhc2VPYmoKICB9CgogIC8vIGhlbHBlciB0byBkeW5hbWljYWxseSBhcHBlbmQgbW9kaWZpZXIgcnVudGltZSBtYXJrZXJzIHRvIGV2ZW50IG5hbWVzLgogIC8vIGVuc3VyZSBvbmx5IGFwcGVuZCB3aGVuIHZhbHVlIGlzIGFscmVhZHkgc3RyaW5nLCBvdGhlcndpc2UgaXQgd2lsbCBiZSBjYXN0CiAgLy8gdG8gc3RyaW5nIGFuZCBjYXVzZSB0aGUgdHlwZSBjaGVjayB0byBtaXNzLgogIGZ1bmN0aW9uIHByZXBlbmRNb2RpZmllciAodmFsdWUsIHN5bWJvbCkgewogICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyBzeW1ib2wgKyB2YWx1ZSA6IHZhbHVlCiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gaW5zdGFsbFJlbmRlckhlbHBlcnMgKHRhcmdldCkgewogICAgdGFyZ2V0Ll9vID0gbWFya09uY2U7CiAgICB0YXJnZXQuX24gPSB0b051bWJlcjsKICAgIHRhcmdldC5fcyA9IHRvU3RyaW5nOwogICAgdGFyZ2V0Ll9sID0gcmVuZGVyTGlzdDsKICAgIHRhcmdldC5fdCA9IHJlbmRlclNsb3Q7CiAgICB0YXJnZXQuX3EgPSBsb29zZUVxdWFsOwogICAgdGFyZ2V0Ll9pID0gbG9vc2VJbmRleE9mOwogICAgdGFyZ2V0Ll9tID0gcmVuZGVyU3RhdGljOwogICAgdGFyZ2V0Ll9mID0gcmVzb2x2ZUZpbHRlcjsKICAgIHRhcmdldC5fayA9IGNoZWNrS2V5Q29kZXM7CiAgICB0YXJnZXQuX2IgPSBiaW5kT2JqZWN0UHJvcHM7CiAgICB0YXJnZXQuX3YgPSBjcmVhdGVUZXh0Vk5vZGU7CiAgICB0YXJnZXQuX2UgPSBjcmVhdGVFbXB0eVZOb2RlOwogICAgdGFyZ2V0Ll91ID0gcmVzb2x2ZVNjb3BlZFNsb3RzOwogICAgdGFyZ2V0Ll9nID0gYmluZE9iamVjdExpc3RlbmVyczsKICAgIHRhcmdldC5fZCA9IGJpbmREeW5hbWljS2V5czsKICAgIHRhcmdldC5fcCA9IHByZXBlbmRNb2RpZmllcjsKICB9CgogIC8qICAqLwoKICBmdW5jdGlvbiBGdW5jdGlvbmFsUmVuZGVyQ29udGV4dCAoCiAgICBkYXRhLAogICAgcHJvcHMsCiAgICBjaGlsZHJlbiwKICAgIHBhcmVudCwKICAgIEN0b3IKICApIHsKICAgIHZhciB0aGlzJDEgPSB0aGlzOwoKICAgIHZhciBvcHRpb25zID0gQ3Rvci5vcHRpb25zOwogICAgLy8gZW5zdXJlIHRoZSBjcmVhdGVFbGVtZW50IGZ1bmN0aW9uIGluIGZ1bmN0aW9uYWwgY29tcG9uZW50cwogICAgLy8gZ2V0cyBhIHVuaXF1ZSBjb250ZXh0IC0gdGhpcyBpcyBuZWNlc3NhcnkgZm9yIGNvcnJlY3QgbmFtZWQgc2xvdCBjaGVjawogICAgdmFyIGNvbnRleHRWbTsKICAgIGlmIChoYXNPd24ocGFyZW50LCAnX3VpZCcpKSB7CiAgICAgIGNvbnRleHRWbSA9IE9iamVjdC5jcmVhdGUocGFyZW50KTsKICAgICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lCiAgICAgIGNvbnRleHRWbS5fb3JpZ2luYWwgPSBwYXJlbnQ7CiAgICB9IGVsc2UgewogICAgICAvLyB0aGUgY29udGV4dCB2bSBwYXNzZWQgaW4gaXMgYSBmdW5jdGlvbmFsIGNvbnRleHQgYXMgd2VsbC4KICAgICAgLy8gaW4gdGhpcyBjYXNlIHdlIHdhbnQgdG8gbWFrZSBzdXJlIHdlIGFyZSBhYmxlIHRvIGdldCBhIGhvbGQgdG8gdGhlCiAgICAgIC8vIHJlYWwgY29udGV4dCBpbnN0YW5jZS4KICAgICAgY29udGV4dFZtID0gcGFyZW50OwogICAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmUKICAgICAgcGFyZW50ID0gcGFyZW50Ll9vcmlnaW5hbDsKICAgIH0KICAgIHZhciBpc0NvbXBpbGVkID0gaXNUcnVlKG9wdGlvbnMuX2NvbXBpbGVkKTsKICAgIHZhciBuZWVkTm9ybWFsaXphdGlvbiA9ICFpc0NvbXBpbGVkOwoKICAgIHRoaXMuZGF0YSA9IGRhdGE7CiAgICB0aGlzLnByb3BzID0gcHJvcHM7CiAgICB0aGlzLmNoaWxkcmVuID0gY2hpbGRyZW47CiAgICB0aGlzLnBhcmVudCA9IHBhcmVudDsKICAgIHRoaXMubGlzdGVuZXJzID0gZGF0YS5vbiB8fCBlbXB0eU9iamVjdDsKICAgIHRoaXMuaW5qZWN0aW9ucyA9IHJlc29sdmVJbmplY3Qob3B0aW9ucy5pbmplY3QsIHBhcmVudCk7CiAgICB0aGlzLnNsb3RzID0gZnVuY3Rpb24gKCkgewogICAgICBpZiAoIXRoaXMkMS4kc2xvdHMpIHsKICAgICAgICBub3JtYWxpemVTY29wZWRTbG90cygKICAgICAgICAgIGRhdGEuc2NvcGVkU2xvdHMsCiAgICAgICAgICB0aGlzJDEuJHNsb3RzID0gcmVzb2x2ZVNsb3RzKGNoaWxkcmVuLCBwYXJlbnQpCiAgICAgICAgKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcyQxLiRzbG90cwogICAgfTsKCiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3Njb3BlZFNsb3RzJywgKHsKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQgKCkgewogICAgICAgIHJldHVybiBub3JtYWxpemVTY29wZWRTbG90cyhkYXRhLnNjb3BlZFNsb3RzLCB0aGlzLnNsb3RzKCkpCiAgICAgIH0KICAgIH0pKTsKCiAgICAvLyBzdXBwb3J0IGZvciBjb21waWxlZCBmdW5jdGlvbmFsIHRlbXBsYXRlCiAgICBpZiAoaXNDb21waWxlZCkgewogICAgICAvLyBleHBvc2luZyAkb3B0aW9ucyBmb3IgcmVuZGVyU3RhdGljKCkKICAgICAgdGhpcy4kb3B0aW9ucyA9IG9wdGlvbnM7CiAgICAgIC8vIHByZS1yZXNvbHZlIHNsb3RzIGZvciByZW5kZXJTbG90KCkKICAgICAgdGhpcy4kc2xvdHMgPSB0aGlzLnNsb3RzKCk7CiAgICAgIHRoaXMuJHNjb3BlZFNsb3RzID0gbm9ybWFsaXplU2NvcGVkU2xvdHMoZGF0YS5zY29wZWRTbG90cywgdGhpcy4kc2xvdHMpOwogICAgfQoKICAgIGlmIChvcHRpb25zLl9zY29wZUlkKSB7CiAgICAgIHRoaXMuX2MgPSBmdW5jdGlvbiAoYSwgYiwgYywgZCkgewogICAgICAgIHZhciB2bm9kZSA9IGNyZWF0ZUVsZW1lbnQoY29udGV4dFZtLCBhLCBiLCBjLCBkLCBuZWVkTm9ybWFsaXphdGlvbik7CiAgICAgICAgaWYgKHZub2RlICYmICFBcnJheS5pc0FycmF5KHZub2RlKSkgewogICAgICAgICAgdm5vZGUuZm5TY29wZUlkID0gb3B0aW9ucy5fc2NvcGVJZDsKICAgICAgICAgIHZub2RlLmZuQ29udGV4dCA9IHBhcmVudDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHZub2RlCiAgICAgIH07CiAgICB9IGVsc2UgewogICAgICB0aGlzLl9jID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQpIHsgcmV0dXJuIGNyZWF0ZUVsZW1lbnQoY29udGV4dFZtLCBhLCBiLCBjLCBkLCBuZWVkTm9ybWFsaXphdGlvbik7IH07CiAgICB9CiAgfQoKICBpbnN0YWxsUmVuZGVySGVscGVycyhGdW5jdGlvbmFsUmVuZGVyQ29udGV4dC5wcm90b3R5cGUpOwoKICBmdW5jdGlvbiBjcmVhdGVGdW5jdGlvbmFsQ29tcG9uZW50ICgKICAgIEN0b3IsCiAgICBwcm9wc0RhdGEsCiAgICBkYXRhLAogICAgY29udGV4dFZtLAogICAgY2hpbGRyZW4KICApIHsKICAgIHZhciBvcHRpb25zID0gQ3Rvci5vcHRpb25zOwogICAgdmFyIHByb3BzID0ge307CiAgICB2YXIgcHJvcE9wdGlvbnMgPSBvcHRpb25zLnByb3BzOwogICAgaWYgKGlzRGVmKHByb3BPcHRpb25zKSkgewogICAgICBmb3IgKHZhciBrZXkgaW4gcHJvcE9wdGlvbnMpIHsKICAgICAgICBwcm9wc1trZXldID0gdmFsaWRhdGVQcm9wKGtleSwgcHJvcE9wdGlvbnMsIHByb3BzRGF0YSB8fCBlbXB0eU9iamVjdCk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmIChpc0RlZihkYXRhLmF0dHJzKSkgeyBtZXJnZVByb3BzKHByb3BzLCBkYXRhLmF0dHJzKTsgfQogICAgICBpZiAoaXNEZWYoZGF0YS5wcm9wcykpIHsgbWVyZ2VQcm9wcyhwcm9wcywgZGF0YS5wcm9wcyk7IH0KICAgIH0KCiAgICB2YXIgcmVuZGVyQ29udGV4dCA9IG5ldyBGdW5jdGlvbmFsUmVuZGVyQ29udGV4dCgKICAgICAgZGF0YSwKICAgICAgcHJvcHMsCiAgICAgIGNoaWxkcmVuLAogICAgICBjb250ZXh0Vm0sCiAgICAgIEN0b3IKICAgICk7CgogICAgdmFyIHZub2RlID0gb3B0aW9ucy5yZW5kZXIuY2FsbChudWxsLCByZW5kZXJDb250ZXh0Ll9jLCByZW5kZXJDb250ZXh0KTsKCiAgICBpZiAodm5vZGUgaW5zdGFuY2VvZiBWTm9kZSkgewogICAgICByZXR1cm4gY2xvbmVBbmRNYXJrRnVuY3Rpb25hbFJlc3VsdCh2bm9kZSwgZGF0YSwgcmVuZGVyQ29udGV4dC5wYXJlbnQsIG9wdGlvbnMsIHJlbmRlckNvbnRleHQpCiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodm5vZGUpKSB7CiAgICAgIHZhciB2bm9kZXMgPSBub3JtYWxpemVDaGlsZHJlbih2bm9kZSkgfHwgW107CiAgICAgIHZhciByZXMgPSBuZXcgQXJyYXkodm5vZGVzLmxlbmd0aCk7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm5vZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgcmVzW2ldID0gY2xvbmVBbmRNYXJrRnVuY3Rpb25hbFJlc3VsdCh2bm9kZXNbaV0sIGRhdGEsIHJlbmRlckNvbnRleHQucGFyZW50LCBvcHRpb25zLCByZW5kZXJDb250ZXh0KTsKICAgICAgfQogICAgICByZXR1cm4gcmVzCiAgICB9CiAgfQoKICBmdW5jdGlvbiBjbG9uZUFuZE1hcmtGdW5jdGlvbmFsUmVzdWx0ICh2bm9kZSwgZGF0YSwgY29udGV4dFZtLCBvcHRpb25zLCByZW5kZXJDb250ZXh0KSB7CiAgICAvLyAjNzgxNyBjbG9uZSBub2RlIGJlZm9yZSBzZXR0aW5nIGZuQ29udGV4dCwgb3RoZXJ3aXNlIGlmIHRoZSBub2RlIGlzIHJldXNlZAogICAgLy8gKGUuZy4gaXQgd2FzIGZyb20gYSBjYWNoZWQgbm9ybWFsIHNsb3QpIHRoZSBmbkNvbnRleHQgY2F1c2VzIG5hbWVkIHNsb3RzCiAgICAvLyB0aGF0IHNob3VsZCBub3QgYmUgbWF0Y2hlZCB0byBtYXRjaC4KICAgIHZhciBjbG9uZSA9IGNsb25lVk5vZGUodm5vZGUpOwogICAgY2xvbmUuZm5Db250ZXh0ID0gY29udGV4dFZtOwogICAgY2xvbmUuZm5PcHRpb25zID0gb3B0aW9uczsKICAgIHsKICAgICAgKGNsb25lLmRldnRvb2xzTWV0YSA9IGNsb25lLmRldnRvb2xzTWV0YSB8fCB7fSkucmVuZGVyQ29udGV4dCA9IHJlbmRlckNvbnRleHQ7CiAgICB9CiAgICBpZiAoZGF0YS5zbG90KSB7CiAgICAgIChjbG9uZS5kYXRhIHx8IChjbG9uZS5kYXRhID0ge30pKS5zbG90ID0gZGF0YS5zbG90OwogICAgfQogICAgcmV0dXJuIGNsb25lCiAgfQoKICBmdW5jdGlvbiBtZXJnZVByb3BzICh0bywgZnJvbSkgewogICAgZm9yICh2YXIga2V5IGluIGZyb20pIHsKICAgICAgdG9bY2FtZWxpemUoa2V5KV0gPSBmcm9tW2tleV07CiAgICB9CiAgfQoKICAvKiAgKi8KCiAgLyogICovCgogIC8qICAqLwoKICAvKiAgKi8KCiAgLy8gaW5saW5lIGhvb2tzIHRvIGJlIGludm9rZWQgb24gY29tcG9uZW50IFZOb2RlcyBkdXJpbmcgcGF0Y2gKICB2YXIgY29tcG9uZW50Vk5vZGVIb29rcyA9IHsKICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQgKHZub2RlLCBoeWRyYXRpbmcpIHsKICAgICAgaWYgKAogICAgICAgIHZub2RlLmNvbXBvbmVudEluc3RhbmNlICYmCiAgICAgICAgIXZub2RlLmNvbXBvbmVudEluc3RhbmNlLl9pc0Rlc3Ryb3llZCAmJgogICAgICAgIHZub2RlLmRhdGEua2VlcEFsaXZlCiAgICAgICkgewogICAgICAgIC8vIGtlcHQtYWxpdmUgY29tcG9uZW50cywgdHJlYXQgYXMgYSBwYXRjaAogICAgICAgIHZhciBtb3VudGVkTm9kZSA9IHZub2RlOyAvLyB3b3JrIGFyb3VuZCBmbG93CiAgICAgICAgY29tcG9uZW50Vk5vZGVIb29rcy5wcmVwYXRjaChtb3VudGVkTm9kZSwgbW91bnRlZE5vZGUpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBjaGlsZCA9IHZub2RlLmNvbXBvbmVudEluc3RhbmNlID0gY3JlYXRlQ29tcG9uZW50SW5zdGFuY2VGb3JWbm9kZSgKICAgICAgICAgIHZub2RlLAogICAgICAgICAgYWN0aXZlSW5zdGFuY2UKICAgICAgICApOwogICAgICAgIGNoaWxkLiRtb3VudChoeWRyYXRpbmcgPyB2bm9kZS5lbG0gOiB1bmRlZmluZWQsIGh5ZHJhdGluZyk7CiAgICAgIH0KICAgIH0sCgogICAgcHJlcGF0Y2g6IGZ1bmN0aW9uIHByZXBhdGNoIChvbGRWbm9kZSwgdm5vZGUpIHsKICAgICAgdmFyIG9wdGlvbnMgPSB2bm9kZS5jb21wb25lbnRPcHRpb25zOwogICAgICB2YXIgY2hpbGQgPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSA9IG9sZFZub2RlLmNvbXBvbmVudEluc3RhbmNlOwogICAgICB1cGRhdGVDaGlsZENvbXBvbmVudCgKICAgICAgICBjaGlsZCwKICAgICAgICBvcHRpb25zLnByb3BzRGF0YSwgLy8gdXBkYXRlZCBwcm9wcwogICAgICAgIG9wdGlvbnMubGlzdGVuZXJzLCAvLyB1cGRhdGVkIGxpc3RlbmVycwogICAgICAgIHZub2RlLCAvLyBuZXcgcGFyZW50IHZub2RlCiAgICAgICAgb3B0aW9ucy5jaGlsZHJlbiAvLyBuZXcgY2hpbGRyZW4KICAgICAgKTsKICAgIH0sCgogICAgaW5zZXJ0OiBmdW5jdGlvbiBpbnNlcnQgKHZub2RlKSB7CiAgICAgIHZhciBjb250ZXh0ID0gdm5vZGUuY29udGV4dDsKICAgICAgdmFyIGNvbXBvbmVudEluc3RhbmNlID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2U7CiAgICAgIGlmICghY29tcG9uZW50SW5zdGFuY2UuX2lzTW91bnRlZCkgewogICAgICAgIGNvbXBvbmVudEluc3RhbmNlLl9pc01vdW50ZWQgPSB0cnVlOwogICAgICAgIGNhbGxIb29rKGNvbXBvbmVudEluc3RhbmNlLCAnbW91bnRlZCcpOwogICAgICB9CiAgICAgIGlmICh2bm9kZS5kYXRhLmtlZXBBbGl2ZSkgewogICAgICAgIGlmIChjb250ZXh0Ll9pc01vdW50ZWQpIHsKICAgICAgICAgIC8vIHZ1ZS1yb3V0ZXIjMTIxMgogICAgICAgICAgLy8gRHVyaW5nIHVwZGF0ZXMsIGEga2VwdC1hbGl2ZSBjb21wb25lbnQncyBjaGlsZCBjb21wb25lbnRzIG1heQogICAgICAgICAgLy8gY2hhbmdlLCBzbyBkaXJlY3RseSB3YWxraW5nIHRoZSB0cmVlIGhlcmUgbWF5IGNhbGwgYWN0aXZhdGVkIGhvb2tzCiAgICAgICAgICAvLyBvbiBpbmNvcnJlY3QgY2hpbGRyZW4uIEluc3RlYWQgd2UgcHVzaCB0aGVtIGludG8gYSBxdWV1ZSB3aGljaCB3aWxsCiAgICAgICAgICAvLyBiZSBwcm9jZXNzZWQgYWZ0ZXIgdGhlIHdob2xlIHBhdGNoIHByb2Nlc3MgZW5kZWQuCiAgICAgICAgICBxdWV1ZUFjdGl2YXRlZENvbXBvbmVudChjb21wb25lbnRJbnN0YW5jZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFjdGl2YXRlQ2hpbGRDb21wb25lbnQoY29tcG9uZW50SW5zdGFuY2UsIHRydWUgLyogZGlyZWN0ICovKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSAodm5vZGUpIHsKICAgICAgdmFyIGNvbXBvbmVudEluc3RhbmNlID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2U7CiAgICAgIGlmICghY29tcG9uZW50SW5zdGFuY2UuX2lzRGVzdHJveWVkKSB7CiAgICAgICAgaWYgKCF2bm9kZS5kYXRhLmtlZXBBbGl2ZSkgewogICAgICAgICAgY29tcG9uZW50SW5zdGFuY2UuJGRlc3Ryb3koKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGVhY3RpdmF0ZUNoaWxkQ29tcG9uZW50KGNvbXBvbmVudEluc3RhbmNlLCB0cnVlIC8qIGRpcmVjdCAqLyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgdmFyIGhvb2tzVG9NZXJnZSA9IE9iamVjdC5rZXlzKGNvbXBvbmVudFZOb2RlSG9va3MpOwoKICBmdW5jdGlvbiBjcmVhdGVDb21wb25lbnQgKAogICAgQ3RvciwKICAgIGRhdGEsCiAgICBjb250ZXh0LAogICAgY2hpbGRyZW4sCiAgICB0YWcKICApIHsKICAgIGlmIChpc1VuZGVmKEN0b3IpKSB7CiAgICAgIHJldHVybgogICAgfQoKICAgIHZhciBiYXNlQ3RvciA9IGNvbnRleHQuJG9wdGlvbnMuX2Jhc2U7CgogICAgLy8gcGxhaW4gb3B0aW9ucyBvYmplY3Q6IHR1cm4gaXQgaW50byBhIGNvbnN0cnVjdG9yCiAgICBpZiAoaXNPYmplY3QoQ3RvcikpIHsKICAgICAgQ3RvciA9IGJhc2VDdG9yLmV4dGVuZChDdG9yKTsKICAgIH0KCiAgICAvLyBpZiBhdCB0aGlzIHN0YWdlIGl0J3Mgbm90IGEgY29uc3RydWN0b3Igb3IgYW4gYXN5bmMgY29tcG9uZW50IGZhY3RvcnksCiAgICAvLyByZWplY3QuCiAgICBpZiAodHlwZW9mIEN0b3IgIT09ICdmdW5jdGlvbicpIHsKICAgICAgewogICAgICAgIHdhcm4oKCJJbnZhbGlkIENvbXBvbmVudCBkZWZpbml0aW9uOiAiICsgKFN0cmluZyhDdG9yKSkpLCBjb250ZXh0KTsKICAgICAgfQogICAgICByZXR1cm4KICAgIH0KCiAgICAvLyBhc3luYyBjb21wb25lbnQKICAgIHZhciBhc3luY0ZhY3Rvcnk7CiAgICBpZiAoaXNVbmRlZihDdG9yLmNpZCkpIHsKICAgICAgYXN5bmNGYWN0b3J5ID0gQ3RvcjsKICAgICAgQ3RvciA9IHJlc29sdmVBc3luY0NvbXBvbmVudChhc3luY0ZhY3RvcnksIGJhc2VDdG9yKTsKICAgICAgaWYgKEN0b3IgPT09IHVuZGVmaW5lZCkgewogICAgICAgIC8vIHJldHVybiBhIHBsYWNlaG9sZGVyIG5vZGUgZm9yIGFzeW5jIGNvbXBvbmVudCwgd2hpY2ggaXMgcmVuZGVyZWQKICAgICAgICAvLyBhcyBhIGNvbW1lbnQgbm9kZSBidXQgcHJlc2VydmVzIGFsbCB0aGUgcmF3IGluZm9ybWF0aW9uIGZvciB0aGUgbm9kZS4KICAgICAgICAvLyB0aGUgaW5mb3JtYXRpb24gd2lsbCBiZSB1c2VkIGZvciBhc3luYyBzZXJ2ZXItcmVuZGVyaW5nIGFuZCBoeWRyYXRpb24uCiAgICAgICAgcmV0dXJuIGNyZWF0ZUFzeW5jUGxhY2Vob2xkZXIoCiAgICAgICAgICBhc3luY0ZhY3RvcnksCiAgICAgICAgICBkYXRhLAogICAgICAgICAgY29udGV4dCwKICAgICAgICAgIGNoaWxkcmVuLAogICAgICAgICAgdGFnCiAgICAgICAgKQogICAgICB9CiAgICB9CgogICAgZGF0YSA9IGRhdGEgfHwge307CgogICAgLy8gcmVzb2x2ZSBjb25zdHJ1Y3RvciBvcHRpb25zIGluIGNhc2UgZ2xvYmFsIG1peGlucyBhcmUgYXBwbGllZCBhZnRlcgogICAgLy8gY29tcG9uZW50IGNvbnN0cnVjdG9yIGNyZWF0aW9uCiAgICByZXNvbHZlQ29uc3RydWN0b3JPcHRpb25zKEN0b3IpOwoKICAgIC8vIHRyYW5zZm9ybSBjb21wb25lbnQgdi1tb2RlbCBkYXRhIGludG8gcHJvcHMgJiBldmVudHMKICAgIGlmIChpc0RlZihkYXRhLm1vZGVsKSkgewogICAgICB0cmFuc2Zvcm1Nb2RlbChDdG9yLm9wdGlvbnMsIGRhdGEpOwogICAgfQoKICAgIC8vIGV4dHJhY3QgcHJvcHMKICAgIHZhciBwcm9wc0RhdGEgPSBleHRyYWN0UHJvcHNGcm9tVk5vZGVEYXRhKGRhdGEsIEN0b3IsIHRhZyk7CgogICAgLy8gZnVuY3Rpb25hbCBjb21wb25lbnQKICAgIGlmIChpc1RydWUoQ3Rvci5vcHRpb25zLmZ1bmN0aW9uYWwpKSB7CiAgICAgIHJldHVybiBjcmVhdGVGdW5jdGlvbmFsQ29tcG9uZW50KEN0b3IsIHByb3BzRGF0YSwgZGF0YSwgY29udGV4dCwgY2hpbGRyZW4pCiAgICB9CgogICAgLy8gZXh0cmFjdCBsaXN0ZW5lcnMsIHNpbmNlIHRoZXNlIG5lZWRzIHRvIGJlIHRyZWF0ZWQgYXMKICAgIC8vIGNoaWxkIGNvbXBvbmVudCBsaXN0ZW5lcnMgaW5zdGVhZCBvZiBET00gbGlzdGVuZXJzCiAgICB2YXIgbGlzdGVuZXJzID0gZGF0YS5vbjsKICAgIC8vIHJlcGxhY2Ugd2l0aCBsaXN0ZW5lcnMgd2l0aCAubmF0aXZlIG1vZGlmaWVyCiAgICAvLyBzbyBpdCBnZXRzIHByb2Nlc3NlZCBkdXJpbmcgcGFyZW50IGNvbXBvbmVudCBwYXRjaC4KICAgIGRhdGEub24gPSBkYXRhLm5hdGl2ZU9uOwoKICAgIGlmIChpc1RydWUoQ3Rvci5vcHRpb25zLmFic3RyYWN0KSkgewogICAgICAvLyBhYnN0cmFjdCBjb21wb25lbnRzIGRvIG5vdCBrZWVwIGFueXRoaW5nCiAgICAgIC8vIG90aGVyIHRoYW4gcHJvcHMgJiBsaXN0ZW5lcnMgJiBzbG90CgogICAgICAvLyB3b3JrIGFyb3VuZCBmbG93CiAgICAgIHZhciBzbG90ID0gZGF0YS5zbG90OwogICAgICBkYXRhID0ge307CiAgICAgIGlmIChzbG90KSB7CiAgICAgICAgZGF0YS5zbG90ID0gc2xvdDsKICAgICAgfQogICAgfQoKICAgIC8vIGluc3RhbGwgY29tcG9uZW50IG1hbmFnZW1lbnQgaG9va3Mgb250byB0aGUgcGxhY2Vob2xkZXIgbm9kZQogICAgaW5zdGFsbENvbXBvbmVudEhvb2tzKGRhdGEpOwoKICAgIC8vIHJldHVybiBhIHBsYWNlaG9sZGVyIHZub2RlCiAgICB2YXIgbmFtZSA9IEN0b3Iub3B0aW9ucy5uYW1lIHx8IHRhZzsKICAgIHZhciB2bm9kZSA9IG5ldyBWTm9kZSgKICAgICAgKCJ2dWUtY29tcG9uZW50LSIgKyAoQ3Rvci5jaWQpICsgKG5hbWUgPyAoIi0iICsgbmFtZSkgOiAnJykpLAogICAgICBkYXRhLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb250ZXh0LAogICAgICB7IEN0b3I6IEN0b3IsIHByb3BzRGF0YTogcHJvcHNEYXRhLCBsaXN0ZW5lcnM6IGxpc3RlbmVycywgdGFnOiB0YWcsIGNoaWxkcmVuOiBjaGlsZHJlbiB9LAogICAgICBhc3luY0ZhY3RvcnkKICAgICk7CgogICAgcmV0dXJuIHZub2RlCiAgfQoKICBmdW5jdGlvbiBjcmVhdGVDb21wb25lbnRJbnN0YW5jZUZvclZub2RlICgKICAgIHZub2RlLCAvLyB3ZSBrbm93IGl0J3MgTW91bnRlZENvbXBvbmVudFZOb2RlIGJ1dCBmbG93IGRvZXNuJ3QKICAgIHBhcmVudCAvLyBhY3RpdmVJbnN0YW5jZSBpbiBsaWZlY3ljbGUgc3RhdGUKICApIHsKICAgIHZhciBvcHRpb25zID0gewogICAgICBfaXNDb21wb25lbnQ6IHRydWUsCiAgICAgIF9wYXJlbnRWbm9kZTogdm5vZGUsCiAgICAgIHBhcmVudDogcGFyZW50CiAgICB9OwogICAgLy8gY2hlY2sgaW5saW5lLXRlbXBsYXRlIHJlbmRlciBmdW5jdGlvbnMKICAgIHZhciBpbmxpbmVUZW1wbGF0ZSA9IHZub2RlLmRhdGEuaW5saW5lVGVtcGxhdGU7CiAgICBpZiAoaXNEZWYoaW5saW5lVGVtcGxhdGUpKSB7CiAgICAgIG9wdGlvbnMucmVuZGVyID0gaW5saW5lVGVtcGxhdGUucmVuZGVyOwogICAgICBvcHRpb25zLnN0YXRpY1JlbmRlckZucyA9IGlubGluZVRlbXBsYXRlLnN0YXRpY1JlbmRlckZuczsKICAgIH0KICAgIHJldHVybiBuZXcgdm5vZGUuY29tcG9uZW50T3B0aW9ucy5DdG9yKG9wdGlvbnMpCiAgfQoKICBmdW5jdGlvbiBpbnN0YWxsQ29tcG9uZW50SG9va3MgKGRhdGEpIHsKICAgIHZhciBob29rcyA9IGRhdGEuaG9vayB8fCAoZGF0YS5ob29rID0ge30pOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBob29rc1RvTWVyZ2UubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIGtleSA9IGhvb2tzVG9NZXJnZVtpXTsKICAgICAgdmFyIGV4aXN0aW5nID0gaG9va3Nba2V5XTsKICAgICAgdmFyIHRvTWVyZ2UgPSBjb21wb25lbnRWTm9kZUhvb2tzW2tleV07CiAgICAgIGlmIChleGlzdGluZyAhPT0gdG9NZXJnZSAmJiAhKGV4aXN0aW5nICYmIGV4aXN0aW5nLl9tZXJnZWQpKSB7CiAgICAgICAgaG9va3Nba2V5XSA9IGV4aXN0aW5nID8gbWVyZ2VIb29rJDEodG9NZXJnZSwgZXhpc3RpbmcpIDogdG9NZXJnZTsKICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gbWVyZ2VIb29rJDEgKGYxLCBmMikgewogICAgdmFyIG1lcmdlZCA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgIC8vIGZsb3cgY29tcGxhaW5zIGFib3V0IGV4dHJhIGFyZ3Mgd2hpY2ggaXMgd2h5IHdlIHVzZSBhbnkKICAgICAgZjEoYSwgYik7CiAgICAgIGYyKGEsIGIpOwogICAgfTsKICAgIG1lcmdlZC5fbWVyZ2VkID0gdHJ1ZTsKICAgIHJldHVybiBtZXJnZWQKICB9CgogIC8vIHRyYW5zZm9ybSBjb21wb25lbnQgdi1tb2RlbCBpbmZvICh2YWx1ZSBhbmQgY2FsbGJhY2spIGludG8KICAvLyBwcm9wIGFuZCBldmVudCBoYW5kbGVyIHJlc3BlY3RpdmVseS4KICBmdW5jdGlvbiB0cmFuc2Zvcm1Nb2RlbCAob3B0aW9ucywgZGF0YSkgewogICAgdmFyIHByb3AgPSAob3B0aW9ucy5tb2RlbCAmJiBvcHRpb25zLm1vZGVsLnByb3ApIHx8ICd2YWx1ZSc7CiAgICB2YXIgZXZlbnQgPSAob3B0aW9ucy5tb2RlbCAmJiBvcHRpb25zLm1vZGVsLmV2ZW50KSB8fCAnaW5wdXQnCiAgICA7KGRhdGEuYXR0cnMgfHwgKGRhdGEuYXR0cnMgPSB7fSkpW3Byb3BdID0gZGF0YS5tb2RlbC52YWx1ZTsKICAgIHZhciBvbiA9IGRhdGEub24gfHwgKGRhdGEub24gPSB7fSk7CiAgICB2YXIgZXhpc3RpbmcgPSBvbltldmVudF07CiAgICB2YXIgY2FsbGJhY2sgPSBkYXRhLm1vZGVsLmNhbGxiYWNrOwogICAgaWYgKGlzRGVmKGV4aXN0aW5nKSkgewogICAgICBpZiAoCiAgICAgICAgQXJyYXkuaXNBcnJheShleGlzdGluZykKICAgICAgICAgID8gZXhpc3RpbmcuaW5kZXhPZihjYWxsYmFjaykgPT09IC0xCiAgICAgICAgICA6IGV4aXN0aW5nICE9PSBjYWxsYmFjawogICAgICApIHsKICAgICAgICBvbltldmVudF0gPSBbY2FsbGJhY2tdLmNvbmNhdChleGlzdGluZyk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIG9uW2V2ZW50XSA9IGNhbGxiYWNrOwogICAgfQogIH0KCiAgLyogICovCgogIHZhciBTSU1QTEVfTk9STUFMSVpFID0gMTsKICB2YXIgQUxXQVlTX05PUk1BTElaRSA9IDI7CgogIC8vIHdyYXBwZXIgZnVuY3Rpb24gZm9yIHByb3ZpZGluZyBhIG1vcmUgZmxleGlibGUgaW50ZXJmYWNlCiAgLy8gd2l0aG91dCBnZXR0aW5nIHllbGxlZCBhdCBieSBmbG93CiAgZnVuY3Rpb24gY3JlYXRlRWxlbWVudCAoCiAgICBjb250ZXh0LAogICAgdGFnLAogICAgZGF0YSwKICAgIGNoaWxkcmVuLAogICAgbm9ybWFsaXphdGlvblR5cGUsCiAgICBhbHdheXNOb3JtYWxpemUKICApIHsKICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpIHx8IGlzUHJpbWl0aXZlKGRhdGEpKSB7CiAgICAgIG5vcm1hbGl6YXRpb25UeXBlID0gY2hpbGRyZW47CiAgICAgIGNoaWxkcmVuID0gZGF0YTsKICAgICAgZGF0YSA9IHVuZGVmaW5lZDsKICAgIH0KICAgIGlmIChpc1RydWUoYWx3YXlzTm9ybWFsaXplKSkgewogICAgICBub3JtYWxpemF0aW9uVHlwZSA9IEFMV0FZU19OT1JNQUxJWkU7CiAgICB9CiAgICByZXR1cm4gX2NyZWF0ZUVsZW1lbnQoY29udGV4dCwgdGFnLCBkYXRhLCBjaGlsZHJlbiwgbm9ybWFsaXphdGlvblR5cGUpCiAgfQoKICBmdW5jdGlvbiBfY3JlYXRlRWxlbWVudCAoCiAgICBjb250ZXh0LAogICAgdGFnLAogICAgZGF0YSwKICAgIGNoaWxkcmVuLAogICAgbm9ybWFsaXphdGlvblR5cGUKICApIHsKICAgIGlmIChpc0RlZihkYXRhKSAmJiBpc0RlZigoZGF0YSkuX19vYl9fKSkgewogICAgICB3YXJuKAogICAgICAgICJBdm9pZCB1c2luZyBvYnNlcnZlZCBkYXRhIG9iamVjdCBhcyB2bm9kZSBkYXRhOiAiICsgKEpTT04uc3RyaW5naWZ5KGRhdGEpKSArICJcbiIgKwogICAgICAgICdBbHdheXMgY3JlYXRlIGZyZXNoIHZub2RlIGRhdGEgb2JqZWN0cyBpbiBlYWNoIHJlbmRlciEnLAogICAgICAgIGNvbnRleHQKICAgICAgKTsKICAgICAgcmV0dXJuIGNyZWF0ZUVtcHR5Vk5vZGUoKQogICAgfQogICAgLy8gb2JqZWN0IHN5bnRheCBpbiB2LWJpbmQKICAgIGlmIChpc0RlZihkYXRhKSAmJiBpc0RlZihkYXRhLmlzKSkgewogICAgICB0YWcgPSBkYXRhLmlzOwogICAgfQogICAgaWYgKCF0YWcpIHsKICAgICAgLy8gaW4gY2FzZSBvZiBjb21wb25lbnQgOmlzIHNldCB0byBmYWxzeSB2YWx1ZQogICAgICByZXR1cm4gY3JlYXRlRW1wdHlWTm9kZSgpCiAgICB9CiAgICAvLyB3YXJuIGFnYWluc3Qgbm9uLXByaW1pdGl2ZSBrZXkKICAgIGlmIChpc0RlZihkYXRhKSAmJiBpc0RlZihkYXRhLmtleSkgJiYgIWlzUHJpbWl0aXZlKGRhdGEua2V5KQogICAgKSB7CiAgICAgIHsKICAgICAgICB3YXJuKAogICAgICAgICAgJ0F2b2lkIHVzaW5nIG5vbi1wcmltaXRpdmUgdmFsdWUgYXMga2V5LCAnICsKICAgICAgICAgICd1c2Ugc3RyaW5nL251bWJlciB2YWx1ZSBpbnN0ZWFkLicsCiAgICAgICAgICBjb250ZXh0CiAgICAgICAgKTsKICAgICAgfQogICAgfQogICAgLy8gc3VwcG9ydCBzaW5nbGUgZnVuY3Rpb24gY2hpbGRyZW4gYXMgZGVmYXVsdCBzY29wZWQgc2xvdAogICAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pICYmCiAgICAgIHR5cGVvZiBjaGlsZHJlblswXSA9PT0gJ2Z1bmN0aW9uJwogICAgKSB7CiAgICAgIGRhdGEgPSBkYXRhIHx8IHt9OwogICAgICBkYXRhLnNjb3BlZFNsb3RzID0geyBkZWZhdWx0OiBjaGlsZHJlblswXSB9OwogICAgICBjaGlsZHJlbi5sZW5ndGggPSAwOwogICAgfQogICAgaWYgKG5vcm1hbGl6YXRpb25UeXBlID09PSBBTFdBWVNfTk9STUFMSVpFKSB7CiAgICAgIGNoaWxkcmVuID0gbm9ybWFsaXplQ2hpbGRyZW4oY2hpbGRyZW4pOwogICAgfSBlbHNlIGlmIChub3JtYWxpemF0aW9uVHlwZSA9PT0gU0lNUExFX05PUk1BTElaRSkgewogICAgICBjaGlsZHJlbiA9IHNpbXBsZU5vcm1hbGl6ZUNoaWxkcmVuKGNoaWxkcmVuKTsKICAgIH0KICAgIHZhciB2bm9kZSwgbnM7CiAgICBpZiAodHlwZW9mIHRhZyA9PT0gJ3N0cmluZycpIHsKICAgICAgdmFyIEN0b3I7CiAgICAgIG5zID0gKGNvbnRleHQuJHZub2RlICYmIGNvbnRleHQuJHZub2RlLm5zKSB8fCBjb25maWcuZ2V0VGFnTmFtZXNwYWNlKHRhZyk7CiAgICAgIGlmIChjb25maWcuaXNSZXNlcnZlZFRhZyh0YWcpKSB7CiAgICAgICAgLy8gcGxhdGZvcm0gYnVpbHQtaW4gZWxlbWVudHMKICAgICAgICBpZiAoaXNEZWYoZGF0YSkgJiYgaXNEZWYoZGF0YS5uYXRpdmVPbikpIHsKICAgICAgICAgIHdhcm4oCiAgICAgICAgICAgICgiVGhlIC5uYXRpdmUgbW9kaWZpZXIgZm9yIHYtb24gaXMgb25seSB2YWxpZCBvbiBjb21wb25lbnRzIGJ1dCBpdCB3YXMgdXNlZCBvbiA8IiArIHRhZyArICI+LiIpLAogICAgICAgICAgICBjb250ZXh0CiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICB2bm9kZSA9IG5ldyBWTm9kZSgKICAgICAgICAgIGNvbmZpZy5wYXJzZVBsYXRmb3JtVGFnTmFtZSh0YWcpLCBkYXRhLCBjaGlsZHJlbiwKICAgICAgICAgIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb250ZXh0CiAgICAgICAgKTsKICAgICAgfSBlbHNlIGlmICgoIWRhdGEgfHwgIWRhdGEucHJlKSAmJiBpc0RlZihDdG9yID0gcmVzb2x2ZUFzc2V0KGNvbnRleHQuJG9wdGlvbnMsICdjb21wb25lbnRzJywgdGFnKSkpIHsKICAgICAgICAvLyBjb21wb25lbnQKICAgICAgICB2bm9kZSA9IGNyZWF0ZUNvbXBvbmVudChDdG9yLCBkYXRhLCBjb250ZXh0LCBjaGlsZHJlbiwgdGFnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyB1bmtub3duIG9yIHVubGlzdGVkIG5hbWVzcGFjZWQgZWxlbWVudHMKICAgICAgICAvLyBjaGVjayBhdCBydW50aW1lIGJlY2F1c2UgaXQgbWF5IGdldCBhc3NpZ25lZCBhIG5hbWVzcGFjZSB3aGVuIGl0cwogICAgICAgIC8vIHBhcmVudCBub3JtYWxpemVzIGNoaWxkcmVuCiAgICAgICAgdm5vZGUgPSBuZXcgVk5vZGUoCiAgICAgICAgICB0YWcsIGRhdGEsIGNoaWxkcmVuLAogICAgICAgICAgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbnRleHQKICAgICAgICApOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICAvLyBkaXJlY3QgY29tcG9uZW50IG9wdGlvbnMgLyBjb25zdHJ1Y3RvcgogICAgICB2bm9kZSA9IGNyZWF0ZUNvbXBvbmVudCh0YWcsIGRhdGEsIGNvbnRleHQsIGNoaWxkcmVuKTsKICAgIH0KICAgIGlmIChBcnJheS5pc0FycmF5KHZub2RlKSkgewogICAgICByZXR1cm4gdm5vZGUKICAgIH0gZWxzZSBpZiAoaXNEZWYodm5vZGUpKSB7CiAgICAgIGlmIChpc0RlZihucykpIHsgYXBwbHlOUyh2bm9kZSwgbnMpOyB9CiAgICAgIGlmIChpc0RlZihkYXRhKSkgeyByZWdpc3RlckRlZXBCaW5kaW5ncyhkYXRhKTsgfQogICAgICByZXR1cm4gdm5vZGUKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBjcmVhdGVFbXB0eVZOb2RlKCkKICAgIH0KICB9CgogIGZ1bmN0aW9uIGFwcGx5TlMgKHZub2RlLCBucywgZm9yY2UpIHsKICAgIHZub2RlLm5zID0gbnM7CiAgICBpZiAodm5vZGUudGFnID09PSAnZm9yZWlnbk9iamVjdCcpIHsKICAgICAgLy8gdXNlIGRlZmF1bHQgbmFtZXNwYWNlIGluc2lkZSBmb3JlaWduT2JqZWN0CiAgICAgIG5zID0gdW5kZWZpbmVkOwogICAgICBmb3JjZSA9IHRydWU7CiAgICB9CiAgICBpZiAoaXNEZWYodm5vZGUuY2hpbGRyZW4pKSB7CiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gdm5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgdmFyIGNoaWxkID0gdm5vZGUuY2hpbGRyZW5baV07CiAgICAgICAgaWYgKGlzRGVmKGNoaWxkLnRhZykgJiYgKAogICAgICAgICAgaXNVbmRlZihjaGlsZC5ucykgfHwgKGlzVHJ1ZShmb3JjZSkgJiYgY2hpbGQudGFnICE9PSAnc3ZnJykpKSB7CiAgICAgICAgICBhcHBseU5TKGNoaWxkLCBucywgZm9yY2UpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgLy8gcmVmICM1MzE4CiAgLy8gbmVjZXNzYXJ5IHRvIGVuc3VyZSBwYXJlbnQgcmUtcmVuZGVyIHdoZW4gZGVlcCBiaW5kaW5ncyBsaWtlIDpzdHlsZSBhbmQKICAvLyA6Y2xhc3MgYXJlIHVzZWQgb24gc2xvdCBub2RlcwogIGZ1bmN0aW9uIHJlZ2lzdGVyRGVlcEJpbmRpbmdzIChkYXRhKSB7CiAgICBpZiAoaXNPYmplY3QoZGF0YS5zdHlsZSkpIHsKICAgICAgdHJhdmVyc2UoZGF0YS5zdHlsZSk7CiAgICB9CiAgICBpZiAoaXNPYmplY3QoZGF0YS5jbGFzcykpIHsKICAgICAgdHJhdmVyc2UoZGF0YS5jbGFzcyk7CiAgICB9CiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gaW5pdFJlbmRlciAodm0pIHsKICAgIHZtLl92bm9kZSA9IG51bGw7IC8vIHRoZSByb290IG9mIHRoZSBjaGlsZCB0cmVlCiAgICB2bS5fc3RhdGljVHJlZXMgPSBudWxsOyAvLyB2LW9uY2UgY2FjaGVkIHRyZWVzCiAgICB2YXIgb3B0aW9ucyA9IHZtLiRvcHRpb25zOwogICAgdmFyIHBhcmVudFZub2RlID0gdm0uJHZub2RlID0gb3B0aW9ucy5fcGFyZW50Vm5vZGU7IC8vIHRoZSBwbGFjZWhvbGRlciBub2RlIGluIHBhcmVudCB0cmVlCiAgICB2YXIgcmVuZGVyQ29udGV4dCA9IHBhcmVudFZub2RlICYmIHBhcmVudFZub2RlLmNvbnRleHQ7CiAgICB2bS4kc2xvdHMgPSByZXNvbHZlU2xvdHMob3B0aW9ucy5fcmVuZGVyQ2hpbGRyZW4sIHJlbmRlckNvbnRleHQpOwogICAgdm0uJHNjb3BlZFNsb3RzID0gZW1wdHlPYmplY3Q7CiAgICAvLyBiaW5kIHRoZSBjcmVhdGVFbGVtZW50IGZuIHRvIHRoaXMgaW5zdGFuY2UKICAgIC8vIHNvIHRoYXQgd2UgZ2V0IHByb3BlciByZW5kZXIgY29udGV4dCBpbnNpZGUgaXQuCiAgICAvLyBhcmdzIG9yZGVyOiB0YWcsIGRhdGEsIGNoaWxkcmVuLCBub3JtYWxpemF0aW9uVHlwZSwgYWx3YXlzTm9ybWFsaXplCiAgICAvLyBpbnRlcm5hbCB2ZXJzaW9uIGlzIHVzZWQgYnkgcmVuZGVyIGZ1bmN0aW9ucyBjb21waWxlZCBmcm9tIHRlbXBsYXRlcwogICAgdm0uX2MgPSBmdW5jdGlvbiAoYSwgYiwgYywgZCkgeyByZXR1cm4gY3JlYXRlRWxlbWVudCh2bSwgYSwgYiwgYywgZCwgZmFsc2UpOyB9OwogICAgLy8gbm9ybWFsaXphdGlvbiBpcyBhbHdheXMgYXBwbGllZCBmb3IgdGhlIHB1YmxpYyB2ZXJzaW9uLCB1c2VkIGluCiAgICAvLyB1c2VyLXdyaXR0ZW4gcmVuZGVyIGZ1bmN0aW9ucy4KICAgIHZtLiRjcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQpIHsgcmV0dXJuIGNyZWF0ZUVsZW1lbnQodm0sIGEsIGIsIGMsIGQsIHRydWUpOyB9OwoKICAgIC8vICRhdHRycyAmICRsaXN0ZW5lcnMgYXJlIGV4cG9zZWQgZm9yIGVhc2llciBIT0MgY3JlYXRpb24uCiAgICAvLyB0aGV5IG5lZWQgdG8gYmUgcmVhY3RpdmUgc28gdGhhdCBIT0NzIHVzaW5nIHRoZW0gYXJlIGFsd2F5cyB1cGRhdGVkCiAgICB2YXIgcGFyZW50RGF0YSA9IHBhcmVudFZub2RlICYmIHBhcmVudFZub2RlLmRhdGE7CgogICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi8KICAgIHsKICAgICAgZGVmaW5lUmVhY3RpdmUkJDEodm0sICckYXR0cnMnLCBwYXJlbnREYXRhICYmIHBhcmVudERhdGEuYXR0cnMgfHwgZW1wdHlPYmplY3QsIGZ1bmN0aW9uICgpIHsKICAgICAgICAhaXNVcGRhdGluZ0NoaWxkQ29tcG9uZW50ICYmIHdhcm4oIiRhdHRycyBpcyByZWFkb25seS4iLCB2bSk7CiAgICAgIH0sIHRydWUpOwogICAgICBkZWZpbmVSZWFjdGl2ZSQkMSh2bSwgJyRsaXN0ZW5lcnMnLCBvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnMgfHwgZW1wdHlPYmplY3QsIGZ1bmN0aW9uICgpIHsKICAgICAgICAhaXNVcGRhdGluZ0NoaWxkQ29tcG9uZW50ICYmIHdhcm4oIiRsaXN0ZW5lcnMgaXMgcmVhZG9ubHkuIiwgdm0pOwogICAgICB9LCB0cnVlKTsKICAgIH0KICB9CgogIHZhciBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UgPSBudWxsOwoKICBmdW5jdGlvbiByZW5kZXJNaXhpbiAoVnVlKSB7CiAgICAvLyBpbnN0YWxsIHJ1bnRpbWUgY29udmVuaWVuY2UgaGVscGVycwogICAgaW5zdGFsbFJlbmRlckhlbHBlcnMoVnVlLnByb3RvdHlwZSk7CgogICAgVnVlLnByb3RvdHlwZS4kbmV4dFRpY2sgPSBmdW5jdGlvbiAoZm4pIHsKICAgICAgcmV0dXJuIG5leHRUaWNrKGZuLCB0aGlzKQogICAgfTsKCiAgICBWdWUucHJvdG90eXBlLl9yZW5kZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIHZhciByZWYgPSB2bS4kb3B0aW9uczsKICAgICAgdmFyIHJlbmRlciA9IHJlZi5yZW5kZXI7CiAgICAgIHZhciBfcGFyZW50Vm5vZGUgPSByZWYuX3BhcmVudFZub2RlOwoKICAgICAgaWYgKF9wYXJlbnRWbm9kZSkgewogICAgICAgIHZtLiRzY29wZWRTbG90cyA9IG5vcm1hbGl6ZVNjb3BlZFNsb3RzKAogICAgICAgICAgX3BhcmVudFZub2RlLmRhdGEuc2NvcGVkU2xvdHMsCiAgICAgICAgICB2bS4kc2xvdHMsCiAgICAgICAgICB2bS4kc2NvcGVkU2xvdHMKICAgICAgICApOwogICAgICB9CgogICAgICAvLyBzZXQgcGFyZW50IHZub2RlLiB0aGlzIGFsbG93cyByZW5kZXIgZnVuY3Rpb25zIHRvIGhhdmUgYWNjZXNzCiAgICAgIC8vIHRvIHRoZSBkYXRhIG9uIHRoZSBwbGFjZWhvbGRlciBub2RlLgogICAgICB2bS4kdm5vZGUgPSBfcGFyZW50Vm5vZGU7CiAgICAgIC8vIHJlbmRlciBzZWxmCiAgICAgIHZhciB2bm9kZTsKICAgICAgdHJ5IHsKICAgICAgICAvLyBUaGVyZSdzIG5vIG5lZWQgdG8gbWFpbnRhaW4gYSBzdGFjayBiZWNhdXNlIGFsbCByZW5kZXIgZm5zIGFyZSBjYWxsZWQKICAgICAgICAvLyBzZXBhcmF0ZWx5IGZyb20gb25lIGFub3RoZXIuIE5lc3RlZCBjb21wb25lbnQncyByZW5kZXIgZm5zIGFyZSBjYWxsZWQKICAgICAgICAvLyB3aGVuIHBhcmVudCBjb21wb25lbnQgaXMgcGF0Y2hlZC4KICAgICAgICBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UgPSB2bTsKICAgICAgICB2bm9kZSA9IHJlbmRlci5jYWxsKHZtLl9yZW5kZXJQcm94eSwgdm0uJGNyZWF0ZUVsZW1lbnQpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgaGFuZGxlRXJyb3IoZSwgdm0sICJyZW5kZXIiKTsKICAgICAgICAvLyByZXR1cm4gZXJyb3IgcmVuZGVyIHJlc3VsdCwKICAgICAgICAvLyBvciBwcmV2aW91cyB2bm9kZSB0byBwcmV2ZW50IHJlbmRlciBlcnJvciBjYXVzaW5nIGJsYW5rIGNvbXBvbmVudAogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovCiAgICAgICAgaWYgKHZtLiRvcHRpb25zLnJlbmRlckVycm9yKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICB2bm9kZSA9IHZtLiRvcHRpb25zLnJlbmRlckVycm9yLmNhbGwodm0uX3JlbmRlclByb3h5LCB2bS4kY3JlYXRlRWxlbWVudCwgZSk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIGhhbmRsZUVycm9yKGUsIHZtLCAicmVuZGVyRXJyb3IiKTsKICAgICAgICAgICAgdm5vZGUgPSB2bS5fdm5vZGU7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZub2RlID0gdm0uX3Zub2RlOwogICAgICAgIH0KICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UgPSBudWxsOwogICAgICB9CiAgICAgIC8vIGlmIHRoZSByZXR1cm5lZCBhcnJheSBjb250YWlucyBvbmx5IGEgc2luZ2xlIG5vZGUsIGFsbG93IGl0CiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZub2RlKSAmJiB2bm9kZS5sZW5ndGggPT09IDEpIHsKICAgICAgICB2bm9kZSA9IHZub2RlWzBdOwogICAgICB9CiAgICAgIC8vIHJldHVybiBlbXB0eSB2bm9kZSBpbiBjYXNlIHRoZSByZW5kZXIgZnVuY3Rpb24gZXJyb3JlZCBvdXQKICAgICAgaWYgKCEodm5vZGUgaW5zdGFuY2VvZiBWTm9kZSkpIHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2bm9kZSkpIHsKICAgICAgICAgIHdhcm4oCiAgICAgICAgICAgICdNdWx0aXBsZSByb290IG5vZGVzIHJldHVybmVkIGZyb20gcmVuZGVyIGZ1bmN0aW9uLiBSZW5kZXIgZnVuY3Rpb24gJyArCiAgICAgICAgICAgICdzaG91bGQgcmV0dXJuIGEgc2luZ2xlIHJvb3Qgbm9kZS4nLAogICAgICAgICAgICB2bQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgdm5vZGUgPSBjcmVhdGVFbXB0eVZOb2RlKCk7CiAgICAgIH0KICAgICAgLy8gc2V0IHBhcmVudAogICAgICB2bm9kZS5wYXJlbnQgPSBfcGFyZW50Vm5vZGU7CiAgICAgIHJldHVybiB2bm9kZQogICAgfTsKICB9CgogIC8qICAqLwoKICBmdW5jdGlvbiBlbnN1cmVDdG9yIChjb21wLCBiYXNlKSB7CiAgICBpZiAoCiAgICAgIGNvbXAuX19lc01vZHVsZSB8fAogICAgICAoaGFzU3ltYm9sICYmIGNvbXBbU3ltYm9sLnRvU3RyaW5nVGFnXSA9PT0gJ01vZHVsZScpCiAgICApIHsKICAgICAgY29tcCA9IGNvbXAuZGVmYXVsdDsKICAgIH0KICAgIHJldHVybiBpc09iamVjdChjb21wKQogICAgICA/IGJhc2UuZXh0ZW5kKGNvbXApCiAgICAgIDogY29tcAogIH0KCiAgZnVuY3Rpb24gY3JlYXRlQXN5bmNQbGFjZWhvbGRlciAoCiAgICBmYWN0b3J5LAogICAgZGF0YSwKICAgIGNvbnRleHQsCiAgICBjaGlsZHJlbiwKICAgIHRhZwogICkgewogICAgdmFyIG5vZGUgPSBjcmVhdGVFbXB0eVZOb2RlKCk7CiAgICBub2RlLmFzeW5jRmFjdG9yeSA9IGZhY3Rvcnk7CiAgICBub2RlLmFzeW5jTWV0YSA9IHsgZGF0YTogZGF0YSwgY29udGV4dDogY29udGV4dCwgY2hpbGRyZW46IGNoaWxkcmVuLCB0YWc6IHRhZyB9OwogICAgcmV0dXJuIG5vZGUKICB9CgogIGZ1bmN0aW9uIHJlc29sdmVBc3luY0NvbXBvbmVudCAoCiAgICBmYWN0b3J5LAogICAgYmFzZUN0b3IKICApIHsKICAgIGlmIChpc1RydWUoZmFjdG9yeS5lcnJvcikgJiYgaXNEZWYoZmFjdG9yeS5lcnJvckNvbXApKSB7CiAgICAgIHJldHVybiBmYWN0b3J5LmVycm9yQ29tcAogICAgfQoKICAgIGlmIChpc0RlZihmYWN0b3J5LnJlc29sdmVkKSkgewogICAgICByZXR1cm4gZmFjdG9yeS5yZXNvbHZlZAogICAgfQoKICAgIHZhciBvd25lciA9IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZTsKICAgIGlmIChvd25lciAmJiBpc0RlZihmYWN0b3J5Lm93bmVycykgJiYgZmFjdG9yeS5vd25lcnMuaW5kZXhPZihvd25lcikgPT09IC0xKSB7CiAgICAgIC8vIGFscmVhZHkgcGVuZGluZwogICAgICBmYWN0b3J5Lm93bmVycy5wdXNoKG93bmVyKTsKICAgIH0KCiAgICBpZiAoaXNUcnVlKGZhY3RvcnkubG9hZGluZykgJiYgaXNEZWYoZmFjdG9yeS5sb2FkaW5nQ29tcCkpIHsKICAgICAgcmV0dXJuIGZhY3RvcnkubG9hZGluZ0NvbXAKICAgIH0KCiAgICBpZiAob3duZXIgJiYgIWlzRGVmKGZhY3Rvcnkub3duZXJzKSkgewogICAgICB2YXIgb3duZXJzID0gZmFjdG9yeS5vd25lcnMgPSBbb3duZXJdOwogICAgICB2YXIgc3luYyA9IHRydWU7CiAgICAgIHZhciB0aW1lckxvYWRpbmcgPSBudWxsOwogICAgICB2YXIgdGltZXJUaW1lb3V0ID0gbnVsbAoKICAgICAgOyhvd25lcikuJG9uKCdob29rOmRlc3Ryb3llZCcsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlbW92ZShvd25lcnMsIG93bmVyKTsgfSk7CgogICAgICB2YXIgZm9yY2VSZW5kZXIgPSBmdW5jdGlvbiAocmVuZGVyQ29tcGxldGVkKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBvd25lcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgICAob3duZXJzW2ldKS4kZm9yY2VVcGRhdGUoKTsKICAgICAgICB9CgogICAgICAgIGlmIChyZW5kZXJDb21wbGV0ZWQpIHsKICAgICAgICAgIG93bmVycy5sZW5ndGggPSAwOwogICAgICAgICAgaWYgKHRpbWVyTG9hZGluZyAhPT0gbnVsbCkgewogICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXJMb2FkaW5nKTsKICAgICAgICAgICAgdGltZXJMb2FkaW5nID0gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0aW1lclRpbWVvdXQgIT09IG51bGwpIHsKICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyVGltZW91dCk7CiAgICAgICAgICAgIHRpbWVyVGltZW91dCA9IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwoKICAgICAgdmFyIHJlc29sdmUgPSBvbmNlKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyBjYWNoZSByZXNvbHZlZAogICAgICAgIGZhY3RvcnkucmVzb2x2ZWQgPSBlbnN1cmVDdG9yKHJlcywgYmFzZUN0b3IpOwogICAgICAgIC8vIGludm9rZSBjYWxsYmFja3Mgb25seSBpZiB0aGlzIGlzIG5vdCBhIHN5bmNocm9ub3VzIHJlc29sdmUKICAgICAgICAvLyAoYXN5bmMgcmVzb2x2ZXMgYXJlIHNoaW1tZWQgYXMgc3luY2hyb25vdXMgZHVyaW5nIFNTUikKICAgICAgICBpZiAoIXN5bmMpIHsKICAgICAgICAgIGZvcmNlUmVuZGVyKHRydWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBvd25lcnMubGVuZ3RoID0gMDsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgdmFyIHJlamVjdCA9IG9uY2UoZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgIHdhcm4oCiAgICAgICAgICAiRmFpbGVkIHRvIHJlc29sdmUgYXN5bmMgY29tcG9uZW50OiAiICsgKFN0cmluZyhmYWN0b3J5KSkgKwogICAgICAgICAgKHJlYXNvbiA/ICgiXG5SZWFzb246ICIgKyByZWFzb24pIDogJycpCiAgICAgICAgKTsKICAgICAgICBpZiAoaXNEZWYoZmFjdG9yeS5lcnJvckNvbXApKSB7CiAgICAgICAgICBmYWN0b3J5LmVycm9yID0gdHJ1ZTsKICAgICAgICAgIGZvcmNlUmVuZGVyKHRydWUpOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICB2YXIgcmVzID0gZmFjdG9yeShyZXNvbHZlLCByZWplY3QpOwoKICAgICAgaWYgKGlzT2JqZWN0KHJlcykpIHsKICAgICAgICBpZiAoaXNQcm9taXNlKHJlcykpIHsKICAgICAgICAgIC8vICgpID0+IFByb21pc2UKICAgICAgICAgIGlmIChpc1VuZGVmKGZhY3RvcnkucmVzb2x2ZWQpKSB7CiAgICAgICAgICAgIHJlcy50aGVuKHJlc29sdmUsIHJlamVjdCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChpc1Byb21pc2UocmVzLmNvbXBvbmVudCkpIHsKICAgICAgICAgIHJlcy5jb21wb25lbnQudGhlbihyZXNvbHZlLCByZWplY3QpOwoKICAgICAgICAgIGlmIChpc0RlZihyZXMuZXJyb3IpKSB7CiAgICAgICAgICAgIGZhY3RvcnkuZXJyb3JDb21wID0gZW5zdXJlQ3RvcihyZXMuZXJyb3IsIGJhc2VDdG9yKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoaXNEZWYocmVzLmxvYWRpbmcpKSB7CiAgICAgICAgICAgIGZhY3RvcnkubG9hZGluZ0NvbXAgPSBlbnN1cmVDdG9yKHJlcy5sb2FkaW5nLCBiYXNlQ3Rvcik7CiAgICAgICAgICAgIGlmIChyZXMuZGVsYXkgPT09IDApIHsKICAgICAgICAgICAgICBmYWN0b3J5LmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRpbWVyTG9hZGluZyA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdGltZXJMb2FkaW5nID0gbnVsbDsKICAgICAgICAgICAgICAgIGlmIChpc1VuZGVmKGZhY3RvcnkucmVzb2x2ZWQpICYmIGlzVW5kZWYoZmFjdG9yeS5lcnJvcikpIHsKICAgICAgICAgICAgICAgICAgZmFjdG9yeS5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgZm9yY2VSZW5kZXIoZmFsc2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIHJlcy5kZWxheSB8fCAyMDApOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGlzRGVmKHJlcy50aW1lb3V0KSkgewogICAgICAgICAgICB0aW1lclRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB0aW1lclRpbWVvdXQgPSBudWxsOwogICAgICAgICAgICAgIGlmIChpc1VuZGVmKGZhY3RvcnkucmVzb2x2ZWQpKSB7CiAgICAgICAgICAgICAgICByZWplY3QoCiAgICAgICAgICAgICAgICAgICJ0aW1lb3V0ICgiICsgKHJlcy50aW1lb3V0KSArICJtcykiCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgcmVzLnRpbWVvdXQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgc3luYyA9IGZhbHNlOwogICAgICAvLyByZXR1cm4gaW4gY2FzZSByZXNvbHZlZCBzeW5jaHJvbm91c2x5CiAgICAgIHJldHVybiBmYWN0b3J5LmxvYWRpbmcKICAgICAgICA/IGZhY3RvcnkubG9hZGluZ0NvbXAKICAgICAgICA6IGZhY3RvcnkucmVzb2x2ZWQKICAgIH0KICB9CgogIC8qICAqLwoKICBmdW5jdGlvbiBpc0FzeW5jUGxhY2Vob2xkZXIgKG5vZGUpIHsKICAgIHJldHVybiBub2RlLmlzQ29tbWVudCAmJiBub2RlLmFzeW5jRmFjdG9yeQogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIGdldEZpcnN0Q29tcG9uZW50Q2hpbGQgKGNoaWxkcmVuKSB7CiAgICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZHJlbikpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBjID0gY2hpbGRyZW5baV07CiAgICAgICAgaWYgKGlzRGVmKGMpICYmIChpc0RlZihjLmNvbXBvbmVudE9wdGlvbnMpIHx8IGlzQXN5bmNQbGFjZWhvbGRlcihjKSkpIHsKICAgICAgICAgIHJldHVybiBjCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICAvKiAgKi8KCiAgLyogICovCgogIGZ1bmN0aW9uIGluaXRFdmVudHMgKHZtKSB7CiAgICB2bS5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgIHZtLl9oYXNIb29rRXZlbnQgPSBmYWxzZTsKICAgIC8vIGluaXQgcGFyZW50IGF0dGFjaGVkIGV2ZW50cwogICAgdmFyIGxpc3RlbmVycyA9IHZtLiRvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnM7CiAgICBpZiAobGlzdGVuZXJzKSB7CiAgICAgIHVwZGF0ZUNvbXBvbmVudExpc3RlbmVycyh2bSwgbGlzdGVuZXJzKTsKICAgIH0KICB9CgogIHZhciB0YXJnZXQ7CgogIGZ1bmN0aW9uIGFkZCAoZXZlbnQsIGZuKSB7CiAgICB0YXJnZXQuJG9uKGV2ZW50LCBmbik7CiAgfQoKICBmdW5jdGlvbiByZW1vdmUkMSAoZXZlbnQsIGZuKSB7CiAgICB0YXJnZXQuJG9mZihldmVudCwgZm4pOwogIH0KCiAgZnVuY3Rpb24gY3JlYXRlT25jZUhhbmRsZXIgKGV2ZW50LCBmbikgewogICAgdmFyIF90YXJnZXQgPSB0YXJnZXQ7CiAgICByZXR1cm4gZnVuY3Rpb24gb25jZUhhbmRsZXIgKCkgewogICAgICB2YXIgcmVzID0gZm4uYXBwbHkobnVsbCwgYXJndW1lbnRzKTsKICAgICAgaWYgKHJlcyAhPT0gbnVsbCkgewogICAgICAgIF90YXJnZXQuJG9mZihldmVudCwgb25jZUhhbmRsZXIpOwogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiB1cGRhdGVDb21wb25lbnRMaXN0ZW5lcnMgKAogICAgdm0sCiAgICBsaXN0ZW5lcnMsCiAgICBvbGRMaXN0ZW5lcnMKICApIHsKICAgIHRhcmdldCA9IHZtOwogICAgdXBkYXRlTGlzdGVuZXJzKGxpc3RlbmVycywgb2xkTGlzdGVuZXJzIHx8IHt9LCBhZGQsIHJlbW92ZSQxLCBjcmVhdGVPbmNlSGFuZGxlciwgdm0pOwogICAgdGFyZ2V0ID0gdW5kZWZpbmVkOwogIH0KCiAgZnVuY3Rpb24gZXZlbnRzTWl4aW4gKFZ1ZSkgewogICAgdmFyIGhvb2tSRSA9IC9eaG9vazovOwogICAgVnVlLnByb3RvdHlwZS4kb24gPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KGV2ZW50KSkgewogICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gZXZlbnQubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgICB2bS4kb24oZXZlbnRbaV0sIGZuKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgKHZtLl9ldmVudHNbZXZlbnRdIHx8ICh2bS5fZXZlbnRzW2V2ZW50XSA9IFtdKSkucHVzaChmbik7CiAgICAgICAgLy8gb3B0aW1pemUgaG9vazpldmVudCBjb3N0IGJ5IHVzaW5nIGEgYm9vbGVhbiBmbGFnIG1hcmtlZCBhdCByZWdpc3RyYXRpb24KICAgICAgICAvLyBpbnN0ZWFkIG9mIGEgaGFzaCBsb29rdXAKICAgICAgICBpZiAoaG9va1JFLnRlc3QoZXZlbnQpKSB7CiAgICAgICAgICB2bS5faGFzSG9va0V2ZW50ID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHZtCiAgICB9OwoKICAgIFZ1ZS5wcm90b3R5cGUuJG9uY2UgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIGZ1bmN0aW9uIG9uICgpIHsKICAgICAgICB2bS4kb2ZmKGV2ZW50LCBvbik7CiAgICAgICAgZm4uYXBwbHkodm0sIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgb24uZm4gPSBmbjsKICAgICAgdm0uJG9uKGV2ZW50LCBvbik7CiAgICAgIHJldHVybiB2bQogICAgfTsKCiAgICBWdWUucHJvdG90eXBlLiRvZmYgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIC8vIGFsbAogICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHsKICAgICAgICB2bS5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgICByZXR1cm4gdm0KICAgICAgfQogICAgICAvLyBhcnJheSBvZiBldmVudHMKICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZXZlbnQpKSB7CiAgICAgICAgZm9yICh2YXIgaSQxID0gMCwgbCA9IGV2ZW50Lmxlbmd0aDsgaSQxIDwgbDsgaSQxKyspIHsKICAgICAgICAgIHZtLiRvZmYoZXZlbnRbaSQxXSwgZm4pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdm0KICAgICAgfQogICAgICAvLyBzcGVjaWZpYyBldmVudAogICAgICB2YXIgY2JzID0gdm0uX2V2ZW50c1tldmVudF07CiAgICAgIGlmICghY2JzKSB7CiAgICAgICAgcmV0dXJuIHZtCiAgICAgIH0KICAgICAgaWYgKCFmbikgewogICAgICAgIHZtLl9ldmVudHNbZXZlbnRdID0gbnVsbDsKICAgICAgICByZXR1cm4gdm0KICAgICAgfQogICAgICAvLyBzcGVjaWZpYyBoYW5kbGVyCiAgICAgIHZhciBjYjsKICAgICAgdmFyIGkgPSBjYnMubGVuZ3RoOwogICAgICB3aGlsZSAoaS0tKSB7CiAgICAgICAgY2IgPSBjYnNbaV07CiAgICAgICAgaWYgKGNiID09PSBmbiB8fCBjYi5mbiA9PT0gZm4pIHsKICAgICAgICAgIGNicy5zcGxpY2UoaSwgMSk7CiAgICAgICAgICBicmVhawogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdm0KICAgIH07CgogICAgVnVlLnByb3RvdHlwZS4kZW1pdCA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICB7CiAgICAgICAgdmFyIGxvd2VyQ2FzZUV2ZW50ID0gZXZlbnQudG9Mb3dlckNhc2UoKTsKICAgICAgICBpZiAobG93ZXJDYXNlRXZlbnQgIT09IGV2ZW50ICYmIHZtLl9ldmVudHNbbG93ZXJDYXNlRXZlbnRdKSB7CiAgICAgICAgICB0aXAoCiAgICAgICAgICAgICJFdmVudCBcIiIgKyBsb3dlckNhc2VFdmVudCArICJcIiBpcyBlbWl0dGVkIGluIGNvbXBvbmVudCAiICsKICAgICAgICAgICAgKGZvcm1hdENvbXBvbmVudE5hbWUodm0pKSArICIgYnV0IHRoZSBoYW5kbGVyIGlzIHJlZ2lzdGVyZWQgZm9yIFwiIiArIGV2ZW50ICsgIlwiLiAiICsKICAgICAgICAgICAgIk5vdGUgdGhhdCBIVE1MIGF0dHJpYnV0ZXMgYXJlIGNhc2UtaW5zZW5zaXRpdmUgYW5kIHlvdSBjYW5ub3QgdXNlICIgKwogICAgICAgICAgICAidi1vbiB0byBsaXN0ZW4gdG8gY2FtZWxDYXNlIGV2ZW50cyB3aGVuIHVzaW5nIGluLURPTSB0ZW1wbGF0ZXMuICIgKwogICAgICAgICAgICAiWW91IHNob3VsZCBwcm9iYWJseSB1c2UgXCIiICsgKGh5cGhlbmF0ZShldmVudCkpICsgIlwiIGluc3RlYWQgb2YgXCIiICsgZXZlbnQgKyAiXCIuIgogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdmFyIGNicyA9IHZtLl9ldmVudHNbZXZlbnRdOwogICAgICBpZiAoY2JzKSB7CiAgICAgICAgY2JzID0gY2JzLmxlbmd0aCA+IDEgPyB0b0FycmF5KGNicykgOiBjYnM7CiAgICAgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7CiAgICAgICAgdmFyIGluZm8gPSAiZXZlbnQgaGFuZGxlciBmb3IgXCIiICsgZXZlbnQgKyAiXCIiOwogICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2JzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgaW52b2tlV2l0aEVycm9ySGFuZGxpbmcoY2JzW2ldLCB2bSwgYXJncywgdm0sIGluZm8pOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdm0KICAgIH07CiAgfQoKICAvKiAgKi8KCiAgdmFyIGFjdGl2ZUluc3RhbmNlID0gbnVsbDsKICB2YXIgaXNVcGRhdGluZ0NoaWxkQ29tcG9uZW50ID0gZmFsc2U7CgogIGZ1bmN0aW9uIHNldEFjdGl2ZUluc3RhbmNlKHZtKSB7CiAgICB2YXIgcHJldkFjdGl2ZUluc3RhbmNlID0gYWN0aXZlSW5zdGFuY2U7CiAgICBhY3RpdmVJbnN0YW5jZSA9IHZtOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgYWN0aXZlSW5zdGFuY2UgPSBwcmV2QWN0aXZlSW5zdGFuY2U7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBpbml0TGlmZWN5Y2xlICh2bSkgewogICAgdmFyIG9wdGlvbnMgPSB2bS4kb3B0aW9uczsKCiAgICAvLyBsb2NhdGUgZmlyc3Qgbm9uLWFic3RyYWN0IHBhcmVudAogICAgdmFyIHBhcmVudCA9IG9wdGlvbnMucGFyZW50OwogICAgaWYgKHBhcmVudCAmJiAhb3B0aW9ucy5hYnN0cmFjdCkgewogICAgICB3aGlsZSAocGFyZW50LiRvcHRpb25zLmFic3RyYWN0ICYmIHBhcmVudC4kcGFyZW50KSB7CiAgICAgICAgcGFyZW50ID0gcGFyZW50LiRwYXJlbnQ7CiAgICAgIH0KICAgICAgcGFyZW50LiRjaGlsZHJlbi5wdXNoKHZtKTsKICAgIH0KCiAgICB2bS4kcGFyZW50ID0gcGFyZW50OwogICAgdm0uJHJvb3QgPSBwYXJlbnQgPyBwYXJlbnQuJHJvb3QgOiB2bTsKCiAgICB2bS4kY2hpbGRyZW4gPSBbXTsKICAgIHZtLiRyZWZzID0ge307CgogICAgdm0uX3dhdGNoZXIgPSBudWxsOwogICAgdm0uX2luYWN0aXZlID0gbnVsbDsKICAgIHZtLl9kaXJlY3RJbmFjdGl2ZSA9IGZhbHNlOwogICAgdm0uX2lzTW91bnRlZCA9IGZhbHNlOwogICAgdm0uX2lzRGVzdHJveWVkID0gZmFsc2U7CiAgICB2bS5faXNCZWluZ0Rlc3Ryb3llZCA9IGZhbHNlOwogIH0KCiAgZnVuY3Rpb24gbGlmZWN5Y2xlTWl4aW4gKFZ1ZSkgewogICAgVnVlLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gKHZub2RlLCBoeWRyYXRpbmcpIHsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgdmFyIHByZXZFbCA9IHZtLiRlbDsKICAgICAgdmFyIHByZXZWbm9kZSA9IHZtLl92bm9kZTsKICAgICAgdmFyIHJlc3RvcmVBY3RpdmVJbnN0YW5jZSA9IHNldEFjdGl2ZUluc3RhbmNlKHZtKTsKICAgICAgdm0uX3Zub2RlID0gdm5vZGU7CiAgICAgIC8vIFZ1ZS5wcm90b3R5cGUuX19wYXRjaF9fIGlzIGluamVjdGVkIGluIGVudHJ5IHBvaW50cwogICAgICAvLyBiYXNlZCBvbiB0aGUgcmVuZGVyaW5nIGJhY2tlbmQgdXNlZC4KICAgICAgaWYgKCFwcmV2Vm5vZGUpIHsKICAgICAgICAvLyBpbml0aWFsIHJlbmRlcgogICAgICAgIHZtLiRlbCA9IHZtLl9fcGF0Y2hfXyh2bS4kZWwsIHZub2RlLCBoeWRyYXRpbmcsIGZhbHNlIC8qIHJlbW92ZU9ubHkgKi8pOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIHVwZGF0ZXMKICAgICAgICB2bS4kZWwgPSB2bS5fX3BhdGNoX18ocHJldlZub2RlLCB2bm9kZSk7CiAgICAgIH0KICAgICAgcmVzdG9yZUFjdGl2ZUluc3RhbmNlKCk7CiAgICAgIC8vIHVwZGF0ZSBfX3Z1ZV9fIHJlZmVyZW5jZQogICAgICBpZiAocHJldkVsKSB7CiAgICAgICAgcHJldkVsLl9fdnVlX18gPSBudWxsOwogICAgICB9CiAgICAgIGlmICh2bS4kZWwpIHsKICAgICAgICB2bS4kZWwuX192dWVfXyA9IHZtOwogICAgICB9CiAgICAgIC8vIGlmIHBhcmVudCBpcyBhbiBIT0MsIHVwZGF0ZSBpdHMgJGVsIGFzIHdlbGwKICAgICAgaWYgKHZtLiR2bm9kZSAmJiB2bS4kcGFyZW50ICYmIHZtLiR2bm9kZSA9PT0gdm0uJHBhcmVudC5fdm5vZGUpIHsKICAgICAgICB2bS4kcGFyZW50LiRlbCA9IHZtLiRlbDsKICAgICAgfQogICAgICAvLyB1cGRhdGVkIGhvb2sgaXMgY2FsbGVkIGJ5IHRoZSBzY2hlZHVsZXIgdG8gZW5zdXJlIHRoYXQgY2hpbGRyZW4gYXJlCiAgICAgIC8vIHVwZGF0ZWQgaW4gYSBwYXJlbnQncyB1cGRhdGVkIGhvb2suCiAgICB9OwoKICAgIFZ1ZS5wcm90b3R5cGUuJGZvcmNlVXBkYXRlID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICBpZiAodm0uX3dhdGNoZXIpIHsKICAgICAgICB2bS5fd2F0Y2hlci51cGRhdGUoKTsKICAgICAgfQogICAgfTsKCiAgICBWdWUucHJvdG90eXBlLiRkZXN0cm95ID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICBpZiAodm0uX2lzQmVpbmdEZXN0cm95ZWQpIHsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBjYWxsSG9vayh2bSwgJ2JlZm9yZURlc3Ryb3knKTsKICAgICAgdm0uX2lzQmVpbmdEZXN0cm95ZWQgPSB0cnVlOwogICAgICAvLyByZW1vdmUgc2VsZiBmcm9tIHBhcmVudAogICAgICB2YXIgcGFyZW50ID0gdm0uJHBhcmVudDsKICAgICAgaWYgKHBhcmVudCAmJiAhcGFyZW50Ll9pc0JlaW5nRGVzdHJveWVkICYmICF2bS4kb3B0aW9ucy5hYnN0cmFjdCkgewogICAgICAgIHJlbW92ZShwYXJlbnQuJGNoaWxkcmVuLCB2bSk7CiAgICAgIH0KICAgICAgLy8gdGVhcmRvd24gd2F0Y2hlcnMKICAgICAgaWYgKHZtLl93YXRjaGVyKSB7CiAgICAgICAgdm0uX3dhdGNoZXIudGVhcmRvd24oKTsKICAgICAgfQogICAgICB2YXIgaSA9IHZtLl93YXRjaGVycy5sZW5ndGg7CiAgICAgIHdoaWxlIChpLS0pIHsKICAgICAgICB2bS5fd2F0Y2hlcnNbaV0udGVhcmRvd24oKTsKICAgICAgfQogICAgICAvLyByZW1vdmUgcmVmZXJlbmNlIGZyb20gZGF0YSBvYgogICAgICAvLyBmcm96ZW4gb2JqZWN0IG1heSBub3QgaGF2ZSBvYnNlcnZlci4KICAgICAgaWYgKHZtLl9kYXRhLl9fb2JfXykgewogICAgICAgIHZtLl9kYXRhLl9fb2JfXy52bUNvdW50LS07CiAgICAgIH0KICAgICAgLy8gY2FsbCB0aGUgbGFzdCBob29rLi4uCiAgICAgIHZtLl9pc0Rlc3Ryb3llZCA9IHRydWU7CiAgICAgIC8vIGludm9rZSBkZXN0cm95IGhvb2tzIG9uIGN1cnJlbnQgcmVuZGVyZWQgdHJlZQogICAgICB2bS5fX3BhdGNoX18odm0uX3Zub2RlLCBudWxsKTsKICAgICAgLy8gZmlyZSBkZXN0cm95ZWQgaG9vawogICAgICBjYWxsSG9vayh2bSwgJ2Rlc3Ryb3llZCcpOwogICAgICAvLyB0dXJuIG9mZiBhbGwgaW5zdGFuY2UgbGlzdGVuZXJzLgogICAgICB2bS4kb2ZmKCk7CiAgICAgIC8vIHJlbW92ZSBfX3Z1ZV9fIHJlZmVyZW5jZQogICAgICBpZiAodm0uJGVsKSB7CiAgICAgICAgdm0uJGVsLl9fdnVlX18gPSBudWxsOwogICAgICB9CiAgICAgIC8vIHJlbGVhc2UgY2lyY3VsYXIgcmVmZXJlbmNlICgjNjc1OSkKICAgICAgaWYgKHZtLiR2bm9kZSkgewogICAgICAgIHZtLiR2bm9kZS5wYXJlbnQgPSBudWxsOwogICAgICB9CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gbW91bnRDb21wb25lbnQgKAogICAgdm0sCiAgICBlbCwKICAgIGh5ZHJhdGluZwogICkgewogICAgdm0uJGVsID0gZWw7CiAgICBpZiAoIXZtLiRvcHRpb25zLnJlbmRlcikgewogICAgICB2bS4kb3B0aW9ucy5yZW5kZXIgPSBjcmVhdGVFbXB0eVZOb2RlOwogICAgICB7CiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICAgICAgaWYgKCh2bS4kb3B0aW9ucy50ZW1wbGF0ZSAmJiB2bS4kb3B0aW9ucy50ZW1wbGF0ZS5jaGFyQXQoMCkgIT09ICcjJykgfHwKICAgICAgICAgIHZtLiRvcHRpb25zLmVsIHx8IGVsKSB7CiAgICAgICAgICB3YXJuKAogICAgICAgICAgICAnWW91IGFyZSB1c2luZyB0aGUgcnVudGltZS1vbmx5IGJ1aWxkIG9mIFZ1ZSB3aGVyZSB0aGUgdGVtcGxhdGUgJyArCiAgICAgICAgICAgICdjb21waWxlciBpcyBub3QgYXZhaWxhYmxlLiBFaXRoZXIgcHJlLWNvbXBpbGUgdGhlIHRlbXBsYXRlcyBpbnRvICcgKwogICAgICAgICAgICAncmVuZGVyIGZ1bmN0aW9ucywgb3IgdXNlIHRoZSBjb21waWxlci1pbmNsdWRlZCBidWlsZC4nLAogICAgICAgICAgICB2bQogICAgICAgICAgKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgd2FybigKICAgICAgICAgICAgJ0ZhaWxlZCB0byBtb3VudCBjb21wb25lbnQ6IHRlbXBsYXRlIG9yIHJlbmRlciBmdW5jdGlvbiBub3QgZGVmaW5lZC4nLAogICAgICAgICAgICB2bQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGNhbGxIb29rKHZtLCAnYmVmb3JlTW91bnQnKTsKCiAgICB2YXIgdXBkYXRlQ29tcG9uZW50OwogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoY29uZmlnLnBlcmZvcm1hbmNlICYmIG1hcmspIHsKICAgICAgdXBkYXRlQ29tcG9uZW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBuYW1lID0gdm0uX25hbWU7CiAgICAgICAgdmFyIGlkID0gdm0uX3VpZDsKICAgICAgICB2YXIgc3RhcnRUYWcgPSAidnVlLXBlcmYtc3RhcnQ6IiArIGlkOwogICAgICAgIHZhciBlbmRUYWcgPSAidnVlLXBlcmYtZW5kOiIgKyBpZDsKCiAgICAgICAgbWFyayhzdGFydFRhZyk7CiAgICAgICAgdmFyIHZub2RlID0gdm0uX3JlbmRlcigpOwogICAgICAgIG1hcmsoZW5kVGFnKTsKICAgICAgICBtZWFzdXJlKCgidnVlICIgKyBuYW1lICsgIiByZW5kZXIiKSwgc3RhcnRUYWcsIGVuZFRhZyk7CgogICAgICAgIG1hcmsoc3RhcnRUYWcpOwogICAgICAgIHZtLl91cGRhdGUodm5vZGUsIGh5ZHJhdGluZyk7CiAgICAgICAgbWFyayhlbmRUYWcpOwogICAgICAgIG1lYXN1cmUoKCJ2dWUgIiArIG5hbWUgKyAiIHBhdGNoIiksIHN0YXJ0VGFnLCBlbmRUYWcpOwogICAgICB9OwogICAgfSBlbHNlIHsKICAgICAgdXBkYXRlQ29tcG9uZW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZtLl91cGRhdGUodm0uX3JlbmRlcigpLCBoeWRyYXRpbmcpOwogICAgICB9OwogICAgfQoKICAgIC8vIHdlIHNldCB0aGlzIHRvIHZtLl93YXRjaGVyIGluc2lkZSB0aGUgd2F0Y2hlcidzIGNvbnN0cnVjdG9yCiAgICAvLyBzaW5jZSB0aGUgd2F0Y2hlcidzIGluaXRpYWwgcGF0Y2ggbWF5IGNhbGwgJGZvcmNlVXBkYXRlIChlLmcuIGluc2lkZSBjaGlsZAogICAgLy8gY29tcG9uZW50J3MgbW91bnRlZCBob29rKSwgd2hpY2ggcmVsaWVzIG9uIHZtLl93YXRjaGVyIGJlaW5nIGFscmVhZHkgZGVmaW5lZAogICAgbmV3IFdhdGNoZXIodm0sIHVwZGF0ZUNvbXBvbmVudCwgbm9vcCwgewogICAgICBiZWZvcmU6IGZ1bmN0aW9uIGJlZm9yZSAoKSB7CiAgICAgICAgaWYgKHZtLl9pc01vdW50ZWQgJiYgIXZtLl9pc0Rlc3Ryb3llZCkgewogICAgICAgICAgY2FsbEhvb2sodm0sICdiZWZvcmVVcGRhdGUnKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIHRydWUgLyogaXNSZW5kZXJXYXRjaGVyICovKTsKICAgIGh5ZHJhdGluZyA9IGZhbHNlOwoKICAgIC8vIG1hbnVhbGx5IG1vdW50ZWQgaW5zdGFuY2UsIGNhbGwgbW91bnRlZCBvbiBzZWxmCiAgICAvLyBtb3VudGVkIGlzIGNhbGxlZCBmb3IgcmVuZGVyLWNyZWF0ZWQgY2hpbGQgY29tcG9uZW50cyBpbiBpdHMgaW5zZXJ0ZWQgaG9vawogICAgaWYgKHZtLiR2bm9kZSA9PSBudWxsKSB7CiAgICAgIHZtLl9pc01vdW50ZWQgPSB0cnVlOwogICAgICBjYWxsSG9vayh2bSwgJ21vdW50ZWQnKTsKICAgIH0KICAgIHJldHVybiB2bQogIH0KCiAgZnVuY3Rpb24gdXBkYXRlQ2hpbGRDb21wb25lbnQgKAogICAgdm0sCiAgICBwcm9wc0RhdGEsCiAgICBsaXN0ZW5lcnMsCiAgICBwYXJlbnRWbm9kZSwKICAgIHJlbmRlckNoaWxkcmVuCiAgKSB7CiAgICB7CiAgICAgIGlzVXBkYXRpbmdDaGlsZENvbXBvbmVudCA9IHRydWU7CiAgICB9CgogICAgLy8gZGV0ZXJtaW5lIHdoZXRoZXIgY29tcG9uZW50IGhhcyBzbG90IGNoaWxkcmVuCiAgICAvLyB3ZSBuZWVkIHRvIGRvIHRoaXMgYmVmb3JlIG92ZXJ3cml0aW5nICRvcHRpb25zLl9yZW5kZXJDaGlsZHJlbi4KCiAgICAvLyBjaGVjayBpZiB0aGVyZSBhcmUgZHluYW1pYyBzY29wZWRTbG90cyAoaGFuZC13cml0dGVuIG9yIGNvbXBpbGVkIGJ1dCB3aXRoCiAgICAvLyBkeW5hbWljIHNsb3QgbmFtZXMpLiBTdGF0aWMgc2NvcGVkIHNsb3RzIGNvbXBpbGVkIGZyb20gdGVtcGxhdGUgaGFzIHRoZQogICAgLy8gIiRzdGFibGUiIG1hcmtlci4KICAgIHZhciBuZXdTY29wZWRTbG90cyA9IHBhcmVudFZub2RlLmRhdGEuc2NvcGVkU2xvdHM7CiAgICB2YXIgb2xkU2NvcGVkU2xvdHMgPSB2bS4kc2NvcGVkU2xvdHM7CiAgICB2YXIgaGFzRHluYW1pY1Njb3BlZFNsb3QgPSAhISgKICAgICAgKG5ld1Njb3BlZFNsb3RzICYmICFuZXdTY29wZWRTbG90cy4kc3RhYmxlKSB8fAogICAgICAob2xkU2NvcGVkU2xvdHMgIT09IGVtcHR5T2JqZWN0ICYmICFvbGRTY29wZWRTbG90cy4kc3RhYmxlKSB8fAogICAgICAobmV3U2NvcGVkU2xvdHMgJiYgdm0uJHNjb3BlZFNsb3RzLiRrZXkgIT09IG5ld1Njb3BlZFNsb3RzLiRrZXkpCiAgICApOwoKICAgIC8vIEFueSBzdGF0aWMgc2xvdCBjaGlsZHJlbiBmcm9tIHRoZSBwYXJlbnQgbWF5IGhhdmUgY2hhbmdlZCBkdXJpbmcgcGFyZW50J3MKICAgIC8vIHVwZGF0ZS4gRHluYW1pYyBzY29wZWQgc2xvdHMgbWF5IGFsc28gaGF2ZSBjaGFuZ2VkLiBJbiBzdWNoIGNhc2VzLCBhIGZvcmNlZAogICAgLy8gdXBkYXRlIGlzIG5lY2Vzc2FyeSB0byBlbnN1cmUgY29ycmVjdG5lc3MuCiAgICB2YXIgbmVlZHNGb3JjZVVwZGF0ZSA9ICEhKAogICAgICByZW5kZXJDaGlsZHJlbiB8fCAgICAgICAgICAgICAgIC8vIGhhcyBuZXcgc3RhdGljIHNsb3RzCiAgICAgIHZtLiRvcHRpb25zLl9yZW5kZXJDaGlsZHJlbiB8fCAgLy8gaGFzIG9sZCBzdGF0aWMgc2xvdHMKICAgICAgaGFzRHluYW1pY1Njb3BlZFNsb3QKICAgICk7CgogICAgdm0uJG9wdGlvbnMuX3BhcmVudFZub2RlID0gcGFyZW50Vm5vZGU7CiAgICB2bS4kdm5vZGUgPSBwYXJlbnRWbm9kZTsgLy8gdXBkYXRlIHZtJ3MgcGxhY2Vob2xkZXIgbm9kZSB3aXRob3V0IHJlLXJlbmRlcgoKICAgIGlmICh2bS5fdm5vZGUpIHsgLy8gdXBkYXRlIGNoaWxkIHRyZWUncyBwYXJlbnQKICAgICAgdm0uX3Zub2RlLnBhcmVudCA9IHBhcmVudFZub2RlOwogICAgfQogICAgdm0uJG9wdGlvbnMuX3JlbmRlckNoaWxkcmVuID0gcmVuZGVyQ2hpbGRyZW47CgogICAgLy8gdXBkYXRlICRhdHRycyBhbmQgJGxpc3RlbmVycyBoYXNoCiAgICAvLyB0aGVzZSBhcmUgYWxzbyByZWFjdGl2ZSBzbyB0aGV5IG1heSB0cmlnZ2VyIGNoaWxkIHVwZGF0ZSBpZiB0aGUgY2hpbGQKICAgIC8vIHVzZWQgdGhlbSBkdXJpbmcgcmVuZGVyCiAgICB2bS4kYXR0cnMgPSBwYXJlbnRWbm9kZS5kYXRhLmF0dHJzIHx8IGVtcHR5T2JqZWN0OwogICAgdm0uJGxpc3RlbmVycyA9IGxpc3RlbmVycyB8fCBlbXB0eU9iamVjdDsKCiAgICAvLyB1cGRhdGUgcHJvcHMKICAgIGlmIChwcm9wc0RhdGEgJiYgdm0uJG9wdGlvbnMucHJvcHMpIHsKICAgICAgdG9nZ2xlT2JzZXJ2aW5nKGZhbHNlKTsKICAgICAgdmFyIHByb3BzID0gdm0uX3Byb3BzOwogICAgICB2YXIgcHJvcEtleXMgPSB2bS4kb3B0aW9ucy5fcHJvcEtleXMgfHwgW107CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcEtleXMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIga2V5ID0gcHJvcEtleXNbaV07CiAgICAgICAgdmFyIHByb3BPcHRpb25zID0gdm0uJG9wdGlvbnMucHJvcHM7IC8vIHd0ZiBmbG93PwogICAgICAgIHByb3BzW2tleV0gPSB2YWxpZGF0ZVByb3Aoa2V5LCBwcm9wT3B0aW9ucywgcHJvcHNEYXRhLCB2bSk7CiAgICAgIH0KICAgICAgdG9nZ2xlT2JzZXJ2aW5nKHRydWUpOwogICAgICAvLyBrZWVwIGEgY29weSBvZiByYXcgcHJvcHNEYXRhCiAgICAgIHZtLiRvcHRpb25zLnByb3BzRGF0YSA9IHByb3BzRGF0YTsKICAgIH0KCiAgICAvLyB1cGRhdGUgbGlzdGVuZXJzCiAgICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMgfHwgZW1wdHlPYmplY3Q7CiAgICB2YXIgb2xkTGlzdGVuZXJzID0gdm0uJG9wdGlvbnMuX3BhcmVudExpc3RlbmVyczsKICAgIHZtLiRvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnMgPSBsaXN0ZW5lcnM7CiAgICB1cGRhdGVDb21wb25lbnRMaXN0ZW5lcnModm0sIGxpc3RlbmVycywgb2xkTGlzdGVuZXJzKTsKCiAgICAvLyByZXNvbHZlIHNsb3RzICsgZm9yY2UgdXBkYXRlIGlmIGhhcyBjaGlsZHJlbgogICAgaWYgKG5lZWRzRm9yY2VVcGRhdGUpIHsKICAgICAgdm0uJHNsb3RzID0gcmVzb2x2ZVNsb3RzKHJlbmRlckNoaWxkcmVuLCBwYXJlbnRWbm9kZS5jb250ZXh0KTsKICAgICAgdm0uJGZvcmNlVXBkYXRlKCk7CiAgICB9CgogICAgewogICAgICBpc1VwZGF0aW5nQ2hpbGRDb21wb25lbnQgPSBmYWxzZTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGlzSW5JbmFjdGl2ZVRyZWUgKHZtKSB7CiAgICB3aGlsZSAodm0gJiYgKHZtID0gdm0uJHBhcmVudCkpIHsKICAgICAgaWYgKHZtLl9pbmFjdGl2ZSkgeyByZXR1cm4gdHJ1ZSB9CiAgICB9CiAgICByZXR1cm4gZmFsc2UKICB9CgogIGZ1bmN0aW9uIGFjdGl2YXRlQ2hpbGRDb21wb25lbnQgKHZtLCBkaXJlY3QpIHsKICAgIGlmIChkaXJlY3QpIHsKICAgICAgdm0uX2RpcmVjdEluYWN0aXZlID0gZmFsc2U7CiAgICAgIGlmIChpc0luSW5hY3RpdmVUcmVlKHZtKSkgewogICAgICAgIHJldHVybgogICAgICB9CiAgICB9IGVsc2UgaWYgKHZtLl9kaXJlY3RJbmFjdGl2ZSkgewogICAgICByZXR1cm4KICAgIH0KICAgIGlmICh2bS5faW5hY3RpdmUgfHwgdm0uX2luYWN0aXZlID09PSBudWxsKSB7CiAgICAgIHZtLl9pbmFjdGl2ZSA9IGZhbHNlOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLiRjaGlsZHJlbi5sZW5ndGg7IGkrKykgewogICAgICAgIGFjdGl2YXRlQ2hpbGRDb21wb25lbnQodm0uJGNoaWxkcmVuW2ldKTsKICAgICAgfQogICAgICBjYWxsSG9vayh2bSwgJ2FjdGl2YXRlZCcpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gZGVhY3RpdmF0ZUNoaWxkQ29tcG9uZW50ICh2bSwgZGlyZWN0KSB7CiAgICBpZiAoZGlyZWN0KSB7CiAgICAgIHZtLl9kaXJlY3RJbmFjdGl2ZSA9IHRydWU7CiAgICAgIGlmIChpc0luSW5hY3RpdmVUcmVlKHZtKSkgewogICAgICAgIHJldHVybgogICAgICB9CiAgICB9CiAgICBpZiAoIXZtLl9pbmFjdGl2ZSkgewogICAgICB2bS5faW5hY3RpdmUgPSB0cnVlOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLiRjaGlsZHJlbi5sZW5ndGg7IGkrKykgewogICAgICAgIGRlYWN0aXZhdGVDaGlsZENvbXBvbmVudCh2bS4kY2hpbGRyZW5baV0pOwogICAgICB9CiAgICAgIGNhbGxIb29rKHZtLCAnZGVhY3RpdmF0ZWQnKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGNhbGxIb29rICh2bSwgaG9vaykgewogICAgLy8gIzc1NzMgZGlzYWJsZSBkZXAgY29sbGVjdGlvbiB3aGVuIGludm9raW5nIGxpZmVjeWNsZSBob29rcwogICAgcHVzaFRhcmdldCgpOwogICAgdmFyIGhhbmRsZXJzID0gdm0uJG9wdGlvbnNbaG9va107CiAgICB2YXIgaW5mbyA9IGhvb2sgKyAiIGhvb2siOwogICAgaWYgKGhhbmRsZXJzKSB7CiAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gaGFuZGxlcnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7CiAgICAgICAgaW52b2tlV2l0aEVycm9ySGFuZGxpbmcoaGFuZGxlcnNbaV0sIHZtLCBudWxsLCB2bSwgaW5mbyk7CiAgICAgIH0KICAgIH0KICAgIGlmICh2bS5faGFzSG9va0V2ZW50KSB7CiAgICAgIHZtLiRlbWl0KCdob29rOicgKyBob29rKTsKICAgIH0KICAgIHBvcFRhcmdldCgpOwogIH0KCiAgLyogICovCgogIHZhciBNQVhfVVBEQVRFX0NPVU5UID0gMTAwOwoKICB2YXIgcXVldWUgPSBbXTsKICB2YXIgYWN0aXZhdGVkQ2hpbGRyZW4gPSBbXTsKICB2YXIgaGFzID0ge307CiAgdmFyIGNpcmN1bGFyID0ge307CiAgdmFyIHdhaXRpbmcgPSBmYWxzZTsKICB2YXIgZmx1c2hpbmcgPSBmYWxzZTsKICB2YXIgaW5kZXggPSAwOwoKICAvKioKICAgKiBSZXNldCB0aGUgc2NoZWR1bGVyJ3Mgc3RhdGUuCiAgICovCiAgZnVuY3Rpb24gcmVzZXRTY2hlZHVsZXJTdGF0ZSAoKSB7CiAgICBpbmRleCA9IHF1ZXVlLmxlbmd0aCA9IGFjdGl2YXRlZENoaWxkcmVuLmxlbmd0aCA9IDA7CiAgICBoYXMgPSB7fTsKICAgIHsKICAgICAgY2lyY3VsYXIgPSB7fTsKICAgIH0KICAgIHdhaXRpbmcgPSBmbHVzaGluZyA9IGZhbHNlOwogIH0KCiAgLy8gQXN5bmMgZWRnZSBjYXNlICM2NTY2IHJlcXVpcmVzIHNhdmluZyB0aGUgdGltZXN0YW1wIHdoZW4gZXZlbnQgbGlzdGVuZXJzIGFyZQogIC8vIGF0dGFjaGVkLiBIb3dldmVyLCBjYWxsaW5nIHBlcmZvcm1hbmNlLm5vdygpIGhhcyBhIHBlcmYgb3ZlcmhlYWQgZXNwZWNpYWxseQogIC8vIGlmIHRoZSBwYWdlIGhhcyB0aG91c2FuZHMgb2YgZXZlbnQgbGlzdGVuZXJzLiBJbnN0ZWFkLCB3ZSB0YWtlIGEgdGltZXN0YW1wCiAgLy8gZXZlcnkgdGltZSB0aGUgc2NoZWR1bGVyIGZsdXNoZXMgYW5kIHVzZSB0aGF0IGZvciBhbGwgZXZlbnQgbGlzdGVuZXJzCiAgLy8gYXR0YWNoZWQgZHVyaW5nIHRoYXQgZmx1c2guCiAgdmFyIGN1cnJlbnRGbHVzaFRpbWVzdGFtcCA9IDA7CgogIC8vIEFzeW5jIGVkZ2UgY2FzZSBmaXggcmVxdWlyZXMgc3RvcmluZyBhbiBldmVudCBsaXN0ZW5lcidzIGF0dGFjaCB0aW1lc3RhbXAuCiAgdmFyIGdldE5vdyA9IERhdGUubm93OwoKICAvLyBEZXRlcm1pbmUgd2hhdCBldmVudCB0aW1lc3RhbXAgdGhlIGJyb3dzZXIgaXMgdXNpbmcuIEFubm95aW5nbHksIHRoZQogIC8vIHRpbWVzdGFtcCBjYW4gZWl0aGVyIGJlIGhpLXJlcyAocmVsYXRpdmUgdG8gcGFnZSBsb2FkKSBvciBsb3ctcmVzCiAgLy8gKHJlbGF0aXZlIHRvIFVOSVggZXBvY2gpLCBzbyBpbiBvcmRlciB0byBjb21wYXJlIHRpbWUgd2UgaGF2ZSB0byB1c2UgdGhlCiAgLy8gc2FtZSB0aW1lc3RhbXAgdHlwZSB3aGVuIHNhdmluZyB0aGUgZmx1c2ggdGltZXN0YW1wLgogIC8vIEFsbCBJRSB2ZXJzaW9ucyB1c2UgbG93LXJlcyBldmVudCB0aW1lc3RhbXBzLCBhbmQgaGF2ZSBwcm9ibGVtYXRpYyBjbG9jawogIC8vIGltcGxlbWVudGF0aW9ucyAoIzk2MzIpCiAgaWYgKGluQnJvd3NlciAmJiAhaXNJRSkgewogICAgdmFyIHBlcmZvcm1hbmNlID0gd2luZG93LnBlcmZvcm1hbmNlOwogICAgaWYgKAogICAgICBwZXJmb3JtYW5jZSAmJgogICAgICB0eXBlb2YgcGVyZm9ybWFuY2Uubm93ID09PSAnZnVuY3Rpb24nICYmCiAgICAgIGdldE5vdygpID4gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50JykudGltZVN0YW1wCiAgICApIHsKICAgICAgLy8gaWYgdGhlIGV2ZW50IHRpbWVzdGFtcCwgYWx0aG91Z2ggZXZhbHVhdGVkIEFGVEVSIHRoZSBEYXRlLm5vdygpLCBpcwogICAgICAvLyBzbWFsbGVyIHRoYW4gaXQsIGl0IG1lYW5zIHRoZSBldmVudCBpcyB1c2luZyBhIGhpLXJlcyB0aW1lc3RhbXAsCiAgICAgIC8vIGFuZCB3ZSBuZWVkIHRvIHVzZSB0aGUgaGktcmVzIHZlcnNpb24gZm9yIGV2ZW50IGxpc3RlbmVyIHRpbWVzdGFtcHMgYXMKICAgICAgLy8gd2VsbC4KICAgICAgZ2V0Tm93ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gcGVyZm9ybWFuY2Uubm93KCk7IH07CiAgICB9CiAgfQoKICAvKioKICAgKiBGbHVzaCBib3RoIHF1ZXVlcyBhbmQgcnVuIHRoZSB3YXRjaGVycy4KICAgKi8KICBmdW5jdGlvbiBmbHVzaFNjaGVkdWxlclF1ZXVlICgpIHsKICAgIGN1cnJlbnRGbHVzaFRpbWVzdGFtcCA9IGdldE5vdygpOwogICAgZmx1c2hpbmcgPSB0cnVlOwogICAgdmFyIHdhdGNoZXIsIGlkOwoKICAgIC8vIFNvcnQgcXVldWUgYmVmb3JlIGZsdXNoLgogICAgLy8gVGhpcyBlbnN1cmVzIHRoYXQ6CiAgICAvLyAxLiBDb21wb25lbnRzIGFyZSB1cGRhdGVkIGZyb20gcGFyZW50IHRvIGNoaWxkLiAoYmVjYXVzZSBwYXJlbnQgaXMgYWx3YXlzCiAgICAvLyAgICBjcmVhdGVkIGJlZm9yZSB0aGUgY2hpbGQpCiAgICAvLyAyLiBBIGNvbXBvbmVudCdzIHVzZXIgd2F0Y2hlcnMgYXJlIHJ1biBiZWZvcmUgaXRzIHJlbmRlciB3YXRjaGVyIChiZWNhdXNlCiAgICAvLyAgICB1c2VyIHdhdGNoZXJzIGFyZSBjcmVhdGVkIGJlZm9yZSB0aGUgcmVuZGVyIHdhdGNoZXIpCiAgICAvLyAzLiBJZiBhIGNvbXBvbmVudCBpcyBkZXN0cm95ZWQgZHVyaW5nIGEgcGFyZW50IGNvbXBvbmVudCdzIHdhdGNoZXIgcnVuLAogICAgLy8gICAgaXRzIHdhdGNoZXJzIGNhbiBiZSBza2lwcGVkLgogICAgcXVldWUuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYS5pZCAtIGIuaWQ7IH0pOwoKICAgIC8vIGRvIG5vdCBjYWNoZSBsZW5ndGggYmVjYXVzZSBtb3JlIHdhdGNoZXJzIG1pZ2h0IGJlIHB1c2hlZAogICAgLy8gYXMgd2UgcnVuIGV4aXN0aW5nIHdhdGNoZXJzCiAgICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBxdWV1ZS5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgd2F0Y2hlciA9IHF1ZXVlW2luZGV4XTsKICAgICAgaWYgKHdhdGNoZXIuYmVmb3JlKSB7CiAgICAgICAgd2F0Y2hlci5iZWZvcmUoKTsKICAgICAgfQogICAgICBpZCA9IHdhdGNoZXIuaWQ7CiAgICAgIGhhc1tpZF0gPSBudWxsOwogICAgICB3YXRjaGVyLnJ1bigpOwogICAgICAvLyBpbiBkZXYgYnVpbGQsIGNoZWNrIGFuZCBzdG9wIGNpcmN1bGFyIHVwZGF0ZXMuCiAgICAgIGlmIChoYXNbaWRdICE9IG51bGwpIHsKICAgICAgICBjaXJjdWxhcltpZF0gPSAoY2lyY3VsYXJbaWRdIHx8IDApICsgMTsKICAgICAgICBpZiAoY2lyY3VsYXJbaWRdID4gTUFYX1VQREFURV9DT1VOVCkgewogICAgICAgICAgd2FybigKICAgICAgICAgICAgJ1lvdSBtYXkgaGF2ZSBhbiBpbmZpbml0ZSB1cGRhdGUgbG9vcCAnICsgKAogICAgICAgICAgICAgIHdhdGNoZXIudXNlcgogICAgICAgICAgICAgICAgPyAoImluIHdhdGNoZXIgd2l0aCBleHByZXNzaW9uIFwiIiArICh3YXRjaGVyLmV4cHJlc3Npb24pICsgIlwiIikKICAgICAgICAgICAgICAgIDogImluIGEgY29tcG9uZW50IHJlbmRlciBmdW5jdGlvbi4iCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHdhdGNoZXIudm0KICAgICAgICAgICk7CiAgICAgICAgICBicmVhawogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIC8vIGtlZXAgY29waWVzIG9mIHBvc3QgcXVldWVzIGJlZm9yZSByZXNldHRpbmcgc3RhdGUKICAgIHZhciBhY3RpdmF0ZWRRdWV1ZSA9IGFjdGl2YXRlZENoaWxkcmVuLnNsaWNlKCk7CiAgICB2YXIgdXBkYXRlZFF1ZXVlID0gcXVldWUuc2xpY2UoKTsKCiAgICByZXNldFNjaGVkdWxlclN0YXRlKCk7CgogICAgLy8gY2FsbCBjb21wb25lbnQgdXBkYXRlZCBhbmQgYWN0aXZhdGVkIGhvb2tzCiAgICBjYWxsQWN0aXZhdGVkSG9va3MoYWN0aXZhdGVkUXVldWUpOwogICAgY2FsbFVwZGF0ZWRIb29rcyh1cGRhdGVkUXVldWUpOwoKICAgIC8vIGRldnRvb2wgaG9vawogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoZGV2dG9vbHMgJiYgY29uZmlnLmRldnRvb2xzKSB7CiAgICAgIGRldnRvb2xzLmVtaXQoJ2ZsdXNoJyk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBjYWxsVXBkYXRlZEhvb2tzIChxdWV1ZSkgewogICAgdmFyIGkgPSBxdWV1ZS5sZW5ndGg7CiAgICB3aGlsZSAoaS0tKSB7CiAgICAgIHZhciB3YXRjaGVyID0gcXVldWVbaV07CiAgICAgIHZhciB2bSA9IHdhdGNoZXIudm07CiAgICAgIGlmICh2bS5fd2F0Y2hlciA9PT0gd2F0Y2hlciAmJiB2bS5faXNNb3VudGVkICYmICF2bS5faXNEZXN0cm95ZWQpIHsKICAgICAgICBjYWxsSG9vayh2bSwgJ3VwZGF0ZWQnKTsKICAgICAgfQogICAgfQogIH0KCiAgLyoqCiAgICogUXVldWUgYSBrZXB0LWFsaXZlIGNvbXBvbmVudCB0aGF0IHdhcyBhY3RpdmF0ZWQgZHVyaW5nIHBhdGNoLgogICAqIFRoZSBxdWV1ZSB3aWxsIGJlIHByb2Nlc3NlZCBhZnRlciB0aGUgZW50aXJlIHRyZWUgaGFzIGJlZW4gcGF0Y2hlZC4KICAgKi8KICBmdW5jdGlvbiBxdWV1ZUFjdGl2YXRlZENvbXBvbmVudCAodm0pIHsKICAgIC8vIHNldHRpbmcgX2luYWN0aXZlIHRvIGZhbHNlIGhlcmUgc28gdGhhdCBhIHJlbmRlciBmdW5jdGlvbiBjYW4KICAgIC8vIHJlbHkgb24gY2hlY2tpbmcgd2hldGhlciBpdCdzIGluIGFuIGluYWN0aXZlIHRyZWUgKGUuZy4gcm91dGVyLXZpZXcpCiAgICB2bS5faW5hY3RpdmUgPSBmYWxzZTsKICAgIGFjdGl2YXRlZENoaWxkcmVuLnB1c2godm0pOwogIH0KCiAgZnVuY3Rpb24gY2FsbEFjdGl2YXRlZEhvb2tzIChxdWV1ZSkgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykgewogICAgICBxdWV1ZVtpXS5faW5hY3RpdmUgPSB0cnVlOwogICAgICBhY3RpdmF0ZUNoaWxkQ29tcG9uZW50KHF1ZXVlW2ldLCB0cnVlIC8qIHRydWUgKi8pOwogICAgfQogIH0KCiAgLyoqCiAgICogUHVzaCBhIHdhdGNoZXIgaW50byB0aGUgd2F0Y2hlciBxdWV1ZS4KICAgKiBKb2JzIHdpdGggZHVwbGljYXRlIElEcyB3aWxsIGJlIHNraXBwZWQgdW5sZXNzIGl0J3MKICAgKiBwdXNoZWQgd2hlbiB0aGUgcXVldWUgaXMgYmVpbmcgZmx1c2hlZC4KICAgKi8KICBmdW5jdGlvbiBxdWV1ZVdhdGNoZXIgKHdhdGNoZXIpIHsKICAgIHZhciBpZCA9IHdhdGNoZXIuaWQ7CiAgICBpZiAoaGFzW2lkXSA9PSBudWxsKSB7CiAgICAgIGhhc1tpZF0gPSB0cnVlOwogICAgICBpZiAoIWZsdXNoaW5nKSB7CiAgICAgICAgcXVldWUucHVzaCh3YXRjaGVyKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBpZiBhbHJlYWR5IGZsdXNoaW5nLCBzcGxpY2UgdGhlIHdhdGNoZXIgYmFzZWQgb24gaXRzIGlkCiAgICAgICAgLy8gaWYgYWxyZWFkeSBwYXN0IGl0cyBpZCwgaXQgd2lsbCBiZSBydW4gbmV4dCBpbW1lZGlhdGVseS4KICAgICAgICB2YXIgaSA9IHF1ZXVlLmxlbmd0aCAtIDE7CiAgICAgICAgd2hpbGUgKGkgPiBpbmRleCAmJiBxdWV1ZVtpXS5pZCA+IHdhdGNoZXIuaWQpIHsKICAgICAgICAgIGktLTsKICAgICAgICB9CiAgICAgICAgcXVldWUuc3BsaWNlKGkgKyAxLCAwLCB3YXRjaGVyKTsKICAgICAgfQogICAgICAvLyBxdWV1ZSB0aGUgZmx1c2gKICAgICAgaWYgKCF3YWl0aW5nKSB7CiAgICAgICAgd2FpdGluZyA9IHRydWU7CgogICAgICAgIGlmICghY29uZmlnLmFzeW5jKSB7CiAgICAgICAgICBmbHVzaFNjaGVkdWxlclF1ZXVlKCk7CiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgbmV4dFRpY2soZmx1c2hTY2hlZHVsZXJRdWV1ZSk7CiAgICAgIH0KICAgIH0KICB9CgogIC8qICAqLwoKCgogIHZhciB1aWQkMiA9IDA7CgogIC8qKgogICAqIEEgd2F0Y2hlciBwYXJzZXMgYW4gZXhwcmVzc2lvbiwgY29sbGVjdHMgZGVwZW5kZW5jaWVzLAogICAqIGFuZCBmaXJlcyBjYWxsYmFjayB3aGVuIHRoZSBleHByZXNzaW9uIHZhbHVlIGNoYW5nZXMuCiAgICogVGhpcyBpcyB1c2VkIGZvciBib3RoIHRoZSAkd2F0Y2goKSBhcGkgYW5kIGRpcmVjdGl2ZXMuCiAgICovCiAgdmFyIFdhdGNoZXIgPSBmdW5jdGlvbiBXYXRjaGVyICgKICAgIHZtLAogICAgZXhwT3JGbiwKICAgIGNiLAogICAgb3B0aW9ucywKICAgIGlzUmVuZGVyV2F0Y2hlcgogICkgewogICAgdGhpcy52bSA9IHZtOwogICAgaWYgKGlzUmVuZGVyV2F0Y2hlcikgewogICAgICB2bS5fd2F0Y2hlciA9IHRoaXM7CiAgICB9CiAgICB2bS5fd2F0Y2hlcnMucHVzaCh0aGlzKTsKICAgIC8vIG9wdGlvbnMKICAgIGlmIChvcHRpb25zKSB7CiAgICAgIHRoaXMuZGVlcCA9ICEhb3B0aW9ucy5kZWVwOwogICAgICB0aGlzLnVzZXIgPSAhIW9wdGlvbnMudXNlcjsKICAgICAgdGhpcy5sYXp5ID0gISFvcHRpb25zLmxhenk7CiAgICAgIHRoaXMuc3luYyA9ICEhb3B0aW9ucy5zeW5jOwogICAgICB0aGlzLmJlZm9yZSA9IG9wdGlvbnMuYmVmb3JlOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5kZWVwID0gdGhpcy51c2VyID0gdGhpcy5sYXp5ID0gdGhpcy5zeW5jID0gZmFsc2U7CiAgICB9CiAgICB0aGlzLmNiID0gY2I7CiAgICB0aGlzLmlkID0gKyt1aWQkMjsgLy8gdWlkIGZvciBiYXRjaGluZwogICAgdGhpcy5hY3RpdmUgPSB0cnVlOwogICAgdGhpcy5kaXJ0eSA9IHRoaXMubGF6eTsgLy8gZm9yIGxhenkgd2F0Y2hlcnMKICAgIHRoaXMuZGVwcyA9IFtdOwogICAgdGhpcy5uZXdEZXBzID0gW107CiAgICB0aGlzLmRlcElkcyA9IG5ldyBfU2V0KCk7CiAgICB0aGlzLm5ld0RlcElkcyA9IG5ldyBfU2V0KCk7CiAgICB0aGlzLmV4cHJlc3Npb24gPSBleHBPckZuLnRvU3RyaW5nKCk7CiAgICAvLyBwYXJzZSBleHByZXNzaW9uIGZvciBnZXR0ZXIKICAgIGlmICh0eXBlb2YgZXhwT3JGbiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICB0aGlzLmdldHRlciA9IGV4cE9yRm47CiAgICB9IGVsc2UgewogICAgICB0aGlzLmdldHRlciA9IHBhcnNlUGF0aChleHBPckZuKTsKICAgICAgaWYgKCF0aGlzLmdldHRlcikgewogICAgICAgIHRoaXMuZ2V0dGVyID0gbm9vcDsKICAgICAgICB3YXJuKAogICAgICAgICAgIkZhaWxlZCB3YXRjaGluZyBwYXRoOiBcIiIgKyBleHBPckZuICsgIlwiICIgKwogICAgICAgICAgJ1dhdGNoZXIgb25seSBhY2NlcHRzIHNpbXBsZSBkb3QtZGVsaW1pdGVkIHBhdGhzLiAnICsKICAgICAgICAgICdGb3IgZnVsbCBjb250cm9sLCB1c2UgYSBmdW5jdGlvbiBpbnN0ZWFkLicsCiAgICAgICAgICB2bQogICAgICAgICk7CiAgICAgIH0KICAgIH0KICAgIHRoaXMudmFsdWUgPSB0aGlzLmxhenkKICAgICAgPyB1bmRlZmluZWQKICAgICAgOiB0aGlzLmdldCgpOwogIH07CgogIC8qKgogICAqIEV2YWx1YXRlIHRoZSBnZXR0ZXIsIGFuZCByZS1jb2xsZWN0IGRlcGVuZGVuY2llcy4KICAgKi8KICBXYXRjaGVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiBnZXQgKCkgewogICAgcHVzaFRhcmdldCh0aGlzKTsKICAgIHZhciB2YWx1ZTsKICAgIHZhciB2bSA9IHRoaXMudm07CiAgICB0cnkgewogICAgICB2YWx1ZSA9IHRoaXMuZ2V0dGVyLmNhbGwodm0sIHZtKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgaWYgKHRoaXMudXNlcikgewogICAgICAgIGhhbmRsZUVycm9yKGUsIHZtLCAoImdldHRlciBmb3Igd2F0Y2hlciBcIiIgKyAodGhpcy5leHByZXNzaW9uKSArICJcIiIpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aHJvdyBlCiAgICAgIH0KICAgIH0gZmluYWxseSB7CiAgICAgIC8vICJ0b3VjaCIgZXZlcnkgcHJvcGVydHkgc28gdGhleSBhcmUgYWxsIHRyYWNrZWQgYXMKICAgICAgLy8gZGVwZW5kZW5jaWVzIGZvciBkZWVwIHdhdGNoaW5nCiAgICAgIGlmICh0aGlzLmRlZXApIHsKICAgICAgICB0cmF2ZXJzZSh2YWx1ZSk7CiAgICAgIH0KICAgICAgcG9wVGFyZ2V0KCk7CiAgICAgIHRoaXMuY2xlYW51cERlcHMoKTsKICAgIH0KICAgIHJldHVybiB2YWx1ZQogIH07CgogIC8qKgogICAqIEFkZCBhIGRlcGVuZGVuY3kgdG8gdGhpcyBkaXJlY3RpdmUuCiAgICovCiAgV2F0Y2hlci5wcm90b3R5cGUuYWRkRGVwID0gZnVuY3Rpb24gYWRkRGVwIChkZXApIHsKICAgIHZhciBpZCA9IGRlcC5pZDsKICAgIGlmICghdGhpcy5uZXdEZXBJZHMuaGFzKGlkKSkgewogICAgICB0aGlzLm5ld0RlcElkcy5hZGQoaWQpOwogICAgICB0aGlzLm5ld0RlcHMucHVzaChkZXApOwogICAgICBpZiAoIXRoaXMuZGVwSWRzLmhhcyhpZCkpIHsKICAgICAgICBkZXAuYWRkU3ViKHRoaXMpOwogICAgICB9CiAgICB9CiAgfTsKCiAgLyoqCiAgICogQ2xlYW4gdXAgZm9yIGRlcGVuZGVuY3kgY29sbGVjdGlvbi4KICAgKi8KICBXYXRjaGVyLnByb3RvdHlwZS5jbGVhbnVwRGVwcyA9IGZ1bmN0aW9uIGNsZWFudXBEZXBzICgpIHsKICAgIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDsKICAgIHdoaWxlIChpLS0pIHsKICAgICAgdmFyIGRlcCA9IHRoaXMuZGVwc1tpXTsKICAgICAgaWYgKCF0aGlzLm5ld0RlcElkcy5oYXMoZGVwLmlkKSkgewogICAgICAgIGRlcC5yZW1vdmVTdWIodGhpcyk7CiAgICAgIH0KICAgIH0KICAgIHZhciB0bXAgPSB0aGlzLmRlcElkczsKICAgIHRoaXMuZGVwSWRzID0gdGhpcy5uZXdEZXBJZHM7CiAgICB0aGlzLm5ld0RlcElkcyA9IHRtcDsKICAgIHRoaXMubmV3RGVwSWRzLmNsZWFyKCk7CiAgICB0bXAgPSB0aGlzLmRlcHM7CiAgICB0aGlzLmRlcHMgPSB0aGlzLm5ld0RlcHM7CiAgICB0aGlzLm5ld0RlcHMgPSB0bXA7CiAgICB0aGlzLm5ld0RlcHMubGVuZ3RoID0gMDsKICB9OwoKICAvKioKICAgKiBTdWJzY3JpYmVyIGludGVyZmFjZS4KICAgKiBXaWxsIGJlIGNhbGxlZCB3aGVuIGEgZGVwZW5kZW5jeSBjaGFuZ2VzLgogICAqLwogIFdhdGNoZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZSAoKSB7CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqLwogICAgaWYgKHRoaXMubGF6eSkgewogICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTsKICAgIH0gZWxzZSBpZiAodGhpcy5zeW5jKSB7CiAgICAgIHRoaXMucnVuKCk7CiAgICB9IGVsc2UgewogICAgICBxdWV1ZVdhdGNoZXIodGhpcyk7CiAgICB9CiAgfTsKCiAgLyoqCiAgICogU2NoZWR1bGVyIGpvYiBpbnRlcmZhY2UuCiAgICogV2lsbCBiZSBjYWxsZWQgYnkgdGhlIHNjaGVkdWxlci4KICAgKi8KICBXYXRjaGVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiBydW4gKCkgewogICAgaWYgKHRoaXMuYWN0aXZlKSB7CiAgICAgIHZhciB2YWx1ZSA9IHRoaXMuZ2V0KCk7CiAgICAgIGlmICgKICAgICAgICB2YWx1ZSAhPT0gdGhpcy52YWx1ZSB8fAogICAgICAgIC8vIERlZXAgd2F0Y2hlcnMgYW5kIHdhdGNoZXJzIG9uIE9iamVjdC9BcnJheXMgc2hvdWxkIGZpcmUgZXZlbgogICAgICAgIC8vIHdoZW4gdGhlIHZhbHVlIGlzIHRoZSBzYW1lLCBiZWNhdXNlIHRoZSB2YWx1ZSBtYXkKICAgICAgICAvLyBoYXZlIG11dGF0ZWQuCiAgICAgICAgaXNPYmplY3QodmFsdWUpIHx8CiAgICAgICAgdGhpcy5kZWVwCiAgICAgICkgewogICAgICAgIC8vIHNldCBuZXcgdmFsdWUKICAgICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlOwogICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKICAgICAgICBpZiAodGhpcy51c2VyKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICB0aGlzLmNiLmNhbGwodGhpcy52bSwgdmFsdWUsIG9sZFZhbHVlKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgaGFuZGxlRXJyb3IoZSwgdGhpcy52bSwgKCJjYWxsYmFjayBmb3Igd2F0Y2hlciBcIiIgKyAodGhpcy5leHByZXNzaW9uKSArICJcIiIpKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5jYi5jYWxsKHRoaXMudm0sIHZhbHVlLCBvbGRWYWx1ZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgLyoqCiAgICogRXZhbHVhdGUgdGhlIHZhbHVlIG9mIHRoZSB3YXRjaGVyLgogICAqIFRoaXMgb25seSBnZXRzIGNhbGxlZCBmb3IgbGF6eSB3YXRjaGVycy4KICAgKi8KICBXYXRjaGVyLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uIGV2YWx1YXRlICgpIHsKICAgIHRoaXMudmFsdWUgPSB0aGlzLmdldCgpOwogICAgdGhpcy5kaXJ0eSA9IGZhbHNlOwogIH07CgogIC8qKgogICAqIERlcGVuZCBvbiBhbGwgZGVwcyBjb2xsZWN0ZWQgYnkgdGhpcyB3YXRjaGVyLgogICAqLwogIFdhdGNoZXIucHJvdG90eXBlLmRlcGVuZCA9IGZ1bmN0aW9uIGRlcGVuZCAoKSB7CiAgICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7CiAgICB3aGlsZSAoaS0tKSB7CiAgICAgIHRoaXMuZGVwc1tpXS5kZXBlbmQoKTsKICAgIH0KICB9OwoKICAvKioKICAgKiBSZW1vdmUgc2VsZiBmcm9tIGFsbCBkZXBlbmRlbmNpZXMnIHN1YnNjcmliZXIgbGlzdC4KICAgKi8KICBXYXRjaGVyLnByb3RvdHlwZS50ZWFyZG93biA9IGZ1bmN0aW9uIHRlYXJkb3duICgpIHsKICAgIGlmICh0aGlzLmFjdGl2ZSkgewogICAgICAvLyByZW1vdmUgc2VsZiBmcm9tIHZtJ3Mgd2F0Y2hlciBsaXN0CiAgICAgIC8vIHRoaXMgaXMgYSBzb21ld2hhdCBleHBlbnNpdmUgb3BlcmF0aW9uIHNvIHdlIHNraXAgaXQKICAgICAgLy8gaWYgdGhlIHZtIGlzIGJlaW5nIGRlc3Ryb3llZC4KICAgICAgaWYgKCF0aGlzLnZtLl9pc0JlaW5nRGVzdHJveWVkKSB7CiAgICAgICAgcmVtb3ZlKHRoaXMudm0uX3dhdGNoZXJzLCB0aGlzKTsKICAgICAgfQogICAgICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7CiAgICAgIHdoaWxlIChpLS0pIHsKICAgICAgICB0aGlzLmRlcHNbaV0ucmVtb3ZlU3ViKHRoaXMpOwogICAgICB9CiAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7CiAgICB9CiAgfTsKCiAgLyogICovCgogIHZhciBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24gPSB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgZ2V0OiBub29wLAogICAgc2V0OiBub29wCiAgfTsKCiAgZnVuY3Rpb24gcHJveHkgKHRhcmdldCwgc291cmNlS2V5LCBrZXkpIHsKICAgIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5nZXQgPSBmdW5jdGlvbiBwcm94eUdldHRlciAoKSB7CiAgICAgIHJldHVybiB0aGlzW3NvdXJjZUtleV1ba2V5XQogICAgfTsKICAgIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5zZXQgPSBmdW5jdGlvbiBwcm94eVNldHRlciAodmFsKSB7CiAgICAgIHRoaXNbc291cmNlS2V5XVtrZXldID0gdmFsOwogICAgfTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uKTsKICB9CgogIGZ1bmN0aW9uIGluaXRTdGF0ZSAodm0pIHsKICAgIHZtLl93YXRjaGVycyA9IFtdOwogICAgdmFyIG9wdHMgPSB2bS4kb3B0aW9uczsKICAgIGlmIChvcHRzLnByb3BzKSB7IGluaXRQcm9wcyh2bSwgb3B0cy5wcm9wcyk7IH0KICAgIGlmIChvcHRzLm1ldGhvZHMpIHsgaW5pdE1ldGhvZHModm0sIG9wdHMubWV0aG9kcyk7IH0KICAgIGlmIChvcHRzLmRhdGEpIHsKICAgICAgaW5pdERhdGEodm0pOwogICAgfSBlbHNlIHsKICAgICAgb2JzZXJ2ZSh2bS5fZGF0YSA9IHt9LCB0cnVlIC8qIGFzUm9vdERhdGEgKi8pOwogICAgfQogICAgaWYgKG9wdHMuY29tcHV0ZWQpIHsgaW5pdENvbXB1dGVkKHZtLCBvcHRzLmNvbXB1dGVkKTsgfQogICAgaWYgKG9wdHMud2F0Y2ggJiYgb3B0cy53YXRjaCAhPT0gbmF0aXZlV2F0Y2gpIHsKICAgICAgaW5pdFdhdGNoKHZtLCBvcHRzLndhdGNoKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGluaXRQcm9wcyAodm0sIHByb3BzT3B0aW9ucykgewogICAgdmFyIHByb3BzRGF0YSA9IHZtLiRvcHRpb25zLnByb3BzRGF0YSB8fCB7fTsKICAgIHZhciBwcm9wcyA9IHZtLl9wcm9wcyA9IHt9OwogICAgLy8gY2FjaGUgcHJvcCBrZXlzIHNvIHRoYXQgZnV0dXJlIHByb3BzIHVwZGF0ZXMgY2FuIGl0ZXJhdGUgdXNpbmcgQXJyYXkKICAgIC8vIGluc3RlYWQgb2YgZHluYW1pYyBvYmplY3Qga2V5IGVudW1lcmF0aW9uLgogICAgdmFyIGtleXMgPSB2bS4kb3B0aW9ucy5fcHJvcEtleXMgPSBbXTsKICAgIHZhciBpc1Jvb3QgPSAhdm0uJHBhcmVudDsKICAgIC8vIHJvb3QgaW5zdGFuY2UgcHJvcHMgc2hvdWxkIGJlIGNvbnZlcnRlZAogICAgaWYgKCFpc1Jvb3QpIHsKICAgICAgdG9nZ2xlT2JzZXJ2aW5nKGZhbHNlKTsKICAgIH0KICAgIHZhciBsb29wID0gZnVuY3Rpb24gKCBrZXkgKSB7CiAgICAgIGtleXMucHVzaChrZXkpOwogICAgICB2YXIgdmFsdWUgPSB2YWxpZGF0ZVByb3Aoa2V5LCBwcm9wc09wdGlvbnMsIHByb3BzRGF0YSwgdm0pOwogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqLwogICAgICB7CiAgICAgICAgdmFyIGh5cGhlbmF0ZWRLZXkgPSBoeXBoZW5hdGUoa2V5KTsKICAgICAgICBpZiAoaXNSZXNlcnZlZEF0dHJpYnV0ZShoeXBoZW5hdGVkS2V5KSB8fAogICAgICAgICAgICBjb25maWcuaXNSZXNlcnZlZEF0dHIoaHlwaGVuYXRlZEtleSkpIHsKICAgICAgICAgIHdhcm4oCiAgICAgICAgICAgICgiXCIiICsgaHlwaGVuYXRlZEtleSArICJcIiBpcyBhIHJlc2VydmVkIGF0dHJpYnV0ZSBhbmQgY2Fubm90IGJlIHVzZWQgYXMgY29tcG9uZW50IHByb3AuIiksCiAgICAgICAgICAgIHZtCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBkZWZpbmVSZWFjdGl2ZSQkMShwcm9wcywga2V5LCB2YWx1ZSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKCFpc1Jvb3QgJiYgIWlzVXBkYXRpbmdDaGlsZENvbXBvbmVudCkgewogICAgICAgICAgICB3YXJuKAogICAgICAgICAgICAgICJBdm9pZCBtdXRhdGluZyBhIHByb3AgZGlyZWN0bHkgc2luY2UgdGhlIHZhbHVlIHdpbGwgYmUgIiArCiAgICAgICAgICAgICAgIm92ZXJ3cml0dGVuIHdoZW5ldmVyIHRoZSBwYXJlbnQgY29tcG9uZW50IHJlLXJlbmRlcnMuICIgKwogICAgICAgICAgICAgICJJbnN0ZWFkLCB1c2UgYSBkYXRhIG9yIGNvbXB1dGVkIHByb3BlcnR5IGJhc2VkIG9uIHRoZSBwcm9wJ3MgIiArCiAgICAgICAgICAgICAgInZhbHVlLiBQcm9wIGJlaW5nIG11dGF0ZWQ6IFwiIiArIGtleSArICJcIiIsCiAgICAgICAgICAgICAgdm0KICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgICAvLyBzdGF0aWMgcHJvcHMgYXJlIGFscmVhZHkgcHJveGllZCBvbiB0aGUgY29tcG9uZW50J3MgcHJvdG90eXBlCiAgICAgIC8vIGR1cmluZyBWdWUuZXh0ZW5kKCkuIFdlIG9ubHkgbmVlZCB0byBwcm94eSBwcm9wcyBkZWZpbmVkIGF0CiAgICAgIC8vIGluc3RhbnRpYXRpb24gaGVyZS4KICAgICAgaWYgKCEoa2V5IGluIHZtKSkgewogICAgICAgIHByb3h5KHZtLCAiX3Byb3BzIiwga2V5KTsKICAgICAgfQogICAgfTsKCiAgICBmb3IgKHZhciBrZXkgaW4gcHJvcHNPcHRpb25zKSBsb29wKCBrZXkgKTsKICAgIHRvZ2dsZU9ic2VydmluZyh0cnVlKTsKICB9CgogIGZ1bmN0aW9uIGluaXREYXRhICh2bSkgewogICAgdmFyIGRhdGEgPSB2bS4kb3B0aW9ucy5kYXRhOwogICAgZGF0YSA9IHZtLl9kYXRhID0gdHlwZW9mIGRhdGEgPT09ICdmdW5jdGlvbicKICAgICAgPyBnZXREYXRhKGRhdGEsIHZtKQogICAgICA6IGRhdGEgfHwge307CiAgICBpZiAoIWlzUGxhaW5PYmplY3QoZGF0YSkpIHsKICAgICAgZGF0YSA9IHt9OwogICAgICB3YXJuKAogICAgICAgICdkYXRhIGZ1bmN0aW9ucyBzaG91bGQgcmV0dXJuIGFuIG9iamVjdDpcbicgKwogICAgICAgICdodHRwczovL3Z1ZWpzLm9yZy92Mi9ndWlkZS9jb21wb25lbnRzLmh0bWwjZGF0YS1NdXN0LUJlLWEtRnVuY3Rpb24nLAogICAgICAgIHZtCiAgICAgICk7CiAgICB9CiAgICAvLyBwcm94eSBkYXRhIG9uIGluc3RhbmNlCiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEpOwogICAgdmFyIHByb3BzID0gdm0uJG9wdGlvbnMucHJvcHM7CiAgICB2YXIgbWV0aG9kcyA9IHZtLiRvcHRpb25zLm1ldGhvZHM7CiAgICB2YXIgaSA9IGtleXMubGVuZ3RoOwogICAgd2hpbGUgKGktLSkgewogICAgICB2YXIga2V5ID0ga2V5c1tpXTsKICAgICAgewogICAgICAgIGlmIChtZXRob2RzICYmIGhhc093bihtZXRob2RzLCBrZXkpKSB7CiAgICAgICAgICB3YXJuKAogICAgICAgICAgICAoIk1ldGhvZCBcIiIgKyBrZXkgKyAiXCIgaGFzIGFscmVhZHkgYmVlbiBkZWZpbmVkIGFzIGEgZGF0YSBwcm9wZXJ0eS4iKSwKICAgICAgICAgICAgdm0KICAgICAgICAgICk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChwcm9wcyAmJiBoYXNPd24ocHJvcHMsIGtleSkpIHsKICAgICAgICB3YXJuKAogICAgICAgICAgIlRoZSBkYXRhIHByb3BlcnR5IFwiIiArIGtleSArICJcIiBpcyBhbHJlYWR5IGRlY2xhcmVkIGFzIGEgcHJvcC4gIiArCiAgICAgICAgICAiVXNlIHByb3AgZGVmYXVsdCB2YWx1ZSBpbnN0ZWFkLiIsCiAgICAgICAgICB2bQogICAgICAgICk7CiAgICAgIH0gZWxzZSBpZiAoIWlzUmVzZXJ2ZWQoa2V5KSkgewogICAgICAgIHByb3h5KHZtLCAiX2RhdGEiLCBrZXkpOwogICAgICB9CiAgICB9CiAgICAvLyBvYnNlcnZlIGRhdGEKICAgIG9ic2VydmUoZGF0YSwgdHJ1ZSAvKiBhc1Jvb3REYXRhICovKTsKICB9CgogIGZ1bmN0aW9uIGdldERhdGEgKGRhdGEsIHZtKSB7CiAgICAvLyAjNzU3MyBkaXNhYmxlIGRlcCBjb2xsZWN0aW9uIHdoZW4gaW52b2tpbmcgZGF0YSBnZXR0ZXJzCiAgICBwdXNoVGFyZ2V0KCk7CiAgICB0cnkgewogICAgICByZXR1cm4gZGF0YS5jYWxsKHZtLCB2bSkKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgaGFuZGxlRXJyb3IoZSwgdm0sICJkYXRhKCkiKTsKICAgICAgcmV0dXJuIHt9CiAgICB9IGZpbmFsbHkgewogICAgICBwb3BUYXJnZXQoKTsKICAgIH0KICB9CgogIHZhciBjb21wdXRlZFdhdGNoZXJPcHRpb25zID0geyBsYXp5OiB0cnVlIH07CgogIGZ1bmN0aW9uIGluaXRDb21wdXRlZCAodm0sIGNvbXB1dGVkKSB7CiAgICAvLyAkZmxvdy1kaXNhYmxlLWxpbmUKICAgIHZhciB3YXRjaGVycyA9IHZtLl9jb21wdXRlZFdhdGNoZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgIC8vIGNvbXB1dGVkIHByb3BlcnRpZXMgYXJlIGp1c3QgZ2V0dGVycyBkdXJpbmcgU1NSCiAgICB2YXIgaXNTU1IgPSBpc1NlcnZlclJlbmRlcmluZygpOwoKICAgIGZvciAodmFyIGtleSBpbiBjb21wdXRlZCkgewogICAgICB2YXIgdXNlckRlZiA9IGNvbXB1dGVkW2tleV07CiAgICAgIHZhciBnZXR0ZXIgPSB0eXBlb2YgdXNlckRlZiA9PT0gJ2Z1bmN0aW9uJyA/IHVzZXJEZWYgOiB1c2VyRGVmLmdldDsKICAgICAgaWYgKGdldHRlciA9PSBudWxsKSB7CiAgICAgICAgd2FybigKICAgICAgICAgICgiR2V0dGVyIGlzIG1pc3NpbmcgZm9yIGNvbXB1dGVkIHByb3BlcnR5IFwiIiArIGtleSArICJcIi4iKSwKICAgICAgICAgIHZtCiAgICAgICAgKTsKICAgICAgfQoKICAgICAgaWYgKCFpc1NTUikgewogICAgICAgIC8vIGNyZWF0ZSBpbnRlcm5hbCB3YXRjaGVyIGZvciB0aGUgY29tcHV0ZWQgcHJvcGVydHkuCiAgICAgICAgd2F0Y2hlcnNba2V5XSA9IG5ldyBXYXRjaGVyKAogICAgICAgICAgdm0sCiAgICAgICAgICBnZXR0ZXIgfHwgbm9vcCwKICAgICAgICAgIG5vb3AsCiAgICAgICAgICBjb21wdXRlZFdhdGNoZXJPcHRpb25zCiAgICAgICAgKTsKICAgICAgfQoKICAgICAgLy8gY29tcG9uZW50LWRlZmluZWQgY29tcHV0ZWQgcHJvcGVydGllcyBhcmUgYWxyZWFkeSBkZWZpbmVkIG9uIHRoZQogICAgICAvLyBjb21wb25lbnQgcHJvdG90eXBlLiBXZSBvbmx5IG5lZWQgdG8gZGVmaW5lIGNvbXB1dGVkIHByb3BlcnRpZXMgZGVmaW5lZAogICAgICAvLyBhdCBpbnN0YW50aWF0aW9uIGhlcmUuCiAgICAgIGlmICghKGtleSBpbiB2bSkpIHsKICAgICAgICBkZWZpbmVDb21wdXRlZCh2bSwga2V5LCB1c2VyRGVmKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoa2V5IGluIHZtLiRkYXRhKSB7CiAgICAgICAgICB3YXJuKCgiVGhlIGNvbXB1dGVkIHByb3BlcnR5IFwiIiArIGtleSArICJcIiBpcyBhbHJlYWR5IGRlZmluZWQgaW4gZGF0YS4iKSwgdm0pOwogICAgICAgIH0gZWxzZSBpZiAodm0uJG9wdGlvbnMucHJvcHMgJiYga2V5IGluIHZtLiRvcHRpb25zLnByb3BzKSB7CiAgICAgICAgICB3YXJuKCgiVGhlIGNvbXB1dGVkIHByb3BlcnR5IFwiIiArIGtleSArICJcIiBpcyBhbHJlYWR5IGRlZmluZWQgYXMgYSBwcm9wLiIpLCB2bSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBkZWZpbmVDb21wdXRlZCAoCiAgICB0YXJnZXQsCiAgICBrZXksCiAgICB1c2VyRGVmCiAgKSB7CiAgICB2YXIgc2hvdWxkQ2FjaGUgPSAhaXNTZXJ2ZXJSZW5kZXJpbmcoKTsKICAgIGlmICh0eXBlb2YgdXNlckRlZiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24uZ2V0ID0gc2hvdWxkQ2FjaGUKICAgICAgICA/IGNyZWF0ZUNvbXB1dGVkR2V0dGVyKGtleSkKICAgICAgICA6IGNyZWF0ZUdldHRlckludm9rZXIodXNlckRlZik7CiAgICAgIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5zZXQgPSBub29wOwogICAgfSBlbHNlIHsKICAgICAgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uLmdldCA9IHVzZXJEZWYuZ2V0CiAgICAgICAgPyBzaG91bGRDYWNoZSAmJiB1c2VyRGVmLmNhY2hlICE9PSBmYWxzZQogICAgICAgICAgPyBjcmVhdGVDb21wdXRlZEdldHRlcihrZXkpCiAgICAgICAgICA6IGNyZWF0ZUdldHRlckludm9rZXIodXNlckRlZi5nZXQpCiAgICAgICAgOiBub29wOwogICAgICBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24uc2V0ID0gdXNlckRlZi5zZXQgfHwgbm9vcDsKICAgIH0KICAgIGlmIChzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24uc2V0ID09PSBub29wKSB7CiAgICAgIHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5zZXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgd2FybigKICAgICAgICAgICgiQ29tcHV0ZWQgcHJvcGVydHkgXCIiICsga2V5ICsgIlwiIHdhcyBhc3NpZ25lZCB0byBidXQgaXQgaGFzIG5vIHNldHRlci4iKSwKICAgICAgICAgIHRoaXMKICAgICAgICApOwogICAgICB9OwogICAgfQogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzaGFyZWRQcm9wZXJ0eURlZmluaXRpb24pOwogIH0KCiAgZnVuY3Rpb24gY3JlYXRlQ29tcHV0ZWRHZXR0ZXIgKGtleSkgewogICAgcmV0dXJuIGZ1bmN0aW9uIGNvbXB1dGVkR2V0dGVyICgpIHsKICAgICAgdmFyIHdhdGNoZXIgPSB0aGlzLl9jb21wdXRlZFdhdGNoZXJzICYmIHRoaXMuX2NvbXB1dGVkV2F0Y2hlcnNba2V5XTsKICAgICAgaWYgKHdhdGNoZXIpIHsKICAgICAgICBpZiAod2F0Y2hlci5kaXJ0eSkgewogICAgICAgICAgd2F0Y2hlci5ldmFsdWF0ZSgpOwogICAgICAgIH0KICAgICAgICBpZiAoRGVwLnRhcmdldCkgewogICAgICAgICAgd2F0Y2hlci5kZXBlbmQoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHdhdGNoZXIudmFsdWUKICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gY3JlYXRlR2V0dGVySW52b2tlcihmbikgewogICAgcmV0dXJuIGZ1bmN0aW9uIGNvbXB1dGVkR2V0dGVyICgpIHsKICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgdGhpcykKICAgIH0KICB9CgogIGZ1bmN0aW9uIGluaXRNZXRob2RzICh2bSwgbWV0aG9kcykgewogICAgdmFyIHByb3BzID0gdm0uJG9wdGlvbnMucHJvcHM7CiAgICBmb3IgKHZhciBrZXkgaW4gbWV0aG9kcykgewogICAgICB7CiAgICAgICAgaWYgKHR5cGVvZiBtZXRob2RzW2tleV0gIT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIHdhcm4oCiAgICAgICAgICAgICJNZXRob2QgXCIiICsga2V5ICsgIlwiIGhhcyB0eXBlIFwiIiArICh0eXBlb2YgbWV0aG9kc1trZXldKSArICJcIiBpbiB0aGUgY29tcG9uZW50IGRlZmluaXRpb24uICIgKwogICAgICAgICAgICAiRGlkIHlvdSByZWZlcmVuY2UgdGhlIGZ1bmN0aW9uIGNvcnJlY3RseT8iLAogICAgICAgICAgICB2bQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgaWYgKHByb3BzICYmIGhhc093bihwcm9wcywga2V5KSkgewogICAgICAgICAgd2FybigKICAgICAgICAgICAgKCJNZXRob2QgXCIiICsga2V5ICsgIlwiIGhhcyBhbHJlYWR5IGJlZW4gZGVmaW5lZCBhcyBhIHByb3AuIiksCiAgICAgICAgICAgIHZtCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBpZiAoKGtleSBpbiB2bSkgJiYgaXNSZXNlcnZlZChrZXkpKSB7CiAgICAgICAgICB3YXJuKAogICAgICAgICAgICAiTWV0aG9kIFwiIiArIGtleSArICJcIiBjb25mbGljdHMgd2l0aCBhbiBleGlzdGluZyBWdWUgaW5zdGFuY2UgbWV0aG9kLiAiICsKICAgICAgICAgICAgIkF2b2lkIGRlZmluaW5nIGNvbXBvbmVudCBtZXRob2RzIHRoYXQgc3RhcnQgd2l0aCBfIG9yICQuIgogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdm1ba2V5XSA9IHR5cGVvZiBtZXRob2RzW2tleV0gIT09ICdmdW5jdGlvbicgPyBub29wIDogYmluZChtZXRob2RzW2tleV0sIHZtKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGluaXRXYXRjaCAodm0sIHdhdGNoKSB7CiAgICBmb3IgKHZhciBrZXkgaW4gd2F0Y2gpIHsKICAgICAgdmFyIGhhbmRsZXIgPSB3YXRjaFtrZXldOwogICAgICBpZiAoQXJyYXkuaXNBcnJheShoYW5kbGVyKSkgewogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGFuZGxlci5sZW5ndGg7IGkrKykgewogICAgICAgICAgY3JlYXRlV2F0Y2hlcih2bSwga2V5LCBoYW5kbGVyW2ldKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY3JlYXRlV2F0Y2hlcih2bSwga2V5LCBoYW5kbGVyKTsKICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gY3JlYXRlV2F0Y2hlciAoCiAgICB2bSwKICAgIGV4cE9yRm4sCiAgICBoYW5kbGVyLAogICAgb3B0aW9ucwogICkgewogICAgaWYgKGlzUGxhaW5PYmplY3QoaGFuZGxlcikpIHsKICAgICAgb3B0aW9ucyA9IGhhbmRsZXI7CiAgICAgIGhhbmRsZXIgPSBoYW5kbGVyLmhhbmRsZXI7CiAgICB9CiAgICBpZiAodHlwZW9mIGhhbmRsZXIgPT09ICdzdHJpbmcnKSB7CiAgICAgIGhhbmRsZXIgPSB2bVtoYW5kbGVyXTsKICAgIH0KICAgIHJldHVybiB2bS4kd2F0Y2goZXhwT3JGbiwgaGFuZGxlciwgb3B0aW9ucykKICB9CgogIGZ1bmN0aW9uIHN0YXRlTWl4aW4gKFZ1ZSkgewogICAgLy8gZmxvdyBzb21laG93IGhhcyBwcm9ibGVtcyB3aXRoIGRpcmVjdGx5IGRlY2xhcmVkIGRlZmluaXRpb24gb2JqZWN0CiAgICAvLyB3aGVuIHVzaW5nIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSwgc28gd2UgaGF2ZSB0byBwcm9jZWR1cmFsbHkgYnVpbGQgdXAKICAgIC8vIHRoZSBvYmplY3QgaGVyZS4KICAgIHZhciBkYXRhRGVmID0ge307CiAgICBkYXRhRGVmLmdldCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX2RhdGEgfTsKICAgIHZhciBwcm9wc0RlZiA9IHt9OwogICAgcHJvcHNEZWYuZ2V0ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fcHJvcHMgfTsKICAgIHsKICAgICAgZGF0YURlZi5zZXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgd2FybigKICAgICAgICAgICdBdm9pZCByZXBsYWNpbmcgaW5zdGFuY2Ugcm9vdCAkZGF0YS4gJyArCiAgICAgICAgICAnVXNlIG5lc3RlZCBkYXRhIHByb3BlcnRpZXMgaW5zdGVhZC4nLAogICAgICAgICAgdGhpcwogICAgICAgICk7CiAgICAgIH07CiAgICAgIHByb3BzRGVmLnNldCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB3YXJuKCIkcHJvcHMgaXMgcmVhZG9ubHkuIiwgdGhpcyk7CiAgICAgIH07CiAgICB9CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwgJyRkYXRhJywgZGF0YURlZik7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwgJyRwcm9wcycsIHByb3BzRGVmKTsKCiAgICBWdWUucHJvdG90eXBlLiRzZXQgPSBzZXQ7CiAgICBWdWUucHJvdG90eXBlLiRkZWxldGUgPSBkZWw7CgogICAgVnVlLnByb3RvdHlwZS4kd2F0Y2ggPSBmdW5jdGlvbiAoCiAgICAgIGV4cE9yRm4sCiAgICAgIGNiLAogICAgICBvcHRpb25zCiAgICApIHsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgaWYgKGlzUGxhaW5PYmplY3QoY2IpKSB7CiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhdGNoZXIodm0sIGV4cE9yRm4sIGNiLCBvcHRpb25zKQogICAgICB9CiAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgICBvcHRpb25zLnVzZXIgPSB0cnVlOwogICAgICB2YXIgd2F0Y2hlciA9IG5ldyBXYXRjaGVyKHZtLCBleHBPckZuLCBjYiwgb3B0aW9ucyk7CiAgICAgIGlmIChvcHRpb25zLmltbWVkaWF0ZSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBjYi5jYWxsKHZtLCB3YXRjaGVyLnZhbHVlKTsKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgaGFuZGxlRXJyb3IoZXJyb3IsIHZtLCAoImNhbGxiYWNrIGZvciBpbW1lZGlhdGUgd2F0Y2hlciBcIiIgKyAod2F0Y2hlci5leHByZXNzaW9uKSArICJcIiIpKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGZ1bmN0aW9uIHVud2F0Y2hGbiAoKSB7CiAgICAgICAgd2F0Y2hlci50ZWFyZG93bigpOwogICAgICB9CiAgICB9OwogIH0KCiAgLyogICovCgogIHZhciB1aWQkMyA9IDA7CgogIGZ1bmN0aW9uIGluaXRNaXhpbiAoVnVlKSB7CiAgICBWdWUucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgLy8gYSB1aWQKICAgICAgdm0uX3VpZCA9IHVpZCQzKys7CgogICAgICB2YXIgc3RhcnRUYWcsIGVuZFRhZzsKICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICAgIGlmIChjb25maWcucGVyZm9ybWFuY2UgJiYgbWFyaykgewogICAgICAgIHN0YXJ0VGFnID0gInZ1ZS1wZXJmLXN0YXJ0OiIgKyAodm0uX3VpZCk7CiAgICAgICAgZW5kVGFnID0gInZ1ZS1wZXJmLWVuZDoiICsgKHZtLl91aWQpOwogICAgICAgIG1hcmsoc3RhcnRUYWcpOwogICAgICB9CgogICAgICAvLyBhIGZsYWcgdG8gYXZvaWQgdGhpcyBiZWluZyBvYnNlcnZlZAogICAgICB2bS5faXNWdWUgPSB0cnVlOwogICAgICAvLyBtZXJnZSBvcHRpb25zCiAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuX2lzQ29tcG9uZW50KSB7CiAgICAgICAgLy8gb3B0aW1pemUgaW50ZXJuYWwgY29tcG9uZW50IGluc3RhbnRpYXRpb24KICAgICAgICAvLyBzaW5jZSBkeW5hbWljIG9wdGlvbnMgbWVyZ2luZyBpcyBwcmV0dHkgc2xvdywgYW5kIG5vbmUgb2YgdGhlCiAgICAgICAgLy8gaW50ZXJuYWwgY29tcG9uZW50IG9wdGlvbnMgbmVlZHMgc3BlY2lhbCB0cmVhdG1lbnQuCiAgICAgICAgaW5pdEludGVybmFsQ29tcG9uZW50KHZtLCBvcHRpb25zKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2bS4kb3B0aW9ucyA9IG1lcmdlT3B0aW9ucygKICAgICAgICAgIHJlc29sdmVDb25zdHJ1Y3Rvck9wdGlvbnModm0uY29uc3RydWN0b3IpLAogICAgICAgICAgb3B0aW9ucyB8fCB7fSwKICAgICAgICAgIHZtCiAgICAgICAgKTsKICAgICAgfQogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqLwogICAgICB7CiAgICAgICAgaW5pdFByb3h5KHZtKTsKICAgICAgfQogICAgICAvLyBleHBvc2UgcmVhbCBzZWxmCiAgICAgIHZtLl9zZWxmID0gdm07CiAgICAgIGluaXRMaWZlY3ljbGUodm0pOwogICAgICBpbml0RXZlbnRzKHZtKTsKICAgICAgaW5pdFJlbmRlcih2bSk7CiAgICAgIGNhbGxIb29rKHZtLCAnYmVmb3JlQ3JlYXRlJyk7CiAgICAgIGluaXRJbmplY3Rpb25zKHZtKTsgLy8gcmVzb2x2ZSBpbmplY3Rpb25zIGJlZm9yZSBkYXRhL3Byb3BzCiAgICAgIGluaXRTdGF0ZSh2bSk7CiAgICAgIGluaXRQcm92aWRlKHZtKTsgLy8gcmVzb2x2ZSBwcm92aWRlIGFmdGVyIGRhdGEvcHJvcHMKICAgICAgY2FsbEhvb2sodm0sICdjcmVhdGVkJyk7CgogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgaWYgKGNvbmZpZy5wZXJmb3JtYW5jZSAmJiBtYXJrKSB7CiAgICAgICAgdm0uX25hbWUgPSBmb3JtYXRDb21wb25lbnROYW1lKHZtLCBmYWxzZSk7CiAgICAgICAgbWFyayhlbmRUYWcpOwogICAgICAgIG1lYXN1cmUoKCJ2dWUgIiArICh2bS5fbmFtZSkgKyAiIGluaXQiKSwgc3RhcnRUYWcsIGVuZFRhZyk7CiAgICAgIH0KCiAgICAgIGlmICh2bS4kb3B0aW9ucy5lbCkgewogICAgICAgIHZtLiRtb3VudCh2bS4kb3B0aW9ucy5lbCk7CiAgICAgIH0KICAgIH07CiAgfQoKICBmdW5jdGlvbiBpbml0SW50ZXJuYWxDb21wb25lbnQgKHZtLCBvcHRpb25zKSB7CiAgICB2YXIgb3B0cyA9IHZtLiRvcHRpb25zID0gT2JqZWN0LmNyZWF0ZSh2bS5jb25zdHJ1Y3Rvci5vcHRpb25zKTsKICAgIC8vIGRvaW5nIHRoaXMgYmVjYXVzZSBpdCdzIGZhc3RlciB0aGFuIGR5bmFtaWMgZW51bWVyYXRpb24uCiAgICB2YXIgcGFyZW50Vm5vZGUgPSBvcHRpb25zLl9wYXJlbnRWbm9kZTsKICAgIG9wdHMucGFyZW50ID0gb3B0aW9ucy5wYXJlbnQ7CiAgICBvcHRzLl9wYXJlbnRWbm9kZSA9IHBhcmVudFZub2RlOwoKICAgIHZhciB2bm9kZUNvbXBvbmVudE9wdGlvbnMgPSBwYXJlbnRWbm9kZS5jb21wb25lbnRPcHRpb25zOwogICAgb3B0cy5wcm9wc0RhdGEgPSB2bm9kZUNvbXBvbmVudE9wdGlvbnMucHJvcHNEYXRhOwogICAgb3B0cy5fcGFyZW50TGlzdGVuZXJzID0gdm5vZGVDb21wb25lbnRPcHRpb25zLmxpc3RlbmVyczsKICAgIG9wdHMuX3JlbmRlckNoaWxkcmVuID0gdm5vZGVDb21wb25lbnRPcHRpb25zLmNoaWxkcmVuOwogICAgb3B0cy5fY29tcG9uZW50VGFnID0gdm5vZGVDb21wb25lbnRPcHRpb25zLnRhZzsKCiAgICBpZiAob3B0aW9ucy5yZW5kZXIpIHsKICAgICAgb3B0cy5yZW5kZXIgPSBvcHRpb25zLnJlbmRlcjsKICAgICAgb3B0cy5zdGF0aWNSZW5kZXJGbnMgPSBvcHRpb25zLnN0YXRpY1JlbmRlckZuczsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHJlc29sdmVDb25zdHJ1Y3Rvck9wdGlvbnMgKEN0b3IpIHsKICAgIHZhciBvcHRpb25zID0gQ3Rvci5vcHRpb25zOwogICAgaWYgKEN0b3Iuc3VwZXIpIHsKICAgICAgdmFyIHN1cGVyT3B0aW9ucyA9IHJlc29sdmVDb25zdHJ1Y3Rvck9wdGlvbnMoQ3Rvci5zdXBlcik7CiAgICAgIHZhciBjYWNoZWRTdXBlck9wdGlvbnMgPSBDdG9yLnN1cGVyT3B0aW9uczsKICAgICAgaWYgKHN1cGVyT3B0aW9ucyAhPT0gY2FjaGVkU3VwZXJPcHRpb25zKSB7CiAgICAgICAgLy8gc3VwZXIgb3B0aW9uIGNoYW5nZWQsCiAgICAgICAgLy8gbmVlZCB0byByZXNvbHZlIG5ldyBvcHRpb25zLgogICAgICAgIEN0b3Iuc3VwZXJPcHRpb25zID0gc3VwZXJPcHRpb25zOwogICAgICAgIC8vIGNoZWNrIGlmIHRoZXJlIGFyZSBhbnkgbGF0ZS1tb2RpZmllZC9hdHRhY2hlZCBvcHRpb25zICgjNDk3NikKICAgICAgICB2YXIgbW9kaWZpZWRPcHRpb25zID0gcmVzb2x2ZU1vZGlmaWVkT3B0aW9ucyhDdG9yKTsKICAgICAgICAvLyB1cGRhdGUgYmFzZSBleHRlbmQgb3B0aW9ucwogICAgICAgIGlmIChtb2RpZmllZE9wdGlvbnMpIHsKICAgICAgICAgIGV4dGVuZChDdG9yLmV4dGVuZE9wdGlvbnMsIG1vZGlmaWVkT3B0aW9ucyk7CiAgICAgICAgfQogICAgICAgIG9wdGlvbnMgPSBDdG9yLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoc3VwZXJPcHRpb25zLCBDdG9yLmV4dGVuZE9wdGlvbnMpOwogICAgICAgIGlmIChvcHRpb25zLm5hbWUpIHsKICAgICAgICAgIG9wdGlvbnMuY29tcG9uZW50c1tvcHRpb25zLm5hbWVdID0gQ3RvcjsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBvcHRpb25zCiAgfQoKICBmdW5jdGlvbiByZXNvbHZlTW9kaWZpZWRPcHRpb25zIChDdG9yKSB7CiAgICB2YXIgbW9kaWZpZWQ7CiAgICB2YXIgbGF0ZXN0ID0gQ3Rvci5vcHRpb25zOwogICAgdmFyIHNlYWxlZCA9IEN0b3Iuc2VhbGVkT3B0aW9uczsKICAgIGZvciAodmFyIGtleSBpbiBsYXRlc3QpIHsKICAgICAgaWYgKGxhdGVzdFtrZXldICE9PSBzZWFsZWRba2V5XSkgewogICAgICAgIGlmICghbW9kaWZpZWQpIHsgbW9kaWZpZWQgPSB7fTsgfQogICAgICAgIG1vZGlmaWVkW2tleV0gPSBsYXRlc3Rba2V5XTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIG1vZGlmaWVkCiAgfQoKICBmdW5jdGlvbiBWdWUgKG9wdGlvbnMpIHsKICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBWdWUpCiAgICApIHsKICAgICAgd2FybignVnVlIGlzIGEgY29uc3RydWN0b3IgYW5kIHNob3VsZCBiZSBjYWxsZWQgd2l0aCB0aGUgYG5ld2Aga2V5d29yZCcpOwogICAgfQogICAgdGhpcy5faW5pdChvcHRpb25zKTsKICB9CgogIGluaXRNaXhpbihWdWUpOwogIHN0YXRlTWl4aW4oVnVlKTsKICBldmVudHNNaXhpbihWdWUpOwogIGxpZmVjeWNsZU1peGluKFZ1ZSk7CiAgcmVuZGVyTWl4aW4oVnVlKTsKCiAgLyogICovCgogIGZ1bmN0aW9uIGluaXRVc2UgKFZ1ZSkgewogICAgVnVlLnVzZSA9IGZ1bmN0aW9uIChwbHVnaW4pIHsKICAgICAgdmFyIGluc3RhbGxlZFBsdWdpbnMgPSAodGhpcy5faW5zdGFsbGVkUGx1Z2lucyB8fCAodGhpcy5faW5zdGFsbGVkUGx1Z2lucyA9IFtdKSk7CiAgICAgIGlmIChpbnN0YWxsZWRQbHVnaW5zLmluZGV4T2YocGx1Z2luKSA+IC0xKSB7CiAgICAgICAgcmV0dXJuIHRoaXMKICAgICAgfQoKICAgICAgLy8gYWRkaXRpb25hbCBwYXJhbWV0ZXJzCiAgICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpOwogICAgICBhcmdzLnVuc2hpZnQodGhpcyk7CiAgICAgIGlmICh0eXBlb2YgcGx1Z2luLmluc3RhbGwgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICBwbHVnaW4uaW5zdGFsbC5hcHBseShwbHVnaW4sIGFyZ3MpOwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBwbHVnaW4gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICBwbHVnaW4uYXBwbHkobnVsbCwgYXJncyk7CiAgICAgIH0KICAgICAgaW5zdGFsbGVkUGx1Z2lucy5wdXNoKHBsdWdpbik7CiAgICAgIHJldHVybiB0aGlzCiAgICB9OwogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIGluaXRNaXhpbiQxIChWdWUpIHsKICAgIFZ1ZS5taXhpbiA9IGZ1bmN0aW9uIChtaXhpbikgewogICAgICB0aGlzLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnModGhpcy5vcHRpb25zLCBtaXhpbik7CiAgICAgIHJldHVybiB0aGlzCiAgICB9OwogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIGluaXRFeHRlbmQgKFZ1ZSkgewogICAgLyoqCiAgICAgKiBFYWNoIGluc3RhbmNlIGNvbnN0cnVjdG9yLCBpbmNsdWRpbmcgVnVlLCBoYXMgYSB1bmlxdWUKICAgICAqIGNpZC4gVGhpcyBlbmFibGVzIHVzIHRvIGNyZWF0ZSB3cmFwcGVkICJjaGlsZAogICAgICogY29uc3RydWN0b3JzIiBmb3IgcHJvdG90eXBhbCBpbmhlcml0YW5jZSBhbmQgY2FjaGUgdGhlbS4KICAgICAqLwogICAgVnVlLmNpZCA9IDA7CiAgICB2YXIgY2lkID0gMTsKCiAgICAvKioKICAgICAqIENsYXNzIGluaGVyaXRhbmNlCiAgICAgKi8KICAgIFZ1ZS5leHRlbmQgPSBmdW5jdGlvbiAoZXh0ZW5kT3B0aW9ucykgewogICAgICBleHRlbmRPcHRpb25zID0gZXh0ZW5kT3B0aW9ucyB8fCB7fTsKICAgICAgdmFyIFN1cGVyID0gdGhpczsKICAgICAgdmFyIFN1cGVySWQgPSBTdXBlci5jaWQ7CiAgICAgIHZhciBjYWNoZWRDdG9ycyA9IGV4dGVuZE9wdGlvbnMuX0N0b3IgfHwgKGV4dGVuZE9wdGlvbnMuX0N0b3IgPSB7fSk7CiAgICAgIGlmIChjYWNoZWRDdG9yc1tTdXBlcklkXSkgewogICAgICAgIHJldHVybiBjYWNoZWRDdG9yc1tTdXBlcklkXQogICAgICB9CgogICAgICB2YXIgbmFtZSA9IGV4dGVuZE9wdGlvbnMubmFtZSB8fCBTdXBlci5vcHRpb25zLm5hbWU7CiAgICAgIGlmIChuYW1lKSB7CiAgICAgICAgdmFsaWRhdGVDb21wb25lbnROYW1lKG5hbWUpOwogICAgICB9CgogICAgICB2YXIgU3ViID0gZnVuY3Rpb24gVnVlQ29tcG9uZW50IChvcHRpb25zKSB7CiAgICAgICAgdGhpcy5faW5pdChvcHRpb25zKTsKICAgICAgfTsKICAgICAgU3ViLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3VwZXIucHJvdG90eXBlKTsKICAgICAgU3ViLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFN1YjsKICAgICAgU3ViLmNpZCA9IGNpZCsrOwogICAgICBTdWIub3B0aW9ucyA9IG1lcmdlT3B0aW9ucygKICAgICAgICBTdXBlci5vcHRpb25zLAogICAgICAgIGV4dGVuZE9wdGlvbnMKICAgICAgKTsKICAgICAgU3ViWydzdXBlciddID0gU3VwZXI7CgogICAgICAvLyBGb3IgcHJvcHMgYW5kIGNvbXB1dGVkIHByb3BlcnRpZXMsIHdlIGRlZmluZSB0aGUgcHJveHkgZ2V0dGVycyBvbgogICAgICAvLyB0aGUgVnVlIGluc3RhbmNlcyBhdCBleHRlbnNpb24gdGltZSwgb24gdGhlIGV4dGVuZGVkIHByb3RvdHlwZS4gVGhpcwogICAgICAvLyBhdm9pZHMgT2JqZWN0LmRlZmluZVByb3BlcnR5IGNhbGxzIGZvciBlYWNoIGluc3RhbmNlIGNyZWF0ZWQuCiAgICAgIGlmIChTdWIub3B0aW9ucy5wcm9wcykgewogICAgICAgIGluaXRQcm9wcyQxKFN1Yik7CiAgICAgIH0KICAgICAgaWYgKFN1Yi5vcHRpb25zLmNvbXB1dGVkKSB7CiAgICAgICAgaW5pdENvbXB1dGVkJDEoU3ViKTsKICAgICAgfQoKICAgICAgLy8gYWxsb3cgZnVydGhlciBleHRlbnNpb24vbWl4aW4vcGx1Z2luIHVzYWdlCiAgICAgIFN1Yi5leHRlbmQgPSBTdXBlci5leHRlbmQ7CiAgICAgIFN1Yi5taXhpbiA9IFN1cGVyLm1peGluOwogICAgICBTdWIudXNlID0gU3VwZXIudXNlOwoKICAgICAgLy8gY3JlYXRlIGFzc2V0IHJlZ2lzdGVycywgc28gZXh0ZW5kZWQgY2xhc3NlcwogICAgICAvLyBjYW4gaGF2ZSB0aGVpciBwcml2YXRlIGFzc2V0cyB0b28uCiAgICAgIEFTU0VUX1RZUEVTLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHsKICAgICAgICBTdWJbdHlwZV0gPSBTdXBlclt0eXBlXTsKICAgICAgfSk7CiAgICAgIC8vIGVuYWJsZSByZWN1cnNpdmUgc2VsZi1sb29rdXAKICAgICAgaWYgKG5hbWUpIHsKICAgICAgICBTdWIub3B0aW9ucy5jb21wb25lbnRzW25hbWVdID0gU3ViOwogICAgICB9CgogICAgICAvLyBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZSBzdXBlciBvcHRpb25zIGF0IGV4dGVuc2lvbiB0aW1lLgogICAgICAvLyBsYXRlciBhdCBpbnN0YW50aWF0aW9uIHdlIGNhbiBjaGVjayBpZiBTdXBlcidzIG9wdGlvbnMgaGF2ZQogICAgICAvLyBiZWVuIHVwZGF0ZWQuCiAgICAgIFN1Yi5zdXBlck9wdGlvbnMgPSBTdXBlci5vcHRpb25zOwogICAgICBTdWIuZXh0ZW5kT3B0aW9ucyA9IGV4dGVuZE9wdGlvbnM7CiAgICAgIFN1Yi5zZWFsZWRPcHRpb25zID0gZXh0ZW5kKHt9LCBTdWIub3B0aW9ucyk7CgogICAgICAvLyBjYWNoZSBjb25zdHJ1Y3RvcgogICAgICBjYWNoZWRDdG9yc1tTdXBlcklkXSA9IFN1YjsKICAgICAgcmV0dXJuIFN1YgogICAgfTsKICB9CgogIGZ1bmN0aW9uIGluaXRQcm9wcyQxIChDb21wKSB7CiAgICB2YXIgcHJvcHMgPSBDb21wLm9wdGlvbnMucHJvcHM7CiAgICBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHsKICAgICAgcHJveHkoQ29tcC5wcm90b3R5cGUsICJfcHJvcHMiLCBrZXkpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gaW5pdENvbXB1dGVkJDEgKENvbXApIHsKICAgIHZhciBjb21wdXRlZCA9IENvbXAub3B0aW9ucy5jb21wdXRlZDsKICAgIGZvciAodmFyIGtleSBpbiBjb21wdXRlZCkgewogICAgICBkZWZpbmVDb21wdXRlZChDb21wLnByb3RvdHlwZSwga2V5LCBjb21wdXRlZFtrZXldKTsKICAgIH0KICB9CgogIC8qICAqLwoKICBmdW5jdGlvbiBpbml0QXNzZXRSZWdpc3RlcnMgKFZ1ZSkgewogICAgLyoqCiAgICAgKiBDcmVhdGUgYXNzZXQgcmVnaXN0cmF0aW9uIG1ldGhvZHMuCiAgICAgKi8KICAgIEFTU0VUX1RZUEVTLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHsKICAgICAgVnVlW3R5cGVdID0gZnVuY3Rpb24gKAogICAgICAgIGlkLAogICAgICAgIGRlZmluaXRpb24KICAgICAgKSB7CiAgICAgICAgaWYgKCFkZWZpbml0aW9uKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zW3R5cGUgKyAncyddW2lkXQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgICAgIGlmICh0eXBlID09PSAnY29tcG9uZW50JykgewogICAgICAgICAgICB2YWxpZGF0ZUNvbXBvbmVudE5hbWUoaWQpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHR5cGUgPT09ICdjb21wb25lbnQnICYmIGlzUGxhaW5PYmplY3QoZGVmaW5pdGlvbikpIHsKICAgICAgICAgICAgZGVmaW5pdGlvbi5uYW1lID0gZGVmaW5pdGlvbi5uYW1lIHx8IGlkOwogICAgICAgICAgICBkZWZpbml0aW9uID0gdGhpcy5vcHRpb25zLl9iYXNlLmV4dGVuZChkZWZpbml0aW9uKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0eXBlID09PSAnZGlyZWN0aXZlJyAmJiB0eXBlb2YgZGVmaW5pdGlvbiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICBkZWZpbml0aW9uID0geyBiaW5kOiBkZWZpbml0aW9uLCB1cGRhdGU6IGRlZmluaXRpb24gfTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMub3B0aW9uc1t0eXBlICsgJ3MnXVtpZF0gPSBkZWZpbml0aW9uOwogICAgICAgICAgcmV0dXJuIGRlZmluaXRpb24KICAgICAgICB9CiAgICAgIH07CiAgICB9KTsKICB9CgogIC8qICAqLwoKCgogIGZ1bmN0aW9uIGdldENvbXBvbmVudE5hbWUgKG9wdHMpIHsKICAgIHJldHVybiBvcHRzICYmIChvcHRzLkN0b3Iub3B0aW9ucy5uYW1lIHx8IG9wdHMudGFnKQogIH0KCiAgZnVuY3Rpb24gbWF0Y2hlcyAocGF0dGVybiwgbmFtZSkgewogICAgaWYgKEFycmF5LmlzQXJyYXkocGF0dGVybikpIHsKICAgICAgcmV0dXJuIHBhdHRlcm4uaW5kZXhPZihuYW1lKSA+IC0xCiAgICB9IGVsc2UgaWYgKHR5cGVvZiBwYXR0ZXJuID09PSAnc3RyaW5nJykgewogICAgICByZXR1cm4gcGF0dGVybi5zcGxpdCgnLCcpLmluZGV4T2YobmFtZSkgPiAtMQogICAgfSBlbHNlIGlmIChpc1JlZ0V4cChwYXR0ZXJuKSkgewogICAgICByZXR1cm4gcGF0dGVybi50ZXN0KG5hbWUpCiAgICB9CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogICAgcmV0dXJuIGZhbHNlCiAgfQoKICBmdW5jdGlvbiBwcnVuZUNhY2hlIChrZWVwQWxpdmVJbnN0YW5jZSwgZmlsdGVyKSB7CiAgICB2YXIgY2FjaGUgPSBrZWVwQWxpdmVJbnN0YW5jZS5jYWNoZTsKICAgIHZhciBrZXlzID0ga2VlcEFsaXZlSW5zdGFuY2Uua2V5czsKICAgIHZhciBfdm5vZGUgPSBrZWVwQWxpdmVJbnN0YW5jZS5fdm5vZGU7CiAgICBmb3IgKHZhciBrZXkgaW4gY2FjaGUpIHsKICAgICAgdmFyIGNhY2hlZE5vZGUgPSBjYWNoZVtrZXldOwogICAgICBpZiAoY2FjaGVkTm9kZSkgewogICAgICAgIHZhciBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZShjYWNoZWROb2RlLmNvbXBvbmVudE9wdGlvbnMpOwogICAgICAgIGlmIChuYW1lICYmICFmaWx0ZXIobmFtZSkpIHsKICAgICAgICAgIHBydW5lQ2FjaGVFbnRyeShjYWNoZSwga2V5LCBrZXlzLCBfdm5vZGUpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gcHJ1bmVDYWNoZUVudHJ5ICgKICAgIGNhY2hlLAogICAga2V5LAogICAga2V5cywKICAgIGN1cnJlbnQKICApIHsKICAgIHZhciBjYWNoZWQkJDEgPSBjYWNoZVtrZXldOwogICAgaWYgKGNhY2hlZCQkMSAmJiAoIWN1cnJlbnQgfHwgY2FjaGVkJCQxLnRhZyAhPT0gY3VycmVudC50YWcpKSB7CiAgICAgIGNhY2hlZCQkMS5jb21wb25lbnRJbnN0YW5jZS4kZGVzdHJveSgpOwogICAgfQogICAgY2FjaGVba2V5XSA9IG51bGw7CiAgICByZW1vdmUoa2V5cywga2V5KTsKICB9CgogIHZhciBwYXR0ZXJuVHlwZXMgPSBbU3RyaW5nLCBSZWdFeHAsIEFycmF5XTsKCiAgdmFyIEtlZXBBbGl2ZSA9IHsKICAgIG5hbWU6ICdrZWVwLWFsaXZlJywKICAgIGFic3RyYWN0OiB0cnVlLAoKICAgIHByb3BzOiB7CiAgICAgIGluY2x1ZGU6IHBhdHRlcm5UeXBlcywKICAgICAgZXhjbHVkZTogcGF0dGVyblR5cGVzLAogICAgICBtYXg6IFtTdHJpbmcsIE51bWJlcl0KICAgIH0sCgogICAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCAoKSB7CiAgICAgIHRoaXMuY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgICB0aGlzLmtleXMgPSBbXTsKICAgIH0sCgogICAgZGVzdHJveWVkOiBmdW5jdGlvbiBkZXN0cm95ZWQgKCkgewogICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5jYWNoZSkgewogICAgICAgIHBydW5lQ2FjaGVFbnRyeSh0aGlzLmNhY2hlLCBrZXksIHRoaXMua2V5cyk7CiAgICAgIH0KICAgIH0sCgogICAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCAoKSB7CiAgICAgIHZhciB0aGlzJDEgPSB0aGlzOwoKICAgICAgdGhpcy4kd2F0Y2goJ2luY2x1ZGUnLCBmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgcHJ1bmVDYWNoZSh0aGlzJDEsIGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBtYXRjaGVzKHZhbCwgbmFtZSk7IH0pOwogICAgICB9KTsKICAgICAgdGhpcy4kd2F0Y2goJ2V4Y2x1ZGUnLCBmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgcHJ1bmVDYWNoZSh0aGlzJDEsIGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiAhbWF0Y2hlcyh2YWwsIG5hbWUpOyB9KTsKICAgICAgfSk7CiAgICB9LAoKICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyICgpIHsKICAgICAgdmFyIHNsb3QgPSB0aGlzLiRzbG90cy5kZWZhdWx0OwogICAgICB2YXIgdm5vZGUgPSBnZXRGaXJzdENvbXBvbmVudENoaWxkKHNsb3QpOwogICAgICB2YXIgY29tcG9uZW50T3B0aW9ucyA9IHZub2RlICYmIHZub2RlLmNvbXBvbmVudE9wdGlvbnM7CiAgICAgIGlmIChjb21wb25lbnRPcHRpb25zKSB7CiAgICAgICAgLy8gY2hlY2sgcGF0dGVybgogICAgICAgIHZhciBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZShjb21wb25lbnRPcHRpb25zKTsKICAgICAgICB2YXIgcmVmID0gdGhpczsKICAgICAgICB2YXIgaW5jbHVkZSA9IHJlZi5pbmNsdWRlOwogICAgICAgIHZhciBleGNsdWRlID0gcmVmLmV4Y2x1ZGU7CiAgICAgICAgaWYgKAogICAgICAgICAgLy8gbm90IGluY2x1ZGVkCiAgICAgICAgICAoaW5jbHVkZSAmJiAoIW5hbWUgfHwgIW1hdGNoZXMoaW5jbHVkZSwgbmFtZSkpKSB8fAogICAgICAgICAgLy8gZXhjbHVkZWQKICAgICAgICAgIChleGNsdWRlICYmIG5hbWUgJiYgbWF0Y2hlcyhleGNsdWRlLCBuYW1lKSkKICAgICAgICApIHsKICAgICAgICAgIHJldHVybiB2bm9kZQogICAgICAgIH0KCiAgICAgICAgdmFyIHJlZiQxID0gdGhpczsKICAgICAgICB2YXIgY2FjaGUgPSByZWYkMS5jYWNoZTsKICAgICAgICB2YXIga2V5cyA9IHJlZiQxLmtleXM7CiAgICAgICAgdmFyIGtleSA9IHZub2RlLmtleSA9PSBudWxsCiAgICAgICAgICAvLyBzYW1lIGNvbnN0cnVjdG9yIG1heSBnZXQgcmVnaXN0ZXJlZCBhcyBkaWZmZXJlbnQgbG9jYWwgY29tcG9uZW50cwogICAgICAgICAgLy8gc28gY2lkIGFsb25lIGlzIG5vdCBlbm91Z2ggKCMzMjY5KQogICAgICAgICAgPyBjb21wb25lbnRPcHRpb25zLkN0b3IuY2lkICsgKGNvbXBvbmVudE9wdGlvbnMudGFnID8gKCI6OiIgKyAoY29tcG9uZW50T3B0aW9ucy50YWcpKSA6ICcnKQogICAgICAgICAgOiB2bm9kZS5rZXk7CiAgICAgICAgaWYgKGNhY2hlW2tleV0pIHsKICAgICAgICAgIHZub2RlLmNvbXBvbmVudEluc3RhbmNlID0gY2FjaGVba2V5XS5jb21wb25lbnRJbnN0YW5jZTsKICAgICAgICAgIC8vIG1ha2UgY3VycmVudCBrZXkgZnJlc2hlc3QKICAgICAgICAgIHJlbW92ZShrZXlzLCBrZXkpOwogICAgICAgICAga2V5cy5wdXNoKGtleSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNhY2hlW2tleV0gPSB2bm9kZTsKICAgICAgICAgIGtleXMucHVzaChrZXkpOwogICAgICAgICAgLy8gcHJ1bmUgb2xkZXN0IGVudHJ5CiAgICAgICAgICBpZiAodGhpcy5tYXggJiYga2V5cy5sZW5ndGggPiBwYXJzZUludCh0aGlzLm1heCkpIHsKICAgICAgICAgICAgcHJ1bmVDYWNoZUVudHJ5KGNhY2hlLCBrZXlzWzBdLCBrZXlzLCB0aGlzLl92bm9kZSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2bm9kZS5kYXRhLmtlZXBBbGl2ZSA9IHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuIHZub2RlIHx8IChzbG90ICYmIHNsb3RbMF0pCiAgICB9CiAgfTsKCiAgdmFyIGJ1aWx0SW5Db21wb25lbnRzID0gewogICAgS2VlcEFsaXZlOiBLZWVwQWxpdmUKICB9OwoKICAvKiAgKi8KCiAgZnVuY3Rpb24gaW5pdEdsb2JhbEFQSSAoVnVlKSB7CiAgICAvLyBjb25maWcKICAgIHZhciBjb25maWdEZWYgPSB7fTsKICAgIGNvbmZpZ0RlZi5nZXQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBjb25maWc7IH07CiAgICB7CiAgICAgIGNvbmZpZ0RlZi5zZXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgd2FybigKICAgICAgICAgICdEbyBub3QgcmVwbGFjZSB0aGUgVnVlLmNvbmZpZyBvYmplY3QsIHNldCBpbmRpdmlkdWFsIGZpZWxkcyBpbnN0ZWFkLicKICAgICAgICApOwogICAgICB9OwogICAgfQogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZSwgJ2NvbmZpZycsIGNvbmZpZ0RlZik7CgogICAgLy8gZXhwb3NlZCB1dGlsIG1ldGhvZHMuCiAgICAvLyBOT1RFOiB0aGVzZSBhcmUgbm90IGNvbnNpZGVyZWQgcGFydCBvZiB0aGUgcHVibGljIEFQSSAtIGF2b2lkIHJlbHlpbmcgb24KICAgIC8vIHRoZW0gdW5sZXNzIHlvdSBhcmUgYXdhcmUgb2YgdGhlIHJpc2suCiAgICBWdWUudXRpbCA9IHsKICAgICAgd2Fybjogd2FybiwKICAgICAgZXh0ZW5kOiBleHRlbmQsCiAgICAgIG1lcmdlT3B0aW9uczogbWVyZ2VPcHRpb25zLAogICAgICBkZWZpbmVSZWFjdGl2ZTogZGVmaW5lUmVhY3RpdmUkJDEKICAgIH07CgogICAgVnVlLnNldCA9IHNldDsKICAgIFZ1ZS5kZWxldGUgPSBkZWw7CiAgICBWdWUubmV4dFRpY2sgPSBuZXh0VGljazsKCiAgICAvLyAyLjYgZXhwbGljaXQgb2JzZXJ2YWJsZSBBUEkKICAgIFZ1ZS5vYnNlcnZhYmxlID0gZnVuY3Rpb24gKG9iaikgewogICAgICBvYnNlcnZlKG9iaik7CiAgICAgIHJldHVybiBvYmoKICAgIH07CgogICAgVnVlLm9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgQVNTRVRfVFlQRVMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkgewogICAgICBWdWUub3B0aW9uc1t0eXBlICsgJ3MnXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICB9KTsKCiAgICAvLyB0aGlzIGlzIHVzZWQgdG8gaWRlbnRpZnkgdGhlICJiYXNlIiBjb25zdHJ1Y3RvciB0byBleHRlbmQgYWxsIHBsYWluLW9iamVjdAogICAgLy8gY29tcG9uZW50cyB3aXRoIGluIFdlZXgncyBtdWx0aS1pbnN0YW5jZSBzY2VuYXJpb3MuCiAgICBWdWUub3B0aW9ucy5fYmFzZSA9IFZ1ZTsKCiAgICBleHRlbmQoVnVlLm9wdGlvbnMuY29tcG9uZW50cywgYnVpbHRJbkNvbXBvbmVudHMpOwoKICAgIGluaXRVc2UoVnVlKTsKICAgIGluaXRNaXhpbiQxKFZ1ZSk7CiAgICBpbml0RXh0ZW5kKFZ1ZSk7CiAgICBpbml0QXNzZXRSZWdpc3RlcnMoVnVlKTsKICB9CgogIGluaXRHbG9iYWxBUEkoVnVlKTsKCiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZS5wcm90b3R5cGUsICckaXNTZXJ2ZXInLCB7CiAgICBnZXQ6IGlzU2VydmVyUmVuZGVyaW5nCiAgfSk7CgogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUucHJvdG90eXBlLCAnJHNzckNvbnRleHQnLCB7CiAgICBnZXQ6IGZ1bmN0aW9uIGdldCAoKSB7CiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgICAgIHJldHVybiB0aGlzLiR2bm9kZSAmJiB0aGlzLiR2bm9kZS5zc3JDb250ZXh0CiAgICB9CiAgfSk7CgogIC8vIGV4cG9zZSBGdW5jdGlvbmFsUmVuZGVyQ29udGV4dCBmb3Igc3NyIHJ1bnRpbWUgaGVscGVyIGluc3RhbGxhdGlvbgogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUsICdGdW5jdGlvbmFsUmVuZGVyQ29udGV4dCcsIHsKICAgIHZhbHVlOiBGdW5jdGlvbmFsUmVuZGVyQ29udGV4dAogIH0pOwoKICBWdWUudmVyc2lvbiA9ICcyLjYuMTInOwoKICAvKiAgKi8KCiAgLy8gdGhlc2UgYXJlIHJlc2VydmVkIGZvciB3ZWIgYmVjYXVzZSB0aGV5IGFyZSBkaXJlY3RseSBjb21waWxlZCBhd2F5CiAgLy8gZHVyaW5nIHRlbXBsYXRlIGNvbXBpbGF0aW9uCiAgdmFyIGlzUmVzZXJ2ZWRBdHRyID0gbWFrZU1hcCgnc3R5bGUsY2xhc3MnKTsKCiAgLy8gYXR0cmlidXRlcyB0aGF0IHNob3VsZCBiZSB1c2luZyBwcm9wcyBmb3IgYmluZGluZwogIHZhciBhY2NlcHRWYWx1ZSA9IG1ha2VNYXAoJ2lucHV0LHRleHRhcmVhLG9wdGlvbixzZWxlY3QscHJvZ3Jlc3MnKTsKICB2YXIgbXVzdFVzZVByb3AgPSBmdW5jdGlvbiAodGFnLCB0eXBlLCBhdHRyKSB7CiAgICByZXR1cm4gKAogICAgICAoYXR0ciA9PT0gJ3ZhbHVlJyAmJiBhY2NlcHRWYWx1ZSh0YWcpKSAmJiB0eXBlICE9PSAnYnV0dG9uJyB8fAogICAgICAoYXR0ciA9PT0gJ3NlbGVjdGVkJyAmJiB0YWcgPT09ICdvcHRpb24nKSB8fAogICAgICAoYXR0ciA9PT0gJ2NoZWNrZWQnICYmIHRhZyA9PT0gJ2lucHV0JykgfHwKICAgICAgKGF0dHIgPT09ICdtdXRlZCcgJiYgdGFnID09PSAndmlkZW8nKQogICAgKQogIH07CgogIHZhciBpc0VudW1lcmF0ZWRBdHRyID0gbWFrZU1hcCgnY29udGVudGVkaXRhYmxlLGRyYWdnYWJsZSxzcGVsbGNoZWNrJyk7CgogIHZhciBpc1ZhbGlkQ29udGVudEVkaXRhYmxlVmFsdWUgPSBtYWtlTWFwKCdldmVudHMsY2FyZXQsdHlwaW5nLHBsYWludGV4dC1vbmx5Jyk7CgogIHZhciBjb252ZXJ0RW51bWVyYXRlZFZhbHVlID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHsKICAgIHJldHVybiBpc0ZhbHN5QXR0clZhbHVlKHZhbHVlKSB8fCB2YWx1ZSA9PT0gJ2ZhbHNlJwogICAgICA/ICdmYWxzZScKICAgICAgLy8gYWxsb3cgYXJiaXRyYXJ5IHN0cmluZyB2YWx1ZSBmb3IgY29udGVudGVkaXRhYmxlCiAgICAgIDoga2V5ID09PSAnY29udGVudGVkaXRhYmxlJyAmJiBpc1ZhbGlkQ29udGVudEVkaXRhYmxlVmFsdWUodmFsdWUpCiAgICAgICAgPyB2YWx1ZQogICAgICAgIDogJ3RydWUnCiAgfTsKCiAgdmFyIGlzQm9vbGVhbkF0dHIgPSBtYWtlTWFwKAogICAgJ2FsbG93ZnVsbHNjcmVlbixhc3luYyxhdXRvZm9jdXMsYXV0b3BsYXksY2hlY2tlZCxjb21wYWN0LGNvbnRyb2xzLGRlY2xhcmUsJyArCiAgICAnZGVmYXVsdCxkZWZhdWx0Y2hlY2tlZCxkZWZhdWx0bXV0ZWQsZGVmYXVsdHNlbGVjdGVkLGRlZmVyLGRpc2FibGVkLCcgKwogICAgJ2VuYWJsZWQsZm9ybW5vdmFsaWRhdGUsaGlkZGVuLGluZGV0ZXJtaW5hdGUsaW5lcnQsaXNtYXAsaXRlbXNjb3BlLGxvb3AsbXVsdGlwbGUsJyArCiAgICAnbXV0ZWQsbm9ocmVmLG5vcmVzaXplLG5vc2hhZGUsbm92YWxpZGF0ZSxub3dyYXAsb3BlbixwYXVzZW9uZXhpdCxyZWFkb25seSwnICsKICAgICdyZXF1aXJlZCxyZXZlcnNlZCxzY29wZWQsc2VhbWxlc3Msc2VsZWN0ZWQsc29ydGFibGUsdHJhbnNsYXRlLCcgKwogICAgJ3RydWVzcGVlZCx0eXBlbXVzdG1hdGNoLHZpc2libGUnCiAgKTsKCiAgdmFyIHhsaW5rTlMgPSAnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc7CgogIHZhciBpc1hsaW5rID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgIHJldHVybiBuYW1lLmNoYXJBdCg1KSA9PT0gJzonICYmIG5hbWUuc2xpY2UoMCwgNSkgPT09ICd4bGluaycKICB9OwoKICB2YXIgZ2V0WGxpbmtQcm9wID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgIHJldHVybiBpc1hsaW5rKG5hbWUpID8gbmFtZS5zbGljZSg2LCBuYW1lLmxlbmd0aCkgOiAnJwogIH07CgogIHZhciBpc0ZhbHN5QXR0clZhbHVlID0gZnVuY3Rpb24gKHZhbCkgewogICAgcmV0dXJuIHZhbCA9PSBudWxsIHx8IHZhbCA9PT0gZmFsc2UKICB9OwoKICAvKiAgKi8KCiAgZnVuY3Rpb24gZ2VuQ2xhc3NGb3JWbm9kZSAodm5vZGUpIHsKICAgIHZhciBkYXRhID0gdm5vZGUuZGF0YTsKICAgIHZhciBwYXJlbnROb2RlID0gdm5vZGU7CiAgICB2YXIgY2hpbGROb2RlID0gdm5vZGU7CiAgICB3aGlsZSAoaXNEZWYoY2hpbGROb2RlLmNvbXBvbmVudEluc3RhbmNlKSkgewogICAgICBjaGlsZE5vZGUgPSBjaGlsZE5vZGUuY29tcG9uZW50SW5zdGFuY2UuX3Zub2RlOwogICAgICBpZiAoY2hpbGROb2RlICYmIGNoaWxkTm9kZS5kYXRhKSB7CiAgICAgICAgZGF0YSA9IG1lcmdlQ2xhc3NEYXRhKGNoaWxkTm9kZS5kYXRhLCBkYXRhKTsKICAgICAgfQogICAgfQogICAgd2hpbGUgKGlzRGVmKHBhcmVudE5vZGUgPSBwYXJlbnROb2RlLnBhcmVudCkpIHsKICAgICAgaWYgKHBhcmVudE5vZGUgJiYgcGFyZW50Tm9kZS5kYXRhKSB7CiAgICAgICAgZGF0YSA9IG1lcmdlQ2xhc3NEYXRhKGRhdGEsIHBhcmVudE5vZGUuZGF0YSk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiByZW5kZXJDbGFzcyhkYXRhLnN0YXRpY0NsYXNzLCBkYXRhLmNsYXNzKQogIH0KCiAgZnVuY3Rpb24gbWVyZ2VDbGFzc0RhdGEgKGNoaWxkLCBwYXJlbnQpIHsKICAgIHJldHVybiB7CiAgICAgIHN0YXRpY0NsYXNzOiBjb25jYXQoY2hpbGQuc3RhdGljQ2xhc3MsIHBhcmVudC5zdGF0aWNDbGFzcyksCiAgICAgIGNsYXNzOiBpc0RlZihjaGlsZC5jbGFzcykKICAgICAgICA/IFtjaGlsZC5jbGFzcywgcGFyZW50LmNsYXNzXQogICAgICAgIDogcGFyZW50LmNsYXNzCiAgICB9CiAgfQoKICBmdW5jdGlvbiByZW5kZXJDbGFzcyAoCiAgICBzdGF0aWNDbGFzcywKICAgIGR5bmFtaWNDbGFzcwogICkgewogICAgaWYgKGlzRGVmKHN0YXRpY0NsYXNzKSB8fCBpc0RlZihkeW5hbWljQ2xhc3MpKSB7CiAgICAgIHJldHVybiBjb25jYXQoc3RhdGljQ2xhc3MsIHN0cmluZ2lmeUNsYXNzKGR5bmFtaWNDbGFzcykpCiAgICB9CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogICAgcmV0dXJuICcnCiAgfQoKICBmdW5jdGlvbiBjb25jYXQgKGEsIGIpIHsKICAgIHJldHVybiBhID8gYiA/IChhICsgJyAnICsgYikgOiBhIDogKGIgfHwgJycpCiAgfQoKICBmdW5jdGlvbiBzdHJpbmdpZnlDbGFzcyAodmFsdWUpIHsKICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgewogICAgICByZXR1cm4gc3RyaW5naWZ5QXJyYXkodmFsdWUpCiAgICB9CiAgICBpZiAoaXNPYmplY3QodmFsdWUpKSB7CiAgICAgIHJldHVybiBzdHJpbmdpZnlPYmplY3QodmFsdWUpCiAgICB9CiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgewogICAgICByZXR1cm4gdmFsdWUKICAgIH0KICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgICByZXR1cm4gJycKICB9CgogIGZ1bmN0aW9uIHN0cmluZ2lmeUFycmF5ICh2YWx1ZSkgewogICAgdmFyIHJlcyA9ICcnOwogICAgdmFyIHN0cmluZ2lmaWVkOwogICAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgaWYgKGlzRGVmKHN0cmluZ2lmaWVkID0gc3RyaW5naWZ5Q2xhc3ModmFsdWVbaV0pKSAmJiBzdHJpbmdpZmllZCAhPT0gJycpIHsKICAgICAgICBpZiAocmVzKSB7IHJlcyArPSAnICc7IH0KICAgICAgICByZXMgKz0gc3RyaW5naWZpZWQ7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiByZXMKICB9CgogIGZ1bmN0aW9uIHN0cmluZ2lmeU9iamVjdCAodmFsdWUpIHsKICAgIHZhciByZXMgPSAnJzsKICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZSkgewogICAgICBpZiAodmFsdWVba2V5XSkgewogICAgICAgIGlmIChyZXMpIHsgcmVzICs9ICcgJzsgfQogICAgICAgIHJlcyArPSBrZXk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiByZXMKICB9CgogIC8qICAqLwoKICB2YXIgbmFtZXNwYWNlTWFwID0gewogICAgc3ZnOiAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLAogICAgbWF0aDogJ2h0dHA6Ly93d3cudzMub3JnLzE5OTgvTWF0aC9NYXRoTUwnCiAgfTsKCiAgdmFyIGlzSFRNTFRhZyA9IG1ha2VNYXAoCiAgICAnaHRtbCxib2R5LGJhc2UsaGVhZCxsaW5rLG1ldGEsc3R5bGUsdGl0bGUsJyArCiAgICAnYWRkcmVzcyxhcnRpY2xlLGFzaWRlLGZvb3RlcixoZWFkZXIsaDEsaDIsaDMsaDQsaDUsaDYsaGdyb3VwLG5hdixzZWN0aW9uLCcgKwogICAgJ2RpdixkZCxkbCxkdCxmaWdjYXB0aW9uLGZpZ3VyZSxwaWN0dXJlLGhyLGltZyxsaSxtYWluLG9sLHAscHJlLHVsLCcgKwogICAgJ2EsYixhYmJyLGJkaSxiZG8sYnIsY2l0ZSxjb2RlLGRhdGEsZGZuLGVtLGksa2JkLG1hcmsscSxycCxydCxydGMscnVieSwnICsKICAgICdzLHNhbXAsc21hbGwsc3BhbixzdHJvbmcsc3ViLHN1cCx0aW1lLHUsdmFyLHdicixhcmVhLGF1ZGlvLG1hcCx0cmFjayx2aWRlbywnICsKICAgICdlbWJlZCxvYmplY3QscGFyYW0sc291cmNlLGNhbnZhcyxzY3JpcHQsbm9zY3JpcHQsZGVsLGlucywnICsKICAgICdjYXB0aW9uLGNvbCxjb2xncm91cCx0YWJsZSx0aGVhZCx0Ym9keSx0ZCx0aCx0ciwnICsKICAgICdidXR0b24sZGF0YWxpc3QsZmllbGRzZXQsZm9ybSxpbnB1dCxsYWJlbCxsZWdlbmQsbWV0ZXIsb3B0Z3JvdXAsb3B0aW9uLCcgKwogICAgJ291dHB1dCxwcm9ncmVzcyxzZWxlY3QsdGV4dGFyZWEsJyArCiAgICAnZGV0YWlscyxkaWFsb2csbWVudSxtZW51aXRlbSxzdW1tYXJ5LCcgKwogICAgJ2NvbnRlbnQsZWxlbWVudCxzaGFkb3csdGVtcGxhdGUsYmxvY2txdW90ZSxpZnJhbWUsdGZvb3QnCiAgKTsKCiAgLy8gdGhpcyBtYXAgaXMgaW50ZW50aW9uYWxseSBzZWxlY3RpdmUsIG9ubHkgY292ZXJpbmcgU1ZHIGVsZW1lbnRzIHRoYXQgbWF5CiAgLy8gY29udGFpbiBjaGlsZCBlbGVtZW50cy4KICB2YXIgaXNTVkcgPSBtYWtlTWFwKAogICAgJ3N2ZyxhbmltYXRlLGNpcmNsZSxjbGlwcGF0aCxjdXJzb3IsZGVmcyxkZXNjLGVsbGlwc2UsZmlsdGVyLGZvbnQtZmFjZSwnICsKICAgICdmb3JlaWduT2JqZWN0LGcsZ2x5cGgsaW1hZ2UsbGluZSxtYXJrZXIsbWFzayxtaXNzaW5nLWdseXBoLHBhdGgscGF0dGVybiwnICsKICAgICdwb2x5Z29uLHBvbHlsaW5lLHJlY3Qsc3dpdGNoLHN5bWJvbCx0ZXh0LHRleHRwYXRoLHRzcGFuLHVzZSx2aWV3JywKICAgIHRydWUKICApOwoKICB2YXIgaXNQcmVUYWcgPSBmdW5jdGlvbiAodGFnKSB7IHJldHVybiB0YWcgPT09ICdwcmUnOyB9OwoKICB2YXIgaXNSZXNlcnZlZFRhZyA9IGZ1bmN0aW9uICh0YWcpIHsKICAgIHJldHVybiBpc0hUTUxUYWcodGFnKSB8fCBpc1NWRyh0YWcpCiAgfTsKCiAgZnVuY3Rpb24gZ2V0VGFnTmFtZXNwYWNlICh0YWcpIHsKICAgIGlmIChpc1NWRyh0YWcpKSB7CiAgICAgIHJldHVybiAnc3ZnJwogICAgfQogICAgLy8gYmFzaWMgc3VwcG9ydCBmb3IgTWF0aE1MCiAgICAvLyBub3RlIGl0IGRvZXNuJ3Qgc3VwcG9ydCBvdGhlciBNYXRoTUwgZWxlbWVudHMgYmVpbmcgY29tcG9uZW50IHJvb3RzCiAgICBpZiAodGFnID09PSAnbWF0aCcpIHsKICAgICAgcmV0dXJuICdtYXRoJwogICAgfQogIH0KCiAgdmFyIHVua25vd25FbGVtZW50Q2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogIGZ1bmN0aW9uIGlzVW5rbm93bkVsZW1lbnQgKHRhZykgewogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoIWluQnJvd3NlcikgewogICAgICByZXR1cm4gdHJ1ZQogICAgfQogICAgaWYgKGlzUmVzZXJ2ZWRUYWcodGFnKSkgewogICAgICByZXR1cm4gZmFsc2UKICAgIH0KICAgIHRhZyA9IHRhZy50b0xvd2VyQ2FzZSgpOwogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAodW5rbm93bkVsZW1lbnRDYWNoZVt0YWddICE9IG51bGwpIHsKICAgICAgcmV0dXJuIHVua25vd25FbGVtZW50Q2FjaGVbdGFnXQogICAgfQogICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpOwogICAgaWYgKHRhZy5pbmRleE9mKCctJykgPiAtMSkgewogICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yODIxMDM2NC8xMDcwMjQ0CiAgICAgIHJldHVybiAodW5rbm93bkVsZW1lbnRDYWNoZVt0YWddID0gKAogICAgICAgIGVsLmNvbnN0cnVjdG9yID09PSB3aW5kb3cuSFRNTFVua25vd25FbGVtZW50IHx8CiAgICAgICAgZWwuY29uc3RydWN0b3IgPT09IHdpbmRvdy5IVE1MRWxlbWVudAogICAgICApKQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICh1bmtub3duRWxlbWVudENhY2hlW3RhZ10gPSAvSFRNTFVua25vd25FbGVtZW50Ly50ZXN0KGVsLnRvU3RyaW5nKCkpKQogICAgfQogIH0KCiAgdmFyIGlzVGV4dElucHV0VHlwZSA9IG1ha2VNYXAoJ3RleHQsbnVtYmVyLHBhc3N3b3JkLHNlYXJjaCxlbWFpbCx0ZWwsdXJsJyk7CgogIC8qICAqLwoKICAvKioKICAgKiBRdWVyeSBhbiBlbGVtZW50IHNlbGVjdG9yIGlmIGl0J3Mgbm90IGFuIGVsZW1lbnQgYWxyZWFkeS4KICAgKi8KICBmdW5jdGlvbiBxdWVyeSAoZWwpIHsKICAgIGlmICh0eXBlb2YgZWwgPT09ICdzdHJpbmcnKSB7CiAgICAgIHZhciBzZWxlY3RlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpOwogICAgICBpZiAoIXNlbGVjdGVkKSB7CiAgICAgICAgd2FybigKICAgICAgICAgICdDYW5ub3QgZmluZCBlbGVtZW50OiAnICsgZWwKICAgICAgICApOwogICAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKQogICAgICB9CiAgICAgIHJldHVybiBzZWxlY3RlZAogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGVsCiAgICB9CiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gY3JlYXRlRWxlbWVudCQxICh0YWdOYW1lLCB2bm9kZSkgewogICAgdmFyIGVsbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7CiAgICBpZiAodGFnTmFtZSAhPT0gJ3NlbGVjdCcpIHsKICAgICAgcmV0dXJuIGVsbQogICAgfQogICAgLy8gZmFsc2Ugb3IgbnVsbCB3aWxsIHJlbW92ZSB0aGUgYXR0cmlidXRlIGJ1dCB1bmRlZmluZWQgd2lsbCBub3QKICAgIGlmICh2bm9kZS5kYXRhICYmIHZub2RlLmRhdGEuYXR0cnMgJiYgdm5vZGUuZGF0YS5hdHRycy5tdWx0aXBsZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGVsbS5zZXRBdHRyaWJ1dGUoJ211bHRpcGxlJywgJ211bHRpcGxlJyk7CiAgICB9CiAgICByZXR1cm4gZWxtCiAgfQoKICBmdW5jdGlvbiBjcmVhdGVFbGVtZW50TlMgKG5hbWVzcGFjZSwgdGFnTmFtZSkgewogICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhuYW1lc3BhY2VNYXBbbmFtZXNwYWNlXSwgdGFnTmFtZSkKICB9CgogIGZ1bmN0aW9uIGNyZWF0ZVRleHROb2RlICh0ZXh0KSB7CiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dCkKICB9CgogIGZ1bmN0aW9uIGNyZWF0ZUNvbW1lbnQgKHRleHQpIHsKICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVDb21tZW50KHRleHQpCiAgfQoKICBmdW5jdGlvbiBpbnNlcnRCZWZvcmUgKHBhcmVudE5vZGUsIG5ld05vZGUsIHJlZmVyZW5jZU5vZGUpIHsKICAgIHBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5ld05vZGUsIHJlZmVyZW5jZU5vZGUpOwogIH0KCiAgZnVuY3Rpb24gcmVtb3ZlQ2hpbGQgKG5vZGUsIGNoaWxkKSB7CiAgICBub2RlLnJlbW92ZUNoaWxkKGNoaWxkKTsKICB9CgogIGZ1bmN0aW9uIGFwcGVuZENoaWxkIChub2RlLCBjaGlsZCkgewogICAgbm9kZS5hcHBlbmRDaGlsZChjaGlsZCk7CiAgfQoKICBmdW5jdGlvbiBwYXJlbnROb2RlIChub2RlKSB7CiAgICByZXR1cm4gbm9kZS5wYXJlbnROb2RlCiAgfQoKICBmdW5jdGlvbiBuZXh0U2libGluZyAobm9kZSkgewogICAgcmV0dXJuIG5vZGUubmV4dFNpYmxpbmcKICB9CgogIGZ1bmN0aW9uIHRhZ05hbWUgKG5vZGUpIHsKICAgIHJldHVybiBub2RlLnRhZ05hbWUKICB9CgogIGZ1bmN0aW9uIHNldFRleHRDb250ZW50IChub2RlLCB0ZXh0KSB7CiAgICBub2RlLnRleHRDb250ZW50ID0gdGV4dDsKICB9CgogIGZ1bmN0aW9uIHNldFN0eWxlU2NvcGUgKG5vZGUsIHNjb3BlSWQpIHsKICAgIG5vZGUuc2V0QXR0cmlidXRlKHNjb3BlSWQsICcnKTsKICB9CgogIHZhciBub2RlT3BzID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoewogICAgY3JlYXRlRWxlbWVudDogY3JlYXRlRWxlbWVudCQxLAogICAgY3JlYXRlRWxlbWVudE5TOiBjcmVhdGVFbGVtZW50TlMsCiAgICBjcmVhdGVUZXh0Tm9kZTogY3JlYXRlVGV4dE5vZGUsCiAgICBjcmVhdGVDb21tZW50OiBjcmVhdGVDb21tZW50LAogICAgaW5zZXJ0QmVmb3JlOiBpbnNlcnRCZWZvcmUsCiAgICByZW1vdmVDaGlsZDogcmVtb3ZlQ2hpbGQsCiAgICBhcHBlbmRDaGlsZDogYXBwZW5kQ2hpbGQsCiAgICBwYXJlbnROb2RlOiBwYXJlbnROb2RlLAogICAgbmV4dFNpYmxpbmc6IG5leHRTaWJsaW5nLAogICAgdGFnTmFtZTogdGFnTmFtZSwKICAgIHNldFRleHRDb250ZW50OiBzZXRUZXh0Q29udGVudCwKICAgIHNldFN0eWxlU2NvcGU6IHNldFN0eWxlU2NvcGUKICB9KTsKCiAgLyogICovCgogIHZhciByZWYgPSB7CiAgICBjcmVhdGU6IGZ1bmN0aW9uIGNyZWF0ZSAoXywgdm5vZGUpIHsKICAgICAgcmVnaXN0ZXJSZWYodm5vZGUpOwogICAgfSwKICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlIChvbGRWbm9kZSwgdm5vZGUpIHsKICAgICAgaWYgKG9sZFZub2RlLmRhdGEucmVmICE9PSB2bm9kZS5kYXRhLnJlZikgewogICAgICAgIHJlZ2lzdGVyUmVmKG9sZFZub2RlLCB0cnVlKTsKICAgICAgICByZWdpc3RlclJlZih2bm9kZSk7CiAgICAgIH0KICAgIH0sCiAgICBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95ICh2bm9kZSkgewogICAgICByZWdpc3RlclJlZih2bm9kZSwgdHJ1ZSk7CiAgICB9CiAgfTsKCiAgZnVuY3Rpb24gcmVnaXN0ZXJSZWYgKHZub2RlLCBpc1JlbW92YWwpIHsKICAgIHZhciBrZXkgPSB2bm9kZS5kYXRhLnJlZjsKICAgIGlmICghaXNEZWYoa2V5KSkgeyByZXR1cm4gfQoKICAgIHZhciB2bSA9IHZub2RlLmNvbnRleHQ7CiAgICB2YXIgcmVmID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2UgfHwgdm5vZGUuZWxtOwogICAgdmFyIHJlZnMgPSB2bS4kcmVmczsKICAgIGlmIChpc1JlbW92YWwpIHsKICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVmc1trZXldKSkgewogICAgICAgIHJlbW92ZShyZWZzW2tleV0sIHJlZik7CiAgICAgIH0gZWxzZSBpZiAocmVmc1trZXldID09PSByZWYpIHsKICAgICAgICByZWZzW2tleV0gPSB1bmRlZmluZWQ7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmICh2bm9kZS5kYXRhLnJlZkluRm9yKSB7CiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHJlZnNba2V5XSkpIHsKICAgICAgICAgIHJlZnNba2V5XSA9IFtyZWZdOwogICAgICAgIH0gZWxzZSBpZiAocmVmc1trZXldLmluZGV4T2YocmVmKSA8IDApIHsKICAgICAgICAgIC8vICRmbG93LWRpc2FibGUtbGluZQogICAgICAgICAgcmVmc1trZXldLnB1c2gocmVmKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVmc1trZXldID0gcmVmOwogICAgICB9CiAgICB9CiAgfQoKICAvKioKICAgKiBWaXJ0dWFsIERPTSBwYXRjaGluZyBhbGdvcml0aG0gYmFzZWQgb24gU25hYmJkb20gYnkKICAgKiBTaW1vbiBGcmlpcyBWaW5kdW0gKEBwYWxkZXBpbmQpCiAgICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlCiAgICogaHR0cHM6Ly9naXRodWIuY29tL3BhbGRlcGluZC9zbmFiYmRvbS9ibG9iL21hc3Rlci9MSUNFTlNFCiAgICoKICAgKiBtb2RpZmllZCBieSBFdmFuIFlvdSAoQHl5eDk5MDgwMykKICAgKgogICAqIE5vdCB0eXBlLWNoZWNraW5nIHRoaXMgYmVjYXVzZSB0aGlzIGZpbGUgaXMgcGVyZi1jcml0aWNhbCBhbmQgdGhlIGNvc3QKICAgKiBvZiBtYWtpbmcgZmxvdyB1bmRlcnN0YW5kIGl0IGlzIG5vdCB3b3J0aCBpdC4KICAgKi8KCiAgdmFyIGVtcHR5Tm9kZSA9IG5ldyBWTm9kZSgnJywge30sIFtdKTsKCiAgdmFyIGhvb2tzID0gWydjcmVhdGUnLCAnYWN0aXZhdGUnLCAndXBkYXRlJywgJ3JlbW92ZScsICdkZXN0cm95J107CgogIGZ1bmN0aW9uIHNhbWVWbm9kZSAoYSwgYikgewogICAgcmV0dXJuICgKICAgICAgYS5rZXkgPT09IGIua2V5ICYmICgKICAgICAgICAoCiAgICAgICAgICBhLnRhZyA9PT0gYi50YWcgJiYKICAgICAgICAgIGEuaXNDb21tZW50ID09PSBiLmlzQ29tbWVudCAmJgogICAgICAgICAgaXNEZWYoYS5kYXRhKSA9PT0gaXNEZWYoYi5kYXRhKSAmJgogICAgICAgICAgc2FtZUlucHV0VHlwZShhLCBiKQogICAgICAgICkgfHwgKAogICAgICAgICAgaXNUcnVlKGEuaXNBc3luY1BsYWNlaG9sZGVyKSAmJgogICAgICAgICAgYS5hc3luY0ZhY3RvcnkgPT09IGIuYXN5bmNGYWN0b3J5ICYmCiAgICAgICAgICBpc1VuZGVmKGIuYXN5bmNGYWN0b3J5LmVycm9yKQogICAgICAgICkKICAgICAgKQogICAgKQogIH0KCiAgZnVuY3Rpb24gc2FtZUlucHV0VHlwZSAoYSwgYikgewogICAgaWYgKGEudGFnICE9PSAnaW5wdXQnKSB7IHJldHVybiB0cnVlIH0KICAgIHZhciBpOwogICAgdmFyIHR5cGVBID0gaXNEZWYoaSA9IGEuZGF0YSkgJiYgaXNEZWYoaSA9IGkuYXR0cnMpICYmIGkudHlwZTsKICAgIHZhciB0eXBlQiA9IGlzRGVmKGkgPSBiLmRhdGEpICYmIGlzRGVmKGkgPSBpLmF0dHJzKSAmJiBpLnR5cGU7CiAgICByZXR1cm4gdHlwZUEgPT09IHR5cGVCIHx8IGlzVGV4dElucHV0VHlwZSh0eXBlQSkgJiYgaXNUZXh0SW5wdXRUeXBlKHR5cGVCKQogIH0KCiAgZnVuY3Rpb24gY3JlYXRlS2V5VG9PbGRJZHggKGNoaWxkcmVuLCBiZWdpbklkeCwgZW5kSWR4KSB7CiAgICB2YXIgaSwga2V5OwogICAgdmFyIG1hcCA9IHt9OwogICAgZm9yIChpID0gYmVnaW5JZHg7IGkgPD0gZW5kSWR4OyArK2kpIHsKICAgICAga2V5ID0gY2hpbGRyZW5baV0ua2V5OwogICAgICBpZiAoaXNEZWYoa2V5KSkgeyBtYXBba2V5XSA9IGk7IH0KICAgIH0KICAgIHJldHVybiBtYXAKICB9CgogIGZ1bmN0aW9uIGNyZWF0ZVBhdGNoRnVuY3Rpb24gKGJhY2tlbmQpIHsKICAgIHZhciBpLCBqOwogICAgdmFyIGNicyA9IHt9OwoKICAgIHZhciBtb2R1bGVzID0gYmFja2VuZC5tb2R1bGVzOwogICAgdmFyIG5vZGVPcHMgPSBiYWNrZW5kLm5vZGVPcHM7CgogICAgZm9yIChpID0gMDsgaSA8IGhvb2tzLmxlbmd0aDsgKytpKSB7CiAgICAgIGNic1tob29rc1tpXV0gPSBbXTsKICAgICAgZm9yIChqID0gMDsgaiA8IG1vZHVsZXMubGVuZ3RoOyArK2opIHsKICAgICAgICBpZiAoaXNEZWYobW9kdWxlc1tqXVtob29rc1tpXV0pKSB7CiAgICAgICAgICBjYnNbaG9va3NbaV1dLnB1c2gobW9kdWxlc1tqXVtob29rc1tpXV0pOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGVtcHR5Tm9kZUF0IChlbG0pIHsKICAgICAgcmV0dXJuIG5ldyBWTm9kZShub2RlT3BzLnRhZ05hbWUoZWxtKS50b0xvd2VyQ2FzZSgpLCB7fSwgW10sIHVuZGVmaW5lZCwgZWxtKQogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZVJtQ2IgKGNoaWxkRWxtLCBsaXN0ZW5lcnMpIHsKICAgICAgZnVuY3Rpb24gcmVtb3ZlJCQxICgpIHsKICAgICAgICBpZiAoLS1yZW1vdmUkJDEubGlzdGVuZXJzID09PSAwKSB7CiAgICAgICAgICByZW1vdmVOb2RlKGNoaWxkRWxtKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmVtb3ZlJCQxLmxpc3RlbmVycyA9IGxpc3RlbmVyczsKICAgICAgcmV0dXJuIHJlbW92ZSQkMQogICAgfQoKICAgIGZ1bmN0aW9uIHJlbW92ZU5vZGUgKGVsKSB7CiAgICAgIHZhciBwYXJlbnQgPSBub2RlT3BzLnBhcmVudE5vZGUoZWwpOwogICAgICAvLyBlbGVtZW50IG1heSBoYXZlIGFscmVhZHkgYmVlbiByZW1vdmVkIGR1ZSB0byB2LWh0bWwgLyB2LXRleHQKICAgICAgaWYgKGlzRGVmKHBhcmVudCkpIHsKICAgICAgICBub2RlT3BzLnJlbW92ZUNoaWxkKHBhcmVudCwgZWwpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gaXNVbmtub3duRWxlbWVudCQkMSAodm5vZGUsIGluVlByZSkgewogICAgICByZXR1cm4gKAogICAgICAgICFpblZQcmUgJiYKICAgICAgICAhdm5vZGUubnMgJiYKICAgICAgICAhKAogICAgICAgICAgY29uZmlnLmlnbm9yZWRFbGVtZW50cy5sZW5ndGggJiYKICAgICAgICAgIGNvbmZpZy5pZ25vcmVkRWxlbWVudHMuc29tZShmdW5jdGlvbiAoaWdub3JlKSB7CiAgICAgICAgICAgIHJldHVybiBpc1JlZ0V4cChpZ25vcmUpCiAgICAgICAgICAgICAgPyBpZ25vcmUudGVzdCh2bm9kZS50YWcpCiAgICAgICAgICAgICAgOiBpZ25vcmUgPT09IHZub2RlLnRhZwogICAgICAgICAgfSkKICAgICAgICApICYmCiAgICAgICAgY29uZmlnLmlzVW5rbm93bkVsZW1lbnQodm5vZGUudGFnKQogICAgICApCiAgICB9CgogICAgdmFyIGNyZWF0aW5nRWxtSW5WUHJlID0gMDsKCiAgICBmdW5jdGlvbiBjcmVhdGVFbG0gKAogICAgICB2bm9kZSwKICAgICAgaW5zZXJ0ZWRWbm9kZVF1ZXVlLAogICAgICBwYXJlbnRFbG0sCiAgICAgIHJlZkVsbSwKICAgICAgbmVzdGVkLAogICAgICBvd25lckFycmF5LAogICAgICBpbmRleAogICAgKSB7CiAgICAgIGlmIChpc0RlZih2bm9kZS5lbG0pICYmIGlzRGVmKG93bmVyQXJyYXkpKSB7CiAgICAgICAgLy8gVGhpcyB2bm9kZSB3YXMgdXNlZCBpbiBhIHByZXZpb3VzIHJlbmRlciEKICAgICAgICAvLyBub3cgaXQncyB1c2VkIGFzIGEgbmV3IG5vZGUsIG92ZXJ3cml0aW5nIGl0cyBlbG0gd291bGQgY2F1c2UKICAgICAgICAvLyBwb3RlbnRpYWwgcGF0Y2ggZXJyb3JzIGRvd24gdGhlIHJvYWQgd2hlbiBpdCdzIHVzZWQgYXMgYW4gaW5zZXJ0aW9uCiAgICAgICAgLy8gcmVmZXJlbmNlIG5vZGUuIEluc3RlYWQsIHdlIGNsb25lIHRoZSBub2RlIG9uLWRlbWFuZCBiZWZvcmUgY3JlYXRpbmcKICAgICAgICAvLyBhc3NvY2lhdGVkIERPTSBlbGVtZW50IGZvciBpdC4KICAgICAgICB2bm9kZSA9IG93bmVyQXJyYXlbaW5kZXhdID0gY2xvbmVWTm9kZSh2bm9kZSk7CiAgICAgIH0KCiAgICAgIHZub2RlLmlzUm9vdEluc2VydCA9ICFuZXN0ZWQ7IC8vIGZvciB0cmFuc2l0aW9uIGVudGVyIGNoZWNrCiAgICAgIGlmIChjcmVhdGVDb21wb25lbnQodm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgcGFyZW50RWxtLCByZWZFbG0pKSB7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIHZhciBkYXRhID0gdm5vZGUuZGF0YTsKICAgICAgdmFyIGNoaWxkcmVuID0gdm5vZGUuY2hpbGRyZW47CiAgICAgIHZhciB0YWcgPSB2bm9kZS50YWc7CiAgICAgIGlmIChpc0RlZih0YWcpKSB7CiAgICAgICAgewogICAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5wcmUpIHsKICAgICAgICAgICAgY3JlYXRpbmdFbG1JblZQcmUrKzsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChpc1Vua25vd25FbGVtZW50JCQxKHZub2RlLCBjcmVhdGluZ0VsbUluVlByZSkpIHsKICAgICAgICAgICAgd2FybigKICAgICAgICAgICAgICAnVW5rbm93biBjdXN0b20gZWxlbWVudDogPCcgKyB0YWcgKyAnPiAtIGRpZCB5b3UgJyArCiAgICAgICAgICAgICAgJ3JlZ2lzdGVyIHRoZSBjb21wb25lbnQgY29ycmVjdGx5PyBGb3IgcmVjdXJzaXZlIGNvbXBvbmVudHMsICcgKwogICAgICAgICAgICAgICdtYWtlIHN1cmUgdG8gcHJvdmlkZSB0aGUgIm5hbWUiIG9wdGlvbi4nLAogICAgICAgICAgICAgIHZub2RlLmNvbnRleHQKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZub2RlLmVsbSA9IHZub2RlLm5zCiAgICAgICAgICA/IG5vZGVPcHMuY3JlYXRlRWxlbWVudE5TKHZub2RlLm5zLCB0YWcpCiAgICAgICAgICA6IG5vZGVPcHMuY3JlYXRlRWxlbWVudCh0YWcsIHZub2RlKTsKICAgICAgICBzZXRTY29wZSh2bm9kZSk7CgogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgICAgIHsKICAgICAgICAgIGNyZWF0ZUNoaWxkcmVuKHZub2RlLCBjaGlsZHJlbiwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTsKICAgICAgICAgIGlmIChpc0RlZihkYXRhKSkgewogICAgICAgICAgICBpbnZva2VDcmVhdGVIb29rcyh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTsKICAgICAgICAgIH0KICAgICAgICAgIGluc2VydChwYXJlbnRFbG0sIHZub2RlLmVsbSwgcmVmRWxtKTsKICAgICAgICB9CgogICAgICAgIGlmIChkYXRhICYmIGRhdGEucHJlKSB7CiAgICAgICAgICBjcmVhdGluZ0VsbUluVlByZS0tOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChpc1RydWUodm5vZGUuaXNDb21tZW50KSkgewogICAgICAgIHZub2RlLmVsbSA9IG5vZGVPcHMuY3JlYXRlQ29tbWVudCh2bm9kZS50ZXh0KTsKICAgICAgICBpbnNlcnQocGFyZW50RWxtLCB2bm9kZS5lbG0sIHJlZkVsbSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdm5vZGUuZWxtID0gbm9kZU9wcy5jcmVhdGVUZXh0Tm9kZSh2bm9kZS50ZXh0KTsKICAgICAgICBpbnNlcnQocGFyZW50RWxtLCB2bm9kZS5lbG0sIHJlZkVsbSk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjcmVhdGVDb21wb25lbnQgKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgcmVmRWxtKSB7CiAgICAgIHZhciBpID0gdm5vZGUuZGF0YTsKICAgICAgaWYgKGlzRGVmKGkpKSB7CiAgICAgICAgdmFyIGlzUmVhY3RpdmF0ZWQgPSBpc0RlZih2bm9kZS5jb21wb25lbnRJbnN0YW5jZSkgJiYgaS5rZWVwQWxpdmU7CiAgICAgICAgaWYgKGlzRGVmKGkgPSBpLmhvb2spICYmIGlzRGVmKGkgPSBpLmluaXQpKSB7CiAgICAgICAgICBpKHZub2RlLCBmYWxzZSAvKiBoeWRyYXRpbmcgKi8pOwogICAgICAgIH0KICAgICAgICAvLyBhZnRlciBjYWxsaW5nIHRoZSBpbml0IGhvb2ssIGlmIHRoZSB2bm9kZSBpcyBhIGNoaWxkIGNvbXBvbmVudAogICAgICAgIC8vIGl0IHNob3VsZCd2ZSBjcmVhdGVkIGEgY2hpbGQgaW5zdGFuY2UgYW5kIG1vdW50ZWQgaXQuIHRoZSBjaGlsZAogICAgICAgIC8vIGNvbXBvbmVudCBhbHNvIGhhcyBzZXQgdGhlIHBsYWNlaG9sZGVyIHZub2RlJ3MgZWxtLgogICAgICAgIC8vIGluIHRoYXQgY2FzZSB3ZSBjYW4ganVzdCByZXR1cm4gdGhlIGVsZW1lbnQgYW5kIGJlIGRvbmUuCiAgICAgICAgaWYgKGlzRGVmKHZub2RlLmNvbXBvbmVudEluc3RhbmNlKSkgewogICAgICAgICAgaW5pdENvbXBvbmVudCh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTsKICAgICAgICAgIGluc2VydChwYXJlbnRFbG0sIHZub2RlLmVsbSwgcmVmRWxtKTsKICAgICAgICAgIGlmIChpc1RydWUoaXNSZWFjdGl2YXRlZCkpIHsKICAgICAgICAgICAgcmVhY3RpdmF0ZUNvbXBvbmVudCh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBwYXJlbnRFbG0sIHJlZkVsbSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGluaXRDb21wb25lbnQgKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpIHsKICAgICAgaWYgKGlzRGVmKHZub2RlLmRhdGEucGVuZGluZ0luc2VydCkpIHsKICAgICAgICBpbnNlcnRlZFZub2RlUXVldWUucHVzaC5hcHBseShpbnNlcnRlZFZub2RlUXVldWUsIHZub2RlLmRhdGEucGVuZGluZ0luc2VydCk7CiAgICAgICAgdm5vZGUuZGF0YS5wZW5kaW5nSW5zZXJ0ID0gbnVsbDsKICAgICAgfQogICAgICB2bm9kZS5lbG0gPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZS4kZWw7CiAgICAgIGlmIChpc1BhdGNoYWJsZSh2bm9kZSkpIHsKICAgICAgICBpbnZva2VDcmVhdGVIb29rcyh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTsKICAgICAgICBzZXRTY29wZSh2bm9kZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gZW1wdHkgY29tcG9uZW50IHJvb3QuCiAgICAgICAgLy8gc2tpcCBhbGwgZWxlbWVudC1yZWxhdGVkIG1vZHVsZXMgZXhjZXB0IGZvciByZWYgKCMzNDU1KQogICAgICAgIHJlZ2lzdGVyUmVmKHZub2RlKTsKICAgICAgICAvLyBtYWtlIHN1cmUgdG8gaW52b2tlIHRoZSBpbnNlcnQgaG9vawogICAgICAgIGluc2VydGVkVm5vZGVRdWV1ZS5wdXNoKHZub2RlKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHJlYWN0aXZhdGVDb21wb25lbnQgKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgcmVmRWxtKSB7CiAgICAgIHZhciBpOwogICAgICAvLyBoYWNrIGZvciAjNDMzOTogYSByZWFjdGl2YXRlZCBjb21wb25lbnQgd2l0aCBpbm5lciB0cmFuc2l0aW9uCiAgICAgIC8vIGRvZXMgbm90IHRyaWdnZXIgYmVjYXVzZSB0aGUgaW5uZXIgbm9kZSdzIGNyZWF0ZWQgaG9va3MgYXJlIG5vdCBjYWxsZWQKICAgICAgLy8gYWdhaW4uIEl0J3Mgbm90IGlkZWFsIHRvIGludm9sdmUgbW9kdWxlLXNwZWNpZmljIGxvZ2ljIGluIGhlcmUgYnV0CiAgICAgIC8vIHRoZXJlIGRvZXNuJ3Qgc2VlbSB0byBiZSBhIGJldHRlciB3YXkgdG8gZG8gaXQuCiAgICAgIHZhciBpbm5lck5vZGUgPSB2bm9kZTsKICAgICAgd2hpbGUgKGlubmVyTm9kZS5jb21wb25lbnRJbnN0YW5jZSkgewogICAgICAgIGlubmVyTm9kZSA9IGlubmVyTm9kZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGU7CiAgICAgICAgaWYgKGlzRGVmKGkgPSBpbm5lck5vZGUuZGF0YSkgJiYgaXNEZWYoaSA9IGkudHJhbnNpdGlvbikpIHsKICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBjYnMuYWN0aXZhdGUubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgY2JzLmFjdGl2YXRlW2ldKGVtcHR5Tm9kZSwgaW5uZXJOb2RlKTsKICAgICAgICAgIH0KICAgICAgICAgIGluc2VydGVkVm5vZGVRdWV1ZS5wdXNoKGlubmVyTm9kZSk7CiAgICAgICAgICBicmVhawogICAgICAgIH0KICAgICAgfQogICAgICAvLyB1bmxpa2UgYSBuZXdseSBjcmVhdGVkIGNvbXBvbmVudCwKICAgICAgLy8gYSByZWFjdGl2YXRlZCBrZWVwLWFsaXZlIGNvbXBvbmVudCBkb2Vzbid0IGluc2VydCBpdHNlbGYKICAgICAgaW5zZXJ0KHBhcmVudEVsbSwgdm5vZGUuZWxtLCByZWZFbG0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGluc2VydCAocGFyZW50LCBlbG0sIHJlZiQkMSkgewogICAgICBpZiAoaXNEZWYocGFyZW50KSkgewogICAgICAgIGlmIChpc0RlZihyZWYkJDEpKSB7CiAgICAgICAgICBpZiAobm9kZU9wcy5wYXJlbnROb2RlKHJlZiQkMSkgPT09IHBhcmVudCkgewogICAgICAgICAgICBub2RlT3BzLmluc2VydEJlZm9yZShwYXJlbnQsIGVsbSwgcmVmJCQxKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgbm9kZU9wcy5hcHBlbmRDaGlsZChwYXJlbnQsIGVsbSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gY3JlYXRlQ2hpbGRyZW4gKHZub2RlLCBjaGlsZHJlbiwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKSB7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KGNoaWxkcmVuKSkgewogICAgICAgIHsKICAgICAgICAgIGNoZWNrRHVwbGljYXRlS2V5cyhjaGlsZHJlbik7CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHsKICAgICAgICAgIGNyZWF0ZUVsbShjaGlsZHJlbltpXSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCB2bm9kZS5lbG0sIG51bGwsIHRydWUsIGNoaWxkcmVuLCBpKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoaXNQcmltaXRpdmUodm5vZGUudGV4dCkpIHsKICAgICAgICBub2RlT3BzLmFwcGVuZENoaWxkKHZub2RlLmVsbSwgbm9kZU9wcy5jcmVhdGVUZXh0Tm9kZShTdHJpbmcodm5vZGUudGV4dCkpKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGlzUGF0Y2hhYmxlICh2bm9kZSkgewogICAgICB3aGlsZSAodm5vZGUuY29tcG9uZW50SW5zdGFuY2UpIHsKICAgICAgICB2bm9kZSA9IHZub2RlLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZTsKICAgICAgfQogICAgICByZXR1cm4gaXNEZWYodm5vZGUudGFnKQogICAgfQoKICAgIGZ1bmN0aW9uIGludm9rZUNyZWF0ZUhvb2tzICh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKSB7CiAgICAgIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IGNicy5jcmVhdGUubGVuZ3RoOyArK2kkMSkgewogICAgICAgIGNicy5jcmVhdGVbaSQxXShlbXB0eU5vZGUsIHZub2RlKTsKICAgICAgfQogICAgICBpID0gdm5vZGUuZGF0YS5ob29rOyAvLyBSZXVzZSB2YXJpYWJsZQogICAgICBpZiAoaXNEZWYoaSkpIHsKICAgICAgICBpZiAoaXNEZWYoaS5jcmVhdGUpKSB7IGkuY3JlYXRlKGVtcHR5Tm9kZSwgdm5vZGUpOyB9CiAgICAgICAgaWYgKGlzRGVmKGkuaW5zZXJ0KSkgeyBpbnNlcnRlZFZub2RlUXVldWUucHVzaCh2bm9kZSk7IH0KICAgICAgfQogICAgfQoKICAgIC8vIHNldCBzY29wZSBpZCBhdHRyaWJ1dGUgZm9yIHNjb3BlZCBDU1MuCiAgICAvLyB0aGlzIGlzIGltcGxlbWVudGVkIGFzIGEgc3BlY2lhbCBjYXNlIHRvIGF2b2lkIHRoZSBvdmVyaGVhZAogICAgLy8gb2YgZ29pbmcgdGhyb3VnaCB0aGUgbm9ybWFsIGF0dHJpYnV0ZSBwYXRjaGluZyBwcm9jZXNzLgogICAgZnVuY3Rpb24gc2V0U2NvcGUgKHZub2RlKSB7CiAgICAgIHZhciBpOwogICAgICBpZiAoaXNEZWYoaSA9IHZub2RlLmZuU2NvcGVJZCkpIHsKICAgICAgICBub2RlT3BzLnNldFN0eWxlU2NvcGUodm5vZGUuZWxtLCBpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgYW5jZXN0b3IgPSB2bm9kZTsKICAgICAgICB3aGlsZSAoYW5jZXN0b3IpIHsKICAgICAgICAgIGlmIChpc0RlZihpID0gYW5jZXN0b3IuY29udGV4dCkgJiYgaXNEZWYoaSA9IGkuJG9wdGlvbnMuX3Njb3BlSWQpKSB7CiAgICAgICAgICAgIG5vZGVPcHMuc2V0U3R5bGVTY29wZSh2bm9kZS5lbG0sIGkpOwogICAgICAgICAgfQogICAgICAgICAgYW5jZXN0b3IgPSBhbmNlc3Rvci5wYXJlbnQ7CiAgICAgICAgfQogICAgICB9CiAgICAgIC8vIGZvciBzbG90IGNvbnRlbnQgdGhleSBzaG91bGQgYWxzbyBnZXQgdGhlIHNjb3BlSWQgZnJvbSB0aGUgaG9zdCBpbnN0YW5jZS4KICAgICAgaWYgKGlzRGVmKGkgPSBhY3RpdmVJbnN0YW5jZSkgJiYKICAgICAgICBpICE9PSB2bm9kZS5jb250ZXh0ICYmCiAgICAgICAgaSAhPT0gdm5vZGUuZm5Db250ZXh0ICYmCiAgICAgICAgaXNEZWYoaSA9IGkuJG9wdGlvbnMuX3Njb3BlSWQpCiAgICAgICkgewogICAgICAgIG5vZGVPcHMuc2V0U3R5bGVTY29wZSh2bm9kZS5lbG0sIGkpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYWRkVm5vZGVzIChwYXJlbnRFbG0sIHJlZkVsbSwgdm5vZGVzLCBzdGFydElkeCwgZW5kSWR4LCBpbnNlcnRlZFZub2RlUXVldWUpIHsKICAgICAgZm9yICg7IHN0YXJ0SWR4IDw9IGVuZElkeDsgKytzdGFydElkeCkgewogICAgICAgIGNyZWF0ZUVsbSh2bm9kZXNbc3RhcnRJZHhdLCBpbnNlcnRlZFZub2RlUXVldWUsIHBhcmVudEVsbSwgcmVmRWxtLCBmYWxzZSwgdm5vZGVzLCBzdGFydElkeCk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBpbnZva2VEZXN0cm95SG9vayAodm5vZGUpIHsKICAgICAgdmFyIGksIGo7CiAgICAgIHZhciBkYXRhID0gdm5vZGUuZGF0YTsKICAgICAgaWYgKGlzRGVmKGRhdGEpKSB7CiAgICAgICAgaWYgKGlzRGVmKGkgPSBkYXRhLmhvb2spICYmIGlzRGVmKGkgPSBpLmRlc3Ryb3kpKSB7IGkodm5vZGUpOyB9CiAgICAgICAgZm9yIChpID0gMDsgaSA8IGNicy5kZXN0cm95Lmxlbmd0aDsgKytpKSB7IGNicy5kZXN0cm95W2ldKHZub2RlKTsgfQogICAgICB9CiAgICAgIGlmIChpc0RlZihpID0gdm5vZGUuY2hpbGRyZW4pKSB7CiAgICAgICAgZm9yIChqID0gMDsgaiA8IHZub2RlLmNoaWxkcmVuLmxlbmd0aDsgKytqKSB7CiAgICAgICAgICBpbnZva2VEZXN0cm95SG9vayh2bm9kZS5jaGlsZHJlbltqXSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcmVtb3ZlVm5vZGVzICh2bm9kZXMsIHN0YXJ0SWR4LCBlbmRJZHgpIHsKICAgICAgZm9yICg7IHN0YXJ0SWR4IDw9IGVuZElkeDsgKytzdGFydElkeCkgewogICAgICAgIHZhciBjaCA9IHZub2Rlc1tzdGFydElkeF07CiAgICAgICAgaWYgKGlzRGVmKGNoKSkgewogICAgICAgICAgaWYgKGlzRGVmKGNoLnRhZykpIHsKICAgICAgICAgICAgcmVtb3ZlQW5kSW52b2tlUmVtb3ZlSG9vayhjaCk7CiAgICAgICAgICAgIGludm9rZURlc3Ryb3lIb29rKGNoKTsKICAgICAgICAgIH0gZWxzZSB7IC8vIFRleHQgbm9kZQogICAgICAgICAgICByZW1vdmVOb2RlKGNoLmVsbSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcmVtb3ZlQW5kSW52b2tlUmVtb3ZlSG9vayAodm5vZGUsIHJtKSB7CiAgICAgIGlmIChpc0RlZihybSkgfHwgaXNEZWYodm5vZGUuZGF0YSkpIHsKICAgICAgICB2YXIgaTsKICAgICAgICB2YXIgbGlzdGVuZXJzID0gY2JzLnJlbW92ZS5sZW5ndGggKyAxOwogICAgICAgIGlmIChpc0RlZihybSkpIHsKICAgICAgICAgIC8vIHdlIGhhdmUgYSByZWN1cnNpdmVseSBwYXNzZWQgZG93biBybSBjYWxsYmFjawogICAgICAgICAgLy8gaW5jcmVhc2UgdGhlIGxpc3RlbmVycyBjb3VudAogICAgICAgICAgcm0ubGlzdGVuZXJzICs9IGxpc3RlbmVyczsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gZGlyZWN0bHkgcmVtb3ZpbmcKICAgICAgICAgIHJtID0gY3JlYXRlUm1DYih2bm9kZS5lbG0sIGxpc3RlbmVycyk7CiAgICAgICAgfQogICAgICAgIC8vIHJlY3Vyc2l2ZWx5IGludm9rZSBob29rcyBvbiBjaGlsZCBjb21wb25lbnQgcm9vdCBub2RlCiAgICAgICAgaWYgKGlzRGVmKGkgPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSkgJiYgaXNEZWYoaSA9IGkuX3Zub2RlKSAmJiBpc0RlZihpLmRhdGEpKSB7CiAgICAgICAgICByZW1vdmVBbmRJbnZva2VSZW1vdmVIb29rKGksIHJtKTsKICAgICAgICB9CiAgICAgICAgZm9yIChpID0gMDsgaSA8IGNicy5yZW1vdmUubGVuZ3RoOyArK2kpIHsKICAgICAgICAgIGNicy5yZW1vdmVbaV0odm5vZGUsIHJtKTsKICAgICAgICB9CiAgICAgICAgaWYgKGlzRGVmKGkgPSB2bm9kZS5kYXRhLmhvb2spICYmIGlzRGVmKGkgPSBpLnJlbW92ZSkpIHsKICAgICAgICAgIGkodm5vZGUsIHJtKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcm0oKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVtb3ZlTm9kZSh2bm9kZS5lbG0pOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlQ2hpbGRyZW4gKHBhcmVudEVsbSwgb2xkQ2gsIG5ld0NoLCBpbnNlcnRlZFZub2RlUXVldWUsIHJlbW92ZU9ubHkpIHsKICAgICAgdmFyIG9sZFN0YXJ0SWR4ID0gMDsKICAgICAgdmFyIG5ld1N0YXJ0SWR4ID0gMDsKICAgICAgdmFyIG9sZEVuZElkeCA9IG9sZENoLmxlbmd0aCAtIDE7CiAgICAgIHZhciBvbGRTdGFydFZub2RlID0gb2xkQ2hbMF07CiAgICAgIHZhciBvbGRFbmRWbm9kZSA9IG9sZENoW29sZEVuZElkeF07CiAgICAgIHZhciBuZXdFbmRJZHggPSBuZXdDaC5sZW5ndGggLSAxOwogICAgICB2YXIgbmV3U3RhcnRWbm9kZSA9IG5ld0NoWzBdOwogICAgICB2YXIgbmV3RW5kVm5vZGUgPSBuZXdDaFtuZXdFbmRJZHhdOwogICAgICB2YXIgb2xkS2V5VG9JZHgsIGlkeEluT2xkLCB2bm9kZVRvTW92ZSwgcmVmRWxtOwoKICAgICAgLy8gcmVtb3ZlT25seSBpcyBhIHNwZWNpYWwgZmxhZyB1c2VkIG9ubHkgYnkgPHRyYW5zaXRpb24tZ3JvdXA+CiAgICAgIC8vIHRvIGVuc3VyZSByZW1vdmVkIGVsZW1lbnRzIHN0YXkgaW4gY29ycmVjdCByZWxhdGl2ZSBwb3NpdGlvbnMKICAgICAgLy8gZHVyaW5nIGxlYXZpbmcgdHJhbnNpdGlvbnMKICAgICAgdmFyIGNhbk1vdmUgPSAhcmVtb3ZlT25seTsKCiAgICAgIHsKICAgICAgICBjaGVja0R1cGxpY2F0ZUtleXMobmV3Q2gpOwogICAgICB9CgogICAgICB3aGlsZSAob2xkU3RhcnRJZHggPD0gb2xkRW5kSWR4ICYmIG5ld1N0YXJ0SWR4IDw9IG5ld0VuZElkeCkgewogICAgICAgIGlmIChpc1VuZGVmKG9sZFN0YXJ0Vm5vZGUpKSB7CiAgICAgICAgICBvbGRTdGFydFZub2RlID0gb2xkQ2hbKytvbGRTdGFydElkeF07IC8vIFZub2RlIGhhcyBiZWVuIG1vdmVkIGxlZnQKICAgICAgICB9IGVsc2UgaWYgKGlzVW5kZWYob2xkRW5kVm5vZGUpKSB7CiAgICAgICAgICBvbGRFbmRWbm9kZSA9IG9sZENoWy0tb2xkRW5kSWR4XTsKICAgICAgICB9IGVsc2UgaWYgKHNhbWVWbm9kZShvbGRTdGFydFZub2RlLCBuZXdTdGFydFZub2RlKSkgewogICAgICAgICAgcGF0Y2hWbm9kZShvbGRTdGFydFZub2RlLCBuZXdTdGFydFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIG5ld0NoLCBuZXdTdGFydElkeCk7CiAgICAgICAgICBvbGRTdGFydFZub2RlID0gb2xkQ2hbKytvbGRTdGFydElkeF07CiAgICAgICAgICBuZXdTdGFydFZub2RlID0gbmV3Q2hbKytuZXdTdGFydElkeF07CiAgICAgICAgfSBlbHNlIGlmIChzYW1lVm5vZGUob2xkRW5kVm5vZGUsIG5ld0VuZFZub2RlKSkgewogICAgICAgICAgcGF0Y2hWbm9kZShvbGRFbmRWbm9kZSwgbmV3RW5kVm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgbmV3Q2gsIG5ld0VuZElkeCk7CiAgICAgICAgICBvbGRFbmRWbm9kZSA9IG9sZENoWy0tb2xkRW5kSWR4XTsKICAgICAgICAgIG5ld0VuZFZub2RlID0gbmV3Q2hbLS1uZXdFbmRJZHhdOwogICAgICAgIH0gZWxzZSBpZiAoc2FtZVZub2RlKG9sZFN0YXJ0Vm5vZGUsIG5ld0VuZFZub2RlKSkgeyAvLyBWbm9kZSBtb3ZlZCByaWdodAogICAgICAgICAgcGF0Y2hWbm9kZShvbGRTdGFydFZub2RlLCBuZXdFbmRWbm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlLCBuZXdDaCwgbmV3RW5kSWR4KTsKICAgICAgICAgIGNhbk1vdmUgJiYgbm9kZU9wcy5pbnNlcnRCZWZvcmUocGFyZW50RWxtLCBvbGRTdGFydFZub2RlLmVsbSwgbm9kZU9wcy5uZXh0U2libGluZyhvbGRFbmRWbm9kZS5lbG0pKTsKICAgICAgICAgIG9sZFN0YXJ0Vm5vZGUgPSBvbGRDaFsrK29sZFN0YXJ0SWR4XTsKICAgICAgICAgIG5ld0VuZFZub2RlID0gbmV3Q2hbLS1uZXdFbmRJZHhdOwogICAgICAgIH0gZWxzZSBpZiAoc2FtZVZub2RlKG9sZEVuZFZub2RlLCBuZXdTdGFydFZub2RlKSkgeyAvLyBWbm9kZSBtb3ZlZCBsZWZ0CiAgICAgICAgICBwYXRjaFZub2RlKG9sZEVuZFZub2RlLCBuZXdTdGFydFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIG5ld0NoLCBuZXdTdGFydElkeCk7CiAgICAgICAgICBjYW5Nb3ZlICYmIG5vZGVPcHMuaW5zZXJ0QmVmb3JlKHBhcmVudEVsbSwgb2xkRW5kVm5vZGUuZWxtLCBvbGRTdGFydFZub2RlLmVsbSk7CiAgICAgICAgICBvbGRFbmRWbm9kZSA9IG9sZENoWy0tb2xkRW5kSWR4XTsKICAgICAgICAgIG5ld1N0YXJ0Vm5vZGUgPSBuZXdDaFsrK25ld1N0YXJ0SWR4XTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKGlzVW5kZWYob2xkS2V5VG9JZHgpKSB7IG9sZEtleVRvSWR4ID0gY3JlYXRlS2V5VG9PbGRJZHgob2xkQ2gsIG9sZFN0YXJ0SWR4LCBvbGRFbmRJZHgpOyB9CiAgICAgICAgICBpZHhJbk9sZCA9IGlzRGVmKG5ld1N0YXJ0Vm5vZGUua2V5KQogICAgICAgICAgICA/IG9sZEtleVRvSWR4W25ld1N0YXJ0Vm5vZGUua2V5XQogICAgICAgICAgICA6IGZpbmRJZHhJbk9sZChuZXdTdGFydFZub2RlLCBvbGRDaCwgb2xkU3RhcnRJZHgsIG9sZEVuZElkeCk7CiAgICAgICAgICBpZiAoaXNVbmRlZihpZHhJbk9sZCkpIHsgLy8gTmV3IGVsZW1lbnQKICAgICAgICAgICAgY3JlYXRlRWxtKG5ld1N0YXJ0Vm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgcGFyZW50RWxtLCBvbGRTdGFydFZub2RlLmVsbSwgZmFsc2UsIG5ld0NoLCBuZXdTdGFydElkeCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2bm9kZVRvTW92ZSA9IG9sZENoW2lkeEluT2xkXTsKICAgICAgICAgICAgaWYgKHNhbWVWbm9kZSh2bm9kZVRvTW92ZSwgbmV3U3RhcnRWbm9kZSkpIHsKICAgICAgICAgICAgICBwYXRjaFZub2RlKHZub2RlVG9Nb3ZlLCBuZXdTdGFydFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIG5ld0NoLCBuZXdTdGFydElkeCk7CiAgICAgICAgICAgICAgb2xkQ2hbaWR4SW5PbGRdID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgIGNhbk1vdmUgJiYgbm9kZU9wcy5pbnNlcnRCZWZvcmUocGFyZW50RWxtLCB2bm9kZVRvTW92ZS5lbG0sIG9sZFN0YXJ0Vm5vZGUuZWxtKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyBzYW1lIGtleSBidXQgZGlmZmVyZW50IGVsZW1lbnQuIHRyZWF0IGFzIG5ldyBlbGVtZW50CiAgICAgICAgICAgICAgY3JlYXRlRWxtKG5ld1N0YXJ0Vm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgcGFyZW50RWxtLCBvbGRTdGFydFZub2RlLmVsbSwgZmFsc2UsIG5ld0NoLCBuZXdTdGFydElkeCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIG5ld1N0YXJ0Vm5vZGUgPSBuZXdDaFsrK25ld1N0YXJ0SWR4XTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKG9sZFN0YXJ0SWR4ID4gb2xkRW5kSWR4KSB7CiAgICAgICAgcmVmRWxtID0gaXNVbmRlZihuZXdDaFtuZXdFbmRJZHggKyAxXSkgPyBudWxsIDogbmV3Q2hbbmV3RW5kSWR4ICsgMV0uZWxtOwogICAgICAgIGFkZFZub2RlcyhwYXJlbnRFbG0sIHJlZkVsbSwgbmV3Q2gsIG5ld1N0YXJ0SWR4LCBuZXdFbmRJZHgsIGluc2VydGVkVm5vZGVRdWV1ZSk7CiAgICAgIH0gZWxzZSBpZiAobmV3U3RhcnRJZHggPiBuZXdFbmRJZHgpIHsKICAgICAgICByZW1vdmVWbm9kZXMob2xkQ2gsIG9sZFN0YXJ0SWR4LCBvbGRFbmRJZHgpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gY2hlY2tEdXBsaWNhdGVLZXlzIChjaGlsZHJlbikgewogICAgICB2YXIgc2VlbktleXMgPSB7fTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciB2bm9kZSA9IGNoaWxkcmVuW2ldOwogICAgICAgIHZhciBrZXkgPSB2bm9kZS5rZXk7CiAgICAgICAgaWYgKGlzRGVmKGtleSkpIHsKICAgICAgICAgIGlmIChzZWVuS2V5c1trZXldKSB7CiAgICAgICAgICAgIHdhcm4oCiAgICAgICAgICAgICAgKCJEdXBsaWNhdGUga2V5cyBkZXRlY3RlZDogJyIgKyBrZXkgKyAiJy4gVGhpcyBtYXkgY2F1c2UgYW4gdXBkYXRlIGVycm9yLiIpLAogICAgICAgICAgICAgIHZub2RlLmNvbnRleHQKICAgICAgICAgICAgKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNlZW5LZXlzW2tleV0gPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGZpbmRJZHhJbk9sZCAobm9kZSwgb2xkQ2gsIHN0YXJ0LCBlbmQpIHsKICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHsKICAgICAgICB2YXIgYyA9IG9sZENoW2ldOwogICAgICAgIGlmIChpc0RlZihjKSAmJiBzYW1lVm5vZGUobm9kZSwgYykpIHsgcmV0dXJuIGkgfQogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcGF0Y2hWbm9kZSAoCiAgICAgIG9sZFZub2RlLAogICAgICB2bm9kZSwKICAgICAgaW5zZXJ0ZWRWbm9kZVF1ZXVlLAogICAgICBvd25lckFycmF5LAogICAgICBpbmRleCwKICAgICAgcmVtb3ZlT25seQogICAgKSB7CiAgICAgIGlmIChvbGRWbm9kZSA9PT0gdm5vZGUpIHsKICAgICAgICByZXR1cm4KICAgICAgfQoKICAgICAgaWYgKGlzRGVmKHZub2RlLmVsbSkgJiYgaXNEZWYob3duZXJBcnJheSkpIHsKICAgICAgICAvLyBjbG9uZSByZXVzZWQgdm5vZGUKICAgICAgICB2bm9kZSA9IG93bmVyQXJyYXlbaW5kZXhdID0gY2xvbmVWTm9kZSh2bm9kZSk7CiAgICAgIH0KCiAgICAgIHZhciBlbG0gPSB2bm9kZS5lbG0gPSBvbGRWbm9kZS5lbG07CgogICAgICBpZiAoaXNUcnVlKG9sZFZub2RlLmlzQXN5bmNQbGFjZWhvbGRlcikpIHsKICAgICAgICBpZiAoaXNEZWYodm5vZGUuYXN5bmNGYWN0b3J5LnJlc29sdmVkKSkgewogICAgICAgICAgaHlkcmF0ZShvbGRWbm9kZS5lbG0sIHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2bm9kZS5pc0FzeW5jUGxhY2Vob2xkZXIgPSB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4KICAgICAgfQoKICAgICAgLy8gcmV1c2UgZWxlbWVudCBmb3Igc3RhdGljIHRyZWVzLgogICAgICAvLyBub3RlIHdlIG9ubHkgZG8gdGhpcyBpZiB0aGUgdm5vZGUgaXMgY2xvbmVkIC0KICAgICAgLy8gaWYgdGhlIG5ldyBub2RlIGlzIG5vdCBjbG9uZWQgaXQgbWVhbnMgdGhlIHJlbmRlciBmdW5jdGlvbnMgaGF2ZSBiZWVuCiAgICAgIC8vIHJlc2V0IGJ5IHRoZSBob3QtcmVsb2FkLWFwaSBhbmQgd2UgbmVlZCB0byBkbyBhIHByb3BlciByZS1yZW5kZXIuCiAgICAgIGlmIChpc1RydWUodm5vZGUuaXNTdGF0aWMpICYmCiAgICAgICAgaXNUcnVlKG9sZFZub2RlLmlzU3RhdGljKSAmJgogICAgICAgIHZub2RlLmtleSA9PT0gb2xkVm5vZGUua2V5ICYmCiAgICAgICAgKGlzVHJ1ZSh2bm9kZS5pc0Nsb25lZCkgfHwgaXNUcnVlKHZub2RlLmlzT25jZSkpCiAgICAgICkgewogICAgICAgIHZub2RlLmNvbXBvbmVudEluc3RhbmNlID0gb2xkVm5vZGUuY29tcG9uZW50SW5zdGFuY2U7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIHZhciBpOwogICAgICB2YXIgZGF0YSA9IHZub2RlLmRhdGE7CiAgICAgIGlmIChpc0RlZihkYXRhKSAmJiBpc0RlZihpID0gZGF0YS5ob29rKSAmJiBpc0RlZihpID0gaS5wcmVwYXRjaCkpIHsKICAgICAgICBpKG9sZFZub2RlLCB2bm9kZSk7CiAgICAgIH0KCiAgICAgIHZhciBvbGRDaCA9IG9sZFZub2RlLmNoaWxkcmVuOwogICAgICB2YXIgY2ggPSB2bm9kZS5jaGlsZHJlbjsKICAgICAgaWYgKGlzRGVmKGRhdGEpICYmIGlzUGF0Y2hhYmxlKHZub2RlKSkgewogICAgICAgIGZvciAoaSA9IDA7IGkgPCBjYnMudXBkYXRlLmxlbmd0aDsgKytpKSB7IGNicy51cGRhdGVbaV0ob2xkVm5vZGUsIHZub2RlKTsgfQogICAgICAgIGlmIChpc0RlZihpID0gZGF0YS5ob29rKSAmJiBpc0RlZihpID0gaS51cGRhdGUpKSB7IGkob2xkVm5vZGUsIHZub2RlKTsgfQogICAgICB9CiAgICAgIGlmIChpc1VuZGVmKHZub2RlLnRleHQpKSB7CiAgICAgICAgaWYgKGlzRGVmKG9sZENoKSAmJiBpc0RlZihjaCkpIHsKICAgICAgICAgIGlmIChvbGRDaCAhPT0gY2gpIHsgdXBkYXRlQ2hpbGRyZW4oZWxtLCBvbGRDaCwgY2gsIGluc2VydGVkVm5vZGVRdWV1ZSwgcmVtb3ZlT25seSk7IH0KICAgICAgICB9IGVsc2UgaWYgKGlzRGVmKGNoKSkgewogICAgICAgICAgewogICAgICAgICAgICBjaGVja0R1cGxpY2F0ZUtleXMoY2gpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGlzRGVmKG9sZFZub2RlLnRleHQpKSB7IG5vZGVPcHMuc2V0VGV4dENvbnRlbnQoZWxtLCAnJyk7IH0KICAgICAgICAgIGFkZFZub2RlcyhlbG0sIG51bGwsIGNoLCAwLCBjaC5sZW5ndGggLSAxLCBpbnNlcnRlZFZub2RlUXVldWUpOwogICAgICAgIH0gZWxzZSBpZiAoaXNEZWYob2xkQ2gpKSB7CiAgICAgICAgICByZW1vdmVWbm9kZXMob2xkQ2gsIDAsIG9sZENoLmxlbmd0aCAtIDEpOwogICAgICAgIH0gZWxzZSBpZiAoaXNEZWYob2xkVm5vZGUudGV4dCkpIHsKICAgICAgICAgIG5vZGVPcHMuc2V0VGV4dENvbnRlbnQoZWxtLCAnJyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKG9sZFZub2RlLnRleHQgIT09IHZub2RlLnRleHQpIHsKICAgICAgICBub2RlT3BzLnNldFRleHRDb250ZW50KGVsbSwgdm5vZGUudGV4dCk7CiAgICAgIH0KICAgICAgaWYgKGlzRGVmKGRhdGEpKSB7CiAgICAgICAgaWYgKGlzRGVmKGkgPSBkYXRhLmhvb2spICYmIGlzRGVmKGkgPSBpLnBvc3RwYXRjaCkpIHsgaShvbGRWbm9kZSwgdm5vZGUpOyB9CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBpbnZva2VJbnNlcnRIb29rICh2bm9kZSwgcXVldWUsIGluaXRpYWwpIHsKICAgICAgLy8gZGVsYXkgaW5zZXJ0IGhvb2tzIGZvciBjb21wb25lbnQgcm9vdCBub2RlcywgaW52b2tlIHRoZW0gYWZ0ZXIgdGhlCiAgICAgIC8vIGVsZW1lbnQgaXMgcmVhbGx5IGluc2VydGVkCiAgICAgIGlmIChpc1RydWUoaW5pdGlhbCkgJiYgaXNEZWYodm5vZGUucGFyZW50KSkgewogICAgICAgIHZub2RlLnBhcmVudC5kYXRhLnBlbmRpbmdJbnNlcnQgPSBxdWV1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICBxdWV1ZVtpXS5kYXRhLmhvb2suaW5zZXJ0KHF1ZXVlW2ldKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICB2YXIgaHlkcmF0aW9uQmFpbGVkID0gZmFsc2U7CiAgICAvLyBsaXN0IG9mIG1vZHVsZXMgdGhhdCBjYW4gc2tpcCBjcmVhdGUgaG9vayBkdXJpbmcgaHlkcmF0aW9uIGJlY2F1c2UgdGhleQogICAgLy8gYXJlIGFscmVhZHkgcmVuZGVyZWQgb24gdGhlIGNsaWVudCBvciBoYXMgbm8gbmVlZCBmb3IgaW5pdGlhbGl6YXRpb24KICAgIC8vIE5vdGU6IHN0eWxlIGlzIGV4Y2x1ZGVkIGJlY2F1c2UgaXQgcmVsaWVzIG9uIGluaXRpYWwgY2xvbmUgZm9yIGZ1dHVyZQogICAgLy8gZGVlcCB1cGRhdGVzICgjNzA2MykuCiAgICB2YXIgaXNSZW5kZXJlZE1vZHVsZSA9IG1ha2VNYXAoJ2F0dHJzLGNsYXNzLHN0YXRpY0NsYXNzLHN0YXRpY1N0eWxlLGtleScpOwoKICAgIC8vIE5vdGU6IHRoaXMgaXMgYSBicm93c2VyLW9ubHkgZnVuY3Rpb24gc28gd2UgY2FuIGFzc3VtZSBlbG1zIGFyZSBET00gbm9kZXMuCiAgICBmdW5jdGlvbiBoeWRyYXRlIChlbG0sIHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIGluVlByZSkgewogICAgICB2YXIgaTsKICAgICAgdmFyIHRhZyA9IHZub2RlLnRhZzsKICAgICAgdmFyIGRhdGEgPSB2bm9kZS5kYXRhOwogICAgICB2YXIgY2hpbGRyZW4gPSB2bm9kZS5jaGlsZHJlbjsKICAgICAgaW5WUHJlID0gaW5WUHJlIHx8IChkYXRhICYmIGRhdGEucHJlKTsKICAgICAgdm5vZGUuZWxtID0gZWxtOwoKICAgICAgaWYgKGlzVHJ1ZSh2bm9kZS5pc0NvbW1lbnQpICYmIGlzRGVmKHZub2RlLmFzeW5jRmFjdG9yeSkpIHsKICAgICAgICB2bm9kZS5pc0FzeW5jUGxhY2Vob2xkZXIgPSB0cnVlOwogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgICAgLy8gYXNzZXJ0IG5vZGUgbWF0Y2gKICAgICAgewogICAgICAgIGlmICghYXNzZXJ0Tm9kZU1hdGNoKGVsbSwgdm5vZGUsIGluVlByZSkpIHsKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoaXNEZWYoZGF0YSkpIHsKICAgICAgICBpZiAoaXNEZWYoaSA9IGRhdGEuaG9vaykgJiYgaXNEZWYoaSA9IGkuaW5pdCkpIHsgaSh2bm9kZSwgdHJ1ZSAvKiBoeWRyYXRpbmcgKi8pOyB9CiAgICAgICAgaWYgKGlzRGVmKGkgPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSkpIHsKICAgICAgICAgIC8vIGNoaWxkIGNvbXBvbmVudC4gaXQgc2hvdWxkIGhhdmUgaHlkcmF0ZWQgaXRzIG93biB0cmVlLgogICAgICAgICAgaW5pdENvbXBvbmVudCh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTsKICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChpc0RlZih0YWcpKSB7CiAgICAgICAgaWYgKGlzRGVmKGNoaWxkcmVuKSkgewogICAgICAgICAgLy8gZW1wdHkgZWxlbWVudCwgYWxsb3cgY2xpZW50IHRvIHBpY2sgdXAgYW5kIHBvcHVsYXRlIGNoaWxkcmVuCiAgICAgICAgICBpZiAoIWVsbS5oYXNDaGlsZE5vZGVzKCkpIHsKICAgICAgICAgICAgY3JlYXRlQ2hpbGRyZW4odm5vZGUsIGNoaWxkcmVuLCBpbnNlcnRlZFZub2RlUXVldWUpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gdi1odG1sIGFuZCBkb21Qcm9wczogaW5uZXJIVE1MCiAgICAgICAgICAgIGlmIChpc0RlZihpID0gZGF0YSkgJiYgaXNEZWYoaSA9IGkuZG9tUHJvcHMpICYmIGlzRGVmKGkgPSBpLmlubmVySFRNTCkpIHsKICAgICAgICAgICAgICBpZiAoaSAhPT0gZWxtLmlubmVySFRNTCkgewogICAgICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmCiAgICAgICAgICAgICAgICAgICFoeWRyYXRpb25CYWlsZWQKICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICBoeWRyYXRpb25CYWlsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1BhcmVudDogJywgZWxtKTsKICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdzZXJ2ZXIgaW5uZXJIVE1MOiAnLCBpKTsKICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdjbGllbnQgaW5uZXJIVE1MOiAnLCBlbG0uaW5uZXJIVE1MKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyBpdGVyYXRlIGFuZCBjb21wYXJlIGNoaWxkcmVuIGxpc3RzCiAgICAgICAgICAgICAgdmFyIGNoaWxkcmVuTWF0Y2ggPSB0cnVlOwogICAgICAgICAgICAgIHZhciBjaGlsZE5vZGUgPSBlbG0uZmlyc3RDaGlsZDsKICAgICAgICAgICAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBjaGlsZHJlbi5sZW5ndGg7IGkkMSsrKSB7CiAgICAgICAgICAgICAgICBpZiAoIWNoaWxkTm9kZSB8fCAhaHlkcmF0ZShjaGlsZE5vZGUsIGNoaWxkcmVuW2kkMV0sIGluc2VydGVkVm5vZGVRdWV1ZSwgaW5WUHJlKSkgewogICAgICAgICAgICAgICAgICBjaGlsZHJlbk1hdGNoID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjaGlsZE5vZGUgPSBjaGlsZE5vZGUubmV4dFNpYmxpbmc7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIC8vIGlmIGNoaWxkTm9kZSBpcyBub3QgbnVsbCwgaXQgbWVhbnMgdGhlIGFjdHVhbCBjaGlsZE5vZGVzIGxpc3QgaXMKICAgICAgICAgICAgICAvLyBsb25nZXIgdGhhbiB0aGUgdmlydHVhbCBjaGlsZHJlbiBsaXN0LgogICAgICAgICAgICAgIGlmICghY2hpbGRyZW5NYXRjaCB8fCBjaGlsZE5vZGUpIHsKICAgICAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJgogICAgICAgICAgICAgICAgICAhaHlkcmF0aW9uQmFpbGVkCiAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgaHlkcmF0aW9uQmFpbGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdQYXJlbnQ6ICcsIGVsbSk7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignTWlzbWF0Y2hpbmcgY2hpbGROb2RlcyB2cy4gVk5vZGVzOiAnLCBlbG0uY2hpbGROb2RlcywgY2hpbGRyZW4pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChpc0RlZihkYXRhKSkgewogICAgICAgICAgdmFyIGZ1bGxJbnZva2UgPSBmYWxzZTsKICAgICAgICAgIGZvciAodmFyIGtleSBpbiBkYXRhKSB7CiAgICAgICAgICAgIGlmICghaXNSZW5kZXJlZE1vZHVsZShrZXkpKSB7CiAgICAgICAgICAgICAgZnVsbEludm9rZSA9IHRydWU7CiAgICAgICAgICAgICAgaW52b2tlQ3JlYXRlSG9va3Modm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7CiAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKCFmdWxsSW52b2tlICYmIGRhdGFbJ2NsYXNzJ10pIHsKICAgICAgICAgICAgLy8gZW5zdXJlIGNvbGxlY3RpbmcgZGVwcyBmb3IgZGVlcCBjbGFzcyBiaW5kaW5ncyBmb3IgZnV0dXJlIHVwZGF0ZXMKICAgICAgICAgICAgdHJhdmVyc2UoZGF0YVsnY2xhc3MnXSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGVsbS5kYXRhICE9PSB2bm9kZS50ZXh0KSB7CiAgICAgICAgZWxtLmRhdGEgPSB2bm9kZS50ZXh0OwogICAgICB9CiAgICAgIHJldHVybiB0cnVlCiAgICB9CgogICAgZnVuY3Rpb24gYXNzZXJ0Tm9kZU1hdGNoIChub2RlLCB2bm9kZSwgaW5WUHJlKSB7CiAgICAgIGlmIChpc0RlZih2bm9kZS50YWcpKSB7CiAgICAgICAgcmV0dXJuIHZub2RlLnRhZy5pbmRleE9mKCd2dWUtY29tcG9uZW50JykgPT09IDAgfHwgKAogICAgICAgICAgIWlzVW5rbm93bkVsZW1lbnQkJDEodm5vZGUsIGluVlByZSkgJiYKICAgICAgICAgIHZub2RlLnRhZy50b0xvd2VyQ2FzZSgpID09PSAobm9kZS50YWdOYW1lICYmIG5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpKQogICAgICAgICkKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbm9kZS5ub2RlVHlwZSA9PT0gKHZub2RlLmlzQ29tbWVudCA/IDggOiAzKQogICAgICB9CiAgICB9CgogICAgcmV0dXJuIGZ1bmN0aW9uIHBhdGNoIChvbGRWbm9kZSwgdm5vZGUsIGh5ZHJhdGluZywgcmVtb3ZlT25seSkgewogICAgICBpZiAoaXNVbmRlZih2bm9kZSkpIHsKICAgICAgICBpZiAoaXNEZWYob2xkVm5vZGUpKSB7IGludm9rZURlc3Ryb3lIb29rKG9sZFZub2RlKTsgfQogICAgICAgIHJldHVybgogICAgICB9CgogICAgICB2YXIgaXNJbml0aWFsUGF0Y2ggPSBmYWxzZTsKICAgICAgdmFyIGluc2VydGVkVm5vZGVRdWV1ZSA9IFtdOwoKICAgICAgaWYgKGlzVW5kZWYob2xkVm5vZGUpKSB7CiAgICAgICAgLy8gZW1wdHkgbW91bnQgKGxpa2VseSBhcyBjb21wb25lbnQpLCBjcmVhdGUgbmV3IHJvb3QgZWxlbWVudAogICAgICAgIGlzSW5pdGlhbFBhdGNoID0gdHJ1ZTsKICAgICAgICBjcmVhdGVFbG0odm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGlzUmVhbEVsZW1lbnQgPSBpc0RlZihvbGRWbm9kZS5ub2RlVHlwZSk7CiAgICAgICAgaWYgKCFpc1JlYWxFbGVtZW50ICYmIHNhbWVWbm9kZShvbGRWbm9kZSwgdm5vZGUpKSB7CiAgICAgICAgICAvLyBwYXRjaCBleGlzdGluZyByb290IG5vZGUKICAgICAgICAgIHBhdGNoVm5vZGUob2xkVm5vZGUsIHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIG51bGwsIG51bGwsIHJlbW92ZU9ubHkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoaXNSZWFsRWxlbWVudCkgewogICAgICAgICAgICAvLyBtb3VudGluZyB0byBhIHJlYWwgZWxlbWVudAogICAgICAgICAgICAvLyBjaGVjayBpZiB0aGlzIGlzIHNlcnZlci1yZW5kZXJlZCBjb250ZW50IGFuZCBpZiB3ZSBjYW4gcGVyZm9ybQogICAgICAgICAgICAvLyBhIHN1Y2Nlc3NmdWwgaHlkcmF0aW9uLgogICAgICAgICAgICBpZiAob2xkVm5vZGUubm9kZVR5cGUgPT09IDEgJiYgb2xkVm5vZGUuaGFzQXR0cmlidXRlKFNTUl9BVFRSKSkgewogICAgICAgICAgICAgIG9sZFZub2RlLnJlbW92ZUF0dHJpYnV0ZShTU1JfQVRUUik7CiAgICAgICAgICAgICAgaHlkcmF0aW5nID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaXNUcnVlKGh5ZHJhdGluZykpIHsKICAgICAgICAgICAgICBpZiAoaHlkcmF0ZShvbGRWbm9kZSwgdm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSkpIHsKICAgICAgICAgICAgICAgIGludm9rZUluc2VydEhvb2sodm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gb2xkVm5vZGUKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgd2FybigKICAgICAgICAgICAgICAgICAgJ1RoZSBjbGllbnQtc2lkZSByZW5kZXJlZCB2aXJ0dWFsIERPTSB0cmVlIGlzIG5vdCBtYXRjaGluZyAnICsKICAgICAgICAgICAgICAgICAgJ3NlcnZlci1yZW5kZXJlZCBjb250ZW50LiBUaGlzIGlzIGxpa2VseSBjYXVzZWQgYnkgaW5jb3JyZWN0ICcgKwogICAgICAgICAgICAgICAgICAnSFRNTCBtYXJrdXAsIGZvciBleGFtcGxlIG5lc3RpbmcgYmxvY2stbGV2ZWwgZWxlbWVudHMgaW5zaWRlICcgKwogICAgICAgICAgICAgICAgICAnPHA+LCBvciBtaXNzaW5nIDx0Ym9keT4uIEJhaWxpbmcgaHlkcmF0aW9uIGFuZCBwZXJmb3JtaW5nICcgKwogICAgICAgICAgICAgICAgICAnZnVsbCBjbGllbnQtc2lkZSByZW5kZXIuJwogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gZWl0aGVyIG5vdCBzZXJ2ZXItcmVuZGVyZWQsIG9yIGh5ZHJhdGlvbiBmYWlsZWQuCiAgICAgICAgICAgIC8vIGNyZWF0ZSBhbiBlbXB0eSBub2RlIGFuZCByZXBsYWNlIGl0CiAgICAgICAgICAgIG9sZFZub2RlID0gZW1wdHlOb2RlQXQob2xkVm5vZGUpOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIHJlcGxhY2luZyBleGlzdGluZyBlbGVtZW50CiAgICAgICAgICB2YXIgb2xkRWxtID0gb2xkVm5vZGUuZWxtOwogICAgICAgICAgdmFyIHBhcmVudEVsbSA9IG5vZGVPcHMucGFyZW50Tm9kZShvbGRFbG0pOwoKICAgICAgICAgIC8vIGNyZWF0ZSBuZXcgbm9kZQogICAgICAgICAgY3JlYXRlRWxtKAogICAgICAgICAgICB2bm9kZSwKICAgICAgICAgICAgaW5zZXJ0ZWRWbm9kZVF1ZXVlLAogICAgICAgICAgICAvLyBleHRyZW1lbHkgcmFyZSBlZGdlIGNhc2U6IGRvIG5vdCBpbnNlcnQgaWYgb2xkIGVsZW1lbnQgaXMgaW4gYQogICAgICAgICAgICAvLyBsZWF2aW5nIHRyYW5zaXRpb24uIE9ubHkgaGFwcGVucyB3aGVuIGNvbWJpbmluZyB0cmFuc2l0aW9uICsKICAgICAgICAgICAgLy8ga2VlcC1hbGl2ZSArIEhPQ3MuICgjNDU5MCkKICAgICAgICAgICAgb2xkRWxtLl9sZWF2ZUNiID8gbnVsbCA6IHBhcmVudEVsbSwKICAgICAgICAgICAgbm9kZU9wcy5uZXh0U2libGluZyhvbGRFbG0pCiAgICAgICAgICApOwoKICAgICAgICAgIC8vIHVwZGF0ZSBwYXJlbnQgcGxhY2Vob2xkZXIgbm9kZSBlbGVtZW50LCByZWN1cnNpdmVseQogICAgICAgICAgaWYgKGlzRGVmKHZub2RlLnBhcmVudCkpIHsKICAgICAgICAgICAgdmFyIGFuY2VzdG9yID0gdm5vZGUucGFyZW50OwogICAgICAgICAgICB2YXIgcGF0Y2hhYmxlID0gaXNQYXRjaGFibGUodm5vZGUpOwogICAgICAgICAgICB3aGlsZSAoYW5jZXN0b3IpIHsKICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNicy5kZXN0cm95Lmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgICAgICBjYnMuZGVzdHJveVtpXShhbmNlc3Rvcik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGFuY2VzdG9yLmVsbSA9IHZub2RlLmVsbTsKICAgICAgICAgICAgICBpZiAocGF0Y2hhYmxlKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBjYnMuY3JlYXRlLmxlbmd0aDsgKytpJDEpIHsKICAgICAgICAgICAgICAgICAgY2JzLmNyZWF0ZVtpJDFdKGVtcHR5Tm9kZSwgYW5jZXN0b3IpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gIzY1MTMKICAgICAgICAgICAgICAgIC8vIGludm9rZSBpbnNlcnQgaG9va3MgdGhhdCBtYXkgaGF2ZSBiZWVuIG1lcmdlZCBieSBjcmVhdGUgaG9va3MuCiAgICAgICAgICAgICAgICAvLyBlLmcuIGZvciBkaXJlY3RpdmVzIHRoYXQgdXNlcyB0aGUgImluc2VydGVkIiBob29rLgogICAgICAgICAgICAgICAgdmFyIGluc2VydCA9IGFuY2VzdG9yLmRhdGEuaG9vay5pbnNlcnQ7CiAgICAgICAgICAgICAgICBpZiAoaW5zZXJ0Lm1lcmdlZCkgewogICAgICAgICAgICAgICAgICAvLyBzdGFydCBhdCBpbmRleCAxIHRvIGF2b2lkIHJlLWludm9raW5nIGNvbXBvbmVudCBtb3VudGVkIGhvb2sKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSQyID0gMTsgaSQyIDwgaW5zZXJ0LmZucy5sZW5ndGg7IGkkMisrKSB7CiAgICAgICAgICAgICAgICAgICAgaW5zZXJ0LmZuc1tpJDJdKCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmVnaXN0ZXJSZWYoYW5jZXN0b3IpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBhbmNlc3RvciA9IGFuY2VzdG9yLnBhcmVudDsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIC8vIGRlc3Ryb3kgb2xkIG5vZGUKICAgICAgICAgIGlmIChpc0RlZihwYXJlbnRFbG0pKSB7CiAgICAgICAgICAgIHJlbW92ZVZub2Rlcyhbb2xkVm5vZGVdLCAwLCAwKTsKICAgICAgICAgIH0gZWxzZSBpZiAoaXNEZWYob2xkVm5vZGUudGFnKSkgewogICAgICAgICAgICBpbnZva2VEZXN0cm95SG9vayhvbGRWbm9kZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpbnZva2VJbnNlcnRIb29rKHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUsIGlzSW5pdGlhbFBhdGNoKTsKICAgICAgcmV0dXJuIHZub2RlLmVsbQogICAgfQogIH0KCiAgLyogICovCgogIHZhciBkaXJlY3RpdmVzID0gewogICAgY3JlYXRlOiB1cGRhdGVEaXJlY3RpdmVzLAogICAgdXBkYXRlOiB1cGRhdGVEaXJlY3RpdmVzLAogICAgZGVzdHJveTogZnVuY3Rpb24gdW5iaW5kRGlyZWN0aXZlcyAodm5vZGUpIHsKICAgICAgdXBkYXRlRGlyZWN0aXZlcyh2bm9kZSwgZW1wdHlOb2RlKTsKICAgIH0KICB9OwoKICBmdW5jdGlvbiB1cGRhdGVEaXJlY3RpdmVzIChvbGRWbm9kZSwgdm5vZGUpIHsKICAgIGlmIChvbGRWbm9kZS5kYXRhLmRpcmVjdGl2ZXMgfHwgdm5vZGUuZGF0YS5kaXJlY3RpdmVzKSB7CiAgICAgIF91cGRhdGUob2xkVm5vZGUsIHZub2RlKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIF91cGRhdGUgKG9sZFZub2RlLCB2bm9kZSkgewogICAgdmFyIGlzQ3JlYXRlID0gb2xkVm5vZGUgPT09IGVtcHR5Tm9kZTsKICAgIHZhciBpc0Rlc3Ryb3kgPSB2bm9kZSA9PT0gZW1wdHlOb2RlOwogICAgdmFyIG9sZERpcnMgPSBub3JtYWxpemVEaXJlY3RpdmVzJDEob2xkVm5vZGUuZGF0YS5kaXJlY3RpdmVzLCBvbGRWbm9kZS5jb250ZXh0KTsKICAgIHZhciBuZXdEaXJzID0gbm9ybWFsaXplRGlyZWN0aXZlcyQxKHZub2RlLmRhdGEuZGlyZWN0aXZlcywgdm5vZGUuY29udGV4dCk7CgogICAgdmFyIGRpcnNXaXRoSW5zZXJ0ID0gW107CiAgICB2YXIgZGlyc1dpdGhQb3N0cGF0Y2ggPSBbXTsKCiAgICB2YXIga2V5LCBvbGREaXIsIGRpcjsKICAgIGZvciAoa2V5IGluIG5ld0RpcnMpIHsKICAgICAgb2xkRGlyID0gb2xkRGlyc1trZXldOwogICAgICBkaXIgPSBuZXdEaXJzW2tleV07CiAgICAgIGlmICghb2xkRGlyKSB7CiAgICAgICAgLy8gbmV3IGRpcmVjdGl2ZSwgYmluZAogICAgICAgIGNhbGxIb29rJDEoZGlyLCAnYmluZCcsIHZub2RlLCBvbGRWbm9kZSk7CiAgICAgICAgaWYgKGRpci5kZWYgJiYgZGlyLmRlZi5pbnNlcnRlZCkgewogICAgICAgICAgZGlyc1dpdGhJbnNlcnQucHVzaChkaXIpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBleGlzdGluZyBkaXJlY3RpdmUsIHVwZGF0ZQogICAgICAgIGRpci5vbGRWYWx1ZSA9IG9sZERpci52YWx1ZTsKICAgICAgICBkaXIub2xkQXJnID0gb2xkRGlyLmFyZzsKICAgICAgICBjYWxsSG9vayQxKGRpciwgJ3VwZGF0ZScsIHZub2RlLCBvbGRWbm9kZSk7CiAgICAgICAgaWYgKGRpci5kZWYgJiYgZGlyLmRlZi5jb21wb25lbnRVcGRhdGVkKSB7CiAgICAgICAgICBkaXJzV2l0aFBvc3RwYXRjaC5wdXNoKGRpcik7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgaWYgKGRpcnNXaXRoSW5zZXJ0Lmxlbmd0aCkgewogICAgICB2YXIgY2FsbEluc2VydCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpcnNXaXRoSW5zZXJ0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBjYWxsSG9vayQxKGRpcnNXaXRoSW5zZXJ0W2ldLCAnaW5zZXJ0ZWQnLCB2bm9kZSwgb2xkVm5vZGUpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgaWYgKGlzQ3JlYXRlKSB7CiAgICAgICAgbWVyZ2VWTm9kZUhvb2sodm5vZGUsICdpbnNlcnQnLCBjYWxsSW5zZXJ0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsSW5zZXJ0KCk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoZGlyc1dpdGhQb3N0cGF0Y2gubGVuZ3RoKSB7CiAgICAgIG1lcmdlVk5vZGVIb29rKHZub2RlLCAncG9zdHBhdGNoJywgZnVuY3Rpb24gKCkgewogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGlyc1dpdGhQb3N0cGF0Y2gubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGNhbGxIb29rJDEoZGlyc1dpdGhQb3N0cGF0Y2hbaV0sICdjb21wb25lbnRVcGRhdGVkJywgdm5vZGUsIG9sZFZub2RlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIGlmICghaXNDcmVhdGUpIHsKICAgICAgZm9yIChrZXkgaW4gb2xkRGlycykgewogICAgICAgIGlmICghbmV3RGlyc1trZXldKSB7CiAgICAgICAgICAvLyBubyBsb25nZXIgcHJlc2VudCwgdW5iaW5kCiAgICAgICAgICBjYWxsSG9vayQxKG9sZERpcnNba2V5XSwgJ3VuYmluZCcsIG9sZFZub2RlLCBvbGRWbm9kZSwgaXNEZXN0cm95KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIHZhciBlbXB0eU1vZGlmaWVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7CgogIGZ1bmN0aW9uIG5vcm1hbGl6ZURpcmVjdGl2ZXMkMSAoCiAgICBkaXJzLAogICAgdm0KICApIHsKICAgIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgaWYgKCFkaXJzKSB7CiAgICAgIC8vICRmbG93LWRpc2FibGUtbGluZQogICAgICByZXR1cm4gcmVzCiAgICB9CiAgICB2YXIgaSwgZGlyOwogICAgZm9yIChpID0gMDsgaSA8IGRpcnMubGVuZ3RoOyBpKyspIHsKICAgICAgZGlyID0gZGlyc1tpXTsKICAgICAgaWYgKCFkaXIubW9kaWZpZXJzKSB7CiAgICAgICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lCiAgICAgICAgZGlyLm1vZGlmaWVycyA9IGVtcHR5TW9kaWZpZXJzOwogICAgICB9CiAgICAgIHJlc1tnZXRSYXdEaXJOYW1lKGRpcildID0gZGlyOwogICAgICBkaXIuZGVmID0gcmVzb2x2ZUFzc2V0KHZtLiRvcHRpb25zLCAnZGlyZWN0aXZlcycsIGRpci5uYW1lLCB0cnVlKTsKICAgIH0KICAgIC8vICRmbG93LWRpc2FibGUtbGluZQogICAgcmV0dXJuIHJlcwogIH0KCiAgZnVuY3Rpb24gZ2V0UmF3RGlyTmFtZSAoZGlyKSB7CiAgICByZXR1cm4gZGlyLnJhd05hbWUgfHwgKChkaXIubmFtZSkgKyAiLiIgKyAoT2JqZWN0LmtleXMoZGlyLm1vZGlmaWVycyB8fCB7fSkuam9pbignLicpKSkKICB9CgogIGZ1bmN0aW9uIGNhbGxIb29rJDEgKGRpciwgaG9vaywgdm5vZGUsIG9sZFZub2RlLCBpc0Rlc3Ryb3kpIHsKICAgIHZhciBmbiA9IGRpci5kZWYgJiYgZGlyLmRlZltob29rXTsKICAgIGlmIChmbikgewogICAgICB0cnkgewogICAgICAgIGZuKHZub2RlLmVsbSwgZGlyLCB2bm9kZSwgb2xkVm5vZGUsIGlzRGVzdHJveSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBoYW5kbGVFcnJvcihlLCB2bm9kZS5jb250ZXh0LCAoImRpcmVjdGl2ZSAiICsgKGRpci5uYW1lKSArICIgIiArIGhvb2sgKyAiIGhvb2siKSk7CiAgICAgIH0KICAgIH0KICB9CgogIHZhciBiYXNlTW9kdWxlcyA9IFsKICAgIHJlZiwKICAgIGRpcmVjdGl2ZXMKICBdOwoKICAvKiAgKi8KCiAgZnVuY3Rpb24gdXBkYXRlQXR0cnMgKG9sZFZub2RlLCB2bm9kZSkgewogICAgdmFyIG9wdHMgPSB2bm9kZS5jb21wb25lbnRPcHRpb25zOwogICAgaWYgKGlzRGVmKG9wdHMpICYmIG9wdHMuQ3Rvci5vcHRpb25zLmluaGVyaXRBdHRycyA9PT0gZmFsc2UpIHsKICAgICAgcmV0dXJuCiAgICB9CiAgICBpZiAoaXNVbmRlZihvbGRWbm9kZS5kYXRhLmF0dHJzKSAmJiBpc1VuZGVmKHZub2RlLmRhdGEuYXR0cnMpKSB7CiAgICAgIHJldHVybgogICAgfQogICAgdmFyIGtleSwgY3VyLCBvbGQ7CiAgICB2YXIgZWxtID0gdm5vZGUuZWxtOwogICAgdmFyIG9sZEF0dHJzID0gb2xkVm5vZGUuZGF0YS5hdHRycyB8fCB7fTsKICAgIHZhciBhdHRycyA9IHZub2RlLmRhdGEuYXR0cnMgfHwge307CiAgICAvLyBjbG9uZSBvYnNlcnZlZCBvYmplY3RzLCBhcyB0aGUgdXNlciBwcm9iYWJseSB3YW50cyB0byBtdXRhdGUgaXQKICAgIGlmIChpc0RlZihhdHRycy5fX29iX18pKSB7CiAgICAgIGF0dHJzID0gdm5vZGUuZGF0YS5hdHRycyA9IGV4dGVuZCh7fSwgYXR0cnMpOwogICAgfQoKICAgIGZvciAoa2V5IGluIGF0dHJzKSB7CiAgICAgIGN1ciA9IGF0dHJzW2tleV07CiAgICAgIG9sZCA9IG9sZEF0dHJzW2tleV07CiAgICAgIGlmIChvbGQgIT09IGN1cikgewogICAgICAgIHNldEF0dHIoZWxtLCBrZXksIGN1cik7CiAgICAgIH0KICAgIH0KICAgIC8vICM0MzkxOiBpbiBJRTksIHNldHRpbmcgdHlwZSBjYW4gcmVzZXQgdmFsdWUgZm9yIGlucHV0W3R5cGU9cmFkaW9dCiAgICAvLyAjNjY2NjogSUUvRWRnZSBmb3JjZXMgcHJvZ3Jlc3MgdmFsdWUgZG93biB0byAxIGJlZm9yZSBzZXR0aW5nIGEgbWF4CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgIGlmICgoaXNJRSB8fCBpc0VkZ2UpICYmIGF0dHJzLnZhbHVlICE9PSBvbGRBdHRycy52YWx1ZSkgewogICAgICBzZXRBdHRyKGVsbSwgJ3ZhbHVlJywgYXR0cnMudmFsdWUpOwogICAgfQogICAgZm9yIChrZXkgaW4gb2xkQXR0cnMpIHsKICAgICAgaWYgKGlzVW5kZWYoYXR0cnNba2V5XSkpIHsKICAgICAgICBpZiAoaXNYbGluayhrZXkpKSB7CiAgICAgICAgICBlbG0ucmVtb3ZlQXR0cmlidXRlTlMoeGxpbmtOUywgZ2V0WGxpbmtQcm9wKGtleSkpOwogICAgICAgIH0gZWxzZSBpZiAoIWlzRW51bWVyYXRlZEF0dHIoa2V5KSkgewogICAgICAgICAgZWxtLnJlbW92ZUF0dHJpYnV0ZShrZXkpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gc2V0QXR0ciAoZWwsIGtleSwgdmFsdWUpIHsKICAgIGlmIChlbC50YWdOYW1lLmluZGV4T2YoJy0nKSA+IC0xKSB7CiAgICAgIGJhc2VTZXRBdHRyKGVsLCBrZXksIHZhbHVlKTsKICAgIH0gZWxzZSBpZiAoaXNCb29sZWFuQXR0cihrZXkpKSB7CiAgICAgIC8vIHNldCBhdHRyaWJ1dGUgZm9yIGJsYW5rIHZhbHVlCiAgICAgIC8vIGUuZy4gPG9wdGlvbiBkaXNhYmxlZD5TZWxlY3Qgb25lPC9vcHRpb24+CiAgICAgIGlmIChpc0ZhbHN5QXR0clZhbHVlKHZhbHVlKSkgewogICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShrZXkpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIHRlY2huaWNhbGx5IGFsbG93ZnVsbHNjcmVlbiBpcyBhIGJvb2xlYW4gYXR0cmlidXRlIGZvciA8aWZyYW1lPiwKICAgICAgICAvLyBidXQgRmxhc2ggZXhwZWN0cyBhIHZhbHVlIG9mICJ0cnVlIiB3aGVuIHVzZWQgb24gPGVtYmVkPiB0YWcKICAgICAgICB2YWx1ZSA9IGtleSA9PT0gJ2FsbG93ZnVsbHNjcmVlbicgJiYgZWwudGFnTmFtZSA9PT0gJ0VNQkVEJwogICAgICAgICAgPyAndHJ1ZScKICAgICAgICAgIDoga2V5OwogICAgICAgIGVsLnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKTsKICAgICAgfQogICAgfSBlbHNlIGlmIChpc0VudW1lcmF0ZWRBdHRyKGtleSkpIHsKICAgICAgZWwuc2V0QXR0cmlidXRlKGtleSwgY29udmVydEVudW1lcmF0ZWRWYWx1ZShrZXksIHZhbHVlKSk7CiAgICB9IGVsc2UgaWYgKGlzWGxpbmsoa2V5KSkgewogICAgICBpZiAoaXNGYWxzeUF0dHJWYWx1ZSh2YWx1ZSkpIHsKICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGVOUyh4bGlua05TLCBnZXRYbGlua1Byb3Aoa2V5KSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZWwuc2V0QXR0cmlidXRlTlMoeGxpbmtOUywga2V5LCB2YWx1ZSk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGJhc2VTZXRBdHRyKGVsLCBrZXksIHZhbHVlKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGJhc2VTZXRBdHRyIChlbCwga2V5LCB2YWx1ZSkgewogICAgaWYgKGlzRmFsc3lBdHRyVmFsdWUodmFsdWUpKSB7CiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShrZXkpOwogICAgfSBlbHNlIHsKICAgICAgLy8gIzcxMzg6IElFMTAgJiAxMSBmaXJlcyBpbnB1dCBldmVudCB3aGVuIHNldHRpbmcgcGxhY2Vob2xkZXIgb24KICAgICAgLy8gPHRleHRhcmVhPi4uLiBibG9jayB0aGUgZmlyc3QgaW5wdXQgZXZlbnQgYW5kIHJlbW92ZSB0aGUgYmxvY2tlcgogICAgICAvLyBpbW1lZGlhdGVseS4KICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICAgIGlmICgKICAgICAgICBpc0lFICYmICFpc0lFOSAmJgogICAgICAgIGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScgJiYKICAgICAgICBrZXkgPT09ICdwbGFjZWhvbGRlcicgJiYgdmFsdWUgIT09ICcnICYmICFlbC5fX2llcGgKICAgICAgKSB7CiAgICAgICAgdmFyIGJsb2NrZXIgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTsKICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2lucHV0JywgYmxvY2tlcik7CiAgICAgICAgfTsKICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGJsb2NrZXIpOwogICAgICAgIC8vICRmbG93LWRpc2FibGUtbGluZQogICAgICAgIGVsLl9faWVwaCA9IHRydWU7IC8qIElFIHBsYWNlaG9sZGVyIHBhdGNoZWQgKi8KICAgICAgfQogICAgICBlbC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSk7CiAgICB9CiAgfQoKICB2YXIgYXR0cnMgPSB7CiAgICBjcmVhdGU6IHVwZGF0ZUF0dHJzLAogICAgdXBkYXRlOiB1cGRhdGVBdHRycwogIH07CgogIC8qICAqLwoKICBmdW5jdGlvbiB1cGRhdGVDbGFzcyAob2xkVm5vZGUsIHZub2RlKSB7CiAgICB2YXIgZWwgPSB2bm9kZS5lbG07CiAgICB2YXIgZGF0YSA9IHZub2RlLmRhdGE7CiAgICB2YXIgb2xkRGF0YSA9IG9sZFZub2RlLmRhdGE7CiAgICBpZiAoCiAgICAgIGlzVW5kZWYoZGF0YS5zdGF0aWNDbGFzcykgJiYKICAgICAgaXNVbmRlZihkYXRhLmNsYXNzKSAmJiAoCiAgICAgICAgaXNVbmRlZihvbGREYXRhKSB8fCAoCiAgICAgICAgICBpc1VuZGVmKG9sZERhdGEuc3RhdGljQ2xhc3MpICYmCiAgICAgICAgICBpc1VuZGVmKG9sZERhdGEuY2xhc3MpCiAgICAgICAgKQogICAgICApCiAgICApIHsKICAgICAgcmV0dXJuCiAgICB9CgogICAgdmFyIGNscyA9IGdlbkNsYXNzRm9yVm5vZGUodm5vZGUpOwoKICAgIC8vIGhhbmRsZSB0cmFuc2l0aW9uIGNsYXNzZXMKICAgIHZhciB0cmFuc2l0aW9uQ2xhc3MgPSBlbC5fdHJhbnNpdGlvbkNsYXNzZXM7CiAgICBpZiAoaXNEZWYodHJhbnNpdGlvbkNsYXNzKSkgewogICAgICBjbHMgPSBjb25jYXQoY2xzLCBzdHJpbmdpZnlDbGFzcyh0cmFuc2l0aW9uQ2xhc3MpKTsKICAgIH0KCiAgICAvLyBzZXQgdGhlIGNsYXNzCiAgICBpZiAoY2xzICE9PSBlbC5fcHJldkNsYXNzKSB7CiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjbHMpOwogICAgICBlbC5fcHJldkNsYXNzID0gY2xzOwogICAgfQogIH0KCiAgdmFyIGtsYXNzID0gewogICAgY3JlYXRlOiB1cGRhdGVDbGFzcywKICAgIHVwZGF0ZTogdXBkYXRlQ2xhc3MKICB9OwoKICAvKiAgKi8KCiAgdmFyIHZhbGlkRGl2aXNpb25DaGFyUkUgPSAvW1x3KS4rXC1fJFxdXS87CgogIGZ1bmN0aW9uIHBhcnNlRmlsdGVycyAoZXhwKSB7CiAgICB2YXIgaW5TaW5nbGUgPSBmYWxzZTsKICAgIHZhciBpbkRvdWJsZSA9IGZhbHNlOwogICAgdmFyIGluVGVtcGxhdGVTdHJpbmcgPSBmYWxzZTsKICAgIHZhciBpblJlZ2V4ID0gZmFsc2U7CiAgICB2YXIgY3VybHkgPSAwOwogICAgdmFyIHNxdWFyZSA9IDA7CiAgICB2YXIgcGFyZW4gPSAwOwogICAgdmFyIGxhc3RGaWx0ZXJJbmRleCA9IDA7CiAgICB2YXIgYywgcHJldiwgaSwgZXhwcmVzc2lvbiwgZmlsdGVyczsKCiAgICBmb3IgKGkgPSAwOyBpIDwgZXhwLmxlbmd0aDsgaSsrKSB7CiAgICAgIHByZXYgPSBjOwogICAgICBjID0gZXhwLmNoYXJDb2RlQXQoaSk7CiAgICAgIGlmIChpblNpbmdsZSkgewogICAgICAgIGlmIChjID09PSAweDI3ICYmIHByZXYgIT09IDB4NUMpIHsgaW5TaW5nbGUgPSBmYWxzZTsgfQogICAgICB9IGVsc2UgaWYgKGluRG91YmxlKSB7CiAgICAgICAgaWYgKGMgPT09IDB4MjIgJiYgcHJldiAhPT0gMHg1QykgeyBpbkRvdWJsZSA9IGZhbHNlOyB9CiAgICAgIH0gZWxzZSBpZiAoaW5UZW1wbGF0ZVN0cmluZykgewogICAgICAgIGlmIChjID09PSAweDYwICYmIHByZXYgIT09IDB4NUMpIHsgaW5UZW1wbGF0ZVN0cmluZyA9IGZhbHNlOyB9CiAgICAgIH0gZWxzZSBpZiAoaW5SZWdleCkgewogICAgICAgIGlmIChjID09PSAweDJmICYmIHByZXYgIT09IDB4NUMpIHsgaW5SZWdleCA9IGZhbHNlOyB9CiAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgYyA9PT0gMHg3QyAmJiAvLyBwaXBlCiAgICAgICAgZXhwLmNoYXJDb2RlQXQoaSArIDEpICE9PSAweDdDICYmCiAgICAgICAgZXhwLmNoYXJDb2RlQXQoaSAtIDEpICE9PSAweDdDICYmCiAgICAgICAgIWN1cmx5ICYmICFzcXVhcmUgJiYgIXBhcmVuCiAgICAgICkgewogICAgICAgIGlmIChleHByZXNzaW9uID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIC8vIGZpcnN0IGZpbHRlciwgZW5kIG9mIGV4cHJlc3Npb24KICAgICAgICAgIGxhc3RGaWx0ZXJJbmRleCA9IGkgKyAxOwogICAgICAgICAgZXhwcmVzc2lvbiA9IGV4cC5zbGljZSgwLCBpKS50cmltKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHB1c2hGaWx0ZXIoKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3dpdGNoIChjKSB7CiAgICAgICAgICBjYXNlIDB4MjI6IGluRG91YmxlID0gdHJ1ZTsgYnJlYWsgICAgICAgICAvLyAiCiAgICAgICAgICBjYXNlIDB4Mjc6IGluU2luZ2xlID0gdHJ1ZTsgYnJlYWsgICAgICAgICAvLyAnCiAgICAgICAgICBjYXNlIDB4NjA6IGluVGVtcGxhdGVTdHJpbmcgPSB0cnVlOyBicmVhayAvLyBgCiAgICAgICAgICBjYXNlIDB4Mjg6IHBhcmVuKys7IGJyZWFrICAgICAgICAgICAgICAgICAvLyAoCiAgICAgICAgICBjYXNlIDB4Mjk6IHBhcmVuLS07IGJyZWFrICAgICAgICAgICAgICAgICAvLyApCiAgICAgICAgICBjYXNlIDB4NUI6IHNxdWFyZSsrOyBicmVhayAgICAgICAgICAgICAgICAvLyBbCiAgICAgICAgICBjYXNlIDB4NUQ6IHNxdWFyZS0tOyBicmVhayAgICAgICAgICAgICAgICAvLyBdCiAgICAgICAgICBjYXNlIDB4N0I6IGN1cmx5Kys7IGJyZWFrICAgICAgICAgICAgICAgICAvLyB7CiAgICAgICAgICBjYXNlIDB4N0Q6IGN1cmx5LS07IGJyZWFrICAgICAgICAgICAgICAgICAvLyB9CiAgICAgICAgfQogICAgICAgIGlmIChjID09PSAweDJmKSB7IC8vIC8KICAgICAgICAgIHZhciBqID0gaSAtIDE7CiAgICAgICAgICB2YXIgcCA9ICh2b2lkIDApOwogICAgICAgICAgLy8gZmluZCBmaXJzdCBub24td2hpdGVzcGFjZSBwcmV2IGNoYXIKICAgICAgICAgIGZvciAoOyBqID49IDA7IGotLSkgewogICAgICAgICAgICBwID0gZXhwLmNoYXJBdChqKTsKICAgICAgICAgICAgaWYgKHAgIT09ICcgJykgeyBicmVhayB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoIXAgfHwgIXZhbGlkRGl2aXNpb25DaGFyUkUudGVzdChwKSkgewogICAgICAgICAgICBpblJlZ2V4ID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGV4cHJlc3Npb24gPSBleHAuc2xpY2UoMCwgaSkudHJpbSgpOwogICAgfSBlbHNlIGlmIChsYXN0RmlsdGVySW5kZXggIT09IDApIHsKICAgICAgcHVzaEZpbHRlcigpOwogICAgfQoKICAgIGZ1bmN0aW9uIHB1c2hGaWx0ZXIgKCkgewogICAgICAoZmlsdGVycyB8fCAoZmlsdGVycyA9IFtdKSkucHVzaChleHAuc2xpY2UobGFzdEZpbHRlckluZGV4LCBpKS50cmltKCkpOwogICAgICBsYXN0RmlsdGVySW5kZXggPSBpICsgMTsKICAgIH0KCiAgICBpZiAoZmlsdGVycykgewogICAgICBmb3IgKGkgPSAwOyBpIDwgZmlsdGVycy5sZW5ndGg7IGkrKykgewogICAgICAgIGV4cHJlc3Npb24gPSB3cmFwRmlsdGVyKGV4cHJlc3Npb24sIGZpbHRlcnNbaV0pOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIGV4cHJlc3Npb24KICB9CgogIGZ1bmN0aW9uIHdyYXBGaWx0ZXIgKGV4cCwgZmlsdGVyKSB7CiAgICB2YXIgaSA9IGZpbHRlci5pbmRleE9mKCcoJyk7CiAgICBpZiAoaSA8IDApIHsKICAgICAgLy8gX2Y6IHJlc29sdmVGaWx0ZXIKICAgICAgcmV0dXJuICgiX2YoXCIiICsgZmlsdGVyICsgIlwiKSgiICsgZXhwICsgIikiKQogICAgfSBlbHNlIHsKICAgICAgdmFyIG5hbWUgPSBmaWx0ZXIuc2xpY2UoMCwgaSk7CiAgICAgIHZhciBhcmdzID0gZmlsdGVyLnNsaWNlKGkgKyAxKTsKICAgICAgcmV0dXJuICgiX2YoXCIiICsgbmFtZSArICJcIikoIiArIGV4cCArIChhcmdzICE9PSAnKScgPyAnLCcgKyBhcmdzIDogYXJncykpCiAgICB9CiAgfQoKICAvKiAgKi8KCgoKICAvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqLwogIGZ1bmN0aW9uIGJhc2VXYXJuIChtc2csIHJhbmdlKSB7CiAgICBjb25zb2xlLmVycm9yKCgiW1Z1ZSBjb21waWxlcl06ICIgKyBtc2cpKTsKICB9CiAgLyogZXNsaW50LWVuYWJsZSBuby11bnVzZWQtdmFycyAqLwoKICBmdW5jdGlvbiBwbHVja01vZHVsZUZ1bmN0aW9uICgKICAgIG1vZHVsZXMsCiAgICBrZXkKICApIHsKICAgIHJldHVybiBtb2R1bGVzCiAgICAgID8gbW9kdWxlcy5tYXAoZnVuY3Rpb24gKG0pIHsgcmV0dXJuIG1ba2V5XTsgfSkuZmlsdGVyKGZ1bmN0aW9uIChfKSB7IHJldHVybiBfOyB9KQogICAgICA6IFtdCiAgfQoKICBmdW5jdGlvbiBhZGRQcm9wIChlbCwgbmFtZSwgdmFsdWUsIHJhbmdlLCBkeW5hbWljKSB7CiAgICAoZWwucHJvcHMgfHwgKGVsLnByb3BzID0gW10pKS5wdXNoKHJhbmdlU2V0SXRlbSh7IG5hbWU6IG5hbWUsIHZhbHVlOiB2YWx1ZSwgZHluYW1pYzogZHluYW1pYyB9LCByYW5nZSkpOwogICAgZWwucGxhaW4gPSBmYWxzZTsKICB9CgogIGZ1bmN0aW9uIGFkZEF0dHIgKGVsLCBuYW1lLCB2YWx1ZSwgcmFuZ2UsIGR5bmFtaWMpIHsKICAgIHZhciBhdHRycyA9IGR5bmFtaWMKICAgICAgPyAoZWwuZHluYW1pY0F0dHJzIHx8IChlbC5keW5hbWljQXR0cnMgPSBbXSkpCiAgICAgIDogKGVsLmF0dHJzIHx8IChlbC5hdHRycyA9IFtdKSk7CiAgICBhdHRycy5wdXNoKHJhbmdlU2V0SXRlbSh7IG5hbWU6IG5hbWUsIHZhbHVlOiB2YWx1ZSwgZHluYW1pYzogZHluYW1pYyB9LCByYW5nZSkpOwogICAgZWwucGxhaW4gPSBmYWxzZTsKICB9CgogIC8vIGFkZCBhIHJhdyBhdHRyICh1c2UgdGhpcyBpbiBwcmVUcmFuc2Zvcm1zKQogIGZ1bmN0aW9uIGFkZFJhd0F0dHIgKGVsLCBuYW1lLCB2YWx1ZSwgcmFuZ2UpIHsKICAgIGVsLmF0dHJzTWFwW25hbWVdID0gdmFsdWU7CiAgICBlbC5hdHRyc0xpc3QucHVzaChyYW5nZVNldEl0ZW0oeyBuYW1lOiBuYW1lLCB2YWx1ZTogdmFsdWUgfSwgcmFuZ2UpKTsKICB9CgogIGZ1bmN0aW9uIGFkZERpcmVjdGl2ZSAoCiAgICBlbCwKICAgIG5hbWUsCiAgICByYXdOYW1lLAogICAgdmFsdWUsCiAgICBhcmcsCiAgICBpc0R5bmFtaWNBcmcsCiAgICBtb2RpZmllcnMsCiAgICByYW5nZQogICkgewogICAgKGVsLmRpcmVjdGl2ZXMgfHwgKGVsLmRpcmVjdGl2ZXMgPSBbXSkpLnB1c2gocmFuZ2VTZXRJdGVtKHsKICAgICAgbmFtZTogbmFtZSwKICAgICAgcmF3TmFtZTogcmF3TmFtZSwKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBhcmc6IGFyZywKICAgICAgaXNEeW5hbWljQXJnOiBpc0R5bmFtaWNBcmcsCiAgICAgIG1vZGlmaWVyczogbW9kaWZpZXJzCiAgICB9LCByYW5nZSkpOwogICAgZWwucGxhaW4gPSBmYWxzZTsKICB9CgogIGZ1bmN0aW9uIHByZXBlbmRNb2RpZmllck1hcmtlciAoc3ltYm9sLCBuYW1lLCBkeW5hbWljKSB7CiAgICByZXR1cm4gZHluYW1pYwogICAgICA/ICgiX3AoIiArIG5hbWUgKyAiLFwiIiArIHN5bWJvbCArICJcIikiKQogICAgICA6IHN5bWJvbCArIG5hbWUgLy8gbWFyayB0aGUgZXZlbnQgYXMgY2FwdHVyZWQKICB9CgogIGZ1bmN0aW9uIGFkZEhhbmRsZXIgKAogICAgZWwsCiAgICBuYW1lLAogICAgdmFsdWUsCiAgICBtb2RpZmllcnMsCiAgICBpbXBvcnRhbnQsCiAgICB3YXJuLAogICAgcmFuZ2UsCiAgICBkeW5hbWljCiAgKSB7CiAgICBtb2RpZmllcnMgPSBtb2RpZmllcnMgfHwgZW1wdHlPYmplY3Q7CiAgICAvLyB3YXJuIHByZXZlbnQgYW5kIHBhc3NpdmUgbW9kaWZpZXIKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgaWYgKAogICAgICB3YXJuICYmCiAgICAgIG1vZGlmaWVycy5wcmV2ZW50ICYmIG1vZGlmaWVycy5wYXNzaXZlCiAgICApIHsKICAgICAgd2FybigKICAgICAgICAncGFzc2l2ZSBhbmQgcHJldmVudCBjYW5cJ3QgYmUgdXNlZCB0b2dldGhlci4gJyArCiAgICAgICAgJ1Bhc3NpdmUgaGFuZGxlciBjYW5cJ3QgcHJldmVudCBkZWZhdWx0IGV2ZW50LicsCiAgICAgICAgcmFuZ2UKICAgICAgKTsKICAgIH0KCiAgICAvLyBub3JtYWxpemUgY2xpY2sucmlnaHQgYW5kIGNsaWNrLm1pZGRsZSBzaW5jZSB0aGV5IGRvbid0IGFjdHVhbGx5IGZpcmUKICAgIC8vIHRoaXMgaXMgdGVjaG5pY2FsbHkgYnJvd3Nlci1zcGVjaWZpYywgYnV0IGF0IGxlYXN0IGZvciBub3cgYnJvd3NlcnMgYXJlCiAgICAvLyB0aGUgb25seSB0YXJnZXQgZW52cyB0aGF0IGhhdmUgcmlnaHQvbWlkZGxlIGNsaWNrcy4KICAgIGlmIChtb2RpZmllcnMucmlnaHQpIHsKICAgICAgaWYgKGR5bmFtaWMpIHsKICAgICAgICBuYW1lID0gIigiICsgbmFtZSArICIpPT09J2NsaWNrJz8nY29udGV4dG1lbnUnOigiICsgbmFtZSArICIpIjsKICAgICAgfSBlbHNlIGlmIChuYW1lID09PSAnY2xpY2snKSB7CiAgICAgICAgbmFtZSA9ICdjb250ZXh0bWVudSc7CiAgICAgICAgZGVsZXRlIG1vZGlmaWVycy5yaWdodDsKICAgICAgfQogICAgfSBlbHNlIGlmIChtb2RpZmllcnMubWlkZGxlKSB7CiAgICAgIGlmIChkeW5hbWljKSB7CiAgICAgICAgbmFtZSA9ICIoIiArIG5hbWUgKyAiKT09PSdjbGljayc/J21vdXNldXAnOigiICsgbmFtZSArICIpIjsKICAgICAgfSBlbHNlIGlmIChuYW1lID09PSAnY2xpY2snKSB7CiAgICAgICAgbmFtZSA9ICdtb3VzZXVwJzsKICAgICAgfQogICAgfQoKICAgIC8vIGNoZWNrIGNhcHR1cmUgbW9kaWZpZXIKICAgIGlmIChtb2RpZmllcnMuY2FwdHVyZSkgewogICAgICBkZWxldGUgbW9kaWZpZXJzLmNhcHR1cmU7CiAgICAgIG5hbWUgPSBwcmVwZW5kTW9kaWZpZXJNYXJrZXIoJyEnLCBuYW1lLCBkeW5hbWljKTsKICAgIH0KICAgIGlmIChtb2RpZmllcnMub25jZSkgewogICAgICBkZWxldGUgbW9kaWZpZXJzLm9uY2U7CiAgICAgIG5hbWUgPSBwcmVwZW5kTW9kaWZpZXJNYXJrZXIoJ34nLCBuYW1lLCBkeW5hbWljKTsKICAgIH0KICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgaWYgKG1vZGlmaWVycy5wYXNzaXZlKSB7CiAgICAgIGRlbGV0ZSBtb2RpZmllcnMucGFzc2l2ZTsKICAgICAgbmFtZSA9IHByZXBlbmRNb2RpZmllck1hcmtlcignJicsIG5hbWUsIGR5bmFtaWMpOwogICAgfQoKICAgIHZhciBldmVudHM7CiAgICBpZiAobW9kaWZpZXJzLm5hdGl2ZSkgewogICAgICBkZWxldGUgbW9kaWZpZXJzLm5hdGl2ZTsKICAgICAgZXZlbnRzID0gZWwubmF0aXZlRXZlbnRzIHx8IChlbC5uYXRpdmVFdmVudHMgPSB7fSk7CiAgICB9IGVsc2UgewogICAgICBldmVudHMgPSBlbC5ldmVudHMgfHwgKGVsLmV2ZW50cyA9IHt9KTsKICAgIH0KCiAgICB2YXIgbmV3SGFuZGxlciA9IHJhbmdlU2V0SXRlbSh7IHZhbHVlOiB2YWx1ZS50cmltKCksIGR5bmFtaWM6IGR5bmFtaWMgfSwgcmFuZ2UpOwogICAgaWYgKG1vZGlmaWVycyAhPT0gZW1wdHlPYmplY3QpIHsKICAgICAgbmV3SGFuZGxlci5tb2RpZmllcnMgPSBtb2RpZmllcnM7CiAgICB9CgogICAgdmFyIGhhbmRsZXJzID0gZXZlbnRzW25hbWVdOwogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoQXJyYXkuaXNBcnJheShoYW5kbGVycykpIHsKICAgICAgaW1wb3J0YW50ID8gaGFuZGxlcnMudW5zaGlmdChuZXdIYW5kbGVyKSA6IGhhbmRsZXJzLnB1c2gobmV3SGFuZGxlcik7CiAgICB9IGVsc2UgaWYgKGhhbmRsZXJzKSB7CiAgICAgIGV2ZW50c1tuYW1lXSA9IGltcG9ydGFudCA/IFtuZXdIYW5kbGVyLCBoYW5kbGVyc10gOiBbaGFuZGxlcnMsIG5ld0hhbmRsZXJdOwogICAgfSBlbHNlIHsKICAgICAgZXZlbnRzW25hbWVdID0gbmV3SGFuZGxlcjsKICAgIH0KCiAgICBlbC5wbGFpbiA9IGZhbHNlOwogIH0KCiAgZnVuY3Rpb24gZ2V0UmF3QmluZGluZ0F0dHIgKAogICAgZWwsCiAgICBuYW1lCiAgKSB7CiAgICByZXR1cm4gZWwucmF3QXR0cnNNYXBbJzonICsgbmFtZV0gfHwKICAgICAgZWwucmF3QXR0cnNNYXBbJ3YtYmluZDonICsgbmFtZV0gfHwKICAgICAgZWwucmF3QXR0cnNNYXBbbmFtZV0KICB9CgogIGZ1bmN0aW9uIGdldEJpbmRpbmdBdHRyICgKICAgIGVsLAogICAgbmFtZSwKICAgIGdldFN0YXRpYwogICkgewogICAgdmFyIGR5bmFtaWNWYWx1ZSA9CiAgICAgIGdldEFuZFJlbW92ZUF0dHIoZWwsICc6JyArIG5hbWUpIHx8CiAgICAgIGdldEFuZFJlbW92ZUF0dHIoZWwsICd2LWJpbmQ6JyArIG5hbWUpOwogICAgaWYgKGR5bmFtaWNWYWx1ZSAhPSBudWxsKSB7CiAgICAgIHJldHVybiBwYXJzZUZpbHRlcnMoZHluYW1pY1ZhbHVlKQogICAgfSBlbHNlIGlmIChnZXRTdGF0aWMgIT09IGZhbHNlKSB7CiAgICAgIHZhciBzdGF0aWNWYWx1ZSA9IGdldEFuZFJlbW92ZUF0dHIoZWwsIG5hbWUpOwogICAgICBpZiAoc3RhdGljVmFsdWUgIT0gbnVsbCkgewogICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShzdGF0aWNWYWx1ZSkKICAgICAgfQogICAgfQogIH0KCiAgLy8gbm90ZTogdGhpcyBvbmx5IHJlbW92ZXMgdGhlIGF0dHIgZnJvbSB0aGUgQXJyYXkgKGF0dHJzTGlzdCkgc28gdGhhdCBpdAogIC8vIGRvZXNuJ3QgZ2V0IHByb2Nlc3NlZCBieSBwcm9jZXNzQXR0cnMuCiAgLy8gQnkgZGVmYXVsdCBpdCBkb2VzIE5PVCByZW1vdmUgaXQgZnJvbSB0aGUgbWFwIChhdHRyc01hcCkgYmVjYXVzZSB0aGUgbWFwIGlzCiAgLy8gbmVlZGVkIGR1cmluZyBjb2RlZ2VuLgogIGZ1bmN0aW9uIGdldEFuZFJlbW92ZUF0dHIgKAogICAgZWwsCiAgICBuYW1lLAogICAgcmVtb3ZlRnJvbU1hcAogICkgewogICAgdmFyIHZhbDsKICAgIGlmICgodmFsID0gZWwuYXR0cnNNYXBbbmFtZV0pICE9IG51bGwpIHsKICAgICAgdmFyIGxpc3QgPSBlbC5hdHRyc0xpc3Q7CiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbGlzdC5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICBpZiAobGlzdFtpXS5uYW1lID09PSBuYW1lKSB7CiAgICAgICAgICBsaXN0LnNwbGljZShpLCAxKTsKICAgICAgICAgIGJyZWFrCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBpZiAocmVtb3ZlRnJvbU1hcCkgewogICAgICBkZWxldGUgZWwuYXR0cnNNYXBbbmFtZV07CiAgICB9CiAgICByZXR1cm4gdmFsCiAgfQoKICBmdW5jdGlvbiBnZXRBbmRSZW1vdmVBdHRyQnlSZWdleCAoCiAgICBlbCwKICAgIG5hbWUKICApIHsKICAgIHZhciBsaXN0ID0gZWwuYXR0cnNMaXN0OwogICAgZm9yICh2YXIgaSA9IDAsIGwgPSBsaXN0Lmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICB2YXIgYXR0ciA9IGxpc3RbaV07CiAgICAgIGlmIChuYW1lLnRlc3QoYXR0ci5uYW1lKSkgewogICAgICAgIGxpc3Quc3BsaWNlKGksIDEpOwogICAgICAgIHJldHVybiBhdHRyCiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIHJhbmdlU2V0SXRlbSAoCiAgICBpdGVtLAogICAgcmFuZ2UKICApIHsKICAgIGlmIChyYW5nZSkgewogICAgICBpZiAocmFuZ2Uuc3RhcnQgIT0gbnVsbCkgewogICAgICAgIGl0ZW0uc3RhcnQgPSByYW5nZS5zdGFydDsKICAgICAgfQogICAgICBpZiAocmFuZ2UuZW5kICE9IG51bGwpIHsKICAgICAgICBpdGVtLmVuZCA9IHJhbmdlLmVuZDsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGl0ZW0KICB9CgogIC8qICAqLwoKICAvKioKICAgKiBDcm9zcy1wbGF0Zm9ybSBjb2RlIGdlbmVyYXRpb24gZm9yIGNvbXBvbmVudCB2LW1vZGVsCiAgICovCiAgZnVuY3Rpb24gZ2VuQ29tcG9uZW50TW9kZWwgKAogICAgZWwsCiAgICB2YWx1ZSwKICAgIG1vZGlmaWVycwogICkgewogICAgdmFyIHJlZiA9IG1vZGlmaWVycyB8fCB7fTsKICAgIHZhciBudW1iZXIgPSByZWYubnVtYmVyOwogICAgdmFyIHRyaW0gPSByZWYudHJpbTsKCiAgICB2YXIgYmFzZVZhbHVlRXhwcmVzc2lvbiA9ICckJHYnOwogICAgdmFyIHZhbHVlRXhwcmVzc2lvbiA9IGJhc2VWYWx1ZUV4cHJlc3Npb247CiAgICBpZiAodHJpbSkgewogICAgICB2YWx1ZUV4cHJlc3Npb24gPQogICAgICAgICIodHlwZW9mICIgKyBiYXNlVmFsdWVFeHByZXNzaW9uICsgIiA9PT0gJ3N0cmluZyciICsKICAgICAgICAiPyAiICsgYmFzZVZhbHVlRXhwcmVzc2lvbiArICIudHJpbSgpIiArCiAgICAgICAgIjogIiArIGJhc2VWYWx1ZUV4cHJlc3Npb24gKyAiKSI7CiAgICB9CiAgICBpZiAobnVtYmVyKSB7CiAgICAgIHZhbHVlRXhwcmVzc2lvbiA9ICJfbigiICsgdmFsdWVFeHByZXNzaW9uICsgIikiOwogICAgfQogICAgdmFyIGFzc2lnbm1lbnQgPSBnZW5Bc3NpZ25tZW50Q29kZSh2YWx1ZSwgdmFsdWVFeHByZXNzaW9uKTsKCiAgICBlbC5tb2RlbCA9IHsKICAgICAgdmFsdWU6ICgiKCIgKyB2YWx1ZSArICIpIiksCiAgICAgIGV4cHJlc3Npb246IEpTT04uc3RyaW5naWZ5KHZhbHVlKSwKICAgICAgY2FsbGJhY2s6ICgiZnVuY3Rpb24gKCIgKyBiYXNlVmFsdWVFeHByZXNzaW9uICsgIikgeyIgKyBhc3NpZ25tZW50ICsgIn0iKQogICAgfTsKICB9CgogIC8qKgogICAqIENyb3NzLXBsYXRmb3JtIGNvZGVnZW4gaGVscGVyIGZvciBnZW5lcmF0aW5nIHYtbW9kZWwgdmFsdWUgYXNzaWdubWVudCBjb2RlLgogICAqLwogIGZ1bmN0aW9uIGdlbkFzc2lnbm1lbnRDb2RlICgKICAgIHZhbHVlLAogICAgYXNzaWdubWVudAogICkgewogICAgdmFyIHJlcyA9IHBhcnNlTW9kZWwodmFsdWUpOwogICAgaWYgKHJlcy5rZXkgPT09IG51bGwpIHsKICAgICAgcmV0dXJuICh2YWx1ZSArICI9IiArIGFzc2lnbm1lbnQpCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gKCIkc2V0KCIgKyAocmVzLmV4cCkgKyAiLCAiICsgKHJlcy5rZXkpICsgIiwgIiArIGFzc2lnbm1lbnQgKyAiKSIpCiAgICB9CiAgfQoKICAvKioKICAgKiBQYXJzZSBhIHYtbW9kZWwgZXhwcmVzc2lvbiBpbnRvIGEgYmFzZSBwYXRoIGFuZCBhIGZpbmFsIGtleSBzZWdtZW50LgogICAqIEhhbmRsZXMgYm90aCBkb3QtcGF0aCBhbmQgcG9zc2libGUgc3F1YXJlIGJyYWNrZXRzLgogICAqCiAgICogUG9zc2libGUgY2FzZXM6CiAgICoKICAgKiAtIHRlc3QKICAgKiAtIHRlc3Rba2V5XQogICAqIC0gdGVzdFt0ZXN0MVtrZXldXQogICAqIC0gdGVzdFsiYSJdW2tleV0KICAgKiAtIHh4eC50ZXN0W2FbYV0udGVzdDFba2V5XV0KICAgKiAtIHRlc3QueHh4LmFbImFzYSJdW3Rlc3QxW2tleV1dCiAgICoKICAgKi8KCiAgdmFyIGxlbiwgc3RyLCBjaHIsIGluZGV4JDEsIGV4cHJlc3Npb25Qb3MsIGV4cHJlc3Npb25FbmRQb3M7CgoKCiAgZnVuY3Rpb24gcGFyc2VNb2RlbCAodmFsKSB7CiAgICAvLyBGaXggaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS9wdWxsLzc3MzAKICAgIC8vIGFsbG93IHYtbW9kZWw9Im9iai52YWwgIiAodHJhaWxpbmcgd2hpdGVzcGFjZSkKICAgIHZhbCA9IHZhbC50cmltKCk7CiAgICBsZW4gPSB2YWwubGVuZ3RoOwoKICAgIGlmICh2YWwuaW5kZXhPZignWycpIDwgMCB8fCB2YWwubGFzdEluZGV4T2YoJ10nKSA8IGxlbiAtIDEpIHsKICAgICAgaW5kZXgkMSA9IHZhbC5sYXN0SW5kZXhPZignLicpOwogICAgICBpZiAoaW5kZXgkMSA+IC0xKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGV4cDogdmFsLnNsaWNlKDAsIGluZGV4JDEpLAogICAgICAgICAga2V5OiAnIicgKyB2YWwuc2xpY2UoaW5kZXgkMSArIDEpICsgJyInCiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBleHA6IHZhbCwKICAgICAgICAgIGtleTogbnVsbAogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHN0ciA9IHZhbDsKICAgIGluZGV4JDEgPSBleHByZXNzaW9uUG9zID0gZXhwcmVzc2lvbkVuZFBvcyA9IDA7CgogICAgd2hpbGUgKCFlb2YoKSkgewogICAgICBjaHIgPSBuZXh0KCk7CiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgICBpZiAoaXNTdHJpbmdTdGFydChjaHIpKSB7CiAgICAgICAgcGFyc2VTdHJpbmcoY2hyKTsKICAgICAgfSBlbHNlIGlmIChjaHIgPT09IDB4NUIpIHsKICAgICAgICBwYXJzZUJyYWNrZXQoY2hyKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiB7CiAgICAgIGV4cDogdmFsLnNsaWNlKDAsIGV4cHJlc3Npb25Qb3MpLAogICAgICBrZXk6IHZhbC5zbGljZShleHByZXNzaW9uUG9zICsgMSwgZXhwcmVzc2lvbkVuZFBvcykKICAgIH0KICB9CgogIGZ1bmN0aW9uIG5leHQgKCkgewogICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KCsraW5kZXgkMSkKICB9CgogIGZ1bmN0aW9uIGVvZiAoKSB7CiAgICByZXR1cm4gaW5kZXgkMSA+PSBsZW4KICB9CgogIGZ1bmN0aW9uIGlzU3RyaW5nU3RhcnQgKGNocikgewogICAgcmV0dXJuIGNociA9PT0gMHgyMiB8fCBjaHIgPT09IDB4MjcKICB9CgogIGZ1bmN0aW9uIHBhcnNlQnJhY2tldCAoY2hyKSB7CiAgICB2YXIgaW5CcmFja2V0ID0gMTsKICAgIGV4cHJlc3Npb25Qb3MgPSBpbmRleCQxOwogICAgd2hpbGUgKCFlb2YoKSkgewogICAgICBjaHIgPSBuZXh0KCk7CiAgICAgIGlmIChpc1N0cmluZ1N0YXJ0KGNocikpIHsKICAgICAgICBwYXJzZVN0cmluZyhjaHIpOwogICAgICAgIGNvbnRpbnVlCiAgICAgIH0KICAgICAgaWYgKGNociA9PT0gMHg1QikgeyBpbkJyYWNrZXQrKzsgfQogICAgICBpZiAoY2hyID09PSAweDVEKSB7IGluQnJhY2tldC0tOyB9CiAgICAgIGlmIChpbkJyYWNrZXQgPT09IDApIHsKICAgICAgICBleHByZXNzaW9uRW5kUG9zID0gaW5kZXgkMTsKICAgICAgICBicmVhawogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBwYXJzZVN0cmluZyAoY2hyKSB7CiAgICB2YXIgc3RyaW5nUXVvdGUgPSBjaHI7CiAgICB3aGlsZSAoIWVvZigpKSB7CiAgICAgIGNociA9IG5leHQoKTsKICAgICAgaWYgKGNociA9PT0gc3RyaW5nUXVvdGUpIHsKICAgICAgICBicmVhawogICAgICB9CiAgICB9CiAgfQoKICAvKiAgKi8KCiAgdmFyIHdhcm4kMTsKCiAgLy8gaW4gc29tZSBjYXNlcywgdGhlIGV2ZW50IHVzZWQgaGFzIHRvIGJlIGRldGVybWluZWQgYXQgcnVudGltZQogIC8vIHNvIHdlIHVzZWQgc29tZSByZXNlcnZlZCB0b2tlbnMgZHVyaW5nIGNvbXBpbGUuCiAgdmFyIFJBTkdFX1RPS0VOID0gJ19fcic7CiAgdmFyIENIRUNLQk9YX1JBRElPX1RPS0VOID0gJ19fYyc7CgogIGZ1bmN0aW9uIG1vZGVsICgKICAgIGVsLAogICAgZGlyLAogICAgX3dhcm4KICApIHsKICAgIHdhcm4kMSA9IF93YXJuOwogICAgdmFyIHZhbHVlID0gZGlyLnZhbHVlOwogICAgdmFyIG1vZGlmaWVycyA9IGRpci5tb2RpZmllcnM7CiAgICB2YXIgdGFnID0gZWwudGFnOwogICAgdmFyIHR5cGUgPSBlbC5hdHRyc01hcC50eXBlOwoKICAgIHsKICAgICAgLy8gaW5wdXRzIHdpdGggdHlwZT0iZmlsZSIgYXJlIHJlYWQgb25seSBhbmQgc2V0dGluZyB0aGUgaW5wdXQncwogICAgICAvLyB2YWx1ZSB3aWxsIHRocm93IGFuIGVycm9yLgogICAgICBpZiAodGFnID09PSAnaW5wdXQnICYmIHR5cGUgPT09ICdmaWxlJykgewogICAgICAgIHdhcm4kMSgKICAgICAgICAgICI8IiArIChlbC50YWcpICsgIiB2LW1vZGVsPVwiIiArIHZhbHVlICsgIlwiIHR5cGU9XCJmaWxlXCI+OlxuIiArCiAgICAgICAgICAiRmlsZSBpbnB1dHMgYXJlIHJlYWQgb25seS4gVXNlIGEgdi1vbjpjaGFuZ2UgbGlzdGVuZXIgaW5zdGVhZC4iLAogICAgICAgICAgZWwucmF3QXR0cnNNYXBbJ3YtbW9kZWwnXQogICAgICAgICk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoZWwuY29tcG9uZW50KSB7CiAgICAgIGdlbkNvbXBvbmVudE1vZGVsKGVsLCB2YWx1ZSwgbW9kaWZpZXJzKTsKICAgICAgLy8gY29tcG9uZW50IHYtbW9kZWwgZG9lc24ndCBuZWVkIGV4dHJhIHJ1bnRpbWUKICAgICAgcmV0dXJuIGZhbHNlCiAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ3NlbGVjdCcpIHsKICAgICAgZ2VuU2VsZWN0KGVsLCB2YWx1ZSwgbW9kaWZpZXJzKTsKICAgIH0gZWxzZSBpZiAodGFnID09PSAnaW5wdXQnICYmIHR5cGUgPT09ICdjaGVja2JveCcpIHsKICAgICAgZ2VuQ2hlY2tib3hNb2RlbChlbCwgdmFsdWUsIG1vZGlmaWVycyk7CiAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ2lucHV0JyAmJiB0eXBlID09PSAncmFkaW8nKSB7CiAgICAgIGdlblJhZGlvTW9kZWwoZWwsIHZhbHVlLCBtb2RpZmllcnMpOwogICAgfSBlbHNlIGlmICh0YWcgPT09ICdpbnB1dCcgfHwgdGFnID09PSAndGV4dGFyZWEnKSB7CiAgICAgIGdlbkRlZmF1bHRNb2RlbChlbCwgdmFsdWUsIG1vZGlmaWVycyk7CiAgICB9IGVsc2UgaWYgKCFjb25maWcuaXNSZXNlcnZlZFRhZyh0YWcpKSB7CiAgICAgIGdlbkNvbXBvbmVudE1vZGVsKGVsLCB2YWx1ZSwgbW9kaWZpZXJzKTsKICAgICAgLy8gY29tcG9uZW50IHYtbW9kZWwgZG9lc24ndCBuZWVkIGV4dHJhIHJ1bnRpbWUKICAgICAgcmV0dXJuIGZhbHNlCiAgICB9IGVsc2UgewogICAgICB3YXJuJDEoCiAgICAgICAgIjwiICsgKGVsLnRhZykgKyAiIHYtbW9kZWw9XCIiICsgdmFsdWUgKyAiXCI+OiAiICsKICAgICAgICAidi1tb2RlbCBpcyBub3Qgc3VwcG9ydGVkIG9uIHRoaXMgZWxlbWVudCB0eXBlLiAiICsKICAgICAgICAnSWYgeW91IGFyZSB3b3JraW5nIHdpdGggY29udGVudGVkaXRhYmxlLCBpdFwncyByZWNvbW1lbmRlZCB0byAnICsKICAgICAgICAnd3JhcCBhIGxpYnJhcnkgZGVkaWNhdGVkIGZvciB0aGF0IHB1cnBvc2UgaW5zaWRlIGEgY3VzdG9tIGNvbXBvbmVudC4nLAogICAgICAgIGVsLnJhd0F0dHJzTWFwWyd2LW1vZGVsJ10KICAgICAgKTsKICAgIH0KCiAgICAvLyBlbnN1cmUgcnVudGltZSBkaXJlY3RpdmUgbWV0YWRhdGEKICAgIHJldHVybiB0cnVlCiAgfQoKICBmdW5jdGlvbiBnZW5DaGVja2JveE1vZGVsICgKICAgIGVsLAogICAgdmFsdWUsCiAgICBtb2RpZmllcnMKICApIHsKICAgIHZhciBudW1iZXIgPSBtb2RpZmllcnMgJiYgbW9kaWZpZXJzLm51bWJlcjsKICAgIHZhciB2YWx1ZUJpbmRpbmcgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ3ZhbHVlJykgfHwgJ251bGwnOwogICAgdmFyIHRydWVWYWx1ZUJpbmRpbmcgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ3RydWUtdmFsdWUnKSB8fCAndHJ1ZSc7CiAgICB2YXIgZmFsc2VWYWx1ZUJpbmRpbmcgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ2ZhbHNlLXZhbHVlJykgfHwgJ2ZhbHNlJzsKICAgIGFkZFByb3AoZWwsICdjaGVja2VkJywKICAgICAgIkFycmF5LmlzQXJyYXkoIiArIHZhbHVlICsgIikiICsKICAgICAgIj9faSgiICsgdmFsdWUgKyAiLCIgKyB2YWx1ZUJpbmRpbmcgKyAiKT4tMSIgKyAoCiAgICAgICAgdHJ1ZVZhbHVlQmluZGluZyA9PT0gJ3RydWUnCiAgICAgICAgICA/ICgiOigiICsgdmFsdWUgKyAiKSIpCiAgICAgICAgICA6ICgiOl9xKCIgKyB2YWx1ZSArICIsIiArIHRydWVWYWx1ZUJpbmRpbmcgKyAiKSIpCiAgICAgICkKICAgICk7CiAgICBhZGRIYW5kbGVyKGVsLCAnY2hhbmdlJywKICAgICAgInZhciAkJGE9IiArIHZhbHVlICsgIiwiICsKICAgICAgICAgICckJGVsPSRldmVudC50YXJnZXQsJyArCiAgICAgICAgICAiJCRjPSQkZWwuY2hlY2tlZD8oIiArIHRydWVWYWx1ZUJpbmRpbmcgKyAiKTooIiArIGZhbHNlVmFsdWVCaW5kaW5nICsgIik7IiArCiAgICAgICdpZihBcnJheS5pc0FycmF5KCQkYSkpeycgKwogICAgICAgICJ2YXIgJCR2PSIgKyAobnVtYmVyID8gJ19uKCcgKyB2YWx1ZUJpbmRpbmcgKyAnKScgOiB2YWx1ZUJpbmRpbmcpICsgIiwiICsKICAgICAgICAgICAgJyQkaT1faSgkJGEsJCR2KTsnICsKICAgICAgICAiaWYoJCRlbC5jaGVja2VkKXskJGk8MCYmKCIgKyAoZ2VuQXNzaWdubWVudENvZGUodmFsdWUsICckJGEuY29uY2F0KFskJHZdKScpKSArICIpfSIgKwogICAgICAgICJlbHNleyQkaT4tMSYmKCIgKyAoZ2VuQXNzaWdubWVudENvZGUodmFsdWUsICckJGEuc2xpY2UoMCwkJGkpLmNvbmNhdCgkJGEuc2xpY2UoJCRpKzEpKScpKSArICIpfSIgKwogICAgICAifWVsc2V7IiArIChnZW5Bc3NpZ25tZW50Q29kZSh2YWx1ZSwgJyQkYycpKSArICJ9IiwKICAgICAgbnVsbCwgdHJ1ZQogICAgKTsKICB9CgogIGZ1bmN0aW9uIGdlblJhZGlvTW9kZWwgKAogICAgZWwsCiAgICB2YWx1ZSwKICAgIG1vZGlmaWVycwogICkgewogICAgdmFyIG51bWJlciA9IG1vZGlmaWVycyAmJiBtb2RpZmllcnMubnVtYmVyOwogICAgdmFyIHZhbHVlQmluZGluZyA9IGdldEJpbmRpbmdBdHRyKGVsLCAndmFsdWUnKSB8fCAnbnVsbCc7CiAgICB2YWx1ZUJpbmRpbmcgPSBudW1iZXIgPyAoIl9uKCIgKyB2YWx1ZUJpbmRpbmcgKyAiKSIpIDogdmFsdWVCaW5kaW5nOwogICAgYWRkUHJvcChlbCwgJ2NoZWNrZWQnLCAoIl9xKCIgKyB2YWx1ZSArICIsIiArIHZhbHVlQmluZGluZyArICIpIikpOwogICAgYWRkSGFuZGxlcihlbCwgJ2NoYW5nZScsIGdlbkFzc2lnbm1lbnRDb2RlKHZhbHVlLCB2YWx1ZUJpbmRpbmcpLCBudWxsLCB0cnVlKTsKICB9CgogIGZ1bmN0aW9uIGdlblNlbGVjdCAoCiAgICBlbCwKICAgIHZhbHVlLAogICAgbW9kaWZpZXJzCiAgKSB7CiAgICB2YXIgbnVtYmVyID0gbW9kaWZpZXJzICYmIG1vZGlmaWVycy5udW1iZXI7CiAgICB2YXIgc2VsZWN0ZWRWYWwgPSAiQXJyYXkucHJvdG90eXBlLmZpbHRlciIgKwogICAgICAiLmNhbGwoJGV2ZW50LnRhcmdldC5vcHRpb25zLGZ1bmN0aW9uKG8pe3JldHVybiBvLnNlbGVjdGVkfSkiICsKICAgICAgIi5tYXAoZnVuY3Rpb24obyl7dmFyIHZhbCA9IFwiX3ZhbHVlXCIgaW4gbyA/IG8uX3ZhbHVlIDogby52YWx1ZTsiICsKICAgICAgInJldHVybiAiICsgKG51bWJlciA/ICdfbih2YWwpJyA6ICd2YWwnKSArICJ9KSI7CgogICAgdmFyIGFzc2lnbm1lbnQgPSAnJGV2ZW50LnRhcmdldC5tdWx0aXBsZSA/ICQkc2VsZWN0ZWRWYWwgOiAkJHNlbGVjdGVkVmFsWzBdJzsKICAgIHZhciBjb2RlID0gInZhciAkJHNlbGVjdGVkVmFsID0gIiArIHNlbGVjdGVkVmFsICsgIjsiOwogICAgY29kZSA9IGNvZGUgKyAiICIgKyAoZ2VuQXNzaWdubWVudENvZGUodmFsdWUsIGFzc2lnbm1lbnQpKTsKICAgIGFkZEhhbmRsZXIoZWwsICdjaGFuZ2UnLCBjb2RlLCBudWxsLCB0cnVlKTsKICB9CgogIGZ1bmN0aW9uIGdlbkRlZmF1bHRNb2RlbCAoCiAgICBlbCwKICAgIHZhbHVlLAogICAgbW9kaWZpZXJzCiAgKSB7CiAgICB2YXIgdHlwZSA9IGVsLmF0dHJzTWFwLnR5cGU7CgogICAgLy8gd2FybiBpZiB2LWJpbmQ6dmFsdWUgY29uZmxpY3RzIHdpdGggdi1tb2RlbAogICAgLy8gZXhjZXB0IGZvciBpbnB1dHMgd2l0aCB2LWJpbmQ6dHlwZQogICAgewogICAgICB2YXIgdmFsdWUkMSA9IGVsLmF0dHJzTWFwWyd2LWJpbmQ6dmFsdWUnXSB8fCBlbC5hdHRyc01hcFsnOnZhbHVlJ107CiAgICAgIHZhciB0eXBlQmluZGluZyA9IGVsLmF0dHJzTWFwWyd2LWJpbmQ6dHlwZSddIHx8IGVsLmF0dHJzTWFwWyc6dHlwZSddOwogICAgICBpZiAodmFsdWUkMSAmJiAhdHlwZUJpbmRpbmcpIHsKICAgICAgICB2YXIgYmluZGluZyA9IGVsLmF0dHJzTWFwWyd2LWJpbmQ6dmFsdWUnXSA/ICd2LWJpbmQ6dmFsdWUnIDogJzp2YWx1ZSc7CiAgICAgICAgd2FybiQxKAogICAgICAgICAgYmluZGluZyArICI9XCIiICsgdmFsdWUkMSArICJcIiBjb25mbGljdHMgd2l0aCB2LW1vZGVsIG9uIHRoZSBzYW1lIGVsZW1lbnQgIiArCiAgICAgICAgICAnYmVjYXVzZSB0aGUgbGF0dGVyIGFscmVhZHkgZXhwYW5kcyB0byBhIHZhbHVlIGJpbmRpbmcgaW50ZXJuYWxseScsCiAgICAgICAgICBlbC5yYXdBdHRyc01hcFtiaW5kaW5nXQogICAgICAgICk7CiAgICAgIH0KICAgIH0KCiAgICB2YXIgcmVmID0gbW9kaWZpZXJzIHx8IHt9OwogICAgdmFyIGxhenkgPSByZWYubGF6eTsKICAgIHZhciBudW1iZXIgPSByZWYubnVtYmVyOwogICAgdmFyIHRyaW0gPSByZWYudHJpbTsKICAgIHZhciBuZWVkQ29tcG9zaXRpb25HdWFyZCA9ICFsYXp5ICYmIHR5cGUgIT09ICdyYW5nZSc7CiAgICB2YXIgZXZlbnQgPSBsYXp5CiAgICAgID8gJ2NoYW5nZScKICAgICAgOiB0eXBlID09PSAncmFuZ2UnCiAgICAgICAgPyBSQU5HRV9UT0tFTgogICAgICAgIDogJ2lucHV0JzsKCiAgICB2YXIgdmFsdWVFeHByZXNzaW9uID0gJyRldmVudC50YXJnZXQudmFsdWUnOwogICAgaWYgKHRyaW0pIHsKICAgICAgdmFsdWVFeHByZXNzaW9uID0gIiRldmVudC50YXJnZXQudmFsdWUudHJpbSgpIjsKICAgIH0KICAgIGlmIChudW1iZXIpIHsKICAgICAgdmFsdWVFeHByZXNzaW9uID0gIl9uKCIgKyB2YWx1ZUV4cHJlc3Npb24gKyAiKSI7CiAgICB9CgogICAgdmFyIGNvZGUgPSBnZW5Bc3NpZ25tZW50Q29kZSh2YWx1ZSwgdmFsdWVFeHByZXNzaW9uKTsKICAgIGlmIChuZWVkQ29tcG9zaXRpb25HdWFyZCkgewogICAgICBjb2RlID0gImlmKCRldmVudC50YXJnZXQuY29tcG9zaW5nKXJldHVybjsiICsgY29kZTsKICAgIH0KCiAgICBhZGRQcm9wKGVsLCAndmFsdWUnLCAoIigiICsgdmFsdWUgKyAiKSIpKTsKICAgIGFkZEhhbmRsZXIoZWwsIGV2ZW50LCBjb2RlLCBudWxsLCB0cnVlKTsKICAgIGlmICh0cmltIHx8IG51bWJlcikgewogICAgICBhZGRIYW5kbGVyKGVsLCAnYmx1cicsICckZm9yY2VVcGRhdGUoKScpOwogICAgfQogIH0KCiAgLyogICovCgogIC8vIG5vcm1hbGl6ZSB2LW1vZGVsIGV2ZW50IHRva2VucyB0aGF0IGNhbiBvbmx5IGJlIGRldGVybWluZWQgYXQgcnVudGltZS4KICAvLyBpdCdzIGltcG9ydGFudCB0byBwbGFjZSB0aGUgZXZlbnQgYXMgdGhlIGZpcnN0IGluIHRoZSBhcnJheSBiZWNhdXNlCiAgLy8gdGhlIHdob2xlIHBvaW50IGlzIGVuc3VyaW5nIHRoZSB2LW1vZGVsIGNhbGxiYWNrIGdldHMgY2FsbGVkIGJlZm9yZQogIC8vIHVzZXItYXR0YWNoZWQgaGFuZGxlcnMuCiAgZnVuY3Rpb24gbm9ybWFsaXplRXZlbnRzIChvbikgewogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoaXNEZWYob25bUkFOR0VfVE9LRU5dKSkgewogICAgICAvLyBJRSBpbnB1dFt0eXBlPXJhbmdlXSBvbmx5IHN1cHBvcnRzIGBjaGFuZ2VgIGV2ZW50CiAgICAgIHZhciBldmVudCA9IGlzSUUgPyAnY2hhbmdlJyA6ICdpbnB1dCc7CiAgICAgIG9uW2V2ZW50XSA9IFtdLmNvbmNhdChvbltSQU5HRV9UT0tFTl0sIG9uW2V2ZW50XSB8fCBbXSk7CiAgICAgIGRlbGV0ZSBvbltSQU5HRV9UT0tFTl07CiAgICB9CiAgICAvLyBUaGlzIHdhcyBvcmlnaW5hbGx5IGludGVuZGVkIHRvIGZpeCAjNDUyMSBidXQgbm8gbG9uZ2VyIG5lY2Vzc2FyeQogICAgLy8gYWZ0ZXIgMi41LiBLZWVwaW5nIGl0IGZvciBiYWNrd2FyZHMgY29tcGF0IHdpdGggZ2VuZXJhdGVkIGNvZGUgZnJvbSA8IDIuNAogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoaXNEZWYob25bQ0hFQ0tCT1hfUkFESU9fVE9LRU5dKSkgewogICAgICBvbi5jaGFuZ2UgPSBbXS5jb25jYXQob25bQ0hFQ0tCT1hfUkFESU9fVE9LRU5dLCBvbi5jaGFuZ2UgfHwgW10pOwogICAgICBkZWxldGUgb25bQ0hFQ0tCT1hfUkFESU9fVE9LRU5dOwogICAgfQogIH0KCiAgdmFyIHRhcmdldCQxOwoKICBmdW5jdGlvbiBjcmVhdGVPbmNlSGFuZGxlciQxIChldmVudCwgaGFuZGxlciwgY2FwdHVyZSkgewogICAgdmFyIF90YXJnZXQgPSB0YXJnZXQkMTsgLy8gc2F2ZSBjdXJyZW50IHRhcmdldCBlbGVtZW50IGluIGNsb3N1cmUKICAgIHJldHVybiBmdW5jdGlvbiBvbmNlSGFuZGxlciAoKSB7CiAgICAgIHZhciByZXMgPSBoYW5kbGVyLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7CiAgICAgIGlmIChyZXMgIT09IG51bGwpIHsKICAgICAgICByZW1vdmUkMihldmVudCwgb25jZUhhbmRsZXIsIGNhcHR1cmUsIF90YXJnZXQpOwogICAgICB9CiAgICB9CiAgfQoKICAvLyAjOTQ0NjogRmlyZWZveCA8PSA1MyAoaW4gcGFydGljdWxhciwgRVNSIDUyKSBoYXMgaW5jb3JyZWN0IEV2ZW50LnRpbWVTdGFtcAogIC8vIGltcGxlbWVudGF0aW9uIGFuZCBkb2VzIG5vdCBmaXJlIG1pY3JvdGFza3MgaW4gYmV0d2VlbiBldmVudCBwcm9wYWdhdGlvbiwgc28KICAvLyBzYWZlIHRvIGV4Y2x1ZGUuCiAgdmFyIHVzZU1pY3JvdGFza0ZpeCA9IGlzVXNpbmdNaWNyb1Rhc2sgJiYgIShpc0ZGICYmIE51bWJlcihpc0ZGWzFdKSA8PSA1Myk7CgogIGZ1bmN0aW9uIGFkZCQxICgKICAgIG5hbWUsCiAgICBoYW5kbGVyLAogICAgY2FwdHVyZSwKICAgIHBhc3NpdmUKICApIHsKICAgIC8vIGFzeW5jIGVkZ2UgY2FzZSAjNjU2NjogaW5uZXIgY2xpY2sgZXZlbnQgdHJpZ2dlcnMgcGF0Y2gsIGV2ZW50IGhhbmRsZXIKICAgIC8vIGF0dGFjaGVkIHRvIG91dGVyIGVsZW1lbnQgZHVyaW5nIHBhdGNoLCBhbmQgdHJpZ2dlcmVkIGFnYWluLiBUaGlzCiAgICAvLyBoYXBwZW5zIGJlY2F1c2UgYnJvd3NlcnMgZmlyZSBtaWNyb3Rhc2sgdGlja3MgYmV0d2VlbiBldmVudCBwcm9wYWdhdGlvbi4KICAgIC8vIHRoZSBzb2x1dGlvbiBpcyBzaW1wbGU6IHdlIHNhdmUgdGhlIHRpbWVzdGFtcCB3aGVuIGEgaGFuZGxlciBpcyBhdHRhY2hlZCwKICAgIC8vIGFuZCB0aGUgaGFuZGxlciB3b3VsZCBvbmx5IGZpcmUgaWYgdGhlIGV2ZW50IHBhc3NlZCB0byBpdCB3YXMgZmlyZWQKICAgIC8vIEFGVEVSIGl0IHdhcyBhdHRhY2hlZC4KICAgIGlmICh1c2VNaWNyb3Rhc2tGaXgpIHsKICAgICAgdmFyIGF0dGFjaGVkVGltZXN0YW1wID0gY3VycmVudEZsdXNoVGltZXN0YW1wOwogICAgICB2YXIgb3JpZ2luYWwgPSBoYW5kbGVyOwogICAgICBoYW5kbGVyID0gb3JpZ2luYWwuX3dyYXBwZXIgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIGlmICgKICAgICAgICAgIC8vIG5vIGJ1YmJsaW5nLCBzaG91bGQgYWx3YXlzIGZpcmUuCiAgICAgICAgICAvLyB0aGlzIGlzIGp1c3QgYSBzYWZldHkgbmV0IGluIGNhc2UgZXZlbnQudGltZVN0YW1wIGlzIHVucmVsaWFibGUgaW4KICAgICAgICAgIC8vIGNlcnRhaW4gd2VpcmQgZW52aXJvbm1lbnRzLi4uCiAgICAgICAgICBlLnRhcmdldCA9PT0gZS5jdXJyZW50VGFyZ2V0IHx8CiAgICAgICAgICAvLyBldmVudCBpcyBmaXJlZCBhZnRlciBoYW5kbGVyIGF0dGFjaG1lbnQKICAgICAgICAgIGUudGltZVN0YW1wID49IGF0dGFjaGVkVGltZXN0YW1wIHx8CiAgICAgICAgICAvLyBiYWlsIGZvciBlbnZpcm9ubWVudHMgdGhhdCBoYXZlIGJ1Z2d5IGV2ZW50LnRpbWVTdGFtcCBpbXBsZW1lbnRhdGlvbnMKICAgICAgICAgIC8vICM5NDYyIGlPUyA5IGJ1ZzogZXZlbnQudGltZVN0YW1wIGlzIDAgYWZ0ZXIgaGlzdG9yeS5wdXNoU3RhdGUKICAgICAgICAgIC8vICM5NjgxIFF0V2ViRW5naW5lIGV2ZW50LnRpbWVTdGFtcCBpcyBuZWdhdGl2ZSB2YWx1ZQogICAgICAgICAgZS50aW1lU3RhbXAgPD0gMCB8fAogICAgICAgICAgLy8gIzk0NDggYmFpbCBpZiBldmVudCBpcyBmaXJlZCBpbiBhbm90aGVyIGRvY3VtZW50IGluIGEgbXVsdGktcGFnZQogICAgICAgICAgLy8gZWxlY3Ryb24vbncuanMgYXBwLCBzaW5jZSBldmVudC50aW1lU3RhbXAgd2lsbCBiZSB1c2luZyBhIGRpZmZlcmVudAogICAgICAgICAgLy8gc3RhcnRpbmcgcmVmZXJlbmNlCiAgICAgICAgICBlLnRhcmdldC5vd25lckRvY3VtZW50ICE9PSBkb2N1bWVudAogICAgICAgICkgewogICAgICAgICAgcmV0dXJuIG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICB9CiAgICAgIH07CiAgICB9CiAgICB0YXJnZXQkMS5hZGRFdmVudExpc3RlbmVyKAogICAgICBuYW1lLAogICAgICBoYW5kbGVyLAogICAgICBzdXBwb3J0c1Bhc3NpdmUKICAgICAgICA/IHsgY2FwdHVyZTogY2FwdHVyZSwgcGFzc2l2ZTogcGFzc2l2ZSB9CiAgICAgICAgOiBjYXB0dXJlCiAgICApOwogIH0KCiAgZnVuY3Rpb24gcmVtb3ZlJDIgKAogICAgbmFtZSwKICAgIGhhbmRsZXIsCiAgICBjYXB0dXJlLAogICAgX3RhcmdldAogICkgewogICAgKF90YXJnZXQgfHwgdGFyZ2V0JDEpLnJlbW92ZUV2ZW50TGlzdGVuZXIoCiAgICAgIG5hbWUsCiAgICAgIGhhbmRsZXIuX3dyYXBwZXIgfHwgaGFuZGxlciwKICAgICAgY2FwdHVyZQogICAgKTsKICB9CgogIGZ1bmN0aW9uIHVwZGF0ZURPTUxpc3RlbmVycyAob2xkVm5vZGUsIHZub2RlKSB7CiAgICBpZiAoaXNVbmRlZihvbGRWbm9kZS5kYXRhLm9uKSAmJiBpc1VuZGVmKHZub2RlLmRhdGEub24pKSB7CiAgICAgIHJldHVybgogICAgfQogICAgdmFyIG9uID0gdm5vZGUuZGF0YS5vbiB8fCB7fTsKICAgIHZhciBvbGRPbiA9IG9sZFZub2RlLmRhdGEub24gfHwge307CiAgICB0YXJnZXQkMSA9IHZub2RlLmVsbTsKICAgIG5vcm1hbGl6ZUV2ZW50cyhvbik7CiAgICB1cGRhdGVMaXN0ZW5lcnMob24sIG9sZE9uLCBhZGQkMSwgcmVtb3ZlJDIsIGNyZWF0ZU9uY2VIYW5kbGVyJDEsIHZub2RlLmNvbnRleHQpOwogICAgdGFyZ2V0JDEgPSB1bmRlZmluZWQ7CiAgfQoKICB2YXIgZXZlbnRzID0gewogICAgY3JlYXRlOiB1cGRhdGVET01MaXN0ZW5lcnMsCiAgICB1cGRhdGU6IHVwZGF0ZURPTUxpc3RlbmVycwogIH07CgogIC8qICAqLwoKICB2YXIgc3ZnQ29udGFpbmVyOwoKICBmdW5jdGlvbiB1cGRhdGVET01Qcm9wcyAob2xkVm5vZGUsIHZub2RlKSB7CiAgICBpZiAoaXNVbmRlZihvbGRWbm9kZS5kYXRhLmRvbVByb3BzKSAmJiBpc1VuZGVmKHZub2RlLmRhdGEuZG9tUHJvcHMpKSB7CiAgICAgIHJldHVybgogICAgfQogICAgdmFyIGtleSwgY3VyOwogICAgdmFyIGVsbSA9IHZub2RlLmVsbTsKICAgIHZhciBvbGRQcm9wcyA9IG9sZFZub2RlLmRhdGEuZG9tUHJvcHMgfHwge307CiAgICB2YXIgcHJvcHMgPSB2bm9kZS5kYXRhLmRvbVByb3BzIHx8IHt9OwogICAgLy8gY2xvbmUgb2JzZXJ2ZWQgb2JqZWN0cywgYXMgdGhlIHVzZXIgcHJvYmFibHkgd2FudHMgdG8gbXV0YXRlIGl0CiAgICBpZiAoaXNEZWYocHJvcHMuX19vYl9fKSkgewogICAgICBwcm9wcyA9IHZub2RlLmRhdGEuZG9tUHJvcHMgPSBleHRlbmQoe30sIHByb3BzKTsKICAgIH0KCiAgICBmb3IgKGtleSBpbiBvbGRQcm9wcykgewogICAgICBpZiAoIShrZXkgaW4gcHJvcHMpKSB7CiAgICAgICAgZWxtW2tleV0gPSAnJzsKICAgICAgfQogICAgfQoKICAgIGZvciAoa2V5IGluIHByb3BzKSB7CiAgICAgIGN1ciA9IHByb3BzW2tleV07CiAgICAgIC8vIGlnbm9yZSBjaGlsZHJlbiBpZiB0aGUgbm9kZSBoYXMgdGV4dENvbnRlbnQgb3IgaW5uZXJIVE1MLAogICAgICAvLyBhcyB0aGVzZSB3aWxsIHRocm93IGF3YXkgZXhpc3RpbmcgRE9NIG5vZGVzIGFuZCBjYXVzZSByZW1vdmFsIGVycm9ycwogICAgICAvLyBvbiBzdWJzZXF1ZW50IHBhdGNoZXMgKCMzMzYwKQogICAgICBpZiAoa2V5ID09PSAndGV4dENvbnRlbnQnIHx8IGtleSA9PT0gJ2lubmVySFRNTCcpIHsKICAgICAgICBpZiAodm5vZGUuY2hpbGRyZW4pIHsgdm5vZGUuY2hpbGRyZW4ubGVuZ3RoID0gMDsgfQogICAgICAgIGlmIChjdXIgPT09IG9sZFByb3BzW2tleV0pIHsgY29udGludWUgfQogICAgICAgIC8vICM2NjAxIHdvcmsgYXJvdW5kIENocm9tZSB2ZXJzaW9uIDw9IDU1IGJ1ZyB3aGVyZSBzaW5nbGUgdGV4dE5vZGUKICAgICAgICAvLyByZXBsYWNlZCBieSBpbm5lckhUTUwvdGV4dENvbnRlbnQgcmV0YWlucyBpdHMgcGFyZW50Tm9kZSBwcm9wZXJ0eQogICAgICAgIGlmIChlbG0uY2hpbGROb2Rlcy5sZW5ndGggPT09IDEpIHsKICAgICAgICAgIGVsbS5yZW1vdmVDaGlsZChlbG0uY2hpbGROb2Rlc1swXSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoa2V5ID09PSAndmFsdWUnICYmIGVsbS50YWdOYW1lICE9PSAnUFJPR1JFU1MnKSB7CiAgICAgICAgLy8gc3RvcmUgdmFsdWUgYXMgX3ZhbHVlIGFzIHdlbGwgc2luY2UKICAgICAgICAvLyBub24tc3RyaW5nIHZhbHVlcyB3aWxsIGJlIHN0cmluZ2lmaWVkCiAgICAgICAgZWxtLl92YWx1ZSA9IGN1cjsKICAgICAgICAvLyBhdm9pZCByZXNldHRpbmcgY3Vyc29yIHBvc2l0aW9uIHdoZW4gdmFsdWUgaXMgdGhlIHNhbWUKICAgICAgICB2YXIgc3RyQ3VyID0gaXNVbmRlZihjdXIpID8gJycgOiBTdHJpbmcoY3VyKTsKICAgICAgICBpZiAoc2hvdWxkVXBkYXRlVmFsdWUoZWxtLCBzdHJDdXIpKSB7CiAgICAgICAgICBlbG0udmFsdWUgPSBzdHJDdXI7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2lubmVySFRNTCcgJiYgaXNTVkcoZWxtLnRhZ05hbWUpICYmIGlzVW5kZWYoZWxtLmlubmVySFRNTCkpIHsKICAgICAgICAvLyBJRSBkb2Vzbid0IHN1cHBvcnQgaW5uZXJIVE1MIGZvciBTVkcgZWxlbWVudHMKICAgICAgICBzdmdDb250YWluZXIgPSBzdmdDb250YWluZXIgfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgc3ZnQ29udGFpbmVyLmlubmVySFRNTCA9ICI8c3ZnPiIgKyBjdXIgKyAiPC9zdmc+IjsKICAgICAgICB2YXIgc3ZnID0gc3ZnQ29udGFpbmVyLmZpcnN0Q2hpbGQ7CiAgICAgICAgd2hpbGUgKGVsbS5maXJzdENoaWxkKSB7CiAgICAgICAgICBlbG0ucmVtb3ZlQ2hpbGQoZWxtLmZpcnN0Q2hpbGQpOwogICAgICAgIH0KICAgICAgICB3aGlsZSAoc3ZnLmZpcnN0Q2hpbGQpIHsKICAgICAgICAgIGVsbS5hcHBlbmRDaGlsZChzdmcuZmlyc3RDaGlsZCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKAogICAgICAgIC8vIHNraXAgdGhlIHVwZGF0ZSBpZiBvbGQgYW5kIG5ldyBWRE9NIHN0YXRlIGlzIHRoZSBzYW1lLgogICAgICAgIC8vIGB2YWx1ZWAgaXMgaGFuZGxlZCBzZXBhcmF0ZWx5IGJlY2F1c2UgdGhlIERPTSB2YWx1ZSBtYXkgYmUgdGVtcG9yYXJpbHkKICAgICAgICAvLyBvdXQgb2Ygc3luYyB3aXRoIFZET00gc3RhdGUgZHVlIHRvIGZvY3VzLCBjb21wb3NpdGlvbiBhbmQgbW9kaWZpZXJzLgogICAgICAgIC8vIFRoaXMgICM0NTIxIGJ5IHNraXBwaW5nIHRoZSB1bm5lY2Vzc2FyeSBgY2hlY2tlZGAgdXBkYXRlLgogICAgICAgIGN1ciAhPT0gb2xkUHJvcHNba2V5XQogICAgICApIHsKICAgICAgICAvLyBzb21lIHByb3BlcnR5IHVwZGF0ZXMgY2FuIHRocm93CiAgICAgICAgLy8gZS5nLiBgdmFsdWVgIG9uIDxwcm9ncmVzcz4gdy8gbm9uLWZpbml0ZSB2YWx1ZQogICAgICAgIHRyeSB7CiAgICAgICAgICBlbG1ba2V5XSA9IGN1cjsKICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICB9CiAgICB9CiAgfQoKICAvLyBjaGVjayBwbGF0Zm9ybXMvd2ViL3V0aWwvYXR0cnMuanMgYWNjZXB0VmFsdWUKCgogIGZ1bmN0aW9uIHNob3VsZFVwZGF0ZVZhbHVlIChlbG0sIGNoZWNrVmFsKSB7CiAgICByZXR1cm4gKCFlbG0uY29tcG9zaW5nICYmICgKICAgICAgZWxtLnRhZ05hbWUgPT09ICdPUFRJT04nIHx8CiAgICAgIGlzTm90SW5Gb2N1c0FuZERpcnR5KGVsbSwgY2hlY2tWYWwpIHx8CiAgICAgIGlzRGlydHlXaXRoTW9kaWZpZXJzKGVsbSwgY2hlY2tWYWwpCiAgICApKQogIH0KCiAgZnVuY3Rpb24gaXNOb3RJbkZvY3VzQW5kRGlydHkgKGVsbSwgY2hlY2tWYWwpIHsKICAgIC8vIHJldHVybiB0cnVlIHdoZW4gdGV4dGJveCAoLm51bWJlciBhbmQgLnRyaW0pIGxvc2VzIGZvY3VzIGFuZCBpdHMgdmFsdWUgaXMKICAgIC8vIG5vdCBlcXVhbCB0byB0aGUgdXBkYXRlZCB2YWx1ZQogICAgdmFyIG5vdEluRm9jdXMgPSB0cnVlOwogICAgLy8gIzYxNTcKICAgIC8vIHdvcmsgYXJvdW5kIElFIGJ1ZyB3aGVuIGFjY2Vzc2luZyBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGluIGFuIGlmcmFtZQogICAgdHJ5IHsgbm90SW5Gb2N1cyA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IGVsbTsgfSBjYXRjaCAoZSkge30KICAgIHJldHVybiBub3RJbkZvY3VzICYmIGVsbS52YWx1ZSAhPT0gY2hlY2tWYWwKICB9CgogIGZ1bmN0aW9uIGlzRGlydHlXaXRoTW9kaWZpZXJzIChlbG0sIG5ld1ZhbCkgewogICAgdmFyIHZhbHVlID0gZWxtLnZhbHVlOwogICAgdmFyIG1vZGlmaWVycyA9IGVsbS5fdk1vZGlmaWVyczsgLy8gaW5qZWN0ZWQgYnkgdi1tb2RlbCBydW50aW1lCiAgICBpZiAoaXNEZWYobW9kaWZpZXJzKSkgewogICAgICBpZiAobW9kaWZpZXJzLm51bWJlcikgewogICAgICAgIHJldHVybiB0b051bWJlcih2YWx1ZSkgIT09IHRvTnVtYmVyKG5ld1ZhbCkKICAgICAgfQogICAgICBpZiAobW9kaWZpZXJzLnRyaW0pIHsKICAgICAgICByZXR1cm4gdmFsdWUudHJpbSgpICE9PSBuZXdWYWwudHJpbSgpCiAgICAgIH0KICAgIH0KICAgIHJldHVybiB2YWx1ZSAhPT0gbmV3VmFsCiAgfQoKICB2YXIgZG9tUHJvcHMgPSB7CiAgICBjcmVhdGU6IHVwZGF0ZURPTVByb3BzLAogICAgdXBkYXRlOiB1cGRhdGVET01Qcm9wcwogIH07CgogIC8qICAqLwoKICB2YXIgcGFyc2VTdHlsZVRleHQgPSBjYWNoZWQoZnVuY3Rpb24gKGNzc1RleHQpIHsKICAgIHZhciByZXMgPSB7fTsKICAgIHZhciBsaXN0RGVsaW1pdGVyID0gLzsoPyFbXihdKlwpKS9nOwogICAgdmFyIHByb3BlcnR5RGVsaW1pdGVyID0gLzooLispLzsKICAgIGNzc1RleHQuc3BsaXQobGlzdERlbGltaXRlcikuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICBpZiAoaXRlbSkgewogICAgICAgIHZhciB0bXAgPSBpdGVtLnNwbGl0KHByb3BlcnR5RGVsaW1pdGVyKTsKICAgICAgICB0bXAubGVuZ3RoID4gMSAmJiAocmVzW3RtcFswXS50cmltKCldID0gdG1wWzFdLnRyaW0oKSk7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIHJlcwogIH0pOwoKICAvLyBtZXJnZSBzdGF0aWMgYW5kIGR5bmFtaWMgc3R5bGUgZGF0YSBvbiB0aGUgc2FtZSB2bm9kZQogIGZ1bmN0aW9uIG5vcm1hbGl6ZVN0eWxlRGF0YSAoZGF0YSkgewogICAgdmFyIHN0eWxlID0gbm9ybWFsaXplU3R5bGVCaW5kaW5nKGRhdGEuc3R5bGUpOwogICAgLy8gc3RhdGljIHN0eWxlIGlzIHByZS1wcm9jZXNzZWQgaW50byBhbiBvYmplY3QgZHVyaW5nIGNvbXBpbGF0aW9uCiAgICAvLyBhbmQgaXMgYWx3YXlzIGEgZnJlc2ggb2JqZWN0LCBzbyBpdCdzIHNhZmUgdG8gbWVyZ2UgaW50byBpdAogICAgcmV0dXJuIGRhdGEuc3RhdGljU3R5bGUKICAgICAgPyBleHRlbmQoZGF0YS5zdGF0aWNTdHlsZSwgc3R5bGUpCiAgICAgIDogc3R5bGUKICB9CgogIC8vIG5vcm1hbGl6ZSBwb3NzaWJsZSBhcnJheSAvIHN0cmluZyB2YWx1ZXMgaW50byBPYmplY3QKICBmdW5jdGlvbiBub3JtYWxpemVTdHlsZUJpbmRpbmcgKGJpbmRpbmdTdHlsZSkgewogICAgaWYgKEFycmF5LmlzQXJyYXkoYmluZGluZ1N0eWxlKSkgewogICAgICByZXR1cm4gdG9PYmplY3QoYmluZGluZ1N0eWxlKQogICAgfQogICAgaWYgKHR5cGVvZiBiaW5kaW5nU3R5bGUgPT09ICdzdHJpbmcnKSB7CiAgICAgIHJldHVybiBwYXJzZVN0eWxlVGV4dChiaW5kaW5nU3R5bGUpCiAgICB9CiAgICByZXR1cm4gYmluZGluZ1N0eWxlCiAgfQoKICAvKioKICAgKiBwYXJlbnQgY29tcG9uZW50IHN0eWxlIHNob3VsZCBiZSBhZnRlciBjaGlsZCdzCiAgICogc28gdGhhdCBwYXJlbnQgY29tcG9uZW50J3Mgc3R5bGUgY291bGQgb3ZlcnJpZGUgaXQKICAgKi8KICBmdW5jdGlvbiBnZXRTdHlsZSAodm5vZGUsIGNoZWNrQ2hpbGQpIHsKICAgIHZhciByZXMgPSB7fTsKICAgIHZhciBzdHlsZURhdGE7CgogICAgaWYgKGNoZWNrQ2hpbGQpIHsKICAgICAgdmFyIGNoaWxkTm9kZSA9IHZub2RlOwogICAgICB3aGlsZSAoY2hpbGROb2RlLmNvbXBvbmVudEluc3RhbmNlKSB7CiAgICAgICAgY2hpbGROb2RlID0gY2hpbGROb2RlLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZTsKICAgICAgICBpZiAoCiAgICAgICAgICBjaGlsZE5vZGUgJiYgY2hpbGROb2RlLmRhdGEgJiYKICAgICAgICAgIChzdHlsZURhdGEgPSBub3JtYWxpemVTdHlsZURhdGEoY2hpbGROb2RlLmRhdGEpKQogICAgICAgICkgewogICAgICAgICAgZXh0ZW5kKHJlcywgc3R5bGVEYXRhKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBpZiAoKHN0eWxlRGF0YSA9IG5vcm1hbGl6ZVN0eWxlRGF0YSh2bm9kZS5kYXRhKSkpIHsKICAgICAgZXh0ZW5kKHJlcywgc3R5bGVEYXRhKTsKICAgIH0KCiAgICB2YXIgcGFyZW50Tm9kZSA9IHZub2RlOwogICAgd2hpbGUgKChwYXJlbnROb2RlID0gcGFyZW50Tm9kZS5wYXJlbnQpKSB7CiAgICAgIGlmIChwYXJlbnROb2RlLmRhdGEgJiYgKHN0eWxlRGF0YSA9IG5vcm1hbGl6ZVN0eWxlRGF0YShwYXJlbnROb2RlLmRhdGEpKSkgewogICAgICAgIGV4dGVuZChyZXMsIHN0eWxlRGF0YSk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiByZXMKICB9CgogIC8qICAqLwoKICB2YXIgY3NzVmFyUkUgPSAvXi0tLzsKICB2YXIgaW1wb3J0YW50UkUgPSAvXHMqIWltcG9ydGFudCQvOwogIHZhciBzZXRQcm9wID0gZnVuY3Rpb24gKGVsLCBuYW1lLCB2YWwpIHsKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgaWYgKGNzc1ZhclJFLnRlc3QobmFtZSkpIHsKICAgICAgZWwuc3R5bGUuc2V0UHJvcGVydHkobmFtZSwgdmFsKTsKICAgIH0gZWxzZSBpZiAoaW1wb3J0YW50UkUudGVzdCh2YWwpKSB7CiAgICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KGh5cGhlbmF0ZShuYW1lKSwgdmFsLnJlcGxhY2UoaW1wb3J0YW50UkUsICcnKSwgJ2ltcG9ydGFudCcpOwogICAgfSBlbHNlIHsKICAgICAgdmFyIG5vcm1hbGl6ZWROYW1lID0gbm9ybWFsaXplKG5hbWUpOwogICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7CiAgICAgICAgLy8gU3VwcG9ydCB2YWx1ZXMgYXJyYXkgY3JlYXRlZCBieSBhdXRvcHJlZml4ZXIsIGUuZy4KICAgICAgICAvLyB7ZGlzcGxheTogWyItd2Via2l0LWJveCIsICItbXMtZmxleGJveCIsICJmbGV4Il19CiAgICAgICAgLy8gU2V0IHRoZW0gb25lIGJ5IG9uZSwgYW5kIHRoZSBicm93c2VyIHdpbGwgb25seSBzZXQgdGhvc2UgaXQgY2FuIHJlY29nbml6ZQogICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB2YWwubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgIGVsLnN0eWxlW25vcm1hbGl6ZWROYW1lXSA9IHZhbFtpXTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZWwuc3R5bGVbbm9ybWFsaXplZE5hbWVdID0gdmFsOwogICAgICB9CiAgICB9CiAgfTsKCiAgdmFyIHZlbmRvck5hbWVzID0gWydXZWJraXQnLCAnTW96JywgJ21zJ107CgogIHZhciBlbXB0eVN0eWxlOwogIHZhciBub3JtYWxpemUgPSBjYWNoZWQoZnVuY3Rpb24gKHByb3ApIHsKICAgIGVtcHR5U3R5bGUgPSBlbXB0eVN0eWxlIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLnN0eWxlOwogICAgcHJvcCA9IGNhbWVsaXplKHByb3ApOwogICAgaWYgKHByb3AgIT09ICdmaWx0ZXInICYmIChwcm9wIGluIGVtcHR5U3R5bGUpKSB7CiAgICAgIHJldHVybiBwcm9wCiAgICB9CiAgICB2YXIgY2FwTmFtZSA9IHByb3AuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBwcm9wLnNsaWNlKDEpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2ZW5kb3JOYW1lcy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgbmFtZSA9IHZlbmRvck5hbWVzW2ldICsgY2FwTmFtZTsKICAgICAgaWYgKG5hbWUgaW4gZW1wdHlTdHlsZSkgewogICAgICAgIHJldHVybiBuYW1lCiAgICAgIH0KICAgIH0KICB9KTsKCiAgZnVuY3Rpb24gdXBkYXRlU3R5bGUgKG9sZFZub2RlLCB2bm9kZSkgewogICAgdmFyIGRhdGEgPSB2bm9kZS5kYXRhOwogICAgdmFyIG9sZERhdGEgPSBvbGRWbm9kZS5kYXRhOwoKICAgIGlmIChpc1VuZGVmKGRhdGEuc3RhdGljU3R5bGUpICYmIGlzVW5kZWYoZGF0YS5zdHlsZSkgJiYKICAgICAgaXNVbmRlZihvbGREYXRhLnN0YXRpY1N0eWxlKSAmJiBpc1VuZGVmKG9sZERhdGEuc3R5bGUpCiAgICApIHsKICAgICAgcmV0dXJuCiAgICB9CgogICAgdmFyIGN1ciwgbmFtZTsKICAgIHZhciBlbCA9IHZub2RlLmVsbTsKICAgIHZhciBvbGRTdGF0aWNTdHlsZSA9IG9sZERhdGEuc3RhdGljU3R5bGU7CiAgICB2YXIgb2xkU3R5bGVCaW5kaW5nID0gb2xkRGF0YS5ub3JtYWxpemVkU3R5bGUgfHwgb2xkRGF0YS5zdHlsZSB8fCB7fTsKCiAgICAvLyBpZiBzdGF0aWMgc3R5bGUgZXhpc3RzLCBzdHlsZWJpbmRpbmcgYWxyZWFkeSBtZXJnZWQgaW50byBpdCB3aGVuIGRvaW5nIG5vcm1hbGl6ZVN0eWxlRGF0YQogICAgdmFyIG9sZFN0eWxlID0gb2xkU3RhdGljU3R5bGUgfHwgb2xkU3R5bGVCaW5kaW5nOwoKICAgIHZhciBzdHlsZSA9IG5vcm1hbGl6ZVN0eWxlQmluZGluZyh2bm9kZS5kYXRhLnN0eWxlKSB8fCB7fTsKCiAgICAvLyBzdG9yZSBub3JtYWxpemVkIHN0eWxlIHVuZGVyIGEgZGlmZmVyZW50IGtleSBmb3IgbmV4dCBkaWZmCiAgICAvLyBtYWtlIHN1cmUgdG8gY2xvbmUgaXQgaWYgaXQncyByZWFjdGl2ZSwgc2luY2UgdGhlIHVzZXIgbGlrZWx5IHdhbnRzCiAgICAvLyB0byBtdXRhdGUgaXQuCiAgICB2bm9kZS5kYXRhLm5vcm1hbGl6ZWRTdHlsZSA9IGlzRGVmKHN0eWxlLl9fb2JfXykKICAgICAgPyBleHRlbmQoe30sIHN0eWxlKQogICAgICA6IHN0eWxlOwoKICAgIHZhciBuZXdTdHlsZSA9IGdldFN0eWxlKHZub2RlLCB0cnVlKTsKCiAgICBmb3IgKG5hbWUgaW4gb2xkU3R5bGUpIHsKICAgICAgaWYgKGlzVW5kZWYobmV3U3R5bGVbbmFtZV0pKSB7CiAgICAgICAgc2V0UHJvcChlbCwgbmFtZSwgJycpOwogICAgICB9CiAgICB9CiAgICBmb3IgKG5hbWUgaW4gbmV3U3R5bGUpIHsKICAgICAgY3VyID0gbmV3U3R5bGVbbmFtZV07CiAgICAgIGlmIChjdXIgIT09IG9sZFN0eWxlW25hbWVdKSB7CiAgICAgICAgLy8gaWU5IHNldHRpbmcgdG8gbnVsbCBoYXMgbm8gZWZmZWN0LCBtdXN0IHVzZSBlbXB0eSBzdHJpbmcKICAgICAgICBzZXRQcm9wKGVsLCBuYW1lLCBjdXIgPT0gbnVsbCA/ICcnIDogY3VyKTsKICAgICAgfQogICAgfQogIH0KCiAgdmFyIHN0eWxlID0gewogICAgY3JlYXRlOiB1cGRhdGVTdHlsZSwKICAgIHVwZGF0ZTogdXBkYXRlU3R5bGUKICB9OwoKICAvKiAgKi8KCiAgdmFyIHdoaXRlc3BhY2VSRSA9IC9ccysvOwoKICAvKioKICAgKiBBZGQgY2xhc3Mgd2l0aCBjb21wYXRpYmlsaXR5IGZvciBTVkcgc2luY2UgY2xhc3NMaXN0IGlzIG5vdCBzdXBwb3J0ZWQgb24KICAgKiBTVkcgZWxlbWVudHMgaW4gSUUKICAgKi8KICBmdW5jdGlvbiBhZGRDbGFzcyAoZWwsIGNscykgewogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoIWNscyB8fCAhKGNscyA9IGNscy50cmltKCkpKSB7CiAgICAgIHJldHVybgogICAgfQoKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovCiAgICBpZiAoZWwuY2xhc3NMaXN0KSB7CiAgICAgIGlmIChjbHMuaW5kZXhPZignICcpID4gLTEpIHsKICAgICAgICBjbHMuc3BsaXQod2hpdGVzcGFjZVJFKS5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7IHJldHVybiBlbC5jbGFzc0xpc3QuYWRkKGMpOyB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKGNscyk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHZhciBjdXIgPSAiICIgKyAoZWwuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnKSArICIgIjsKICAgICAgaWYgKGN1ci5pbmRleE9mKCcgJyArIGNscyArICcgJykgPCAwKSB7CiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIChjdXIgKyBjbHMpLnRyaW0oKSk7CiAgICAgIH0KICAgIH0KICB9CgogIC8qKgogICAqIFJlbW92ZSBjbGFzcyB3aXRoIGNvbXBhdGliaWxpdHkgZm9yIFNWRyBzaW5jZSBjbGFzc0xpc3QgaXMgbm90IHN1cHBvcnRlZCBvbgogICAqIFNWRyBlbGVtZW50cyBpbiBJRQogICAqLwogIGZ1bmN0aW9uIHJlbW92ZUNsYXNzIChlbCwgY2xzKSB7CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgIGlmICghY2xzIHx8ICEoY2xzID0gY2xzLnRyaW0oKSkpIHsKICAgICAgcmV0dXJuCiAgICB9CgogICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi8KICAgIGlmIChlbC5jbGFzc0xpc3QpIHsKICAgICAgaWYgKGNscy5pbmRleE9mKCcgJykgPiAtMSkgewogICAgICAgIGNscy5zcGxpdCh3aGl0ZXNwYWNlUkUpLmZvckVhY2goZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGVsLmNsYXNzTGlzdC5yZW1vdmUoYyk7IH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xzKTsKICAgICAgfQogICAgICBpZiAoIWVsLmNsYXNzTGlzdC5sZW5ndGgpIHsKICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2NsYXNzJyk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHZhciBjdXIgPSAiICIgKyAoZWwuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnKSArICIgIjsKICAgICAgdmFyIHRhciA9ICcgJyArIGNscyArICcgJzsKICAgICAgd2hpbGUgKGN1ci5pbmRleE9mKHRhcikgPj0gMCkgewogICAgICAgIGN1ciA9IGN1ci5yZXBsYWNlKHRhciwgJyAnKTsKICAgICAgfQogICAgICBjdXIgPSBjdXIudHJpbSgpOwogICAgICBpZiAoY3VyKSB7CiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIGN1cik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdjbGFzcycpOwogICAgICB9CiAgICB9CiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gcmVzb2x2ZVRyYW5zaXRpb24gKGRlZiQkMSkgewogICAgaWYgKCFkZWYkJDEpIHsKICAgICAgcmV0dXJuCiAgICB9CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqLwogICAgaWYgKHR5cGVvZiBkZWYkJDEgPT09ICdvYmplY3QnKSB7CiAgICAgIHZhciByZXMgPSB7fTsKICAgICAgaWYgKGRlZiQkMS5jc3MgIT09IGZhbHNlKSB7CiAgICAgICAgZXh0ZW5kKHJlcywgYXV0b0Nzc1RyYW5zaXRpb24oZGVmJCQxLm5hbWUgfHwgJ3YnKSk7CiAgICAgIH0KICAgICAgZXh0ZW5kKHJlcywgZGVmJCQxKTsKICAgICAgcmV0dXJuIHJlcwogICAgfSBlbHNlIGlmICh0eXBlb2YgZGVmJCQxID09PSAnc3RyaW5nJykgewogICAgICByZXR1cm4gYXV0b0Nzc1RyYW5zaXRpb24oZGVmJCQxKQogICAgfQogIH0KCiAgdmFyIGF1dG9Dc3NUcmFuc2l0aW9uID0gY2FjaGVkKGZ1bmN0aW9uIChuYW1lKSB7CiAgICByZXR1cm4gewogICAgICBlbnRlckNsYXNzOiAobmFtZSArICItZW50ZXIiKSwKICAgICAgZW50ZXJUb0NsYXNzOiAobmFtZSArICItZW50ZXItdG8iKSwKICAgICAgZW50ZXJBY3RpdmVDbGFzczogKG5hbWUgKyAiLWVudGVyLWFjdGl2ZSIpLAogICAgICBsZWF2ZUNsYXNzOiAobmFtZSArICItbGVhdmUiKSwKICAgICAgbGVhdmVUb0NsYXNzOiAobmFtZSArICItbGVhdmUtdG8iKSwKICAgICAgbGVhdmVBY3RpdmVDbGFzczogKG5hbWUgKyAiLWxlYXZlLWFjdGl2ZSIpCiAgICB9CiAgfSk7CgogIHZhciBoYXNUcmFuc2l0aW9uID0gaW5Ccm93c2VyICYmICFpc0lFOTsKICB2YXIgVFJBTlNJVElPTiA9ICd0cmFuc2l0aW9uJzsKICB2YXIgQU5JTUFUSU9OID0gJ2FuaW1hdGlvbic7CgogIC8vIFRyYW5zaXRpb24gcHJvcGVydHkvZXZlbnQgc25pZmZpbmcKICB2YXIgdHJhbnNpdGlvblByb3AgPSAndHJhbnNpdGlvbic7CiAgdmFyIHRyYW5zaXRpb25FbmRFdmVudCA9ICd0cmFuc2l0aW9uZW5kJzsKICB2YXIgYW5pbWF0aW9uUHJvcCA9ICdhbmltYXRpb24nOwogIHZhciBhbmltYXRpb25FbmRFdmVudCA9ICdhbmltYXRpb25lbmQnOwogIGlmIChoYXNUcmFuc2l0aW9uKSB7CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgIGlmICh3aW5kb3cub250cmFuc2l0aW9uZW5kID09PSB1bmRlZmluZWQgJiYKICAgICAgd2luZG93Lm9ud2Via2l0dHJhbnNpdGlvbmVuZCAhPT0gdW5kZWZpbmVkCiAgICApIHsKICAgICAgdHJhbnNpdGlvblByb3AgPSAnV2Via2l0VHJhbnNpdGlvbic7CiAgICAgIHRyYW5zaXRpb25FbmRFdmVudCA9ICd3ZWJraXRUcmFuc2l0aW9uRW5kJzsKICAgIH0KICAgIGlmICh3aW5kb3cub25hbmltYXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJgogICAgICB3aW5kb3cub253ZWJraXRhbmltYXRpb25lbmQgIT09IHVuZGVmaW5lZAogICAgKSB7CiAgICAgIGFuaW1hdGlvblByb3AgPSAnV2Via2l0QW5pbWF0aW9uJzsKICAgICAgYW5pbWF0aW9uRW5kRXZlbnQgPSAnd2Via2l0QW5pbWF0aW9uRW5kJzsKICAgIH0KICB9CgogIC8vIGJpbmRpbmcgdG8gd2luZG93IGlzIG5lY2Vzc2FyeSB0byBtYWtlIGhvdCByZWxvYWQgd29yayBpbiBJRSBpbiBzdHJpY3QgbW9kZQogIHZhciByYWYgPSBpbkJyb3dzZXIKICAgID8gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZQogICAgICA/IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuYmluZCh3aW5kb3cpCiAgICAgIDogc2V0VGltZW91dAogICAgOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAoZm4pIHsgcmV0dXJuIGZuKCk7IH07CgogIGZ1bmN0aW9uIG5leHRGcmFtZSAoZm4pIHsKICAgIHJhZihmdW5jdGlvbiAoKSB7CiAgICAgIHJhZihmbik7CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIGFkZFRyYW5zaXRpb25DbGFzcyAoZWwsIGNscykgewogICAgdmFyIHRyYW5zaXRpb25DbGFzc2VzID0gZWwuX3RyYW5zaXRpb25DbGFzc2VzIHx8IChlbC5fdHJhbnNpdGlvbkNsYXNzZXMgPSBbXSk7CiAgICBpZiAodHJhbnNpdGlvbkNsYXNzZXMuaW5kZXhPZihjbHMpIDwgMCkgewogICAgICB0cmFuc2l0aW9uQ2xhc3Nlcy5wdXNoKGNscyk7CiAgICAgIGFkZENsYXNzKGVsLCBjbHMpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gcmVtb3ZlVHJhbnNpdGlvbkNsYXNzIChlbCwgY2xzKSB7CiAgICBpZiAoZWwuX3RyYW5zaXRpb25DbGFzc2VzKSB7CiAgICAgIHJlbW92ZShlbC5fdHJhbnNpdGlvbkNsYXNzZXMsIGNscyk7CiAgICB9CiAgICByZW1vdmVDbGFzcyhlbCwgY2xzKTsKICB9CgogIGZ1bmN0aW9uIHdoZW5UcmFuc2l0aW9uRW5kcyAoCiAgICBlbCwKICAgIGV4cGVjdGVkVHlwZSwKICAgIGNiCiAgKSB7CiAgICB2YXIgcmVmID0gZ2V0VHJhbnNpdGlvbkluZm8oZWwsIGV4cGVjdGVkVHlwZSk7CiAgICB2YXIgdHlwZSA9IHJlZi50eXBlOwogICAgdmFyIHRpbWVvdXQgPSByZWYudGltZW91dDsKICAgIHZhciBwcm9wQ291bnQgPSByZWYucHJvcENvdW50OwogICAgaWYgKCF0eXBlKSB7IHJldHVybiBjYigpIH0KICAgIHZhciBldmVudCA9IHR5cGUgPT09IFRSQU5TSVRJT04gPyB0cmFuc2l0aW9uRW5kRXZlbnQgOiBhbmltYXRpb25FbmRFdmVudDsKICAgIHZhciBlbmRlZCA9IDA7CiAgICB2YXIgZW5kID0gZnVuY3Rpb24gKCkgewogICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBvbkVuZCk7CiAgICAgIGNiKCk7CiAgICB9OwogICAgdmFyIG9uRW5kID0gZnVuY3Rpb24gKGUpIHsKICAgICAgaWYgKGUudGFyZ2V0ID09PSBlbCkgewogICAgICAgIGlmICgrK2VuZGVkID49IHByb3BDb3VudCkgewogICAgICAgICAgZW5kKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChlbmRlZCA8IHByb3BDb3VudCkgewogICAgICAgIGVuZCgpOwogICAgICB9CiAgICB9LCB0aW1lb3V0ICsgMSk7CiAgICBlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBvbkVuZCk7CiAgfQoKICB2YXIgdHJhbnNmb3JtUkUgPSAvXGIodHJhbnNmb3JtfGFsbCkoLHwkKS87CgogIGZ1bmN0aW9uIGdldFRyYW5zaXRpb25JbmZvIChlbCwgZXhwZWN0ZWRUeXBlKSB7CiAgICB2YXIgc3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpOwogICAgLy8gSlNET00gbWF5IHJldHVybiB1bmRlZmluZWQgZm9yIHRyYW5zaXRpb24gcHJvcGVydGllcwogICAgdmFyIHRyYW5zaXRpb25EZWxheXMgPSAoc3R5bGVzW3RyYW5zaXRpb25Qcm9wICsgJ0RlbGF5J10gfHwgJycpLnNwbGl0KCcsICcpOwogICAgdmFyIHRyYW5zaXRpb25EdXJhdGlvbnMgPSAoc3R5bGVzW3RyYW5zaXRpb25Qcm9wICsgJ0R1cmF0aW9uJ10gfHwgJycpLnNwbGl0KCcsICcpOwogICAgdmFyIHRyYW5zaXRpb25UaW1lb3V0ID0gZ2V0VGltZW91dCh0cmFuc2l0aW9uRGVsYXlzLCB0cmFuc2l0aW9uRHVyYXRpb25zKTsKICAgIHZhciBhbmltYXRpb25EZWxheXMgPSAoc3R5bGVzW2FuaW1hdGlvblByb3AgKyAnRGVsYXknXSB8fCAnJykuc3BsaXQoJywgJyk7CiAgICB2YXIgYW5pbWF0aW9uRHVyYXRpb25zID0gKHN0eWxlc1thbmltYXRpb25Qcm9wICsgJ0R1cmF0aW9uJ10gfHwgJycpLnNwbGl0KCcsICcpOwogICAgdmFyIGFuaW1hdGlvblRpbWVvdXQgPSBnZXRUaW1lb3V0KGFuaW1hdGlvbkRlbGF5cywgYW5pbWF0aW9uRHVyYXRpb25zKTsKCiAgICB2YXIgdHlwZTsKICAgIHZhciB0aW1lb3V0ID0gMDsKICAgIHZhciBwcm9wQ291bnQgPSAwOwogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoZXhwZWN0ZWRUeXBlID09PSBUUkFOU0lUSU9OKSB7CiAgICAgIGlmICh0cmFuc2l0aW9uVGltZW91dCA+IDApIHsKICAgICAgICB0eXBlID0gVFJBTlNJVElPTjsKICAgICAgICB0aW1lb3V0ID0gdHJhbnNpdGlvblRpbWVvdXQ7CiAgICAgICAgcHJvcENvdW50ID0gdHJhbnNpdGlvbkR1cmF0aW9ucy5sZW5ndGg7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoZXhwZWN0ZWRUeXBlID09PSBBTklNQVRJT04pIHsKICAgICAgaWYgKGFuaW1hdGlvblRpbWVvdXQgPiAwKSB7CiAgICAgICAgdHlwZSA9IEFOSU1BVElPTjsKICAgICAgICB0aW1lb3V0ID0gYW5pbWF0aW9uVGltZW91dDsKICAgICAgICBwcm9wQ291bnQgPSBhbmltYXRpb25EdXJhdGlvbnMubGVuZ3RoOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aW1lb3V0ID0gTWF0aC5tYXgodHJhbnNpdGlvblRpbWVvdXQsIGFuaW1hdGlvblRpbWVvdXQpOwogICAgICB0eXBlID0gdGltZW91dCA+IDAKICAgICAgICA/IHRyYW5zaXRpb25UaW1lb3V0ID4gYW5pbWF0aW9uVGltZW91dAogICAgICAgICAgPyBUUkFOU0lUSU9OCiAgICAgICAgICA6IEFOSU1BVElPTgogICAgICAgIDogbnVsbDsKICAgICAgcHJvcENvdW50ID0gdHlwZQogICAgICAgID8gdHlwZSA9PT0gVFJBTlNJVElPTgogICAgICAgICAgPyB0cmFuc2l0aW9uRHVyYXRpb25zLmxlbmd0aAogICAgICAgICAgOiBhbmltYXRpb25EdXJhdGlvbnMubGVuZ3RoCiAgICAgICAgOiAwOwogICAgfQogICAgdmFyIGhhc1RyYW5zZm9ybSA9CiAgICAgIHR5cGUgPT09IFRSQU5TSVRJT04gJiYKICAgICAgdHJhbnNmb3JtUkUudGVzdChzdHlsZXNbdHJhbnNpdGlvblByb3AgKyAnUHJvcGVydHknXSk7CiAgICByZXR1cm4gewogICAgICB0eXBlOiB0eXBlLAogICAgICB0aW1lb3V0OiB0aW1lb3V0LAogICAgICBwcm9wQ291bnQ6IHByb3BDb3VudCwKICAgICAgaGFzVHJhbnNmb3JtOiBoYXNUcmFuc2Zvcm0KICAgIH0KICB9CgogIGZ1bmN0aW9uIGdldFRpbWVvdXQgKGRlbGF5cywgZHVyYXRpb25zKSB7CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogICAgd2hpbGUgKGRlbGF5cy5sZW5ndGggPCBkdXJhdGlvbnMubGVuZ3RoKSB7CiAgICAgIGRlbGF5cyA9IGRlbGF5cy5jb25jYXQoZGVsYXlzKTsKICAgIH0KCiAgICByZXR1cm4gTWF0aC5tYXguYXBwbHkobnVsbCwgZHVyYXRpb25zLm1hcChmdW5jdGlvbiAoZCwgaSkgewogICAgICByZXR1cm4gdG9NcyhkKSArIHRvTXMoZGVsYXlzW2ldKQogICAgfSkpCiAgfQoKICAvLyBPbGQgdmVyc2lvbnMgb2YgQ2hyb21pdW0gKGJlbG93IDYxLjAuMzE2My4xMDApIGZvcm1hdHMgZmxvYXRpbmcgcG9pbnRlciBudW1iZXJzCiAgLy8gaW4gYSBsb2NhbGUtZGVwZW5kZW50IHdheSwgdXNpbmcgYSBjb21tYSBpbnN0ZWFkIG9mIGEgZG90LgogIC8vIElmIGNvbW1hIGlzIG5vdCByZXBsYWNlZCB3aXRoIGEgZG90LCB0aGUgaW5wdXQgd2lsbCBiZSByb3VuZGVkIGRvd24gKGkuZS4gYWN0aW5nCiAgLy8gYXMgYSBmbG9vciBmdW5jdGlvbikgY2F1c2luZyB1bmV4cGVjdGVkIGJlaGF2aW9ycwogIGZ1bmN0aW9uIHRvTXMgKHMpIHsKICAgIHJldHVybiBOdW1iZXIocy5zbGljZSgwLCAtMSkucmVwbGFjZSgnLCcsICcuJykpICogMTAwMAogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIGVudGVyICh2bm9kZSwgdG9nZ2xlRGlzcGxheSkgewogICAgdmFyIGVsID0gdm5vZGUuZWxtOwoKICAgIC8vIGNhbGwgbGVhdmUgY2FsbGJhY2sgbm93CiAgICBpZiAoaXNEZWYoZWwuX2xlYXZlQ2IpKSB7CiAgICAgIGVsLl9sZWF2ZUNiLmNhbmNlbGxlZCA9IHRydWU7CiAgICAgIGVsLl9sZWF2ZUNiKCk7CiAgICB9CgogICAgdmFyIGRhdGEgPSByZXNvbHZlVHJhbnNpdGlvbih2bm9kZS5kYXRhLnRyYW5zaXRpb24pOwogICAgaWYgKGlzVW5kZWYoZGF0YSkpIHsKICAgICAgcmV0dXJuCiAgICB9CgogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoaXNEZWYoZWwuX2VudGVyQ2IpIHx8IGVsLm5vZGVUeXBlICE9PSAxKSB7CiAgICAgIHJldHVybgogICAgfQoKICAgIHZhciBjc3MgPSBkYXRhLmNzczsKICAgIHZhciB0eXBlID0gZGF0YS50eXBlOwogICAgdmFyIGVudGVyQ2xhc3MgPSBkYXRhLmVudGVyQ2xhc3M7CiAgICB2YXIgZW50ZXJUb0NsYXNzID0gZGF0YS5lbnRlclRvQ2xhc3M7CiAgICB2YXIgZW50ZXJBY3RpdmVDbGFzcyA9IGRhdGEuZW50ZXJBY3RpdmVDbGFzczsKICAgIHZhciBhcHBlYXJDbGFzcyA9IGRhdGEuYXBwZWFyQ2xhc3M7CiAgICB2YXIgYXBwZWFyVG9DbGFzcyA9IGRhdGEuYXBwZWFyVG9DbGFzczsKICAgIHZhciBhcHBlYXJBY3RpdmVDbGFzcyA9IGRhdGEuYXBwZWFyQWN0aXZlQ2xhc3M7CiAgICB2YXIgYmVmb3JlRW50ZXIgPSBkYXRhLmJlZm9yZUVudGVyOwogICAgdmFyIGVudGVyID0gZGF0YS5lbnRlcjsKICAgIHZhciBhZnRlckVudGVyID0gZGF0YS5hZnRlckVudGVyOwogICAgdmFyIGVudGVyQ2FuY2VsbGVkID0gZGF0YS5lbnRlckNhbmNlbGxlZDsKICAgIHZhciBiZWZvcmVBcHBlYXIgPSBkYXRhLmJlZm9yZUFwcGVhcjsKICAgIHZhciBhcHBlYXIgPSBkYXRhLmFwcGVhcjsKICAgIHZhciBhZnRlckFwcGVhciA9IGRhdGEuYWZ0ZXJBcHBlYXI7CiAgICB2YXIgYXBwZWFyQ2FuY2VsbGVkID0gZGF0YS5hcHBlYXJDYW5jZWxsZWQ7CiAgICB2YXIgZHVyYXRpb24gPSBkYXRhLmR1cmF0aW9uOwoKICAgIC8vIGFjdGl2ZUluc3RhbmNlIHdpbGwgYWx3YXlzIGJlIHRoZSA8dHJhbnNpdGlvbj4gY29tcG9uZW50IG1hbmFnaW5nIHRoaXMKICAgIC8vIHRyYW5zaXRpb24uIE9uZSBlZGdlIGNhc2UgdG8gY2hlY2sgaXMgd2hlbiB0aGUgPHRyYW5zaXRpb24+IGlzIHBsYWNlZAogICAgLy8gYXMgdGhlIHJvb3Qgbm9kZSBvZiBhIGNoaWxkIGNvbXBvbmVudC4gSW4gdGhhdCBjYXNlIHdlIG5lZWQgdG8gY2hlY2sKICAgIC8vIDx0cmFuc2l0aW9uPidzIHBhcmVudCBmb3IgYXBwZWFyIGNoZWNrLgogICAgdmFyIGNvbnRleHQgPSBhY3RpdmVJbnN0YW5jZTsKICAgIHZhciB0cmFuc2l0aW9uTm9kZSA9IGFjdGl2ZUluc3RhbmNlLiR2bm9kZTsKICAgIHdoaWxlICh0cmFuc2l0aW9uTm9kZSAmJiB0cmFuc2l0aW9uTm9kZS5wYXJlbnQpIHsKICAgICAgY29udGV4dCA9IHRyYW5zaXRpb25Ob2RlLmNvbnRleHQ7CiAgICAgIHRyYW5zaXRpb25Ob2RlID0gdHJhbnNpdGlvbk5vZGUucGFyZW50OwogICAgfQoKICAgIHZhciBpc0FwcGVhciA9ICFjb250ZXh0Ll9pc01vdW50ZWQgfHwgIXZub2RlLmlzUm9vdEluc2VydDsKCiAgICBpZiAoaXNBcHBlYXIgJiYgIWFwcGVhciAmJiBhcHBlYXIgIT09ICcnKSB7CiAgICAgIHJldHVybgogICAgfQoKICAgIHZhciBzdGFydENsYXNzID0gaXNBcHBlYXIgJiYgYXBwZWFyQ2xhc3MKICAgICAgPyBhcHBlYXJDbGFzcwogICAgICA6IGVudGVyQ2xhc3M7CiAgICB2YXIgYWN0aXZlQ2xhc3MgPSBpc0FwcGVhciAmJiBhcHBlYXJBY3RpdmVDbGFzcwogICAgICA/IGFwcGVhckFjdGl2ZUNsYXNzCiAgICAgIDogZW50ZXJBY3RpdmVDbGFzczsKICAgIHZhciB0b0NsYXNzID0gaXNBcHBlYXIgJiYgYXBwZWFyVG9DbGFzcwogICAgICA/IGFwcGVhclRvQ2xhc3MKICAgICAgOiBlbnRlclRvQ2xhc3M7CgogICAgdmFyIGJlZm9yZUVudGVySG9vayA9IGlzQXBwZWFyCiAgICAgID8gKGJlZm9yZUFwcGVhciB8fCBiZWZvcmVFbnRlcikKICAgICAgOiBiZWZvcmVFbnRlcjsKICAgIHZhciBlbnRlckhvb2sgPSBpc0FwcGVhcgogICAgICA/ICh0eXBlb2YgYXBwZWFyID09PSAnZnVuY3Rpb24nID8gYXBwZWFyIDogZW50ZXIpCiAgICAgIDogZW50ZXI7CiAgICB2YXIgYWZ0ZXJFbnRlckhvb2sgPSBpc0FwcGVhcgogICAgICA/IChhZnRlckFwcGVhciB8fCBhZnRlckVudGVyKQogICAgICA6IGFmdGVyRW50ZXI7CiAgICB2YXIgZW50ZXJDYW5jZWxsZWRIb29rID0gaXNBcHBlYXIKICAgICAgPyAoYXBwZWFyQ2FuY2VsbGVkIHx8IGVudGVyQ2FuY2VsbGVkKQogICAgICA6IGVudGVyQ2FuY2VsbGVkOwoKICAgIHZhciBleHBsaWNpdEVudGVyRHVyYXRpb24gPSB0b051bWJlcigKICAgICAgaXNPYmplY3QoZHVyYXRpb24pCiAgICAgICAgPyBkdXJhdGlvbi5lbnRlcgogICAgICAgIDogZHVyYXRpb24KICAgICk7CgogICAgaWYgKGV4cGxpY2l0RW50ZXJEdXJhdGlvbiAhPSBudWxsKSB7CiAgICAgIGNoZWNrRHVyYXRpb24oZXhwbGljaXRFbnRlckR1cmF0aW9uLCAnZW50ZXInLCB2bm9kZSk7CiAgICB9CgogICAgdmFyIGV4cGVjdHNDU1MgPSBjc3MgIT09IGZhbHNlICYmICFpc0lFOTsKICAgIHZhciB1c2VyV2FudHNDb250cm9sID0gZ2V0SG9va0FyZ3VtZW50c0xlbmd0aChlbnRlckhvb2spOwoKICAgIHZhciBjYiA9IGVsLl9lbnRlckNiID0gb25jZShmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChleHBlY3RzQ1NTKSB7CiAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCB0b0NsYXNzKTsKICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGFjdGl2ZUNsYXNzKTsKICAgICAgfQogICAgICBpZiAoY2IuY2FuY2VsbGVkKSB7CiAgICAgICAgaWYgKGV4cGVjdHNDU1MpIHsKICAgICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgc3RhcnRDbGFzcyk7CiAgICAgICAgfQogICAgICAgIGVudGVyQ2FuY2VsbGVkSG9vayAmJiBlbnRlckNhbmNlbGxlZEhvb2soZWwpOwogICAgICB9IGVsc2UgewogICAgICAgIGFmdGVyRW50ZXJIb29rICYmIGFmdGVyRW50ZXJIb29rKGVsKTsKICAgICAgfQogICAgICBlbC5fZW50ZXJDYiA9IG51bGw7CiAgICB9KTsKCiAgICBpZiAoIXZub2RlLmRhdGEuc2hvdykgewogICAgICAvLyByZW1vdmUgcGVuZGluZyBsZWF2ZSBlbGVtZW50IG9uIGVudGVyIGJ5IGluamVjdGluZyBhbiBpbnNlcnQgaG9vawogICAgICBtZXJnZVZOb2RlSG9vayh2bm9kZSwgJ2luc2VydCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgcGFyZW50ID0gZWwucGFyZW50Tm9kZTsKICAgICAgICB2YXIgcGVuZGluZ05vZGUgPSBwYXJlbnQgJiYgcGFyZW50Ll9wZW5kaW5nICYmIHBhcmVudC5fcGVuZGluZ1t2bm9kZS5rZXldOwogICAgICAgIGlmIChwZW5kaW5nTm9kZSAmJgogICAgICAgICAgcGVuZGluZ05vZGUudGFnID09PSB2bm9kZS50YWcgJiYKICAgICAgICAgIHBlbmRpbmdOb2RlLmVsbS5fbGVhdmVDYgogICAgICAgICkgewogICAgICAgICAgcGVuZGluZ05vZGUuZWxtLl9sZWF2ZUNiKCk7CiAgICAgICAgfQogICAgICAgIGVudGVySG9vayAmJiBlbnRlckhvb2soZWwsIGNiKTsKICAgICAgfSk7CiAgICB9CgogICAgLy8gc3RhcnQgZW50ZXIgdHJhbnNpdGlvbgogICAgYmVmb3JlRW50ZXJIb29rICYmIGJlZm9yZUVudGVySG9vayhlbCk7CiAgICBpZiAoZXhwZWN0c0NTUykgewogICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIHN0YXJ0Q2xhc3MpOwogICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGFjdGl2ZUNsYXNzKTsKICAgICAgbmV4dEZyYW1lKGZ1bmN0aW9uICgpIHsKICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIHN0YXJ0Q2xhc3MpOwogICAgICAgIGlmICghY2IuY2FuY2VsbGVkKSB7CiAgICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIHRvQ2xhc3MpOwogICAgICAgICAgaWYgKCF1c2VyV2FudHNDb250cm9sKSB7CiAgICAgICAgICAgIGlmIChpc1ZhbGlkRHVyYXRpb24oZXhwbGljaXRFbnRlckR1cmF0aW9uKSkgewogICAgICAgICAgICAgIHNldFRpbWVvdXQoY2IsIGV4cGxpY2l0RW50ZXJEdXJhdGlvbik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgd2hlblRyYW5zaXRpb25FbmRzKGVsLCB0eXBlLCBjYik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIGlmICh2bm9kZS5kYXRhLnNob3cpIHsKICAgICAgdG9nZ2xlRGlzcGxheSAmJiB0b2dnbGVEaXNwbGF5KCk7CiAgICAgIGVudGVySG9vayAmJiBlbnRlckhvb2soZWwsIGNiKTsKICAgIH0KCiAgICBpZiAoIWV4cGVjdHNDU1MgJiYgIXVzZXJXYW50c0NvbnRyb2wpIHsKICAgICAgY2IoKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGxlYXZlICh2bm9kZSwgcm0pIHsKICAgIHZhciBlbCA9IHZub2RlLmVsbTsKCiAgICAvLyBjYWxsIGVudGVyIGNhbGxiYWNrIG5vdwogICAgaWYgKGlzRGVmKGVsLl9lbnRlckNiKSkgewogICAgICBlbC5fZW50ZXJDYi5jYW5jZWxsZWQgPSB0cnVlOwogICAgICBlbC5fZW50ZXJDYigpOwogICAgfQoKICAgIHZhciBkYXRhID0gcmVzb2x2ZVRyYW5zaXRpb24odm5vZGUuZGF0YS50cmFuc2l0aW9uKTsKICAgIGlmIChpc1VuZGVmKGRhdGEpIHx8IGVsLm5vZGVUeXBlICE9PSAxKSB7CiAgICAgIHJldHVybiBybSgpCiAgICB9CgogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoaXNEZWYoZWwuX2xlYXZlQ2IpKSB7CiAgICAgIHJldHVybgogICAgfQoKICAgIHZhciBjc3MgPSBkYXRhLmNzczsKICAgIHZhciB0eXBlID0gZGF0YS50eXBlOwogICAgdmFyIGxlYXZlQ2xhc3MgPSBkYXRhLmxlYXZlQ2xhc3M7CiAgICB2YXIgbGVhdmVUb0NsYXNzID0gZGF0YS5sZWF2ZVRvQ2xhc3M7CiAgICB2YXIgbGVhdmVBY3RpdmVDbGFzcyA9IGRhdGEubGVhdmVBY3RpdmVDbGFzczsKICAgIHZhciBiZWZvcmVMZWF2ZSA9IGRhdGEuYmVmb3JlTGVhdmU7CiAgICB2YXIgbGVhdmUgPSBkYXRhLmxlYXZlOwogICAgdmFyIGFmdGVyTGVhdmUgPSBkYXRhLmFmdGVyTGVhdmU7CiAgICB2YXIgbGVhdmVDYW5jZWxsZWQgPSBkYXRhLmxlYXZlQ2FuY2VsbGVkOwogICAgdmFyIGRlbGF5TGVhdmUgPSBkYXRhLmRlbGF5TGVhdmU7CiAgICB2YXIgZHVyYXRpb24gPSBkYXRhLmR1cmF0aW9uOwoKICAgIHZhciBleHBlY3RzQ1NTID0gY3NzICE9PSBmYWxzZSAmJiAhaXNJRTk7CiAgICB2YXIgdXNlcldhbnRzQ29udHJvbCA9IGdldEhvb2tBcmd1bWVudHNMZW5ndGgobGVhdmUpOwoKICAgIHZhciBleHBsaWNpdExlYXZlRHVyYXRpb24gPSB0b051bWJlcigKICAgICAgaXNPYmplY3QoZHVyYXRpb24pCiAgICAgICAgPyBkdXJhdGlvbi5sZWF2ZQogICAgICAgIDogZHVyYXRpb24KICAgICk7CgogICAgaWYgKGlzRGVmKGV4cGxpY2l0TGVhdmVEdXJhdGlvbikpIHsKICAgICAgY2hlY2tEdXJhdGlvbihleHBsaWNpdExlYXZlRHVyYXRpb24sICdsZWF2ZScsIHZub2RlKTsKICAgIH0KCiAgICB2YXIgY2IgPSBlbC5fbGVhdmVDYiA9IG9uY2UoZnVuY3Rpb24gKCkgewogICAgICBpZiAoZWwucGFyZW50Tm9kZSAmJiBlbC5wYXJlbnROb2RlLl9wZW5kaW5nKSB7CiAgICAgICAgZWwucGFyZW50Tm9kZS5fcGVuZGluZ1t2bm9kZS5rZXldID0gbnVsbDsKICAgICAgfQogICAgICBpZiAoZXhwZWN0c0NTUykgewogICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVUb0NsYXNzKTsKICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlQWN0aXZlQ2xhc3MpOwogICAgICB9CiAgICAgIGlmIChjYi5jYW5jZWxsZWQpIHsKICAgICAgICBpZiAoZXhwZWN0c0NTUykgewogICAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUNsYXNzKTsKICAgICAgICB9CiAgICAgICAgbGVhdmVDYW5jZWxsZWQgJiYgbGVhdmVDYW5jZWxsZWQoZWwpOwogICAgICB9IGVsc2UgewogICAgICAgIHJtKCk7CiAgICAgICAgYWZ0ZXJMZWF2ZSAmJiBhZnRlckxlYXZlKGVsKTsKICAgICAgfQogICAgICBlbC5fbGVhdmVDYiA9IG51bGw7CiAgICB9KTsKCiAgICBpZiAoZGVsYXlMZWF2ZSkgewogICAgICBkZWxheUxlYXZlKHBlcmZvcm1MZWF2ZSk7CiAgICB9IGVsc2UgewogICAgICBwZXJmb3JtTGVhdmUoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwZXJmb3JtTGVhdmUgKCkgewogICAgICAvLyB0aGUgZGVsYXllZCBsZWF2ZSBtYXkgaGF2ZSBhbHJlYWR5IGJlZW4gY2FuY2VsbGVkCiAgICAgIGlmIChjYi5jYW5jZWxsZWQpIHsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICAvLyByZWNvcmQgbGVhdmluZyBlbGVtZW50CiAgICAgIGlmICghdm5vZGUuZGF0YS5zaG93ICYmIGVsLnBhcmVudE5vZGUpIHsKICAgICAgICAoZWwucGFyZW50Tm9kZS5fcGVuZGluZyB8fCAoZWwucGFyZW50Tm9kZS5fcGVuZGluZyA9IHt9KSlbKHZub2RlLmtleSldID0gdm5vZGU7CiAgICAgIH0KICAgICAgYmVmb3JlTGVhdmUgJiYgYmVmb3JlTGVhdmUoZWwpOwogICAgICBpZiAoZXhwZWN0c0NTUykgewogICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVDbGFzcyk7CiAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUFjdGl2ZUNsYXNzKTsKICAgICAgICBuZXh0RnJhbWUoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUNsYXNzKTsKICAgICAgICAgIGlmICghY2IuY2FuY2VsbGVkKSB7CiAgICAgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVUb0NsYXNzKTsKICAgICAgICAgICAgaWYgKCF1c2VyV2FudHNDb250cm9sKSB7CiAgICAgICAgICAgICAgaWYgKGlzVmFsaWREdXJhdGlvbihleHBsaWNpdExlYXZlRHVyYXRpb24pKSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGNiLCBleHBsaWNpdExlYXZlRHVyYXRpb24pOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB3aGVuVHJhbnNpdGlvbkVuZHMoZWwsIHR5cGUsIGNiKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgICBsZWF2ZSAmJiBsZWF2ZShlbCwgY2IpOwogICAgICBpZiAoIWV4cGVjdHNDU1MgJiYgIXVzZXJXYW50c0NvbnRyb2wpIHsKICAgICAgICBjYigpOwogICAgICB9CiAgICB9CiAgfQoKICAvLyBvbmx5IHVzZWQgaW4gZGV2IG1vZGUKICBmdW5jdGlvbiBjaGVja0R1cmF0aW9uICh2YWwsIG5hbWUsIHZub2RlKSB7CiAgICBpZiAodHlwZW9mIHZhbCAhPT0gJ251bWJlcicpIHsKICAgICAgd2FybigKICAgICAgICAiPHRyYW5zaXRpb24+IGV4cGxpY2l0ICIgKyBuYW1lICsgIiBkdXJhdGlvbiBpcyBub3QgYSB2YWxpZCBudW1iZXIgLSAiICsKICAgICAgICAiZ290ICIgKyAoSlNPTi5zdHJpbmdpZnkodmFsKSkgKyAiLiIsCiAgICAgICAgdm5vZGUuY29udGV4dAogICAgICApOwogICAgfSBlbHNlIGlmIChpc05hTih2YWwpKSB7CiAgICAgIHdhcm4oCiAgICAgICAgIjx0cmFuc2l0aW9uPiBleHBsaWNpdCAiICsgbmFtZSArICIgZHVyYXRpb24gaXMgTmFOIC0gIiArCiAgICAgICAgJ3RoZSBkdXJhdGlvbiBleHByZXNzaW9uIG1pZ2h0IGJlIGluY29ycmVjdC4nLAogICAgICAgIHZub2RlLmNvbnRleHQKICAgICAgKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGlzVmFsaWREdXJhdGlvbiAodmFsKSB7CiAgICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ251bWJlcicgJiYgIWlzTmFOKHZhbCkKICB9CgogIC8qKgogICAqIE5vcm1hbGl6ZSBhIHRyYW5zaXRpb24gaG9vaydzIGFyZ3VtZW50IGxlbmd0aC4gVGhlIGhvb2sgbWF5IGJlOgogICAqIC0gYSBtZXJnZWQgaG9vayAoaW52b2tlcikgd2l0aCB0aGUgb3JpZ2luYWwgaW4gLmZucwogICAqIC0gYSB3cmFwcGVkIGNvbXBvbmVudCBtZXRob2QgKGNoZWNrIC5fbGVuZ3RoKQogICAqIC0gYSBwbGFpbiBmdW5jdGlvbiAoLmxlbmd0aCkKICAgKi8KICBmdW5jdGlvbiBnZXRIb29rQXJndW1lbnRzTGVuZ3RoIChmbikgewogICAgaWYgKGlzVW5kZWYoZm4pKSB7CiAgICAgIHJldHVybiBmYWxzZQogICAgfQogICAgdmFyIGludm9rZXJGbnMgPSBmbi5mbnM7CiAgICBpZiAoaXNEZWYoaW52b2tlckZucykpIHsKICAgICAgLy8gaW52b2tlcgogICAgICByZXR1cm4gZ2V0SG9va0FyZ3VtZW50c0xlbmd0aCgKICAgICAgICBBcnJheS5pc0FycmF5KGludm9rZXJGbnMpCiAgICAgICAgICA/IGludm9rZXJGbnNbMF0KICAgICAgICAgIDogaW52b2tlckZucwogICAgICApCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gKGZuLl9sZW5ndGggfHwgZm4ubGVuZ3RoKSA+IDEKICAgIH0KICB9CgogIGZ1bmN0aW9uIF9lbnRlciAoXywgdm5vZGUpIHsKICAgIGlmICh2bm9kZS5kYXRhLnNob3cgIT09IHRydWUpIHsKICAgICAgZW50ZXIodm5vZGUpOwogICAgfQogIH0KCiAgdmFyIHRyYW5zaXRpb24gPSBpbkJyb3dzZXIgPyB7CiAgICBjcmVhdGU6IF9lbnRlciwKICAgIGFjdGl2YXRlOiBfZW50ZXIsCiAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSQkMSAodm5vZGUsIHJtKSB7CiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovCiAgICAgIGlmICh2bm9kZS5kYXRhLnNob3cgIT09IHRydWUpIHsKICAgICAgICBsZWF2ZSh2bm9kZSwgcm0pOwogICAgICB9IGVsc2UgewogICAgICAgIHJtKCk7CiAgICAgIH0KICAgIH0KICB9IDoge307CgogIHZhciBwbGF0Zm9ybU1vZHVsZXMgPSBbCiAgICBhdHRycywKICAgIGtsYXNzLAogICAgZXZlbnRzLAogICAgZG9tUHJvcHMsCiAgICBzdHlsZSwKICAgIHRyYW5zaXRpb24KICBdOwoKICAvKiAgKi8KCiAgLy8gdGhlIGRpcmVjdGl2ZSBtb2R1bGUgc2hvdWxkIGJlIGFwcGxpZWQgbGFzdCwgYWZ0ZXIgYWxsCiAgLy8gYnVpbHQtaW4gbW9kdWxlcyBoYXZlIGJlZW4gYXBwbGllZC4KICB2YXIgbW9kdWxlcyA9IHBsYXRmb3JtTW9kdWxlcy5jb25jYXQoYmFzZU1vZHVsZXMpOwoKICB2YXIgcGF0Y2ggPSBjcmVhdGVQYXRjaEZ1bmN0aW9uKHsgbm9kZU9wczogbm9kZU9wcywgbW9kdWxlczogbW9kdWxlcyB9KTsKCiAgLyoqCiAgICogTm90IHR5cGUgY2hlY2tpbmcgdGhpcyBmaWxlIGJlY2F1c2UgZmxvdyBkb2Vzbid0IGxpa2UgYXR0YWNoaW5nCiAgICogcHJvcGVydGllcyB0byBFbGVtZW50cy4KICAgKi8KCiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgaWYgKGlzSUU5KSB7CiAgICAvLyBodHRwOi8vd3d3Lm1hdHRzNDExLmNvbS9wb3N0L2ludGVybmV0LWV4cGxvcmVyLTktb25pbnB1dC8KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3NlbGVjdGlvbmNoYW5nZScsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGVsID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDsKICAgICAgaWYgKGVsICYmIGVsLnZtb2RlbCkgewogICAgICAgIHRyaWdnZXIoZWwsICdpbnB1dCcpOwogICAgICB9CiAgICB9KTsKICB9CgogIHZhciBkaXJlY3RpdmUgPSB7CiAgICBpbnNlcnRlZDogZnVuY3Rpb24gaW5zZXJ0ZWQgKGVsLCBiaW5kaW5nLCB2bm9kZSwgb2xkVm5vZGUpIHsKICAgICAgaWYgKHZub2RlLnRhZyA9PT0gJ3NlbGVjdCcpIHsKICAgICAgICAvLyAjNjkwMwogICAgICAgIGlmIChvbGRWbm9kZS5lbG0gJiYgIW9sZFZub2RlLmVsbS5fdk9wdGlvbnMpIHsKICAgICAgICAgIG1lcmdlVk5vZGVIb29rKHZub2RlLCAncG9zdHBhdGNoJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBkaXJlY3RpdmUuY29tcG9uZW50VXBkYXRlZChlbCwgYmluZGluZywgdm5vZGUpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNldFNlbGVjdGVkKGVsLCBiaW5kaW5nLCB2bm9kZS5jb250ZXh0KTsKICAgICAgICB9CiAgICAgICAgZWwuX3ZPcHRpb25zID0gW10ubWFwLmNhbGwoZWwub3B0aW9ucywgZ2V0VmFsdWUpOwogICAgICB9IGVsc2UgaWYgKHZub2RlLnRhZyA9PT0gJ3RleHRhcmVhJyB8fCBpc1RleHRJbnB1dFR5cGUoZWwudHlwZSkpIHsKICAgICAgICBlbC5fdk1vZGlmaWVycyA9IGJpbmRpbmcubW9kaWZpZXJzOwogICAgICAgIGlmICghYmluZGluZy5tb2RpZmllcnMubGF6eSkgewogICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY29tcG9zaXRpb25zdGFydCcsIG9uQ29tcG9zaXRpb25TdGFydCk7CiAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjb21wb3NpdGlvbmVuZCcsIG9uQ29tcG9zaXRpb25FbmQpOwogICAgICAgICAgLy8gU2FmYXJpIDwgMTAuMiAmIFVJV2ViVmlldyBkb2Vzbid0IGZpcmUgY29tcG9zaXRpb25lbmQgd2hlbgogICAgICAgICAgLy8gc3dpdGNoaW5nIGZvY3VzIGJlZm9yZSBjb25maXJtaW5nIGNvbXBvc2l0aW9uIGNob2ljZQogICAgICAgICAgLy8gdGhpcyBhbHNvIGZpeGVzIHRoZSBpc3N1ZSB3aGVyZSBzb21lIGJyb3dzZXJzIGUuZy4gaU9TIENocm9tZQogICAgICAgICAgLy8gZmlyZXMgImNoYW5nZSIgaW5zdGVhZCBvZiAiaW5wdXQiIG9uIGF1dG9jb21wbGV0ZS4KICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uQ29tcG9zaXRpb25FbmQpOwogICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICAgICAgICBpZiAoaXNJRTkpIHsKICAgICAgICAgICAgZWwudm1vZGVsID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgY29tcG9uZW50VXBkYXRlZDogZnVuY3Rpb24gY29tcG9uZW50VXBkYXRlZCAoZWwsIGJpbmRpbmcsIHZub2RlKSB7CiAgICAgIGlmICh2bm9kZS50YWcgPT09ICdzZWxlY3QnKSB7CiAgICAgICAgc2V0U2VsZWN0ZWQoZWwsIGJpbmRpbmcsIHZub2RlLmNvbnRleHQpOwogICAgICAgIC8vIGluIGNhc2UgdGhlIG9wdGlvbnMgcmVuZGVyZWQgYnkgdi1mb3IgaGF2ZSBjaGFuZ2VkLAogICAgICAgIC8vIGl0J3MgcG9zc2libGUgdGhhdCB0aGUgdmFsdWUgaXMgb3V0LW9mLXN5bmMgd2l0aCB0aGUgcmVuZGVyZWQgb3B0aW9ucy4KICAgICAgICAvLyBkZXRlY3Qgc3VjaCBjYXNlcyBhbmQgZmlsdGVyIG91dCB2YWx1ZXMgdGhhdCBubyBsb25nZXIgaGFzIGEgbWF0Y2hpbmcKICAgICAgICAvLyBvcHRpb24gaW4gdGhlIERPTS4KICAgICAgICB2YXIgcHJldk9wdGlvbnMgPSBlbC5fdk9wdGlvbnM7CiAgICAgICAgdmFyIGN1ck9wdGlvbnMgPSBlbC5fdk9wdGlvbnMgPSBbXS5tYXAuY2FsbChlbC5vcHRpb25zLCBnZXRWYWx1ZSk7CiAgICAgICAgaWYgKGN1ck9wdGlvbnMuc29tZShmdW5jdGlvbiAobywgaSkgeyByZXR1cm4gIWxvb3NlRXF1YWwobywgcHJldk9wdGlvbnNbaV0pOyB9KSkgewogICAgICAgICAgLy8gdHJpZ2dlciBjaGFuZ2UgZXZlbnQgaWYKICAgICAgICAgIC8vIG5vIG1hdGNoaW5nIG9wdGlvbiBmb3VuZCBmb3IgYXQgbGVhc3Qgb25lIHZhbHVlCiAgICAgICAgICB2YXIgbmVlZFJlc2V0ID0gZWwubXVsdGlwbGUKICAgICAgICAgICAgPyBiaW5kaW5nLnZhbHVlLnNvbWUoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIGhhc05vTWF0Y2hpbmdPcHRpb24odiwgY3VyT3B0aW9ucyk7IH0pCiAgICAgICAgICAgIDogYmluZGluZy52YWx1ZSAhPT0gYmluZGluZy5vbGRWYWx1ZSAmJiBoYXNOb01hdGNoaW5nT3B0aW9uKGJpbmRpbmcudmFsdWUsIGN1ck9wdGlvbnMpOwogICAgICAgICAgaWYgKG5lZWRSZXNldCkgewogICAgICAgICAgICB0cmlnZ2VyKGVsLCAnY2hhbmdlJyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgZnVuY3Rpb24gc2V0U2VsZWN0ZWQgKGVsLCBiaW5kaW5nLCB2bSkgewogICAgYWN0dWFsbHlTZXRTZWxlY3RlZChlbCwgYmluZGluZywgdm0pOwogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoaXNJRSB8fCBpc0VkZ2UpIHsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgYWN0dWFsbHlTZXRTZWxlY3RlZChlbCwgYmluZGluZywgdm0pOwogICAgICB9LCAwKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGFjdHVhbGx5U2V0U2VsZWN0ZWQgKGVsLCBiaW5kaW5nLCB2bSkgewogICAgdmFyIHZhbHVlID0gYmluZGluZy52YWx1ZTsKICAgIHZhciBpc011bHRpcGxlID0gZWwubXVsdGlwbGU7CiAgICBpZiAoaXNNdWx0aXBsZSAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgICAgd2FybigKICAgICAgICAiPHNlbGVjdCBtdWx0aXBsZSB2LW1vZGVsPVwiIiArIChiaW5kaW5nLmV4cHJlc3Npb24pICsgIlwiPiAiICsKICAgICAgICAiZXhwZWN0cyBhbiBBcnJheSB2YWx1ZSBmb3IgaXRzIGJpbmRpbmcsIGJ1dCBnb3QgIiArIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLnNsaWNlKDgsIC0xKSksCiAgICAgICAgdm0KICAgICAgKTsKICAgICAgcmV0dXJuCiAgICB9CiAgICB2YXIgc2VsZWN0ZWQsIG9wdGlvbjsKICAgIGZvciAodmFyIGkgPSAwLCBsID0gZWwub3B0aW9ucy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgb3B0aW9uID0gZWwub3B0aW9uc1tpXTsKICAgICAgaWYgKGlzTXVsdGlwbGUpIHsKICAgICAgICBzZWxlY3RlZCA9IGxvb3NlSW5kZXhPZih2YWx1ZSwgZ2V0VmFsdWUob3B0aW9uKSkgPiAtMTsKICAgICAgICBpZiAob3B0aW9uLnNlbGVjdGVkICE9PSBzZWxlY3RlZCkgewogICAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gc2VsZWN0ZWQ7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChsb29zZUVxdWFsKGdldFZhbHVlKG9wdGlvbiksIHZhbHVlKSkgewogICAgICAgICAgaWYgKGVsLnNlbGVjdGVkSW5kZXggIT09IGkpIHsKICAgICAgICAgICAgZWwuc2VsZWN0ZWRJbmRleCA9IGk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGlmICghaXNNdWx0aXBsZSkgewogICAgICBlbC5zZWxlY3RlZEluZGV4ID0gLTE7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBoYXNOb01hdGNoaW5nT3B0aW9uICh2YWx1ZSwgb3B0aW9ucykgewogICAgcmV0dXJuIG9wdGlvbnMuZXZlcnkoZnVuY3Rpb24gKG8pIHsgcmV0dXJuICFsb29zZUVxdWFsKG8sIHZhbHVlKTsgfSkKICB9CgogIGZ1bmN0aW9uIGdldFZhbHVlIChvcHRpb24pIHsKICAgIHJldHVybiAnX3ZhbHVlJyBpbiBvcHRpb24KICAgICAgPyBvcHRpb24uX3ZhbHVlCiAgICAgIDogb3B0aW9uLnZhbHVlCiAgfQoKICBmdW5jdGlvbiBvbkNvbXBvc2l0aW9uU3RhcnQgKGUpIHsKICAgIGUudGFyZ2V0LmNvbXBvc2luZyA9IHRydWU7CiAgfQoKICBmdW5jdGlvbiBvbkNvbXBvc2l0aW9uRW5kIChlKSB7CiAgICAvLyBwcmV2ZW50IHRyaWdnZXJpbmcgYW4gaW5wdXQgZXZlbnQgZm9yIG5vIHJlYXNvbgogICAgaWYgKCFlLnRhcmdldC5jb21wb3NpbmcpIHsgcmV0dXJuIH0KICAgIGUudGFyZ2V0LmNvbXBvc2luZyA9IGZhbHNlOwogICAgdHJpZ2dlcihlLnRhcmdldCwgJ2lucHV0Jyk7CiAgfQoKICBmdW5jdGlvbiB0cmlnZ2VyIChlbCwgdHlwZSkgewogICAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnSFRNTEV2ZW50cycpOwogICAgZS5pbml0RXZlbnQodHlwZSwgdHJ1ZSwgdHJ1ZSk7CiAgICBlbC5kaXNwYXRjaEV2ZW50KGUpOwogIH0KCiAgLyogICovCgogIC8vIHJlY3Vyc2l2ZWx5IHNlYXJjaCBmb3IgcG9zc2libGUgdHJhbnNpdGlvbiBkZWZpbmVkIGluc2lkZSB0aGUgY29tcG9uZW50IHJvb3QKICBmdW5jdGlvbiBsb2NhdGVOb2RlICh2bm9kZSkgewogICAgcmV0dXJuIHZub2RlLmNvbXBvbmVudEluc3RhbmNlICYmICghdm5vZGUuZGF0YSB8fCAhdm5vZGUuZGF0YS50cmFuc2l0aW9uKQogICAgICA/IGxvY2F0ZU5vZGUodm5vZGUuY29tcG9uZW50SW5zdGFuY2UuX3Zub2RlKQogICAgICA6IHZub2RlCiAgfQoKICB2YXIgc2hvdyA9IHsKICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQgKGVsLCByZWYsIHZub2RlKSB7CiAgICAgIHZhciB2YWx1ZSA9IHJlZi52YWx1ZTsKCiAgICAgIHZub2RlID0gbG9jYXRlTm9kZSh2bm9kZSk7CiAgICAgIHZhciB0cmFuc2l0aW9uJCQxID0gdm5vZGUuZGF0YSAmJiB2bm9kZS5kYXRhLnRyYW5zaXRpb247CiAgICAgIHZhciBvcmlnaW5hbERpc3BsYXkgPSBlbC5fX3ZPcmlnaW5hbERpc3BsYXkgPQogICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJyA/ICcnIDogZWwuc3R5bGUuZGlzcGxheTsKICAgICAgaWYgKHZhbHVlICYmIHRyYW5zaXRpb24kJDEpIHsKICAgICAgICB2bm9kZS5kYXRhLnNob3cgPSB0cnVlOwogICAgICAgIGVudGVyKHZub2RlLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gb3JpZ2luYWxEaXNwbGF5OwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSB2YWx1ZSA/IG9yaWdpbmFsRGlzcGxheSA6ICdub25lJzsKICAgICAgfQogICAgfSwKCiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSAoZWwsIHJlZiwgdm5vZGUpIHsKICAgICAgdmFyIHZhbHVlID0gcmVmLnZhbHVlOwogICAgICB2YXIgb2xkVmFsdWUgPSByZWYub2xkVmFsdWU7CgogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgaWYgKCF2YWx1ZSA9PT0gIW9sZFZhbHVlKSB7IHJldHVybiB9CiAgICAgIHZub2RlID0gbG9jYXRlTm9kZSh2bm9kZSk7CiAgICAgIHZhciB0cmFuc2l0aW9uJCQxID0gdm5vZGUuZGF0YSAmJiB2bm9kZS5kYXRhLnRyYW5zaXRpb247CiAgICAgIGlmICh0cmFuc2l0aW9uJCQxKSB7CiAgICAgICAgdm5vZGUuZGF0YS5zaG93ID0gdHJ1ZTsKICAgICAgICBpZiAodmFsdWUpIHsKICAgICAgICAgIGVudGVyKHZub2RlLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSBlbC5fX3ZPcmlnaW5hbERpc3BsYXk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbGVhdmUodm5vZGUsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gdmFsdWUgPyBlbC5fX3ZPcmlnaW5hbERpc3BsYXkgOiAnbm9uZSc7CiAgICAgIH0KICAgIH0sCgogICAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQgKAogICAgICBlbCwKICAgICAgYmluZGluZywKICAgICAgdm5vZGUsCiAgICAgIG9sZFZub2RlLAogICAgICBpc0Rlc3Ryb3kKICAgICkgewogICAgICBpZiAoIWlzRGVzdHJveSkgewogICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSBlbC5fX3ZPcmlnaW5hbERpc3BsYXk7CiAgICAgIH0KICAgIH0KICB9OwoKICB2YXIgcGxhdGZvcm1EaXJlY3RpdmVzID0gewogICAgbW9kZWw6IGRpcmVjdGl2ZSwKICAgIHNob3c6IHNob3cKICB9OwoKICAvKiAgKi8KCiAgdmFyIHRyYW5zaXRpb25Qcm9wcyA9IHsKICAgIG5hbWU6IFN0cmluZywKICAgIGFwcGVhcjogQm9vbGVhbiwKICAgIGNzczogQm9vbGVhbiwKICAgIG1vZGU6IFN0cmluZywKICAgIHR5cGU6IFN0cmluZywKICAgIGVudGVyQ2xhc3M6IFN0cmluZywKICAgIGxlYXZlQ2xhc3M6IFN0cmluZywKICAgIGVudGVyVG9DbGFzczogU3RyaW5nLAogICAgbGVhdmVUb0NsYXNzOiBTdHJpbmcsCiAgICBlbnRlckFjdGl2ZUNsYXNzOiBTdHJpbmcsCiAgICBsZWF2ZUFjdGl2ZUNsYXNzOiBTdHJpbmcsCiAgICBhcHBlYXJDbGFzczogU3RyaW5nLAogICAgYXBwZWFyQWN0aXZlQ2xhc3M6IFN0cmluZywKICAgIGFwcGVhclRvQ2xhc3M6IFN0cmluZywKICAgIGR1cmF0aW9uOiBbTnVtYmVyLCBTdHJpbmcsIE9iamVjdF0KICB9OwoKICAvLyBpbiBjYXNlIHRoZSBjaGlsZCBpcyBhbHNvIGFuIGFic3RyYWN0IGNvbXBvbmVudCwgZS5nLiA8a2VlcC1hbGl2ZT4KICAvLyB3ZSB3YW50IHRvIHJlY3Vyc2l2ZWx5IHJldHJpZXZlIHRoZSByZWFsIGNvbXBvbmVudCB0byBiZSByZW5kZXJlZAogIGZ1bmN0aW9uIGdldFJlYWxDaGlsZCAodm5vZGUpIHsKICAgIHZhciBjb21wT3B0aW9ucyA9IHZub2RlICYmIHZub2RlLmNvbXBvbmVudE9wdGlvbnM7CiAgICBpZiAoY29tcE9wdGlvbnMgJiYgY29tcE9wdGlvbnMuQ3Rvci5vcHRpb25zLmFic3RyYWN0KSB7CiAgICAgIHJldHVybiBnZXRSZWFsQ2hpbGQoZ2V0Rmlyc3RDb21wb25lbnRDaGlsZChjb21wT3B0aW9ucy5jaGlsZHJlbikpCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gdm5vZGUKICAgIH0KICB9CgogIGZ1bmN0aW9uIGV4dHJhY3RUcmFuc2l0aW9uRGF0YSAoY29tcCkgewogICAgdmFyIGRhdGEgPSB7fTsKICAgIHZhciBvcHRpb25zID0gY29tcC4kb3B0aW9uczsKICAgIC8vIHByb3BzCiAgICBmb3IgKHZhciBrZXkgaW4gb3B0aW9ucy5wcm9wc0RhdGEpIHsKICAgICAgZGF0YVtrZXldID0gY29tcFtrZXldOwogICAgfQogICAgLy8gZXZlbnRzLgogICAgLy8gZXh0cmFjdCBsaXN0ZW5lcnMgYW5kIHBhc3MgdGhlbSBkaXJlY3RseSB0byB0aGUgdHJhbnNpdGlvbiBtZXRob2RzCiAgICB2YXIgbGlzdGVuZXJzID0gb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzOwogICAgZm9yICh2YXIga2V5JDEgaW4gbGlzdGVuZXJzKSB7CiAgICAgIGRhdGFbY2FtZWxpemUoa2V5JDEpXSA9IGxpc3RlbmVyc1trZXkkMV07CiAgICB9CiAgICByZXR1cm4gZGF0YQogIH0KCiAgZnVuY3Rpb24gcGxhY2Vob2xkZXIgKGgsIHJhd0NoaWxkKSB7CiAgICBpZiAoL1xkLWtlZXAtYWxpdmUkLy50ZXN0KHJhd0NoaWxkLnRhZykpIHsKICAgICAgcmV0dXJuIGgoJ2tlZXAtYWxpdmUnLCB7CiAgICAgICAgcHJvcHM6IHJhd0NoaWxkLmNvbXBvbmVudE9wdGlvbnMucHJvcHNEYXRhCiAgICAgIH0pCiAgICB9CiAgfQoKICBmdW5jdGlvbiBoYXNQYXJlbnRUcmFuc2l0aW9uICh2bm9kZSkgewogICAgd2hpbGUgKCh2bm9kZSA9IHZub2RlLnBhcmVudCkpIHsKICAgICAgaWYgKHZub2RlLmRhdGEudHJhbnNpdGlvbikgewogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIGlzU2FtZUNoaWxkIChjaGlsZCwgb2xkQ2hpbGQpIHsKICAgIHJldHVybiBvbGRDaGlsZC5rZXkgPT09IGNoaWxkLmtleSAmJiBvbGRDaGlsZC50YWcgPT09IGNoaWxkLnRhZwogIH0KCiAgdmFyIGlzTm90VGV4dE5vZGUgPSBmdW5jdGlvbiAoYykgeyByZXR1cm4gYy50YWcgfHwgaXNBc3luY1BsYWNlaG9sZGVyKGMpOyB9OwoKICB2YXIgaXNWU2hvd0RpcmVjdGl2ZSA9IGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLm5hbWUgPT09ICdzaG93JzsgfTsKCiAgdmFyIFRyYW5zaXRpb24gPSB7CiAgICBuYW1lOiAndHJhbnNpdGlvbicsCiAgICBwcm9wczogdHJhbnNpdGlvblByb3BzLAogICAgYWJzdHJhY3Q6IHRydWUsCgogICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIgKGgpIHsKICAgICAgdmFyIHRoaXMkMSA9IHRoaXM7CgogICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLiRzbG90cy5kZWZhdWx0OwogICAgICBpZiAoIWNoaWxkcmVuKSB7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIC8vIGZpbHRlciBvdXQgdGV4dCBub2RlcyAocG9zc2libGUgd2hpdGVzcGFjZXMpCiAgICAgIGNoaWxkcmVuID0gY2hpbGRyZW4uZmlsdGVyKGlzTm90VGV4dE5vZGUpOwogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgaWYgKCFjaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgICByZXR1cm4KICAgICAgfQoKICAgICAgLy8gd2FybiBtdWx0aXBsZSBlbGVtZW50cwogICAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID4gMSkgewogICAgICAgIHdhcm4oCiAgICAgICAgICAnPHRyYW5zaXRpb24+IGNhbiBvbmx5IGJlIHVzZWQgb24gYSBzaW5nbGUgZWxlbWVudC4gVXNlICcgKwogICAgICAgICAgJzx0cmFuc2l0aW9uLWdyb3VwPiBmb3IgbGlzdHMuJywKICAgICAgICAgIHRoaXMuJHBhcmVudAogICAgICAgICk7CiAgICAgIH0KCiAgICAgIHZhciBtb2RlID0gdGhpcy5tb2RlOwoKICAgICAgLy8gd2FybiBpbnZhbGlkIG1vZGUKICAgICAgaWYgKG1vZGUgJiYgbW9kZSAhPT0gJ2luLW91dCcgJiYgbW9kZSAhPT0gJ291dC1pbicKICAgICAgKSB7CiAgICAgICAgd2FybigKICAgICAgICAgICdpbnZhbGlkIDx0cmFuc2l0aW9uPiBtb2RlOiAnICsgbW9kZSwKICAgICAgICAgIHRoaXMuJHBhcmVudAogICAgICAgICk7CiAgICAgIH0KCiAgICAgIHZhciByYXdDaGlsZCA9IGNoaWxkcmVuWzBdOwoKICAgICAgLy8gaWYgdGhpcyBpcyBhIGNvbXBvbmVudCByb290IG5vZGUgYW5kIHRoZSBjb21wb25lbnQncwogICAgICAvLyBwYXJlbnQgY29udGFpbmVyIG5vZGUgYWxzbyBoYXMgdHJhbnNpdGlvbiwgc2tpcC4KICAgICAgaWYgKGhhc1BhcmVudFRyYW5zaXRpb24odGhpcy4kdm5vZGUpKSB7CiAgICAgICAgcmV0dXJuIHJhd0NoaWxkCiAgICAgIH0KCiAgICAgIC8vIGFwcGx5IHRyYW5zaXRpb24gZGF0YSB0byBjaGlsZAogICAgICAvLyB1c2UgZ2V0UmVhbENoaWxkKCkgdG8gaWdub3JlIGFic3RyYWN0IGNvbXBvbmVudHMgZS5nLiBrZWVwLWFsaXZlCiAgICAgIHZhciBjaGlsZCA9IGdldFJlYWxDaGlsZChyYXdDaGlsZCk7CiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgICBpZiAoIWNoaWxkKSB7CiAgICAgICAgcmV0dXJuIHJhd0NoaWxkCiAgICAgIH0KCiAgICAgIGlmICh0aGlzLl9sZWF2aW5nKSB7CiAgICAgICAgcmV0dXJuIHBsYWNlaG9sZGVyKGgsIHJhd0NoaWxkKQogICAgICB9CgogICAgICAvLyBlbnN1cmUgYSBrZXkgdGhhdCBpcyB1bmlxdWUgdG8gdGhlIHZub2RlIHR5cGUgYW5kIHRvIHRoaXMgdHJhbnNpdGlvbgogICAgICAvLyBjb21wb25lbnQgaW5zdGFuY2UuIFRoaXMga2V5IHdpbGwgYmUgdXNlZCB0byByZW1vdmUgcGVuZGluZyBsZWF2aW5nIG5vZGVzCiAgICAgIC8vIGR1cmluZyBlbnRlcmluZy4KICAgICAgdmFyIGlkID0gIl9fdHJhbnNpdGlvbi0iICsgKHRoaXMuX3VpZCkgKyAiLSI7CiAgICAgIGNoaWxkLmtleSA9IGNoaWxkLmtleSA9PSBudWxsCiAgICAgICAgPyBjaGlsZC5pc0NvbW1lbnQKICAgICAgICAgID8gaWQgKyAnY29tbWVudCcKICAgICAgICAgIDogaWQgKyBjaGlsZC50YWcKICAgICAgICA6IGlzUHJpbWl0aXZlKGNoaWxkLmtleSkKICAgICAgICAgID8gKFN0cmluZyhjaGlsZC5rZXkpLmluZGV4T2YoaWQpID09PSAwID8gY2hpbGQua2V5IDogaWQgKyBjaGlsZC5rZXkpCiAgICAgICAgICA6IGNoaWxkLmtleTsKCiAgICAgIHZhciBkYXRhID0gKGNoaWxkLmRhdGEgfHwgKGNoaWxkLmRhdGEgPSB7fSkpLnRyYW5zaXRpb24gPSBleHRyYWN0VHJhbnNpdGlvbkRhdGEodGhpcyk7CiAgICAgIHZhciBvbGRSYXdDaGlsZCA9IHRoaXMuX3Zub2RlOwogICAgICB2YXIgb2xkQ2hpbGQgPSBnZXRSZWFsQ2hpbGQob2xkUmF3Q2hpbGQpOwoKICAgICAgLy8gbWFyayB2LXNob3cKICAgICAgLy8gc28gdGhhdCB0aGUgdHJhbnNpdGlvbiBtb2R1bGUgY2FuIGhhbmQgb3ZlciB0aGUgY29udHJvbCB0byB0aGUgZGlyZWN0aXZlCiAgICAgIGlmIChjaGlsZC5kYXRhLmRpcmVjdGl2ZXMgJiYgY2hpbGQuZGF0YS5kaXJlY3RpdmVzLnNvbWUoaXNWU2hvd0RpcmVjdGl2ZSkpIHsKICAgICAgICBjaGlsZC5kYXRhLnNob3cgPSB0cnVlOwogICAgICB9CgogICAgICBpZiAoCiAgICAgICAgb2xkQ2hpbGQgJiYKICAgICAgICBvbGRDaGlsZC5kYXRhICYmCiAgICAgICAgIWlzU2FtZUNoaWxkKGNoaWxkLCBvbGRDaGlsZCkgJiYKICAgICAgICAhaXNBc3luY1BsYWNlaG9sZGVyKG9sZENoaWxkKSAmJgogICAgICAgIC8vICM2Njg3IGNvbXBvbmVudCByb290IGlzIGEgY29tbWVudCBub2RlCiAgICAgICAgIShvbGRDaGlsZC5jb21wb25lbnRJbnN0YW5jZSAmJiBvbGRDaGlsZC5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUuaXNDb21tZW50KQogICAgICApIHsKICAgICAgICAvLyByZXBsYWNlIG9sZCBjaGlsZCB0cmFuc2l0aW9uIGRhdGEgd2l0aCBmcmVzaCBvbmUKICAgICAgICAvLyBpbXBvcnRhbnQgZm9yIGR5bmFtaWMgdHJhbnNpdGlvbnMhCiAgICAgICAgdmFyIG9sZERhdGEgPSBvbGRDaGlsZC5kYXRhLnRyYW5zaXRpb24gPSBleHRlbmQoe30sIGRhdGEpOwogICAgICAgIC8vIGhhbmRsZSB0cmFuc2l0aW9uIG1vZGUKICAgICAgICBpZiAobW9kZSA9PT0gJ291dC1pbicpIHsKICAgICAgICAgIC8vIHJldHVybiBwbGFjZWhvbGRlciBub2RlIGFuZCBxdWV1ZSB1cGRhdGUgd2hlbiBsZWF2ZSBmaW5pc2hlcwogICAgICAgICAgdGhpcy5fbGVhdmluZyA9IHRydWU7CiAgICAgICAgICBtZXJnZVZOb2RlSG9vayhvbGREYXRhLCAnYWZ0ZXJMZWF2ZScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcyQxLl9sZWF2aW5nID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMkMS4kZm9yY2VVcGRhdGUoKTsKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIHBsYWNlaG9sZGVyKGgsIHJhd0NoaWxkKQogICAgICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gJ2luLW91dCcpIHsKICAgICAgICAgIGlmIChpc0FzeW5jUGxhY2Vob2xkZXIoY2hpbGQpKSB7CiAgICAgICAgICAgIHJldHVybiBvbGRSYXdDaGlsZAogICAgICAgICAgfQogICAgICAgICAgdmFyIGRlbGF5ZWRMZWF2ZTsKICAgICAgICAgIHZhciBwZXJmb3JtTGVhdmUgPSBmdW5jdGlvbiAoKSB7IGRlbGF5ZWRMZWF2ZSgpOyB9OwogICAgICAgICAgbWVyZ2VWTm9kZUhvb2soZGF0YSwgJ2FmdGVyRW50ZXInLCBwZXJmb3JtTGVhdmUpOwogICAgICAgICAgbWVyZ2VWTm9kZUhvb2soZGF0YSwgJ2VudGVyQ2FuY2VsbGVkJywgcGVyZm9ybUxlYXZlKTsKICAgICAgICAgIG1lcmdlVk5vZGVIb29rKG9sZERhdGEsICdkZWxheUxlYXZlJywgZnVuY3Rpb24gKGxlYXZlKSB7IGRlbGF5ZWRMZWF2ZSA9IGxlYXZlOyB9KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiByYXdDaGlsZAogICAgfQogIH07CgogIC8qICAqLwoKICB2YXIgcHJvcHMgPSBleHRlbmQoewogICAgdGFnOiBTdHJpbmcsCiAgICBtb3ZlQ2xhc3M6IFN0cmluZwogIH0sIHRyYW5zaXRpb25Qcm9wcyk7CgogIGRlbGV0ZSBwcm9wcy5tb2RlOwoKICB2YXIgVHJhbnNpdGlvbkdyb3VwID0gewogICAgcHJvcHM6IHByb3BzLAoKICAgIGJlZm9yZU1vdW50OiBmdW5jdGlvbiBiZWZvcmVNb3VudCAoKSB7CiAgICAgIHZhciB0aGlzJDEgPSB0aGlzOwoKICAgICAgdmFyIHVwZGF0ZSA9IHRoaXMuX3VwZGF0ZTsKICAgICAgdGhpcy5fdXBkYXRlID0gZnVuY3Rpb24gKHZub2RlLCBoeWRyYXRpbmcpIHsKICAgICAgICB2YXIgcmVzdG9yZUFjdGl2ZUluc3RhbmNlID0gc2V0QWN0aXZlSW5zdGFuY2UodGhpcyQxKTsKICAgICAgICAvLyBmb3JjZSByZW1vdmluZyBwYXNzCiAgICAgICAgdGhpcyQxLl9fcGF0Y2hfXygKICAgICAgICAgIHRoaXMkMS5fdm5vZGUsCiAgICAgICAgICB0aGlzJDEua2VwdCwKICAgICAgICAgIGZhbHNlLCAvLyBoeWRyYXRpbmcKICAgICAgICAgIHRydWUgLy8gcmVtb3ZlT25seSAoIWltcG9ydGFudCwgYXZvaWRzIHVubmVjZXNzYXJ5IG1vdmVzKQogICAgICAgICk7CiAgICAgICAgdGhpcyQxLl92bm9kZSA9IHRoaXMkMS5rZXB0OwogICAgICAgIHJlc3RvcmVBY3RpdmVJbnN0YW5jZSgpOwogICAgICAgIHVwZGF0ZS5jYWxsKHRoaXMkMSwgdm5vZGUsIGh5ZHJhdGluZyk7CiAgICAgIH07CiAgICB9LAoKICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyIChoKSB7CiAgICAgIHZhciB0YWcgPSB0aGlzLnRhZyB8fCB0aGlzLiR2bm9kZS5kYXRhLnRhZyB8fCAnc3Bhbic7CiAgICAgIHZhciBtYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgICB2YXIgcHJldkNoaWxkcmVuID0gdGhpcy5wcmV2Q2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuOwogICAgICB2YXIgcmF3Q2hpbGRyZW4gPSB0aGlzLiRzbG90cy5kZWZhdWx0IHx8IFtdOwogICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuID0gW107CiAgICAgIHZhciB0cmFuc2l0aW9uRGF0YSA9IGV4dHJhY3RUcmFuc2l0aW9uRGF0YSh0aGlzKTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmF3Q2hpbGRyZW4ubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgYyA9IHJhd0NoaWxkcmVuW2ldOwogICAgICAgIGlmIChjLnRhZykgewogICAgICAgICAgaWYgKGMua2V5ICE9IG51bGwgJiYgU3RyaW5nKGMua2V5KS5pbmRleE9mKCdfX3ZsaXN0JykgIT09IDApIHsKICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChjKTsKICAgICAgICAgICAgbWFwW2Mua2V5XSA9IGMKICAgICAgICAgICAgOyhjLmRhdGEgfHwgKGMuZGF0YSA9IHt9KSkudHJhbnNpdGlvbiA9IHRyYW5zaXRpb25EYXRhOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIG9wdHMgPSBjLmNvbXBvbmVudE9wdGlvbnM7CiAgICAgICAgICAgIHZhciBuYW1lID0gb3B0cyA/IChvcHRzLkN0b3Iub3B0aW9ucy5uYW1lIHx8IG9wdHMudGFnIHx8ICcnKSA6IGMudGFnOwogICAgICAgICAgICB3YXJuKCgiPHRyYW5zaXRpb24tZ3JvdXA+IGNoaWxkcmVuIG11c3QgYmUga2V5ZWQ6IDwiICsgbmFtZSArICI+IikpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHByZXZDaGlsZHJlbikgewogICAgICAgIHZhciBrZXB0ID0gW107CiAgICAgICAgdmFyIHJlbW92ZWQgPSBbXTsKICAgICAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBwcmV2Q2hpbGRyZW4ubGVuZ3RoOyBpJDErKykgewogICAgICAgICAgdmFyIGMkMSA9IHByZXZDaGlsZHJlbltpJDFdOwogICAgICAgICAgYyQxLmRhdGEudHJhbnNpdGlvbiA9IHRyYW5zaXRpb25EYXRhOwogICAgICAgICAgYyQxLmRhdGEucG9zID0gYyQxLmVsbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgIGlmIChtYXBbYyQxLmtleV0pIHsKICAgICAgICAgICAga2VwdC5wdXNoKGMkMSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZW1vdmVkLnB1c2goYyQxKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdGhpcy5rZXB0ID0gaCh0YWcsIG51bGwsIGtlcHQpOwogICAgICAgIHRoaXMucmVtb3ZlZCA9IHJlbW92ZWQ7CiAgICAgIH0KCiAgICAgIHJldHVybiBoKHRhZywgbnVsbCwgY2hpbGRyZW4pCiAgICB9LAoKICAgIHVwZGF0ZWQ6IGZ1bmN0aW9uIHVwZGF0ZWQgKCkgewogICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLnByZXZDaGlsZHJlbjsKICAgICAgdmFyIG1vdmVDbGFzcyA9IHRoaXMubW92ZUNsYXNzIHx8ICgodGhpcy5uYW1lIHx8ICd2JykgKyAnLW1vdmUnKTsKICAgICAgaWYgKCFjaGlsZHJlbi5sZW5ndGggfHwgIXRoaXMuaGFzTW92ZShjaGlsZHJlblswXS5lbG0sIG1vdmVDbGFzcykpIHsKICAgICAgICByZXR1cm4KICAgICAgfQoKICAgICAgLy8gd2UgZGl2aWRlIHRoZSB3b3JrIGludG8gdGhyZWUgbG9vcHMgdG8gYXZvaWQgbWl4aW5nIERPTSByZWFkcyBhbmQgd3JpdGVzCiAgICAgIC8vIGluIGVhY2ggaXRlcmF0aW9uIC0gd2hpY2ggaGVscHMgcHJldmVudCBsYXlvdXQgdGhyYXNoaW5nLgogICAgICBjaGlsZHJlbi5mb3JFYWNoKGNhbGxQZW5kaW5nQ2JzKTsKICAgICAgY2hpbGRyZW4uZm9yRWFjaChyZWNvcmRQb3NpdGlvbik7CiAgICAgIGNoaWxkcmVuLmZvckVhY2goYXBwbHlUcmFuc2xhdGlvbik7CgogICAgICAvLyBmb3JjZSByZWZsb3cgdG8gcHV0IGV2ZXJ5dGhpbmcgaW4gcG9zaXRpb24KICAgICAgLy8gYXNzaWduIHRvIHRoaXMgdG8gYXZvaWQgYmVpbmcgcmVtb3ZlZCBpbiB0cmVlLXNoYWtpbmcKICAgICAgLy8gJGZsb3ctZGlzYWJsZS1saW5lCiAgICAgIHRoaXMuX3JlZmxvdyA9IGRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0OwoKICAgICAgY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoYykgewogICAgICAgIGlmIChjLmRhdGEubW92ZWQpIHsKICAgICAgICAgIHZhciBlbCA9IGMuZWxtOwogICAgICAgICAgdmFyIHMgPSBlbC5zdHlsZTsKICAgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbW92ZUNsYXNzKTsKICAgICAgICAgIHMudHJhbnNmb3JtID0gcy5XZWJraXRUcmFuc2Zvcm0gPSBzLnRyYW5zaXRpb25EdXJhdGlvbiA9ICcnOwogICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcih0cmFuc2l0aW9uRW5kRXZlbnQsIGVsLl9tb3ZlQ2IgPSBmdW5jdGlvbiBjYiAoZSkgewogICAgICAgICAgICBpZiAoZSAmJiBlLnRhcmdldCAhPT0gZWwpIHsKICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIWUgfHwgL3RyYW5zZm9ybSQvLnRlc3QoZS5wcm9wZXJ0eU5hbWUpKSB7CiAgICAgICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0cmFuc2l0aW9uRW5kRXZlbnQsIGNiKTsKICAgICAgICAgICAgICBlbC5fbW92ZUNiID0gbnVsbDsKICAgICAgICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIG1vdmVDbGFzcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIG1ldGhvZHM6IHsKICAgICAgaGFzTW92ZTogZnVuY3Rpb24gaGFzTW92ZSAoZWwsIG1vdmVDbGFzcykgewogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgICAgIGlmICghaGFzVHJhbnNpdGlvbikgewogICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfQogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgICAgIGlmICh0aGlzLl9oYXNNb3ZlKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5faGFzTW92ZQogICAgICAgIH0KICAgICAgICAvLyBEZXRlY3Qgd2hldGhlciBhbiBlbGVtZW50IHdpdGggdGhlIG1vdmUgY2xhc3MgYXBwbGllZCBoYXMKICAgICAgICAvLyBDU1MgdHJhbnNpdGlvbnMuIFNpbmNlIHRoZSBlbGVtZW50IG1heSBiZSBpbnNpZGUgYW4gZW50ZXJpbmcKICAgICAgICAvLyB0cmFuc2l0aW9uIGF0IHRoaXMgdmVyeSBtb21lbnQsIHdlIG1ha2UgYSBjbG9uZSBvZiBpdCBhbmQgcmVtb3ZlCiAgICAgICAgLy8gYWxsIG90aGVyIHRyYW5zaXRpb24gY2xhc3NlcyBhcHBsaWVkIHRvIGVuc3VyZSBvbmx5IHRoZSBtb3ZlIGNsYXNzCiAgICAgICAgLy8gaXMgYXBwbGllZC4KICAgICAgICB2YXIgY2xvbmUgPSBlbC5jbG9uZU5vZGUoKTsKICAgICAgICBpZiAoZWwuX3RyYW5zaXRpb25DbGFzc2VzKSB7CiAgICAgICAgICBlbC5fdHJhbnNpdGlvbkNsYXNzZXMuZm9yRWFjaChmdW5jdGlvbiAoY2xzKSB7IHJlbW92ZUNsYXNzKGNsb25lLCBjbHMpOyB9KTsKICAgICAgICB9CiAgICAgICAgYWRkQ2xhc3MoY2xvbmUsIG1vdmVDbGFzcyk7CiAgICAgICAgY2xvbmUuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICB0aGlzLiRlbC5hcHBlbmRDaGlsZChjbG9uZSk7CiAgICAgICAgdmFyIGluZm8gPSBnZXRUcmFuc2l0aW9uSW5mbyhjbG9uZSk7CiAgICAgICAgdGhpcy4kZWwucmVtb3ZlQ2hpbGQoY2xvbmUpOwogICAgICAgIHJldHVybiAodGhpcy5faGFzTW92ZSA9IGluZm8uaGFzVHJhbnNmb3JtKQogICAgICB9CiAgICB9CiAgfTsKCiAgZnVuY3Rpb24gY2FsbFBlbmRpbmdDYnMgKGMpIHsKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgaWYgKGMuZWxtLl9tb3ZlQ2IpIHsKICAgICAgYy5lbG0uX21vdmVDYigpOwogICAgfQogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoYy5lbG0uX2VudGVyQ2IpIHsKICAgICAgYy5lbG0uX2VudGVyQ2IoKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHJlY29yZFBvc2l0aW9uIChjKSB7CiAgICBjLmRhdGEubmV3UG9zID0gYy5lbG0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgfQoKICBmdW5jdGlvbiBhcHBseVRyYW5zbGF0aW9uIChjKSB7CiAgICB2YXIgb2xkUG9zID0gYy5kYXRhLnBvczsKICAgIHZhciBuZXdQb3MgPSBjLmRhdGEubmV3UG9zOwogICAgdmFyIGR4ID0gb2xkUG9zLmxlZnQgLSBuZXdQb3MubGVmdDsKICAgIHZhciBkeSA9IG9sZFBvcy50b3AgLSBuZXdQb3MudG9wOwogICAgaWYgKGR4IHx8IGR5KSB7CiAgICAgIGMuZGF0YS5tb3ZlZCA9IHRydWU7CiAgICAgIHZhciBzID0gYy5lbG0uc3R5bGU7CiAgICAgIHMudHJhbnNmb3JtID0gcy5XZWJraXRUcmFuc2Zvcm0gPSAidHJhbnNsYXRlKCIgKyBkeCArICJweCwiICsgZHkgKyAicHgpIjsKICAgICAgcy50cmFuc2l0aW9uRHVyYXRpb24gPSAnMHMnOwogICAgfQogIH0KCiAgdmFyIHBsYXRmb3JtQ29tcG9uZW50cyA9IHsKICAgIFRyYW5zaXRpb246IFRyYW5zaXRpb24sCiAgICBUcmFuc2l0aW9uR3JvdXA6IFRyYW5zaXRpb25Hcm91cAogIH07CgogIC8qICAqLwoKICAvLyBpbnN0YWxsIHBsYXRmb3JtIHNwZWNpZmljIHV0aWxzCiAgVnVlLmNvbmZpZy5tdXN0VXNlUHJvcCA9IG11c3RVc2VQcm9wOwogIFZ1ZS5jb25maWcuaXNSZXNlcnZlZFRhZyA9IGlzUmVzZXJ2ZWRUYWc7CiAgVnVlLmNvbmZpZy5pc1Jlc2VydmVkQXR0ciA9IGlzUmVzZXJ2ZWRBdHRyOwogIFZ1ZS5jb25maWcuZ2V0VGFnTmFtZXNwYWNlID0gZ2V0VGFnTmFtZXNwYWNlOwogIFZ1ZS5jb25maWcuaXNVbmtub3duRWxlbWVudCA9IGlzVW5rbm93bkVsZW1lbnQ7CgogIC8vIGluc3RhbGwgcGxhdGZvcm0gcnVudGltZSBkaXJlY3RpdmVzICYgY29tcG9uZW50cwogIGV4dGVuZChWdWUub3B0aW9ucy5kaXJlY3RpdmVzLCBwbGF0Zm9ybURpcmVjdGl2ZXMpOwogIGV4dGVuZChWdWUub3B0aW9ucy5jb21wb25lbnRzLCBwbGF0Zm9ybUNvbXBvbmVudHMpOwoKICAvLyBpbnN0YWxsIHBsYXRmb3JtIHBhdGNoIGZ1bmN0aW9uCiAgVnVlLnByb3RvdHlwZS5fX3BhdGNoX18gPSBpbkJyb3dzZXIgPyBwYXRjaCA6IG5vb3A7CgogIC8vIHB1YmxpYyBtb3VudCBtZXRob2QKICBWdWUucHJvdG90eXBlLiRtb3VudCA9IGZ1bmN0aW9uICgKICAgIGVsLAogICAgaHlkcmF0aW5nCiAgKSB7CiAgICBlbCA9IGVsICYmIGluQnJvd3NlciA/IHF1ZXJ5KGVsKSA6IHVuZGVmaW5lZDsKICAgIHJldHVybiBtb3VudENvbXBvbmVudCh0aGlzLCBlbCwgaHlkcmF0aW5nKQogIH07CgogIC8vIGRldnRvb2xzIGdsb2JhbCBob29rCiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICBpZiAoaW5Ccm93c2VyKSB7CiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKGNvbmZpZy5kZXZ0b29scykgewogICAgICAgIGlmIChkZXZ0b29scykgewogICAgICAgICAgZGV2dG9vbHMuZW1pdCgnaW5pdCcsIFZ1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGVbY29uc29sZS5pbmZvID8gJ2luZm8nIDogJ2xvZyddKAogICAgICAgICAgICAnRG93bmxvYWQgdGhlIFZ1ZSBEZXZ0b29scyBleHRlbnNpb24gZm9yIGEgYmV0dGVyIGRldmVsb3BtZW50IGV4cGVyaWVuY2U6XG4nICsKICAgICAgICAgICAgJ2h0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUtZGV2dG9vbHMnCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoY29uZmlnLnByb2R1Y3Rpb25UaXAgIT09IGZhbHNlICYmCiAgICAgICAgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnCiAgICAgICkgewogICAgICAgIGNvbnNvbGVbY29uc29sZS5pbmZvID8gJ2luZm8nIDogJ2xvZyddKAogICAgICAgICAgIllvdSBhcmUgcnVubmluZyBWdWUgaW4gZGV2ZWxvcG1lbnQgbW9kZS5cbiIgKwogICAgICAgICAgIk1ha2Ugc3VyZSB0byB0dXJuIG9uIHByb2R1Y3Rpb24gbW9kZSB3aGVuIGRlcGxveWluZyBmb3IgcHJvZHVjdGlvbi5cbiIgKwogICAgICAgICAgIlNlZSBtb3JlIHRpcHMgYXQgaHR0cHM6Ly92dWVqcy5vcmcvZ3VpZGUvZGVwbG95bWVudC5odG1sIgogICAgICAgICk7CiAgICAgIH0KICAgIH0sIDApOwogIH0KCiAgLyogICovCgogIHZhciBkZWZhdWx0VGFnUkUgPSAvXHtceygoPzoufFxyP1xuKSs/KVx9XH0vZzsKICB2YXIgcmVnZXhFc2NhcGVSRSA9IC9bLS4qKz9eJHt9KCl8W1xdXC9cXF0vZzsKCiAgdmFyIGJ1aWxkUmVnZXggPSBjYWNoZWQoZnVuY3Rpb24gKGRlbGltaXRlcnMpIHsKICAgIHZhciBvcGVuID0gZGVsaW1pdGVyc1swXS5yZXBsYWNlKHJlZ2V4RXNjYXBlUkUsICdcXCQmJyk7CiAgICB2YXIgY2xvc2UgPSBkZWxpbWl0ZXJzWzFdLnJlcGxhY2UocmVnZXhFc2NhcGVSRSwgJ1xcJCYnKTsKICAgIHJldHVybiBuZXcgUmVnRXhwKG9wZW4gKyAnKCg/Oi58XFxuKSs/KScgKyBjbG9zZSwgJ2cnKQogIH0pOwoKCgogIGZ1bmN0aW9uIHBhcnNlVGV4dCAoCiAgICB0ZXh0LAogICAgZGVsaW1pdGVycwogICkgewogICAgdmFyIHRhZ1JFID0gZGVsaW1pdGVycyA/IGJ1aWxkUmVnZXgoZGVsaW1pdGVycykgOiBkZWZhdWx0VGFnUkU7CiAgICBpZiAoIXRhZ1JFLnRlc3QodGV4dCkpIHsKICAgICAgcmV0dXJuCiAgICB9CiAgICB2YXIgdG9rZW5zID0gW107CiAgICB2YXIgcmF3VG9rZW5zID0gW107CiAgICB2YXIgbGFzdEluZGV4ID0gdGFnUkUubGFzdEluZGV4ID0gMDsKICAgIHZhciBtYXRjaCwgaW5kZXgsIHRva2VuVmFsdWU7CiAgICB3aGlsZSAoKG1hdGNoID0gdGFnUkUuZXhlYyh0ZXh0KSkpIHsKICAgICAgaW5kZXggPSBtYXRjaC5pbmRleDsKICAgICAgLy8gcHVzaCB0ZXh0IHRva2VuCiAgICAgIGlmIChpbmRleCA+IGxhc3RJbmRleCkgewogICAgICAgIHJhd1Rva2Vucy5wdXNoKHRva2VuVmFsdWUgPSB0ZXh0LnNsaWNlKGxhc3RJbmRleCwgaW5kZXgpKTsKICAgICAgICB0b2tlbnMucHVzaChKU09OLnN0cmluZ2lmeSh0b2tlblZhbHVlKSk7CiAgICAgIH0KICAgICAgLy8gdGFnIHRva2VuCiAgICAgIHZhciBleHAgPSBwYXJzZUZpbHRlcnMobWF0Y2hbMV0udHJpbSgpKTsKICAgICAgdG9rZW5zLnB1c2goKCJfcygiICsgZXhwICsgIikiKSk7CiAgICAgIHJhd1Rva2Vucy5wdXNoKHsgJ0BiaW5kaW5nJzogZXhwIH0pOwogICAgICBsYXN0SW5kZXggPSBpbmRleCArIG1hdGNoWzBdLmxlbmd0aDsKICAgIH0KICAgIGlmIChsYXN0SW5kZXggPCB0ZXh0Lmxlbmd0aCkgewogICAgICByYXdUb2tlbnMucHVzaCh0b2tlblZhbHVlID0gdGV4dC5zbGljZShsYXN0SW5kZXgpKTsKICAgICAgdG9rZW5zLnB1c2goSlNPTi5zdHJpbmdpZnkodG9rZW5WYWx1ZSkpOwogICAgfQogICAgcmV0dXJuIHsKICAgICAgZXhwcmVzc2lvbjogdG9rZW5zLmpvaW4oJysnKSwKICAgICAgdG9rZW5zOiByYXdUb2tlbnMKICAgIH0KICB9CgogIC8qICAqLwoKICBmdW5jdGlvbiB0cmFuc2Zvcm1Ob2RlIChlbCwgb3B0aW9ucykgewogICAgdmFyIHdhcm4gPSBvcHRpb25zLndhcm4gfHwgYmFzZVdhcm47CiAgICB2YXIgc3RhdGljQ2xhc3MgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAnY2xhc3MnKTsKICAgIGlmIChzdGF0aWNDbGFzcykgewogICAgICB2YXIgcmVzID0gcGFyc2VUZXh0KHN0YXRpY0NsYXNzLCBvcHRpb25zLmRlbGltaXRlcnMpOwogICAgICBpZiAocmVzKSB7CiAgICAgICAgd2FybigKICAgICAgICAgICJjbGFzcz1cIiIgKyBzdGF0aWNDbGFzcyArICJcIjogIiArCiAgICAgICAgICAnSW50ZXJwb2xhdGlvbiBpbnNpZGUgYXR0cmlidXRlcyBoYXMgYmVlbiByZW1vdmVkLiAnICsKICAgICAgICAgICdVc2Ugdi1iaW5kIG9yIHRoZSBjb2xvbiBzaG9ydGhhbmQgaW5zdGVhZC4gRm9yIGV4YW1wbGUsICcgKwogICAgICAgICAgJ2luc3RlYWQgb2YgPGRpdiBjbGFzcz0ie3sgdmFsIH19Ij4sIHVzZSA8ZGl2IDpjbGFzcz0idmFsIj4uJywKICAgICAgICAgIGVsLnJhd0F0dHJzTWFwWydjbGFzcyddCiAgICAgICAgKTsKICAgICAgfQogICAgfQogICAgaWYgKHN0YXRpY0NsYXNzKSB7CiAgICAgIGVsLnN0YXRpY0NsYXNzID0gSlNPTi5zdHJpbmdpZnkoc3RhdGljQ2xhc3MpOwogICAgfQogICAgdmFyIGNsYXNzQmluZGluZyA9IGdldEJpbmRpbmdBdHRyKGVsLCAnY2xhc3MnLCBmYWxzZSAvKiBnZXRTdGF0aWMgKi8pOwogICAgaWYgKGNsYXNzQmluZGluZykgewogICAgICBlbC5jbGFzc0JpbmRpbmcgPSBjbGFzc0JpbmRpbmc7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBnZW5EYXRhIChlbCkgewogICAgdmFyIGRhdGEgPSAnJzsKICAgIGlmIChlbC5zdGF0aWNDbGFzcykgewogICAgICBkYXRhICs9ICJzdGF0aWNDbGFzczoiICsgKGVsLnN0YXRpY0NsYXNzKSArICIsIjsKICAgIH0KICAgIGlmIChlbC5jbGFzc0JpbmRpbmcpIHsKICAgICAgZGF0YSArPSAiY2xhc3M6IiArIChlbC5jbGFzc0JpbmRpbmcpICsgIiwiOwogICAgfQogICAgcmV0dXJuIGRhdGEKICB9CgogIHZhciBrbGFzcyQxID0gewogICAgc3RhdGljS2V5czogWydzdGF0aWNDbGFzcyddLAogICAgdHJhbnNmb3JtTm9kZTogdHJhbnNmb3JtTm9kZSwKICAgIGdlbkRhdGE6IGdlbkRhdGEKICB9OwoKICAvKiAgKi8KCiAgZnVuY3Rpb24gdHJhbnNmb3JtTm9kZSQxIChlbCwgb3B0aW9ucykgewogICAgdmFyIHdhcm4gPSBvcHRpb25zLndhcm4gfHwgYmFzZVdhcm47CiAgICB2YXIgc3RhdGljU3R5bGUgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAnc3R5bGUnKTsKICAgIGlmIChzdGF0aWNTdHlsZSkgewogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgewogICAgICAgIHZhciByZXMgPSBwYXJzZVRleHQoc3RhdGljU3R5bGUsIG9wdGlvbnMuZGVsaW1pdGVycyk7CiAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgd2FybigKICAgICAgICAgICAgInN0eWxlPVwiIiArIHN0YXRpY1N0eWxlICsgIlwiOiAiICsKICAgICAgICAgICAgJ0ludGVycG9sYXRpb24gaW5zaWRlIGF0dHJpYnV0ZXMgaGFzIGJlZW4gcmVtb3ZlZC4gJyArCiAgICAgICAgICAgICdVc2Ugdi1iaW5kIG9yIHRoZSBjb2xvbiBzaG9ydGhhbmQgaW5zdGVhZC4gRm9yIGV4YW1wbGUsICcgKwogICAgICAgICAgICAnaW5zdGVhZCBvZiA8ZGl2IHN0eWxlPSJ7eyB2YWwgfX0iPiwgdXNlIDxkaXYgOnN0eWxlPSJ2YWwiPi4nLAogICAgICAgICAgICBlbC5yYXdBdHRyc01hcFsnc3R5bGUnXQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZWwuc3RhdGljU3R5bGUgPSBKU09OLnN0cmluZ2lmeShwYXJzZVN0eWxlVGV4dChzdGF0aWNTdHlsZSkpOwogICAgfQoKICAgIHZhciBzdHlsZUJpbmRpbmcgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ3N0eWxlJywgZmFsc2UgLyogZ2V0U3RhdGljICovKTsKICAgIGlmIChzdHlsZUJpbmRpbmcpIHsKICAgICAgZWwuc3R5bGVCaW5kaW5nID0gc3R5bGVCaW5kaW5nOwogICAgfQogIH0KCiAgZnVuY3Rpb24gZ2VuRGF0YSQxIChlbCkgewogICAgdmFyIGRhdGEgPSAnJzsKICAgIGlmIChlbC5zdGF0aWNTdHlsZSkgewogICAgICBkYXRhICs9ICJzdGF0aWNTdHlsZToiICsgKGVsLnN0YXRpY1N0eWxlKSArICIsIjsKICAgIH0KICAgIGlmIChlbC5zdHlsZUJpbmRpbmcpIHsKICAgICAgZGF0YSArPSAic3R5bGU6KCIgKyAoZWwuc3R5bGVCaW5kaW5nKSArICIpLCI7CiAgICB9CiAgICByZXR1cm4gZGF0YQogIH0KCiAgdmFyIHN0eWxlJDEgPSB7CiAgICBzdGF0aWNLZXlzOiBbJ3N0YXRpY1N0eWxlJ10sCiAgICB0cmFuc2Zvcm1Ob2RlOiB0cmFuc2Zvcm1Ob2RlJDEsCiAgICBnZW5EYXRhOiBnZW5EYXRhJDEKICB9OwoKICAvKiAgKi8KCiAgdmFyIGRlY29kZXI7CgogIHZhciBoZSA9IHsKICAgIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlIChodG1sKSB7CiAgICAgIGRlY29kZXIgPSBkZWNvZGVyIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICBkZWNvZGVyLmlubmVySFRNTCA9IGh0bWw7CiAgICAgIHJldHVybiBkZWNvZGVyLnRleHRDb250ZW50CiAgICB9CiAgfTsKCiAgLyogICovCgogIHZhciBpc1VuYXJ5VGFnID0gbWFrZU1hcCgKICAgICdhcmVhLGJhc2UsYnIsY29sLGVtYmVkLGZyYW1lLGhyLGltZyxpbnB1dCxpc2luZGV4LGtleWdlbiwnICsKICAgICdsaW5rLG1ldGEscGFyYW0sc291cmNlLHRyYWNrLHdicicKICApOwoKICAvLyBFbGVtZW50cyB0aGF0IHlvdSBjYW4sIGludGVudGlvbmFsbHksIGxlYXZlIG9wZW4KICAvLyAoYW5kIHdoaWNoIGNsb3NlIHRoZW1zZWx2ZXMpCiAgdmFyIGNhbkJlTGVmdE9wZW5UYWcgPSBtYWtlTWFwKAogICAgJ2NvbGdyb3VwLGRkLGR0LGxpLG9wdGlvbnMscCx0ZCx0Zm9vdCx0aCx0aGVhZCx0cixzb3VyY2UnCiAgKTsKCiAgLy8gSFRNTDUgdGFncyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9pbmRpY2VzLmh0bWwjZWxlbWVudHMtMwogIC8vIFBocmFzaW5nIENvbnRlbnQgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZG9tLmh0bWwjcGhyYXNpbmctY29udGVudAogIHZhciBpc05vblBocmFzaW5nVGFnID0gbWFrZU1hcCgKICAgICdhZGRyZXNzLGFydGljbGUsYXNpZGUsYmFzZSxibG9ja3F1b3RlLGJvZHksY2FwdGlvbixjb2wsY29sZ3JvdXAsZGQsJyArCiAgICAnZGV0YWlscyxkaWFsb2csZGl2LGRsLGR0LGZpZWxkc2V0LGZpZ2NhcHRpb24sZmlndXJlLGZvb3Rlcixmb3JtLCcgKwogICAgJ2gxLGgyLGgzLGg0LGg1LGg2LGhlYWQsaGVhZGVyLGhncm91cCxocixodG1sLGxlZ2VuZCxsaSxtZW51aXRlbSxtZXRhLCcgKwogICAgJ29wdGdyb3VwLG9wdGlvbixwYXJhbSxycCxydCxzb3VyY2Usc3R5bGUsc3VtbWFyeSx0Ym9keSx0ZCx0Zm9vdCx0aCx0aGVhZCwnICsKICAgICd0aXRsZSx0cix0cmFjaycKICApOwoKICAvKioKICAgKiBOb3QgdHlwZS1jaGVja2luZyB0aGlzIGZpbGUgYmVjYXVzZSBpdCdzIG1vc3RseSB2ZW5kb3IgY29kZS4KICAgKi8KCiAgLy8gUmVndWxhciBFeHByZXNzaW9ucyBmb3IgcGFyc2luZyB0YWdzIGFuZCBhdHRyaWJ1dGVzCiAgdmFyIGF0dHJpYnV0ZSA9IC9eXHMqKFteXHMiJzw+XC89XSspKD86XHMqKD0pXHMqKD86IihbXiJdKikiK3wnKFteJ10qKScrfChbXlxzIic9PD5gXSspKSk/LzsKICB2YXIgZHluYW1pY0FyZ0F0dHJpYnV0ZSA9IC9eXHMqKCg/OnYtW1x3LV0rOnxAfDp8IylcW1tePV0rXF1bXlxzIic8PlwvPV0qKSg/OlxzKig9KVxzKig/OiIoW14iXSopIit8JyhbXiddKiknK3woW15ccyInPTw+YF0rKSkpPy87CiAgdmFyIG5jbmFtZSA9ICJbYS16QS1aX11bXFwtXFwuMC05X2EtekEtWiIgKyAodW5pY29kZVJlZ0V4cC5zb3VyY2UpICsgIl0qIjsKICB2YXIgcW5hbWVDYXB0dXJlID0gIigoPzoiICsgbmNuYW1lICsgIlxcOik/IiArIG5jbmFtZSArICIpIjsKICB2YXIgc3RhcnRUYWdPcGVuID0gbmV3IFJlZ0V4cCgoIl48IiArIHFuYW1lQ2FwdHVyZSkpOwogIHZhciBzdGFydFRhZ0Nsb3NlID0gL15ccyooXC8/KT4vOwogIHZhciBlbmRUYWcgPSBuZXcgUmVnRXhwKCgiXjxcXC8iICsgcW5hbWVDYXB0dXJlICsgIltePl0qPiIpKTsKICB2YXIgZG9jdHlwZSA9IC9ePCFET0NUWVBFIFtePl0rPi9pOwogIC8vICM3Mjk4OiBlc2NhcGUgLSB0byBhdm9pZCBiZWluZyBwYXNzZWQgYXMgSFRNTCBjb21tZW50IHdoZW4gaW5saW5lZCBpbiBwYWdlCiAgdmFyIGNvbW1lbnQgPSAvXjwhXC0tLzsKICB2YXIgY29uZGl0aW9uYWxDb21tZW50ID0gL148IVxbLzsKCiAgLy8gU3BlY2lhbCBFbGVtZW50cyAoY2FuIGNvbnRhaW4gYW55dGhpbmcpCiAgdmFyIGlzUGxhaW5UZXh0RWxlbWVudCA9IG1ha2VNYXAoJ3NjcmlwdCxzdHlsZSx0ZXh0YXJlYScsIHRydWUpOwogIHZhciByZUNhY2hlID0ge307CgogIHZhciBkZWNvZGluZ01hcCA9IHsKICAgICcmbHQ7JzogJzwnLAogICAgJyZndDsnOiAnPicsCiAgICAnJnF1b3Q7JzogJyInLAogICAgJyZhbXA7JzogJyYnLAogICAgJyYjMTA7JzogJ1xuJywKICAgICcmIzk7JzogJ1x0JywKICAgICcmIzM5Oyc6ICInIgogIH07CiAgdmFyIGVuY29kZWRBdHRyID0gLyYoPzpsdHxndHxxdW90fGFtcHwjMzkpOy9nOwogIHZhciBlbmNvZGVkQXR0cldpdGhOZXdMaW5lcyA9IC8mKD86bHR8Z3R8cXVvdHxhbXB8IzM5fCMxMHwjOSk7L2c7CgogIC8vICM1OTkyCiAgdmFyIGlzSWdub3JlTmV3bGluZVRhZyA9IG1ha2VNYXAoJ3ByZSx0ZXh0YXJlYScsIHRydWUpOwogIHZhciBzaG91bGRJZ25vcmVGaXJzdE5ld2xpbmUgPSBmdW5jdGlvbiAodGFnLCBodG1sKSB7IHJldHVybiB0YWcgJiYgaXNJZ25vcmVOZXdsaW5lVGFnKHRhZykgJiYgaHRtbFswXSA9PT0gJ1xuJzsgfTsKCiAgZnVuY3Rpb24gZGVjb2RlQXR0ciAodmFsdWUsIHNob3VsZERlY29kZU5ld2xpbmVzKSB7CiAgICB2YXIgcmUgPSBzaG91bGREZWNvZGVOZXdsaW5lcyA/IGVuY29kZWRBdHRyV2l0aE5ld0xpbmVzIDogZW5jb2RlZEF0dHI7CiAgICByZXR1cm4gdmFsdWUucmVwbGFjZShyZSwgZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBkZWNvZGluZ01hcFttYXRjaF07IH0pCiAgfQoKICBmdW5jdGlvbiBwYXJzZUhUTUwgKGh0bWwsIG9wdGlvbnMpIHsKICAgIHZhciBzdGFjayA9IFtdOwogICAgdmFyIGV4cGVjdEhUTUwgPSBvcHRpb25zLmV4cGVjdEhUTUw7CiAgICB2YXIgaXNVbmFyeVRhZyQkMSA9IG9wdGlvbnMuaXNVbmFyeVRhZyB8fCBubzsKICAgIHZhciBjYW5CZUxlZnRPcGVuVGFnJCQxID0gb3B0aW9ucy5jYW5CZUxlZnRPcGVuVGFnIHx8IG5vOwogICAgdmFyIGluZGV4ID0gMDsKICAgIHZhciBsYXN0LCBsYXN0VGFnOwogICAgd2hpbGUgKGh0bWwpIHsKICAgICAgbGFzdCA9IGh0bWw7CiAgICAgIC8vIE1ha2Ugc3VyZSB3ZSdyZSBub3QgaW4gYSBwbGFpbnRleHQgY29udGVudCBlbGVtZW50IGxpa2Ugc2NyaXB0L3N0eWxlCiAgICAgIGlmICghbGFzdFRhZyB8fCAhaXNQbGFpblRleHRFbGVtZW50KGxhc3RUYWcpKSB7CiAgICAgICAgdmFyIHRleHRFbmQgPSBodG1sLmluZGV4T2YoJzwnKTsKICAgICAgICBpZiAodGV4dEVuZCA9PT0gMCkgewogICAgICAgICAgLy8gQ29tbWVudDoKICAgICAgICAgIGlmIChjb21tZW50LnRlc3QoaHRtbCkpIHsKICAgICAgICAgICAgdmFyIGNvbW1lbnRFbmQgPSBodG1sLmluZGV4T2YoJy0tPicpOwoKICAgICAgICAgICAgaWYgKGNvbW1lbnRFbmQgPj0gMCkgewogICAgICAgICAgICAgIGlmIChvcHRpb25zLnNob3VsZEtlZXBDb21tZW50KSB7CiAgICAgICAgICAgICAgICBvcHRpb25zLmNvbW1lbnQoaHRtbC5zdWJzdHJpbmcoNCwgY29tbWVudEVuZCksIGluZGV4LCBpbmRleCArIGNvbW1lbnRFbmQgKyAzKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYWR2YW5jZShjb21tZW50RW5kICsgMyk7CiAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIC8vIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29uZGl0aW9uYWxfY29tbWVudCNEb3dubGV2ZWwtcmV2ZWFsZWRfY29uZGl0aW9uYWxfY29tbWVudAogICAgICAgICAgaWYgKGNvbmRpdGlvbmFsQ29tbWVudC50ZXN0KGh0bWwpKSB7CiAgICAgICAgICAgIHZhciBjb25kaXRpb25hbEVuZCA9IGh0bWwuaW5kZXhPZignXT4nKTsKCiAgICAgICAgICAgIGlmIChjb25kaXRpb25hbEVuZCA+PSAwKSB7CiAgICAgICAgICAgICAgYWR2YW5jZShjb25kaXRpb25hbEVuZCArIDIpOwogICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICAvLyBEb2N0eXBlOgogICAgICAgICAgdmFyIGRvY3R5cGVNYXRjaCA9IGh0bWwubWF0Y2goZG9jdHlwZSk7CiAgICAgICAgICBpZiAoZG9jdHlwZU1hdGNoKSB7CiAgICAgICAgICAgIGFkdmFuY2UoZG9jdHlwZU1hdGNoWzBdLmxlbmd0aCk7CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICB9CgogICAgICAgICAgLy8gRW5kIHRhZzoKICAgICAgICAgIHZhciBlbmRUYWdNYXRjaCA9IGh0bWwubWF0Y2goZW5kVGFnKTsKICAgICAgICAgIGlmIChlbmRUYWdNYXRjaCkgewogICAgICAgICAgICB2YXIgY3VySW5kZXggPSBpbmRleDsKICAgICAgICAgICAgYWR2YW5jZShlbmRUYWdNYXRjaFswXS5sZW5ndGgpOwogICAgICAgICAgICBwYXJzZUVuZFRhZyhlbmRUYWdNYXRjaFsxXSwgY3VySW5kZXgsIGluZGV4KTsKICAgICAgICAgICAgY29udGludWUKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBTdGFydCB0YWc6CiAgICAgICAgICB2YXIgc3RhcnRUYWdNYXRjaCA9IHBhcnNlU3RhcnRUYWcoKTsKICAgICAgICAgIGlmIChzdGFydFRhZ01hdGNoKSB7CiAgICAgICAgICAgIGhhbmRsZVN0YXJ0VGFnKHN0YXJ0VGFnTWF0Y2gpOwogICAgICAgICAgICBpZiAoc2hvdWxkSWdub3JlRmlyc3ROZXdsaW5lKHN0YXJ0VGFnTWF0Y2gudGFnTmFtZSwgaHRtbCkpIHsKICAgICAgICAgICAgICBhZHZhbmNlKDEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgdGV4dCA9ICh2b2lkIDApLCByZXN0ID0gKHZvaWQgMCksIG5leHQgPSAodm9pZCAwKTsKICAgICAgICBpZiAodGV4dEVuZCA+PSAwKSB7CiAgICAgICAgICByZXN0ID0gaHRtbC5zbGljZSh0ZXh0RW5kKTsKICAgICAgICAgIHdoaWxlICgKICAgICAgICAgICAgIWVuZFRhZy50ZXN0KHJlc3QpICYmCiAgICAgICAgICAgICFzdGFydFRhZ09wZW4udGVzdChyZXN0KSAmJgogICAgICAgICAgICAhY29tbWVudC50ZXN0KHJlc3QpICYmCiAgICAgICAgICAgICFjb25kaXRpb25hbENvbW1lbnQudGVzdChyZXN0KQogICAgICAgICAgKSB7CiAgICAgICAgICAgIC8vIDwgaW4gcGxhaW4gdGV4dCwgYmUgZm9yZ2l2aW5nIGFuZCB0cmVhdCBpdCBhcyB0ZXh0CiAgICAgICAgICAgIG5leHQgPSByZXN0LmluZGV4T2YoJzwnLCAxKTsKICAgICAgICAgICAgaWYgKG5leHQgPCAwKSB7IGJyZWFrIH0KICAgICAgICAgICAgdGV4dEVuZCArPSBuZXh0OwogICAgICAgICAgICByZXN0ID0gaHRtbC5zbGljZSh0ZXh0RW5kKTsKICAgICAgICAgIH0KICAgICAgICAgIHRleHQgPSBodG1sLnN1YnN0cmluZygwLCB0ZXh0RW5kKTsKICAgICAgICB9CgogICAgICAgIGlmICh0ZXh0RW5kIDwgMCkgewogICAgICAgICAgdGV4dCA9IGh0bWw7CiAgICAgICAgfQoKICAgICAgICBpZiAodGV4dCkgewogICAgICAgICAgYWR2YW5jZSh0ZXh0Lmxlbmd0aCk7CiAgICAgICAgfQoKICAgICAgICBpZiAob3B0aW9ucy5jaGFycyAmJiB0ZXh0KSB7CiAgICAgICAgICBvcHRpb25zLmNoYXJzKHRleHQsIGluZGV4IC0gdGV4dC5sZW5ndGgsIGluZGV4KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGVuZFRhZ0xlbmd0aCA9IDA7CiAgICAgICAgdmFyIHN0YWNrZWRUYWcgPSBsYXN0VGFnLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgdmFyIHJlU3RhY2tlZFRhZyA9IHJlQ2FjaGVbc3RhY2tlZFRhZ10gfHwgKHJlQ2FjaGVbc3RhY2tlZFRhZ10gPSBuZXcgUmVnRXhwKCcoW1xcc1xcU10qPykoPC8nICsgc3RhY2tlZFRhZyArICdbXj5dKj4pJywgJ2knKSk7CiAgICAgICAgdmFyIHJlc3QkMSA9IGh0bWwucmVwbGFjZShyZVN0YWNrZWRUYWcsIGZ1bmN0aW9uIChhbGwsIHRleHQsIGVuZFRhZykgewogICAgICAgICAgZW5kVGFnTGVuZ3RoID0gZW5kVGFnLmxlbmd0aDsKICAgICAgICAgIGlmICghaXNQbGFpblRleHRFbGVtZW50KHN0YWNrZWRUYWcpICYmIHN0YWNrZWRUYWcgIT09ICdub3NjcmlwdCcpIHsKICAgICAgICAgICAgdGV4dCA9IHRleHQKICAgICAgICAgICAgICAucmVwbGFjZSgvPCFcLS0oW1xzXFNdKj8pLS0+L2csICckMScpIC8vICM3Mjk4CiAgICAgICAgICAgICAgLnJlcGxhY2UoLzwhXFtDREFUQVxbKFtcc1xTXSo/KV1dPi9nLCAnJDEnKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzaG91bGRJZ25vcmVGaXJzdE5ld2xpbmUoc3RhY2tlZFRhZywgdGV4dCkpIHsKICAgICAgICAgICAgdGV4dCA9IHRleHQuc2xpY2UoMSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAob3B0aW9ucy5jaGFycykgewogICAgICAgICAgICBvcHRpb25zLmNoYXJzKHRleHQpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuICcnCiAgICAgICAgfSk7CiAgICAgICAgaW5kZXggKz0gaHRtbC5sZW5ndGggLSByZXN0JDEubGVuZ3RoOwogICAgICAgIGh0bWwgPSByZXN0JDE7CiAgICAgICAgcGFyc2VFbmRUYWcoc3RhY2tlZFRhZywgaW5kZXggLSBlbmRUYWdMZW5ndGgsIGluZGV4KTsKICAgICAgfQoKICAgICAgaWYgKGh0bWwgPT09IGxhc3QpIHsKICAgICAgICBvcHRpb25zLmNoYXJzICYmIG9wdGlvbnMuY2hhcnMoaHRtbCk7CiAgICAgICAgaWYgKCFzdGFjay5sZW5ndGggJiYgb3B0aW9ucy53YXJuKSB7CiAgICAgICAgICBvcHRpb25zLndhcm4oKCJNYWwtZm9ybWF0dGVkIHRhZyBhdCBlbmQgb2YgdGVtcGxhdGU6IFwiIiArIGh0bWwgKyAiXCIiKSwgeyBzdGFydDogaW5kZXggKyBodG1sLmxlbmd0aCB9KTsKICAgICAgICB9CiAgICAgICAgYnJlYWsKICAgICAgfQogICAgfQoKICAgIC8vIENsZWFuIHVwIGFueSByZW1haW5pbmcgdGFncwogICAgcGFyc2VFbmRUYWcoKTsKCiAgICBmdW5jdGlvbiBhZHZhbmNlIChuKSB7CiAgICAgIGluZGV4ICs9IG47CiAgICAgIGh0bWwgPSBodG1sLnN1YnN0cmluZyhuKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwYXJzZVN0YXJ0VGFnICgpIHsKICAgICAgdmFyIHN0YXJ0ID0gaHRtbC5tYXRjaChzdGFydFRhZ09wZW4pOwogICAgICBpZiAoc3RhcnQpIHsKICAgICAgICB2YXIgbWF0Y2ggPSB7CiAgICAgICAgICB0YWdOYW1lOiBzdGFydFsxXSwKICAgICAgICAgIGF0dHJzOiBbXSwKICAgICAgICAgIHN0YXJ0OiBpbmRleAogICAgICAgIH07CiAgICAgICAgYWR2YW5jZShzdGFydFswXS5sZW5ndGgpOwogICAgICAgIHZhciBlbmQsIGF0dHI7CiAgICAgICAgd2hpbGUgKCEoZW5kID0gaHRtbC5tYXRjaChzdGFydFRhZ0Nsb3NlKSkgJiYgKGF0dHIgPSBodG1sLm1hdGNoKGR5bmFtaWNBcmdBdHRyaWJ1dGUpIHx8IGh0bWwubWF0Y2goYXR0cmlidXRlKSkpIHsKICAgICAgICAgIGF0dHIuc3RhcnQgPSBpbmRleDsKICAgICAgICAgIGFkdmFuY2UoYXR0clswXS5sZW5ndGgpOwogICAgICAgICAgYXR0ci5lbmQgPSBpbmRleDsKICAgICAgICAgIG1hdGNoLmF0dHJzLnB1c2goYXR0cik7CiAgICAgICAgfQogICAgICAgIGlmIChlbmQpIHsKICAgICAgICAgIG1hdGNoLnVuYXJ5U2xhc2ggPSBlbmRbMV07CiAgICAgICAgICBhZHZhbmNlKGVuZFswXS5sZW5ndGgpOwogICAgICAgICAgbWF0Y2guZW5kID0gaW5kZXg7CiAgICAgICAgICByZXR1cm4gbWF0Y2gKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBoYW5kbGVTdGFydFRhZyAobWF0Y2gpIHsKICAgICAgdmFyIHRhZ05hbWUgPSBtYXRjaC50YWdOYW1lOwogICAgICB2YXIgdW5hcnlTbGFzaCA9IG1hdGNoLnVuYXJ5U2xhc2g7CgogICAgICBpZiAoZXhwZWN0SFRNTCkgewogICAgICAgIGlmIChsYXN0VGFnID09PSAncCcgJiYgaXNOb25QaHJhc2luZ1RhZyh0YWdOYW1lKSkgewogICAgICAgICAgcGFyc2VFbmRUYWcobGFzdFRhZyk7CiAgICAgICAgfQogICAgICAgIGlmIChjYW5CZUxlZnRPcGVuVGFnJCQxKHRhZ05hbWUpICYmIGxhc3RUYWcgPT09IHRhZ05hbWUpIHsKICAgICAgICAgIHBhcnNlRW5kVGFnKHRhZ05hbWUpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIHVuYXJ5ID0gaXNVbmFyeVRhZyQkMSh0YWdOYW1lKSB8fCAhIXVuYXJ5U2xhc2g7CgogICAgICB2YXIgbCA9IG1hdGNoLmF0dHJzLmxlbmd0aDsKICAgICAgdmFyIGF0dHJzID0gbmV3IEFycmF5KGwpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykgewogICAgICAgIHZhciBhcmdzID0gbWF0Y2guYXR0cnNbaV07CiAgICAgICAgdmFyIHZhbHVlID0gYXJnc1szXSB8fCBhcmdzWzRdIHx8IGFyZ3NbNV0gfHwgJyc7CiAgICAgICAgdmFyIHNob3VsZERlY29kZU5ld2xpbmVzID0gdGFnTmFtZSA9PT0gJ2EnICYmIGFyZ3NbMV0gPT09ICdocmVmJwogICAgICAgICAgPyBvcHRpb25zLnNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZgogICAgICAgICAgOiBvcHRpb25zLnNob3VsZERlY29kZU5ld2xpbmVzOwogICAgICAgIGF0dHJzW2ldID0gewogICAgICAgICAgbmFtZTogYXJnc1sxXSwKICAgICAgICAgIHZhbHVlOiBkZWNvZGVBdHRyKHZhbHVlLCBzaG91bGREZWNvZGVOZXdsaW5lcykKICAgICAgICB9OwogICAgICAgIGlmIChvcHRpb25zLm91dHB1dFNvdXJjZVJhbmdlKSB7CiAgICAgICAgICBhdHRyc1tpXS5zdGFydCA9IGFyZ3Muc3RhcnQgKyBhcmdzWzBdLm1hdGNoKC9eXHMqLykubGVuZ3RoOwogICAgICAgICAgYXR0cnNbaV0uZW5kID0gYXJncy5lbmQ7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoIXVuYXJ5KSB7CiAgICAgICAgc3RhY2sucHVzaCh7IHRhZzogdGFnTmFtZSwgbG93ZXJDYXNlZFRhZzogdGFnTmFtZS50b0xvd2VyQ2FzZSgpLCBhdHRyczogYXR0cnMsIHN0YXJ0OiBtYXRjaC5zdGFydCwgZW5kOiBtYXRjaC5lbmQgfSk7CiAgICAgICAgbGFzdFRhZyA9IHRhZ05hbWU7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLnN0YXJ0KSB7CiAgICAgICAgb3B0aW9ucy5zdGFydCh0YWdOYW1lLCBhdHRycywgdW5hcnksIG1hdGNoLnN0YXJ0LCBtYXRjaC5lbmQpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcGFyc2VFbmRUYWcgKHRhZ05hbWUsIHN0YXJ0LCBlbmQpIHsKICAgICAgdmFyIHBvcywgbG93ZXJDYXNlZFRhZ05hbWU7CiAgICAgIGlmIChzdGFydCA9PSBudWxsKSB7IHN0YXJ0ID0gaW5kZXg7IH0KICAgICAgaWYgKGVuZCA9PSBudWxsKSB7IGVuZCA9IGluZGV4OyB9CgogICAgICAvLyBGaW5kIHRoZSBjbG9zZXN0IG9wZW5lZCB0YWcgb2YgdGhlIHNhbWUgdHlwZQogICAgICBpZiAodGFnTmFtZSkgewogICAgICAgIGxvd2VyQ2FzZWRUYWdOYW1lID0gdGFnTmFtZS50b0xvd2VyQ2FzZSgpOwogICAgICAgIGZvciAocG9zID0gc3RhY2subGVuZ3RoIC0gMTsgcG9zID49IDA7IHBvcy0tKSB7CiAgICAgICAgICBpZiAoc3RhY2tbcG9zXS5sb3dlckNhc2VkVGFnID09PSBsb3dlckNhc2VkVGFnTmFtZSkgewogICAgICAgICAgICBicmVhawogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBJZiBubyB0YWcgbmFtZSBpcyBwcm92aWRlZCwgY2xlYW4gc2hvcAogICAgICAgIHBvcyA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChwb3MgPj0gMCkgewogICAgICAgIC8vIENsb3NlIGFsbCB0aGUgb3BlbiBlbGVtZW50cywgdXAgdGhlIHN0YWNrCiAgICAgICAgZm9yICh2YXIgaSA9IHN0YWNrLmxlbmd0aCAtIDE7IGkgPj0gcG9zOyBpLS0pIHsKICAgICAgICAgIGlmIChpID4gcG9zIHx8ICF0YWdOYW1lICYmCiAgICAgICAgICAgIG9wdGlvbnMud2FybgogICAgICAgICAgKSB7CiAgICAgICAgICAgIG9wdGlvbnMud2FybigKICAgICAgICAgICAgICAoInRhZyA8IiArIChzdGFja1tpXS50YWcpICsgIj4gaGFzIG5vIG1hdGNoaW5nIGVuZCB0YWcuIiksCiAgICAgICAgICAgICAgeyBzdGFydDogc3RhY2tbaV0uc3RhcnQsIGVuZDogc3RhY2tbaV0uZW5kIH0KICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChvcHRpb25zLmVuZCkgewogICAgICAgICAgICBvcHRpb25zLmVuZChzdGFja1tpXS50YWcsIHN0YXJ0LCBlbmQpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gUmVtb3ZlIHRoZSBvcGVuIGVsZW1lbnRzIGZyb20gdGhlIHN0YWNrCiAgICAgICAgc3RhY2subGVuZ3RoID0gcG9zOwogICAgICAgIGxhc3RUYWcgPSBwb3MgJiYgc3RhY2tbcG9zIC0gMV0udGFnOwogICAgICB9IGVsc2UgaWYgKGxvd2VyQ2FzZWRUYWdOYW1lID09PSAnYnInKSB7CiAgICAgICAgaWYgKG9wdGlvbnMuc3RhcnQpIHsKICAgICAgICAgIG9wdGlvbnMuc3RhcnQodGFnTmFtZSwgW10sIHRydWUsIHN0YXJ0LCBlbmQpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChsb3dlckNhc2VkVGFnTmFtZSA9PT0gJ3AnKSB7CiAgICAgICAgaWYgKG9wdGlvbnMuc3RhcnQpIHsKICAgICAgICAgIG9wdGlvbnMuc3RhcnQodGFnTmFtZSwgW10sIGZhbHNlLCBzdGFydCwgZW5kKTsKICAgICAgICB9CiAgICAgICAgaWYgKG9wdGlvbnMuZW5kKSB7CiAgICAgICAgICBvcHRpb25zLmVuZCh0YWdOYW1lLCBzdGFydCwgZW5kKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIC8qICAqLwoKICB2YXIgb25SRSA9IC9eQHxedi1vbjovOwogIHZhciBkaXJSRSA9IC9edi18XkB8Xjp8XiMvOwogIHZhciBmb3JBbGlhc1JFID0gLyhbXHNcU10qPylccysoPzppbnxvZilccysoW1xzXFNdKikvOwogIHZhciBmb3JJdGVyYXRvclJFID0gLywoW14sXH1cXV0qKSg/OiwoW14sXH1cXV0qKSk/JC87CiAgdmFyIHN0cmlwUGFyZW5zUkUgPSAvXlwofFwpJC9nOwogIHZhciBkeW5hbWljQXJnUkUgPSAvXlxbLipcXSQvOwoKICB2YXIgYXJnUkUgPSAvOiguKikkLzsKICB2YXIgYmluZFJFID0gL146fF5cLnxedi1iaW5kOi87CiAgdmFyIG1vZGlmaWVyUkUgPSAvXC5bXi5cXV0rKD89W15cXV0qJCkvZzsKCiAgdmFyIHNsb3RSRSA9IC9edi1zbG90KDp8JCl8XiMvOwoKICB2YXIgbGluZUJyZWFrUkUgPSAvW1xyXG5dLzsKICB2YXIgd2hpdGVzcGFjZVJFJDEgPSAvXHMrL2c7CgogIHZhciBpbnZhbGlkQXR0cmlidXRlUkUgPSAvW1xzIic8PlwvPV0vOwoKICB2YXIgZGVjb2RlSFRNTENhY2hlZCA9IGNhY2hlZChoZS5kZWNvZGUpOwoKICB2YXIgZW1wdHlTbG90U2NvcGVUb2tlbiA9ICJfZW1wdHlfIjsKCiAgLy8gY29uZmlndXJhYmxlIHN0YXRlCiAgdmFyIHdhcm4kMjsKICB2YXIgZGVsaW1pdGVyczsKICB2YXIgdHJhbnNmb3JtczsKICB2YXIgcHJlVHJhbnNmb3JtczsKICB2YXIgcG9zdFRyYW5zZm9ybXM7CiAgdmFyIHBsYXRmb3JtSXNQcmVUYWc7CiAgdmFyIHBsYXRmb3JtTXVzdFVzZVByb3A7CiAgdmFyIHBsYXRmb3JtR2V0VGFnTmFtZXNwYWNlOwogIHZhciBtYXliZUNvbXBvbmVudDsKCiAgZnVuY3Rpb24gY3JlYXRlQVNURWxlbWVudCAoCiAgICB0YWcsCiAgICBhdHRycywKICAgIHBhcmVudAogICkgewogICAgcmV0dXJuIHsKICAgICAgdHlwZTogMSwKICAgICAgdGFnOiB0YWcsCiAgICAgIGF0dHJzTGlzdDogYXR0cnMsCiAgICAgIGF0dHJzTWFwOiBtYWtlQXR0cnNNYXAoYXR0cnMpLAogICAgICByYXdBdHRyc01hcDoge30sCiAgICAgIHBhcmVudDogcGFyZW50LAogICAgICBjaGlsZHJlbjogW10KICAgIH0KICB9CgogIC8qKgogICAqIENvbnZlcnQgSFRNTCBzdHJpbmcgdG8gQVNULgogICAqLwogIGZ1bmN0aW9uIHBhcnNlICgKICAgIHRlbXBsYXRlLAogICAgb3B0aW9ucwogICkgewogICAgd2FybiQyID0gb3B0aW9ucy53YXJuIHx8IGJhc2VXYXJuOwoKICAgIHBsYXRmb3JtSXNQcmVUYWcgPSBvcHRpb25zLmlzUHJlVGFnIHx8IG5vOwogICAgcGxhdGZvcm1NdXN0VXNlUHJvcCA9IG9wdGlvbnMubXVzdFVzZVByb3AgfHwgbm87CiAgICBwbGF0Zm9ybUdldFRhZ05hbWVzcGFjZSA9IG9wdGlvbnMuZ2V0VGFnTmFtZXNwYWNlIHx8IG5vOwogICAgdmFyIGlzUmVzZXJ2ZWRUYWcgPSBvcHRpb25zLmlzUmVzZXJ2ZWRUYWcgfHwgbm87CiAgICBtYXliZUNvbXBvbmVudCA9IGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gISFlbC5jb21wb25lbnQgfHwgIWlzUmVzZXJ2ZWRUYWcoZWwudGFnKTsgfTsKCiAgICB0cmFuc2Zvcm1zID0gcGx1Y2tNb2R1bGVGdW5jdGlvbihvcHRpb25zLm1vZHVsZXMsICd0cmFuc2Zvcm1Ob2RlJyk7CiAgICBwcmVUcmFuc2Zvcm1zID0gcGx1Y2tNb2R1bGVGdW5jdGlvbihvcHRpb25zLm1vZHVsZXMsICdwcmVUcmFuc2Zvcm1Ob2RlJyk7CiAgICBwb3N0VHJhbnNmb3JtcyA9IHBsdWNrTW9kdWxlRnVuY3Rpb24ob3B0aW9ucy5tb2R1bGVzLCAncG9zdFRyYW5zZm9ybU5vZGUnKTsKCiAgICBkZWxpbWl0ZXJzID0gb3B0aW9ucy5kZWxpbWl0ZXJzOwoKICAgIHZhciBzdGFjayA9IFtdOwogICAgdmFyIHByZXNlcnZlV2hpdGVzcGFjZSA9IG9wdGlvbnMucHJlc2VydmVXaGl0ZXNwYWNlICE9PSBmYWxzZTsKICAgIHZhciB3aGl0ZXNwYWNlT3B0aW9uID0gb3B0aW9ucy53aGl0ZXNwYWNlOwogICAgdmFyIHJvb3Q7CiAgICB2YXIgY3VycmVudFBhcmVudDsKICAgIHZhciBpblZQcmUgPSBmYWxzZTsKICAgIHZhciBpblByZSA9IGZhbHNlOwogICAgdmFyIHdhcm5lZCA9IGZhbHNlOwoKICAgIGZ1bmN0aW9uIHdhcm5PbmNlIChtc2csIHJhbmdlKSB7CiAgICAgIGlmICghd2FybmVkKSB7CiAgICAgICAgd2FybmVkID0gdHJ1ZTsKICAgICAgICB3YXJuJDIobXNnLCByYW5nZSk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjbG9zZUVsZW1lbnQgKGVsZW1lbnQpIHsKICAgICAgdHJpbUVuZGluZ1doaXRlc3BhY2UoZWxlbWVudCk7CiAgICAgIGlmICghaW5WUHJlICYmICFlbGVtZW50LnByb2Nlc3NlZCkgewogICAgICAgIGVsZW1lbnQgPSBwcm9jZXNzRWxlbWVudChlbGVtZW50LCBvcHRpb25zKTsKICAgICAgfQogICAgICAvLyB0cmVlIG1hbmFnZW1lbnQKICAgICAgaWYgKCFzdGFjay5sZW5ndGggJiYgZWxlbWVudCAhPT0gcm9vdCkgewogICAgICAgIC8vIGFsbG93IHJvb3QgZWxlbWVudHMgd2l0aCB2LWlmLCB2LWVsc2UtaWYgYW5kIHYtZWxzZQogICAgICAgIGlmIChyb290LmlmICYmIChlbGVtZW50LmVsc2VpZiB8fCBlbGVtZW50LmVsc2UpKSB7CiAgICAgICAgICB7CiAgICAgICAgICAgIGNoZWNrUm9vdENvbnN0cmFpbnRzKGVsZW1lbnQpOwogICAgICAgICAgfQogICAgICAgICAgYWRkSWZDb25kaXRpb24ocm9vdCwgewogICAgICAgICAgICBleHA6IGVsZW1lbnQuZWxzZWlmLAogICAgICAgICAgICBibG9jazogZWxlbWVudAogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHdhcm5PbmNlKAogICAgICAgICAgICAiQ29tcG9uZW50IHRlbXBsYXRlIHNob3VsZCBjb250YWluIGV4YWN0bHkgb25lIHJvb3QgZWxlbWVudC4gIiArCiAgICAgICAgICAgICJJZiB5b3UgYXJlIHVzaW5nIHYtaWYgb24gbXVsdGlwbGUgZWxlbWVudHMsICIgKwogICAgICAgICAgICAidXNlIHYtZWxzZS1pZiB0byBjaGFpbiB0aGVtIGluc3RlYWQuIiwKICAgICAgICAgICAgeyBzdGFydDogZWxlbWVudC5zdGFydCB9CiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoY3VycmVudFBhcmVudCAmJiAhZWxlbWVudC5mb3JiaWRkZW4pIHsKICAgICAgICBpZiAoZWxlbWVudC5lbHNlaWYgfHwgZWxlbWVudC5lbHNlKSB7CiAgICAgICAgICBwcm9jZXNzSWZDb25kaXRpb25zKGVsZW1lbnQsIGN1cnJlbnRQYXJlbnQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoZWxlbWVudC5zbG90U2NvcGUpIHsKICAgICAgICAgICAgLy8gc2NvcGVkIHNsb3QKICAgICAgICAgICAgLy8ga2VlcCBpdCBpbiB0aGUgY2hpbGRyZW4gbGlzdCBzbyB0aGF0IHYtZWxzZSgtaWYpIGNvbmRpdGlvbnMgY2FuCiAgICAgICAgICAgIC8vIGZpbmQgaXQgYXMgdGhlIHByZXYgbm9kZS4KICAgICAgICAgICAgdmFyIG5hbWUgPSBlbGVtZW50LnNsb3RUYXJnZXQgfHwgJyJkZWZhdWx0IicKICAgICAgICAgICAgOyhjdXJyZW50UGFyZW50LnNjb3BlZFNsb3RzIHx8IChjdXJyZW50UGFyZW50LnNjb3BlZFNsb3RzID0ge30pKVtuYW1lXSA9IGVsZW1lbnQ7CiAgICAgICAgICB9CiAgICAgICAgICBjdXJyZW50UGFyZW50LmNoaWxkcmVuLnB1c2goZWxlbWVudCk7CiAgICAgICAgICBlbGVtZW50LnBhcmVudCA9IGN1cnJlbnRQYXJlbnQ7CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyBmaW5hbCBjaGlsZHJlbiBjbGVhbnVwCiAgICAgIC8vIGZpbHRlciBvdXQgc2NvcGVkIHNsb3RzCiAgICAgIGVsZW1lbnQuY2hpbGRyZW4gPSBlbGVtZW50LmNoaWxkcmVuLmZpbHRlcihmdW5jdGlvbiAoYykgeyByZXR1cm4gIShjKS5zbG90U2NvcGU7IH0pOwogICAgICAvLyByZW1vdmUgdHJhaWxpbmcgd2hpdGVzcGFjZSBub2RlIGFnYWluCiAgICAgIHRyaW1FbmRpbmdXaGl0ZXNwYWNlKGVsZW1lbnQpOwoKICAgICAgLy8gY2hlY2sgcHJlIHN0YXRlCiAgICAgIGlmIChlbGVtZW50LnByZSkgewogICAgICAgIGluVlByZSA9IGZhbHNlOwogICAgICB9CiAgICAgIGlmIChwbGF0Zm9ybUlzUHJlVGFnKGVsZW1lbnQudGFnKSkgewogICAgICAgIGluUHJlID0gZmFsc2U7CiAgICAgIH0KICAgICAgLy8gYXBwbHkgcG9zdC10cmFuc2Zvcm1zCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zdFRyYW5zZm9ybXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBwb3N0VHJhbnNmb3Jtc1tpXShlbGVtZW50LCBvcHRpb25zKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHRyaW1FbmRpbmdXaGl0ZXNwYWNlIChlbCkgewogICAgICAvLyByZW1vdmUgdHJhaWxpbmcgd2hpdGVzcGFjZSBub2RlCiAgICAgIGlmICghaW5QcmUpIHsKICAgICAgICB2YXIgbGFzdE5vZGU7CiAgICAgICAgd2hpbGUgKAogICAgICAgICAgKGxhc3ROb2RlID0gZWwuY2hpbGRyZW5bZWwuY2hpbGRyZW4ubGVuZ3RoIC0gMV0pICYmCiAgICAgICAgICBsYXN0Tm9kZS50eXBlID09PSAzICYmCiAgICAgICAgICBsYXN0Tm9kZS50ZXh0ID09PSAnICcKICAgICAgICApIHsKICAgICAgICAgIGVsLmNoaWxkcmVuLnBvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNoZWNrUm9vdENvbnN0cmFpbnRzIChlbCkgewogICAgICBpZiAoZWwudGFnID09PSAnc2xvdCcgfHwgZWwudGFnID09PSAndGVtcGxhdGUnKSB7CiAgICAgICAgd2Fybk9uY2UoCiAgICAgICAgICAiQ2Fubm90IHVzZSA8IiArIChlbC50YWcpICsgIj4gYXMgY29tcG9uZW50IHJvb3QgZWxlbWVudCBiZWNhdXNlIGl0IG1heSAiICsKICAgICAgICAgICdjb250YWluIG11bHRpcGxlIG5vZGVzLicsCiAgICAgICAgICB7IHN0YXJ0OiBlbC5zdGFydCB9CiAgICAgICAgKTsKICAgICAgfQogICAgICBpZiAoZWwuYXR0cnNNYXAuaGFzT3duUHJvcGVydHkoJ3YtZm9yJykpIHsKICAgICAgICB3YXJuT25jZSgKICAgICAgICAgICdDYW5ub3QgdXNlIHYtZm9yIG9uIHN0YXRlZnVsIGNvbXBvbmVudCByb290IGVsZW1lbnQgYmVjYXVzZSAnICsKICAgICAgICAgICdpdCByZW5kZXJzIG11bHRpcGxlIGVsZW1lbnRzLicsCiAgICAgICAgICBlbC5yYXdBdHRyc01hcFsndi1mb3InXQogICAgICAgICk7CiAgICAgIH0KICAgIH0KCiAgICBwYXJzZUhUTUwodGVtcGxhdGUsIHsKICAgICAgd2Fybjogd2FybiQyLAogICAgICBleHBlY3RIVE1MOiBvcHRpb25zLmV4cGVjdEhUTUwsCiAgICAgIGlzVW5hcnlUYWc6IG9wdGlvbnMuaXNVbmFyeVRhZywKICAgICAgY2FuQmVMZWZ0T3BlblRhZzogb3B0aW9ucy5jYW5CZUxlZnRPcGVuVGFnLAogICAgICBzaG91bGREZWNvZGVOZXdsaW5lczogb3B0aW9ucy5zaG91bGREZWNvZGVOZXdsaW5lcywKICAgICAgc2hvdWxkRGVjb2RlTmV3bGluZXNGb3JIcmVmOiBvcHRpb25zLnNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZiwKICAgICAgc2hvdWxkS2VlcENvbW1lbnQ6IG9wdGlvbnMuY29tbWVudHMsCiAgICAgIG91dHB1dFNvdXJjZVJhbmdlOiBvcHRpb25zLm91dHB1dFNvdXJjZVJhbmdlLAogICAgICBzdGFydDogZnVuY3Rpb24gc3RhcnQgKHRhZywgYXR0cnMsIHVuYXJ5LCBzdGFydCQxLCBlbmQpIHsKICAgICAgICAvLyBjaGVjayBuYW1lc3BhY2UuCiAgICAgICAgLy8gaW5oZXJpdCBwYXJlbnQgbnMgaWYgdGhlcmUgaXMgb25lCiAgICAgICAgdmFyIG5zID0gKGN1cnJlbnRQYXJlbnQgJiYgY3VycmVudFBhcmVudC5ucykgfHwgcGxhdGZvcm1HZXRUYWdOYW1lc3BhY2UodGFnKTsKCiAgICAgICAgLy8gaGFuZGxlIElFIHN2ZyBidWcKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgICBpZiAoaXNJRSAmJiBucyA9PT0gJ3N2ZycpIHsKICAgICAgICAgIGF0dHJzID0gZ3VhcmRJRVNWR0J1ZyhhdHRycyk7CiAgICAgICAgfQoKICAgICAgICB2YXIgZWxlbWVudCA9IGNyZWF0ZUFTVEVsZW1lbnQodGFnLCBhdHRycywgY3VycmVudFBhcmVudCk7CiAgICAgICAgaWYgKG5zKSB7CiAgICAgICAgICBlbGVtZW50Lm5zID0gbnM7CiAgICAgICAgfQoKICAgICAgICB7CiAgICAgICAgICBpZiAob3B0aW9ucy5vdXRwdXRTb3VyY2VSYW5nZSkgewogICAgICAgICAgICBlbGVtZW50LnN0YXJ0ID0gc3RhcnQkMTsKICAgICAgICAgICAgZWxlbWVudC5lbmQgPSBlbmQ7CiAgICAgICAgICAgIGVsZW1lbnQucmF3QXR0cnNNYXAgPSBlbGVtZW50LmF0dHJzTGlzdC5yZWR1Y2UoZnVuY3Rpb24gKGN1bXVsYXRlZCwgYXR0cikgewogICAgICAgICAgICAgIGN1bXVsYXRlZFthdHRyLm5hbWVdID0gYXR0cjsKICAgICAgICAgICAgICByZXR1cm4gY3VtdWxhdGVkCiAgICAgICAgICAgIH0sIHt9KTsKICAgICAgICAgIH0KICAgICAgICAgIGF0dHJzLmZvckVhY2goZnVuY3Rpb24gKGF0dHIpIHsKICAgICAgICAgICAgaWYgKGludmFsaWRBdHRyaWJ1dGVSRS50ZXN0KGF0dHIubmFtZSkpIHsKICAgICAgICAgICAgICB3YXJuJDIoCiAgICAgICAgICAgICAgICAiSW52YWxpZCBkeW5hbWljIGFyZ3VtZW50IGV4cHJlc3Npb246IGF0dHJpYnV0ZSBuYW1lcyBjYW5ub3QgY29udGFpbiAiICsKICAgICAgICAgICAgICAgICJzcGFjZXMsIHF1b3RlcywgPCwgPiwgLyBvciA9LiIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIHN0YXJ0OiBhdHRyLnN0YXJ0ICsgYXR0ci5uYW1lLmluZGV4T2YoIlsiKSwKICAgICAgICAgICAgICAgICAgZW5kOiBhdHRyLnN0YXJ0ICsgYXR0ci5uYW1lLmxlbmd0aAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKGlzRm9yYmlkZGVuVGFnKGVsZW1lbnQpICYmICFpc1NlcnZlclJlbmRlcmluZygpKSB7CiAgICAgICAgICBlbGVtZW50LmZvcmJpZGRlbiA9IHRydWU7CiAgICAgICAgICB3YXJuJDIoCiAgICAgICAgICAgICdUZW1wbGF0ZXMgc2hvdWxkIG9ubHkgYmUgcmVzcG9uc2libGUgZm9yIG1hcHBpbmcgdGhlIHN0YXRlIHRvIHRoZSAnICsKICAgICAgICAgICAgJ1VJLiBBdm9pZCBwbGFjaW5nIHRhZ3Mgd2l0aCBzaWRlLWVmZmVjdHMgaW4geW91ciB0ZW1wbGF0ZXMsIHN1Y2ggYXMgJyArCiAgICAgICAgICAgICI8IiArIHRhZyArICI+IiArICcsIGFzIHRoZXkgd2lsbCBub3QgYmUgcGFyc2VkLicsCiAgICAgICAgICAgIHsgc3RhcnQ6IGVsZW1lbnQuc3RhcnQgfQogICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgIC8vIGFwcGx5IHByZS10cmFuc2Zvcm1zCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcmVUcmFuc2Zvcm1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBlbGVtZW50ID0gcHJlVHJhbnNmb3Jtc1tpXShlbGVtZW50LCBvcHRpb25zKSB8fCBlbGVtZW50OwogICAgICAgIH0KCiAgICAgICAgaWYgKCFpblZQcmUpIHsKICAgICAgICAgIHByb2Nlc3NQcmUoZWxlbWVudCk7CiAgICAgICAgICBpZiAoZWxlbWVudC5wcmUpIHsKICAgICAgICAgICAgaW5WUHJlID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHBsYXRmb3JtSXNQcmVUYWcoZWxlbWVudC50YWcpKSB7CiAgICAgICAgICBpblByZSA9IHRydWU7CiAgICAgICAgfQogICAgICAgIGlmIChpblZQcmUpIHsKICAgICAgICAgIHByb2Nlc3NSYXdBdHRycyhlbGVtZW50KTsKICAgICAgICB9IGVsc2UgaWYgKCFlbGVtZW50LnByb2Nlc3NlZCkgewogICAgICAgICAgLy8gc3RydWN0dXJhbCBkaXJlY3RpdmVzCiAgICAgICAgICBwcm9jZXNzRm9yKGVsZW1lbnQpOwogICAgICAgICAgcHJvY2Vzc0lmKGVsZW1lbnQpOwogICAgICAgICAgcHJvY2Vzc09uY2UoZWxlbWVudCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoIXJvb3QpIHsKICAgICAgICAgIHJvb3QgPSBlbGVtZW50OwogICAgICAgICAgewogICAgICAgICAgICBjaGVja1Jvb3RDb25zdHJhaW50cyhyb290KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICghdW5hcnkpIHsKICAgICAgICAgIGN1cnJlbnRQYXJlbnQgPSBlbGVtZW50OwogICAgICAgICAgc3RhY2sucHVzaChlbGVtZW50KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2xvc2VFbGVtZW50KGVsZW1lbnQpOwogICAgICAgIH0KICAgICAgfSwKCiAgICAgIGVuZDogZnVuY3Rpb24gZW5kICh0YWcsIHN0YXJ0LCBlbmQkMSkgewogICAgICAgIHZhciBlbGVtZW50ID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07CiAgICAgICAgLy8gcG9wIHN0YWNrCiAgICAgICAgc3RhY2subGVuZ3RoIC09IDE7CiAgICAgICAgY3VycmVudFBhcmVudCA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdOwogICAgICAgIGlmIChvcHRpb25zLm91dHB1dFNvdXJjZVJhbmdlKSB7CiAgICAgICAgICBlbGVtZW50LmVuZCA9IGVuZCQxOwogICAgICAgIH0KICAgICAgICBjbG9zZUVsZW1lbnQoZWxlbWVudCk7CiAgICAgIH0sCgogICAgICBjaGFyczogZnVuY3Rpb24gY2hhcnMgKHRleHQsIHN0YXJ0LCBlbmQpIHsKICAgICAgICBpZiAoIWN1cnJlbnRQYXJlbnQpIHsKICAgICAgICAgIHsKICAgICAgICAgICAgaWYgKHRleHQgPT09IHRlbXBsYXRlKSB7CiAgICAgICAgICAgICAgd2Fybk9uY2UoCiAgICAgICAgICAgICAgICAnQ29tcG9uZW50IHRlbXBsYXRlIHJlcXVpcmVzIGEgcm9vdCBlbGVtZW50LCByYXRoZXIgdGhhbiBqdXN0IHRleHQuJywKICAgICAgICAgICAgICAgIHsgc3RhcnQ6IHN0YXJ0IH0KICAgICAgICAgICAgICApOwogICAgICAgICAgICB9IGVsc2UgaWYgKCh0ZXh0ID0gdGV4dC50cmltKCkpKSB7CiAgICAgICAgICAgICAgd2Fybk9uY2UoCiAgICAgICAgICAgICAgICAoInRleHQgXCIiICsgdGV4dCArICJcIiBvdXRzaWRlIHJvb3QgZWxlbWVudCB3aWxsIGJlIGlnbm9yZWQuIiksCiAgICAgICAgICAgICAgICB7IHN0YXJ0OiBzdGFydCB9CiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIC8vIElFIHRleHRhcmVhIHBsYWNlaG9sZGVyIGJ1ZwogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgICAgIGlmIChpc0lFICYmCiAgICAgICAgICBjdXJyZW50UGFyZW50LnRhZyA9PT0gJ3RleHRhcmVhJyAmJgogICAgICAgICAgY3VycmVudFBhcmVudC5hdHRyc01hcC5wbGFjZWhvbGRlciA9PT0gdGV4dAogICAgICAgICkgewogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIHZhciBjaGlsZHJlbiA9IGN1cnJlbnRQYXJlbnQuY2hpbGRyZW47CiAgICAgICAgaWYgKGluUHJlIHx8IHRleHQudHJpbSgpKSB7CiAgICAgICAgICB0ZXh0ID0gaXNUZXh0VGFnKGN1cnJlbnRQYXJlbnQpID8gdGV4dCA6IGRlY29kZUhUTUxDYWNoZWQodGV4dCk7CiAgICAgICAgfSBlbHNlIGlmICghY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgICAvLyByZW1vdmUgdGhlIHdoaXRlc3BhY2Utb25seSBub2RlIHJpZ2h0IGFmdGVyIGFuIG9wZW5pbmcgdGFnCiAgICAgICAgICB0ZXh0ID0gJyc7CiAgICAgICAgfSBlbHNlIGlmICh3aGl0ZXNwYWNlT3B0aW9uKSB7CiAgICAgICAgICBpZiAod2hpdGVzcGFjZU9wdGlvbiA9PT0gJ2NvbmRlbnNlJykgewogICAgICAgICAgICAvLyBpbiBjb25kZW5zZSBtb2RlLCByZW1vdmUgdGhlIHdoaXRlc3BhY2Ugbm9kZSBpZiBpdCBjb250YWlucwogICAgICAgICAgICAvLyBsaW5lIGJyZWFrLCBvdGhlcndpc2UgY29uZGVuc2UgdG8gYSBzaW5nbGUgc3BhY2UKICAgICAgICAgICAgdGV4dCA9IGxpbmVCcmVha1JFLnRlc3QodGV4dCkgPyAnJyA6ICcgJzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRleHQgPSAnICc7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRleHQgPSBwcmVzZXJ2ZVdoaXRlc3BhY2UgPyAnICcgOiAnJzsKICAgICAgICB9CiAgICAgICAgaWYgKHRleHQpIHsKICAgICAgICAgIGlmICghaW5QcmUgJiYgd2hpdGVzcGFjZU9wdGlvbiA9PT0gJ2NvbmRlbnNlJykgewogICAgICAgICAgICAvLyBjb25kZW5zZSBjb25zZWN1dGl2ZSB3aGl0ZXNwYWNlcyBpbnRvIHNpbmdsZSBzcGFjZQogICAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKHdoaXRlc3BhY2VSRSQxLCAnICcpOwogICAgICAgICAgfQogICAgICAgICAgdmFyIHJlczsKICAgICAgICAgIHZhciBjaGlsZDsKICAgICAgICAgIGlmICghaW5WUHJlICYmIHRleHQgIT09ICcgJyAmJiAocmVzID0gcGFyc2VUZXh0KHRleHQsIGRlbGltaXRlcnMpKSkgewogICAgICAgICAgICBjaGlsZCA9IHsKICAgICAgICAgICAgICB0eXBlOiAyLAogICAgICAgICAgICAgIGV4cHJlc3Npb246IHJlcy5leHByZXNzaW9uLAogICAgICAgICAgICAgIHRva2VuczogcmVzLnRva2VucywKICAgICAgICAgICAgICB0ZXh0OiB0ZXh0CiAgICAgICAgICAgIH07CiAgICAgICAgICB9IGVsc2UgaWYgKHRleHQgIT09ICcgJyB8fCAhY2hpbGRyZW4ubGVuZ3RoIHx8IGNoaWxkcmVuW2NoaWxkcmVuLmxlbmd0aCAtIDFdLnRleHQgIT09ICcgJykgewogICAgICAgICAgICBjaGlsZCA9IHsKICAgICAgICAgICAgICB0eXBlOiAzLAogICAgICAgICAgICAgIHRleHQ6IHRleHQKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChjaGlsZCkgewogICAgICAgICAgICBpZiAob3B0aW9ucy5vdXRwdXRTb3VyY2VSYW5nZSkgewogICAgICAgICAgICAgIGNoaWxkLnN0YXJ0ID0gc3RhcnQ7CiAgICAgICAgICAgICAgY2hpbGQuZW5kID0gZW5kOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNoaWxkcmVuLnB1c2goY2hpbGQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgY29tbWVudDogZnVuY3Rpb24gY29tbWVudCAodGV4dCwgc3RhcnQsIGVuZCkgewogICAgICAgIC8vIGFkZGluZyBhbnl0aGluZyBhcyBhIHNpYmxpbmcgdG8gdGhlIHJvb3Qgbm9kZSBpcyBmb3JiaWRkZW4KICAgICAgICAvLyBjb21tZW50cyBzaG91bGQgc3RpbGwgYmUgYWxsb3dlZCwgYnV0IGlnbm9yZWQKICAgICAgICBpZiAoY3VycmVudFBhcmVudCkgewogICAgICAgICAgdmFyIGNoaWxkID0gewogICAgICAgICAgICB0eXBlOiAzLAogICAgICAgICAgICB0ZXh0OiB0ZXh0LAogICAgICAgICAgICBpc0NvbW1lbnQ6IHRydWUKICAgICAgICAgIH07CiAgICAgICAgICBpZiAob3B0aW9ucy5vdXRwdXRTb3VyY2VSYW5nZSkgewogICAgICAgICAgICBjaGlsZC5zdGFydCA9IHN0YXJ0OwogICAgICAgICAgICBjaGlsZC5lbmQgPSBlbmQ7CiAgICAgICAgICB9CiAgICAgICAgICBjdXJyZW50UGFyZW50LmNoaWxkcmVuLnB1c2goY2hpbGQpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gcm9vdAogIH0KCiAgZnVuY3Rpb24gcHJvY2Vzc1ByZSAoZWwpIHsKICAgIGlmIChnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1wcmUnKSAhPSBudWxsKSB7CiAgICAgIGVsLnByZSA9IHRydWU7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBwcm9jZXNzUmF3QXR0cnMgKGVsKSB7CiAgICB2YXIgbGlzdCA9IGVsLmF0dHJzTGlzdDsKICAgIHZhciBsZW4gPSBsaXN0Lmxlbmd0aDsKICAgIGlmIChsZW4pIHsKICAgICAgdmFyIGF0dHJzID0gZWwuYXR0cnMgPSBuZXcgQXJyYXkobGVuKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgIGF0dHJzW2ldID0gewogICAgICAgICAgbmFtZTogbGlzdFtpXS5uYW1lLAogICAgICAgICAgdmFsdWU6IEpTT04uc3RyaW5naWZ5KGxpc3RbaV0udmFsdWUpCiAgICAgICAgfTsKICAgICAgICBpZiAobGlzdFtpXS5zdGFydCAhPSBudWxsKSB7CiAgICAgICAgICBhdHRyc1tpXS5zdGFydCA9IGxpc3RbaV0uc3RhcnQ7CiAgICAgICAgICBhdHRyc1tpXS5lbmQgPSBsaXN0W2ldLmVuZDsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoIWVsLnByZSkgewogICAgICAvLyBub24gcm9vdCBub2RlIGluIHByZSBibG9ja3Mgd2l0aCBubyBhdHRyaWJ1dGVzCiAgICAgIGVsLnBsYWluID0gdHJ1ZTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHByb2Nlc3NFbGVtZW50ICgKICAgIGVsZW1lbnQsCiAgICBvcHRpb25zCiAgKSB7CiAgICBwcm9jZXNzS2V5KGVsZW1lbnQpOwoKICAgIC8vIGRldGVybWluZSB3aGV0aGVyIHRoaXMgaXMgYSBwbGFpbiBlbGVtZW50IGFmdGVyCiAgICAvLyByZW1vdmluZyBzdHJ1Y3R1cmFsIGF0dHJpYnV0ZXMKICAgIGVsZW1lbnQucGxhaW4gPSAoCiAgICAgICFlbGVtZW50LmtleSAmJgogICAgICAhZWxlbWVudC5zY29wZWRTbG90cyAmJgogICAgICAhZWxlbWVudC5hdHRyc0xpc3QubGVuZ3RoCiAgICApOwoKICAgIHByb2Nlc3NSZWYoZWxlbWVudCk7CiAgICBwcm9jZXNzU2xvdENvbnRlbnQoZWxlbWVudCk7CiAgICBwcm9jZXNzU2xvdE91dGxldChlbGVtZW50KTsKICAgIHByb2Nlc3NDb21wb25lbnQoZWxlbWVudCk7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyYW5zZm9ybXMubGVuZ3RoOyBpKyspIHsKICAgICAgZWxlbWVudCA9IHRyYW5zZm9ybXNbaV0oZWxlbWVudCwgb3B0aW9ucykgfHwgZWxlbWVudDsKICAgIH0KICAgIHByb2Nlc3NBdHRycyhlbGVtZW50KTsKICAgIHJldHVybiBlbGVtZW50CiAgfQoKICBmdW5jdGlvbiBwcm9jZXNzS2V5IChlbCkgewogICAgdmFyIGV4cCA9IGdldEJpbmRpbmdBdHRyKGVsLCAna2V5Jyk7CiAgICBpZiAoZXhwKSB7CiAgICAgIHsKICAgICAgICBpZiAoZWwudGFnID09PSAndGVtcGxhdGUnKSB7CiAgICAgICAgICB3YXJuJDIoCiAgICAgICAgICAgICI8dGVtcGxhdGU+IGNhbm5vdCBiZSBrZXllZC4gUGxhY2UgdGhlIGtleSBvbiByZWFsIGVsZW1lbnRzIGluc3RlYWQuIiwKICAgICAgICAgICAgZ2V0UmF3QmluZGluZ0F0dHIoZWwsICdrZXknKQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgaWYgKGVsLmZvcikgewogICAgICAgICAgdmFyIGl0ZXJhdG9yID0gZWwuaXRlcmF0b3IyIHx8IGVsLml0ZXJhdG9yMTsKICAgICAgICAgIHZhciBwYXJlbnQgPSBlbC5wYXJlbnQ7CiAgICAgICAgICBpZiAoaXRlcmF0b3IgJiYgaXRlcmF0b3IgPT09IGV4cCAmJiBwYXJlbnQgJiYgcGFyZW50LnRhZyA9PT0gJ3RyYW5zaXRpb24tZ3JvdXAnKSB7CiAgICAgICAgICAgIHdhcm4kMigKICAgICAgICAgICAgICAiRG8gbm90IHVzZSB2LWZvciBpbmRleCBhcyBrZXkgb24gPHRyYW5zaXRpb24tZ3JvdXA+IGNoaWxkcmVuLCAiICsKICAgICAgICAgICAgICAidGhpcyBpcyB0aGUgc2FtZSBhcyBub3QgdXNpbmcga2V5cy4iLAogICAgICAgICAgICAgIGdldFJhd0JpbmRpbmdBdHRyKGVsLCAna2V5JyksCiAgICAgICAgICAgICAgdHJ1ZSAvKiB0aXAgKi8KICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgZWwua2V5ID0gZXhwOwogICAgfQogIH0KCiAgZnVuY3Rpb24gcHJvY2Vzc1JlZiAoZWwpIHsKICAgIHZhciByZWYgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ3JlZicpOwogICAgaWYgKHJlZikgewogICAgICBlbC5yZWYgPSByZWY7CiAgICAgIGVsLnJlZkluRm9yID0gY2hlY2tJbkZvcihlbCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBwcm9jZXNzRm9yIChlbCkgewogICAgdmFyIGV4cDsKICAgIGlmICgoZXhwID0gZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ3YtZm9yJykpKSB7CiAgICAgIHZhciByZXMgPSBwYXJzZUZvcihleHApOwogICAgICBpZiAocmVzKSB7CiAgICAgICAgZXh0ZW5kKGVsLCByZXMpOwogICAgICB9IGVsc2UgewogICAgICAgIHdhcm4kMigKICAgICAgICAgICgiSW52YWxpZCB2LWZvciBleHByZXNzaW9uOiAiICsgZXhwKSwKICAgICAgICAgIGVsLnJhd0F0dHJzTWFwWyd2LWZvciddCiAgICAgICAgKTsKICAgICAgfQogICAgfQogIH0KCgoKICBmdW5jdGlvbiBwYXJzZUZvciAoZXhwKSB7CiAgICB2YXIgaW5NYXRjaCA9IGV4cC5tYXRjaChmb3JBbGlhc1JFKTsKICAgIGlmICghaW5NYXRjaCkgeyByZXR1cm4gfQogICAgdmFyIHJlcyA9IHt9OwogICAgcmVzLmZvciA9IGluTWF0Y2hbMl0udHJpbSgpOwogICAgdmFyIGFsaWFzID0gaW5NYXRjaFsxXS50cmltKCkucmVwbGFjZShzdHJpcFBhcmVuc1JFLCAnJyk7CiAgICB2YXIgaXRlcmF0b3JNYXRjaCA9IGFsaWFzLm1hdGNoKGZvckl0ZXJhdG9yUkUpOwogICAgaWYgKGl0ZXJhdG9yTWF0Y2gpIHsKICAgICAgcmVzLmFsaWFzID0gYWxpYXMucmVwbGFjZShmb3JJdGVyYXRvclJFLCAnJykudHJpbSgpOwogICAgICByZXMuaXRlcmF0b3IxID0gaXRlcmF0b3JNYXRjaFsxXS50cmltKCk7CiAgICAgIGlmIChpdGVyYXRvck1hdGNoWzJdKSB7CiAgICAgICAgcmVzLml0ZXJhdG9yMiA9IGl0ZXJhdG9yTWF0Y2hbMl0udHJpbSgpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICByZXMuYWxpYXMgPSBhbGlhczsKICAgIH0KICAgIHJldHVybiByZXMKICB9CgogIGZ1bmN0aW9uIHByb2Nlc3NJZiAoZWwpIHsKICAgIHZhciBleHAgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1pZicpOwogICAgaWYgKGV4cCkgewogICAgICBlbC5pZiA9IGV4cDsKICAgICAgYWRkSWZDb25kaXRpb24oZWwsIHsKICAgICAgICBleHA6IGV4cCwKICAgICAgICBibG9jazogZWwKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBpZiAoZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ3YtZWxzZScpICE9IG51bGwpIHsKICAgICAgICBlbC5lbHNlID0gdHJ1ZTsKICAgICAgfQogICAgICB2YXIgZWxzZWlmID0gZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ3YtZWxzZS1pZicpOwogICAgICBpZiAoZWxzZWlmKSB7CiAgICAgICAgZWwuZWxzZWlmID0gZWxzZWlmOwogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBwcm9jZXNzSWZDb25kaXRpb25zIChlbCwgcGFyZW50KSB7CiAgICB2YXIgcHJldiA9IGZpbmRQcmV2RWxlbWVudChwYXJlbnQuY2hpbGRyZW4pOwogICAgaWYgKHByZXYgJiYgcHJldi5pZikgewogICAgICBhZGRJZkNvbmRpdGlvbihwcmV2LCB7CiAgICAgICAgZXhwOiBlbC5lbHNlaWYsCiAgICAgICAgYmxvY2s6IGVsCiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgd2FybiQyKAogICAgICAgICJ2LSIgKyAoZWwuZWxzZWlmID8gKCdlbHNlLWlmPSInICsgZWwuZWxzZWlmICsgJyInKSA6ICdlbHNlJykgKyAiICIgKwogICAgICAgICJ1c2VkIG9uIGVsZW1lbnQgPCIgKyAoZWwudGFnKSArICI+IHdpdGhvdXQgY29ycmVzcG9uZGluZyB2LWlmLiIsCiAgICAgICAgZWwucmF3QXR0cnNNYXBbZWwuZWxzZWlmID8gJ3YtZWxzZS1pZicgOiAndi1lbHNlJ10KICAgICAgKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGZpbmRQcmV2RWxlbWVudCAoY2hpbGRyZW4pIHsKICAgIHZhciBpID0gY2hpbGRyZW4ubGVuZ3RoOwogICAgd2hpbGUgKGktLSkgewogICAgICBpZiAoY2hpbGRyZW5baV0udHlwZSA9PT0gMSkgewogICAgICAgIHJldHVybiBjaGlsZHJlbltpXQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChjaGlsZHJlbltpXS50ZXh0ICE9PSAnICcpIHsKICAgICAgICAgIHdhcm4kMigKICAgICAgICAgICAgInRleHQgXCIiICsgKGNoaWxkcmVuW2ldLnRleHQudHJpbSgpKSArICJcIiBiZXR3ZWVuIHYtaWYgYW5kIHYtZWxzZSgtaWYpICIgKwogICAgICAgICAgICAid2lsbCBiZSBpZ25vcmVkLiIsCiAgICAgICAgICAgIGNoaWxkcmVuW2ldCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBjaGlsZHJlbi5wb3AoKTsKICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gYWRkSWZDb25kaXRpb24gKGVsLCBjb25kaXRpb24pIHsKICAgIGlmICghZWwuaWZDb25kaXRpb25zKSB7CiAgICAgIGVsLmlmQ29uZGl0aW9ucyA9IFtdOwogICAgfQogICAgZWwuaWZDb25kaXRpb25zLnB1c2goY29uZGl0aW9uKTsKICB9CgogIGZ1bmN0aW9uIHByb2Nlc3NPbmNlIChlbCkgewogICAgdmFyIG9uY2UkJDEgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1vbmNlJyk7CiAgICBpZiAob25jZSQkMSAhPSBudWxsKSB7CiAgICAgIGVsLm9uY2UgPSB0cnVlOwogICAgfQogIH0KCiAgLy8gaGFuZGxlIGNvbnRlbnQgYmVpbmcgcGFzc2VkIHRvIGEgY29tcG9uZW50IGFzIHNsb3QsCiAgLy8gZS5nLiA8dGVtcGxhdGUgc2xvdD0ieHh4Ij4sIDxkaXYgc2xvdC1zY29wZT0ieHh4Ij4KICBmdW5jdGlvbiBwcm9jZXNzU2xvdENvbnRlbnQgKGVsKSB7CiAgICB2YXIgc2xvdFNjb3BlOwogICAgaWYgKGVsLnRhZyA9PT0gJ3RlbXBsYXRlJykgewogICAgICBzbG90U2NvcGUgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAnc2NvcGUnKTsKICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICAgIGlmIChzbG90U2NvcGUpIHsKICAgICAgICB3YXJuJDIoCiAgICAgICAgICAidGhlIFwic2NvcGVcIiBhdHRyaWJ1dGUgZm9yIHNjb3BlZCBzbG90cyBoYXZlIGJlZW4gZGVwcmVjYXRlZCBhbmQgIiArCiAgICAgICAgICAicmVwbGFjZWQgYnkgXCJzbG90LXNjb3BlXCIgc2luY2UgMi41LiBUaGUgbmV3IFwic2xvdC1zY29wZVwiIGF0dHJpYnV0ZSAiICsKICAgICAgICAgICJjYW4gYWxzbyBiZSB1c2VkIG9uIHBsYWluIGVsZW1lbnRzIGluIGFkZGl0aW9uIHRvIDx0ZW1wbGF0ZT4gdG8gIiArCiAgICAgICAgICAiZGVub3RlIHNjb3BlZCBzbG90cy4iLAogICAgICAgICAgZWwucmF3QXR0cnNNYXBbJ3Njb3BlJ10sCiAgICAgICAgICB0cnVlCiAgICAgICAgKTsKICAgICAgfQogICAgICBlbC5zbG90U2NvcGUgPSBzbG90U2NvcGUgfHwgZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ3Nsb3Qtc2NvcGUnKTsKICAgIH0gZWxzZSBpZiAoKHNsb3RTY29wZSA9IGdldEFuZFJlbW92ZUF0dHIoZWwsICdzbG90LXNjb3BlJykpKSB7CiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgICBpZiAoZWwuYXR0cnNNYXBbJ3YtZm9yJ10pIHsKICAgICAgICB3YXJuJDIoCiAgICAgICAgICAiQW1iaWd1b3VzIGNvbWJpbmVkIHVzYWdlIG9mIHNsb3Qtc2NvcGUgYW5kIHYtZm9yIG9uIDwiICsgKGVsLnRhZykgKyAiPiAiICsKICAgICAgICAgICIodi1mb3IgdGFrZXMgaGlnaGVyIHByaW9yaXR5KS4gVXNlIGEgd3JhcHBlciA8dGVtcGxhdGU+IGZvciB0aGUgIiArCiAgICAgICAgICAic2NvcGVkIHNsb3QgdG8gbWFrZSBpdCBjbGVhcmVyLiIsCiAgICAgICAgICBlbC5yYXdBdHRyc01hcFsnc2xvdC1zY29wZSddLAogICAgICAgICAgdHJ1ZQogICAgICAgICk7CiAgICAgIH0KICAgICAgZWwuc2xvdFNjb3BlID0gc2xvdFNjb3BlOwogICAgfQoKICAgIC8vIHNsb3Q9Inh4eCIKICAgIHZhciBzbG90VGFyZ2V0ID0gZ2V0QmluZGluZ0F0dHIoZWwsICdzbG90Jyk7CiAgICBpZiAoc2xvdFRhcmdldCkgewogICAgICBlbC5zbG90VGFyZ2V0ID0gc2xvdFRhcmdldCA9PT0gJyIiJyA/ICciZGVmYXVsdCInIDogc2xvdFRhcmdldDsKICAgICAgZWwuc2xvdFRhcmdldER5bmFtaWMgPSAhIShlbC5hdHRyc01hcFsnOnNsb3QnXSB8fCBlbC5hdHRyc01hcFsndi1iaW5kOnNsb3QnXSk7CiAgICAgIC8vIHByZXNlcnZlIHNsb3QgYXMgYW4gYXR0cmlidXRlIGZvciBuYXRpdmUgc2hhZG93IERPTSBjb21wYXQKICAgICAgLy8gb25seSBmb3Igbm9uLXNjb3BlZCBzbG90cy4KICAgICAgaWYgKGVsLnRhZyAhPT0gJ3RlbXBsYXRlJyAmJiAhZWwuc2xvdFNjb3BlKSB7CiAgICAgICAgYWRkQXR0cihlbCwgJ3Nsb3QnLCBzbG90VGFyZ2V0LCBnZXRSYXdCaW5kaW5nQXR0cihlbCwgJ3Nsb3QnKSk7CiAgICAgIH0KICAgIH0KCiAgICAvLyAyLjYgdi1zbG90IHN5bnRheAogICAgewogICAgICBpZiAoZWwudGFnID09PSAndGVtcGxhdGUnKSB7CiAgICAgICAgLy8gdi1zbG90IG9uIDx0ZW1wbGF0ZT4KICAgICAgICB2YXIgc2xvdEJpbmRpbmcgPSBnZXRBbmRSZW1vdmVBdHRyQnlSZWdleChlbCwgc2xvdFJFKTsKICAgICAgICBpZiAoc2xvdEJpbmRpbmcpIHsKICAgICAgICAgIHsKICAgICAgICAgICAgaWYgKGVsLnNsb3RUYXJnZXQgfHwgZWwuc2xvdFNjb3BlKSB7CiAgICAgICAgICAgICAgd2FybiQyKAogICAgICAgICAgICAgICAgIlVuZXhwZWN0ZWQgbWl4ZWQgdXNhZ2Ugb2YgZGlmZmVyZW50IHNsb3Qgc3ludGF4ZXMuIiwKICAgICAgICAgICAgICAgIGVsCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoZWwucGFyZW50ICYmICFtYXliZUNvbXBvbmVudChlbC5wYXJlbnQpKSB7CiAgICAgICAgICAgICAgd2FybiQyKAogICAgICAgICAgICAgICAgIjx0ZW1wbGF0ZSB2LXNsb3Q+IGNhbiBvbmx5IGFwcGVhciBhdCB0aGUgcm9vdCBsZXZlbCBpbnNpZGUgIiArCiAgICAgICAgICAgICAgICAidGhlIHJlY2VpdmluZyBjb21wb25lbnQiLAogICAgICAgICAgICAgICAgZWwKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgcmVmID0gZ2V0U2xvdE5hbWUoc2xvdEJpbmRpbmcpOwogICAgICAgICAgdmFyIG5hbWUgPSByZWYubmFtZTsKICAgICAgICAgIHZhciBkeW5hbWljID0gcmVmLmR5bmFtaWM7CiAgICAgICAgICBlbC5zbG90VGFyZ2V0ID0gbmFtZTsKICAgICAgICAgIGVsLnNsb3RUYXJnZXREeW5hbWljID0gZHluYW1pYzsKICAgICAgICAgIGVsLnNsb3RTY29wZSA9IHNsb3RCaW5kaW5nLnZhbHVlIHx8IGVtcHR5U2xvdFNjb3BlVG9rZW47IC8vIGZvcmNlIGl0IGludG8gYSBzY29wZWQgc2xvdCBmb3IgcGVyZgogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyB2LXNsb3Qgb24gY29tcG9uZW50LCBkZW5vdGVzIGRlZmF1bHQgc2xvdAogICAgICAgIHZhciBzbG90QmluZGluZyQxID0gZ2V0QW5kUmVtb3ZlQXR0ckJ5UmVnZXgoZWwsIHNsb3RSRSk7CiAgICAgICAgaWYgKHNsb3RCaW5kaW5nJDEpIHsKICAgICAgICAgIHsKICAgICAgICAgICAgaWYgKCFtYXliZUNvbXBvbmVudChlbCkpIHsKICAgICAgICAgICAgICB3YXJuJDIoCiAgICAgICAgICAgICAgICAidi1zbG90IGNhbiBvbmx5IGJlIHVzZWQgb24gY29tcG9uZW50cyBvciA8dGVtcGxhdGU+LiIsCiAgICAgICAgICAgICAgICBzbG90QmluZGluZyQxCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoZWwuc2xvdFNjb3BlIHx8IGVsLnNsb3RUYXJnZXQpIHsKICAgICAgICAgICAgICB3YXJuJDIoCiAgICAgICAgICAgICAgICAiVW5leHBlY3RlZCBtaXhlZCB1c2FnZSBvZiBkaWZmZXJlbnQgc2xvdCBzeW50YXhlcy4iLAogICAgICAgICAgICAgICAgZWwKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChlbC5zY29wZWRTbG90cykgewogICAgICAgICAgICAgIHdhcm4kMigKICAgICAgICAgICAgICAgICJUbyBhdm9pZCBzY29wZSBhbWJpZ3VpdHksIHRoZSBkZWZhdWx0IHNsb3Qgc2hvdWxkIGFsc28gdXNlICIgKwogICAgICAgICAgICAgICAgIjx0ZW1wbGF0ZT4gc3ludGF4IHdoZW4gdGhlcmUgYXJlIG90aGVyIG5hbWVkIHNsb3RzLiIsCiAgICAgICAgICAgICAgICBzbG90QmluZGluZyQxCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgLy8gYWRkIHRoZSBjb21wb25lbnQncyBjaGlsZHJlbiB0byBpdHMgZGVmYXVsdCBzbG90CiAgICAgICAgICB2YXIgc2xvdHMgPSBlbC5zY29wZWRTbG90cyB8fCAoZWwuc2NvcGVkU2xvdHMgPSB7fSk7CiAgICAgICAgICB2YXIgcmVmJDEgPSBnZXRTbG90TmFtZShzbG90QmluZGluZyQxKTsKICAgICAgICAgIHZhciBuYW1lJDEgPSByZWYkMS5uYW1lOwogICAgICAgICAgdmFyIGR5bmFtaWMkMSA9IHJlZiQxLmR5bmFtaWM7CiAgICAgICAgICB2YXIgc2xvdENvbnRhaW5lciA9IHNsb3RzW25hbWUkMV0gPSBjcmVhdGVBU1RFbGVtZW50KCd0ZW1wbGF0ZScsIFtdLCBlbCk7CiAgICAgICAgICBzbG90Q29udGFpbmVyLnNsb3RUYXJnZXQgPSBuYW1lJDE7CiAgICAgICAgICBzbG90Q29udGFpbmVyLnNsb3RUYXJnZXREeW5hbWljID0gZHluYW1pYyQxOwogICAgICAgICAgc2xvdENvbnRhaW5lci5jaGlsZHJlbiA9IGVsLmNoaWxkcmVuLmZpbHRlcihmdW5jdGlvbiAoYykgewogICAgICAgICAgICBpZiAoIWMuc2xvdFNjb3BlKSB7CiAgICAgICAgICAgICAgYy5wYXJlbnQgPSBzbG90Q29udGFpbmVyOwogICAgICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgc2xvdENvbnRhaW5lci5zbG90U2NvcGUgPSBzbG90QmluZGluZyQxLnZhbHVlIHx8IGVtcHR5U2xvdFNjb3BlVG9rZW47CiAgICAgICAgICAvLyByZW1vdmUgY2hpbGRyZW4gYXMgdGhleSBhcmUgcmV0dXJuZWQgZnJvbSBzY29wZWRTbG90cyBub3cKICAgICAgICAgIGVsLmNoaWxkcmVuID0gW107CiAgICAgICAgICAvLyBtYXJrIGVsIG5vbi1wbGFpbiBzbyBkYXRhIGdldHMgZ2VuZXJhdGVkCiAgICAgICAgICBlbC5wbGFpbiA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gZ2V0U2xvdE5hbWUgKGJpbmRpbmcpIHsKICAgIHZhciBuYW1lID0gYmluZGluZy5uYW1lLnJlcGxhY2Uoc2xvdFJFLCAnJyk7CiAgICBpZiAoIW5hbWUpIHsKICAgICAgaWYgKGJpbmRpbmcubmFtZVswXSAhPT0gJyMnKSB7CiAgICAgICAgbmFtZSA9ICdkZWZhdWx0JzsKICAgICAgfSBlbHNlIHsKICAgICAgICB3YXJuJDIoCiAgICAgICAgICAidi1zbG90IHNob3J0aGFuZCBzeW50YXggcmVxdWlyZXMgYSBzbG90IG5hbWUuIiwKICAgICAgICAgIGJpbmRpbmcKICAgICAgICApOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gZHluYW1pY0FyZ1JFLnRlc3QobmFtZSkKICAgICAgLy8gZHluYW1pYyBbbmFtZV0KICAgICAgPyB7IG5hbWU6IG5hbWUuc2xpY2UoMSwgLTEpLCBkeW5hbWljOiB0cnVlIH0KICAgICAgLy8gc3RhdGljIG5hbWUKICAgICAgOiB7IG5hbWU6ICgiXCIiICsgbmFtZSArICJcIiIpLCBkeW5hbWljOiBmYWxzZSB9CiAgfQoKICAvLyBoYW5kbGUgPHNsb3QvPiBvdXRsZXRzCiAgZnVuY3Rpb24gcHJvY2Vzc1Nsb3RPdXRsZXQgKGVsKSB7CiAgICBpZiAoZWwudGFnID09PSAnc2xvdCcpIHsKICAgICAgZWwuc2xvdE5hbWUgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ25hbWUnKTsKICAgICAgaWYgKGVsLmtleSkgewogICAgICAgIHdhcm4kMigKICAgICAgICAgICJga2V5YCBkb2VzIG5vdCB3b3JrIG9uIDxzbG90PiBiZWNhdXNlIHNsb3RzIGFyZSBhYnN0cmFjdCBvdXRsZXRzICIgKwogICAgICAgICAgImFuZCBjYW4gcG9zc2libHkgZXhwYW5kIGludG8gbXVsdGlwbGUgZWxlbWVudHMuICIgKwogICAgICAgICAgIlVzZSB0aGUga2V5IG9uIGEgd3JhcHBpbmcgZWxlbWVudCBpbnN0ZWFkLiIsCiAgICAgICAgICBnZXRSYXdCaW5kaW5nQXR0cihlbCwgJ2tleScpCiAgICAgICAgKTsKICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gcHJvY2Vzc0NvbXBvbmVudCAoZWwpIHsKICAgIHZhciBiaW5kaW5nOwogICAgaWYgKChiaW5kaW5nID0gZ2V0QmluZGluZ0F0dHIoZWwsICdpcycpKSkgewogICAgICBlbC5jb21wb25lbnQgPSBiaW5kaW5nOwogICAgfQogICAgaWYgKGdldEFuZFJlbW92ZUF0dHIoZWwsICdpbmxpbmUtdGVtcGxhdGUnKSAhPSBudWxsKSB7CiAgICAgIGVsLmlubGluZVRlbXBsYXRlID0gdHJ1ZTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHByb2Nlc3NBdHRycyAoZWwpIHsKICAgIHZhciBsaXN0ID0gZWwuYXR0cnNMaXN0OwogICAgdmFyIGksIGwsIG5hbWUsIHJhd05hbWUsIHZhbHVlLCBtb2RpZmllcnMsIHN5bmNHZW4sIGlzRHluYW1pYzsKICAgIGZvciAoaSA9IDAsIGwgPSBsaXN0Lmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICBuYW1lID0gcmF3TmFtZSA9IGxpc3RbaV0ubmFtZTsKICAgICAgdmFsdWUgPSBsaXN0W2ldLnZhbHVlOwogICAgICBpZiAoZGlyUkUudGVzdChuYW1lKSkgewogICAgICAgIC8vIG1hcmsgZWxlbWVudCBhcyBkeW5hbWljCiAgICAgICAgZWwuaGFzQmluZGluZ3MgPSB0cnVlOwogICAgICAgIC8vIG1vZGlmaWVycwogICAgICAgIG1vZGlmaWVycyA9IHBhcnNlTW9kaWZpZXJzKG5hbWUucmVwbGFjZShkaXJSRSwgJycpKTsKICAgICAgICAvLyBzdXBwb3J0IC5mb28gc2hvcnRoYW5kIHN5bnRheCBmb3IgdGhlIC5wcm9wIG1vZGlmaWVyCiAgICAgICAgaWYgKG1vZGlmaWVycykgewogICAgICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZShtb2RpZmllclJFLCAnJyk7CiAgICAgICAgfQogICAgICAgIGlmIChiaW5kUkUudGVzdChuYW1lKSkgeyAvLyB2LWJpbmQKICAgICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoYmluZFJFLCAnJyk7CiAgICAgICAgICB2YWx1ZSA9IHBhcnNlRmlsdGVycyh2YWx1ZSk7CiAgICAgICAgICBpc0R5bmFtaWMgPSBkeW5hbWljQXJnUkUudGVzdChuYW1lKTsKICAgICAgICAgIGlmIChpc0R5bmFtaWMpIHsKICAgICAgICAgICAgbmFtZSA9IG5hbWUuc2xpY2UoMSwgLTEpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKAogICAgICAgICAgICB2YWx1ZS50cmltKCkubGVuZ3RoID09PSAwCiAgICAgICAgICApIHsKICAgICAgICAgICAgd2FybiQyKAogICAgICAgICAgICAgICgiVGhlIHZhbHVlIGZvciBhIHYtYmluZCBleHByZXNzaW9uIGNhbm5vdCBiZSBlbXB0eS4gRm91bmQgaW4gXCJ2LWJpbmQ6IiArIG5hbWUgKyAiXCIiKQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgaWYgKG1vZGlmaWVycykgewogICAgICAgICAgICBpZiAobW9kaWZpZXJzLnByb3AgJiYgIWlzRHluYW1pYykgewogICAgICAgICAgICAgIG5hbWUgPSBjYW1lbGl6ZShuYW1lKTsKICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gJ2lubmVySHRtbCcpIHsgbmFtZSA9ICdpbm5lckhUTUwnOyB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG1vZGlmaWVycy5jYW1lbCAmJiAhaXNEeW5hbWljKSB7CiAgICAgICAgICAgICAgbmFtZSA9IGNhbWVsaXplKG5hbWUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChtb2RpZmllcnMuc3luYykgewogICAgICAgICAgICAgIHN5bmNHZW4gPSBnZW5Bc3NpZ25tZW50Q29kZSh2YWx1ZSwgIiRldmVudCIpOwogICAgICAgICAgICAgIGlmICghaXNEeW5hbWljKSB7CiAgICAgICAgICAgICAgICBhZGRIYW5kbGVyKAogICAgICAgICAgICAgICAgICBlbCwKICAgICAgICAgICAgICAgICAgKCJ1cGRhdGU6IiArIChjYW1lbGl6ZShuYW1lKSkpLAogICAgICAgICAgICAgICAgICBzeW5jR2VuLAogICAgICAgICAgICAgICAgICBudWxsLAogICAgICAgICAgICAgICAgICBmYWxzZSwKICAgICAgICAgICAgICAgICAgd2FybiQyLAogICAgICAgICAgICAgICAgICBsaXN0W2ldCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgaWYgKGh5cGhlbmF0ZShuYW1lKSAhPT0gY2FtZWxpemUobmFtZSkpIHsKICAgICAgICAgICAgICAgICAgYWRkSGFuZGxlcigKICAgICAgICAgICAgICAgICAgICBlbCwKICAgICAgICAgICAgICAgICAgICAoInVwZGF0ZToiICsgKGh5cGhlbmF0ZShuYW1lKSkpLAogICAgICAgICAgICAgICAgICAgIHN5bmNHZW4sCiAgICAgICAgICAgICAgICAgICAgbnVsbCwKICAgICAgICAgICAgICAgICAgICBmYWxzZSwKICAgICAgICAgICAgICAgICAgICB3YXJuJDIsCiAgICAgICAgICAgICAgICAgICAgbGlzdFtpXQogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBoYW5kbGVyIHcvIGR5bmFtaWMgZXZlbnQgbmFtZQogICAgICAgICAgICAgICAgYWRkSGFuZGxlcigKICAgICAgICAgICAgICAgICAgZWwsCiAgICAgICAgICAgICAgICAgICgiXCJ1cGRhdGU6XCIrKCIgKyBuYW1lICsgIikiKSwKICAgICAgICAgICAgICAgICAgc3luY0dlbiwKICAgICAgICAgICAgICAgICAgbnVsbCwKICAgICAgICAgICAgICAgICAgZmFsc2UsCiAgICAgICAgICAgICAgICAgIHdhcm4kMiwKICAgICAgICAgICAgICAgICAgbGlzdFtpXSwKICAgICAgICAgICAgICAgICAgdHJ1ZSAvLyBkeW5hbWljCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKChtb2RpZmllcnMgJiYgbW9kaWZpZXJzLnByb3ApIHx8ICgKICAgICAgICAgICAgIWVsLmNvbXBvbmVudCAmJiBwbGF0Zm9ybU11c3RVc2VQcm9wKGVsLnRhZywgZWwuYXR0cnNNYXAudHlwZSwgbmFtZSkKICAgICAgICAgICkpIHsKICAgICAgICAgICAgYWRkUHJvcChlbCwgbmFtZSwgdmFsdWUsIGxpc3RbaV0sIGlzRHluYW1pYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhZGRBdHRyKGVsLCBuYW1lLCB2YWx1ZSwgbGlzdFtpXSwgaXNEeW5hbWljKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKG9uUkUudGVzdChuYW1lKSkgeyAvLyB2LW9uCiAgICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKG9uUkUsICcnKTsKICAgICAgICAgIGlzRHluYW1pYyA9IGR5bmFtaWNBcmdSRS50ZXN0KG5hbWUpOwogICAgICAgICAgaWYgKGlzRHluYW1pYykgewogICAgICAgICAgICBuYW1lID0gbmFtZS5zbGljZSgxLCAtMSk7CiAgICAgICAgICB9CiAgICAgICAgICBhZGRIYW5kbGVyKGVsLCBuYW1lLCB2YWx1ZSwgbW9kaWZpZXJzLCBmYWxzZSwgd2FybiQyLCBsaXN0W2ldLCBpc0R5bmFtaWMpOwogICAgICAgIH0gZWxzZSB7IC8vIG5vcm1hbCBkaXJlY3RpdmVzCiAgICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKGRpclJFLCAnJyk7CiAgICAgICAgICAvLyBwYXJzZSBhcmcKICAgICAgICAgIHZhciBhcmdNYXRjaCA9IG5hbWUubWF0Y2goYXJnUkUpOwogICAgICAgICAgdmFyIGFyZyA9IGFyZ01hdGNoICYmIGFyZ01hdGNoWzFdOwogICAgICAgICAgaXNEeW5hbWljID0gZmFsc2U7CiAgICAgICAgICBpZiAoYXJnKSB7CiAgICAgICAgICAgIG5hbWUgPSBuYW1lLnNsaWNlKDAsIC0oYXJnLmxlbmd0aCArIDEpKTsKICAgICAgICAgICAgaWYgKGR5bmFtaWNBcmdSRS50ZXN0KGFyZykpIHsKICAgICAgICAgICAgICBhcmcgPSBhcmcuc2xpY2UoMSwgLTEpOwogICAgICAgICAgICAgIGlzRHluYW1pYyA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGFkZERpcmVjdGl2ZShlbCwgbmFtZSwgcmF3TmFtZSwgdmFsdWUsIGFyZywgaXNEeW5hbWljLCBtb2RpZmllcnMsIGxpc3RbaV0pOwogICAgICAgICAgaWYgKG5hbWUgPT09ICdtb2RlbCcpIHsKICAgICAgICAgICAgY2hlY2tGb3JBbGlhc01vZGVsKGVsLCB2YWx1ZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIGxpdGVyYWwgYXR0cmlidXRlCiAgICAgICAgewogICAgICAgICAgdmFyIHJlcyA9IHBhcnNlVGV4dCh2YWx1ZSwgZGVsaW1pdGVycyk7CiAgICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICAgIHdhcm4kMigKICAgICAgICAgICAgICBuYW1lICsgIj1cIiIgKyB2YWx1ZSArICJcIjogIiArCiAgICAgICAgICAgICAgJ0ludGVycG9sYXRpb24gaW5zaWRlIGF0dHJpYnV0ZXMgaGFzIGJlZW4gcmVtb3ZlZC4gJyArCiAgICAgICAgICAgICAgJ1VzZSB2LWJpbmQgb3IgdGhlIGNvbG9uIHNob3J0aGFuZCBpbnN0ZWFkLiBGb3IgZXhhbXBsZSwgJyArCiAgICAgICAgICAgICAgJ2luc3RlYWQgb2YgPGRpdiBpZD0ie3sgdmFsIH19Ij4sIHVzZSA8ZGl2IDppZD0idmFsIj4uJywKICAgICAgICAgICAgICBsaXN0W2ldCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGFkZEF0dHIoZWwsIG5hbWUsIEpTT04uc3RyaW5naWZ5KHZhbHVlKSwgbGlzdFtpXSk7CiAgICAgICAgLy8gIzY4ODcgZmlyZWZveCBkb2Vzbid0IHVwZGF0ZSBtdXRlZCBzdGF0ZSBpZiBzZXQgdmlhIGF0dHJpYnV0ZQogICAgICAgIC8vIGV2ZW4gaW1tZWRpYXRlbHkgYWZ0ZXIgZWxlbWVudCBjcmVhdGlvbgogICAgICAgIGlmICghZWwuY29tcG9uZW50ICYmCiAgICAgICAgICAgIG5hbWUgPT09ICdtdXRlZCcgJiYKICAgICAgICAgICAgcGxhdGZvcm1NdXN0VXNlUHJvcChlbC50YWcsIGVsLmF0dHJzTWFwLnR5cGUsIG5hbWUpKSB7CiAgICAgICAgICBhZGRQcm9wKGVsLCBuYW1lLCAndHJ1ZScsIGxpc3RbaV0pOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gY2hlY2tJbkZvciAoZWwpIHsKICAgIHZhciBwYXJlbnQgPSBlbDsKICAgIHdoaWxlIChwYXJlbnQpIHsKICAgICAgaWYgKHBhcmVudC5mb3IgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDsKICAgIH0KICAgIHJldHVybiBmYWxzZQogIH0KCiAgZnVuY3Rpb24gcGFyc2VNb2RpZmllcnMgKG5hbWUpIHsKICAgIHZhciBtYXRjaCA9IG5hbWUubWF0Y2gobW9kaWZpZXJSRSk7CiAgICBpZiAobWF0Y2gpIHsKICAgICAgdmFyIHJldCA9IHt9OwogICAgICBtYXRjaC5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7IHJldFttLnNsaWNlKDEpXSA9IHRydWU7IH0pOwogICAgICByZXR1cm4gcmV0CiAgICB9CiAgfQoKICBmdW5jdGlvbiBtYWtlQXR0cnNNYXAgKGF0dHJzKSB7CiAgICB2YXIgbWFwID0ge307CiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGF0dHJzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICBpZiAoCiAgICAgICAgbWFwW2F0dHJzW2ldLm5hbWVdICYmICFpc0lFICYmICFpc0VkZ2UKICAgICAgKSB7CiAgICAgICAgd2FybiQyKCdkdXBsaWNhdGUgYXR0cmlidXRlOiAnICsgYXR0cnNbaV0ubmFtZSwgYXR0cnNbaV0pOwogICAgICB9CiAgICAgIG1hcFthdHRyc1tpXS5uYW1lXSA9IGF0dHJzW2ldLnZhbHVlOwogICAgfQogICAgcmV0dXJuIG1hcAogIH0KCiAgLy8gZm9yIHNjcmlwdCAoZS5nLiB0eXBlPSJ4L3RlbXBsYXRlIikgb3Igc3R5bGUsIGRvIG5vdCBkZWNvZGUgY29udGVudAogIGZ1bmN0aW9uIGlzVGV4dFRhZyAoZWwpIHsKICAgIHJldHVybiBlbC50YWcgPT09ICdzY3JpcHQnIHx8IGVsLnRhZyA9PT0gJ3N0eWxlJwogIH0KCiAgZnVuY3Rpb24gaXNGb3JiaWRkZW5UYWcgKGVsKSB7CiAgICByZXR1cm4gKAogICAgICBlbC50YWcgPT09ICdzdHlsZScgfHwKICAgICAgKGVsLnRhZyA9PT0gJ3NjcmlwdCcgJiYgKAogICAgICAgICFlbC5hdHRyc01hcC50eXBlIHx8CiAgICAgICAgZWwuYXR0cnNNYXAudHlwZSA9PT0gJ3RleHQvamF2YXNjcmlwdCcKICAgICAgKSkKICAgICkKICB9CgogIHZhciBpZU5TQnVnID0gL154bWxuczpOU1xkKy87CiAgdmFyIGllTlNQcmVmaXggPSAvXk5TXGQrOi87CgogIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgZnVuY3Rpb24gZ3VhcmRJRVNWR0J1ZyAoYXR0cnMpIHsKICAgIHZhciByZXMgPSBbXTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXR0cnMubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIGF0dHIgPSBhdHRyc1tpXTsKICAgICAgaWYgKCFpZU5TQnVnLnRlc3QoYXR0ci5uYW1lKSkgewogICAgICAgIGF0dHIubmFtZSA9IGF0dHIubmFtZS5yZXBsYWNlKGllTlNQcmVmaXgsICcnKTsKICAgICAgICByZXMucHVzaChhdHRyKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlcwogIH0KCiAgZnVuY3Rpb24gY2hlY2tGb3JBbGlhc01vZGVsIChlbCwgdmFsdWUpIHsKICAgIHZhciBfZWwgPSBlbDsKICAgIHdoaWxlIChfZWwpIHsKICAgICAgaWYgKF9lbC5mb3IgJiYgX2VsLmFsaWFzID09PSB2YWx1ZSkgewogICAgICAgIHdhcm4kMigKICAgICAgICAgICI8IiArIChlbC50YWcpICsgIiB2LW1vZGVsPVwiIiArIHZhbHVlICsgIlwiPjogIiArCiAgICAgICAgICAiWW91IGFyZSBiaW5kaW5nIHYtbW9kZWwgZGlyZWN0bHkgdG8gYSB2LWZvciBpdGVyYXRpb24gYWxpYXMuICIgKwogICAgICAgICAgIlRoaXMgd2lsbCBub3QgYmUgYWJsZSB0byBtb2RpZnkgdGhlIHYtZm9yIHNvdXJjZSBhcnJheSBiZWNhdXNlICIgKwogICAgICAgICAgIndyaXRpbmcgdG8gdGhlIGFsaWFzIGlzIGxpa2UgbW9kaWZ5aW5nIGEgZnVuY3Rpb24gbG9jYWwgdmFyaWFibGUuICIgKwogICAgICAgICAgIkNvbnNpZGVyIHVzaW5nIGFuIGFycmF5IG9mIG9iamVjdHMgYW5kIHVzZSB2LW1vZGVsIG9uIGFuIG9iamVjdCBwcm9wZXJ0eSBpbnN0ZWFkLiIsCiAgICAgICAgICBlbC5yYXdBdHRyc01hcFsndi1tb2RlbCddCiAgICAgICAgKTsKICAgICAgfQogICAgICBfZWwgPSBfZWwucGFyZW50OwogICAgfQogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIHByZVRyYW5zZm9ybU5vZGUgKGVsLCBvcHRpb25zKSB7CiAgICBpZiAoZWwudGFnID09PSAnaW5wdXQnKSB7CiAgICAgIHZhciBtYXAgPSBlbC5hdHRyc01hcDsKICAgICAgaWYgKCFtYXBbJ3YtbW9kZWwnXSkgewogICAgICAgIHJldHVybgogICAgICB9CgogICAgICB2YXIgdHlwZUJpbmRpbmc7CiAgICAgIGlmIChtYXBbJzp0eXBlJ10gfHwgbWFwWyd2LWJpbmQ6dHlwZSddKSB7CiAgICAgICAgdHlwZUJpbmRpbmcgPSBnZXRCaW5kaW5nQXR0cihlbCwgJ3R5cGUnKTsKICAgICAgfQogICAgICBpZiAoIW1hcC50eXBlICYmICF0eXBlQmluZGluZyAmJiBtYXBbJ3YtYmluZCddKSB7CiAgICAgICAgdHlwZUJpbmRpbmcgPSAiKCIgKyAobWFwWyd2LWJpbmQnXSkgKyAiKS50eXBlIjsKICAgICAgfQoKICAgICAgaWYgKHR5cGVCaW5kaW5nKSB7CiAgICAgICAgdmFyIGlmQ29uZGl0aW9uID0gZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ3YtaWYnLCB0cnVlKTsKICAgICAgICB2YXIgaWZDb25kaXRpb25FeHRyYSA9IGlmQ29uZGl0aW9uID8gKCImJigiICsgaWZDb25kaXRpb24gKyAiKSIpIDogIiI7CiAgICAgICAgdmFyIGhhc0Vsc2UgPSBnZXRBbmRSZW1vdmVBdHRyKGVsLCAndi1lbHNlJywgdHJ1ZSkgIT0gbnVsbDsKICAgICAgICB2YXIgZWxzZUlmQ29uZGl0aW9uID0gZ2V0QW5kUmVtb3ZlQXR0cihlbCwgJ3YtZWxzZS1pZicsIHRydWUpOwogICAgICAgIC8vIDEuIGNoZWNrYm94CiAgICAgICAgdmFyIGJyYW5jaDAgPSBjbG9uZUFTVEVsZW1lbnQoZWwpOwogICAgICAgIC8vIHByb2Nlc3MgZm9yIG9uIHRoZSBtYWluIG5vZGUKICAgICAgICBwcm9jZXNzRm9yKGJyYW5jaDApOwogICAgICAgIGFkZFJhd0F0dHIoYnJhbmNoMCwgJ3R5cGUnLCAnY2hlY2tib3gnKTsKICAgICAgICBwcm9jZXNzRWxlbWVudChicmFuY2gwLCBvcHRpb25zKTsKICAgICAgICBicmFuY2gwLnByb2Nlc3NlZCA9IHRydWU7IC8vIHByZXZlbnQgaXQgZnJvbSBkb3VibGUtcHJvY2Vzc2VkCiAgICAgICAgYnJhbmNoMC5pZiA9ICIoIiArIHR5cGVCaW5kaW5nICsgIik9PT0nY2hlY2tib3gnIiArIGlmQ29uZGl0aW9uRXh0cmE7CiAgICAgICAgYWRkSWZDb25kaXRpb24oYnJhbmNoMCwgewogICAgICAgICAgZXhwOiBicmFuY2gwLmlmLAogICAgICAgICAgYmxvY2s6IGJyYW5jaDAKICAgICAgICB9KTsKICAgICAgICAvLyAyLiBhZGQgcmFkaW8gZWxzZS1pZiBjb25kaXRpb24KICAgICAgICB2YXIgYnJhbmNoMSA9IGNsb25lQVNURWxlbWVudChlbCk7CiAgICAgICAgZ2V0QW5kUmVtb3ZlQXR0cihicmFuY2gxLCAndi1mb3InLCB0cnVlKTsKICAgICAgICBhZGRSYXdBdHRyKGJyYW5jaDEsICd0eXBlJywgJ3JhZGlvJyk7CiAgICAgICAgcHJvY2Vzc0VsZW1lbnQoYnJhbmNoMSwgb3B0aW9ucyk7CiAgICAgICAgYWRkSWZDb25kaXRpb24oYnJhbmNoMCwgewogICAgICAgICAgZXhwOiAiKCIgKyB0eXBlQmluZGluZyArICIpPT09J3JhZGlvJyIgKyBpZkNvbmRpdGlvbkV4dHJhLAogICAgICAgICAgYmxvY2s6IGJyYW5jaDEKICAgICAgICB9KTsKICAgICAgICAvLyAzLiBvdGhlcgogICAgICAgIHZhciBicmFuY2gyID0gY2xvbmVBU1RFbGVtZW50KGVsKTsKICAgICAgICBnZXRBbmRSZW1vdmVBdHRyKGJyYW5jaDIsICd2LWZvcicsIHRydWUpOwogICAgICAgIGFkZFJhd0F0dHIoYnJhbmNoMiwgJzp0eXBlJywgdHlwZUJpbmRpbmcpOwogICAgICAgIHByb2Nlc3NFbGVtZW50KGJyYW5jaDIsIG9wdGlvbnMpOwogICAgICAgIGFkZElmQ29uZGl0aW9uKGJyYW5jaDAsIHsKICAgICAgICAgIGV4cDogaWZDb25kaXRpb24sCiAgICAgICAgICBibG9jazogYnJhbmNoMgogICAgICAgIH0pOwoKICAgICAgICBpZiAoaGFzRWxzZSkgewogICAgICAgICAgYnJhbmNoMC5lbHNlID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgaWYgKGVsc2VJZkNvbmRpdGlvbikgewogICAgICAgICAgYnJhbmNoMC5lbHNlaWYgPSBlbHNlSWZDb25kaXRpb247CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gYnJhbmNoMAogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBjbG9uZUFTVEVsZW1lbnQgKGVsKSB7CiAgICByZXR1cm4gY3JlYXRlQVNURWxlbWVudChlbC50YWcsIGVsLmF0dHJzTGlzdC5zbGljZSgpLCBlbC5wYXJlbnQpCiAgfQoKICB2YXIgbW9kZWwkMSA9IHsKICAgIHByZVRyYW5zZm9ybU5vZGU6IHByZVRyYW5zZm9ybU5vZGUKICB9OwoKICB2YXIgbW9kdWxlcyQxID0gWwogICAga2xhc3MkMSwKICAgIHN0eWxlJDEsCiAgICBtb2RlbCQxCiAgXTsKCiAgLyogICovCgogIGZ1bmN0aW9uIHRleHQgKGVsLCBkaXIpIHsKICAgIGlmIChkaXIudmFsdWUpIHsKICAgICAgYWRkUHJvcChlbCwgJ3RleHRDb250ZW50JywgKCJfcygiICsgKGRpci52YWx1ZSkgKyAiKSIpLCBkaXIpOwogICAgfQogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIGh0bWwgKGVsLCBkaXIpIHsKICAgIGlmIChkaXIudmFsdWUpIHsKICAgICAgYWRkUHJvcChlbCwgJ2lubmVySFRNTCcsICgiX3MoIiArIChkaXIudmFsdWUpICsgIikiKSwgZGlyKTsKICAgIH0KICB9CgogIHZhciBkaXJlY3RpdmVzJDEgPSB7CiAgICBtb2RlbDogbW9kZWwsCiAgICB0ZXh0OiB0ZXh0LAogICAgaHRtbDogaHRtbAogIH07CgogIC8qICAqLwoKICB2YXIgYmFzZU9wdGlvbnMgPSB7CiAgICBleHBlY3RIVE1MOiB0cnVlLAogICAgbW9kdWxlczogbW9kdWxlcyQxLAogICAgZGlyZWN0aXZlczogZGlyZWN0aXZlcyQxLAogICAgaXNQcmVUYWc6IGlzUHJlVGFnLAogICAgaXNVbmFyeVRhZzogaXNVbmFyeVRhZywKICAgIG11c3RVc2VQcm9wOiBtdXN0VXNlUHJvcCwKICAgIGNhbkJlTGVmdE9wZW5UYWc6IGNhbkJlTGVmdE9wZW5UYWcsCiAgICBpc1Jlc2VydmVkVGFnOiBpc1Jlc2VydmVkVGFnLAogICAgZ2V0VGFnTmFtZXNwYWNlOiBnZXRUYWdOYW1lc3BhY2UsCiAgICBzdGF0aWNLZXlzOiBnZW5TdGF0aWNLZXlzKG1vZHVsZXMkMSkKICB9OwoKICAvKiAgKi8KCiAgdmFyIGlzU3RhdGljS2V5OwogIHZhciBpc1BsYXRmb3JtUmVzZXJ2ZWRUYWc7CgogIHZhciBnZW5TdGF0aWNLZXlzQ2FjaGVkID0gY2FjaGVkKGdlblN0YXRpY0tleXMkMSk7CgogIC8qKgogICAqIEdvYWwgb2YgdGhlIG9wdGltaXplcjogd2FsayB0aGUgZ2VuZXJhdGVkIHRlbXBsYXRlIEFTVCB0cmVlCiAgICogYW5kIGRldGVjdCBzdWItdHJlZXMgdGhhdCBhcmUgcHVyZWx5IHN0YXRpYywgaS5lLiBwYXJ0cyBvZgogICAqIHRoZSBET00gdGhhdCBuZXZlciBuZWVkcyB0byBjaGFuZ2UuCiAgICoKICAgKiBPbmNlIHdlIGRldGVjdCB0aGVzZSBzdWItdHJlZXMsIHdlIGNhbjoKICAgKgogICAqIDEuIEhvaXN0IHRoZW0gaW50byBjb25zdGFudHMsIHNvIHRoYXQgd2Ugbm8gbG9uZ2VyIG5lZWQgdG8KICAgKiAgICBjcmVhdGUgZnJlc2ggbm9kZXMgZm9yIHRoZW0gb24gZWFjaCByZS1yZW5kZXI7CiAgICogMi4gQ29tcGxldGVseSBza2lwIHRoZW0gaW4gdGhlIHBhdGNoaW5nIHByb2Nlc3MuCiAgICovCiAgZnVuY3Rpb24gb3B0aW1pemUgKHJvb3QsIG9wdGlvbnMpIHsKICAgIGlmICghcm9vdCkgeyByZXR1cm4gfQogICAgaXNTdGF0aWNLZXkgPSBnZW5TdGF0aWNLZXlzQ2FjaGVkKG9wdGlvbnMuc3RhdGljS2V5cyB8fCAnJyk7CiAgICBpc1BsYXRmb3JtUmVzZXJ2ZWRUYWcgPSBvcHRpb25zLmlzUmVzZXJ2ZWRUYWcgfHwgbm87CiAgICAvLyBmaXJzdCBwYXNzOiBtYXJrIGFsbCBub24tc3RhdGljIG5vZGVzLgogICAgbWFya1N0YXRpYyQxKHJvb3QpOwogICAgLy8gc2Vjb25kIHBhc3M6IG1hcmsgc3RhdGljIHJvb3RzLgogICAgbWFya1N0YXRpY1Jvb3RzKHJvb3QsIGZhbHNlKTsKICB9CgogIGZ1bmN0aW9uIGdlblN0YXRpY0tleXMkMSAoa2V5cykgewogICAgcmV0dXJuIG1ha2VNYXAoCiAgICAgICd0eXBlLHRhZyxhdHRyc0xpc3QsYXR0cnNNYXAscGxhaW4scGFyZW50LGNoaWxkcmVuLGF0dHJzLHN0YXJ0LGVuZCxyYXdBdHRyc01hcCcgKwogICAgICAoa2V5cyA/ICcsJyArIGtleXMgOiAnJykKICAgICkKICB9CgogIGZ1bmN0aW9uIG1hcmtTdGF0aWMkMSAobm9kZSkgewogICAgbm9kZS5zdGF0aWMgPSBpc1N0YXRpYyhub2RlKTsKICAgIGlmIChub2RlLnR5cGUgPT09IDEpIHsKICAgICAgLy8gZG8gbm90IG1ha2UgY29tcG9uZW50IHNsb3QgY29udGVudCBzdGF0aWMuIHRoaXMgYXZvaWRzCiAgICAgIC8vIDEuIGNvbXBvbmVudHMgbm90IGFibGUgdG8gbXV0YXRlIHNsb3Qgbm9kZXMKICAgICAgLy8gMi4gc3RhdGljIHNsb3QgY29udGVudCBmYWlscyBmb3IgaG90LXJlbG9hZGluZwogICAgICBpZiAoCiAgICAgICAgIWlzUGxhdGZvcm1SZXNlcnZlZFRhZyhub2RlLnRhZykgJiYKICAgICAgICBub2RlLnRhZyAhPT0gJ3Nsb3QnICYmCiAgICAgICAgbm9kZS5hdHRyc01hcFsnaW5saW5lLXRlbXBsYXRlJ10gPT0gbnVsbAogICAgICApIHsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgdmFyIGNoaWxkID0gbm9kZS5jaGlsZHJlbltpXTsKICAgICAgICBtYXJrU3RhdGljJDEoY2hpbGQpOwogICAgICAgIGlmICghY2hpbGQuc3RhdGljKSB7CiAgICAgICAgICBub2RlLnN0YXRpYyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAobm9kZS5pZkNvbmRpdGlvbnMpIHsKICAgICAgICBmb3IgKHZhciBpJDEgPSAxLCBsJDEgPSBub2RlLmlmQ29uZGl0aW9ucy5sZW5ndGg7IGkkMSA8IGwkMTsgaSQxKyspIHsKICAgICAgICAgIHZhciBibG9jayA9IG5vZGUuaWZDb25kaXRpb25zW2kkMV0uYmxvY2s7CiAgICAgICAgICBtYXJrU3RhdGljJDEoYmxvY2spOwogICAgICAgICAgaWYgKCFibG9jay5zdGF0aWMpIHsKICAgICAgICAgICAgbm9kZS5zdGF0aWMgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIG1hcmtTdGF0aWNSb290cyAobm9kZSwgaXNJbkZvcikgewogICAgaWYgKG5vZGUudHlwZSA9PT0gMSkgewogICAgICBpZiAobm9kZS5zdGF0aWMgfHwgbm9kZS5vbmNlKSB7CiAgICAgICAgbm9kZS5zdGF0aWNJbkZvciA9IGlzSW5Gb3I7CiAgICAgIH0KICAgICAgLy8gRm9yIGEgbm9kZSB0byBxdWFsaWZ5IGFzIGEgc3RhdGljIHJvb3QsIGl0IHNob3VsZCBoYXZlIGNoaWxkcmVuIHRoYXQKICAgICAgLy8gYXJlIG5vdCBqdXN0IHN0YXRpYyB0ZXh0LiBPdGhlcndpc2UgdGhlIGNvc3Qgb2YgaG9pc3Rpbmcgb3V0IHdpbGwKICAgICAgLy8gb3V0d2VpZ2ggdGhlIGJlbmVmaXRzIGFuZCBpdCdzIGJldHRlciBvZmYgdG8ganVzdCBhbHdheXMgcmVuZGVyIGl0IGZyZXNoLgogICAgICBpZiAobm9kZS5zdGF0aWMgJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGggJiYgISgKICAgICAgICBub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJgogICAgICAgIG5vZGUuY2hpbGRyZW5bMF0udHlwZSA9PT0gMwogICAgICApKSB7CiAgICAgICAgbm9kZS5zdGF0aWNSb290ID0gdHJ1ZTsKICAgICAgICByZXR1cm4KICAgICAgfSBlbHNlIHsKICAgICAgICBub2RlLnN0YXRpY1Jvb3QgPSBmYWxzZTsKICAgICAgfQogICAgICBpZiAobm9kZS5jaGlsZHJlbikgewogICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICAgIG1hcmtTdGF0aWNSb290cyhub2RlLmNoaWxkcmVuW2ldLCBpc0luRm9yIHx8ICEhbm9kZS5mb3IpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAobm9kZS5pZkNvbmRpdGlvbnMpIHsKICAgICAgICBmb3IgKHZhciBpJDEgPSAxLCBsJDEgPSBub2RlLmlmQ29uZGl0aW9ucy5sZW5ndGg7IGkkMSA8IGwkMTsgaSQxKyspIHsKICAgICAgICAgIG1hcmtTdGF0aWNSb290cyhub2RlLmlmQ29uZGl0aW9uc1tpJDFdLmJsb2NrLCBpc0luRm9yKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIGlzU3RhdGljIChub2RlKSB7CiAgICBpZiAobm9kZS50eXBlID09PSAyKSB7IC8vIGV4cHJlc3Npb24KICAgICAgcmV0dXJuIGZhbHNlCiAgICB9CiAgICBpZiAobm9kZS50eXBlID09PSAzKSB7IC8vIHRleHQKICAgICAgcmV0dXJuIHRydWUKICAgIH0KICAgIHJldHVybiAhIShub2RlLnByZSB8fCAoCiAgICAgICFub2RlLmhhc0JpbmRpbmdzICYmIC8vIG5vIGR5bmFtaWMgYmluZGluZ3MKICAgICAgIW5vZGUuaWYgJiYgIW5vZGUuZm9yICYmIC8vIG5vdCB2LWlmIG9yIHYtZm9yIG9yIHYtZWxzZQogICAgICAhaXNCdWlsdEluVGFnKG5vZGUudGFnKSAmJiAvLyBub3QgYSBidWlsdC1pbgogICAgICBpc1BsYXRmb3JtUmVzZXJ2ZWRUYWcobm9kZS50YWcpICYmIC8vIG5vdCBhIGNvbXBvbmVudAogICAgICAhaXNEaXJlY3RDaGlsZE9mVGVtcGxhdGVGb3Iobm9kZSkgJiYKICAgICAgT2JqZWN0LmtleXMobm9kZSkuZXZlcnkoaXNTdGF0aWNLZXkpCiAgICApKQogIH0KCiAgZnVuY3Rpb24gaXNEaXJlY3RDaGlsZE9mVGVtcGxhdGVGb3IgKG5vZGUpIHsKICAgIHdoaWxlIChub2RlLnBhcmVudCkgewogICAgICBub2RlID0gbm9kZS5wYXJlbnQ7CiAgICAgIGlmIChub2RlLnRhZyAhPT0gJ3RlbXBsYXRlJykgewogICAgICAgIHJldHVybiBmYWxzZQogICAgICB9CiAgICAgIGlmIChub2RlLmZvcikgewogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgIH0KICAgIHJldHVybiBmYWxzZQogIH0KCiAgLyogICovCgogIHZhciBmbkV4cFJFID0gL14oW1x3JF9dK3xcKFteKV0qP1wpKVxzKj0+fF5mdW5jdGlvbig/OlxzK1tcdyRdKyk/XHMqXCgvOwogIHZhciBmbkludm9rZVJFID0gL1woW14pXSo/XCk7KiQvOwogIHZhciBzaW1wbGVQYXRoUkUgPSAvXltBLVphLXpfJF1bXHckXSooPzpcLltBLVphLXpfJF1bXHckXSp8XFsnW14nXSo/J118XFsiW14iXSo/Il18XFtcZCtdfFxbW0EtWmEtel8kXVtcdyRdKl0pKiQvOwoKICAvLyBLZXlib2FyZEV2ZW50LmtleUNvZGUgYWxpYXNlcwogIHZhciBrZXlDb2RlcyA9IHsKICAgIGVzYzogMjcsCiAgICB0YWI6IDksCiAgICBlbnRlcjogMTMsCiAgICBzcGFjZTogMzIsCiAgICB1cDogMzgsCiAgICBsZWZ0OiAzNywKICAgIHJpZ2h0OiAzOSwKICAgIGRvd246IDQwLAogICAgJ2RlbGV0ZSc6IFs4LCA0Nl0KICB9OwoKICAvLyBLZXlib2FyZEV2ZW50LmtleSBhbGlhc2VzCiAgdmFyIGtleU5hbWVzID0gewogICAgLy8gIzc4ODA6IElFMTEgYW5kIEVkZ2UgdXNlIGBFc2NgIGZvciBFc2NhcGUga2V5IG5hbWUuCiAgICBlc2M6IFsnRXNjJywgJ0VzY2FwZSddLAogICAgdGFiOiAnVGFiJywKICAgIGVudGVyOiAnRW50ZXInLAogICAgLy8gIzkxMTI6IElFMTEgdXNlcyBgU3BhY2ViYXJgIGZvciBTcGFjZSBrZXkgbmFtZS4KICAgIHNwYWNlOiBbJyAnLCAnU3BhY2ViYXInXSwKICAgIC8vICM3ODA2OiBJRTExIHVzZXMga2V5IG5hbWVzIHdpdGhvdXQgYEFycm93YCBwcmVmaXggZm9yIGFycm93IGtleXMuCiAgICB1cDogWydVcCcsICdBcnJvd1VwJ10sCiAgICBsZWZ0OiBbJ0xlZnQnLCAnQXJyb3dMZWZ0J10sCiAgICByaWdodDogWydSaWdodCcsICdBcnJvd1JpZ2h0J10sCiAgICBkb3duOiBbJ0Rvd24nLCAnQXJyb3dEb3duJ10sCiAgICAvLyAjOTExMjogSUUxMSB1c2VzIGBEZWxgIGZvciBEZWxldGUga2V5IG5hbWUuCiAgICAnZGVsZXRlJzogWydCYWNrc3BhY2UnLCAnRGVsZXRlJywgJ0RlbCddCiAgfTsKCiAgLy8gIzQ4Njg6IG1vZGlmaWVycyB0aGF0IHByZXZlbnQgdGhlIGV4ZWN1dGlvbiBvZiB0aGUgbGlzdGVuZXIKICAvLyBuZWVkIHRvIGV4cGxpY2l0bHkgcmV0dXJuIG51bGwgc28gdGhhdCB3ZSBjYW4gZGV0ZXJtaW5lIHdoZXRoZXIgdG8gcmVtb3ZlCiAgLy8gdGhlIGxpc3RlbmVyIGZvciAub25jZQogIHZhciBnZW5HdWFyZCA9IGZ1bmN0aW9uIChjb25kaXRpb24pIHsgcmV0dXJuICgiaWYoIiArIGNvbmRpdGlvbiArICIpcmV0dXJuIG51bGw7Iik7IH07CgogIHZhciBtb2RpZmllckNvZGUgPSB7CiAgICBzdG9wOiAnJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOycsCiAgICBwcmV2ZW50OiAnJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7JywKICAgIHNlbGY6IGdlbkd1YXJkKCIkZXZlbnQudGFyZ2V0ICE9PSAkZXZlbnQuY3VycmVudFRhcmdldCIpLAogICAgY3RybDogZ2VuR3VhcmQoIiEkZXZlbnQuY3RybEtleSIpLAogICAgc2hpZnQ6IGdlbkd1YXJkKCIhJGV2ZW50LnNoaWZ0S2V5IiksCiAgICBhbHQ6IGdlbkd1YXJkKCIhJGV2ZW50LmFsdEtleSIpLAogICAgbWV0YTogZ2VuR3VhcmQoIiEkZXZlbnQubWV0YUtleSIpLAogICAgbGVmdDogZ2VuR3VhcmQoIididXR0b24nIGluICRldmVudCAmJiAkZXZlbnQuYnV0dG9uICE9PSAwIiksCiAgICBtaWRkbGU6IGdlbkd1YXJkKCInYnV0dG9uJyBpbiAkZXZlbnQgJiYgJGV2ZW50LmJ1dHRvbiAhPT0gMSIpLAogICAgcmlnaHQ6IGdlbkd1YXJkKCInYnV0dG9uJyBpbiAkZXZlbnQgJiYgJGV2ZW50LmJ1dHRvbiAhPT0gMiIpCiAgfTsKCiAgZnVuY3Rpb24gZ2VuSGFuZGxlcnMgKAogICAgZXZlbnRzLAogICAgaXNOYXRpdmUKICApIHsKICAgIHZhciBwcmVmaXggPSBpc05hdGl2ZSA/ICduYXRpdmVPbjonIDogJ29uOic7CiAgICB2YXIgc3RhdGljSGFuZGxlcnMgPSAiIjsKICAgIHZhciBkeW5hbWljSGFuZGxlcnMgPSAiIjsKICAgIGZvciAodmFyIG5hbWUgaW4gZXZlbnRzKSB7CiAgICAgIHZhciBoYW5kbGVyQ29kZSA9IGdlbkhhbmRsZXIoZXZlbnRzW25hbWVdKTsKICAgICAgaWYgKGV2ZW50c1tuYW1lXSAmJiBldmVudHNbbmFtZV0uZHluYW1pYykgewogICAgICAgIGR5bmFtaWNIYW5kbGVycyArPSBuYW1lICsgIiwiICsgaGFuZGxlckNvZGUgKyAiLCI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RhdGljSGFuZGxlcnMgKz0gIlwiIiArIG5hbWUgKyAiXCI6IiArIGhhbmRsZXJDb2RlICsgIiwiOwogICAgICB9CiAgICB9CiAgICBzdGF0aWNIYW5kbGVycyA9ICJ7IiArIChzdGF0aWNIYW5kbGVycy5zbGljZSgwLCAtMSkpICsgIn0iOwogICAgaWYgKGR5bmFtaWNIYW5kbGVycykgewogICAgICByZXR1cm4gcHJlZml4ICsgIl9kKCIgKyBzdGF0aWNIYW5kbGVycyArICIsWyIgKyAoZHluYW1pY0hhbmRsZXJzLnNsaWNlKDAsIC0xKSkgKyAiXSkiCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gcHJlZml4ICsgc3RhdGljSGFuZGxlcnMKICAgIH0KICB9CgogIGZ1bmN0aW9uIGdlbkhhbmRsZXIgKGhhbmRsZXIpIHsKICAgIGlmICghaGFuZGxlcikgewogICAgICByZXR1cm4gJ2Z1bmN0aW9uKCl7fScKICAgIH0KCiAgICBpZiAoQXJyYXkuaXNBcnJheShoYW5kbGVyKSkgewogICAgICByZXR1cm4gKCJbIiArIChoYW5kbGVyLm1hcChmdW5jdGlvbiAoaGFuZGxlcikgeyByZXR1cm4gZ2VuSGFuZGxlcihoYW5kbGVyKTsgfSkuam9pbignLCcpKSArICJdIikKICAgIH0KCiAgICB2YXIgaXNNZXRob2RQYXRoID0gc2ltcGxlUGF0aFJFLnRlc3QoaGFuZGxlci52YWx1ZSk7CiAgICB2YXIgaXNGdW5jdGlvbkV4cHJlc3Npb24gPSBmbkV4cFJFLnRlc3QoaGFuZGxlci52YWx1ZSk7CiAgICB2YXIgaXNGdW5jdGlvbkludm9jYXRpb24gPSBzaW1wbGVQYXRoUkUudGVzdChoYW5kbGVyLnZhbHVlLnJlcGxhY2UoZm5JbnZva2VSRSwgJycpKTsKCiAgICBpZiAoIWhhbmRsZXIubW9kaWZpZXJzKSB7CiAgICAgIGlmIChpc01ldGhvZFBhdGggfHwgaXNGdW5jdGlvbkV4cHJlc3Npb24pIHsKICAgICAgICByZXR1cm4gaGFuZGxlci52YWx1ZQogICAgICB9CiAgICAgIHJldHVybiAoImZ1bmN0aW9uKCRldmVudCl7IiArIChpc0Z1bmN0aW9uSW52b2NhdGlvbiA/ICgicmV0dXJuICIgKyAoaGFuZGxlci52YWx1ZSkpIDogaGFuZGxlci52YWx1ZSkgKyAifSIpIC8vIGlubGluZSBzdGF0ZW1lbnQKICAgIH0gZWxzZSB7CiAgICAgIHZhciBjb2RlID0gJyc7CiAgICAgIHZhciBnZW5Nb2RpZmllckNvZGUgPSAnJzsKICAgICAgdmFyIGtleXMgPSBbXTsKICAgICAgZm9yICh2YXIga2V5IGluIGhhbmRsZXIubW9kaWZpZXJzKSB7CiAgICAgICAgaWYgKG1vZGlmaWVyQ29kZVtrZXldKSB7CiAgICAgICAgICBnZW5Nb2RpZmllckNvZGUgKz0gbW9kaWZpZXJDb2RlW2tleV07CiAgICAgICAgICAvLyBsZWZ0L3JpZ2h0CiAgICAgICAgICBpZiAoa2V5Q29kZXNba2V5XSkgewogICAgICAgICAgICBrZXlzLnB1c2goa2V5KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2V4YWN0JykgewogICAgICAgICAgdmFyIG1vZGlmaWVycyA9IChoYW5kbGVyLm1vZGlmaWVycyk7CiAgICAgICAgICBnZW5Nb2RpZmllckNvZGUgKz0gZ2VuR3VhcmQoCiAgICAgICAgICAgIFsnY3RybCcsICdzaGlmdCcsICdhbHQnLCAnbWV0YSddCiAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoa2V5TW9kaWZpZXIpIHsgcmV0dXJuICFtb2RpZmllcnNba2V5TW9kaWZpZXJdOyB9KQogICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGtleU1vZGlmaWVyKSB7IHJldHVybiAoIiRldmVudC4iICsga2V5TW9kaWZpZXIgKyAiS2V5Iik7IH0pCiAgICAgICAgICAgICAgLmpvaW4oJ3x8JykKICAgICAgICAgICk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGtleXMucHVzaChrZXkpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoa2V5cy5sZW5ndGgpIHsKICAgICAgICBjb2RlICs9IGdlbktleUZpbHRlcihrZXlzKTsKICAgICAgfQogICAgICAvLyBNYWtlIHN1cmUgbW9kaWZpZXJzIGxpa2UgcHJldmVudCBhbmQgc3RvcCBnZXQgZXhlY3V0ZWQgYWZ0ZXIga2V5IGZpbHRlcmluZwogICAgICBpZiAoZ2VuTW9kaWZpZXJDb2RlKSB7CiAgICAgICAgY29kZSArPSBnZW5Nb2RpZmllckNvZGU7CiAgICAgIH0KICAgICAgdmFyIGhhbmRsZXJDb2RlID0gaXNNZXRob2RQYXRoCiAgICAgICAgPyAoInJldHVybiAiICsgKGhhbmRsZXIudmFsdWUpICsgIigkZXZlbnQpIikKICAgICAgICA6IGlzRnVuY3Rpb25FeHByZXNzaW9uCiAgICAgICAgICA/ICgicmV0dXJuICgiICsgKGhhbmRsZXIudmFsdWUpICsgIikoJGV2ZW50KSIpCiAgICAgICAgICA6IGlzRnVuY3Rpb25JbnZvY2F0aW9uCiAgICAgICAgICAgID8gKCJyZXR1cm4gIiArIChoYW5kbGVyLnZhbHVlKSkKICAgICAgICAgICAgOiBoYW5kbGVyLnZhbHVlOwogICAgICByZXR1cm4gKCJmdW5jdGlvbigkZXZlbnQpeyIgKyBjb2RlICsgaGFuZGxlckNvZGUgKyAifSIpCiAgICB9CiAgfQoKICBmdW5jdGlvbiBnZW5LZXlGaWx0ZXIgKGtleXMpIHsKICAgIHJldHVybiAoCiAgICAgIC8vIG1ha2Ugc3VyZSB0aGUga2V5IGZpbHRlcnMgb25seSBhcHBseSB0byBLZXlib2FyZEV2ZW50cwogICAgICAvLyAjOTQ0MTogY2FuJ3QgdXNlICdrZXlDb2RlJyBpbiAkZXZlbnQgYmVjYXVzZSBDaHJvbWUgYXV0b2ZpbGwgZmlyZXMgZmFrZQogICAgICAvLyBrZXkgZXZlbnRzIHRoYXQgZG8gbm90IGhhdmUga2V5Q29kZSBwcm9wZXJ0eS4uLgogICAgICAiaWYoISRldmVudC50eXBlLmluZGV4T2YoJ2tleScpJiYiICsKICAgICAgKGtleXMubWFwKGdlbkZpbHRlckNvZGUpLmpvaW4oJyYmJykpICsgIilyZXR1cm4gbnVsbDsiCiAgICApCiAgfQoKICBmdW5jdGlvbiBnZW5GaWx0ZXJDb2RlIChrZXkpIHsKICAgIHZhciBrZXlWYWwgPSBwYXJzZUludChrZXksIDEwKTsKICAgIGlmIChrZXlWYWwpIHsKICAgICAgcmV0dXJuICgiJGV2ZW50LmtleUNvZGUhPT0iICsga2V5VmFsKQogICAgfQogICAgdmFyIGtleUNvZGUgPSBrZXlDb2Rlc1trZXldOwogICAgdmFyIGtleU5hbWUgPSBrZXlOYW1lc1trZXldOwogICAgcmV0dXJuICgKICAgICAgIl9rKCRldmVudC5rZXlDb2RlLCIgKwogICAgICAoSlNPTi5zdHJpbmdpZnkoa2V5KSkgKyAiLCIgKwogICAgICAoSlNPTi5zdHJpbmdpZnkoa2V5Q29kZSkpICsgIiwiICsKICAgICAgIiRldmVudC5rZXksIiArCiAgICAgICIiICsgKEpTT04uc3RyaW5naWZ5KGtleU5hbWUpKSArCiAgICAgICIpIgogICAgKQogIH0KCiAgLyogICovCgogIGZ1bmN0aW9uIG9uIChlbCwgZGlyKSB7CiAgICBpZiAoZGlyLm1vZGlmaWVycykgewogICAgICB3YXJuKCJ2LW9uIHdpdGhvdXQgYXJndW1lbnQgZG9lcyBub3Qgc3VwcG9ydCBtb2RpZmllcnMuIik7CiAgICB9CiAgICBlbC53cmFwTGlzdGVuZXJzID0gZnVuY3Rpb24gKGNvZGUpIHsgcmV0dXJuICgiX2coIiArIGNvZGUgKyAiLCIgKyAoZGlyLnZhbHVlKSArICIpIik7IH07CiAgfQoKICAvKiAgKi8KCiAgZnVuY3Rpb24gYmluZCQxIChlbCwgZGlyKSB7CiAgICBlbC53cmFwRGF0YSA9IGZ1bmN0aW9uIChjb2RlKSB7CiAgICAgIHJldHVybiAoIl9iKCIgKyBjb2RlICsgIiwnIiArIChlbC50YWcpICsgIicsIiArIChkaXIudmFsdWUpICsgIiwiICsgKGRpci5tb2RpZmllcnMgJiYgZGlyLm1vZGlmaWVycy5wcm9wID8gJ3RydWUnIDogJ2ZhbHNlJykgKyAoZGlyLm1vZGlmaWVycyAmJiBkaXIubW9kaWZpZXJzLnN5bmMgPyAnLHRydWUnIDogJycpICsgIikiKQogICAgfTsKICB9CgogIC8qICAqLwoKICB2YXIgYmFzZURpcmVjdGl2ZXMgPSB7CiAgICBvbjogb24sCiAgICBiaW5kOiBiaW5kJDEsCiAgICBjbG9hazogbm9vcAogIH07CgogIC8qICAqLwoKCgoKCiAgdmFyIENvZGVnZW5TdGF0ZSA9IGZ1bmN0aW9uIENvZGVnZW5TdGF0ZSAob3B0aW9ucykgewogICAgdGhpcy5vcHRpb25zID0gb3B0aW9uczsKICAgIHRoaXMud2FybiA9IG9wdGlvbnMud2FybiB8fCBiYXNlV2FybjsKICAgIHRoaXMudHJhbnNmb3JtcyA9IHBsdWNrTW9kdWxlRnVuY3Rpb24ob3B0aW9ucy5tb2R1bGVzLCAndHJhbnNmb3JtQ29kZScpOwogICAgdGhpcy5kYXRhR2VuRm5zID0gcGx1Y2tNb2R1bGVGdW5jdGlvbihvcHRpb25zLm1vZHVsZXMsICdnZW5EYXRhJyk7CiAgICB0aGlzLmRpcmVjdGl2ZXMgPSBleHRlbmQoZXh0ZW5kKHt9LCBiYXNlRGlyZWN0aXZlcyksIG9wdGlvbnMuZGlyZWN0aXZlcyk7CiAgICB2YXIgaXNSZXNlcnZlZFRhZyA9IG9wdGlvbnMuaXNSZXNlcnZlZFRhZyB8fCBubzsKICAgIHRoaXMubWF5YmVDb21wb25lbnQgPSBmdW5jdGlvbiAoZWwpIHsgcmV0dXJuICEhZWwuY29tcG9uZW50IHx8ICFpc1Jlc2VydmVkVGFnKGVsLnRhZyk7IH07CiAgICB0aGlzLm9uY2VJZCA9IDA7CiAgICB0aGlzLnN0YXRpY1JlbmRlckZucyA9IFtdOwogICAgdGhpcy5wcmUgPSBmYWxzZTsKICB9OwoKCgogIGZ1bmN0aW9uIGdlbmVyYXRlICgKICAgIGFzdCwKICAgIG9wdGlvbnMKICApIHsKICAgIHZhciBzdGF0ZSA9IG5ldyBDb2RlZ2VuU3RhdGUob3B0aW9ucyk7CiAgICB2YXIgY29kZSA9IGFzdCA/IGdlbkVsZW1lbnQoYXN0LCBzdGF0ZSkgOiAnX2MoImRpdiIpJzsKICAgIHJldHVybiB7CiAgICAgIHJlbmRlcjogKCJ3aXRoKHRoaXMpe3JldHVybiAiICsgY29kZSArICJ9IiksCiAgICAgIHN0YXRpY1JlbmRlckZuczogc3RhdGUuc3RhdGljUmVuZGVyRm5zCiAgICB9CiAgfQoKICBmdW5jdGlvbiBnZW5FbGVtZW50IChlbCwgc3RhdGUpIHsKICAgIGlmIChlbC5wYXJlbnQpIHsKICAgICAgZWwucHJlID0gZWwucHJlIHx8IGVsLnBhcmVudC5wcmU7CiAgICB9CgogICAgaWYgKGVsLnN0YXRpY1Jvb3QgJiYgIWVsLnN0YXRpY1Byb2Nlc3NlZCkgewogICAgICByZXR1cm4gZ2VuU3RhdGljKGVsLCBzdGF0ZSkKICAgIH0gZWxzZSBpZiAoZWwub25jZSAmJiAhZWwub25jZVByb2Nlc3NlZCkgewogICAgICByZXR1cm4gZ2VuT25jZShlbCwgc3RhdGUpCiAgICB9IGVsc2UgaWYgKGVsLmZvciAmJiAhZWwuZm9yUHJvY2Vzc2VkKSB7CiAgICAgIHJldHVybiBnZW5Gb3IoZWwsIHN0YXRlKQogICAgfSBlbHNlIGlmIChlbC5pZiAmJiAhZWwuaWZQcm9jZXNzZWQpIHsKICAgICAgcmV0dXJuIGdlbklmKGVsLCBzdGF0ZSkKICAgIH0gZWxzZSBpZiAoZWwudGFnID09PSAndGVtcGxhdGUnICYmICFlbC5zbG90VGFyZ2V0ICYmICFzdGF0ZS5wcmUpIHsKICAgICAgcmV0dXJuIGdlbkNoaWxkcmVuKGVsLCBzdGF0ZSkgfHwgJ3ZvaWQgMCcKICAgIH0gZWxzZSBpZiAoZWwudGFnID09PSAnc2xvdCcpIHsKICAgICAgcmV0dXJuIGdlblNsb3QoZWwsIHN0YXRlKQogICAgfSBlbHNlIHsKICAgICAgLy8gY29tcG9uZW50IG9yIGVsZW1lbnQKICAgICAgdmFyIGNvZGU7CiAgICAgIGlmIChlbC5jb21wb25lbnQpIHsKICAgICAgICBjb2RlID0gZ2VuQ29tcG9uZW50KGVsLmNvbXBvbmVudCwgZWwsIHN0YXRlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgZGF0YTsKICAgICAgICBpZiAoIWVsLnBsYWluIHx8IChlbC5wcmUgJiYgc3RhdGUubWF5YmVDb21wb25lbnQoZWwpKSkgewogICAgICAgICAgZGF0YSA9IGdlbkRhdGEkMihlbCwgc3RhdGUpOwogICAgICAgIH0KCiAgICAgICAgdmFyIGNoaWxkcmVuID0gZWwuaW5saW5lVGVtcGxhdGUgPyBudWxsIDogZ2VuQ2hpbGRyZW4oZWwsIHN0YXRlLCB0cnVlKTsKICAgICAgICBjb2RlID0gIl9jKCciICsgKGVsLnRhZykgKyAiJyIgKyAoZGF0YSA/ICgiLCIgKyBkYXRhKSA6ICcnKSArIChjaGlsZHJlbiA/ICgiLCIgKyBjaGlsZHJlbikgOiAnJykgKyAiKSI7CiAgICAgIH0KICAgICAgLy8gbW9kdWxlIHRyYW5zZm9ybXMKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGF0ZS50cmFuc2Zvcm1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29kZSA9IHN0YXRlLnRyYW5zZm9ybXNbaV0oZWwsIGNvZGUpOwogICAgICB9CiAgICAgIHJldHVybiBjb2RlCiAgICB9CiAgfQoKICAvLyBob2lzdCBzdGF0aWMgc3ViLXRyZWVzIG91dAogIGZ1bmN0aW9uIGdlblN0YXRpYyAoZWwsIHN0YXRlKSB7CiAgICBlbC5zdGF0aWNQcm9jZXNzZWQgPSB0cnVlOwogICAgLy8gU29tZSBlbGVtZW50cyAodGVtcGxhdGVzKSBuZWVkIHRvIGJlaGF2ZSBkaWZmZXJlbnRseSBpbnNpZGUgb2YgYSB2LXByZQogICAgLy8gbm9kZS4gIEFsbCBwcmUgbm9kZXMgYXJlIHN0YXRpYyByb290cywgc28gd2UgY2FuIHVzZSB0aGlzIGFzIGEgbG9jYXRpb24gdG8KICAgIC8vIHdyYXAgYSBzdGF0ZSBjaGFuZ2UgYW5kIHJlc2V0IGl0IHVwb24gZXhpdGluZyB0aGUgcHJlIG5vZGUuCiAgICB2YXIgb3JpZ2luYWxQcmVTdGF0ZSA9IHN0YXRlLnByZTsKICAgIGlmIChlbC5wcmUpIHsKICAgICAgc3RhdGUucHJlID0gZWwucHJlOwogICAgfQogICAgc3RhdGUuc3RhdGljUmVuZGVyRm5zLnB1c2goKCJ3aXRoKHRoaXMpe3JldHVybiAiICsgKGdlbkVsZW1lbnQoZWwsIHN0YXRlKSkgKyAifSIpKTsKICAgIHN0YXRlLnByZSA9IG9yaWdpbmFsUHJlU3RhdGU7CiAgICByZXR1cm4gKCJfbSgiICsgKHN0YXRlLnN0YXRpY1JlbmRlckZucy5sZW5ndGggLSAxKSArIChlbC5zdGF0aWNJbkZvciA/ICcsdHJ1ZScgOiAnJykgKyAiKSIpCiAgfQoKICAvLyB2LW9uY2UKICBmdW5jdGlvbiBnZW5PbmNlIChlbCwgc3RhdGUpIHsKICAgIGVsLm9uY2VQcm9jZXNzZWQgPSB0cnVlOwogICAgaWYgKGVsLmlmICYmICFlbC5pZlByb2Nlc3NlZCkgewogICAgICByZXR1cm4gZ2VuSWYoZWwsIHN0YXRlKQogICAgfSBlbHNlIGlmIChlbC5zdGF0aWNJbkZvcikgewogICAgICB2YXIga2V5ID0gJyc7CiAgICAgIHZhciBwYXJlbnQgPSBlbC5wYXJlbnQ7CiAgICAgIHdoaWxlIChwYXJlbnQpIHsKICAgICAgICBpZiAocGFyZW50LmZvcikgewogICAgICAgICAga2V5ID0gcGFyZW50LmtleTsKICAgICAgICAgIGJyZWFrCiAgICAgICAgfQogICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7CiAgICAgIH0KICAgICAgaWYgKCFrZXkpIHsKICAgICAgICBzdGF0ZS53YXJuKAogICAgICAgICAgInYtb25jZSBjYW4gb25seSBiZSB1c2VkIGluc2lkZSB2LWZvciB0aGF0IGlzIGtleWVkLiAiLAogICAgICAgICAgZWwucmF3QXR0cnNNYXBbJ3Ytb25jZSddCiAgICAgICAgKTsKICAgICAgICByZXR1cm4gZ2VuRWxlbWVudChlbCwgc3RhdGUpCiAgICAgIH0KICAgICAgcmV0dXJuICgiX28oIiArIChnZW5FbGVtZW50KGVsLCBzdGF0ZSkpICsgIiwiICsgKHN0YXRlLm9uY2VJZCsrKSArICIsIiArIGtleSArICIpIikKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBnZW5TdGF0aWMoZWwsIHN0YXRlKQogICAgfQogIH0KCiAgZnVuY3Rpb24gZ2VuSWYgKAogICAgZWwsCiAgICBzdGF0ZSwKICAgIGFsdEdlbiwKICAgIGFsdEVtcHR5CiAgKSB7CiAgICBlbC5pZlByb2Nlc3NlZCA9IHRydWU7IC8vIGF2b2lkIHJlY3Vyc2lvbgogICAgcmV0dXJuIGdlbklmQ29uZGl0aW9ucyhlbC5pZkNvbmRpdGlvbnMuc2xpY2UoKSwgc3RhdGUsIGFsdEdlbiwgYWx0RW1wdHkpCiAgfQoKICBmdW5jdGlvbiBnZW5JZkNvbmRpdGlvbnMgKAogICAgY29uZGl0aW9ucywKICAgIHN0YXRlLAogICAgYWx0R2VuLAogICAgYWx0RW1wdHkKICApIHsKICAgIGlmICghY29uZGl0aW9ucy5sZW5ndGgpIHsKICAgICAgcmV0dXJuIGFsdEVtcHR5IHx8ICdfZSgpJwogICAgfQoKICAgIHZhciBjb25kaXRpb24gPSBjb25kaXRpb25zLnNoaWZ0KCk7CiAgICBpZiAoY29uZGl0aW9uLmV4cCkgewogICAgICByZXR1cm4gKCIoIiArIChjb25kaXRpb24uZXhwKSArICIpPyIgKyAoZ2VuVGVybmFyeUV4cChjb25kaXRpb24uYmxvY2spKSArICI6IiArIChnZW5JZkNvbmRpdGlvbnMoY29uZGl0aW9ucywgc3RhdGUsIGFsdEdlbiwgYWx0RW1wdHkpKSkKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiAoIiIgKyAoZ2VuVGVybmFyeUV4cChjb25kaXRpb24uYmxvY2spKSkKICAgIH0KCiAgICAvLyB2LWlmIHdpdGggdi1vbmNlIHNob3VsZCBnZW5lcmF0ZSBjb2RlIGxpa2UgKGEpP19tKDApOl9tKDEpCiAgICBmdW5jdGlvbiBnZW5UZXJuYXJ5RXhwIChlbCkgewogICAgICByZXR1cm4gYWx0R2VuCiAgICAgICAgPyBhbHRHZW4oZWwsIHN0YXRlKQogICAgICAgIDogZWwub25jZQogICAgICAgICAgPyBnZW5PbmNlKGVsLCBzdGF0ZSkKICAgICAgICAgIDogZ2VuRWxlbWVudChlbCwgc3RhdGUpCiAgICB9CiAgfQoKICBmdW5jdGlvbiBnZW5Gb3IgKAogICAgZWwsCiAgICBzdGF0ZSwKICAgIGFsdEdlbiwKICAgIGFsdEhlbHBlcgogICkgewogICAgdmFyIGV4cCA9IGVsLmZvcjsKICAgIHZhciBhbGlhcyA9IGVsLmFsaWFzOwogICAgdmFyIGl0ZXJhdG9yMSA9IGVsLml0ZXJhdG9yMSA/ICgiLCIgKyAoZWwuaXRlcmF0b3IxKSkgOiAnJzsKICAgIHZhciBpdGVyYXRvcjIgPSBlbC5pdGVyYXRvcjIgPyAoIiwiICsgKGVsLml0ZXJhdG9yMikpIDogJyc7CgogICAgaWYgKHN0YXRlLm1heWJlQ29tcG9uZW50KGVsKSAmJgogICAgICBlbC50YWcgIT09ICdzbG90JyAmJgogICAgICBlbC50YWcgIT09ICd0ZW1wbGF0ZScgJiYKICAgICAgIWVsLmtleQogICAgKSB7CiAgICAgIHN0YXRlLndhcm4oCiAgICAgICAgIjwiICsgKGVsLnRhZykgKyAiIHYtZm9yPVwiIiArIGFsaWFzICsgIiBpbiAiICsgZXhwICsgIlwiPjogY29tcG9uZW50IGxpc3RzIHJlbmRlcmVkIHdpdGggIiArCiAgICAgICAgInYtZm9yIHNob3VsZCBoYXZlIGV4cGxpY2l0IGtleXMuICIgKwogICAgICAgICJTZWUgaHR0cHM6Ly92dWVqcy5vcmcvZ3VpZGUvbGlzdC5odG1sI2tleSBmb3IgbW9yZSBpbmZvLiIsCiAgICAgICAgZWwucmF3QXR0cnNNYXBbJ3YtZm9yJ10sCiAgICAgICAgdHJ1ZSAvKiB0aXAgKi8KICAgICAgKTsKICAgIH0KCiAgICBlbC5mb3JQcm9jZXNzZWQgPSB0cnVlOyAvLyBhdm9pZCByZWN1cnNpb24KICAgIHJldHVybiAoYWx0SGVscGVyIHx8ICdfbCcpICsgIigoIiArIGV4cCArICIpLCIgKwogICAgICAiZnVuY3Rpb24oIiArIGFsaWFzICsgaXRlcmF0b3IxICsgaXRlcmF0b3IyICsgIil7IiArCiAgICAgICAgInJldHVybiAiICsgKChhbHRHZW4gfHwgZ2VuRWxlbWVudCkoZWwsIHN0YXRlKSkgKwogICAgICAnfSknCiAgfQoKICBmdW5jdGlvbiBnZW5EYXRhJDIgKGVsLCBzdGF0ZSkgewogICAgdmFyIGRhdGEgPSAneyc7CgogICAgLy8gZGlyZWN0aXZlcyBmaXJzdC4KICAgIC8vIGRpcmVjdGl2ZXMgbWF5IG11dGF0ZSB0aGUgZWwncyBvdGhlciBwcm9wZXJ0aWVzIGJlZm9yZSB0aGV5IGFyZSBnZW5lcmF0ZWQuCiAgICB2YXIgZGlycyA9IGdlbkRpcmVjdGl2ZXMoZWwsIHN0YXRlKTsKICAgIGlmIChkaXJzKSB7IGRhdGEgKz0gZGlycyArICcsJzsgfQoKICAgIC8vIGtleQogICAgaWYgKGVsLmtleSkgewogICAgICBkYXRhICs9ICJrZXk6IiArIChlbC5rZXkpICsgIiwiOwogICAgfQogICAgLy8gcmVmCiAgICBpZiAoZWwucmVmKSB7CiAgICAgIGRhdGEgKz0gInJlZjoiICsgKGVsLnJlZikgKyAiLCI7CiAgICB9CiAgICBpZiAoZWwucmVmSW5Gb3IpIHsKICAgICAgZGF0YSArPSAicmVmSW5Gb3I6dHJ1ZSwiOwogICAgfQogICAgLy8gcHJlCiAgICBpZiAoZWwucHJlKSB7CiAgICAgIGRhdGEgKz0gInByZTp0cnVlLCI7CiAgICB9CiAgICAvLyByZWNvcmQgb3JpZ2luYWwgdGFnIG5hbWUgZm9yIGNvbXBvbmVudHMgdXNpbmcgImlzIiBhdHRyaWJ1dGUKICAgIGlmIChlbC5jb21wb25lbnQpIHsKICAgICAgZGF0YSArPSAidGFnOlwiIiArIChlbC50YWcpICsgIlwiLCI7CiAgICB9CiAgICAvLyBtb2R1bGUgZGF0YSBnZW5lcmF0aW9uIGZ1bmN0aW9ucwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGF0ZS5kYXRhR2VuRm5zLmxlbmd0aDsgaSsrKSB7CiAgICAgIGRhdGEgKz0gc3RhdGUuZGF0YUdlbkZuc1tpXShlbCk7CiAgICB9CiAgICAvLyBhdHRyaWJ1dGVzCiAgICBpZiAoZWwuYXR0cnMpIHsKICAgICAgZGF0YSArPSAiYXR0cnM6IiArIChnZW5Qcm9wcyhlbC5hdHRycykpICsgIiwiOwogICAgfQogICAgLy8gRE9NIHByb3BzCiAgICBpZiAoZWwucHJvcHMpIHsKICAgICAgZGF0YSArPSAiZG9tUHJvcHM6IiArIChnZW5Qcm9wcyhlbC5wcm9wcykpICsgIiwiOwogICAgfQogICAgLy8gZXZlbnQgaGFuZGxlcnMKICAgIGlmIChlbC5ldmVudHMpIHsKICAgICAgZGF0YSArPSAoZ2VuSGFuZGxlcnMoZWwuZXZlbnRzLCBmYWxzZSkpICsgIiwiOwogICAgfQogICAgaWYgKGVsLm5hdGl2ZUV2ZW50cykgewogICAgICBkYXRhICs9IChnZW5IYW5kbGVycyhlbC5uYXRpdmVFdmVudHMsIHRydWUpKSArICIsIjsKICAgIH0KICAgIC8vIHNsb3QgdGFyZ2V0CiAgICAvLyBvbmx5IGZvciBub24tc2NvcGVkIHNsb3RzCiAgICBpZiAoZWwuc2xvdFRhcmdldCAmJiAhZWwuc2xvdFNjb3BlKSB7CiAgICAgIGRhdGEgKz0gInNsb3Q6IiArIChlbC5zbG90VGFyZ2V0KSArICIsIjsKICAgIH0KICAgIC8vIHNjb3BlZCBzbG90cwogICAgaWYgKGVsLnNjb3BlZFNsb3RzKSB7CiAgICAgIGRhdGEgKz0gKGdlblNjb3BlZFNsb3RzKGVsLCBlbC5zY29wZWRTbG90cywgc3RhdGUpKSArICIsIjsKICAgIH0KICAgIC8vIGNvbXBvbmVudCB2LW1vZGVsCiAgICBpZiAoZWwubW9kZWwpIHsKICAgICAgZGF0YSArPSAibW9kZWw6e3ZhbHVlOiIgKyAoZWwubW9kZWwudmFsdWUpICsgIixjYWxsYmFjazoiICsgKGVsLm1vZGVsLmNhbGxiYWNrKSArICIsZXhwcmVzc2lvbjoiICsgKGVsLm1vZGVsLmV4cHJlc3Npb24pICsgIn0sIjsKICAgIH0KICAgIC8vIGlubGluZS10ZW1wbGF0ZQogICAgaWYgKGVsLmlubGluZVRlbXBsYXRlKSB7CiAgICAgIHZhciBpbmxpbmVUZW1wbGF0ZSA9IGdlbklubGluZVRlbXBsYXRlKGVsLCBzdGF0ZSk7CiAgICAgIGlmIChpbmxpbmVUZW1wbGF0ZSkgewogICAgICAgIGRhdGEgKz0gaW5saW5lVGVtcGxhdGUgKyAiLCI7CiAgICAgIH0KICAgIH0KICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoLywkLywgJycpICsgJ30nOwogICAgLy8gdi1iaW5kIGR5bmFtaWMgYXJndW1lbnQgd3JhcAogICAgLy8gdi1iaW5kIHdpdGggZHluYW1pYyBhcmd1bWVudHMgbXVzdCBiZSBhcHBsaWVkIHVzaW5nIHRoZSBzYW1lIHYtYmluZCBvYmplY3QKICAgIC8vIG1lcmdlIGhlbHBlciBzbyB0aGF0IGNsYXNzL3N0eWxlL211c3RVc2VQcm9wIGF0dHJzIGFyZSBoYW5kbGVkIGNvcnJlY3RseS4KICAgIGlmIChlbC5keW5hbWljQXR0cnMpIHsKICAgICAgZGF0YSA9ICJfYigiICsgZGF0YSArICIsXCIiICsgKGVsLnRhZykgKyAiXCIsIiArIChnZW5Qcm9wcyhlbC5keW5hbWljQXR0cnMpKSArICIpIjsKICAgIH0KICAgIC8vIHYtYmluZCBkYXRhIHdyYXAKICAgIGlmIChlbC53cmFwRGF0YSkgewogICAgICBkYXRhID0gZWwud3JhcERhdGEoZGF0YSk7CiAgICB9CiAgICAvLyB2LW9uIGRhdGEgd3JhcAogICAgaWYgKGVsLndyYXBMaXN0ZW5lcnMpIHsKICAgICAgZGF0YSA9IGVsLndyYXBMaXN0ZW5lcnMoZGF0YSk7CiAgICB9CiAgICByZXR1cm4gZGF0YQogIH0KCiAgZnVuY3Rpb24gZ2VuRGlyZWN0aXZlcyAoZWwsIHN0YXRlKSB7CiAgICB2YXIgZGlycyA9IGVsLmRpcmVjdGl2ZXM7CiAgICBpZiAoIWRpcnMpIHsgcmV0dXJuIH0KICAgIHZhciByZXMgPSAnZGlyZWN0aXZlczpbJzsKICAgIHZhciBoYXNSdW50aW1lID0gZmFsc2U7CiAgICB2YXIgaSwgbCwgZGlyLCBuZWVkUnVudGltZTsKICAgIGZvciAoaSA9IDAsIGwgPSBkaXJzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICBkaXIgPSBkaXJzW2ldOwogICAgICBuZWVkUnVudGltZSA9IHRydWU7CiAgICAgIHZhciBnZW4gPSBzdGF0ZS5kaXJlY3RpdmVzW2Rpci5uYW1lXTsKICAgICAgaWYgKGdlbikgewogICAgICAgIC8vIGNvbXBpbGUtdGltZSBkaXJlY3RpdmUgdGhhdCBtYW5pcHVsYXRlcyBBU1QuCiAgICAgICAgLy8gcmV0dXJucyB0cnVlIGlmIGl0IGFsc28gbmVlZHMgYSBydW50aW1lIGNvdW50ZXJwYXJ0LgogICAgICAgIG5lZWRSdW50aW1lID0gISFnZW4oZWwsIGRpciwgc3RhdGUud2Fybik7CiAgICAgIH0KICAgICAgaWYgKG5lZWRSdW50aW1lKSB7CiAgICAgICAgaGFzUnVudGltZSA9IHRydWU7CiAgICAgICAgcmVzICs9ICJ7bmFtZTpcIiIgKyAoZGlyLm5hbWUpICsgIlwiLHJhd05hbWU6XCIiICsgKGRpci5yYXdOYW1lKSArICJcIiIgKyAoZGlyLnZhbHVlID8gKCIsdmFsdWU6KCIgKyAoZGlyLnZhbHVlKSArICIpLGV4cHJlc3Npb246IiArIChKU09OLnN0cmluZ2lmeShkaXIudmFsdWUpKSkgOiAnJykgKyAoZGlyLmFyZyA/ICgiLGFyZzoiICsgKGRpci5pc0R5bmFtaWNBcmcgPyBkaXIuYXJnIDogKCJcIiIgKyAoZGlyLmFyZykgKyAiXCIiKSkpIDogJycpICsgKGRpci5tb2RpZmllcnMgPyAoIixtb2RpZmllcnM6IiArIChKU09OLnN0cmluZ2lmeShkaXIubW9kaWZpZXJzKSkpIDogJycpICsgIn0sIjsKICAgICAgfQogICAgfQogICAgaWYgKGhhc1J1bnRpbWUpIHsKICAgICAgcmV0dXJuIHJlcy5zbGljZSgwLCAtMSkgKyAnXScKICAgIH0KICB9CgogIGZ1bmN0aW9uIGdlbklubGluZVRlbXBsYXRlIChlbCwgc3RhdGUpIHsKICAgIHZhciBhc3QgPSBlbC5jaGlsZHJlblswXTsKICAgIGlmIChlbC5jaGlsZHJlbi5sZW5ndGggIT09IDEgfHwgYXN0LnR5cGUgIT09IDEpIHsKICAgICAgc3RhdGUud2FybigKICAgICAgICAnSW5saW5lLXRlbXBsYXRlIGNvbXBvbmVudHMgbXVzdCBoYXZlIGV4YWN0bHkgb25lIGNoaWxkIGVsZW1lbnQuJywKICAgICAgICB7IHN0YXJ0OiBlbC5zdGFydCB9CiAgICAgICk7CiAgICB9CiAgICBpZiAoYXN0ICYmIGFzdC50eXBlID09PSAxKSB7CiAgICAgIHZhciBpbmxpbmVSZW5kZXJGbnMgPSBnZW5lcmF0ZShhc3QsIHN0YXRlLm9wdGlvbnMpOwogICAgICByZXR1cm4gKCJpbmxpbmVUZW1wbGF0ZTp7cmVuZGVyOmZ1bmN0aW9uKCl7IiArIChpbmxpbmVSZW5kZXJGbnMucmVuZGVyKSArICJ9LHN0YXRpY1JlbmRlckZuczpbIiArIChpbmxpbmVSZW5kZXJGbnMuc3RhdGljUmVuZGVyRm5zLm1hcChmdW5jdGlvbiAoY29kZSkgeyByZXR1cm4gKCJmdW5jdGlvbigpeyIgKyBjb2RlICsgIn0iKTsgfSkuam9pbignLCcpKSArICJdfSIpCiAgICB9CiAgfQoKICBmdW5jdGlvbiBnZW5TY29wZWRTbG90cyAoCiAgICBlbCwKICAgIHNsb3RzLAogICAgc3RhdGUKICApIHsKICAgIC8vIGJ5IGRlZmF1bHQgc2NvcGVkIHNsb3RzIGFyZSBjb25zaWRlcmVkICJzdGFibGUiLCB0aGlzIGFsbG93cyBjaGlsZAogICAgLy8gY29tcG9uZW50cyB3aXRoIG9ubHkgc2NvcGVkIHNsb3RzIHRvIHNraXAgZm9yY2VkIHVwZGF0ZXMgZnJvbSBwYXJlbnQuCiAgICAvLyBidXQgaW4gc29tZSBjYXNlcyB3ZSBoYXZlIHRvIGJhaWwtb3V0IG9mIHRoaXMgb3B0aW1pemF0aW9uCiAgICAvLyBmb3IgZXhhbXBsZSBpZiB0aGUgc2xvdCBjb250YWlucyBkeW5hbWljIG5hbWVzLCBoYXMgdi1pZiBvciB2LWZvciBvbiB0aGVtLi4uCiAgICB2YXIgbmVlZHNGb3JjZVVwZGF0ZSA9IGVsLmZvciB8fCBPYmplY3Qua2V5cyhzbG90cykuc29tZShmdW5jdGlvbiAoa2V5KSB7CiAgICAgIHZhciBzbG90ID0gc2xvdHNba2V5XTsKICAgICAgcmV0dXJuICgKICAgICAgICBzbG90LnNsb3RUYXJnZXREeW5hbWljIHx8CiAgICAgICAgc2xvdC5pZiB8fAogICAgICAgIHNsb3QuZm9yIHx8CiAgICAgICAgY29udGFpbnNTbG90Q2hpbGQoc2xvdCkgLy8gaXMgcGFzc2luZyBkb3duIHNsb3QgZnJvbSBwYXJlbnQgd2hpY2ggbWF5IGJlIGR5bmFtaWMKICAgICAgKQogICAgfSk7CgogICAgLy8gIzk1MzQ6IGlmIGEgY29tcG9uZW50IHdpdGggc2NvcGVkIHNsb3RzIGlzIGluc2lkZSBhIGNvbmRpdGlvbmFsIGJyYW5jaCwKICAgIC8vIGl0J3MgcG9zc2libGUgZm9yIHRoZSBzYW1lIGNvbXBvbmVudCB0byBiZSByZXVzZWQgYnV0IHdpdGggZGlmZmVyZW50CiAgICAvLyBjb21waWxlZCBzbG90IGNvbnRlbnQuIFRvIGF2b2lkIHRoYXQsIHdlIGdlbmVyYXRlIGEgdW5pcXVlIGtleSBiYXNlZCBvbgogICAgLy8gdGhlIGdlbmVyYXRlZCBjb2RlIG9mIGFsbCB0aGUgc2xvdCBjb250ZW50cy4KICAgIHZhciBuZWVkc0tleSA9ICEhZWwuaWY7CgogICAgLy8gT1Igd2hlbiBpdCBpcyBpbnNpZGUgYW5vdGhlciBzY29wZWQgc2xvdCBvciB2LWZvciAodGhlIHJlYWN0aXZpdHkgbWF5IGJlCiAgICAvLyBkaXNjb25uZWN0ZWQgZHVlIHRvIHRoZSBpbnRlcm1lZGlhdGUgc2NvcGUgdmFyaWFibGUpCiAgICAvLyAjOTQzOCwgIzk1MDYKICAgIC8vIFRPRE86IHRoaXMgY2FuIGJlIGZ1cnRoZXIgb3B0aW1pemVkIGJ5IHByb3Blcmx5IGFuYWx5emluZyBpbi1zY29wZSBiaW5kaW5ncwogICAgLy8gYW5kIHNraXAgZm9yY2UgdXBkYXRpbmcgb25lcyB0aGF0IGRvIG5vdCBhY3R1YWxseSB1c2Ugc2NvcGUgdmFyaWFibGVzLgogICAgaWYgKCFuZWVkc0ZvcmNlVXBkYXRlKSB7CiAgICAgIHZhciBwYXJlbnQgPSBlbC5wYXJlbnQ7CiAgICAgIHdoaWxlIChwYXJlbnQpIHsKICAgICAgICBpZiAoCiAgICAgICAgICAocGFyZW50LnNsb3RTY29wZSAmJiBwYXJlbnQuc2xvdFNjb3BlICE9PSBlbXB0eVNsb3RTY29wZVRva2VuKSB8fAogICAgICAgICAgcGFyZW50LmZvcgogICAgICAgICkgewogICAgICAgICAgbmVlZHNGb3JjZVVwZGF0ZSA9IHRydWU7CiAgICAgICAgICBicmVhawogICAgICAgIH0KICAgICAgICBpZiAocGFyZW50LmlmKSB7CiAgICAgICAgICBuZWVkc0tleSA9IHRydWU7CiAgICAgICAgfQogICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7CiAgICAgIH0KICAgIH0KCiAgICB2YXIgZ2VuZXJhdGVkU2xvdHMgPSBPYmplY3Qua2V5cyhzbG90cykKICAgICAgLm1hcChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBnZW5TY29wZWRTbG90KHNsb3RzW2tleV0sIHN0YXRlKTsgfSkKICAgICAgLmpvaW4oJywnKTsKCiAgICByZXR1cm4gKCJzY29wZWRTbG90czpfdShbIiArIGdlbmVyYXRlZFNsb3RzICsgIl0iICsgKG5lZWRzRm9yY2VVcGRhdGUgPyAiLG51bGwsdHJ1ZSIgOiAiIikgKyAoIW5lZWRzRm9yY2VVcGRhdGUgJiYgbmVlZHNLZXkgPyAoIixudWxsLGZhbHNlLCIgKyAoaGFzaChnZW5lcmF0ZWRTbG90cykpKSA6ICIiKSArICIpIikKICB9CgogIGZ1bmN0aW9uIGhhc2goc3RyKSB7CiAgICB2YXIgaGFzaCA9IDUzODE7CiAgICB2YXIgaSA9IHN0ci5sZW5ndGg7CiAgICB3aGlsZShpKSB7CiAgICAgIGhhc2ggPSAoaGFzaCAqIDMzKSBeIHN0ci5jaGFyQ29kZUF0KC0taSk7CiAgICB9CiAgICByZXR1cm4gaGFzaCA+Pj4gMAogIH0KCiAgZnVuY3Rpb24gY29udGFpbnNTbG90Q2hpbGQgKGVsKSB7CiAgICBpZiAoZWwudHlwZSA9PT0gMSkgewogICAgICBpZiAoZWwudGFnID09PSAnc2xvdCcpIHsKICAgICAgICByZXR1cm4gdHJ1ZQogICAgICB9CiAgICAgIHJldHVybiBlbC5jaGlsZHJlbi5zb21lKGNvbnRhaW5zU2xvdENoaWxkKQogICAgfQogICAgcmV0dXJuIGZhbHNlCiAgfQoKICBmdW5jdGlvbiBnZW5TY29wZWRTbG90ICgKICAgIGVsLAogICAgc3RhdGUKICApIHsKICAgIHZhciBpc0xlZ2FjeVN5bnRheCA9IGVsLmF0dHJzTWFwWydzbG90LXNjb3BlJ107CiAgICBpZiAoZWwuaWYgJiYgIWVsLmlmUHJvY2Vzc2VkICYmICFpc0xlZ2FjeVN5bnRheCkgewogICAgICByZXR1cm4gZ2VuSWYoZWwsIHN0YXRlLCBnZW5TY29wZWRTbG90LCAibnVsbCIpCiAgICB9CiAgICBpZiAoZWwuZm9yICYmICFlbC5mb3JQcm9jZXNzZWQpIHsKICAgICAgcmV0dXJuIGdlbkZvcihlbCwgc3RhdGUsIGdlblNjb3BlZFNsb3QpCiAgICB9CiAgICB2YXIgc2xvdFNjb3BlID0gZWwuc2xvdFNjb3BlID09PSBlbXB0eVNsb3RTY29wZVRva2VuCiAgICAgID8gIiIKICAgICAgOiBTdHJpbmcoZWwuc2xvdFNjb3BlKTsKICAgIHZhciBmbiA9ICJmdW5jdGlvbigiICsgc2xvdFNjb3BlICsgIil7IiArCiAgICAgICJyZXR1cm4gIiArIChlbC50YWcgPT09ICd0ZW1wbGF0ZScKICAgICAgICA/IGVsLmlmICYmIGlzTGVnYWN5U3ludGF4CiAgICAgICAgICA/ICgiKCIgKyAoZWwuaWYpICsgIik/IiArIChnZW5DaGlsZHJlbihlbCwgc3RhdGUpIHx8ICd1bmRlZmluZWQnKSArICI6dW5kZWZpbmVkIikKICAgICAgICAgIDogZ2VuQ2hpbGRyZW4oZWwsIHN0YXRlKSB8fCAndW5kZWZpbmVkJwogICAgICAgIDogZ2VuRWxlbWVudChlbCwgc3RhdGUpKSArICJ9IjsKICAgIC8vIHJldmVyc2UgcHJveHkgdi1zbG90IHdpdGhvdXQgc2NvcGUgb24gdGhpcy4kc2xvdHMKICAgIHZhciByZXZlcnNlUHJveHkgPSBzbG90U2NvcGUgPyAiIiA6ICIscHJveHk6dHJ1ZSI7CiAgICByZXR1cm4gKCJ7a2V5OiIgKyAoZWwuc2xvdFRhcmdldCB8fCAiXCJkZWZhdWx0XCIiKSArICIsZm46IiArIGZuICsgcmV2ZXJzZVByb3h5ICsgIn0iKQogIH0KCiAgZnVuY3Rpb24gZ2VuQ2hpbGRyZW4gKAogICAgZWwsCiAgICBzdGF0ZSwKICAgIGNoZWNrU2tpcCwKICAgIGFsdEdlbkVsZW1lbnQsCiAgICBhbHRHZW5Ob2RlCiAgKSB7CiAgICB2YXIgY2hpbGRyZW4gPSBlbC5jaGlsZHJlbjsKICAgIGlmIChjaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgdmFyIGVsJDEgPSBjaGlsZHJlblswXTsKICAgICAgLy8gb3B0aW1pemUgc2luZ2xlIHYtZm9yCiAgICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPT09IDEgJiYKICAgICAgICBlbCQxLmZvciAmJgogICAgICAgIGVsJDEudGFnICE9PSAndGVtcGxhdGUnICYmCiAgICAgICAgZWwkMS50YWcgIT09ICdzbG90JwogICAgICApIHsKICAgICAgICB2YXIgbm9ybWFsaXphdGlvblR5cGUgPSBjaGVja1NraXAKICAgICAgICAgID8gc3RhdGUubWF5YmVDb21wb25lbnQoZWwkMSkgPyAiLDEiIDogIiwwIgogICAgICAgICAgOiAiIjsKICAgICAgICByZXR1cm4gKCIiICsgKChhbHRHZW5FbGVtZW50IHx8IGdlbkVsZW1lbnQpKGVsJDEsIHN0YXRlKSkgKyBub3JtYWxpemF0aW9uVHlwZSkKICAgICAgfQogICAgICB2YXIgbm9ybWFsaXphdGlvblR5cGUkMSA9IGNoZWNrU2tpcAogICAgICAgID8gZ2V0Tm9ybWFsaXphdGlvblR5cGUoY2hpbGRyZW4sIHN0YXRlLm1heWJlQ29tcG9uZW50KQogICAgICAgIDogMDsKICAgICAgdmFyIGdlbiA9IGFsdEdlbk5vZGUgfHwgZ2VuTm9kZTsKICAgICAgcmV0dXJuICgiWyIgKyAoY2hpbGRyZW4ubWFwKGZ1bmN0aW9uIChjKSB7IHJldHVybiBnZW4oYywgc3RhdGUpOyB9KS5qb2luKCcsJykpICsgIl0iICsgKG5vcm1hbGl6YXRpb25UeXBlJDEgPyAoIiwiICsgbm9ybWFsaXphdGlvblR5cGUkMSkgOiAnJykpCiAgICB9CiAgfQoKICAvLyBkZXRlcm1pbmUgdGhlIG5vcm1hbGl6YXRpb24gbmVlZGVkIGZvciB0aGUgY2hpbGRyZW4gYXJyYXkuCiAgLy8gMDogbm8gbm9ybWFsaXphdGlvbiBuZWVkZWQKICAvLyAxOiBzaW1wbGUgbm9ybWFsaXphdGlvbiBuZWVkZWQgKHBvc3NpYmxlIDEtbGV2ZWwgZGVlcCBuZXN0ZWQgYXJyYXkpCiAgLy8gMjogZnVsbCBub3JtYWxpemF0aW9uIG5lZWRlZAogIGZ1bmN0aW9uIGdldE5vcm1hbGl6YXRpb25UeXBlICgKICAgIGNoaWxkcmVuLAogICAgbWF5YmVDb21wb25lbnQKICApIHsKICAgIHZhciByZXMgPSAwOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykgewogICAgICB2YXIgZWwgPSBjaGlsZHJlbltpXTsKICAgICAgaWYgKGVsLnR5cGUgIT09IDEpIHsKICAgICAgICBjb250aW51ZQogICAgICB9CiAgICAgIGlmIChuZWVkc05vcm1hbGl6YXRpb24oZWwpIHx8CiAgICAgICAgICAoZWwuaWZDb25kaXRpb25zICYmIGVsLmlmQ29uZGl0aW9ucy5zb21lKGZ1bmN0aW9uIChjKSB7IHJldHVybiBuZWVkc05vcm1hbGl6YXRpb24oYy5ibG9jayk7IH0pKSkgewogICAgICAgIHJlcyA9IDI7CiAgICAgICAgYnJlYWsKICAgICAgfQogICAgICBpZiAobWF5YmVDb21wb25lbnQoZWwpIHx8CiAgICAgICAgICAoZWwuaWZDb25kaXRpb25zICYmIGVsLmlmQ29uZGl0aW9ucy5zb21lKGZ1bmN0aW9uIChjKSB7IHJldHVybiBtYXliZUNvbXBvbmVudChjLmJsb2NrKTsgfSkpKSB7CiAgICAgICAgcmVzID0gMTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlcwogIH0KCiAgZnVuY3Rpb24gbmVlZHNOb3JtYWxpemF0aW9uIChlbCkgewogICAgcmV0dXJuIGVsLmZvciAhPT0gdW5kZWZpbmVkIHx8IGVsLnRhZyA9PT0gJ3RlbXBsYXRlJyB8fCBlbC50YWcgPT09ICdzbG90JwogIH0KCiAgZnVuY3Rpb24gZ2VuTm9kZSAobm9kZSwgc3RhdGUpIHsKICAgIGlmIChub2RlLnR5cGUgPT09IDEpIHsKICAgICAgcmV0dXJuIGdlbkVsZW1lbnQobm9kZSwgc3RhdGUpCiAgICB9IGVsc2UgaWYgKG5vZGUudHlwZSA9PT0gMyAmJiBub2RlLmlzQ29tbWVudCkgewogICAgICByZXR1cm4gZ2VuQ29tbWVudChub2RlKQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGdlblRleHQobm9kZSkKICAgIH0KICB9CgogIGZ1bmN0aW9uIGdlblRleHQgKHRleHQpIHsKICAgIHJldHVybiAoIl92KCIgKyAodGV4dC50eXBlID09PSAyCiAgICAgID8gdGV4dC5leHByZXNzaW9uIC8vIG5vIG5lZWQgZm9yICgpIGJlY2F1c2UgYWxyZWFkeSB3cmFwcGVkIGluIF9zKCkKICAgICAgOiB0cmFuc2Zvcm1TcGVjaWFsTmV3bGluZXMoSlNPTi5zdHJpbmdpZnkodGV4dC50ZXh0KSkpICsgIikiKQogIH0KCiAgZnVuY3Rpb24gZ2VuQ29tbWVudCAoY29tbWVudCkgewogICAgcmV0dXJuICgiX2UoIiArIChKU09OLnN0cmluZ2lmeShjb21tZW50LnRleHQpKSArICIpIikKICB9CgogIGZ1bmN0aW9uIGdlblNsb3QgKGVsLCBzdGF0ZSkgewogICAgdmFyIHNsb3ROYW1lID0gZWwuc2xvdE5hbWUgfHwgJyJkZWZhdWx0Iic7CiAgICB2YXIgY2hpbGRyZW4gPSBnZW5DaGlsZHJlbihlbCwgc3RhdGUpOwogICAgdmFyIHJlcyA9ICJfdCgiICsgc2xvdE5hbWUgKyAoY2hpbGRyZW4gPyAoIiwiICsgY2hpbGRyZW4pIDogJycpOwogICAgdmFyIGF0dHJzID0gZWwuYXR0cnMgfHwgZWwuZHluYW1pY0F0dHJzCiAgICAgID8gZ2VuUHJvcHMoKGVsLmF0dHJzIHx8IFtdKS5jb25jYXQoZWwuZHluYW1pY0F0dHJzIHx8IFtdKS5tYXAoZnVuY3Rpb24gKGF0dHIpIHsgcmV0dXJuICh7CiAgICAgICAgICAvLyBzbG90IHByb3BzIGFyZSBjYW1lbGl6ZWQKICAgICAgICAgIG5hbWU6IGNhbWVsaXplKGF0dHIubmFtZSksCiAgICAgICAgICB2YWx1ZTogYXR0ci52YWx1ZSwKICAgICAgICAgIGR5bmFtaWM6IGF0dHIuZHluYW1pYwogICAgICAgIH0pOyB9KSkKICAgICAgOiBudWxsOwogICAgdmFyIGJpbmQkJDEgPSBlbC5hdHRyc01hcFsndi1iaW5kJ107CiAgICBpZiAoKGF0dHJzIHx8IGJpbmQkJDEpICYmICFjaGlsZHJlbikgewogICAgICByZXMgKz0gIixudWxsIjsKICAgIH0KICAgIGlmIChhdHRycykgewogICAgICByZXMgKz0gIiwiICsgYXR0cnM7CiAgICB9CiAgICBpZiAoYmluZCQkMSkgewogICAgICByZXMgKz0gKGF0dHJzID8gJycgOiAnLG51bGwnKSArICIsIiArIGJpbmQkJDE7CiAgICB9CiAgICByZXR1cm4gcmVzICsgJyknCiAgfQoKICAvLyBjb21wb25lbnROYW1lIGlzIGVsLmNvbXBvbmVudCwgdGFrZSBpdCBhcyBhcmd1bWVudCB0byBzaHVuIGZsb3cncyBwZXNzaW1pc3RpYyByZWZpbmVtZW50CiAgZnVuY3Rpb24gZ2VuQ29tcG9uZW50ICgKICAgIGNvbXBvbmVudE5hbWUsCiAgICBlbCwKICAgIHN0YXRlCiAgKSB7CiAgICB2YXIgY2hpbGRyZW4gPSBlbC5pbmxpbmVUZW1wbGF0ZSA/IG51bGwgOiBnZW5DaGlsZHJlbihlbCwgc3RhdGUsIHRydWUpOwogICAgcmV0dXJuICgiX2MoIiArIGNvbXBvbmVudE5hbWUgKyAiLCIgKyAoZ2VuRGF0YSQyKGVsLCBzdGF0ZSkpICsgKGNoaWxkcmVuID8gKCIsIiArIGNoaWxkcmVuKSA6ICcnKSArICIpIikKICB9CgogIGZ1bmN0aW9uIGdlblByb3BzIChwcm9wcykgewogICAgdmFyIHN0YXRpY1Byb3BzID0gIiI7CiAgICB2YXIgZHluYW1pY1Byb3BzID0gIiI7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBwcm9wID0gcHJvcHNbaV07CiAgICAgIHZhciB2YWx1ZSA9IHRyYW5zZm9ybVNwZWNpYWxOZXdsaW5lcyhwcm9wLnZhbHVlKTsKICAgICAgaWYgKHByb3AuZHluYW1pYykgewogICAgICAgIGR5bmFtaWNQcm9wcyArPSAocHJvcC5uYW1lKSArICIsIiArIHZhbHVlICsgIiwiOwogICAgICB9IGVsc2UgewogICAgICAgIHN0YXRpY1Byb3BzICs9ICJcIiIgKyAocHJvcC5uYW1lKSArICJcIjoiICsgdmFsdWUgKyAiLCI7CiAgICAgIH0KICAgIH0KICAgIHN0YXRpY1Byb3BzID0gInsiICsgKHN0YXRpY1Byb3BzLnNsaWNlKDAsIC0xKSkgKyAifSI7CiAgICBpZiAoZHluYW1pY1Byb3BzKSB7CiAgICAgIHJldHVybiAoIl9kKCIgKyBzdGF0aWNQcm9wcyArICIsWyIgKyAoZHluYW1pY1Byb3BzLnNsaWNlKDAsIC0xKSkgKyAiXSkiKQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHN0YXRpY1Byb3BzCiAgICB9CiAgfQoKICAvLyAjMzg5NSwgIzQyNjgKICBmdW5jdGlvbiB0cmFuc2Zvcm1TcGVjaWFsTmV3bGluZXMgKHRleHQpIHsKICAgIHJldHVybiB0ZXh0CiAgICAgIC5yZXBsYWNlKC9cdTIwMjgvZywgJ1xcdTIwMjgnKQogICAgICAucmVwbGFjZSgvXHUyMDI5L2csICdcXHUyMDI5JykKICB9CgogIC8qICAqLwoKCgogIC8vIHRoZXNlIGtleXdvcmRzIHNob3VsZCBub3QgYXBwZWFyIGluc2lkZSBleHByZXNzaW9ucywgYnV0IG9wZXJhdG9ycyBsaWtlCiAgLy8gdHlwZW9mLCBpbnN0YW5jZW9mIGFuZCBpbiBhcmUgYWxsb3dlZAogIHZhciBwcm9oaWJpdGVkS2V5d29yZFJFID0gbmV3IFJlZ0V4cCgnXFxiJyArICgKICAgICdkbyxpZixmb3IsbGV0LG5ldyx0cnksdmFyLGNhc2UsZWxzZSx3aXRoLGF3YWl0LGJyZWFrLGNhdGNoLGNsYXNzLGNvbnN0LCcgKwogICAgJ3N1cGVyLHRocm93LHdoaWxlLHlpZWxkLGRlbGV0ZSxleHBvcnQsaW1wb3J0LHJldHVybixzd2l0Y2gsZGVmYXVsdCwnICsKICAgICdleHRlbmRzLGZpbmFsbHksY29udGludWUsZGVidWdnZXIsZnVuY3Rpb24sYXJndW1lbnRzJwogICkuc3BsaXQoJywnKS5qb2luKCdcXGJ8XFxiJykgKyAnXFxiJyk7CgogIC8vIHRoZXNlIHVuYXJ5IG9wZXJhdG9ycyBzaG91bGQgbm90IGJlIHVzZWQgYXMgcHJvcGVydHkvbWV0aG9kIG5hbWVzCiAgdmFyIHVuYXJ5T3BlcmF0b3JzUkUgPSBuZXcgUmVnRXhwKCdcXGInICsgKAogICAgJ2RlbGV0ZSx0eXBlb2Ysdm9pZCcKICApLnNwbGl0KCcsJykuam9pbignXFxzKlxcKFteXFwpXSpcXCl8XFxiJykgKyAnXFxzKlxcKFteXFwpXSpcXCknKTsKCiAgLy8gc3RyaXAgc3RyaW5ncyBpbiBleHByZXNzaW9ucwogIHZhciBzdHJpcFN0cmluZ1JFID0gLycoPzpbXidcXF18XFwuKSonfCIoPzpbXiJcXF18XFwuKSoifGAoPzpbXmBcXF18XFwuKSpcJFx7fFx9KD86W15gXFxdfFxcLikqYHxgKD86W15gXFxdfFxcLikqYC9nOwoKICAvLyBkZXRlY3QgcHJvYmxlbWF0aWMgZXhwcmVzc2lvbnMgaW4gYSB0ZW1wbGF0ZQogIGZ1bmN0aW9uIGRldGVjdEVycm9ycyAoYXN0LCB3YXJuKSB7CiAgICBpZiAoYXN0KSB7CiAgICAgIGNoZWNrTm9kZShhc3QsIHdhcm4pOwogICAgfQogIH0KCiAgZnVuY3Rpb24gY2hlY2tOb2RlIChub2RlLCB3YXJuKSB7CiAgICBpZiAobm9kZS50eXBlID09PSAxKSB7CiAgICAgIGZvciAodmFyIG5hbWUgaW4gbm9kZS5hdHRyc01hcCkgewogICAgICAgIGlmIChkaXJSRS50ZXN0KG5hbWUpKSB7CiAgICAgICAgICB2YXIgdmFsdWUgPSBub2RlLmF0dHJzTWFwW25hbWVdOwogICAgICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgICAgIHZhciByYW5nZSA9IG5vZGUucmF3QXR0cnNNYXBbbmFtZV07CiAgICAgICAgICAgIGlmIChuYW1lID09PSAndi1mb3InKSB7CiAgICAgICAgICAgICAgY2hlY2tGb3Iobm9kZSwgKCJ2LWZvcj1cIiIgKyB2YWx1ZSArICJcIiIpLCB3YXJuLCByYW5nZSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ3Ytc2xvdCcgfHwgbmFtZVswXSA9PT0gJyMnKSB7CiAgICAgICAgICAgICAgY2hlY2tGdW5jdGlvblBhcmFtZXRlckV4cHJlc3Npb24odmFsdWUsIChuYW1lICsgIj1cIiIgKyB2YWx1ZSArICJcIiIpLCB3YXJuLCByYW5nZSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAob25SRS50ZXN0KG5hbWUpKSB7CiAgICAgICAgICAgICAgY2hlY2tFdmVudCh2YWx1ZSwgKG5hbWUgKyAiPVwiIiArIHZhbHVlICsgIlwiIiksIHdhcm4sIHJhbmdlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBjaGVja0V4cHJlc3Npb24odmFsdWUsIChuYW1lICsgIj1cIiIgKyB2YWx1ZSArICJcIiIpLCB3YXJuLCByYW5nZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKG5vZGUuY2hpbGRyZW4pIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGNoZWNrTm9kZShub2RlLmNoaWxkcmVuW2ldLCB3YXJuKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSBpZiAobm9kZS50eXBlID09PSAyKSB7CiAgICAgIGNoZWNrRXhwcmVzc2lvbihub2RlLmV4cHJlc3Npb24sIG5vZGUudGV4dCwgd2Fybiwgbm9kZSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBjaGVja0V2ZW50IChleHAsIHRleHQsIHdhcm4sIHJhbmdlKSB7CiAgICB2YXIgc3RyaXBwZWQgPSBleHAucmVwbGFjZShzdHJpcFN0cmluZ1JFLCAnJyk7CiAgICB2YXIga2V5d29yZE1hdGNoID0gc3RyaXBwZWQubWF0Y2godW5hcnlPcGVyYXRvcnNSRSk7CiAgICBpZiAoa2V5d29yZE1hdGNoICYmIHN0cmlwcGVkLmNoYXJBdChrZXl3b3JkTWF0Y2guaW5kZXggLSAxKSAhPT0gJyQnKSB7CiAgICAgIHdhcm4oCiAgICAgICAgImF2b2lkIHVzaW5nIEphdmFTY3JpcHQgdW5hcnkgb3BlcmF0b3IgYXMgcHJvcGVydHkgbmFtZTogIiArCiAgICAgICAgIlwiIiArIChrZXl3b3JkTWF0Y2hbMF0pICsgIlwiIGluIGV4cHJlc3Npb24gIiArICh0ZXh0LnRyaW0oKSksCiAgICAgICAgcmFuZ2UKICAgICAgKTsKICAgIH0KICAgIGNoZWNrRXhwcmVzc2lvbihleHAsIHRleHQsIHdhcm4sIHJhbmdlKTsKICB9CgogIGZ1bmN0aW9uIGNoZWNrRm9yIChub2RlLCB0ZXh0LCB3YXJuLCByYW5nZSkgewogICAgY2hlY2tFeHByZXNzaW9uKG5vZGUuZm9yIHx8ICcnLCB0ZXh0LCB3YXJuLCByYW5nZSk7CiAgICBjaGVja0lkZW50aWZpZXIobm9kZS5hbGlhcywgJ3YtZm9yIGFsaWFzJywgdGV4dCwgd2FybiwgcmFuZ2UpOwogICAgY2hlY2tJZGVudGlmaWVyKG5vZGUuaXRlcmF0b3IxLCAndi1mb3IgaXRlcmF0b3InLCB0ZXh0LCB3YXJuLCByYW5nZSk7CiAgICBjaGVja0lkZW50aWZpZXIobm9kZS5pdGVyYXRvcjIsICd2LWZvciBpdGVyYXRvcicsIHRleHQsIHdhcm4sIHJhbmdlKTsKICB9CgogIGZ1bmN0aW9uIGNoZWNrSWRlbnRpZmllciAoCiAgICBpZGVudCwKICAgIHR5cGUsCiAgICB0ZXh0LAogICAgd2FybiwKICAgIHJhbmdlCiAgKSB7CiAgICBpZiAodHlwZW9mIGlkZW50ID09PSAnc3RyaW5nJykgewogICAgICB0cnkgewogICAgICAgIG5ldyBGdW5jdGlvbigoInZhciAiICsgaWRlbnQgKyAiPV8iKSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB3YXJuKCgiaW52YWxpZCAiICsgdHlwZSArICIgXCIiICsgaWRlbnQgKyAiXCIgaW4gZXhwcmVzc2lvbjogIiArICh0ZXh0LnRyaW0oKSkpLCByYW5nZSk7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIGNoZWNrRXhwcmVzc2lvbiAoZXhwLCB0ZXh0LCB3YXJuLCByYW5nZSkgewogICAgdHJ5IHsKICAgICAgbmV3IEZ1bmN0aW9uKCgicmV0dXJuICIgKyBleHApKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdmFyIGtleXdvcmRNYXRjaCA9IGV4cC5yZXBsYWNlKHN0cmlwU3RyaW5nUkUsICcnKS5tYXRjaChwcm9oaWJpdGVkS2V5d29yZFJFKTsKICAgICAgaWYgKGtleXdvcmRNYXRjaCkgewogICAgICAgIHdhcm4oCiAgICAgICAgICAiYXZvaWQgdXNpbmcgSmF2YVNjcmlwdCBrZXl3b3JkIGFzIHByb3BlcnR5IG5hbWU6ICIgKwogICAgICAgICAgIlwiIiArIChrZXl3b3JkTWF0Y2hbMF0pICsgIlwiXG4gIFJhdyBleHByZXNzaW9uOiAiICsgKHRleHQudHJpbSgpKSwKICAgICAgICAgIHJhbmdlCiAgICAgICAgKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB3YXJuKAogICAgICAgICAgImludmFsaWQgZXhwcmVzc2lvbjogIiArIChlLm1lc3NhZ2UpICsgIiBpblxuXG4iICsKICAgICAgICAgICIgICAgIiArIGV4cCArICJcblxuIiArCiAgICAgICAgICAiICBSYXcgZXhwcmVzc2lvbjogIiArICh0ZXh0LnRyaW0oKSkgKyAiXG4iLAogICAgICAgICAgcmFuZ2UKICAgICAgICApOwogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBjaGVja0Z1bmN0aW9uUGFyYW1ldGVyRXhwcmVzc2lvbiAoZXhwLCB0ZXh0LCB3YXJuLCByYW5nZSkgewogICAgdHJ5IHsKICAgICAgbmV3IEZ1bmN0aW9uKGV4cCwgJycpOwogICAgfSBjYXRjaCAoZSkgewogICAgICB3YXJuKAogICAgICAgICJpbnZhbGlkIGZ1bmN0aW9uIHBhcmFtZXRlciBleHByZXNzaW9uOiAiICsgKGUubWVzc2FnZSkgKyAiIGluXG5cbiIgKwogICAgICAgICIgICAgIiArIGV4cCArICJcblxuIiArCiAgICAgICAgIiAgUmF3IGV4cHJlc3Npb246ICIgKyAodGV4dC50cmltKCkpICsgIlxuIiwKICAgICAgICByYW5nZQogICAgICApOwogICAgfQogIH0KCiAgLyogICovCgogIHZhciByYW5nZSA9IDI7CgogIGZ1bmN0aW9uIGdlbmVyYXRlQ29kZUZyYW1lICgKICAgIHNvdXJjZSwKICAgIHN0YXJ0LAogICAgZW5kCiAgKSB7CiAgICBpZiAoIHN0YXJ0ID09PSB2b2lkIDAgKSBzdGFydCA9IDA7CiAgICBpZiAoIGVuZCA9PT0gdm9pZCAwICkgZW5kID0gc291cmNlLmxlbmd0aDsKCiAgICB2YXIgbGluZXMgPSBzb3VyY2Uuc3BsaXQoL1xyP1xuLyk7CiAgICB2YXIgY291bnQgPSAwOwogICAgdmFyIHJlcyA9IFtdOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykgewogICAgICBjb3VudCArPSBsaW5lc1tpXS5sZW5ndGggKyAxOwogICAgICBpZiAoY291bnQgPj0gc3RhcnQpIHsKICAgICAgICBmb3IgKHZhciBqID0gaSAtIHJhbmdlOyBqIDw9IGkgKyByYW5nZSB8fCBlbmQgPiBjb3VudDsgaisrKSB7CiAgICAgICAgICBpZiAoaiA8IDAgfHwgaiA+PSBsaW5lcy5sZW5ndGgpIHsgY29udGludWUgfQogICAgICAgICAgcmVzLnB1c2goKCIiICsgKGogKyAxKSArIChyZXBlYXQkMSgiICIsIDMgLSBTdHJpbmcoaiArIDEpLmxlbmd0aCkpICsgInwgICIgKyAobGluZXNbal0pKSk7CiAgICAgICAgICB2YXIgbGluZUxlbmd0aCA9IGxpbmVzW2pdLmxlbmd0aDsKICAgICAgICAgIGlmIChqID09PSBpKSB7CiAgICAgICAgICAgIC8vIHB1c2ggdW5kZXJsaW5lCiAgICAgICAgICAgIHZhciBwYWQgPSBzdGFydCAtIChjb3VudCAtIGxpbmVMZW5ndGgpICsgMTsKICAgICAgICAgICAgdmFyIGxlbmd0aCA9IGVuZCA+IGNvdW50ID8gbGluZUxlbmd0aCAtIHBhZCA6IGVuZCAtIHN0YXJ0OwogICAgICAgICAgICByZXMucHVzaCgiICAgfCAgIiArIHJlcGVhdCQxKCIgIiwgcGFkKSArIHJlcGVhdCQxKCJeIiwgbGVuZ3RoKSk7CiAgICAgICAgICB9IGVsc2UgaWYgKGogPiBpKSB7CiAgICAgICAgICAgIGlmIChlbmQgPiBjb3VudCkgewogICAgICAgICAgICAgIHZhciBsZW5ndGgkMSA9IE1hdGgubWluKGVuZCAtIGNvdW50LCBsaW5lTGVuZ3RoKTsKICAgICAgICAgICAgICByZXMucHVzaCgiICAgfCAgIiArIHJlcGVhdCQxKCJeIiwgbGVuZ3RoJDEpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb3VudCArPSBsaW5lTGVuZ3RoICsgMTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgYnJlYWsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlcy5qb2luKCdcbicpCiAgfQoKICBmdW5jdGlvbiByZXBlYXQkMSAoc3RyLCBuKSB7CiAgICB2YXIgcmVzdWx0ID0gJyc7CiAgICBpZiAobiA+IDApIHsKICAgICAgd2hpbGUgKHRydWUpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgICAgIGlmIChuICYgMSkgeyByZXN1bHQgKz0gc3RyOyB9CiAgICAgICAgbiA+Pj49IDE7CiAgICAgICAgaWYgKG4gPD0gMCkgeyBicmVhayB9CiAgICAgICAgc3RyICs9IHN0cjsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlc3VsdAogIH0KCiAgLyogICovCgoKCiAgZnVuY3Rpb24gY3JlYXRlRnVuY3Rpb24gKGNvZGUsIGVycm9ycykgewogICAgdHJ5IHsKICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbihjb2RlKQogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIGVycm9ycy5wdXNoKHsgZXJyOiBlcnIsIGNvZGU6IGNvZGUgfSk7CiAgICAgIHJldHVybiBub29wCiAgICB9CiAgfQoKICBmdW5jdGlvbiBjcmVhdGVDb21waWxlVG9GdW5jdGlvbkZuIChjb21waWxlKSB7CiAgICB2YXIgY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpOwoKICAgIHJldHVybiBmdW5jdGlvbiBjb21waWxlVG9GdW5jdGlvbnMgKAogICAgICB0ZW1wbGF0ZSwKICAgICAgb3B0aW9ucywKICAgICAgdm0KICAgICkgewogICAgICBvcHRpb25zID0gZXh0ZW5kKHt9LCBvcHRpb25zKTsKICAgICAgdmFyIHdhcm4kJDEgPSBvcHRpb25zLndhcm4gfHwgd2FybjsKICAgICAgZGVsZXRlIG9wdGlvbnMud2FybjsKCiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgICB7CiAgICAgICAgLy8gZGV0ZWN0IHBvc3NpYmxlIENTUCByZXN0cmljdGlvbgogICAgICAgIHRyeSB7CiAgICAgICAgICBuZXcgRnVuY3Rpb24oJ3JldHVybiAxJyk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgaWYgKGUudG9TdHJpbmcoKS5tYXRjaCgvdW5zYWZlLWV2YWx8Q1NQLykpIHsKICAgICAgICAgICAgd2FybiQkMSgKICAgICAgICAgICAgICAnSXQgc2VlbXMgeW91IGFyZSB1c2luZyB0aGUgc3RhbmRhbG9uZSBidWlsZCBvZiBWdWUuanMgaW4gYW4gJyArCiAgICAgICAgICAgICAgJ2Vudmlyb25tZW50IHdpdGggQ29udGVudCBTZWN1cml0eSBQb2xpY3kgdGhhdCBwcm9oaWJpdHMgdW5zYWZlLWV2YWwuICcgKwogICAgICAgICAgICAgICdUaGUgdGVtcGxhdGUgY29tcGlsZXIgY2Fubm90IHdvcmsgaW4gdGhpcyBlbnZpcm9ubWVudC4gQ29uc2lkZXIgJyArCiAgICAgICAgICAgICAgJ3JlbGF4aW5nIHRoZSBwb2xpY3kgdG8gYWxsb3cgdW5zYWZlLWV2YWwgb3IgcHJlLWNvbXBpbGluZyB5b3VyICcgKwogICAgICAgICAgICAgICd0ZW1wbGF0ZXMgaW50byByZW5kZXIgZnVuY3Rpb25zLicKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIGNoZWNrIGNhY2hlCiAgICAgIHZhciBrZXkgPSBvcHRpb25zLmRlbGltaXRlcnMKICAgICAgICA/IFN0cmluZyhvcHRpb25zLmRlbGltaXRlcnMpICsgdGVtcGxhdGUKICAgICAgICA6IHRlbXBsYXRlOwogICAgICBpZiAoY2FjaGVba2V5XSkgewogICAgICAgIHJldHVybiBjYWNoZVtrZXldCiAgICAgIH0KCiAgICAgIC8vIGNvbXBpbGUKICAgICAgdmFyIGNvbXBpbGVkID0gY29tcGlsZSh0ZW1wbGF0ZSwgb3B0aW9ucyk7CgogICAgICAvLyBjaGVjayBjb21waWxhdGlvbiBlcnJvcnMvdGlwcwogICAgICB7CiAgICAgICAgaWYgKGNvbXBpbGVkLmVycm9ycyAmJiBjb21waWxlZC5lcnJvcnMubGVuZ3RoKSB7CiAgICAgICAgICBpZiAob3B0aW9ucy5vdXRwdXRTb3VyY2VSYW5nZSkgewogICAgICAgICAgICBjb21waWxlZC5lcnJvcnMuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIHdhcm4kJDEoCiAgICAgICAgICAgICAgICAiRXJyb3IgY29tcGlsaW5nIHRlbXBsYXRlOlxuXG4iICsgKGUubXNnKSArICJcblxuIiArCiAgICAgICAgICAgICAgICBnZW5lcmF0ZUNvZGVGcmFtZSh0ZW1wbGF0ZSwgZS5zdGFydCwgZS5lbmQpLAogICAgICAgICAgICAgICAgdm0KICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHdhcm4kJDEoCiAgICAgICAgICAgICAgIkVycm9yIGNvbXBpbGluZyB0ZW1wbGF0ZTpcblxuIiArIHRlbXBsYXRlICsgIlxuXG4iICsKICAgICAgICAgICAgICBjb21waWxlZC5lcnJvcnMubWFwKGZ1bmN0aW9uIChlKSB7IHJldHVybiAoIi0gIiArIGUpOyB9KS5qb2luKCdcbicpICsgJ1xuJywKICAgICAgICAgICAgICB2bQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoY29tcGlsZWQudGlwcyAmJiBjb21waWxlZC50aXBzLmxlbmd0aCkgewogICAgICAgICAgaWYgKG9wdGlvbnMub3V0cHV0U291cmNlUmFuZ2UpIHsKICAgICAgICAgICAgY29tcGlsZWQudGlwcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7IHJldHVybiB0aXAoZS5tc2csIHZtKTsgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb21waWxlZC50aXBzLmZvckVhY2goZnVuY3Rpb24gKG1zZykgeyByZXR1cm4gdGlwKG1zZywgdm0pOyB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIHR1cm4gY29kZSBpbnRvIGZ1bmN0aW9ucwogICAgICB2YXIgcmVzID0ge307CiAgICAgIHZhciBmbkdlbkVycm9ycyA9IFtdOwogICAgICByZXMucmVuZGVyID0gY3JlYXRlRnVuY3Rpb24oY29tcGlsZWQucmVuZGVyLCBmbkdlbkVycm9ycyk7CiAgICAgIHJlcy5zdGF0aWNSZW5kZXJGbnMgPSBjb21waWxlZC5zdGF0aWNSZW5kZXJGbnMubWFwKGZ1bmN0aW9uIChjb2RlKSB7CiAgICAgICAgcmV0dXJuIGNyZWF0ZUZ1bmN0aW9uKGNvZGUsIGZuR2VuRXJyb3JzKQogICAgICB9KTsKCiAgICAgIC8vIGNoZWNrIGZ1bmN0aW9uIGdlbmVyYXRpb24gZXJyb3JzLgogICAgICAvLyB0aGlzIHNob3VsZCBvbmx5IGhhcHBlbiBpZiB0aGVyZSBpcyBhIGJ1ZyBpbiB0aGUgY29tcGlsZXIgaXRzZWxmLgogICAgICAvLyBtb3N0bHkgZm9yIGNvZGVnZW4gZGV2ZWxvcG1lbnQgdXNlCiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgICB7CiAgICAgICAgaWYgKCghY29tcGlsZWQuZXJyb3JzIHx8ICFjb21waWxlZC5lcnJvcnMubGVuZ3RoKSAmJiBmbkdlbkVycm9ycy5sZW5ndGgpIHsKICAgICAgICAgIHdhcm4kJDEoCiAgICAgICAgICAgICJGYWlsZWQgdG8gZ2VuZXJhdGUgcmVuZGVyIGZ1bmN0aW9uOlxuXG4iICsKICAgICAgICAgICAgZm5HZW5FcnJvcnMubWFwKGZ1bmN0aW9uIChyZWYpIHsKICAgICAgICAgICAgICB2YXIgZXJyID0gcmVmLmVycjsKICAgICAgICAgICAgICB2YXIgY29kZSA9IHJlZi5jb2RlOwoKICAgICAgICAgICAgICByZXR1cm4gKChlcnIudG9TdHJpbmcoKSkgKyAiIGluXG5cbiIgKyBjb2RlICsgIlxuIik7CiAgICAgICAgICB9KS5qb2luKCdcbicpLAogICAgICAgICAgICB2bQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiAoY2FjaGVba2V5XSA9IHJlcykKICAgIH0KICB9CgogIC8qICAqLwoKICBmdW5jdGlvbiBjcmVhdGVDb21waWxlckNyZWF0b3IgKGJhc2VDb21waWxlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gY3JlYXRlQ29tcGlsZXIgKGJhc2VPcHRpb25zKSB7CiAgICAgIGZ1bmN0aW9uIGNvbXBpbGUgKAogICAgICAgIHRlbXBsYXRlLAogICAgICAgIG9wdGlvbnMKICAgICAgKSB7CiAgICAgICAgdmFyIGZpbmFsT3B0aW9ucyA9IE9iamVjdC5jcmVhdGUoYmFzZU9wdGlvbnMpOwogICAgICAgIHZhciBlcnJvcnMgPSBbXTsKICAgICAgICB2YXIgdGlwcyA9IFtdOwoKICAgICAgICB2YXIgd2FybiA9IGZ1bmN0aW9uIChtc2csIHJhbmdlLCB0aXApIHsKICAgICAgICAgICh0aXAgPyB0aXBzIDogZXJyb3JzKS5wdXNoKG1zZyk7CiAgICAgICAgfTsKCiAgICAgICAgaWYgKG9wdGlvbnMpIHsKICAgICAgICAgIGlmIChvcHRpb25zLm91dHB1dFNvdXJjZVJhbmdlKSB7CiAgICAgICAgICAgIC8vICRmbG93LWRpc2FibGUtbGluZQogICAgICAgICAgICB2YXIgbGVhZGluZ1NwYWNlTGVuZ3RoID0gdGVtcGxhdGUubWF0Y2goL15ccyovKVswXS5sZW5ndGg7CgogICAgICAgICAgICB3YXJuID0gZnVuY3Rpb24gKG1zZywgcmFuZ2UsIHRpcCkgewogICAgICAgICAgICAgIHZhciBkYXRhID0geyBtc2c6IG1zZyB9OwogICAgICAgICAgICAgIGlmIChyYW5nZSkgewogICAgICAgICAgICAgICAgaWYgKHJhbmdlLnN0YXJ0ICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgZGF0YS5zdGFydCA9IHJhbmdlLnN0YXJ0ICsgbGVhZGluZ1NwYWNlTGVuZ3RoOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHJhbmdlLmVuZCAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgIGRhdGEuZW5kID0gcmFuZ2UuZW5kICsgbGVhZGluZ1NwYWNlTGVuZ3RoOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAodGlwID8gdGlwcyA6IGVycm9ycykucHVzaChkYXRhKTsKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIC8vIG1lcmdlIGN1c3RvbSBtb2R1bGVzCiAgICAgICAgICBpZiAob3B0aW9ucy5tb2R1bGVzKSB7CiAgICAgICAgICAgIGZpbmFsT3B0aW9ucy5tb2R1bGVzID0KICAgICAgICAgICAgICAoYmFzZU9wdGlvbnMubW9kdWxlcyB8fCBbXSkuY29uY2F0KG9wdGlvbnMubW9kdWxlcyk7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBtZXJnZSBjdXN0b20gZGlyZWN0aXZlcwogICAgICAgICAgaWYgKG9wdGlvbnMuZGlyZWN0aXZlcykgewogICAgICAgICAgICBmaW5hbE9wdGlvbnMuZGlyZWN0aXZlcyA9IGV4dGVuZCgKICAgICAgICAgICAgICBPYmplY3QuY3JlYXRlKGJhc2VPcHRpb25zLmRpcmVjdGl2ZXMgfHwgbnVsbCksCiAgICAgICAgICAgICAgb3B0aW9ucy5kaXJlY3RpdmVzCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBjb3B5IG90aGVyIG9wdGlvbnMKICAgICAgICAgIGZvciAodmFyIGtleSBpbiBvcHRpb25zKSB7CiAgICAgICAgICAgIGlmIChrZXkgIT09ICdtb2R1bGVzJyAmJiBrZXkgIT09ICdkaXJlY3RpdmVzJykgewogICAgICAgICAgICAgIGZpbmFsT3B0aW9uc1trZXldID0gb3B0aW9uc1trZXldOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmaW5hbE9wdGlvbnMud2FybiA9IHdhcm47CgogICAgICAgIHZhciBjb21waWxlZCA9IGJhc2VDb21waWxlKHRlbXBsYXRlLnRyaW0oKSwgZmluYWxPcHRpb25zKTsKICAgICAgICB7CiAgICAgICAgICBkZXRlY3RFcnJvcnMoY29tcGlsZWQuYXN0LCB3YXJuKTsKICAgICAgICB9CiAgICAgICAgY29tcGlsZWQuZXJyb3JzID0gZXJyb3JzOwogICAgICAgIGNvbXBpbGVkLnRpcHMgPSB0aXBzOwogICAgICAgIHJldHVybiBjb21waWxlZAogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIGNvbXBpbGU6IGNvbXBpbGUsCiAgICAgICAgY29tcGlsZVRvRnVuY3Rpb25zOiBjcmVhdGVDb21waWxlVG9GdW5jdGlvbkZuKGNvbXBpbGUpCiAgICAgIH0KICAgIH0KICB9CgogIC8qICAqLwoKICAvLyBgY3JlYXRlQ29tcGlsZXJDcmVhdG9yYCBhbGxvd3MgY3JlYXRpbmcgY29tcGlsZXJzIHRoYXQgdXNlIGFsdGVybmF0aXZlCiAgLy8gcGFyc2VyL29wdGltaXplci9jb2RlZ2VuLCBlLmcgdGhlIFNTUiBvcHRpbWl6aW5nIGNvbXBpbGVyLgogIC8vIEhlcmUgd2UganVzdCBleHBvcnQgYSBkZWZhdWx0IGNvbXBpbGVyIHVzaW5nIHRoZSBkZWZhdWx0IHBhcnRzLgogIHZhciBjcmVhdGVDb21waWxlciA9IGNyZWF0ZUNvbXBpbGVyQ3JlYXRvcihmdW5jdGlvbiBiYXNlQ29tcGlsZSAoCiAgICB0ZW1wbGF0ZSwKICAgIG9wdGlvbnMKICApIHsKICAgIHZhciBhc3QgPSBwYXJzZSh0ZW1wbGF0ZS50cmltKCksIG9wdGlvbnMpOwogICAgaWYgKG9wdGlvbnMub3B0aW1pemUgIT09IGZhbHNlKSB7CiAgICAgIG9wdGltaXplKGFzdCwgb3B0aW9ucyk7CiAgICB9CiAgICB2YXIgY29kZSA9IGdlbmVyYXRlKGFzdCwgb3B0aW9ucyk7CiAgICByZXR1cm4gewogICAgICBhc3Q6IGFzdCwKICAgICAgcmVuZGVyOiBjb2RlLnJlbmRlciwKICAgICAgc3RhdGljUmVuZGVyRm5zOiBjb2RlLnN0YXRpY1JlbmRlckZucwogICAgfQogIH0pOwoKICAvKiAgKi8KCiAgdmFyIHJlZiQxID0gY3JlYXRlQ29tcGlsZXIoYmFzZU9wdGlvbnMpOwogIHZhciBjb21waWxlID0gcmVmJDEuY29tcGlsZTsKICB2YXIgY29tcGlsZVRvRnVuY3Rpb25zID0gcmVmJDEuY29tcGlsZVRvRnVuY3Rpb25zOwoKICAvKiAgKi8KCiAgLy8gY2hlY2sgd2hldGhlciBjdXJyZW50IGJyb3dzZXIgZW5jb2RlcyBhIGNoYXIgaW5zaWRlIGF0dHJpYnV0ZSB2YWx1ZXMKICB2YXIgZGl2OwogIGZ1bmN0aW9uIGdldFNob3VsZERlY29kZSAoaHJlZikgewogICAgZGl2ID0gZGl2IHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgZGl2LmlubmVySFRNTCA9IGhyZWYgPyAiPGEgaHJlZj1cIlxuXCIvPiIgOiAiPGRpdiBhPVwiXG5cIi8+IjsKICAgIHJldHVybiBkaXYuaW5uZXJIVE1MLmluZGV4T2YoJyYjMTA7JykgPiAwCiAgfQoKICAvLyAjMzY2MzogSUUgZW5jb2RlcyBuZXdsaW5lcyBpbnNpZGUgYXR0cmlidXRlIHZhbHVlcyB3aGlsZSBvdGhlciBicm93c2VycyBkb24ndAogIHZhciBzaG91bGREZWNvZGVOZXdsaW5lcyA9IGluQnJvd3NlciA/IGdldFNob3VsZERlY29kZShmYWxzZSkgOiBmYWxzZTsKICAvLyAjNjgyODogY2hyb21lIGVuY29kZXMgY29udGVudCBpbiBhW2hyZWZdCiAgdmFyIHNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZiA9IGluQnJvd3NlciA/IGdldFNob3VsZERlY29kZSh0cnVlKSA6IGZhbHNlOwoKICAvKiAgKi8KCiAgdmFyIGlkVG9UZW1wbGF0ZSA9IGNhY2hlZChmdW5jdGlvbiAoaWQpIHsKICAgIHZhciBlbCA9IHF1ZXJ5KGlkKTsKICAgIHJldHVybiBlbCAmJiBlbC5pbm5lckhUTUwKICB9KTsKCiAgdmFyIG1vdW50ID0gVnVlLnByb3RvdHlwZS4kbW91bnQ7CiAgVnVlLnByb3RvdHlwZS4kbW91bnQgPSBmdW5jdGlvbiAoCiAgICBlbCwKICAgIGh5ZHJhdGluZwogICkgewogICAgZWwgPSBlbCAmJiBxdWVyeShlbCk7CgogICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICBpZiAoZWwgPT09IGRvY3VtZW50LmJvZHkgfHwgZWwgPT09IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkgewogICAgICB3YXJuKAogICAgICAgICJEbyBub3QgbW91bnQgVnVlIHRvIDxodG1sPiBvciA8Ym9keT4gLSBtb3VudCB0byBub3JtYWwgZWxlbWVudHMgaW5zdGVhZC4iCiAgICAgICk7CiAgICAgIHJldHVybiB0aGlzCiAgICB9CgogICAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zOwogICAgLy8gcmVzb2x2ZSB0ZW1wbGF0ZS9lbCBhbmQgY29udmVydCB0byByZW5kZXIgZnVuY3Rpb24KICAgIGlmICghb3B0aW9ucy5yZW5kZXIpIHsKICAgICAgdmFyIHRlbXBsYXRlID0gb3B0aW9ucy50ZW1wbGF0ZTsKICAgICAgaWYgKHRlbXBsYXRlKSB7CiAgICAgICAgaWYgKHR5cGVvZiB0ZW1wbGF0ZSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIGlmICh0ZW1wbGF0ZS5jaGFyQXQoMCkgPT09ICcjJykgewogICAgICAgICAgICB0ZW1wbGF0ZSA9IGlkVG9UZW1wbGF0ZSh0ZW1wbGF0ZSk7CiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwogICAgICAgICAgICBpZiAoIXRlbXBsYXRlKSB7CiAgICAgICAgICAgICAgd2FybigKICAgICAgICAgICAgICAgICgiVGVtcGxhdGUgZWxlbWVudCBub3QgZm91bmQgb3IgaXMgZW1wdHk6ICIgKyAob3B0aW9ucy50ZW1wbGF0ZSkpLAogICAgICAgICAgICAgICAgdGhpcwogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHRlbXBsYXRlLm5vZGVUeXBlKSB7CiAgICAgICAgICB0ZW1wbGF0ZSA9IHRlbXBsYXRlLmlubmVySFRNTDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgewogICAgICAgICAgICB3YXJuKCdpbnZhbGlkIHRlbXBsYXRlIG9wdGlvbjonICsgdGVtcGxhdGUsIHRoaXMpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRoaXMKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZWwpIHsKICAgICAgICB0ZW1wbGF0ZSA9IGdldE91dGVySFRNTChlbCk7CiAgICAgIH0KICAgICAgaWYgKHRlbXBsYXRlKSB7CiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICAgICAgaWYgKGNvbmZpZy5wZXJmb3JtYW5jZSAmJiBtYXJrKSB7CiAgICAgICAgICBtYXJrKCdjb21waWxlJyk7CiAgICAgICAgfQoKICAgICAgICB2YXIgcmVmID0gY29tcGlsZVRvRnVuY3Rpb25zKHRlbXBsYXRlLCB7CiAgICAgICAgICBvdXRwdXRTb3VyY2VSYW5nZTogImRldmVsb3BtZW50IiAhPT0gJ3Byb2R1Y3Rpb24nLAogICAgICAgICAgc2hvdWxkRGVjb2RlTmV3bGluZXM6IHNob3VsZERlY29kZU5ld2xpbmVzLAogICAgICAgICAgc2hvdWxkRGVjb2RlTmV3bGluZXNGb3JIcmVmOiBzaG91bGREZWNvZGVOZXdsaW5lc0ZvckhyZWYsCiAgICAgICAgICBkZWxpbWl0ZXJzOiBvcHRpb25zLmRlbGltaXRlcnMsCiAgICAgICAgICBjb21tZW50czogb3B0aW9ucy5jb21tZW50cwogICAgICAgIH0sIHRoaXMpOwogICAgICAgIHZhciByZW5kZXIgPSByZWYucmVuZGVyOwogICAgICAgIHZhciBzdGF0aWNSZW5kZXJGbnMgPSByZWYuc3RhdGljUmVuZGVyRm5zOwogICAgICAgIG9wdGlvbnMucmVuZGVyID0gcmVuZGVyOwogICAgICAgIG9wdGlvbnMuc3RhdGljUmVuZGVyRm5zID0gc3RhdGljUmVuZGVyRm5zOwoKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgICAgICBpZiAoY29uZmlnLnBlcmZvcm1hbmNlICYmIG1hcmspIHsKICAgICAgICAgIG1hcmsoJ2NvbXBpbGUgZW5kJyk7CiAgICAgICAgICBtZWFzdXJlKCgidnVlICIgKyAodGhpcy5fbmFtZSkgKyAiIGNvbXBpbGUiKSwgJ2NvbXBpbGUnLCAnY29tcGlsZSBlbmQnKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBtb3VudC5jYWxsKHRoaXMsIGVsLCBoeWRyYXRpbmcpCiAgfTsKCiAgLyoqCiAgICogR2V0IG91dGVySFRNTCBvZiBlbGVtZW50cywgdGFraW5nIGNhcmUKICAgKiBvZiBTVkcgZWxlbWVudHMgaW4gSUUgYXMgd2VsbC4KICAgKi8KICBmdW5jdGlvbiBnZXRPdXRlckhUTUwgKGVsKSB7CiAgICBpZiAoZWwub3V0ZXJIVE1MKSB7CiAgICAgIHJldHVybiBlbC5vdXRlckhUTUwKICAgIH0gZWxzZSB7CiAgICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGVsLmNsb25lTm9kZSh0cnVlKSk7CiAgICAgIHJldHVybiBjb250YWluZXIuaW5uZXJIVE1MCiAgICB9CiAgfQoKICBWdWUuY29tcGlsZSA9IGNvbXBpbGVUb0Z1bmN0aW9uczsKCiAgcmV0dXJuIFZ1ZTsKCn0pKTsK"}]},{"name":"购物党比价工具【精简优化版】","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":["chenzelin.herokuapp.com","gm.ntaow.com","gwdang.com","alicdn.com"],"orig_excludes":[],"orig_includes":["http*://item.taobao.com/*","http*://s.taobao.com/*","http*://detail.tmall.com/item.htm*","http*://detail.liangxinyao.com/item.htm*","http*://chaoshi.detail.tmall.com/item.htm*","http*://item.jd.com/*","https://item.jd.hk/*","https://detail.tmall.hk/*","https://*.suning.com/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1603963275161,"data":{}},"enabled":true,"position":2,"file_url":"https://greasyfork.org/scripts/397204-%E8%B4%AD%E7%89%A9%E5%85%9A%E6%AF%94%E4%BB%B7%E5%B7%A5%E5%85%B7-%E7%B2%BE%E7%AE%80%E4%BC%98%E5%8C%96%E7%89%88/code/%E8%B4%AD%E7%89%A9%E5%85%9A%E6%AF%94%E4%BB%B7%E5%B7%A5%E5%85%B7%E3%80%90%E7%B2%BE%E7%AE%80%E4%BC%98%E5%8C%96%E7%89%88%E3%80%91.user.js","uuid":"5b4b7f8b-2197-435b-b7b3-4195995bf0aa","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDotK3nianlhZrmr5Tku7flt6XlhbfjgJDnsr7nroDkvJjljJbniYjjgJEKLy8gQG5hbWVzcGFjZSAgICBub25lCi8vIEB2ZXJzaW9uICAgICAgMS45Ci8vIEBkZXNjcmlwdGlvbiAg44CQ57K+566A54mI44CR6LSt54mp5YWa77yM5LyY5YyW5LqG6aG16Z2i55qE6YOo5YiG5YWD57Sg77yM5YeP5bCR6aG16Z2i5by556qX5ZKM5pi+56S677yM5L+d55WZ6I+c5Y2V5qCP44CC6LSt54mp5YWa5o+Q5L6b5reY5a6dL+S6rOS4nC/kuprpqazpgIov5b2T5b2TL+iLj+WugS/nrYnnmb7lrrbllYbln47nmoTmr5Tku7fns7vnu5/vvIzog73orqnkvaDku6XovoPkvJjmg6DnmoTmlrnlvI/otK3kubDliLDkvaDnp7Dlv4PlpoLmhI/nmoTllYblk4HvvIzmj5DkvpvllYblk4HnmoTljoblj7Lku7fmoLzmg4XlhrXvvIzlpJrnp43nm7jkvLzllYblk4HmjqjojZDvvIzlkIzmrL7otK3kubDvvIzpmY3ku7fmj5DphpLjgIJQU++8muW4puacieaOqOW5v++8jOS7i+aEj+WLv+ijhQovLyBAYXV0aG9yICAgICAgIOa3mOWuneiAgeWPuOacugovLyBAaW5jbHVkZSAgICAgIGh0dHAqOi8vaXRlbS50YW9iYW8uY29tLyoKLy8gQGluY2x1ZGUgICAgICBodHRwKjovL3MudGFvYmFvLmNvbS8qCi8vIEBpbmNsdWRlICAgICAgaHR0cCo6Ly9kZXRhaWwudG1hbGwuY29tL2l0ZW0uaHRtKgovLyBAaW5jbHVkZSAgICAgIGh0dHAqOi8vZGV0YWlsLmxpYW5neGlueWFvLmNvbS9pdGVtLmh0bSoKLy8gQGluY2x1ZGUgICAgICBodHRwKjovL2NoYW9zaGkuZGV0YWlsLnRtYWxsLmNvbS9pdGVtLmh0bSoKLy8gQGluY2x1ZGUgICAgICBodHRwKjovL2l0ZW0uamQuY29tLyoKLy8gQGluY2x1ZGUgICAgICBodHRwczovL2l0ZW0uamQuaGsvKgovLyBAaW5jbHVkZSAgICAgIGh0dHBzOi8vZGV0YWlsLnRtYWxsLmhrLyoKLy8gQGluY2x1ZGUgICAgICBodHRwczovLyouc3VuaW5nLmNvbS8qCi8vIEBub3RlCSBWMS42IOabtOaNoua6kOWcsOWdgOS4ulN0YXRpY0ZpbGUKLy8gQG5vdGUJIFYxLjQg5pu05o2i5rqQ5Zyw5Z2A5Li6NzXlm6LlnLDlnYAKLy8gQG5vdGUJIFYxLjIg5L+u5aSN6YOo5YiG5aSa5L2Z55qE6ZqQ6JeP5peg5pWI55qE6Zeu6aKYIOS/ruWkjeS5i+WJjeW/mOS6huOAkOaWsOWinuiHquW3seeahOmZhOWKoOiEmuacrCDlpoLmnpzku4vmhI/nmoTlj6/ku6XliKDpmaTmnKzohJrmnKzjgJHjgJDmlrDlop7oh6rlt7HnmoTpmYTliqDohJrmnKwg5aaC5p6c5LuL5oSP55qE5Y+v5Lul5Yig6Zmk5pys6ISa5pys44CR44CQ5paw5aKe6Ieq5bex55qE6ZmE5Yqg6ISa5pysIOWmguaenOS7i+aEj+eahOWPr+S7peWIoOmZpOacrOiEmuacrOOAkQovLyBAZ3JhbnQgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0Ci8vIEBjb25uZWN0ICAgICAgY2hlbnplbGluLmhlcm9rdWFwcC5jb20KLy8gQGNvbm5lY3QgICAgICBnbS5udGFvdy5jb20KLy8gQGNvbm5lY3QgICAgICBnd2RhbmcuY29tCi8vIEBjb25uZWN0ICAgICAgYWxpY2RuLmNvbQovLyBAcnVuLWF0ICAgICAgIGRvY3VtZW50LXN0YXJ0Ci8vIEBsaWNlbnNlICAgICAgR1BMLTMuMC1vbmx5Ci8vIEByZXF1aXJlICAgICAgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzM0NjA2LWFjLSVFNyU4QiVBQyVFNSVBRSVCNi0lRTYlQjclOTglRTUlQUUlOUQlRTUlQTQlQTklRTclOEMlQUIlRTQlQkMlOTglRTYlODMlQTAlRTUlODglQjglRTYlOUYlQTUlRTglQUYlQTIlRTklQTIlODYlRTUlOEYlOTYtJUU1JUE0JUE3JUU5JUEyJTlEJUU0JUJDJTk4JUU2JTgzJUEwJUU1JTg4JUI4LTEwMCVFNSU4NSU4MyVFOCVCNCVBRCVFNyU4OSVBOSVFNyVBNSU5RSVFNSU4OCVCOC0lRTclOUMlODElRTklOTIlQjElRTglQjQlQUQlRTclODklQTktJUU5JUEyJTg2JUU1JTg4JUI4JUU4JUI0JUFEJUU0JUI5JUIwJUU2JTlCJUI0JUU0JUJDJTk4JUU2JTgzJUEwLSVFNSVCOSVCMyVFNSU5RCU4NyVFNCVCQyU5OCVFNiU4MyVBMDIwL2NvZGUvQUMtJUU3JThCJUFDJUU1JUFFJUI2LSVFNiVCNyU5OCVFNSVBRSU5RCVFNSVBNCVBOSVFNyU4QyVBQiVFNCVCQyU5OCVFNiU4MyVBMCVFNSU4OCVCOCVFNiU5RiVBNSVFOCVBRiVBMiVFOSVBMiU4NiVFNSU4RiU5NiwlRTUlQTQlQTclRTklQTIlOUQlRTQlQkMlOTglRTYlODMlQTAlRTUlODglQjgsJUUzJTgwJTkwMTAwJUU1JTg1JTgzJUU4JUI0JUFEJUU3JTg5JUE5JUU3JUE1JTlFJUU1JTg4JUI4JUUzJTgwJTkxLCVFNyU5QyU4MSVFOSU5MiVCMSVFOCVCNCVBRCVFNyU4OSVBOSwlRTklQTIlODYlRTUlODglQjglRTglQjQlQUQlRTQlQjklQjAlRTYlOUIlQjQlRTQlQkMlOTglRTYlODMlQTAsJUU1JUI5JUIzJUU1JTlEJTg3JUU0JUJDJTk4JUU2JTgzJUEwMjAlMjUudXNlci5qcwovLyA9PS9Vc2VyU2NyaXB0PT0KKGZ1bmN0aW9uICgpIHsKCXZhciBnb29kSWQgPSBnZXRVcmxBdHRyaWJ1dGUoImlkIik7OwoJLy8g5o+Q5Y+WdXJs5Lit55qE5Y+C5pWwCglmdW5jdGlvbiBnZXRVcmxBdHRyaWJ1dGUoYXR0cmlidXRlLCBuZWVkRGVjb2RlKSB7CgkJdmFyIHNlYXJjaFZhbHVlID0gKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyKDEpICsgIiIpLnNwbGl0KCImIik7CgkJZm9yICh2YXIgaSA9IDA7IGkgPCBzZWFyY2hWYWx1ZS5sZW5ndGg7IGkrKykgewoJCQl2YXIga2V5X3ZhbHVlID0gc2VhcmNoVmFsdWVbaV0uc3BsaXQoIj0iKTsKCQkJdmFyIHJlZyA9IG5ldyBSZWdFeHAoIl4iICsgYXR0cmlidXRlICsgIiQiKTsKCQkJaWYgKHJlZy50ZXN0KGtleV92YWx1ZVswXSkpIHsKCQkJCXZhciBzZWFyY2hXb3JkcyA9IGtleV92YWx1ZVsxXTsKCQkJCXJldHVybiBuZWVkRGVjb2RlID8gZGVjb2RlVVJJQ29tcG9uZW50KHNlYXJjaFdvcmRzKSA6IHNlYXJjaFdvcmRzOwoJCQl9CgkJfQoJfQoJZnVuY3Rpb24gc2FmZVdhaXRGdW5jKHNlbGVjdG9yLCBjYWxsYmFja0Z1bmMsIHRpbWUsIG5vdENsZWFyKSB7CgkJdGltZSA9IHRpbWUgfHwgMjAwOwoJCW5vdENsZWFyID0gbm90Q2xlYXIgfHwgZmFsc2U7CgkJdmFyIGRvQ2xlYXIgPSAhbm90Q2xlYXI7CgkJdmFyIGlkID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewoJCQl2YXIgc2VsZWN0UmVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7CgkJCWlmICgodHlwZW9mIChzZWxlY3RvcikgPT0gInN0cmluZyIgJiYgc2VsZWN0UmVzLmxlbmd0aCA+IDApKSB7CgkJCQlpZiAoZG9DbGVhcikgY2xlYXJJbnRlcnZhbChpZCk7CgkJCQlpZihzZWxlY3RSZXMubGVuZ3RoID09IDEpIHNlbGVjdFJlcyA9IHNlbGVjdFJlc1swXTsKCQkJCWNhbGxiYWNrRnVuYyhzZWxlY3RSZXMpOwoJCQl9IGVsc2UgaWYgKCh0eXBlb2YgKHNlbGVjdG9yKSA9PSAiZnVuY3Rpb24iICYmIHNlbGVjdG9yKCkubGVuZ3RoID4gMCkpIHsKCQkJCWlmIChkb0NsZWFyKSBjbGVhckludGVydmFsKGlkKTsKCQkJCWNhbGxiYWNrRnVuYyhzZWxlY3RvcigpWzBdKTsKCQkJfQoJCX0sIHRpbWUpOwoJfQoJZnVuY3Rpb24gYWRkU3R5bGUoY3NzKSB7IC8v5re75YqgQ1NT55qE5Luj56CBLS1jb3B555qELS3ms6jmhI/ph4zpnaLlv4XpobvmmK/lj4zlvJXlj7cKCQl2YXIgcGkgPSBkb2N1bWVudC5jcmVhdGVQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24oCgkJCSd4bWwtc3R5bGVzaGVldCcsCgkJCSd0eXBlPSJ0ZXh0L2NzcyIgaHJlZj0iZGF0YTp0ZXh0L2Nzczt1dGYtOCwnICsgZW5jb2RlVVJJQ29tcG9uZW50KGNzcykgKyAnIicKCQkpOwoJCXJldHVybiBkb2N1bWVudC5pbnNlcnRCZWZvcmUocGksIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7Cgl9CglmdW5jdGlvbiBhZGRTY3JpcHQoc3JjKSB7CgkJbGV0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsKCQlub2RlLnNyYyA9IHNyYzsKCQlub2RlLmNoYXJzZXQgPSAiVVRGLTgiOwoJCWRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobm9kZSk7Cgl9CgoJZnVuY3Rpb24gaW5pdEdXRCgpIHsKCQlsZXQgZXh0TmFtZSA9ICJnd2R2MS5qcyI7CgkJdmFyIGhpZGVTdHlsZSA9ICIiOwoJCWlmIChsb2NhdGlvbi5ob3N0ID09ICJqZC5jb20iKSB7CgkJCWV4dE5hbWUgPSAiZ3dkdjIuanMiOwoJCQloaWRlU3R5bGUgPSAiLmd3ZC1taW5pYmFyLWJnLCAjZmF2b3JfYm94e2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50O30iICsKCQkJCSIjZ3dkYW5nX21haW4gPiBhLmd3ZC10b3BiYXItbG9nbywgI2d3ZGFuZ19tYWluID4gZGl2Lmd3ZC10b3BiYXItcmlnaHR7ZGlzcGxheTpub25lICFpbXBvcnRhbnQ7fSI7CgkJfSBlbHNlIHsKCQkJaGlkZVN0eWxlID0gIiNnd2RhbmctbWFpbj5kaXYubG9nbywgI2d3ZGFuZy1mZWVkLWNsb3NlLCAjZ3dkYW5nLWhpc3RvcnksICNjb3Vwb25fYm94LCAjYmpkX3lpZmVucWlhbl9kZXRhaWx7ZGlzcGxheTpub25lICFpbXBvcnRhbnR9IiArCgkJCQkiI2Zhdm9yX2JveHtkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9I3RiLWFtb3VudCAudGItY291bnR7Zm9udC13ZWlnaHQ6Ym9sZDttYXJnaW46MCA1cHg7fSI7CgkJfQoJCS8vIGFkZFNjcmlwdCgiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2NoZW56ZWxpbjAxL3dlY2hhdHByb3h5L3B1YmxpYy8iICsgZXh0TmFtZSk7CgkJYWRkU2NyaXB0KCJodHRwczovL2Jyb3dzZXIuZ3dkYW5nLmNvbS9nZXQuanM/Zj0vanMvZ3dkYW5nX2V4dGVuc2lvbi5qcyIpOwoJCWFkZFN0eWxlKGhpZGVTdHlsZSk7Cgl9CgoJZnVuY3Rpb24gcmVhbFRpbWVTaG93VEJUaXRsZSgpewoJCWFkZFN0eWxlKCIudHNob3AtcHNtLXNob3AtaGVhZGVyLC5hYy10b3BoaWRle3Bvc2l0aW9uOiBhYnNvbHV0ZTt0b3A6IC01MDBweDt9LmFjLXRvcHNob3d7cG9zaXRpb246cmVsYXRpdmU7dHJhbnNpdGlvbjogYWxsIDFzIGN1YmljLWJlemllcigwLjQsIDAsIDEsIDEpO3RyYW5zZm9ybTogdHJhbnNsYXRlWSg1MDBweCk7fSIpOwoJCWxldCB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCl7CgkJCWxldCBub2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLnRzaG9wLXBzbS1zaG9wLWhlYWRlciIpOwoJCQlsZXQgYWRkQ2xhc3NOYW1lID0gImFjLXRvcGhpZGUiOwoJCQlpZihub2RlID09IG51bGwpIHJldHVybjsKCQkJLy8g5aaC5p6c5aSn5LqOMjAw77yM6K+05piO5qC35byP5pyq5Yqg6L29CgkJCWlmKG5vZGUub2Zmc2V0SGVpZ2h0ID4gMjAwICYmICFub2RlLmNsYXNzTGlzdC5jb250YWlucyhhZGRDbGFzc05hbWUpKXsKCQkJCW5vZGUuY2xhc3NMaXN0LmFkZChhZGRDbGFzc05hbWUpOwoJCQl9CgkJCWlmKG5vZGUub2Zmc2V0SGVpZ2h0IDw9IDIwMCl7CgkJCQlpZihub2RlLmNsYXNzTGlzdC5jb250YWlucyhhZGRDbGFzc05hbWUpKXsKCQkJCQlub2RlLmNsYXNzTGlzdC5hZGQoImFjLXRvcHNob3ciKTsKCQkJCQljbGVhckludGVydmFsKHRpbWVyKTsKCQkJCX1lbHNlewoJCQkJCWNsZWFySW50ZXJ2YWwodGltZXIpOwoJCQkJCS8vIOa4heepuumZhOWKoOagt+W8jwoJCQkJCWFkZFN0eWxlKCIudHNob3AtcHNtLXNob3AtaGVhZGVye3Bvc2l0aW9uOiByZWxhdGl2ZTt0b3A6IHVuc2V0O30iKTsKCQkJCX0KCQkJfQoJCX0sMTUwKTsKCX0KCglmdW5jdGlvbiBpbml0KCkgewoJCWZ1bmN0aW9uIGRlYWxSZXMoanNvbil7CgkJCXZhciBhbGxIaWRlID0gIiI7CgkJCXZhciB5ZWFySGlkZSA9ICIiOwoJCQl2YXIgbW9udGhIaWRlID0gIiI7CgkJCWlmIChqc29uLnN0b3JlWzBdLmFsbF9saW5lID09IG51bGwpIHsKCQkJCWFsbEhpZGUgPSAic3R5bGU9J2Rpc3BsYXk6IG5vbmU7JyI7CgkJCX0KCQkJaWYgKGpzb24uc3RvcmVbMF0ueWVhcl9saW5lID09IG51bGwpIHsKCQkJCXllYXJIaWRlID0gInN0eWxlPSdkaXNwbGF5OiBub25lOyciOwoJCQl9CgkJCWlmIChqc29uLnN0b3JlWzBdLm1vbnRoX2xpbmUgPT0gbnVsbCkgewoJCQkJbW9udGhIaWRlID0gInN0eWxlPSdkaXNwbGF5OiBub25lOyciOwoJCQl9CgkJCXZhciBkZGF0YTsKCQkJaWYgKGpzb24uc3RvcmUubGVuZ3RoID4gMSkgewoJCQkJZGRhdGEgPSBqc29uLnN0b3JlWzFdLmFsbF9saW5lOwoJCQl9CgoJCQl2YXIgZGRhdGE7CgkJCWlmIChqc29uLnN0b3JlLmxlbmd0aCA+IDEpIHsKCQkJCWRkYXRhID0ganNvbi5zdG9yZVsxXS5hbGxfbGluZTsKCQkJfQoKCQkJbGV0IHBkYXRhID0ganNvbi5zdG9yZVswXS5hbGxfbGluZTsKCQkJbGV0IHBiZWdpblRpbWUgPSBqc29uLnN0b3JlWzBdLmFsbF9saW5lX2JlZ2luX3RpbWU7CgkJCWxldCBwaWNkYXRhID0gZGRhdGE7CgoJCQl2YXIgaG1sID0gIjxkaXYgICBzdHlsZT0nbWFyZ2luLWxlZnQ6NTBweDttYXJnaW4tdG9wOjIwcHg7ZGlzcGxheTogYmxvY2s7Jz48YSBjbGFzcz0nYWN0aXZlLXBsb3QgdHlwZS1wbG90JyAiICsgYWxsSGlkZSArICIgaWQ9J3Bsb3RBbGwnPuWFqOmDqDwvYT48YSBjbGFzcz0ndHlwZS1wbG90JyAiICsgeWVhckhpZGUgKyAiIGlkPSdwbG90WWVhcic+5bm057q/PC9hPjxhIGNsYXNzPSd0eXBlLXBsb3QnICIgKyBtb250aEhpZGUgKyAiIGlkPSdwbG90TW9udGgnPuaciOe6vzwvYT4iOwoJCQlobWwgPSBobWwgKyAiPGRpdiBpZD0naGlzcHJpY2UnIHN0eWxlPSd3aWR0aDogNzIwcHg7aGVpZ2h0OjM1MHB4O21hcmdpbjogMDtwYWRkaW5nOiAwJz48L2Rpdj4iOwoKCQkJcmV0dXJuIGAKPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLnN0YXRpY2ZpbGUub3JnL2VjaGFydHMvNC44LjAvZWNoYXJ0cy5taW4uanMiPjwvc2NyaXB0Pgoke2htbH0KPHNjcmlwdD4KdmFyIHBDaGFydCA9IGVjaGFydHMuaW5pdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGlzcHJpY2UnKSk7CnNob3dQcmljZSgpOwpmdW5jdGlvbiBzaG93UHJpY2UoKSB7CnZhciBkYXRhID1bJHtwZGF0YX1dOwp2YXIgYmVnaW5UaW1lID0ke3BiZWdpblRpbWV9Owp2YXIgcGljZGF0YSA9WyR7cGljZGF0YX1dOwp2YXIgZHQgPSBbXTsKZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7CnZhciBkID0gbmV3IERhdGUoYmVnaW5UaW1lKTsKZC5zZXREYXRlKGQuZ2V0RGF0ZSgpICsgaSk7CmR0LnB1c2goZC50b0xvY2FsZURhdGVTdHJpbmcoKSk7Cn0KCi8vIOaMh+WumuWbvuihqOeahOmFjee9rumhueWSjOaVsOaNrgp2YXIgb3B0aW9uID0gewoKdG9vbHRpcDogewplbnRlcmFibGU6IHRydWUsCnRyaWdnZXI6ICdheGlzJywKZm9ybWF0dGVyOiBmdW5jdGlvbiAocGFyYW1zKSB7CgpyZXR1cm4gcGFyYW1zWzBdLmF4aXNWYWx1ZSArICI8YnIvPiIgKyBwYXJhbXNbMF0uZGF0YTsKfSwKYXhpc1BvaW50ZXI6IHsKYW5pbWF0aW9uOiBmYWxzZQp9Cn0sCmxlZ2VuZDogewpkYXRhOiBbJ+mhtemdouS7tycsICfliLDmiYvku7cnXSwKc2VsZWN0ZWQ6IHsKJ+mhtemdouS7tyc6IHRydWUsCifliLDmiYvku7cnOiB0cnVlCgp9Cgp9LAp4QXhpczogewpkYXRhOiBkdCwKc3BsaXRBcmVhOiB7IHNob3c6IGZhbHNlIH0sCmJvdW5kYXJ5R2FwOiBmYWxzZSwKc3BsaXRMaW5lOiB7CnNob3c6IHRydWUsCgp9LApheGlzTGFiZWw6IHsKCmludGVydmFsOiBwYXJzZUludCgoZGF0YS5sZW5ndGgpIC8gMTApLApmb3JtYXR0ZXI6IGZ1bmN0aW9uICh2YWx1ZSkgewoKcmV0dXJuIHZhbHVlLnN1YnN0cmluZyg1KTsKfQp9LAp9LAp5QXhpczogewpzcGxpdEFyZWE6IHsgc2hvdzogZmFsc2UgfSwKc3BsaXRMaW5lOiB7CnNob3c6IHRydWUsCgp9Cn0sCnNlcmllczogW3sKbmFtZTogJ+mhtemdouS7tycsCnR5cGU6ICdsaW5lJywKZGF0YTogZGF0YSwKc2hvd1N5bWJvbDogZmFsc2UsCmhvdmVyQW5pbWF0aW9uOiBmYWxzZSwKbWFya1BvaW50OiB7CnN5bWJvbDogJ3BpbicsCgpkYXRhOiBbCnsgdHlwZTogJ21heCcsIG5hbWU6ICfmnIDlpKflgLwnIH0sCnsgdHlwZTogJ21pbicsIG5hbWU6ICfmnIDlsI/lgLwnIH0KXQp9LAptYXJrTGluZTogewpkYXRhOiBbCnsgdHlwZTogJ2F2ZXJhZ2UnLCBuYW1lOiAn5bmz5Z2H5YC8JyB9Cl0KfQp9LAp7Cm5hbWU6ICfliLDmiYvku7cnLAp0eXBlOiAnbGluZScsCmRhdGE6IHBpY2RhdGEsCnNob3dTeW1ib2w6IGZhbHNlLApob3ZlckFuaW1hdGlvbjogZmFsc2UsCm1hcmtQb2ludDogewpzeW1ib2w6ICdwaW4nLAoKZGF0YTogWwp7IHR5cGU6ICdtYXgnLCBuYW1lOiAn5pyA5aSn5YC8JyB9LAp7IHR5cGU6ICdtaW4nLCBuYW1lOiAn5pyA5bCP5YC8JyB9Cl0KfSwKbWFya0xpbmU6IHsKZGF0YTogWwp7IHR5cGU6ICdhdmVyYWdlJywgbmFtZTogJ+W5s+Wdh+WAvCcgfQpdCn0KfQpdCn07CgoKcENoYXJ0LnNldE9wdGlvbihvcHRpb24pOwp9Owo8L3NjcmlwdD4KYAoJCX0KCQlmdW5jdGlvbiBvcFdpbmQocHVybCwgcGlzd2ViLCBwbmFtZSwgcGhtbCkgewoJCQl2YXIgdXJsID0gcHVybDsKCQkJdmFyIG5hbWUgPSBwbmFtZTsKCQkJdmFyIGlXaWR0aCA9IDgwMDsKCQkJdmFyIGlIZWlnaHQgPSA0NTA7CgkJCXZhciBpVG9wID0gKHdpbmRvdy5zY3JlZW4uaGVpZ2h0IC0gMzAgLSBpSGVpZ2h0KSAvIDI7CgkJCXZhciBpTGVmdCA9ICh3aW5kb3cuc2NyZWVuLndpZHRoIC0gMTAgLSBpV2lkdGgpIC8gMjsKCQkJLy8gdmFyIE9wZW5XaW5kb3cgPSB3aW5kb3cub3Blbih1cmwsIG5hbWUsICdoZWlnaHQ9JyArIGlIZWlnaHQgKyAnLCxpbm5lckhlaWdodD0nICsgaUhlaWdodCArICcsd2lkdGg9JyArIGlXaWR0aCArICcsaW5uZXJXaWR0aD0nICsgaVdpZHRoICsgJyx0b3A9JyArIGlUb3AgKyAnLGxlZnQ9JyArIGlMZWZ0ICsgJyx0b29sYmFyPW5vLG1lbnViYXI9bm8sc2Nyb2xsYmFycz1hdXRvLHJlc2l6ZWFibGU9bm8sbG9jYXRpb249bm8sc3RhdHVzPW5vJyk7CgkJCS8vIGlmIChwaXN3ZWIgPT0gMCkgewoJCQkvLyAJT3BlbldpbmRvdy5kb2N1bWVudC53cml0ZShwaG1sKTsKCQkJLy8gCU9wZW5XaW5kb3cuZG9jdW1lbnQuY2xvc2UoKTsKCQkJLy8gCU9wZW5XaW5kb3cuZm9jdXMoKTsKCQkJLy8gfQoJCQl2YXIgaW5zV2luZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpOwoJCQkvLyBpbnNXaW5kLnNyYyA9ICJqYXZhc2NyaXB0OihmdW5jdGlvbigpe2RvY3VtZW50LndyaXRlKCIraW5zV2luZCsiKX0pKCkiOwoJCQlpbnNXaW5kLmlubmVySFRNTCA9IHBobWw7CgkJCWRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaW5zV2luZCk7CgkJfQoJCS8vIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJnd2RhbmctZnAiKSA9PSBudWxsCgkJaWYodHJ1ZSl7CgkJCS8vIOmmluasoeWKoOi9veaVsOaNrgoJCQlpbml0R1dEKCk7CgkJfWVsc2V7CgkJCS8vIFRPRE8g5b6F5a6M5oiQ77yM5Ly85LmO6L+Z6YeM5LiN5aW95aSE55CGCgkJCWxldCBxZGF0YSA9ICJmcD0iK2xvY2FsU3RvcmFnZS5nZXRJdGVtKCJnd2RhbmctZnAiKSsiJmRmcD0iK2xvY2FsU3RvcmFnZS5nZXRJdGVtKCJnd2RhbmctZGZwIik7CgkJCUdNX3htbGh0dHBSZXF1ZXN0KHsKCQkJCXVybDogImh0dHBzOi8vYnJvd3Nlci5nd2RhbmcuY29tL2V4dGVuc2lvbi9wcmljZV90b3dhcmRzP3Zlcj0xJmZvcm1hdD1qc29ucCYmdXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQobG9jYXRpb24uaHJlZiksCgkJCQltZXRob2Q6ICdHRVQnLAoJCQkJdGltZW91dDogMTAwMDAsCgkJCQloZWFkZXJzOiB7CgkJCQkJJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywKCQkJCQknQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLAoJCQkJCSdDYWNoZS1Db250cm9sJzogJ3B1YmxpYycKCQkJCX0sCgkJCQlvbmxvYWQ6IGZ1bmN0aW9uIChyZXMpIHsKCQkJCQljb25zdCBqc29uID0gSlNPTi5wYXJzZShyZXMucmVzcG9uc2VUZXh0KQoJCQkJCWlmIChqc29uLmlzX2JhbiA9PSBudWxsKSB7CgkJCQkJCWNvbnNvbGUubG9nKGpzb24pOwoKCQkJCQkJbGV0IGRhdGEgPSBkZWFsUmVzKGpzb24pOwoJCQkJCQlvcFdpbmQoJycsIDAsICfmr5Tku7cnLCBkYXRhKTsKCQkJCQl9IGVsc2UgewoJCQkJCQljb25zb2xlLmxvZyhqc29uLmFjdGlvbi50byk7CgkJCQkJCW9wV2luZChqc29uLmFjdGlvbi50bywgJzEnLCAn6K+36aqM6K+B5ZCO5Yi35paw6aG16Z2i77yBJywgJycpOwoJCQkJCX0KCQkJCX0KCQkJfSk7CgkJfQoJfQoJaW5pdCgpOwoJcmVhbFRpbWVTaG93VEJUaXRsZSgpOwp9KSgpCg==","requires":[{"meta":{"name":"AC-%E7%8B%AC%E5%AE%B6-%E6%B7%98%E5%AE%9D%E5%A4%A9%E7%8C%AB%E4%BC%98%E6%83%A0%E5%88%B8%E6%9F%A5%E8%AF%A2%E9%A2%86%E5%8F%96,%E5%A4%A7%E9%A2%9D%E4%BC%98%E6%83%A0%E5%88%B8,%E3%80%90100%E5%85%83%E8%B4%AD%E7%89%A9%E7%A5%9E%E5%88%B8%E3%80%91,%E7%9C%81%E9%92%B1%E8%B4%AD%E7%89%A9,%E9%A2%86%E5%88%B8%E8%B4%AD%E4%B9%B0%E6%9B%B4%E4%BC%98%E6%83%A0,%E5%B9%B3%E5%9D%87%E4%BC%98%E6%83%A020%25.user.js","url":"https://greasyfork.org/scripts/34606-ac-%E7%8B%AC%E5%AE%B6-%E6%B7%98%E5%AE%9D%E5%A4%A9%E7%8C%AB%E4%BC%98%E6%83%A0%E5%88%B8%E6%9F%A5%E8%AF%A2%E9%A2%86%E5%8F%96-%E5%A4%A7%E9%A2%9D%E4%BC%98%E6%83%A0%E5%88%B8-100%E5%85%83%E8%B4%AD%E7%89%A9%E7%A5%9E%E5%88%B8-%E7%9C%81%E9%92%B1%E8%B4%AD%E7%89%A9-%E9%A2%86%E5%88%B8%E8%B4%AD%E4%B9%B0%E6%9B%B4%E4%BC%98%E6%83%A0-%E5%B9%B3%E5%9D%87%E4%BC%98%E6%83%A020/code/AC-%E7%8B%AC%E5%AE%B6-%E6%B7%98%E5%AE%9D%E5%A4%A9%E7%8C%AB%E4%BC%98%E6%83%A0%E5%88%B8%E6%9F%A5%E8%AF%A2%E9%A2%86%E5%8F%96,%E5%A4%A7%E9%A2%9D%E4%BC%98%E6%83%A0%E5%88%B8,%E3%80%90100%E5%85%83%E8%B4%AD%E7%89%A9%E7%A5%9E%E5%88%B8%E3%80%91,%E7%9C%81%E9%92%B1%E8%B4%AD%E7%89%A9,%E9%A2%86%E5%88%B8%E8%B4%AD%E4%B9%B0%E6%9B%B4%E4%BC%98%E6%83%A0,%E5%B9%B3%E5%9D%87%E4%BC%98%E6%83%A020%25.user.js","ts":1607323072791,"mimetype":"text/javascript"},"source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBBQy3ni6zlrrYt5reY5a6d5aSp54yr5LyY5oOg5Yi45p+l6K+i6aKG5Y+WLOWkp+mineS8mOaDoOWIuCzjgJAxMDDlhYPotK3niannpZ7liLjjgJEs55yB6ZKx6LSt54mpLOmihuWIuOi0reS5sOabtOS8mOaDoCzlubPlnYfkvJjmg6AyMCUKLy8gQHZlcnNpb24gICAgICA3LjgKLy8gQGRlc2NyaXB0aW9uICDni6zlrrbmn6Xor6Lmt5jlrp3llYblk4Hmn6Xor6LmmK/lkKblhbfmnInkvJjmg6DliLgs5ZCE56eN5aSn6aKd5LyY5oOg5Yi4LOOAkDPlhYN8MTDlhYN8MjDlhYN8NDDlhYPjgJHkvJjmg6DliLjpooblj5Ys6LSt54mp5b+F5aSHLOeJueWkp+S8mOaDoAovLyBAYXV0aG9yICAgICAgIEFDCi8vIEBpbmNsdWRlICAgICAgaHR0cHM6Ly9pdGVtLnRhb2Jhby5jb20vaXRlbS5odG0qCi8vIEBpbmNsdWRlICAgICAgaHR0cHM6Ly9kZXRhaWwudG1hbGwuY29tL2l0ZW0uaHRtKgovLyBAaW5jbHVkZSAgICAgIGh0dHBzOi8vcy50YW9iYW8uY29tL3NlYXJjaCoKLy8gQGluY2x1ZGUgICAgICBodHRwczovL2NhcnQudGFvYmFvLmNvbS8qCi8vIEBpbmNsdWRlICAgICAgKjovL3VsYW5kLnRhb2Jhby5jb20vY291cG9uLyoKLy8gQG5vdGUgICAgICAgICAyMDIwLjExLjEwLVY3Ljgg5pu05paw5qOA5p+l5pWw5o2u5o6l5Y+jCi8vIEBub3RlICAgICAgICAgMjAyMC4wOS4wOC1WNy42IOS/ruWkjeS6jOe7tOeggeaXoOaViOeahOmXrumimO+8jOabtOaNouiHquW3seeahOS6jOe7tOeggeaWueahiO+8jOeQhuiuuuS4iuS4jeS8muWkseaViOS6hgovLyBAbm90ZSAgICAgICAgIDIwMjAuMDcuMTYtVjcuNSDkv67lpI3kuoznu7TnoIHml6DmlYjnmoTpl67popjvvIzkv67lpI3pg6jliIbmg4XlhrXkuIvmn6Xor6Lml6DmlYjnmoTpl67popjvvJvlj6/ku6Xnm7TmjqXnlKjmiYvmnLrmt5jlrp3miavmj4/kuoznu7TnoIEKLy8gQG5vdGUgICAgICAgICAyMDIwLjAzLjExLVY3LjQg5L+u5aSN6YOo5YiG5oOF5Ya15LiL5LqM57u056CB5peg5rOV5pi+56S655qE6Zeu6aKYICYmIOS/ruWkjeaMiemSruagt+W8j+eahOiwg+aVtAovLyBAbm90ZSAgICAgICAgIDIwMjAuMDMuMDItVjcuMyDmlrDlop7miYvmnLrnm7TmjqXmiavnoIHlip/og73vvIzmiYvmnLrlj6/ku6XlnKjkvJjmg6DliLjnmoTmjInpkq7kuIrnm7TmjqXmiavnoIHotK3kubAKLy8gQG5vdGUgICAgICAgICAyMDIwLjAzLjAyLVY3LjIg5L+u5aSN5Zu+54mH5Yqg6L295aSx5pWI55qE6Zeu6aKY77yM5Lul5Y+K6YOo5YiG5qC35byP6Zeu6aKYCi8vIEBub3RlICAgICAgICAgMjAxOS4wMy4wOC1WNy4xIOS/ruWkjeS4gOWkhOWwj2J1ZwovLyBAbm90ZSAgICAgICAgIDIwMTkuMDEuMDYtVjcuMCDlubTliY3liLfkuIDkuIvniYjmnKwKLy8gQG5vdGUgICAgICAgICAyMDE4LjEwLjE1LVY2Ljkg56e76Zmk5peg5YWz55qE5Luj56CB77yM5LyY5YyW57uT5p6E77yM5a+55LqO5peg5pWI55qE6ZO+5o6l5LiN5omT5byACi8vIEBub3RlICAgICAgICAgMjAxOC4wOS4yNi1WNi44IOenu+mZpOavlOS7t+WKn+iDvX5+Ci8vIEBub3RlICAgICAgICAgMjAxOC4wOS4yMy1WNi43IOWcqOa3mOWuneWNlemhteaPkOS+m+avlOS7t+WKn+iDvQovLyBAbm90ZSAgICAgICAgIDIwMTguMDkuMTktVjYuNiDkv67lpI3lnKjmt5jlrp3mn5DkupvpobXpnaLnmoTlsZXnpLrkuI3mraPluLjnmoTpl67popgKLy8gQG5vdGUgICAgICAgICAyMDE4LjA5LjE3LVY2LjUg5pu05pawLeaUr+aMgeaJqeWxleaooeW8jwovLyBAbm90ZSAgICAgICAgIDIwMTguMDkuMDYtVjYuNCDmlrDlop7lj6/ngrnlh7vmjInpkq7nmoTlj5joibLvvIzmm7Tlj4vlpb3nmoTkuqTkupIKLy8gQG5vdGUgICAgICAgICAyMDE4LjA5LjA1LVY2LjMg5L+u5aSN5aSa5Liq6Kem5Y+R5a+86Ie055qE5Yay56qB6Zeu6aKY77yM5paw5aKe5rua5Yqo5pe25L6d5pen5Y+v5Lul55yL5Yiw5LyY5oOg5oqY5omjCi8vIEBub3RlICAgICAgICAgMjAxOC4wOC4yNC1WNi4yIOS/ruWkjeiOt+WPluWVhuWTgeagh+mimOS4jeato+W4uOWvvOiHtOeahOaQnOe0ouaXoOe7k+aenOeahOmXrumimAovLyBAbm90ZSAgICAgICAgIDIwMTguMDguMTEtVjYuMCDmlrDlop7mkJzntKLlkI7kvJjmg6DpnaLlgLzmmL7npLrvvJvlsY/olL3kuIDkupvnroDljZXnmoTng6bkurrnmoTlub/lkYpb56uZ5YaF5pCcXQovLyBAbm90ZSAgICAgICAgIDIwMTguMDcuMjUtVjUuNiDkvJjljJbmjInpkq7pobrluo/jgILjgILku6XliY3pgqPkuKrpobrluo/nnJ/nmoTkuI3ooYwKLy8gQG5vdGUgICAgICAgICAyMDE4LjA2LjEzLVY1LjUg5L+u5aSN5YG25bCU5peg5rOV6I635Y+W5qCH6aKY77yM54S25ZCO5peg5rOV5q2j5bi45pCc57Si57uT5p6c55qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgMjAxOC4wNi4xMy1WNS40IOS/ruWkjeiwg+eUqOeahOmXrumimO+8jOS7peWPiuacieaXtuWAmeafpeS4jeWHuuadpeeahOmXrumimAovLyBAbm90ZSAgICAgICAgIDIwMTguMDUuMTItVjUuMyDkv67lpI3lnKjpg6jliIblpKnnjKvpobXpnaLmsqHlj43lupTnmoTpl67popgKLy8gQG5vdGUgICAgICAgICAyMDE4LjA0LjMwLVY1LjIg5paw5aKe5LyY5oOg5Yi46Z2i6aKd5p+l6K+i57uT5p6cCi8vIEBub3RlICAgICAgICAgMjAxOC4wMy4xOC1WNS4xIOabtOaWsOS4i+agh+mimAovLyBAbm90ZSAgICAgICAgIDIwMTguMDMuMTgtVjUuMCDmlrDlop7otK3nianovabpobXpnaLorr7nva7mlbDmja4KLy8gQG5vdGUgICAgICAgICAyMDE4LjAzLjEwLVY0Ljkg5L+u5q2j5LiK5Liq54mI5pys5pu05paw55qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgMjAxOC4wMy4wOC1WNC44IOeugOWNleWinuWKoOS4gOS4quaMiemSrumAiemhuQovLyBAbm90ZSAgICAgICAgIDIwMTguMDEuMjMtVjQuNSDkv67mraPmloflrZfor7TmmI4KLy8gQG5vdGUgICAgICAgICAyMDE4LjAxLjIyLVY0LjQg5L+u5aSN5LiK5Liq54mI5pys5pu05paw5a+86Ie055qEQlVH44CC44CC44CC44CC44CC5b6I5bC05bCsCi8vIEBub3RlICAgICAgICAgMjAxOC4wMS4xOC1WNC4zIOS8mOWMlueVjOmdouaYvuekuuaViOaenO+8jOaYvuekuuaQnOe0oue7k+aenOS4reiiq+iHquWKqOWIoOmZpOeahOmhueebrgovLyBAbm90ZSAgICAgICAgIDIwMTguMDEuMDctVjQuMiDmm7TmjaLln5/lkI0KLy8gQG5vdGUgICAgICAgICAyMDE4LjAxLjA2LVY0LjEg56e76Zmk5LiN5q2j5bi455qE5o6o5bm/5qih5byPMgovLyBAbm90ZSAgICAgICAgIDIwMTguMDEuMDYtVjQuMCDnp7vpmaTkuI3mraPluLjnmoTmjqjlub/mqKHlvI8KLy8gQG5vdGUgICAgICAgICAyMDE4LjAxLjAyLVYzLjgg5pu05paw5qCH6aKY5ZKM5paH5a2X6K+05piOLOmhuuW4puiwg+aVtOS7o+eggee7k+aehAovLyBAbm90ZSAgICAgICAgIDIwMTcuMTIuMjUtVjMuNyDkv67lpI3lgbblsJTmn6Xmib7mjInpkq7lpLHmlYjnmoTpl67popgKLy8gQG5vdGUgICAgICAgICAyMDE3LjEyLjI1LVYzLjYg5L+u5aSN5pu05paw5a+86Ie055qE5bCP6Zeu6aKYMu+8jOS4jeW9seWTjeS9v+eUqAovLyBAbm90ZSAgICAgICAgIDIwMTcuMTIuMTctVjMuNSDkv67lpI3mm7TmlrDlr7zoh7TnmoTlsI/pl67popjvvIzkuI3lvbHlk43kvb/nlKgKLy8gQG5vdGUgICAgICAgICAyMDE3LjEyLjA1LVYzLjQg5paw5aKe56uZ5YaF5pCc57Si5qih5byPCi8vIEBub3RlICAgICAgICAgMjAxNy4xMS4yMi1WMy4zIOWGjeivleivleS7peWJjeeahOaooeW8j++8jOS/ruWkjUJVRwovLyBAbm90ZSAgICAgICAgIDIwMTcuMTEuMTctVjMuMiDnu53mnJvnmoTmkJzntKJCVUfkv67lpI0KLy8gQG5vdGUgICAgICAgICAyMDE3LjExLjE3LVYzLjEg5LyY5YyW6L295YWl57yT5oWi55qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgMjAxNy4xMS4xNy1WMy4wIOS/ruWkjeS4iuS4gOeJiOi/h+S6jua1geeVheeahGJ1Z++8jOS4iuS4gOeJiOabtOaWsOWvvOiHtOeahGJ1Z+aMuuWkmueahOOAguOAguOAggovLyBAbm90ZSAgICAgICAgIDIwMTcuMTEuMTctVjIuOSDmraPluLjmm7TmlrDvvIzlsL3ph4/lh4/lsJHnlLHkuo7ph43lrprlkJHluKbmnaXnmoTlvbHlk43vvIzlkIzml7bkv67mraPop4TliJnpgb/lhY3lh7rkuosKLy8gQG5vdGUgICAgICAgICAyMDE3LjExLjE3LVYyLjgg5LiK5Liq54mI5pys5pu05paw5a+86Ie055qEYnVnICAuLi5QX1AuLi4KLy8gQG5vdGUgICAgICAgICAyMDE3LjExLjE3LVYyLjcg5L+u5aSN5LyY5oOg5Yi46I635Y+W5LiN5q2j56Gu55qE6Zeu6aKY77yM5Lul5Y+K6YOo5YiG5oOF5Ya15LiL5peg5rOV5pi+56S65LyY5oOg5Yi455qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgMjAxNy4xMS4xMi1WMi42IOeugOWNleabtOaWsAovLyBAbm90ZSAgICAgICAgIDIwMTcuMTEuMTEtVjIuNSDmn6Xor6LpgJ/luqbmm7Tlv6vpgJ/vvIzlubbkuJTkvJjljJbkuobovb3lhaXmg4XlhrXvvIzliqDlhaXkuobkuKrkurrmlbDmja4KLy8gQG5vdGUgICAgICAgICAyMDE3LjExLjEwLVYyLjQg5aaC5p6c5pyJ5LyY5oOg77yM5Y+v5Lul5bGV56S65Ye65LyY5oOg5L+h5oGv5LqGCi8vIEBub3RlICAgICAgICAgMjAxNy4xMS40LVYyLjMg5pqC5pe25paw5aKe5Lik56eN5qih5byP5L6b6YCJ5oupCi8vIEBub3RlICAgICAgICAgMjAxNy4xMS4yLVYyLjIg5Y+C54Wn5LqG5LiA5Liq5aSn56We55qE6ISa5pys5LmL5ZCO5ou/5Yiw5LqG5LiA5LqbY3Nz77yM5LqO5piv5Y+I5Yqg5LqG5Lqb5Lic6KW/77yM5bGV56S65LiA5Lqb5Y+M5Y2B5LiA55u45YWz55qE5qCH562+Ci8vIEBub3RlICAgICAgICAgMjAxNy4xMS4xLVYyLjEg5YiH5o2i5Li6aW5jbHVkZeinhOWIme+8jOiAjOmdnm1hdGNo6KeE5YiZ77yM6YG/5YWNR3JlYXNlTW9ua2V55LiK5peg5rOV5L2/55So55qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgMjAxNy4xMC4zMC1WMi4wIOS/ruWkjeWcqOafkOS6m+mhtemdouS4iu+8jOagh+mimOiOt+WPluS4jeato+ehrueahOmXrumimAovLyBAbm90ZSAgICAgICAgIDIwMTcuMTAuMjgtVjEuMCDnrKzkuIDniYjmnKzvvIxlZGl0IGZyb20gaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy96aC1UVy9zY3JpcHRzLzM0NjA0Ci8vIEBpY29uICAgICAgICAgaHR0cHM6Ly9naXRlZS5jb20vcmVtaXhBQy9HTV9zY3JpcHQvcmF3L21hc3Rlci9pbWFnZXMvaGVhZC5qcGcKLy8gQGhvbWUtdXJsICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3poLVRXL3NjcmlwdHMvMzQ2MDYKLy8gQHJ1bi1hdCAgICAgICBkb2N1bWVudC1zdGFydAovLyBAbmFtZXNwYWNlICAgIDEzNTM0NjQ1MzlAcXEuY29tCi8vIEBjb25uZWN0ICAgICAgb3Blbi5sZXNpY2x1Yi5jbgovLyBAY29ubmVjdCAgICAgIGdtLm50YW93LmNvbQovLyBAZ3JhbnQgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0Ci8vIEBsaWNlbnNlICAgICAgICAgR1BMLTMuMC1vbmx5Ci8vID09L1VzZXJTY3JpcHQ9PQovLyAudGItZGV0YWlsLWhkLCAudGItbWFpbi10aXRsZQoKc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICBpZih0eXBlb2YoYWNUQikgPT0gInVuZGVmaW5lZCIpewogICAgICAgIGFjVEIgPSAxOwogICAgICAgIChmdW5jdGlvbigpewogICAgICAgICAgICB2YXIgZ29vZFRpdGxlID0gIiI7CiAgICAgICAgICAgIGZ1bmN0aW9uIGFkZFN0eWxlKGNzcykgewogICAgICAgICAgICAgICAgdmFyIHBpID0gZG9jdW1lbnQuY3JlYXRlUHJvY2Vzc2luZ0luc3RydWN0aW9uKAogICAgICAgICAgICAgICAgICAneG1sLXN0eWxlc2hlZXQnLAogICAgICAgICAgICAgICAgICAndHlwZT0idGV4dC9jc3MiIGhyZWY9ImRhdGE6dGV4dC9jc3M7dXRmLTgsJyArIGVuY29kZVVSSUNvbXBvbmVudChjc3MpICsgJyInCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50Lmluc2VydEJlZm9yZShwaSwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiB0aW1lckRvT25jZShub2RlLCBmdW5jdGlvbk5hbWUsIGNoZWNrVGltZSl7CiAgICAgICAgICAgICAgICB2YXIgdHQgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iobm9kZSkgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHR0KTsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb25OYW1lKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1jYXRjaCAoZSkge30KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBjaGVja1RpbWUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBsb2FkU0MoKXsKICAgICAgICAgICAgICAgIC8vIOaQnOe0oueahOaXtuWAmeWinuWKoOS8mOaDoOS/oeaBrwogICAgICAgICAgICAgICAgYWRkU3R5bGUoIi5jb3Bvbi1zZWFyY2gtbGlzdHtjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kOnVybChodHRwczovL2FlMDEuYWxpY2RuLmNvbS9rZi9IYTk5Y2Q4NTQ2MjgwNDM1Mjk0M2YzY2Q1MjFlNTVjYjk1LmpwZykgbm8tcmVwZWF0O2Rpc3BsYXk6aW5saW5lLWJsb2NrO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0OjA7Zm9udC1zaXplOjE0cHg7Y29sb3I6I2Y5NWQ1MCAhaW1wb3J0YW50O2hlaWdodDoyM3B4O3BhZGRpbmc6IDAgOHB4IDAgOHB4O2JhY2tncm91bmQtc2l6ZTogMTAwJSAxMDAlO3RleHQtYWxpZ246Y2VudGVyO3RleHQtZGVjb3JhdGlvbjpub25lIWltcG9ydGFudDt6LWluZGV4OjE7fSIpOwogICAgICAgICAgICAgICAgdmFyIGFsbE5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLml0ZW1zIC5KX01vdXNlck9udmVyUmVxLCAjY29udGVudCAucHJvZHVjdCIpOwogICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGFsbE5vZGVzLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdpZDsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5e2dpZCA9IG5vZGUucXVlcnlTZWxlY3RvcigiLnBpYz5hIikuZ2V0QXR0cmlidXRlKCJkYXRhLW5pZCIpO30gY2F0Y2ggKGUpIHsgfQogICAgICAgICAgICAgICAgICAgICAgICB0cnl7Z2lkID0gZ2lkIHx8IG5vZGUuZ2V0QXR0cmlidXRlKCJkYXRhLWlkIik7fSBjYXRjaCAoZSkgeyB9CiAgICAgICAgICAgICAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogIkdFVCIsIHVybDogImh0dHBzOi8vb3Blbi5sZXNpY2x1Yi5jbi9jb3Vwb24vZ2V0X2V4dC8xMDAwNS8xMDAwMi8iICsgZ2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25sb2FkOiBmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gSlNPTi5wYXJzZShyZXMucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyZXMuY29kZSA9PSAyMDAgJiYgcmVzLmRhdGEgIT0gbnVsbCAmJiByZXMuZGF0YS5jb3Vwb24uaXNfdmFsaWQgPT0gdHJ1ZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnNOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5e25hbWUgPSBub2RlLnF1ZXJ5U2VsZWN0b3IoIi5KX0ljb25Nb3JlTmV3IC5KX0NsaWNrU3RhdCIpLmlubmVyVGV4dC50cmltKCk7fSBjYXRjaCAoZSkgeyB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeXtuYW1lID0gbmFtZSB8fCBub2RlLnF1ZXJ5U2VsZWN0b3IoIi5wcm9kdWN0VGl0bGUgYSIpLmdldEF0dHJpYnV0ZSgidGl0bGUiKTt9IGNhdGNoIChlKSB7IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByaWNlID0gcmVzLmRhdGEuY291cG9uLmNvdXBvbl9tb25leTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zTm9kZS5zZXRBdHRyaWJ1dGUoInRpdGxlIiwgIuW9k+WJjeWVhuWTgemihuWIuOWHjyIrcHJpY2UrIuWFgyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnNOb2RlLmRhdGFzZXQudXJsID0gImh0dHBzOi8vY2VudC5udGFvdy5jb20vY291cG9uLmh0bWw/bVF1ZXJ5PSIgKyBlbmNvZGVVUkkobmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc05vZGUuc2V0QXR0cmlidXRlKCJvbmNsaWNrIiwgIm9wZW5VcmwodGhpcyk7Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc05vZGUuY2xhc3NOYW1lID0gImNvcG9uLXNlYXJjaC1saXN0IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zTm9kZS5pbm5lckhUTUwgPSAi77+lIitwcmljZSsi5YWD5LyY5oOg5Yi4IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5e25vZGUucXVlcnlTZWxlY3RvcigiLnBpYy1ib3giKS5hcHBlbmRDaGlsZChpbnNOb2RlKTt9Y2F0Y2ggKGUpIHt9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeXtub2RlLnF1ZXJ5U2VsZWN0b3IoIi5wcm9kdWN0SW1nLXdyYXAiKS5hcHBlbmRDaGlsZChpbnNOb2RlKTt9Y2F0Y2ggKGUpIHt9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KShhbGxOb2Rlc1tpXSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgb3BlblVybCA9IGZ1bmN0aW9uKG5vZGUpewogICAgICAgICAgICAgICAgaWYobm9kZS5kYXRhc2V0LnVybC5pbmRleE9mKCJqYXZhc2NyaXB0OnZvaWQiKSA8IDApCiAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4obm9kZS5kYXRhc2V0LnVybCk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGFkZFN0eWxlKCIuYWMtYnRuOmhvdmVyLC5jb3Bvbi1zZWFyY2gtbGlzdDpob3ZlciwuYWMtYnRuLWNhcnQ6aG92ZXIsLnRtLWRldGFpbEdvLWJ0bjpob3Zlcntjb2xvcjogcmdiYSgyNTUsMjAwLDAsMzApIWltcG9ydGFudDt0ZXh0LXNoYWRvdzogMCAwcHggcmdiYSgyNDIsMzMsNDksMzApLDAgMHB4IDBweCByZ2JhKDI0MiwzMyw0OSwzMCksMCAxcHggMXB4IHJnYmEoMjQyLDMzLDQ5LDMwKSwxcHggMCAxcHggcmdiYSgyNDIsMzMsNDksMzApLC0xcHggMCAxcHggcmdiYSgyNDIsMzMsNDksMzApLDAgMCAxcHggcmdiYSgyNDIsMzMsNDksMzApIWltcG9ydGFudDt9Iik7CiAgICAgICAgICAgIGFkZFN0eWxlKCIuYWMtYnRuOmhvdmVyLC50bS1kZXRhaWxHby1idG46aG92ZXJ7Y29sb3I6IHdoaXRlIWltcG9ydGFudDt9LmFjTW9iaWxlUVJQYW5lbHtkaXNwbGF5OmdyaWQ7fS5hYy1oaWRle2Rpc3BsYXk6bm9uZTt9LmNvdXBvbi1nb2J0bjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOnJlZCFpbXBvcnRhbnQ7fSIpOwoKICAgICAgICAgICAgaWYobG9jYXRpb24uaHJlZi5pbmRleE9mKCJpdGVtLnRhb2Jhby5jb20iKSArIGxvY2F0aW9uLmhyZWYuaW5kZXhPZigiZGV0YWlsLnRtYWxsLmNvbSIpID49IDApIHsKICAgICAgICAgICAgICAgIGFkZFN0eWxlKCIudG0tZGV0YWlsR28tYnRue2xpbmUtaGVpZ2h0OiA0OHB4ICFpbXBvcnRhbnQ7Y3Vyc29yOnBvaW50ZXI7cGFkZGluZzogMHB4IDExcHg7Y29sb3I6I2Y5NWQ1MDtmbG9hdDogcmlnaHQgIWltcG9ydGFudDtmb250LXdlaWdodDogYm9sZDtib3JkZXI6IDFweCBzb2xpZCAjZjk1ZjUyO2ZvbnQtc2l6ZTogMS4zZW07fSIpOwogICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0UXVlcnlTdHJpbmcobmFtZSkgewogICAgICAgICAgICAgICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKCIoXnwmKSIgKyBuYW1lICsgIj0oW14mXSopKCZ8JCkiLCAiaSIpOwogICAgICAgICAgICAgICAgICAgIHZhciByID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHIoMSkubWF0Y2gocmVnKTsKICAgICAgICAgICAgICAgICAgICBpZiAociAhPSBudWxsKSByZXR1cm4gdW5lc2NhcGUoclsyXSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgZ29vZElEID0gZ2V0UXVlcnlTdHJpbmcoImlkIik7CiAgICAgICAgICAgICAgICBxdWVyeURhdGEoZ29vZElEKTsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEF1dG9TdGFydCh0aW1lLCBjc3NTZWxlY3RvciwgZGVhbEZ1bmMpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdGltZXJOb2RlID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY3NzU2VsZWN0b3IpLnN0eWxlLmRpc3BsYXkgPT0gIiIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyTm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVhbEZ1bmMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgdGltZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBhY0J1eVNjcmlwdChyZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdHQgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmFjQnV5U2NyaXB0Q291cG9uIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5yZXRjb2RlID09IDAgJiYgcmVzdWx0LmRhdGEgJiYgcmVzdWx0LmRhdGEuY291cG9uQW1vdW50ICE9IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLmlubmVySFRNTCA9ICIhIityZXN1bHQuZGF0YS5jb3Vwb25BbW91bnQgKyAi5YWD5LyY5oOg5Yi4ISI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5kYXRhc2V0LnVybCA9ICJodHRwczovL2NlbnQubnRhb3cuY29tL2NvdXBvbi5odG1sP21RdWVyeT0iICsgZW5jb2RlVVJJKGdvb2RUaXRsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuaW5uZXJIVE1MID0gIuaXoOS8mOaDoOaIluW3sumihuS8mOaDoCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoInN0eWxlIiwgImZvbnQtc2l6ZTogMTFweDtjb2xvcjojNmM2YzZjIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlZW50ZXIiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmFjTW9iaWxlUVJQYW5lbCIpLmNsYXNzTGlzdC5yZW1vdmUoImFjLWhpZGUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWxlYXZlIiwgZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuYWNNb2JpbGVRUlBhbmVsIikuY2xhc3NMaXN0LmFkZCgiYWMtaGlkZSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuYWNNb2JpbGVRUlBhbmVsIikuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VlbnRlciIsIGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmFjTW9iaWxlUVJQYW5lbCIpLmNsYXNzTGlzdC5yZW1vdmUoImFjLWhpZGUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmFjTW9iaWxlUVJQYW5lbCIpLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbGVhdmUiLCBmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5hY01vYmlsZVFSUGFuZWwiKS5jbGFzc0xpc3QuYWRkKCJhYy1oaWRlIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciBxID0gd2luZG93LmJ0b2EoZ29vZElEKS5yZXBsYWNlKC89L2csIi0iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHF1cmwgPSAiaHR0cHM6Ly9udGFvdy5jb20vZGV0YWlscy5odG1sP2F1Y3Rpb25JZD0iICsgcTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgaW1nVXJsID0gImh0dHA6Ly9hcGkuazc4MC5jb206ODgvP2FwcD1xci5nZXQmbGV2ZWw9SCZzaXplPTgmZGF0YT0iICsgZW5jb2RlVVJJQ29tcG9uZW50KHF1cmwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltZ1VybCA9ICJodHRwczovL3R1amlkdS5jb20vc2hvcC9nZW5TUFFSQ29kZT91cmw9IiArIGVuY29kZVVSSUNvbXBvbmVudChyZXN1bHQuZGF0YS5jb3Vwb25VcmwpKyImdD0iK25ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaW1nLmFjTW9iaWxlUVJDb2RlIikuc3JjID0gaW1nVXJsOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgMTIwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHF1ZXJ5RGF0YShnb29kSUQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgY2dvb2RUaXRsZSA9IGRvY3VtZW50LnRpdGxlKyIiOwogICAgICAgICAgICAgICAgICAgIHZhciByZXQgPSBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogIkdFVCIsIHVybDogImh0dHA6Ly9nbS5udGFvdy5jb20vP29wPTY2JmlpZD0iICsgZ29vZElELAogICAgICAgICAgICAgICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IEpTT04ucGFyc2UocmVzLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY0J1eVNjcmlwdChyZXMpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBBdXRvU3RhcnQoMTAwLCAiLnRiLXNrdSwgLnRiLWFjdGlvbiIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgVGl0bGVOb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZGl2I0pfVGl0bGUgaDMsIGRpdi50Yi1kZXRhaWwtaGQgaDEiKTsKICAgICAgICAgICAgICAgICAgICBnb29kVGl0bGUgPSBUaXRsZU5vZGUuZmlyc3RDaGlsZC5ub2RlVmFsdWUudHJpbSgpOwogICAgICAgICAgICAgICAgICAgIGlmKGdvb2RUaXRsZSA9PSAiIil7CiAgICAgICAgICAgICAgICAgICAgICAgIGdvb2RUaXRsZSA9IFRpdGxlTm9kZS5jaGlsZE5vZGVzWzFdLmlubmVySFRNTC50cmltKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBxdWVyeVNpbWlsYXIgPSAiaHR0cHM6Ly9jZW50Lm50YW93LmNvbS9jb3Vwb24uaHRtbD9tUXVlcnk9IiArIGVuY29kZVVSSShnb29kVGl0bGUpOwogICAgICAgICAgICAgICAgICAgIHZhciBxdWVyeUluU2l0ZSA9ICJodHRwczovL3MudGFvYmFvLmNvbS9zZWFyY2g/cT0iICsgZW5jb2RlVVJJKGdvb2RUaXRsZSkgKyAiJiI7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZhTm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImRpdiNKX1RpdGxlIHAudGItc3VidGl0bGUsIGRpdi50Yi1kZXRhaWwtaGQgaDEiKTsKICAgICAgICAgICAgICAgICAgICB2YXIgaW5zTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgICAgICAgICAgICAgIGluc05vZGUuc3R5bGUgPSAiZm9udC1zaXplOiAzMnB4O2ZvbnQtd2VpZ2h0OiBib2xkO2ZvbnQtZmFtaWx5Om1pY3Jvc29mdCB5YWhlaTtwb3NpdGlvbjpyZWxhdGl2ZTsiOwogICAgICAgICAgICAgICAgICAgIHZhciBodG1sVGV4dCA9ICI8c3BhbiBjbGFzcz0nYWNCdXlTY3JpcHRDb3Vwb24gYWMtYnRuJyBkYXRhLXVybD0namF2YXNjcmlwdDp2b2lkKDApOycgb25jbGljaz0nb3BlblVybCh0aGlzKTsnIHN0eWxlPSdjb2xvcjogI2Y5NWY1MjtjdXJzb3I6cG9pbnRlcjsnPj3mn6Xmib7kuK09PC9zcGFuPiI7CgogICAgICAgICAgICAgICAgICAgIC8vIGh0bWxUZXh0ICs9ICI8c3Bhbj48aW1nIGNsYXNzPSdhY01vYmlsZVFSQ29kZScgc3JjPSdkYXRhOmltYWdlL2pwZztiYXNlNjQsLzlqLzRRTVpSJz48L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICBodG1sVGV4dCArPSBgPHNwYW4gY2xhc3M9J2FjTW9iaWxlUVJQYW5lbCBhYy1oaWRlJyBzdHlsZT0ncG9zaXRpb246IGFic29sdXRlO2xlZnQ6IDA7dG9wOiAzcmVtO3otaW5kZXg6IDEwMDAwMjtiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtib3JkZXI6MXB4IHNvbGlkIGRlZXBwaW5rOyc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9J2FjTW9iaWxlUVJDb2RlJyBzdHlsZT0ncGFkZGluZzo1cHggMTBweDttYXgtd2lkdGg6MTM4cHg7bWFyZ2luLWxlZnQ6dW5zZXQ7JyBzcmM9J2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBSzhBQUFDdkNBWUFBQUNMa281MUFBQVFXa2xFUVZSNEFlMWRDM0FWMVJuK0xnUXhnR0FrV0F6QlY0dUFEOGgwU25SMGxFNGZEb1pIb1lScXFXVlFXanRqY1dDS3RlTlVjSENzSFcxRE84WFdWcXNnRDJIUU1WcUtJbGp3QllWb0FRSEJBQlZCVUI2VkNBZ0VDTm5PdVp1N2QvYysvZ3VIZTNaUGttOW5MdmZzK2MvL09OLy8zWFBQL251enhBQTRhT2FINCtoTklSYUxhYzNjaEQ5ZG0xb1RBS0E3ZDExL0p2VGFtREJLbTBRZ0RBUkkzakJRcGc4akNKQzhSbUNsMFRBUUlIbkRRSmsrakNCQThocUJsVWJEUUlEa0RRTmwrakNDUUlGa05lenlqUlJMMktXZHNPZXVPejhUY1pxd0tlVldra200Y09XVmtLUE1hZ1JJWHF2VHcrQWtCRWhlQ1IzS3JFYUE1TFU2UFF4T1FvRGtsZENoekdvRVNGNnIwOFBnSkFURVVwbWtLSlV3SkQxSlpxSkVveHVucENmRnFhc240U0xabFBSTXlFekVJdUVwellFcnI0UU9aVllqUVBKYW5SNEdKeUZBOGtyb1VHWTFBaVN2MWVsaGNCSUNKSytFRG1WV0kwRHlXcDBlQmljaG9GMHFrNHkyQkpsVXZqRlJMdEsxS2VsSmMyZ0pPZUxLMnhLeTJFcm5RUEsyMHNTM2hHbVR2QzBoaTYxMERpUnZLMDE4UzVnMnlkc1NzdGhLNTBEeXR0TEV0NFJwczFTVzV5eWFLRStac0pubmFVZGlqaXR2SkxEVGFUNFFJSG56Z1NKdFJJSUF5UnNKN0hTYUR3UkkzbnlnU0J1UklFRHlSZ0k3bmVZREFaSTNIeWpTUmlRSWFKZktXTDRKTDEvU0w4ZWtLRXpreUlSTmFRNlNqQ3V2aEE1bFZpTkE4bHFkSGdZbklVRHlTdWhRWmpVQ0pLL1Y2V0Z3RWdJa3I0UU9aVllqUVBKYW5SNEdKeUVnbHNwMFN6U1NRNXRrVXRsSG1yc0pQUWtYWFgrU1RVa216VjNTQzF2R2xUZHN4T2t2YndpUXZIbURrb2JDUm9Ea0RSdHgrc3NiQWlSdjNxQ2tvYkFSSUhuRFJweis4b1lBeVpzM0tHa29iQVFLcERKTTJNR0U3VThxQ1VtNFNIcTZjNUQ4NmRxVTlNTDJKOFdpSytQS3E0c2M5U0pIZ09TTlBBVU1RQmNCa2xjWE9lcEZqZ0RKRzNrS0dJQXVBaVN2TG5MVWl4d0JramZ5RkRBQVhRUmlBSnhzeWxJNXhVUzVLRnNjdWZxbE9IUHBacE5MODJ2cC9ySmhZcXBmRjArdXZLWXlRcnZHRVNCNWpVTk1CNllRSUhsTklVdTd4aEVnZVkxRFRBZW1FQ0I1VFNGTHU4WVJJSG1OUTB3SHBoQVEvd0RUbEZNZHU3cmxGTW1YYmpsTVYwK0tKV3laQ1R4MTU2Q0xKMWRlWGNTcEZ6a0NKRy9rS1dBQXVnZzBtMjJEN2dUUFNtL2pmNEhxTjRDYUQ0QzlCNEJqeCtDY09vVk5zYXV5bW5XdXJNd3Frd1FiWTFmaHFBUHN4UW5VNEFpcVVZZU5PQ2FwdEhwWnM3azliR0tQbG0ydjFRUG5ZRmZsTDRDWDNnUWFUa1ZDa2dZNGVBbDFtSWlkMk9VY2p5U0dzSnhteTRQeUwrV2Q1RTNKVUg5MHdDSmNBVVZnRzQ3ZE9JRWU2eFlBL1h2WkVJNlJHRWhlRFZoVFFWT0VYWVVyVVdvSmNiMHBsVjRJckhvRzZOSE42MnBKamRROCtPZW12Zkw2amVTckxRWVRVMThFK1Qwa2YybWVSdDBQdkxBc3JkdUdqaGR3QUtPd0xTMFVhWDdhcEFnNUQxS2NhUlAyZGJEYWtBQkRYWnlwUGE2bHgzQVU0V29VV2hwZE5HR1J2QW5jVlZVaG9vdXpSQWpTZXdGaUdJRWlhVWlyazdGVWxrajV1NXNUTGZlOVV5RXdjd3JRWHVQQ2Jmb0NZTWxxWU5TM2dURVZ3SzU5d0pNdkFXdHJrejR1NkF6c1hnUk0rUnZ3dXpuSi9sdXVCMTc1QTNEdEhVRE5wbVEvZ0hKMENweTM5aE9TTjhHQWZRY1NMZmRkN2ZzdXZBQW9iQi9zVjJjWGR3ZTZkZ21TMFQ4cW9hTStBQmNWQTlmM0E4WU9BYjcvSytEVmxjQ2o0NEUrbHdEdENvRGJid0hLZlhYajdsMWRTNy85dVZ0YkhqM1pzOXdOVEpjSEJrQTBQREJTL3hqcThGSGdwcDk1NGtEano3OEVmalFJR0RBMjBKMTJNdU9mZ0hvcG9yLytPRkExQVZpNkdyajBJcURYeFVBYjlRRXBjdDhUeXVkMWNGdVhYQVNjSDF4cFk4ai9CVzNDYlhOODUwYzVqS3pWSHdjKzJRdFUzQUFVZFFadS9UV1EyRFpNZXk3enRtSDBBMm5iQmxJM21DenhXV1ZTQ1VPM1JDUFpESVlXUEpQOEJVZGFkbmIxVjRFNVU1TTNHZFJxcXc2MXNuL3ZYbURySjhHQTM5c0VWRXdFYW5jRyt3RU1HREFBVHMzR1FMK0VweTVtdW5xQndNN2dSUEluelk4cmJ6YVFPNXdMdEcyYldhb3U0dFNlK1B6emdGT05HY1k0d0pGalFPRzU3c1ZYUVZ0Zy9oTGd0cHZkc1kvZjYyNGJNbWg2WFJOL0NOU2ZjQW51ZGJMaFI0RGs5YVBoYnkrc0FtNHM4L2NrMjIzYkFHM2FBUHNXSi92OExVWG9QajhBZG53RzNQa3dzSGs3TU9UR0pIbXZ1d2E0ckFUNGNJZXIxYUU5VUhZRlVMc0QrUHlRMjNkSjk3UTlyOThGMjd4Z3k4NkJwLy9obHJ0U1I2aHYvY25qQUxVeXoxbnNFaTUxak9NQVh4eDJlMSt2Y1lsKzllWEJVVyt0QlViYzUvWXAyWVo1d0FOL1RkN2hlK3dlNE82UlFSMmVCUkRneWh1QXczZnkzR3UrRTErelh5L2dOM2U3SGZ2cmdFZG4rWVFabXQyS2dDZnZCNFlQekNCazE5a2dRUEtlS1hyalI3bjcyVFcxd0IxRGdJZWZjUysrTXRucFdBaTg4eVRROHl2QUcydUFiMzQ5T1VxVnlMNWI3cDVmV3VLK3F3L0d3Uy9kdGlxVjhSQVJJSGxGZUZLRUE2NEV4ZzRHSG4vZXZRQmIrWGZnd1o4QTkvNHBaV0RUcWJwbysvMGNZTzBXNEJ0OWcrUlZOeTZXVEEvcVRiNHplSzcwZVdSRlFKdThVZ2tqcTdjY0F0MlNTUTZ6V2NXU3Z6UWxkYWZzdVllQTNmdUJoNTUyOTdSUHZBaE11QTFZL1FIdy9ML1NWT0lkVDczczlnKytBVGhhNzFZUVZJL2E4OTcvRjFkMmVRa3dlNnE3NTEzK0g3ZnY3a3BnK0UxdVcvaFhtb051am5SdDZ1b0oweE5GMnVRVnJiWTBZYStld0l1UHViZUxiNzRuZVRGMjMzUzNTdkRzZys1dDVObXZxcC8rcDg5ZTNRYXUvQmF3Yml0dzZJZ3JyenNFckZ6dnRnODFiUlZVdFNIUnh6MXlPbzRwUGZ4VldRb2dnVlAxRzRVSnR3STFNNER1RndCREo3bXJiR0xRc2VQQXNFa3U0ZFNQZU5UTkNGVUM4eC9xcHNUVXV3QjFzMkxhWEpmYzZrS3Y3MlZ1eGNJL050RldwYml5WHNDK3VrUVAzek1oNEFoSDArTlAxVklTeWtzSXhZai9nTC95T3h3SDVjblh4R21PczcvT2NSb2JIV2ZoMjQ1ejhiQ2t6RDlPdGR0ZDd6Z1BQT0U0aDQ4Nnpza0dkM3poalk0VHU5Wnhaci9pdXBtK3dEMVg0d2ROY01mdDNPTTRiNjExblBjMnUyTTJiWGZQUDl6aCtoMy91NkRQQVdNREllYzYwYzJiWkZleXFhc24yWlJrM0RaaytrU3J2aE1Od0d1cjNKOHl2ck1PYU15d0hVam9ubXdBSHA0QnpGd0UzRFVjdU9acmdGcVYxYkZpdlh2QjlzZjV5UzNGNG4rN3Q0Qi9PdHo5MFk2cU1DeDdMMkhOclIxUGZRcVl2elRaeDFZYUFqSDFhVW5yYmVyUTNmQm5zNWVyWHdnRkptSUorTHYyVHZkUDNITUZHYVZjVlR2VUZ1WTBEMTNNQXJpaytKSnM2dXFsdURqdFUrNTVUeHNxRHJRTmdRTHBreVFGYStKVEpzVml3cDgwditZaWt6Q1Q1cUNMcDAxNlhIbWxERk5tTlFLOFlQT2xSLzI0OFUwY3dvZW94NlU0Qjk5QkY3U0w2SzhYanFFUnIrRWdQc05KbEtFRHJrT25pQ0x4QVdSWmsrUnRTc2h4TkdJNGFyRVlCNzBVOVVVaHF0RUx2WEd1MXhkRzQxMGNRU1cyWWlkT2VPNXVSekdlUlYvd3E5S0RoRmdrb0ppUHp3UEVWZjJiY1F3VnFNVmVuRXdNTS82K0RmVVlqTm9BY1pYVHVmZ2ZscUxwdDc3R28yZ2VEdmhCYnNxVCtvck9kSHlFNC9FbjFhaXZjZE5ISFJvd0FsdXhIdzFwcmxROWMwbVdHTk1HdDVJT2tyY3AwZHVSL1VtTWIrTXd4bU9IVWZxZWhJTWY0eVB4c2FaYlVOOUthSGw2MHhUM3ZGSlpSREl2NlVtbEhWMDkzVmo4ZXJuVzFSbllqNTQ0QjVOUmdyWjV2blE2QVFjVHNRT0w4SVUvcExUMnNuZFg1ZTFtalpTSE5NZStEbDA5bjRremFrcitSUEtla1pkbVByaXQrcHMwNFZCZjIxT3hHMHR4RUxmZ2ZMVFBFNEdQb0JFdm93N3JjRlR3VGxFbUJFamVKbFNLdTUzZTQwTlg0a3VvVnhTSGV1QTBqeVFDSkc4VEZ1cVpDQXNYTGt3aTA5UXFLaXJDdUhIajBMOS9mOVRXMXFKMzc5NVlzR0FCRmkxYWhNYkdYSnVOTkhPQmpuYnQybUhreUpFWU5td1kxcTlmajM3OSttSEZpaFdZT1hNbWpoeHArdDJ2VDBOdEwzZ0VFVkNJWkh4SlAzSFRsV1h6cGZxbFE5S1RaSkpOdjJ6RGhnMU9RVUZCQUlmeThuSm41ODZkOFdFVkZSVk9MQlp6NXMyYjV6UTJOanJWMWRWT3AwNmRBdU9sT0ZKbHhjWEZ6dkxseStPMnAwMmJGcmN6YnR5NCtQbm16WnVkUG4zNmFOdE85V1hEdVIvcjFQWlp4SmVadU1xZ2lVTUtWUEluNlVreXlXYXFyTEt5MGlOTVNVbUo4K21ubjhhSGJOdTJ6U1Ayd0lFRFBiVlpzMlo1NDZVWVVtWHFRN0JreVpLNG5WT25UbmxFN2RpeG8zUGd3SUY0ZjIxdHJkTzVjMmN0KzZuK2JEajNRTXZRT0l2NFNONEVucnQyN1hKS1MwdmpoS21xcWtwME8zUG56dlZJcEFoV1gxOGZsNmtWdUt5c3pKT2RiaElHRFJyazJkNnpaMDk4UlUvb0xsdTJ6Sk5ObWpUcGpHMG43TmoyN2swcVEwTTNWdmtTTzdpOUNKeXBFb2JPUzVYRHNyMENEbEpPc3VuazZwZGlUSEdCSGoxNnhQZXlwYVdsR0R4NHNDZmV2bjI3MTFaNzBYMzc5c1hQbFczL3VNU2c3dDI3bzZ5c0xQNHFMaTVPZEh2dlE0WU04ZG9mZi94eDRIKzg4ZnNhT25Sb2ZOejc3NytmRmJOYzg4OG05d0xJWXlPYkw5VXZIYnA2MnVTVmdtbk9NblhSdEhyMWFxeFpzd1lORGU2ZHJ0U0xKLys1SW1ycU1XYk1HS3hkdXpadW82S2lJbFVNdjg3Um84RVNXZUpjK2Q2eVpVdGNWOFhFSXgwQlZodlNNVUZKU1FsR2p4Nk5SeDU1QkNOR2pNQzJiY0gveUtSTGx5NmVWbUZoSWNyTG14NGVBcUNtcGdaVlZWWG8yYk1uNnVycU1IdjJiRzlzWWx4YjN3UDh1bmJ0R3RkWGV1cllzR0VEcGt5Wmd1cnFhbXpjR0h3aXBHZUlqVGdDNnNsYldkZDBhYmxYWDVrNmgyUlR4MTR1SFNsT0taYm1vcGRyL3RuazB2eXk2ZVRxbC9ETXBadE5Mc1hKYlVNMjFOaHZQUUlrci9VcFlvRFpFQ0I1c3lIRGZ1c1JNSExCSnUxOXBEMk1DVDBwQTFJc2twNnVUTmVmcnA1dW5DYjBwRGxJZVpka1hIbE5aSW8yUTBHQTVBMEZaam94Z1FESmF3SlYyZ3dGQVpJM0ZKanB4QVFDSks4SlZHa3pGQVJJM2xCZ3BoTVRDSWhQaVRUaE1HeWJVb2xHaWtVcTBVaDZra3lLUmZJbjZVbitKSnVTbmlTektSYXV2RkttS0xNYUFaTFg2dlF3T0FrQmtsZENoektyRVNCNXJVNFBnNU1RSUhrbGRDaXpHZ0dTMStyME1EZ0pBZkV2S1NSRm0yUTJsWVJNNENMTlR5cGROUmM5WGN5NDh1b2lSNzNJRVNCNUkwOEJBOUJGZ09UVlJZNTZrU05BOGthZUFnYWdpd0RKcTRzYzlTSkhnT1NOUEFVTVFCY0I4UTh3cFZLTHJrTmRQYWtrSk5uVTFaTnNTakpkekpwTG5OTGNwVG1Zd0lVcnI1UU55cXhHZ09TMU9qME1Ua0tBNUpYUW9jeHFCRWhlcTlQRDRDUUVTRjRKSGNxc1JvRGt0VG85REU1Q1FDeVZTWXBTV1VUU2syUzY1UlRKcHE1TWlrV2F1eVRUalVYWHBxNmVicHk2bUVsNmtvd3JyMjZtcUJjNUFpUnY1Q2xnQUxvSWtMeTZ5RkV2Y2dSSTNzaFR3QUIwRVNCNWRaR2pYdVFJa0x5UnA0QUI2Q0tnWFNyVGRXaVRubFNHa2VLVTlNSXVUMGx4NnNwMDU2YzdkMTA5cnJ5NkdhWmU1QWlRdkpHbmdBSG9Ja0R5NmlKSHZjZ1JJSGtqVHdFRDBFV0E1TlZGam5xUkkwRHlScDRDQnFDTFFLc3VsVW1nU2VVYnFaUWsyZFRWazJ5YWlGUHlKODFCaXNXRVRhNjhFcXFVV1kwQXlXdDFlaGljaEFESks2RkRtZFVJa0x4V3A0ZkJTUWlRdkJJNmxGbU5BTWxyZFhvWW5JU0FkcWxNS3BsSURzT1dTWEhxbG5aTXpDSHNXTUwySitWQkYwK3V2THJJVVM5eUJFamV5RlBBQUhRUklIbDFrYU5lNUFpUXZKR25nQUhvSWtEeTZpSkh2Y2dSSUhralR3RUQwRVdneGY4UG1Mb2xJYW0wSTltVTlLUWtTVFlsUFYxL2trM2RXQ1NiSm1SY2VVMmdTcHVoSUVEeWhnSXpuWmhBZ09RMWdTcHRob0lBeVJzS3pIUmlBZ0dTMXdTcXRCa0tBaVJ2S0REVGlRa0UvZytyYU1pTGhac04wUUFBQUFCSlJVNUVya0pnZ2c9PSc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSdmb250LXNpemU6IDE2cHg7dGV4dC1hbGlnbjogY2VudGVyO3BhZGRpbmctYm90dG9tOiA4cHg7Jz7miYvmnLrmt5jlrp3nm7TmjqXmiavnoIE8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5gOwoKICAgICAgICAgICAgICAgICAgICBodG1sVGV4dCArPSAiJm5ic3A7Jm5ic3A7PHNwYW4gY2xhc3M9J2FjLWJ0bicgZGF0YS11cmw9IiArIHF1ZXJ5SW5TaXRlICArICIgb25jbGljaz0nb3BlblVybCh0aGlzKTsnIHN0eWxlPSdjb2xvcjogI2Y5NWY1MjtjdXJzb3I6cG9pbnRlcjsnPlvnq5nlhoXmkJxdPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbFRleHQgKz0gIiZuYnNwOyZuYnNwOzxzcGFuIGNsYXNzPSdhYy1idG4nIGRhdGEtdXJsPSIgKyBxdWVyeVNpbWlsYXIgKyAiIG9uY2xpY2s9J29wZW5VcmwodGhpcyk7JyBzdHlsZT0nY29sb3I6ICNmOTVmNTI7Y3Vyc29yOnBvaW50ZXI7Jz5b5om+55u45Ly8XTwvc3Bhbj4iOwogICAgICAgICAgICAgICAgICAgIGluc05vZGUuaW5uZXJIVE1MID0gaHRtbFRleHQ7CiAgICAgICAgICAgICAgICAgICAgZmFOb2RlLmFwcGVuZENoaWxkKGluc05vZGUpOwogICAgICAgICAgICAgICAgICAgIHZhciBodG1sVEIgPSAiPHNwYW4gY2xhc3M9J2FjLWJ0biBjb3Vwb24tZ29idG4nIHRpdGxlPSfojrflj5bkvJjmg6DliLgnIHN0eWxlPSdwYWRkaW5nOiA2cHggMTJweDtsaW5lLWhlaWdodDoyNnB4O3RleHQtYWxpZ246IGNlbnRlcjtkaXNwbGF5OiBpbmxpbmUtYmxvY2s7bWFyZ2luLWJvdHRvbTogMDtmb250LXNpemU6IDE2cHg7Zm9udC13ZWlnaHQ6IG5vcm1hbDtoZWlnaHQ6MjZweDt3aGl0ZS1zcGFjZTogbm93cmFwO3ZlcnRpY2FsLWFsaWduOiBtaWRkbGU7LW1zLXRvdWNoLWFjdGlvbjogbWFuaXB1bGF0aW9uO3RvdWNoLWFjdGlvbjogbWFuaXB1bGF0aW9uO2N1cnNvcjogcG9pbnRlcjstd2Via2l0LXVzZXItc2VsZWN0OiBub25lOy1tb3otdXNlci1zZWxlY3Q6IG5vbmU7LW1zLXVzZXItc2VsZWN0OiBub25lO3VzZXItc2VsZWN0OiBub25lO2JhY2tncm91bmQtaW1hZ2U6IG5vbmU7Ym9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLXJhZGl1czoycHg7Y29sb3I6ICNmZmY7YmFja2dyb3VuZC1jb2xvcjogI0RGMjMxQzttYXJnaW4tbGVmdDoxMHB4JyBkYXRhLXVybD0naHR0cHM6Ly9jZW50Lm50YW93LmNvbS9jb3Vwb24uaHRtbD9tUXVlcnk9IitlbmNvZGVVUkkoZ29vZFRpdGxlKSsiJyBvbmNsaWNrPSdvcGVuVXJsKHRoaXMpOyc+6I635Y+W5LyY5oOg5Yi4PC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWxUTUFMTCA9ICI8ZGl2IGNsYXNzPSdhYy1idG4gY291cG9uLWdvYnRuJyB0aXRsZT0n6I635Y+W5LyY5oOg5Yi4JyBjbGFzcz0ndGItYWN0aW9uJyBzdHlsZT0nbWFyZ2luLXRvcDoxMHB4O21hcmdpbi1sZWZ0OiA2NnB4Oyc+PHNwYW4gc3R5bGU9J2Rpc3BsYXk6IGlubGluZS1ibG9jaztib3JkZXItcmFkaXVzOjJweDtjb2xvcjogI2ZmZjtiYWNrZ3JvdW5kLWNvbG9yOiAjREYyMzFDO3BhZGRpbmc6IDZweCAxMnB4O21hcmdpbi1ib3R0b206IDA7Zm9udC1zaXplOiAxNnB4O2ZvbnQtd2VpZ2h0OiBub3JtYWw7aGVpZ2h0OjI2cHg7bGluZS1oZWlnaHQ6MjZweDt3aWR0aDoxNTZweDt0ZXh0LWFsaWduOiBjZW50ZXI7d2hpdGUtc3BhY2U6IG5vd3JhcDt2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOy1tcy10b3VjaC1hY3Rpb246IG1hbmlwdWxhdGlvbjt0b3VjaC1hY3Rpb246IG1hbmlwdWxhdGlvbjtjdXJzb3I6IHBvaW50ZXI7LXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTstbW96LXVzZXItc2VsZWN0OiBub25lOy1tcy11c2VyLXNlbGVjdDogbm9uZTt1c2VyLXNlbGVjdDogbm9uZTtiYWNrZ3JvdW5kLWltYWdlOiBub25lO2JvcmRlcjogMXB4IHNvbGlkIHRyYW5zcGFyZW50OycgZGF0YS11cmw9J2h0dHBzOi8vY2VudC5udGFvdy5jb20vY291cG9uLmh0bWw/bVF1ZXJ5PSIrZW5jb2RlVVJJKGdvb2RUaXRsZSkrIicgb25jbGljaz0nb3BlblVybCh0aGlzKTsnPuiOt+WPluS8mOaDoOWIuDwvc3Bhbj48L2Rpdj4iOwogICAgICAgICAgICAgICAgICAgIHZhciBhbm9JbnNOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgICAgICAgICAgICAgYW5vSW5zTm9kZS5zdHlsZSA9ICJmb250LXdlaWdodDogYm9sZDtmb250LWZhbWlseTptaWNyb3NvZnQgeWFoZWk7IjsKICAgICAgICAgICAgICAgICAgICBpZihsb2NhdGlvbi5ob3N0LmluZGV4T2YoJ3Rhb2JhbycpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGFub0luc05vZGUuaW5uZXJIVE1MID0gaHRtbFRCOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGItYWN0aW9uJykuYXBwZW5kKGFub0luc05vZGUpOwogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBhbm9JbnNOb2RlLmlubmVySFRNTCA9IGh0bWxUTUFMTDsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRiLXNrdScpLmFwcGVuZChhbm9JbnNOb2RlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfWVsc2UgaWYobG9jYXRpb24uaHJlZi5pbmRleE9mKCJzLnRhb2Jhby5jb20vc2VhcmNoIikgPiAwIHx8IGxvY2F0aW9uLmhyZWYuaW5kZXhPZigibGlzdC50bWFsbC5jb20vc2VhcmNoX3Byb2R1Y3QiKSA+IDApewogICAgICAgICAgICAgICAgdmFyIHR0Y291bnRlciA9IDAsIHR0bWF4ID0gMjA7CiAgICAgICAgICAgICAgICB2YXIgZ3djb3VudGVyID0gMCwgZ3dtYXggPSAxMDA7CiAgICAgICAgICAgICAgICB2YXIgdHQgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLml0ZW1zIC5pdGVtLWFkIik7CiAgICAgICAgICAgICAgICAgICAgdmFyIGFsbE5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLml0ZW1zIC5KX01vdXNlck9udmVyUmVxLCAjY29udGVudCAucHJvZHVjdCIpOwogICAgICAgICAgICAgICAgICAgIGlmKGFsbE5vZGVzICE9IG51bGwgJiYgKG5vZGVzLmxlbmd0aCA+IDAgfHwgYWxsTm9kZXMubGVuZ3RoID4gMCkpewogICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHR0KTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIui9veWFpeS6hiIpOwogICAgICAgICAgICAgICAgICAgICAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJzY3JpcHRbc3JjKj0nZ3dkJ10iKSA9PSBudWxsKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRTQygpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGk8bm9kZXMubGVuZ3RoOyBpKyspewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXNbaV0uY2xhc3NOYW1lID0gIml0ZW0gSl9Nb3VzZXJPbnZlclJlcSAiOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHR0Y291bnRlcisrOwogICAgICAgICAgICAgICAgICAgIGlmKHR0Y291bnRlciA+PSB0dG1heCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodHQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIDIwMCk7CiAgICAgICAgICAgIH0gZWxzZSBpZihsb2NhdGlvbi5ob3N0LmluZGV4T2YoInVsYW5kIikgPj0gMCl7CiAgICAgICAgICAgICAgICBhZGRTdHlsZSgiI0pfTU1SRURCT1hfTUFTS3tkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9Iik7CiAgICAgICAgICAgIH0gZWxzZSBpZihsb2NhdGlvbi5ocmVmLmluZGV4T2YoImNhcnQudGFvYmFvLmNvbSIpID49IDApIHsKICAgICAgICAgICAgICAgIHNldEludGVydmFsKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI0pfT3JkZXJMaXN0IC5pdGVtLWJhc2ljLWluZm8iKSAhPSBudWxsKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWxDYXJ0ID0gIjxzcGFuIGNsYXNzPSdhYy1idG4tY2FydCcgZGF0YS11cmw9J2h0dHBzOi8vY2VudC5udGFvdy5jb20vY291cG9uLmh0bWw/bVF1ZXJ5PUFBQUFBQUFBQUEnIG9uY2xpY2s9J29wZW5VcmwodGhpcyk7JyBzdHlsZT0nY3Vyc29yOnBvaW50ZXI7MjJweCAhaW1wb3J0YW50O2NvbG9yOiNmOTVmNTI7Zm9udC1zaXplOjE2cHg7Ym9yZGVyLXJhZGl1czoxcHg7cGFkZGluZzoycHg7Ym9yZGVyLWNvbG9yOiNmZWEzNTY7Ym9yZGVyLXN0eWxlOiBkYXNoZWQ7Jz7mn6Xmib7kvJjmg6Dkv6Hmga88L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLm9yZGVyLWNvbnRlbnQgLml0ZW0tYmFzaWMtaW5mbyIpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IoaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGl0bGUgPSBub2Rlc1tpXS5xdWVyeVNlbGVjdG9yKCJhIikuZ2V0QXR0cmlidXRlKCJ0aXRsZSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGl0bGUgIT0gbnVsbCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFkZEhUTUxUZXh0ID0gaHRtbENhcnQucmVwbGFjZSgiQUFBQUFBQUFBQSIsIGVuY29kZVVSSSh0aXRsZSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnNOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zTm9kZS5jbGFzc05hbWUgPSAiYWMtdGItYWRkIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnNOb2RlLnN0eWxlID0gImRpc3BsYXk6IGlubGluZS1ibG9jayI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zTm9kZS5pbm5lckhUTUwgPSBhZGRIVE1MVGV4dDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihub2Rlc1tpXS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoIi5pdGVtLWljb25zIikgJiYgbm9kZXNbaV0ucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCIuaXRlbS1pY29ucyIpLnF1ZXJ5U2VsZWN0b3IoIi5hYy10Yi1hZGQiKSA9PSBudWxsKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXNbaV0ucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCIuaXRlbS1pY29ucyIpLmFwcGVuZENoaWxkKGluc05vZGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgICB9CiAgICAgICAgfSkoKTsKICAgIH0KfSwgNTApOwo="}]},{"name":"贴吧全能助手","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":["*://tieba.baidu.com/f/fdir*","*://tieba.baidu.com/f/search*"],"orig_includes":["*://tieba.baidu.com/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-body","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"confVer":"s[1]","definedEvent":"sclick,click,1,0,1","modules":"s{\"rmBottom\":2,\"ads_hide\":1,\"ads_thread_list\":2,\"audio_download\":2,\"block_post\":1,\"hide_loops\":1,\"icon_hide\":2,\"no_text_link\":1,\"orange\":1,\"quote\":1,\"quote_lzl\":1,\"real_url\":1,\"rmImgFav\":1,\"rmSaveFace\":1,\"rm_img_view\":2,\"save_face\":1}","repairDefinedEvent":"bfalse"},"ts":1606985373147},"enabled":true,"position":3,"file_url":"https://greasyfork.org/scripts/26992-%E8%B4%B4%E5%90%A7%E5%85%A8%E8%83%BD%E5%8A%A9%E6%89%8B/code/%E8%B4%B4%E5%90%A7%E5%85%A8%E8%83%BD%E5%8A%A9%E6%89%8B.user.js","uuid":"02933cba-6635-430a-acbd-6cddf0a09216","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDotLTlkKflhajog73liqnmiYsKLy8gQG5hbWVzcGFjZSAgICBodHRwOi8vdGFtcGVybW9ua2V5Lm5ldC8KLy8gQHZlcnNpb24gICAgICAyLjEKLy8gQGRlc2NyaXB0aW9uICDjgJDoo4Xov5nkuIDkuKrohJrmnKzlsLHlpJ/kuobvvZ7lj6/og73mmK/kvaDpgYfliLDnmoTmnIDlpb3nlKjnmoTotLTlkKflop7lvLrohJrmnKzjgJHvvIznmb7luqbotLTlkKcgdGllYmEuYmFpZHUuY29tIOeci+i0tO+8iOWMheaLrOalvOS4realvO+8ieaXoOmhu+eZu+W9le+8jOWujOWFqOWOu+mZpOaJsOecvOWSjOWQhOexu+W5v+WRiuaooeWdl++8jOWFqOmdoueyvueugOW5tue+juWMluWQhOenjei0tOWQp+mhtemdou+8jOWOu+mZpOi0tOWQp+W4luWtkOmHjOmTvuaOpeeahOi3s+i9rO+8jOaMieWPkeW4luaXtumXtOaOkuW6j++8jOafpeeci+i0tOWQp+eUqOaIt+WPkeiogOiusOW9le+8jOi0tOWtkOWFs+mUruWtl+Wxj+iUve+8jOenu+mZpOS8muWRmOW9qeWQje+8jOebtOaOpeWcqOW9k+WJjemhtemdouafpeeci+WOn+Wbvu+8jOWPr+e8qeaUvu+8jOWPr+WkmuW8gO+8jOWPr+aLluaLvQovLyBAYXV0aG9yICAgICAgIOW/huS4luiQp+mBpQovLyBAaW5jbHVkZSAgICAgICo6Ly90aWViYS5iYWlkdS5jb20vKgovLyBAZXhjbHVkZSAgICAgICo6Ly90aWViYS5iYWlkdS5jb20vZi9mZGlyKgovLyBAZXhjbHVkZSAgICAgICo6Ly90aWViYS5iYWlkdS5jb20vZi9zZWFyY2gqCi8vIEBydW4tYXQgICAgICAgZG9jdW1lbnQtYm9keQovLy8galF1ZXJ5IOeVmeS4gOS7veiHquW3seeUqAovLyBAcmVxdWlyZSAgICAgaHR0cDovL2Nkbi5zdGF0aWNmaWxlLm9yZy9qcXVlcnkvMi4xLjEvanF1ZXJ5Lm1pbi5qcwovLyBAcmVxdWlyZSAgICAgaHR0cDovL2Nkbi5zdGF0aWNmaWxlLm9yZy9qcXVlcnktc2Nyb2xsVG8vMS40LjExL2pxdWVyeS5zY3JvbGxUby5taW4uanMKCi8vLyDphY3nva7nlYzpnaIgVUkKLy8gQHJlcXVpcmUgICAgIGh0dHA6Ly9jZG4uc3RhdGljZmlsZS5vcmcvbXVzdGFjaGUuanMvMC44LjEvbXVzdGFjaGUubWluLmpzCi8vIEByZXF1aXJlICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3NjcmlwdHMvMjY1Ny9jb2RlL3RpZWJhX3VpLmpzCgovLy8g6Z2e5ZCM5q2l5pWw57uE5p6a5Li+5Zue6LCDCi8vIEByZXF1aXJlIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvc2NyaXB0cy8zNTg4L2NvZGUvSW50ZXJ2YWxfTG9vcGVyLmpzCgovLy8g5YW85a65IEdNIDEueCwgMi54Ci8vIEByZXF1aXJlICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3NjcmlwdHMvMjU5OS9jb2RlL2dtMl9wb3J0X3YxMDMuanMKLy8gQGdyYW50ICAgICAgICB1bnNhZmVXaW5kb3cKLy8gQGdyYW50ICAgICAgICBHTV9zZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgIEdNX2dldFZhbHVlCi8vIEBncmFudCAgICAgICAgR01fbGlzdFZhbHVlcwovLyBAZ3JhbnQgICAgICAgIEdNX2luZm8KLy8gQGdyYW50ICAgICAgICBHTV9hZGRTdHlsZQovLyBAZ3JhbnQgICAgICAgIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQKLy8gQGdyYW50ICAgICAgIEdNX2RlbGV0ZVZhbHVlCi8vIEBncmFudCAgICAgICBHTV94bWxodHRwUmVxdWVzdAovLyA9PS9Vc2VyU2NyaXB0PT0KCihmdW5jdGlvbigpIHsKICAgIC8vVGllQmEgLSBNYXZlcmljawogICAgaWYoIUdNX2dldFZhbHVlKCJqaW55b25ndGllYmFtZWlodWEiKSl7CiAgICAgICAgdmFyIGNzcyA9ICIiOwogICAgICAgIGlmIChmYWxzZSB8fCAoZG9jdW1lbnQuZG9tYWluID09ICJ0aWViYS5iYWlkdS5jb20iIHx8IGRvY3VtZW50LmRvbWFpbi5zdWJzdHJpbmcoZG9jdW1lbnQuZG9tYWluLmluZGV4T2YoIi50aWViYS5iYWlkdS5jb20iKSArIDEpID09ICJ0aWViYS5iYWlkdS5jb20iKSB8fCAoZG9jdW1lbnQuZG9tYWluID09ICJ3d3cudGllYmEuY29tIiB8fCBkb2N1bWVudC5kb21haW4uc3Vic3RyaW5nKGRvY3VtZW50LmRvbWFpbi5pbmRleE9mKCIud3d3LnRpZWJhLmNvbSIpICsgMSkgPT0gInd3dy50aWViYS5jb20iKSkKICAgICAgICAgICAgY3NzICs9IFsKICAgICAgICAgICAgICAgICIvKiIsCiAgICAgICAgICAgICAgICAi4oCU4oCUV2ViRm9udHPigJTigJQiLAogICAgICAgICAgICAgICAgIkdvb2dsZSBGb250czogaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9mb250cyIsCiAgICAgICAgICAgICAgICAiR29vZ2xlIE1hdGVyaWFsIGljb25zOiBodHRwczovL2Rlc2lnbi5nb29nbGUuY29tL2ljb25zLyIsCiAgICAgICAgICAgICAgICAiKi8iLAogICAgICAgICAgICAgICAgIkBmb250LWZhY2UgeyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtZmFtaWx5OiBcJ09wZW4gU2Fuc1wnOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc3R5bGU6IG5vcm1hbDsiLAogICAgICAgICAgICAgICAgIglmb250LXdlaWdodDogNDAwOyIsCiAgICAgICAgICAgICAgICAiCXNyYzogdXJsKGh0dHBzOi8vZm9udHMtZ3N0YXRpYy5wcm94eS51c3RjbHVnLm9yZy9zL29wZW5zYW5zL3YxMy9jSlpLZU91QnJuNGtFUnhxdGFVSDNWdFhSYThUVndUSUNnaXJuSmhtVkp3LndvZmYyKSBmb3JtYXQoXCd3b2ZmXCcpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiQGZvbnQtZmFjZSB7IiwKICAgICAgICAgICAgICAgICIJZm9udC1mYW1pbHk6IFwnTWF0ZXJpYWwgSWNvbnNcJzsiLAogICAgICAgICAgICAgICAgIglmb250LXN0eWxlOiBub3JtYWw7IiwKICAgICAgICAgICAgICAgICIJZm9udC13ZWlnaHQ6IDQwMDsiLAogICAgICAgICAgICAgICAgIglzcmM6IHVybChodHRwczovL2ZvbnRzLWdzdGF0aWMucHJveHkudXN0Y2x1Zy5vcmcvcy9tYXRlcmlhbGljb25zL3YxNy8yZmNyWUZOYVRqY1M2ZzRVM3QtWTVaalpqVDVGZEVKMTQwVTJESllDM21ZLndvZmYyKSBmb3JtYXQoXCd3b2ZmMlwnKSwiLAogICAgICAgICAgICAgICAgIgkJIHVybChodHRwOi8vb25veC5xaW5pdWRuLmNvbS9tYXZlcmljay9tYXRlcmlhbGljb25zX3NhZmFyaV92MTYud29mZikgZm9ybWF0KFwnd29mZlwnKTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiYm9keSwiLAogICAgICAgICAgICAgICAgIi50Yi11ZWRpdG9yLWZ1bGxzY3JlZW4gLnRiX3JpY2hfcG9zdGVyX2NvbnRhaW5lcnsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kLWNvbG9yOiAjRjFGMUYxICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZC1pbWFnZTogdXJsKGh0dHA6Ly9vbm94LnFpbml1ZG4uY29tL21hdmVyaWNrL3RiYmcvMS5qcGcpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZC1zaXplOiBjb3ZlciAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtYXR0YWNobWVudDogZml4ZWQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICJib2R5LCIsCiAgICAgICAgICAgICAgICAiLnRiLXVlZGl0b3ItZnVsbHNjcmVlbiAudGJfcmljaF9wb3N0ZXJfY29udGFpbmVyIHsiLAogICAgICAgICAgICAgICAgIiAgICBiYWNrZ3JvdW5kLWltYWdlOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICJib2R5OjpzZWxlY3Rpb24geyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjZmZmOyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtY29sb3I6ICM0ODc5QkQ7IiwKICAgICAgICAgICAgICAgICIJdGV4dC1zaGFkb3c6IG5vbmU7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIqIHsiLAogICAgICAgICAgICAgICAgIglmb250LWZhbWlseTogXCdPcGVuIFNhbnNcJywgXCdNaWNyb3NvZnQgWWFoZWkgVUlcJywgXCdNaWNyb3NvZnQgWWFoZWlcJzsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgImEgeyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb246IGNvbG9yIC40cyBlYXNlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLyrmm7/mjaJCYW5uZXIqLyIsCiAgICAgICAgICAgICAgICAiLnN0YXJfYmFubmVyIGltZ1tzcmMkPVwiZGVmYXVsdF9oZWFkMjAxNDEwMTQuanBnXCJdLCIsCiAgICAgICAgICAgICAgICAiLnZlcnRpY2FsX2NhcmRfYmFubmVyIGltZ1tzcmMkPVwiZGVmYXVsdF9oZWFkMjAxNDEwMTQuanBnXCJdLCIsCiAgICAgICAgICAgICAgICAiLmNhcmRfYmFubmVyIGltZ1tzcmMkPVwiZGVmYXVsdF9oZWFkMjAxNDEwMTQuanBnXCJdeyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6ICNmZmY7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZy10b3A6IDE4MHB4OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmctbGVmdDogMTAwJTsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtc2l6ZTogY292ZXI7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyOyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtaW1hZ2U6IHVybChodHRwOi8vd3cyLnNpbmFpbWcuY24vbGFyZ2UvN2JkZTAyZmJndzFmM3l0ODlwMHhlajIweGMwNjR0YWUuanBnKTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLyrmm7/mjaLlkKflpLTlg48qLyIsCiAgICAgICAgICAgICAgICAiZGl2W2NsYXNzKj1cIl90aGVtZTJcIl0gaW1nLmNhcmRfaGVhZF9pbWdbc3JjJD1cImMxZDcxOWY3OTA1Mjk4MjI3MjIxYWI4YmQ2Y2E3YmNiMGI0NmQ0NTguanBnXCJdLCIsCiAgICAgICAgICAgICAgICAiZGl2W2NsYXNzKj1cIl90aGVtZTJcIl0gaW1nLmNhcmRfaGVhZF9pbWdbc3JjJD1cIjE5OWE4N2Q2Mjc3ZjllMmZhMDQxOWJmMDE5MzBlOTI0Yjk5OWYzZTAuanBnXCJdLCIsCiAgICAgICAgICAgICAgICAiZGl2W2NsYXNzKj1cIl90aGVtZTJcIl0gaW1nLmNhcmRfaGVhZF9pbWdbc3JjJD1cIjdiZjc4MjQ1ZDY4OGQ0M2YxNDdiMDFiYTdjMWVkMjFiMGNmNDNiOTguanBnXCJdLCIsCiAgICAgICAgICAgICAgICAiZGl2W2NsYXNzKj1cIl90aGVtZTJcIl0gaW1nLmNhcmRfaGVhZF9pbWdbc3JjJD1cImRlZmF1bHRfYXZhdGFyMjAxNDEwMTcuanBnXCJdeyIsCiAgICAgICAgICAgICAgICAiICAgIHBhZGRpbmctdG9wOiA2MHB4OyIsCiAgICAgICAgICAgICAgICAiICAgIHBhZGRpbmctbGVmdDogNjBweDsiLAogICAgICAgICAgICAgICAgIiAgICB3aWR0aDogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiICAgIGhlaWdodDogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiaW1nLmNhcmRfaGVhZF9pbWdbc3JjJD1cImMxZDcxOWY3OTA1Mjk4MjI3MjIxYWI4YmQ2Y2E3YmNiMGI0NmQ0NTguanBnXCJdLCIsCiAgICAgICAgICAgICAgICAiaW1nLmNhcmRfaGVhZF9pbWdbc3JjJD1cIjE5OWE4N2Q2Mjc3ZjllMmZhMDQxOWJmMDE5MzBlOTI0Yjk5OWYzZTAuanBnXCJdLCIsCiAgICAgICAgICAgICAgICAiaW1nLmNhcmRfaGVhZF9pbWdbc3JjJD1cIjdiZjc4MjQ1ZDY4OGQ0M2YxNDdiMDFiYTdjMWVkMjFiMGNmNDNiOTguanBnXCJdLCIsCiAgICAgICAgICAgICAgICAiaW1nLmNhcmRfaGVhZF9pbWdbc3JjJD1cImRlZmF1bHRfYXZhdGFyMjAxNDEwMTcuanBnXCJdeyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6ICNmZmY7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZy10b3A6IDE1MHB4OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmctbGVmdDogMTUwcHg7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kLXNpemU6IGNvdmVyOyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kLWltYWdlOiB1cmwoaHR0cDovL3d3Mi5zaW5haW1nLmNuL213NjkwLzdiZGUwMmZiZ3cxZjRkZzRqd2tuZWoyMDQ2MDQ2Z2x5LmpwZyk7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi8q6LS05ZCn5Lya5ZGY55u45YWz6aG5Ki8iLAogICAgICAgICAgICAgICAgIi51X21lbWJlciwiLAogICAgICAgICAgICAgICAgIiNjZWxlYnJpdHksIiwKICAgICAgICAgICAgICAgICIuYXNpZGVfcmVnaW9uLmNlbGVicml0eSwiLAogICAgICAgICAgICAgICAgIi5qLXBsYWNlaG9sZGVyLXBheS1tZW1iZXIsIiwKICAgICAgICAgICAgICAgICIuaWNvbi1jcm93bi1zdXBlci1ub24sIiwKICAgICAgICAgICAgICAgICIual90aHJlYWRfc2V0bWVtYmVydG9wLCIsCiAgICAgICAgICAgICAgICAiLmpfdGhyZWFkX2Rpc21lbWJlcnRvcCwiLAogICAgICAgICAgICAgICAgIi5zaWduX3RpcF9zYm94XzFrZXksIiwKICAgICAgICAgICAgICAgICIucC1wb3N0LWZvcmJpZC1zcGVlY2gsIiwKICAgICAgICAgICAgICAgICIvKui2hee6p+S8muWRmOWQhOenjeaPkOekuiovIiwKICAgICAgICAgICAgICAgICIucG9zdGVyX3N1Y2Nlc3MgLnN1Y2Nlc3MtZm9vdC10aXAsIiwKICAgICAgICAgICAgICAgICIubF90aHJlYWRfbWFuYWdlICNub3RpZnlfYnViYmxlLCIsCiAgICAgICAgICAgICAgICAiLnF1aWNrLXJlcGx5LWRlc2MgeyIsCiAgICAgICAgICAgICAgICAiICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiI2RfcG9zdF9tYW5hZ2U6aG92ZXIgI2pfcXVpY2tfdGhyZWFkPmxpOm50aC1vZi10eXBlKDMpeyIsCiAgICAgICAgICAgICAgICAiICAgIHRyYW5zaXRpb24tZGVsYXk6IC4wczsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiNkX3Bvc3RfbWFuYWdlOmhvdmVyICNqX3F1aWNrX3RocmVhZD5saTpudGgtb2YtdHlwZSg0KXsiLAogICAgICAgICAgICAgICAgIiAgICB0cmFuc2l0aW9uLWRlbGF5OiAuMXM7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIjZF9wb3N0X21hbmFnZTpob3ZlciAjal9xdWlja190aHJlYWQ+bGk6bnRoLW9mLXR5cGUoNSl7IiwKICAgICAgICAgICAgICAgICIgICAgdHJhbnNpdGlvbi1kZWxheTogLjJzOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiI2RfcG9zdF9tYW5hZ2U6aG92ZXIgI2pfcXVpY2tfdGhyZWFkPmxpOm50aC1vZi10eXBlKDYpeyIsCiAgICAgICAgICAgICAgICAiICAgIHRyYW5zaXRpb24tZGVsYXk6IC4zczsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnRidWlfZmJhcl9zaGFyZSwvKuWPs+S+p+a1ruWxgi3liIbkuqsqLyIsCiAgICAgICAgICAgICAgICAvLyIudGJ1aV9mYmFyX2Zhdm9yLC8q5Y+z5L6n5rWu5bGCLeeIsemAm+eahOWQpyovIiwKICAgICAgICAgICAgICAgICIudGJ1aV9mYmFyX3Byb3BzLC8q5Y+z5L6n5rWu5bGCLemtlOazlemBk+WFtyovIiwKICAgICAgICAgICAgICAgICIudGJ1aV9mYmFyX3RzdWtrb21pLC8q5Y+z5L6n5rWu5bGCLeelnuadpeS4gOWPpSovIiwKICAgICAgICAgICAgICAgICIuc2VhcmNoX21haW5fZml4ZWQsLyrmkJzntKLmoI/mta7lsYIqLyIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLmVkdWktYnRuLXRvb2xiYXIgLmVkdWktYnRuLW1lZGFsLC8q57yW6L6R5qGG6LS05ZCn54m55p2D5oyJ6ZKuKi8iLAogICAgICAgICAgICAgICAgIi5zYXZlX2ZhY2VfYmcsLmFjaGlldmVtZW50X21lZGFsX3NlY3Rpb24sLmFjaGlldmVtZW50X21lZGFsX3dyYXBwZXIsLyrmpbzlsYLmjL3lsIrmjInpkq4s5b6956ugKi8iLAogICAgICAgICAgICAgICAgIi5semxfY250IC5wcmVfaWNvbl93cmFwLC5wX3Bvc3RsaXN0IC5wcmVfaWNvbl93cmFwLC8q5biW5a2Q5YaF6aG15Lya5ZGY5qCH6K+GKi8iLAogICAgICAgICAgICAgICAgIi5zaGFyZV90aHJlYWQsLyrkuIDmpbzliIbkuqvmjInpkq4qLyIsCiAgICAgICAgICAgICAgICAiLnBvc3QtZm9vdC1zZW5kLWdpZnQtYnRuLC8q5LiA5qW86YCB56S854mp5oyJ6ZKuKi8iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiI3NlbGVjdHNlYXJjaC1pY29uLC8q5YiS6K+N5pCc57SiKi8iLAogICAgICAgICAgICAgICAgIltpZD1cInBhZ2VsZXRfZW50ZXJ0YWlubWVudC1nYW1lL3BhZ2VsZXQvZ2FtZV9oZWFkX21pZGRsZVwiXSwvKumDqOWIhua4uOaIj+i0tOWQp+WktOmDqOa4uOaIj+WfnyovIiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICJbaWQ9XCJwYWdlbGV0X2Zycy1hc2lkZS9wYWdlbGV0L2hvdHRvcGljXCJdLCIsCiAgICAgICAgICAgICAgICAiLmxfY29udGFpbmVyIC5wbGF0X2hlYWRfdjJfdW5tYWluX3dyYXBwZXIsLyrorqTor4HlkKfluJblrZDlhoXpobXlpLTpg6jor6bnu4bkv6Hmga8qLyIsCiAgICAgICAgICAgICAgICAiLnBfcmVwbHlfZmlyc3QsLmRfcG9zdF9jb250ZW50X2ZpcnN0Zmxvb3IgLmNvcmVfcmVwbHlfdGFpbCAucF9yZXBseSwvKuWxj+iUveWFt+acieivr+WvvOaAp+eahOS4gOalvOWGheWuueS4i+aWueWbnuWkjeaMiemSriovIiwKICAgICAgICAgICAgICAgICIuc3VnZ2VzdGlvbl9saXN0ID5saVtkYXRhLWZpZWxkKj1cIm9wZXJhdGlvbl90aXRsZVwiXSwuc3VnZ2VzdGlvbl9saXN0ID5saVtkYXRhLWZpZWxkKj1cIm9wZXJhdGlvbl9pdGVtXCJdLC5iZGZlbmd5dW4sLyrmkJzntKLmgqzmta7nqpct5aSn5LyZ5q2j5Zyo6IGKKi8iLAogICAgICAgICAgICAgICAgIi5zdWdnZXN0aW9uX2xpc3QgPmxpW2RhdGEtZmllbGQqPVwicmVsYXRpb25fZ2FtZV90aXRsZVwiXSwuc3VnZ2VzdGlvbl9saXN0ID5saVtkYXRhLWZpZWxkKj1cImdhbWVfaXRlbVwiXSwvKuaQnOe0ouaCrOa1rueqly3nm7jlhbPmuLjmiI8qLyIsCiAgICAgICAgICAgICAgICAiLnRidWlfZmJhcl9zcXVhcmUgeyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiAgIiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi8q5qW85bGC5rCU5rOhKi8iLAogICAgICAgICAgICAgICAgIi5wb3N0X2J1YmJsZV90b3AsLnBvc3RfYnViYmxlX2JvdHRvbXsiLAogICAgICAgICAgICAgICAgIiAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucG9zdF9idWJibGVfbWlkZGxleyIsCiAgICAgICAgICAgICAgICAiICAgIGJhY2tncm91bmQ6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIiAgICBwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIgICAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi8q5qCH6aKY6L6T5YWl5qGG5paH5a2X5a+56b2Q5pa55byPKi8iLAogICAgICAgICAgICAgICAgIi5wb3N0ZXJfYm9keSAuZWRpdG9yX3RpdGxlLCIsCiAgICAgICAgICAgICAgICAiLnBvc3Rlcl9ib2R5IC50YnVpX3BsYWNlaG9sZGVyLCIsCiAgICAgICAgICAgICAgICAiLnBwcmVmaXgtaXRlbXsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWFsaWduOiBjZW50ZXIgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi8q5biW5a2Q5YiX6KGo6aG15Lya5ZGY5qCH6K+G5ZKM6Z2e5a6e5ZCN6K6k6K+B5Y2w6K6wKi8iLAogICAgICAgICAgICAgICAgIi8q5oKs5YGc5pi+56S6Ki8iLAogICAgICAgICAgICAgICAgIi5mcnNfYnJpZ2h0X3ByZWljb24sIiwKICAgICAgICAgICAgICAgICIuZnJzX2JyaWdodF9pY29ucz4qOm5vdChbZGF0YS1uYW1lPVwidXNlcl90eXBlXCJdKTpub3QoW2RhdGEtbmFtZT1cImlzX3ZlcmlmeVwiXSl7IiwKICAgICAgICAgICAgICAgICIgICAgb3BhY2l0eTogMDsiLAogICAgICAgICAgICAgICAgIiAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IC40cyBlYXNlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfYnJpZ2h0IC5qX3RocmVhZF9saXN0OmhvdmVyIC5mcnNfYnJpZ2h0X3ByZWljb24sIiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF9icmlnaHQgLmpfdGhyZWFkX2xpc3Q6aG92ZXIgLmZyc19icmlnaHRfaWNvbnM+Kjpub3QoW2RhdGEtbmFtZT1cInVzZXJfdHlwZVwiXSk6bm90KFtkYXRhLW5hbWU9XCJpc192ZXJpZnlcIl0peyIsCiAgICAgICAgICAgICAgICAiICAgIG9wYWNpdHk6IDE7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIual90aHJlYWRfbGlzdCAucmVkX3RleHQsIiwKICAgICAgICAgICAgICAgICIual90aHJlYWRfbGlzdCAucmVkLXRleHQsIiwKICAgICAgICAgICAgICAgICIual90aHJlYWRfbGlzdCAudmlwX3JlZCwiLAogICAgICAgICAgICAgICAgIi5qX3RocmVhZF9saXN0IC52aXAtcmVkLCIsCiAgICAgICAgICAgICAgICAiLmpfdGhyZWFkX2xpc3QgLnZpcF9yZWQ6aG92ZXIsIiwKICAgICAgICAgICAgICAgICIual90aHJlYWRfbGlzdCAudmlwLXJlZDpob3ZlciwiLAogICAgICAgICAgICAgICAgIi5qX3RocmVhZF9saXN0IC52aXBfcmVkOnZpc2l0ZWQsIiwKICAgICAgICAgICAgICAgICIual90aHJlYWRfbGlzdCAudmlwLXJlZDp2aXNpdGVkeyIsCiAgICAgICAgICAgICAgICAiICAgIGNvbG9yOiBpbmhlcml0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIual90aHJlYWRfbGlzdCAuc2lnbl9oaWdobGlnaHR7IiwKICAgICAgICAgICAgICAgICIgICAgY29sb3I6IGluaGVyaXQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X2JyaWdodCAual90aHJlYWRfbGlzdDpob3ZlciAuc2lnbl9oaWdobGlnaHR7IiwKICAgICAgICAgICAgICAgICIgICAgY29sb3I6ICNmZmE2NDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X2JyaWdodCAual90aHJlYWRfbGlzdDpob3ZlciAucmVkX3RleHQsIiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF9icmlnaHQgLmpfdGhyZWFkX2xpc3Q6aG92ZXIgLnJlZC10ZXh0LCIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfYnJpZ2h0IC5qX3RocmVhZF9saXN0OmhvdmVyIC52aXBfcmVkLCIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfYnJpZ2h0IC5qX3RocmVhZF9saXN0OmhvdmVyIC52aXAtcmVkeyIsCiAgICAgICAgICAgICAgICAiICAgIGNvbG9yOiAjZjc0ZDRhIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X2xpX2xlZnQsIC5qX3RocmVhZGxpc3RfbGlfbGVmdCB7IiwKICAgICAgICAgICAgICAgICIgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiAgIiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi8q55So5oi36Z2i5p2/Ki8iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnVfeGl1OCwvKuS4quS6ui3miJHnmoTnp4DlnLoqLyIsCiAgICAgICAgICAgICAgICAiLnVfd2FsbGV0LC8qVOmAl+i0puWNlSovIiwKICAgICAgICAgICAgICAgICIudV90Ym1hbGwsLyrotLTlkKfllYbln44qLyIsCiAgICAgICAgICAgICAgICAiLnVfYXBwLC8q56e75Yqo5a6i5oi356uvKi8iLAogICAgICAgICAgICAgICAgIi8q5p2C6aG5Ki8iLAogICAgICAgICAgICAgICAgIi5zcGxpdCwiLAogICAgICAgICAgICAgICAgIi51X3NwbGl0LCIsCiAgICAgICAgICAgICAgICAiLnVfYXBwY2VudGVyRW50cmFuY2UsIiwKICAgICAgICAgICAgICAgICIudV9qb2ludmlwLCIsCiAgICAgICAgICAgICAgICAiLnVfYmRob21lIHsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBub25lOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIvKueUqOaIt+mdouadvy3liqjnlLvlu7bov58qLyIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIudXNlcmJhcj51bD5saS51X3VzZXJuYW1lOmhvdmVyfmxpOm50aC1vZi10eXBlKDIpIHsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWRlbGF5OiAwczsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51c2VyYmFyPnVsPmxpLnVfdXNlcm5hbWU6aG92ZXJ+bGk6bnRoLW9mLXR5cGUoNCkgeyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZGVsYXk6IC4wNXM7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudXNlcmJhcj51bD5saS51X3VzZXJuYW1lOmhvdmVyfmxpOm50aC1vZi10eXBlKDYpIHsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWRlbGF5OiAuMXM7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudXNlcmJhcj51bD5saS51X3VzZXJuYW1lOmhvdmVyfmxpIHsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWRlbGF5OiAuMTVzOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnVzZXJiYXI+dWw+bGkudV9zZXR0aW5nOmhvdmVyfmxpOm50aC1vZi10eXBlKDQpIHsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWRlbGF5OiAwczsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51c2VyYmFyPnVsPmxpLnVfc2V0dGluZzpob3Zlcn5saTpudGgtb2YtdHlwZSg2KSB7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1kZWxheTogLjA1czsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51c2VyYmFyPnVsPmxpLnVfc2V0dGluZzpob3Zlcn5saSB7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1kZWxheTogLjFzOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnVzZXJiYXI+dWw+bGkudV9uZXdzOmhvdmVyfmxpOm50aC1vZi10eXBlKDYpIHsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWRlbGF5OiAwczsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51c2VyYmFyPnVsPmxpLnVfbmV3czpob3Zlcn5saSB7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1kZWxheTogLjA1czsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLyrlub/lkYrlkozml6DnlKjlip/og70qLyIsCiAgICAgICAgICAgICAgICAiLnRidWlfZmJhcl9iYXpodSwiLAogICAgICAgICAgICAgICAgIi5nYW1lLWhlYWQtZ2FtZS1pbmZvLXdyYXBwZXIsIiwKICAgICAgICAgICAgICAgICJbaWQ9XCJwYWdlbGV0X2VudGVydGFpbm1lbnQtbGl2ZXNob3cvcGFnZWxldC92aWRlb19oZWFkXCJdLCIsCiAgICAgICAgICAgICAgICAiLmxfcG9zdF9icmlnaHRbZGF0YS1maWVsZCo9XCJ1c2VyX25hbWVcXFwiXFw6XFxcIlxcXFx1NGUzZlxcXFx1NTkyOVxcXFx1NGUzNlxcXFx1NGU0YlxcXFx1NmI4N1wiXVtkYXRhLWZpZWxkKj1cImNvbnRlbnRcXFwiXFw6XFxcIlxcXFx1NWUwY1xcXFx1NjcxYlxcXFx1NTQwNFxcXFx1NGY0ZFxcXFx1NTQyN1xcXFx1NTNjYlxcXFx1ODBmZFxcXFx1NjUyZlxcXFx1NjMwMVxcXFx1OWI1NFxcXFx1NTQyN1xcXFx1NjcwOFxcXFx1NTIwYVxcXFx1MzAwMlxcXCJcIl0sIiwKICAgICAgICAgICAgICAgICIubF9wb3N0X2JyaWdodFtkYXRhLWZpZWxkKj1cInRlbXBsYXRlX2lkXCJdLCIsCiAgICAgICAgICAgICAgICAiLmxfcG9zdF9icmlnaHRbZGF0YS1maWVsZCo9XCJtb25pdG9yX2lkXCJdLCIsCiAgICAgICAgICAgICAgICAiI2R1b2t1X3NlcnZlcnNfbGlzdF93cmFwcGVyLCIsCiAgICAgICAgICAgICAgICAiYVtsb2NhdGUqPVwiY29tbW9uX3NlYXJjaF9idXR0b25cIl0sIiwKICAgICAgICAgICAgICAgICIucGxheV9saXN0X3BhbmVsLCIsCiAgICAgICAgICAgICAgICAiLm1pZGRsZS1zZWMsIiwKICAgICAgICAgICAgICAgICIuZ2FtZV9saXZlX2xpc3QsIiwKICAgICAgICAgICAgICAgICIuZmlyZXdvcmtfc2VuZGVyX3dyYXAsIiwKICAgICAgICAgICAgICAgICJbZGF0YS1kYWlkXSwiLAogICAgICAgICAgICAgICAgIiNwYl9hZGJhbm5lciwiLAogICAgICAgICAgICAgICAgIiNmb3J1bV9yZWNvbW1lbmQsIiwKICAgICAgICAgICAgICAgICIudG9wLXNlYywiLAogICAgICAgICAgICAgICAgIi5yLXRvcC1zZWMsIiwKICAgICAgICAgICAgICAgICIjc3BhZ2VfbGl2ZXNob3dfc2xpZGUsIiwKICAgICAgICAgICAgICAgICIjcGxhdF9hY3Rfd3JhcHBlciwiLAogICAgICAgICAgICAgICAgIiNzcGFnZV9nYW1lX3RhYl93cmFwcGVyLCIsCiAgICAgICAgICAgICAgICAiLm1lbWJlcl9yYW5rLCIsCiAgICAgICAgICAgICAgICAiI3NlYXJjaF9mZW5nY2hhbywiLAogICAgICAgICAgICAgICAgIiNzZWFyY2hfdW5pb25fbW9kLCIsCiAgICAgICAgICAgICAgICAiI3NlYXJjaF9ib3R0b21hZCwiLAogICAgICAgICAgICAgICAgIi5hcHBfZm9ydW1fdG9wX25hdl9ob2xkcGxhY2UsIiwKICAgICAgICAgICAgICAgICIuYXBwX2ZvcnVtX3RvcF9uYXYsIiwKICAgICAgICAgICAgICAgICIuZmF2LXRvb2xiYXIsIiwKICAgICAgICAgICAgICAgICJpbWcuY2xvc2VfYnRuLCIsCiAgICAgICAgICAgICAgICAiaW1nLmNsb3NlX2J0bi5qX2NsaWNrX2Nsb3NlK2RpdiwiLAogICAgICAgICAgICAgICAgInAuc3dpdGNoX3JhZGlvcytkaXYsIiwKICAgICAgICAgICAgICAgICIjYXNpZGVfYWQsIiwKICAgICAgICAgICAgICAgICIucmVnaW9uX2JyaWdodCN0aWViYS1ub3RpY2UrZGl2LCIsCiAgICAgICAgICAgICAgICAiLnRocmVhZF9yZWNvbW1lbmQsIiwKICAgICAgICAgICAgICAgICIjcGxhdGZvcm1fbGVmdF9mbG9hdCwiLAogICAgICAgICAgICAgICAgIi5jb250ZW50X3RvcCwiLAogICAgICAgICAgICAgICAgIi5hc2lkZV9yZWdpb24ubXlfYXBwLmpfZW5jb3VyYWdlX2VudHJ5LCIsCiAgICAgICAgICAgICAgICAiaW1nW3NyY149XCJodHRwOi8vdGIxLmJkc3RhdGljLmNvbS90Yi9jbXMvbmdtaXMvYWRzZW5zZS9cIl0sIiwKICAgICAgICAgICAgICAgICIjdG9wX2FjdGl2aXR5LCIsCiAgICAgICAgICAgICAgICAiLmxpZmVfaGVscGVyLCIsCiAgICAgICAgICAgICAgICAiLm1pZGRsZS1zZWM+ZGl2Pi5pZnJhbWVfd3JhcHBlciwiLAogICAgICAgICAgICAgICAgIiNzZWFyY2hfZmVuZ2NoYW9fbGVmdCwiLAogICAgICAgICAgICAgICAgImRpdltpZD1cInBhZ2VsZXRfZW50ZXJ0YWlubWVudC1iYXNlL3BhZ2VsZXQveGl1OF9hc2lkZV9zbGlkZVwiXSwiLAogICAgICAgICAgICAgICAgIltpZD1cInBhZ2VsZXRfZnJzLWFzaWRlL3BhZ2VsZXQvYWRcIl0sIiwKICAgICAgICAgICAgICAgICJkaXZbaWQ9XCJwYWdlbGV0X2Zycy1oZWFkZXIvcGFnZWxldC9oZWFkX2NvbnRlbnRfbWlkZGxlXCJdID4gZGl2OmZpcnN0LWNoaWxkID4gZGl2W2NsYXNzXj1cImlmcmFtZV9cIl0sIiwKICAgICAgICAgICAgICAgICIual92b2ljZV9hZF9naWYsIiwKICAgICAgICAgICAgICAgICIucF9zaGFyZV9kaW5nLC8q5Y+R5biW5Z+f6aG26YOo5YiG5Lqr5o6n5Lu2Ki8iLAogICAgICAgICAgICAgICAgIi5wX21hbGxfdGFpbCwvKuWxguS4u+S9v+eUqOS6hui0tOWQp+eJueadg+agh+ivhiovIiwKICAgICAgICAgICAgICAgICIjcG9wX2ZyYW1lLC8q5Y+z5LiL5by556qXKi8iLAogICAgICAgICAgICAgICAgIiNlbmNvdXJhZ2VfZW50cnksLyrlj7PovrnmoI8t5oiR55qE5bqU55SoKi8iLAogICAgICAgICAgICAgICAgIiNnbG9iYWxfbm90aWNlX3dyYXAsLyrlhajotLTlkKflupXpg6jlhazlhbHpgJrnn6UqLyIsCiAgICAgICAgICAgICAgICAiLmZpcmV3b3JrLXdyYXAsLmZpcmV3b3JrLXdyYXAyLC8q54Of6IqxKi8iLAogICAgICAgICAgICAgICAgInVsI3RocmVhZF9saXN0PmxpOm5vdChbZGF0YS1maWVsZF0pOm5vdCgudGhyZWFkX3RvcF9saXN0X2ZvbGRlciksLyrluJblrZDliJfooajmiYDmnInpobkqLyIsCiAgICAgICAgICAgICAgICAiI2pfcF9wb3N0bGlzdD5kaXY6bnRoLW9mLXR5cGUoMSl+ZGl2Om5vdChbZGF0YS1maWVsZF0pOm5vdCgjal9wX3Bvc3RsaXN0KSwvKuW4luWtkOWGhemhteaJgOaciealvOWxgiovIiwKICAgICAgICAgICAgICAgICJ1bCN0aHJlYWRfbGlzdD5saS5qX2RmX2NhcmQsLyrmjqjlub8qLyIsCiAgICAgICAgICAgICAgICAiI2pfcF9wb3N0bGlzdD5kaXZbZGF0YS1pc2F1dG9yZXBseV06bm90KDpmaXJzdC1vZi10eXBlKSwvKuaOqOW5vyovIiwKICAgICAgICAgICAgICAgICIuZGlhbW9uZC1tYWxsLWFzaWRlLC8q6LS05ZCn5aS65a6dKi8iLAogICAgICAgICAgICAgICAgIiNwYzJjbGllbnQsLypp6LS05ZCn6aG16Z2i5a6i5oi356uv5bm/5ZGKKi8iLAogICAgICAgICAgICAgICAgIiNjb21fdTlfaGVhZHsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi5jcmVhdGl2ZXBsYXRmb3JtLXdyYXAtd29yZC1yZXBvc3QtYnRuIC5idG4tZGVmYXVsdCwiLAogICAgICAgICAgICAgICAgIiNzZWxlY3RzZWFyY2gtaWNvbiB7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxNHB4OyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAyMHB4OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDRweCA2cHg7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZy1yaWdodDogOXB4OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6ICM0ODc5QkQ7IiwKICAgICAgICAgICAgICAgICIJYm94LXNoYWRvdzogMCAycHggNHB4IDAgcmdiYSgwLCAwLCAwLCAwLjA4KSwgMCAycHggOHB4IDAgcmdiYSgwLCAwLCAwLCAwLjA4KSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjZmZmOyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDRweDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIC40cyBlYXNlOyIsCiAgICAgICAgICAgICAgICAiCXotaW5kZXg6IDk5OTk7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY3JlYXRpdmVwbGF0Zm9ybS13cmFwLXdvcmQtcmVwb3N0LWJ0biAuYnRuLWRlZmF1bHR7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMnB4IDRweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmNyZWF0aXZlcGxhdGZvcm0td3JhcC13b3JkLXJlcG9zdC1idG4gLmJ0bi1kZWZhdWx0OmhvdmVyLCIsCiAgICAgICAgICAgICAgICAiI3NlbGVjdHNlYXJjaC1pY29uOmhvdmVyIHsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiAjNDI4NUY0OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiI3NlbGVjdHNlYXJjaC1pY29uOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGU4YjZcIjsiLAogICAgICAgICAgICAgICAgIglmb250LWZhbWlseTogXCdNYXRlcmlhbCBJY29uc1wnICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDE7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxOHB4OyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGlubGluZS1ibG9jazsiLAogICAgICAgICAgICAgICAgIgl2ZXJ0aWNhbC1hbGlnbjogYm90dG9tOyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmctYm90dG9tOiAxcHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIjc2VsZWN0c2VhcmNoLWljb246YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwi5pCc57SiXCI7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogaW5saW5lLWJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCXZlcnRpY2FsLWFsaWduOiBib3R0b207IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIjc2VsZWN0c2VhcmNoLWljb24gaW1nIHsiLAogICAgICAgICAgICAgICAgIgkvKmRpc3BsYXk6bm9uZeaIlnZpc2liaWxpdHk6aGlkZGVuZOaOieern+eEtuS8muWvvOiHtOeCueWHu+aXoOaViCovIiwKICAgICAgICAgICAgICAgICIJIiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlOyIsCiAgICAgICAgICAgICAgICAiCWxlZnQ6IDA7IiwKICAgICAgICAgICAgICAgICIJdG9wOiAwOyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlcjogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJei1pbmRleDogOTk7IiwKICAgICAgICAgICAgICAgICIJb3BhY2l0eTogMDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLyrotLTlkKflpLTpg6jotYTmlpkqLyIsCiAgICAgICAgICAgICAgICAiLnZlcnRpY2FsX2hlYWRfYmd7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IHJlbGF0aXZlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnZlcnRpY2FsX2hlYWQgLmNhcmRfdG9wX3dyYXB7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDEwMCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDk2cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAxNXB4IDAgMCAxMDBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaXppbmc6IGJvcmRlci1ib3g7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc3Rhcl9iYW5uZXIsIiwKICAgICAgICAgICAgICAgICIudmVydGljYWxfY2FyZF9iYW5uZXIsIiwKICAgICAgICAgICAgICAgICIuY2FyZF9iYW5uZXIgeyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJb3ZlcmZsb3c6IGhpZGRlbjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zdGFyX2hlYWQsIiwKICAgICAgICAgICAgICAgICIucGxhdF9oZWFkeyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIC4wNCkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5oZWFkX2NhcmR7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAuMDQpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY2FyZF90b3BfbGVmdHsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDVweCAwOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBsYXRfaGVhZF92Ml91bm1haW5fd3JhcHBlciwiLAogICAgICAgICAgICAgICAgIi5wbGF0X2hlYWRfdjJfbWFpbl93cmFwcGVyIHsiLAogICAgICAgICAgICAgICAgIglib3JkZXItbGVmdDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yaWdodDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgLjA0KSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci10b3A6IDFweCBzb2xpZCByZ2JhKDAsMCwwLC4wNikgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zdGFyX2hlYWRlcnsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAxM3B4IDE3cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc3Rhcl9oZWFkZXJfcmlnaHR7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IHN0YXRpYyAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnN0YXJfaW5mb3siLAogICAgICAgICAgICAgICAgIgltYXJnaW4tcmlnaHQ6IDIwcHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc3Rhcl9uYXZfYnRuc193cmFweyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBzdGF0aWMgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zdGFyX25hdl9idG5zX3dyYXA6bnRoLWxhc3Qtb2YtdHlwZSgyKXsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucGxhdF9yZWNvbV9jYXJvdXNlbCB7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDEwMCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aW1lX2F4aXNfc2xpZGVfYnV0dG9uX3dyYXBwZXIsIiwKICAgICAgICAgICAgICAgICJhLnN0YXJjaGFubmVsX2VudHJhbmNleyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBsYXRfaGVhZGVyeyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucGxhdF9jYXJkX3RvcCB7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAyMHB4IDA7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLWxlZnQ6IDIwcHg7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IHJlbGF0aXZlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmNhcmRfdG9wX3dyYXB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAuMDMpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLWxlZnQ6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItdG9wOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJpZ2h0OiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiByZWxhdGl2ZTsiLAogICAgICAgICAgICAgICAgIgl6LWluZGV4OiA5OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnN0YXJfcGljYm94LCIsCiAgICAgICAgICAgICAgICAiLnBsYXRfcGljYm94LCIsCiAgICAgICAgICAgICAgICAiLmNhcmRfaGVhZCB7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogNXB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwuNSkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wbGF0X3BpY2JveCBpbWcsIiwKICAgICAgICAgICAgICAgICIuY2FyZF9oZWFkX2ltZ3siLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTUwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDE1MHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICJkaXZbY2xhc3MqPVwiX3RoZW1lMlwiXSAucGxhdF9waWNib3ggaW1nLCIsCiAgICAgICAgICAgICAgICAiZGl2W2NsYXNzKj1cIl90aGVtZTJcIl0gLmNhcmRfaGVhZF9pbWd7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDYwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDYwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnBsYXRfdGl0bGVfaDMsIiwKICAgICAgICAgICAgICAgICIuY2FyZF90aXRsZV9mbmFtZXsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LXRyYW5zZm9ybTogY2FwaXRhbGl6ZTsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDI0cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMzJweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjNTU1ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdGV4dC1kZWNvcmF0aW9uOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi5jYXJkX3Nsb2dhbnsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogIzU1NSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmZvY3VzX2J0bnsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogYXV0byAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogYXV0byAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAyNHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogMTJweDsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDEycHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tbGVmdDogMTBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1yaWdodDogNHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLXRvcDogNXB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgMTBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwwLDAsLjA2KSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjOTk5ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdGV4dC1kZWNvcmF0aW9uOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJIiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1wcm9wZXJ0eTogYmFja2dyb3VuZC1jb2xvcixjb2xvcjsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWR1cmF0aW9uOiAuNHM7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246IGVhc2U7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZm9jdXNfYnRuOmhvdmVyeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtY29sb3I6ICNGNDQzMzYgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogI2ZmZiAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmZvY3VzX2J0bjpiZWZvcmV7IiwKICAgICAgICAgICAgICAgICIJZm9udC1mYW1pbHk6IFwnTWF0ZXJpYWwgSWNvbnNcJzsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDE0cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJdmVydGljYWwtYWxpZ246IHRvcDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tcmlnaHQ6IDJweDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWluZGVudDogLTJweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5jYW5jZWxfZm9jdXM6YmVmb3JleyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlODdkXCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY2FuY2VsX2ZvY3VzOmFmdGVyeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwi5bey5YWz5rOoXCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuaXNsaWtlX2ZvY3VzeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtY29sb3I6ICM0ODc5QkQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogI2ZmZiAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmlzbGlrZV9mb2N1czpob3ZlcnsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kLWNvbG9yOiAjNDI4NUY0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuaXNsaWtlX2ZvY3VzOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTg3ZVwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmlzbGlrZV9mb2N1czphZnRlcnsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIuWFs+azqFwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBsYXRfdXNlX3RvdGFsICosIiwKICAgICAgICAgICAgICAgICIuY2FyZF9udW0gKiwiLAogICAgICAgICAgICAgICAgIi5jYXJkX2luZm8gKnsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogICNhYWEgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wbGF0X3Bvc3RfbnVtLCIsCiAgICAgICAgICAgICAgICAiLmNhcmRfbWVuTnVtLCIsCiAgICAgICAgICAgICAgICAiLmNhcmRfaW5mb051bSwiLAogICAgICAgICAgICAgICAgIi5jYXJkX2luZm8gYVtocmVmXXsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogICM4ODggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIiAgIHRleHQtZGVjb3JhdGlvbjogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmNhcmRfaW5mbyBhW2hyZWZdOmhvdmVyeyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAgIzY2NiAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLyp0aGVtZTIqLyIsCiAgICAgICAgICAgICAgICAiLnBsYXRfaGVhZC5wbGF0X2hlYWRfdGhlbWUyLCIsCiAgICAgICAgICAgICAgICAiLmNhcmRfdG9wX3dyYXAuY2FyZF90b3BfdGhlbWUyeyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmctdG9wOiAxMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY2FyZF90b3BfdGhlbWUyIC5jYXJkX3RvcCB7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiA4NHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZy1sZWZ0OiAxMDRweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmctdG9wOiA0cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3gtc2l6aW5nOiBib3JkZXItYm94OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiByZWxhdGl2ZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5jYXJkX3RvcF90aGVtZTIgLmNhcmRfdGl0bGVfZm5hbWUgeyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi10b3A6IDFweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmNhcmRfdG9wX3RoZW1lMiAuY2FyZF9udW17IiwKICAgICAgICAgICAgICAgICIJd2hpdGUtc3BhY2U6bm93cmFwOyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZTsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiAxcHg7IiwKICAgICAgICAgICAgICAgICIJYm90dG9tOiAtMThweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnBsYXRfaGVhZF90aGVtZTIgLnBsYXRfY2FyZF90b3AgeyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi10b3A6IDE2cHg7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLWJvdHRvbTogMjRweDsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogcmVsYXRpdmU7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucGxhdF9oZWFkX3RoZW1lMiAucGxhdF9oZWFkZXJfbGVmdCB7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiA4NnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucGxhdF9oZWFkX3RoZW1lMiAucGxhdF9waWNib3gsIiwKICAgICAgICAgICAgICAgICIuY2FyZF90b3BfdGhlbWUyIC5jYXJkX2hlYWQgeyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDRweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiA2MHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiA2MHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiA0cHggMjBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBsYXRfaGVhZF90aGVtZTIgLnBsYXRfcGljYm94eyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogLTdweCAxNXB4IDAgMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmNhcmRfdG9wX3RoZW1lMiAuZm9jdXNfYnRuLCIsCiAgICAgICAgICAgICAgICAiLnBsYXRfaGVhZF90aGVtZTIgLmZvY3VzX2J0bnsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tdG9wOiA2cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wbGF0X2hlYWRfdGhlbWUyIC5wbGF0X3VzZV90b3RhbHsiLAogICAgICAgICAgICAgICAgIgl3aGl0ZS1zcGFjZTpub3dyYXA7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlOyIsCiAgICAgICAgICAgICAgICAiCWxlZnQ6IDc5cHg7IiwKICAgICAgICAgICAgICAgICIJYm90dG9tOiAtMnB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLyrnrb7liLAqLyIsCiAgICAgICAgICAgICAgICAiLnBsYXRfaGVhZGVyX3JpZ2h0LCIsCiAgICAgICAgICAgICAgICAiLmNhcmRfdG9wX3JpZ2h0eyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXJpZ2h0OiAwOyIsCiAgICAgICAgICAgICAgICAiCXRvcDogMDsiLAogICAgICAgICAgICAgICAgIgl6LWluZGV4OiAxOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnNpZ25fbW9kX2JyaWdodHsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMjQwcHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc2lnbl9ib3hfYnJpZ2h0eyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRvcDogNTAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcmlnaHQ6IDIwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5qX3NpZ25idG57IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IHJlbGF0aXZlOyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiA2NHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAycHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiAjNDg3OUJEOyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjZmZmOyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaGFkb3c6IDAgMnB4IDZweCAycHggcmdiYSgwLCAwLCAwLCAwLjEpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmpfc2lnbmJ0bjpiZWZvcmV7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGU2MTZcIjsiLAogICAgICAgICAgICAgICAgIglmb250LWZhbWlseTogXCdNYXRlcmlhbCBJY29uc1wnOyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZTsiLAogICAgICAgICAgICAgICAgIgl6LWluZGV4OiAxOyIsCiAgICAgICAgICAgICAgICAiCXRvcDogNTAlOyIsCiAgICAgICAgICAgICAgICAiCWxlZnQ6IDUwJTsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLC01MCUpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDY0cHg7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiA2NHB4OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDUwJTsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiBpbmhlcml0OyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiBpbmhlcml0OyIsCiAgICAgICAgICAgICAgICAiCS1tb3otYm94LXNoYWRvdzogaW5oZXJpdDsiLAogICAgICAgICAgICAgICAgIgktd2Via2l0LWJveC1zaGFkb3c6IGluaGVyaXQ7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDY0cHg7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiA0MnB4OyIsCiAgICAgICAgICAgICAgICAiCXRleHQtYWxpZ246IGNlbnRlcjsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXByb3BlcnR5OiBiYWNrZ3JvdW5kLGNvbG9yOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZHVyYXRpb246IC40czsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5qX3NpZ25idG46aG92ZXJ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogIzQyODVGNDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zaWduX3RvZGF5X2RhdGV7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTpub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc2lnbl9rZWVwX3NwYW4sIiwKICAgICAgICAgICAgICAgICIuc2lnbl9tb250aF9sYWNrX2RheXN7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlOyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOjAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcmlnaHQ6IGF1dG8gIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3R0b206IGF1dG8gIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0b3A6IGF1dG8gIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aGl0ZS1zcGFjZTogbm93cmFwOyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGlubGluZS1ibG9jazsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDEycHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMjJweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IGluaGVyaXQ7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6IGluaGVyaXQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgktbW96LWJveC1zaGFkb3c6IGluaGVyaXQ7IiwKICAgICAgICAgICAgICAgICIJLXdlYmtpdC1ib3gtc2hhZG93OiBpbmhlcml0OyIsCiAgICAgICAgICAgICAgICAiCXRleHQtYWxpZ246IHJpZ2h0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZy1sZWZ0OiA4cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLXJpZ2h0OiAyMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogMTBweCAwIDAgMTBweDsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiAxOHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOyIsCiAgICAgICAgICAgICAgICAiCW9wYWNpdHk6IDA7IiwKICAgICAgICAgICAgICAgICIJIiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1wcm9wZXJ0eTogb3BhY2l0eSwgdHJhbnNmb3JtOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZHVyYXRpb246IC41czsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogY3ViaWMtYmV6aWVyKDAuMjMsIDEsIDAuMzIsIDEpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnNpZ25fbW9udGhfbGFja19kYXlzIHNwYW57IiwKICAgICAgICAgICAgICAgICIJY29sb3I6IGluaGVyaXQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zaWduX2tlZXBfc3BhbnsiLAogICAgICAgICAgICAgICAgIgl0b3A6IC0yMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc2lnbl9tb250aF9sYWNrX2RheXN7IiwKICAgICAgICAgICAgICAgICIJdG9wOiA0cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zaWduX21vZF9icmlnaHQ6aG92ZXIgLnNpZ25fa2VlcF9zcGFuLCIsCiAgICAgICAgICAgICAgICAiLnNpZ25fbW9kX2JyaWdodDpob3ZlciAuc2lnbl9tb250aF9sYWNrX2RheXN7IiwKICAgICAgICAgICAgICAgICIJb3BhY2l0eTogMTsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTEwMCUpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnNpZ25fbW9udGhfbGFja19kYXlzOm50aC1vZi10eXBlKDIpeyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnNpZ25zdGFyX3NpZ25lZHsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiAjZWVlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICM5OTkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc2lnbnN0YXJfc2lnbmVkOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTYxNFwiICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNjY2MgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIuc2lnbl9tb2RfYnJpZ2h0IC5zaWduX3N1Y2MxIHsiLAogICAgICAgICAgICAgICAgIgl0b3A6IDkwcHg7IiwKICAgICAgICAgICAgICAgICIJcmlnaHQ6IC0xMnB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnNpZ25fdGlwX2JkX2FyciB7IiwKICAgICAgICAgICAgICAgICIJcmlnaHQ6IDU3cHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi8q54m55q6K5ZCn5aS06YOoKi8iLAogICAgICAgICAgICAgICAgIi5wbGF0X3NraW4gLndyYXAxLCIsCiAgICAgICAgICAgICAgICAiLnNraW5fMjEwMyAud3JhcDEsIiwKICAgICAgICAgICAgICAgICIuYXBwX2ZvcnVtX2JvZHkgLndyYXAxeyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCBhdXRvOyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlciAxMzhweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmFwcF9mb3J1bV9ib2R5IC5oZWFkX2NvbnRlbnR7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5hcHAtaGVhZGVyLXdyYXBwZXIgeyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogaW5oZXJpdDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5hcHBfaGVhZGVyeyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmctdG9wOiAxNnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDEwMCUgIWltcG9ydGFudDs7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAxMDBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaXppbmc6IGJvcmRlci1ib3g7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAuMDQpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogaW5oZXJpdDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogIzU1NSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmFwcF9oZWFkZXJfdGl0bGVfbWFpbiB7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLXRvcDogMTBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmFwcF9oZWFkZXJfZm9ydW1fbmFtZSB7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAyNHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMHB4IDAgMCAxNXB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdGV4dC10cmFuc2Zvcm06IGNhcGl0YWxpemU7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuYXBwX2hlYWRlcl9mb3J1bV9uYW1lLCIsCiAgICAgICAgICAgICAgICAiLmFwcF9oZWFkZXJfZm9ydW1fbmFtZV9ocmVmeyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjNTU1ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuYXBwX2hlYWRlcl9mb2N1c19idG4geyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogLTVweCAwIDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5hcHBfaGVhZGVyX2ZvY3VzX2luZm8geyIsCiAgICAgICAgICAgICAgICAiCXdoaXRlLXNwYWNlOiBub3dyYXA7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlOyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWxlZnQ6IDEwNHB4OyIsCiAgICAgICAgICAgICAgICAiCWJvdHRvbTogMTBweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5hcHBfaGVhZGVyX2ZvY3VzX2luZm9fZm9jdXNudW0sIiwKICAgICAgICAgICAgICAgICIuYXBwX2hlYWRlcl9mb2N1c19pbmZvX3RpZW51bSB7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICM4ODggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5hcHBfaGVhZGVyX21haW5fYmFja2dyb3VuZHsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICJbaWQ9XCJwYWdlbGV0X3BsYXRmb3JtLW9mZmljaWFsL3BhZ2VsZXQvb2ZmaWNpYWxfZm9ydW1fY2FyZFwiXSwiLAogICAgICAgICAgICAgICAgIi5vZmZpY2lhbF9oZWFkLCIsCiAgICAgICAgICAgICAgICAiLmhlYWRfYmFubmVyLCIsCiAgICAgICAgICAgICAgICAiLmhlYWRfYmFubmVyX2ltZywiLAogICAgICAgICAgICAgICAgIltpZD1cInBhZ2VsZXRfZW5jb3VyYWdlLWFwcGZvcnVtL3BhZ2VsZXQvaGVhZF90b3BcIl0sIiwKICAgICAgICAgICAgICAgICIuYXBwX2ZvcnVtX3RvcHsiLAogICAgICAgICAgICAgICAgIglib3JkZXItcmFkaXVzOiBpbmhlcml0OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmFwcF9oZWFkZXJfYXZhdGFyIHsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwcHggMCAwIDIwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5hcHBfaGVhZGVyX2F2YXRhcl9pbWd7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDYwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDYwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiA0cHg7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwuNSkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5hcHBfZm9ydW1fYm9keSAuc2lnbl9tb2RfYnJpZ2h0IC5zaWduX3N1Y2MxIHsiLAogICAgICAgICAgICAgICAgIgl0b3A6IDY4cHg7IiwKICAgICAgICAgICAgICAgICIJcmlnaHQ6IDMycHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc2tpbl8yMTAzIFtpZD1cInBhZ2VsZXRfZnJzLWhlYWRlci9wYWdlbGV0L2hlYWRcIl0sIiwKICAgICAgICAgICAgICAgICIuYXBwX2ZvcnVtX2JvZHkgW2lkPVwicGFnZWxldF9mcnMtaGVhZGVyL3BhZ2VsZXQvaGVhZFwiXXsiLAogICAgICAgICAgICAgICAgIglib3gtc2hhZG93OiAwIDAgMjBweCAycHggcmdiYSgwLCAwLCAwLCAuMSk7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuYXBwX2ZvcnVtX2JvZHkgW2lkPVwicGFnZWxldF9mcnMtaGVhZGVyL3BhZ2VsZXQvaGVhZFwiXT5kaXZ7IiwKICAgICAgICAgICAgICAgICIJYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc2tpbl8yMTAzIC5oZWFkX3RvcCwiLAogICAgICAgICAgICAgICAgIi5hcHBfZm9ydW1fYm9keSAuaGVhZF90b3B7IiwKICAgICAgICAgICAgICAgICIJYm94LXNpemluZzogYm9yZGVyLWJveDsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IDFweCBzb2xpZCAjREJEQ0UwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLWJvdHRvbTogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiByZWxhdGl2ZTsiLAogICAgICAgICAgICAgICAgIgl6LWluZGV4OiA0OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmFwcF9mb3J1bV9ib2R5IFtpZD1cInBhZ2VsZXRfZW50ZXJ0YWlubWVudC1nYW1lL3BhZ2VsZXQvZ2FtZV9oZWFkX21pZGRsZVwiXXsiLAogICAgICAgICAgICAgICAgIglib3JkZXItdG9wOiA0cHggc29saWQgI0VBRUFFQTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLyrlpLTpg6jmjIflvJUqLyIsCiAgICAgICAgICAgICAgICAiLnRvcF9jb250ZW50IHsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudG9wX2NvbnRfbWFpbnsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLC4wMikgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItdG9wOiAxcHggc29saWQgcmdiYSgwLDAsMCwuMDYpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRvcF9jb250X3RvZ2dsZXsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uOiByaWdodCAuNHMgZWFzZTsiLAogICAgICAgICAgICAgICAgIgl6LWluZGV4OiA5OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDZweCA2cHggMCAwOyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwwLDAsLjEpOyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1ib3R0b206IG5vbmU7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogI2ZmZjsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogIzJENjRCMzsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDI0cHg7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDI0cHg7IiwKICAgICAgICAgICAgICAgICIJb3ZlcmZsb3c6IGhpZGRlbjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50b3BfY29udGVudF9jbG9zZWQgLnRvcF9jb250X3RvZ2dsZXsiLAogICAgICAgICAgICAgICAgIglyaWdodDogMTAwcHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudG9wX2NvbnRfdG9nZ2xlOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OlwnXFxlOGVmXCc7IiwKICAgICAgICAgICAgICAgICIJZm9udC1mYW1pbHk6IFwnTWF0ZXJpYWwgSWNvbnNcJzsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDI0cHg7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogaW5saW5lLWJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCXZlcnRpY2FsLWFsaWduOiB0b3A7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLXJpZ2h0OiAtNHB4OyAgIiwKICAgICAgICAgICAgICAgICIJcGFkZGluZy1sZWZ0OiA0cHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudG9wX2NvbnRfdG9nZ2xlIC50b2dnbGVCdG4geyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGlubGluZS1ibG9jayAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMTAwJTsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tbGVmdDogLTI0cHg7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLXJpZ2h0OiAtNHB4OyIsCiAgICAgICAgICAgICAgICAiCXRleHQtaW5kZW50OiAzMXB4OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogaW5oZXJpdDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50b3BfY29udF90b2dnbGUgLnRvZ2dsZUJ0bjpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwn5pS26LW35oyH5byVXCc7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxMnB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRvcF9jb250X3RvZ2dsZSAudG9nZ2xlQnRuOmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcJ1xcZTMxNlwnOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtZmFtaWx5OiBcJ01hdGVyaWFsIEljb25zXCc7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAyMHB4OyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGlubGluZS1ibG9jazsiLAogICAgICAgICAgICAgICAgIgl2ZXJ0aWNhbC1hbGlnbjogdG9wOyIsCiAgICAgICAgICAgICAgICAiCXRleHQtaW5kZW50OiAwOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRvcF9jb250ZW50X2Nsb3NlZCAudG9nZ2xlQnRuOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcJ+WxleW8gOaMh+W8lVwnOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRvcF9jb250ZW50X2Nsb3NlZCAudG9nZ2xlQnRuOmFmdGVyeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwnXFxlMzEzXCc7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLyrlr7zoiKrph43liLYqLyIsCiAgICAgICAgICAgICAgICAiLmZvcnVtSW5mb19uYXZfd3JhcCwiLAogICAgICAgICAgICAgICAgIi5zdGFyX25hdl93cmFwLCIsCiAgICAgICAgICAgICAgICAiLmlob21lX25hdl93cmFwLCIsCiAgICAgICAgICAgICAgICAiOm5vdCguZm9ydW1fcmFkaW9fYXNpZGUpPi5uYXZfd3JhcCB7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDEwMCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIC4wNCkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItdG9wOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAuMDQpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLWJvdHRvbTogNHB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgLjA0KSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogNDdweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaXppbmc6IGJvcmRlci1ib3g7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogZmxleDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5mb3J1bUluZm9fbmF2X2xpc3QsIiwKICAgICAgICAgICAgICAgICIuc3Rhcl9jbGFzc19uYXYsIiwKICAgICAgICAgICAgICAgICIuaWhvbWVfbmF2X2xpc3QsIiwKICAgICAgICAgICAgICAgICIubmF2X2xpc3QgeyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IGF1dG8gIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IG5vbmUhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlcjogbm9uZSFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IHJlbGF0aXZlOyIsCiAgICAgICAgICAgICAgICAiCWZsb2F0OiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZmxleDogMTsiLAogICAgICAgICAgICAgICAgIglvdmVyZmxvdzogdmlzaWJsZSFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogZmxleDsiLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnN0YXJfY2xhc3NfbmF2LCIsCiAgICAgICAgICAgICAgICAiLm5hdl9saXN0eyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaXppbmc6IGJvcmRlci1ib3g7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZm9ydW1JbmZvX25hdl9saXN0PmxpLCIsCiAgICAgICAgICAgICAgICAiLnN0YXJfY2xhc3NfbmF2PmxpLCIsCiAgICAgICAgICAgICAgICAiLm5hdl9saXN0PmxpeyIsCiAgICAgICAgICAgICAgICAiCWZsZXg6IDE7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZm9ydW1JbmZvX25hdl9saXN0PmxpLCIsCiAgICAgICAgICAgICAgICAiLnN0YXJfY2xhc3NfbmF2PmxpLCIsCiAgICAgICAgICAgICAgICAiLmlob21lX25hdl9saXN0PmxpLCIsCiAgICAgICAgICAgICAgICAiLm5hdl9saXN0PmxpLCIsCiAgICAgICAgICAgICAgICAiLmZvcnVtSW5mb19uYXZfbGlzdD5saSAqLCIsCiAgICAgICAgICAgICAgICAiLnN0YXJfY2xhc3NfbmF2PmxpICosIiwKICAgICAgICAgICAgICAgICIuaWhvbWVfbmF2X2xpc3Q+bGkgKiwiLAogICAgICAgICAgICAgICAgIi5uYXZfbGlzdD5saSAqeyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiBub25lIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IGF1dG8gIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogYXV0byAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWZsb2F0OiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZm9ydW1JbmZvX25hdl9saXN0PmxpIGEsIiwKICAgICAgICAgICAgICAgICIuc3Rhcl9jbGFzc19uYXY+bGkgLnN0YXJfbmF2X2ljbywiLAogICAgICAgICAgICAgICAgIi5paG9tZV9uYXZfbGlzdD5saSAubmF2X2ljb24sIiwKICAgICAgICAgICAgICAgICIubmF2X2xpc3Q+bGkgLmpfdGJuYXZfdGFiX2F7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogaW5saW5lLWJsb2NrICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdmVydGljYWwtYWxpZ246IHRvcDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDQ2cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogNDJweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTZweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjNzc3ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm94LXNpemluZzogYm9yZGVyLWJveDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWFsaWduOiBjZW50ZXI7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLWJvdHRvbTogNHB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMCkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXByb3BlcnR5OiBib3JkZXI7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1kdXJhdGlvbjogLjRzOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnN0YXJfY2xhc3NfbmF2PmxpIC5zdGFyX25hdl9pY28gKiwiLAogICAgICAgICAgICAgICAgIi5paG9tZV9uYXZfbGlzdD5saSAubmF2X2ljb24gKiwiLAogICAgICAgICAgICAgICAgIi5uYXZfbGlzdD5saSAual90Ym5hdl90YWJfYSAqeyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGlubGluZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiBpbmhlcml0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZm9ydW1JbmZvX25hdl9saXN0PmxpLmZvY3VzIGEsIiwKICAgICAgICAgICAgICAgICIuc3Rhcl9jbGFzc19uYXY+bGkuZm9jdXMgLnN0YXJfbmF2X2ljbywiLAogICAgICAgICAgICAgICAgIi5paG9tZV9uYXZfbGlzdD5saS5mb2N1cyAubmF2X2ljb24sIiwKICAgICAgICAgICAgICAgICIubmF2X2xpc3Q+bGkuZm9jdXMgLmpfdGJuYXZfdGFiX2F7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogcmdiYSgwLDAsMCwuMDYpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZm9ydW1JbmZvX25hdl9saXN0PmxpIGE6aG92ZXIsIiwKICAgICAgICAgICAgICAgICIuc3Rhcl9jbGFzc19uYXY+bGkgLnN0YXJfbmF2X2ljbzpob3ZlciwiLAogICAgICAgICAgICAgICAgIi5paG9tZV9uYXZfbGlzdD5saSAubmF2X2ljb246aG92ZXIsIiwKICAgICAgICAgICAgICAgICIubmF2X2xpc3Q+bGkgLmpfdGJuYXZfdGFiX2E6aG92ZXJ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLWJvdHRvbTogNHB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgLjIpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZm9ydW1JbmZvX25hdl9saXN0PmxpIGEsIiwKICAgICAgICAgICAgICAgICIubmF2X2xpc3Q+bGkgLmpfdGJuYXZfdGFiX2F7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc3Rhcl9jbGFzc19uYXY+bGkgLnN0YXJfbmF2X2ljbywiLAogICAgICAgICAgICAgICAgIi5paG9tZV9uYXZfbGlzdD5saSAubmF2X2ljb257IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAyMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDEwMCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zdGFyX2NsYXNzX25hdj5saSAuc3Rhcl9uYXZfaWNvOmVtcHR5OmFmdGVyLCIsCiAgICAgICAgICAgICAgICAiLmlob21lX25hdl9saXN0PmxpIC5uYXZfaWNvbjplbXB0eTphZnRlciwiLAogICAgICAgICAgICAgICAgIi5uYXZfbGlzdD5saSAual90Ym5hdl90YWJfYTplbXB0eTphZnRlcnsiLAogICAgICAgICAgICAgICAgIgljb250ZW50Olwi56m66aG5XCIiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zdGFyX2NsYXNzX25hdj5saSAuc3Rhcl9uYXZfaWNvOmJlZm9yZSwiLAogICAgICAgICAgICAgICAgIi5paG9tZV9uYXZfbGlzdD5saSAubmF2X2ljb246YmVmb3JlLCIsCiAgICAgICAgICAgICAgICAiLm5hdl9saXN0PmxpIC5qX3RibmF2X3RhYl9hOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTg3MVwiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtZmFtaWx5OiBcJ01hdGVyaWFsIEljb25zXCc7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxOHB4OyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGlubGluZS1ibG9jayAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXZlcnRpY2FsLWFsaWduOiB0b3A7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLXJpZ2h0OiAzcHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIubmF2X2xpc3Q+bGlbZGF0YS10YWItbWFpbl0gLmpfdGJuYXZfdGFiX2E6YmVmb3JlLCIsCiAgICAgICAgICAgICAgICAiLnN0YXJfY2xhc3NfbmF2PmxpIC5zdGFyX25hdl9pY28uc3Rhcl9uYXZfaWNvX3RpZTpiZWZvcmUsIiwKICAgICAgICAgICAgICAgICIubmF2X2xpc3Q+bGkgLmpfdGJuYXZfdGFiX2Fbc3RhdHMtZGF0YSo9XCJ0YWJtYWluXCJdOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTI0ZFwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnN0YXJfY2xhc3NfbmF2PmxpIC5zdGFyX25hdl9pY28uc3Rhcl9uYXZfaWNvX3Bob3RvOmJlZm9yZSwiLAogICAgICAgICAgICAgICAgIi5uYXZfbGlzdD5saSAual90Ym5hdl90YWJfYVtzdGF0cy1kYXRhKj1cInRhYmZyc3Bob3RvZ29vZFwiXTpiZWZvcmV7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGU0MTBcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zdGFyX2NsYXNzX25hdj5saSAuc3Rhcl9uYXZfaWNvLnN0YXJfbmF2X2ljb19nb29kOmJlZm9yZSwiLAogICAgICAgICAgICAgICAgIi5uYXZfbGlzdD5saSAual90Ym5hdl90YWJfYVtzdGF0cy1kYXRhKj1cInRhYmdvb2RcIl06YmVmb3JleyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlODM4XCI7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAyMHB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnN0YXJfY2xhc3NfbmF2PmxpIC5zdGFyX25hdl9pY28uc3Rhcl9uYXZfaWNvX3ZpZGVvOmJlZm9yZSwiLAogICAgICAgICAgICAgICAgIi5uYXZfbGlzdD5saSAual90Ym5hdl90YWJfYVtzdGF0cy1kYXRhKj1cInRhYnZpZGVvXCJdOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTA0YlwiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMjBweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5uYXZfbGlzdD5saSAual90Ym5hdl90YWJfYVtzdGF0cy1kYXRhKj1cInN0X3ZhbHVlPXdhbmxlXCJdOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTMzMlwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLm5hdl9saXN0PmxpIC5qX3RibmF2X3RhYl9hW2hyZWYqPVwidGFiPWdhbWVcIl06YmVmb3JlLCIsCiAgICAgICAgICAgICAgICAiLm5hdl9saXN0PmxpIC5qX3RibmF2X3RhYl9hW3N0YXRzLWRhdGEqPVwidGFicGxheVwiXTpiZWZvcmV7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGUwMjFcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zdGFyX2NsYXNzX25hdj5saSAuc3Rhcl9uYXZfaWNvLnN0YXJfbmF2X2ljb19ncm91cDpiZWZvcmUsIiwKICAgICAgICAgICAgICAgICIubmF2X2xpc3Q+bGkgLmpfdGJuYXZfdGFiX2Fbc3RhdHMtZGF0YSo9XCJ0YWJncm91cFwiXTpiZWZvcmV7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGU3ZWZcIjsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDIwcHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIubmF2X2xpc3Q+bGkgLmpfdGJuYXZfdGFiX2FbaHJlZio9XCIvc2hvdy96aGFucWlcIl06YmVmb3JleyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlNjM5XCI7IiwKICAgICAgICAgICAgICAgICIJdGV4dC1pbmRlbnQ6IDJweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5uYXZfbGlzdD5saSAual90Ym5hdl90YWJfYVtocmVmKj1cInRhYj10dWFuXCJdOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZThjYlwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIuaWhvbWVfbmF2X2xpc3Q+bGkgLm5hdl9pY29uLm5hdl9tYWluOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTg4YVwiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMjJweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5paG9tZV9uYXZfbGlzdD5saSAubmF2X2ljb24ubmF2X21zZzpiZWZvcmV7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGU3ZjRcIjsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDIwcHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuaWhvbWVfbmF2X2xpc3Q+bGkgLm5hdl9pY29uLm5hdl9jb2xsZWN0OmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTg2NVwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmlob21lX25hdl9saXN0PmxpIC5uYXZfaWNvbi5uYXZfY29uY2VybjpiZWZvcmV7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGU4N2RcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5paG9tZV9uYXZfbGlzdD5saSAubmF2X2ljb24ubmF2X3Bvc3Q6YmVmb3JleyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlMjRkXCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuaWhvbWVfbmF2X2xpc3Q+bGkgLm5hdl9pY29uLm5hdl9hY2hpZXZlOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTU0NVwiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMjBweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zdGFyX2NsYXNzX3RpcHsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIvKuW4luWtkOaOkuW6j+aMiemSriovIiwKICAgICAgICAgICAgICAgICIudGhyZWFkX2xpc3Rfb3JkZXIgeyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZTsiLAogICAgICAgICAgICAgICAgIgl0b3A6IGF1dG87IiwKICAgICAgICAgICAgICAgICIJYm90dG9tOiAwOyIsCiAgICAgICAgICAgICAgICAiCWN1cnNvcjogcG9pbnRlcjsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJd2hpdGUtc3BhY2U6IG5vd3JhcDsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDA7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLWxlZnQ6IDEycHg7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICM3Nzc7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDE2cHg7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCA4cHg7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZy10b3A6IDRweDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItcmFkaXVzOiA0cHggNHB4IDAgMDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLC4wNik7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbjogY29sb3IgLjRzIGVhc2U7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkX2xpc3Rfb3JkZXI6aG92ZXJ7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICM0NDQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkX2xpc3Rfb3JkZXI6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZThmZVwiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMThweDsiLAogICAgICAgICAgICAgICAgIglmb250LWZhbWlseTogXCdNYXRlcmlhbCBJY29uc1wnOyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGlubGluZS1ibG9jazsiLAogICAgICAgICAgICAgICAgIgl2ZXJ0aWNhbC1hbGlnbjogdG9wOyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1yaWdodDogMnB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZF9saXN0X29yZGVyOmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIuaMieWbnuWkjeaOkuW6j1wiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTJweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLyrlkKflhoXmkJzntKIqLyIsCiAgICAgICAgICAgICAgICAiLnN0YXJfbmF2X2J0bnNfd3JhcCwiLAogICAgICAgICAgICAgICAgIi5zZWFyY2hfaW50ZXJuYWxfd3JhcHsiLAogICAgICAgICAgICAgICAgIglmbG9hdDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogNDRweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaXppbmc6IGJvcmRlci1ib3g7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogNnB4IDEwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTglICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWluLXdpZHRoOiAyNDBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiByZWxhdGl2ZTsiLAogICAgICAgICAgICAgICAgIgkgbWFyZ2luLWxlZnQ6IDEyJSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnNlYXJjaF9pbnRlcm5hbF93cmFwLnB1bGxfcmlnaHR7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogZmxleDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5qX3NlYXJjaF9pbnRlcm5hbF9mb3JteyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiByZWxhdGl2ZTsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTAwJTsiLAogICAgICAgICAgICAgICAgIglib3gtc2l6aW5nOiBib3JkZXItYm94OyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6ZmxleDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zZWFyY2hfaW50ZXJuYWxfaW5wdXR7IiwKICAgICAgICAgICAgICAgICIJZmxleDogMTsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBibG9jazsiLAogICAgICAgICAgICAgICAgIglmbG9hdDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAzMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjA0KTsiLAogICAgICAgICAgICAgICAgIglvdXRsaW5lOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCA4cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItYm90dG9tOiA0cHggc29saWQgcmdiYSgwLCAwLCAwLCAuMDQpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm94LXNpemluZzogYm9yZGVyLWJveDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogIzY2NiAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTJweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAyNnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc2VhcmNoX2ludGVybmFsX3BsYWNlaG9sZGVyeyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiBkYXJrZ3JleSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZTsiLAogICAgICAgICAgICAgICAgIgl0b3A6IDFweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWxlZnQ6IDhweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAyNnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxMnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc2VhcmNoX2ludGVybmFsX2J0bnsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAuMDQpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLWJvdHRvbTogNHB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgLjA0KSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaXppbmc6IGJvcmRlci1ib3g7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLWxlZnQ6IDRweDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDMwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMzBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGlubGluZS1ibG9jazsiLAogICAgICAgICAgICAgICAgIglmbG9hdDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXZlcnRpY2FsLWFsaWduOiB0b3A7IiwKICAgICAgICAgICAgICAgICIJdGV4dC1pbmRlbnQ6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogcmVsYXRpdmU7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi5zZWFyY2hfaW50ZXJuYWxfaW5wdXQsIiwKICAgICAgICAgICAgICAgICIuc2VhcmNoX2ludGVybmFsX2J0bnsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXByb3BlcnR5OiBiYWNrZ3JvdW5kLCBib3JkZXItYm90dG9tOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZHVyYXRpb246IC41czsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zZWFyY2hfaW50ZXJuYWxfaW5wdXQ6Zm9jdXN7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAuNCkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItYm90dG9tOiA0cHggc29saWQgcmdiYSgwLCAwLCAwLCAuMikgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zZWFyY2hfaW50ZXJuYWxfYnRuOmhvdmVyeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4wNikgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItYm90dG9tOiA0cHggc29saWQgcmdiYSgwLCAwLCAwLCAuMSkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zZWFyY2hfaW50ZXJuYWxfYnRuOmJlZm9yZSwiLAogICAgICAgICAgICAgICAgIi5qX3NlYXJjaF9pbnRlcm5hbF9mb3JtOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGU4YjZcIjsiLAogICAgICAgICAgICAgICAgIglmb250LWZhbWlseTogXCdNYXRlcmlhbCBJY29uc1wnOyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjOTk5OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMjBweDsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGU7IiwKICAgICAgICAgICAgICAgICIJcmlnaHQ6IC01cHg7IiwKICAgICAgICAgICAgICAgICIJdG9wOiAxM3B4OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpIHRyYW5zbGF0ZVkoMXB4KTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi8q6LS05a2Q5YaF5a656aG15Y+z5L6nKi8iLAogICAgICAgICAgICAgICAgIi5yaWdodF9zZWN0aW9uIHsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDI0MHB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnJpZ2h0X3NlY3Rpb24geyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAyNDBweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5yaWdodF9zZWN0aW9uID5kaXYgeyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5yaWdodF9zZWN0aW9uID5kaXZbaWRdIHsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLyrpppbpobXluJblrZDliJfooajlnZcqLyIsCiAgICAgICAgICAgICAgICAiLmZvcnVtX2NvbnRlbnR7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogZmxleDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiNjb250ZXRfd3JhcCwiLAogICAgICAgICAgICAgICAgIiNjb250ZW50X3dyYXAgeyIsCiAgICAgICAgICAgICAgICAiCWZsZXg6IDE7IiwKICAgICAgICAgICAgICAgICIJYm94LXNpemluZzogYm9yZGVyLWJveDsiLAogICAgICAgICAgICAgICAgIglmbG9hdDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIjYXNpZGUgeyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxOCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltaW4td2lkdGg6IDI0MHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm94LXNpemluZzogYm9yZGVyLWJveDsiLAogICAgICAgICAgICAgICAgIglmbG9hdDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGJsb2NrOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnJlZ2lvbl9oZWFkZXIsIiwKICAgICAgICAgICAgICAgICIucmVnaW9uX2JyaWdodCA+IC50aXRsZSwiLAogICAgICAgICAgICAgICAgIi5yZWdpb25fYnJpZ2h0ID4gLnRyaXBfdGl0bGUsIiwKICAgICAgICAgICAgICAgICIuYXNpZGVfYWxidW1fZ29vZF90aXRsZSwiLAogICAgICAgICAgICAgICAgIi56eXFfYnJpZ2h0IC5tb2QgLnRseyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMCwwLDAsLjA0KTsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDI4cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMjhweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDE0cHg7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDEwMCU7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAxMHB4OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1sZWZ0OiAtMTBweDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogIzc3NyAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnJlZ2lvbl90aXRsZSwiLAogICAgICAgICAgICAgICAgIi5yZWdpb25fdGl0bGUgYSwiLAogICAgICAgICAgICAgICAgIi56eXFfbW9kX3RpdGxlLCIsCiAgICAgICAgICAgICAgICAiLmFzaWRlX2FsYnVtX2dvb2RfdGl0bGUgc3BhbiwiLAogICAgICAgICAgICAgICAgIi5yZWdpb25fYnJpZ2h0ID4gLnRpdGxlIGgxeyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiBpbmhlcml0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZm9udC13ZWlnaHQ6IGJvbGQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IGluaGVyaXQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDE0cHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucmVnaW9uX2hlYWRlciBhLCIsCiAgICAgICAgICAgICAgICAiLmFzaWRlX2FsYnVtX2dvb2RfdGl0bGUgYSwiLAogICAgICAgICAgICAgICAgIi56eXFfYnJpZ2h0IC5tb2QgLnRsIGF7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6IGluaGVyaXQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWRlY29yYXRpb246IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5hc2lkZV9yZWdpb24geyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci10b3A6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnJlZ2lvbl9icmlnaHQgeyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci10b3A6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiBub25lOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnp5cV9icmlnaHQgLm1vZCwiLAogICAgICAgICAgICAgICAgIi5hc2lkZV9hbGJ1bV9nb29kX2JyaWdodHsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuYXNpZGVfcmVnaW9uLCIsCiAgICAgICAgICAgICAgICAiLnJlZ2lvbl9icmlnaHQsIiwKICAgICAgICAgICAgICAgICIuenlxX2JyaWdodCAubW9kLCIsCiAgICAgICAgICAgICAgICAiLmFzaWRlX2FsYnVtX2dvb2RfYnJpZ2h0eyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDAsMCwwLC4wNik7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi5hc2lkZV9hbGJ1bV9nb29kX3RpdGxlPmFbaHJlZl0sIiwKICAgICAgICAgICAgICAgICIucmVnaW9uX2hlYWRlciAual9vcCBheyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGlubGluZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMCAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglvcGFjaXR5OiAuNTsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uOiBvcGFjaXR5IC40cyBlYXNlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnJlZ2lvbl9oZWFkZXIgLmpfb3B7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuYXNpZGVfYWxidW1fZ29vZF90aXRsZT5hW2hyZWZdOmhvdmVyLCIsCiAgICAgICAgICAgICAgICAiLnJlZ2lvbl9oZWFkZXIgLmpfb3AgYTpob3ZlcnsiLAogICAgICAgICAgICAgICAgIglvcGFjaXR5OiAxOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmFzaWRlX2FsYnVtX2dvb2RfdGl0bGU+YVtocmVmXTphZnRlciwiLAogICAgICAgICAgICAgICAgIi5yZWdpb25faGVhZGVyIC5qX29wIGE6YWZ0ZXJ7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCdcXGU1ZDNcJzsiLAogICAgICAgICAgICAgICAgIglmb250LWZhbWlseTogXCdNYXRlcmlhbCBJY29uc1wnIDsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDI4cHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucmVnaW9uX2hlYWRlciAual9vcCBhLnBfYmFsdl9idG5tYW5hZ2VyOmFmdGVyLCIsCiAgICAgICAgICAgICAgICAiLnJlZ2lvbl9oZWFkZXIgLmpfb3AgYS5qX3p5cV9tb2RfZWRpdF9lbnRyeTphZnRlcnsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcJ1xcZTg2OVwnOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTZweDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tcmlnaHQ6IDRweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51c2VyX2xldmVsLCIsCiAgICAgICAgICAgICAgICAiLm15X2N1cnJlbnRfZm9ydW17IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IHN0YXRpYyAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnVzZXJfbGV2ZWwgLnRpdGxlLCIsCiAgICAgICAgICAgICAgICAiLm15X2N1cnJlbnRfZm9ydW0gLnRpdGxleyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5teV9jdXJyZW50X2ZvcnVtIC5iYWRnZSwiLAogICAgICAgICAgICAgICAgIi51c2VyX2xldmVsIC5iYWRnZXsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogcmVsYXRpdmU7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAyNHB4OyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAyNHB4OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlcjogMXB4IHJnYmEoMCwwLDAsLjEpIHNvbGlkICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogNHB4OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMCwwLDAsLjA0KTsiLAogICAgICAgICAgICAgICAgIglvdmVyZmxvdzogaGlkZGVuOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLm15X2N1cnJlbnRfZm9ydW0gLmJhZGdlX2luZGV4LCIsCiAgICAgICAgICAgICAgICAiLnVzZXJfbGV2ZWwgLmJhZGdlX2luZGV4eyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZTsiLAogICAgICAgICAgICAgICAgIgl0b3A6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcmlnaHQ6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDEwMCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogaW5oZXJpdCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMCwwLDAsLjMpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNmZmYgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl6LWluZGV4OiAxOyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDA7IiwKICAgICAgICAgICAgICAgICIJdGV4dC1hbGlnbjogY2VudGVyOyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAyNHB4OyIsCiAgICAgICAgICAgICAgICAiCXRleHQtaW5kZW50OiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZm9udC1mYW1pbHk6IGluaGVyaXQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51c2VyX2xldmVsIC5iYWRnZV9uYW1lLCIsCiAgICAgICAgICAgICAgICAiLm15X2N1cnJlbnRfZm9ydW0gLmJhZGdlX25hbWUgeyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZTsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogNzJweDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogIzRDNEM0QzsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWFsaWduOiBjZW50ZXI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudXNlcl9sZXZlbCAuZXhwLCIsCiAgICAgICAgICAgICAgICAiLm15X2N1cnJlbnRfZm9ydW0gLmV4cHsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZXhwX2JhciB7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMTZweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMCwwLDAsLjEpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmV4cF9iYXJfY3VycmVudCB7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMCwwLDAsLjEpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZXhwX251bSB7IiwKICAgICAgICAgICAgICAgICIJdG9wOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDE2cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDEycHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5yZWdpb25fY250OmhvdmVyIC5leHBfbnVtIHsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBibG9jazsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5leHBfYmFyIHNwYW4sIiwKICAgICAgICAgICAgICAgICIuZXhwX2JhciAuZXhwX2N1cnJlbnRfbnVtIHsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogIzY2NiAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiI2NvbnRlbnRfbGVmdExpc3QsIiwKICAgICAgICAgICAgICAgICJkaXZbaWQ9XCJwYWdlbGV0X2Zycy1saXN0L3BhZ2VsZXQvdGhyZWFkX2xpc3RcIl0sIiwKICAgICAgICAgICAgICAgICIjdGhyZWFkX2xpc3QsIiwKICAgICAgICAgICAgICAgICIual90aHJlYWRfbGlzdCwiLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X2JyaWdodCAudF9jb257IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6MTAwJSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaXppbmc6IGJvcmRlci1ib3g7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlcjogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfYnJpZ2h0IGxpLnRocmVhZF90b3BfbGlzdF9mb2xkZXJ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmludGVydmlldyAudGhyZWFkTGlzdEdyb3VwQ250LCIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfYnJpZ2h0IGxpeyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDAsMCwwLC4wNikgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIC40cyBlYXNlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfYnJpZ2h0IGxpOmxhc3Qtb2YtdHlwZXsiLAogICAgICAgICAgICAgICAgIglib3JkZXItYm90dG9tOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIvKi5pbnRlcnZpZXcgLnRocmVhZExpc3RHcm91cENudDpob3ZlciwqLyIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfYnJpZ2h0IGxpOmhvdmVyeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMCwwLDAsLjAyKSIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfYnJpZ2h0IC50aHJlYWRfcGljX2JyaWdodCwiLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X2JyaWdodCAudF9jb24geyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDEycHggMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGZsZXg7IiwKICAgICAgICAgICAgICAgICIJYWxpZ24taXRlbXM6IHN0cmV0Y2g7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF9saV9sZWZ0LCIsCiAgICAgICAgICAgICAgICAiLmpfdGhyZWFkbGlzdF9saV9sZWZ0eyIsCiAgICAgICAgICAgICAgICAiCWZsb2F0OiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDglICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWluLXdpZHRoOiA3NXB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAxNHB4IDAgMTBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaXppbmc6IGJvcmRlci1ib3g7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLXRvcDogLTNweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiByZWxhdGl2ZTsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBmbGV4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfcmVwX251bSB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogcmdiYSgwLDAsMCwuMDQpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJb3ZlcmZsb3c6IGhpZGRlbjsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTAwJSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMjRweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAyNHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdGV4dC1hbGlnbjogY2VudGVyOyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjNjY2OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItcmFkaXVzOjEycHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF9saV9yaWdodCwiLAogICAgICAgICAgICAgICAgIi5qX3RocmVhZGxpc3RfbGlfcmlnaHR7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZmxvYXQ6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWZsZXg6IDE7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IHN0YXRpYyAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfYnJpZ2h0IC50aHJlYWRsaXN0X2x6LCIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfYnJpZ2h0IC50aHJlYWRsaXN0X2RldGFpbHsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTAwJSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGZsZXg7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfYnJpZ2h0IC50aHJlYWRsaXN0X2x6eyIsCiAgICAgICAgICAgICAgICAiCW92ZXJmbG93OiB2aXNpYmxlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfYnJpZ2h0IC50aHJlYWRsaXN0X2RldGFpbHsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLXRvcDogNHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF9icmlnaHQgLnRocmVhZGxpc3RfdGl0bGUsIiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF9icmlnaHQgLnRocmVhZGxpc3RfdGV4dHsiLAogICAgICAgICAgICAgICAgIglmbG9hdDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZmxleDogMTsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBmbGV4OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1yaWdodDogMjBweDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm94LXNpemluZzogYm9yZGVyLWJveDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IGF1dG8gIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglvdmVyZmxvdzogdmlzaWJsZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X2JyaWdodCAudGhyZWFkbGlzdF9hYnNfb25seWxpbmV7IiwKICAgICAgICAgICAgICAgICIJZmxleDogMSAxIDEwMCU7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF9icmlnaHQgLnRocmVhZGxpc3RfdGV4dHsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDEycHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglmbGV4LXdyYXA6IHdyYXA7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF9icmlnaHQgLnRocmVhZGxpc3RfdGl0bGV7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAyNHB4IWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMTdweCFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxNHB4IWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglmbGV4LXdyYXA6IG5vd3JhcDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X2JyaWdodCAudGhyZWFkbGlzdF90aXRsZSBhLmpfdGhfdGl0IHsiLAogICAgICAgICAgICAgICAgIglvcmRlcjogMTsiLAogICAgICAgICAgICAgICAgIglmbGV4OiAwIDEgYXV0bzsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsiLAogICAgICAgICAgICAgICAgIglvdmVyZmxvdzogaGlkZGVuOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfYnJpZ2h0IC50aHJlYWRsaXN0X3RpdGxlLnRocmVhZGxpc3RfaW1neyIsCiAgICAgICAgICAgICAgICAiCW92ZXJmbG93OiB2aXNpYmxlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfYnJpZ2h0IC50aHJlYWRsaXN0X3RpdGxlLnRocmVhZGxpc3RfaW1nIGltZ3siLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBub25lOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmludGVydmlldyAudGhyZWFkTGlzdEdyb3VwQ250IC5saXN0VGl0bGVDbnQgLmxpc3RUaHJlYWRUaXRsZSBhLCIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgYS5qX3RoX3RpdCB7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICMyZDY0YjMgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IGluaGVyaXQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X3RpdGxlIGEual90aF90aXQ6aG92ZXIgeyIsCiAgICAgICAgICAgICAgICAiCXRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmludGVydmlldyAudGhyZWFkTGlzdEdyb3VwQ250IC5saXN0VGl0bGVDbnQgLmxpc3RUaHJlYWRUaXRsZSBhOnZpc2l0ZWQsIiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSBhLmpfdGhfdGl0OnZpc2l0ZWQgeyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjNTY2Yzg0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF9icmlnaHQgLnRocmVhZGxpc3RfYWJzX29ubHlsaW5lLCIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfYnJpZ2h0IC50aHJlYWRsaXN0X2Fic3siLAogICAgICAgICAgICAgICAgIgljb2xvcjogIzY2NiAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLnNlZS1sensiLAogICAgICAgICAgICAgICAgIglvcmRlcjogMjsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDEycHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwIDZweDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tbGVmdDogNXB4OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi10b3A6IC0ycHg7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAyMHB4OyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAyMHB4OyIsCiAgICAgICAgICAgICAgICAiCXRleHQtZGVjb3JhdGlvbjogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDRweDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLC4yNSk7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNmZmYgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIC40cyBlYXNlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLnNlZS1sejpob3ZlcnsiLAogICAgICAgICAgICAgICAgIglvcmRlcjogMjsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDEycHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwIDZweDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tbGVmdDogNXB4OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMjBweDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMjBweDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWRlY29yYXRpb246IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItcmFkaXVzOiA0cHg7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogcmdiYSgwLDAsMCwuNCk7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNmZmYgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X2JyaWdodCAudGhyZWFkbGlzdF9hdXRob3J7IiwKICAgICAgICAgICAgICAgICIJZmxvYXQ6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBmbGV4OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxNiUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltaW4td2lkdGg6IDE1NXB4OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmctcmlnaHQ6IDIwcHg7IiwKICAgICAgICAgICAgICAgICIJd2hpdGUtc3BhY2U6IG5vd3JhcDsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglvdmVyZmxvdzogdmlzaWJsZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRiX2ljb25fYXV0aG9yLCIsCiAgICAgICAgICAgICAgICAiLnRiX2ljb25fYXV0aG9yX3JlbHl7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IHJlbGF0aXZlOyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGlubGluZS1ibG9jayAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAyMHB4ICAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAyMHB4ICAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW92ZXJmbG93OiB2aXNpYmxlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZmxleDogMTsiLAogICAgICAgICAgICAgICAgIglmbG9hdDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXotaW5kZXg6IDI7IiwKICAgICAgICAgICAgICAgICIJcG9pbnRlci1ldmVudHM6IG5vbmU7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGJfaWNvbl9hdXRob3IgKiwiLAogICAgICAgICAgICAgICAgIi50Yl9pY29uX2F1dGhvcl9yZWx5ICp7IiwKICAgICAgICAgICAgICAgICIJcG9pbnRlci1ldmVudHM6IGF1dG87IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuaW50ZXJ2aWV3IC50aHJlYWRMaXN0R3JvdXBDbnQgLmxpc3RUaXRsZUNudCAubGlzdFVzZXI6YmVmb3JlLCIsCiAgICAgICAgICAgICAgICAiLmZyc19icmlnaHRfcHJlaWNvbiwiLAogICAgICAgICAgICAgICAgIi50Yl9pY29uX2F1dGhvcjpiZWZvcmUsIiwKICAgICAgICAgICAgICAgICIudGJfaWNvbl9hdXRob3JfcmVseTpiZWZvcmV7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogaW5saW5lLWJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtZmFtaWx5OiBcJ01hdGVyaWFsIEljb25zXCc7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxMnB4OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAzMHB4OyIsCiAgICAgICAgICAgICAgICAiCXZlcnRpY2FsLWFsaWduOiB0b3A7IiwKICAgICAgICAgICAgICAgICIJdGV4dC1hbGlnbjogY2VudGVyOyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjYmJiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmludGVydmlldyAudGhyZWFkTGlzdEdyb3VwQ250IC5saXN0VGl0bGVDbnQgLmxpc3RVc2VyOmJlZm9yZSwiLAogICAgICAgICAgICAgICAgIi50Yl9pY29uX2F1dGhvcjpiZWZvcmV7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDpcIlxcZTdmZFwiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTZweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50Yl9pY29uX2F1dGhvcl9yZWx5OmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OlwiXFxlMGNhXCIiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X2JyaWdodCAuaWNvbl9hdXRob3IsIiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF9icmlnaHQgLmljb25fcmVwbHllcnsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF9hdXRob3IgLmpfdXNlcl9jYXJkLCIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfYXV0aG9yIC5mcnMtYXV0aG9yLW5hbWUgeyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGlubGluZS1ibG9jazsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogYXV0byAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW92ZXJmbG93OiBoaWRkZW47IiwKICAgICAgICAgICAgICAgICIJdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7IiwKICAgICAgICAgICAgICAgICIJd2hpdGUtc3BhY2U6IG5vd3JhcDsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDEycHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF9yZXBseV9kYXRlLCIsCiAgICAgICAgICAgICAgICAiLmZycy1hdXRob3ItbmFtZSB7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxMnB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmZyc19icmlnaHRfcHJlaWNvbnsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGU7IiwKICAgICAgICAgICAgICAgICIJbGVmdDogMDsiLAogICAgICAgICAgICAgICAgIgl0b3A6IDA7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZnJzX2JyaWdodF9wcmVpY29uPip7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAtMnB4IDAgMCA3cHghaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmZyc19icmlnaHRfaWNvbnN7IiwKICAgICAgICAgICAgICAgICIJdmVydGljYWwtYWxpZ246IHRvcCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmctbGVmdDogNnB4OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmctdG9wOiAycHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIvKuW4luWtkOe8qeeVpeWbviovIiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF9icmlnaHQgLnNtYWxsX3dyYXAsIiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF9icmlnaHQgLnNtYWxsX2xpc3R7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IHJlbGF0aXZlOyIsCiAgICAgICAgICAgICAgICAiCXotaW5kZXg6IDI7IiwKICAgICAgICAgICAgICAgICIJcG9pbnRlci1ldmVudHM6IG5vbmU7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF9icmlnaHQgLnNtYWxsX3dyYXAgKjpub3QoLnNtYWxsX2xpc3QpLCIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfYnJpZ2h0IC5zbWFsbF9saXN0ICp7IiwKICAgICAgICAgICAgICAgICIJcG9pbnRlci1ldmVudHM6IGF1dG87IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZmVlZF9pdGVtIC5sYXJnZV9zdGF0dXMsIiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF9icmlnaHQgLm1lZGlhX2JveHsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogcmVsYXRpdmU7IiwKICAgICAgICAgICAgICAgICIJei1pbmRleDogMjsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItdG9wOiBzb2xpZCAxcHggcmdiYSgwLDAsMCwuMDQpOyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmctYm90dG9tOiAyMHB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmZlZWRfaXRlbSAubGFyZ2VfYm94LCIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfYnJpZ2h0IC5tZWRpYV9kaXNwIHsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTAwJSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgNTBweDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IHJlbGF0aXZlOyIsCiAgICAgICAgICAgICAgICAiCWxlZnQ6ICAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm94LXNpemluZzogYm9yZGVyLWJveDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWFsaWduOiBjZW50ZXI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZmVlZF9pdGVtIC50b29scywiLAogICAgICAgICAgICAgICAgIi5tZWRpYV9waWNfY29udHJvbCAudGJfaWNvbl9mYXYsIiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF9icmlnaHQgLm1lZGlhX3BpY19jb250cm9sIHsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogcmVsYXRpdmU7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAzMHB4OyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAzMHB4OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1ib3R0b206IDhweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogaW5saW5lLWJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgMjBweDsiLAogICAgICAgICAgICAgICAgIglib3gtc2hhZG93OiAwIDJweCAycHggLTFweCByZ2JhKDAsIDAsIDAsIDAuMikgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiAjZWVlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogMCAwIDEwcHggMTBweDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogcmdiYSgwLCAwLCAwLCAuMik7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZmVlZF9pdGVtIC50b29sc19mb290Pi5lbnRlcjpiZWZvcmV7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCfov5vlhaXotLTlrZBcJyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmZlZWRfaXRlbSAudG9vbHM+YSwiLAogICAgICAgICAgICAgICAgIi5mZWVkX2l0ZW0gLnRvb2xzX2Zvb3Q+LmVudGVyLCIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfYnJpZ2h0IC5lbnRlcl9wYl93cmFwcGVyPmEsIiwKICAgICAgICAgICAgICAgICIubWVkaWFfcGljX2NvbnRyb2w+YXsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogcmdiYSgwLCAwLCAwLCAuNikgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZC1pbWFnZTogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZmVlZF9pdGVtIC50b29scz5hOmhvdmVyLCIsCiAgICAgICAgICAgICAgICAiLmZlZWRfaXRlbSAudG9vbHNfZm9vdD4uZW50ZXI6aG92ZXIsIiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF9icmlnaHQgLmVudGVyX3BiX3dyYXBwZXI+YTpob3ZlciwiLAogICAgICAgICAgICAgICAgIi5tZWRpYV9waWNfY29udHJvbD5hOmhvdmVyeyIsCiAgICAgICAgICAgICAgICAiCXRleHQtZGVjb3JhdGlvbjogbm9uZTsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogcmdiYSgwLCAwLCAwLCAuOCkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5tZWRpYV9waWNfY29udHJvbCAubGluZSB7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwIDEwcHg7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6IHJnYmEoMCwgMCwgMCwgLjIpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLm1lZGlhX3BpY19jb250cm9sIFtjbGFzc149XCJpY29uX1wiXSwiLAogICAgICAgICAgICAgICAgIi5tZWRpYV9waWNfY29udHJvbCBbY2xhc3MqPVwiIGljb25fXCJdeyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IG5vbmU7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZmVlZF9pdGVtIC50b29scz5hOmJlZm9yZSwiLAogICAgICAgICAgICAgICAgIi5tZWRpYV9waWNfY29udHJvbD5hOmJlZm9yZSwiLAogICAgICAgICAgICAgICAgIi5tZWRpYV9waWNfY29udHJvbD5hOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIglmb250LWZhbWlseTogXCdNYXRlcmlhbCBJY29uc1wnOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc3R5bGU6IG5vcm1hbDsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDIwcHg7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogaW5saW5lLWJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAyMHB4OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMjBweDsiLAogICAgICAgICAgICAgICAgIgl2ZXJ0aWNhbC1hbGlnbjogdG9wOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmZlZWRfaXRlbSAudG9vbHMgLmZvbGRfYnRuOmJlZm9yZSwiLAogICAgICAgICAgICAgICAgIi5tZWRpYV9waWNfY29udHJvbCAual9yZXRyYWN0OmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTMxOFwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmZlZWRfaXRlbSAudG9vbHMgLnNjcmVlbl9mdWxsOmJlZm9yZSwiLAogICAgICAgICAgICAgICAgIi5tZWRpYV9waWNfY29udHJvbCAual95cGljOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTU2YlwiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTZweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5tZWRpYV9waWNfY29udHJvbCAual9yb3RhdGlvbl9sZWZ0OmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTQxOVwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLm1lZGlhX3BpY19jb250cm9sIC5qX3JvdGF0aW9uX3JpZ2h0OmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTQxYVwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLm1lZGlhX3BpY19jb250cm9sIC5qX3BvcF9tZWRpYTpiZWZvcmV7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGU4OWVcIjsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDE2cHg7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLWxlZnQ6IDIwcHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi5tZWRpYV9waWNfY29udHJvbCAudGJfaWNvbl9mYXZ7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlOyIsCiAgICAgICAgICAgICAgICAiCXJpZ2h0OiAtMjBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRvcDogMDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMTAwJSk7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCA4cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWluZGVudDogLTJweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5tZWRpYV9waWNfY29udHJvbCAudGJfaWNvbl9mYXYuZG9uZXsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogI0ZGN0M3QyAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLm1lZGlhX3BpY19jb250cm9sIC50Yl9pY29uX2Zhdi5kb25lOmhvdmVyeyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjZjI0OTQ5ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIubWVkaWFfcGljX2NvbnRyb2wgLnRiX2ljb25fZmF2OmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTg3ZVwiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTZweDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tcmlnaHQ6IC0xcHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIubWVkaWFfcGljX2NvbnRyb2wgLnRiX2ljb25fZmF2LmRvbmU6YmVmb3JleyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlODdkXCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZmVlZF9pdGVtIC50b29sc19mb290LCIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfYnJpZ2h0IC5lbnRlcl9wYl93cmFwcGVyeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlOyIsCiAgICAgICAgICAgICAgICAiCWxlZnQ6IGF1dG87IiwKICAgICAgICAgICAgICAgICIJcmlnaHQ6IDA7IiwKICAgICAgICAgICAgICAgICIJYm90dG9tOiAyMHB4OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZmVlZF9pdGVtIC50b29sc19mb290Pi5lbnRlciwiLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X2JyaWdodCAuZW50ZXJfcGJfd3JhcHBlcj5heyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgMTRweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMzBweDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMzBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRleHQtYWxpZ246IGNlbnRlcjsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDE0cHg7IiwKICAgICAgICAgICAgICAgICIJb3ZlcmZsb3c6IGhpZGRlbjsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3gtc2hhZG93OiAwIDJweCAycHggLTFweCByZ2JhKDAsIDAsIDAsIDAuMikgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiAjZWVlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogMTVweCAwIDAgMTVweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5pY29uX3RocmVhZF9oaWRkZW4geyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZTsiLAogICAgICAgICAgICAgICAgIgl0b3A6IDA7IiwKICAgICAgICAgICAgICAgICIJcmlnaHQ6IDA7IiwKICAgICAgICAgICAgICAgICIJei1pbmRleDogMTsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDA7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXRvcDogMjRweCBzb2xpZCByZ2JhKDAsMCwwLC4yKTsiLAogICAgICAgICAgICAgICAgIglib3JkZXItbGVmdDogMjRweCBzb2xpZCB0cmFuc3BhcmVudDsgIiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb246IGJvcmRlciAuNHMgZWFzZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5pY29uX3RocmVhZF9oaWRkZW46aG92ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci10b3A6IDI0cHggc29saWQgcmdiYSgwLDAsMCwuNCk7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuaWNvbl90aHJlYWRfaGlkZGVuOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGU1Y2RcIjsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGU7IiwKICAgICAgICAgICAgICAgICIJdG9wOiAtMTdweDsiLAogICAgICAgICAgICAgICAgIglyaWdodDogMXB4OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtZmFtaWx5OiBcJ01hdGVyaWFsIEljb25zXCc7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxMnB4OyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAwOyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjZmZmOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmljb25fdG9wX2ZvbGRlciB7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlOyIsCiAgICAgICAgICAgICAgICAiCWxlZnQ6IC0yNXB4OyIsCiAgICAgICAgICAgICAgICAiCXRvcDogMDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMjRweDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IGF1dG87IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogMTBweCAwIDAgMTBweDsiLAogICAgICAgICAgICAgICAgIglib3gtc2hhZG93OiAtMnB4IDJweCAycHggMCByZ2JhKDAsIDAsIDAsIDAuMDgpOyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6ICNmZWZlZmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglvdmVyZmxvdzogaGlkZGVuOyIsCiAgICAgICAgICAgICAgICAiCXdvcmQtYnJlYWs6IGJyZWFrLWFsbDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAxMHB4IDZweDsiLAogICAgICAgICAgICAgICAgIglib3gtc2l6aW5nOiBib3JkZXItYm94OyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAxNnB4OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTJweDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogI2FhYTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5pY29uX3RvcF9mb2xkZXI6aG92ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjNjY2OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmljb25fdG9wX2ZvbGRlcjpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6XCLlsZXlvIDnva7pobZcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnRiX3JpY2hfcG9zdGVyIHsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tbGVmdDogMjBweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50Yl9yaWNoX3Bvc3Rlcl9jb250YWluZXIgeyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmctdG9wOiAyMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIjcGItZm9vdGVyLWhlYWRlcjplbXB0eSB7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLyrop4bpopHmta7nqpcqLyIsCiAgICAgICAgICAgICAgICAiI3BvcF92aWRlb3siLAogICAgICAgICAgICAgICAgIglsZWZ0OiA1MHZ3ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdG9wOiA1MHZoICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcmlnaHQ6IGF1dG8haW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvdHRvbTogYXV0byAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsLTUwJSk7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZy1ib3R0b206IDZweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLyrlj5HluJbnvJbovpHmoYYqLyIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIudGJfcmljaF9wb3N0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAyMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucG9zdGVyX2JvZHkgeyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBvc3Rlcl9oZWFkIHsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTAwJSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tYm90dG9tOiAxMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDI4cHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucG9zdGVyX2hlYWRfdGV4dHsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogYXV0byAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgMTBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMCwwLDAsLjA2KTsiLAogICAgICAgICAgICAgICAgIglib3JkZXItcmFkaXVzOiA2cHg7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICM5OTk7IiwKICAgICAgICAgICAgICAgICIJZm9udC13ZWlnaHQ6IG5vcm1hbCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTRweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBvc3Rlcl9oZWFkX3RleHQ+YXsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogaW5oZXJpdCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogaW5oZXJpdCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtd2VpZ2h0OiBpbmhlcml0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6IGluaGVyaXQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tcmlnaHQ6IDE0cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wb3N0ZXJfaGVhZF90ZXh0PmE6bGFzdC1vZi10eXBleyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1yaWdodDogNHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucG9zdGVyX2hlYWRfdGV4dCAuc3BsaXRfdGV4dCwiLAogICAgICAgICAgICAgICAgIi5wb3N0ZXJfaGVhZF90ZXh0IC5wb3N0X2hlYWRfYnRuX2ljb257IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIucG9zdGVyX2hlYWRfdGV4dD5hOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJZm9udC1mYW1pbHk6IFwnTWF0ZXJpYWwgSWNvbnNcJzsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDE2cHg7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDI0cHg7IiwKICAgICAgICAgICAgICAgICIJdmVydGljYWwtYWxpZ246IHRvcDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWFsaWduOiBjZW50ZXI7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNiYmI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucG9zdGVyX2hlYWRfdGV4dCAuYWRkX3RocmVhZF9idG46YmVmb3JleyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6XCJcXGUyNTNcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wb3N0ZXJfaGVhZF90ZXh0IC5hZGRfdGhyZWFkX2J0blt0aXRsZT1cIuWPkeihqOaWsOi0tFwiXTpiZWZvcmV7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDpcIlxcZTI1NFwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBvc3Rlcl9oZWFkX3RleHQgLmFkZF92b3RlX2J0bjpiZWZvcmV7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDpcIlxcZTAxZFwiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMThweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wb3N0ZXJfaGVhZF90ZXh0IGEuY3VyeyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjNjY2ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucG9zdGVyX2hlYWRfdGV4dCBhLmN1cjpiZWZvcmV7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICM3NzcgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi8q5qCH6aKY57yW6L6R5Z+fKi8iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnRpdGxlX2NvbnRhaW5lciB7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDEwMCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZy1ib3R0b206IDEwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wb3N0ZXJfYm9keSAuZWRpdG9yX3RpdGxlIHsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTAwJSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgMTBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaXppbmc6IGJvcmRlci1ib3ggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglvdXRsaW5lOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxOHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiA0MHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDM2cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItYm90dG9tOiA0cHggc29saWQgcmdiYSgwLCAwLCAwLCAuMDQpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjA0KSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjNjY2ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1wcm9wZXJ0eTogYmFja2dyb3VuZCwgYm9yZGVyLWJvdHRvbTsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWR1cmF0aW9uOiAuNXM7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246IGVhc2U7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucG9zdGVyX2JvZHkgLnRidWlfcGxhY2Vob2xkZXIgeyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMThweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMzZweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAzNnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNiYmIgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIvKuagh+mimOWJjee8gCovIiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi5wcHJlZml4LWxpc3QgeyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogI2Y4ZjhmODsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItYm90dG9tOiA0cHggc29saWQgcmdiYSgwLCAwLCAwLCAuMikgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwb2ludGVyLWV2ZW50czogbm9uZTsiLAogICAgICAgICAgICAgICAgIglvcGFjaXR5OiAwOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNDBweCk7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1wcm9wZXJ0eTogb3BhY2l0eSwgdHJhbnNmb3JtOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZHVyYXRpb246IC41czsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogY3ViaWMtYmV6aWVyKDAuMjMsIDEsIDAuMzIsIDEpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBwcmVmaXgtbGlzdFtzdHlsZSo9XCJibG9ja1wiXSB7IiwKICAgICAgICAgICAgICAgICIJb3BhY2l0eTogMTsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IG5vbmU7IiwKICAgICAgICAgICAgICAgICIJcG9pbnRlci1ldmVudHM6IGF1dG87IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucHByZWZpeC1pdGVtIHsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogIzY2NjsiLAogICAgICAgICAgICAgICAgIgljdXJzb3I6IHBvaW50ZXI7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1wcm9wZXJ0eTogYmFja2dyb3VuZDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWR1cmF0aW9uOiAuNXM7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246IGVhc2U7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZWRpdG9yX2NvbnRlbnRfd3JhcHBlciB7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDEwMCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaXppbmc6IGJvcmRlci1ib3g7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIub2xkX3N0eWxlX3dyYXBwZXIgeyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3gtc2l6aW5nOiBib3JkZXItYm94OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBvc3Rlcl9ib2R5IC5lZHVpLWNvbnRhaW5lciB7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDEwMCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBvc3Rlcl9ib2R5IC5lZHVpLWJvZHktY29udGFpbmVyIHsiLAogICAgICAgICAgICAgICAgIgltaW4taGVpZ2h0OiAyMTZweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmVkdWktYm9keS1jb250YWluZXIgKjo6c2VsZWN0aW9uIHsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMCwwLC4xMik7IiwKICAgICAgICAgICAgICAgICIJdGV4dC1zaGFkb3c6IG5vbmU7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi50Yl9wb3N0ZXJfcGxhY2Vob2xkZXJ7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGVmdDogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRvcDogNTVweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAxNXB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnRiX3Bvc3Rlcl9wbGFjZWhvbGRlciBweyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi8q57yW6L6R5qGG5o6n5Lu25Z+fKi8iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLmVkdWktdG9vbGJhciB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAuMDgpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm94LXNpemluZzogYm9yZGVyLWJveDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItYm90dG9tOiA0cHggc29saWQgcmdiYSgwLCAwLCAwLCAuMSk7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiA0MHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBvc3Rlcl9ib2R5IC5lZHVpLWVkaXRvci1ib2R5IC5lZHVpLWJvZHktY29udGFpbmVyIHsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwIDEwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wb3N0ZXJfYm9keSAuZWRpdG9yX3RpdGxlOmZvY3VzLCIsCiAgICAgICAgICAgICAgICAiLnBvc3Rlcl9ib2R5IC5lZHVpLWVkaXRvci1ib2R5IC5lZHVpLWJvZHktY29udGFpbmVyOmZvY3VzIHsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDIpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLWJvdHRvbTogNHB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgLjIpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZWR1aS1wb3B1cCB7IiwKICAgICAgICAgICAgICAgICIJei1pbmRleDogOSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmVkdWktYnRuLXRvb2xiYXIgeyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZTsiLAogICAgICAgICAgICAgICAgIgl0b3A6IDA7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDEwMCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogNDBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAzNnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm94LXNpemluZzogYm9yZGVyLWJveDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5lZHVpLWJ0biB7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiA0MHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogNjBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglmbG9hdDogbGVmdCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglvdmVyZmxvdzogaGlkZGVuOyIsCiAgICAgICAgICAgICAgICAiCWN1cnNvcjogcG9pbnRlcjsiLAogICAgICAgICAgICAgICAgIglib3gtc2l6aW5nOiBib3JkZXItYm94OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1ib3R0b206IDRweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDApICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1wcm9wZXJ0eTogYm9yZGVyOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZHVyYXRpb246IDFzOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmVkdWktdG9vbGJhciAuZWR1aS1idG4tcmVkLCIsCiAgICAgICAgICAgICAgICAiLmVkdWktdG9vbGJhciAuZWR1aS1idG4tYm9sZCwiLAogICAgICAgICAgICAgICAgIi5lZHVpLXRvb2xiYXIgLmVkdWktYnRuLWZ1bGxzY3JlZW4geyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAzNnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZmxvYXQ6IHJpZ2h0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZWR1aS10b29sYmFyIC5lZHVpLWJ0bltzdHlsZSo9XCJub25lXCJdIHsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZWR1aS1idG46aG92ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1ib3R0b206IDRweCBzb2xpZCByZ2JhKDAsIDAsIDAsIC4yKSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmVkdWktYnRuOmhvdmVyIC5lZHVpLWljb24geyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMzhweCk7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZWR1aS1pY29uIHsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDM2cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1wcm9wZXJ0eTogdHJhbnNmb3JtOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZHVyYXRpb246IC41czsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogY3ViaWMtYmV6aWVyKDAuMjMsIDEsIDAuMzIsIDEpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmVkdWktaWNvbjpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwnXFxlMjJhXCc7IiwKICAgICAgICAgICAgICAgICIJZm9udC1mYW1pbHk6IFwnTWF0ZXJpYWwgSWNvbnNcJzsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBibG9jazsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogIzk5OTsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDI0cHg7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlOyIsCiAgICAgICAgICAgICAgICAiCWxlZnQ6IDUwJTsiLAogICAgICAgICAgICAgICAgIgl0b3A6IDUwJTsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5lZHVpLWljb246YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwn5pyq5a6a5LmJXCc7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICM2NjY7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxMnB4OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZTsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiA1MCU7IiwKICAgICAgICAgICAgICAgICIJdG9wOiA1MCU7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSkgdHJhbnNsYXRlWSgzOHB4KTsiLAogICAgICAgICAgICAgICAgIgl3aGl0ZS1zcGFjZTogbm93cmFwOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmVkdWktaWNvbi1mdWxsc2NyZWVuOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGU1ZDBcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50Yi11ZWRpdG9yLWZ1bGxzY3JlZW4gLmVkdWktaWNvbi1mdWxsc2NyZWVuOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGU1ZDFcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50Yi11ZWRpdG9yLWZ1bGxzY3JlZW4gLmVkdWktaWNvbi1mdWxsc2NyZWVuOmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIui/mOWOn1wiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmVkdWktaWNvbi1mdWxsc2NyZWVuOmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIuWFqOWxj1wiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmVkdWktaWNvbi1ib2xkOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGUyMzhcIjsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tdG9wOiAxcHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZWR1aS1pY29uLWJvbGQ6YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwi5Yqg57KXXCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZWR1aS1pY29uLXJlZDpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlMjNjXCI7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxOHB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmVkdWktaWNvbi1yZWQ6YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwi57qi5a2XXCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZWR1aS1pY29uLXBheXBvc3Q6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTI2M1wiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmVkdWktaWNvbi1wYXlwb3N0OmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIuS7mOi0ueWPr+ingVwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmVkdWktaWNvbi1tZWRhbDpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlODM4XCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZWR1aS1pY29uLW1lZGFsOmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIui0tOWQp+eJueadg1wiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmVkdWktYnRuLW5hbWUtcG9ydHJhaXQgLmVkdWktaWNvbi1tZWRhbDpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlMjUzXCI7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAyMHB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmVkdWktYnRuLW5hbWUtcG9ydHJhaXQgLmVkdWktaWNvbi1tZWRhbDphZnRlciB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCLlj5HluJbmsJTms6FcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5lZHVpLWljb24taW1hZ2U6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTI1MVwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmVkdWktaWNvbi1pbWFnZTphZnRlciB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCLlm77niYdcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5lZHVpLWljb24tdmlkZW86YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTAyY1wiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmVkdWktaWNvbi12aWRlbzphZnRlciB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCLop4bpopFcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5lZHVpLWljb24tbXVzaWM6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTQwNVwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmVkdWktaWNvbi1tdXNpYzphZnRlciB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCLpn7PkuZBcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5lZHVpLWljb24tZm9ybXVsYTpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlMjRhXCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZWR1aS1pY29uLWZvcm11bGE6YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwi5pWw5a2m5YWs5byPXCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZWR1aS1pY29uLWVtb3Rpb246YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTI0ZVwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmVkdWktaWNvbi1lbW90aW9uOmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIuihqOaDhVwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmVkdWktaWNvbi1zY3Jhd2w6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTNiN1wiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmVkdWktaWNvbi1zY3Jhd2w6YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwi5raC6bimXCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZWR1aS1pY29uLWF0dGFjaG1lbnQ6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTJiY1wiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMjZweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5lZHVpLWljb24tYXR0YWNobWVudDphZnRlciB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCLpmYTku7ZcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5lZHVpLWljb24tcXVpY2stcmVwbHk6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTUzOVwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmVkdWktaWNvbi1xdWljay1yZXBseTphZnRlciB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCLlv6vpgJ/lm57luJZcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5lZHVpLWljb24tdG9waWM6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcJyNcJzsiLAogICAgICAgICAgICAgICAgIglmb250LWZhbWlseTogZmFudGFzeTsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDI0cHg7IiwKICAgICAgICAgICAgICAgICIJZm9udC13ZWlnaHQ6IGJvbGQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLXRvcDogLTAuNXB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmVkdWktaWNvbi10b3BpYzphZnRlciB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCLor53pophcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi8q5LuY6LS55Y+v6KeB57yW6L6R5qGGKi8iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnBvc3Rlcl9ib2R5IC5wYXlwb3N0LWZlZS1lZGl0b3IgeyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi10b3A6IDJweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBheXBvc3RfdGRvdV9pcHRfYXJlYSB7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDI2MHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAzNnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDM2cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLWxlZnQ6IDE0cHg7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlOyIsCiAgICAgICAgICAgICAgICAiCXotaW5kZXg6IDE7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIual9wYXlwb3N0X3Rkb3VfaXB0IHsiLAogICAgICAgICAgICAgICAgIglib3gtc2l6aW5nOiBib3JkZXItYm94OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgNnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwIDJweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiA3MHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJb3V0bGluZTogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlcjogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgLjQpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1wcm9wZXJ0eTogYmFja2dyb3VuZDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWR1cmF0aW9uOiAuNXM7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246IGVhc2U7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIual9wYXlwb3N0X3Rkb3VfaXB0OmZvY3VzIHsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIC44KSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBheXBvc3RfZWRpdG9yX2Nsb3NlX3dyYXAgeyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMzZweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wYXlwb3N0X2VkaXRvcl9jbG9zZSB7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDM2cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDM2cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgk7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjOTk5ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucGF5cG9zdF9lZGl0b3JfY2xvc2U6aG92ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjRjQ0MzM2ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucGF5cG9zdF9lZGl0b3JfY2xvc2U6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTVjOVwiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtZmFtaWx5OiBcJ01hdGVyaWFsIEljb25zXCc7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAyNHB4OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZTsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiA1MCU7IiwKICAgICAgICAgICAgICAgICIJdG9wOiA1MCU7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucGF5cG9zdC1mZWUtZWRpdG9yIC5lZHVpLWJ0bi10b29sYmFyIHsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLWxlZnQ6IDI2MHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIvKuetvuWQjeaho+mAieaLqeWfnyovIiwKICAgICAgICAgICAgICAgICIubHpsX3BhbmVsX2Vycm9yLCIsCiAgICAgICAgICAgICAgICAiLnBvc3Rlcl9lcnJvcnsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBpbmxpbmUtYmxvY2sgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3gtc2l6aW5nOiBib3JkZXItYm94OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgMTBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMjZweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAyNnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAuMDgpOyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDAgMCAxMHB4IDEwcHg7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICM5OTkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogcmVsYXRpdmU7IiwKICAgICAgICAgICAgICAgICIJbGVmdDogNTAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmx6bF9wYW5lbF9lcnJvcjplbXB0eSwiLAogICAgICAgICAgICAgICAgIi5wb3N0ZXJfZXJyb3I6ZW1wdHl7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmVkaXRvcl9jb250ZW50X3dyYXBwZXIgLnBvc3Rlcl9lcnJvcnsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGU7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucG9zdGVyX3NoYXJlLCIsCiAgICAgICAgICAgICAgICAiLnBvc3Rlcl9zaWduYXR1cmUgeyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGlubGluZS1ibG9jayAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaXppbmc6IGJvcmRlci1ib3g7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAyMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiA0MHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDQwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIC4wOCk7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogMCAwIDEwcHggMTBweDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogIzk5OSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBvc3Rlcl9oZWFkX3N1cnZlaWxsYW5jZSBhW2hyZWZdLCIsCiAgICAgICAgICAgICAgICAiLnBvc3Rlcl9zaWduYXR1cmUgYVtocmVmXSB7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICM2NjYgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWRlY29yYXRpb246IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wb3N0ZXJfaGVhZF9zdXJ2ZWlsbGFuY2UgYVtocmVmXTpob3ZlciwiLAogICAgICAgICAgICAgICAgIi5wb3N0ZXJfc2lnbmF0dXJlIGFbaHJlZl06aG92ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjOTk5ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucG9zdGVyX3NpZ25hdHVyZVtkaXNwbGF5Kj1cIm5vbmVcIl0geyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wb3N0ZXJfc2hhcmUgPiBsYWJlbCwiLAogICAgICAgICAgICAgICAgIi5wb3N0ZXJfc2lnbmF0dXJlID4gbGFiZWwgeyIsCiAgICAgICAgICAgICAgICAiICAgIHBhZGRpbmc6IDExcHggMDsiLAogICAgICAgICAgICAgICAgIiAgICBsaW5lLWhlaWdodDogMThweDsiLAogICAgICAgICAgICAgICAgIiAgICBjdXJzb3I6IHBvaW50ZXI7IiwKICAgICAgICAgICAgICAgICIgICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTsiLAogICAgICAgICAgICAgICAgIiAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBvc3Rlcl9zaGFyZSBpbnB1dCwiLAogICAgICAgICAgICAgICAgIi5wb3N0ZXJfc2lnbmF0dXJlIGlucHV0IHsiLAogICAgICAgICAgICAgICAgIiAgICBjdXJzb3I6IHBvaW50ZXI7IiwKICAgICAgICAgICAgICAgICIgICAgd2lkdGg6IDE4cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIiAgICBoZWlnaHQ6IDE4cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2sgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIiAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIgICAgbWFyZ2luLXJpZ2h0OiA0cHg7IiwKICAgICAgICAgICAgICAgICIgICAgbWFyZ2luLXRvcDogLTFweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi8q57yW6L6R5qGG5bqV6YOo6Z2i5p2/Ki8iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLmVkaXRvcl9ib3R0b21fcGFuZWwgeyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi10b3A6IDIwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wb3N0ZXJfYm9keSAucG9zdGVyX3N1Ym1pdCB7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAyOHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDI4cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwIDEwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3gtc2l6aW5nOiBjb250ZW50LWJveDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wb3N0ZXItcmlnaHQtYXJlYSB7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDYwMHB4OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiByZWxhdGl2ZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wb3N0ZXJfYm9keSAuc2F2ZS10by1xdWljay1yZXBseS1idG4geyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAxNHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAyOHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDI4cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wb3N0ZXJfYm9keSAuc2F2ZS10by1xdWljay1yZXBseS1idG46YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTE0OVwiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMjRweDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWluZGVudDogLTZweDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tcmlnaHQ6IDJweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zYXZlLXRvLXF1aWNrLXJlcGx5LWJ0biAqIHsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogaW5oZXJpdCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBvc3Rlcl9kcmFmdF9zdGF0dXMgeyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRvcDogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXJpZ2h0OiAxODBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmpfZmxvYXRpbmcgPiAucG9zdGVyX2RyYWZ0X3N0YXR1cyB7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IHJlbGF0aXZlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcmlnaHQ6IDVweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRvcDogLTJweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLyrlj5HluJbmiJDlip/mj5DnpLoqLyIsCiAgICAgICAgICAgICAgICAiLnRiX3Bvc3Rlcl9pbmZvIHsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiA1MCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0b3A6IDUwJSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsLTUwJSkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kLWNvbG9yOiAjNDg3OUJEICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogNnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm94LXNoYWRvdzogMCAycHggOHB4IDAgcmdiYSgwLCAwLCAwLCAwLjIpLCAwIDJweCAxNnB4IDAgcmdiYSgwLCAwLCAwLCAwLjIpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNmZmYgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiA4cHggMjBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRiX3Bvc3Rlcl9pbmZvICp7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6IGluaGVyaXQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wb3N0ZXJfc3VjY2Vzc19jb250ZW50IHsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWFsaWduOiBjZW50ZXI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucG9zdGVyX3N1Y2Nlc3NfY29udGVudCA+ICogeyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGlubGluZS1ibG9jayAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWZsb2F0OiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdmVydGljYWwtYWxpZ246IHRvcDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wb3N0X3N1Y2Nlc3NfZXhwIHsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogNDhweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIvKuaQnOe0ouagjyovIiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi5oZWFkZXJfZGl2aWRlcnsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmU7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc2VhcmNoX2Zvcm0gZm9ybXsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDA7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi5zZWFyY2hfYnJpZ2h0eyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogYXV0byAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCBhdXRvOyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiByZWxhdGl2ZTsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZy10b3A6IDIwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tYm90dG9tOiAyMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi5zZWFyY2hfdG9wLCIsCiAgICAgICAgICAgICAgICAiLnNlYXJjaF9tYWluX3dyYXB7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IHJlbGF0aXZlOyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMzBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm94LXNpemluZzogYm9yZGVyLWJveDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLXJpZ2h0OiAxNHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc2VhcmNoX3RvcHsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBmbGV4OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXotaW5kZXg6IDE7IiwKICAgICAgICAgICAgICAgICIJcG9pbnRlci1ldmVudHM6IG5vbmU7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc2VhcmNoX21haW4sIiwKICAgICAgICAgICAgICAgICIuc2VhcmNoX2Zvcm17IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDEwMCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwICAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3gtc2l6aW5nOiBib3JkZXItYm94OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnNlYXJjaF9mb3JtIHsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBmbGV4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnNlYXJjaF90b3A6YmVmb3JlLCIsCiAgICAgICAgICAgICAgICAiLnNlYXJjaF9sb2dvLCIsCiAgICAgICAgICAgICAgICAiI3NlYXJjaF9sb2dvX3NtYWxsIHsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogc3RhdGljICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDYwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDMwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAzNnB4OyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAgMjhweDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWFsaWduOiBjZW50ZXI7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6IHJnYmEoMCwwLDAsLjIpOyIsCiAgICAgICAgICAgICAgICAiCXBvaW50ZXItZXZlbnRzOiBhdXRvOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnNlYXJjaF90b3A6aG92ZXI6YmVmb3JlIiwKICAgICAgICAgICAgICAgICIuc2VhcmNoX2xvZ286aG92ZXIsIiwKICAgICAgICAgICAgICAgICIjc2VhcmNoX2xvZ29fc21hbGw6aG92ZXIgeyIsCiAgICAgICAgICAgICAgICAiCXRleHQtZGVjb3JhdGlvbjogbm9uZTsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogcmdiYSgwLDAsMCwuNCk7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc2VhcmNoX3RvcDpiZWZvcmUsIiwKICAgICAgICAgICAgICAgICIuc2VhcmNoX2xvZ286YmVmb3JlLCIsCiAgICAgICAgICAgICAgICAiI3NlYXJjaF9sb2dvX3NtYWxsOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGU5MWRcIjsiLAogICAgICAgICAgICAgICAgIglmb250LWZhbWlseTogXCdNYXRlcmlhbCBJY29uc1wnOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnNlYXJjaF9mb3JtICNzZWFyY2hfbG9nb19zbWFsbHsiLAogICAgICAgICAgICAgICAgIgl2aXNpYmlsaXR5OiBoaWRkZW47IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc2VhcmNoX2xvZ28rI3NlYXJjaF9sb2dvX3NtYWxseyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IG5vbmUgICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc2VhcmNoX21haW5fZml4ZWQgI3NlYXJjaF9sb2dvX3NtYWxseyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMzBweDsiLAogICAgICAgICAgICAgICAgIgl2aXNpYmlsaXR5OiB2aXNpYmxlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiI3RiX2hlYWRlcl9zZWFyY2hfZm9ybXsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBmbGV4OyIsCiAgICAgICAgICAgICAgICAiCWZsZXg6IDE7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi5zZWFyY2hfaXB0IHsiLAogICAgICAgICAgICAgICAgIglmbGV4OiAxOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtZmFtaWx5OiBpbmhlcml0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwIDEwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3gtc2l6aW5nOiBib3JkZXItYm94ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJb3V0bGluZTogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlcjogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTRweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMzBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1ib3R0b206IDRweCBzb2xpZCByZ2JhKDAsIDAsIDAsIC4wNCkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIC4wNCkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogIzk5OSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tcHJvcGVydHk6IGJhY2tncm91bmQsIGJvcmRlci1ib3R0b207IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1kdXJhdGlvbjogLjVzOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnNlYXJjaF9pcHQ6Zm9jdXMgeyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjNjY2ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc2VhcmNoX2J0bl93cmFweyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZmxvYXQ6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46MCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnNlYXJjaF9uYXY+YSwiLAogICAgICAgICAgICAgICAgIi5zZWFyY2hfYnRuLCIsCiAgICAgICAgICAgICAgICAiLnNlbmlvci1zZWFyY2gtbGlua3siLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogc3RhdGljICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTAwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDMwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMzBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTRweCAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWFsaWduOiBjZW50ZXI7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogMDsiLAogICAgICAgICAgICAgICAgIgkgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAuMDgpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLWxlZnQ6IDJweCBzb2xpZCByZ2JhKDAsIDAsIDAsIC4wNCkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItYm90dG9tOiA0cHggc29saWQgcmdiYSgwLCAwLCAwLCAuMDQpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJb3V0bGluZTogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3gtc2l6aW5nOiBib3JkZXItYm94OyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjOTk5ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZm9udC1mYW1pbHk6IGluaGVyaXQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWRlY29yYXRpb246IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXByb3BlcnR5OiBib3gtc2hhZG93LCBiYWNrZ3JvdW5kLCBoZWlnaHQsIG1hcmdpbi10b3AsIGNvbG9yOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZHVyYXRpb246IC40czsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZTsiLAogICAgICAgICAgICAgICAgIglmb250LXdlaWdodDogbm9ybWFsICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc2VhcmNoX25hdj5hOmhvdmVyLCIsCiAgICAgICAgICAgICAgICAiLnNlYXJjaF9idG46aG92ZXIsIiwKICAgICAgICAgICAgICAgICIuc2VuaW9yLXNlYXJjaC1saW5rOmhvdmVyeyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMzJweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi10b3A6IC0ycHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogIzY2NiFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAuMDYpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc2VhcmNoX25hdj5hOmFjdGl2ZSwiLAogICAgICAgICAgICAgICAgIi5zZWFyY2hfYnRuOmFjdGl2ZSwiLAogICAgICAgICAgICAgICAgIi5zZW5pb3Itc2VhcmNoLWxpbms6YWN0aXZleyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMjhweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi10b3A6IDJweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgLjEpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc2VhcmNoX25hdj5hOmZpcnN0LW9mLXR5cGUsIiwKICAgICAgICAgICAgICAgICIuc2VhcmNoX2J0bl9lbnRlcl9iYXsiLAogICAgICAgICAgICAgICAgIglib3JkZXItbGVmdDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmpfc2VhcmNoX3Bvc3QgeyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1yaWdodDogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiI3NlYXJjaF9iYWlkdV9wcm9tb3RlIHsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBub25lOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnNfdG9vbHMgeyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zZWFyY2hfbmF2IHsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBmbGV4OyIsCiAgICAgICAgICAgICAgICAiCWZsZXg6IDE7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMjBweCAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAtMjBweCAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiBpbmhlcml0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW9wYWNpdHk6IDA7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc2VhcmNoX25hdiAqeyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zZWFyY2hfbmF2PmF7IiwKICAgICAgICAgICAgICAgICIJZmxleDogMTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zZWFyY2hfbG9nbzpob3ZlcisuaGVhZF9yaWdodF9yZWdpb24gLnNlYXJjaF90b3AsIiwKICAgICAgICAgICAgICAgICIuc2VhcmNoX3RvcDpob3ZlciAuc2VhcmNoX25hdnsiLAogICAgICAgICAgICAgICAgIglvcGFjaXR5OiAxOyIsCiAgICAgICAgICAgICAgICAiCS8q5LqL5Lu25bu26L+f77yM6ZmN5L2O6K+v5pON5L2c546HKi8iLAogICAgICAgICAgICAgICAgIglhbmltYXRpb24tbmFtZTogZXZlbnRvbl9kdXJhdGlvbjsiLAogICAgICAgICAgICAgICAgIglhbmltYXRpb24tZHVyYXRpb246IC44czsiLAogICAgICAgICAgICAgICAgIglhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBsaW5lYXI7IiwKICAgICAgICAgICAgICAgICIJYW5pbWF0aW9uLWZpbGwtbW9kZTogZm9yd2FyZHM7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc2VhcmNoX3RvcDpob3Zlcisuc2VhcmNoX21haW5fd3JhcHsiLAogICAgICAgICAgICAgICAgIglvcGFjaXR5OiAwOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnNlYXJjaF9uYXYsIiwKICAgICAgICAgICAgICAgICIuc2VhcmNoX21haW5fd3JhcHsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXByb3BlcnR5OiBvcGFjaXR5OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZHVyYXRpb246IC40czsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnNlYXJjaF9tYWluX2ZpeGVkIHsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogZml4ZWQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogOHB4IDIwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiAwOyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtY29sb3I6ICNmYWZhZmEgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3gtc2hhZG93OiAwIDJweCA0cHggMCByZ2JhKDAsIDAsIDAsIDAuMDgpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc2VhcmNoX21haW5fZml4ZWQ6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIkRlc2lnbiBieSBNYXZlcmlja1wiOyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBmaXhlZDsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBibG9jazsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDM5cHg7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDYwcHg7IiwKICAgICAgICAgICAgICAgICIJdG9wOiA0NnB4OyIsCiAgICAgICAgICAgICAgICAiCXJpZ2h0OiAyNXB4OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiAjZmFmYWZhOyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDAgMCA0MHB4IDQwcHg7IiwKICAgICAgICAgICAgICAgICIJYm94LXNoYWRvdzogMCAycHggNHB4IDAgcmdiYSgwLCAwLCAwLCAwLjA4KSwgMCAycHggOHB4IDAgcmdiYSgwLCAwLCAwLCAwLjA4KSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnNlYXJjaF9tYWluX2ZpeGVkIC5zZWFyY2hfYnRuX3dyYXArLnNlYXJjaF9idG5fd3JhcHsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tcmlnaHQ6IDE2cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zZWFyY2hfbWFpbl9maXhlZCAuc2VuaW9yLXNlYXJjaC1saW5reyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi8q5pCc57Si5o6o6I2Q5rWu5bGCKi8iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnN1Z2dlc3Rpb24geyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1sZWZ0OiAxcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tdG9wOiAycHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLWJvdHRvbTogMTBweDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItcmFkaXVzOiAwIDAgNHB4IDRweDsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3gtc2hhZG93OiAwIDRweCA4cHggMnB4IHJnYmEoMCwgMCwgMCwgMC4xNik7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwb2ludGVyLWV2ZW50czogbm9uZTsiLAogICAgICAgICAgICAgICAgIglvcGFjaXR5OiAwOyIsCiAgICAgICAgICAgICAgICAiCW1pbi1oZWlnaHQ6IDMwcHg7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTQwcHgpOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tcHJvcGVydHk6IG9wYWNpdHksIHRyYW5zZm9ybTsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWR1cmF0aW9uOiAuNXM7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246IGN1YmljLWJlemllcigwLjIzLCAxLCAwLjMyLCAxKTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zZWFyY2hfbWFpbjpub3QoLnNlYXJjaF9tYWluX2ZpeGVkKSAuc3VnZ2VzdGlvbnsiLAogICAgICAgICAgICAgICAgIgl0b3A6IDI4cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiA2MHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc3VnZ2VzdGlvbjpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwi6L6T5YWl5L2g6KaB5pCc57Si55qE6LS05ZCn77yM5q2k5aSE5bCG5Li65L2g5o+Q5L6b5YCZ6YCJ57uT5p6cXCI7IiwKICAgICAgICAgICAgICAgICIJd2hpdGUtc3BhY2U6IG5vd3JhcDsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGU7IiwKICAgICAgICAgICAgICAgICIJbGVmdDogNTAlOyIsCiAgICAgICAgICAgICAgICAiCXRvcDogNTAlOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjYmJiOyIsCiAgICAgICAgICAgICAgICAiCXotaW5kZXg6IDA7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc3VnZ2VzdGlvbltzdHlsZSo9XCJibG9ja1wiXSB7IiwKICAgICAgICAgICAgICAgICIJb3BhY2l0eTogMTsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06bm9uZTsiLAogICAgICAgICAgICAgICAgIglwb2ludGVyLWV2ZW50czogYXV0bzsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zdWdnZXN0aW9uX2xpc3QgeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6ICNmZmY7IiwKICAgICAgICAgICAgICAgICIJei1pbmRleDogMTsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogcmVsYXRpdmU7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIvKueUqOaIt+mdouadvyovIiwKICAgICAgICAgICAgICAgICIudXNlcmJhciB7IiwKICAgICAgICAgICAgICAgICIJb3ZlcmZsb3c6IHZpc2libGUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogZml4ZWQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0b3A6IDIwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglyaWdodDogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLXJpZ2h0OiAxMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudXNlcmJhICogeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51c2VyYmFyPnVsIHsiLAogICAgICAgICAgICAgICAgIglvdmVyZmxvdzogdmlzaWJsZTsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWFsaWduOiBjZW50ZXI7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLXRvcDogMTBweDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tcmlnaHQ6IDIwcHg7IiwKICAgICAgICAgICAgICAgICIJcGVyc3BlY3RpdmU6IDgwMHB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnVzZXJiYXI+dWw+bGkgeyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMTAwJTsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogcmVsYXRpdmU7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1ib3R0b206IDEwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglvcGFjaXR5OiAxOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zZm9ybS1vcmlnaW46IDEwMCUgNTAlOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tcHJvcGVydHk6IHRyYW5zZm9ybSwgb3BhY2l0eTsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWR1cmF0aW9uOiAxczsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogY3ViaWMtYmV6aWVyKDAuMjMsIDEsIDAuMzIsIDEpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnVzZXJiYXI+dWw+bGksIiwKICAgICAgICAgICAgICAgICIudXNlcmJhcj51bD5saSAqIHsiLAogICAgICAgICAgICAgICAgIglmbG9hdDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnVzZXJiYXI+dWw+bGk6aG92ZXJ+bGkgeyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zZm9ybTogdHJhbnNsYXRlWCg1MHB4KSByb3RhdGVZKC05MGRlZykgdHJhbnNsYXRlWigtNjBweCk7IiwKICAgICAgICAgICAgICAgICIJb3BhY2l0eTogMDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51c2VyYmFyPnVsPmxpLnVfd2FsbGV0OmhvdmVyfmxpLCIsCiAgICAgICAgICAgICAgICAiLnVzZXJiYXI+dWw+bGkudV90Ym1hbGw6aG92ZXJ+bGksIiwKICAgICAgICAgICAgICAgICIudXNlcmJhcj51bD5saS51X2hlcm1lczpob3Zlcn5saSwiLAogICAgICAgICAgICAgICAgIi51c2VyYmFyPnVsPmxpLnVfbG9naW46aG92ZXJ+bGksIiwKICAgICAgICAgICAgICAgICIudXNlcmJhcj51bD5saS51X3JlZzpob3Zlcn5saSB7IiwKICAgICAgICAgICAgICAgICIJb3BhY2l0eTogMTsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IG5vbmU7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudV9tZW51X2l0ZW0geyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiByZWxhdGl2ZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogNTBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiA1MHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogNTAlOyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHRyYW5zcGFyZW50OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaGFkb3c6IDAgMnB4IDRweCAwIHJnYmEoMCwgMCwgMCwgMC4wOCksIDAgMnB4IDhweCAwIHJnYmEoMCwgMCwgMCwgMC4wOCk7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1wcm9wZXJ0eTogYm94LXNoYWRvdywgY29sb3IsIGJhY2tncm91bmQ7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1kdXJhdGlvbjogLjVzOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOiBjdWJpYy1iZXppZXIoMC4yMywgMSwgMC4zMiwgMSk7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudV9tZW51X2l0ZW0udV9tZW51X2hvdmVyLCIsCiAgICAgICAgICAgICAgICAiLnVfbWVudV9pdGVtOmhvdmVyIHsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiAjZmZmOyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaGFkb3c6IDAgMnB4IDhweCAwIHJnYmEoMCwgMCwgMCwgMC4xKSwgMCAycHggMTZweCAwIHJnYmEoMCwgMCwgMCwgMC4wOCk7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICJib2R5Pi51c2VyYmFyPnVsPmxpPmEsIiwKICAgICAgICAgICAgICAgICIudV9tZW51X3dyYXAsIiwKICAgICAgICAgICAgICAgICIudV9tZW51X2l0ZW0+YSB7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogNTAlOyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogNTBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiA1MHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogIzQ4NzlCRCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXByb3BlcnR5OiBiYWNrZ3JvdW5kOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZHVyYXRpb246IDFzOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOiBjdWJpYy1iZXppZXIoMC4yMywgMSwgMC4zMiwgMSk7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICJib2R5Pi51c2VyYmFyPnVsPmxpPmEsIiwKICAgICAgICAgICAgICAgICIudV9oZXJtZXM+LnVfbWVudV9pdGVtPmEgeyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTRweDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMThweDsiLAogICAgICAgICAgICAgICAgIglsZXR0ZXItc3BhY2luZzogMnB4OyIsCiAgICAgICAgICAgICAgICAiCXRleHQtaW5kZW50OiAycHg7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogNnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZy10b3A6IDdweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaXppbmc6IGJvcmRlci1ib3g7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudV9oZXJtZXMgYSwiLAogICAgICAgICAgICAgICAgIi51X2xvZ2luIGEsIiwKICAgICAgICAgICAgICAgICIudV9yZWcgYSB7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNmZmYgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDE2cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogNTBweDsiLAogICAgICAgICAgICAgICAgIglmb250LXdlaWdodDogYm9sZDsiLAogICAgICAgICAgICAgICAgIiAgIHRleHQtZGVjb3JhdGlvbjogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiYm9keT4udXNlcmJhcj51bD4udV9oZXJtZXM+YSwiLAogICAgICAgICAgICAgICAgImJvZHk+LnVzZXJiYXI+dWw+LnVfbG9naW4+YSwiLAogICAgICAgICAgICAgICAgImJvZHk+LnVzZXJiYXI+dWw+LnVfcmVnPmEgeyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaGFkb3c6IDAgMnB4IDRweCAwIHJnYmEoMCwgMCwgMCwgMC4wOCksIDAgMnB4IDhweCAwIHJnYmEoMCwgMCwgMCwgMC4wOCk7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICJib2R5Pi51c2VyYmFyPnVsPi51X2xvZ2luPmEsIiwKICAgICAgICAgICAgICAgICJib2R5Pi51c2VyYmFyPnVsPi51X3JlZz5hIHsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWluZGVudDogMDsiLAogICAgICAgICAgICAgICAgIglsZXR0ZXItc3BhY2luZzogMDsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDE2cHg7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDM0cHg7IiwKICAgICAgICAgICAgICAgICIJYm94LXNoYWRvdzogMCAycHggNHB4IDAgcmdiYSgwLCAwLCAwLCAwLjA4KSwgMCAycHggOHB4IDAgcmdiYSgwLCAwLCAwLCAwLjA4KTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51X2hlcm1lcyBhOmhvdmVyLCIsCiAgICAgICAgICAgICAgICAiLnVfbG9naW4gYTpob3ZlciwiLAogICAgICAgICAgICAgICAgIi51X3JlZyBhOmhvdmVyIHsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiAjNDI4NUY0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudV9tZW51X2hvdmVyOmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudV9uZXdzX3dyYXAgc3BhbiB7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNmZmYgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBibG9jazsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiAjNDg3OUJEICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDEycHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAycHggNHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdGV4dC1hbGlnbjogY2VudGVyICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdG9wOiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm90dG9tOiAtNnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGVmdDogNTAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTJweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDZweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdoaXRlLXNwYWNlOiBub3dyYXAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3gtc2hhZG93OiAwIDFweCAycHggMCByZ2JhKDAsIDAsIDAsIDAuMDgpLCAwIDJweCA0cHggMCByZ2JhKDAsIDAsIDAsIDAuMDgpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnVfZGRsIHsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRvcDogMzhweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWxlZnQ6IDUwJSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTsiLAogICAgICAgICAgICAgICAgIglyaWdodDogYXV0byAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW92ZXJmbG93OiB2aXNpYmxlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcG9pbnRlci1ldmVudHM6IG5vbmU7IiwKICAgICAgICAgICAgICAgICIJb3BhY2l0eTogMDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXByb3BlcnR5OiBvcGFjaXR5OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZHVyYXRpb246IC41czsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogY3ViaWMtYmV6aWVyKDAuMjMsIDEsIDAuMzIsIDEpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnVfbWVudV9ob3Zlcn4udV9kZGwsIiwKICAgICAgICAgICAgICAgICJsaTpob3Zlcj4udV9kZGwgeyIsCiAgICAgICAgICAgICAgICAiCXBvaW50ZXItZXZlbnRzOiBhdXRvOyIsCiAgICAgICAgICAgICAgICAiCW9wYWNpdHk6IDE7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudV9kZGxfY29uIHsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogcmVsYXRpdmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmctYm90dG9tOiAxMHB4OyIsCiAgICAgICAgICAgICAgICAiCW92ZXJmbG93OiB2aXNpYmxlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudV9kZGxfY29uX3RvcCB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51X2RkbF90aXQgeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudV9kZGxfY29uIHVsIHsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBibG9jazsiLAogICAgICAgICAgICAgICAgIglvdmVyZmxvdzogdmlzaWJsZTsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAxMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZy1ib3R0b206IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51X2RkbF9jb24gdWwuc3lzX25vdGlmeV9sYXN0IHsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLXRvcDogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnVfZGRsX2NvbiBsaSB7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLXRvcDogMTBweDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IGF1dG8gIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwcHgpIHJvdGF0ZVkoOTBkZWcpIHRyYW5zbGF0ZVooLTYwcHgpOyIsCiAgICAgICAgICAgICAgICAiCW9wYWNpdHk6IDA7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNmb3JtLW9yaWdpbjogMTAwJSA1MCU7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1wcm9wZXJ0eTogdHJhbnNmb3JtLCBvcGFjaXR5OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZHVyYXRpb246IDFzOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOiBjdWJpYy1iZXppZXIoMC4yMywgMSwgMC4zMiwgMSk7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudV9kZGxfY29uIGxpOm50aC1vZi10eXBlKDEpIHsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWRlbGF5OiAwczsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51X2RkbF9jb24gbGk6bnRoLW9mLXR5cGUoMikgeyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZGVsYXk6IC4wNXM7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudV9kZGxfY29uIGxpOm50aC1vZi10eXBlKDMpIHsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWRlbGF5OiAuMXM7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudV9kZGxfY29uIGxpOm50aC1vZi10eXBlKDQpIHsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWRlbGF5OiAuMTVzOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnVfZGRsX2NvbiBsaTpudGgtb2YtdHlwZSg1KSB7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1kZWxheTogLjJzOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnVfZGRsX2NvbiBsaTpudGgtb2YtdHlwZSg2KSB7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1kZWxheTogLjI1czsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51X2RkbF9jb24gbGk6bnRoLW9mLXR5cGUoNykgeyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZGVsYXk6IC4zczsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51X2RkbF9jb24gbGk6bnRoLW9mLXR5cGUoOCkgeyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZGVsYXk6IC4zNXM7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudV9kZGxfY29uIGxpOm50aC1vZi10eXBlKDkpIHsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWRlbGF5OiAuNHM7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY2F0ZWdvcnlfaXRlbV9sYXN0IHsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWRlbGF5OiAuM3MgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51X21lbnVfaG92ZXJ+LnVfZGRsIC51X2RkbF9jb24gbGksIiwKICAgICAgICAgICAgICAgICJsaTpob3Zlcj4udV9kZGwgLnVfZGRsX2NvbiBsaSB7IiwKICAgICAgICAgICAgICAgICIJb3BhY2l0eTogMTsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IG5vbmU7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudV9kZGxfY29uIGxpIGEgeyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjOTk5ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogI2ZmZiAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGlubGluZS1ibG9jazsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogNTBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogNTBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTIuNXB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGV0dGVyLXNwYWNpbmc6IDJweDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMTkuNXB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogNXB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZy1sZWZ0OiA2cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLXRvcDogNnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJd2hpdGUtc3BhY2U6IG5vcm1hbDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWRlY29yYXRpb246IG5vbmU7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogNTBweDsiLAogICAgICAgICAgICAgICAgIglib3gtc2l6aW5nOiBib3JkZXItYm94ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm94LXNoYWRvdzogMCAycHggNHB4IDAgcmdiYSgwLCAwLCAwLCAwLjA4KSwgMCAycHggOHB4IDAgcmdiYSgwLCAwLCAwLCAwLjA4KTsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXByb3BlcnR5OiBib3gtc2hhZG93LCBjb2xvciwgYmFja2dyb3VuZDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWR1cmF0aW9uOiAuNXM7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246IGN1YmljLWJlemllcigwLjIzLCAxLCAwLjMyLCAxKTsiLAogICAgICAgICAgICAgICAgIglmb250LWZhbWlseTogaW5oZXJpdCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnN5c19ub3RpZnkgbGkgYSB7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiA1MCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51X2RkbF9jb24gbGkgYTpob3ZlciB7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNmZmYgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiAjNDI4NUY0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm94LXNoYWRvdzogMCAycHggOHB4IDAgcmdiYSgwLCAwLCAwLCAwLjEpLCAwIDJweCAxNnB4IDAgcmdiYSgwLCAwLCAwLCAwLjA4KTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51X25vdGl0eV9iZCAuY2F0ZWdvcnlfaXRlbSAudW5yZWFkX251bSwiLAogICAgICAgICAgICAgICAgIi51X25vdGl0eV9iZCAuY2F0ZWdvcnlfaXRlbSAudW5yZWFkLW51bSB7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNhYWE7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogI2ZmZjsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBibG9jazsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMTJweDsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDEycHg7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogMTJweCAwIDAgMTJweDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAycHggMDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLWxlZnQ6IDZweDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLXJpZ2h0OiA0cHg7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlOyIsCiAgICAgICAgICAgICAgICAiCXRvcDogNTAlOyIsCiAgICAgICAgICAgICAgICAiCWxlZnQ6IDFweDsiLAogICAgICAgICAgICAgICAgIglyaWdodDogYXV0bzsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtMTAwJSwgLTUwJSk7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm94LXNoYWRvdzogMCAycHggNHB4IDAgcmdiYSgwLCAwLCAwLCAwLjA4KSwgMCAycHggOHB4IDAgcmdiYSgwLCAwLCAwLCAwLjA4KTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zeXNfbm90aWZ5X2xhc3QgLnVucmVhZC1udW0sIiwKICAgICAgICAgICAgICAgICIuc3lzX25vdGlmeV9sYXN0IC51bnJlYWRfbnVtIHsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiAyNXB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudV9kZGxfY29uIGxpIGE6aG92ZXIgLnVucmVhZC1udW0sIiwKICAgICAgICAgICAgICAgICIudV9kZGxfY29uIGxpIGE6aG92ZXIgLnVucmVhZF9udW0geyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjZmZmOyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6ICM0Mjg1RjQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudV9kZGxfY29uIGxpLnVfbG9nb3V0IGEgeyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAzNnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudV9kZGxfY29uIGxpLnVfbG9nb3V0IGE6aG92ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6ICNGNDQzMzYgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51X2RkbF9jb24gbGkgYVtkYXRhLXR5cGU9XCJhdG1lXCJdLCIsCiAgICAgICAgICAgICAgICAiLnVfZGRsX2NvbiBsaSBhW2RhdGEtdHlwZT1cImZyaWVuZGFwcGx5XCJdLCIsCiAgICAgICAgICAgICAgICAiLnVfZGRsX2NvbiBsaSBhW2RhdGEtdHlwZT1cImZhbnNcIl0geyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnVfZGRsX2NvbiBsaSBhW2RhdGEtdHlwZV06YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDEyLjVweDsiLAogICAgICAgICAgICAgICAgIglsZXR0ZXItc3BhY2luZzogMnB4OyIsCiAgICAgICAgICAgICAgICAiCXRleHQtaW5kZW50OiAycHg7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDE5LjVweDsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudV9kZGxfY29uIGxpIGFbZGF0YS10eXBlPVwiYXRtZVwiXTpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwi5p+l55yLQOaIkVwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnVfZGRsX2NvbiBsaSBhW2RhdGEtdHlwZT1cImZyaWVuZGFwcGx5XCJdOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCLmlrDnmoTlpb3lj4tcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51X2RkbF9jb24gbGkgYVtkYXRhLXR5cGU9XCJmYW5zXCJdOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCLmlrDnmoTnsonkuJ1cIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51X3VzZXJuYW1lX3dyYXAgPiogeyIsCiAgICAgICAgICAgICAgICAiCWZsb2F0OiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudV91c2VybmFtZV9hdmF0YXIgeyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiA1MHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiA1MHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogNTAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl6LWluZGV4OiAxOyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiByZWxhdGl2ZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51X3VzZXJuYW1lX3RpdGxlLCIsCiAgICAgICAgICAgICAgICAiLnVfbWVudV93cmFwOmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgktbW96LW9zeC1mb250LXNtb290aGluZzogZ3JheXNjYWxlOyIsCiAgICAgICAgICAgICAgICAiCS13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkOyIsCiAgICAgICAgICAgICAgICAiCXotaW5kZXg6IDI7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDI1cHg7IiwKICAgICAgICAgICAgICAgICIJd2hpdGUtc3BhY2U6IG5vd3JhcDsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiA1MCU7IiwKICAgICAgICAgICAgICAgICIJdG9wOiA1MCU7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAxMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNmZmY7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAuNikgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItcmFkaXVzOiA0cHg7IiwKICAgICAgICAgICAgICAgICIJb3BhY2l0eTogMDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXByb3BlcnR5OiBvcGFjaXR5OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZHVyYXRpb246IC41czsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogY3ViaWMtYmV6aWVyKDAuMjMsIDEsIDAuMzIsIDEpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnVfdXNlcm5hbWVfdGl0bGV7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxMnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudV9zZXR0aW5nX3dyYXA6YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwi6K6+572uJuacjeWKoVwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnVfd2FsbGV0X3dyYXA6YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiVOixhui0puWNlVwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnVfbmV3c193cmFwOmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIua2iOaBr+mAmuefpVwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnVfdGJtYWxsX3dyYXA6YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiVOixhuWVhuWfjlwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnVfdXNlcm5hbWVfdGl0bGU6YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51X21lbnVfaG92ZXIgLnVfdXNlcm5hbWVfdGl0bGUsIiwKICAgICAgICAgICAgICAgICIudV9tZW51X2l0ZW06aG92ZXIgLnVfdXNlcm5hbWVfdGl0bGUsIiwKICAgICAgICAgICAgICAgICIudV9tZW51X2hvdmVyIC51X21lbnVfd3JhcDphZnRlciwiLAogICAgICAgICAgICAgICAgIi51X21lbnVfaXRlbTpob3ZlciAudV9tZW51X3dyYXA6YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlcjogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW9wYWNpdHk6IDE7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY2F0ZWdvcnlfaXRlbSB7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudV9kZGxfY29ueyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51X21lbnVfaXRlbT5heyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51c2VyYmFyIGksIiwKICAgICAgICAgICAgICAgICIudV9kZGxfYXJyb3csIiwKICAgICAgICAgICAgICAgICIudV9tZW51X2l0ZW0gLmktYXJyb3ctZG93bnsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudV9tZW51X2l0ZW0+YTpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtZmFtaWx5OiBcJ01hdGVyaWFsIEljb25zXCc7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDE7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNmZmY7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAzMHB4OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZTsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiA1MCU7IiwKICAgICAgICAgICAgICAgICIJdG9wOiA1MCU7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudV91c2VybmFtZV93cmFwOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGU3ZmRcIjsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDM2cHg7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLXRvcDogLTJweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51X3dhbGxldF93cmFwOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGU4NTBcIjsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDI4cHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudV9uZXdzX3dyYXA6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTdmNFwiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMzJweDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tdG9wOiAtMnB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnVfdGJtYWxsX3dyYXA6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZThjY1wiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMjhweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51X2FwcF93cmFwOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGUzMjRcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51X3NldHRpbmdfd3JhcDpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlOGI4XCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudV9tZW1iZXJfd3JhcDpiZWZvcmV7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGUxYWNcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51aV9idWJibGVfY29udGVudCB7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGVmdDogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6ICM0ODc5QkQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItcmFkaXVzOiA2cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiA1cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLWxlZnQ6IDdweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaGFkb3c6IDAgMnB4IDRweCAwIHJnYmEoMCwgMCwgMCwgMC4wOCksIDAgMnB4IDhweCAwIHJnYmEoMCwgMCwgMCwgMC4wOCkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogI2ZmZiAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWxldHRlci1zcGFjaW5nOiAxcHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudWlfYnViYmxlX3VwIHsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtMTAwJSwgLTEwMCUpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdG9wOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudWlfYnViYmxlX2Rvd24geyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zZm9ybTogdHJhbnNsYXRlKC0xMDAlLCA1MCUpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm90dG9tOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudWlfYnViYmxlX2NvbnRlbnQgKiB7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNmZmYgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51aV90cmlhbmdsZSB7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGVmdDogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXRvcDogNnB4IHNvbGlkIHRyYW5zcGFyZW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1sZWZ0OiA4cHggc29saWQgIzQ4NzlCRDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItYm90dG9tOiA2cHggc29saWQgdHJhbnNwYXJlbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudWlfdHJpYW5nbGVfdXAgeyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMTAwJSk7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLXRvcDogLTEwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3R0b206IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51aV90cmlhbmdsZV9kb3duIHsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMTAwJSk7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLXRvcDogMTBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvdHRvbTogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnVpX2J1YmJsZV93cmFwIC5jbG9zZV9tc2dfdGlwLCIsCiAgICAgICAgICAgICAgICAiLnVpX2J1YmJsZV9jbG9zZWQgeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51aV9idWJibGVfd3JhcCAuY2xvc2VfbXNnX3RpcDpiZWZvcmUsIiwKICAgICAgICAgICAgICAgICIudWlfYnViYmxlX2Nsb3NlZDpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiWFwiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtd2VpZ2h0OiBib2xkOyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KSBzY2FsZVkoLjgpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiI2NvbV91c2VyYmFyX21lc3NhZ2UudWlfYnViYmxlX3dyYXAgeyIsCiAgICAgICAgICAgICAgICAiCXotaW5kZXg6IDEwMDA0OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBmaXhlZCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiA5MHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcmlnaHQ6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0b3A6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiNjb21fdXNlcmJhcl9tZXNzYWdlIC51aV9idWJibGVfdXAgeyIsCiAgICAgICAgICAgICAgICAiCXRvcDogNDJweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zZm9ybTogdHJhbnNsYXRlWCgtMTAwJSkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kLWNvbG9yOiAjNDg3OUJEICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIjY29tX3VzZXJiYXJfbWVzc2FnZSAudWlfdHJpYW5nbGVfdXAgeyIsCiAgICAgICAgICAgICAgICAiCXRvcDogNDhweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zZm9ybTogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi10b3A6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLyrluJblrZDlhoXpobUqLyIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIucGJfY29udGVudCB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlcjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiByZWxhdGl2ZTsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTAwJSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGZsZXg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIubGVmdF9zZWN0aW9uIHsiLAogICAgICAgICAgICAgICAgIglmbGV4OiAxOyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIubF9wb3N0X2JyaWdodCB7IiwKICAgICAgICAgICAgICAgICIJLyrmpbzlsYIqLyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlcjogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDAsMCwwLC4xKSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDEwMCUhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiByZWxhdGl2ZTsiLAogICAgICAgICAgICAgICAgIglib3gtc2l6aW5nOiBib3JkZXItYm94OyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGZsZXg7IiwKICAgICAgICAgICAgICAgICIJZmxleC13cmFwOiB3cmFwOyIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIubF9wb3N0X2JyaWdodC5ub2JvcmRlcl9ib3R0b20sIiwKICAgICAgICAgICAgICAgICIubF9wb3N0X2JyaWdodDpsYXN0LW9mLXR5cGV7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZF9hdXRob3IsIiwKICAgICAgICAgICAgICAgICIuZF9hdXRob3JfYW5vbnltIHsiLAogICAgICAgICAgICAgICAgIgkvKualvOWxguS9nOiAheagjyovIiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDE4MHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMjBweCAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIubF9wb3N0X2JyaWdodDpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCS8q5L2c6ICF5bGC6IOM5pmvKi8iLAogICAgICAgICAgICAgICAgIgkiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIkRlc2lnbiBieSBNYXZlcmlja1wiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMDsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBibG9jazsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGU7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAxMDAlOyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxODBweDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIC4wMSk7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgcmdiYSgwLDAsMCwuMSkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3gtc2l6aW5nOiBib3JkZXItYm94OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLyrmpbzkuLvmoIfor4YqLyIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIubG91emh1Ymlhb3NoaV93cmFwIHsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmU7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IHJlbGF0aXZlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmxvdXpodWJpYW9zaGkgeyIsCiAgICAgICAgICAgICAgICAiCXRvcDogLTZweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXJpZ2h0OiAxMnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJei1pbmRleDogMTsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDMwcHg7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAzMHB4OyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAzMHB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmxvdXpodWJpYW9zaGkgYSB7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDMwcHg7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAzMHB4OyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAzMHB4OyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiByZ2JhKDAsIDAsIDAsIC4zKSIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmxvdXpodWJpYW9zaGkgYTpob3ZlciB7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6IHJnYmEoMCwgMCwgMCwgLjQpIiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIubG91emh1Ymlhb3NoaSBhOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGU4NTNcIjsiLAogICAgICAgICAgICAgICAgIglmb250LWZhbWlseTogXCdNYXRlcmlhbCBJY29uc1wnOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMjhweDsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJdmVydGljYWwtYWxpZ246IHRvcDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5sb3V6aHViaWFvc2hpX3dyYXAgLnVpX2J1YmJsZV91cCB7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLWxlZnQ6IDM4cHg7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwgLTEwMCUpIHRyYW5zbGF0ZVkoLTZweCkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5sb3V6aHViaWFvc2hpX3dyYXAgLnVpX3RyaWFuZ2xlX3VwIHsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tbGVmdDogMzBweDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IHNjYWxlWCgtMSkgdHJhbnNsYXRlWSgtMTAwJSkgdHJhbnNsYXRlWSgtNHB4KTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi8q5L2c6ICF5bGC5aS05YOP5Z+fKi8iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnBfYXV0aG9yX2ZhY2UgeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgLjA0KSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlcjogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMTEwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTEwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiA0cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXByb3BlcnR5OiBib3gtc2hhZG93OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZHVyYXRpb246IC41czsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wX2F1dGhvcl9mYWNlOmhvdmVyIHsiLAogICAgICAgICAgICAgICAgIglib3gtc2hhZG93OiAwIDFweCAycHggMCByZ2JhKDAsIDAsIDAsIDAuMDgpLCAwIDRweCA0cHggMCByZ2JhKDAsIDAsIDAsIDAuMDgpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBfYXV0aG9yX2ZhY2UgaW1nIHsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTAwJTsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDEwMCU7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIvKuS9nOiAheWxgklE5Z+fKi8iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLmRfYXV0aG9yIC5kX25hbWUgeyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTRweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLyrkvZzogIXlsYLljbDorrDln58qLyIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIuZF9hdXRob3IgLmRfcGJfaWNvbnMgeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgLjIpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiAxcHggc29saWQgI2VlZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLyrkvZzogIXlsYLlpLTooZTln58qLyIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIuZF9iYWRnZV9icmlnaHQgeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgLjA0KSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlcjogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMjhweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAyOHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogMTRweDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogIzY2NjsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXByb3BlcnR5OiBib3gtc2hhZG93OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZHVyYXRpb246IC41czsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5kX2JhZGdlX2JyaWdodFtjbGFzcyo9XCJkX2JhZGdlX2Jhd3VcIl0geyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6ICM0ODc5QkQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogI2ZmZiAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmRfYmFkZ2VfYnJpZ2h0OmhvdmVyIHsiLAogICAgICAgICAgICAgICAgIglib3gtc2hhZG93OiAwIDFweCAycHggMCByZ2JhKDAsIDAsIDAsIDAuMDgpLCAwIDRweCA0cHggMCByZ2JhKDAsIDAsIDAsIDAuMDgpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmRfYmFkZ2VfYnJpZ2h0OmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTg2NlwiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtZmFtaWx5OiBcJ01hdGVyaWFsIEljb25zXCc7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAzNnB4OyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAxOyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZTsiLAogICAgICAgICAgICAgICAgIglyaWdodDogNnB4OyIsCiAgICAgICAgICAgICAgICAiCXRvcDogLTRweDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogcmdiYSgwLCAwLCAwLCAuMik7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZF9iYWRnZV90aXRsZSB7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IGluaGVyaXQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogNzBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiBpbmhlcml0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZF9iYWRnZV90aXRsZV9iYXd1IHsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWluZGVudDogOHB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmRfYmFkZ2VfYnJpZ2h0IC5kX2JhZGdlX2x2IHsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGU7IiwKICAgICAgICAgICAgICAgICIJdG9wOiAtMnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGVmdDogYXV0byAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXJpZ2h0OiAxMi41cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDEwMCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogaW5oZXJpdCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogI2ZmZiAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXotaW5kZXg6IDE7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWFsaWduOiBjZW50ZXI7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDI0cHg7IiwKICAgICAgICAgICAgICAgICIJdGV4dC1pbmRlbnQ6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglmb250LWZhbWlseTogaW5oZXJpdCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmRfYXV0aG9yIC5kX3BiX2ljb25zIC5pY29uX3NhcGFyYXRlciB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmRfcG9zdF9jb250ZW50X21haW4geyIsCiAgICAgICAgICAgICAgICAiCS8q5qW85bGC5Y+z5qCPKi8iLAogICAgICAgICAgICAgICAgIglmbGV4OiAxOyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm94LXNpemluZzogYm9yZGVyLWJveDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi8q5qW85bGC5YaF5a655Z+fKi8iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnBfY29udGVudCB7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMjBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmNvcmVfcmVwbHkgeyIsCiAgICAgICAgICAgICAgICAiCS8q5qW85bGC5LiL5pa55qGG5p62Ki8iLAogICAgICAgICAgICAgICAgIgkiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tcmlnaHQ6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5jb3JlX3JlcGx5OmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlwiOyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IHRhYmxlOyIsCiAgICAgICAgICAgICAgICAiCWNsZWFyOiBib3RoOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnJlcGxhY2VfdGlweyIsCiAgICAgICAgICAgICAgICAiCXRleHQtYWxpZ246IGNlbnRlcjsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMCwwLC42KSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlcjogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgMXB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZy10b3A6IDdweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjZmZmOyIsCiAgICAgICAgICAgICAgICAiCXRleHQtZGVjb3JhdGlvbjogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW9wYWNpdHk6IDEgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIC40cyBlYXNlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnJlcGxhY2VfdGlwOmhvdmVyeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwwLDAsLjQpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucmVwbGFjZV90aXA6YmVmb3JleyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlNWNmXCI7IiwKICAgICAgICAgICAgICAgICIJZm9udC1mYW1pbHk6IFwnTWF0ZXJpYWwgSWNvbnNcJzsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJdmVydGljYWwtYWxpZ246IHRvcDsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDI4cHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucmVwbGFjZV90aXAgLnR4dCB7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiBpbmhlcml0OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDA7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6IGluaGVyaXQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucmVwbGFjZV90aXAgLmV4cGFuZCwiLAogICAgICAgICAgICAgICAgIi5yZXBsYWNlX3RpcCAuaWNvbi1leHBhbmR7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTpub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZm9yYmlkLXNwZWVjaC1iYW5uZXJ7IiwKICAgICAgICAgICAgICAgICIJLyrnpoHoqIB0aXAqLyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci10b3A6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIC4wNCkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTAwJSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaXppbmc6IGJvcmRlci1ib3g7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogOHB4IDEycHggOHB4IDJweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLyrmpbzlsYLkv6Hmga/ln58qLyIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIuY29yZV9yZXBseV90YWlsIHsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTAwJSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1yaWdodDogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiByZWxhdGl2ZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMTBweCAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNiYmIgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglmbG9hdDogcmlnaHQ7IiwKICAgICAgICAgICAgICAgICIJYm94LXNpemluZzogYm9yZGVyLWJveDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIucG9zdC10YWlsLXdyYXAgeyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBzdGF0aWMgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5jb3JlX3JlcGx5X3RhaWwgPiAqLCIsCiAgICAgICAgICAgICAgICAiLmNvcmVfcmVwbHlfdGFpbCA+ICogPiAqIHsiLAogICAgICAgICAgICAgICAgIglmbG9hdDogbGVmdCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBvc3QtdGFpbC13cmFwID4gKiwiLAogICAgICAgICAgICAgICAgIi5wX210YWlsID4gKiB7IiwKICAgICAgICAgICAgICAgICIJZmxvYXQ6IHJpZ2h0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY29yZV9yZXBseV90YWlsID4gKjpub3QoLnBfcmVwbHkpIHsiLAogICAgICAgICAgICAgICAgIgkvKualvOWxguS/oeaBryovIiwKICAgICAgICAgICAgICAgICIJIiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAuMDQpOyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDI4cHg7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDI4cHg7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxNHB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmNvcmVfcmVwbHlfdGFpbCAqIHsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogaW5oZXJpdCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmNvcmVfcmVwbHlfdGFpbCBhW2hyZWZdOmhvdmVyOm5vdCgudGFpbC1pbmZvKSwiLAogICAgICAgICAgICAgICAgIi5wX3JlcGx5OmhvdmVyIHsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogIzk5OSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBvc3QtdGFpbC13cmFwIHsiLAogICAgICAgICAgICAgICAgIgkvKua2iOeBreWIhuWJsue6vyovIiwKICAgICAgICAgICAgICAgICIJIiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucG9zdC10YWlsLXdyYXAgPiAqIHsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDE0cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wX210YWlsID4gbGkgeyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBfbXRhaWwgPiBsaSA+KiB7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxNHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY29yZV9yZXBseV90YWlsIGEgeyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiBpbmhlcml0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY29yZV9yZXBseV90YWlsID4gLnByb3BzX2FwcHJhaXNlX3dyYXAgeyIsCiAgICAgICAgICAgICAgICAiCS8q5qW85bGC5L+h5oGv5Y+z5L6n5ZyG6KeSKi8iLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLXRvcDogNXB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZy1yaWdodDogMTZweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaXppbmc6IGJvcmRlci1ib3g7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IGF1dG87IiwKICAgICAgICAgICAgICAgICIJbWluLXdpZHRoOiAxNnB4OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDAgMTZweCAxNnB4IDA7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIual9qYl9lbGUgeyIsCiAgICAgICAgICAgICAgICAiCS8q5Li+5oqlKi8iLAogICAgICAgICAgICAgICAgIgkiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogcmVsYXRpdmU7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDIwcHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIual9qYl9lbGU6b25seS1jaGlsZCB7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIual9qYl9lbGUgLnBiX2xpc3RfdHJpYW5nbGVfZG93biB7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmpfamJfZWxlID4gYSB7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmx6bF9qYiB7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogaW5saW5lLWJsb2NrICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IHJlbGF0aXZlOyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAyMnB4OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMjJweDsiLAogICAgICAgICAgICAgICAgIgl2ZXJ0aWNhbC1hbGlnbjogdG9wOyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1yaWdodDogNHB4OyIsCiAgICAgICAgICAgICAgICAiCW9wYWNpdHk6IC42OyIsCiAgICAgICAgICAgICAgICAiCXBvaW50ZXItZXZlbnRzOiBhdXRvOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tcHJvcGVydHk6IG9wYWNpdHk7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1kdXJhdGlvbjogLjRzOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmx6bF9qYltzdHlsZSo9XCJub25lXCJdIHsiLAogICAgICAgICAgICAgICAgIglvcGFjaXR5OiAwOyIsCiAgICAgICAgICAgICAgICAiCXBvaW50ZXItZXZlbnRzOiBub25lOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmx6bF9qYl9pbjpiZWZvcmUsIiwKICAgICAgICAgICAgICAgICIual9qYl9lbGUgPiBhOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGUxNjBcIjsiLAogICAgICAgICAgICAgICAgIglmb250LWZhbWlseTogXCdNYXRlcmlhbCBJY29uc1wnOyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAxOyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMjBweDsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGU7IiwKICAgICAgICAgICAgICAgICIJbGVmdDogNTAlOyIsCiAgICAgICAgICAgICAgICAiCXRvcDogNTAlOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLyrliKDpmaQqLyIsCiAgICAgICAgICAgICAgICAiLmx6bF9qYl9pbltkYXRhLWZpZWxkKj1cIlwnZGVsZXRlX21pbmVcJzpcJzFcJ1wiXTpiZWZvcmUsIiwKICAgICAgICAgICAgICAgICIual9qYl9lbGUgPiBhW2RhdGEtZmllbGQqPVwiXCdkZWxldGVfbWluZVwnOlwnMVwnXCJdOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTg3MlwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmx6bF9qYl9pbltkYXRhLWZpZWxkKj1cIlwnZGVsZXRlX21pbmVcJzpcJzFcJ1wiXTpob3ZlcjpiZWZvcmUsIiwKICAgICAgICAgICAgICAgICIual9qYl9lbGUgPiBhW2RhdGEtZmllbGQqPVwiXCdkZWxldGVfbWluZVwnOlwnMVwnXCJdOmhvdmVyOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogI0Y0NDMzNiAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnN1cGVyX2p1YmFvIHsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZTsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiA1MCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogI2ZmZjsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IDFweCBzb2xpZCAjZTVlNWU1OyIsCiAgICAgICAgICAgICAgICAiCXRleHQtYWxpZ246IGNlbnRlcjsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAycHggNXB4OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiA5MHB4OyIsCiAgICAgICAgICAgICAgICAiCXRvcDogMjhweDsiLAogICAgICAgICAgICAgICAgIgl6LWluZGV4OiA1MDAwMjsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDEycHg7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDI4cHg7IiwKICAgICAgICAgICAgICAgICIJb3BhY2l0eTogMDsiLAogICAgICAgICAgICAgICAgIglwb2ludGVyLWV2ZW50czogbm9uZTsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXByb3BlcnR5OiBvcGFjaXR5OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZHVyYXRpb246IC41czsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5qX2piX2VsZTpob3ZlciAuc3VwZXJfanViYW8geyIsCiAgICAgICAgICAgICAgICAiCW9wYWNpdHk6IDE7IiwKICAgICAgICAgICAgICAgICIJcG9pbnRlci1ldmVudHM6IGF1dG87IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIvKuWIoOmZpCovIiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi5wX3Bvc3RfZGVsX215LCIsCiAgICAgICAgICAgICAgICAiLnBfcG9zdF9kZWwsIiwKICAgICAgICAgICAgICAgICIucF9wb3N0X2JhbiB7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogaW5saW5lLWJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgNHB4OyIsCiAgICAgICAgICAgICAgICAiCXRleHQtaW5kZW50OiAtMXB4OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tcHJvcGVydHk6IGNvbG9yLCB0ZXh0LXNoYWRvdzsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWR1cmF0aW9uOiAuNHM7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246IGVhc2U7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucF9wb3N0X2RlbF9teTpob3ZlciwiLAogICAgICAgICAgICAgICAgIi5jb3JlX3JlcGx5X3RhaWwgYS5wX3Bvc3RfZGVsW2hyZWZdOmhvdmVyLCIsCiAgICAgICAgICAgICAgICAiLmNvcmVfcmVwbHlfdGFpbCBhLnBfcG9zdF9iYW5baHJlZl06aG92ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjRjQ0MzM2ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdGV4dC1zaGFkb3c6IDAgMXB4IDJweCByZ2JhKDAsIDAsIDAsIDAuMik7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucF9wb3N0X2RlbF9teTpiZWZvcmUsIiwKICAgICAgICAgICAgICAgICIucF9wb3N0X2RlbDpiZWZvcmUsIiwKICAgICAgICAgICAgICAgICIucF9wb3N0X2JhbjpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtZmFtaWx5OiBcJ01hdGVyaWFsIEljb25zXCc7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogaW5saW5lLWJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMjBweDsiLAogICAgICAgICAgICAgICAgIgl2ZXJ0aWNhbC1hbGlnbjogdG9wOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBfcG9zdF9kZWxfbXk6YmVmb3JlLCIsCiAgICAgICAgICAgICAgICAiLnBfcG9zdF9kZWw6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTg3MlwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBfcG9zdF9iYW46YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTE0YlwiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMThweDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tcmlnaHQ6IDFweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi8q54K56LWeKi8iLAogICAgICAgICAgICAgICAgIi5jb3JlX3JlcGx5X3RhaWwgLmNvbW1vbl9jb21wbGllbnRfY29udGFpbmVyIHsiLAogICAgICAgICAgICAgICAgIglib3JkZXItcmFkaXVzOiAxNHB4OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLWxlZnQ6IDJweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmNvbXBsaWVudF9udW1iZXJ7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogaW5saW5lLWJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmctbGVmdDogMTBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMjhweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmNvbW1vbl9jb21wbGllbnRfY29udGFpbmVyIC5zaG93Q29udGVudHsiLAogICAgICAgICAgICAgICAgIgl0b3A6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50b3RhbF9jb3VudF9udW1iZXJ7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogaW5saW5lLWJsb2NrICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAyOHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDI4cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46MCAycHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50b3RhbF9jb3VudF9udW1iZXIuaGlkZUNvbnRlbnR7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLm5vdF9jb21wbGllbnRfdGhyZWFkLCIsCiAgICAgICAgICAgICAgICAiLmNvbXBsaWVudF90aHJlYWR7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogaW5saW5lLWJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMjhweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCA0cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tcmlnaHQ6IDEwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0b3A6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIDJweCAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wb3N0LXRhaWwtd3JhcCA+IHNwYW4udGFpbC1pbmZvOm50aC1sYXN0LW9mLXR5cGUoMiksIiwKICAgICAgICAgICAgICAgICIucF90YWlsID4gbGk6bnRoLWxhc3Qtb2YtdHlwZSgyKT5zcGFuIHsiLAogICAgICAgICAgICAgICAgIgkvKualvOWxguaVsOagh+ivhiovIiwKICAgICAgICAgICAgICAgICIJIiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlOyIsCiAgICAgICAgICAgICAgICAiCXRvcDogMDsiLAogICAgICAgICAgICAgICAgIglyaWdodDogMDsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBibG9jazsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIC4wNCk7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogMTZweCAwIDAgMTZweDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZy1sZWZ0OiAxMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZy1yaWdodDogMzBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTRweDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDI4cHg7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDI4cHg7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZF9wb3N0X2NvbnRlbnRfZmlyc3RmbG9vciAucG9zdC10YWlsLXdyYXAgPiBzcGFuLnRhaWwtaW5mbzpudGgtbGFzdC1vZi10eXBlKDIpLCIsCiAgICAgICAgICAgICAgICAiLmRfcG9zdF9jb250ZW50X2ZpcnN0Zmxvb3IgLnBfdGFpbCA+IGxpOm50aC1sYXN0LW9mLXR5cGUoMik+c3BhbiB7IiwKICAgICAgICAgICAgICAgICIJLyox5qW85qCH6K+GKi8iLAogICAgICAgICAgICAgICAgIgkiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLXJpZ2h0OiA2cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wX3JlcGx5IHsiLAogICAgICAgICAgICAgICAgIgkvKuWbnuWkjeaMiemSriovIiwKICAgICAgICAgICAgICAgICIJIiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlOyIsCiAgICAgICAgICAgICAgICAiCXRvcDogMDsiLAogICAgICAgICAgICAgICAgIglyaWdodDogMDsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl6LWluZGV4OiAxOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tcHJvcGVydHk6IGNvbG9yOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZHVyYXRpb246IC4yczsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wX3JlcGx5ID4gKiB7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiBpbmhlcml0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDI4cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMjhweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAzMHB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBfcmVwbHkgPiAqOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJZm9udC1mYW1pbHk6IFwnTWF0ZXJpYWwgSWNvbnNcJzsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMjBweDsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiA1MCU7IiwKICAgICAgICAgICAgICAgICIJdG9wOiA1MCU7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucF9yZXBseSAubHpsX2xpbmtfZm9sZCB7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmx6bF9saW5rX3VuZm9sZDpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlMGJmXCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIubHpsX2xpbmtfZm9sZDpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlMzE4XCI7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAyNHB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBfcmVwbHlbZGF0YS1maWVsZCo9XCdcInRvdGFsX251bVwiOm51bGxcJ10gLmx6bF9saW5rX3VuZm9sZDpiZWZvcmUsIiwKICAgICAgICAgICAgICAgICIucF9yZXBseVtkYXRhLWZpZWxkKj1cIlwndG90YWxfbnVtXCc6XCcwXCdcIl0gLmx6bF9saW5rX3VuZm9sZDpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlMGNhXCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucF9yZXBseSA+ICpbc3R5bGUqPVwibm9uZVwiXSB7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBfcmVwbHkgPiAqW3N0eWxlKj1cImlubGluZS1ibG9ja1wiXSwiLAogICAgICAgICAgICAgICAgIi5wX3JlcGx5ID4gKltzdHlsZSo9XCJpbmxpbmVcIl0geyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIubF9wb3N0X2JyaWdodCAuY29yZV9yZXBseV93cmFwcGVyIHsiLAogICAgICAgICAgICAgICAgIgkvKualvOS4realvOahhuaetiovIiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAuMDIpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXRvcDogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgLjA0KSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi10b3A6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTAwJSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaXppbmc6IGJvcmRlci1ib3g7IiwKICAgICAgICAgICAgICAgICIJZmxvYXQ6IHJpZ2h0OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiByZWxhdGl2ZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5jb3JlX3JlcGx5X3dyYXBwZXIgLmxvYWRpbmdfcmVwbHkgeyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDUwJTsiLAogICAgICAgICAgICAgICAgIgktd2Via2l0LWZpbHRlcjogZ3JheXNjYWxlKDEpOyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZTsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiA1MCU7IiwKICAgICAgICAgICAgICAgICIJdG9wOiA1MCU7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwtNTAlKTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5jb3JlX3JlcGx5X2JvcmRlcl90b3AgeyIsCiAgICAgICAgICAgICAgICAiCS8q5qW85Lit5qW85qGG5p626aG25o+P6L65Ki8iLAogICAgICAgICAgICAgICAgIgkiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY29yZV9yZXBseV9jb250ZW50IHsiLAogICAgICAgICAgICAgICAgIgkvKualvOS4realvOWGheWuueahhuaetiovIiwKICAgICAgICAgICAgICAgICIJIiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY29yZV9yZXBseV9ib3JkZXJfYm90dG9teyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5jb3JlX3JlcGx5X2NvbnRlbnQgbGkgeyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci10b3A6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIC4wNCk7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIubHpsX2NvbnRlbnRfcmVwbHkgeyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjNjY2ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIubHpsX2NvbnRlbnRfcmVwbHkgYSB7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6IGluaGVyaXQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5semxfbGlfcGFnZXJfcyB7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICM2NjYgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5pbnRlcnZpZXcgLnRocmVhZExpc3RHcm91cENudCAudUljb25DbnQsIiwKICAgICAgICAgICAgICAgICIubHpsX3BfcCB7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMnB4OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgLjA0KSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLyrmpbzkuK3mpbxNT1JFKi8iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLmx6bF9tb3JlIHsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAzMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDMwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwIDhweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmctcmlnaHQ6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIC4wNCkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogaW5oZXJpdCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTRweDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItcmFkaXVzOiAycHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIubHpsX21vcmUgLmpfbHpsX20geyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGlubGluZS1ibG9jazsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwIDZweDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogaW5oZXJpdCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDAgMnB4IDJweCAwOyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1sZWZ0OiAtNHB4OyIsCiAgICAgICAgICAgICAgICAiCXRleHQtaW5kZW50OiA2cHg7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1wcm9wZXJ0eTogYmFja2dyb3VuZCwgY29sb3I7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1kdXJhdGlvbjogLjJzOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmx6bF9tb3JlIC5qX2x6bF9tOmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTVkM1wiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMzBweDsiLAogICAgICAgICAgICAgICAgIglmb250LWZhbWlseTogXCdNYXRlcmlhbCBJY29uc1wnOyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGlubGluZS1ibG9jazsiLAogICAgICAgICAgICAgICAgIgl2ZXJ0aWNhbC1hbGlnbjogdG9wOyIsCiAgICAgICAgICAgICAgICAiCXRleHQtaW5kZW50OiAwOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmx6bF9saV9wYWdlcl9zPi5idG4tc3ViIHsiLAogICAgICAgICAgICAgICAgIgkvKuaIkeS5n+ivtOS4gOWPpeaMiemSriovIiwKICAgICAgICAgICAgICAgICIJIiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAzMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDMwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwIDhweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgLjA0KSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiBpbmhlcml0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1wcm9wZXJ0eTogYmFja2dyb3VuZCwgY29sb3I7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1kdXJhdGlvbjogLjJzOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmx6bF9tb3JlIC5qX2x6bF9tOmhvdmVyLCIsCiAgICAgICAgICAgICAgICAiLmx6bF9saV9wYWdlcl9zPi5idG4tc3ViOmhvdmVyIHsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogI2ZmZiAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgLjMpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIubHpsX2xpX3BhZ2VyX3MgLmljb24tcmVwbHkgeyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5semxfbGlfcGFnZXJfcz4uYnRuLXN1YjpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlMTVlXCI7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAyNHB4OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtZmFtaWx5OiBcJ01hdGVyaWFsIEljb25zXCc7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogaW5saW5lLWJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCXZlcnRpY2FsLWFsaWduOiB0b3A7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLXRvcDogLTFweDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWluZGVudDogLTJweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5semxfbGlfcGFnZXJfcz4uYnRuLXN1YjphZnRlciB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCLlm57lpI3lsYLkuLtcIjsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDE0cHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIvKualvOS4realvOi+k+WFpeahhuahhuaetiovIiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi5lZHVpLWNvbnRhaW5lciB7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDEwMCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5lZHVpLWVkaXRvci1ib2R5IHsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IGF1dG8gIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmx6bF9zaW1wbGVfd3JhcHBlciwiLAogICAgICAgICAgICAgICAgIi5lZHVpLWJvZHktY29udGFpbmVyIHsiLAogICAgICAgICAgICAgICAgIgkvKui+k+WFpeahhiovIiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IHJlbGF0aXZlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWluLWhlaWdodDogNjBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm94LXNpemluZzogYm9yZGVyLWJveDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwIDEwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglyZXNpemU6IHZlcnRpY2FsOyIsCiAgICAgICAgICAgICAgICAiCW91dGxpbmU6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDQpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLWJvdHRvbTogNHB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgLjA0KSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tcHJvcGVydHk6IGJhY2tncm91bmQsIGJvcmRlci1ib3R0b207IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1kdXJhdGlvbjogLjVzOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmx6bF9zaW1wbGVfd3JhcHBlciBweyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogaW5saW5lLWJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZTsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiA1MCU7IiwKICAgICAgICAgICAgICAgICIJdG9wOiA1MCU7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwtNTAlKTsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogIzk5OTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51ZWdfcG1jLWxpbmt7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogaW5saW5lLWJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgNHB4OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMCwwLDAsLjEpOyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDRweDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tbGVmdDogMnB4OyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjNjY2OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tcHJvcGVydHk6IGNvbG9yLGJhY2tncm91bmQ7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1kdXJhdGlvbjogLjRzOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnVlZ19wbWMtbGluazpob3ZlcnsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLC4yNik7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6I2ZmZjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5lZHVpLWJvZHktY29udGFpbmVyOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJEZXNpZ24gYnkgTWF2ZXJpY2tcIjsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDA7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlOyIsCiAgICAgICAgICAgICAgICAiCWJvdHRvbTogMDsiLAogICAgICAgICAgICAgICAgIglyaWdodDogMDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTBweDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDEwcHg7IiwKICAgICAgICAgICAgICAgICIJY3Vyc29yOiBucy1yZXNpemU7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZWR1aS1ib2R5LWNvbnRhaW5lcjpmb2N1cyB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjAyKSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1ib3R0b206IDRweCBzb2xpZCAjNDg3OUJEICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIubHpsX2VkaXRvcl9jb250YWluZXIgLmx6bF9wYW5lbF93cmFwcGVyIHsiLAogICAgICAgICAgICAgICAgIgkvKualvOS4realvOaOp+S7tuWfnyovIiwKICAgICAgICAgICAgICAgICIJIiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDEwMCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi8q5Y+R6KGo5oyJ6ZKuKi8iLAogICAgICAgICAgICAgICAgIiN2b3RlRmxhc2hQYW5lbCAudm90ZV9idXR0b25zIGJ1dHRvbiwiLAogICAgICAgICAgICAgICAgIi5semxfcGFuZWxfc3VibWl0LCIsCiAgICAgICAgICAgICAgICAiLmx6bF9wYW5lbF9zdWJtaXRfZGlzYWJsZWQsIiwKICAgICAgICAgICAgICAgICIucG9zdGVyX3N1Ym1pdCwiLAogICAgICAgICAgICAgICAgIi5xcF9zdWJtaXQsIiwKICAgICAgICAgICAgICAgICIuc2F2ZS10by1xdWljay1yZXBseS1idG4geyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kLWNvbG9yOiAjNDg3OUJEICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNmZmYgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogNjBweDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDI2cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMjZweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlcjogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDEzcHg7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCA0cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWluZGVudDogM3B4OyIsCiAgICAgICAgICAgICAgICAiCXRleHQtYWxpZ246IGNlbnRlcjsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXByb3BlcnR5OiBiYWNrZ3JvdW5kLCBib3gtc2hhZG93OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZHVyYXRpb246IC40czsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5semxfcGFuZWxfc3VibWl0X2Rpc2FibGVkeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwwLDAsLjQpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIubHpsX3BhbmVsX3N1Ym1pdF9kaXNhYmxlZDpiZWZvcmV7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDpcIuWPkeihqFwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmx6bF9wYW5lbF9zdWJtaXQ6YWZ0ZXIsIiwKICAgICAgICAgICAgICAgICIubHpsX3BhbmVsX3N1Ym1pdF9kaXNhYmxlZDphZnRlciwiLAogICAgICAgICAgICAgICAgIi5wb3N0ZXJfc3VibWl0OmFmdGVyLCIsCiAgICAgICAgICAgICAgICAiLnFwX3N1Ym1pdDphZnRlciwiLAogICAgICAgICAgICAgICAgIi5zYXZlLXRvLXF1aWNrLXJlcGx5LWJ0bjpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlMTYzXCI7IiwKICAgICAgICAgICAgICAgICIJZm9udC1mYW1pbHk6IFwnTWF0ZXJpYWwgSWNvbnNcJzsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDE4cHg7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogaW5saW5lLWJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCXZlcnRpY2FsLWFsaWduOiB0b3A7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLWxlZnQ6IDJweDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tdG9wOiAtMXB4OyIsCiAgICAgICAgICAgICAgICAiCXRleHQtaW5kZW50OiAycHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIjdm90ZUZsYXNoUGFuZWwgLnZvdGVfYnV0dG9ucyBidXR0b246aG92ZXIsIiwKICAgICAgICAgICAgICAgICIubHpsX3BhbmVsX3N1Ym1pdDpob3ZlciwiLAogICAgICAgICAgICAgICAgIi5wb3N0ZXJfc3VibWl0OmhvdmVyLCIsCiAgICAgICAgICAgICAgICAiLnFwX3N1Ym1pdDpob3ZlciwiLAogICAgICAgICAgICAgICAgIi5zYXZlLXRvLXF1aWNrLXJlcGx5LWJ0bjpob3ZlciB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZC1jb2xvcjogIzQyODVGNCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaGFkb3c6IDAgMXB4IDJweCAwIHJnYmEoMCwgMCwgMCwgMC4yKSwgMCAxcHggNnB4IDAgcmdiYSgwLCAwLCAwLCAwLjA4KTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5semxfcGFuZWxfc21pbGUgeyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIvKuihqOaDhemAieaLqeaMiemSriovIiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi5semxfaW5zZXJ0c21pbGV5X2hvbGRlciwiLAogICAgICAgICAgICAgICAgIi5xcF9pbnNlcnRzbWlsZXlfaG9sZGVyLCIsCiAgICAgICAgICAgICAgICAiLmludGVydmlldyAucXBfaW50ZXJ2aWV3X2luc2VydHNtaWxleSB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMjZweDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMjZweDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogIzQ4NzlCRCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAzMHB4OyIsCiAgICAgICAgICAgICAgICAiCXRleHQtYWxpZ246IGNlbnRlcjsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXByb3BlcnR5OiBjb2xvciwgdGV4dC1zaGFkb3c7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1kdXJhdGlvbjogLjRzOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlOyIsCiAgICAgICAgICAgICAgICAiCWN1cnNvcjogcG9pbnRlcjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5semxfaW5zZXJ0c21pbGV5X2hvbGRlcjpob3ZlciwiLAogICAgICAgICAgICAgICAgIi5xcF9pbnNlcnRzbWlsZXlfaG9sZGVyOmhvdmVyIHsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogIzQyODVGNCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRleHQtc2hhZG93OiAwIDFweCAycHggcmdiYSgwLCAwLCAwLCAwLjIpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmludGVydmlldyAudGhyZWFkTGlzdEdyb3VwQ250IC5taW5pIC5wbGFjZWhvbGRlcjpiZWZvcmUsIiwKICAgICAgICAgICAgICAgICIubHpsX2luc2VydHNtaWxleV9ob2xkZXI6YmVmb3JlLCIsCiAgICAgICAgICAgICAgICAiLnFwX2luc2VydHNtaWxleV9ob2xkZXI6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTI0ZVwiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtZmFtaWx5OiBcJ01hdGVyaWFsIEljb25zXCc7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IGluaGVyaXQ7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAyNHB4OyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGlubGluZS1ibG9jazsiLAogICAgICAgICAgICAgICAgIgl2ZXJ0aWNhbC1hbGlnbjogdG9wOyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1sZWZ0OiAycHg7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLXRvcDogLTFweDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWluZGVudDogMnB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLyrmpbzkuK3mpbzooajmg4XpgInmoYYqLyIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIubHpsX2VkdWlfZGlhbG9nX2NvbnRhaW5lciB7IiwKICAgICAgICAgICAgICAgICIJbGVmdDogLTM5MHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdG9wOiAzNHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZW1vdGlvbl9jb250YWluZXIgLnNfdGFiX2NvbnRlbnQgLnNlbGVjdGVkIC5zX3RhYl9idG5iZyB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtY29sb3I6ICM0ODc5QkQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5kX3NpZ25fc3BsaXQgeyIsCiAgICAgICAgICAgICAgICAiCS8q562+5ZCN5qGj5YiG5Ymy57q/Ki8iLAogICAgICAgICAgICAgICAgIgkiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDEwMCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAuMDgpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIual91c2VyX3NpZ257IiwKICAgICAgICAgICAgICAgICIJLyrnrb7lkI3moaMqLyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMTBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnNvZmFfcG9zdCB7IiwKICAgICAgICAgICAgICAgICIJLyrmspnlj5HlsYIqLyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGZsZXg7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTAwJTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zb2ZhX2NvbnRlbnQgeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc29mYV9jb250ZW50IC5jb3JlX3JlcGx5X3RhaWwgeyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBzdGF0aWMgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zb2ZhX2NvbnRlbnQgLnBfdGFpbCB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnNvZmFfY29udGVudCAucF90YWlsID4gbGk6bnRoLWxhc3Qtb2YtdHlwZSgxKT5zcGFuIHsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGU7IiwKICAgICAgICAgICAgICAgICIJbGVmdDogMDsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBibG9jazsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIC4wNCk7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6IGluaGVyaXQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItcmFkaXVzOiAwIDE2cHggMTZweCAwOyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLWxlZnQ6IDZweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmctcmlnaHQ6IDE2cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDE0cHg7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAyOHB4OyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAyOHB4OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnNvZmFfY29udGVudCAucF90YWlsID4gbGk6bnRoLWxhc3Qtb2YtdHlwZSgyKT5zcGFuIHsiLAogICAgICAgICAgICAgICAgIgl0b3A6IGF1dG8gIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX3dyYXBfYnJpZ2h0IHsiLAogICAgICAgICAgICAgICAgIgkvKuW4luWtkOagh+mimCovIiwKICAgICAgICAgICAgICAgICIJIiwKICAgICAgICAgICAgICAgICIJdG9wOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJb3ZlcmZsb3c6IHZpc2libGUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTAwJSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IG5vbmU7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYmEoMCwwLDAsLjEpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIvKuaMveWwiiovIiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi5zYXZlX2ZhY2VfYmcgeyIsCiAgICAgICAgICAgICAgICAiCW9wYWNpdHk6IDA7IiwKICAgICAgICAgICAgICAgICIJdG9wOiAtMXB4OyIsCiAgICAgICAgICAgICAgICAiCXJpZ2h0OiAyM3B4OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tcHJvcGVydHk6IG9wYWNpdHk7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1kdXJhdGlvbjogLjVzOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmxfcG9zdF9icmlnaHQ6aG92ZXIgLnNhdmVfZmFjZV9iZyB7IiwKICAgICAgICAgICAgICAgICIJb3BhY2l0eTogMTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi8q6ZqQ6JeP55So5oi3Ki8iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnVzZXItaGlkZS1wb3N0LWRvd24sIiwKICAgICAgICAgICAgICAgICIudXNlci1oaWRlLXBvc3QtdXAgeyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcmlnaHQ6IDJweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRvcDogMnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNiYmIgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDIwcHg7IiwKICAgICAgICAgICAgICAgICIJY3Vyc29yOiBwb2ludGVyOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tcHJvcGVydHk6IGNvbG9yLG9wYWNpdHk7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1kdXJhdGlvbjogLjVzOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnVzZXItaGlkZS1wb3N0LWRvd25bc3R5bGUqPVwibm9uZVwiXSB7IiwKICAgICAgICAgICAgICAgICIJb3BhY2l0eTogMDsiLAogICAgICAgICAgICAgICAgIglwb2ludGVyLWV2ZW50czogbm9uZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51c2VyLWhpZGUtcG9zdC1kb3duOmhvdmVyLCIsCiAgICAgICAgICAgICAgICAiLnVzZXItaGlkZS1wb3N0LXVwOmhvdmVyIHsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogIzk5OSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnVzZXItaGlkZS1wb3N0LWRvd246YmVmb3JlLCIsCiAgICAgICAgICAgICAgICAiLnVzZXItaGlkZS1wb3N0LXVwOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJZm9udC1mYW1pbHk6IFwnTWF0ZXJpYWwgSWNvbnNcJzsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJdmVydGljYWwtYWxpZ246IHRvcDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51c2VyLWhpZGUtcG9zdC1kb3duOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGUxNWNcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51c2VyLWhpZGUtcG9zdC11cDpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlNDA5XCI7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNmb3JtOiBzY2FsZSgxLjUpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnVzZXItaGlkZS1wb3N0LWFjdGlvbiB7IiwKICAgICAgICAgICAgICAgICIJcmlnaHQ6IDI2cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0b3A6IDFweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDZweDsiLAogICAgICAgICAgICAgICAgIglvdmVyZmxvdzogaGlkZGVuOyIsCiAgICAgICAgICAgICAgICAiCS1tb3otdXNlci1zZWxlY3Q6IG5vbmU7IiwKICAgICAgICAgICAgICAgICIJLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51c2VyLWhpZGUtcG9zdC1hY3Rpb24gYSB7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMnB4IDhweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tcHJvcGVydHk6IGNvbG9yLCBiYWNrZ3JvdW5kOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZHVyYXRpb246IC40czsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi51c2VyLWhpZGUtcG9zdC1hY3Rpb24gYTpob3ZlciB7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNmZmYgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiAjYWFhICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY29yZV9yZXBseV93cmFwcGVyIC51c2VyLWhpZGUtcG9zdC1kb3duLCIsCiAgICAgICAgICAgICAgICAiLmNvcmVfcmVwbHlfd3JhcHBlciAudXNlci1oaWRlLXBvc3QtdXAgeyIsCiAgICAgICAgICAgICAgICAiCXJpZ2h0OiAtOHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdG9wOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxOHB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmNvcmVfcmVwbHlfd3JhcHBlciAudXNlci1oaWRlLXBvc3QtYWN0aW9uIHsiLAogICAgICAgICAgICAgICAgIglyaWdodDogMTRweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRvcDogLTJweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBiX2xpc3RfcGFnZXIsIiwKICAgICAgICAgICAgICAgICIubF9yZXBseV9udW0geyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMjVweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBibG9jazsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogcmVsYXRpdmU7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6IGluaGVyaXQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5sX3JlcGx5X251bSB7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAyMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIubF9yZXBseV9udW0+c3BhbiB7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxMnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiBpbmhlcml0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDE4cHg7IiwKICAgICAgICAgICAgICAgICIJZmxvYXQ6IGxlZnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLXRvcDogMTNweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmxfcmVwbHlfbnVtPnNwYW46bnRoLW9mLXR5cGUoMSk6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIuWbnuWkje+8mlwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmxfcmVwbHlfbnVtPnNwYW46bnRoLW9mLXR5cGUoMik6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tbGVmdDogMTJweDsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIumhteaVsO+8mlwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBfdGhyZWFkIHsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTAwJSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiByZWxhdGl2ZTsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJLW1vei11c2VyLXNlbGVjdDogbm9uZTsiLAogICAgICAgICAgICAgICAgIgktd2Via2l0LXVzZXItc2VsZWN0OiBub25lOyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogNDVweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMCwwLDAsLjAyKSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDAsMCwwLC4xKSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjNjY2OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBfdGhyZWFkLnRocmVhZF90aGVtZV83IHsiLAogICAgICAgICAgICAgICAgIglib3JkZXItdG9wOiAxcHggc29saWQgcmdiYSgwLDAsMCwuMSkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5sX3RocmVhZF9pbmZvIHsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDEwMCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTAwJSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGZsZXg7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmxfdGhyZWFkX2luZm8gPiAqIHsiLAogICAgICAgICAgICAgICAgIglmbG9hdDogbGVmdCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmxfcG9zdHNfbnVtIHsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDEwMCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglmbG9hdDogbGVmdDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdoaXRlLXNwYWNlOiBub3dyYXA7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAwOyIsCiAgICAgICAgICAgICAgICAiCWZsZXg6IDEiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5sX3Bvc3RzX251bSBsaSB7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogaW5saW5lLWJsb2NrICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdmVydGljYWwtYWxpZ246IHRvcDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3gtc2l6aW5nOiBib3JkZXItYm94OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmxfcG9zdHNfbnVtID4gbGk6ZW1wdHksIiwKICAgICAgICAgICAgICAgICIudGhyZWFkX3RoZW1lX2JyaWdodF9hYnNvbHV0ZSAubF9wb3N0c19udW0gPiBsaTplbXB0eSB7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiI3RvZnJzX3VwIHsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucGJfbGlzdF9wYWdlciB7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZy10b3A6IDEwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLWxlZnQ6IDIwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5pdGJfcGFnZXIgPiosIiwKICAgICAgICAgICAgICAgICIucGFnaW5hdGlvbi1kZWZhdWx0ID4qLCIsCiAgICAgICAgICAgICAgICAiLnBhZ2VyID4qLCIsCiAgICAgICAgICAgICAgICAiLmpfcGFnZXIgPiosIiwKICAgICAgICAgICAgICAgICIucGJfbGlzdF9wYWdlciA+KiB7IiwKICAgICAgICAgICAgICAgICIJZmxvYXQ6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBpbmxpbmUtYmxvY2sgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWFsaWduOiBjZW50ZXI7IiwKICAgICAgICAgICAgICAgICIJbWluLXdpZHRoOiAxM3B4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDI1cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDI1cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwIDEwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglvdmVyZmxvdzogdmlzaWJsZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiBpbmhlcml0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAuMDUpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogMTIuNXB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1wcm9wZXJ0eTogYmFja2dyb3VuZDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWR1cmF0aW9uOiAuNXM7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246IGN1YmljLWJlemllcigwLjIzLCAxLCAwLjMyLCAxKTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wYWdpbmF0aW9uLWRlZmF1bHQgPi5wYWdpbmF0aW9uLWN1cnJlbnQsIiwKICAgICAgICAgICAgICAgICIucGFnZXIgPiAuY3VyLCIsCiAgICAgICAgICAgICAgICAiLmpfcGFnZXIgPiAudFAsIiwKICAgICAgICAgICAgICAgICIucGJfbGlzdF9wYWdlciA+IC50UCB7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNmZmYgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIC4zKSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuaXRiX3BhZ2VyID5hOmhvdmVyLCIsCiAgICAgICAgICAgICAgICAiLnBhZ2luYXRpb24tZGVmYXVsdCA+YTpob3ZlciwiLAogICAgICAgICAgICAgICAgIi5wYWdlciA+YTpob3ZlciwiLAogICAgICAgICAgICAgICAgIi5qX3BhZ2VyID5hOmhvdmVyLCIsCiAgICAgICAgICAgICAgICAiLnBiX2xpc3RfcGFnZXIgPmE6aG92ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgLjEpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucF90aHJlYWQgaW5wdXQgeyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiByZWxhdGl2ZTsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogODBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMzBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4wNCk7IiwKICAgICAgICAgICAgICAgICIJb3V0bGluZTogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlcjogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgNHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLXRvcDogN3B4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLWJvdHRvbTogNHB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgLjA0KSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaXppbmc6IGJvcmRlci1ib3g7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxOHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDI2cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLXRvcDogNHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdGV4dC1hbGlnbjogY2VudGVyOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tcHJvcGVydHk6IHRyYW5zZm9ybSwgYm94LXNoYWRvdywgYmFja2dyb3VuZDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWR1cmF0aW9uOiAuNXM7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246IGN1YmljLWJlemllcigwLjIzLCAxLCAwLjMyLCAxKTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wX3RocmVhZCBpbnB1dDo6LXdlYmtpdC1pbm5lci1zcGluLWJ1dHRvbiB7IiwKICAgICAgICAgICAgICAgICIJLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBfdGhyZWFkIGlucHV0Ojotd2Via2l0LW91dGVyLXNwaW4tYnV0dG9uIHsiLAogICAgICAgICAgICAgICAgIgktd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucF90aHJlYWQgaW5wdXR+YnV0dG9uIHsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBibG9jazsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGU7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDgwcHg7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRvcDogN3B4OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMzBweDsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IDA7IiwKICAgICAgICAgICAgICAgICIJb3V0bGluZTogbm9uZTsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMDsiLAogICAgICAgICAgICAgICAgIglwb2ludGVyLWV2ZW50czogbm9uZTsiLAogICAgICAgICAgICAgICAgIglhbmltYXRpb24tbmFtZTogZXZlbnRvZmZfZHVyYXRpb247IiwKICAgICAgICAgICAgICAgICIJYW5pbWF0aW9uLWR1cmF0aW9uOiAuNXM7IiwKICAgICAgICAgICAgICAgICIJYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogbGluZWFyOyIsCiAgICAgICAgICAgICAgICAiCWFuaW1hdGlvbi1maWxsLW1vZGU6IGZvcndhcmRzOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tcHJvcGVydHk6IHRyYW5zZm9ybTsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWR1cmF0aW9uOiAuNXM7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246IGN1YmljLWJlemllcigwLjIzLCAxLCAwLjMyLCAxKTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnBfdGhyZWFkIGlucHV0fmJ1dHRvbjphZnRlciB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcIjsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGU7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxNnB4OyIsCiAgICAgICAgICAgICAgICAiCWxlZnQ6IDhweDsiLAogICAgICAgICAgICAgICAgIgl0b3A6IDA7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDI4cHg7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6IHJnYmEoMCwgMCwgMCwgMC41KTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wX3RocmVhZCBpbnB1dFtpZF49XCJqdW1wUGFnZVwiXX5idXR0b246YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwi6Lez6L2s5Yiw6aG1XCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucF90aHJlYWQgaW5wdXRbbmFtZT1cImVsZXZhdG9yRmxvb3JcIl1+YnV0dG9uOmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIui3s+i9rOWIsOalvFwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBfdGhyZWFkIGlucHV0W2lkXj1cImp1bXBQYWdlXCJdOmZvY3VzfmJ1dHRvbjphZnRlciB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCLpobVcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wX3RocmVhZCBpbnB1dFtuYW1lPVwiZWxldmF0b3JGbG9vclwiXTpmb2N1c35idXR0b246YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwi5qW8XCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucF90aHJlYWQgaW5wdXQ6Zm9jdXMgeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6ICM0ODc5QkQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogI2ZmZiAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaGFkb3c6IDAgMnB4IDhweCAwIHJnYmEoMCwgMCwgMCwgMC4yKSwgMCAycHggMTJweCAwIHJnYmEoMCwgMCwgMCwgMC4xKTsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IHNjYWxlKDEuNSk7IiwKICAgICAgICAgICAgICAgICIJei1pbmRleDogOTk5OTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wX3RocmVhZCBpbnB1dDpmb2N1c35idXR0b24geyIsCiAgICAgICAgICAgICAgICAiCWFuaW1hdGlvbjogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBvaW50ZXItZXZlbnRzOiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNmb3JtOiBzY2FsZSgxLjUpOyIsCiAgICAgICAgICAgICAgICAiCXotaW5kZXg6IDk5OTk7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucF90aHJlYWQgaW5wdXQ6Zm9jdXN+YnV0dG9uOmJlZm9yZSwiLAogICAgICAgICAgICAgICAgIi5wX3RocmVhZCBpbnB1dDpmb2N1c35idXR0b246YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZTsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDE0cHg7IiwKICAgICAgICAgICAgICAgICIJdG9wOiAwOyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAzMHB4OyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjZmZmOyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6ICM0ODc5QkQ7IiwKICAgICAgICAgICAgICAgICIJYm94LXNoYWRvdzogMCAycHggOHB4IDAgcmdiYSgwLCAwLCAwLCAwLjIpLCAwIDJweCAxMnB4IDAgcmdiYSgwLCAwLCAwLCAwLjEpOyIsCiAgICAgICAgICAgICAgICAiCWFuaW1hdGlvbi1kdXJhdGlvbjogLjVzOyIsCiAgICAgICAgICAgICAgICAiCWFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246IGVhc2U7IiwKICAgICAgICAgICAgICAgICIJYW5pbWF0aW9uLWZpbGwtbW9kZTogZm9yd2FyZHM7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucF90aHJlYWQgaW5wdXQ6Zm9jdXN+YnV0dG9uOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCLot7PliLBcIjsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwIDRweDsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiAtMjJweDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItcmFkaXVzOiAyMHB4IDAgMCAyMHB4OyIsCiAgICAgICAgICAgICAgICAiCWFuaW1hdGlvbi1uYW1lOiBidXR0b25fZWZmZWN0X2xlZnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucF90aHJlYWQgaW5wdXQ6Zm9jdXN+YnV0dG9uOmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiBhdXRvOyIsCiAgICAgICAgICAgICAgICAiCXJpZ2h0OiAtMTNweDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwIDZweDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItcmFkaXVzOiAwIDIwcHggMjBweCAwOyIsCiAgICAgICAgICAgICAgICAiCWFuaW1hdGlvbi1uYW1lOiBidXR0b25fZWZmZWN0X3JpZ2h0OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIubF9yZXBseV9udW1+LmxfcmVwbHlfbnVtIHsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogcmVsYXRpdmU7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1yaWdodDogMTBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWZsb2F0OiByaWdodCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmNyZWF0aXZlcGxhdGZvcm0tZWxldmF0b3IgeyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1sZWZ0OiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IGF1dG8gIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDEwMCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogcmVsYXRpdmU7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6IGluaGVyaXQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tcmlnaHQ6IDEwcHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIubF90aHJlYWRfbWFuYWdlIHsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGU7IiwKICAgICAgICAgICAgICAgICIJei1pbmRleDogMTA7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvdHRvbTogLTI4cHg7IiwKICAgICAgICAgICAgICAgICIJcmlnaHQ6IDI1MHB4OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zZm9ybTogdHJhbnNsYXRlWSg1MCUpOyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHRyYW5zcGFyZW50OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtd2VpZ2h0OiA2MDA7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIubF90aHJlYWRfbWFuYWdlICogeyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogaW5oZXJpdDsiLAogICAgICAgICAgICAgICAgIglib3gtc2l6aW5nOiBib3JkZXItYm94OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmRfZGVsX3RocmVhZCwiLAogICAgICAgICAgICAgICAgIiNkX3Bvc3RfbWFuYWdlIHsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDM0cHg7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDk4cHg7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogI2VlZTsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogcmdiYSgwLCAwLCAwLCAuNCkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IHNvbGlkIHJnYmEoMCwgMCwgMCwgLjEpOyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiByZWxhdGl2ZTsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXByb3BlcnR5OiBiYWNrZ3JvdW5kOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZHVyYXRpb246IC40czsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5kX2RlbF90aHJlYWQgeyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci13aWR0aDogMXB4OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDhweDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tbGVmdDogLThweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDZweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmctbGVmdDogOHB4IWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5qX3RocmVhZF9kZWxldGU6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tbGVmdDogOHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIjZF9wb3N0X21hbmFnZSB7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXdpZHRoOiAxcHggMCAxcHggMXB4OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDhweCAwIDAgOHB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmRfZGVsX3RocmVhZDpob3ZlciwiLAogICAgICAgICAgICAgICAgIiNkX3Bvc3RfbWFuYWdlOmhvdmVyIHsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogI2ZmZiAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6ICNhYWE7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZF9kZWxfdGhyZWFkOmhvdmVyIHsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiAjRjQ0MzM2ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIual90aHJlYWRfZGVsZXRlLCIsCiAgICAgICAgICAgICAgICAiLmRfcG9zdF9tYW5hZ2VfbGluayB7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTRweDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLWxlZnQ6IDI0cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTAwJTsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDEwMCU7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDMwcHg7IiwKICAgICAgICAgICAgICAgICIJdGV4dC1pbmRlbnQ6IDZweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5qX3RocmVhZF9kZWxldGU6YmVmb3JlLCIsCiAgICAgICAgICAgICAgICAiLmRfcG9zdF9tYW5hZ2VfbGluazpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtZmFtaWx5OiBcJ01hdGVyaWFsIEljb25zXCc7IiwKICAgICAgICAgICAgICAgICIJc3BlYWs6IG5vbmU7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zdHlsZTogbm9ybWFsOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtd2VpZ2h0OiBub3JtYWw7IiwKICAgICAgICAgICAgICAgICIJZm9udC12YXJpYW50OiBub3JtYWw7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAyNHB4OyIsCiAgICAgICAgICAgICAgICAiCXdoaXRlLXNwYWNlOiBub3dyYXA7IiwKICAgICAgICAgICAgICAgICIJd29yZC13cmFwOiBub3JtYWw7IiwKICAgICAgICAgICAgICAgICIJZGlyZWN0aW9uOiBsdHI7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlOyIsCiAgICAgICAgICAgICAgICAiCWxlZnQ6IDA7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIual90aHJlYWRfZGVsZXRlOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGU4NzJcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5kX3Bvc3RfbWFuYWdlX2xpbms6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTg2OVwiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMjJweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiNqX3F1aWNrX3RocmVhZCB7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlOyIsCiAgICAgICAgICAgICAgICAiCWxlZnQ6IDUwJTsiLAogICAgICAgICAgICAgICAgIglib3R0b206IDA7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgMTAwJSk7IiwKICAgICAgICAgICAgICAgICIJdGV4dC1hbGlnbjogY2VudGVyOyIsCiAgICAgICAgICAgICAgICAiCXBvaW50ZXItZXZlbnRzOiBub25lOyIsCiAgICAgICAgICAgICAgICAiCXotaW5kZXg6IDk5OTk7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6IHJnYmEoMCwgMCwgMCwgLjQpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIjZF9wb3N0X21hbmFnZTpob3ZlciAjal9xdWlja190aHJlYWQgeyIsCiAgICAgICAgICAgICAgICAiCXBvaW50ZXItZXZlbnRzOiBhdXRvOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiI2pfcXVpY2tfdGhyZWFkPmxpIHsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogYXV0byAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogYXV0byAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tcHJvcGVydHk6IHRyYW5zZm9ybSwgb3BhY2l0eTsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWR1cmF0aW9uOiAuNHM7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246IGVhc2U7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xMDAlKTsiLAogICAgICAgICAgICAgICAgIglvcGFjaXR5OiAwOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZGVsYXk6IDA7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIjal9xdWlja190aHJlYWQ+bGk+YSB7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDEwMHB4OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMzBweDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMzBweDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tdG9wOiA0cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItcmFkaXVzOiA0cHg7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogI2VlZTsiLAogICAgICAgICAgICAgICAgIglib3gtc2hhZG93OiAwIDJweCAycHggMCByZ2JhKDAsIDAsIDAsIDAuMikgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXByb3BlcnR5OiBiYWNrZ3JvdW5kLCBjb2xvcjsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWR1cmF0aW9uOiAuNHM7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246IGVhc2U7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIjal9xdWlja190aHJlYWQ+bGk+YTpob3ZlciB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogI2FhYTsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogI2ZmZiAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiI2RfcG9zdF9tYW5hZ2U6aG92ZXIgI2pfcXVpY2tfdGhyZWFkPmxpIHsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IG5vbmU7IiwKICAgICAgICAgICAgICAgICIJb3BhY2l0eTogMTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wX3RocmVhZCAubG9hZGluZy10aXAgeyIsCiAgICAgICAgICAgICAgICAiCXRvcDogYXV0byAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXJpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm90dG9tOiA5MHB4OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWxlZnQ6IDUwJSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBibG9jazsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogZml4ZWQ7IiwKICAgICAgICAgICAgICAgICIJei1pbmRleDogOTk5OTsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmU7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogIzQ4NzlCRCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDZweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmctbGVmdDogN3B4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNmZmYgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWluZGVudDogLTFweDsiLAogICAgICAgICAgICAgICAgIglsZXR0ZXItc3BhY2luZzogMXB4OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDZweCA4cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTAwcHg7IiwKICAgICAgICAgICAgICAgICIJdGV4dC1hbGlnbjogY2VudGVyOyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaGFkb3c6IDAgMnB4IDhweCAwIHJnYmEoMCwgMCwgMCwgMC4yKSwgMCAycHggMTZweCA2cHggcmdiYSgwLCAwLCAwLCAwLjIpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIvKuW4luWtkOWGhemhtS3moIfpopjmoI8qLyIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIuY29yZV90aXRsZV9iZyB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogcmdiYSgwLDAsMCwuMDEpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlOyIsCiAgICAgICAgICAgICAgICAiCWxlZnQ6IDA7IiwKICAgICAgICAgICAgICAgICIJdG9wOiAwOyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlOyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMTAwJTsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY29yZV90aXRsZSB7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX3R4dCB7IiwKICAgICAgICAgICAgICAgICIJZm9udC1mYW1pbHk6IGluaGVyaXQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogNzMwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl6LWluZGV4OiA0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY29yZV90aXRsZV9idG5zIHsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJei1pbmRleDogNCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZTsiLAogICAgICAgICAgICAgICAgIglyaWdodDogMDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX2J0bnMgaXsiLAogICAgICAgICAgICAgICAgIiAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY29yZV90aXRsZV9idG5zID4gKiwiLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX2J0bnMgLmxfbHpvbmx5LCIsCiAgICAgICAgICAgICAgICAiLmNvcmVfdGl0bGVfYnRucyAubF9sem9ubHlfY2FuY2VsLCIsCiAgICAgICAgICAgICAgICAiLmNvcmVfdGl0bGVfYnRucyAucF9mYXZ0aHJfbWFpbiwiLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX2J0bnMgLmpfcXVpY2tfcmVwbHkgeyIsCiAgICAgICAgICAgICAgICAiCWZsb2F0OiBsZWZ0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLXJpZ2h0OiAxMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDY1cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDY2cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItcmFkaXVzOiAwIDAgMjBweCAyMHB4OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHRyYW5zcGFyZW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlcjogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW92ZXJmbG93OiB2aXNpYmxlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IHJlbGF0aXZlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdGV4dC1hbGlnbjogY2VudGVyOyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiA5NHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxNnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJY3Vyc29yOiBwb2ludGVyOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmNvcmVfdGl0bGVfYnRucyAqLCIsCiAgICAgICAgICAgICAgICAiLmNvcmVfdGl0bGVfYnRucyAqOmJlZm9yZSwiLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX2J0bnMgKjphZnRlciB7IiwKICAgICAgICAgICAgICAgICIJYm94LXNpemluZzogYm9yZGVyLWJveDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogcmdiYSgwLCAwLCAwLCAuNCkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY29yZV90aXRsZV9idG5zPiogeyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaGFkb3c6IDAgMnB4IDJweCAtMXB4IHJnYmEoMCwgMCwgMCwgMC4yKSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6ICNlZWUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXByb3BlcnR5OiB0cmFuc2Zvcm0gIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWR1cmF0aW9uOiAuMnMgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCSIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmNvcmVfdGl0bGVfYnRucz4qOmhvdmVyIHsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXByb3BlcnR5OiB0cmFuc2Zvcm0sIGJhY2tncm91bmQsIGJveC1zaGFkb3cgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiAjYWFhICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY29yZV90aXRsZV9idG5zPio6aG92ZXIsIiwKICAgICAgICAgICAgICAgICIuY29yZV90aXRsZV9idG5zPio6aG92ZXIgKiwiLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX2J0bnM+Kjpob3ZlciAuZF9sem9ubHlfYmRhc2lkZTpiZWZvcmUsIiwKICAgICAgICAgICAgICAgICIuY29yZV90aXRsZV9idG5zPio6aG92ZXIgI2x6b25seV9jbnRuOmJlZm9yZSwiLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX2J0bnM+I2x6b25seV9jbnRuOmhvdmVyOmJlZm9yZSwiLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX2J0bnM+I2pfZmF2dGhyZWFkOmhvdmVyOmJlZm9yZSwiLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX2J0bnM+LmpfZmF2b3I6aG92ZXI6YmVmb3JlLCIsCiAgICAgICAgICAgICAgICAiLmNvcmVfdGl0bGVfYnRucz4jcXVpY2tfcmVwbHk6aG92ZXI6YmVmb3JlLCIsCiAgICAgICAgICAgICAgICAiLmNvcmVfdGl0bGVfYnRucz4ucXVpY2tfcmVwbHk6aG92ZXI6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogI2ZmZiAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmNvcmVfdGl0bGVfYnRucz4qOmFjdGl2ZSB7IiwKICAgICAgICAgICAgICAgICIJYm94LXNoYWRvdzogMCA0cHggMnB4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjIpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZF9sem9ubHlfYmRhc2lkZSB7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGV0dGVyLXNwYWNpbmc6IDA7IiwKICAgICAgICAgICAgICAgICIJdGV4dC1pbmRlbnQ6IDA7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZF9sem9ubHlfYmRhc2lkZTpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwi5qW85Li7XCI7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxNnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY29yZV90aXRsZV9idG5zICNsem9ubHlfY250bjpiZWZvcmUsIiwKICAgICAgICAgICAgICAgICIuY29yZV90aXRsZV9idG5zPiNqX2ZhdnRocmVhZDpiZWZvcmUsIiwKICAgICAgICAgICAgICAgICIuY29yZV90aXRsZV9idG5zPi5qX2Zhdm9yOmJlZm9yZSwiLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX2J0bnM+I3F1aWNrX3JlcGx5OmJlZm9yZSwiLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX2J0bnM+LnF1aWNrX3JlcGx5OmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJZm9udC1mYW1pbHk6IFwnTWF0ZXJpYWwgSWNvbnNcJzsiLAogICAgICAgICAgICAgICAgIglzcGVhazogbm9uZTsiLAogICAgICAgICAgICAgICAgIglmb250LXN0eWxlOiBub3JtYWw7IiwKICAgICAgICAgICAgICAgICIJZm9udC13ZWlnaHQ6IG5vcm1hbDsiLAogICAgICAgICAgICAgICAgIglmb250LXZhcmlhbnQ6IG5vcm1hbDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMTsiLAogICAgICAgICAgICAgICAgIgl3aGl0ZS1zcGFjZTogbm93cmFwOyIsCiAgICAgICAgICAgICAgICAiCXdvcmQtd3JhcDogbm9ybWFsOyIsCiAgICAgICAgICAgICAgICAiCWRpcmVjdGlvbjogbHRyOyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMzBweDsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiA1MCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0b3A6IDUwJSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi10b3A6IC0xNHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY29yZV90aXRsZV9idG5zICNsem9ubHlfY250bjpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlOGY0XCIgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDMycHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX2J0bnM+I2pfZmF2dGhyZWFkOmJlZm9yZSwiLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX2J0bnM+LmpfZmF2b3I6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTg5YVwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmNvcmVfdGl0bGVfYnRucz4jcXVpY2tfcmVwbHk6YmVmb3JlLCIsCiAgICAgICAgICAgICAgICAiLmNvcmVfdGl0bGVfYnRucz4ucXVpY2tfcmVwbHk6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTI0Y1wiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLyrluJblrZDlhoXpobXlupXkvqfmta7lsYIqLyIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIuY29yZV90aXRsZV9hYnNvbHV0ZV9icmlnaHQgeyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJei1pbmRleDogNDAxICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdG9wOiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm90dG9tOiAxMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGVmdDogNTAlOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX2Fic29sdXRlX2JyaWdodCAuY29yZV90aXRsZV9iZyB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogIzQ4NzlCRCAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItcmFkaXVzOiAyOHB4OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaGFkb3c6IDAgMnB4IDhweCAwIHJnYmEoMCwgMCwgMCwgMC4xKSwgMCAycHggMTZweCAwIHJnYmEoMCwgMCwgMCwgMC4wOCkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX2Fic29sdXRlX2JyaWdodCAuY29yZV90aXRsZV90eHQgeyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1sZWZ0OiA0MHB4OyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjZmZmICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY29yZV90aXRsZV9hYnNvbHV0ZV9icmlnaHQgLmNvcmVfdGl0bGVfYnRucyB7IiwKICAgICAgICAgICAgICAgICIJZmxvYXQ6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXJpZ2h0OiAyMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm90dG9tOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMTAwJSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmNvcmVfdGl0bGVfYWJzb2x1dGVfYnJpZ2h0IC5jb3JlX3RpdGxlX2J0bnMgKiwiLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX2Fic29sdXRlX2JyaWdodCAuY29yZV90aXRsZV9idG5zICo6YmVmb3JlLCIsCiAgICAgICAgICAgICAgICAiLmNvcmVfdGl0bGVfYWJzb2x1dGVfYnJpZ2h0IC5jb3JlX3RpdGxlX2J0bnMgKjphZnRlciB7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNmZmYgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX2Fic29sdXRlX2JyaWdodCAuY29yZV90aXRsZV9idG5zID4gKiB7IiwKICAgICAgICAgICAgICAgICIJYm94LXNoYWRvdzogMCAycHggOHB4IDAgcmdiYSgwLCAwLCAwLCAwLjIpLCAwIDJweCAxNnB4IDAgcmdiYSgwLCAwLCAwLCAwLjA4KSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6ICM0ODc5QkQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSkgc2NhbGUoMSkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWR1cmF0aW9uOiAuNnMgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX2Fic29sdXRlX2JyaWdodCAuY29yZV90aXRsZV9idG5zID4gKjpob3ZlciB7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpIHNjYWxlKDEuMSkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiAjNDI4NUY0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY29yZV90aXRsZV9hYnNvbHV0ZV9icmlnaHQgLmNvcmVfdGl0bGVfYnRucyA+ICo6YWN0aXZlIHsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSkgc2NhbGUoMS4wNSkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX2Fic29sdXRlX2JyaWdodCAuY29yZV90aXRsZV9idG5zID4gKiwiLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX2Fic29sdXRlX2JyaWdodCAuY29yZV90aXRsZV9idG5zIC5sX2x6b25seSwiLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX2Fic29sdXRlX2JyaWdodCAuY29yZV90aXRsZV9idG5zIC5sX2x6b25seV9jYW5jZWwsIiwKICAgICAgICAgICAgICAgICIuY29yZV90aXRsZV9hYnNvbHV0ZV9icmlnaHQgLmNvcmVfdGl0bGVfYnRucyAucF9mYXZ0aHJfbWFpbiwiLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX2Fic29sdXRlX2JyaWdodCAuY29yZV90aXRsZV9idG5zIC5qX3F1aWNrX3JlcGx5IHsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogNzBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogNzBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDUwJSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRvcDogNTAlOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogI2ZmZiAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAxMDRweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTJweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWxldHRlci1zcGFjaW5nOiAycHg7IiwKICAgICAgICAgICAgICAgICIJdGV4dC1pbmRlbnQ6IDJweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi8qZml4IGJ1ZyovIiwKICAgICAgICAgICAgICAgICIucXVpY2tfcmVwbHl7IiwKICAgICAgICAgICAgICAgICIJcG9pbnRlci1ldmVudHM6IG5vbmU7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucXVpY2tfcmVwbHkgPiAqeyIsCiAgICAgICAgICAgICAgICAiCXBvaW50ZXItZXZlbnRzOiBhdXRvOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmNvcmVfdGl0bGVfYWJzb2x1dGVfYnJpZ2h0IC5kX2x6b25seV9iZGFzaWRlIHsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMjBweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX2Fic29sdXRlX2JyaWdodCAuZF9sem9ubHlfYmRhc2lkZTpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTJweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWxldHRlci1zcGFjaW5nOiAycHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY29yZV90aXRsZV9hYnNvbHV0ZV9icmlnaHQgLmRfbHpvbmx5X2JkYXNpZGUsIiwKICAgICAgICAgICAgICAgICIuY29yZV90aXRsZV9hYnNvbHV0ZV9icmlnaHQgLnBfZmF2dGhyX21haW4gcCB7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6IGluaGVyaXQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX2Fic29sdXRlX2JyaWdodCAuY29yZV90aXRsZV9idG5zICNsem9ubHlfY250bjpiZWZvcmUsIiwKICAgICAgICAgICAgICAgICIuY29yZV90aXRsZV9hYnNvbHV0ZV9icmlnaHQgLmNvcmVfdGl0bGVfYnRucz4jal9mYXZ0aHJlYWQ6YmVmb3JlLCIsCiAgICAgICAgICAgICAgICAiLmNvcmVfdGl0bGVfYWJzb2x1dGVfYnJpZ2h0IC5jb3JlX3RpdGxlX2J0bnM+LmpfZmF2b3I6YmVmb3JlLCIsCiAgICAgICAgICAgICAgICAiLmNvcmVfdGl0bGVfYWJzb2x1dGVfYnJpZ2h0IC5jb3JlX3RpdGxlX2J0bnM+I3F1aWNrX3JlcGx5OmJlZm9yZSwiLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX2Fic29sdXRlX2JyaWdodCAuY29yZV90aXRsZV9idG5zPi5xdWlja19yZXBseTpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6IGluaGVyaXQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDMycHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tdG9wOiAtMTBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXotaW5kZXg6IDE7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY29yZV90aXRsZV9hYnNvbHV0ZV9icmlnaHQgLmNvcmVfdGl0bGVfYnRucyAjbHpvbmx5X2NudG46YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDM2cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi8q5pS26JeP5oiQ5Yqf5o+Q56S65qGGKi8iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnJlY29tbWVuZF9vdXR0ZXN0X2NvbnRhaW5lciB7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZC1jb2xvcjogIzQ4NzlCRCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDZweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaGFkb3c6IDAgMnB4IDhweCAwIHJnYmEoMCwgMCwgMCwgMC4yKSwgMCAycHggMTZweCA2cHggcmdiYSgwLCAwLCAwLCAwLjIpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNmZmYgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl6LWluZGV4OiA5OTk5OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRvcDogOTBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXJpZ2h0OiAzMnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm90dG9tOiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGVmdDogYXV0byAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnJlY29tbWVuZF9vdXR0ZXN0X2NvbnRhaW5lciA+IGRpdiB7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDEwMCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3gtc2l6aW5nOiBib3JkZXItYm94OyIsCiAgICAgICAgICAgICAgICAiCWxlZnQ6IGF1dG8gIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwIDRweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiByZWxhdGl2ZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5yZWNvbW1lbmRfb3V0dGVzdF9jb250YWluZXIgLmFycm93X3RvcCB7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDA7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAwOyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlcjogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRvcDogLTlweDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItbGVmdDogMTBweCBzb2xpZCB0cmFuc3BhcmVudCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yaWdodDogMTBweCBzb2xpZCB0cmFuc3BhcmVudCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1ib3R0b206IDEwcHggc29saWQgIzQ1NzNiNCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTsiLAogICAgICAgICAgICAgICAgIgl6LWluZGV4OiAxOyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1sZWZ0OiAxMDBweDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnJlY29tbWVuZF9vdXR0ZXN0X2NvbnRhaW5lciAuc3VjY2Vzc190aXAgeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6ICM0NTczYjQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogNnB4IDZweCAwOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnJlY29tbWVuZF9vdXR0ZXN0X2NvbnRhaW5lciAuc3VjY2Vzc190aXAgaHIsIiwKICAgICAgICAgICAgICAgICIucmVjb21tZW5kX291dHRlc3RfY29udGFpbmVyIC5zdWNjZXNzX3RpcCAuY29sbGVjdF90aXAgeyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IG5vbmU7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucmVjb21tZW5kX291dHRlc3RfY29udGFpbmVyIC5jb2xsZWN0X3N1Y2Nlc3Mgc3BhbiB7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLWxlZnQ6IDlweDsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDE4cHg7IiwKICAgICAgICAgICAgICAgICIJdG9wOiAxMHB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnJlY29tbWVuZF9vdXR0ZXN0X2NvbnRhaW5lciAuY29sbGVjdF9zdWNjZXNzIHNwYW46YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTUyZFwiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtZmFtaWx5OiBcJ01hdGVyaWFsIEljb25zXCc7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDE7IiwKICAgICAgICAgICAgICAgICIJd2hpdGUtc3BhY2U6IG5vd3JhcDsiLAogICAgICAgICAgICAgICAgIgl3b3JkLXdyYXA6IG5vcm1hbDsiLAogICAgICAgICAgICAgICAgIglkaXJlY3Rpb246IGx0cjsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDI4cHg7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLXJpZ2h0OiA0cHg7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLXRvcDogLTJweDsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBibG9jazsiLAogICAgICAgICAgICAgICAgIglmbG9hdDogbGVmdDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5yZWNvbW1lbmRfb3V0dGVzdF9jb250YWluZXIgLnN1Y2Nlc3NfdGlwIC5kZWxldGVfY29sbGVjdCB7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlOyIsCiAgICAgICAgICAgICAgICAiCXJpZ2h0OiAwOyIsCiAgICAgICAgICAgICAgICAiCWxlZnQ6IGF1dG87IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJZmxvYXQ6IHJpZ2h0OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogNDBweDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogNDBweDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogNDBweDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0b3A6IDA7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWN1cnNvcjogcG9pbnRlcjsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWFsaWduOiBjZW50ZXI7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgLjYpOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zZm9ybTogc2NhbGUoMSk7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1wcm9wZXJ0eTogY29sb3IsIHRyYW5zZm9ybTsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWR1cmF0aW9uOiAuNHM7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246IGVhc2U7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucmVjb21tZW5kX291dHRlc3RfY29udGFpbmVyIC5zdWNjZXNzX3RpcCAuZGVsZXRlX2NvbGxlY3Q6aG92ZXIgeyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zZm9ybTogc2NhbGUoMS4zKTsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAxKSIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnJlY29tbWVuZF9vdXR0ZXN0X2NvbnRhaW5lciAuc3VjY2Vzc190aXAgLmRlbGV0ZV9jb2xsZWN0OmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGU1Y2RcIjsiLAogICAgICAgICAgICAgICAgIglmb250LWZhbWlseTogXCdNYXRlcmlhbCBJY29uc1wnOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMjRweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5yZWNvbW1lbmRfb3V0dGVzdF9jb250YWluZXIgLnJ1bGVzX3RpcCB7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxNHB4OyIsCiAgICAgICAgICAgICAgICAiCXRleHQtYWxpZ246IGNlbnRlcjsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMzBweDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDYwcHg7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLWJvdHRvbTogLTMwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5yZWNvbW1lbmRfb3V0dGVzdF9jb250YWluZXIgLnNob3dfdGFnX2lucHV0IHsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwIDZweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXotaW5kZXg6IDE7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucmVjb21tZW5kX291dHRlc3RfY29udGFpbmVyIC5qX2FkZF90YWcgeyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAzMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJb3V0bGluZTogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlcjogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaXppbmc6IGJvcmRlci1ib3g7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNmZmYgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDE4cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMjZweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRleHQtYWxpZ246IGNlbnRlcjsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDgpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCA0cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLXRvcDogNHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLWJvdHRvbTogNHB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgLjA0KSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tcHJvcGVydHk6IHRyYW5zZm9ybSwgYm94LXNoYWRvdywgYmFja2dyb3VuZCwgYm9yZGVyLWJvdHRvbTsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWR1cmF0aW9uOiAuNXM7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246IGN1YmljLWJlemllcigwLjIzLCAxLCAwLjMyLCAxKTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5yZWNvbW1lbmRfb3V0dGVzdF9jb250YWluZXIgLmpfYWRkX3RhZzpmb2N1cyB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjEpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLWJvdHRvbTogNHB4IHNvbGlkICM0Mjg1RjQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5yZWNvbW1lbmRfb3V0dGVzdF9jb250YWluZXIgLnJlY29tbWVuZF90YWcgeyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi10b3A6IDEycHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwIDZweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnJlY29tbWVuZF9vdXR0ZXN0X2NvbnRhaW5lciAucmVjb21tZW5kX3RhZzplbXB0eSB7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogbm9uZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5yZWNvbW1lbmRfb3V0dGVzdF9jb250YWluZXIgLnBiX3JlY29tbWVuZF90YWcgeyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1ib3R0b206IDRweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1yaWdodDogNXB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCA2cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDIwcHg7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDIwcHg7IiwKICAgICAgICAgICAgICAgICIJZmxvYXQ6IG5vbmU7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogaW5saW5lLWJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgLjEpOyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlcjogbm9uZTsiLAogICAgICAgICAgICAgICAgIgljdXJzb3I6IHBvaW50ZXI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucmVjb21tZW5kX291dHRlc3RfY29udGFpbmVyIC5wYl9yZWNvbW1lbmRfdGFnIHNwYW4geyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBzdGF0aWMgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0b3A6IGF1dG8gIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5yZWNvbW1lbmRfb3V0dGVzdF9jb250YWluZXIgLnBiX3JlY29tbWVuZF90YWc6aG92ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6ICM0Mjg1RjQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5yZWNvbW1lbmRfb3V0dGVzdF9jb250YWluZXIgLnRhZ19idXR0b24geyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi10b3A6IDEycHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tYm90dG9tOiAxNnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucmVjb21tZW5kX291dHRlc3RfY29udGFpbmVyIC50YWdfc3VibWl0X2J1dHRvbiB7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDIwMHB4OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMjdweDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMjdweDsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBibG9jazsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogcmVsYXRpdmU7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwIGF1dG87IiwKICAgICAgICAgICAgICAgICIJei1pbmRleDogMTsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDgpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdGV4dC1hbGlnbjogY2VudGVyOyIsCiAgICAgICAgICAgICAgICAiCWN1cnNvcjogcG9pbnRlcjsiLAogICAgICAgICAgICAgICAgIglsZXR0ZXItc3BhY2luZzogMjBweDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWluZGVudDogMjBweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5yZWNvbW1lbmRfb3V0dGVzdF9jb250YWluZXIgLnRhZ19zdWJtaXRfYnV0dG9uOmhvdmVyIHsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiAjNDI4NUY0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucmVjb21tZW5kX291dHRlc3RfY29udGFpbmVyIC50YWdfc3VibWl0X2J1dHRvbiBzcGFuIHsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogc3RhdGljICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiBpbmhlcml0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6IGluaGVyaXQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5yZWNvbW1lbmRfb3V0dGVzdF9jb250YWluZXIgLnBiX3JlY29tbWVuZF90YWcsIiwKICAgICAgICAgICAgICAgICIucmVjb21tZW5kX291dHRlc3RfY29udGFpbmVyIC50YWdfc3VibWl0X2J1dHRvbiB7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1wcm9wZXJ0eTogYmFja2dyb3VuZDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWR1cmF0aW9uOiAuNHM7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246IGVhc2U7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucF9mYXZ0aHJlYWQgLnBfZmF2dGhyX3RpcCB7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDA7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDgwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDgwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogOHB4OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6ICM0ODc5QkQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogI2ZmZiAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZTsiLAogICAgICAgICAgICAgICAgIgl0b3A6IDgwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglyaWdodDogLThweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXotaW5kZXg6IDk5OTk7IiwKICAgICAgICAgICAgICAgICIJYm94LXNoYWRvdzogMCAycHggMTJweCAycHggcmdiYSgwLCAwLCAwLCAwLjIpIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zZm9ybTogdHJhbnNsYXRlWSgxMHB4KTsiLAogICAgICAgICAgICAgICAgIglwb2ludGVyLWV2ZW50czogbm9uZTsiLAogICAgICAgICAgICAgICAgIglvcGFjaXR5OiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1wcm9wZXJ0eTogb3BhY2l0eSwgdHJhbnNmb3JtOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZHVyYXRpb246IC41czsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogY3ViaWMtYmV6aWVyKDAuMjMsIDEsIDAuMzIsIDEpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBfZmF2dGhyZWFkIC5wX2ZhdnRocl90aXBbc3R5bGUqPVwiaGVpZ2h0OlwiXSB7IiwKICAgICAgICAgICAgICAgICIJdmlzaWJpbGl0eTogdmlzaWJsZTsiLAogICAgICAgICAgICAgICAgIglvcGFjaXR5OiAxICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNmb3JtOiBub25lOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmNvcmVfdGl0bGVfd3JhcF9icmlnaHQ+LnBfZmF2dGhyZWFkIC5wX2ZhdnRocl90aXAgeyIsCiAgICAgICAgICAgICAgICAiCXRvcDogNzBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXJpZ2h0OiA3NnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucF9mYXZ0aHJlYWQgLnBfZmF2dGhyX3RpcCAqIHsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBub25lOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBfZmF2dGhyZWFkIC5wX2ZhdnRocl90aXA+c3Bhbjpvbmx5LWNoaWxkLCIsCiAgICAgICAgICAgICAgICAiLnBfZmF2dGhyZWFkIC5wX2ZhdnRocl90aXA+YTpudGgtb2YtdHlwZSgxKSB7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogYmxvY2s7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY29yZV90aXRsZV9hYnNvbHV0ZV9icmlnaHQgLnBfZmF2dGhyZWFkIC5wX2ZhdnRocl90aXAgeyIsCiAgICAgICAgICAgICAgICAiCXRvcDogLTgycHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglyaWdodDogLTVweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmNvcmVfdGl0bGVfYWJzb2x1dGVfYnJpZ2h0Pi5wX2ZhdnRocmVhZCAucF9mYXZ0aHJfdGlwIHsiLAogICAgICAgICAgICAgICAgIgl0b3A6IC0xMDBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXJpZ2h0OiAxMDVweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBfZmF2dGhyZWFkIC5wX2ZhdnRocl90aXA+c3Bhbjpvbmx5LWNoaWxkOmFmdGVyLCIsCiAgICAgICAgICAgICAgICAiLnBfZmF2dGhyZWFkIC5wX2ZhdnRocl90aXA+YTpudGgtb2YtdHlwZSgxKTphZnRlciB7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxMnB4OyIsCiAgICAgICAgICAgICAgICAiCWxldHRlci1zcGFjaW5nOiAycHg7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogaW5saW5lLWJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlOyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjZmZmOyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi10b3A6IDEycHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucF9mYXZ0aHJlYWQgLnBfZmF2dGhyX3RpcD5zcGFuOm9ubHktY2hpbGQ6YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwi5Y+W5raI5oiQ5YqfXCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucF9mYXZ0aHJlYWQgLnBfZmF2dGhyX3RpcD5hOm50aC1vZi10eXBlKDEpOmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIuaUtuiXj+aIkOWKn1wiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBfZmF2dGhyZWFkIC5wX2ZhdnRocl90aXA+c3Bhbjpvbmx5LWNoaWxkOmJlZm9yZSwiLAogICAgICAgICAgICAgICAgIi5wX2ZhdnRocmVhZCAucF9mYXZ0aHJfdGlwPmE6bnRoLW9mLXR5cGUoMSk6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIglmb250LWZhbWlseTogXCdNYXRlcmlhbCBJY29uc1wnOyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAxOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogNDJweDsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBibG9jazsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tdG9wOiA2cHg7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNmZmY7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucF9mYXZ0aHJlYWQgLnBfZmF2dGhyX3RpcD5zcGFuOm9ubHktY2hpbGQ6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZThlN1wiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBfZmF2dGhyZWFkIC5wX2ZhdnRocl90aXA+YTpudGgtb2YtdHlwZSgxKTpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlOGU2XCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY29yZV90aXRsZV9hYnNvbHV0ZV9icmlnaHR+LnBfcG9zdGxpc3QgLnJlY29tbWVuZF9vdXR0ZXN0X2NvbnRhaW5lciB7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGZpeGVkICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm90dG9tOiA4NnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcmlnaHQ6IGF1dG8gIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiA1MCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0b3A6IGF1dG8gIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMTk0cHgpOyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAzNjBweDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY29yZV90aXRsZV9hYnNvbHV0ZV9icmlnaHR+LnBfcG9zdGxpc3QgLnJlY29tbWVuZF9vdXR0ZXN0X2NvbnRhaW5lciAuYXJyb3dfdG9wIHsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItbGVmdDogMTBweCBzb2xpZCB0cmFuc3BhcmVudCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yaWdodDogMTBweCBzb2xpZCB0cmFuc3BhcmVudCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci10b3A6IDEwcHggc29saWQgIzQ4NzlCRCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXRvcDogYXV0bzsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiA1MCU7IiwKICAgICAgICAgICAgICAgICIJYm90dG9tOiAtOXB4OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZTsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wX3RocmVhZC50aHJlYWRfdGhlbWVfYnJpZ2h0X2Fic29sdXRlIHsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogZml4ZWQ7IiwKICAgICAgICAgICAgICAgICIJei1pbmRleDogNDUwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm90dG9tOiAtMTRweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaXppbmc6IGJvcmRlci1ib3g7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiA4MHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDc0NnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlcjogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogI2ZmZiAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBfdGhyZWFkLnRocmVhZF90aGVtZV9icmlnaHRfYWJzb2x1dGU6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIkRlc2lnbiBieSBNYXZlcmlja1wiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMDsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGU7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiA1NHB4OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiA3NDBweDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiAjNDg3OUJEICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucF90aHJlYWQudGhyZWFkX3RoZW1lX2JyaWdodF9hYnNvbHV0ZTpiZWZvcmUsIiwKICAgICAgICAgICAgICAgICIucF90aHJlYWQudGhyZWFkX3RoZW1lX2JyaWdodF9hYnNvbHV0ZT4qOm5vdCgubG9hZGluZy10aXApIHsiLAogICAgICAgICAgICAgICAgIglvcGFjaXR5OiAwOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tcHJvcGVydHk6IG9wYWNpdHk7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1kdXJhdGlvbjogLjVzOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOiBjdWJpYy1iZXppZXIoMC4yMywgMSwgMC4zMiwgMSk7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucF90aHJlYWQudGhyZWFkX3RoZW1lX2JyaWdodF9hYnNvbHV0ZTpob3ZlciB7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1kdXJhdGlvbjogMXM7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucF90aHJlYWQudGhyZWFkX3RoZW1lX2JyaWdodF9hYnNvbHV0ZTpob3ZlcjpiZWZvcmUsIiwKICAgICAgICAgICAgICAgICIucF90aHJlYWQudGhyZWFkX3RoZW1lX2JyaWdodF9hYnNvbHV0ZTpob3Zlcj4qOm5vdCgubG9hZGluZy10aXApIHsiLAogICAgICAgICAgICAgICAgIglvcGFjaXR5OiAxOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZHVyYXRpb246IDFzOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBfdGhyZWFkLnRocmVhZF90aGVtZV9icmlnaHRfYWJzb2x1dGU6aG92ZXI+KiB7IiwKICAgICAgICAgICAgICAgICIJLyrov4fmuKHml7bnpoHmraLkuovku7YqLyIsCiAgICAgICAgICAgICAgICAiCWFuaW1hdGlvbi1uYW1lOiBldmVudG9uX2R1cmF0aW9uOyIsCiAgICAgICAgICAgICAgICAiCWFuaW1hdGlvbi1kdXJhdGlvbjogLjhzOyIsCiAgICAgICAgICAgICAgICAiCWFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246IGxpbmVhcjsiLAogICAgICAgICAgICAgICAgIglhbmltYXRpb24tZmlsbC1tb2RlOiBmb3J3YXJkczsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnRocmVhZF90aGVtZV9icmlnaHRfYWJzb2x1dGUgLmxfcG9zdHNfbnVtIC5wYl9saXN0X3BhZ2VyIHsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmctdG9wOiAxNnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm94LXNpemluZzogYm9yZGVyLWJveDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tcmlnaHQ6IDEwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRfdGhlbWVfYnJpZ2h0X2Fic29sdXRlIC5sX3RocmVhZF9pbmZvIHsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBibG9jazsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRfdGhlbWVfYnJpZ2h0X2Fic29sdXRlIC5wYl9saXN0X3BhZ2VyID4qIHsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwIDZweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgLjEpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkX3RoZW1lX2JyaWdodF9hYnNvbHV0ZSAucGJfbGlzdF9wYWdlciA+YTpob3ZlciB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogIzQyODVGNCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZF90aGVtZV9icmlnaHRfYWJzb2x1dGUgLmxfcmVwbHlfbnVtPnNwYW4geyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1sZWZ0OiA1MCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7IiwKICAgICAgICAgICAgICAgICIJd2hpdGUtc3BhY2U6IG5vd3JhcDsiLAogICAgICAgICAgICAgICAgIglmbG9hdDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi10b3A6IDJweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZF90aGVtZV9icmlnaHRfYWJzb2x1dGUgLmxfcmVwbHlfbnVtPnNwYW46bnRoLW9mLXR5cGUoMSkgeyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi10b3A6IDEwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRfdGhlbWVfYnJpZ2h0X2Fic29sdXRlIC5sX3JlcGx5X251bT5zcGFuOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLWxlZnQ6IC0xLjVlbSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZF90aGVtZV9icmlnaHRfYWJzb2x1dGUgLmxfcmVwbHlfbnVtfi5sX3JlcGx5X251bSB7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLWxlZnQ6IDIwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRfdGhlbWVfYnJpZ2h0X2Fic29sdXRlIGlucHV0IHsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDgpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCA0cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLXRvcDogNHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLXRvcDogMTRweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1ib3R0b206IDRweCBzb2xpZCByZ2JhKDAsIDAsIDAsIC4wNCkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRfdGhlbWVfYnJpZ2h0X2Fic29sdXRlIGlucHV0fmJ1dHRvbiB7IiwKICAgICAgICAgICAgICAgICIJdG9wOiAxNHB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZF90aGVtZV9icmlnaHRfYWJzb2x1dGUgaW5wdXR+YnV0dG9uOmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZF90aGVtZV9icmlnaHRfYWJzb2x1dGUgaW5wdXQ6Zm9jdXN+YnV0dG9uOmJlZm9yZSwiLAogICAgICAgICAgICAgICAgIi50aHJlYWRfdGhlbWVfYnJpZ2h0X2Fic29sdXRlIGlucHV0OmZvY3VzfmJ1dHRvbjphZnRlciB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogIzQyODVGNDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRfdGhlbWVfYnJpZ2h0X2Fic29sdXRlIGlucHV0OmZvY3VzfmJ1dHRvbjpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaGFkb3c6IDAgMnB4IDEycHggMCByZ2JhKDAsIDAsIDAsIDAuMSksIDAgMnB4IDI0cHggMCByZ2JhKDAsIDAsIDAsIDAuMSksIC0xMHB4IDAgMjBweCAwcHggIzQ4NzlCRDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRfdGhlbWVfYnJpZ2h0X2Fic29sdXRlIGlucHV0OmZvY3VzfmJ1dHRvbjphZnRlciB7IiwKICAgICAgICAgICAgICAgICIJYm94LXNoYWRvdzogMCAycHggMTJweCAwIHJnYmEoMCwgMCwgMCwgMC4xKSwgMCAycHggMjRweCAwIHJnYmEoMCwgMCwgMCwgMC4xKSwgMTBweCAwIDIwcHggMHB4ICM0ODc5QkQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkX3RoZW1lX2JyaWdodF9hYnNvbHV0ZSBpbnB1dDpmb2N1cyB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogIzQyODVGNCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaGFkb3c6IDAgMnB4IDEycHggMCByZ2JhKDAsIDAsIDAsIDAuMSksIDAgMnB4IDI0cHggMCByZ2JhKDAsIDAsIDAsIDAuMSk7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkX3RoZW1lX2JyaWdodF9hYnNvbHV0ZSAuY3JlYXRpdmVwbGF0Zm9ybS1lbGV2YXRvciB7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZF90aGVtZV9icmlnaHRfYWJzb2x1dGUgLmxfdGhyZWFkX21hbmFnZSB7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLyrlj7PovrnmoI/liIblibLnur8qLyIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIuZm9ydW1fY29udGVudCAuYXNpZGU6YmVmb3JlLCIsCiAgICAgICAgICAgICAgICAiLnJpZ2h0X2JyaWdodDpiZWZvcmUsIiwKICAgICAgICAgICAgICAgICIuc2lkZTpiZWZvcmUsIiwKICAgICAgICAgICAgICAgICIucmlnaHRfYXNpZGU6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIkRlc2lnbiBieSBNYXZlcmlja1wiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMDsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBibG9jazsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGU7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAxMDAlOyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAwOyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1sZWZ0OiAxcHggc29saWQgcmdiYSgwLDAsMCwuMSk7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi8qa2V5ZnJhbWVzKi8iLAogICAgICAgICAgICAgICAgIkBrZXlmcmFtZXMgZXZlbnRvZmZfZHVyYXRpb24geyIsCiAgICAgICAgICAgICAgICAiCWZyb20geyIsCiAgICAgICAgICAgICAgICAiCQlwb2ludGVyLWV2ZW50czogYXV0bzsiLAogICAgICAgICAgICAgICAgIgl9IiwKICAgICAgICAgICAgICAgICIJdG8geyIsCiAgICAgICAgICAgICAgICAiCQlwb2ludGVyLWV2ZW50czogbm9uZTsiLAogICAgICAgICAgICAgICAgIgl9IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICJAa2V5ZnJhbWVzIGV2ZW50b25fZHVyYXRpb24geyIsCiAgICAgICAgICAgICAgICAiCWZyb20geyIsCiAgICAgICAgICAgICAgICAiCQlwb2ludGVyLWV2ZW50czogbm9uZTsiLAogICAgICAgICAgICAgICAgIgl9IiwKICAgICAgICAgICAgICAgICIJdG8geyIsCiAgICAgICAgICAgICAgICAiCQlwb2ludGVyLWV2ZW50czogYXV0bzsiLAogICAgICAgICAgICAgICAgIgl9IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICJAa2V5ZnJhbWVzIGJ1dHRvbl9lZmZlY3RfbGVmdCB7IiwKICAgICAgICAgICAgICAgICIJZnJvbSB7IiwKICAgICAgICAgICAgICAgICIJCW9wYWNpdHk6IDA7IiwKICAgICAgICAgICAgICAgICIJCXRyYW5zZm9ybTogdHJhbnNsYXRlWCg4MCUpOyIsCiAgICAgICAgICAgICAgICAiCX0iLAogICAgICAgICAgICAgICAgIgl0byB7IiwKICAgICAgICAgICAgICAgICIJCW9wYWNpdHk6IDE7IiwKICAgICAgICAgICAgICAgICIJCXRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTsiLAogICAgICAgICAgICAgICAgIgl9IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICJAa2V5ZnJhbWVzIGJ1dHRvbl9lZmZlY3RfcmlnaHQgeyIsCiAgICAgICAgICAgICAgICAiCWZyb20geyIsCiAgICAgICAgICAgICAgICAiCQlvcGFjaXR5OiAwOyIsCiAgICAgICAgICAgICAgICAiCQl0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTkwJSk7IiwKICAgICAgICAgICAgICAgICIJfSIsCiAgICAgICAgICAgICAgICAiCXRvIHsiLAogICAgICAgICAgICAgICAgIgkJb3BhY2l0eTogMTsiLAogICAgICAgICAgICAgICAgIgkJdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDApOyIsCiAgICAgICAgICAgICAgICAiCX0iLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLyrnu4boioLlpITnkIYqLyIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIvKuW4luWtkOWGheWuueWbvueJh+WuveW6pumZkOWItiovIiwKICAgICAgICAgICAgICAgICIuZF9wb3N0X2NvbnRlbnQgLkJERV9JbWFnZXsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IGF1dG8gIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXgtd2lkdGg6IDEwMCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5kX3Bvc3RfY29udGVudCAuQkRFX0ltYWdlW3dpZHRoPVwiNTYwXCJdLCIsCiAgICAgICAgICAgICAgICAiLnBvc3Rlcl9ib2R5IC5lZHVpLWVkaXRvci1ib2R5IC5lZHVpLWJvZHktY29udGFpbmVyIGltZ1t3aWR0aD1cIjU2MFwiXSB7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IGF1dG8gIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IGF1dG8gIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXgtd2lkdGg6IDEwMCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLyrljaDkvY3nrKbnqb/pgI8qLyIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIudGJ1aV9wbGFjZWhvbGRlciwiLAogICAgICAgICAgICAgICAgIi50Yl9wb3N0ZXJfcGxhY2Vob2xkZXIgeyIsCiAgICAgICAgICAgICAgICAiCXBvaW50ZXItZXZlbnRzOiBub25lOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmljb25fd3JhcDplbXB0eSB7IiwKICAgICAgICAgICAgICAgICIJLyrljbDorrDmoI/kuLrnqbrkuI3mmL7npLoqLyIsCiAgICAgICAgICAgICAgICAiCSIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi8q6K+d6aKY6LS05Zue5aSN5qGG5o6n5Lu25Z+fKi8iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnFwX2J0biB7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDEwMCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5xcF9zbWlsZSB7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLXJpZ2h0OiA2cHg7IiwKICAgICAgICAgICAgICAgICIJZmxvYXQ6IHJpZ2h0OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZF90aGVtZV9icmlnaHRfYWJzb2x1dGUgLnBiX2xpc3RfcGFnZXI6ZW1wdHkrLmxfcmVwbHlfbnVtIHsiLAogICAgICAgICAgICAgICAgIgkvKuW4luWtkOWGhemhtemhteaVsOS4ujHml7blop7lpKflip/og73moI/pobnnm67pl7Tot50qLyIsCiAgICAgICAgICAgICAgICAiCSIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1yaWdodDogMjBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIuY29yZV9yZXBseSB7IiwKICAgICAgICAgICAgICAgICIJLyrmpbzkuK3mpbznmoTmnIDlsI/pq5jluqblr7zoh7TluJblrZDlhoXpobXmu5rliqjml7bot7PliqgqLyIsCiAgICAgICAgICAgICAgICAiCSIsCiAgICAgICAgICAgICAgICAiCW1pbi1oZWlnaHQ6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5qX3VzZXJfY2FyZCB7IiwKICAgICAgICAgICAgICAgICIJLyrmpbzkuK3mpbzlm57lpI3lkI7lpLTlg49h5qCH562+6auY5bqm5Ye66ZSZKi8iLAogICAgICAgICAgICAgICAgIgkiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJbWluLWhlaWdodDogMTAwJTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5jb3JlX3JlcGx5X2NvbnRlbnQ+dWw+bGk6bnRoLW9mLXR5cGUoMSkgeyIsCiAgICAgICAgICAgICAgICAiCS8q5qW85Lit5qW85Zue5aSN5ZCO5Y2z5L2/5piv5LiA5qW85Lmf5Lya5Ye6546w5LiK5o+P6L65Ki8iLAogICAgICAgICAgICAgICAgIgkiLAogICAgICAgICAgICAgICAgIglib3JkZXItdG9wOiBub25lOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLyrnvJbovpHlv6vpgJ/lm57luJYg6L6T5YWl5qGG5a695bqm6Zeu6aKYKi8iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiI3F1aWNrLXJlcGx5LWVkaXQtd3JhcHBlciAucXVpY2stcmVwbHktaXRlbSB7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLXJpZ2h0OiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIjcXVpY2stcmVwbHktZWRpdC13cmFwcGVyIC5xdWljay1yZXBseS1pdGVtIC5xdWljay1yZXBseS1kZWxldGUtYnRuIHsiLAogICAgICAgICAgICAgICAgIglyaWdodDogNHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi8q5Y+z5L6n5rWu5bGCKi8iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnRidWlfYXNpZGVfZmxvYXRfYmFyIHsiLAogICAgICAgICAgICAgICAgIglib3JkZXItdG9wOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGZpeGVkOyIsCiAgICAgICAgICAgICAgICAiCWxlZnQ6IDUwJSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvdHRvbTogMTB2aCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRidWlfYXNpZGVfZmJhcl9idXR0b24geyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaXppbmc6IGNvbnRlbnQtYm94OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiA0NXB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiA1MHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLWJvdHRvbTogNXB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRidWlfYXNpZGVfZmJhcl9idXR0b24gPmEgeyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiByZWxhdGl2ZTsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogaW5oZXJpdCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogaW5oZXJpdCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDAgMTBweCAxMHB4IDA7IiwKICAgICAgICAgICAgICAgICIJYm94LXNoYWRvdzogMnB4IDJweCAycHggMCByZ2JhKDAsIDAsIDAsIDAuMDgpOyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6ICNmZWZlZmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglvdmVyZmxvdzpoaWRkZW47IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAwOyIsCiAgICAgICAgICAgICAgICAiCXdoaXRlLXNwYWNlOiBub3dyYXA7IiwKICAgICAgICAgICAgICAgICIJdGV4dC1pbmRlbnQ6IC00NXB4OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tcHJvcGVydHk6IHRleHQtaW5kZW50OyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZHVyYXRpb246IC42czsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50YnVpX2FzaWRlX2ZiYXJfYnV0dG9uID5hOmhvdmVyIHsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWluZGVudDogMHB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRidWlfYXNpZGVfZmJhcl9idXR0b24gPmE6YWZ0ZXIsIiwKICAgICAgICAgICAgICAgICIudGJ1aV9hc2lkZV9mYmFyX2J1dHRvbiA+YTpiZWZvcmV7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogaW5saW5lLWJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjY2NjOyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiBpbmhlcml0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiBpbmhlcml0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm94LXNpemluZzogYm9yZGVyLWJveDsiLAogICAgICAgICAgICAgICAgIgl2ZXJ0aWNhbC1hbGlnbjogdG9wOyIsCiAgICAgICAgICAgICAgICAiCXdoaXRlLXNwYWNlOiBub3JtYWw7IiwKICAgICAgICAgICAgICAgICIJdGV4dC1pbmRlbnQ6IDA7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGJ1aV9hc2lkZV9mYmFyX2J1dHRvbiA+YTphZnRlcnsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTg3MVwiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtZmFtaWx5OiBcJ01hdGVyaWFsIEljb25zXCc7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAyOHB4OyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiA1MHB4OyIsCiAgICAgICAgICAgICAgICAiCXRleHQtYWxpZ246IGNlbnRlcjsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWluZGVudDogLTJweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50YnVpX2FzaWRlX2ZiYXJfYnV0dG9uID5hOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIuacquefpemhueebrlwiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTRweDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMjBweDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLXRvcDogNXB4OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmctbGVmdDogN3B4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIudGJ1aV9mYmFyX3RvcD5hOmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OlwiXFxlMjU1XCI7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAzMnB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRidWlfZmJhcl90b3A+YTpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6XCLov5Tlm57pobbpg6hcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50YnVpX2ZiYXJfdHN1a2tvbWk+YTphZnRlciB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDpcIlxcZTgxNVwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRidWlfZmJhcl90c3Vra29taT5hOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDpcIuelnuadpeS4gOWPpVwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRidWlfZmJhcl9wcm9wcz5hOmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OlwiXFxlMzlmXCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGJ1aV9mYmFyX3Byb3BzPmE6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50Olwi6a2U5rOV6YGT5YW3XCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGJ1aV9mYmFyX2hvbWU+YTphZnRlciB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDpcIlxcZTkxZFwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRidWlfZmJhcl9ob21lPmE6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50Olwi5Y+s5ZSk5bqm5aiYXCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGJ1aV9mYmFyX3NxdWFyZT5hOmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OlwiXFxlNjM5XCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGJ1aV9mYmFyX3NxdWFyZT5hOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDpcIuS4u+aSreW5v+WculwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRidWlfZmJhcl9sYWI+YTphZnRlciB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDpcIlxcZTg3YlwiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMjZweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50YnVpX2ZiYXJfbGFiPmE6YmVmb3JlIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50Olwi5a6e6aqM5Yqf6IO9XCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGJ1aV9mYmFyX2Zhdm9yPmE6YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6XCJcXGU4N2RcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50YnVpX2ZiYXJfZmF2b3I+YTpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6XCLniLHpgJvnmoTlkKdcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50YnVpX2ZiYXJfc2hhcmU+YTphZnRlciB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDpcIlxcZTgwZFwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRidWlfZmJhcl9zaGFyZT5hOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDpcIuWIhuS6q+atpOmhtVwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRidWlfZmJhcl9yZWZyZXNoPmE6YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6XCJcXGU1ZDVcIjsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDMwcHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGJ1aV9mYmFyX3JlZnJlc2g+YTpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6XCLnq4vljbPliLfmlrBcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50YnVpX2ZiYXJfcG9zdD5hOmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OlwiXFxlMjU0XCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGJ1aV9mYmFyX3Bvc3Q+YTpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6XCLlj5HooajkuLvpophcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50YnVpX2ZiYXJfdG9weyIsCiAgICAgICAgICAgICAgICAiCW92ZXJmbG93OiBoaWRkZW47IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZy1yaWdodDogMnB4OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmctYm90dG9tOiAycHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGJ1aV9mYmFyX3RvcD5heyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tcHJvcGVydHk6IHRleHQtaW5kZW50LHRyYW5zZm9ybTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50YnVpX2ZiYXJfdG9wW3N0eWxlKj1cImhpZGRlblwiXXsiLAogICAgICAgICAgICAgICAgIglwb2ludGVyLWV2ZW50czogbm9uZTsiLAogICAgICAgICAgICAgICAgIgl2aXNpYmlsaXR5OiB2aXNpYmxlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGJ1aV9mYmFyX3RvcFtzdHlsZSo9XCJoaWRkZW5cIl0+YXsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTExMCUpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRidWlfZmJhcl90b3Bbc3R5bGUqPVwidmlzaWJsZVwiXXsiLAogICAgICAgICAgICAgICAgIglvcGFjaXR5OiAxOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIudGJzaGFyZV9wb3B1cF93cmFwcGVyeyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBmaXhlZDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogaW5oZXJpdDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IGluaGVyaXQ7IiwKICAgICAgICAgICAgICAgICIJdGV4dC1pbmRlbnQ6IDA7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxMnB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRidWlfYXNpZGVfZmxvYXRfYmFyIC50YnNoYXJlX3BvcHVwX3dyYXBwZXJ7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xMDAlKTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50YnNoYXJlX3BvcHVwX2VudGVyIHsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogaW5oZXJpdDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IGluaGVyaXQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRic2hhcmVfcG9wdXBfbWFpbiB7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdG9wOiA1MCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwb2ludGVyLWV2ZW50czogbm9uZTsiLAogICAgICAgICAgICAgICAgIglvcGFjaXR5OiAwOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zZm9ybTogdHJhbnNsYXRlKC0xMjAlLC01MCUpOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tcHJvcGVydHk6IG9wYWNpdHksdHJhbnNmb3JtOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tZHVyYXRpb246IC41czsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogY3ViaWMtYmV6aWVyKDAuMjMsIDEsIDAuMzIsIDEpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRic2hhcmVfcG9wdXBfbWFpbltzdHlsZSo9XCJibG9ja1wiXSB7IiwKICAgICAgICAgICAgICAgICIJcG9pbnRlci1ldmVudHM6IGF1dG87IiwKICAgICAgICAgICAgICAgICIJb3BhY2l0eTogMTsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtMTAwJSwtNTAlKTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi8q5qC55o2u55u45YWz5rOV5b6L5pS/562WLi4uKi8iLAogICAgICAgICAgICAgICAgIi5jb250YWluZXIgLmljb24tYXR0ZW50aW9ueyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMjBweDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWFsaWduOiBjZW50ZXI7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDEwMCU7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiBhdXRvOyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBzdGF0aWM7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwIDAgNDBweCAwOyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjOTk5OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmNvbnRhaW5lciAuaWNvbi1hdHRlbnRpb246YmVmb3JleyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlMDAxXCI7IiwKICAgICAgICAgICAgICAgICIJZm9udC1mYW1pbHk6IFwnTWF0ZXJpYWwgSWNvbnNcJzsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBibG9jazsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTAwJTsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgMCAyMHB4IDA7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxMDBweDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMTAwcHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIvKuW4luWtkOagh+mimOagh+ivhiovIiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSBpeyIsCiAgICAgICAgICAgICAgICAiCWZsZXg6IDAgMCBhdXRvOyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtaW1hZ2U6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBpbmxpbmUtYmxvY2sgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogYXV0byAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1pbi13aWR0aDogMjBweDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDIwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMjBweDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItcmFkaXVzOiA0cHg7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZC1jb2xvcjogIzQyODVGNTsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDA7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLXRvcDogLTFweDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tcmlnaHQ6IDJweDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWFsaWduOiBjZW50ZXI7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zdHlsZTogbm9ybWFsICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNmZmYgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X3RpdGxlIGk6YmVmb3JleyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtZmFtaWx5OiBcJ01hdGVyaWFsIEljb25zXCc7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAyMHB4OyIsCiAgICAgICAgICAgICAgICAiCXZlcnRpY2FsLWFsaWduOiB0b3A7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSBpOmFmdGVyeyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTJweDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgNHB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgaSsual90aF90aXQgeyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1sZWZ0OiAycHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZTpub3QoLnB1bGxfbGVmdCkgc3BhbnsiLAogICAgICAgICAgICAgICAgIglmbGV4OiAwIDAgYXV0bzsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tdG9wOiAtMXB4OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1yaWdodDogMnB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGU6bm90KC5wdWxsX2xlZnQpIHNwYW46ZW1wdHl7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogbm9uZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X3RpdGxlIGltZ1tzcmMqPVwiaWRpc2suZ2lmXCJdLCIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgaW1nW3NyYyo9XCJpY29uX2JyaWdodFwiXXsiLAogICAgICAgICAgICAgICAgIglmbG9hdDogcmlnaHQ7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDIwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDIwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLWxlZnQ6IDIwcHg7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZy10b3A6IDIwcHg7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogNHB4OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1yaWdodDogMnB4ICAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtY29sb3I6ICM0Mjg1RjU7IiwKICAgICAgICAgICAgICAgICIJYm94LXNpemluZzogYm9yZGVyLWJveDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kLWltYWdlOiB1cmwoaHR0cDovLzdwdW5iYy5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS90aWViYS1pY29uLnN2Zz8yMDE2MDMyNyk7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIDIwcHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSAuaWNvbi12b2ljZTpiZWZvcmV7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGUzMWRcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X3RpdGxlIC5pY29uLWdhbWUtdHlwZS1taW5pLWdhbWUgeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtY29sb3I6ICNGRjczMkE7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSAuaWNvbi1nYW1lLXR5cGUtbWluaS1nYW1lOmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIuWwj+a4uOaIj1wiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLmljb24tbm92ZWwtdGhhbmtzIHsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kLWNvbG9yOiAjRkY2NjY2OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLmljb24tbm92ZWwtdGhhbmtzOmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIuaEn+iwolwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLmljb24tbm92ZWwtZ2VudWluZSwiLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X3RpdGxlIC5pY29uLW5vdmVsLWNoYXB0ZXJ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZC1jb2xvcjogI0ZGQTgwMDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X3RpdGxlIC5pY29uLW5vdmVsLWdlbnVpbmU6YWZ0ZXIsIiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSAuaWNvbi1ub3ZlbC1jaGFwdGVyOmFmdGVyeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwi56ug6IqCXCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSAuaWNvbi1nYW1lLWZlYXR1cmUtc3RyYXRlZ3k6YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwi562W55Wl57uP6JClXCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSAuaWNvbi1nYW1lLWZlYXR1cmUtc3BvcnRzOmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIuS9k+iCsuernumAn1wiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSAuaWNvbi1nYW1lLWZlYXR1cmUtc2hvb3Rpbmc6YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwi6aOe6KGM5bCE5Ye7XCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X3RpdGxlIC5pY29uLWdhbWUtZmVhdHVyZS1uZXR3b3JrOmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIue9kee7nOa4uOaIj1wiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSAuaWNvbi1nYW1lLWZlYXR1cmUtY29zcGxheTphZnRlciB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCLop5LoibLmia7mvJRcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLmljb24tZ2FtZS1mZWF0dXJlLWNhc3VhbDphZnRlciB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCLkvJHpl7Lnm4rmmbpcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLmljb24tZ2FtZS1mZWF0dXJlLWNhcmRzOmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIuWNoeeJh+aji+eJjFwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSAuaWNvbi1nYW1lLWZlYXR1cmUtYWN0aW9uOmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIuWKqOS9nOWGkumZqVwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLmljb24tZ2FtZS10eXBlLXdlYiB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZC1jb2xvcjogI0ZGNjY2NiIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLmljb24tZ2FtZS10eXBlLXdlYjphZnRlciB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCLnvZHpobXmuLjmiI9cIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLmljb24tZ2FtZS10eXBlLW1vYmlsZSB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZC1jb2xvcjogI0ZGNjY2NiIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLmljb24tZ2FtZS10eXBlLW1vYmlsZTphZnRlciB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCLmiYvmnLrmuLjmiI9cIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLmljb24tZ2FtZS10eXBlLWNsaWVudCB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZC1jb2xvcjogI0ZGNjY2NiIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLmljb24tZ2FtZS10eXBlLWNsaWVudDphZnRlciB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCLlrqLmiLfnq6/muLjmiI9cIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLmljb24tbm92ZWwtcmV3YXJkIHsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kLWNvbG9yOiAjRkY2NjY2IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSAuaWNvbi1ub3ZlbC1yZXdhcmQ6YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwi5o2n5Zy6XCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X3RpdGxlIC5pY29uLXpoZW5nd2VuLWJvb2sgeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtY29sb3I6ICNGRjY2NjYiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X3RpdGxlIC5pY29uLXpoZW5nd2VuLWJvb2s6YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwi6LS05ZCn5Y6f5YibXCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X3RpdGxlIC5pY29uLWZiLXNvbHZlZCB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZC1jb2xvcjogIzVEQjc3MiIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLmljb24tZmItc29sdmVkOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJIGNvbnRlbnQ6IFwiXFxlODc2XCI7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwIDFweDsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDE4cHg7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6MTlweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X3RpdGxlIC5pY29uLWZiLXNvbHZlZDphZnRlciB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCLlt7Lop6PlhrNcIjsiLAogICAgICAgICAgICAgICAgIiAgIG1hcmdpbi1sZWZ0OiAwOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLmljb24tZmItZm9sbG93aW5nIHsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kLWNvbG9yOiAjRkY2NjY2OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLmljb24tZmItZm9sbG93aW5nOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJIGNvbnRlbnQ6IFwiXFxlODBlXCI7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwIDJweDsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDE2cHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSAuaWNvbi1mYi1mb2xsb3dpbmc6YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwi5q2j5Zyo6Lef6L+bXCI7IiwKICAgICAgICAgICAgICAgICIgICBtYXJnaW4tbGVmdDogLTFweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLmljb24tbWFzcy1yZXNwb25zZSB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZC1jb2xvcjogI0ZGOTE0RDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X3RpdGxlIC5pY29uLW1hc3MtcmVzcG9uc2U6YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwi5LiA5ZG855m+5bqUXCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSAuaWNvbi1ndWVzc2luZyB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZC1jb2xvcjogI0Y4MjIwQzsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X3RpdGxlIC5pY29uLWd1ZXNzaW5nOmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIuaLs+eOi1wiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSAudGJfdGFnX2ZvcndhcmQ6YWZ0ZXIsIiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSAuaWNvbi1yZXBvc3Q6YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwi6L2s5biWXCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSBpbWdbc3JjKj1cIm1lbWJlcnRvcF9pY29uLnBuZ1wiXSwiLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X3RpdGxlIC5pY29uLW1lbWJlci10b3AgeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtY29sb3I6ICNGRkNDMjYiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLmljb24tbWVtYmVyLXRvcDphZnRlciB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCLkvJrlkZjnva7pobZcIjsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tbGVmdDogLTFweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X3RpdGxlIC5pY29uLW1lbWJlci10b3A6YmVmb3JlLCIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLmljb24tdG9wOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTE1NFwiOyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGlubGluZS1ibG9jazsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTAuNXB4KSByb3RhdGUoLTkwZGVnKTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X3RpdGxlIGltZ1tzcmMqPVwibWVtYmVydG9wX2ljb24ucG5nXCJdLCIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgaW1nW3NyYyo9XCJ6ZGluZy5naWZcIl17IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZC1wb3NpdGlvbjogMCAwOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSBpbWdbc3JjKj1cInRwaWFvLmdpZlwiXSwiLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X3RpdGxlIC5pY29uLXZvdGUgeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtY29sb3I6ICM1NUQ0NUQiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X3RpdGxlIC5pY29uLXZvdGU6YmVmb3JleyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlMDFkXCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSBpbWdbc3JjKj1cInRwaWFvLmdpZlwiXXsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIC04MHB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSAuaWNvbi11c2VyLW1hc2s6YmVmb3JleyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlMTVkXCI7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxNnB4OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAycHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSAuaWNvbi11c2VyLW1hc2s6YWZ0ZXJ7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCLooqvlsY/olL1cIjsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tbGVmdDogMDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLmljb24tYWN0aXZpdHk6YmVmb3JleyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlMTUzXCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X3RpdGxlIGltZ1tzcmMqPVwiamluZy5naWZcIl0sIiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSAuaWNvbi1nb29keyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtY29sb3I6ICNGRjY2NjYiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X3RpdGxlIC5pY29uLWdvb2Q6YmVmb3JleyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlODM4XCI7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxOHB4OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1yaWdodDogLTFweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X3RpdGxlIGltZ1tzcmMqPVwiamluZy5naWZcIl17IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZC1wb3NpdGlvbjogMCAtMjBweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLmljb24tbm90aWNlOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTgwYlwiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMThweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgaW1nW3NyYyo9XCJnb29kYWxidW0ucG5nXCJdLCIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLmljb24tZ29vZC1hbGJ1bXsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kLWNvbG9yOiAjRkY2NjY2OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLmljb24tZ29vZC1hbGJ1bTpiZWZvcmV7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGUzZGZcIjsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDE4cHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X3RpdGxlIGltZ1tzcmMqPVwiZ29vZGFsYnVtLnBuZ1wiXSwiLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X3RpdGxlIGltZ1tzcmMqPVwidHVwaWFuLmdpZlwiXXsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIC02MHB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSAuaWNvbi1saXZlc2hvdy1wcm9tb3RlcnsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kLWNvbG9yOiAjRkZBODI1OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLmljb24tbGl2ZXNob3ctcHJvbW90ZXI6YWZ0ZXJ7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDpcIuW4neeOi+i0tFwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSAuaWNvbi1pZGlzayB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZC1wb3NpdGlvbjogLTI1NHB4IC04MXB4IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSAuaWNvbi1pZGlzazpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlMmM4XCI7IiwKICAgICAgICAgICAgICAgICIgICBmb250LXNpemU6IDE2cHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSBpbWdbc3JjKj1cImlkaXNrLmdpZlwiXXsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIC0xMDBweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgaW1nW3NyYyo9XCJiYWthbi5naWZcIl0sIiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSAuaWNvbi1iYWthbiB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZC1jb2xvcjogI0VBQjAyMTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X3RpdGxlIC5pY29uLWJha2FuOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGUwZTBcIjsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDE2cHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSBpbWdbc3JjKj1cImJha2FuLmdpZlwiXXsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIC00MHB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSAuaWNvbi1waWN0dXJlOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIlxcZTNkZlwiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMThweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X3RpdGxlIC5pY29uX2ludGVydmlld19waWN0dXJlOmFmdGVyeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6XCLlm77niYfor53pophcIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLmljb24temhhb2ppeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtY29sb3I6ICNiNzdkZjA7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGhyZWFkbGlzdF90aXRsZSAuaWNvbi16aGFvamk6YWZ0ZXJ7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDpcIuWPrOmbhlwiOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRocmVhZGxpc3RfdGl0bGUgLmljb24tdXNlcmRlZmluZS1kaWFtb25kLW1hbGx7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZC1jb2xvcjogI0ZGNjY2NjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50aHJlYWRsaXN0X3RpdGxlIC5pY29uLXVzZXJkZWZpbmUtZGlhbW9uZC1tYWxsOmFmdGVyeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6XCLlpLrlrp1cIjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLyrlkKfor6bmg4XpobUqLyIsCiAgICAgICAgICAgICAgICAiLmNvbnRhaW5lcl93cmFwIC5jYXJkX3RvcF93cmFweyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmctYm90dG9tOiAxMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZm9ydW1faW5mb193cmFweyIsCiAgICAgICAgICAgICAgICAiCW92ZXJmbG93OiBoaWRkZW47IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIvKuWQp+W5v+aSremhtSovIiwKICAgICAgICAgICAgICAgICIuY29udGFpbmVyPi5jb250ZW50eyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAycHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLyrluJblrZDliJfooajpobXor53popgqLyIsCiAgICAgICAgICAgICAgICAiLmludGVydmlldyAudGhyZWFkTGlzdEdyb3VwQ250eyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDEycHggMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IG5vbmU7IiwKICAgICAgICAgICAgICAgICIJei1pbmRleDogNDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5pbnRlcnZpZXcgLnRocmVhZExpc3RHcm91cENudCAubGlzdFRpdGxlQ250eyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGZsZXg7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLWJvdHRvbTogMTBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmludGVydmlldyAudGhyZWFkTGlzdEdyb3VwQ250IC5saXN0VGl0bGVDbnQgLmxpc3RSZXBseU51bSB7IiwKICAgICAgICAgICAgICAgICIJZmxvYXQ6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogOCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltaW4td2lkdGg6IDc1cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwIDE0cHggMCAxMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm94LXNpemluZzogYm9yZGVyLWJveDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tdG9wOiAtM3B4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJIiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW92ZXJmbG93OiBoaWRkZW47IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAyNHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDI0cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWFsaWduOiBjZW50ZXI7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICM2NjY7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogMTJweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5pbnRlcnZpZXcgLnRocmVhZExpc3RHcm91cENudCAubGlzdFRpdGxlQ250IC5saXN0UmVwbHlOdW06YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwnXCc7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xMDAlKTsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLC4wNCkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDI0cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItcmFkaXVzOiAxMnB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmludGVydmlldyAudGhyZWFkTGlzdEdyb3VwQ250IC5saXN0VGl0bGVDbnQgLmxpc3RVc2VyeyIsCiAgICAgICAgICAgICAgICAiCWZsb2F0OiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogZmxleDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTYlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWluLXdpZHRoOiAxNTVweDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZy1yaWdodDogMjBweCAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aGl0ZS1zcGFjZTogbm93cmFwOyIsCiAgICAgICAgICAgICAgICAiCW92ZXJmbG93OiB2aXNpYmxlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDIwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5pbnRlcnZpZXcgLnRocmVhZExpc3RHcm91cENudCAubGlzdFRpdGxlQ250IC5saXN0VGhyZWFkVGl0bGV7IiwKICAgICAgICAgICAgICAgICIJZmxvYXQ6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWZsZXg6IDE7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogZmxleDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tcmlnaHQ6IDIwcHg7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaXppbmc6IGJvcmRlci1ib3g7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJb3ZlcmZsb3c6IHZpc2libGU7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuaW50ZXJ2aWV3IC50aHJlYWRMaXN0R3JvdXBDbnQgLmxpc3RVc2VyIGF7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IGF1dG8gIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglvdmVyZmxvdzogaGlkZGVuOyIsCiAgICAgICAgICAgICAgICAiCXRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOyIsCiAgICAgICAgICAgICAgICAiCXdoaXRlLXNwYWNlOiBub3dyYXA7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxMnB4OyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAyMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdGV4dC1kZWNvcmF0aW9uOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuaW50ZXJ2aWV3IC50b3BpY190aHJlYWRfZGFubXUsIiwKICAgICAgICAgICAgICAgICIuaW50ZXJ2aWV3IC50aHJlYWRMaXN0R3JvdXBDbnQgLmxpc3REZXNjQ250LCIsCiAgICAgICAgICAgICAgICAiLmludGVydmlldyAudGhyZWFkTGlzdEdyb3VwQ250IC5saXN0QnRuQ250LCIsCiAgICAgICAgICAgICAgICAiLmludGVydmlldyAudGhyZWFkTGlzdEdyb3VwQ250IC5saXN0VGFsa0NudCwiLAogICAgICAgICAgICAgICAgIi5pbnRlcnZpZXcgLnRocmVhZExpc3RHcm91cENudCAubGlzdFBvc3RDbnQsIiwKICAgICAgICAgICAgICAgICIuaW50ZXJ2aWV3IC50aHJlYWRMaXN0R3JvdXBDbnQgLmxpc3RFZGl0b3JDbnQgeyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1sZWZ0OiA3OHB4OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1yaWdodDogNDBweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiNpbnRlcnZpZXctc2hhcmUtd3JhcHBlciwiLAogICAgICAgICAgICAgICAgIi5pbnRlcnZpZXcgLnRocmVhZExpc3RHcm91cENudCAubWluaSAuZmFjZUljb24sIiwKICAgICAgICAgICAgICAgICIjbGl2ZUljb257IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmludGVydmlldyAudGhyZWFkTGlzdEdyb3VwQ250IC5saXN0VGl0bGVDbnQgLmxpc3RUaHJlYWRUaXRsZSBhOmZpcnN0LW9mLXR5cGU6YmVmb3JleyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwn5LuK5pel6K+d6aKYXCc7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZC1jb2xvcjogIzQyODVGNTsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDIwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMjBweDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItcmFkaXVzOiA0cHg7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCA0cHg7IiwKICAgICAgICAgICAgICAgICIJdmVydGljYWwtYWxpZ246IHRvcDsiLAogICAgICAgICAgICAgICAgIgkiLAogICAgICAgICAgICAgICAgIglmbGV4OiAwIDAgYXV0bzsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBpbmxpbmUtYmxvY2sgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogYXV0byAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi10b3A6IDFweDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tcmlnaHQ6IDJweDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWFsaWduOiBjZW50ZXI7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxMnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zdHlsZTogbm9ybWFsICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNmZmYgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5pbnRlcnZpZXcgLnRocmVhZExpc3RHcm91cENudCAubGlzdFRpdGxlQ250IC5saXN0VGhyZWFkVGl0bGUgaW1nW3NyYyo9XCJpbnRlcnZpZXdfaWNvbi5naWZcIl0rYTpmaXJzdC1vZi10eXBlOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcJ+iuv+iwiOebtOaSrVwnOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIvKui/mOW8ueW5lS4uLuecn+eahOeskSznrJHlh7rlo7AqLyIsCiAgICAgICAgICAgICAgICAiLm9wdWktYmFycmFnZS1zZXR1cCB7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlOyIsCiAgICAgICAgICAgICAgICAiCXRvcDogMDsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiAxMDAlOyIsCiAgICAgICAgICAgICAgICAiCW92ZXJmbG93OiBoaWRkZW47IiwKICAgICAgICAgICAgICAgICIJdGV4dC1pbmRlbnQ6IDA7IiwKICAgICAgICAgICAgICAgICIJY3Vyc29yOiBwb2ludGVyOyIsCiAgICAgICAgICAgICAgICAiCSIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAyNHB4OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogYXV0byAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDAgNnB4IDZweCAwOyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaGFkb3c6IC0ycHggMnB4IDJweCAwIHJnYmEoMCwgMCwgMCwgMC4wOCk7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogIzQ4NzlCRCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdvcmQtYnJlYWs6IGJyZWFrLWFsbDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAxMHB4IDZweDsiLAogICAgICAgICAgICAgICAgIglib3gtc2l6aW5nOiBib3JkZXItYm94OyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAxNnB4OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTJweDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogI2ZmZjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5vcHVpLWJhcnJhZ2Utc2V0dXA6YmVmb3JleyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlNTZiXCI7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxNnB4OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtZmFtaWx5OiBcJ01hdGVyaWFsIEljb25zXCc7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zdHlsZTogbm9ybWFsOyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGlubGluZS1ibG9jazsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDIwcHg7IiwKICAgICAgICAgICAgICAgICIJdmVydGljYWwtYWxpZ246IHRvcDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tbGVmdDogLTEuNXB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLm9wdWktYmFycmFnZS1zZXR1cDphZnRlcnsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIuWxleW8gOW8ueW5lVwiIiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi5pbnRlcnZpZXcgLnRocmVhZExpc3RHcm91cENudCAubWluaXsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDQpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLWJvdHRvbTogNHB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgLjA0KSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIuaW50ZXJ2aWV3IC50aHJlYWRMaXN0R3JvdXBDbnQgLm1pbmkgLnBsYWNlaG9sZGVyOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGU7IiwKICAgICAgICAgICAgICAgICIJcmlnaHQ6IDhweDsiLAogICAgICAgICAgICAgICAgIgl0b3A6IDJweDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogI2FhYSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmludGVydmlldyAudGhyZWFkTGlzdEdyb3VwQ250IC5saXN0VGFsa0NudCwiLAogICAgICAgICAgICAgICAgIi5pbnRlcnZpZXcgLnRocmVhZExpc3RHcm91cENudCAubGlzdFBvc3RDbnR7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAuMDEpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAuMSkgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiA2cHggMDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5pbnRlcnZpZXcgLnRocmVhZExpc3RHcm91cENudCAubGlzdEdyb3VwQ250eyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgMTBweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5pbnRlcnZpZXcgLnRocmVhZExpc3RHcm91cENudCAubGlzdEl0ZW1DbnR7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci10b3A6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIC4wNCk7ICIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmludGVydmlldyAudGhyZWFkTGlzdEdyb3VwQ250IC5saXN0SXRlbUNudDpmaXJzdC1vZi10eXBleyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci10b3A6IG5vbmU7ICIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmludGVydmlldyAucEluZm9DbnQgLnBSZXBseSwiLAogICAgICAgICAgICAgICAgIi5pbnRlcnZpZXcgLnBJbmZvQ250IC5wTG9naW4sIiwKICAgICAgICAgICAgICAgICIuaW50ZXJ2aWV3IC50aHJlYWRMaXN0R3JvdXBDbnQgLnBUYWlsIC5wRnJvbXsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogIzk5OTsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWRlY29yYXRpb246IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LXRyYW5zZm9ybTogY2FwaXRhbGl6ZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5pbnRlcnZpZXcgLnRocmVhZExpc3RHcm91cENudCAubGlzdFRhbGtDbnQgLmxpc3RUaXRsZSwiLAogICAgICAgICAgICAgICAgIi5pbnRlcnZpZXcgLnRocmVhZExpc3RHcm91cENudCAubGlzdFBvc3RDbnQgLmxpc3RUaXRsZXsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGU7IiwKICAgICAgICAgICAgICAgICIJei1pbmRleDogMjsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiAtMjVweDsiLAogICAgICAgICAgICAgICAgIgl0b3A6IC0xcHg7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDI0cHg7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiBhdXRvOyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDZweCAwIDAgNnB4OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgLjEpOyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yaWdodDogbm9uZTsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiAjZmVmZWZlOyIsCiAgICAgICAgICAgICAgICAiCW92ZXJmbG93OiBoaWRkZW47IiwKICAgICAgICAgICAgICAgICIJd29yZC1icmVhazogYnJlYWstYWxsOyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDEwcHggNnB4OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaXppbmc6IGJvcmRlci1ib3g7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDE2cHg7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxMnB4OyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjYWFhOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmludGVydmlldyAudGhyZWFkTGlzdEdyb3VwQ250IC5saXN0UG9zdENudCAubGlzdFRpdGxlOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50Olwn5ZCn5Y+L6K6o6K66XCciLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5pbnRlcnZpZXcgLnRocmVhZExpc3RHcm91cENudCAubGlzdFRhbGtDbnQgLmxpc3RUaXRsZTpiZWZvcmV7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDpcJ+iuv+iwiOWGheWuuVwnOyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjNDg3OUJEOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIuaW50ZXJ2aWV3IC50aHJlYWRMaXN0R3JvdXBDbnQgLmxpc3RCdG5DbnQgLnNsaWRlQnRueyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDZweCA2cHggMCAwOyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwwLDAsLjEpOyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6ICNmZmY7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICMyRDY0QjM7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IGF1dG87IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAyMHB4OyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAyMHB4OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi10b3A6IDZweDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwIDZweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5pbnRlcnZpZXcgLnRocmVhZExpc3RHcm91cENudCAubGlzdEJ0bkNudCAuc2xpZGVCdG46YmVmb3JleyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwn5bGV5byAXCc7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuaW50ZXJ2aWV3IC50aHJlYWRMaXN0R3JvdXBDbnQgLmxpc3RCdG5DbnQgLnNsaWRlQnRuOmFmdGVyIHsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcJ1xcZTMxM1wnOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtZmFtaWx5OiBcJ01hdGVyaWFsIEljb25zXCc7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAyMHB4OyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGlubGluZS1ibG9jazsiLAogICAgICAgICAgICAgICAgIgl2ZXJ0aWNhbC1hbGlnbjogdG9wOyIsCiAgICAgICAgICAgICAgICAiCXRleHQtaW5kZW50OiAwOyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxNnB4OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1sZWZ0OiAtMnB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmludGVydmlldyAudGhyZWFkTGlzdEdyb3VwQ250IC5saXN0QnRuQ250IC5zbGlkZUJ0bi5kb3dueyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1ib3R0b206IG5vbmU7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuaW50ZXJ2aWV3IC50aHJlYWRMaXN0R3JvdXBDbnQgLmxpc3RCdG5DbnQgLnNsaWRlQnRuLmRvd246YmVmb3JleyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwn5pS26LW3XCc7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuaW50ZXJ2aWV3IC50aHJlYWRMaXN0R3JvdXBDbnQgLmxpc3RCdG5DbnQgLnNsaWRlQnRuLmRvd246YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwnXFxlMzE2XCc7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuaW50ZXJ2aWV3IC5saXN0QnRuQ250IC5saXN0X2Fubm91bmNlbWVudF9jbnR7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5pbnRlcnZpZXcgLmxpc3RCdG5DbnQgLmxpc3RfYW5ub3VuY2VtZW50X2NudDpiZWZvcmV7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCdcXGUwNTBcJzsiLAogICAgICAgICAgICAgICAgIglmb250LWZhbWlseTogXCdNYXRlcmlhbCBJY29uc1wnOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMjBweDsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJdmVydGljYWwtYWxpZ246IHRvcDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWluZGVudDogMDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogI2FhYTsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tcmlnaHQ6IDJweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi8qbGluay1pY29uKi8iLAogICAgICAgICAgICAgICAgIi5hcGNfc3JjX3dyYXBwZXJ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDpub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZy1sZWZ0OiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuYXBjX3NyY193cmFwcGVyOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcJ1xcZTE1N1wnOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtZmFtaWx5OiBcJ01hdGVyaWFsIEljb25zXCc7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxOHB4OyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGlubGluZS1ibG9jazsiLAogICAgICAgICAgICAgICAgIgl2ZXJ0aWNhbC1hbGlnbjogdG9wOyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1yaWdodDogMnB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLyror63pn7MqLyIsCiAgICAgICAgICAgICAgICAiLnZvaWNlX3BsYXllciBhLnZvaWNlX3BsYXllcl9pbm5lcnsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDE2MHB4OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMjRweDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMjRweDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAzcHggNHB4OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMCwwLDAsLjA0KTsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsMCwwLC4wNCk7IiwKICAgICAgICAgICAgICAgICIJYm94LXNoYWRvdzogbm9uZTsiLAogICAgICAgICAgICAgICAgIglib3JkZXItcmFkaXVzOiA0cHg7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICM2NjY7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IHJlbGF0aXZlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnZvaWNlX3BsYXllcl9taW5peyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJdmVydGljYWwtYWxpZ246IG1pZGRsZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi52b2ljZV9wbGF5ZXJfbWluaSBhLnZvaWNlX3BsYXllcl9pbm5lcnsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTAwcHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudm9pY2VfcGxheWVyIC5taWRkbGV7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDEwMCU7IiwKICAgICAgICAgICAgICAgICIJd2hpdGUtc3BhY2U6IG5vd3JhcDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlOyIsCiAgICAgICAgICAgICAgICAiCXRvcDogMDsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiAwOyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgNHB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnZvaWNlX3BsYXllcl9taW5pIC5taWRkbGV7IiwKICAgICAgICAgICAgICAgICIJdG9wOiAzcHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudm9pY2VfcGxheWVyIC50aW1lIHsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLXJpZ2h0OiAxNnB4OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZmxvYXQ6IHJpZ2h0OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnZvaWNlX3BsYXllciAuYmVmb3JlLCIsCiAgICAgICAgICAgICAgICAiLnZvaWNlX3BsYXllciAuYWZ0ZXJ7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnZvaWNlX3BsYXllcl9pbm5lci5wbGF5aW5nLCIsCiAgICAgICAgICAgICAgICAiLnZvaWNlX3BsYXllci5wbGF5aW5nIGEudm9pY2VfcGxheWVyX2lubmVyeyIsCiAgICAgICAgICAgICAgICAiCWFuaW1hdGlvbi1uYW1lOiBicmVhdGhlOyIsCiAgICAgICAgICAgICAgICAiCSBhbmltYXRpb24tZHVyYXRpb246IDFzOyIsCiAgICAgICAgICAgICAgICAiCSBhbmltYXRpb24taXRlcmF0aW9uLWNvdW50OiBpbmZpbml0ZTsiLAogICAgICAgICAgICAgICAgIgkgYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogbGluZWFyOyIsCiAgICAgICAgICAgICAgICAiCWFuaW1hdGlvbi1kaXJlY3Rpb246IGFsdGVybmF0ZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIkBrZXlmcmFtZXMgYnJlYXRoZSB7IiwKICAgICAgICAgICAgICAgICIJZnJvbSB7Ym94LXNoYWRvdzppbnNldCAwIDAgMnB4IHJnYmEoMjU1LDI1NSwyNTUsMCk7fSIsCiAgICAgICAgICAgICAgICAiCXRvIHtib3gtc2hhZG93Omluc2V0IDAgMCAxMHB4IHJnYmEoMCwwLDAsLjIpO30iLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi52b2ljZV9wbGF5ZXIgLnNwZWFrZXJ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXZlcnRpY2FsLWFsaWduOiB0b3A7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudm9pY2VfcGxheWVyIC5zcGVha2VyOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcJ1xcZTAzN1wnOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtZmFtaWx5OiBcJ01hdGVyaWFsIEljb25zXCc7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAyNHB4OyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGlubGluZS1ibG9jazsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5sb2FkaW5nIC5zcGVha2VyOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcJ1xcZTg2YVwnOyIsCiAgICAgICAgICAgICAgICAiCWFuaW1hdGlvbi1uYW1lOiByb3RhdGU7IiwKICAgICAgICAgICAgICAgICIJIGFuaW1hdGlvbi1kdXJhdGlvbjogMnM7IiwKICAgICAgICAgICAgICAgICIJIGFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6IGluZmluaXRlOyIsCiAgICAgICAgICAgICAgICAiCSBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBsaW5lYXI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICJAa2V5ZnJhbWVzIHJvdGF0ZSB7IiwKICAgICAgICAgICAgICAgICIJZnJvbSB7dHJhbnNmb3JtOnJvdGF0ZSgwZGVnKTt9IiwKICAgICAgICAgICAgICAgICIJdG8ge3RyYW5zZm9ybTpyb3RhdGUoMzYwZGVnKTt9IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucGxheWluZyAuc3BlYWtlcjpiZWZvcmV7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCdcXGUwNDdcJzsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi8q5Y+R5biW6K+d6aKYKi8iLAogICAgICAgICAgICAgICAgIi50b3BpY19zdWdfYm94X3dyYXBwZXJ7IiwKICAgICAgICAgICAgICAgICIJei1pbmRleDogOTk5OTsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tdG9wOiAyMHB4OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1sZWZ0OiAtOHB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRiX3JpY2hfcG9zdGVyIC5wb3N0ZXJfYm9keSAudG9waWNfYWRkX2J0bnsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGU7IiwKICAgICAgICAgICAgICAgICIJdG9wOiAwOyIsCiAgICAgICAgICAgICAgICAiCXJpZ2h0OiAwOyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogNDBweDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogNDBweDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWFsaWduOiBjZW50ZXI7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJb3ZlcmZsb3c6IGhpZGRlbjsiLAogICAgICAgICAgICAgICAgIglib3gtc2l6aW5nOiBib3JkZXItYm94OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMCwwLDAsLjA0KSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1ib3R0b206IDRweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDApOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tcHJvcGVydHk6IGJvcmRlcjsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWR1cmF0aW9uOiAxczsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50Yl9yaWNoX3Bvc3RlciAucG9zdGVyX2JvZHkgLnRvcGljX2FkZF9idG46aG92ZXJ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLWJvdHRvbTogNHB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgLjEpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRiX3JpY2hfcG9zdGVyIC5wb3N0ZXJfYm9keSAudG9waWNfYWRkX2J0bjpiZWZvcmV7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCcjXCc7IiwKICAgICAgICAgICAgICAgICIJZm9udC1mYW1pbHk6IGZhbnRhc3k7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAyMnB4OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtd2VpZ2h0OiBib2xkOyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjOTk5ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlOyIsCiAgICAgICAgICAgICAgICAiCWxlZnQ6IDUwJTsiLAogICAgICAgICAgICAgICAgIgl0b3A6IDUwJTsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXByb3BlcnR5OiB0cmFuc2Zvcm07IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi1kdXJhdGlvbjogLjVzOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOiBjdWJpYy1iZXppZXIoMC4yMywgMSwgMC4zMiwgMSk7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGJfcmljaF9wb3N0ZXIgLnBvc3Rlcl9ib2R5IC50b3BpY19hZGRfYnRuOmhvdmVyOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKSB0cmFuc2xhdGVZKC0zOHB4KTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50Yl9yaWNoX3Bvc3RlciAucG9zdGVyX2JvZHkgLnRvcGljX2FkZF9idG46YWZ0ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwi6K+d6aKYXCI7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICM2NjYgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDEycHg7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlOyIsCiAgICAgICAgICAgICAgICAiCWxlZnQ6IDUwJTsiLAogICAgICAgICAgICAgICAgIgl0b3A6IDUwJTsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKSB0cmFuc2xhdGVZKDM4cHgpOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb24tcHJvcGVydHk6IHRyYW5zZm9ybTsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWR1cmF0aW9uOiAuNXM7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246IGN1YmljLWJlemllcigwLjIzLCAxLCAwLjMyLCAxKTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50Yl9yaWNoX3Bvc3RlciAucG9zdGVyX2JvZHkgLnRvcGljX2FkZF9idG46aG92ZXI6YWZ0ZXJ7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIvKuW4luWtkOWGhemhteaKleelqCovIiwKICAgICAgICAgICAgICAgICIjdm90ZUZsYXNoUGFuZWwgLnZvdGVfYnV0dG9ucyBidXR0b257IiwKICAgICAgICAgICAgICAgICIJdGV4dC1pbmRlbnQ6IDA7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudm90ZV9wcm9ncmVzc19iYXNleyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMCwwLDAsLjEpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnZvdGVfcHJvZ3Jlc3NfYmFyX2NvbnRhaW5lciB7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAxMHB4OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlcjogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnZvdGVfcHJvZ3Jlc3NfYmFyeyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMTBweDsiLAogICAgICAgICAgICAgICAgIglvcGFjaXR5OiAuODsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zcHJlYWRfYnRueyIsCiAgICAgICAgICAgICAgICAiCXotaW5kZXg6IDk5OTsiLAogICAgICAgICAgICAgICAgIn0iCiAgICAgICAgICAgIF0uam9pbigiXG4iKTsKICAgICAgICBpZiAoZmFsc2UgfHwgKG5ldyBSZWdFeHAoIl5odHRwcz86Ly8odGllYmEuYmFpZHUuY29tfHd3dy50aWViYS5jb20pKC8qfCg/IS8rdGJtYWxsLyspLiopJCIpKS50ZXN0KGRvY3VtZW50LmxvY2F0aW9uLmhyZWYpKQogICAgICAgICAgICBjc3MgKz0gWwogICAgICAgICAgICAgICAgIi8qVOmAl+WVhuWfjuS7peWklueahOmhtemdoiovIiwKICAgICAgICAgICAgICAgICIvKuS4u+S9k+ahhuaetiovIiwKICAgICAgICAgICAgICAgICIuZm9ydW1faW5mb193cmFwLCIsCiAgICAgICAgICAgICAgICAiLmdvb2RfbGlzdF9vdXRlciwiLAogICAgICAgICAgICAgICAgIi5jb250ZW50IHsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDIwcHggYXV0byAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6ICNGZEZkRmQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3gtc2hhZG93OiAwIDAgMjBweCAycHggcmdiYSgwLCAwLCAwLCAuMSk7IiwKICAgICAgICAgICAgICAgICIJLypib3JkZXI6IDFweCBzb2xpZCAjREJEQ0UwICFpbXBvcnRhbnQ7Ki8iLAogICAgICAgICAgICAgICAgIglib3gtc2l6aW5nOiBib3JkZXItYm94ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IHJlbGF0aXZlOyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1ib3R0b206IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltaW4taGVpZ2h0OiAwOyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDIwcHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc2tpbl8yMTAzIFtpZD1cInBhZ2VsZXRfZnJzLWhlYWRlci9wYWdlbGV0L2hlYWRcIl0sIiwKICAgICAgICAgICAgICAgICIuYXBwX2ZvcnVtX2JvZHkgW2lkPVwicGFnZWxldF9mcnMtaGVhZGVyL3BhZ2VsZXQvaGVhZFwiXSwiLAogICAgICAgICAgICAgICAgIi5oZWFkX3RvcCwiLAogICAgICAgICAgICAgICAgIi5oZWFkX2NvbnRlbnQsIiwKICAgICAgICAgICAgICAgICIuY2FyZF9iYW5uZXIgeyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDIwcHggMjBweCAwIDA7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIjbWFpbl93cmFwcGVyICNmb290ZXIsIiwKICAgICAgICAgICAgICAgICIucGJfZm9vdGVyLCIsCiAgICAgICAgICAgICAgICAiLmZvb3QsIiwKICAgICAgICAgICAgICAgICIuZm9ydW1fZm9vdCwiLAogICAgICAgICAgICAgICAgIi5nb29kX2xpc3RfaW5uZXJ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogMCAwIDIwcHggMjBweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5mb290LCIsCiAgICAgICAgICAgICAgICAiLnBsYXRfc2tpbiAud3JhcDEsIiwKICAgICAgICAgICAgICAgICIuc2tpbl8yMTAzIC53cmFwMSwiLAogICAgICAgICAgICAgICAgIi5hcHBfZm9ydW1fYm9keSAud3JhcDEsIiwKICAgICAgICAgICAgICAgICIuaGVhZF9tYWluIC5oZWFkX21pZGRsZSwiLAogICAgICAgICAgICAgICAgIi5oZWFkX21haW4gLmhlYWRfY29udGVudCwiLAogICAgICAgICAgICAgICAgIi5zZWFyY2hfZm9ybV9maXhlZCwiLAogICAgICAgICAgICAgICAgIi5zZWFyY2hfYnJpZ2h0LCIsCiAgICAgICAgICAgICAgICAiLmxfY29udGFpbmVyLCIsCiAgICAgICAgICAgICAgICAiLmZvcnVtX2luZm9fd3JhcCwiLAogICAgICAgICAgICAgICAgIi5nb29kX2xpc3Rfb3V0ZXIsIiwKICAgICAgICAgICAgICAgICIuY29udGVudHsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogOTgwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi50YnVpX2FzaWRlX2Zsb2F0X2JhciB7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLWxlZnQ6IGNhbGMoOTgwcHggLyAyKSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmNvcmVfdGl0bGVfYWJzb2x1dGVfYnJpZ2h0IHsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogY2FsYyg5ODBweCArIDU4cHgpICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIubF9jb250YWluZXIgLmNvbnRlbnR7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDEwMCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAxMHB4OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAxMHB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmZvcnVtX2luZm9fd3JhcCwiLAogICAgICAgICAgICAgICAgIi5nb29kX2xpc3Rfb3V0ZXJ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMTBweDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogMTBweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5oZWFkZXJ+LmNvbnRlbnQgeyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogMDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItdG9wOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLWJvdHRvbTogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmhlYWRfY29udGVudCwiLAogICAgICAgICAgICAgICAgIi5mb290IHsiLAogICAgICAgICAgICAgICAgIglib3gtc2hhZG93OiAwIDAgMjBweCAycHggcmdiYSgwLCAwLCAwLCAuMSk7IiwKICAgICAgICAgICAgICAgICIJYm94LXNpemluZzogYm9yZGVyLWJveDsiLAogICAgICAgICAgICAgICAgIgkvKmJvcmRlcjogMXB4IHNvbGlkICNEQkRDRTAgIWltcG9ydGFudDsqLyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci10b3A6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiNtYWluX3dyYXBwZXIgI2Zvb3RlciwiLAogICAgICAgICAgICAgICAgIi5pYm9keSwiLAogICAgICAgICAgICAgICAgImJvZHk6bm90KC5hcHBfZm9ydW1fYm9keSk6bm90KC5za2luXzIxMDMpIC5oZWFkX3RvcCwiLAogICAgICAgICAgICAgICAgIi5hcHBfZm9ydW1fYm9keSAuYXBwLWhlYWRlci13cmFwcGVyLCIsCiAgICAgICAgICAgICAgICAiLnNraW5fMjEwMyAuYXBwLWhlYWRlci13cmFwcGVyLCIsCiAgICAgICAgICAgICAgICAiLmZvcnVtX2NvbnRlbnQsIiwKICAgICAgICAgICAgICAgICIuaGVhZF9jb250ZW50LCIsCiAgICAgICAgICAgICAgICAiLmZvb3QgeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6ICNGZEZkRmQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5pYm9keSAudzc1MCwiLAogICAgICAgICAgICAgICAgIltpZD1cInBhZ2VsZXRfZW5jb3VyYWdlLWFwcGZvcnVtL3BhZ2VsZXQvaGVhZF90b3BcIl0sIiwKICAgICAgICAgICAgICAgICJbaWQ9XCJwYWdlbGV0X25hdmlnYXRpb24vcGFnZWxldC9uYXZpZ2F0aW9uXCJdLCIsCiAgICAgICAgICAgICAgICAiW2lkPVwicGFnZWxldF9wb3N0ZXIvcGFnZWxldC9yaWNoX3Bvc3RlclwiXXsiLAogICAgICAgICAgICAgICAgIgkvKumBrueblumYtOW9sSovIiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogI0ZkRmRGZCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiByZWxhdGl2ZTsiLAogICAgICAgICAgICAgICAgIgl6LWluZGV4OiAxOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmhlYWRfY29udGVudCB7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLWJvdHRvbTogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmZvb3QgeyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci10b3A6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tYm90dG9tOiA1MHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi5oZWFkX2NvbnRlbnQgeyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1ib3R0b206IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5nb29kX2xpc3Rfb3V0ZXIgLmNhcmRfdG9wX3dyYXAsIiwKICAgICAgICAgICAgICAgICIuZm9ydW1faW5mb193cmFwIC5jYXJkX3RvcF93cmFwLCIsCiAgICAgICAgICAgICAgICAiLnBsYXRfcmVjb21fY2Fyb3VzZWwsIiwKICAgICAgICAgICAgICAgICIuc3Rhcl9oZWFkLCIsCiAgICAgICAgICAgICAgICAiLnN0YXJfYmFubmVyLCIsCiAgICAgICAgICAgICAgICAiLnZlcnRpY2FsX2NhcmRfYmFubmVyLCIsCiAgICAgICAgICAgICAgICAiLmNvbnRlbnQ+LmNhcmRfdG9wX3dyYXAsIiwKICAgICAgICAgICAgICAgICIuZm9ydW1faGVhZGVyLCIsCiAgICAgICAgICAgICAgICAiLnBsYXRfaGVhZCwiLAogICAgICAgICAgICAgICAgIi5wbGF0X2Jhbm5lcnsiLAogICAgICAgICAgICAgICAgIglib3JkZXItcmFkaXVzOiBpbmhlcml0OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDA7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDA7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuaGVhZF90b3B7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLXRvcDogMzBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmhlYWRfdG9wKy5oZWFkX2NvbnRlbnR7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogMDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5wbGF0X2Jhbm5lcnsiLAogICAgICAgICAgICAgICAgIglvdmVyZmxvdzogaGlkZGVuOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnBiX2Zvb3RlciB7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDEwMCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucGJfZm9vdGVyIHsiLAogICAgICAgICAgICAgICAgIglib3JkZXItbGVmdDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yaWdodDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmZvcnVtX2NvbnRlbnQgeyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yaWdodDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1sZWZ0OiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLWJvdHRvbTogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXotaW5kZXg6IDM7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IHJlbGF0aXZlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmZvcnVtX2Zvb3QgeyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yaWdodDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1sZWZ0OiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmZyc19jb250ZW50X2Zvb3Rlcl9wYWdlbGV0IHsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTAwJSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5mb3J1bV9mb290LCIsCiAgICAgICAgICAgICAgICAiLmZyc19jb250ZW50X2Zvb3Rlcl9wYWdlbGV0IHsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOm5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5mb290ZXIgeyIsCiAgICAgICAgICAgICAgICAiCWNsZWFyOiBib3RoOyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAyMnB4OyIsCiAgICAgICAgICAgICAgICAiCXRleHQtYWxpZ246IGNlbnRlcjsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgYXV0byAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDIwcHggMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjYmJiICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZm9vdGVyICogeyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiBpbmhlcml0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi8q5YWo5bGP57yW6L6R5qGGKi8iLAogICAgICAgICAgICAgICAgIi50Yi11ZWRpdG9yLWZ1bGxzY3JlZW4gW2lkPVwicGFnZWxldF9wb3N0ZXIvcGFnZWxldC9yaWNoX3Bvc3RlclwiXSwiLAogICAgICAgICAgICAgICAgIi50Yi11ZWRpdG9yLWZ1bGxzY3JlZW4gLnRiX3JpY2hfcG9zdGVyX2NvbnRhaW5lcnsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLXRvcDogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXotaW5kZXg6IDEwMDAwICFpbXBvcnRhbnQiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnRiLXVlZGl0b3ItZnVsbHNjcmVlbiAucG9zdGVyX2hlYWQsIiwKICAgICAgICAgICAgICAgICIucG9zdGVyX2NsZWFyX2Z1bGxzY3JlZW57IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIudGItdWVkaXRvci1mdWxsc2NyZWVuICNyaWNoX3VlZGl0b3JfdHBseyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmctdG9wOiAyMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDk4MHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZC1jb2xvcjogI0ZkRmRGZCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZy1ib3R0b206IDQwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3gtc2hhZG93OiAwIDAgMjBweCAycHggcmdiYSgwLCAwLCAwLCAuMSk7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogMCAwIDIwcHggMjBweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLnRiLXVlZGl0b3ItZnVsbHNjcmVlbiAuZWR1aS1ib2R5LWNvbnRhaW5lcnsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDYwdmg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi5mdWxsc2NyZWVuLXdvcmQtbGltaXR7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiA0MHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDQwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogI2NjYyAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIKICAgICAgICAgICAgXS5qb2luKCJcbiIpOwogICAgICAgIGlmIChmYWxzZSB8fCAobmV3IFJlZ0V4cCgiXmh0dHBzPzovLyh0aWViYS5iYWlkdS5jb218d3d3LnRpZWJhLmNvbSkoLyp8KD8hLytob21lLyspLiopJCIpKS50ZXN0KGRvY3VtZW50LmxvY2F0aW9uLmhyZWYpKQogICAgICAgICAgICBjc3MgKz0gWwogICAgICAgICAgICAgICAgIi8q5Liq5Lq65Li76aG15Lul5aSW55qE6aG16Z2iKi8iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiLndyYXAxLCIsCiAgICAgICAgICAgICAgICAiLndyYXAyIHsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiYm9keTpub3QoLmFwcF9mb3J1bV9ib2R5KTpub3QoLnNraW5fMjEwMykgLndyYXAxLCIsCiAgICAgICAgICAgICAgICAiLndyYXAyeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtaW1hZ2U6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iCiAgICAgICAgICAgIF0uam9pbigiXG4iKTsKICAgICAgICBpZiAoZmFsc2UgfHwgKG5ldyBSZWdFeHAoIl5odHRwcz86Ly8odGllYmEuYmFpZHUuY29tfHd3dy50aWViYS5jb20pLytwLysuKiQiKSkudGVzdChkb2N1bWVudC5sb2NhdGlvbi5ocmVmKSkKICAgICAgICAgICAgY3NzICs9IFsKICAgICAgICAgICAgICAgICIvKuW4luWtkOWGhemhteiwg+aVtCovIiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi50YnVpX2FzaWRlX2Zsb2F0X2JhciB7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLWJvdHRvbTogMTJ2aDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiI2NvbnRhaW5lciB7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLWJvdHRvbTogODBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnRiX3JpY2hfcG9zdGVyX2NvbnRhaW5lcj4udGJfcmljaF9wb3N0ZXIgLnBvc3Rlcl9oZWFkX3RleHR7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAxNHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICM2NjY7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGJfcmljaF9wb3N0ZXJfY29udGFpbmVyPi50Yl9yaWNoX3Bvc3RlciAucG9zdGVyX2hlYWRfdGV4dDpiZWZvcmV7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDpcIlxcZTI1M1wiOyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGlubGluZS1ibG9jazsiLAogICAgICAgICAgICAgICAgIglmb250LWZhbWlseTogXCdNYXRlcmlhbCBJY29uc1wnOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTZweDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMjRweDsiLAogICAgICAgICAgICAgICAgIgl2ZXJ0aWNhbC1hbGlnbjogdG9wOyIsCiAgICAgICAgICAgICAgICAiCXRleHQtYWxpZ246IGNlbnRlcjsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogIzc3NzsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgLTRweDsiLAogICAgICAgICAgICAgICAgIn0iCiAgICAgICAgICAgIF0uam9pbigiXG4iKTsKICAgICAgICBpZiAoZmFsc2UgfHwgKG5ldyBSZWdFeHAoIl5odHRwcz86Ly8odGllYmEuYmFpZHUuY29tfHd3dy50aWViYS5jb20pLytwLytcXGQrLipcXD8oLiomKSpzZWVfbHo9WzEtOV0rXFxkKi4qJCIpKS50ZXN0KGRvY3VtZW50LmxvY2F0aW9uLmhyZWYpKQogICAgICAgICAgICBjc3MgKz0gWwogICAgICAgICAgICAgICAgIi8q5biW5a2Q5YaF6aG1LeWPqueci+alvOS4uyovIiwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgIi5jb3JlX3RpdGxlX2J0bnMgI2x6b25seV9jbnRuOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCJcXGU4ZjVcIiAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMzBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmNvcmVfdGl0bGVfYWJzb2x1dGVfYnJpZ2h0IC5jb3JlX3RpdGxlX2J0bnMgI2x6b25seV9jbnRuOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAzNHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZF9sem9ubHlfYmRhc2lkZTpiZWZvcmUgeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwi5Y+W5raIXCI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIubG91emh1Ymlhb3NoaV93cmFwIHsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IgogICAgICAgICAgICBdLmpvaW4oIlxuIik7CiAgICAgICAgaWYgKGZhbHNlIHx8IChuZXcgUmVnRXhwKCJeaHR0cHM/Oi8vKHRpZWJhLmJhaWR1LmNvbXx3d3cudGllYmEuY29tKS8raG9tZS8rLiokIikpLnRlc3QoZG9jdW1lbnQubG9jYXRpb24uaHJlZikpCiAgICAgICAgICAgIGNzcyArPSBbCiAgICAgICAgICAgICAgICAiLyrkuKrkurrkuLvpobUqLyIsCiAgICAgICAgICAgICAgICAiLyrov7fkuYvpobXpnaLnu5PmnoQuLi7ml6DlipvlkJDmp70uLi4uKi8iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiYm9keT4ud3JhcDEgeyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiA5ODBweDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItcmFkaXVzOiAyMHB4OyIsCiAgICAgICAgICAgICAgICAiCW92ZXJmbG93OiB2aXNpYmxlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJLypib3JkZXI6IDFweCBzb2xpZCAjREJEQ0UwICFpbXBvcnRhbnQ7Ki8iLAogICAgICAgICAgICAgICAgIglib3gtc2l6aW5nOiBib3JkZXItYm94OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlciAtMjBweDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tdG9wOiA5MHB4OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaGFkb3c6IDAgMCAyMHB4IDJweCByZ2JhKDAsIDAsIDAsIC4xKTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5oZWFkaW5mb193cmFwIHsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgYXV0bzsiLAogICAgICAgICAgICAgICAgIglib3JkZXItcmFkaXVzOiAyMHB4OyIsCiAgICAgICAgICAgICAgICAiCW92ZXJmbG93OiBoaWRkZW47IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIjaGVhZCB7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwIGF1dG87IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlOyIsCiAgICAgICAgICAgICAgICAiCXRvcDogLTgwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zZWFyY2hfYnJpZ2h0eyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiA5ODJweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnVzZXJpbmZvX3dyYXAgeyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY29udGFpbmVyX3dyYXAgeyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogI0ZkRmRGZCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDAgMCAyMHB4IDIwcHg7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IHJlbGF0aXZlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmxlZnRfYXNpZGUgeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5yaWdodF9hc2lkZSB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlcjogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnJpZ2h0X2FzaWRlID4gKiB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXotaW5kZXg6IDI7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IHJlbGF0aXZlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnJpZ2h0X2FzaWRlOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDIzOXB4OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci10b3A6IDFweCBzb2xpZCAjZTBlMGUwOyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1sZWZ0OiAxcHggc29saWQgI2UwZTBlMDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIC4wMik7IiwKICAgICAgICAgICAgICAgICIJei1pbmRleDogMSIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmlob21lX25hdl93cmFwIHsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5mb290ZXIgeyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZTsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiA1MCU7IiwKICAgICAgICAgICAgICAgICIJYm90dG9tOiAtNTBweDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuY29udGVudF93cmFweyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiA3NDJweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmZpeC1mb3ItaWU4eyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iCiAgICAgICAgICAgIF0uam9pbigiXG4iKTsKICAgICAgICBpZiAoZmFsc2UgfHwgKG5ldyBSZWdFeHAoIl5odHRwcz86Ly8odGllYmEuYmFpZHUuY29tfHd3dy50aWViYS5jb20pLysoaW5kZXguaHRtbC4qKSooW1xcPyNdKy4qKSokIikpLnRlc3QoZG9jdW1lbnQubG9jYXRpb24uaHJlZikpCiAgICAgICAgICAgIGNzcyArPSBbCiAgICAgICAgICAgICAgICAiLyrotLTlkKfpppbpobUqLyIsCiAgICAgICAgICAgICAgICAiLmhlYWRfcmlnaHRfcmVnaW9ueyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAxMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm94LXNpemluZzogYm9yZGVyLWJveDsiLAogICAgICAgICAgICAgICAgIglmbG9hdDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnNlYXJjaF9sb2dvIHsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGU7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJei1pbmRleDogMTsiLAogICAgICAgICAgICAgICAgIglwb2ludGVyLWV2ZW50czogbm9uZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zZWFyY2hfdG9wOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIkRlc2dpbiBieSBNYXZlcmlja1wiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMDsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBibG9jazsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogNjBweDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDMwcHg7IiwKICAgICAgICAgICAgICAgICIJcG9pbnRlci1ldmVudHM6IGF1dG87IiwKICAgICAgICAgICAgICAgICIJZmxvYXQ6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAiI3NwYWdlLXRic2hhcmUtY29udGFpbmVyeyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IG5vbmU7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZm9vdGVyLCIsCiAgICAgICAgICAgICAgICAiLm1haW4tc2VjeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6ICNGZEZkRmQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3gtc2hhZG93OiAwIDAgMjBweCAycHggcmdiYSgwLCAwLCAwLCAuMSk7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IHJlbGF0aXZlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLm1haW4tc2VjeyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDIwcHggMTBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDEwcHggMTBweCAwIDA7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIubWFpbi1zZWM+ZGl2eyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiByZWxhdGl2ZTsiLAogICAgICAgICAgICAgICAgIgl6LWluZGV4OiAzOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmJvdHRvbS1iZyB7IiwKICAgICAgICAgICAgICAgICIJYm90dG9tOiAwOyIsCiAgICAgICAgICAgICAgICAiCWxlZnQ6IDA7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAyMHB4OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlOyIsCiAgICAgICAgICAgICAgICAiCXotaW5kZXg6IDIgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiAjRmRGZEZkOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmZvb3RlcnsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogMTAyMHB4OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLXRvcDogMjBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6ICAwIDAgMjBweCAyMHB4OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1ib3R0b206IDIwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5mb290ZXIgcCB7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIudGJ1aV9hc2lkZV9mbG9hdF9iYXIgeyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1sZWZ0OiA1MTBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLndyYXAyOmJlZm9yZSB7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIKICAgICAgICAgICAgXS5qb2luKCJcbiIpOwogICAgICAgIGlmIChmYWxzZSB8fCAobmV3IFJlZ0V4cCgiXmh0dHBzPzovLyh0aWViYS5iYWlkdS5jb218d3d3LnRpZWJhLmNvbSkvK2kvKy4qJCIpKS50ZXN0KGRvY3VtZW50LmxvY2F0aW9uLmhyZWYpKQogICAgICAgICAgICBjc3MgKz0gWwogICAgICAgICAgICAgICAgIi8qaei0tOWQpyovIiwKICAgICAgICAgICAgICAgICIjbWFpbl93cmFwcGVyICNmb290ZXIsIiwKICAgICAgICAgICAgICAgICIuaWJvZHl7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDk4MHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IHJlbGF0aXZlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmZvb3RlcnsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tYm90dG9tOiAyMHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIjY29udGVudHsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogcmVsYXRpdmU7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMTBweDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLXRvcDogNDBweDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5tYWluX2hlYWRlciwiLAogICAgICAgICAgICAgICAgIi5pYm9keSwiLAogICAgICAgICAgICAgICAgIi5mb290ZXJ7IiwKICAgICAgICAgICAgICAgICIJYm94LXNoYWRvdzogMCAwIDIwcHggMnB4IHJnYmEoMCwgMCwgMCwgLjEpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLm1haW5faGVhZGVyeyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1ib3R0b206IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kLWNvbG9yOiAjNDg3OUJEOyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtaW1hZ2U6IHVybChodHRwOi8vb25veC5xaW5pdWRuLmNvbS9tYXZlcmljay9saW5lcy5zdmcpOyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtcG9zaXRpb246IHJpZ2h0OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyLXJhZGl1czogNnB4IDZweCAwIDA7IiwKICAgICAgICAgICAgICAgICIJb3ZlcmZsb3c6IGhpZGRlbjsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDYwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogcmVsYXRpdmU7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIubmF2X2JhcnsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZTsiLAogICAgICAgICAgICAgICAgIglib3R0b206IDA7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAycHg7IiwKICAgICAgICAgICAgICAgICIJYm94LXNpemluZzogYm9yZGVyLWJveDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5uYXZfYmFyPmxpeyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1yaWdodDogMnB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLm5hdl9iYXI+bGkgYXsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZm9udC13ZWlnaHQ6IG5vcm1hbCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTJweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiAzMnB4ICAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLm5hdl9iYXI+bGkgYTpob3ZlcnsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LC4xNikgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5uYXZfYmFyPmxpLm5hdl9jdXIgYXsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiAjZjJmMmYyICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICM0ODc5QkQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5hX3BfdGl0bGUsIiwKICAgICAgICAgICAgICAgICIubmF2X2l0ZW1faG90X2ZsYWcsIiwKICAgICAgICAgICAgICAgICIudGJfaWNvbl9uZXd7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnN1Yl9uYXZ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc3ViX25hdj51bCwiLAogICAgICAgICAgICAgICAgIi50YWJfY29udGVudHsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGU7IiwKICAgICAgICAgICAgICAgICIJdG9wOiAwOyIsCiAgICAgICAgICAgICAgICAiCWxlZnQ6IDA7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDEwMCU7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogI2YyZjJmMiAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1ib3R0b206IDFweCByZ2JhKDAsMCwwLC4wNCkgc29saWQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuc3ViX25hdj51bD5saSwiLAogICAgICAgICAgICAgICAgIi50YWJfY29udGVudD5saXsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBpbmxpbmUtYmxvY2sgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IHN0YXRpYyAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwIDIwcHg7IiwKICAgICAgICAgICAgICAgICIJZmxvYXQ6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogNDBweCAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglvdmVyZmxvdzogdmlzaWJsZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnN1Yl9uYXY+dWw+bGkgYSwiLAogICAgICAgICAgICAgICAgIi50YWJfY29udGVudD5saSBheyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglmb250LXdlaWdodDogbm9ybWFsICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxMnB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IGluaGVyaXQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGlubGluZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCSIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnN1Yl9uYXY+dWw+bGkgYTpob3ZlciwiLAogICAgICAgICAgICAgICAgIi50YWJfY29udGVudD5saSBhOmhvdmVyeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsLjE2KSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnN1Yl9uYXY+dWw+bGkuY3VycmVudCBhLCIsCiAgICAgICAgICAgICAgICAiLnRhYl9jb250ZW50PmxpLnRhYl9jdXIgYXsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogIzQ4NzlCRCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmNvbnRlbnRfYXNpZGV7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDEwMCUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGU7IiwKICAgICAgICAgICAgICAgICIJdG9wOiAtNjBweDsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiAwOyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogNjBweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi53NzUweyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlOyIsCiAgICAgICAgICAgICAgICAiCWZsb2F0OiBub25lOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmZlZWR7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDEwMCU7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCA2cHg7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm94LXNpemluZzogYm9yZGVyLWJveDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIiN4aWFuZ2NleyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuYXNpZGVfbWVudXsiLAogICAgICAgICAgICAgICAgIglmbG9hdDogbGVmdDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tdG9wOiAyOHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAxMHB4IWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogYXV0bzsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDMycHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMzJweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaXppbmc6IGJvcmRlci1ib3g7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuYXNpZGVfbWVudT51bD5saXsiLAogICAgICAgICAgICAgICAgIgltYXJnaW46IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogaW5saW5lLWJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiBpbmhlcml0ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAxNHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJZm9udC13ZWlnaHQ6IG5vcm1hbCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmFzaWRlX21lbnU+dWw+bGkgYXsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQ6IGluaGVyaXQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogI2ZmZjsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAwIDEwcHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuYXNpZGVfbWVudT51bD5saSBhOmhvdmVyeyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsLjE2KSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmFzaWRlX21lbnU+dWw+bGkuc2VseyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6ICNmMmYyZjIgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogIzQ4NzlCRCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgMTBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmFzaWRlX2hvbWVfbGl7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmFzaWRlX3BlcnNvbl9pbmZveyIsCiAgICAgICAgICAgICAgICAiCWZsb2F0OiBsZWZ0OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlcjogbm9uZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDhweCAxMHB4ICAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDZweCAwIDZweCAwOyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQtY29sb3I6ICM0ODc5QkQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiA0MHB4OyIsCiAgICAgICAgICAgICAgICAiCW92ZXJmbG93OiBoaWRkZW47IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbjogaGVpZ2h0IC40cyBlYXNlOyIsCiAgICAgICAgICAgICAgICAiCXotaW5kZXg6IDE7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuYXNpZGVfcGVyc29uX2luZm86YWZ0ZXJ7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCdcJzsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGU7IiwKICAgICAgICAgICAgICAgICIJbGVmdDowOyIsCiAgICAgICAgICAgICAgICAiCXRvcDowOyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlOyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMTAwJTsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLC4xKTsiLAogICAgICAgICAgICAgICAgIglvcGFjaXR5OiAwOyIsCiAgICAgICAgICAgICAgICAiCXRyYW5zaXRpb246IG9wYWNpdHkgLjRzIGVhc2U7IiwKICAgICAgICAgICAgICAgICIJcG9pbnRlci1ldmVudHM6IG5vbmU7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuYXNpZGVfcGVyc29uX2luZm86aG92ZXJ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiAxMTVweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5hc2lkZV9wZXJzb25faW5mbzpob3ZlcjphZnRlcnsiLAogICAgICAgICAgICAgICAgIglvcGFjaXR5OiAxOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmFzaWRlX3BlcnNvbl9pbmZvPmRpdjpub3QoLnVpX2J1YmJsZV93cmFwKXsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogcmVsYXRpdmU7IiwKICAgICAgICAgICAgICAgICIJei1pbmRleDogMTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5hc2lkZV9wX2luZm9faGVhZHsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl6LWluZGV4OiAyICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucmlnaHRfc2V0eyIsCiAgICAgICAgICAgICAgICAiCXBvc2l0aW9uOiBhYnNvbHV0ZTsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiAycHg7IiwKICAgICAgICAgICAgICAgICIJdG9wOiAycHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucmlnaHRfc2V0IGF7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IHJlbGF0aXZlOyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlOyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogMTAwJTsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDA7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogcmdiYSgwLDAsMCwuNCk7IiwKICAgICAgICAgICAgICAgICIJb3BhY2l0eTogMDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uOiBvcGFjaXR5IC40cyBlYXNlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnJpZ2h0X3NldCBhOmhvdmVyeyIsCiAgICAgICAgICAgICAgICAiCW9wYWNpdHk6IDE7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucmlnaHRfc2V0IGE6YmVmb3JleyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwnXFxlOGI4XCc7IiwKICAgICAgICAgICAgICAgICIJZm9udC1mYW1pbHk6IFwnTWF0ZXJpYWwgSWNvbnNcJzsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogI2ZmZjsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDI4cHg7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlOyIsCiAgICAgICAgICAgICAgICAiCWxlZnQ6IDUwJTsiLAogICAgICAgICAgICAgICAgIgl0b3A6IDUwJTsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLC01MCUpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmFzaWRlX3BlcnNvbl9pbmZvX3dyYXBlciwiLAogICAgICAgICAgICAgICAgIi5hc2lkZV91c2VyZmFjZV93cmFwZXIsIiwKICAgICAgICAgICAgICAgICIjaW1nX2FzaWRlX2hlYWQsIiwKICAgICAgICAgICAgICAgICIuYXNpZGVfdXNlcl9wcm9maWxleyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbjogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5hc2lkZV91c2VyZmFjZV93cmFwZXJ7IiwKICAgICAgICAgICAgICAgICIJcG9zaXRpb246IGFic29sdXRlOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnJpZ2h0X3NldCwiLAogICAgICAgICAgICAgICAgIi5hc2lkZV91c2VyZmFjZV9ib3JkZXIsIiwKICAgICAgICAgICAgICAgICIjaW1nX2FzaWRlX2hlYWR7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDQwcHggICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJaGVpZ2h0OiA0MHB4ICAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmFzaWRlX3VzZXJmYWNlX2JvcmRlcnsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nOiAycHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LC4yKSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmFzaWRlX3VzZXJfbmFtZSwiLAogICAgICAgICAgICAgICAgIi5hc2lkZV91c2VyX2luZm8sIiwKICAgICAgICAgICAgICAgICIuYXNpZGVfdXNlcl9mYW5zLCIsCiAgICAgICAgICAgICAgICAiLmFzaWRlX3VzZXJfY29uY2VybiwiLAogICAgICAgICAgICAgICAgIi5teV90Yl9wbWNsaW5rLCIsCiAgICAgICAgICAgICAgICAiLm15X3RiX3BtY2xpbmsgYSwiLAogICAgICAgICAgICAgICAgIi5hc2lkZV9pbnRlcmFjdF9udW17IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICNmZmYgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5hc2lkZV91c2VyX25hbWUsIiwKICAgICAgICAgICAgICAgICIuYXNpZGVfdXNlcl9pbmZveyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmctbGVmdDogNTRweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5hc2lkZV91c2VyX2ZhbnMsIiwKICAgICAgICAgICAgICAgICIuYXNpZGVfdXNlcl9jb25jZXJuLCIsCiAgICAgICAgICAgICAgICAiLm15X3RiX3BtY2xpbmt7IiwKICAgICAgICAgICAgICAgICIJdGV4dC1hbGlnbjogY2VudGVyOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmFzaWRlX3VzZXJfaW5mbzplbXB0eTpiZWZvcmV7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDpcJ1xcZTAxNlwnOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLm5ld19yZXBseV9udW1fdGlweyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjZmZmOyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1yaWdodDogNHB4OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDAgNnB4OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsLjIpOyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDRweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5uZXdfcmVwbHlfbnVtX3RpcDplbXB0eXsiLAogICAgICAgICAgICAgICAgIglkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIjZmVhdHVyZUxpc3QgeyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAxMDAlOyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaXppbmc6IGJvcmRlci1ib3g7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLXRvcDogMTBweCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnN1Yl90YWJfY29udGVudHsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiA4cHggMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLnN1Yl90YWIgYSB7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogYmxvY2s7IiwKICAgICAgICAgICAgICAgICIJY29sb3I6ICM5OTk7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAxMHB4OyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6IHJnYmEoMCwwLDAsLjEpOyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1yYWRpdXM6IDRweDsiLAogICAgICAgICAgICAgICAgIglib3JkZXI6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMjJweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zdWJfdGFiX2N1ciBheyIsCiAgICAgICAgICAgICAgICAiCWNvbG9yOiAjZmZmOyIsCiAgICAgICAgICAgICAgICAiCWJhY2tncm91bmQ6ICM0Mjg1RjQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuYmxvY2ssIiwKICAgICAgICAgICAgICAgICIuc2ltcGxlX2Jsb2NrX2NvbnRhaW5lciBsaSwiLAogICAgICAgICAgICAgICAgIi5mZWVkX2l0ZW0geyIsCiAgICAgICAgICAgICAgICAiCWJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDAsMCwwLC4wNikgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5ibG9jazpsYXN0LW9mLXR5cGUsIiwKICAgICAgICAgICAgICAgICIuc2ltcGxlX2Jsb2NrX2NvbnRhaW5lciBsaTpsYXN0LW9mLXR5cGUsIiwKICAgICAgICAgICAgICAgICIuZmVlZF9pdGVtOmxhc3Qtb2YtdHlwZXsiLAogICAgICAgICAgICAgICAgIglib3JkZXItYm90dG9tOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZmVlZF9ob3ZlciB7IiwKICAgICAgICAgICAgICAgICIJYmFja2dyb3VuZDogcmdiYSgwLDAsMCwuMDIpOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmZlZWRfaXRlbSB7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogZmxleDsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogcmVsYXRpdmU7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZmVlZF9sZWZ0IHsiLAogICAgICAgICAgICAgICAgIglmbGV4OiAxOyIsCiAgICAgICAgICAgICAgICAiCWZsb2F0OiBub25lOyIsCiAgICAgICAgICAgICAgICAiCXdpZHRoOiAwOyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmc6IDIwcHggMTBweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5mZWVkX3JpZ2h0IHsiLAogICAgICAgICAgICAgICAgIglwb3NpdGlvbjogYWJzb2x1dGU7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAxMHB4IDIwcHggMDsiLAogICAgICAgICAgICAgICAgIglib3R0b206IDA7IiwKICAgICAgICAgICAgICAgICIJcmlnaHQ6IDA7IiwKICAgICAgICAgICAgICAgICIJd2hpdGUtc3BhY2U6IG5vd3JhcDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMjJweDsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5mZWVkX3RpbWUsIiwKICAgICAgICAgICAgICAgICIuaWNvbl9yZXBseXsiLAogICAgICAgICAgICAgICAgIglmbG9hdDogcmlnaHQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luLWxlZnQ6IDIwcHg7IiwKICAgICAgICAgICAgICAgICIJcGFkZGluZzogMCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWxpbmUtaGVpZ2h0OiBpbmhlcml0OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmljb25fcmVwbHkgYXsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogI2FhYTsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJbWFyZ2luOiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuaWNvbl9yZXBseSBhOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcJ1xcZTI1M1wnOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtZmFtaWx5OiBcJ01hdGVyaWFsIEljb25zXCc7IiwKICAgICAgICAgICAgICAgICIJZGlzcGxheTogaW5saW5lLWJsb2NrOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTZweDsiLAogICAgICAgICAgICAgICAgIgl2ZXJ0aWNhbC1hbGlnbjogdG9wOyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1yaWdodDogMnB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmljb25fcmVwbHkgLnJlcGx5X2RlbDpiZWZvcmV7IiwKICAgICAgICAgICAgICAgICIJY29udGVudDogXCdcXGU4NzJcJzsiLAogICAgICAgICAgICAgICAgIglmb250LXNpemU6IDE4cHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucmVwbHlfZGVseyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGlubGluZSAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCXZpc2liaWxpdHk6IGhpZGRlbjsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5zaG93RGVsQnRuIC5yZXBseV9kZWx7IiwKICAgICAgICAgICAgICAgICIJdmlzaWJpbGl0eTogdmlzaWJsZTsiLAogICAgICAgICAgICAgICAgIn0iLAogICAgICAgICAgICAgICAgIi5nb1RvcHsiLAogICAgICAgICAgICAgICAgIgliYWNrZ3JvdW5kOiAjZmVmZWZlICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICIJd2lkdGg6IDQ1cHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgloZWlnaHQ6IDUwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgltYXJnaW4tbGVmdDogNDkwcHggIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglib3JkZXItcmFkaXVzOiAwIDEwcHggMTBweCAwOyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaGFkb3c6IDJweCAycHggMnB4IDAgcmdiYSgwLCAwLCAwLCAwLjA4KTsiLAogICAgICAgICAgICAgICAgIglvdmVyZmxvdzogaGlkZGVuOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMDsiLAogICAgICAgICAgICAgICAgIgl3aGl0ZS1zcGFjZTogbm93cmFwOyIsCiAgICAgICAgICAgICAgICAiCXRleHQtaW5kZW50OiAtNDVweDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLXByb3BlcnR5OiB0ZXh0LWluZGVudDsiLAogICAgICAgICAgICAgICAgIgl0cmFuc2l0aW9uLWR1cmF0aW9uOiAuNnM7IiwKICAgICAgICAgICAgICAgICIJdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246IGVhc2U7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZ29Ub3A6aG92ZXIgeyIsCiAgICAgICAgICAgICAgICAiCXRleHQtaW5kZW50OiAwcHg7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIuZ29Ub3A6YWZ0ZXIsIiwKICAgICAgICAgICAgICAgICIuZ29Ub3A6YmVmb3JleyIsCiAgICAgICAgICAgICAgICAiCWRpc3BsYXk6IGlubGluZS1ibG9jazsiLAogICAgICAgICAgICAgICAgIgljb2xvcjogI2NjYzsiLAogICAgICAgICAgICAgICAgIgl3aWR0aDogaW5oZXJpdCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWhlaWdodDogaW5oZXJpdCAhaW1wb3J0YW50OyIsCiAgICAgICAgICAgICAgICAiCWJveC1zaXppbmc6IGJvcmRlci1ib3g7IiwKICAgICAgICAgICAgICAgICIJdmVydGljYWwtYWxpZ246IHRvcDsiLAogICAgICAgICAgICAgICAgIgl3aGl0ZS1zcGFjZTogbm9ybWFsOyIsCiAgICAgICAgICAgICAgICAiCXRleHQtaW5kZW50OiAwOyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmdvVG9wOmJlZm9yZXsiLAogICAgICAgICAgICAgICAgIgljb250ZW50OiBcIui/lOWbnumhtumDqFwiOyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtc2l6ZTogMTRweDsiLAogICAgICAgICAgICAgICAgIglsaW5lLWhlaWdodDogMjBweDsiLAogICAgICAgICAgICAgICAgIglwYWRkaW5nLXRvcDogNXB4OyIsCiAgICAgICAgICAgICAgICAiCXBhZGRpbmctbGVmdDogN3B4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiLmdvVG9wOmFmdGVyeyIsCiAgICAgICAgICAgICAgICAiCWNvbnRlbnQ6IFwiXFxlMjU1XCI7IiwKICAgICAgICAgICAgICAgICIJZm9udC1zaXplOiAzMnB4OyIsCiAgICAgICAgICAgICAgICAiCWZvbnQtZmFtaWx5OiBcJ01hdGVyaWFsIEljb25zXCc7IiwKICAgICAgICAgICAgICAgICIJbGluZS1oZWlnaHQ6IDUwcHg7IiwKICAgICAgICAgICAgICAgICIJdGV4dC1hbGlnbjogY2VudGVyOyIsCiAgICAgICAgICAgICAgICAiCXRleHQtaW5kZW50OiAtMnB4OyIsCiAgICAgICAgICAgICAgICAifSIsCiAgICAgICAgICAgICAgICAiIiwKICAgICAgICAgICAgICAgICIuaXRiX3BhZ2VyID4qeyIsCiAgICAgICAgICAgICAgICAiCW1hcmdpbi1yaWdodDogNHB4ICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucGFnZXJ7IiwKICAgICAgICAgICAgICAgICIJZmxvYXQ6IG5vbmUgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIgl0ZXh0LWFsaWduOiBjZW50ZXI7IiwKICAgICAgICAgICAgICAgICJ9IiwKICAgICAgICAgICAgICAgICIucGFnZXIsIiwKICAgICAgICAgICAgICAgICIucGFnZXIgPip7IiwKICAgICAgICAgICAgICAgICIJZm9udC1mYW1pbHk6IGluaGVyaXQgIWltcG9ydGFudDsiLAogICAgICAgICAgICAgICAgIglsZWZ0OiAwICFpbXBvcnRhbnQ7IiwKICAgICAgICAgICAgICAgICJ9IgogICAgICAgICAgICBdLmpvaW4oIlxuIik7CiAgICAgICAgaWYgKHR5cGVvZiBHTV9hZGRTdHlsZSAhPSAidW5kZWZpbmVkIikgewogICAgICAgICAgICBHTV9hZGRTdHlsZShjc3MpOwogICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIFBST19hZGRTdHlsZSAhPSAidW5kZWZpbmVkIikgewogICAgICAgICAgICBQUk9fYWRkU3R5bGUoY3NzKTsKICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhZGRTdHlsZSAhPSAidW5kZWZpbmVkIikgewogICAgICAgICAgICBhZGRTdHlsZShjc3MpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsKICAgICAgICAgICAgbm9kZS50eXBlID0gInRleHQvY3NzIjsKICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTsKICAgICAgICAgICAgdmFyIGhlYWRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKTsKICAgICAgICAgICAgaWYgKGhlYWRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGhlYWRzWzBdLmFwcGVuZENoaWxkKG5vZGUpOyAKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIG5vIGhlYWQgeWV0LCBzdGljayBpdCB3aGVyZWV2ZXIKICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChub2RlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIC8v55m+5bqm6LS05ZCn77ya5LiN55m75b2V5Y2z5Y+v55yL6LS0IGJ5IFZBCiAgICB1bnNhZmVXaW5kb3cuT2JqZWN0LmZyZWV6ZSA9IG51bGw7CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdW5zYWZlV2luZG93LlBhZ2VEYXRhLnVzZXIuaXNfbG9naW4gPSAxOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgfQogICAgfSwgdHJ1ZSk7CiAgICAvL+aipuWnrOi0tOWQp+WKqeaJiyBieSBqaXh1bgogICAgKGZ1bmN0aW9uKCl7CiAgICAgICAgdmFyIHcgPSB1bnNhZmVXaW5kb3csIF9tYWluOwogICAgICAgIGpRdWVyeShmdW5jdGlvbiAoJCkgewogICAgICAgICAgICB2YXIgaXYgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBpZiAody5qUXVlcnkgJiYgdy5QYWdlRGF0YSAmJiB3LlBhZ2VEYXRhLnRicykgewogICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaXYpOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQYWdlRGF0YSBsb2FkZWQuJyk7CgogICAgICAgICAgICAgICAgICAgIGlmICghdy5iZFNoYXJlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHcuYmRTaGFyZSA9IHVuc2FmZU9iamVjdCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkeTogZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB3LlBhZ2VEYXRhLmdhbWVzID0gdW5zYWZlT2JqZWN0KFtdKTsKCiAgICAgICAgICAgICAgICAgICAgdW5zYWZlRXhlYyAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyDmlLnov5voh6ogY29uZ3h6NjY4OCDnmoQgdGllYmFfcXVvdGUgWyMxNDddCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOiKguWPluiHqiDlr4Llr57nmoTljp/lrZAg55qEICDmgqzmta7nqpfohJrmnKwgWyMxMTZdCiAgICAgICAgICAgICAgICAgICAgICAgIF8uTW9kdWxlLnVzZSgiY29tbW9uL3dpZGdldC9SaWNoUG9zdGVyIiwge30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5pbml0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnVuYmluZFNjcm9sbEV2ZW50KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBfbWFpbiAoJCwgdy5QYWdlRGF0YSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIDUwMCk7CgogICAgICAgICAgICBzZXRUaW1lb3V0IChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAvLyAxNXMgbGF0ZXIgZm9yY2Uga2lsbCB3YWl0aW5nLgogICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCAoaXYpOwogICAgICAgICAgICB9LCAxNTAwMCk7CiAgICAgICAgfSk7CgogICAgICAgIHZhciBfX3R5cGVfZmxvb3IgICA9IDEsCiAgICAgICAgICAgIF9fdHlwZV9semwgICAgID0gMiwKICAgICAgICAgICAgX190eXBlX2ZvcnVtICAgPSA0LAogICAgICAgICAgICBfX3R5cGVfcG9zdGFjdCA9IDg7CgogICAgICAgIHZhciBfX21vZF9kZWZhdWx0ICA9IDAsCiAgICAgICAgICAgIF9fbW9kX2VuYWJsZSAgID0gMSwKICAgICAgICAgICAgX19tb2RfZGlzYWJsZSAgPSAyOwoKICAgICAgICBfbWFpbiA9IGZ1bmN0aW9uICgkLCB3UGFnZURhdGEpIHsKICAgICAgICAgICAgLy8g5qOA5p+l5piv5ZCm5Zyo6LS05ZCnCiAgICAgICAgICAgIGlmICghd1BhZ2VEYXRhLmZvcnVtKSByZXR1cm4gOwogICAgICAgICAgICB2YXIgaXNUaHJlYWQgPSAhIXdQYWdlRGF0YS50aHJlYWQ7CiAgICAgICAgICAgIHZhciBfY3NzICA9ICQoJzxzdHlsZT4nKTsKICAgICAgICAgICAgdmFyIF9jc3NIID0gJCgnPHN0eWxlPicpLnRleHQoJy5hZHN7ZGlzcGxheTpub25lICFpbXBvcnRhbnQ7fScpOwoKCiAgICAgICAgICAgIC8vLy8gRnVuY3Rpb24gSGVscGVyCiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAoRnVuY3Rpb24ucHJvdG90eXBlLCAnZXh0cmFjdCcsIHsKICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9TdHJpbmcoKS5tYXRjaCgvXC9cKihbXHNcU10rKVwqXC8vKVsxXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICB2YXIgX2Z1bmN0aW9uID0gZnVuY3Rpb24gKGZvbywgcHJvdG8pIHsKICAgICAgICAgICAgICAgIGZvby5wcm90b3R5cGUgPSBwcm90bzsKICAgICAgICAgICAgICAgIHJldHVybiBmb287CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB2YXIgJGNvbmYgPSBuZXcgKF9mdW5jdGlvbiAoZnVuY3Rpb24gKCkge30sIHsKICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKG0sIGRlZikgewogICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSBHTV9nZXRWYWx1ZSAobSwgbnVsbCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWwpIHJldHVybiBkZWY7CgogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlICh2YWwpOwogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAobSwgdmFsKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEdNX3NldFZhbHVlIChtLCBKU09OLnN0cmluZ2lmeSAodmFsKSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcm06IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwgKGFyZ3VtZW50cywgR01fZGVsZXRlVmFsdWUpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGxzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEdNX2xpc3RWYWx1ZXMgKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pKSAoKTsKCiAgICAgICAgICAgIHZhciBfaGlkZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIF9jc3NILnByZXBlbmQgKEFycmF5LnByb3RvdHlwZS5qb2luLmNhbGwoYXJndW1lbnRzLCAnLCcpICsgJywnKTsKICAgICAgICAgICAgfTsKCgogICAgICAgICAgICB2YXIgX3J1biA9IGZ1bmN0aW9uIChmb28sIG5hbWUpIHsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQgKCdb6LS05ZCn5Yqp5omLXTogJyArIChuYW1lIHx8ICdb5pyq55+l5Yy65q61XScpKTsKCiAgICAgICAgICAgICAgICBmb3IgKHZhciBhcmdzID0gW10sIGkgPSAyLCByZXQ7IGk8YXJndW1lbnRzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgICAgIGFyZ3MucHVzaCAoYXJndW1lbnRzW2ldKTsKCiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHJldCA9IGZvby5hcHBseSAodGhpcywgYXJncyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJldCAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8gKCdb6LS05ZCn5Yqp5omLXVvov5Tlm55dWyVzXTogJXMnLCBuYW1lIHx8ICdb5pyq55+l5Yy65q61XScsIHJldCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yICgnW+i0tOWQp+WKqeaJi11b6ZSZ6K+vXVslc106ICVzJywgbmFtZSB8fCAnW+acquefpeWMuuautV0nLCBlcnIubWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvciAoZXJyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUuZ3JvdXBFbmQgKCk7CgogICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICQuZm4uZ2V0RmllbGQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAvLyB2YXIgJGRhdGEgPSB0aGlzLmF0dHIoJ2RhdGEtZmllbGQnKTsKICAgICAgICAgICAgICAgIHZhciAkZGF0YSA9IHRoaXMuZGF0YSAoJ2ZpZWxkJyk7CgogICAgICAgICAgICAgICAgaWYgKCdzdHJpbmcnID09IHR5cGVvZiAkZGF0YVsxXSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSgkZGF0YS5yZXBsYWNlKC8nL2csICciJykpOwogICAgICAgICAgICAgICAgcmV0dXJuICRkYXRhOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgJC5nb1RvRWRpdG9yID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgJCgnI3VlZGl0b3JfcmVwbGFjZScpLmZvY3VzICgpOwogICAgICAgICAgICAgICAgJC5zY3JvbGxUbygkKCcjdGJfcmljaF9wb3N0ZXJfY29udGFpbmVyJyksIDUwMCk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgICQuY3JlYXRlID0gZnVuY3Rpb24gKGVsZSwgY2xzLCBhdHRyKSB7CiAgICAgICAgICAgICAgICB2YXIgciA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCAoZWxlKSk7CgogICAgICAgICAgICAgICAgaWYgKGNscykKICAgICAgICAgICAgICAgICAgICByLmFkZENsYXNzIChjbHMpOwogICAgICAgICAgICAgICAgaWYgKGF0dHIpCiAgICAgICAgICAgICAgICAgICAgci5hdHRyIChhdHRyKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gcjsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgJC5zdGFtcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiArIG5ldyBEYXRlICgpOwogICAgICAgICAgICB9OwogICAgICAgICAgICAkLnRvRGF0ZVN0ciA9IGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZC50b0xvY2FsZVN0cmluZygpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdmFyIG1vZHVsZXMgPSB7CiAgICAgICAgICAgICAgICAicm1Cb3R0b20iOiB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ+enu+mZpOW6lemDqOW3peWFt+agjycsCiAgICAgICAgICAgICAgICAgICAgZGVzYzogJ+enu+mZpOe+juWMlui0tOWQp+aXtuW6lemDqOWHuueOsOeahOW3peWFt+agj+OAgicsCiAgICAgICAgICAgICAgICAgICAgZmxhZzogMCwKICAgICAgICAgICAgICAgICAgICBkZWY6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIF9pbml0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNqX2NvcmVfdGl0bGVfd3JhcCcpLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAiYWRzX2hpZGUiOiB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ+W5v+WRiumakOiXj+OAgeWxj+iUvScsCiAgICAgICAgICAgICAgICAgICAgZGVzYzogJ+Wxj+iUveaXoOeUqOOAgeW5v+WRiuWGheWuuScsCiAgICAgICAgICAgICAgICAgICAgZmxhZzogfjAsCiAgICAgICAgICAgICAgICAgICAgZGVmOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIF9pbml0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkYWRzID0gWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g6LS05ZCn5o6o5bm/CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLnNwcmVhZGFkLCAuZ2FtZV9mcnNfc3RlcDEsIC5CQUlEVV9DTEJfQUQsIC5kYXNlbnNlLCAudTlfaGVhZCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLmpfY2xpY2tfc3RhdHMsIC5wX3Bvc3RsaXN0PmRpdjpub3QoLmxfcG9zdCk6bm90KC5wX3Bvc3RsaXN0KScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnW2lkPSJwYWdlbGV0X2Zycy1oZWFkZXIvcGFnZWxldC9oZWFkX2NvbnRlbnRfbWlkZGxlIl0nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1tpZD0icGFnZWxldF9lbmNvdXJhZ2UtYXBwZm9ydW0vcGFnZWxldC9teV9hcHAiXScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLmxpZmVfaGVscGVyJywKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDliLDlpITmj5LlhaXnmoTlub/lkYoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdbZGF0YS1kYWlkXScsCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Y+z5LiL6KeS5bm/5ZGKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnI2dhbWVfcG9wX3dpbmRvdycsCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g55u05pKtCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnI2dhbWVfbGl2ZV9saXN0JywKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAxMCDlubQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICcjal90ZW5feWVhcnMnLAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDFsIOS4i+aWueeahOW5v+WRigogICAgICAgICAgICAgICAgICAgICAgICAgICAgJyNzb2ZhX3Bvc3QsIC5iYW5uZXJfcG9zdCcsCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g6LS05ZCn6aG26YOo5bm/5ZGKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnI3BiX2FkYmFubmVyJywKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlm77niYfpobXpnaIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICcuYWZfaGVhZF9nYW1lbGluaycsCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5bem5Y+z5L6nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLmpfY291cGxldCcsCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Y+z5L6nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnI2VuY291cmFnZV9lbnRyeScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLnBsYXRmb3JtX2FzaWRlX3RpZWJhX3BhcnRuZXInLAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWuouaIt+err+WPkei0tCB4IOWAjee7j+mqjAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJy50Yl9wb3N0ZXJfcGxhY2Vob2xkZXInLAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOivremfs+aMiemSriAo6ZyA6KaB5a6i5oi356uvKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJy5lZHVpLWJ0bi12b2ljZSwgLmpfdm9pY2VfYWRfZ2lmLCAubHpsX3BhbmVsX3ZvaWNlJywKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlj5HluJbor7fpgbXlroggLi4uLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJy5wb3N0ZXJfaGVhZF9zdXJ2ZWlsbGFuY2UnLAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOS4jeawtOiDveatu+S9leW8g+eWl++8gQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJy5semxfcGFuZWxfd3JhcHBlciA+IHRib2R5ID4gdHIgPiB0ZDpmaXJzdC1jaGlsZCA+IHAnLAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOS8muWRmOebuOWFs+W5v+WRigogICAgICAgICAgICAgICAgICAgICAgICAgICAgJy5kb3VwaWFvX29mZmxpbmUsIC5mTWVtYmVyX2NudCcsCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Y+z5LiK6KeSCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLnVfdHNob3csIC51X3RibWFsbCwgLnVfYXBwLCAudV93YWxsZXQsIC51X3hpdTgnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJy51X215dGJtYWxsLCAudV9qb2ludmlwLCAudV9iYWlkdVByaXZpbGVnZSwgLnVfYXBwY2VudGVyRW50cmFuY2UnLAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWPs+S4i+inkgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJyNwb3BfZnJhbWUsICNfX2JkeXhfdGlwcywgI19fYmR5eF90aXBzX2ljb24nLAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOeMnOaLswogICAgICAgICAgICAgICAgICAgICAgICAgICAgJy5hZGRfZ3Vlc3NpbmdfYnRuLCAuZ3Vlc3Npbmdfd2F0ZXJtYXJrJywKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDluJblrZDmjqjojZAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICcudGhyZWFkX3JlY29tbWVuZCcsCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Y+z5LiL6KeS5bm/5ZGKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnI19fYmR5eF90aXBzLCAjX19iZHl4X3RpcHNfaWNvbiwgLmJhaWR1LXR1aXNvbmctd3JhcCwgLmJhaWR1dHVpc29uZycsCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5omT6LWP44CB5YiG5LqrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLnJld2FyZF9idG4sIC5zaGFyZV9idG5fd3JhcHBlcicsCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g54Of6IqxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLmZpcmV3b3JrX3NlbmRlcl93cmFwLCAuZ2xvYmFsX25vdGljZV93cmFwJywKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLnRidWlfZmJhcl9zaGFyZSwgLnRidWlfZmJhcl90c3Vra29taSwgLnRidWlfZmJhcl9wcm9wcywgLnRidWlfZmJhcl9zcXVhcmUsIC50YnVpX2ZiYXJfaG9tZScsCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJyN0c2hvd19vdXRfZGF0ZV93YXJuLCAjc2VsZWN0c2VhcmNoLWljb24nLAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOi0tOWQp+aOqOiNkAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJyNmb3J1bV9yZWNvbW1lbmQnCiAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignLCAnKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICQoJGFkcykucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICQoJzxzdHlsZT4nKS50ZXh0KCRhZHMgKyAvKiBGaWxlOiBhZHNfaGlkZS5jc3MgKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uICgpIHsgLyoKIHsKZGlzcGxheTpub25lICFpbXBvcnRhbnQ7Cn0KCiNjb21fdXNlcmJhcl9tZXNzYWdlIHsKCXJpZ2h0OiAzMHB4ICFpbXBvcnRhbnQ7Cgl0b3A6IDI4cHggIWltcG9ydGFudDsKfQoKI2NvbV91c2VyYmFyX21lc3NhZ2UgPiAual91aV90cmlhbmdsZSB7CglsZWZ0OiA2NXB4ICFpbXBvcnRhbnQ7Cn0KKi99KS5leHRyYWN0ICgpKS5hcHBlbmRUbyAoZG9jdW1lbnQuaGVhZCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyDlj6rkv53nlZkgW+eci+W4luOAgeWbvueJh+OAgeeyvuWTgeOAgeinhumikV0g5Zub5Liq6YCJ6aG5CiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5qX3RibmF2X3RhYicpLmZpbHRlciAoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIGkgPiAzOyB9KS5yZW1vdmUgKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyDmiafooYzkuInmrKEsIOehruS/neWIhumalOespuS8mua2iOWksQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMzsgaS0tOyApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQgKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuc3BsaXRfdGV4dCcpLm5leHQoJy5zcGxpdF90ZXh0JykucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnNwbGl0JykuZmlsdGVyKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubmV4dEVsZW1lbnRTaWJsaW5nID09PSBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCB0aGlzLm5leHRFbGVtZW50U2libGluZy5jbGFzc05hbWUgPT0gdGhpcy5jbGFzc05hbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8ICEkKHRoaXMubmV4dEVsZW1lbnRTaWJsaW5nKS5pcygnOnZpc2libGUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMDAgKiBpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVQcm9tb3RlVGhyZWFkKCk7CiAgICAgICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICAgICAgX3Byb2M6IGZ1bmN0aW9uIChmbG9vclR5cGUsIGFyZ3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZsb29yVHlwZSA9PSBfX3R5cGVfZm9ydW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcmdzLnRocmVhZC5maW5kKCcudGhyZWFkbGlzdF9yZXBfbnVtJykudGV4dCgpID09ICfmjqjlub8nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MudGhyZWFkLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlUHJvbW90ZVRocmVhZDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyDmuIXnkIbluJblrZDliJfooajnmoTmjqjlub8KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ID0gZG9jdW1lbnQuZXZhbHVhdGUoJy8vKltAaWQ9InRocmVhZF9saXN0Il0vbGkvZGl2L2Rpdi9kaXZbdGV4dCgpPSLmjqjlub8iXScsIGRvY3VtZW50LmJvZHksIG51bGwsIFhQYXRoUmVzdWx0LkFOWV9UWVBFLCBudWxsKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRocmVhZCwgdGhyZWFkcyA9IFtdOwoKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRocmVhZCA9IGl0Lml0ZXJhdGVOZXh0KCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJlYWRzLnB1c2godGhyZWFkKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICQodGhyZWFkcykucGFyZW50cygnbGknKS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAsCiAgICAgICAgICAgICAgICAiYWRzX3RocmVhZF9saXN0IjogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICflsY/olL3nm7Tmkq3otLTnrYnkubHkuIPlhavns5/lhoXlrrkgKOWunumqjOaApyknLAogICAgICAgICAgICAgICAgICAgIGRlc2M6ICflpoLpopjjgIInLAogICAgICAgICAgICAgICAgICAgIGZsYWc6IH4wLAogICAgICAgICAgICAgICAgICAgIGRlZjogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgX2luaXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRhZHMgPSBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDluJblrZDliJfooajpobbpg6gsIOWmguebtOaSrei0tAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJyN0aHJlYWRMaXN0R3JvdXBDbnQnCiAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignLCAnKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICQoJGFkcykucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICQoJzxzdHlsZT4nKS50ZXh0KCRhZHMgKyAne2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudH0nKS5hcHBlbmRUbygnaGVhZCcpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAiYXVkaW9fZG93bmxvYWQiOiB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ+i0tOWQp+ivremfs+S4i+i9vScsCiAgICAgICAgICAgICAgICAgICAgZGVzYzogJ+S4i+i9vei0tOWQp+ivremfs34g5ZWm5ZWm5ZWmficsCiAgICAgICAgICAgICAgICAgICAgZmxhZzogX190eXBlX2Zsb29yIHwgX190eXBlX2x6bCwKICAgICAgICAgICAgICAgICAgICBfcHJvYzogZnVuY3Rpb24gKGZsb29yVHlwZSwgYXJncykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3BsYXllciA9ICQoJy52b2ljZV9wbGF5ZXI6bm90KC5wYXJzZWQpJywgYXJncy5fbWFpbik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghX3BsYXllci5zaXplKCkpIHJldHVybiAn5om+5LiN5Yiw6K+t6Z+zJzsKCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gX3BsYXllci5wYXJlbnRzKCdbZGF0YS1maWVsZF0nKS5nZXRGaWVsZCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGlkID0gZGF0YS5zcGlkIHx8IGRhdGEuY29udGVudC5wb3N0X2lkOwoKICAgICAgICAgICAgICAgICAgICAgICAgX3BsYXllci5hZGRDbGFzcygncGFyc2VkJykuYWZ0ZXIgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnPGE+JykuYWRkQ2xhc3MoJ3VpX2J0biB1aV9idG5fbScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cih7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogJy92b2ljZS9pbmRleD90aWQ9JyArIHdQYWdlRGF0YS50aHJlYWQudGhyZWFkX2lkICsgJyZwaWQ9JyArIHBpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3dubG9hZDogJ+ivremfsy0nICsgKGRhdGEudXNlcl9uYW1lIHx8IGRhdGEuYXV0aG9yLnVzZXJfbmFtZSkgKyAnLScgKyBwaWQgKyAnLm1wMycKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY3NzICh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luTGVmdDogJzFlbScKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kICgkKCc8c3Bhbj4nKS50ZXh0KCfkuIvovb0nKSkKICAgICAgICAgICAgICAgICAgICAgICAgKS5hZnRlcigkKCc8YnI+JykpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAiYmxvY2tfcG9zdCI6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAn6LS05ZCn6LS05a2Q5bGP6JS9JywKICAgICAgICAgICAgICAgICAgICBkZXNjOiAn5qC55o2u6KeE5YiZ5bGP6JS95oyH5a6a6LS05a2QJywKICAgICAgICAgICAgICAgICAgICBmbGFnOiBfX3R5cGVfZmxvb3IgfCBfX3R5cGVfZm9ydW0gfCBfX3R5cGVfbHpsLAoKICAgICAgICAgICAgICAgICAgICAvLyDovoXliqnlh73mlbAKICAgICAgICAgICAgICAgICAgICBfbWF0Y2hfdHlwZTogZnVuY3Rpb24gKF9NKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX00pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5fX01fUkVHRVg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd0cF9yZWdleCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIHRoaXMuX19NX1BMQUlOOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAndHBfcGxhaW4nOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3VuZGVmaW5lZF8nICsgX007CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAvLyDovoXliqnlh73mlbAKICAgICAgICAgICAgICAgICAgICBfcmFuZ2U6IGZ1bmN0aW9uIChvbGQsIG1pbiwgbWF4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLm1pbiAoTWF0aC5tYXggKG1pbiwgb2xkKSwgbWF4KTsKICAgICAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgICAgICAvLyDliJ3lp4vljJbmoLflvI/ooagKICAgICAgICAgICAgICAgICAgICBfaW5pdDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBfY3NzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kICgndWwjanhfcG9zdF9rd29yZCA+IGxpIHttYXJnaW4tYm90dG9tOiAuMmVtfScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kICgnLmp4X3dvcmQgeyBwYWRkaW5nOiAwIC41ZW07IHdpZHRoOiA4ZW0gfSBzcGFuLnJlZ2V4OjpiZWZvcmUsIHNwYW4ucmVnZXg6OmFmdGVyIHsgY29udGVudDogIi8iOyBjb2xvcjogIzc3NyB9JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQgKCdzcGFuLnJlZ2V4ID4gLmp4X3dvcmQgeyBib3JkZXI6IDA7IHBhZGRpbmc6IDAgLjJlbSB9JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQgKCcuanhfbW9kaWZpZXIgeyB3aWR0aDogNGVtOyBib3JkZXI6IDA7IHBhZGRpbmc6IDAgMCAwIC4yZW0gfScpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCAoJy5qeF9wb3N0X2Jsb2NrX3N0cmlwZTo6YmVmb3Jle2NvbnRlbnQ6ICLlhbHpmpDol48gIiBhdHRyKGhpZGUtY291bnQpICIg5Liq5pWw5o2uIn0nKTsKCgogICAgICAgICAgICAgICAgICAgICAgICAkLmV4dGVuZCAodGhpcywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWN0aW9uIHRvIHRha2Ugd2hlbiBtYXRjaAogICAgICAgICAgICAgICAgICAgICAgICAgICAgX19BQ1RfQkFSOiAgMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9fQUNUX09QQTogIDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX0FDVF9ISURFOiAyLAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtleXdvcmQgbWF0Y2ggbWV0aG9kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX01fUkVHRVg6ICAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgX19NX1BMQUlOOiAgMQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnID0gJC5leHRlbmQgKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ubWF0Y2g6IHRoaXMuX19BQ1RfT1BBLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMzAsCgogICAgICAgICAgICAgICAgICAgICAgICAgICAga3dvcmQ6IFt7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogdGhpcy5fX01fUExBSU4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd29yZDogJ+azveeBq+mdqScKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcjogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICfngq7lvLk1NicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ+eCruW8uTUyJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgICAgICB9LCAkY29uZi5nZXQgKHRoaXMuaWQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29tcGlsZVJlZ2V4ICgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kdHBsQ29uZmlnID0gLyogRmlsZTogYmxvY2tfcG9zdC5odG1sICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24gKCkgeyAvKgo8ZGl2IGNsYXNzPSJqeF9hdXRvZmxvdyI+Cgk8aDM+5b2T5Yy56YWN5Yiw5pe255qE5pON5L2cPC9oMz4KCTxwPgoJPHNlbGVjdCBpZD0ianhfcG9zdF9tYXRjaCI+CgkJPG9wdGlvbiB2YWx1ZT0iMCIge3sjdHBfYmFyfX1zZWxlY3RlZHt7L3RwX2Jhcn19Pue6ouadoTwvb3B0aW9uPgoJCTxvcHRpb24gdmFsdWU9IjEiIHt7I3RwX29wYX19c2VsZWN0ZWR7ey90cF9vcGF9fT7pgI/mmI48L29wdGlvbj4KCQk8b3B0aW9uIHZhbHVlPSIyIiB7eyN0cF9oaWRlfX1zZWxlY3RlZHt7L3RwX2hpZGV9fT7pmpDol488L29wdGlvbj4KCTwvc2VsZWN0PgoKCTxsYWJlbCB0aXRsZT0iMCDooajnpLrlrozlhajpgI/mmI4gKOWNoOS9jemavueci+WTpik7IDB+MTAwInt7XnRwX29wYX19IGNsYXNzPSJoaWRlInt7L3RwX29wYX19PumAj+aYjuW6pgoJCTxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJqeF9wb3N0X29wYSIgY2xhc3M9InRleHQtY2VudGVyIiB2YWx1ZT0ie3tvcGFjaXR5fX0iIHN0eWxlPSJ3aWR0aDogNWVtIiAvPiUKCTwvbGFiZWw+Cgk8L3A+Cgk8YnIgLz4KCgk8aDM+5YaF5a655bGP6JS96KeE5YiZPC9oMz4KCTx1bCBpZD0ianhfcG9zdF9rd29yZCI+Cgl7eyNrd29yZH19CgkJPGxpPgoJPHNlbGVjdCBjbGFzcz0ianhfd29yZF90eXBlIj4KCQk8b3B0aW9uIHZhbHVlPSIwIiB7eyN0cF9yZWdleH19c2VsZWN0ZWR7ey90cF9yZWdleH19Puato+WImTwvb3B0aW9uPgoJCTxvcHRpb24gdmFsdWU9IjEiIHt7I3RwX3BsYWlufX1zZWxlY3RlZHt7L3RwX3BsYWlufX0+5paH5pysPC9vcHRpb24+Cgk8L3NlbGVjdD4KCgk8c3Bhbnt7I3RwX3JlZ2V4fX0gY2xhc3M9InJlZ2V4Int7L3RwX3JlZ2V4fX0+PGlucHV0IGNsYXNzPSJqeF93b3JkIiB2YWx1ZT0ie3t3b3JkfX0iIC8+PC9zcGFuPjwhLS0KIC0tPjxpbnB1dCBjbGFzcz0ianhfbW9kaWZpZXJ7e150cF9yZWdleH19IGhpZGV7ey90cF9yZWdleH19IiB2YWx1ZT0ie3ttb2RpfX0iIC8+CgoJWyA8YSBjbGFzcz0icHRyIGp4LXJtLWtleSIgPuWIoOmZpDwvYT4gXQo8L2xpPgoJe3sva3dvcmR9fQoJPC91bD4KCTxwPjxhIGNsYXNzPSJ1aV9idG4gdWlfYnRuX20iIGRhdGEtYnRuPSJhZGQiPjxzcGFuPjxlbT7mt7vliqA8L2VtPjwvc3Bhbj48L2E+PC9wPgoJPGJyIC8+CgoJPGgzPueUqOaIt+Wxj+iUveWIl+ihqDwvaDM+Cgk8cD7nlKjmiLfliJfooajvvIzkuIDooYzkuIDkuKo8L3A+Cgk8IS0tIEhhY2tpc2ggc29sdXRpb24gLS0+Cgk8ZGl2IHN0eWxlPSJwYWRkaW5nLXJpZ2h0OiAxMHB4OyI+CgkJPHRleHRhcmVhIGlkPSJqeF9wb3N0X3VzZXIiIHJvdz01IHN0eWxlPSJ3aWR0aDogMTAwJTsgcGFkZGluZzogLjJlbSI+e3t1c2VyfX08L3RleHRhcmVhPgoJPC9kaXY+Cgk8YnIgLz4KCgk8cCBjbGFzcz0idGV4dC1jZW50ZXIiPgoJCTxhIGNsYXNzPSJ1aV9idG4gdWlfYnRuX20iIGRhdGEtYnRuPSJzYXZlIj48c3Bhbj48ZW0+5YKo5a2YPC9lbT48L3NwYW4+PC9hPiAmbmJzcDsgCgkJPGEgY2xhc3M9InVpX2J0biB1aV9idG5fbSIgZGF0YS1idG49ImNsb3NlIj48c3Bhbj48ZW0+5pS+5byDPC9lbT48L3NwYW4+PC9hPgoJPC9wPgo8L2Rpdj4KKi99KS5leHRyYWN0ICgpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiR0cGxBZGRXb3JkID0gLyogRmlsZTogYmxvY2tfcG9zdF9rd29yZC5odG1sICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24gKCkgeyAvKgo8bGk+Cgk8c2VsZWN0IGNsYXNzPSJqeF93b3JkX3R5cGUiPgoJCTxvcHRpb24gdmFsdWU9IjAiIHt7I3RwX3JlZ2V4fX1zZWxlY3RlZHt7L3RwX3JlZ2V4fX0+5q2j5YiZPC9vcHRpb24+CgkJPG9wdGlvbiB2YWx1ZT0iMSIge3sjdHBfcGxhaW59fXNlbGVjdGVke3svdHBfcGxhaW59fT7mlofmnKw8L29wdGlvbj4KCTwvc2VsZWN0PgoKCTxzcGFue3sjdHBfcmVnZXh9fSBjbGFzcz0icmVnZXgie3svdHBfcmVnZXh9fT48aW5wdXQgY2xhc3M9Imp4X3dvcmQiIHZhbHVlPSJ7e3dvcmR9fSIgLz48L3NwYW4+PCEtLQogLS0+PGlucHV0IGNsYXNzPSJqeF9tb2RpZmllcnt7XnRwX3JlZ2V4fX0gaGlkZXt7L3RwX3JlZ2V4fX0iIHZhbHVlPSJ7e21vZGl9fSIgLz4KCglbIDxhIGNsYXNzPSJwdHIgangtcm0ta2V5IiA+5Yig6ZmkPC9hPiBdCjwvbGk+CiovfSkuZXh0cmFjdCAoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3NzID0gJCgnPHN0eWxlPicpLmFwcGVuZFRvIChkb2N1bWVudC5oZWFkKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVidWlsZFN0eWxlICgpOwogICAgICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgICAgIC8vIOmHjeaehOagt+W8j+ihqAogICAgICAgICAgICAgICAgICAgIF9yZWJ1aWxkU3R5bGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNCdWlsZGVyID0gJy5qeF9wb3N0X2Jsb2NrX2FjdCB7JzsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLmNvbmZpZy5vbm1hdGNoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIHRoaXMuX19BQ1RfQkFSOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNCdWlsZGVyICs9ICdkaXNwbGF5OiBub25lOyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIHRoaXMuX19BQ1RfSElERToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzQnVpbGRlciArPSBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXNwbGF5OiBub25lOycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd9JywKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcuanhfcG9zdF9ibG9ja19zdHJpcGUgeycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXNwbGF5OiBub25lJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAsICd9JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbiAoJycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSB0aGlzLl9fQUNUX09QQToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzQnVpbGRlciArPSBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvcGFjaXR5OiAnICsgKHRoaXMuY29uZmlnLm9wYWNpdHkgLyAxMDApICsgJzsnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHJhbnNpdGlvbjogb3BhY2l0eSAuNXM7JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ30nLAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJy5qeF9wb3N0X2Jsb2NrX2FjdDpob3ZlciB7JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29wYWNpdHk6IC45OycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd9JywKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcuanhfcG9zdF9ibG9ja19zdHJpcGUgeycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXNwbGF5OiBub25lJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAsICd9JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbiAoJycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBzQnVpbGRlciArPSAnfSc7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3NzLnRleHQoc0J1aWxkZXIpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgLy8g57yW6K+R5q2j5YiZ5Yy56YWNCiAgICAgICAgICAgICAgICAgICAgX2NvbXBpbGVSZWdleDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmt3b3JkLmZvckVhY2ggKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnR5cGUgPT09IHRoYXQuX19NX1JFR0VYKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnJlZ2V4ID0gbmV3IFJlZ0V4cCAoZS53b3JkLCBlLm1vZGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvciAoJ+e8luivkeato+WImeihqOi+vuW8j+aXtuWHuumUmSFcbuihqOi+vuW8jzogJXMsIOW8gOWFszogJXMnLCBlcnIud29yZCwgZXJyLm1vZGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVyci5yZWdleCA9IHsgdGVzdDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZmFsc2U7IH0gfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICAgICAgLy8g6YWN572u56qX5Y+j5Zue6LCDCiAgICAgICAgICAgICAgICAgICAgX2NvbmY6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyICR2aWV3ID0gJC5leHRlbmQodHJ1ZSwge30sIHRoaXMuY29uZmlnKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICR2aWV3LnRwX2hpZGUgPSAkdmlldy5vbm1hdGNoID09PSB0aGlzLl9fQUNUX0hJREU7CiAgICAgICAgICAgICAgICAgICAgICAgICR2aWV3LnRwX29wYSAgPSAkdmlldy5vbm1hdGNoID09PSB0aGlzLl9fQUNUX09QQTsKICAgICAgICAgICAgICAgICAgICAgICAgJHZpZXcudHBfYmFyICA9ICR2aWV3Lm9ubWF0Y2ggPT09IHRoaXMuX19BQ1RfQkFSOwoKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkdmlldy5rd29yZC5sZW5ndGg7IGkrKykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICR2aWV3Lmt3b3JkW2ldW3RoaXMuX21hdGNoX3R5cGUoJHZpZXcua3dvcmRbaV0udHlwZSldID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgJHZpZXcudXNlciA9ICR2aWV3LnVzZXIuam9pbiAoJ1xuJyk7CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHRwbCA9ICQoTXVzdGFjaGUucmVuZGVyICh0aGlzLiR0cGxDb25maWcsICR2aWV3KSk7CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHduZEJsb2NrZXIgPSAkLmRpYWxvZy5vcGVuICgkdHBsLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+i0tOWtkOWFs+mUruWtl+Wxj+iUvScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogIDMwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogNDAwCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICAkdHBsLm9uICgnY2xpY2snLCAnYS5qeC1ybS1rZXknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDnp7vpmaTpgqPkuIDooYwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50ICgpLnJlbW92ZSAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkub24gKCdjaGFuZ2UnLCAnLmp4X3dvcmRfdHlwZScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc1JlZ2V4ID0gcGFyc2VJbnQgKHRoaXMudmFsdWUpID09PSB0aGF0Ll9fTV9SRUdFWDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGluZSA9ICQodGhpcykucGFyZW50ICgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZS5maW5kICgnLmp4X3dvcmQnKS5wYXJlbnQoKS50b2dnbGVDbGFzcyAoJ3JlZ2V4JywgaXNSZWdleCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lLmZpbmQgKCcuanhfbW9kaWZpZXInKS50b2dnbGVDbGFzcyAoJ2hpZGUnLCAhaXNSZWdleCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLm9uICgnY2hhbmdlJywgJyNqeF9wb3N0X21hdGNoJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2p4X3Bvc3Rfb3BhJywgJHRwbCkucGFyZW50ICgpLnRvZ2dsZUNsYXNzICgnaGlkZScsIHBhcnNlSW50ICh0aGlzLnZhbHVlKSAhPT0gdGhhdC5fX0FDVF9PUEEpOwogICAgICAgICAgICAgICAgICAgICAgICB9KS5vbiAoJ2NsaWNrJywgJy51aV9idG4nLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCQodGhpcykuZGF0YSgnYnRuJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdhZGQnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHRwbEFkZCA9ICQoTXVzdGFjaGUucmVuZGVyKHRoYXQuJHRwbEFkZFdvcmQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRwX3BsYWluOiB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2p4X3Bvc3Rfa3dvcmQnLCAkdHBsKS5hcHBlbmQgKCR0cGxBZGQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdHBsQWRkLmZpbmQgKCcudGdfZm9jdXMnKS5yZW1vdmVDbGFzcyAoJy50Z19mb2N1cycpLmZvY3VzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NhdmUnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3Q29uZiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ubWF0Y2g6IHBhcnNlSW50ICgkKCcjanhfcG9zdF9tYXRjaCcsICR0cGwpLnZhbCgpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IHRoYXQuX3JhbmdlIChwYXJzZUludCAoJCgnI2p4X3Bvc3Rfb3BhJywgJHRwbCkudmFsKCkpLCAwLCAxMDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga3dvcmQ6IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcjogICQoJyNqeF9wb3N0X3VzZXInLCAkdHBsKS52YWwoKS5zcGxpdCAoJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2p4X3Bvc3Rfa3dvcmQgPiBsaScpLmVhY2ggKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBydWxlID0gJCh0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbmYua3dvcmQucHVzaCAoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhcnNlSW50IChydWxlLmZpbmQgKCdzZWxlY3QnKS52YWwgKCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmQ6IHJ1bGUuZmluZCAoJy5qeF93b3JkJykudmFsICgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGk6IHJ1bGUuZmluZCAoJy5qeF9tb2RpZmllcicpLnZhbCAoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY29uZi5zZXQgKHRoYXQuaWQsIG5ld0NvbmYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmNvbmZpZyA9IG5ld0NvbmY7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0Ll9jb21waWxlUmVnZXggKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuX3JlYnVpbGRTdHlsZSAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHduZEJsb2NrZXIuY2xvc2UgKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Nsb3NlJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHduZEJsb2NrZXIuY2xvc2UgKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgICAgICAvLyDmoIforrDotLTlrZDkuLrpmpDol48KICAgICAgICAgICAgICAgICAgICBfaGl0OiBmdW5jdGlvbiAoZmxvb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZmxvb3IuYWRkQ2xhc3MgKCdqeF9wb3N0X2Jsb2NrX2FjdCcpOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZsb29yLnByZXYoKS5pcygnc2NyaXB0JykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbG9vci5wcmV2KCkucmVtb3ZlICgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZsb29yLnByZXYoKS5pcygnLmp4X3Bvc3RfYmxvY2tfYWN0JykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWvu+aJvuaoquadoQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZXYgPSBmbG9vci5wcmV2ICgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCFwcmV2LmlzICgnLmp4X3Bvc3RfYmxvY2tfc3RyaXBlJykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldiA9IHByZXYucHJldiAoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmF0dHIgKCdoaWRlLWNvdW50JywgcGFyc2VJbnQgKHByZXYuYXR0ciAoJ2hpZGUtY291bnQnKSkgKyAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJzxkaXY+JykuYWRkQ2xhc3MgKCdqeF9wb3N0X2Jsb2NrX3N0cmlwZSBmbG9vci1zdHJpcGUnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdoaWRlLWNvdW50JywgMSkuaW5zZXJ0QmVmb3JlIChmbG9vcik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgICAgICBfZ2V0QXV0aG9yOiBmdW5jdGlvbiAoZikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZi51c2VyX25hbWUgfHwgZi5hdXRob3JfbmFtZSB8fCAoZi5hdXRob3I/Zi5hdXRob3IudXNlcl9uYW1lOm51bGwpOwogICAgICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgICAgIF9wcm9jOiBmdW5jdGlvbiAoZmxvb3JUeXBlLCBhcmdzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOmmluWFiOajgOafpeeUqOaIt+WQjQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb25maWcudXNlci5pbmRleE9mICh0aGlzLl9nZXRBdXRob3IoYXJncy5fbWFpbi5nZXRGaWVsZCAoKSkpICE9PSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faGl0IChhcmdzLl9tYWluKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmbG9vckNvbnRlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZmxvb3JUeXBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIF9fdHlwZV9mb3J1bToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbG9vckNvbnRlbnQgPSAkKCcudGhyZWFkbGlzdF90ZXh0JywgYXJncy5fbWFpbikudGV4dCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBfX3R5cGVfZmxvb3I6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvb3JDb250ZW50ID0gJCgnLmRfcG9zdF9jb250ZW50JywgYXJncy5fbWFpbikudGV4dCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBfX3R5cGVfbHpsOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb29yQ29udGVudCA9ICQoJy5semxfY29udGVudF9tYWluJywgYXJncy5fbWFpbikudGV4dCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAvLyDnhLblkI7lvqrnjq/mo4Dmn6XlhbPplK7lrZfljLnphY0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMuY29uZmlnLmt3b3JkLmxlbmd0aDsgaS0tOyApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy5jb25maWcua3dvcmRbaV0udHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5fX01fUkVHRVg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5rd29yZFtpXS5yZWdleC50ZXN0IChmbG9vckNvbnRlbnQpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faGl0IChhcmdzLl9tYWluKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5fX01fUExBSU46CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmbG9vckNvbnRlbnQuaW5kZXhPZiAodGhpcy5jb25maWcua3dvcmRbaV0ud29yZCkgIT09IC0xKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faGl0IChhcmdzLl9tYWluKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgImhpZGVfbG9vcHMiOiB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogJzMg5aSp5b6q546v6ZqQ6JePJywKICAgICAgICAgICAgICAgICAgICBkZXNjOiAnMyDlpKnlvqrnjq/lsY/olL3mjIflrprnlKjmiLfnmoTluJblrZAsIOe7n+S4gOWwgemUgS4nLAogICAgICAgICAgICAgICAgICAgIGZsYWc6IF9fdHlwZV9wb3N0YWN0IHwgX190eXBlX2ZvcnVtLAoKICAgICAgICAgICAgICAgICAgICBfZmluZFVzZXI6IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgwID09PSB0aGlzLmJsb2NrTGlzdC5hdXRob3IubGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xOwoKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMuYmxvY2tMaXN0LmF1dGhvci5sZW5ndGg7IGktLTsgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ibG9ja0xpc3QuYXV0aG9yW2ldLm5hbWUgPT0gbmFtZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgX3VzZXJFeGlzdDogZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xICE9PSB0aGlzLl9maW5kVXNlcih1c2VyKTsKICAgICAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgICAgICBfY29uZjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7CgoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyICR0cGwgPSAkKE11c3RhY2hlLnJlbmRlcih0aGlzLnRwbEhpZGVBdXRob3IsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhvcjogdGhpcy5ibG9ja0xpc3QuYXV0aG9yLm1hcCAoZnVuY3Rpb24gKGUsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBuYW1lOiBlLm5hbWUsIHRpbWU6IGUudGltZSA/ICQudG9EYXRlU3RyIChuZXcgRGF0ZShlLnRpbWUpKSA6ICflsJrmnKonIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHduZEhpZGVVc2VyID0gJC5kaWFsb2cub3BlbiAoJHRwbCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICcz5aSp5b6q546v6ZqQ6JeP5qih57uE6YWN572uIC0g6K6w5b6X54K55LiA5qyhIFvlhajpg6jlsIHnpoFdJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAzNzAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDQwMAogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkaW5wID0gJCgnI2p4X25ld19pZCcsICR0cGwpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2JBZGROYW1lID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXIgPSAkaW5wLnZhbCAoKS50cmltKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0Ll91cGRMaXN0ICgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgwID09PSB1c2VyLmxlbmd0aCB8fCB0aGF0Ll91c2VyRXhpc3QodXNlcikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW5wLnZhbCAoJycpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoTXVzdGFjaGUucmVuZGVyICh0aGF0LnRwbE5ld0xpbmUsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB1c2VyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6ICflsJrmnKonCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkuaW5zZXJ0QmVmb3JlKCQoJyNqeF9sYXN0X2xpbmVfb2ZfM2RheV9ibG9jaycsICR0cGwpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuYmxvY2tMaXN0LmF1dGhvci5wdXNoICh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdXNlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuX3NhdmVMaXN0ICgpOwogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8g57uR5a6a5LqL5Lu2CiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNqeF9hZGQnLCAkdHBsKS5jbGljayhjYkFkZE5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAkaW5wLmtleXByZXNzKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS53aGljaCA9PT0gMTMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2JBZGROYW1lICgpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgJHRwbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uICgnY2xpY2snLCAnLmp4X21hbl9oaWRlLCAuanhfbWFuX3JtJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkbCA9ICQoZS50YXJnZXQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRsLmhhc0NsYXNzICgndGV4dC1kaXNhYmxlZCcpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbC5hZGRDbGFzcyAoJ3RleHQtZGlzYWJsZWQnKTsKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICR1biA9ICRsLnBhcmVudCgpLmRhdGEoJ25hbWUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuX3VwZExpc3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodHJ1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJGwuaGFzQ2xhc3MgKCdqeF9tYW5faGlkZScpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmJsb2NrTGlzdC5hdXRob3JbdGhhdC5fZmluZFVzZXIoJHVuKV0udGltZSA9ICQuc3RhbXAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5faGlkZSAoZnVuY3Rpb24gKCkge30sICR1bik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJGwuaGFzQ2xhc3MgKCdqeF9tYW5fcm0nKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5ibG9ja0xpc3QuYXV0aG9yLnNwbGljZSh0aGF0Ll9maW5kVXNlcigkdW4pLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGwucGFyZW50KCkuaGlkZSAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0Ll9zYXZlTGlzdCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNqeF9jbG9zZScsICR0cGwpLmNsaWNrKCR3bmRIaWRlVXNlci5jbG9zZS5iaW5kKCR3bmRIaWRlVXNlcikpOwogICAgICAgICAgICAgICAgICAgICAgICAkKCcjanhfYWxsJywgJHRwbCkuY2xpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhpZGVTdGF0dXMgPSAkKCcjanhfaGlkZV9pbmZvJywgJHRwbCkuc2hvdygpLnRleHQgKCfmraPlnKjliJ3lp4vljJbigKYnKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmhpZGVRdWV1ZS5vblByb2dyZXNzID0gZnVuY3Rpb24gKGksIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlU3RhdHVzLnRleHQoTXVzdGFjaGUucmVuZGVyKCfmraPlnKjpmpDol48ge3tpfX0gLyB7e3R9fS4uLiDor7fli7/lhbPpl63or6Xnqpflj6MhJywge2k6IGksIHQ6IHR9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5oaWRlUXVldWUub25Db21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmhpZGVRdWV1ZS5vblByb2dyZXNzID0gdGhhdC5oaWRlUXVldWUub25Db21wbGV0ZSA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZVN0YXR1cy50ZXh0ICgn5YWo6YOo55So5oi35bey5oiQ5Yqf6ZqQ6JePIScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuaGlkZVF1ZXVlLmFkZC5hcHBseSAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5oaWRlUXVldWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoJCgnYS5qeC5qeF9tYW5faGlkZTpub3QoLnRleHQtZGlzYWJsZWQpJykuYWRkQ2xhc3MoJ3RleHQtZGlzYWJsZWQnKS5tYXAoZnVuY3Rpb24gKGksIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQoZSkucGFyZW50KCkuZGF0YSgnbmFtZScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkdHBsOwogICAgICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgICAgIF9oaWRlOiBmdW5jdGlvbiAoY2IsIGF1dGhvcikgewogICAgICAgICAgICAgICAgICAgICAgICAvLyDmo4Dmn6XmmK/lkKblnKjliJfooagKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkTGlzdCAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3VzZXJFeGlzdCAoYXV0aG9yKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5a2Y5ZyoLCDkv67mraPkuIrmrKHpmpDol4/ml7bpl7QKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmxvY2tMaXN0LmF1dGhvclt0aGlzLl9maW5kVXNlcihhdXRob3IpXS50aW1lID0gJC5zdGFtcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2F2ZUxpc3QgKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvICgn5byA5aeL6ZqQ6JePOiAlcycsIGF1dGhvcik7CgogICAgICAgICAgICAgICAgICAgICAgICAkLmFqYXggKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogJy90cGhpZGUvYWRkJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVfdW46IGF1dGhvciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZTogJ3V0Zi04JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicKICAgICAgICAgICAgICAgICAgICAgICAgfSkuc3VjY2VzcyAoY2IpOwogICAgICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgICAgIF9pbml0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHBsSGlkZUF1dGhvciA9IC8qIEZpbGU6IGhpZGVfbG9vcHNfY29uZmlnLmh0bWwgKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbiAoKSB7IC8qCjxkaXYgY2xhc3M9Imp4X2F1dG9mbG93Ij4KCTxoMj4zIOWkqeW+queOr+makOiXj+eahOWIl+ihqDwvaDI+CgoJPHAgY2xhc3M9InRleHQtY2VudGVyIj7or7fms6jmhI86IOWwgeemgeaXtumXtOS4jeS8muiHquWKqOWIt+aWsCwg6K+35YWz6Zet5ZCO6YeN5paw5byA5ZCv6K+l5a+56K+d5qGG44CCPC9wPgoKCTxvbD4KCXt7I2F1dGhvcn19CgkJPGxpIGRhdGEtbmFtZT0ie3tuYW1lfX0iPjxiPnt7bmFtZX19PC9iPgpbIOS4iuasoemakOiXjzogPHNwYW4gY2xhc3M9InRleHQtcmVkIj57e3RpbWV9fTwvc3Bhbj4gfCA8YSBjbGFzcz0iangganhfbWFuX2hpZGUiPuaJi+WKqDwvYT4gfCA8YSBjbGFzcz0iangganhfbWFuX3JtIj7np7vpmaQ8L2E+IF08L2xpPgoJe3svYXV0aG9yfX0KCTxsaSBpZD0ianhfbGFzdF9saW5lX29mXzNkYXlfYmxvY2siPgoJCTxpbnB1dCBpZD0ianhfbmV3X2lkIiBwbGFjZWhvbGRlcj0i6K+36L6T5YWl5paw55qE6ZyA6KaB6Ieq5Yqo5bCB56aB55qEIGlkIiBzdHlsZT0id2lkdGg6IDIwZW07IiAvPgoJCTxiciAvPjxhIGNsYXNzPSJ1aV9idG4gdWlfYnRuX20iIGlkPSJqeF9hZGQiPjxzcGFuPjxlbT7mt7vliqA8L2VtPjwvc3Bhbj48L2E+Cgk8L2xpPgoJPC9vbD4KCgk8cCBjbGFzcz0iaGlkZSIgaWQ9Imp4X2hpZGVfaW5mbyI+PC9wPgoKCTxkaXYgY2xhc3M9InRleHQtY2VudGVyIj4KCTxhIGNsYXNzPSJ1aV9idG4gdWlfYnRuX20iIGlkPSJqeF9hbGwiPjxzcGFuPjxlbT7lhajpg6jlsIHnpoE8L2VtPjwvc3Bhbj48L2E+ICZuYnNwOwoJPGEgY2xhc3M9InVpX2J0biB1aV9idG5fbSIgaWQ9Imp4X2Nsb3NlIj48c3Bhbj48ZW0+5YWz6ZetPC9lbT48L3NwYW4+PC9hPgoJPC9kaXY+CjwvZGl2PgoqL30pLmV4dHJhY3QgKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHBsTmV3TGluZSA9IC8qIEZpbGU6IGhpZGVfbG9vcHNfYXV0aG9yLmh0bWwgKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbiAoKSB7IC8qCjxsaSBkYXRhLW5hbWU9Int7bmFtZX19Ij48Yj57e25hbWV9fTwvYj4KWyDkuIrmrKHpmpDol486IDxzcGFuIGNsYXNzPSJ0ZXh0LXJlZCI+e3t0aW1lfX08L3NwYW4+IHwgPGEgY2xhc3M9Imp4IGp4X21hbl9oaWRlIj7miYvliqg8L2E+IHwgPGEgY2xhc3M9Imp4IGp4X21hbl9ybSI+56e76ZmkPC9hPiBdPC9saT4KKi99KS5leHRyYWN0ICgpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl91cGRMaXN0ICgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9oaWRlID0gdGhpcy5faGlkZS5iaW5kICh0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlUXVldWUgPSBuZXcgSW50ZXJ2YWxMb29wIChbXSwgX2hpZGUsIDQwMCkubG9vcCAoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJUaW1lID0gJC5zdGFtcCAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQzRGF5cyAgPSAzICogMjQgKiA2MCAqIDYwOwoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJsb2NrTGlzdC5hdXRob3IuZm9yRWFjaCAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJUaW1lIC0gZS50aW1lID4gdDNEYXlzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuaGlkZVF1ZXVlLmFkZCAoZS5uYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICAgICAgX3VwZExpc3Q6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ibG9ja0xpc3QgPSAkLmV4dGVuZCAoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aG9yOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5qC85byP5aaC5LiLCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy97CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8JbmFtZTogJ+eCruW8uTU2JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLwlsYXN0SGlkZTogMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgICAgICB9LCAkY29uZi5nZXQgKHRoaXMuaWQsIHt9KSk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBfc2F2ZUxpc3Q6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGNvbmYuc2V0ICh0aGlzLmlkLCB0aGlzLmJsb2NrTGlzdCk7CiAgICAgICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICAgICAgX2ZpbmROYW1lQW5kSGlkZTogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZsb29yRGF0YSA9ICQoZS50YXJnZXQpLnBhcmVudHMoJy5semxfc2luZ2xlX3Bvc3QsLmxfcG9zdCcpCiAgICAgICAgICAgICAgICAgICAgICAgIC5maXJzdCgpLmdldEZpZWxkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdXRob3IgPSBmbG9vckRhdGEudXNlcl9uYW1lIHx8IGZsb29yRGF0YS5hdXRob3IudXNlcl9uYW1lOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fdXNlckV4aXN0KGF1dGhvcikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQuZGlhbG9nLmFsZXJ0IChNdXN0YWNoZS5yZW5kZXIoLyogRmlsZTogaGlkZV9sb29wc19hbHJlYWR5X2luX2xpc3QuaHRtbCAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbiAoKSB7IC8qCueUqOaItyBbPGI+e3tuYW1lfX08L2I+XSDlt7LlrZjlnKjkuo7lsY/olL3liJfooaghCiovfSkuZXh0cmFjdCAoKSwge25hbWU6IGF1dGhvcn0pLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICczIOWkqeW+queOr+makOiXjycKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl91cGRMaXN0ICgpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJsb2NrTGlzdC5hdXRob3IucHVzaCAoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogYXV0aG9yLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogJC5zdGFtcCgpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zYXZlTGlzdCAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faGlkZSAoZnVuY3Rpb24gKHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQuZGlhbG9nLmFsZXJ0IChNdXN0YWNoZS5yZW5kZXIoLyogRmlsZTogaGlkZV9sb29wX3Jlc3VsdC5odG1sICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uICgpIHsgLyoK5a+5IDxiPnt7bmFtZX19PC9iPiDnmoTpmpDol4/lpITnkIbnu5Pmnpw6IHt7bXNnfX0oe3tub319KQoqL30pLmV4dHJhY3QgKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5leHRlbmQgKHtuYW1lOiBhdXRob3J9LCByKSksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJzMg5aSp5b6q546v6ZqQ6JePICjmpbzkuK3mpbzml6DmlYgpJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGF1dGhvcik7CiAgICAgICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICAgICAgX21lbnU6IGZ1bmN0aW9uIChmbG9vclR5cGUsIGFyZ3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRhY3QgPSAkKCcudXNlci1oaWRlLXBvc3QtYWN0aW9uJywgYXJncy5fbWFpbik7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkYWN0SGlkZVBvc3QgPSAkLmNyZWF0ZSgnYScsICdqeCBqeC1wb3N0LWFjdGlvbicpOwoKICAgICAgICAgICAgICAgICAgICAgICAgJGFjdEhpZGVQb3N0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGV4dCAoJ+WKoOWFpSAzIOWkqeW+queOr+makOiXj+WIl+ihqCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kVG8gKCRhY3QpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZGF0YSAoJ2p4JywgdGhpcy5pZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kYXRhICgnZXZlJywgYXJncy5fbWFpbi5nZXRGaWVsZCgpLmF1dGhvci51c2VyX25hbWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2xpY2sodGhpcy5fZmluZE5hbWVBbmRIaWRlLmJpbmQodGhpcykpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAiaWNvbl9oaWRlIjogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICfpmpDol4/nlKjmiLflm77moIcnLAogICAgICAgICAgICAgICAgICAgIGRlc2M6ICflsIbnlKjmiLflkI3kuIvmlrnjgIHlj7PmlrnnmoTlm77moIfpm4bol4/otbfmnaXjgIInLAogICAgICAgICAgICAgICAgICAgIGRlZjogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgZmxhZzogfjAsCiAgICAgICAgICAgICAgICAgICAgX2luaXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGUgKCcuaWNvbl93cmFwJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICJub190ZXh0X2xpbmsiOiB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ+Wxj+iUveW4luWtkOWGheaWh+Wtl+aOqOW5v+mTvuaOpScsCiAgICAgICAgICAgICAgICAgICAgZGVzYzogJ+WwhuW4luWtkOWGheeahOaWh+Wtl+aOqOW5v+aQnOe0oumTvuaOpeabv+aNouS4uuaZrumAmuaWh+acrCcsCiAgICAgICAgICAgICAgICAgICAgZmxhZzogX190eXBlX2x6bCB8IF9fdHlwZV9mbG9vciwKICAgICAgICAgICAgICAgICAgICBfcHJvYzogZnVuY3Rpb24gKGZsb29yVHlwZSwgYXJncykgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJtTGlua1RleHQgKGFyZ3MuX21haW4pOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgX2luaXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ybUxpbmtUZXh0ICgpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcm1MaW5rVGV4dDogZnVuY3Rpb24gKF9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICQoX3AgfHwgJ2JvZHknKS5maW5kICgnYS5wc19jYicpLmVhY2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZnRlciAoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUgKHRoaXMudGV4dENvbnRlbnQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICJvcmFuZ2UiOiB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ+enu+mZpOS8muWRmOW9qeWQjScsCiAgICAgICAgICAgICAgICAgICAgZGVzYzogJ+WFqOmDqOWPmOaIkOWPmOaIkOm7mOiupOmTvuaOpeminOiJsuOAgicsCiAgICAgICAgICAgICAgICAgICAgZmxhZzogX190eXBlX2Zsb29yIHwgX190eXBlX2x6bCB8IF9fdHlwZV9mb3J1bSwKCiAgICAgICAgICAgICAgICAgICAgY2xzTGlzdDogWydzaWduX2hpZ2hsaWdodCcsICd2aXBfcmVkJywgJ2ZpZXN0YV9tZW1iZXInLCAnZmllc3RhX21lbWJlcl9yZWQnLCAnbWVtYmVyX3RocmVhZF90aXRsZV9mcnMnLCAnc2lnbl9oaWdobGlnaHQnXSwKCiAgICAgICAgICAgICAgICAgICAgcm1PcmFuZ2U6IGZ1bmN0aW9uICh0YXJnZXQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyICR0YXJnZXQgPSAkKHRhcmdldCk7CgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IHRoaXMuY2xzTGlzdC5sZW5ndGg7IGkrKykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy4nICsgdGhpcy5jbHNMaXN0W2ldLCAkdGFyZ2V0LnJlbW92ZUNsYXNzICh0aGlzLmNsc0xpc3RbaV0pKS5yZW1vdmVDbGFzcyh0aGlzLmNsc0xpc3RbaV0pOwogICAgICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgICAgIF9pbml0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOagh+mimOe6ouWQjeenu+mZpAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJtT3JhbmdlICgnYm9keScpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgX3Byb2M6IGZ1bmN0aW9uIChmbG9vclR5cGUsIGFyZ3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ybU9yYW5nZSAoYXJncy5fbWFpbik7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAicXVvdGUiOiB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ+W8leeUqOalvOWxgicsCiAgICAgICAgICAgICAgICAgICAgZGVzYzogJ+W8leeUqOafkOS4gOWxgueahOWGheWuuScsCiAgICAgICAgICAgICAgICAgICAgZmxhZzogX190eXBlX2Zsb29yLAogICAgICAgICAgICAgICAgICAgIF9wcm9jOiBmdW5jdGlvbiAoZmxvb3JUeXBlLCBhcmdzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkcXVvdGUgPSAkKCc8bGk+JykuYWRkQ2xhc3MoJ3BhZC1sZWZ0JykuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnPGE+JykudGV4dCgnI+W8leeUqCcpLmFkZENsYXNzKCdqeCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZGF0YSgnangnLCAncXVvdGUnKS5kYXRhKCdmbG9vcicsIGFyZ3MuZmxvb3JOdW0pCiAgICAgICAgICAgICAgICAgICAgICAgICkucHJlcGVuZFRvKCQoJy5wX3RhaWwnLCBhcmdzLl9tYWluKSk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBfY2xpY2s6IGZ1bmN0aW9uICgkZWxlLCAkZXZlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkZmxvb3IgID0gJGVsZS5wYXJlbnRzKCcubF9wb3N0Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkZWRpdG9yID0gJCgnI3VlZGl0b3JfcmVwbGFjZScpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHF1b3RlID0gJCgnPHA+JykuYXBwZW5kVG8oJGVkaXRvcik7CgogICAgICAgICAgICAgICAgICAgICAgICAkcXVvdGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQgKCflvJXnlKggJyArICRlbGUuZGF0YSgnZmxvb3InKSArICfmpbwgQCcgKyAkKCcucF9hdXRob3JfbmFtZScsICRmbG9vcikuZmlyc3QoKS50ZXh0KCkgKyAnIOeahOWPkeiogO+8micpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kICgnPGJyPicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kICgn4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCUJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQgKCc8YnI+Jyk7CgogICAgICAgICAgICAgICAgICAgICAgICAkKCcual9kX3Bvc3RfY29udGVudCcsICRmbG9vcikuY29udGVudHMoKS5lYWNoKGZ1bmN0aW9uIChpLCBlbGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGUubm9kZVR5cGUgPT0gMykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGUubm9kZVZhbHVlLnRyaW0oKSAhPT0gJycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRxdW90ZS5hcHBlbmQgKGVsZS5ub2RlVmFsdWUpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkZWxlID0gJChlbGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRlbGUuaXMoJ2EnKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkZWxlLmZpbmQoJ2ltZycpLnNpemUoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcXVvdGUuYXBwZW5kICgnWyPlm77niYddJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHF1b3RlLmFwcGVuZCAoJGVsZS50ZXh0KCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJGVsZS5pcyAoJ2ltZycpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHF1b3RlLmFwcGVuZCAoJ1sj6KGo5oOFXScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkZWxlLmlzICgnb2JqZWN0LGVtYmVkJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcXVvdGUuYXBwZW5kICgnWyPop4bpopFdJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRxdW90ZS5hcHBlbmQgKCRlbGUuY2xvbmUoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgJHF1b3RlLmFwcGVuZCAoJzxicj4mZ3Q7ICcpOwogICAgICAgICAgICAgICAgICAgICAgICAkLmdvVG9FZGl0b3IoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgInF1b3RlX2x6bCI6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAn5qW85Lit5qW85biW5a2Q5byV55SoJywKICAgICAgICAgICAgICAgICAgICBkZXNjOiAn5byV55So5qW85Lit5qW855qE5Zue5aSNJywKICAgICAgICAgICAgICAgICAgICBmbGFnOiBfX3R5cGVfbHpsLAogICAgICAgICAgICAgICAgICAgIF9wcm9jOiBmdW5jdGlvbiAoZmxvb3JUeXBlLCBhcmdzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICQoJzxhPicpLnRleHQoJ+W8leeUqCcpLmFkZENsYXNzKCdqeCBkX3RhaWwnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluc2VydEJlZm9yZSgkKCcubHpsX3RpbWUnLCBhcmdzLl9tYWluKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZnRlcigkKCc8c3Bhbj4nKS5hZGRDbGFzcygnZF90YWlsJykudGV4dCgnIHwgJykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZGF0YSgnangnLCAncXVvdGVfbHpsJyk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBfY2xpY2s6IGZ1bmN0aW9uICgkZWxlLCAkZXZlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkZWRpdG9yID0gJCgnI3VlZGl0b3JfcmVwbGFjZScpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGNudCA9ICRlbGUucGFyZW50cygnLmx6bF9jbnQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgJCgnPHA+JykuYXBwZW5kVG8oJGVkaXRvcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQgKCflvJXnlKggQCcgKyAkY250LmZpbmQoJy5qX3VzZXJfY2FyZCcpLmF0dHIoJ3VzZXJuYW1lJykgKyAnIOWcqOalvOS4realvOeahOWPkeiogO+8mjxicj4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCAoJGVsZS5wYXJlbnRzKCcubHpsX2NudCcpLmZpbmQoJy5semxfY29udGVudF9tYWluJykudGV4dCgpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCAoJzxicj4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCAoJ+KAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kICgnPGJyPiAmZ3Q7PGJyPicpOwoKICAgICAgICAgICAgICAgICAgICAgICAgJC5nb1RvRWRpdG9yKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICJyZWFsX3VybCI6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAn6LS05ZCn6Lez6L2s6ZO+6Kej6ZmkJywKICAgICAgICAgICAgICAgICAgICBkZXNjOiAn5bCG55m+5bqm5omA6LCT5a6J5YWo6ZO+5o6l5pS55oiQ55u06ZO+44CCJywKICAgICAgICAgICAgICAgICAgICBmbGFnOiBfX3R5cGVfZmxvb3IgfCBfX3R5cGVfbHpsLAogICAgICAgICAgICAgICAgICAgIF9wcm9jOiBmdW5jdGlvbiAoZmxvb3JUeXBlLCBhcmdzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkZmxvb3IgPSAkKGFyZ3MuX21haW4pOwogICAgICAgICAgICAgICAgICAgICAgICAkZmxvb3IuZmluZCgnYVtocmVmKj0ianVtcC5iZGltZy5jb20vc2FmZWNoZWNrIl0nKS5lYWNoKGZ1bmN0aW9uIChpLCBlbGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkZWxlID0gJChlbGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR1cmwgPSAkZWxlLnRleHQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHVybC5pbmRleE9mKCdAJykgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEbyBub3RoaW5nLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvXmh0dHBzPzpcL1wvLy50ZXN0KCR1cmwpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGVsZS5hdHRyKCdocmVmJywgJHVybCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhFQUQg6K+35rGC5Lya5Y+Y5oiQIGVycm9yIC4uPwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0ICh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogZWxlLmhyZWYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWOu+S9oOeahOeZvuW6pgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVmZXJlcjogJ2h0dHA6Ly90aWViYS5iYWlkdS5jb20vcC8xMjM0NTY3ODknLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmFuZ2U6ICdieXRlcz0wLTAnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZmluYWxVcmwuaW5kZXhPZignaHR0cCcpID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGVsZS5hdHRyKCdocmVmJywgcmVzcG9uc2UuZmluYWxVcmwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAicm1JbWdGYXYiOiB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ+enu+mZpOWbvueJh+eahOaUtuiXj+W3peWFt+agjycsCiAgICAgICAgICAgICAgICAgICAgZGVzYzogJ+m8oOagh+aCrOa1ruWbvueJh+aXtuWHuueOsOeahOW3peWFt+agj+OAgicsCiAgICAgICAgICAgICAgICAgICAgZmxhZzogMCwKICAgICAgICAgICAgICAgICAgICBfaW5pdDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAkKCcuZmF2LXdyYXBwZXInKS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgInJtU2F2ZUZhY2UiOiB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ+makOiXj+aMveWwiuWNoeaPkOekuicsCiAgICAgICAgICAgICAgICAgICAgZGVzYzogJ+makOiXj+S8muWRmOWPkeW4lueahOS9v+eUqOaMveWwiuWNoeaPkOekuuOAgicsCiAgICAgICAgICAgICAgICAgICAgZmxhZzogMCwKICAgICAgICAgICAgICAgICAgICBfaW5pdDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBfaGlkZSAoJy5zYXZlX2ZhY2VfYmcnKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgInJtX2ltZ192aWV3IjogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICfnnIvlm77mqKHlvI/lsY/olL0nLAogICAgICAgICAgICAgICAgICAgIGRlc2M6ICfov5jljp/ml6fniYjotLTlkKfngrnlm77nnIvlpKflm77lip/og70nLAogICAgICAgICAgICAgICAgICAgIGZsYWc6IF9fdHlwZV9mbG9vciwKICAgICAgICAgICAgICAgICAgICBkZWY6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIHJtSW1nOiBmdW5jdGlvbiAoJHJvb3QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJCgnaW1nLkJERV9JbWFnZScsICRyb290KS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtID0gdGhpcy5zcmMubWF0Y2goL1wvc2lnbj1bYS16MC05XStcLyguKykvaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW0pIHJldHVybiA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW1nTGluayA9ICcvL2ltZ3NyYy5iYWlkdS5jb20vZm9ydW0vcGljL2l0ZW0vJyArIG1bMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCc8YT4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdocmVmJywgaW1nTGluaykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigndGFyZ2V0JywgJ19ibGFuaycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8aW1nPicpLmF0dHIoJ3NyYycsIGltZ0xpbmspLmFkZENsYXNzKCdqeF9ub19vdmVyZmxvdycpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbnNlcnRBZnRlciAodGhpcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIF9pbml0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9jc3MuYXBwZW5kICgnLmp4X25vX292ZXJmbG93IHsgbWF4LXdpZHRoOiAxMDAlOyB9Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm1JbWcgKGRvY3VtZW50KTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIF9wcm9jOiBmdW5jdGlvbiAoZmxvb3JUeXBlLCBhcmdzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm1JbWcgKGFyZ3MuX21haW4pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAic2F2ZV9mYWNlIjogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICfmjL3lsIrljaHpmpDol48nLAogICAgICAgICAgICAgICAgICAgIGRlc2M6ICflsY/olL3mjL3lsIrljaHvvIznlZnkuIvkuIDkuKrmqKrmnaHmj5DnpLrjgIInLAogICAgICAgICAgICAgICAgICAgIGZsYWc6IF9fdHlwZV9mbG9vciwKICAgICAgICAgICAgICAgICAgICBfaW5pdDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBfY3NzLmFwcGVuZCAoJy5zYXZlX2x6X2ZhY2U6OmJlZm9yZXtjb250ZW50OmF0dHIod2hvKSAiIOS9v+eUqOS6huaMveWwiuWNoSJ9Jyk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBfcHJvYzogZnVuY3Rpb24gKGZsb29yVHlwZSwgYXJncykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCgnLnNhdmVfZmFjZV9wb3N0JywgYXJncy5fbWFpbikuc2l6ZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlj5HnjrDmjL3lsIrljaEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJzxkaXY+JykuYWRkQ2xhc3MoJ2Zsb29yLXN0cmlwZSBzYXZlX2x6X2ZhY2UnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyICgnd2hvJywgJCgnLnBfYXV0aG9yX25hbWUnLCBhcmdzLl9tYWluKS50ZXh0KCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluc2VydEJlZm9yZSAoYXJncy5fbWFpbik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5fbWFpbi5hZGRDbGFzcygnc2F2ZWRGYWNlJykuaGlkZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdmFyIF9tZW51ID0gKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciAkdGVtcGxhdGUgPSAvKiBGaWxlOiBtYWluX2NvbmZpZy5odG1sICovCiAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uICgpIHsgLyoKPGRpdiBzdHlsZT0iaGVpZ2h0OiAxMDAlOyBvdmVyZmxvdy15OiBhdXRvIj4KCTxoMj7lkK/nlKjnmoTmqKHnu4Q8L2gyPgoJPGRpdiBpZD0ianhfY29uZl9tb2R1bGVzIj4KCQl7eyNtb2R1bGVzfX0KCQk8bGFiZWwgdGl0bGU9Int7ZGVzY319Ij4KCQkJPGlucHV0IHR5cGU9ImNoZWNrYm94IiBkYXRhLW1vZHVsZT0ie3tpZH19IiB7eyNlbmFibGV9fWNoZWNrZWR7ey9lbmFibGV9fS8+IHt7bmFtZX19CgkJPC9sYWJlbD57eyNjb25maWd9fVsgPGEgZGF0YS1jb25maWc9Int7aWR9fSIgY2xhc3M9Imp4X2NvbmYgcHRyIj7phY3nva48L2E+IF17ey9jb25maWd9fQoJCTxiciAvPgoJCXt7L21vZHVsZXN9fQoJPC9kaXY+Cgk8YnIgLz4KCgk8IS0tIOaMiemSruWMuiAtLT4KCTxkaXYgY2xhc3M9InRleHQtY2VudGVyIj4KCQk8YSBjbGFzcz0idWlfYnRuIHVpX2J0bl9tIiBpZD0ianhfc2F2ZSI+PHNwYW4+PGVtPuWCqOWtmDwvZW0+PC9zcGFuPjwvYT4gJm5ic3A7CgkJPGEgY2xhc3M9InVpX2J0biB1aV9idG5fbSIgaWQ9Imp4X2Nsb3NlIj48c3Bhbj48ZW0+5pS+5byDPC9lbT48L3NwYW4+PC9hPgoJPC9kaXY+CjwvZGl2PgoqL30pLmV4dHJhY3QgKCk7CgogICAgICAgICAgICAgICAgcmV0dXJuIF9ydW4uYmluZCAoe30sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgJHZpZXcgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZXM6IFtdCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4IGluIG1vZHVsZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZHVsZXMuaGFzT3duUHJvcGVydHkoeCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0VuYWJsZSA9IGxNb2RzLmhhc093blByb3BlcnR5KHgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHZpZXcubW9kdWxlcy5wdXNoICh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogbW9kdWxlc1t4XS5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2M6IG1vZHVsZXNbeF0uZGVzYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmFibGU6IGlzRW5hYmxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZzogaXNFbmFibGUgJiYgISFtb2R1bGVzW3hdLl9jb25mCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgJHRwbCA9ICQoTXVzdGFjaGUucmVuZGVyICgkdGVtcGxhdGUsICR2aWV3KSk7CgogICAgICAgICAgICAgICAgICAgIHZhciAkd25kQ29uZmlnID0gJC5kaWFsb2cub3BlbiAoJHRwbCwgewogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+i0tOWQp+WKqeaJiyAtIOmFjee9rueql+WPoyAo5Yi35paw5ZCO55Sf5pWIKScsCiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjAwCiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICQoJy5qeF9jb25mJywgJHRwbCkuY2xpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9ICQodGhpcykuZGF0YSgnY29uZmlnJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsTW9kcy5oYXNPd25Qcm9wZXJ0eSh4KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9ydW4gKGxNb2RzW3hdLl9jb25mLmJpbmQgKGxNb2RzW3hdKSwgJ+aooee7hOmFjee9riBbJyArIGxNb2RzW3hdLm5hbWUgKyAnICgnICsgeCArICcpXScpOwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAkKCcjanhfc2F2ZScsICR0cGwpLmNsaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1N0YXR1cyA9IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAkKCcjanhfY29uZl9tb2R1bGVzPmxhYmVsPmlucHV0JywgJHRwbCkuZWFjaChmdW5jdGlvbiAoaSwgaW5wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTdGF0dXNbJChpbnApLmRhdGEoJ21vZHVsZScpXSA9IGlucC5jaGVja2VkID8gX19tb2RfZW5hYmxlIDogX19tb2RfZGlzYWJsZTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICRjb25mLnNldCAoJ21vZHVsZXMnLCBuZXdTdGF0dXMpOwogICAgICAgICAgICAgICAgICAgICAgICAkd25kQ29uZmlnLmNsb3NlICgpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICQoJyNqeF9jbG9zZScsICR0cGwpLmNsaWNrKCR3bmRDb25maWcuY2xvc2UuYmluZCgkd25kQ29uZmlnKSk7CiAgICAgICAgICAgICAgICB9LCAn5Yqp5omL6K6+5a6a55WM6Z2iJyk7CiAgICAgICAgICAgIH0pKCk7CgogICAgICAgICAgICAvLyDmnKrnmbvlvZXnlKjmiLflj6/ku6XpgJrov4cgR00g6I+c5Y2V5r+A5rS76YWN572u6aG5CiAgICAgICAgICAgIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQgKCfmoqblp6zotLTlkKfliqnmiYvmqKHlnZfphY3nva4nLCBfbWVudSk7CgogICAgICAgICAgICBpZiAodW5zYWZlV2luZG93Ll9fWVVNRV9ERUJVR19fKSB7CiAgICAgICAgICAgICAgICBHTV9yZWdpc3Rlck1lbnVDb21tYW5kICgn5omT5Y2w5qih57uE6YWN572uJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyAoJ+aipuWnrOaooee7hOmFjee9rjogJyk7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvICgkY29uZi5nZXQgKCdtb2R1bGVzJykpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9ydW4gKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBfY2FsbE1lbnUgPSBmdW5jdGlvbiAoJHBhcmVudCkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyAoJ+aIkOWKn+aNleaNieWIsOiPnOWNleWFg+e0oO+8jOS8oOmAkuiHs+Wbnuiwg+KApicpOwogICAgICAgICAgICAgICAgICAgIF9ydW4gKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRtZW51SXRlbSA9ICQoJzxsaT4nKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRtZW51TGluayA9ICQoJzxhPicgKS5hcHBlbmRUbyAoJG1lbnVJdGVtKS5hZGRDbGFzcygnangnKS50ZXh0KCfliqnmiYvorr7nva4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8kcGFyZW50LmZpbmQgKCcudV90Yl9wcm9maWxlJykuYmVmb3JlKCRtZW51SXRlbSk7CiAgICAgICAgICAgICAgICAgICAgICAgICRwYXJlbnQuZmluZCAoJy51X3RiX3Byb2ZpbGUnKS5wYXJlbnQoKS5wcmVwZW5kKCRtZW51SXRlbSk7CiAgICAgICAgICAgICAgICAgICAgICAgICRtZW51TGluay5jbGljayAoX21lbnUpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgJG1lbnVJdGVtID0gJCgnPGxpPicpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1lbnVMaW5rID0gJCgnPGE+JyApLmFwcGVuZFRvICgkbWVudUl0ZW0pLmFkZENsYXNzKCdqeCcpLnRleHQoJ+i0tOWQp+e+juWMlicpOwogICAgICAgICAgICAgICAgICAgICAgICAkKCcudV90Yl9wcm9maWxlJykuYmVmb3JlKCRtZW51SXRlbSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFHTV9nZXRWYWx1ZSgiamlueW9uZ3RpZWJhbWVpaHVhIikpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpcz0kcGFyZW50LmZpbmQoInVsPmxpIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXNbMV0uc3R5bGUuZGlzcGxheT1saXNbMl0uc3R5bGUuZGlzcGxheT1saXNbNl0uc3R5bGUuZGlzcGxheT1saXNbN10uc3R5bGUuZGlzcGxheT0ibm9uZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgJG1lbnVMaW5rLmNsaWNrIChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgR01fc2V0VmFsdWUoImppbnlvbmd0aWViYW1laWh1YSIsR01fZ2V0VmFsdWUoImppbnlvbmd0aWViYW1laWh1YSIpP2ZhbHNlOnRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0sICfoj5zljZXlj6zllKQnKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmFyIG1hID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIgKGZ1bmN0aW9uICgkcSkgewogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICQoJHEpLmVhY2goZnVuY3Rpb24gKGksICRldmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJGV2ZS5hZGRlZE5vZGVzKS5lYWNoKGZ1bmN0aW9uIChpLCAkZWxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRlbGUubm9kZVR5cGUgIT0gMyAmJiAkZWxlLmNsYXNzTmFtZSA9PSAndV9kZGwnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHtlbGU6ICQoJGVsZSksIG5hbWU6ICdzJ307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyLmVsZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWEuZGlzY29ubmVjdCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jYWxsTWVudSAoZXJyLmVsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF9tID0gJCgnLnVfc2V0dGluZz4udV9kZGwnKTsKICAgICAgICAgICAgICAgICAgICBpZiAoX20ubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9jYWxsTWVudSAoX20pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1hLm9ic2VydmUoJCgnLnVfc2V0dGluZycpWzBdLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJ0cmVlOiB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIDE1MDApOwogICAgICAgICAgICB9LCAn5o2V5o2J6K6+5a6aJyk7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nICgkKCdsaS51X3NldHRpbmcgLnVfdGJfcHJvZmlsZScpKTsKCiAgICAgICAgICAgIHZhciBsTW9kcyA9IHt9OwoKICAgICAgICAgICAgX3J1biAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgX2NzcyA9ICQoJzxzdHlsZT4nKS5hcHBlbmRUbyhkb2N1bWVudC5oZWFkKTsKICAgICAgICAgICAgICAgIF9jc3MuYXBwZW5kICgvKiBGaWxlOiB0aWViYS5jc3MgKi8KICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24gKCkgeyAvKgoucHVsbC1yaWdodAl7IGZsb2F0OiByaWdodAkJCX0KYS5qeCwgLnB0cgl7IGN1cnNvcjogcG9pbnRlcgkJfQoucGFkLWxlZnQJeyBwYWRkaW5nLWxlZnQ6IDAuNWVtCX0KCi5mbG9vci1zdHJpcGUgewoJYmFja2dyb3VuZC1pbWFnZToKCQlsaW5lYXItZ3JhZGllbnQoNDVkZWcscmdiYSgyNTUsMjU1LDI1NSwuMTUpIDI1JSwKCQl0cmFuc3BhcmVudCAyNSUsdHJhbnNwYXJlbnQgNTAlLHJnYmEoMjU1LDI1NSwyNTUsLjE1KSA1MCUsCgkJcmdiYSgyNTUsMjU1LDI1NSwwLjE1KSA3NSUsCgkJdHJhbnNwYXJlbnQgNzUlLCB0cmFuc3BhcmVudCk7CgoJYmFja2dyb3VuZC1jb2xvcjogI2Q5NTM0ZjsKCWJhY2tncm91bmQtc2l6ZTogNDBweCA0MHB4OwoJdGV4dC1hbGlnbjogY2VudGVyOwoJYm9yZGVyOiAxcHggc29saWQgI2NjYzsKCW1hcmdpbjogLTFweDtjb2xvcjogI2ZmZjsKCXRleHQtc2hhZG93OiAjMDAwIDAgMCAuNWVtOwoJcGFkZGluZzogLjVlbSAwCn0KCi5oaWRlIHsgZGlzcGxheTogbm9uZSB9Ci50ZXh0LXJlZCB7IGNvbG9yOiByZWQgfQoudGV4dC1jZW50ZXIgeyB0ZXh0LWFsaWduOiBjZW50ZXIgfQoudGV4dC1kaXNhYmxlZCB7IGNvbG9yOiAjNjY2OyB0ZXh0LWRlY29yYXRpb246IGxpbmUtdGhyb3VnaCB9CgoudXNlci1oaWRlLXBvc3QtYWN0aW9uID4gYS5qeC1wb3N0LWFjdGlvbiB7CglkaXNwbGF5OiBibG9jazsKCXBhZGRpbmc6IDNweCA1cHggNXB4OwoJY3Vyc29yOiBwb2ludGVyOwoJY29sb3I6ICMyMjI7Cn0KCi51c2VyLWhpZGUtcG9zdC1hY3Rpb24gYS5qeC1wb3N0LWFjdGlvbjpob3ZlciB7CgliYWNrZ3JvdW5kOiAjZjJmMmYyOwp9CgouanhfYXV0b2Zsb3cgewoJaGVpZ2h0OiAxMDAlOwoJb3ZlcmZsb3cteTogYXV0bzsKfQoqL30pLmV4dHJhY3QgKCkpOwogICAgICAgICAgICAgICAgX2Nzc0guaW5zZXJ0QWZ0ZXIoX2Nzcyk7CgogICAgICAgICAgICAgICAgLy8g6YWN572u6aG55pu05pawCiAgICAgICAgICAgICAgICBzd2l0Y2ggKCRjb25mLmdldCAoJ2NvbmZWZXInLCBbMF0pWzBdKSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGRpc2FibGVkTW9kcyA9ICRjb25mLmdldCAoJ21vZHVsZXMnLCBbXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkbW9kc0xpc3QgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgJGRpc2FibGVkTW9kcy5mb3JFYWNoIChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1vZHNMaXN0W2VdID0gX19tb2RfZGlzYWJsZTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICRjb25mLnNldCAoJ21vZHVsZXMnLCAkbW9kc0xpc3QpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAkY29uZi5zZXQgKCdjb25mVmVyJywgWzFdKTsKCiAgICAgICAgICAgICAgICB2YXIgJG1vZHMgPSAkY29uZi5nZXQgKCdtb2R1bGVzJywge30pOwoKICAgICAgICAgICAgICAgICQuZWFjaCAobW9kdWxlcywgZnVuY3Rpb24gKG1JZCwgZk1vZCkgewogICAgICAgICAgICAgICAgICAgIGlmICgkbW9kc1ttSWRdID09IF9fbW9kX2Rpc2FibGUKICAgICAgICAgICAgICAgICAgICAgICAgfHwgKCAoJG1vZHNbbUlkXSA9PSBfX21vZF9kZWZhdWx0IHx8ICEkbW9kcy5oYXNPd25Qcm9wZXJ0eShtSWQpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgZk1vZC5kZWYgPT09IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICApIHJldHVybiA7CgogICAgICAgICAgICAgICAgICAgIGxNb2RzW21JZF0gPSBmTW9kOwogICAgICAgICAgICAgICAgICAgIGxNb2RzW21JZF0uaWQgPSBtSWQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKGxNb2RzW21JZF0uX2luaXQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvICgn5Yid5aeL5YyW5qih57uEOiAlc1slc10nLCBtSWQsIGxNb2RzW21JZF0ubmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxNb2RzW21JZF0uX2luaXQuY2FsbCAobE1vZHNbbUlkXSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LCAnSW5pdC4gbW9kdWxlcycpOwoKICAgICAgICAgICAgdmFyIF9ldmVudCA9IGZ1bmN0aW9uIChmbG9vclR5cGUsIG90aGVySW5mbywgX3Byb2MpIHsKICAgICAgICAgICAgICAgIHZhciBmb29DQiA9IF9wcm9jIHx8ICdfcHJvYyc7CiAgICAgICAgICAgICAgICAkLmVhY2ggKGxNb2RzLCBmdW5jdGlvbiAobUlkLCBtKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFtW2Zvb0NCXSB8fCAhKG0uZmxhZyAmIGZsb29yVHlwZSkpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgICAgICAgICAgICAgX3J1biAobVtmb29DQl0uYmluZChtLCBmbG9vclR5cGUsIG90aGVySW5mbyksIG0ubmFtZSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHZhciBfcHJvY0x6bENvbnRhaW5lciA9IGZ1bmN0aW9uIChpLCB0YWlsZXIpIHsKICAgICAgICAgICAgICAgIHZhciAkdGFpbGVyID0gJCh0YWlsZXIpLAogICAgICAgICAgICAgICAgICAgIF9tYWluICAgPSAkdGFpbGVyLnBhcmVudHMoJy5sX3Bvc3QnKTsKCiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyAoJHRhaWxlciwgX21haW4pOwoKICAgICAgICAgICAgICAgIF9ldmVudCAoX190eXBlX2Zsb29yLCB7CiAgICAgICAgICAgICAgICAgICAgX21haW46ICAgIF9tYWluLAogICAgICAgICAgICAgICAgICAgIGZsb29yOiAgICBfbWFpbiwKICAgICAgICAgICAgICAgICAgICAvLyDjgIwn44CNaXMgbm90IHN0YW5kYXJkLCBjb252ZXJ0IHRvIOOAjCLjgI0gZmlyc3QuCiAgICAgICAgICAgICAgICAgICAgZmxvb3JOdW06IHBhcnNlSW50KCR0YWlsZXIuZ2V0RmllbGQoKS5mbG9vcl9udW0pLAogICAgICAgICAgICAgICAgICAgIHRhaWw6ICAgICAkKCcucF90YWlsJywgX21haW4pCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAvLyDlpITnkIbop6PmnpAgbHpsIOW4luWtkO+8iOKApgogICAgICAgICAgICAgICAgLy8gJHRhaWxlci5maW5kKCcubHpsX3NpbmdsZV9wb3N0JykuZWFjaChfcHJvY0x6bFBvc3QpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9tYWluOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdmFyIF9wcm9jVGhyZWFkTGlzdCA9IGZ1bmN0aW9uIChpLCB0aHJlYWRsaXN0KSB7CiAgICAgICAgICAgICAgICB2YXIgJHRocmVhZCA9ICQodGhyZWFkbGlzdCk7CiAgICAgICAgICAgICAgICBfZXZlbnQgKF9fdHlwZV9mb3J1bSwgewogICAgICAgICAgICAgICAgICAgIF9tYWluOiAgJHRocmVhZCwKICAgICAgICAgICAgICAgICAgICB0aHJlYWQ6ICR0aHJlYWQKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuICR0aHJlYWQ7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB2YXIgX3Byb2NMemxQb3N0ID0gZnVuY3Rpb24gKGksIGx6bFBvc3QpIHsKICAgICAgICAgICAgICAgIHZhciAkbHpsID0gJChsemxQb3N0KTsKICAgICAgICAgICAgICAgIF9ldmVudCAoX190eXBlX2x6bCwgewogICAgICAgICAgICAgICAgICAgIF9tYWluOiAgJGx6bCwKICAgICAgICAgICAgICAgICAgICBsemw6ICRsemwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuICRsemw7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBpZiAoaXNUaHJlYWQpIHsKICAgICAgICAgICAgICAgICQoJy5qX2x6bF9jb250YWluZXInKS5lYWNoKF9ydW4uYmluZCAoe30sIF9wcm9jTHpsQ29udGFpbmVyLCAn5Yid5aeL5YyW5biW5a2Q5pCc57SiJykpOwogICAgICAgICAgICAgICAgJCgnLmx6bF9zaW5nbGVfcG9zdCcpLmVhY2goX3J1bi5iaW5kICh7fSwgX3Byb2NMemxQb3N0LCAn5Yid5aeL5YyW5qW85Lit5qW85pCc57SiJykpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJCgnLmpfdGhyZWFkX2xpc3QnKS5lYWNoKF9ydW4uYmluZCAoe30sIF9wcm9jVGhyZWFkTGlzdCAgLCAn5Yid5aeL5YyW6LS05ZCn6aG15biW5a2Q5pCc57SiJykpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBtbyA9IG5ldyBNdXRhdGlvbk9ic2VydmVyIChmdW5jdGlvbiAoZXZlKSB7CiAgICAgICAgICAgICAgICBfcnVuIChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgJChldmUpLmVhY2goZnVuY3Rpb24gKGksIGV2ZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWV2ZS5hZGRlZE5vZGVzLmxlbmd0aCkgcmV0dXJuIDsKCiAgICAgICAgICAgICAgICAgICAgICAgICQoZXZlLmFkZGVkTm9kZXMpLmVhY2goZnVuY3Rpb24gKGksIGVsZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGV4dCBub2RlLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZS5ub2RlVHlwZSA9PSAzKSByZXR1cm4gOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkZWxlID0gJChlbGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90eXBlID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdG1wOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWNlei0tOWkhOeQhgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRlbGUuaGFzQ2xhc3MgKCdqX2x6bF9jb250YWluZXInKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIF90eXBlID0gX190eXBlX2Zsb29yOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0bXAgPSBfcHJvY0x6bENvbnRhaW5lciAoaSwgJGVsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRtcC5maW5kKCcubHpsX3NpbmdsZV9wb3N0JykuZWFjaChfcHJvY0x6bFBvc3QpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkZWxlLmhhc0NsYXNzICgnal90aHJlYWRfbGlzdCcpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g6LS05ZCn5Li76aG16Z2iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3Byb2NUaHJlYWRMaXN0IChpLCAkZWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJGVsZS5oYXNDbGFzcyAoJ2x6bF9zaW5nbGVfcG9zdCcpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5LuF6ZmQ57+76aG15pe26Kem5Y+RCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3Byb2NMemxQb3N0IChpLCAkZWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJGVsZS5oYXNDbGFzcyAoJ3VzZXItaGlkZS1wb3N0LWFjdGlvbicpICYmICEkZWxlLmhhc0NsYXNzKCdqeF9wb3N0JykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZWxlLmFkZENsYXNzKCdqeF9wb3N0Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2V2ZW50IChfX3R5cGVfcG9zdGFjdCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbWFpbjogJGVsZS5wYXJlbnRzKCcubF9wb3N0JyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9tZW51OiAkZWxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgJ19tZW51Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSwgJ+mhtemdouWFg+e0oOaPkuWFpScpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICQoZG9jdW1lbnQuYm9keSkub24gKCdjbGljaycsICcuangnLCBmdW5jdGlvbiAoZXZlKSB7CiAgICAgICAgICAgICAgICB2YXIgJGV2ZSAgPSAkKGV2ZS50YXJnZXQpOwogICAgICAgICAgICAgICAgdmFyICRkYXRhID0gJGV2ZS5kYXRhICgnangnKTsKICAgICAgICAgICAgICAgIGlmICghJGRhdGEgfHwgIWxNb2RzWyRkYXRhXSB8fCAhbE1vZHNbJGRhdGFdLl9jbGljaykgcmV0dXJuIDsKCiAgICAgICAgICAgICAgICBfcnVuLmNhbGwgKGxNb2RzWyRkYXRhXSwgbE1vZHNbJGRhdGFdLl9jbGljaywgJz4+IOWNleWHu+WKqeaJi+WKn+iDvTogJyArICRkYXRhLCAkZXZlLCAkZXZlLmRhdGEoJ2V2ZScpKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBtby5vYnNlcnZlKCQoJyNqX3BfcG9zdGxpc3QsI3RocmVhZF9saXN0JykuZ2V0KDApLCB7CiAgICAgICAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsCiAgICAgICAgICAgICAgICBzdWJ0cmVlOiB0cnVlCiAgICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICB9KSgpOwogICAgLy/nmb7luqbotLTlkKflm77niYfngrnlh7vmlL7lpKcgYnkgbGxpd2h4CiAgICAoZnVuY3Rpb24od2luZG93KSB7CiAgICAgICAgInVzZSBzdHJpY3QiOwogICAgICAgIC8vQ1NTCiAgICAgICAgdmFyIHBhcmVudEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgial9wX3Bvc3RsaXN0Iik7CiAgICAgICAgaWYoIXBhcmVudEVsZW1lbnQpcmV0dXJuOwogICAgICAgIEdNX2FkZFN0eWxlKCIuQkRFX0ltYWdlLC5qX3VzZXJfc2lnbntjdXJzb3I6YWxpYXM7fSNUaWVfZW5sYXJnZUltYWdlX3BhcmVudERJVntwb3NpdGlvbjpmaXhlZDt6LWluZGV4OjEwMDU7dG9wOjA7bGVmdDowO30uVGllX2VubGFyZ2VJbWFnZXtwb3NpdGlvbjphYnNvbHV0ZTtib3gtc2hhZG93OjFweCAxcHggMTBweCAjMDAwO2N1cnNvcjptb3ZlO30uVGllX2VubGFyZ2VJbWFnZTpob3Zlcnt6LWluZGV4OjEwMDY7fSNUaWVfc2V0VmFsdWVfRElWe3Bvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO3otaW5kZXg6OTk5OTtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC41KTt9LlRpZV9kZWZpbmVkRElWe3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6MTAwMDA7YmFja2dyb3VuZDojZmZmO3RvcDo1MCU7bGVmdDo1MCU7dHJhbnNmb3JtOnRyYW5zbGF0ZSgtNTAlLC01MCUpO30uVGllX2RlZmluZWRESVZfdGl0bGV7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2YyZjJmNTtsaW5lLWhlaWdodDo0MHB4O2ZvbnQtc2l6ZToxNXB4O2ZvbnQtd2VpZ2h0OjcwMDtwYWRkaW5nOjAgMCAwIDE1cHg7fS5UaWVfZGVmaW5lZERJVl9wb2ludHtwYWRkaW5nOjIwcHggNDBweDt9LlRpZV9kZWZpbmVkRElWX2dyb3VwU3VidGl0bGV7Zm9udC13ZWlnaHQ6Ym9sZDt9LlRpZV9kZWZpbmVkRElWX2NvbmZpZ0l0ZW17bGluZS1oZWlnaHQ6MzBweDttYXJnaW46MCAyMHB4fS5UaWVfZGVmaW5lZERJVl9jb25maWdJdGVtIHNlbGVjdHttYXJnaW46MC41ZW19LlRpZV9kZWZpbmVkRElWX2NvbmZpZ0l0ZW0gYnIrbGFiZWx7bWFyZ2luLWxlZnQ6M2VtfS5UaWVfZGVmaW5lZERJVl9jb25maWdJdGVtIGlucHV0e3ZlcnRpY2FsLWFsaWduOm1pZGRsZTttYXJnaW4tcmlnaHQ6MC41ZW19I1RpZV9kZWJ1Z0NvbmZpZ3ttYXJnaW46MC41ZW19LlRpZV9kZWJ1Z0NvbmZpZ19pY29ue3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6aW5saW5lLWJsb2NrO3RvcDo0cHg7d2lkdGg6MTZweDtoZWlnaHQ6MTZweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0zNTBweCAtMTAwcHg7YmFja2dyb3VuZC1pbWFnZTp1cmwoJ2h0dHBzOi8vaW1nLnQuc2luYWpzLmNuL3Q2L3N0eWxlL2ltYWdlcy9jb21tb24vaWNvbi5wbmcnKTtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7fS5UaWVfYnViYmxlX0RJVntwb3NpdGlvbjphYnNvbHV0ZTt2aXNpYmlsaXR5OmhpZGRlbjttYXgtd2lkdGg6MjgwcHg7dG9wOjIwJX0uVGllX2RlZmluZWRESVZfY29uZmlnSXRlbSBsYWJlbDpob3ZlcisuVGllX2J1YmJsZV9ESVZ7dmlzaWJpbGl0eTp2aXNpYmxlfS5UaWVfYnViYmxlX2NvbnRlbnR7cG9zaXRpb246cmVsYXRpdmU7YmFja2dyb3VuZDojZmZmO3BhZGRpbmc6NnB4IDEzcHggNnB4IDE2cHg7Ym9yZGVyOjFweCBzb2xpZCAjY2NjO2JvcmRlci1yYWRpdXM6M3B4O30uVGllX2J1YmJsZV9tYWluVHh0e2xpbmUtaGVpZ2h0OjE4cHg7fS5UaWVfYnViYmxlX2Jvcntwb3NpdGlvbjphYnNvbHV0ZTtvdmVyZmxvdzpoaWRkZW47Ym90dG9tOi0xNHB4O2xpbmUtaGVpZ2h0OjE0cHg7fS5UaWVfYnViYmxlX2xpbmV7Ym9yZGVyLWNvbG9yOiNjY2MgdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQ7fS5UaWVfYnViYmxlX2Jye21hcmdpbjotMXB4IDAgMCAtMTRweDtib3JkZXItY29sb3I6I2ZmZiB0cmFuc3BhcmVudCB0cmFuc3BhcmVudCB0cmFuc3BhcmVudDt9LlRpZV9idWJibGVfYm9yIGksLlRpZV9idWJibGVfYm9yIGVte2Rpc3BsYXk6aW5saW5lLWJsb2NrO3dpZHRoOjA7aGVpZ2h0OjA7Ym9yZGVyLXdpZHRoOjdweDtib3JkZXItc3R5bGU6c29saWQ7dmVydGljYWwtYWxpZ246dG9wO292ZXJmbG93OmhpZGRlbjt9LlRpZV9kZWZpbmVkRElWX1NhdmVCdG57YmFja2dyb3VuZC1jb2xvcjojZjJmMmY1O3RleHQtYWxpZ246Y2VudGVyO3BhZGRpbmc6MTBweCAwO30uVGllX1NhdmVCdG5fYXtiYWNrZ3JvdW5kOiNmZjgxNDA7Y29sb3I6I2ZmZjtmb250LXNpemU6MTVweDtkaXNwbGF5OmlubGluZS1ibG9jaztwYWRkaW5nOjAgMTVweDtsaW5lLWhlaWdodDozNXB4O2JvcmRlci1yYWRpdXM6M3B4O30uVGllX1NhdmVCdG5fYTpob3ZlcntiYWNrZ3JvdW5kOiNmNzY3MWR9Iik7CiAgICAgICAgLy/mlbDmja7nvJPlrZgKICAgICAgICB2YXIgaW1hZ2VUYXJnZXQsaW1hZ2VNb3VzZSxpbWFnZUNvdW50LGltYWdlQnV0dG9uLHdpblJlc2l6ZSxzY3JpcHREZWJ1Zyxsb2cgPSBmdW5jdGlvbigpe30sCiAgICAgICAgICAgIG1vdXNlV2hlZWwgPSAvRmlyZWZveC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KT8iRE9NTW91c2VTY3JvbGwiOiJtb3VzZXdoZWVsIiwKICAgICAgICAgICAgcHJvdG9jb2wgPSB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2x8fCJodHRwcyIsCiAgICAgICAgICAgIGRvYyA9IHdpbmRvdy5kb2N1bWVudCwKICAgICAgICAgICAgZG9jSGVpZ2h0ID0gZG9jLmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQtNiwKICAgICAgICAgICAgZG9jV2lkdGggPSBkb2MuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLTYsCiAgICAgICAgICAgIGRlZmluZWRFdmVudCA9IEdNX2dldFZhbHVlKCJkZWZpbmVkRXZlbnQiLCJjbGljayxjbGljaywxLDAsMSIpLnNwbGl0KCIsIiksCiAgICAgICAgICAgIHJlcGFpckRlZmluZWRFdmVudCA9IEdNX2dldFZhbHVlKCJyZXBhaXJEZWZpbmVkRXZlbnQiLGZhbHNlKSwKICAgICAgICAgICAgaW1hZ2VFdmVudCA9IHsKICAgICAgICAgICAgICAgIGluaXQ6ZnVuY3Rpb24oZSl7IC8v5Li75LqL5Lu2CiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0LGltYWdlLGltYWdlU3JjOwogICAgICAgICAgICAgICAgICAgIGlmKGUuYnV0dG9uPT09MCYmKHRhcmdldC5jbGFzc05hbWU9PT0iQkRFX0ltYWdlInx8dGFyZ2V0LmNsYXNzTmFtZT09PSJqX3VzZXJfc2lnbiIpKXsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nKCLlm77niYfliJvlu7oiLCLlvIDlp4siKTsKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VTcmMgPSB0YXJnZXQuc3JjLm1hdGNoKC8oW2EtejAtOV0rXC5bYS16QS1aXXszLDR9KSg/Olw/dj10YnMpPyQvKTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nKCLlm77niYflnLDlnYDojrflj5YiLGZ1bmN0aW9uKCl7aWYoaW1hZ2VTcmMpcmV0dXJuICLmiJDlip8iO2Vsc2UgcmV0dXJuICLlpLHotKUiO30sdGFyZ2V0LnNyYyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFpbWFnZVNyYykgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZSA9IGRvYy5jcmVhdGVFbGVtZW50KCJpbWciKTsKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UuY2xhc3NMaXN0LmFkZCgiVGllX2VubGFyZ2VJbWFnZSIpOwogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZS5zcmMgPSBwcm90b2NvbCArICIvL2ltZ3NyYy5iYWlkdS5jb20vZm9ydW0vcGljL2l0ZW0vIiArIGltYWdlU3JjWzFdOwogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZS5vbmVycm9yID0gZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHByb3RvY29sPT09Imh0dHBzOiIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZygi5Zu+54mH6K+35rGCIiwiaHR0cHPovazlkJFodHRwIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvdG9jb2wgPSAiaHR0cDoiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3JjID0gImh0dHA6Ly9pbWdzcmMuYmFpZHUuY29tL2ZvcnVtL3BpYy9pdGVtLyIgKyBpbWFnZVNyY1sxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25lcnJvciA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbmxvYWQgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlU3JjID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2coIuWbvueJh+ivt+axgiIsIuWksei0pSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLlm77niYfojrflj5blpLHotKVcblxu5aaC5aSa5qyh6I635Y+W5aSx6LSlXG7or7flnKjorr7nva7ph4zli77pgInigJzosIPor5XohJrmnKzigJ3miZPljbDohJrmnKzml6Xlv5flubbmiKrlm77lj43ppojnu5nkvZzogIXvvIzku6Xkvr/mm7Tlpb3nmoTop6PlhrPpl67popgiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2Uub25sb2FkID0gZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZygi5Zu+54mH5Yib5bu6Iiwi6L+b6KGM5LitIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcyx3aWR0aCA9IHRhcmdldC53aWR0aCxoZWlnaHQgPSB0YXJnZXQuaGVpZ2h0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdib29sZWFuID0gd2lkdGg+ZG9jV2lkdGgsSGJvb2xlYW4gPSBoZWlnaHQ+ZG9jSGVpZ2h0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFggPSA2LFkgPSA2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Lm9uZXJyb3IgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Lm9ubG9hZCA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZVNyYyA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihIYm9vbGVhbiYmIVdib29sZWFuKVggPSAoZG9jV2lkdGgtd2lkdGgpLzI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKCFIYm9vbGVhbiYmIVdib29sZWFuKXtYID0gKGRvY1dpZHRoLXdpZHRoKS8yO1kgPSAoZG9jSGVpZ2h0LWhlaWdodCkvMjt9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKCFIYm9vbGVhbiYmV2Jvb2xlYW4pWSA9IChkb2NIZWlnaHQtaGVpZ2h0KS8yOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmltYWdlRGF0YSA9IHt3aWR0aDp3aWR0aCxoZWlnaHQ6aGVpZ2h0LFg6WCxZOll9OyAvL+e8k+WtmOW9k+WJjeWbvueJh+aVsOaNrgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLnRyYW5zZm9ybSA9ICJ0cmFuc2xhdGUoIitYKyJweCwiK1krInB4KSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRESVYuYXBwZW5kQ2hpbGQodGFyZ2V0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZygi5Zu+54mH5Yib5bu6IixmdW5jdGlvbigpe3RhcmdldC5pZCA9IERhdGUubm93KCk7aWYoZG9jLmdldEVsZW1lbnRCeUlkKHRhcmdldC5pZCkpcmV0dXJuICLmiJDlip8iO2Vsc2UgcmV0dXJuICLlpLHotKUiO30sdGFyZ2V0LmltYWdlRGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgU3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgIGlmKGUuYnV0dG9uPT09MCYmZS50YXJnZXQuY2xhc3NOYW1lPT09IkJERV9JbWFnZSIpewogICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOyAvL+mYu+atouWGkuazoe+8jOmYu+atouWbvueJh+WOn+S6i+S7tgogICAgICAgICAgICAgICAgICAgICAgICBsb2coIumYu+atoui0tOWQp+WbvueJh+WOn+S6i+S7tiIsIuW3suaJp+ihjCIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBEb3duOmZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldCxpbWFnZURhdGEgPSB0YXJnZXQuaW1hZ2VEYXRhOwogICAgICAgICAgICAgICAgICAgIGltYWdlVGFyZ2V0ID0gdGFyZ2V0OwogICAgICAgICAgICAgICAgICAgIGxvZygi6byg5qCHZG93buS6i+S7tiIsZnVuY3Rpb24oKXtpZighdGFyZ2V0LmlkKXRhcmdldC5pZCA9IERhdGUubm93KCk7cmV0dXJuICLlvIDlp4siO30pOwogICAgICAgICAgICAgICAgICAgIGlmIChlLmJ1dHRvbiE9PTApcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgIGltYWdlTW91c2UgPSBbZS5jbGllbnRYLGUuY2xpZW50WV07CiAgICAgICAgICAgICAgICAgICAgaW1hZ2VDb3VudCA9IFtpbWFnZURhdGEuWC1pbWFnZU1vdXNlWzBdLGltYWdlRGF0YS5ZLWltYWdlTW91c2VbMV0sNi1pbWFnZURhdGEud2lkdGgsNi1pbWFnZURhdGEuaGVpZ2h0XTsgLy/lm77niYflrr3pq5jnmoTlgY/np7vph4/vvIzlm77niYflt6blj7PovrnnlYzpooTnlZnph48KICAgICAgICAgICAgICAgICAgICBpbWFnZUJ1dHRvbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsaW1hZ2VFdmVudC5Nb3ZlKTsKICAgICAgICAgICAgICAgICAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsaW1hZ2VFdmVudC5VcCk7CiAgICAgICAgICAgICAgICAgICAgbG9nKCLpvKDmoIdkb3du5LqL5Lu2Iiwi57uT5p2fIik7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgTW92ZTpmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICBsb2coIum8oOagh21vdmXkuovku7YiLCLlvIDlp4siKTsKICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gaW1hZ2VUYXJnZXQsCiAgICAgICAgICAgICAgICAgICAgICAgIFggPSBlLmNsaWVudFgraW1hZ2VDb3VudFswXSwKICAgICAgICAgICAgICAgICAgICAgICAgWSA9IGUuY2xpZW50WStpbWFnZUNvdW50WzFdOwogICAgICAgICAgICAgICAgICAgIGltYWdlQnV0dG9uID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgbG9nKCLpvKDmoIdtb3Zl5LqL5Lu2Iiwi6L+b6KGM5LitIiwiWDoiK1grIlk6IitZKTsKICAgICAgICAgICAgICAgICAgICBpZihYPGltYWdlQ291bnRbMl0peyAvL+W3pui+ueeVjAogICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc3R5bGUudHJhbnNmb3JtID0gInRyYW5zbGF0ZSgiK2ltYWdlQ291bnRbMl0rInB4LCIrWSsicHgpIjsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZihYPmRvY1dpZHRoKXsgLy/lj7PovrnnlYwKICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLnRyYW5zZm9ybSA9ICJ0cmFuc2xhdGUoIitkb2NXaWR0aCsicHgsIitZKyJweCkiOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKFk8aW1hZ2VDb3VudFszXSl7IC8v5LiK6L6555WMCiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5zdHlsZS50cmFuc2Zvcm0gPSAidHJhbnNsYXRlKCIrWCsicHgsIitpbWFnZUNvdW50WzNdKyJweCkiOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKFk+ZG9jSGVpZ2h0KXsgLy/kuIvovrnnlYwKICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLnRyYW5zZm9ybSA9ICJ0cmFuc2xhdGUoIitYKyJweCwiK2RvY0hlaWdodCsicHgpIjsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc3R5bGUudHJhbnNmb3JtID0gInRyYW5zbGF0ZSgiK1grInB4LCIrWSsicHgpIjsKICAgICAgICAgICAgICAgICAgICBsb2coIum8oOagh21vdmXkuovku7YiLCLnu5PmnZ8iLHRhcmdldC5zdHlsZS50cmFuc2Zvcm0pOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFVwOmZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgIGxvZygi6byg5qCHdXDkuovku7YiLCLlvIDlp4siKTsKICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gaW1hZ2VUYXJnZXQsUmVnRXg7CiAgICAgICAgICAgICAgICAgICAgaWYocmVwYWlyRGVmaW5lZEV2ZW50JiZlLmNsaWVudFgtaW1hZ2VNb3VzZVswXTw9MSYmZS5jbGllbnRZLWltYWdlTW91c2VbMV08PTEpeyAvL+WwneivleS/ruWkjeWFs+mXreWbvueJh+WKn+iDvQogICAgICAgICAgICAgICAgICAgICAgICBsb2coIuWwneivleS/ruWkjeWFs+mXreWbvueJh+WKn+iDvSIsIuW3suaJp+ihjCIpOwogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZUJ1dHRvbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoc2NyaXB0RGVidWcmJiFpbWFnZUJ1dHRvbiYmZS5jbGllbnRYLWltYWdlTW91c2VbMF09PT0wJiZlLmNsaWVudFktaW1hZ2VNb3VzZVsxXT09PTApewogICAgICAgICAgICAgICAgICAgICAgICBsb2coIum8oOagh2NsaWNr5LqL5Lu25Yik5patIiwiXG7kuIAu5pON5L2c5pe26aG16Z2i5LiN5Zyo5r+A5rS754q25oCB44CC6K+35L+d6K+B5rWP6KeI5Zmo5q2j5Zyo6KKr5pON5L2c77yM5Zyo5omn6KGM5LiA5qyhXG7kuowu5YWz6Zet5Zu+54mH5Yqf6IO95Y+v6IO95o2f5Z2P77yM5bu66K6u5L+u5aSNIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKCFpbWFnZUJ1dHRvbil7CiAgICAgICAgICAgICAgICAgICAgICAgIFJlZ0V4ID0gdGFyZ2V0LnN0eWxlLnRyYW5zZm9ybS5tYXRjaCgvWy0wLTkuXSsvZyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5pbWFnZURhdGEuWCA9IHBhcnNlRmxvYXQoUmVnRXhbMF0pOwogICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuaW1hZ2VEYXRhLlkgPSBwYXJzZUZsb2F0KFJlZ0V4WzFdKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaW1hZ2VUYXJnZXQgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIGltYWdlTW91c2UgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIGltYWdlQ291bnQgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLGltYWdlRXZlbnQuTW92ZSk7CiAgICAgICAgICAgICAgICAgICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLGltYWdlRXZlbnQuVXApOwogICAgICAgICAgICAgICAgICAgIGxvZygi6byg5qCHdXDkuovku7YiLCLnu5PmnZ8iLGltYWdlQnV0dG9uKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBDbG9zZTpmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICBsb2coIum8oOagh2NsaWNr5LqL5Lu2Iiwi5byA5aeLIik7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0OwogICAgICAgICAgICAgICAgICAgIGlmKGltYWdlQnV0dG9uKXsKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VCdXR0b24gPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGFyZ2V0LmltYWdlRGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50RElWLnJlbW92ZUNoaWxkKHRhcmdldCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZygi6byg5qCHY2xpY2vkuovku7YiLGZ1bmN0aW9uKCl7aWYoIWRvYy5nZXRFbGVtZW50QnlJZCh0YXJnZXQuaWQpKXJldHVybiAi5oiQ5YqfIjtlbHNlIHJldHVybiAi5aSx6LSlIjt9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgV2hlZWw6ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldD1lLnRhcmdldCxpbWFnZURhdGEgPSB0YXJnZXQuaW1hZ2VEYXRhLAogICAgICAgICAgICAgICAgICAgICAgICB3aGVlbEtleSA9IGRlZmluZWRFdmVudFszXSwKICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGggPSBpbWFnZURhdGEud2lkdGgsaGVpZ2h0ID0gaW1hZ2VEYXRhLmhlaWdodCwKICAgICAgICAgICAgICAgICAgICAgICAgV2Jvb2xlYW4gPSB3aWR0aD5kb2NXaWR0aCxIYm9vbGVhbiA9IGhlaWdodD5kb2NIZWlnaHQsCiAgICAgICAgICAgICAgICAgICAgICAgIHdoZWVsWFk7CiAgICAgICAgICAgICAgICAgICAgbG9nKCLpvKDmoId3aGVlbOS6i+S7tiIsIuW8gOWniyIsaW1hZ2VEYXRhKTsKICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICBpZih3aGVlbEtleSE9PSIwIil7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKChlLmN0cmxLZXkmJndoZWVsS2V5PT09IjEiKXx8KGUuYWx0S2V5JiZ3aGVlbEtleT09PSIyIil8fChlLnNoaWZ0S2V5JiZ3aGVlbEtleT09PSIzIikpeyAvL+WIpOaWreWbvueJh+e8qeaUvueahOe7hOWQiOmUrgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nKCLpvKDmoId3aGVlbOe8qeaUvuS6i+S7tiIsIuW8gOWniyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVYID0gZS5jbGllbnRYLGVZID0gZS5jbGllbnRZLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhdGlvWCA9IChlWC1pbWFnZURhdGEuWCkvd2lkdGgscmF0aW9ZID0gKGVZLWltYWdlRGF0YS5ZKS9oZWlnaHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hlZWxSYXRpbyA9IHdpZHRoKyhlLndoZWVsRGVsdGF8fC1lLmRldGFpbCo0MCkqZGVmaW5lZEV2ZW50WzRdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VEYXRhLndpZHRoID0gd2hlZWxSYXRpbzwxNTA/MTUwOndoZWVsUmF0aW87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZURhdGEuaGVpZ2h0ID0gaW1hZ2VEYXRhLndpZHRoKmhlaWdodC93aWR0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlRGF0YS5YID0gZVgtKGltYWdlRGF0YS53aWR0aCpyYXRpb1gpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VEYXRhLlkgPSBlWS0oaW1hZ2VEYXRhLmhlaWdodCpyYXRpb1kpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nKCLpvKDmoId3aGVlbOe8qeaUvuS6i+S7tiIsIui/m+ihjOS4rSIsaW1hZ2VEYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC53aWR0aCA9IGltYWdlRGF0YS53aWR0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5zdHlsZS50cmFuc2Zvcm0gPSAidHJhbnNsYXRlKCIraW1hZ2VEYXRhLlgrInB4LCIraW1hZ2VEYXRhLlkrInB4KSI7IC8v5Z+65LqO6byg5qCH5L2N572u55qE57yp5pS+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2coIum8oOagh3doZWVs57yp5pS+5LqL5Lu2Iiwi57uT5p2fIix0YXJnZXQuc3R5bGUudHJhbnNmb3JtKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZighSGJvb2xlYW4mJiFXYm9vbGVhbil7bG9nKCLpvKDmoId3aGVlbOa7muWKqOS6i+S7tiIsIuWbvueJh+Wwj+S6jueql+WPoyIpO3JldHVybiBmYWxzZTt9CiAgICAgICAgICAgICAgICAgICAgaWYoSGJvb2xlYW4pewogICAgICAgICAgICAgICAgICAgICAgICB3aGVlbFhZID0gaW1hZ2VEYXRhLlkrKC1lLndoZWVsRGVsdGF8fGUuZGV0YWlsKjQwKSpkZWZpbmVkRXZlbnRbMl07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHdoZWVsWFk+MHx8d2hlZWxYWTxkb2NIZWlnaHQtaGVpZ2h0KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoZWVsWFkgPSB3aGVlbFhZPjA/Njpkb2NIZWlnaHQtaGVpZ2h0OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlRGF0YS5ZID0gd2hlZWxYWTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nKCLpvKDmoId3aGVlbOWeguebtOa7muWKqOS6i+S7tiIsIui/m+ihjOS4rSIsd2hlZWxYWSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5zdHlsZS50cmFuc2Zvcm0gPSAidHJhbnNsYXRlKCIraW1hZ2VEYXRhLlgrInB4LCIrd2hlZWxYWSsicHgpIjsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nKCLpvKDmoId3aGVlbOWeguebtOa7muWKqOS6i+S7tiIsIue7k+adnyIsdGFyZ2V0LnN0eWxlLnRyYW5zZm9ybSk7CiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoV2Jvb2xlYW4pewogICAgICAgICAgICAgICAgICAgICAgICB3aGVlbFhZID0gaW1hZ2VEYXRhLlgrKC1lLndoZWVsRGVsdGF8fGUuZGV0YWlsKjQwKSpkZWZpbmVkRXZlbnRbMl07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHdoZWVsWFk+MHx8d2hlZWxYWTxkb2NXaWR0aC13aWR0aCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGVlbFhZID0gd2hlZWxYWT4wPzY6ZG9jV2lkdGgtd2lkdGg7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VEYXRhLlggPSB3aGVlbFhZOwogICAgICAgICAgICAgICAgICAgICAgICBsb2coIum8oOagh3doZWVs5rC05bmz5rua5Yqo5LqL5Lu2Iiwi6L+b6KGM5LitIix3aGVlbFhZKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLnRyYW5zZm9ybSA9ICJ0cmFuc2xhdGUoIit3aGVlbFhZKyJweCwiK2ltYWdlRGF0YS5ZKyJweCkiOwogICAgICAgICAgICAgICAgICAgICAgICBsb2coIum8oOagh3doZWVs5rC05bmz5rua5Yqo5LqL5Lu2Iiwi57uT5p2fIix0YXJnZXQuc3R5bGUudHJhbnNmb3JtKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgLy/liJvlu7rniLZESVYKICAgICAgICB2YXIgcGFyZW50RElWID0gZG9jLmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgIHBhcmVudERJVi5pZCA9ICJUaWVfZW5sYXJnZUltYWdlX3BhcmVudERJViI7CiAgICAgICAgZG9jLmJvZHkuYXBwZW5kQ2hpbGQocGFyZW50RElWKTsKICAgICAgICAvL+S6i+S7tuWnlOaJmAogICAgICAgIHBhcmVudEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLGltYWdlRXZlbnQuU3RvcFByb3BhZ2F0aW9uLHRydWUpOwogICAgICAgIHBhcmVudEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihkZWZpbmVkRXZlbnRbMF0saW1hZ2VFdmVudC5pbml0LHRydWUpOwogICAgICAgIHBhcmVudERJVi5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLGltYWdlRXZlbnQuRG93bik7CiAgICAgICAgcGFyZW50RElWLmFkZEV2ZW50TGlzdGVuZXIoZGVmaW5lZEV2ZW50WzFdLGltYWdlRXZlbnQuQ2xvc2UpOwogICAgICAgIHBhcmVudERJVi5hZGRFdmVudExpc3RlbmVyKG1vdXNlV2hlZWwsaW1hZ2VFdmVudC5XaGVlbCk7CiAgICAgICAgLy/ph4rmlL7nvJPlrZgKICAgICAgICBwYXJlbnRFbGVtZW50PW51bGw7CiAgICAgICAgLy/oh6rlrprkuYnorr7nva4KICAgICAgICB2YXIgdXNlckV2ZW50ID0gewogICAgICAgICAgICBpbml0OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZSgpOwogICAgICAgICAgICAgICAgdGhpcy5FdmVudCgpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjcmVhdGU6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHZhciBkZWZpbmVkRElWID0gZG9jLmNyZWF0ZUVsZW1lbnQoImRpdiIpOyAvL+WIm+W7uuiHquWumuS5iURJVuahhuaetgogICAgICAgICAgICAgICAgZGVmaW5lZERJVi5pZCA9ICJUaWVfc2V0VmFsdWVfRElWIjsKICAgICAgICAgICAgICAgIGRlZmluZWRESVYuaW5uZXJIVE1MID0gIjxkaXYgY2xhc3M9J1RpZV9kZWZpbmVkRElWJz48ZGl2IGNsYXNzPSdUaWVfZGVmaW5lZERJVl90aXRsZSc+6Ieq5a6a5LmJ6K6+572uPC9kaXY+PGRpdj48ZGl2IGNsYXNzPSdUaWVfZGVmaW5lZERJVl9wb2ludCc+PGRpdiBjbGFzcz0nVGllX2RlZmluZWRESVZfZ3JvdXBTdWJ0aXRsZSc+6K+35L+d6K+B6byg5qCH5Zyo5Zu+54mH5LiK6L+b6KGM5pON5L2cPC9kaXY+PGRpdiBjbGFzcz0nVGllX2RlZmluZWRESVZfY29uZmlnSXRlbSc+6buY6K6k5pSv5oyB6byg5qCH5bem6ZSu5ouW5ou95Zu+54mHPC9kaXY+PGRpdiBjbGFzcz0nVGllX2RlZmluZWRESVZfY29uZmlnSXRlbSc+5p+l55yL5Zu+54mHPHNlbGVjdCBuYW1lPSdUaWVfc2V0VmFsdWUnPjxvcHRpb24gdmFsdWU9J2NsaWNrJz7ljZXlh7s8L29wdGlvbj48b3B0aW9uIHZhbHVlPSdkYmxjbGljayc+5Y+M5Ye7PC9vcHRpb24+PC9zZWxlY3Q+PC9kaXY+PGRpdiBjbGFzcz0nVGllX2RlZmluZWRESVZfY29uZmlnSXRlbSc+5YWz6Zet5Zu+54mHPHNlbGVjdCBuYW1lPSdUaWVfc2V0VmFsdWUnPjxvcHRpb24gdmFsdWU9J2NsaWNrJz7ljZXlh7s8L29wdGlvbj48b3B0aW9uIHZhbHVlPSdkYmxjbGljayc+5Y+M5Ye7PC9vcHRpb24+PC9zZWxlY3Q+PGJyPjxsYWJlbD48aW5wdXQgaWQ9J1RpZV9yZXBhaXJWYWx1ZScgdHlwZT0nY2hlY2tib3gnPuWwneivleS/ruWkjeWFs+mXreWbvueJh+WKn+iDvTwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz0nVGllX2RlZmluZWRESVZfY29uZmlnSXRlbSc+5rua5Yqo5Zu+54mHPHNlbGVjdCBuYW1lPSdUaWVfc2V0VmFsdWUnPjxvcHRpb24gdmFsdWU9JzEnPua7mui9ruWQkeS4iu+8jOS4iuenuy/lt6bnp7s8L29wdGlvbj48b3B0aW9uIHZhbHVlPSctMSc+5rua6L2u5ZCR5LiL77yM5LiK56e7L+W3puenuzwvb3B0aW9uPjwvc2VsZWN0PjwvZGl2PjxkaXYgY2xhc3M9J1RpZV9kZWZpbmVkRElWX2NvbmZpZ0l0ZW0nPue8qeaUvuWbvueJhzxzZWxlY3QgbmFtZT0nVGllX3NldFZhbHVlJz48b3B0aW9uIHZhbHVlPScwJz7lhbPpl608L29wdGlvbj48b3B0aW9uIHZhbHVlPScxJz5DdHJsPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0nMic+QWx0PC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0nMyc+U2hpZnQ8L29wdGlvbj48L3NlbGVjdD4rPHNlbGVjdCBuYW1lPSdUaWVfc2V0VmFsdWUnPjxvcHRpb24gdmFsdWU9JzEnPua7mui9ruWQkeS4iuaUvuWkpzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Jy0xJz7mu5rova7lkJHkuIvmlL7lpKc8L29wdGlvbj48L3NlbGVjdD48L2Rpdj48ZGl2IGNsYXNzPSdUaWVfZGVmaW5lZERJVl9jb25maWdJdGVtJz7osIPor5XohJrmnKw8bGFiZWw+PGlucHV0IGlkPSdUaWVfZGVidWdDb25maWcnIHR5cGU9J2NoZWNrYm94Jz48aSBjbGFzcz0nVGllX2RlYnVnQ29uZmlnX2ljb24nPjwvaT48L2xhYmVsPjxkaXYgY2xhc3M9J1RpZV9idWJibGVfRElWJz48ZGl2IGNsYXNzPSdUaWVfYnViYmxlX2NvbnRlbnQnPjxkaXYgY2xhc3M9J1RpZV9idWJibGVfbWFpblR4dCc+5aaC5p6c5oKo55qE6ISa5pys5Ye6546w6Zeu6aKY77yM5oKo5Y+v5Lul5omT5byA6LCD6K+V5Yqf6IO944CCPHN0cm9uZz7lnKjpobXpnaLov5vooYzlubPluLjnmoTlm77niYfmk43kvZzvvIzlsIbmk43kvZzov4flkI7lnKjmtY/op4jlmajmjqfliLblj7DvvIjlv6vmjbfplK7vvJpGMTLvvInovpPlh7rnmoTohJrmnKzml6Xlv5fmiKrlm77lj43ppojnu5nkvZzogIU8L3N0cm9uZz7vvIzku6Xkvr/mm7Tlpb3nmoTop6PlhrPpl67popjjgII8YnI+5rOo5oSP77yMPHN0cm9uZz7osIPor5Xlip/og73miZPlvIDljbPnlJ/mlYjjgILlubbkuJTlj6rlnKjlvZPliY3pobXpnaLnlJ/mlYjkuIDmrKHvvIzliLfmlrDmiJblhbPpl63pobXpnaLpg73kvJrlj5bmtojosIPor5Xlip/og73vvIzpnIDph43mlrDmiZPlvIA8L3N0cm9uZz7jgII8YnI+5omT5byA6LCD6K+V5Yqf6IO95Y+v6IO95Lya5aKe5Yqg5YaF5a2Y5Y2g55So44CB6ZmN5L2O572R6aG155qE5Y+N5bqU6YCf5bqm55Sa6Iez5a+86Ie05rWP6KeI5Y2h6aG/44CC5LuF5L6b57u05oqk5L2/55So77yM5LiN5bu66K6u5LiA6Iis55So5oi35omT5byA6LCD6K+V5Yqf6IO944CCPC9kaXY+PGRpdj48c3BhbiBjbGFzcz0nVGllX2J1YmJsZV9ib3InPjxpIGNsYXNzPSdUaWVfYnViYmxlX2xpbmUnPjwvaT48ZW0gY2xhc3M9J1RpZV9idWJibGVfYnInPjwvZW0+PC9zcGFuPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9J1RpZV9kZWZpbmVkRElWX1NhdmVCdG4nPjxhIGlkPSdUaWVfc2V0VmFsdWVfYScgY2xhc3M9J1RpZV9TYXZlQnRuX2EnIGhyZWY9J2phdmFzY3JpcHQ6dm9pZCgwKTsnPjxzcGFuPuehruWumjwvc3Bhbj48L2E+PC9kaXY+PC9kaXY+IjsKICAgICAgICAgICAgICAgIGRvYy5ib2R5LmFwcGVuZENoaWxkKGRlZmluZWRESVYpOwogICAgICAgICAgICAgICAgZGVmaW5lZERJViA9IG51bGw7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIEV2ZW50OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICB2YXIgZGVmaW5lZERJViA9IGRvYy5nZXRFbGVtZW50QnlJZCgiVGllX3NldFZhbHVlX0RJViIpLAogICAgICAgICAgICAgICAgICAgIHJlcGFpclZhbHVlID0gZG9jLmdldEVsZW1lbnRCeUlkKCJUaWVfcmVwYWlyVmFsdWUiKSwKICAgICAgICAgICAgICAgICAgICBkZWJ1Z0NvbmZpZyA9IGRvYy5nZXRFbGVtZW50QnlJZCgiVGllX2RlYnVnQ29uZmlnIiksCiAgICAgICAgICAgICAgICAgICAgcGFyZW50RWxlbWVudCA9IGRvYy5nZXRFbGVtZW50QnlJZCgial9wX3Bvc3RsaXN0IiksCiAgICAgICAgICAgICAgICAgICAgc2V0VmFsdWUgPSBkb2MuZ2V0RWxlbWVudHNCeU5hbWUoIlRpZV9zZXRWYWx1ZSIpLAogICAgICAgICAgICAgICAgICAgIG9sZERlZmluZWRFdmVudCA9IGRlZmluZWRFdmVudDsgLy/lpIfku73ml6forr7nva4KICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wO2k8NTtpKyspewogICAgICAgICAgICAgICAgICAgIHNldFZhbHVlW2ldLnZhbHVlID0gb2xkRGVmaW5lZEV2ZW50W2ldOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYoc2V0VmFsdWVbM10udmFsdWU9PT0iMCIpc2V0VmFsdWVbNF0uc3R5bGUudmlzaWJpbGl0eSA9ICJoaWRkZW4iOwogICAgICAgICAgICAgICAgc2V0VmFsdWVbM10ub25jaGFuZ2UgPSBmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIHNldFZhbHVlWzRdLnN0eWxlLnZpc2liaWxpdHkgPSB0aGlzLnZhbHVlPT09IjAiPyJoaWRkZW4iOiJ2aXNpYmxlIjsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZXBhaXJWYWx1ZS5jaGVja2VkID0gcmVwYWlyRGVmaW5lZEV2ZW50OwogICAgICAgICAgICAgICAgZGVidWdDb25maWcuY2hlY2tlZCA9IHNjcmlwdERlYnVnOwogICAgICAgICAgICAgICAgZG9jLmdldEVsZW1lbnRCeUlkKCJUaWVfc2V0VmFsdWVfYSIpLm9uY2xpY2sgPSBmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIGRlZmluZWRFdmVudCA9IFtzZXRWYWx1ZVswXS52YWx1ZSxzZXRWYWx1ZVsxXS52YWx1ZSxzZXRWYWx1ZVsyXS52YWx1ZSxzZXRWYWx1ZVszXS52YWx1ZSxzZXRWYWx1ZVs0XS52YWx1ZV07CiAgICAgICAgICAgICAgICAgICAgcmVwYWlyRGVmaW5lZEV2ZW50ID0gcmVwYWlyVmFsdWUuY2hlY2tlZDsKICAgICAgICAgICAgICAgICAgICBzY3JpcHREZWJ1ZyA9IGRlYnVnQ29uZmlnLmNoZWNrZWQ7CiAgICAgICAgICAgICAgICAgICAgaWYob2xkRGVmaW5lZEV2ZW50WzBdIT09ZGVmaW5lZEV2ZW50WzBdKXsKICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKG9sZERlZmluZWRFdmVudFswXSxpbWFnZUV2ZW50LmluaXQsdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihkZWZpbmVkRXZlbnRbMF0saW1hZ2VFdmVudC5pbml0LHRydWUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZihvbGREZWZpbmVkRXZlbnRbMV0hPT1kZWZpbmVkRXZlbnRbMV0pewogICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRESVYucmVtb3ZlRXZlbnRMaXN0ZW5lcihvbGREZWZpbmVkRXZlbnRbMV0saW1hZ2VFdmVudC5DbG9zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudERJVi5hZGRFdmVudExpc3RlbmVyKGRlZmluZWRFdmVudFsxXSxpbWFnZUV2ZW50LkNsb3NlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbG9nID0gc2NyaXB0RGVidWcmJmZ1bmN0aW9uKHRleHQsdHlwZXMsZGF0YSl7IC8v6ISa5pys6LCD6K+V77yM5pel5b+XCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiB0eXBlcz09PSJmdW5jdGlvbiIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXMgPSB0eXBlcygpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGE9PT11bmRlZmluZWQpY29uc29sZS5sb2codGV4dCx0eXBlcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgY29uc29sZS5sb2codGV4dCx0eXBlcyxkYXRhKTsKICAgICAgICAgICAgICAgICAgICB9fHxmdW5jdGlvbigpe307CiAgICAgICAgICAgICAgICAgICAgbG9nKCLoh6rlrprkuYnlsZ7mgKforr7nva4iLCLlt7LmiafooYwiLGRlZmluZWRFdmVudCsiLCIrcmVwYWlyRGVmaW5lZEV2ZW50KTsKICAgICAgICAgICAgICAgICAgICB0aGlzLm9uY2xpY2sgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIHNldFZhbHVlWzNdLm9uY2hhbmdlID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICBkb2MuYm9keS5yZW1vdmVDaGlsZChkZWZpbmVkRElWKTsKICAgICAgICAgICAgICAgICAgICBHTV9zZXRWYWx1ZSgiZGVmaW5lZEV2ZW50IixkZWZpbmVkRXZlbnQudG9TdHJpbmcoKSk7CiAgICAgICAgICAgICAgICAgICAgR01fc2V0VmFsdWUoInJlcGFpckRlZmluZWRFdmVudCIscmVwYWlyRGVmaW5lZEV2ZW50KTsKICAgICAgICAgICAgICAgICAgICBkZWZpbmVkRElWID0gbnVsbDtyZXBhaXJWYWx1ZSA9IG51bGw7ZGVidWdDb25maWcgPSBudWxsO3BhcmVudEVsZW1lbnQgPSBudWxsO3NldFZhbHVlID0gbnVsbDtvbGREZWZpbmVkRXZlbnQgPSBudWxsOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgaWYoIUdNX2dldFZhbHVlKCJkZWZpbmVkRXZlbnQiKSl7CiAgICAgICAgICAgIHVzZXJFdmVudC5pbml0KCk7CiAgICAgICAgfQogICAgICAgIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQoIuiHquWumuS5ieiuvue9riIsIGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIGlmKCFkb2MuZ2V0RWxlbWVudEJ5SWQoIlRpZV9zZXRWYWx1ZV9ESVYiKSkKICAgICAgICAgICAgICAgIHVzZXJFdmVudC5pbml0KCk7CiAgICAgICAgfSk7CiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIGlmKHR5cGVvZiB3aW5SZXNpemUhPT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHdpblJlc2l6ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgd2luUmVzaXplID0gc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgZG9jSGVpZ2h0ID0gZG9jLmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQtNjsKICAgICAgICAgICAgICAgIGRvY1dpZHRoID0gZG9jLmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aC02OwogICAgICAgICAgICB9LDMzNCk7CiAgICAgICAgfSk7CiAgICB9KSh3aW5kb3cpOwogICAgKGZ1bmN0aW9uKCl7CiAgICAgICAgdmFyIGxvY2F0aW9uSHJlZiA9IGxvY2F0aW9uLmhyZWY7CgogICAgICAgIGZ1bmN0aW9uIGRlY29kZSh1cmwsdGFyZ2V0KXsKICAgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICAgICAgbWV0aG9kOiAnSEVBRCcsCiAgICAgICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAiUmVmZXJlciI6IGxvY2F0aW9uSHJlZiwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1VybCA9IHJlc3BvbnNlLmZpbmFsVXJsOwogICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cobmV3VXJsKTsKICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKCdocmVmJywgbmV3VXJsKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBydW4oKSB7CiAgICAgICAgICAgIHZhciB1cmxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYVtocmVmXj0iaHR0cDovL2p1bXAuYmRpbWcuY29tL3NhZmVjaGVjayJdJyk7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdXJscy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgaWYgKHVybHNbaV0ucGFyZW50Tm9kZS5jbGFzc05hbWUgPT0gImFwY19zcmNfd3JhcHBlciIpIHsKICAgICAgICAgICAgICAgICAgICBkZWNvZGUodXJsc1tpXSx1cmxzW2ldKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSB1cmxzW2ldLmNoaWxkTm9kZXNbMF0ubm9kZVZhbHVlOwogICAgICAgICAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZigiaHR0cCIpIDwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gImh0dHA6Ly8iICsgdXJsOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHVybCk7CiAgICAgICAgICAgICAgICAgICAgdXJsc1tpXS5zZXRBdHRyaWJ1dGUoImhyZWYiLCB1cmwpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBhZGRNdXRhdGlvbk9ic2VydmVyKHNlbGVjdG9yLCBjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgd2F0Y2ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTsKICAgICAgICAgICAgaWYgKCF3YXRjaCkgcmV0dXJuOwoKICAgICAgICAgICAgdmFyIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24obXV0YXRpb25zKXsKICAgICAgICAgICAgICAgIHZhciBub2RlQWRkZWQgPSBtdXRhdGlvbnMuc29tZShmdW5jdGlvbih4KXsgcmV0dXJuIHguYWRkZWROb2Rlcy5sZW5ndGggPiAwOyB9KTsKICAgICAgICAgICAgICAgIGlmIChub2RlQWRkZWQpIHsKICAgICAgICAgICAgICAgICAgICAvLyBvYnNlcnZlci5kaXNjb25uZWN0KCk7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUod2F0Y2gsIHtjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IHRydWV9KTsKICAgICAgICB9CgoKICAgICAgICBydW4oKTsKCiAgICAgICAgYWRkTXV0YXRpb25PYnNlcnZlcignI2pfcF9wb3N0bGlzdCcsIHJ1bik7CiAgICB9KSgpOwogICAgLy/mn6XnnIvlj5HluJYgYnkg5paH56eRCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCl7CiAgICAgICAgdmFyICQgPSB1bnNhZmVXaW5kb3cuJDsKICAgICAgICBmdW5jdGlvbiBnZXRVc2VySGlzdG9yeShlKXsKICAgICAgICAgICAgdmFyIHVzZXJOYW1lID0gKEpTT04ucGFyc2UoZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhJykpKS51bjsKICAgICAgICAgICAgdmFyIGJhck5hbWUgPSAiIjsKICAgICAgICAgICAgaWYoIuWFqOi0tOWQp+WPkeiogOiusOW9lSIhPWUudGFyZ2V0LnRleHRDb250ZW50KXsKICAgICAgICAgICAgICAgIGJhck5hbWUgPSBwcm9tcHQoJ+i+k+WFpei0tOWQp+WQjScsJCgiI3dkMSIpLmF0dHIoInZhbHVlIikpOwogICAgICAgICAgICAgICAgaWYoIWJhck5hbWUpcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKGJhck5hbWU9PW51bGwpYmFyTmFtZT0iIjsKICAgICAgICAgICAgd2luZG93Lm9wZW4oImh0dHA6Ly90aWViYS5iYWlkdS5jb20vZi9zZWFyY2gvdXJlcz9pZT11dGYtOCZrdz0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGJhck5hbWUpICsgIiZxdz0mcm49MTAwJnVuPSIgKyBlbmNvZGVVUklDb21wb25lbnQodXNlck5hbWUpICsgIiZzbT0xIiwgIl9ibGFuayIpOwogICAgICAgIH0KICAgICAgICAoZnVuY3Rpb24gYWRkQnRuKCl7CiAgICAgICAgICAgICQoJy5kX2F1dGhvciAucF9hdXRob3InKS5lYWNoKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHRoaXMucXVlcnlTZWxlY3RvcignLnBfYXV0aG9yX25hbWUnKS5nZXRBdHRyaWJ1dGUoJ2RhdGEtZmllbGQnKTsKICAgICAgICAgICAgICAgICQodGhpcykuYXBwZW5kKCc8bGkgY2xhc3M9InVzZXJfcG9zdF9saSIgc3R5bGU9Im1hcmdpbi10b3A6NHB4Ij48YSBzdHlsZT0iY3Vyc29yOiBwb2ludGVyO2NvbG9yOiNGRjY2MDA7IiBkYXRhPScrZGF0YSsnPuWFqOi0tOWQp+WPkeiogOiusOW9lTwvYT48L2xpPicpCiAgICAgICAgICAgICAgICAkKHRoaXMpLmFwcGVuZCgnPGxpIGNsYXNzPSJ1c2VyX3Bvc3RfbGkiIHN0eWxlPSJtYXJnaW4tdG9wOjRweCI+PGEgc3R5bGU9ImN1cnNvcjogcG9pbnRlcjtjb2xvcjojRkY2NjAwOyIgZGF0YT0nK2RhdGErJz7mn5DotLTlkKflj5HoqIDorrDlvZU8L2E+PC9saT4nKQogICAgICAgICAgICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCcudXNlcl9wb3N0X2xpIGEnKVswXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZ2V0VXNlckhpc3RvcnkpCiAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoJy51c2VyX3Bvc3RfbGkgYScpWzFdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxnZXRVc2VySGlzdG9yeSkKICAgICAgICAgICAgfSk7CiAgICAgICAgfSkoKTsKICAgIH0sIGZhbHNlKTsKICAgIC8v55m+5bqm6LS05ZCn5oyJ5Y+R5biW5pe26Ze077yI5biW5a2QSUTvvInmjpLluo8gYnkgTlVMTAogICAgKGZ1bmN0aW9uKCkgewogICAgICAgIGlmKCEvXmh0dHBzPzpcL1wvdGllYmFcLmJhaWR1XC5jb21cL2ZcPy4qJC8udGVzdChsb2NhdGlvbi5ocmVmKSlyZXR1cm47CiAgICAgICAgZnVuY3Rpb24gc29ydEJ5SWQoKSB7CiAgICAgICAgICAgIHZhciBwYXJlbnROb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RocmVhZF9saXN0Jyk7CiAgICAgICAgICAgIHZhciB0aHJlYWRzID0gcGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yQWxsKCcual90aHJlYWRfbGlzdDpub3QoLnRocmVhZF90b3ApJyk7CiAgICAgICAgICAgIHZhciB0aHJlYWRBcnJheSA9IFtdOwogICAgICAgICAgICBmb3IgKHZhciB0aHJlYWQgb2YgdGhyZWFkcykgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICB0aHJlYWRBcnJheS5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IEpTT04ucGFyc2UodGhyZWFkLmdldEF0dHJpYnV0ZSgnZGF0YS1maWVsZCcpKS5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgdGhyZWFkOiB0aHJlYWQKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAvL3BhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhyZWFkKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB0aHJlYWRBcnJheS5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICAgICAgICByZXR1cm4gYi5pZCAtIGEuaWQ7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBmb3IgKHZhciB0aHJlYWQgb2YgdGhyZWFkQXJyYXkpIHsKICAgICAgICAgICAgICAgIHBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhyZWFkLnRocmVhZCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgICAgYS50ZXh0Q29udGVudCA9ICfmjInlj5HluJbml7bpl7TmjpLluo8nOwogICAgICAgICAgICBhLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnY29sb3I6cmVkICFpbXBvcnRhbnQnKTsKICAgICAgICAgICAgYS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCAnamF2YXNjcmlwdDo7Jyk7CiAgICAgICAgICAgIGEuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHsKICAgICAgICAgICAgICAgIHNvcnRCeUlkKCk7CiAgICAgICAgICAgIH0sIGZhbHNlKTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnY2FyZF9pbmZvTnVtJylbMF0ucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChhKTsKICAgICAgICB9LCA1MDApOwogICAgfSkoKTsKfSkoKTs=","requires":[{"meta":{"name":"jquery.min.js","url":"http://cdn.staticfile.org/jquery/2.1.1/jquery.min.js","ts":1606985022483,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2Mi4xLjEgfCAoYykgMjAwNSwgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiB8IGpxdWVyeS5vcmcvbGljZW5zZSAqLwohZnVuY3Rpb24oYSxiKXsib2JqZWN0Ij09dHlwZW9mIG1vZHVsZSYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1hLmRvY3VtZW50P2IoYSwhMCk6ZnVuY3Rpb24oYSl7aWYoIWEuZG9jdW1lbnQpdGhyb3cgbmV3IEVycm9yKCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50Iik7cmV0dXJuIGIoYSl9OmIoYSl9KCJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLGZ1bmN0aW9uKGEsYil7dmFyIGM9W10sZD1jLnNsaWNlLGU9Yy5jb25jYXQsZj1jLnB1c2gsZz1jLmluZGV4T2YsaD17fSxpPWgudG9TdHJpbmcsaj1oLmhhc093blByb3BlcnR5LGs9e30sbD1hLmRvY3VtZW50LG09IjIuMS4xIixuPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBuLmZuLmluaXQoYSxiKX0sbz0vXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2cscD0vXi1tcy0vLHE9Ly0oW1xkYS16XSkvZ2kscj1mdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9O24uZm49bi5wcm90b3R5cGU9e2pxdWVyeTptLGNvbnN0cnVjdG9yOm4sc2VsZWN0b3I6IiIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBkLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT8wPmE/dGhpc1thK3RoaXMubGVuZ3RoXTp0aGlzW2FdOmQuY2FsbCh0aGlzKX0scHVzaFN0YWNrOmZ1bmN0aW9uKGEpe3ZhciBiPW4ubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGEpO3JldHVybiBiLnByZXZPYmplY3Q9dGhpcyxiLmNvbnRleHQ9dGhpcy5jb250ZXh0LGJ9LGVhY2g6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5lYWNoKHRoaXMsYSxiKX0sbWFwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayhuLm1hcCh0aGlzLGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuY2FsbChiLGMsYil9KSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGQuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sZW5ndGgsYz0rYSsoMD5hP2I6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGM+PTAmJmI+Yz9bdGhpc1tjXV06W10pfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2T2JqZWN0fHx0aGlzLmNvbnN0cnVjdG9yKG51bGwpfSxwdXNoOmYsc29ydDpjLnNvcnQsc3BsaWNlOmMuc3BsaWNlfSxuLmV4dGVuZD1uLmZuLmV4dGVuZD1mdW5jdGlvbigpe3ZhciBhLGIsYyxkLGUsZixnPWFyZ3VtZW50c1swXXx8e30saD0xLGk9YXJndW1lbnRzLmxlbmd0aCxqPSExO2ZvcigiYm9vbGVhbiI9PXR5cGVvZiBnJiYoaj1nLGc9YXJndW1lbnRzW2hdfHx7fSxoKyspLCJvYmplY3QiPT10eXBlb2YgZ3x8bi5pc0Z1bmN0aW9uKGcpfHwoZz17fSksaD09PWkmJihnPXRoaXMsaC0tKTtpPmg7aCsrKWlmKG51bGwhPShhPWFyZ3VtZW50c1toXSkpZm9yKGIgaW4gYSljPWdbYl0sZD1hW2JdLGchPT1kJiYoaiYmZCYmKG4uaXNQbGFpbk9iamVjdChkKXx8KGU9bi5pc0FycmF5KGQpKSk/KGU/KGU9ITEsZj1jJiZuLmlzQXJyYXkoYyk/YzpbXSk6Zj1jJiZuLmlzUGxhaW5PYmplY3QoYyk/Yzp7fSxnW2JdPW4uZXh0ZW5kKGosZixkKSk6dm9pZCAwIT09ZCYmKGdbYl09ZCkpO3JldHVybiBnfSxuLmV4dGVuZCh7ZXhwYW5kbzoialF1ZXJ5IisobStNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKC9cRC9nLCIiKSxpc1JlYWR5OiEwLGVycm9yOmZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcihhKX0sbm9vcDpmdW5jdGlvbigpe30saXNGdW5jdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4iZnVuY3Rpb24iPT09bi50eXBlKGEpfSxpc0FycmF5OkFycmF5LmlzQXJyYXksaXNXaW5kb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWEmJmE9PT1hLndpbmRvd30saXNOdW1lcmljOmZ1bmN0aW9uKGEpe3JldHVybiFuLmlzQXJyYXkoYSkmJmEtcGFyc2VGbG9hdChhKT49MH0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihhKXtyZXR1cm4ib2JqZWN0IiE9PW4udHlwZShhKXx8YS5ub2RlVHlwZXx8bi5pc1dpbmRvdyhhKT8hMTphLmNvbnN0cnVjdG9yJiYhai5jYWxsKGEuY29uc3RydWN0b3IucHJvdG90eXBlLCJpc1Byb3RvdHlwZU9mIik/ITE6ITB9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI7Zm9yKGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH0sdHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9hKyIiOiJvYmplY3QiPT10eXBlb2YgYXx8ImZ1bmN0aW9uIj09dHlwZW9mIGE/aFtpLmNhbGwoYSldfHwib2JqZWN0Ijp0eXBlb2YgYX0sZ2xvYmFsRXZhbDpmdW5jdGlvbihhKXt2YXIgYixjPWV2YWw7YT1uLnRyaW0oYSksYSYmKDE9PT1hLmluZGV4T2YoInVzZSBzdHJpY3QiKT8oYj1sLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpLGIudGV4dD1hLGwuaGVhZC5hcHBlbmRDaGlsZChiKS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpKTpjKGEpKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UocCwibXMtIikucmVwbGFjZShxLHIpfSxub2RlTmFtZTpmdW5jdGlvbihhLGIpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1iLnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU9MCxmPWEubGVuZ3RoLGc9cyhhKTtpZihjKXtpZihnKXtmb3IoO2Y+ZTtlKyspaWYoZD1iLmFwcGx5KGFbZV0sYyksZD09PSExKWJyZWFrfWVsc2UgZm9yKGUgaW4gYSlpZihkPWIuYXBwbHkoYVtlXSxjKSxkPT09ITEpYnJlYWt9ZWxzZSBpZihnKXtmb3IoO2Y+ZTtlKyspaWYoZD1iLmNhbGwoYVtlXSxlLGFbZV0pLGQ9PT0hMSlicmVha31lbHNlIGZvcihlIGluIGEpaWYoZD1iLmNhbGwoYVtlXSxlLGFbZV0pLGQ9PT0hMSlicmVhaztyZXR1cm4gYX0sdHJpbTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT8iIjooYSsiIikucmVwbGFjZShvLCIiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8W107cmV0dXJuIG51bGwhPWEmJihzKE9iamVjdChhKSk/bi5tZXJnZShjLCJzdHJpbmciPT10eXBlb2YgYT9bYV06YSk6Zi5jYWxsKGMsYSkpLGN9LGluQXJyYXk6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBudWxsPT1iPy0xOmcuY2FsbChiLGEsYyl9LG1lcmdlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPStiLmxlbmd0aCxkPTAsZT1hLmxlbmd0aDtjPmQ7ZCsrKWFbZSsrXT1iW2RdO3JldHVybiBhLmxlbmd0aD1lLGF9LGdyZXA6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZCxlPVtdLGY9MCxnPWEubGVuZ3RoLGg9IWM7Zz5mO2YrKylkPSFiKGFbZl0sZiksZCE9PWgmJmUucHVzaChhW2ZdKTtyZXR1cm4gZX0sbWFwOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxmPTAsZz1hLmxlbmd0aCxoPXMoYSksaT1bXTtpZihoKWZvcig7Zz5mO2YrKylkPWIoYVtmXSxmLGMpLG51bGwhPWQmJmkucHVzaChkKTtlbHNlIGZvcihmIGluIGEpZD1iKGFbZl0sZixjKSxudWxsIT1kJiZpLnB1c2goZCk7cmV0dXJuIGUuYXBwbHkoW10saSl9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihhLGIpe3ZhciBjLGUsZjtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGImJihjPWFbYl0sYj1hLGE9Yyksbi5pc0Z1bmN0aW9uKGEpPyhlPWQuY2FsbChhcmd1bWVudHMsMiksZj1mdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGJ8fHRoaXMsZS5jb25jYXQoZC5jYWxsKGFyZ3VtZW50cykpKX0sZi5ndWlkPWEuZ3VpZD1hLmd1aWR8fG4uZ3VpZCsrLGYpOnZvaWQgMH0sbm93OkRhdGUubm93LHN1cHBvcnQ6a30pLG4uZWFjaCgiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvciIuc3BsaXQoIiAiKSxmdW5jdGlvbihhLGIpe2hbIltvYmplY3QgIitiKyJdIl09Yi50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gcyhhKXt2YXIgYj1hLmxlbmd0aCxjPW4udHlwZShhKTtyZXR1cm4iZnVuY3Rpb24iPT09Y3x8bi5pc1dpbmRvdyhhKT8hMToxPT09YS5ub2RlVHlwZSYmYj8hMDoiYXJyYXkiPT09Y3x8MD09PWJ8fCJudW1iZXIiPT10eXBlb2YgYiYmYj4wJiZiLTEgaW4gYX12YXIgdD1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpLGosayxsLG0sbixvLHAscSxyLHMsdCx1PSJzaXp6bGUiKy1uZXcgRGF0ZSx2PWEuZG9jdW1lbnQsdz0wLHg9MCx5PWdiKCksej1nYigpLEE9Z2IoKSxCPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1iJiYobD0hMCksMH0sQz0idW5kZWZpbmVkIixEPTE8PDMxLEU9e30uaGFzT3duUHJvcGVydHksRj1bXSxHPUYucG9wLEg9Ri5wdXNoLEk9Ri5wdXNoLEo9Ri5zbGljZSxLPUYuaW5kZXhPZnx8ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz10aGlzLmxlbmd0aDtjPmI7YisrKWlmKHRoaXNbYl09PT1hKXJldHVybiBiO3JldHVybi0xfSxMPSJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZCIsTT0iW1xceDIwXFx0XFxyXFxuXFxmXSIsTj0iKD86XFxcXC58W1xcdy1dfFteXFx4MDAtXFx4YTBdKSsiLE89Ti5yZXBsYWNlKCJ3IiwidyMiKSxQPSJcXFsiK00rIiooIitOKyIpKD86IitNKyIqKFsqXiR8IX5dPz0pIitNKyIqKD86JygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCJ8KCIrTysiKSl8KSIrTSsiKlxcXSIsUT0iOigiK04rIikoPzpcXCgoKCcoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwiKXwoKD86XFxcXC58W15cXFxcKClbXFxdXXwiK1ArIikqKXwuKilcXCl8KSIsUj1uZXcgUmVnRXhwKCJeIitNKyIrfCgoPzpefFteXFxcXF0pKD86XFxcXC4pKikiK00rIiskIiwiZyIpLFM9bmV3IFJlZ0V4cCgiXiIrTSsiKiwiK00rIioiKSxUPW5ldyBSZWdFeHAoIl4iK00rIiooWz4rfl18IitNKyIpIitNKyIqIiksVT1uZXcgUmVnRXhwKCI9IitNKyIqKFteXFxdJ1wiXSo/KSIrTSsiKlxcXSIsImciKSxWPW5ldyBSZWdFeHAoUSksVz1uZXcgUmVnRXhwKCJeIitPKyIkIiksWD17SUQ6bmV3IFJlZ0V4cCgiXiMoIitOKyIpIiksQ0xBU1M6bmV3IFJlZ0V4cCgiXlxcLigiK04rIikiKSxUQUc6bmV3IFJlZ0V4cCgiXigiK04ucmVwbGFjZSgidyIsIncqIikrIikiKSxBVFRSOm5ldyBSZWdFeHAoIl4iK1ApLFBTRVVETzpuZXcgUmVnRXhwKCJeIitRKSxDSElMRDpuZXcgUmVnRXhwKCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXCgiK00rIiooZXZlbnxvZGR8KChbKy1dfCkoXFxkKilufCkiK00rIiooPzooWystXXwpIitNKyIqKFxcZCspfCkpIitNKyIqXFwpfCkiLCJpIiksYm9vbDpuZXcgUmVnRXhwKCJeKD86IitMKyIpJCIsImkiKSxuZWVkc0NvbnRleHQ6bmV3IFJlZ0V4cCgiXiIrTSsiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFwoIitNKyIqKCg/Oi1cXGQpP1xcZCopIitNKyIqXFwpfCkoPz1bXi1dfCQpIiwiaSIpfSxZPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksWj0vXmhcZCQvaSwkPS9eW157XStce1xzKlxbbmF0aXZlIFx3LyxfPS9eKD86IyhbXHctXSspfChcdyspfFwuKFtcdy1dKykpJC8sYWI9L1srfl0vLGJiPS8nfFxcL2csY2I9bmV3IFJlZ0V4cCgiXFxcXChbXFxkYS1mXXsxLDZ9IitNKyI/fCgiK00rIil8LikiLCJpZyIpLGRiPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD0iMHgiK2ItNjU1MzY7cmV0dXJuIGQhPT1kfHxjP2I6MD5kP1N0cmluZy5mcm9tQ2hhckNvZGUoZCs2NTUzNik6U3RyaW5nLmZyb21DaGFyQ29kZShkPj4xMHw1NTI5NiwxMDIzJmR8NTYzMjApfTt0cnl7SS5hcHBseShGPUouY2FsbCh2LmNoaWxkTm9kZXMpLHYuY2hpbGROb2RlcyksRlt2LmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChlYil7ST17YXBwbHk6Ri5sZW5ndGg/ZnVuY3Rpb24oYSxiKXtILmFwcGx5KGEsSi5jYWxsKGIpKX06ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmxlbmd0aCxkPTA7d2hpbGUoYVtjKytdPWJbZCsrXSk7YS5sZW5ndGg9Yy0xfX19ZnVuY3Rpb24gZmIoYSxiLGQsZSl7dmFyIGYsaCxqLGssbCxvLHIscyx3LHg7aWYoKGI/Yi5vd25lckRvY3VtZW50fHxiOnYpIT09biYmbShiKSxiPWJ8fG4sZD1kfHxbXSwhYXx8InN0cmluZyIhPXR5cGVvZiBhKXJldHVybiBkO2lmKDEhPT0oaz1iLm5vZGVUeXBlKSYmOSE9PWspcmV0dXJuW107aWYocCYmIWUpe2lmKGY9Xy5leGVjKGEpKWlmKGo9ZlsxXSl7aWYoOT09PWspe2lmKGg9Yi5nZXRFbGVtZW50QnlJZChqKSwhaHx8IWgucGFyZW50Tm9kZSlyZXR1cm4gZDtpZihoLmlkPT09ailyZXR1cm4gZC5wdXNoKGgpLGR9ZWxzZSBpZihiLm93bmVyRG9jdW1lbnQmJihoPWIub3duZXJEb2N1bWVudC5nZXRFbGVtZW50QnlJZChqKSkmJnQoYixoKSYmaC5pZD09PWopcmV0dXJuIGQucHVzaChoKSxkfWVsc2V7aWYoZlsyXSlyZXR1cm4gSS5hcHBseShkLGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSkpLGQ7aWYoKGo9ZlszXSkmJmMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXJldHVybiBJLmFwcGx5KGQsYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGopKSxkfWlmKGMucXNhJiYoIXF8fCFxLnRlc3QoYSkpKXtpZihzPXI9dSx3PWIseD05PT09ayYmYSwxPT09ayYmIm9iamVjdCIhPT1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe289ZyhhKSwocj1iLmdldEF0dHJpYnV0ZSgiaWQiKSk/cz1yLnJlcGxhY2UoYmIsIlxcJCYiKTpiLnNldEF0dHJpYnV0ZSgiaWQiLHMpLHM9IltpZD0nIitzKyInXSAiLGw9by5sZW5ndGg7d2hpbGUobC0tKW9bbF09cytxYihvW2xdKTt3PWFiLnRlc3QoYSkmJm9iKGIucGFyZW50Tm9kZSl8fGIseD1vLmpvaW4oIiwiKX1pZih4KXRyeXtyZXR1cm4gSS5hcHBseShkLHcucXVlcnlTZWxlY3RvckFsbCh4KSksZH1jYXRjaCh5KXt9ZmluYWxseXtyfHxiLnJlbW92ZUF0dHJpYnV0ZSgiaWQiKX19fXJldHVybiBpKGEucmVwbGFjZShSLCIkMSIpLGIsZCxlKX1mdW5jdGlvbiBnYigpe3ZhciBhPVtdO2Z1bmN0aW9uIGIoYyxlKXtyZXR1cm4gYS5wdXNoKGMrIiAiKT5kLmNhY2hlTGVuZ3RoJiZkZWxldGUgYlthLnNoaWZ0KCldLGJbYysiICJdPWV9cmV0dXJuIGJ9ZnVuY3Rpb24gaGIoYSl7cmV0dXJuIGFbdV09ITAsYX1mdW5jdGlvbiBpYihhKXt2YXIgYj1uLmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RyeXtyZXR1cm4hIWEoYil9Y2F0Y2goYyl7cmV0dXJuITF9ZmluYWxseXtiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSxiPW51bGx9fWZ1bmN0aW9uIGpiKGEsYil7dmFyIGM9YS5zcGxpdCgifCIpLGU9YS5sZW5ndGg7d2hpbGUoZS0tKWQuYXR0ckhhbmRsZVtjW2VdXT1ifWZ1bmN0aW9uIGtiKGEsYil7dmFyIGM9YiYmYSxkPWMmJjE9PT1hLm5vZGVUeXBlJiYxPT09Yi5ub2RlVHlwZSYmKH5iLnNvdXJjZUluZGV4fHxEKS0ofmEuc291cmNlSW5kZXh8fEQpO2lmKGQpcmV0dXJuIGQ7aWYoYyl3aGlsZShjPWMubmV4dFNpYmxpbmcpaWYoYz09PWIpcmV0dXJuLTE7cmV0dXJuIGE/MTotMX1mdW5jdGlvbiBsYihhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT1jJiZiLnR5cGU9PT1hfX1mdW5jdGlvbiBtYihhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybigiaW5wdXQiPT09Y3x8ImJ1dHRvbiI9PT1jKSYmYi50eXBlPT09YX19ZnVuY3Rpb24gbmIoYSl7cmV0dXJuIGhiKGZ1bmN0aW9uKGIpe3JldHVybiBiPStiLGhiKGZ1bmN0aW9uKGMsZCl7dmFyIGUsZj1hKFtdLGMubGVuZ3RoLGIpLGc9Zi5sZW5ndGg7d2hpbGUoZy0tKWNbZT1mW2ddXSYmKGNbZV09IShkW2VdPWNbZV0pKX0pfSl9ZnVuY3Rpb24gb2IoYSl7cmV0dXJuIGEmJnR5cGVvZiBhLmdldEVsZW1lbnRzQnlUYWdOYW1lIT09QyYmYX1jPWZiLnN1cHBvcnQ9e30sZj1mYi5pc1hNTD1mdW5jdGlvbihhKXt2YXIgYj1hJiYoYS5vd25lckRvY3VtZW50fHxhKS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIGI/IkhUTUwiIT09Yi5ub2RlTmFtZTohMX0sbT1mYi5zZXREb2N1bWVudD1mdW5jdGlvbihhKXt2YXIgYixlPWE/YS5vd25lckRvY3VtZW50fHxhOnYsZz1lLmRlZmF1bHRWaWV3O3JldHVybiBlIT09biYmOT09PWUubm9kZVR5cGUmJmUuZG9jdW1lbnRFbGVtZW50PyhuPWUsbz1lLmRvY3VtZW50RWxlbWVudCxwPSFmKGUpLGcmJmchPT1nLnRvcCYmKGcuYWRkRXZlbnRMaXN0ZW5lcj9nLmFkZEV2ZW50TGlzdGVuZXIoInVubG9hZCIsZnVuY3Rpb24oKXttKCl9LCExKTpnLmF0dGFjaEV2ZW50JiZnLmF0dGFjaEV2ZW50KCJvbnVubG9hZCIsZnVuY3Rpb24oKXttKCl9KSksYy5hdHRyaWJ1dGVzPWliKGZ1bmN0aW9uKGEpe3JldHVybiBhLmNsYXNzTmFtZT0iaSIsIWEuZ2V0QXR0cmlidXRlKCJjbGFzc05hbWUiKX0pLGMuZ2V0RWxlbWVudHNCeVRhZ05hbWU9aWIoZnVuY3Rpb24oYSl7cmV0dXJuIGEuYXBwZW5kQ2hpbGQoZS5jcmVhdGVDb21tZW50KCIiKSksIWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKS5sZW5ndGh9KSxjLmdldEVsZW1lbnRzQnlDbGFzc05hbWU9JC50ZXN0KGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSkmJmliKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD0iPGRpdiBjbGFzcz0nYSc+PC9kaXY+PGRpdiBjbGFzcz0nYSBpJz48L2Rpdj4iLGEuZmlyc3RDaGlsZC5jbGFzc05hbWU9ImkiLDI9PT1hLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImkiKS5sZW5ndGh9KSxjLmdldEJ5SWQ9aWIoZnVuY3Rpb24oYSl7cmV0dXJuIG8uYXBwZW5kQ2hpbGQoYSkuaWQ9dSwhZS5nZXRFbGVtZW50c0J5TmFtZXx8IWUuZ2V0RWxlbWVudHNCeU5hbWUodSkubGVuZ3RofSksYy5nZXRCeUlkPyhkLmZpbmQuSUQ9ZnVuY3Rpb24oYSxiKXtpZih0eXBlb2YgYi5nZXRFbGVtZW50QnlJZCE9PUMmJnApe3ZhciBjPWIuZ2V0RWxlbWVudEJ5SWQoYSk7cmV0dXJuIGMmJmMucGFyZW50Tm9kZT9bY106W119fSxkLmZpbHRlci5JRD1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoY2IsZGIpO3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoImlkIik9PT1ifX0pOihkZWxldGUgZC5maW5kLklELGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShjYixkYik7cmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBjPXR5cGVvZiBhLmdldEF0dHJpYnV0ZU5vZGUhPT1DJiZhLmdldEF0dHJpYnV0ZU5vZGUoImlkIik7cmV0dXJuIGMmJmMudmFsdWU9PT1ifX0pLGQuZmluZC5UQUc9Yy5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihhLGIpe3JldHVybiB0eXBlb2YgYi5nZXRFbGVtZW50c0J5VGFnTmFtZSE9PUM/Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKTp2b2lkIDB9OmZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPTAsZj1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpO2lmKCIqIj09PWEpe3doaWxlKGM9ZltlKytdKTE9PT1jLm5vZGVUeXBlJiZkLnB1c2goYyk7cmV0dXJuIGR9cmV0dXJuIGZ9LGQuZmluZC5DTEFTUz1jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGEsYil7cmV0dXJuIHR5cGVvZiBiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUhPT1DJiZwP2IuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShhKTp2b2lkIDB9LHI9W10scT1bXSwoYy5xc2E9JC50ZXN0KGUucXVlcnlTZWxlY3RvckFsbCkpJiYoaWIoZnVuY3Rpb24oYSl7YS5pbm5lckhUTUw9IjxzZWxlY3QgbXNhbGxvd2NsaXA9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD4iLGEucXVlcnlTZWxlY3RvckFsbCgiW21zYWxsb3djbGlwXj0nJ10iKS5sZW5ndGgmJnEucHVzaCgiWypeJF09IitNKyIqKD86Jyd8XCJcIikiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5sZW5ndGh8fHEucHVzaCgiXFxbIitNKyIqKD86dmFsdWV8IitMKyIpIiksYS5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aHx8cS5wdXNoKCI6Y2hlY2tlZCIpfSksaWIoZnVuY3Rpb24oYSl7dmFyIGI9ZS5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2Iuc2V0QXR0cmlidXRlKCJ0eXBlIiwiaGlkZGVuIiksYS5hcHBlbmRDaGlsZChiKS5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJEIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJbbmFtZT1kXSIpLmxlbmd0aCYmcS5wdXNoKCJuYW1lIitNKyIqWypeJHwhfl0/PSIpLGEucXVlcnlTZWxlY3RvckFsbCgiOmVuYWJsZWQiKS5sZW5ndGh8fHEucHVzaCgiOmVuYWJsZWQiLCI6ZGlzYWJsZWQiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIiosOngiKSxxLnB1c2goIiwuKjoiKX0pKSwoYy5tYXRjaGVzU2VsZWN0b3I9JC50ZXN0KHM9by5tYXRjaGVzfHxvLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8by5tb3pNYXRjaGVzU2VsZWN0b3J8fG8ub01hdGNoZXNTZWxlY3Rvcnx8by5tc01hdGNoZXNTZWxlY3RvcikpJiZpYihmdW5jdGlvbihhKXtjLmRpc2Nvbm5lY3RlZE1hdGNoPXMuY2FsbChhLCJkaXYiKSxzLmNhbGwoYSwiW3MhPScnXTp4Iiksci5wdXNoKCIhPSIsUSl9KSxxPXEubGVuZ3RoJiZuZXcgUmVnRXhwKHEuam9pbigifCIpKSxyPXIubGVuZ3RoJiZuZXcgUmVnRXhwKHIuam9pbigifCIpKSxiPSQudGVzdChvLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKSx0PWJ8fCQudGVzdChvLmNvbnRhaW5zKT9mdW5jdGlvbihhLGIpe3ZhciBjPTk9PT1hLm5vZGVUeXBlP2EuZG9jdW1lbnRFbGVtZW50OmEsZD1iJiZiLnBhcmVudE5vZGU7cmV0dXJuIGE9PT1kfHwhKCFkfHwxIT09ZC5ub2RlVHlwZXx8IShjLmNvbnRhaW5zP2MuY29udGFpbnMoZCk6YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmMTYmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihkKSkpfTpmdW5jdGlvbihhLGIpe2lmKGIpd2hpbGUoYj1iLnBhcmVudE5vZGUpaWYoYj09PWEpcmV0dXJuITA7cmV0dXJuITF9LEI9Yj9mdW5jdGlvbihhLGIpe2lmKGE9PT1iKXJldHVybiBsPSEwLDA7dmFyIGQ9IWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24tIWIuY29tcGFyZURvY3VtZW50UG9zaXRpb247cmV0dXJuIGQ/ZDooZD0oYS5vd25lckRvY3VtZW50fHxhKT09PShiLm93bmVyRG9jdW1lbnR8fGIpP2EuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYik6MSwxJmR8fCFjLnNvcnREZXRhY2hlZCYmYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihhKT09PWQ/YT09PWV8fGEub3duZXJEb2N1bWVudD09PXYmJnQodixhKT8tMTpiPT09ZXx8Yi5vd25lckRvY3VtZW50PT09diYmdCh2LGIpPzE6az9LLmNhbGwoayxhKS1LLmNhbGwoayxiKTowOjQmZD8tMToxKX06ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gbD0hMCwwO3ZhciBjLGQ9MCxmPWEucGFyZW50Tm9kZSxnPWIucGFyZW50Tm9kZSxoPVthXSxpPVtiXTtpZighZnx8IWcpcmV0dXJuIGE9PT1lPy0xOmI9PT1lPzE6Zj8tMTpnPzE6az9LLmNhbGwoayxhKS1LLmNhbGwoayxiKTowO2lmKGY9PT1nKXJldHVybiBrYihhLGIpO2M9YTt3aGlsZShjPWMucGFyZW50Tm9kZSloLnVuc2hpZnQoYyk7Yz1iO3doaWxlKGM9Yy5wYXJlbnROb2RlKWkudW5zaGlmdChjKTt3aGlsZShoW2RdPT09aVtkXSlkKys7cmV0dXJuIGQ/a2IoaFtkXSxpW2RdKTpoW2RdPT09dj8tMTppW2RdPT09dj8xOjB9LGUpOm59LGZiLm1hdGNoZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZmIoYSxudWxsLG51bGwsYil9LGZiLm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihhLGIpe2lmKChhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSxiPWIucmVwbGFjZShVLCI9JyQxJ10iKSwhKCFjLm1hdGNoZXNTZWxlY3Rvcnx8IXB8fHImJnIudGVzdChiKXx8cSYmcS50ZXN0KGIpKSl0cnl7dmFyIGQ9cy5jYWxsKGEsYik7aWYoZHx8Yy5kaXNjb25uZWN0ZWRNYXRjaHx8YS5kb2N1bWVudCYmMTEhPT1hLmRvY3VtZW50Lm5vZGVUeXBlKXJldHVybiBkfWNhdGNoKGUpe31yZXR1cm4gZmIoYixuLG51bGwsW2FdKS5sZW5ndGg+MH0sZmIuY29udGFpbnM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSksdChhLGIpfSxmYi5hdHRyPWZ1bmN0aW9uKGEsYil7KGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpO3ZhciBlPWQuYXR0ckhhbmRsZVtiLnRvTG93ZXJDYXNlKCldLGY9ZSYmRS5jYWxsKGQuYXR0ckhhbmRsZSxiLnRvTG93ZXJDYXNlKCkpP2UoYSxiLCFwKTp2b2lkIDA7cmV0dXJuIHZvaWQgMCE9PWY/ZjpjLmF0dHJpYnV0ZXN8fCFwP2EuZ2V0QXR0cmlidXRlKGIpOihmPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmYuc3BlY2lmaWVkP2YudmFsdWU6bnVsbH0sZmIuZXJyb3I9ZnVuY3Rpb24oYSl7dGhyb3cgbmV3IEVycm9yKCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiAiK2EpfSxmYi51bmlxdWVTb3J0PWZ1bmN0aW9uKGEpe3ZhciBiLGQ9W10sZT0wLGY9MDtpZihsPSFjLmRldGVjdER1cGxpY2F0ZXMsaz0hYy5zb3J0U3RhYmxlJiZhLnNsaWNlKDApLGEuc29ydChCKSxsKXt3aGlsZShiPWFbZisrXSliPT09YVtmXSYmKGU9ZC5wdXNoKGYpKTt3aGlsZShlLS0pYS5zcGxpY2UoZFtlXSwxKX1yZXR1cm4gaz1udWxsLGF9LGU9ZmIuZ2V0VGV4dD1mdW5jdGlvbihhKXt2YXIgYixjPSIiLGQ9MCxmPWEubm9kZVR5cGU7aWYoZil7aWYoMT09PWZ8fDk9PT1mfHwxMT09PWYpe2lmKCJzdHJpbmciPT10eXBlb2YgYS50ZXh0Q29udGVudClyZXR1cm4gYS50ZXh0Q29udGVudDtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpYys9ZShhKX1lbHNlIGlmKDM9PT1mfHw0PT09ZilyZXR1cm4gYS5ub2RlVmFsdWV9ZWxzZSB3aGlsZShiPWFbZCsrXSljKz1lKGIpO3JldHVybiBjfSxkPWZiLnNlbGVjdG9ycz17Y2FjaGVMZW5ndGg6NTAsY3JlYXRlUHNldWRvOmhiLG1hdGNoOlgsYXR0ckhhbmRsZTp7fSxmaW5kOnt9LHJlbGF0aXZlOnsiPiI6e2RpcjoicGFyZW50Tm9kZSIsZmlyc3Q6ITB9LCIgIjp7ZGlyOiJwYXJlbnROb2RlIn0sIisiOntkaXI6InByZXZpb3VzU2libGluZyIsZmlyc3Q6ITB9LCJ+Ijp7ZGlyOiJwcmV2aW91c1NpYmxpbmcifX0scHJlRmlsdGVyOntBVFRSOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0ucmVwbGFjZShjYixkYiksYVszXT0oYVszXXx8YVs0XXx8YVs1XXx8IiIpLnJlcGxhY2UoY2IsZGIpLCJ+PSI9PT1hWzJdJiYoYVszXT0iICIrYVszXSsiICIpLGEuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS50b0xvd2VyQ2FzZSgpLCJudGgiPT09YVsxXS5zbGljZSgwLDMpPyhhWzNdfHxmYi5lcnJvcihhWzBdKSxhWzRdPSsoYVs0XT9hWzVdKyhhWzZdfHwxKToyKigiZXZlbiI9PT1hWzNdfHwib2RkIj09PWFbM10pKSxhWzVdPSsoYVs3XSthWzhdfHwib2RkIj09PWFbM10pKTphWzNdJiZmYi5lcnJvcihhWzBdKSxhfSxQU0VVRE86ZnVuY3Rpb24oYSl7dmFyIGIsYz0hYVs2XSYmYVsyXTtyZXR1cm4gWC5DSElMRC50ZXN0KGFbMF0pP251bGw6KGFbM10/YVsyXT1hWzRdfHxhWzVdfHwiIjpjJiZWLnRlc3QoYykmJihiPWcoYywhMCkpJiYoYj1jLmluZGV4T2YoIikiLGMubGVuZ3RoLWIpLWMubGVuZ3RoKSYmKGFbMF09YVswXS5zbGljZSgwLGIpLGFbMl09Yy5zbGljZSgwLGIpKSxhLnNsaWNlKDAsMykpfX0sZmlsdGVyOntUQUc6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGNiLGRiKS50b0xvd2VyQ2FzZSgpO3JldHVybiIqIj09PWE/ZnVuY3Rpb24oKXtyZXR1cm4hMH06ZnVuY3Rpb24oYSl7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWJ9fSxDTEFTUzpmdW5jdGlvbihhKXt2YXIgYj15W2ErIiAiXTtyZXR1cm4gYnx8KGI9bmV3IFJlZ0V4cCgiKF58IitNKyIpIithKyIoIitNKyJ8JCkiKSkmJnkoYSxmdW5jdGlvbihhKXtyZXR1cm4gYi50ZXN0KCJzdHJpbmciPT10eXBlb2YgYS5jbGFzc05hbWUmJmEuY2xhc3NOYW1lfHx0eXBlb2YgYS5nZXRBdHRyaWJ1dGUhPT1DJiZhLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpfSl9LEFUVFI6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXt2YXIgZT1mYi5hdHRyKGQsYSk7cmV0dXJuIG51bGw9PWU/IiE9Ij09PWI6Yj8oZSs9IiIsIj0iPT09Yj9lPT09YzoiIT0iPT09Yj9lIT09YzoiXj0iPT09Yj9jJiYwPT09ZS5pbmRleE9mKGMpOiIqPSI9PT1iP2MmJmUuaW5kZXhPZihjKT4tMToiJD0iPT09Yj9jJiZlLnNsaWNlKC1jLmxlbmd0aCk9PT1jOiJ+PSI9PT1iPygiICIrZSsiICIpLmluZGV4T2YoYyk+LTE6Inw9Ij09PWI/ZT09PWN8fGUuc2xpY2UoMCxjLmxlbmd0aCsxKT09PWMrIi0iOiExKTohMH19LENISUxEOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9Im50aCIhPT1hLnNsaWNlKDAsMyksZz0ibGFzdCIhPT1hLnNsaWNlKC00KSxoPSJvZi10eXBlIj09PWI7cmV0dXJuIDE9PT1kJiYwPT09ZT9mdW5jdGlvbihhKXtyZXR1cm4hIWEucGFyZW50Tm9kZX06ZnVuY3Rpb24oYixjLGkpe3ZhciBqLGssbCxtLG4sbyxwPWYhPT1nPyJuZXh0U2libGluZyI6InByZXZpb3VzU2libGluZyIscT1iLnBhcmVudE5vZGUscj1oJiZiLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkscz0haSYmIWg7aWYocSl7aWYoZil7d2hpbGUocCl7bD1iO3doaWxlKGw9bFtwXSlpZihoP2wubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PWwubm9kZVR5cGUpcmV0dXJuITE7bz1wPSJvbmx5Ij09PWEmJiFvJiYibmV4dFNpYmxpbmcifXJldHVybiEwfWlmKG89W2c/cS5maXJzdENoaWxkOnEubGFzdENoaWxkXSxnJiZzKXtrPXFbdV18fChxW3VdPXt9KSxqPWtbYV18fFtdLG49alswXT09PXcmJmpbMV0sbT1qWzBdPT09dyYmalsyXSxsPW4mJnEuY2hpbGROb2Rlc1tuXTt3aGlsZShsPSsrbiYmbCYmbFtwXXx8KG09bj0wKXx8by5wb3AoKSlpZigxPT09bC5ub2RlVHlwZSYmKyttJiZsPT09Yil7a1thXT1bdyxuLG1dO2JyZWFrfX1lbHNlIGlmKHMmJihqPShiW3VdfHwoYlt1XT17fSkpW2FdKSYmalswXT09PXcpbT1qWzFdO2Vsc2Ugd2hpbGUobD0rK24mJmwmJmxbcF18fChtPW49MCl8fG8ucG9wKCkpaWYoKGg/bC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09cjoxPT09bC5ub2RlVHlwZSkmJisrbSYmKHMmJigobFt1XXx8KGxbdV09e30pKVthXT1bdyxtXSksbD09PWIpKWJyZWFrO3JldHVybiBtLT1lLG09PT1kfHxtJWQ9PT0wJiZtL2Q+PTB9fX0sUFNFVURPOmZ1bmN0aW9uKGEsYil7dmFyIGMsZT1kLnBzZXVkb3NbYV18fGQuc2V0RmlsdGVyc1thLnRvTG93ZXJDYXNlKCldfHxmYi5lcnJvcigidW5zdXBwb3J0ZWQgcHNldWRvOiAiK2EpO3JldHVybiBlW3VdP2UoYik6ZS5sZW5ndGg+MT8oYz1bYSxhLCIiLGJdLGQuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShhLnRvTG93ZXJDYXNlKCkpP2hiKGZ1bmN0aW9uKGEsYyl7dmFyIGQsZj1lKGEsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pZD1LLmNhbGwoYSxmW2ddKSxhW2RdPSEoY1tkXT1mW2ddKX0pOmZ1bmN0aW9uKGEpe3JldHVybiBlKGEsMCxjKX0pOmV9fSxwc2V1ZG9zOntub3Q6aGIoZnVuY3Rpb24oYSl7dmFyIGI9W10sYz1bXSxkPWgoYS5yZXBsYWNlKFIsIiQxIikpO3JldHVybiBkW3VdP2hiKGZ1bmN0aW9uKGEsYixjLGUpe3ZhciBmLGc9ZChhLG51bGwsZSxbXSksaD1hLmxlbmd0aDt3aGlsZShoLS0pKGY9Z1toXSkmJihhW2hdPSEoYltoXT1mKSl9KTpmdW5jdGlvbihhLGUsZil7cmV0dXJuIGJbMF09YSxkKGIsbnVsbCxmLGMpLCFjLnBvcCgpfX0pLGhhczpoYihmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGZiKGEsYikubGVuZ3RoPjB9fSksY29udGFpbnM6aGIoZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybihiLnRleHRDb250ZW50fHxiLmlubmVyVGV4dHx8ZShiKSkuaW5kZXhPZihhKT4tMX19KSxsYW5nOmhiKGZ1bmN0aW9uKGEpe3JldHVybiBXLnRlc3QoYXx8IiIpfHxmYi5lcnJvcigidW5zdXBwb3J0ZWQgbGFuZzogIithKSxhPWEucmVwbGFjZShjYixkYikudG9Mb3dlckNhc2UoKSxmdW5jdGlvbihiKXt2YXIgYztkbyBpZihjPXA/Yi5sYW5nOmIuZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpfHxiLmdldEF0dHJpYnV0ZSgibGFuZyIpKXJldHVybiBjPWMudG9Mb3dlckNhc2UoKSxjPT09YXx8MD09PWMuaW5kZXhPZihhKyItIik7d2hpbGUoKGI9Yi5wYXJlbnROb2RlKSYmMT09PWIubm9kZVR5cGUpO3JldHVybiExfX0pLHRhcmdldDpmdW5jdGlvbihiKXt2YXIgYz1hLmxvY2F0aW9uJiZhLmxvY2F0aW9uLmhhc2g7cmV0dXJuIGMmJmMuc2xpY2UoMSk9PT1iLmlkfSxyb290OmZ1bmN0aW9uKGEpe3JldHVybiBhPT09b30sZm9jdXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1uLmFjdGl2ZUVsZW1lbnQmJighbi5oYXNGb2N1c3x8bi5oYXNGb2N1cygpKSYmISEoYS50eXBlfHxhLmhyZWZ8fH5hLnRhYkluZGV4KX0sZW5hYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSExfSxkaXNhYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSEwfSxjaGVja2VkOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmISFhLmNoZWNrZWR8fCJvcHRpb24iPT09YiYmISFhLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxhLnNlbGVjdGVkPT09ITB9LGVtcHR5OmZ1bmN0aW9uKGEpe2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylpZihhLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4hZC5wc2V1ZG9zLmVtcHR5KGEpfSxoZWFkZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIFoudGVzdChhLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFkudGVzdChhLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmImJ1dHRvbiI9PT1hLnR5cGV8fCJidXR0b24iPT09Yn0sdGV4dDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4iaW5wdXQiPT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYidGV4dCI9PT1hLnR5cGUmJihudWxsPT0oYj1hLmdldEF0dHJpYnV0ZSgidHlwZSIpKXx8InRleHQiPT09Yi50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6bmIoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0Om5iKGZ1bmN0aW9uKGEsYil7cmV0dXJuW2ItMV19KSxlcTpuYihmdW5jdGlvbihhLGIsYyl7cmV0dXJuWzA+Yz9jK2I6Y119KSxldmVuOm5iKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksb2RkOm5iKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksbHQ6bmIoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wPmM/YytiOmM7LS1kPj0wOylhLnB1c2goZCk7cmV0dXJuIGF9KSxndDpuYihmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA+Yz9jK2I6YzsrK2Q8YjspYS5wdXNoKGQpO3JldHVybiBhfSl9fSxkLnBzZXVkb3MubnRoPWQucHNldWRvcy5lcTtmb3IoYiBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlkLnBzZXVkb3NbYl09bGIoYik7Zm9yKGIgaW57c3VibWl0OiEwLHJlc2V0OiEwfSlkLnBzZXVkb3NbYl09bWIoYik7ZnVuY3Rpb24gcGIoKXt9cGIucHJvdG90eXBlPWQuZmlsdGVycz1kLnBzZXVkb3MsZC5zZXRGaWx0ZXJzPW5ldyBwYixnPWZiLnRva2VuaXplPWZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGcsaCxpLGosaz16W2ErIiAiXTtpZihrKXJldHVybiBiPzA6ay5zbGljZSgwKTtoPWEsaT1bXSxqPWQucHJlRmlsdGVyO3doaWxlKGgpeyghY3x8KGU9Uy5leGVjKGgpKSkmJihlJiYoaD1oLnNsaWNlKGVbMF0ubGVuZ3RoKXx8aCksaS5wdXNoKGY9W10pKSxjPSExLChlPVQuZXhlYyhoKSkmJihjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTplWzBdLnJlcGxhY2UoUiwiICIpfSksaD1oLnNsaWNlKGMubGVuZ3RoKSk7Zm9yKGcgaW4gZC5maWx0ZXIpIShlPVhbZ10uZXhlYyhoKSl8fGpbZ10mJiEoZT1qW2ddKGUpKXx8KGM9ZS5zaGlmdCgpLGYucHVzaCh7dmFsdWU6Yyx0eXBlOmcsbWF0Y2hlczplfSksaD1oLnNsaWNlKGMubGVuZ3RoKSk7aWYoIWMpYnJlYWt9cmV0dXJuIGI/aC5sZW5ndGg6aD9mYi5lcnJvcihhKTp6KGEsaSkuc2xpY2UoMCl9O2Z1bmN0aW9uIHFiKGEpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGgsZD0iIjtjPmI7YisrKWQrPWFbYl0udmFsdWU7cmV0dXJuIGR9ZnVuY3Rpb24gcmIoYSxiLGMpe3ZhciBkPWIuZGlyLGU9YyYmInBhcmVudE5vZGUiPT09ZCxmPXgrKztyZXR1cm4gYi5maXJzdD9mdW5jdGlvbihiLGMsZil7d2hpbGUoYj1iW2RdKWlmKDE9PT1iLm5vZGVUeXBlfHxlKXJldHVybiBhKGIsYyxmKX06ZnVuY3Rpb24oYixjLGcpe3ZhciBoLGksaj1bdyxmXTtpZihnKXt3aGlsZShiPWJbZF0paWYoKDE9PT1iLm5vZGVUeXBlfHxlKSYmYShiLGMsZykpcmV0dXJuITB9ZWxzZSB3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGUpe2lmKGk9Ylt1XXx8KGJbdV09e30pLChoPWlbZF0pJiZoWzBdPT09dyYmaFsxXT09PWYpcmV0dXJuIGpbMl09aFsyXTtpZihpW2RdPWosalsyXT1hKGIsYyxnKSlyZXR1cm4hMH19fWZ1bmN0aW9uIHNiKGEpe3JldHVybiBhLmxlbmd0aD4xP2Z1bmN0aW9uKGIsYyxkKXt2YXIgZT1hLmxlbmd0aDt3aGlsZShlLS0paWYoIWFbZV0oYixjLGQpKXJldHVybiExO3JldHVybiEwfTphWzBdfWZ1bmN0aW9uIHRiKGEsYixjKXtmb3IodmFyIGQ9MCxlPWIubGVuZ3RoO2U+ZDtkKyspZmIoYSxiW2RdLGMpO3JldHVybiBjfWZ1bmN0aW9uIHViKGEsYixjLGQsZSl7Zm9yKHZhciBmLGc9W10saD0wLGk9YS5sZW5ndGgsaj1udWxsIT1iO2k+aDtoKyspKGY9YVtoXSkmJighY3x8YyhmLGQsZSkpJiYoZy5wdXNoKGYpLGomJmIucHVzaChoKSk7cmV0dXJuIGd9ZnVuY3Rpb24gdmIoYSxiLGMsZCxlLGYpe3JldHVybiBkJiYhZFt1XSYmKGQ9dmIoZCkpLGUmJiFlW3VdJiYoZT12YihlLGYpKSxoYihmdW5jdGlvbihmLGcsaCxpKXt2YXIgaixrLGwsbT1bXSxuPVtdLG89Zy5sZW5ndGgscD1mfHx0YihifHwiKiIsaC5ub2RlVHlwZT9baF06aCxbXSkscT0hYXx8IWYmJmI/cDp1YihwLG0sYSxoLGkpLHI9Yz9lfHwoZj9hOm98fGQpP1tdOmc6cTtpZihjJiZjKHEscixoLGkpLGQpe2o9dWIocixuKSxkKGosW10saCxpKSxrPWoubGVuZ3RoO3doaWxlKGstLSkobD1qW2tdKSYmKHJbbltrXV09IShxW25ba11dPWwpKX1pZihmKXtpZihlfHxhKXtpZihlKXtqPVtdLGs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiZqLnB1c2gocVtrXT1sKTtlKG51bGwscj1bXSxqLGkpfWs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiYoaj1lP0suY2FsbChmLGwpOm1ba10pPi0xJiYoZltqXT0hKGdbal09bCkpfX1lbHNlIHI9dWIocj09PWc/ci5zcGxpY2UobyxyLmxlbmd0aCk6ciksZT9lKG51bGwsZyxyLGkpOkkuYXBwbHkoZyxyKX0pfWZ1bmN0aW9uIHdiKGEpe2Zvcih2YXIgYixjLGUsZj1hLmxlbmd0aCxnPWQucmVsYXRpdmVbYVswXS50eXBlXSxoPWd8fGQucmVsYXRpdmVbIiAiXSxpPWc/MTowLGs9cmIoZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1ifSxoLCEwKSxsPXJiKGZ1bmN0aW9uKGEpe3JldHVybiBLLmNhbGwoYixhKT4tMX0saCwhMCksbT1bZnVuY3Rpb24oYSxjLGQpe3JldHVybiFnJiYoZHx8YyE9PWopfHwoKGI9Yykubm9kZVR5cGU/ayhhLGMsZCk6bChhLGMsZCkpfV07Zj5pO2krKylpZihjPWQucmVsYXRpdmVbYVtpXS50eXBlXSltPVtyYihzYihtKSxjKV07ZWxzZXtpZihjPWQuZmlsdGVyW2FbaV0udHlwZV0uYXBwbHkobnVsbCxhW2ldLm1hdGNoZXMpLGNbdV0pe2ZvcihlPSsraTtmPmU7ZSsrKWlmKGQucmVsYXRpdmVbYVtlXS50eXBlXSlicmVhaztyZXR1cm4gdmIoaT4xJiZzYihtKSxpPjEmJnFiKGEuc2xpY2UoMCxpLTEpLmNvbmNhdCh7dmFsdWU6IiAiPT09YVtpLTJdLnR5cGU/IioiOiIifSkpLnJlcGxhY2UoUiwiJDEiKSxjLGU+aSYmd2IoYS5zbGljZShpLGUpKSxmPmUmJndiKGE9YS5zbGljZShlKSksZj5lJiZxYihhKSl9bS5wdXNoKGMpfXJldHVybiBzYihtKX1mdW5jdGlvbiB4YihhLGIpe3ZhciBjPWIubGVuZ3RoPjAsZT1hLmxlbmd0aD4wLGY9ZnVuY3Rpb24oZixnLGgsaSxrKXt2YXIgbCxtLG8scD0wLHE9IjAiLHI9ZiYmW10scz1bXSx0PWosdT1mfHxlJiZkLmZpbmQuVEFHKCIqIixrKSx2PXcrPW51bGw9PXQ/MTpNYXRoLnJhbmRvbSgpfHwuMSx4PXUubGVuZ3RoO2ZvcihrJiYoaj1nIT09biYmZyk7cSE9PXgmJm51bGwhPShsPXVbcV0pO3ErKyl7aWYoZSYmbCl7bT0wO3doaWxlKG89YVttKytdKWlmKG8obCxnLGgpKXtpLnB1c2gobCk7YnJlYWt9ayYmKHc9dil9YyYmKChsPSFvJiZsKSYmcC0tLGYmJnIucHVzaChsKSl9aWYocCs9cSxjJiZxIT09cCl7bT0wO3doaWxlKG89YlttKytdKW8ocixzLGcsaCk7aWYoZil7aWYocD4wKXdoaWxlKHEtLSlyW3FdfHxzW3FdfHwoc1txXT1HLmNhbGwoaSkpO3M9dWIocyl9SS5hcHBseShpLHMpLGsmJiFmJiZzLmxlbmd0aD4wJiZwK2IubGVuZ3RoPjEmJmZiLnVuaXF1ZVNvcnQoaSl9cmV0dXJuIGsmJih3PXYsaj10KSxyfTtyZXR1cm4gYz9oYihmKTpmfXJldHVybiBoPWZiLmNvbXBpbGU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9W10sZj1BW2ErIiAiXTtpZighZil7Ynx8KGI9ZyhhKSksYz1iLmxlbmd0aDt3aGlsZShjLS0pZj13YihiW2NdKSxmW3VdP2QucHVzaChmKTplLnB1c2goZik7Zj1BKGEseGIoZSxkKSksZi5zZWxlY3Rvcj1hfXJldHVybiBmfSxpPWZiLnNlbGVjdD1mdW5jdGlvbihhLGIsZSxmKXt2YXIgaSxqLGssbCxtLG49ImZ1bmN0aW9uIj09dHlwZW9mIGEmJmEsbz0hZiYmZyhhPW4uc2VsZWN0b3J8fGEpO2lmKGU9ZXx8W10sMT09PW8ubGVuZ3RoKXtpZihqPW9bMF09b1swXS5zbGljZSgwKSxqLmxlbmd0aD4yJiYiSUQiPT09KGs9alswXSkudHlwZSYmYy5nZXRCeUlkJiY5PT09Yi5ub2RlVHlwZSYmcCYmZC5yZWxhdGl2ZVtqWzFdLnR5cGVdKXtpZihiPShkLmZpbmQuSUQoay5tYXRjaGVzWzBdLnJlcGxhY2UoY2IsZGIpLGIpfHxbXSlbMF0sIWIpcmV0dXJuIGU7biYmKGI9Yi5wYXJlbnROb2RlKSxhPWEuc2xpY2Uoai5zaGlmdCgpLnZhbHVlLmxlbmd0aCl9aT1YLm5lZWRzQ29udGV4dC50ZXN0KGEpPzA6ai5sZW5ndGg7d2hpbGUoaS0tKXtpZihrPWpbaV0sZC5yZWxhdGl2ZVtsPWsudHlwZV0pYnJlYWs7aWYoKG09ZC5maW5kW2xdKSYmKGY9bShrLm1hdGNoZXNbMF0ucmVwbGFjZShjYixkYiksYWIudGVzdChqWzBdLnR5cGUpJiZvYihiLnBhcmVudE5vZGUpfHxiKSkpe2lmKGouc3BsaWNlKGksMSksYT1mLmxlbmd0aCYmcWIoaiksIWEpcmV0dXJuIEkuYXBwbHkoZSxmKSxlO2JyZWFrfX19cmV0dXJuKG58fGgoYSxvKSkoZixiLCFwLGUsYWIudGVzdChhKSYmb2IoYi5wYXJlbnROb2RlKXx8YiksZX0sYy5zb3J0U3RhYmxlPXUuc3BsaXQoIiIpLnNvcnQoQikuam9pbigiIik9PT11LGMuZGV0ZWN0RHVwbGljYXRlcz0hIWwsbSgpLGMuc29ydERldGFjaGVkPWliKGZ1bmN0aW9uKGEpe3JldHVybiAxJmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24obi5jcmVhdGVFbGVtZW50KCJkaXYiKSl9KSxpYihmdW5jdGlvbihhKXtyZXR1cm4gYS5pbm5lckhUTUw9IjxhIGhyZWY9JyMnPjwvYT4iLCIjIj09PWEuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoImhyZWYiKX0pfHxqYigidHlwZXxocmVmfGhlaWdodHx3aWR0aCIsZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjP3ZvaWQgMDphLmdldEF0dHJpYnV0ZShiLCJ0eXBlIj09PWIudG9Mb3dlckNhc2UoKT8xOjIpfSksYy5hdHRyaWJ1dGVzJiZpYihmdW5jdGlvbihhKXtyZXR1cm4gYS5pbm5lckhUTUw9IjxpbnB1dC8+IixhLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsIiIpLCIiPT09YS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgidmFsdWUiKX0pfHxqYigidmFsdWUiLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gY3x8ImlucHV0IiE9PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT92b2lkIDA6YS5kZWZhdWx0VmFsdWV9KSxpYihmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YS5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIil9KXx8amIoTCxmdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGM/dm9pZCAwOmFbYl09PT0hMD9iLnRvTG93ZXJDYXNlKCk6KGQ9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpKSYmZC5zcGVjaWZpZWQ/ZC52YWx1ZTpudWxsfSksZmJ9KGEpO24uZmluZD10LG4uZXhwcj10LnNlbGVjdG9ycyxuLmV4cHJbIjoiXT1uLmV4cHIucHNldWRvcyxuLnVuaXF1ZT10LnVuaXF1ZVNvcnQsbi50ZXh0PXQuZ2V0VGV4dCxuLmlzWE1MRG9jPXQuaXNYTUwsbi5jb250YWlucz10LmNvbnRhaW5zO3ZhciB1PW4uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQsdj0vXjwoXHcrKVxzKlwvPz4oPzo8XC9cMT58KSQvLHc9L14uW146I1xbXC4sXSokLztmdW5jdGlvbiB4KGEsYixjKXtpZihuLmlzRnVuY3Rpb24oYikpcmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEsZCl7cmV0dXJuISFiLmNhbGwoYSxkLGEpIT09Y30pO2lmKGIubm9kZVR5cGUpcmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBhPT09YiE9PWN9KTtpZigic3RyaW5nIj09dHlwZW9mIGIpe2lmKHcudGVzdChiKSlyZXR1cm4gbi5maWx0ZXIoYixhLGMpO2I9bi5maWx0ZXIoYixhKX1yZXR1cm4gbi5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGcuY2FsbChiLGEpPj0wIT09Y30pfW4uZmlsdGVyPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1iWzBdO3JldHVybiBjJiYoYT0iOm5vdCgiK2ErIikiKSwxPT09Yi5sZW5ndGgmJjE9PT1kLm5vZGVUeXBlP24uZmluZC5tYXRjaGVzU2VsZWN0b3IoZCxhKT9bZF06W106bi5maW5kLm1hdGNoZXMoYSxuLmdyZXAoYixmdW5jdGlvbihhKXtyZXR1cm4gMT09PWEubm9kZVR5cGV9KSl9LG4uZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKGEpe3ZhciBiLGM9dGhpcy5sZW5ndGgsZD1bXSxlPXRoaXM7aWYoInN0cmluZyIhPXR5cGVvZiBhKXJldHVybiB0aGlzLnB1c2hTdGFjayhuKGEpLmZpbHRlcihmdW5jdGlvbigpe2ZvcihiPTA7Yz5iO2IrKylpZihuLmNvbnRhaW5zKGVbYl0sdGhpcykpcmV0dXJuITB9KSk7Zm9yKGI9MDtjPmI7YisrKW4uZmluZChhLGVbYl0sZCk7cmV0dXJuIGQ9dGhpcy5wdXNoU3RhY2soYz4xP24udW5pcXVlKGQpOmQpLGQuc2VsZWN0b3I9dGhpcy5zZWxlY3Rvcj90aGlzLnNlbGVjdG9yKyIgIithOmEsZH0sZmlsdGVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4KHRoaXMsYXx8W10sITEpKX0sbm90OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4KHRoaXMsYXx8W10sITApKX0saXM6ZnVuY3Rpb24oYSl7cmV0dXJuISF4KHRoaXMsInN0cmluZyI9PXR5cGVvZiBhJiZ1LnRlc3QoYSk/bihhKTphfHxbXSwhMSkubGVuZ3RofX0pO3ZhciB5LHo9L14oPzpccyooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0qKSkkLyxBPW4uZm4uaW5pdD1mdW5jdGlvbihhLGIpe3ZhciBjLGQ7aWYoIWEpcmV0dXJuIHRoaXM7aWYoInN0cmluZyI9PXR5cGVvZiBhKXtpZihjPSI8Ij09PWFbMF0mJiI+Ij09PWFbYS5sZW5ndGgtMV0mJmEubGVuZ3RoPj0zP1tudWxsLGEsbnVsbF06ei5leGVjKGEpLCFjfHwhY1sxXSYmYilyZXR1cm4hYnx8Yi5qcXVlcnk/KGJ8fHkpLmZpbmQoYSk6dGhpcy5jb25zdHJ1Y3RvcihiKS5maW5kKGEpO2lmKGNbMV0pe2lmKGI9YiBpbnN0YW5jZW9mIG4/YlswXTpiLG4ubWVyZ2UodGhpcyxuLnBhcnNlSFRNTChjWzFdLGImJmIubm9kZVR5cGU/Yi5vd25lckRvY3VtZW50fHxiOmwsITApKSx2LnRlc3QoY1sxXSkmJm4uaXNQbGFpbk9iamVjdChiKSlmb3IoYyBpbiBiKW4uaXNGdW5jdGlvbih0aGlzW2NdKT90aGlzW2NdKGJbY10pOnRoaXMuYXR0cihjLGJbY10pO3JldHVybiB0aGlzfXJldHVybiBkPWwuZ2V0RWxlbWVudEJ5SWQoY1syXSksZCYmZC5wYXJlbnROb2RlJiYodGhpcy5sZW5ndGg9MSx0aGlzWzBdPWQpLHRoaXMuY29udGV4dD1sLHRoaXMuc2VsZWN0b3I9YSx0aGlzfXJldHVybiBhLm5vZGVUeXBlPyh0aGlzLmNvbnRleHQ9dGhpc1swXT1hLHRoaXMubGVuZ3RoPTEsdGhpcyk6bi5pc0Z1bmN0aW9uKGEpPyJ1bmRlZmluZWQiIT10eXBlb2YgeS5yZWFkeT95LnJlYWR5KGEpOmEobik6KHZvaWQgMCE9PWEuc2VsZWN0b3ImJih0aGlzLnNlbGVjdG9yPWEuc2VsZWN0b3IsdGhpcy5jb250ZXh0PWEuY29udGV4dCksbi5tYWtlQXJyYXkoYSx0aGlzKSl9O0EucHJvdG90eXBlPW4uZm4seT1uKGwpO3ZhciBCPS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLEM9e2NoaWxkcmVuOiEwLGNvbnRlbnRzOiEwLG5leHQ6ITAscHJldjohMH07bi5leHRlbmQoe2RpcjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9W10sZT12b2lkIDAhPT1jO3doaWxlKChhPWFbYl0pJiY5IT09YS5ub2RlVHlwZSlpZigxPT09YS5ub2RlVHlwZSl7aWYoZSYmbihhKS5pcyhjKSlicmVhaztkLnB1c2goYSl9cmV0dXJuIGR9LHNpYmxpbmc6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W107YTthPWEubmV4dFNpYmxpbmcpMT09PWEubm9kZVR5cGUmJmEhPT1iJiZjLnB1c2goYSk7cmV0dXJuIGN9fSksbi5mbi5leHRlbmQoe2hhczpmdW5jdGlvbihhKXt2YXIgYj1uKGEsdGhpcyksYz1iLmxlbmd0aDtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodmFyIGE9MDtjPmE7YSsrKWlmKG4uY29udGFpbnModGhpcyxiW2FdKSlyZXR1cm4hMH0pfSxjbG9zZXN0OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9MCxlPXRoaXMubGVuZ3RoLGY9W10sZz11LnRlc3QoYSl8fCJzdHJpbmciIT10eXBlb2YgYT9uKGEsYnx8dGhpcy5jb250ZXh0KTowO2U+ZDtkKyspZm9yKGM9dGhpc1tkXTtjJiZjIT09YjtjPWMucGFyZW50Tm9kZSlpZihjLm5vZGVUeXBlPDExJiYoZz9nLmluZGV4KGMpPi0xOjE9PT1jLm5vZGVUeXBlJiZuLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGMsYSkpKXtmLnB1c2goYyk7YnJlYWt9cmV0dXJuIHRoaXMucHVzaFN0YWNrKGYubGVuZ3RoPjE/bi51bmlxdWUoZik6Zil9LGluZGV4OmZ1bmN0aW9uKGEpe3JldHVybiBhPyJzdHJpbmciPT10eXBlb2YgYT9nLmNhbGwobihhKSx0aGlzWzBdKTpnLmNhbGwodGhpcyxhLmpxdWVyeT9hWzBdOmEpOnRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZT90aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aDotMX0sYWRkOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4udW5pcXVlKG4ubWVyZ2UodGhpcy5nZXQoKSxuKGEsYikpKSl9LGFkZEJhY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWE/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoYSkpfX0pO2Z1bmN0aW9uIEQoYSxiKXt3aGlsZSgoYT1hW2JdKSYmMSE9PWEubm9kZVR5cGUpO3JldHVybiBhfW4uZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmMTEhPT1iLm5vZGVUeXBlP2I6bnVsbH0scGFyZW50czpmdW5jdGlvbihhKXtyZXR1cm4gbi5kaXIoYSwicGFyZW50Tm9kZSIpfSxwYXJlbnRzVW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLmRpcihhLCJwYXJlbnROb2RlIixjKX0sbmV4dDpmdW5jdGlvbihhKXtyZXR1cm4gRChhLCJuZXh0U2libGluZyIpfSxwcmV2OmZ1bmN0aW9uKGEpe3JldHVybiBEKGEsInByZXZpb3VzU2libGluZyIpfSxuZXh0QWxsOmZ1bmN0aW9uKGEpe3JldHVybiBuLmRpcihhLCJuZXh0U2libGluZyIpfSxwcmV2QWxsOmZ1bmN0aW9uKGEpe3JldHVybiBuLmRpcihhLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dFVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5kaXIoYSwibmV4dFNpYmxpbmciLGMpfSxwcmV2VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLmRpcihhLCJwcmV2aW91c1NpYmxpbmciLGMpfSxzaWJsaW5nczpmdW5jdGlvbihhKXtyZXR1cm4gbi5zaWJsaW5nKChhLnBhcmVudE5vZGV8fHt9KS5maXJzdENoaWxkLGEpfSxjaGlsZHJlbjpmdW5jdGlvbihhKXtyZXR1cm4gbi5zaWJsaW5nKGEuZmlyc3RDaGlsZCl9LGNvbnRlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRlbnREb2N1bWVudHx8bi5tZXJnZShbXSxhLmNoaWxkTm9kZXMpfX0sZnVuY3Rpb24oYSxiKXtuLmZuW2FdPWZ1bmN0aW9uKGMsZCl7dmFyIGU9bi5tYXAodGhpcyxiLGMpO3JldHVybiJVbnRpbCIhPT1hLnNsaWNlKC01KSYmKGQ9YyksZCYmInN0cmluZyI9PXR5cGVvZiBkJiYoZT1uLmZpbHRlcihkLGUpKSx0aGlzLmxlbmd0aD4xJiYoQ1thXXx8bi51bmlxdWUoZSksQi50ZXN0KGEpJiZlLnJldmVyc2UoKSksdGhpcy5wdXNoU3RhY2soZSl9fSk7dmFyIEU9L1xTKy9nLEY9e307ZnVuY3Rpb24gRyhhKXt2YXIgYj1GW2FdPXt9O3JldHVybiBuLmVhY2goYS5tYXRjaChFKXx8W10sZnVuY3Rpb24oYSxjKXtiW2NdPSEwfSksYn1uLkNhbGxiYWNrcz1mdW5jdGlvbihhKXthPSJzdHJpbmciPT10eXBlb2YgYT9GW2FdfHxHKGEpOm4uZXh0ZW5kKHt9LGEpO3ZhciBiLGMsZCxlLGYsZyxoPVtdLGk9IWEub25jZSYmW10saj1mdW5jdGlvbihsKXtmb3IoYj1hLm1lbW9yeSYmbCxjPSEwLGc9ZXx8MCxlPTAsZj1oLmxlbmd0aCxkPSEwO2gmJmY+ZztnKyspaWYoaFtnXS5hcHBseShsWzBdLGxbMV0pPT09ITEmJmEuc3RvcE9uRmFsc2Upe2I9ITE7YnJlYWt9ZD0hMSxoJiYoaT9pLmxlbmd0aCYmaihpLnNoaWZ0KCkpOmI/aD1bXTprLmRpc2FibGUoKSl9LGs9e2FkZDpmdW5jdGlvbigpe2lmKGgpe3ZhciBjPWgubGVuZ3RoOyFmdW5jdGlvbiBnKGIpe24uZWFjaChiLGZ1bmN0aW9uKGIsYyl7dmFyIGQ9bi50eXBlKGMpOyJmdW5jdGlvbiI9PT1kP2EudW5pcXVlJiZrLmhhcyhjKXx8aC5wdXNoKGMpOmMmJmMubGVuZ3RoJiYic3RyaW5nIiE9PWQmJmcoYyl9KX0oYXJndW1lbnRzKSxkP2Y9aC5sZW5ndGg6YiYmKGU9YyxqKGIpKX1yZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIGgmJm4uZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oYSxiKXt2YXIgYzt3aGlsZSgoYz1uLmluQXJyYXkoYixoLGMpKT4tMSloLnNwbGljZShjLDEpLGQmJihmPj1jJiZmLS0sZz49YyYmZy0tKX0pLHRoaXN9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gYT9uLmluQXJyYXkoYSxoKT4tMTohKCFofHwhaC5sZW5ndGgpfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBoPVtdLGY9MCx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGg9aT1iPXZvaWQgMCx0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFofSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIGk9dm9pZCAwLGJ8fGsuZGlzYWJsZSgpLHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiFpfSxmaXJlV2l0aDpmdW5jdGlvbihhLGIpe3JldHVybiFofHxjJiYhaXx8KGI9Ynx8W10sYj1bYSxiLnNsaWNlP2Iuc2xpY2UoKTpiXSxkP2kucHVzaChiKTpqKGIpKSx0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGsuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpLHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFjfX07cmV0dXJuIGt9LG4uZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihhKXt2YXIgYj1bWyJyZXNvbHZlIiwiZG9uZSIsbi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIixuLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwicmVqZWN0ZWQiXSxbIm5vdGlmeSIsInByb2dyZXNzIixuLkNhbGxiYWNrcygibWVtb3J5IildXSxjPSJwZW5kaW5nIixkPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBjfSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gZS5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LHRoZW46ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7cmV0dXJuIG4uRGVmZXJyZWQoZnVuY3Rpb24oYyl7bi5lYWNoKGIsZnVuY3Rpb24oYixmKXt2YXIgZz1uLmlzRnVuY3Rpb24oYVtiXSkmJmFbYl07ZVtmWzFdXShmdW5jdGlvbigpe3ZhciBhPWcmJmcuYXBwbHkodGhpcyxhcmd1bWVudHMpO2EmJm4uaXNGdW5jdGlvbihhLnByb21pc2UpP2EucHJvbWlzZSgpLmRvbmUoYy5yZXNvbHZlKS5mYWlsKGMucmVqZWN0KS5wcm9ncmVzcyhjLm5vdGlmeSk6Y1tmWzBdKyJXaXRoIl0odGhpcz09PWQ/Yy5wcm9taXNlKCk6dGhpcyxnP1thXTphcmd1bWVudHMpfSl9KSxhPW51bGx9KS5wcm9taXNlKCl9LHByb21pc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWE/bi5leHRlbmQoYSxkKTpkfX0sZT17fTtyZXR1cm4gZC5waXBlPWQudGhlbixuLmVhY2goYixmdW5jdGlvbihhLGYpe3ZhciBnPWZbMl0saD1mWzNdO2RbZlsxXV09Zy5hZGQsaCYmZy5hZGQoZnVuY3Rpb24oKXtjPWh9LGJbMV5hXVsyXS5kaXNhYmxlLGJbMl1bMl0ubG9jayksZVtmWzBdXT1mdW5jdGlvbigpe3JldHVybiBlW2ZbMF0rIldpdGgiXSh0aGlzPT09ZT9kOnRoaXMsYXJndW1lbnRzKSx0aGlzfSxlW2ZbMF0rIldpdGgiXT1nLmZpcmVXaXRofSksZC5wcm9taXNlKGUpLGEmJmEuY2FsbChlLGUpLGV9LHdoZW46ZnVuY3Rpb24oYSl7dmFyIGI9MCxjPWQuY2FsbChhcmd1bWVudHMpLGU9Yy5sZW5ndGgsZj0xIT09ZXx8YSYmbi5pc0Z1bmN0aW9uKGEucHJvbWlzZSk/ZTowLGc9MT09PWY/YTpuLkRlZmVycmVkKCksaD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGUpe2JbYV09dGhpcyxjW2FdPWFyZ3VtZW50cy5sZW5ndGg+MT9kLmNhbGwoYXJndW1lbnRzKTplLGM9PT1pP2cubm90aWZ5V2l0aChiLGMpOi0tZnx8Zy5yZXNvbHZlV2l0aChiLGMpfX0saSxqLGs7aWYoZT4xKWZvcihpPW5ldyBBcnJheShlKSxqPW5ldyBBcnJheShlKSxrPW5ldyBBcnJheShlKTtlPmI7YisrKWNbYl0mJm4uaXNGdW5jdGlvbihjW2JdLnByb21pc2UpP2NbYl0ucHJvbWlzZSgpLmRvbmUoaChiLGssYykpLmZhaWwoZy5yZWplY3QpLnByb2dyZXNzKGgoYixqLGkpKTotLWY7cmV0dXJuIGZ8fGcucmVzb2x2ZVdpdGgoayxjKSxnLnByb21pc2UoKX19KTt2YXIgSDtuLmZuLnJlYWR5PWZ1bmN0aW9uKGEpe3JldHVybiBuLnJlYWR5LnByb21pc2UoKS5kb25lKGEpLHRoaXN9LG4uZXh0ZW5kKHtpc1JlYWR5OiExLHJlYWR5V2FpdDoxLGhvbGRSZWFkeTpmdW5jdGlvbihhKXthP24ucmVhZHlXYWl0Kys6bi5yZWFkeSghMCl9LHJlYWR5OmZ1bmN0aW9uKGEpeyhhPT09ITA/LS1uLnJlYWR5V2FpdDpuLmlzUmVhZHkpfHwobi5pc1JlYWR5PSEwLGEhPT0hMCYmLS1uLnJlYWR5V2FpdD4wfHwoSC5yZXNvbHZlV2l0aChsLFtuXSksbi5mbi50cmlnZ2VySGFuZGxlciYmKG4obCkudHJpZ2dlckhhbmRsZXIoInJlYWR5IiksbihsKS5vZmYoInJlYWR5IikpKSl9fSk7ZnVuY3Rpb24gSSgpe2wucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsSSwhMSksYS5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIixJLCExKSxuLnJlYWR5KCl9bi5yZWFkeS5wcm9taXNlPWZ1bmN0aW9uKGIpe3JldHVybiBIfHwoSD1uLkRlZmVycmVkKCksImNvbXBsZXRlIj09PWwucmVhZHlTdGF0ZT9zZXRUaW1lb3V0KG4ucmVhZHkpOihsLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLEksITEpLGEuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsSSwhMSkpKSxILnByb21pc2UoYil9LG4ucmVhZHkucHJvbWlzZSgpO3ZhciBKPW4uYWNjZXNzPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe3ZhciBoPTAsaT1hLmxlbmd0aCxqPW51bGw9PWM7aWYoIm9iamVjdCI9PT1uLnR5cGUoYykpe2U9ITA7Zm9yKGggaW4gYyluLmFjY2VzcyhhLGIsaCxjW2hdLCEwLGYsZyl9ZWxzZSBpZih2b2lkIDAhPT1kJiYoZT0hMCxuLmlzRnVuY3Rpb24oZCl8fChnPSEwKSxqJiYoZz8oYi5jYWxsKGEsZCksYj1udWxsKTooaj1iLGI9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBqLmNhbGwobihhKSxjKX0pKSxiKSlmb3IoO2k+aDtoKyspYihhW2hdLGMsZz9kOmQuY2FsbChhW2hdLGgsYihhW2hdLGMpKSk7cmV0dXJuIGU/YTpqP2IuY2FsbChhKTppP2IoYVswXSxjKTpmfTtuLmFjY2VwdERhdGE9ZnVuY3Rpb24oYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlfHw5PT09YS5ub2RlVHlwZXx8ISthLm5vZGVUeXBlfTtmdW5jdGlvbiBLKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMuY2FjaGU9e30sMCx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJue319fSksdGhpcy5leHBhbmRvPW4uZXhwYW5kbytNYXRoLnJhbmRvbSgpfUsudWlkPTEsSy5hY2NlcHRzPW4uYWNjZXB0RGF0YSxLLnByb3RvdHlwZT17a2V5OmZ1bmN0aW9uKGEpe2lmKCFLLmFjY2VwdHMoYSkpcmV0dXJuIDA7dmFyIGI9e30sYz1hW3RoaXMuZXhwYW5kb107aWYoIWMpe2M9Sy51aWQrKzt0cnl7Ylt0aGlzLmV4cGFuZG9dPXt2YWx1ZTpjfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhhLGIpfWNhdGNoKGQpe2JbdGhpcy5leHBhbmRvXT1jLG4uZXh0ZW5kKGEsYil9fXJldHVybiB0aGlzLmNhY2hlW2NdfHwodGhpcy5jYWNoZVtjXT17fSksY30sc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPXRoaXMua2V5KGEpLGY9dGhpcy5jYWNoZVtlXTtpZigic3RyaW5nIj09dHlwZW9mIGIpZltiXT1jO2Vsc2UgaWYobi5pc0VtcHR5T2JqZWN0KGYpKW4uZXh0ZW5kKHRoaXMuY2FjaGVbZV0sYik7ZWxzZSBmb3IoZCBpbiBiKWZbZF09YltkXTtyZXR1cm4gZn0sZ2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jYWNoZVt0aGlzLmtleShhKV07cmV0dXJuIHZvaWQgMD09PWI/YzpjW2JdfSxhY2Nlc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiB2b2lkIDA9PT1ifHxiJiYic3RyaW5nIj09dHlwZW9mIGImJnZvaWQgMD09PWM/KGQ9dGhpcy5nZXQoYSxiKSx2b2lkIDAhPT1kP2Q6dGhpcy5nZXQoYSxuLmNhbWVsQ2FzZShiKSkpOih0aGlzLnNldChhLGIsYyksdm9pZCAwIT09Yz9jOmIpfSxyZW1vdmU6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj10aGlzLmtleShhKSxnPXRoaXMuY2FjaGVbZl07aWYodm9pZCAwPT09Yil0aGlzLmNhY2hlW2ZdPXt9O2Vsc2V7bi5pc0FycmF5KGIpP2Q9Yi5jb25jYXQoYi5tYXAobi5jYW1lbENhc2UpKTooZT1uLmNhbWVsQ2FzZShiKSxiIGluIGc/ZD1bYixlXTooZD1lLGQ9ZCBpbiBnP1tkXTpkLm1hdGNoKEUpfHxbXSkpLGM9ZC5sZW5ndGg7d2hpbGUoYy0tKWRlbGV0ZSBnW2RbY11dfX0saGFzRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4hbi5pc0VtcHR5T2JqZWN0KHRoaXMuY2FjaGVbYVt0aGlzLmV4cGFuZG9dXXx8e30pfSxkaXNjYXJkOmZ1bmN0aW9uKGEpe2FbdGhpcy5leHBhbmRvXSYmZGVsZXRlIHRoaXMuY2FjaGVbYVt0aGlzLmV4cGFuZG9dXX19O3ZhciBMPW5ldyBLLE09bmV3IEssTj0vXig/Olx7W1x3XFddKlx9fFxbW1x3XFddKlxdKSQvLE89LyhbQS1aXSkvZztmdW5jdGlvbiBQKGEsYixjKXt2YXIgZDtpZih2b2lkIDA9PT1jJiYxPT09YS5ub2RlVHlwZSlpZihkPSJkYXRhLSIrYi5yZXBsYWNlKE8sIi0kMSIpLnRvTG93ZXJDYXNlKCksYz1hLmdldEF0dHJpYnV0ZShkKSwic3RyaW5nIj09dHlwZW9mIGMpe3RyeXtjPSJ0cnVlIj09PWM/ITA6ImZhbHNlIj09PWM/ITE6Im51bGwiPT09Yz9udWxsOitjKyIiPT09Yz8rYzpOLnRlc3QoYyk/bi5wYXJzZUpTT04oYyk6Y31jYXRjaChlKXt9TS5zZXQoYSxiLGMpfWVsc2UgYz12b2lkIDA7cmV0dXJuIGN9bi5leHRlbmQoe2hhc0RhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIE0uaGFzRGF0YShhKXx8TC5oYXNEYXRhKGEpfSxkYXRhOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gTS5hY2Nlc3MoYSxiLGMpfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEsYil7TS5yZW1vdmUoYSxiKQp9LF9kYXRhOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gTC5hY2Nlc3MoYSxiLGMpfSxfcmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe0wucmVtb3ZlKGEsYil9fSksbi5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj10aGlzWzBdLGc9ZiYmZi5hdHRyaWJ1dGVzO2lmKHZvaWQgMD09PWEpe2lmKHRoaXMubGVuZ3RoJiYoZT1NLmdldChmKSwxPT09Zi5ub2RlVHlwZSYmIUwuZ2V0KGYsImhhc0RhdGFBdHRycyIpKSl7Yz1nLmxlbmd0aDt3aGlsZShjLS0pZ1tjXSYmKGQ9Z1tjXS5uYW1lLDA9PT1kLmluZGV4T2YoImRhdGEtIikmJihkPW4uY2FtZWxDYXNlKGQuc2xpY2UoNSkpLFAoZixkLGVbZF0pKSk7TC5zZXQoZiwiaGFzRGF0YUF0dHJzIiwhMCl9cmV0dXJuIGV9cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBhP3RoaXMuZWFjaChmdW5jdGlvbigpe00uc2V0KHRoaXMsYSl9KTpKKHRoaXMsZnVuY3Rpb24oYil7dmFyIGMsZD1uLmNhbWVsQ2FzZShhKTtpZihmJiZ2b2lkIDA9PT1iKXtpZihjPU0uZ2V0KGYsYSksdm9pZCAwIT09YylyZXR1cm4gYztpZihjPU0uZ2V0KGYsZCksdm9pZCAwIT09YylyZXR1cm4gYztpZihjPVAoZixkLHZvaWQgMCksdm9pZCAwIT09YylyZXR1cm4gY31lbHNlIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPU0uZ2V0KHRoaXMsZCk7TS5zZXQodGhpcyxkLGIpLC0xIT09YS5pbmRleE9mKCItIikmJnZvaWQgMCE9PWMmJk0uc2V0KHRoaXMsYSxiKX0pfSxudWxsLGIsYXJndW1lbnRzLmxlbmd0aD4xLG51bGwsITApfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtNLnJlbW92ZSh0aGlzLGEpfSl9fSksbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYT8oYj0oYnx8ImZ4IikrInF1ZXVlIixkPUwuZ2V0KGEsYiksYyYmKCFkfHxuLmlzQXJyYXkoYyk/ZD1MLmFjY2VzcyhhLGIsbi5tYWtlQXJyYXkoYykpOmQucHVzaChjKSksZHx8W10pOnZvaWQgMH0sZGVxdWV1ZTpmdW5jdGlvbihhLGIpe2I9Ynx8ImZ4Ijt2YXIgYz1uLnF1ZXVlKGEsYiksZD1jLmxlbmd0aCxlPWMuc2hpZnQoKSxmPW4uX3F1ZXVlSG9va3MoYSxiKSxnPWZ1bmN0aW9uKCl7bi5kZXF1ZXVlKGEsYil9OyJpbnByb2dyZXNzIj09PWUmJihlPWMuc2hpZnQoKSxkLS0pLGUmJigiZngiPT09YiYmYy51bnNoaWZ0KCJpbnByb2dyZXNzIiksZGVsZXRlIGYuc3RvcCxlLmNhbGwoYSxnLGYpKSwhZCYmZiYmZi5lbXB0eS5maXJlKCl9LF9xdWV1ZUhvb2tzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YisicXVldWVIb29rcyI7cmV0dXJuIEwuZ2V0KGEsYyl8fEwuYWNjZXNzKGEsYyx7ZW1wdHk6bi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IikuYWRkKGZ1bmN0aW9uKCl7TC5yZW1vdmUoYSxbYisicXVldWUiLGNdKX0pfSl9fSksbi5mbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYil7dmFyIGM9MjtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGEmJihiPWEsYT0iZngiLGMtLSksYXJndW1lbnRzLmxlbmd0aDxjP24ucXVldWUodGhpc1swXSxhKTp2b2lkIDA9PT1iP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9bi5xdWV1ZSh0aGlzLGEsYik7bi5fcXVldWVIb29rcyh0aGlzLGEpLCJmeCI9PT1hJiYiaW5wcm9ncmVzcyIhPT1jWzBdJiZuLmRlcXVldWUodGhpcyxhKX0pfSxkZXF1ZXVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmRlcXVldWUodGhpcyxhKX0pfSxjbGVhclF1ZXVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnF1ZXVlKGF8fCJmeCIsW10pfSxwcm9taXNlOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD0xLGU9bi5EZWZlcnJlZCgpLGY9dGhpcyxnPXRoaXMubGVuZ3RoLGg9ZnVuY3Rpb24oKXstLWR8fGUucmVzb2x2ZVdpdGgoZixbZl0pfTsic3RyaW5nIiE9dHlwZW9mIGEmJihiPWEsYT12b2lkIDApLGE9YXx8ImZ4Ijt3aGlsZShnLS0pYz1MLmdldChmW2ddLGErInF1ZXVlSG9va3MiKSxjJiZjLmVtcHR5JiYoZCsrLGMuZW1wdHkuYWRkKGgpKTtyZXR1cm4gaCgpLGUucHJvbWlzZShiKX19KTt2YXIgUT0vWystXT8oPzpcZCpcLnwpXGQrKD86W2VFXVsrLV0/XGQrfCkvLnNvdXJjZSxSPVsiVG9wIiwiUmlnaHQiLCJCb3R0b20iLCJMZWZ0Il0sUz1mdW5jdGlvbihhLGIpe3JldHVybiBhPWJ8fGEsIm5vbmUiPT09bi5jc3MoYSwiZGlzcGxheSIpfHwhbi5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSl9LFQ9L14oPzpjaGVja2JveHxyYWRpbykkL2k7IWZ1bmN0aW9uKCl7dmFyIGE9bC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksYj1hLmFwcGVuZENoaWxkKGwuY3JlYXRlRWxlbWVudCgiZGl2IikpLGM9bC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2Muc2V0QXR0cmlidXRlKCJ0eXBlIiwicmFkaW8iKSxjLnNldEF0dHJpYnV0ZSgiY2hlY2tlZCIsImNoZWNrZWQiKSxjLnNldEF0dHJpYnV0ZSgibmFtZSIsInQiKSxiLmFwcGVuZENoaWxkKGMpLGsuY2hlY2tDbG9uZT1iLmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCxiLmlubmVySFRNTD0iPHRleHRhcmVhPng8L3RleHRhcmVhPiIsay5ub0Nsb25lQ2hlY2tlZD0hIWIuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlfSgpO3ZhciBVPSJ1bmRlZmluZWQiO2suZm9jdXNpbkJ1YmJsZXM9Im9uZm9jdXNpbiJpbiBhO3ZhciBWPS9ea2V5LyxXPS9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudSl8Y2xpY2svLFg9L14oPzpmb2N1c2luZm9jdXN8Zm9jdXNvdXRibHVyKSQvLFk9L14oW14uXSopKD86XC4oLispfCkkLztmdW5jdGlvbiBaKCl7cmV0dXJuITB9ZnVuY3Rpb24gJCgpe3JldHVybiExfWZ1bmN0aW9uIF8oKXt0cnl7cmV0dXJuIGwuYWN0aXZlRWxlbWVudH1jYXRjaChhKXt9fW4uZXZlbnQ9e2dsb2JhbDp7fSxhZGQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG8scCxxLHI9TC5nZXQoYSk7aWYocil7Yy5oYW5kbGVyJiYoZj1jLGM9Zi5oYW5kbGVyLGU9Zi5zZWxlY3RvciksYy5ndWlkfHwoYy5ndWlkPW4uZ3VpZCsrKSwoaT1yLmV2ZW50cyl8fChpPXIuZXZlbnRzPXt9KSwoZz1yLmhhbmRsZSl8fChnPXIuaGFuZGxlPWZ1bmN0aW9uKGIpe3JldHVybiB0eXBlb2YgbiE9PVUmJm4uZXZlbnQudHJpZ2dlcmVkIT09Yi50eXBlP24uZXZlbnQuZGlzcGF0Y2guYXBwbHkoYSxhcmd1bWVudHMpOnZvaWQgMH0pLGI9KGJ8fCIiKS5tYXRjaChFKXx8WyIiXSxqPWIubGVuZ3RoO3doaWxlKGotLSloPVkuZXhlYyhiW2pdKXx8W10sbz1xPWhbMV0scD0oaFsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLG8mJihsPW4uZXZlbnQuc3BlY2lhbFtvXXx8e30sbz0oZT9sLmRlbGVnYXRlVHlwZTpsLmJpbmRUeXBlKXx8byxsPW4uZXZlbnQuc3BlY2lhbFtvXXx8e30saz1uLmV4dGVuZCh7dHlwZTpvLG9yaWdUeXBlOnEsZGF0YTpkLGhhbmRsZXI6YyxndWlkOmMuZ3VpZCxzZWxlY3RvcjplLG5lZWRzQ29udGV4dDplJiZuLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QoZSksbmFtZXNwYWNlOnAuam9pbigiLiIpfSxmKSwobT1pW29dKXx8KG09aVtvXT1bXSxtLmRlbGVnYXRlQ291bnQ9MCxsLnNldHVwJiZsLnNldHVwLmNhbGwoYSxkLHAsZykhPT0hMXx8YS5hZGRFdmVudExpc3RlbmVyJiZhLmFkZEV2ZW50TGlzdGVuZXIobyxnLCExKSksbC5hZGQmJihsLmFkZC5jYWxsKGEsayksay5oYW5kbGVyLmd1aWR8fChrLmhhbmRsZXIuZ3VpZD1jLmd1aWQpKSxlP20uc3BsaWNlKG0uZGVsZWdhdGVDb3VudCsrLDAsayk6bS5wdXNoKGspLG4uZXZlbnQuZ2xvYmFsW29dPSEwKX19LHJlbW92ZTpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG0sbyxwLHEscj1MLmhhc0RhdGEoYSkmJkwuZ2V0KGEpO2lmKHImJihpPXIuZXZlbnRzKSl7Yj0oYnx8IiIpLm1hdGNoKEUpfHxbIiJdLGo9Yi5sZW5ndGg7d2hpbGUoai0tKWlmKGg9WS5leGVjKGJbal0pfHxbXSxvPXE9aFsxXSxwPShoWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksbyl7bD1uLmV2ZW50LnNwZWNpYWxbb118fHt9LG89KGQ/bC5kZWxlZ2F0ZVR5cGU6bC5iaW5kVHlwZSl8fG8sbT1pW29dfHxbXSxoPWhbMl0mJm5ldyBSZWdFeHAoIihefFxcLikiK3Auam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIiksZz1mPW0ubGVuZ3RoO3doaWxlKGYtLSlrPW1bZl0sIWUmJnEhPT1rLm9yaWdUeXBlfHxjJiZjLmd1aWQhPT1rLmd1aWR8fGgmJiFoLnRlc3Qoay5uYW1lc3BhY2UpfHxkJiZkIT09ay5zZWxlY3RvciYmKCIqKiIhPT1kfHwhay5zZWxlY3Rvcil8fChtLnNwbGljZShmLDEpLGsuc2VsZWN0b3ImJm0uZGVsZWdhdGVDb3VudC0tLGwucmVtb3ZlJiZsLnJlbW92ZS5jYWxsKGEsaykpO2cmJiFtLmxlbmd0aCYmKGwudGVhcmRvd24mJmwudGVhcmRvd24uY2FsbChhLHAsci5oYW5kbGUpIT09ITF8fG4ucmVtb3ZlRXZlbnQoYSxvLHIuaGFuZGxlKSxkZWxldGUgaVtvXSl9ZWxzZSBmb3IobyBpbiBpKW4uZXZlbnQucmVtb3ZlKGEsbytiW2pdLGMsZCwhMCk7bi5pc0VtcHR5T2JqZWN0KGkpJiYoZGVsZXRlIHIuaGFuZGxlLEwucmVtb3ZlKGEsImV2ZW50cyIpKX19LHRyaWdnZXI6ZnVuY3Rpb24oYixjLGQsZSl7dmFyIGYsZyxoLGksayxtLG8scD1bZHx8bF0scT1qLmNhbGwoYiwidHlwZSIpP2IudHlwZTpiLHI9ai5jYWxsKGIsIm5hbWVzcGFjZSIpP2IubmFtZXNwYWNlLnNwbGl0KCIuIik6W107aWYoZz1oPWQ9ZHx8bCwzIT09ZC5ub2RlVHlwZSYmOCE9PWQubm9kZVR5cGUmJiFYLnRlc3QocStuLmV2ZW50LnRyaWdnZXJlZCkmJihxLmluZGV4T2YoIi4iKT49MCYmKHI9cS5zcGxpdCgiLiIpLHE9ci5zaGlmdCgpLHIuc29ydCgpKSxrPXEuaW5kZXhPZigiOiIpPDAmJiJvbiIrcSxiPWJbbi5leHBhbmRvXT9iOm5ldyBuLkV2ZW50KHEsIm9iamVjdCI9PXR5cGVvZiBiJiZiKSxiLmlzVHJpZ2dlcj1lPzI6MyxiLm5hbWVzcGFjZT1yLmpvaW4oIi4iKSxiLm5hbWVzcGFjZV9yZT1iLm5hbWVzcGFjZT9uZXcgUmVnRXhwKCIoXnxcXC4pIityLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpOm51bGwsYi5yZXN1bHQ9dm9pZCAwLGIudGFyZ2V0fHwoYi50YXJnZXQ9ZCksYz1udWxsPT1jP1tiXTpuLm1ha2VBcnJheShjLFtiXSksbz1uLmV2ZW50LnNwZWNpYWxbcV18fHt9LGV8fCFvLnRyaWdnZXJ8fG8udHJpZ2dlci5hcHBseShkLGMpIT09ITEpKXtpZighZSYmIW8ubm9CdWJibGUmJiFuLmlzV2luZG93KGQpKXtmb3IoaT1vLmRlbGVnYXRlVHlwZXx8cSxYLnRlc3QoaStxKXx8KGc9Zy5wYXJlbnROb2RlKTtnO2c9Zy5wYXJlbnROb2RlKXAucHVzaChnKSxoPWc7aD09PShkLm93bmVyRG9jdW1lbnR8fGwpJiZwLnB1c2goaC5kZWZhdWx0Vmlld3x8aC5wYXJlbnRXaW5kb3d8fGEpfWY9MDt3aGlsZSgoZz1wW2YrK10pJiYhYi5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKWIudHlwZT1mPjE/aTpvLmJpbmRUeXBlfHxxLG09KEwuZ2V0KGcsImV2ZW50cyIpfHx7fSlbYi50eXBlXSYmTC5nZXQoZywiaGFuZGxlIiksbSYmbS5hcHBseShnLGMpLG09ayYmZ1trXSxtJiZtLmFwcGx5JiZuLmFjY2VwdERhdGEoZykmJihiLnJlc3VsdD1tLmFwcGx5KGcsYyksYi5yZXN1bHQ9PT0hMSYmYi5wcmV2ZW50RGVmYXVsdCgpKTtyZXR1cm4gYi50eXBlPXEsZXx8Yi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8by5fZGVmYXVsdCYmby5fZGVmYXVsdC5hcHBseShwLnBvcCgpLGMpIT09ITF8fCFuLmFjY2VwdERhdGEoZCl8fGsmJm4uaXNGdW5jdGlvbihkW3FdKSYmIW4uaXNXaW5kb3coZCkmJihoPWRba10saCYmKGRba109bnVsbCksbi5ldmVudC50cmlnZ2VyZWQ9cSxkW3FdKCksbi5ldmVudC50cmlnZ2VyZWQ9dm9pZCAwLGgmJihkW2tdPWgpKSxiLnJlc3VsdH19LGRpc3BhdGNoOmZ1bmN0aW9uKGEpe2E9bi5ldmVudC5maXgoYSk7dmFyIGIsYyxlLGYsZyxoPVtdLGk9ZC5jYWxsKGFyZ3VtZW50cyksaj0oTC5nZXQodGhpcywiZXZlbnRzIil8fHt9KVthLnR5cGVdfHxbXSxrPW4uZXZlbnQuc3BlY2lhbFthLnR5cGVdfHx7fTtpZihpWzBdPWEsYS5kZWxlZ2F0ZVRhcmdldD10aGlzLCFrLnByZURpc3BhdGNofHxrLnByZURpc3BhdGNoLmNhbGwodGhpcyxhKSE9PSExKXtoPW4uZXZlbnQuaGFuZGxlcnMuY2FsbCh0aGlzLGEsaiksYj0wO3doaWxlKChmPWhbYisrXSkmJiFhLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2EuY3VycmVudFRhcmdldD1mLmVsZW0sYz0wO3doaWxlKChnPWYuaGFuZGxlcnNbYysrXSkmJiFhLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpKCFhLm5hbWVzcGFjZV9yZXx8YS5uYW1lc3BhY2VfcmUudGVzdChnLm5hbWVzcGFjZSkpJiYoYS5oYW5kbGVPYmo9ZyxhLmRhdGE9Zy5kYXRhLGU9KChuLmV2ZW50LnNwZWNpYWxbZy5vcmlnVHlwZV18fHt9KS5oYW5kbGV8fGcuaGFuZGxlcikuYXBwbHkoZi5lbGVtLGkpLHZvaWQgMCE9PWUmJihhLnJlc3VsdD1lKT09PSExJiYoYS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcFByb3BhZ2F0aW9uKCkpKX1yZXR1cm4gay5wb3N0RGlzcGF0Y2gmJmsucG9zdERpc3BhdGNoLmNhbGwodGhpcyxhKSxhLnJlc3VsdH19LGhhbmRsZXJzOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGYsZz1bXSxoPWIuZGVsZWdhdGVDb3VudCxpPWEudGFyZ2V0O2lmKGgmJmkubm9kZVR5cGUmJighYS5idXR0b258fCJjbGljayIhPT1hLnR5cGUpKWZvcig7aSE9PXRoaXM7aT1pLnBhcmVudE5vZGV8fHRoaXMpaWYoaS5kaXNhYmxlZCE9PSEwfHwiY2xpY2siIT09YS50eXBlKXtmb3IoZD1bXSxjPTA7aD5jO2MrKylmPWJbY10sZT1mLnNlbGVjdG9yKyIgIix2b2lkIDA9PT1kW2VdJiYoZFtlXT1mLm5lZWRzQ29udGV4dD9uKGUsdGhpcykuaW5kZXgoaSk+PTA6bi5maW5kKGUsdGhpcyxudWxsLFtpXSkubGVuZ3RoKSxkW2VdJiZkLnB1c2goZik7ZC5sZW5ndGgmJmcucHVzaCh7ZWxlbTppLGhhbmRsZXJzOmR9KX1yZXR1cm4gaDxiLmxlbmd0aCYmZy5wdXNoKHtlbGVtOnRoaXMsaGFuZGxlcnM6Yi5zbGljZShoKX0pLGd9LHByb3BzOiJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBldmVudFBoYXNlIG1ldGFLZXkgcmVsYXRlZFRhcmdldCBzaGlmdEtleSB0YXJnZXQgdGltZVN0YW1wIHZpZXcgd2hpY2giLnNwbGl0KCIgIiksZml4SG9va3M6e30sa2V5SG9va3M6e3Byb3BzOiJjaGFyIGNoYXJDb2RlIGtleSBrZXlDb2RlIi5zcGxpdCgiICIpLGZpbHRlcjpmdW5jdGlvbihhLGIpe3JldHVybiBudWxsPT1hLndoaWNoJiYoYS53aGljaD1udWxsIT1iLmNoYXJDb2RlP2IuY2hhckNvZGU6Yi5rZXlDb2RlKSxhfX0sbW91c2VIb29rczp7cHJvcHM6ImJ1dHRvbiBidXR0b25zIGNsaWVudFggY2xpZW50WSBvZmZzZXRYIG9mZnNldFkgcGFnZVggcGFnZVkgc2NyZWVuWCBzY3JlZW5ZIHRvRWxlbWVudCIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj1iLmJ1dHRvbjtyZXR1cm4gbnVsbD09YS5wYWdlWCYmbnVsbCE9Yi5jbGllbnRYJiYoYz1hLnRhcmdldC5vd25lckRvY3VtZW50fHxsLGQ9Yy5kb2N1bWVudEVsZW1lbnQsZT1jLmJvZHksYS5wYWdlWD1iLmNsaWVudFgrKGQmJmQuc2Nyb2xsTGVmdHx8ZSYmZS5zY3JvbGxMZWZ0fHwwKS0oZCYmZC5jbGllbnRMZWZ0fHxlJiZlLmNsaWVudExlZnR8fDApLGEucGFnZVk9Yi5jbGllbnRZKyhkJiZkLnNjcm9sbFRvcHx8ZSYmZS5zY3JvbGxUb3B8fDApLShkJiZkLmNsaWVudFRvcHx8ZSYmZS5jbGllbnRUb3B8fDApKSxhLndoaWNofHx2b2lkIDA9PT1mfHwoYS53aGljaD0xJmY/MToyJmY/Mzo0JmY/MjowKSxhfX0sZml4OmZ1bmN0aW9uKGEpe2lmKGFbbi5leHBhbmRvXSlyZXR1cm4gYTt2YXIgYixjLGQsZT1hLnR5cGUsZj1hLGc9dGhpcy5maXhIb29rc1tlXTtnfHwodGhpcy5maXhIb29rc1tlXT1nPVcudGVzdChlKT90aGlzLm1vdXNlSG9va3M6Vi50ZXN0KGUpP3RoaXMua2V5SG9va3M6e30pLGQ9Zy5wcm9wcz90aGlzLnByb3BzLmNvbmNhdChnLnByb3BzKTp0aGlzLnByb3BzLGE9bmV3IG4uRXZlbnQoZiksYj1kLmxlbmd0aDt3aGlsZShiLS0pYz1kW2JdLGFbY109ZltjXTtyZXR1cm4gYS50YXJnZXR8fChhLnRhcmdldD1sKSwzPT09YS50YXJnZXQubm9kZVR5cGUmJihhLnRhcmdldD1hLnRhcmdldC5wYXJlbnROb2RlKSxnLmZpbHRlcj9nLmZpbHRlcihhLGYpOmF9LHNwZWNpYWw6e2xvYWQ6e25vQnViYmxlOiEwfSxmb2N1czp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzIT09XygpJiZ0aGlzLmZvY3VzPyh0aGlzLmZvY3VzKCksITEpOnZvaWQgMH0sZGVsZWdhdGVUeXBlOiJmb2N1c2luIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzPT09XygpJiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZToiZm9jdXNvdXQifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiJjaGVja2JveCI9PT10aGlzLnR5cGUmJnRoaXMuY2xpY2smJm4ubm9kZU5hbWUodGhpcywiaW5wdXQiKT8odGhpcy5jbGljaygpLCExKTp2b2lkIDB9LF9kZWZhdWx0OmZ1bmN0aW9uKGEpe3JldHVybiBuLm5vZGVOYW1lKGEudGFyZ2V0LCJhIil9fSxiZWZvcmV1bmxvYWQ6e3Bvc3REaXNwYXRjaDpmdW5jdGlvbihhKXt2b2lkIDAhPT1hLnJlc3VsdCYmYS5vcmlnaW5hbEV2ZW50JiYoYS5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlPWEucmVzdWx0KX19fSxzaW11bGF0ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uLmV4dGVuZChuZXcgbi5FdmVudCxjLHt0eXBlOmEsaXNTaW11bGF0ZWQ6ITAsb3JpZ2luYWxFdmVudDp7fX0pO2Q/bi5ldmVudC50cmlnZ2VyKGUsbnVsbCxiKTpuLmV2ZW50LmRpc3BhdGNoLmNhbGwoYixlKSxlLmlzRGVmYXVsdFByZXZlbnRlZCgpJiZjLnByZXZlbnREZWZhdWx0KCl9fSxuLnJlbW92ZUV2ZW50PWZ1bmN0aW9uKGEsYixjKXthLnJlbW92ZUV2ZW50TGlzdGVuZXImJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGMsITEpfSxuLkV2ZW50PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBuLkV2ZW50PyhhJiZhLnR5cGU/KHRoaXMub3JpZ2luYWxFdmVudD1hLHRoaXMudHlwZT1hLnR5cGUsdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9YS5kZWZhdWx0UHJldmVudGVkfHx2b2lkIDA9PT1hLmRlZmF1bHRQcmV2ZW50ZWQmJmEucmV0dXJuVmFsdWU9PT0hMT9aOiQpOnRoaXMudHlwZT1hLGImJm4uZXh0ZW5kKHRoaXMsYiksdGhpcy50aW1lU3RhbXA9YSYmYS50aW1lU3RhbXB8fG4ubm93KCksdm9pZCh0aGlzW24uZXhwYW5kb109ITApKTpuZXcgbi5FdmVudChhLGIpfSxuLkV2ZW50LnByb3RvdHlwZT17aXNEZWZhdWx0UHJldmVudGVkOiQsaXNQcm9wYWdhdGlvblN0b3BwZWQ6JCxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDokLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPVosYSYmYS5wcmV2ZW50RGVmYXVsdCYmYS5wcmV2ZW50RGVmYXVsdCgpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1aLGEmJmEuc3RvcFByb3BhZ2F0aW9uJiZhLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1aLGEmJmEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uJiZhLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLHRoaXMuc3RvcFByb3BhZ2F0aW9uKCl9fSxuLmVhY2goe21vdXNlZW50ZXI6Im1vdXNlb3ZlciIsbW91c2VsZWF2ZToibW91c2VvdXQiLHBvaW50ZXJlbnRlcjoicG9pbnRlcm92ZXIiLHBvaW50ZXJsZWF2ZToicG9pbnRlcm91dCJ9LGZ1bmN0aW9uKGEsYil7bi5ldmVudC5zcGVjaWFsW2FdPXtkZWxlZ2F0ZVR5cGU6YixiaW5kVHlwZTpiLGhhbmRsZTpmdW5jdGlvbihhKXt2YXIgYyxkPXRoaXMsZT1hLnJlbGF0ZWRUYXJnZXQsZj1hLmhhbmRsZU9iajtyZXR1cm4oIWV8fGUhPT1kJiYhbi5jb250YWlucyhkLGUpKSYmKGEudHlwZT1mLm9yaWdUeXBlLGM9Zi5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxhLnR5cGU9YiksY319fSksay5mb2N1c2luQnViYmxlc3x8bi5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe24uZXZlbnQuc2ltdWxhdGUoYixhLnRhcmdldCxuLmV2ZW50LmZpeChhKSwhMCl9O24uZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1MLmFjY2VzcyhkLGIpO2V8fGQuYWRkRXZlbnRMaXN0ZW5lcihhLGMsITApLEwuYWNjZXNzKGQsYiwoZXx8MCkrMSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLGU9TC5hY2Nlc3MoZCxiKS0xO2U/TC5hY2Nlc3MoZCxiLGUpOihkLnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxjLCEwKSxMLnJlbW92ZShkLGIpKX19fSksbi5mbi5leHRlbmQoe29uOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZztpZigib2JqZWN0Ij09dHlwZW9mIGEpeyJzdHJpbmciIT10eXBlb2YgYiYmKGM9Y3x8YixiPXZvaWQgMCk7Zm9yKGcgaW4gYSl0aGlzLm9uKGcsYixjLGFbZ10sZSk7cmV0dXJuIHRoaXN9aWYobnVsbD09YyYmbnVsbD09ZD8oZD1iLGM9Yj12b2lkIDApOm51bGw9PWQmJigic3RyaW5nIj09dHlwZW9mIGI/KGQ9YyxjPXZvaWQgMCk6KGQ9YyxjPWIsYj12b2lkIDApKSxkPT09ITEpZD0kO2Vsc2UgaWYoIWQpcmV0dXJuIHRoaXM7cmV0dXJuIDE9PT1lJiYoZj1kLGQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG4oKS5vZmYoYSksZi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGQuZ3VpZD1mLmd1aWR8fChmLmd1aWQ9bi5ndWlkKyspKSx0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmV2ZW50LmFkZCh0aGlzLGEsZCxjLGIpfSl9LG9uZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5vbihhLGIsYyxkLDEpfSxvZmY6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU7aWYoYSYmYS5wcmV2ZW50RGVmYXVsdCYmYS5oYW5kbGVPYmopcmV0dXJuIGQ9YS5oYW5kbGVPYmosbihhLmRlbGVnYXRlVGFyZ2V0KS5vZmYoZC5uYW1lc3BhY2U/ZC5vcmlnVHlwZSsiLiIrZC5uYW1lc3BhY2U6ZC5vcmlnVHlwZSxkLnNlbGVjdG9yLGQuaGFuZGxlciksdGhpcztpZigib2JqZWN0Ij09dHlwZW9mIGEpe2ZvcihlIGluIGEpdGhpcy5vZmYoZSxiLGFbZV0pO3JldHVybiB0aGlzfXJldHVybihiPT09ITF8fCJmdW5jdGlvbiI9PXR5cGVvZiBiKSYmKGM9YixiPXZvaWQgMCksYz09PSExJiYoYz0kKSx0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmV2ZW50LnJlbW92ZSh0aGlzLGEsYyxiKX0pfSx0cmlnZ2VyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe24uZXZlbnQudHJpZ2dlcihhLGIsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzWzBdO3JldHVybiBjP24uZXZlbnQudHJpZ2dlcihhLGIsYywhMCk6dm9pZCAwfX0pO3ZhciBhYj0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXHc6XSspW14+XSopXC8+L2dpLGJiPS88KFtcdzpdKykvLGNiPS88fCYjP1x3KzsvLGRiPS88KD86c2NyaXB0fHN0eWxlfGxpbmspL2ksZWI9L2NoZWNrZWRccyooPzpbXj1dfD1ccyouY2hlY2tlZC4pL2ksZmI9L14kfFwvKD86amF2YXxlY21hKXNjcmlwdC9pLGdiPS9edHJ1ZVwvKC4qKS8saGI9L15ccyo8ISg/OlxbQ0RBVEFcW3wtLSl8KD86XF1cXXwtLSk+XHMqJC9nLGliPXtvcHRpb246WzEsIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCI8L3NlbGVjdD4iXSx0aGVhZDpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sdGQ6WzMsIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdLF9kZWZhdWx0OlswLCIiLCIiXX07aWIub3B0Z3JvdXA9aWIub3B0aW9uLGliLnRib2R5PWliLnRmb290PWliLmNvbGdyb3VwPWliLmNhcHRpb249aWIudGhlYWQsaWIudGg9aWIudGQ7ZnVuY3Rpb24gamIoYSxiKXtyZXR1cm4gbi5ub2RlTmFtZShhLCJ0YWJsZSIpJiZuLm5vZGVOYW1lKDExIT09Yi5ub2RlVHlwZT9iOmIuZmlyc3RDaGlsZCwidHIiKT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0Ym9keSIpWzBdfHxhLmFwcGVuZENoaWxkKGEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIpKTphfWZ1bmN0aW9uIGtiKGEpe3JldHVybiBhLnR5cGU9KG51bGwhPT1hLmdldEF0dHJpYnV0ZSgidHlwZSIpKSsiLyIrYS50eXBlLGF9ZnVuY3Rpb24gbGIoYSl7dmFyIGI9Z2IuZXhlYyhhLnR5cGUpO3JldHVybiBiP2EudHlwZT1iWzFdOmEucmVtb3ZlQXR0cmlidXRlKCJ0eXBlIiksYX1mdW5jdGlvbiBtYihhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKylMLnNldChhW2NdLCJnbG9iYWxFdmFsIiwhYnx8TC5nZXQoYltjXSwiZ2xvYmFsRXZhbCIpKX1mdW5jdGlvbiBuYihhLGIpe3ZhciBjLGQsZSxmLGcsaCxpLGo7aWYoMT09PWIubm9kZVR5cGUpe2lmKEwuaGFzRGF0YShhKSYmKGY9TC5hY2Nlc3MoYSksZz1MLnNldChiLGYpLGo9Zi5ldmVudHMpKXtkZWxldGUgZy5oYW5kbGUsZy5ldmVudHM9e307Zm9yKGUgaW4gailmb3IoYz0wLGQ9altlXS5sZW5ndGg7ZD5jO2MrKyluLmV2ZW50LmFkZChiLGUsaltlXVtjXSl9TS5oYXNEYXRhKGEpJiYoaD1NLmFjY2VzcyhhKSxpPW4uZXh0ZW5kKHt9LGgpLE0uc2V0KGIsaSkpfX1mdW5jdGlvbiBvYihhLGIpe3ZhciBjPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWU/YS5nZXRFbGVtZW50c0J5VGFnTmFtZShifHwiKiIpOmEucXVlcnlTZWxlY3RvckFsbD9hLnF1ZXJ5U2VsZWN0b3JBbGwoYnx8IioiKTpbXTtyZXR1cm4gdm9pZCAwPT09Ynx8YiYmbi5ub2RlTmFtZShhLGIpP24ubWVyZ2UoW2FdLGMpOmN9ZnVuY3Rpb24gcGIoYSxiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7ImlucHV0Ij09PWMmJlQudGVzdChhLnR5cGUpP2IuY2hlY2tlZD1hLmNoZWNrZWQ6KCJpbnB1dCI9PT1jfHwidGV4dGFyZWEiPT09YykmJihiLmRlZmF1bHRWYWx1ZT1hLmRlZmF1bHRWYWx1ZSl9bi5leHRlbmQoe2Nsb25lOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuY2xvbmVOb2RlKCEwKSxpPW4uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpO2lmKCEoay5ub0Nsb25lQ2hlY2tlZHx8MSE9PWEubm9kZVR5cGUmJjExIT09YS5ub2RlVHlwZXx8bi5pc1hNTERvYyhhKSkpZm9yKGc9b2IoaCksZj1vYihhKSxkPTAsZT1mLmxlbmd0aDtlPmQ7ZCsrKXBiKGZbZF0sZ1tkXSk7aWYoYilpZihjKWZvcihmPWZ8fG9iKGEpLGc9Z3x8b2IoaCksZD0wLGU9Zi5sZW5ndGg7ZT5kO2QrKyluYihmW2RdLGdbZF0pO2Vsc2UgbmIoYSxoKTtyZXR1cm4gZz1vYihoLCJzY3JpcHQiKSxnLmxlbmd0aD4wJiZtYihnLCFpJiZvYihhLCJzY3JpcHQiKSksaH0sYnVpbGRGcmFnbWVudDpmdW5jdGlvbihhLGIsYyxkKXtmb3IodmFyIGUsZixnLGgsaSxqLGs9Yi5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksbD1bXSxtPTAsbz1hLmxlbmd0aDtvPm07bSsrKWlmKGU9YVttXSxlfHwwPT09ZSlpZigib2JqZWN0Ij09PW4udHlwZShlKSluLm1lcmdlKGwsZS5ub2RlVHlwZT9bZV06ZSk7ZWxzZSBpZihjYi50ZXN0KGUpKXtmPWZ8fGsuYXBwZW5kQ2hpbGQoYi5jcmVhdGVFbGVtZW50KCJkaXYiKSksZz0oYmIuZXhlYyhlKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKSxoPWliW2ddfHxpYi5fZGVmYXVsdCxmLmlubmVySFRNTD1oWzFdK2UucmVwbGFjZShhYiwiPCQxPjwvJDI+IikraFsyXSxqPWhbMF07d2hpbGUoai0tKWY9Zi5sYXN0Q2hpbGQ7bi5tZXJnZShsLGYuY2hpbGROb2RlcyksZj1rLmZpcnN0Q2hpbGQsZi50ZXh0Q29udGVudD0iIn1lbHNlIGwucHVzaChiLmNyZWF0ZVRleHROb2RlKGUpKTtrLnRleHRDb250ZW50PSIiLG09MDt3aGlsZShlPWxbbSsrXSlpZigoIWR8fC0xPT09bi5pbkFycmF5KGUsZCkpJiYoaT1uLmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKSxmPW9iKGsuYXBwZW5kQ2hpbGQoZSksInNjcmlwdCIpLGkmJm1iKGYpLGMpKXtqPTA7d2hpbGUoZT1mW2orK10pZmIudGVzdChlLnR5cGV8fCIiKSYmYy5wdXNoKGUpfXJldHVybiBrfSxjbGVhbkRhdGE6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGMsZCxlLGY9bi5ldmVudC5zcGVjaWFsLGc9MDt2b2lkIDAhPT0oYz1hW2ddKTtnKyspe2lmKG4uYWNjZXB0RGF0YShjKSYmKGU9Y1tMLmV4cGFuZG9dLGUmJihiPUwuY2FjaGVbZV0pKSl7aWYoYi5ldmVudHMpZm9yKGQgaW4gYi5ldmVudHMpZltkXT9uLmV2ZW50LnJlbW92ZShjLGQpOm4ucmVtb3ZlRXZlbnQoYyxkLGIuaGFuZGxlKTtMLmNhY2hlW2VdJiZkZWxldGUgTC5jYWNoZVtlXX1kZWxldGUgTS5jYWNoZVtjW00uZXhwYW5kb11dfX19KSxuLmZuLmV4dGVuZCh7dGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PT1hP24udGV4dCh0aGlzKTp0aGlzLmVtcHR5KCkuZWFjaChmdW5jdGlvbigpeygxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSkmJih0aGlzLnRleHRDb250ZW50PWEpfSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj1qYih0aGlzLGEpO2IuYXBwZW5kQ2hpbGQoYSl9fSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPWpiKHRoaXMsYSk7Yi5pbnNlcnRCZWZvcmUoYSxiLmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcy5uZXh0U2libGluZyl9KX0scmVtb3ZlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9YT9uLmZpbHRlcihhLHRoaXMpOnRoaXMsZT0wO251bGwhPShjPWRbZV0pO2UrKylifHwxIT09Yy5ub2RlVHlwZXx8bi5jbGVhbkRhdGEob2IoYykpLGMucGFyZW50Tm9kZSYmKGImJm4uY29udGFpbnMoYy5vd25lckRvY3VtZW50LGMpJiZtYihvYihjLCJzY3JpcHQiKSksYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpKTtyZXR1cm4gdGhpc30sZW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wO251bGwhPShhPXRoaXNbYl0pO2IrKykxPT09YS5ub2RlVHlwZSYmKG4uY2xlYW5EYXRhKG9iKGEsITEpKSxhLnRleHRDb250ZW50PSIiKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT1udWxsPT1hPyExOmEsYj1udWxsPT1iP2E6Yix0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiBuLmNsb25lKHRoaXMsYSxiKX0pfSxodG1sOmZ1bmN0aW9uKGEpe3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYSl7dmFyIGI9dGhpc1swXXx8e30sYz0wLGQ9dGhpcy5sZW5ndGg7aWYodm9pZCAwPT09YSYmMT09PWIubm9kZVR5cGUpcmV0dXJuIGIuaW5uZXJIVE1MO2lmKCJzdHJpbmciPT10eXBlb2YgYSYmIWRiLnRlc3QoYSkmJiFpYlsoYmIuZXhlYyhhKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKV0pe2E9YS5yZXBsYWNlKGFiLCI8JDE+PC8kMj4iKTt0cnl7Zm9yKDtkPmM7YysrKWI9dGhpc1tjXXx8e30sMT09PWIubm9kZVR5cGUmJihuLmNsZWFuRGF0YShvYihiLCExKSksYi5pbm5lckhUTUw9YSk7Yj0wfWNhdGNoKGUpe319YiYmdGhpcy5lbXB0eSgpLmFwcGVuZChhKX0sbnVsbCxhLGFyZ3VtZW50cy5sZW5ndGgpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYil7YT10aGlzLnBhcmVudE5vZGUsbi5jbGVhbkRhdGEob2IodGhpcykpLGEmJmEucmVwbGFjZUNoaWxkKGIsdGhpcyl9KSxhJiYoYS5sZW5ndGh8fGEubm9kZVR5cGUpP3RoaXM6dGhpcy5yZW1vdmUoKX0sZGV0YWNoOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJlbW92ZShhLCEwKX0sZG9tTWFuaXA6ZnVuY3Rpb24oYSxiKXthPWUuYXBwbHkoW10sYSk7dmFyIGMsZCxmLGcsaCxpLGo9MCxsPXRoaXMubGVuZ3RoLG09dGhpcyxvPWwtMSxwPWFbMF0scT1uLmlzRnVuY3Rpb24ocCk7aWYocXx8bD4xJiYic3RyaW5nIj09dHlwZW9mIHAmJiFrLmNoZWNrQ2xvbmUmJmViLnRlc3QocCkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihjKXt2YXIgZD1tLmVxKGMpO3EmJihhWzBdPXAuY2FsbCh0aGlzLGMsZC5odG1sKCkpKSxkLmRvbU1hbmlwKGEsYil9KTtpZihsJiYoYz1uLmJ1aWxkRnJhZ21lbnQoYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQsITEsdGhpcyksZD1jLmZpcnN0Q2hpbGQsMT09PWMuY2hpbGROb2Rlcy5sZW5ndGgmJihjPWQpLGQpKXtmb3IoZj1uLm1hcChvYihjLCJzY3JpcHQiKSxrYiksZz1mLmxlbmd0aDtsPmo7aisrKWg9YyxqIT09byYmKGg9bi5jbG9uZShoLCEwLCEwKSxnJiZuLm1lcmdlKGYsb2IoaCwic2NyaXB0IikpKSxiLmNhbGwodGhpc1tqXSxoLGopO2lmKGcpZm9yKGk9ZltmLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LG4ubWFwKGYsbGIpLGo9MDtnPmo7aisrKWg9ZltqXSxmYi50ZXN0KGgudHlwZXx8IiIpJiYhTC5hY2Nlc3MoaCwiZ2xvYmFsRXZhbCIpJiZuLmNvbnRhaW5zKGksaCkmJihoLnNyYz9uLl9ldmFsVXJsJiZuLl9ldmFsVXJsKGguc3JjKTpuLmdsb2JhbEV2YWwoaC50ZXh0Q29udGVudC5yZXBsYWNlKGhiLCIiKSkpfXJldHVybiB0aGlzfX0pLG4uZWFjaCh7YXBwZW5kVG86ImFwcGVuZCIscHJlcGVuZFRvOiJwcmVwZW5kIixpbnNlcnRCZWZvcmU6ImJlZm9yZSIsaW5zZXJ0QWZ0ZXI6ImFmdGVyIixyZXBsYWNlQWxsOiJyZXBsYWNlV2l0aCJ9LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhKXtmb3IodmFyIGMsZD1bXSxlPW4oYSksZz1lLmxlbmd0aC0xLGg9MDtnPj1oO2grKyljPWg9PT1nP3RoaXM6dGhpcy5jbG9uZSghMCksbihlW2hdKVtiXShjKSxmLmFwcGx5KGQsYy5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGQpfX0pO3ZhciBxYixyYj17fTtmdW5jdGlvbiBzYihiLGMpe3ZhciBkLGU9bihjLmNyZWF0ZUVsZW1lbnQoYikpLmFwcGVuZFRvKGMuYm9keSksZj1hLmdldERlZmF1bHRDb21wdXRlZFN0eWxlJiYoZD1hLmdldERlZmF1bHRDb21wdXRlZFN0eWxlKGVbMF0pKT9kLmRpc3BsYXk6bi5jc3MoZVswXSwiZGlzcGxheSIpO3JldHVybiBlLmRldGFjaCgpLGZ9ZnVuY3Rpb24gdGIoYSl7dmFyIGI9bCxjPXJiW2FdO3JldHVybiBjfHwoYz1zYihhLGIpLCJub25lIiE9PWMmJmN8fChxYj0ocWJ8fG4oIjxpZnJhbWUgZnJhbWVib3JkZXI9JzAnIHdpZHRoPScwJyBoZWlnaHQ9JzAnLz4iKSkuYXBwZW5kVG8oYi5kb2N1bWVudEVsZW1lbnQpLGI9cWJbMF0uY29udGVudERvY3VtZW50LGIud3JpdGUoKSxiLmNsb3NlKCksYz1zYihhLGIpLHFiLmRldGFjaCgpKSxyYlthXT1jKSxjfXZhciB1Yj0vXm1hcmdpbi8sdmI9bmV3IFJlZ0V4cCgiXigiK1ErIikoPyFweClbYS16JV0rJCIsImkiKSx3Yj1mdW5jdGlvbihhKXtyZXR1cm4gYS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoYSxudWxsKX07ZnVuY3Rpb24geGIoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5zdHlsZTtyZXR1cm4gYz1jfHx3YihhKSxjJiYoZz1jLmdldFByb3BlcnR5VmFsdWUoYil8fGNbYl0pLGMmJigiIiE9PWd8fG4uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpfHwoZz1uLnN0eWxlKGEsYikpLHZiLnRlc3QoZykmJnViLnRlc3QoYikmJihkPWgud2lkdGgsZT1oLm1pbldpZHRoLGY9aC5tYXhXaWR0aCxoLm1pbldpZHRoPWgubWF4V2lkdGg9aC53aWR0aD1nLGc9Yy53aWR0aCxoLndpZHRoPWQsaC5taW5XaWR0aD1lLGgubWF4V2lkdGg9ZikpLHZvaWQgMCE9PWc/ZysiIjpnfWZ1bmN0aW9uIHliKGEsYil7cmV0dXJue2dldDpmdW5jdGlvbigpe3JldHVybiBhKCk/dm9pZCBkZWxldGUgdGhpcy5nZXQ6KHRoaXMuZ2V0PWIpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fSFmdW5jdGlvbigpe3ZhciBiLGMsZD1sLmRvY3VtZW50RWxlbWVudCxlPWwuY3JlYXRlRWxlbWVudCgiZGl2IiksZj1sLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2lmKGYuc3R5bGUpe2Yuc3R5bGUuYmFja2dyb3VuZENsaXA9ImNvbnRlbnQtYm94IixmLmNsb25lTm9kZSghMCkuc3R5bGUuYmFja2dyb3VuZENsaXA9IiIsay5jbGVhckNsb25lU3R5bGU9ImNvbnRlbnQtYm94Ij09PWYuc3R5bGUuYmFja2dyb3VuZENsaXAsZS5zdHlsZS5jc3NUZXh0PSJib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweDttYXJnaW4tdG9wOjFweDtwb3NpdGlvbjphYnNvbHV0ZSIsZS5hcHBlbmRDaGlsZChmKTtmdW5jdGlvbiBnKCl7Zi5zdHlsZS5jc3NUZXh0PSItd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1zaXppbmc6Ym9yZGVyLWJveDtib3gtc2l6aW5nOmJvcmRlci1ib3g7ZGlzcGxheTpibG9jazttYXJnaW4tdG9wOjElO3RvcDoxJTtib3JkZXI6MXB4O3BhZGRpbmc6MXB4O3dpZHRoOjRweDtwb3NpdGlvbjphYnNvbHV0ZSIsZi5pbm5lckhUTUw9IiIsZC5hcHBlbmRDaGlsZChlKTt2YXIgZz1hLmdldENvbXB1dGVkU3R5bGUoZixudWxsKTtiPSIxJSIhPT1nLnRvcCxjPSI0cHgiPT09Zy53aWR0aCxkLnJlbW92ZUNoaWxkKGUpfWEuZ2V0Q29tcHV0ZWRTdHlsZSYmbi5leHRlbmQoayx7cGl4ZWxQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiBnKCksYn0sYm94U2l6aW5nUmVsaWFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09YyYmZygpLGN9LHJlbGlhYmxlTWFyZ2luUmlnaHQ6ZnVuY3Rpb24oKXt2YXIgYixjPWYuYXBwZW5kQ2hpbGQobC5jcmVhdGVFbGVtZW50KCJkaXYiKSk7cmV0dXJuIGMuc3R5bGUuY3NzVGV4dD1mLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MCIsYy5zdHlsZS5tYXJnaW5SaWdodD1jLnN0eWxlLndpZHRoPSIwIixmLnN0eWxlLndpZHRoPSIxcHgiLGQuYXBwZW5kQ2hpbGQoZSksYj0hcGFyc2VGbG9hdChhLmdldENvbXB1dGVkU3R5bGUoYyxudWxsKS5tYXJnaW5SaWdodCksZC5yZW1vdmVDaGlsZChlKSxifX0pfX0oKSxuLnN3YXA9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnPXt9O2ZvcihmIGluIGIpZ1tmXT1hLnN0eWxlW2ZdLGEuc3R5bGVbZl09YltmXTtlPWMuYXBwbHkoYSxkfHxbXSk7Zm9yKGYgaW4gYilhLnN0eWxlW2ZdPWdbZl07cmV0dXJuIGV9O3ZhciB6Yj0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sQWI9bmV3IFJlZ0V4cCgiXigiK1ErIikoLiopJCIsImkiKSxCYj1uZXcgUmVnRXhwKCJeKFsrLV0pPSgiK1ErIikiLCJpIiksQ2I9e3Bvc2l0aW9uOiJhYnNvbHV0ZSIsdmlzaWJpbGl0eToiaGlkZGVuIixkaXNwbGF5OiJibG9jayJ9LERiPXtsZXR0ZXJTcGFjaW5nOiIwIixmb250V2VpZ2h0OiI0MDAifSxFYj1bIldlYmtpdCIsIk8iLCJNb3oiLCJtcyJdO2Z1bmN0aW9uIEZiKGEsYil7aWYoYiBpbiBhKXJldHVybiBiO3ZhciBjPWJbMF0udG9VcHBlckNhc2UoKStiLnNsaWNlKDEpLGQ9YixlPUViLmxlbmd0aDt3aGlsZShlLS0paWYoYj1FYltlXStjLGIgaW4gYSlyZXR1cm4gYjtyZXR1cm4gZH1mdW5jdGlvbiBHYihhLGIsYyl7dmFyIGQ9QWIuZXhlYyhiKTtyZXR1cm4gZD9NYXRoLm1heCgwLGRbMV0tKGN8fDApKSsoZFsyXXx8InB4Iik6Yn1mdW5jdGlvbiBIYihhLGIsYyxkLGUpe2Zvcih2YXIgZj1jPT09KGQ/ImJvcmRlciI6ImNvbnRlbnQiKT80OiJ3aWR0aCI9PT1iPzE6MCxnPTA7ND5mO2YrPTIpIm1hcmdpbiI9PT1jJiYoZys9bi5jc3MoYSxjK1JbZl0sITAsZSkpLGQ/KCJjb250ZW50Ij09PWMmJihnLT1uLmNzcyhhLCJwYWRkaW5nIitSW2ZdLCEwLGUpKSwibWFyZ2luIiE9PWMmJihnLT1uLmNzcyhhLCJib3JkZXIiK1JbZl0rIldpZHRoIiwhMCxlKSkpOihnKz1uLmNzcyhhLCJwYWRkaW5nIitSW2ZdLCEwLGUpLCJwYWRkaW5nIiE9PWMmJihnKz1uLmNzcyhhLCJib3JkZXIiK1JbZl0rIldpZHRoIiwhMCxlKSkpO3JldHVybiBnfWZ1bmN0aW9uIEliKGEsYixjKXt2YXIgZD0hMCxlPSJ3aWR0aCI9PT1iP2Eub2Zmc2V0V2lkdGg6YS5vZmZzZXRIZWlnaHQsZj13YihhKSxnPSJib3JkZXItYm94Ij09PW4uY3NzKGEsImJveFNpemluZyIsITEsZik7aWYoMD49ZXx8bnVsbD09ZSl7aWYoZT14YihhLGIsZiksKDA+ZXx8bnVsbD09ZSkmJihlPWEuc3R5bGVbYl0pLHZiLnRlc3QoZSkpcmV0dXJuIGU7ZD1nJiYoay5ib3hTaXppbmdSZWxpYWJsZSgpfHxlPT09YS5zdHlsZVtiXSksZT1wYXJzZUZsb2F0KGUpfHwwfXJldHVybiBlK0hiKGEsYixjfHwoZz8iYm9yZGVyIjoiY29udGVudCIpLGQsZikrInB4In1mdW5jdGlvbiBKYihhLGIpe2Zvcih2YXIgYyxkLGUsZj1bXSxnPTAsaD1hLmxlbmd0aDtoPmc7ZysrKWQ9YVtnXSxkLnN0eWxlJiYoZltnXT1MLmdldChkLCJvbGRkaXNwbGF5IiksYz1kLnN0eWxlLmRpc3BsYXksYj8oZltnXXx8Im5vbmUiIT09Y3x8KGQuc3R5bGUuZGlzcGxheT0iIiksIiI9PT1kLnN0eWxlLmRpc3BsYXkmJlMoZCkmJihmW2ddPUwuYWNjZXNzKGQsIm9sZGRpc3BsYXkiLHRiKGQubm9kZU5hbWUpKSkpOihlPVMoZCksIm5vbmUiPT09YyYmZXx8TC5zZXQoZCwib2xkZGlzcGxheSIsZT9jOm4uY3NzKGQsImRpc3BsYXkiKSkpKTtmb3IoZz0wO2g+ZztnKyspZD1hW2ddLGQuc3R5bGUmJihiJiYibm9uZSIhPT1kLnN0eWxlLmRpc3BsYXkmJiIiIT09ZC5zdHlsZS5kaXNwbGF5fHwoZC5zdHlsZS5kaXNwbGF5PWI/ZltnXXx8IiI6Im5vbmUiKSk7cmV0dXJuIGF9bi5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oYSxiKXtpZihiKXt2YXIgYz14YihhLCJvcGFjaXR5Iik7cmV0dXJuIiI9PT1jPyIxIjpjfX19fSxjc3NOdW1iZXI6e2NvbHVtbkNvdW50OiEwLGZpbGxPcGFjaXR5OiEwLGZsZXhHcm93OiEwLGZsZXhTaHJpbms6ITAsZm9udFdlaWdodDohMCxsaW5lSGVpZ2h0OiEwLG9wYWNpdHk6ITAsb3JkZXI6ITAsb3JwaGFuczohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITB9LGNzc1Byb3BzOnsiZmxvYXQiOiJjc3NGbG9hdCJ9LHN0eWxlOmZ1bmN0aW9uKGEsYixjLGQpe2lmKGEmJjMhPT1hLm5vZGVUeXBlJiY4IT09YS5ub2RlVHlwZSYmYS5zdHlsZSl7dmFyIGUsZixnLGg9bi5jYW1lbENhc2UoYiksaT1hLnN0eWxlO3JldHVybiBiPW4uY3NzUHJvcHNbaF18fChuLmNzc1Byb3BzW2hdPUZiKGksaCkpLGc9bi5jc3NIb29rc1tiXXx8bi5jc3NIb29rc1toXSx2b2lkIDA9PT1jP2cmJiJnZXQiaW4gZyYmdm9pZCAwIT09KGU9Zy5nZXQoYSwhMSxkKSk/ZTppW2JdOihmPXR5cGVvZiBjLCJzdHJpbmciPT09ZiYmKGU9QmIuZXhlYyhjKSkmJihjPShlWzFdKzEpKmVbMl0rcGFyc2VGbG9hdChuLmNzcyhhLGIpKSxmPSJudW1iZXIiKSxudWxsIT1jJiZjPT09YyYmKCJudW1iZXIiIT09Znx8bi5jc3NOdW1iZXJbaF18fChjKz0icHgiKSxrLmNsZWFyQ2xvbmVTdHlsZXx8IiIhPT1jfHwwIT09Yi5pbmRleE9mKCJiYWNrZ3JvdW5kIil8fChpW2JdPSJpbmhlcml0IiksZyYmInNldCJpbiBnJiZ2b2lkIDA9PT0oYz1nLnNldChhLGMsZCkpfHwoaVtiXT1jKSksdm9pZCAwKX19LGNzczpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGcsaD1uLmNhbWVsQ2FzZShiKTtyZXR1cm4gYj1uLmNzc1Byb3BzW2hdfHwobi5jc3NQcm9wc1toXT1GYihhLnN0eWxlLGgpKSxnPW4uY3NzSG9va3NbYl18fG4uY3NzSG9va3NbaF0sZyYmImdldCJpbiBnJiYoZT1nLmdldChhLCEwLGMpKSx2b2lkIDA9PT1lJiYoZT14YihhLGIsZCkpLCJub3JtYWwiPT09ZSYmYiBpbiBEYiYmKGU9RGJbYl0pLCIiPT09Y3x8Yz8oZj1wYXJzZUZsb2F0KGUpLGM9PT0hMHx8bi5pc051bWVyaWMoZik/Znx8MDplKTplfX0pLG4uZWFjaChbImhlaWdodCIsIndpZHRoIl0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2JdPXtnZXQ6ZnVuY3Rpb24oYSxjLGQpe3JldHVybiBjP3piLnRlc3Qobi5jc3MoYSwiZGlzcGxheSIpKSYmMD09PWEub2Zmc2V0V2lkdGg/bi5zd2FwKGEsQ2IsZnVuY3Rpb24oKXtyZXR1cm4gSWIoYSxiLGQpfSk6SWIoYSxiLGQpOnZvaWQgMH0sc2V0OmZ1bmN0aW9uKGEsYyxkKXt2YXIgZT1kJiZ3YihhKTtyZXR1cm4gR2IoYSxjLGQ/SGIoYSxiLGQsImJvcmRlci1ib3giPT09bi5jc3MoYSwiYm94U2l6aW5nIiwhMSxlKSxlKTowKX19fSksbi5jc3NIb29rcy5tYXJnaW5SaWdodD15YihrLnJlbGlhYmxlTWFyZ2luUmlnaHQsZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj9uLnN3YXAoYSx7ZGlzcGxheToiaW5saW5lLWJsb2NrIn0seGIsW2EsIm1hcmdpblJpZ2h0Il0pOnZvaWQgMH0pLG4uZWFjaCh7bWFyZ2luOiIiLHBhZGRpbmc6IiIsYm9yZGVyOiJXaWR0aCJ9LGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1thK2JdPXtleHBhbmQ6ZnVuY3Rpb24oYyl7Zm9yKHZhciBkPTAsZT17fSxmPSJzdHJpbmciPT10eXBlb2YgYz9jLnNwbGl0KCIgIik6W2NdOzQ+ZDtkKyspZVthK1JbZF0rYl09ZltkXXx8ZltkLTJdfHxmWzBdO3JldHVybiBlfX0sdWIudGVzdChhKXx8KG4uY3NzSG9va3NbYStiXS5zZXQ9R2IpfSksbi5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihhLGIpe3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj17fSxnPTA7aWYobi5pc0FycmF5KGIpKXtmb3IoZD13YihhKSxlPWIubGVuZ3RoO2U+ZztnKyspZltiW2ddXT1uLmNzcyhhLGJbZ10sITEsZCk7cmV0dXJuIGZ9cmV0dXJuIHZvaWQgMCE9PWM/bi5zdHlsZShhLGIsYyk6bi5jc3MoYSxiKX0sYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHNob3c6ZnVuY3Rpb24oKXtyZXR1cm4gSmIodGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gSmIodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihhKXtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBhP2E/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7Uyh0aGlzKT9uKHRoaXMpLnNob3coKTpuKHRoaXMpLmhpZGUoKX0pfX0pO2Z1bmN0aW9uIEtiKGEsYixjLGQsZSl7cmV0dXJuIG5ldyBLYi5wcm90b3R5cGUuaW5pdChhLGIsYyxkLGUpfW4uVHdlZW49S2IsS2IucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpLYixpbml0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmVsZW09YSx0aGlzLnByb3A9Yyx0aGlzLmVhc2luZz1lfHwic3dpbmciLHRoaXMub3B0aW9ucz1iLHRoaXMuc3RhcnQ9dGhpcy5ub3c9dGhpcy5jdXIoKSx0aGlzLmVuZD1kLHRoaXMudW5pdD1mfHwobi5jc3NOdW1iZXJbY10/IiI6InB4Iil9LGN1cjpmdW5jdGlvbigpe3ZhciBhPUtiLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiBhJiZhLmdldD9hLmdldCh0aGlzKTpLYi5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpfSxydW46ZnVuY3Rpb24oYSl7dmFyIGIsYz1LYi5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gdGhpcy5wb3M9Yj10aGlzLm9wdGlvbnMuZHVyYXRpb24/bi5lYXNpbmdbdGhpcy5lYXNpbmddKGEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKmEsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbik6YSx0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqYit0aGlzLnN0YXJ0LHRoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSxjJiZjLnNldD9jLnNldCh0aGlzKTpLYi5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLHRoaXN9fSxLYi5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGU9S2IucHJvdG90eXBlLEtiLnByb3BIb29rcz17X2RlZmF1bHQ6e2dldDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gbnVsbD09YS5lbGVtW2EucHJvcF18fGEuZWxlbS5zdHlsZSYmbnVsbCE9YS5lbGVtLnN0eWxlW2EucHJvcF0/KGI9bi5jc3MoYS5lbGVtLGEucHJvcCwiIiksYiYmImF1dG8iIT09Yj9iOjApOmEuZWxlbVthLnByb3BdfSxzZXQ6ZnVuY3Rpb24oYSl7bi5meC5zdGVwW2EucHJvcF0/bi5meC5zdGVwW2EucHJvcF0oYSk6YS5lbGVtLnN0eWxlJiYobnVsbCE9YS5lbGVtLnN0eWxlW24uY3NzUHJvcHNbYS5wcm9wXV18fG4uY3NzSG9va3NbYS5wcm9wXSk/bi5zdHlsZShhLmVsZW0sYS5wcm9wLGEubm93K2EudW5pdCk6YS5lbGVtW2EucHJvcF09YS5ub3d9fX0sS2IucHJvcEhvb2tzLnNjcm9sbFRvcD1LYi5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGEpe2EuZWxlbS5ub2RlVHlwZSYmYS5lbGVtLnBhcmVudE5vZGUmJihhLmVsZW1bYS5wcm9wXT1hLm5vdyl9fSxuLmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxzd2luZzpmdW5jdGlvbihhKXtyZXR1cm4uNS1NYXRoLmNvcyhhKk1hdGguUEkpLzJ9fSxuLmZ4PUtiLnByb3RvdHlwZS5pbml0LG4uZnguc3RlcD17fTt2YXIgTGIsTWIsTmI9L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLE9iPW5ldyBSZWdFeHAoIl4oPzooWystXSk9fCkoIitRKyIpKFthLXolXSopJCIsImkiKSxQYj0vcXVldWVIb29rcyQvLFFiPVtWYl0sUmI9eyIqIjpbZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNyZWF0ZVR3ZWVuKGEsYiksZD1jLmN1cigpLGU9T2IuZXhlYyhiKSxmPWUmJmVbM118fChuLmNzc051bWJlclthXT8iIjoicHgiKSxnPShuLmNzc051bWJlclthXXx8InB4IiE9PWYmJitkKSYmT2IuZXhlYyhuLmNzcyhjLmVsZW0sYSkpLGg9MSxpPTIwO2lmKGcmJmdbM10hPT1mKXtmPWZ8fGdbM10sZT1lfHxbXSxnPStkfHwxO2RvIGg9aHx8Ii41IixnLz1oLG4uc3R5bGUoYy5lbGVtLGEsZytmKTt3aGlsZShoIT09KGg9Yy5jdXIoKS9kKSYmMSE9PWgmJi0taSl9cmV0dXJuIGUmJihnPWMuc3RhcnQ9K2d8fCtkfHwwLGMudW5pdD1mLGMuZW5kPWVbMV0/ZysoZVsxXSsxKSplWzJdOitlWzJdKSxjfV19O2Z1bmN0aW9uIFNiKCl7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtMYj12b2lkIDB9KSxMYj1uLm5vdygpfWZ1bmN0aW9uIFRiKGEsYil7dmFyIGMsZD0wLGU9e2hlaWdodDphfTtmb3IoYj1iPzE6MDs0PmQ7ZCs9Mi1iKWM9UltkXSxlWyJtYXJnaW4iK2NdPWVbInBhZGRpbmciK2NdPWE7cmV0dXJuIGImJihlLm9wYWNpdHk9ZS53aWR0aD1hKSxlfWZ1bmN0aW9uIFViKGEsYixjKXtmb3IodmFyIGQsZT0oUmJbYl18fFtdKS5jb25jYXQoUmJbIioiXSksZj0wLGc9ZS5sZW5ndGg7Zz5mO2YrKylpZihkPWVbZl0uY2FsbChjLGIsYSkpcmV0dXJuIGR9ZnVuY3Rpb24gVmIoYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGssbD10aGlzLG09e30sbz1hLnN0eWxlLHA9YS5ub2RlVHlwZSYmUyhhKSxxPUwuZ2V0KGEsImZ4c2hvdyIpO2MucXVldWV8fChoPW4uX3F1ZXVlSG9va3MoYSwiZngiKSxudWxsPT1oLnVucXVldWVkJiYoaC51bnF1ZXVlZD0wLGk9aC5lbXB0eS5maXJlLGguZW1wdHkuZmlyZT1mdW5jdGlvbigpe2gudW5xdWV1ZWR8fGkoKX0pLGgudW5xdWV1ZWQrKyxsLmFsd2F5cyhmdW5jdGlvbigpe2wuYWx3YXlzKGZ1bmN0aW9uKCl7aC51bnF1ZXVlZC0tLG4ucXVldWUoYSwiZngiKS5sZW5ndGh8fGguZW1wdHkuZmlyZSgpfSl9KSksMT09PWEubm9kZVR5cGUmJigiaGVpZ2h0ImluIGJ8fCJ3aWR0aCJpbiBiKSYmKGMub3ZlcmZsb3c9W28ub3ZlcmZsb3csby5vdmVyZmxvd1gsby5vdmVyZmxvd1ldLGo9bi5jc3MoYSwiZGlzcGxheSIpLGs9Im5vbmUiPT09aj9MLmdldChhLCJvbGRkaXNwbGF5Iil8fHRiKGEubm9kZU5hbWUpOmosImlubGluZSI9PT1rJiYibm9uZSI9PT1uLmNzcyhhLCJmbG9hdCIpJiYoby5kaXNwbGF5PSJpbmxpbmUtYmxvY2siKSksYy5vdmVyZmxvdyYmKG8ub3ZlcmZsb3c9ImhpZGRlbiIsbC5hbHdheXMoZnVuY3Rpb24oKXtvLm92ZXJmbG93PWMub3ZlcmZsb3dbMF0sby5vdmVyZmxvd1g9Yy5vdmVyZmxvd1sxXSxvLm92ZXJmbG93WT1jLm92ZXJmbG93WzJdfSkpO2ZvcihkIGluIGIpaWYoZT1iW2RdLE5iLmV4ZWMoZSkpe2lmKGRlbGV0ZSBiW2RdLGY9Znx8InRvZ2dsZSI9PT1lLGU9PT0ocD8iaGlkZSI6InNob3ciKSl7aWYoInNob3ciIT09ZXx8IXF8fHZvaWQgMD09PXFbZF0pY29udGludWU7cD0hMH1tW2RdPXEmJnFbZF18fG4uc3R5bGUoYSxkKX1lbHNlIGo9dm9pZCAwO2lmKG4uaXNFbXB0eU9iamVjdChtKSkiaW5saW5lIj09PSgibm9uZSI9PT1qP3RiKGEubm9kZU5hbWUpOmopJiYoby5kaXNwbGF5PWopO2Vsc2V7cT8iaGlkZGVuImluIHEmJihwPXEuaGlkZGVuKTpxPUwuYWNjZXNzKGEsImZ4c2hvdyIse30pLGYmJihxLmhpZGRlbj0hcCkscD9uKGEpLnNob3coKTpsLmRvbmUoZnVuY3Rpb24oKXtuKGEpLmhpZGUoKX0pLGwuZG9uZShmdW5jdGlvbigpe3ZhciBiO0wucmVtb3ZlKGEsImZ4c2hvdyIpO2ZvcihiIGluIG0pbi5zdHlsZShhLGIsbVtiXSl9KTtmb3IoZCBpbiBtKWc9VWIocD9xW2RdOjAsZCxsKSxkIGluIHF8fChxW2RdPWcuc3RhcnQscCYmKGcuZW5kPWcuc3RhcnQsZy5zdGFydD0id2lkdGgiPT09ZHx8ImhlaWdodCI9PT1kPzE6MCkpfX1mdW5jdGlvbiBXYihhLGIpe3ZhciBjLGQsZSxmLGc7Zm9yKGMgaW4gYSlpZihkPW4uY2FtZWxDYXNlKGMpLGU9YltkXSxmPWFbY10sbi5pc0FycmF5KGYpJiYoZT1mWzFdLGY9YVtjXT1mWzBdKSxjIT09ZCYmKGFbZF09ZixkZWxldGUgYVtjXSksZz1uLmNzc0hvb2tzW2RdLGcmJiJleHBhbmQiaW4gZyl7Zj1nLmV4cGFuZChmKSxkZWxldGUgYVtkXTtmb3IoYyBpbiBmKWMgaW4gYXx8KGFbY109ZltjXSxiW2NdPWUpfWVsc2UgYltkXT1lfWZ1bmN0aW9uIFhiKGEsYixjKXt2YXIgZCxlLGY9MCxnPVFiLmxlbmd0aCxoPW4uRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgaS5lbGVtfSksaT1mdW5jdGlvbigpe2lmKGUpcmV0dXJuITE7Zm9yKHZhciBiPUxifHxTYigpLGM9TWF0aC5tYXgoMCxqLnN0YXJ0VGltZStqLmR1cmF0aW9uLWIpLGQ9Yy9qLmR1cmF0aW9ufHwwLGY9MS1kLGc9MCxpPWoudHdlZW5zLmxlbmd0aDtpPmc7ZysrKWoudHdlZW5zW2ddLnJ1bihmKTtyZXR1cm4gaC5ub3RpZnlXaXRoKGEsW2osZixjXSksMT5mJiZpP2M6KGgucmVzb2x2ZVdpdGgoYSxbal0pLCExKX0saj1oLnByb21pc2Uoe2VsZW06YSxwcm9wczpuLmV4dGVuZCh7fSxiKSxvcHRzOm4uZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9fSxjKSxvcmlnaW5hbFByb3BlcnRpZXM6YixvcmlnaW5hbE9wdGlvbnM6YyxzdGFydFRpbWU6TGJ8fFNiKCksZHVyYXRpb246Yy5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24oYixjKXt2YXIgZD1uLlR3ZWVuKGEsai5vcHRzLGIsYyxqLm9wdHMuc3BlY2lhbEVhc2luZ1tiXXx8ai5vcHRzLmVhc2luZyk7cmV0dXJuIGoudHdlZW5zLnB1c2goZCksZH0sc3RvcDpmdW5jdGlvbihiKXt2YXIgYz0wLGQ9Yj9qLnR3ZWVucy5sZW5ndGg6MDtpZihlKXJldHVybiB0aGlzO2ZvcihlPSEwO2Q+YztjKyspai50d2VlbnNbY10ucnVuKDEpO3JldHVybiBiP2gucmVzb2x2ZVdpdGgoYSxbaixiXSk6aC5yZWplY3RXaXRoKGEsW2osYl0pLHRoaXN9fSksaz1qLnByb3BzO2ZvcihXYihrLGoub3B0cy5zcGVjaWFsRWFzaW5nKTtnPmY7ZisrKWlmKGQ9UWJbZl0uY2FsbChqLGEsayxqLm9wdHMpKXJldHVybiBkO3JldHVybiBuLm1hcChrLFViLGopLG4uaXNGdW5jdGlvbihqLm9wdHMuc3RhcnQpJiZqLm9wdHMuc3RhcnQuY2FsbChhLGopLG4uZngudGltZXIobi5leHRlbmQoaSx7ZWxlbTphLGFuaW06aixxdWV1ZTpqLm9wdHMucXVldWV9KSksai5wcm9ncmVzcyhqLm9wdHMucHJvZ3Jlc3MpLmRvbmUoai5vcHRzLmRvbmUsai5vcHRzLmNvbXBsZXRlKS5mYWlsKGoub3B0cy5mYWlsKS5hbHdheXMoai5vcHRzLmFsd2F5cyl9bi5BbmltYXRpb249bi5leHRlbmQoWGIse3R3ZWVuZXI6ZnVuY3Rpb24oYSxiKXtuLmlzRnVuY3Rpb24oYSk/KGI9YSxhPVsiKiJdKTphPWEuc3BsaXQoIiAiKTtmb3IodmFyIGMsZD0wLGU9YS5sZW5ndGg7ZT5kO2QrKyljPWFbZF0sUmJbY109UmJbY118fFtdLFJiW2NdLnVuc2hpZnQoYil9LHByZWZpbHRlcjpmdW5jdGlvbihhLGIpe2I/UWIudW5zaGlmdChhKTpRYi5wdXNoKGEpfX0pLG4uc3BlZWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEmJiJvYmplY3QiPT10eXBlb2YgYT9uLmV4dGVuZCh7fSxhKTp7Y29tcGxldGU6Y3x8IWMmJmJ8fG4uaXNGdW5jdGlvbihhKSYmYSxkdXJhdGlvbjphLGVhc2luZzpjJiZifHxiJiYhbi5pc0Z1bmN0aW9uKGIpJiZifTtyZXR1cm4gZC5kdXJhdGlvbj1uLmZ4Lm9mZj8wOiJudW1iZXIiPT10eXBlb2YgZC5kdXJhdGlvbj9kLmR1cmF0aW9uOmQuZHVyYXRpb24gaW4gbi5meC5zcGVlZHM/bi5meC5zcGVlZHNbZC5kdXJhdGlvbl06bi5meC5zcGVlZHMuX2RlZmF1bHQsKG51bGw9PWQucXVldWV8fGQucXVldWU9PT0hMCkmJihkLnF1ZXVlPSJmeCIpLGQub2xkPWQuY29tcGxldGUsZC5jb21wbGV0ZT1mdW5jdGlvbigpe24uaXNGdW5jdGlvbihkLm9sZCkmJmQub2xkLmNhbGwodGhpcyksZC5xdWV1ZSYmbi5kZXF1ZXVlKHRoaXMsZC5xdWV1ZSl9LGR9LG4uZm4uZXh0ZW5kKHtmYWRlVG86ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuZmlsdGVyKFMpLmNzcygib3BhY2l0eSIsMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoe29wYWNpdHk6Yn0sYSxjLGQpfSxhbmltYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW4uaXNFbXB0eU9iamVjdChhKSxmPW4uc3BlZWQoYixjLGQpLGc9ZnVuY3Rpb24oKXt2YXIgYj1YYih0aGlzLG4uZXh0ZW5kKHt9LGEpLGYpOyhlfHxMLmdldCh0aGlzLCJmaW5pc2giKSkmJmIuc3RvcCghMCl9O3JldHVybiBnLmZpbmlzaD1nLGV8fGYucXVldWU9PT0hMT90aGlzLmVhY2goZyk6dGhpcy5xdWV1ZShmLnF1ZXVlLGcpfSxzdG9wOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mdW5jdGlvbihhKXt2YXIgYj1hLnN0b3A7ZGVsZXRlIGEuc3RvcCxiKGMpfTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGEmJihjPWIsYj1hLGE9dm9pZCAwKSxiJiZhIT09ITEmJnRoaXMucXVldWUoYXx8ImZ4IixbXSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9ITAsZT1udWxsIT1hJiZhKyJxdWV1ZUhvb2tzIixmPW4udGltZXJzLGc9TC5nZXQodGhpcyk7aWYoZSlnW2VdJiZnW2VdLnN0b3AmJmQoZ1tlXSk7ZWxzZSBmb3IoZSBpbiBnKWdbZV0mJmdbZV0uc3RvcCYmUGIudGVzdChlKSYmZChnW2VdKTtmb3IoZT1mLmxlbmd0aDtlLS07KWZbZV0uZWxlbSE9PXRoaXN8fG51bGwhPWEmJmZbZV0ucXVldWUhPT1hfHwoZltlXS5hbmltLnN0b3AoYyksYj0hMSxmLnNwbGljZShlLDEpKTsoYnx8IWMpJiZuLmRlcXVldWUodGhpcyxhKX0pfSxmaW5pc2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT0hMSYmKGE9YXx8ImZ4IiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsYz1MLmdldCh0aGlzKSxkPWNbYSsicXVldWUiXSxlPWNbYSsicXVldWVIb29rcyJdLGY9bi50aW1lcnMsZz1kP2QubGVuZ3RoOjA7Zm9yKGMuZmluaXNoPSEwLG4ucXVldWUodGhpcyxhLFtdKSxlJiZlLnN0b3AmJmUuc3RvcC5jYWxsKHRoaXMsITApLGI9Zi5sZW5ndGg7Yi0tOylmW2JdLmVsZW09PT10aGlzJiZmW2JdLnF1ZXVlPT09YSYmKGZbYl0uYW5pbS5zdG9wKCEwKSxmLnNwbGljZShiLDEpKTtmb3IoYj0wO2c+YjtiKyspZFtiXSYmZFtiXS5maW5pc2gmJmRbYl0uZmluaXNoLmNhbGwodGhpcyk7ZGVsZXRlIGMuZmluaXNofSl9fSksbi5lYWNoKFsidG9nZ2xlIiwic2hvdyIsImhpZGUiXSxmdW5jdGlvbihhLGIpe3ZhciBjPW4uZm5bYl07bi5mbltiXT1mdW5jdGlvbihhLGQsZSl7cmV0dXJuIG51bGw9PWF8fCJib29sZWFuIj09dHlwZW9mIGE/Yy5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dGhpcy5hbmltYXRlKFRiKGIsITApLGEsZCxlKX19KSxuLmVhY2goe3NsaWRlRG93bjpUYigic2hvdyIpLHNsaWRlVXA6VGIoImhpZGUiKSxzbGlkZVRvZ2dsZTpUYigidG9nZ2xlIiksZmFkZUluOntvcGFjaXR5OiJzaG93In0sZmFkZU91dDp7b3BhY2l0eToiaGlkZSJ9LGZhZGVUb2dnbGU6e29wYWNpdHk6InRvZ2dsZSJ9fSxmdW5jdGlvbihhLGIpe24uZm5bYV09ZnVuY3Rpb24oYSxjLGQpe3JldHVybiB0aGlzLmFuaW1hdGUoYixhLGMsZCl9fSksbi50aW1lcnM9W10sbi5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIGEsYj0wLGM9bi50aW1lcnM7Zm9yKExiPW4ubm93KCk7YjxjLmxlbmd0aDtiKyspYT1jW2JdLGEoKXx8Y1tiXSE9PWF8fGMuc3BsaWNlKGItLSwxKTtjLmxlbmd0aHx8bi5meC5zdG9wKCksTGI9dm9pZCAwfSxuLmZ4LnRpbWVyPWZ1bmN0aW9uKGEpe24udGltZXJzLnB1c2goYSksYSgpP24uZnguc3RhcnQoKTpuLnRpbWVycy5wb3AoKX0sbi5meC5pbnRlcnZhbD0xMyxuLmZ4LnN0YXJ0PWZ1bmN0aW9uKCl7TWJ8fChNYj1zZXRJbnRlcnZhbChuLmZ4LnRpY2ssbi5meC5pbnRlcnZhbCkpfSxuLmZ4LnN0b3A9ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKE1iKSxNYj1udWxsfSxuLmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSxuLmZuLmRlbGF5PWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9bi5meD9uLmZ4LnNwZWVkc1thXXx8YTphLGI9Ynx8ImZ4Iix0aGlzLnF1ZXVlKGIsZnVuY3Rpb24oYixjKXt2YXIgZD1zZXRUaW1lb3V0KGIsYSk7Yy5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGQpfX0pfSxmdW5jdGlvbigpe3ZhciBhPWwuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxiPWwuY3JlYXRlRWxlbWVudCgic2VsZWN0IiksYz1iLmFwcGVuZENoaWxkKGwuY3JlYXRlRWxlbWVudCgib3B0aW9uIikpO2EudHlwZT0iY2hlY2tib3giLGsuY2hlY2tPbj0iIiE9PWEudmFsdWUsay5vcHRTZWxlY3RlZD1jLnNlbGVjdGVkLGIuZGlzYWJsZWQ9ITAsay5vcHREaXNhYmxlZD0hYy5kaXNhYmxlZCxhPWwuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxhLnZhbHVlPSJ0IixhLnR5cGU9InJhZGlvIixrLnJhZGlvVmFsdWU9InQiPT09YS52YWx1ZX0oKTt2YXIgWWIsWmIsJGI9bi5leHByLmF0dHJIYW5kbGU7bi5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSih0aGlzLG4uYXR0cixhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5yZW1vdmVBdHRyKHRoaXMsYSl9KX19KSxuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWEubm9kZVR5cGU7aWYoYSYmMyE9PWYmJjghPT1mJiYyIT09ZilyZXR1cm4gdHlwZW9mIGEuZ2V0QXR0cmlidXRlPT09VT9uLnByb3AoYSxiLGMpOigxPT09ZiYmbi5pc1hNTERvYyhhKXx8KGI9Yi50b0xvd2VyQ2FzZSgpLGQ9bi5hdHRySG9va3NbYl18fChuLmV4cHIubWF0Y2guYm9vbC50ZXN0KGIpP1piOlliKSksdm9pZCAwPT09Yz9kJiYiZ2V0ImluIGQmJm51bGwhPT0oZT1kLmdldChhLGIpKT9lOihlPW4uZmluZC5hdHRyKGEsYiksbnVsbD09ZT92b2lkIDA6ZSk6bnVsbCE9PWM/ZCYmInNldCJpbiBkJiZ2b2lkIDAhPT0oZT1kLnNldChhLGMsYikpP2U6KGEuc2V0QXR0cmlidXRlKGIsYysiIiksYyk6dm9pZCBuLnJlbW92ZUF0dHIoYSxiKSkKfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPTAsZj1iJiZiLm1hdGNoKEUpO2lmKGYmJjE9PT1hLm5vZGVUeXBlKXdoaWxlKGM9ZltlKytdKWQ9bi5wcm9wRml4W2NdfHxjLG4uZXhwci5tYXRjaC5ib29sLnRlc3QoYykmJihhW2RdPSExKSxhLnJlbW92ZUF0dHJpYnV0ZShjKX0sYXR0ckhvb2tzOnt0eXBlOntzZXQ6ZnVuY3Rpb24oYSxiKXtpZighay5yYWRpb1ZhbHVlJiYicmFkaW8iPT09YiYmbi5ub2RlTmFtZShhLCJpbnB1dCIpKXt2YXIgYz1hLnZhbHVlO3JldHVybiBhLnNldEF0dHJpYnV0ZSgidHlwZSIsYiksYyYmKGEudmFsdWU9YyksYn19fX19KSxaYj17c2V0OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYj09PSExP24ucmVtb3ZlQXR0cihhLGMpOmEuc2V0QXR0cmlidXRlKGMsYyksY319LG4uZWFjaChuLmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1x3Ky9nKSxmdW5jdGlvbihhLGIpe3ZhciBjPSRiW2JdfHxuLmZpbmQuYXR0cjskYltiXT1mdW5jdGlvbihhLGIsZCl7dmFyIGUsZjtyZXR1cm4gZHx8KGY9JGJbYl0sJGJbYl09ZSxlPW51bGwhPWMoYSxiLGQpP2IudG9Mb3dlckNhc2UoKTpudWxsLCRiW2JdPWYpLGV9fSk7dmFyIF9iPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2k7bi5mbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSih0aGlzLG4ucHJvcCxhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlUHJvcDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXNbbi5wcm9wRml4W2FdfHxhXX0pfX0pLG4uZXh0ZW5kKHtwcm9wRml4OnsiZm9yIjoiaHRtbEZvciIsImNsYXNzIjoiY2xhc3NOYW1lIn0scHJvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGc9YS5ub2RlVHlwZTtpZihhJiYzIT09ZyYmOCE9PWcmJjIhPT1nKXJldHVybiBmPTEhPT1nfHwhbi5pc1hNTERvYyhhKSxmJiYoYj1uLnByb3BGaXhbYl18fGIsZT1uLnByb3BIb29rc1tiXSksdm9pZCAwIT09Yz9lJiYic2V0ImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDphW2JdPWM6ZSYmImdldCJpbiBlJiZudWxsIT09KGQ9ZS5nZXQoYSxiKSk/ZDphW2JdfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaGFzQXR0cmlidXRlKCJ0YWJpbmRleCIpfHxfYi50ZXN0KGEubm9kZU5hbWUpfHxhLmhyZWY/YS50YWJJbmRleDotMX19fX0pLGsub3B0U2VsZWN0ZWR8fChuLnByb3BIb29rcy5zZWxlY3RlZD17Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxudWxsfX0pLG4uZWFjaChbInRhYkluZGV4IiwicmVhZE9ubHkiLCJtYXhMZW5ndGgiLCJjZWxsU3BhY2luZyIsImNlbGxQYWRkaW5nIiwicm93U3BhbiIsImNvbFNwYW4iLCJ1c2VNYXAiLCJmcmFtZUJvcmRlciIsImNvbnRlbnRFZGl0YWJsZSJdLGZ1bmN0aW9uKCl7bi5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pO3ZhciBhYz0vW1x0XHJcblxmXS9nO24uZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaD0ic3RyaW5nIj09dHlwZW9mIGEmJmEsaT0wLGo9dGhpcy5sZW5ndGg7aWYobi5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bih0aGlzKS5hZGRDbGFzcyhhLmNhbGwodGhpcyxiLHRoaXMuY2xhc3NOYW1lKSl9KTtpZihoKWZvcihiPShhfHwiIikubWF0Y2goRSl8fFtdO2o+aTtpKyspaWYoYz10aGlzW2ldLGQ9MT09PWMubm9kZVR5cGUmJihjLmNsYXNzTmFtZT8oIiAiK2MuY2xhc3NOYW1lKyIgIikucmVwbGFjZShhYywiICIpOiIgIikpe2Y9MDt3aGlsZShlPWJbZisrXSlkLmluZGV4T2YoIiAiK2UrIiAiKTwwJiYoZCs9ZSsiICIpO2c9bi50cmltKGQpLGMuY2xhc3NOYW1lIT09ZyYmKGMuY2xhc3NOYW1lPWcpfXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaD0wPT09YXJndW1lbnRzLmxlbmd0aHx8InN0cmluZyI9PXR5cGVvZiBhJiZhLGk9MCxqPXRoaXMubGVuZ3RoO2lmKG4uaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykucmVtb3ZlQ2xhc3MoYS5jYWxsKHRoaXMsYix0aGlzLmNsYXNzTmFtZSkpfSk7aWYoaClmb3IoYj0oYXx8IiIpLm1hdGNoKEUpfHxbXTtqPmk7aSsrKWlmKGM9dGhpc1tpXSxkPTE9PT1jLm5vZGVUeXBlJiYoYy5jbGFzc05hbWU/KCIgIitjLmNsYXNzTmFtZSsiICIpLnJlcGxhY2UoYWMsIiAiKToiIikpe2Y9MDt3aGlsZShlPWJbZisrXSl3aGlsZShkLmluZGV4T2YoIiAiK2UrIiAiKT49MClkPWQucmVwbGFjZSgiICIrZSsiICIsIiAiKTtnPWE/bi50cmltKGQpOiIiLGMuY2xhc3NOYW1lIT09ZyYmKGMuY2xhc3NOYW1lPWcpfXJldHVybiB0aGlzfSx0b2dnbGVDbGFzczpmdW5jdGlvbihhLGIpe3ZhciBjPXR5cGVvZiBhO3JldHVybiJib29sZWFuIj09dHlwZW9mIGImJiJzdHJpbmciPT09Yz9iP3RoaXMuYWRkQ2xhc3MoYSk6dGhpcy5yZW1vdmVDbGFzcyhhKTp0aGlzLmVhY2gobi5pc0Z1bmN0aW9uKGEpP2Z1bmN0aW9uKGMpe24odGhpcykudG9nZ2xlQ2xhc3MoYS5jYWxsKHRoaXMsYyx0aGlzLmNsYXNzTmFtZSxiKSxiKX06ZnVuY3Rpb24oKXtpZigic3RyaW5nIj09PWMpe3ZhciBiLGQ9MCxlPW4odGhpcyksZj1hLm1hdGNoKEUpfHxbXTt3aGlsZShiPWZbZCsrXSllLmhhc0NsYXNzKGIpP2UucmVtb3ZlQ2xhc3MoYik6ZS5hZGRDbGFzcyhiKX1lbHNlKGM9PT1VfHwiYm9vbGVhbiI9PT1jKSYmKHRoaXMuY2xhc3NOYW1lJiZMLnNldCh0aGlzLCJfX2NsYXNzTmFtZV9fIix0aGlzLmNsYXNzTmFtZSksdGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWV8fGE9PT0hMT8iIjpMLmdldCh0aGlzLCJfX2NsYXNzTmFtZV9fIil8fCIiKX0pfSxoYXNDbGFzczpmdW5jdGlvbihhKXtmb3IodmFyIGI9IiAiK2ErIiAiLGM9MCxkPXRoaXMubGVuZ3RoO2Q+YztjKyspaWYoMT09PXRoaXNbY10ubm9kZVR5cGUmJigiICIrdGhpc1tjXS5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKGFjLCIgIikuaW5kZXhPZihiKT49MClyZXR1cm4hMDtyZXR1cm4hMX19KTt2YXIgYmM9L1xyL2c7bi5mbi5leHRlbmQoe3ZhbDpmdW5jdGlvbihhKXt2YXIgYixjLGQsZT10aGlzWzBdO3tpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiBkPW4uaXNGdW5jdGlvbihhKSx0aGlzLmVhY2goZnVuY3Rpb24oYyl7dmFyIGU7MT09PXRoaXMubm9kZVR5cGUmJihlPWQ/YS5jYWxsKHRoaXMsYyxuKHRoaXMpLnZhbCgpKTphLG51bGw9PWU/ZT0iIjoibnVtYmVyIj09dHlwZW9mIGU/ZSs9IiI6bi5pc0FycmF5KGUpJiYoZT1uLm1hcChlLGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hPyIiOmErIiJ9KSksYj1uLnZhbEhvb2tzW3RoaXMudHlwZV18fG4udmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiYic2V0ImluIGImJnZvaWQgMCE9PWIuc2V0KHRoaXMsZSwidmFsdWUiKXx8KHRoaXMudmFsdWU9ZSkpfSk7aWYoZSlyZXR1cm4gYj1uLnZhbEhvb2tzW2UudHlwZV18fG4udmFsSG9va3NbZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiYiZ2V0ImluIGImJnZvaWQgMCE9PShjPWIuZ2V0KGUsInZhbHVlIikpP2M6KGM9ZS52YWx1ZSwic3RyaW5nIj09dHlwZW9mIGM/Yy5yZXBsYWNlKGJjLCIiKTpudWxsPT1jPyIiOmMpfX19KSxuLmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPW4uZmluZC5hdHRyKGEsInZhbHVlIik7cmV0dXJuIG51bGwhPWI/YjpuLnRyaW0obi50ZXh0KGEpKX19LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjLGQ9YS5vcHRpb25zLGU9YS5zZWxlY3RlZEluZGV4LGY9InNlbGVjdC1vbmUiPT09YS50eXBlfHwwPmUsZz1mP251bGw6W10saD1mP2UrMTpkLmxlbmd0aCxpPTA+ZT9oOmY/ZTowO2g+aTtpKyspaWYoYz1kW2ldLCEoIWMuc2VsZWN0ZWQmJmkhPT1lfHwoay5vcHREaXNhYmxlZD9jLmRpc2FibGVkOm51bGwhPT1jLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKSl8fGMucGFyZW50Tm9kZS5kaXNhYmxlZCYmbi5ub2RlTmFtZShjLnBhcmVudE5vZGUsIm9wdGdyb3VwIikpKXtpZihiPW4oYykudmFsKCksZilyZXR1cm4gYjtnLnB1c2goYil9cmV0dXJuIGd9LHNldDpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT1hLm9wdGlvbnMsZj1uLm1ha2VBcnJheShiKSxnPWUubGVuZ3RoO3doaWxlKGctLSlkPWVbZ10sKGQuc2VsZWN0ZWQ9bi5pbkFycmF5KGQudmFsdWUsZik+PTApJiYoYz0hMCk7cmV0dXJuIGN8fChhLnNlbGVjdGVkSW5kZXg9LTEpLGZ9fX19KSxuLmVhY2goWyJyYWRpbyIsImNoZWNrYm94Il0sZnVuY3Rpb24oKXtuLnZhbEhvb2tzW3RoaXNdPXtzZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5pc0FycmF5KGIpP2EuY2hlY2tlZD1uLmluQXJyYXkobihhKS52YWwoKSxiKT49MDp2b2lkIDB9fSxrLmNoZWNrT258fChuLnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09PWEuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpPyJvbiI6YS52YWx1ZX0pfSksbi5lYWNoKCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yIGNvbnRleHRtZW51Ii5zcGxpdCgiICIpLGZ1bmN0aW9uKGEsYil7bi5mbltiXT1mdW5jdGlvbihhLGMpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbihiLG51bGwsYSxjKTp0aGlzLnRyaWdnZXIoYil9fSksbi5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubW91c2VlbnRlcihhKS5tb3VzZWxlYXZlKGJ8fGEpfSxiaW5kOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5vbihhLG51bGwsYixjKX0sdW5iaW5kOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMub2ZmKGEsbnVsbCxiKX0sZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMub24oYixhLGMsZCl9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihhLCIqKiIpOnRoaXMub2ZmKGIsYXx8IioqIixjKX19KTt2YXIgY2M9bi5ub3coKSxkYz0vXD8vO24ucGFyc2VKU09OPWZ1bmN0aW9uKGEpe3JldHVybiBKU09OLnBhcnNlKGErIiIpfSxuLnBhcnNlWE1MPWZ1bmN0aW9uKGEpe3ZhciBiLGM7aWYoIWF8fCJzdHJpbmciIT10eXBlb2YgYSlyZXR1cm4gbnVsbDt0cnl7Yz1uZXcgRE9NUGFyc2VyLGI9Yy5wYXJzZUZyb21TdHJpbmcoYSwidGV4dC94bWwiKX1jYXRjaChkKXtiPXZvaWQgMH1yZXR1cm4oIWJ8fGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RoKSYmbi5lcnJvcigiSW52YWxpZCBYTUw6ICIrYSksYn07dmFyIGVjLGZjLGdjPS8jLiokLyxoYz0vKFs/Jl0pXz1bXiZdKi8saWM9L14oLio/KTpbIFx0XSooW15cclxuXSopJC9nbSxqYz0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxrYz0vXig/OkdFVHxIRUFEKSQvLGxjPS9eXC9cLy8sbWM9L14oW1x3ListXSs6KSg/OlwvXC8oPzpbXlwvPyNdKkB8KShbXlwvPyM6XSopKD86OihcZCspfCl8KS8sbmM9e30sb2M9e30scGM9IiovIi5jb25jYXQoIioiKTt0cnl7ZmM9bG9jYXRpb24uaHJlZn1jYXRjaChxYyl7ZmM9bC5jcmVhdGVFbGVtZW50KCJhIiksZmMuaHJlZj0iIixmYz1mYy5ocmVmfWVjPW1jLmV4ZWMoZmMudG9Mb3dlckNhc2UoKSl8fFtdO2Z1bmN0aW9uIHJjKGEpe3JldHVybiBmdW5jdGlvbihiLGMpeyJzdHJpbmciIT10eXBlb2YgYiYmKGM9YixiPSIqIik7dmFyIGQsZT0wLGY9Yi50b0xvd2VyQ2FzZSgpLm1hdGNoKEUpfHxbXTtpZihuLmlzRnVuY3Rpb24oYykpd2hpbGUoZD1mW2UrK10pIisiPT09ZFswXT8oZD1kLnNsaWNlKDEpfHwiKiIsKGFbZF09YVtkXXx8W10pLnVuc2hpZnQoYykpOihhW2RdPWFbZF18fFtdKS5wdXNoKGMpfX1mdW5jdGlvbiBzYyhhLGIsYyxkKXt2YXIgZT17fSxmPWE9PT1vYztmdW5jdGlvbiBnKGgpe3ZhciBpO3JldHVybiBlW2hdPSEwLG4uZWFjaChhW2hdfHxbXSxmdW5jdGlvbihhLGgpe3ZhciBqPWgoYixjLGQpO3JldHVybiJzdHJpbmciIT10eXBlb2Yganx8Znx8ZVtqXT9mPyEoaT1qKTp2b2lkIDA6KGIuZGF0YVR5cGVzLnVuc2hpZnQoaiksZyhqKSwhMSl9KSxpfXJldHVybiBnKGIuZGF0YVR5cGVzWzBdKXx8IWVbIioiXSYmZygiKiIpfWZ1bmN0aW9uIHRjKGEsYil7dmFyIGMsZCxlPW4uYWpheFNldHRpbmdzLmZsYXRPcHRpb25zfHx7fTtmb3IoYyBpbiBiKXZvaWQgMCE9PWJbY10mJigoZVtjXT9hOmR8fChkPXt9KSlbY109YltjXSk7cmV0dXJuIGQmJm4uZXh0ZW5kKCEwLGEsZCksYX1mdW5jdGlvbiB1YyhhLGIsYyl7dmFyIGQsZSxmLGcsaD1hLmNvbnRlbnRzLGk9YS5kYXRhVHlwZXM7d2hpbGUoIioiPT09aVswXSlpLnNoaWZ0KCksdm9pZCAwPT09ZCYmKGQ9YS5taW1lVHlwZXx8Yi5nZXRSZXNwb25zZUhlYWRlcigiQ29udGVudC1UeXBlIikpO2lmKGQpZm9yKGUgaW4gaClpZihoW2VdJiZoW2VdLnRlc3QoZCkpe2kudW5zaGlmdChlKTticmVha31pZihpWzBdaW4gYylmPWlbMF07ZWxzZXtmb3IoZSBpbiBjKXtpZighaVswXXx8YS5jb252ZXJ0ZXJzW2UrIiAiK2lbMF1dKXtmPWU7YnJlYWt9Z3x8KGc9ZSl9Zj1mfHxnfXJldHVybiBmPyhmIT09aVswXSYmaS51bnNoaWZ0KGYpLGNbZl0pOnZvaWQgMH1mdW5jdGlvbiB2YyhhLGIsYyxkKXt2YXIgZSxmLGcsaCxpLGo9e30saz1hLmRhdGFUeXBlcy5zbGljZSgpO2lmKGtbMV0pZm9yKGcgaW4gYS5jb252ZXJ0ZXJzKWpbZy50b0xvd2VyQ2FzZSgpXT1hLmNvbnZlcnRlcnNbZ107Zj1rLnNoaWZ0KCk7d2hpbGUoZilpZihhLnJlc3BvbnNlRmllbGRzW2ZdJiYoY1thLnJlc3BvbnNlRmllbGRzW2ZdXT1iKSwhaSYmZCYmYS5kYXRhRmlsdGVyJiYoYj1hLmRhdGFGaWx0ZXIoYixhLmRhdGFUeXBlKSksaT1mLGY9ay5zaGlmdCgpKWlmKCIqIj09PWYpZj1pO2Vsc2UgaWYoIioiIT09aSYmaSE9PWYpe2lmKGc9altpKyIgIitmXXx8alsiKiAiK2ZdLCFnKWZvcihlIGluIGopaWYoaD1lLnNwbGl0KCIgIiksaFsxXT09PWYmJihnPWpbaSsiICIraFswXV18fGpbIiogIitoWzBdXSkpe2c9PT0hMD9nPWpbZV06altlXSE9PSEwJiYoZj1oWzBdLGsudW5zaGlmdChoWzFdKSk7YnJlYWt9aWYoZyE9PSEwKWlmKGcmJmFbInRocm93cyJdKWI9ZyhiKTtlbHNlIHRyeXtiPWcoYil9Y2F0Y2gobCl7cmV0dXJue3N0YXRlOiJwYXJzZXJlcnJvciIsZXJyb3I6Zz9sOiJObyBjb252ZXJzaW9uIGZyb20gIitpKyIgdG8gIitmfX19cmV0dXJue3N0YXRlOiJzdWNjZXNzIixkYXRhOmJ9fW4uZXh0ZW5kKHthY3RpdmU6MCxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fSxhamF4U2V0dGluZ3M6e3VybDpmYyx0eXBlOiJHRVQiLGlzTG9jYWw6amMudGVzdChlY1sxXSksZ2xvYmFsOiEwLHByb2Nlc3NEYXRhOiEwLGFzeW5jOiEwLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLGFjY2VwdHM6eyIqIjpwYyx0ZXh0OiJ0ZXh0L3BsYWluIixodG1sOiJ0ZXh0L2h0bWwiLHhtbDoiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsanNvbjoiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0In0sY29udGVudHM6e3htbDoveG1sLyxodG1sOi9odG1sLyxqc29uOi9qc29uL30scmVzcG9uc2VGaWVsZHM6e3htbDoicmVzcG9uc2VYTUwiLHRleHQ6InJlc3BvbnNlVGV4dCIsanNvbjoicmVzcG9uc2VKU09OIn0sY29udmVydGVyczp7IiogdGV4dCI6U3RyaW5nLCJ0ZXh0IGh0bWwiOiEwLCJ0ZXh0IGpzb24iOm4ucGFyc2VKU09OLCJ0ZXh0IHhtbCI6bi5wYXJzZVhNTH0sZmxhdE9wdGlvbnM6e3VybDohMCxjb250ZXh0OiEwfX0sYWpheFNldHVwOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/dGModGMoYSxuLmFqYXhTZXR0aW5ncyksYik6dGMobi5hamF4U2V0dGluZ3MsYSl9LGFqYXhQcmVmaWx0ZXI6cmMobmMpLGFqYXhUcmFuc3BvcnQ6cmMob2MpLGFqYXg6ZnVuY3Rpb24oYSxiKXsib2JqZWN0Ij09dHlwZW9mIGEmJihiPWEsYT12b2lkIDApLGI9Ynx8e307dmFyIGMsZCxlLGYsZyxoLGksaixrPW4uYWpheFNldHVwKHt9LGIpLGw9ay5jb250ZXh0fHxrLG09ay5jb250ZXh0JiYobC5ub2RlVHlwZXx8bC5qcXVlcnkpP24obCk6bi5ldmVudCxvPW4uRGVmZXJyZWQoKSxwPW4uQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLHE9ay5zdGF0dXNDb2RlfHx7fSxyPXt9LHM9e30sdD0wLHU9ImNhbmNlbGVkIix2PXtyZWFkeVN0YXRlOjAsZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoMj09PXQpe2lmKCFmKXtmPXt9O3doaWxlKGI9aWMuZXhlYyhlKSlmW2JbMV0udG9Mb3dlckNhc2UoKV09YlsyXX1iPWZbYS50b0xvd2VyQ2FzZSgpXX1yZXR1cm4gbnVsbD09Yj9udWxsOmJ9LGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe3JldHVybiAyPT09dD9lOm51bGx9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnRvTG93ZXJDYXNlKCk7cmV0dXJuIHR8fChhPXNbY109c1tjXXx8YSxyW2FdPWIpLHRoaXN9LG92ZXJyaWRlTWltZVR5cGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHR8fChrLm1pbWVUeXBlPWEpLHRoaXN9LHN0YXR1c0NvZGU6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoYSlpZigyPnQpZm9yKGIgaW4gYSlxW2JdPVtxW2JdLGFbYl1dO2Vsc2Ugdi5hbHdheXMoYVt2LnN0YXR1c10pO3JldHVybiB0aGlzfSxhYm9ydDpmdW5jdGlvbihhKXt2YXIgYj1hfHx1O3JldHVybiBjJiZjLmFib3J0KGIpLHgoMCxiKSx0aGlzfX07aWYoby5wcm9taXNlKHYpLmNvbXBsZXRlPXAuYWRkLHYuc3VjY2Vzcz12LmRvbmUsdi5lcnJvcj12LmZhaWwsay51cmw9KChhfHxrLnVybHx8ZmMpKyIiKS5yZXBsYWNlKGdjLCIiKS5yZXBsYWNlKGxjLGVjWzFdKyIvLyIpLGsudHlwZT1iLm1ldGhvZHx8Yi50eXBlfHxrLm1ldGhvZHx8ay50eXBlLGsuZGF0YVR5cGVzPW4udHJpbShrLmRhdGFUeXBlfHwiKiIpLnRvTG93ZXJDYXNlKCkubWF0Y2goRSl8fFsiIl0sbnVsbD09ay5jcm9zc0RvbWFpbiYmKGg9bWMuZXhlYyhrLnVybC50b0xvd2VyQ2FzZSgpKSxrLmNyb3NzRG9tYWluPSEoIWh8fGhbMV09PT1lY1sxXSYmaFsyXT09PWVjWzJdJiYoaFszXXx8KCJodHRwOiI9PT1oWzFdPyI4MCI6IjQ0MyIpKT09PShlY1szXXx8KCJodHRwOiI9PT1lY1sxXT8iODAiOiI0NDMiKSkpKSxrLmRhdGEmJmsucHJvY2Vzc0RhdGEmJiJzdHJpbmciIT10eXBlb2Ygay5kYXRhJiYoay5kYXRhPW4ucGFyYW0oay5kYXRhLGsudHJhZGl0aW9uYWwpKSxzYyhuYyxrLGIsdiksMj09PXQpcmV0dXJuIHY7aT1rLmdsb2JhbCxpJiYwPT09bi5hY3RpdmUrKyYmbi5ldmVudC50cmlnZ2VyKCJhamF4U3RhcnQiKSxrLnR5cGU9ay50eXBlLnRvVXBwZXJDYXNlKCksay5oYXNDb250ZW50PSFrYy50ZXN0KGsudHlwZSksZD1rLnVybCxrLmhhc0NvbnRlbnR8fChrLmRhdGEmJihkPWsudXJsKz0oZGMudGVzdChkKT8iJiI6Ij8iKStrLmRhdGEsZGVsZXRlIGsuZGF0YSksay5jYWNoZT09PSExJiYoay51cmw9aGMudGVzdChkKT9kLnJlcGxhY2UoaGMsIiQxXz0iK2NjKyspOmQrKGRjLnRlc3QoZCk/IiYiOiI/IikrIl89IitjYysrKSksay5pZk1vZGlmaWVkJiYobi5sYXN0TW9kaWZpZWRbZF0mJnYuc2V0UmVxdWVzdEhlYWRlcigiSWYtTW9kaWZpZWQtU2luY2UiLG4ubGFzdE1vZGlmaWVkW2RdKSxuLmV0YWdbZF0mJnYuc2V0UmVxdWVzdEhlYWRlcigiSWYtTm9uZS1NYXRjaCIsbi5ldGFnW2RdKSksKGsuZGF0YSYmay5oYXNDb250ZW50JiZrLmNvbnRlbnRUeXBlIT09ITF8fGIuY29udGVudFR5cGUpJiZ2LnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsay5jb250ZW50VHlwZSksdi5zZXRSZXF1ZXN0SGVhZGVyKCJBY2NlcHQiLGsuZGF0YVR5cGVzWzBdJiZrLmFjY2VwdHNbay5kYXRhVHlwZXNbMF1dP2suYWNjZXB0c1trLmRhdGFUeXBlc1swXV0rKCIqIiE9PWsuZGF0YVR5cGVzWzBdPyIsICIrcGMrIjsgcT0wLjAxIjoiIik6ay5hY2NlcHRzWyIqIl0pO2ZvcihqIGluIGsuaGVhZGVycyl2LnNldFJlcXVlc3RIZWFkZXIoaixrLmhlYWRlcnNbal0pO2lmKGsuYmVmb3JlU2VuZCYmKGsuYmVmb3JlU2VuZC5jYWxsKGwsdixrKT09PSExfHwyPT09dCkpcmV0dXJuIHYuYWJvcnQoKTt1PSJhYm9ydCI7Zm9yKGogaW57c3VjY2VzczoxLGVycm9yOjEsY29tcGxldGU6MX0pdltqXShrW2pdKTtpZihjPXNjKG9jLGssYix2KSl7di5yZWFkeVN0YXRlPTEsaSYmbS50cmlnZ2VyKCJhamF4U2VuZCIsW3Ysa10pLGsuYXN5bmMmJmsudGltZW91dD4wJiYoZz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7di5hYm9ydCgidGltZW91dCIpfSxrLnRpbWVvdXQpKTt0cnl7dD0xLGMuc2VuZChyLHgpfWNhdGNoKHcpe2lmKCEoMj50KSl0aHJvdyB3O3goLTEsdyl9fWVsc2UgeCgtMSwiTm8gVHJhbnNwb3J0Iik7ZnVuY3Rpb24geChhLGIsZixoKXt2YXIgaixyLHMsdSx3LHg9YjsyIT09dCYmKHQ9MixnJiZjbGVhclRpbWVvdXQoZyksYz12b2lkIDAsZT1ofHwiIix2LnJlYWR5U3RhdGU9YT4wPzQ6MCxqPWE+PTIwMCYmMzAwPmF8fDMwND09PWEsZiYmKHU9dWMoayx2LGYpKSx1PXZjKGssdSx2LGopLGo/KGsuaWZNb2RpZmllZCYmKHc9di5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpLHcmJihuLmxhc3RNb2RpZmllZFtkXT13KSx3PXYuZ2V0UmVzcG9uc2VIZWFkZXIoImV0YWciKSx3JiYobi5ldGFnW2RdPXcpKSwyMDQ9PT1hfHwiSEVBRCI9PT1rLnR5cGU/eD0ibm9jb250ZW50IjozMDQ9PT1hP3g9Im5vdG1vZGlmaWVkIjooeD11LnN0YXRlLHI9dS5kYXRhLHM9dS5lcnJvcixqPSFzKSk6KHM9eCwoYXx8IXgpJiYoeD0iZXJyb3IiLDA+YSYmKGE9MCkpKSx2LnN0YXR1cz1hLHYuc3RhdHVzVGV4dD0oYnx8eCkrIiIsaj9vLnJlc29sdmVXaXRoKGwsW3IseCx2XSk6by5yZWplY3RXaXRoKGwsW3YseCxzXSksdi5zdGF0dXNDb2RlKHEpLHE9dm9pZCAwLGkmJm0udHJpZ2dlcihqPyJhamF4U3VjY2VzcyI6ImFqYXhFcnJvciIsW3YsayxqP3I6c10pLHAuZmlyZVdpdGgobCxbdix4XSksaSYmKG0udHJpZ2dlcigiYWpheENvbXBsZXRlIixbdixrXSksLS1uLmFjdGl2ZXx8bi5ldmVudC50cmlnZ2VyKCJhamF4U3RvcCIpKSl9cmV0dXJuIHZ9LGdldEpTT046ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLmdldChhLGIsYywianNvbiIpfSxnZXRTY3JpcHQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5nZXQoYSx2b2lkIDAsYiwic2NyaXB0Iil9fSksbi5lYWNoKFsiZ2V0IiwicG9zdCJdLGZ1bmN0aW9uKGEsYil7bltiXT1mdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gbi5pc0Z1bmN0aW9uKGMpJiYoZT1lfHxkLGQ9YyxjPXZvaWQgMCksbi5hamF4KHt1cmw6YSx0eXBlOmIsZGF0YVR5cGU6ZSxkYXRhOmMsc3VjY2VzczpkfSl9fSksbi5lYWNoKFsiYWpheFN0YXJ0IiwiYWpheFN0b3AiLCJhamF4Q29tcGxldGUiLCJhamF4RXJyb3IiLCJhamF4U3VjY2VzcyIsImFqYXhTZW5kIl0sZnVuY3Rpb24oYSxiKXtuLmZuW2JdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9uKGIsYSl9fSksbi5fZXZhbFVybD1mdW5jdGlvbihhKXtyZXR1cm4gbi5hamF4KHt1cmw6YSx0eXBlOiJHRVQiLGRhdGFUeXBlOiJzY3JpcHQiLGFzeW5jOiExLGdsb2JhbDohMSwidGhyb3dzIjohMH0pfSxuLmZuLmV4dGVuZCh7d3JhcEFsbDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gbi5pc0Z1bmN0aW9uKGEpP3RoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLndyYXBBbGwoYS5jYWxsKHRoaXMsYikpfSk6KHRoaXNbMF0mJihiPW4oYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKCEwKSx0aGlzWzBdLnBhcmVudE5vZGUmJmIuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pLGIubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpczt3aGlsZShhLmZpcnN0RWxlbWVudENoaWxkKWE9YS5maXJzdEVsZW1lbnRDaGlsZDtyZXR1cm4gYX0pLmFwcGVuZCh0aGlzKSksdGhpcyl9LHdyYXBJbm5lcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKG4uaXNGdW5jdGlvbihhKT9mdW5jdGlvbihiKXtuKHRoaXMpLndyYXBJbm5lcihhLmNhbGwodGhpcyxiKSl9OmZ1bmN0aW9uKCl7dmFyIGI9bih0aGlzKSxjPWIuY29udGVudHMoKTtjLmxlbmd0aD9jLndyYXBBbGwoYSk6Yi5hcHBlbmQoYSl9KX0sd3JhcDpmdW5jdGlvbihhKXt2YXIgYj1uLmlzRnVuY3Rpb24oYSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihjKXtuKHRoaXMpLndyYXBBbGwoYj9hLmNhbGwodGhpcyxjKTphKX0pfSx1bndyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCl7bi5ub2RlTmFtZSh0aGlzLCJib2R5Iil8fG4odGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKX0pLmVuZCgpfX0pLG4uZXhwci5maWx0ZXJzLmhpZGRlbj1mdW5jdGlvbihhKXtyZXR1cm4gYS5vZmZzZXRXaWR0aDw9MCYmYS5vZmZzZXRIZWlnaHQ8PTB9LG4uZXhwci5maWx0ZXJzLnZpc2libGU9ZnVuY3Rpb24oYSl7cmV0dXJuIW4uZXhwci5maWx0ZXJzLmhpZGRlbihhKX07dmFyIHdjPS8lMjAvZyx4Yz0vXFtcXSQvLHljPS9ccj9cbi9nLHpjPS9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSxBYz0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7ZnVuY3Rpb24gQmMoYSxiLGMsZCl7dmFyIGU7aWYobi5pc0FycmF5KGIpKW4uZWFjaChiLGZ1bmN0aW9uKGIsZSl7Y3x8eGMudGVzdChhKT9kKGEsZSk6QmMoYSsiWyIrKCJvYmplY3QiPT10eXBlb2YgZT9iOiIiKSsiXSIsZSxjLGQpfSk7ZWxzZSBpZihjfHwib2JqZWN0IiE9PW4udHlwZShiKSlkKGEsYik7ZWxzZSBmb3IoZSBpbiBiKUJjKGErIlsiK2UrIl0iLGJbZV0sYyxkKX1uLnBhcmFtPWZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPWZ1bmN0aW9uKGEsYil7Yj1uLmlzRnVuY3Rpb24oYik/YigpOm51bGw9PWI/IiI6YixkW2QubGVuZ3RoXT1lbmNvZGVVUklDb21wb25lbnQoYSkrIj0iK2VuY29kZVVSSUNvbXBvbmVudChiKX07aWYodm9pZCAwPT09YiYmKGI9bi5hamF4U2V0dGluZ3MmJm4uYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsKSxuLmlzQXJyYXkoYSl8fGEuanF1ZXJ5JiYhbi5pc1BsYWluT2JqZWN0KGEpKW4uZWFjaChhLGZ1bmN0aW9uKCl7ZSh0aGlzLm5hbWUsdGhpcy52YWx1ZSl9KTtlbHNlIGZvcihjIGluIGEpQmMoYyxhW2NdLGIsZSk7cmV0dXJuIGQuam9pbigiJiIpLnJlcGxhY2Uod2MsIisiKX0sbi5mbi5leHRlbmQoe3NlcmlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiBuLnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSl9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGE9bi5wcm9wKHRoaXMsImVsZW1lbnRzIik7cmV0dXJuIGE/bi5tYWtlQXJyYXkoYSk6dGhpc30pLmZpbHRlcihmdW5jdGlvbigpe3ZhciBhPXRoaXMudHlwZTtyZXR1cm4gdGhpcy5uYW1lJiYhbih0aGlzKS5pcygiOmRpc2FibGVkIikmJkFjLnRlc3QodGhpcy5ub2RlTmFtZSkmJiF6Yy50ZXN0KGEpJiYodGhpcy5jaGVja2VkfHwhVC50ZXN0KGEpKX0pLm1hcChmdW5jdGlvbihhLGIpe3ZhciBjPW4odGhpcykudmFsKCk7cmV0dXJuIG51bGw9PWM/bnVsbDpuLmlzQXJyYXkoYyk/bi5tYXAoYyxmdW5jdGlvbihhKXtyZXR1cm57bmFtZTpiLm5hbWUsdmFsdWU6YS5yZXBsYWNlKHljLCJcclxuIil9fSk6e25hbWU6Yi5uYW1lLHZhbHVlOmMucmVwbGFjZSh5YywiXHJcbiIpfX0pLmdldCgpfX0pLG4uYWpheFNldHRpbmdzLnhocj1mdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0fWNhdGNoKGEpe319O3ZhciBDYz0wLERjPXt9LEVjPXswOjIwMCwxMjIzOjIwNH0sRmM9bi5hamF4U2V0dGluZ3MueGhyKCk7YS5BY3RpdmVYT2JqZWN0JiZuKGEpLm9uKCJ1bmxvYWQiLGZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIERjKURjW2FdKCl9KSxrLmNvcnM9ISFGYyYmIndpdGhDcmVkZW50aWFscyJpbiBGYyxrLmFqYXg9RmM9ISFGYyxuLmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIGsuY29yc3x8RmMmJiFhLmNyb3NzRG9tYWluP3tzZW5kOmZ1bmN0aW9uKGMsZCl7dmFyIGUsZj1hLnhocigpLGc9KytDYztpZihmLm9wZW4oYS50eXBlLGEudXJsLGEuYXN5bmMsYS51c2VybmFtZSxhLnBhc3N3b3JkKSxhLnhockZpZWxkcylmb3IoZSBpbiBhLnhockZpZWxkcylmW2VdPWEueGhyRmllbGRzW2VdO2EubWltZVR5cGUmJmYub3ZlcnJpZGVNaW1lVHlwZSYmZi5vdmVycmlkZU1pbWVUeXBlKGEubWltZVR5cGUpLGEuY3Jvc3NEb21haW58fGNbIlgtUmVxdWVzdGVkLVdpdGgiXXx8KGNbIlgtUmVxdWVzdGVkLVdpdGgiXT0iWE1MSHR0cFJlcXVlc3QiKTtmb3IoZSBpbiBjKWYuc2V0UmVxdWVzdEhlYWRlcihlLGNbZV0pO2I9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7YiYmKGRlbGV0ZSBEY1tnXSxiPWYub25sb2FkPWYub25lcnJvcj1udWxsLCJhYm9ydCI9PT1hP2YuYWJvcnQoKToiZXJyb3IiPT09YT9kKGYuc3RhdHVzLGYuc3RhdHVzVGV4dCk6ZChFY1tmLnN0YXR1c118fGYuc3RhdHVzLGYuc3RhdHVzVGV4dCwic3RyaW5nIj09dHlwZW9mIGYucmVzcG9uc2VUZXh0P3t0ZXh0OmYucmVzcG9uc2VUZXh0fTp2b2lkIDAsZi5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkpfX0sZi5vbmxvYWQ9YigpLGYub25lcnJvcj1iKCJlcnJvciIpLGI9RGNbZ109YigiYWJvcnQiKTt0cnl7Zi5zZW5kKGEuaGFzQ29udGVudCYmYS5kYXRhfHxudWxsKX1jYXRjaChoKXtpZihiKXRocm93IGh9fSxhYm9ydDpmdW5jdGlvbigpe2ImJmIoKX19OnZvaWQgMH0pLG4uYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6InRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0In0sY29udGVudHM6e3NjcmlwdDovKD86amF2YXxlY21hKXNjcmlwdC99LGNvbnZlcnRlcnM6eyJ0ZXh0IHNjcmlwdCI6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZ2xvYmFsRXZhbChhKSxhfX19KSxuLmFqYXhQcmVmaWx0ZXIoInNjcmlwdCIsZnVuY3Rpb24oYSl7dm9pZCAwPT09YS5jYWNoZSYmKGEuY2FjaGU9ITEpLGEuY3Jvc3NEb21haW4mJihhLnR5cGU9IkdFVCIpfSksbi5hamF4VHJhbnNwb3J0KCJzY3JpcHQiLGZ1bmN0aW9uKGEpe2lmKGEuY3Jvc3NEb21haW4pe3ZhciBiLGM7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oZCxlKXtiPW4oIjxzY3JpcHQ+IikucHJvcCh7YXN5bmM6ITAsY2hhcnNldDphLnNjcmlwdENoYXJzZXQsc3JjOmEudXJsfSkub24oImxvYWQgZXJyb3IiLGM9ZnVuY3Rpb24oYSl7Yi5yZW1vdmUoKSxjPW51bGwsYSYmZSgiZXJyb3IiPT09YS50eXBlPzQwNDoyMDAsYS50eXBlKX0pLGwuaGVhZC5hcHBlbmRDaGlsZChiWzBdKX0sYWJvcnQ6ZnVuY3Rpb24oKXtjJiZjKCl9fX19KTt2YXIgR2M9W10sSGM9Lyg9KVw/KD89JnwkKXxcP1w/LztuLmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGE9R2MucG9wKCl8fG4uZXhwYW5kbysiXyIrY2MrKztyZXR1cm4gdGhpc1thXT0hMCxhfX0pLG4uYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsZnVuY3Rpb24oYixjLGQpe3ZhciBlLGYsZyxoPWIuanNvbnAhPT0hMSYmKEhjLnRlc3QoYi51cmwpPyJ1cmwiOiJzdHJpbmciPT10eXBlb2YgYi5kYXRhJiYhKGIuY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSYmSGMudGVzdChiLmRhdGEpJiYiZGF0YSIpO3JldHVybiBofHwianNvbnAiPT09Yi5kYXRhVHlwZXNbMF0/KGU9Yi5qc29ucENhbGxiYWNrPW4uaXNGdW5jdGlvbihiLmpzb25wQ2FsbGJhY2spP2IuanNvbnBDYWxsYmFjaygpOmIuanNvbnBDYWxsYmFjayxoP2JbaF09YltoXS5yZXBsYWNlKEhjLCIkMSIrZSk6Yi5qc29ucCE9PSExJiYoYi51cmwrPShkYy50ZXN0KGIudXJsKT8iJiI6Ij8iKStiLmpzb25wKyI9IitlKSxiLmNvbnZlcnRlcnNbInNjcmlwdCBqc29uIl09ZnVuY3Rpb24oKXtyZXR1cm4gZ3x8bi5lcnJvcihlKyIgd2FzIG5vdCBjYWxsZWQiKSxnWzBdfSxiLmRhdGFUeXBlc1swXT0ianNvbiIsZj1hW2VdLGFbZV09ZnVuY3Rpb24oKXtnPWFyZ3VtZW50c30sZC5hbHdheXMoZnVuY3Rpb24oKXthW2VdPWYsYltlXSYmKGIuanNvbnBDYWxsYmFjaz1jLmpzb25wQ2FsbGJhY2ssR2MucHVzaChlKSksZyYmbi5pc0Z1bmN0aW9uKGYpJiZmKGdbMF0pLGc9Zj12b2lkIDB9KSwic2NyaXB0Iik6dm9pZCAwfSksbi5wYXJzZUhUTUw9ZnVuY3Rpb24oYSxiLGMpe2lmKCFhfHwic3RyaW5nIiE9dHlwZW9mIGEpcmV0dXJuIG51bGw7ImJvb2xlYW4iPT10eXBlb2YgYiYmKGM9YixiPSExKSxiPWJ8fGw7dmFyIGQ9di5leGVjKGEpLGU9IWMmJltdO3JldHVybiBkP1tiLmNyZWF0ZUVsZW1lbnQoZFsxXSldOihkPW4uYnVpbGRGcmFnbWVudChbYV0sYixlKSxlJiZlLmxlbmd0aCYmbihlKS5yZW1vdmUoKSxuLm1lcmdlKFtdLGQuY2hpbGROb2RlcykpfTt2YXIgSWM9bi5mbi5sb2FkO24uZm4ubG9hZD1mdW5jdGlvbihhLGIsYyl7aWYoInN0cmluZyIhPXR5cGVvZiBhJiZJYylyZXR1cm4gSWMuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBkLGUsZixnPXRoaXMsaD1hLmluZGV4T2YoIiAiKTtyZXR1cm4gaD49MCYmKGQ9bi50cmltKGEuc2xpY2UoaCkpLGE9YS5zbGljZSgwLGgpKSxuLmlzRnVuY3Rpb24oYik/KGM9YixiPXZvaWQgMCk6YiYmIm9iamVjdCI9PXR5cGVvZiBiJiYoZT0iUE9TVCIpLGcubGVuZ3RoPjAmJm4uYWpheCh7dXJsOmEsdHlwZTplLGRhdGFUeXBlOiJodG1sIixkYXRhOmJ9KS5kb25lKGZ1bmN0aW9uKGEpe2Y9YXJndW1lbnRzLGcuaHRtbChkP24oIjxkaXY+IikuYXBwZW5kKG4ucGFyc2VIVE1MKGEpKS5maW5kKGQpOmEpfSkuY29tcGxldGUoYyYmZnVuY3Rpb24oYSxiKXtnLmVhY2goYyxmfHxbYS5yZXNwb25zZVRleHQsYixhXSl9KSx0aGlzfSxuLmV4cHIuZmlsdGVycy5hbmltYXRlZD1mdW5jdGlvbihhKXtyZXR1cm4gbi5ncmVwKG4udGltZXJzLGZ1bmN0aW9uKGIpe3JldHVybiBhPT09Yi5lbGVtfSkubGVuZ3RofTt2YXIgSmM9YS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7ZnVuY3Rpb24gS2MoYSl7cmV0dXJuIG4uaXNXaW5kb3coYSk/YTo5PT09YS5ub2RlVHlwZSYmYS5kZWZhdWx0Vmlld31uLm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrPW4uY3NzKGEsInBvc2l0aW9uIiksbD1uKGEpLG09e307InN0YXRpYyI9PT1rJiYoYS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiKSxoPWwub2Zmc2V0KCksZj1uLmNzcyhhLCJ0b3AiKSxpPW4uY3NzKGEsImxlZnQiKSxqPSgiYWJzb2x1dGUiPT09a3x8ImZpeGVkIj09PWspJiYoZitpKS5pbmRleE9mKCJhdXRvIik+LTEsaj8oZD1sLnBvc2l0aW9uKCksZz1kLnRvcCxlPWQubGVmdCk6KGc9cGFyc2VGbG9hdChmKXx8MCxlPXBhcnNlRmxvYXQoaSl8fDApLG4uaXNGdW5jdGlvbihiKSYmKGI9Yi5jYWxsKGEsYyxoKSksbnVsbCE9Yi50b3AmJihtLnRvcD1iLnRvcC1oLnRvcCtnKSxudWxsIT1iLmxlZnQmJihtLmxlZnQ9Yi5sZWZ0LWgubGVmdCtlKSwidXNpbmciaW4gYj9iLnVzaW5nLmNhbGwoYSxtKTpsLmNzcyhtKX19LG4uZm4uZXh0ZW5kKHtvZmZzZXQ6ZnVuY3Rpb24oYSl7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdm9pZCAwPT09YT90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihiKXtuLm9mZnNldC5zZXRPZmZzZXQodGhpcyxhLGIpfSk7dmFyIGIsYyxkPXRoaXNbMF0sZT17dG9wOjAsbGVmdDowfSxmPWQmJmQub3duZXJEb2N1bWVudDtpZihmKXJldHVybiBiPWYuZG9jdW1lbnRFbGVtZW50LG4uY29udGFpbnMoYixkKT8odHlwZW9mIGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0IT09VSYmKGU9ZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSksYz1LYyhmKSx7dG9wOmUudG9wK2MucGFnZVlPZmZzZXQtYi5jbGllbnRUb3AsbGVmdDplLmxlZnQrYy5wYWdlWE9mZnNldC1iLmNsaWVudExlZnR9KTplfSxwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBhLGIsYz10aGlzWzBdLGQ9e3RvcDowLGxlZnQ6MH07cmV0dXJuImZpeGVkIj09PW4uY3NzKGMsInBvc2l0aW9uIik/Yj1jLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOihhPXRoaXMub2Zmc2V0UGFyZW50KCksYj10aGlzLm9mZnNldCgpLG4ubm9kZU5hbWUoYVswXSwiaHRtbCIpfHwoZD1hLm9mZnNldCgpKSxkLnRvcCs9bi5jc3MoYVswXSwiYm9yZGVyVG9wV2lkdGgiLCEwKSxkLmxlZnQrPW4uY3NzKGFbMF0sImJvcmRlckxlZnRXaWR0aCIsITApKSx7dG9wOmIudG9wLWQudG9wLW4uY3NzKGMsIm1hcmdpblRvcCIsITApLGxlZnQ6Yi5sZWZ0LWQubGVmdC1uLmNzcyhjLCJtYXJnaW5MZWZ0IiwhMCl9fX0sb2Zmc2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vZmZzZXRQYXJlbnR8fEpjO3doaWxlKGEmJiFuLm5vZGVOYW1lKGEsImh0bWwiKSYmInN0YXRpYyI9PT1uLmNzcyhhLCJwb3NpdGlvbiIpKWE9YS5vZmZzZXRQYXJlbnQ7cmV0dXJuIGF8fEpjfSl9fSksbi5lYWNoKHtzY3JvbGxMZWZ0OiJwYWdlWE9mZnNldCIsc2Nyb2xsVG9wOiJwYWdlWU9mZnNldCJ9LGZ1bmN0aW9uKGIsYyl7dmFyIGQ9InBhZ2VZT2Zmc2V0Ij09PWM7bi5mbltiXT1mdW5jdGlvbihlKXtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGIsZSxmKXt2YXIgZz1LYyhiKTtyZXR1cm4gdm9pZCAwPT09Zj9nP2dbY106YltlXTp2b2lkKGc/Zy5zY3JvbGxUbyhkP2EucGFnZVhPZmZzZXQ6ZixkP2Y6YS5wYWdlWU9mZnNldCk6YltlXT1mKX0sYixlLGFyZ3VtZW50cy5sZW5ndGgsbnVsbCl9fSksbi5lYWNoKFsidG9wIiwibGVmdCJdLGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1tiXT15YihrLnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz8oYz14YihhLGIpLHZiLnRlc3QoYyk/bihhKS5wb3NpdGlvbigpW2JdKyJweCI6Yyk6dm9pZCAwfSl9KSxuLmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihhLGIpe24uZWFjaCh7cGFkZGluZzoiaW5uZXIiK2EsY29udGVudDpiLCIiOiJvdXRlciIrYX0sZnVuY3Rpb24oYyxkKXtuLmZuW2RdPWZ1bmN0aW9uKGQsZSl7dmFyIGY9YXJndW1lbnRzLmxlbmd0aCYmKGN8fCJib29sZWFuIiE9dHlwZW9mIGQpLGc9Y3x8KGQ9PT0hMHx8ZT09PSEwPyJtYXJnaW4iOiJib3JkZXIiKTtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGIsYyxkKXt2YXIgZTtyZXR1cm4gbi5pc1dpbmRvdyhiKT9iLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsiY2xpZW50IithXTo5PT09Yi5ub2RlVHlwZT8oZT1iLmRvY3VtZW50RWxlbWVudCxNYXRoLm1heChiLmJvZHlbInNjcm9sbCIrYV0sZVsic2Nyb2xsIithXSxiLmJvZHlbIm9mZnNldCIrYV0sZVsib2Zmc2V0IithXSxlWyJjbGllbnQiK2FdKSk6dm9pZCAwPT09ZD9uLmNzcyhiLGMsZyk6bi5zdHlsZShiLGMsZCxnKX0sYixmP2Q6dm9pZCAwLGYsbnVsbCl9fSl9KSxuLmZuLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGh9LG4uZm4uYW5kU2VsZj1uLmZuLmFkZEJhY2ssImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKCJqcXVlcnkiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIG59KTt2YXIgTGM9YS5qUXVlcnksTWM9YS4kO3JldHVybiBuLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oYil7cmV0dXJuIGEuJD09PW4mJihhLiQ9TWMpLGImJmEualF1ZXJ5PT09biYmKGEualF1ZXJ5PUxjKSxufSx0eXBlb2YgYj09PVUmJihhLmpRdWVyeT1hLiQ9biksbn0pOwovLyMgc291cmNlTWFwcGluZ1VSTD1qcXVlcnkubWluLm1hcA=="},{"meta":{"name":"jquery.scrollTo.min.js","url":"http://cdn.staticfile.org/jquery-scrollTo/1.4.11/jquery.scrollTo.min.js","ts":1606985022358,"mimetype":"text/javascript"},"source":"LyoqCiAqIENvcHlyaWdodCAoYykgMjAwNy0yMDE0IEFyaWVsIEZsZXNsZXIgLSBhZmxlc2xlcjxhPmdtYWlsPGQ+Y29tIHwgaHR0cDovL2ZsZXNsZXIuYmxvZ3Nwb3QuY29tCiAqIExpY2Vuc2VkIHVuZGVyIE1JVAogKiBAYXV0aG9yIEFyaWVsIEZsZXNsZXIKICogQHZlcnNpb24gMS40LjExCiAqLwo7KGZ1bmN0aW9uKGEpe2lmKHR5cGVvZiBkZWZpbmU9PT0nZnVuY3Rpb24nJiZkZWZpbmUuYW1kKXtkZWZpbmUoWydqcXVlcnknXSxhKX1lbHNle2EoalF1ZXJ5KX19KGZ1bmN0aW9uKCQpe3ZhciBqPSQuc2Nyb2xsVG89ZnVuY3Rpb24oYSxiLGMpe3JldHVybiAkKHdpbmRvdykuc2Nyb2xsVG8oYSxiLGMpfTtqLmRlZmF1bHRzPXtheGlzOid4eScsZHVyYXRpb246cGFyc2VGbG9hdCgkLmZuLmpxdWVyeSk+PTEuMz8wOjEsbGltaXQ6dHJ1ZX07ai53aW5kb3c9ZnVuY3Rpb24oYSl7cmV0dXJuICQod2luZG93KS5fc2Nyb2xsYWJsZSgpfTskLmZuLl9zY3JvbGxhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxpc1dpbj0hYS5ub2RlTmFtZXx8JC5pbkFycmF5KGEubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxbJ2lmcmFtZScsJyNkb2N1bWVudCcsJ2h0bWwnLCdib2R5J10pIT0tMTtpZighaXNXaW4pcmV0dXJuIGE7dmFyIGI9KGEuY29udGVudFdpbmRvd3x8YSkuZG9jdW1lbnR8fGEub3duZXJEb2N1bWVudHx8YTtyZXR1cm4vd2Via2l0L2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KXx8Yi5jb21wYXRNb2RlPT0nQmFja0NvbXBhdCc/Yi5ib2R5OmIuZG9jdW1lbnRFbGVtZW50fSl9OyQuZm4uc2Nyb2xsVG89ZnVuY3Rpb24oZixnLGgpe2lmKHR5cGVvZiBnPT0nb2JqZWN0Jyl7aD1nO2c9MH1pZih0eXBlb2YgaD09J2Z1bmN0aW9uJyloPXtvbkFmdGVyOmh9O2lmKGY9PSdtYXgnKWY9OWU5O2g9JC5leHRlbmQoe30sai5kZWZhdWx0cyxoKTtnPWd8fGguZHVyYXRpb247aC5xdWV1ZT1oLnF1ZXVlJiZoLmF4aXMubGVuZ3RoPjE7aWYoaC5xdWV1ZSlnLz0yO2gub2Zmc2V0PWJvdGgoaC5vZmZzZXQpO2gub3Zlcj1ib3RoKGgub3Zlcik7cmV0dXJuIHRoaXMuX3Njcm9sbGFibGUoKS5lYWNoKGZ1bmN0aW9uKCl7aWYoZj09bnVsbClyZXR1cm47dmFyIGQ9dGhpcywkZWxlbT0kKGQpLHRhcmc9Zix0b2ZmLGF0dHI9e30sd2luPSRlbGVtLmlzKCdodG1sLGJvZHknKTtzd2l0Y2godHlwZW9mIHRhcmcpe2Nhc2UnbnVtYmVyJzpjYXNlJ3N0cmluZyc6aWYoL14oWystXT0/KT9cZCsoXC5cZCspPyhweHwlKT8kLy50ZXN0KHRhcmcpKXt0YXJnPWJvdGgodGFyZyk7YnJlYWt9dGFyZz0kKHRhcmcsdGhpcyk7aWYoIXRhcmcubGVuZ3RoKXJldHVybjtjYXNlJ29iamVjdCc6aWYodGFyZy5pc3x8dGFyZy5zdHlsZSl0b2ZmPSh0YXJnPSQodGFyZykpLm9mZnNldCgpfXZhciBlPSQuaXNGdW5jdGlvbihoLm9mZnNldCkmJmgub2Zmc2V0KGQsdGFyZyl8fGgub2Zmc2V0OyQuZWFjaChoLmF4aXMuc3BsaXQoJycpLGZ1bmN0aW9uKGksYSl7dmFyIGI9YT09J3gnPydMZWZ0JzonVG9wJyxwb3M9Yi50b0xvd2VyQ2FzZSgpLGtleT0nc2Nyb2xsJytiLG9sZD1kW2tleV0sbWF4PWoubWF4KGQsYSk7aWYodG9mZil7YXR0cltrZXldPXRvZmZbcG9zXSsod2luPzA6b2xkLSRlbGVtLm9mZnNldCgpW3Bvc10pO2lmKGgubWFyZ2luKXthdHRyW2tleV0tPXBhcnNlSW50KHRhcmcuY3NzKCdtYXJnaW4nK2IpKXx8MDthdHRyW2tleV0tPXBhcnNlSW50KHRhcmcuY3NzKCdib3JkZXInK2IrJ1dpZHRoJykpfHwwfWF0dHJba2V5XSs9ZVtwb3NdfHwwO2lmKGgub3Zlcltwb3NdKWF0dHJba2V5XSs9dGFyZ1thPT0neCc/J3dpZHRoJzonaGVpZ2h0J10oKSpoLm92ZXJbcG9zXX1lbHNle3ZhciBjPXRhcmdbcG9zXTthdHRyW2tleV09Yy5zbGljZSYmYy5zbGljZSgtMSk9PSclJz9wYXJzZUZsb2F0KGMpLzEwMCptYXg6Y31pZihoLmxpbWl0JiYvXlxkKyQvLnRlc3QoYXR0cltrZXldKSlhdHRyW2tleV09YXR0cltrZXldPD0wPzA6TWF0aC5taW4oYXR0cltrZXldLG1heCk7aWYoIWkmJmgucXVldWUpe2lmKG9sZCE9YXR0cltrZXldKWFuaW1hdGUoaC5vbkFmdGVyRmlyc3QpO2RlbGV0ZSBhdHRyW2tleV19fSk7YW5pbWF0ZShoLm9uQWZ0ZXIpO2Z1bmN0aW9uIGFuaW1hdGUoYSl7JGVsZW0uYW5pbWF0ZShhdHRyLGcsaC5lYXNpbmcsYSYmZnVuY3Rpb24oKXthLmNhbGwodGhpcyx0YXJnLGgpfSl9fSkuZW5kKCl9O2oubWF4PWZ1bmN0aW9uKGEsYil7dmFyIGM9Yj09J3gnPydXaWR0aCc6J0hlaWdodCcsc2Nyb2xsPSdzY3JvbGwnK2M7aWYoISQoYSkuaXMoJ2h0bWwsYm9keScpKXJldHVybiBhW3Njcm9sbF0tJChhKVtjLnRvTG93ZXJDYXNlKCldKCk7dmFyIGQ9J2NsaWVudCcrYyxodG1sPWEub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsYm9keT1hLm93bmVyRG9jdW1lbnQuYm9keTtyZXR1cm4gTWF0aC5tYXgoaHRtbFtzY3JvbGxdLGJvZHlbc2Nyb2xsXSktTWF0aC5taW4oaHRtbFtkXSxib2R5W2RdKX07ZnVuY3Rpb24gYm90aChhKXtyZXR1cm4gJC5pc0Z1bmN0aW9uKGEpfHx0eXBlb2YgYT09J29iamVjdCc/YTp7dG9wOmEsbGVmdDphfX07cmV0dXJuIGp9KSk7Cg=="},{"meta":{"name":"mustache.min.js","url":"http://cdn.staticfile.org/mustache.js/0.8.1/mustache.min.js","ts":1606985022369,"mimetype":"text/javascript"},"source":"KGZ1bmN0aW9uKHJvb3QsZmFjdG9yeSl7aWYodHlwZW9mIGV4cG9ydHM9PT0ib2JqZWN0IiYmZXhwb3J0cyl7ZmFjdG9yeShleHBvcnRzKX1lbHNle3ZhciBtdXN0YWNoZT17fTtmYWN0b3J5KG11c3RhY2hlKTtpZih0eXBlb2YgZGVmaW5lPT09ImZ1bmN0aW9uIiYmZGVmaW5lLmFtZCl7ZGVmaW5lKG11c3RhY2hlKX1lbHNle3Jvb3QuTXVzdGFjaGU9bXVzdGFjaGV9fX0pKHRoaXMsZnVuY3Rpb24obXVzdGFjaGUpe3ZhciB3aGl0ZVJlPS9ccyovO3ZhciBzcGFjZVJlPS9ccysvO3ZhciBub25TcGFjZVJlPS9cUy87dmFyIGVxUmU9L1xzKj0vO3ZhciBjdXJseVJlPS9ccypcfS87dmFyIHRhZ1JlPS8jfFxefFwvfD58XHt8Jnw9fCEvO3ZhciBSZWdFeHBfdGVzdD1SZWdFeHAucHJvdG90eXBlLnRlc3Q7ZnVuY3Rpb24gdGVzdFJlZ0V4cChyZSxzdHJpbmcpe3JldHVybiBSZWdFeHBfdGVzdC5jYWxsKHJlLHN0cmluZyl9ZnVuY3Rpb24gaXNXaGl0ZXNwYWNlKHN0cmluZyl7cmV0dXJuIXRlc3RSZWdFeHAobm9uU3BhY2VSZSxzdHJpbmcpfXZhciBPYmplY3RfdG9TdHJpbmc9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZzt2YXIgaXNBcnJheT1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihvYmplY3Qpe3JldHVybiBPYmplY3RfdG9TdHJpbmcuY2FsbChvYmplY3QpPT09IltvYmplY3QgQXJyYXldIn07ZnVuY3Rpb24gaXNGdW5jdGlvbihvYmplY3Qpe3JldHVybiB0eXBlb2Ygb2JqZWN0PT09ImZ1bmN0aW9uIn1mdW5jdGlvbiBlc2NhcGVSZWdFeHAoc3RyaW5nKXtyZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1tcLVxbXF17fSgpKis/LixcXFxeJHwjXHNdL2csIlxcJCYiKX12YXIgZW50aXR5TWFwPXsiJiI6IiZhbXA7IiwiPCI6IiZsdDsiLCI+IjoiJmd0OyIsJyInOiImcXVvdDsiLCInIjoiJiMzOTsiLCIvIjoiJiN4MkY7In07ZnVuY3Rpb24gZXNjYXBlSHRtbChzdHJpbmcpe3JldHVybiBTdHJpbmcoc3RyaW5nKS5yZXBsYWNlKC9bJjw+IidcL10vZyxmdW5jdGlvbihzKXtyZXR1cm4gZW50aXR5TWFwW3NdfSl9ZnVuY3Rpb24gZXNjYXBlVGFncyh0YWdzKXtpZighaXNBcnJheSh0YWdzKXx8dGFncy5sZW5ndGghPT0yKXt0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgdGFnczogIit0YWdzKX1yZXR1cm5bbmV3IFJlZ0V4cChlc2NhcGVSZWdFeHAodGFnc1swXSkrIlxccyoiKSxuZXcgUmVnRXhwKCJcXHMqIitlc2NhcGVSZWdFeHAodGFnc1sxXSkpXX1mdW5jdGlvbiBwYXJzZVRlbXBsYXRlKHRlbXBsYXRlLHRhZ3Mpe3RhZ3M9dGFnc3x8bXVzdGFjaGUudGFnczt0ZW1wbGF0ZT10ZW1wbGF0ZXx8IiI7aWYodHlwZW9mIHRhZ3M9PT0ic3RyaW5nIil7dGFncz10YWdzLnNwbGl0KHNwYWNlUmUpfXZhciB0YWdSZXM9ZXNjYXBlVGFncyh0YWdzKTt2YXIgc2Nhbm5lcj1uZXcgU2Nhbm5lcih0ZW1wbGF0ZSk7dmFyIHNlY3Rpb25zPVtdO3ZhciB0b2tlbnM9W107dmFyIHNwYWNlcz1bXTt2YXIgaGFzVGFnPWZhbHNlO3ZhciBub25TcGFjZT1mYWxzZTtmdW5jdGlvbiBzdHJpcFNwYWNlKCl7aWYoaGFzVGFnJiYhbm9uU3BhY2Upe3doaWxlKHNwYWNlcy5sZW5ndGgpe2RlbGV0ZSB0b2tlbnNbc3BhY2VzLnBvcCgpXX19ZWxzZXtzcGFjZXM9W119aGFzVGFnPWZhbHNlO25vblNwYWNlPWZhbHNlfXZhciBzdGFydCx0eXBlLHZhbHVlLGNocix0b2tlbixvcGVuU2VjdGlvbjt3aGlsZSghc2Nhbm5lci5lb3MoKSl7c3RhcnQ9c2Nhbm5lci5wb3M7dmFsdWU9c2Nhbm5lci5zY2FuVW50aWwodGFnUmVzWzBdKTtpZih2YWx1ZSl7Zm9yKHZhciBpPTAsbGVuPXZhbHVlLmxlbmd0aDtpPGxlbjsrK2kpe2Nocj12YWx1ZS5jaGFyQXQoaSk7aWYoaXNXaGl0ZXNwYWNlKGNocikpe3NwYWNlcy5wdXNoKHRva2Vucy5sZW5ndGgpfWVsc2V7bm9uU3BhY2U9dHJ1ZX10b2tlbnMucHVzaChbInRleHQiLGNocixzdGFydCxzdGFydCsxXSk7c3RhcnQrPTE7aWYoY2hyPT09IlxuIil7c3RyaXBTcGFjZSgpfX19aWYoIXNjYW5uZXIuc2Nhbih0YWdSZXNbMF0pKWJyZWFrO2hhc1RhZz10cnVlO3R5cGU9c2Nhbm5lci5zY2FuKHRhZ1JlKXx8Im5hbWUiO3NjYW5uZXIuc2Nhbih3aGl0ZVJlKTtpZih0eXBlPT09Ij0iKXt2YWx1ZT1zY2FubmVyLnNjYW5VbnRpbChlcVJlKTtzY2FubmVyLnNjYW4oZXFSZSk7c2Nhbm5lci5zY2FuVW50aWwodGFnUmVzWzFdKX1lbHNlIGlmKHR5cGU9PT0ieyIpe3ZhbHVlPXNjYW5uZXIuc2NhblVudGlsKG5ldyBSZWdFeHAoIlxccyoiK2VzY2FwZVJlZ0V4cCgifSIrdGFnc1sxXSkpKTtzY2FubmVyLnNjYW4oY3VybHlSZSk7c2Nhbm5lci5zY2FuVW50aWwodGFnUmVzWzFdKTt0eXBlPSImIn1lbHNle3ZhbHVlPXNjYW5uZXIuc2NhblVudGlsKHRhZ1Jlc1sxXSl9aWYoIXNjYW5uZXIuc2Nhbih0YWdSZXNbMV0pKXt0aHJvdyBuZXcgRXJyb3IoIlVuY2xvc2VkIHRhZyBhdCAiK3NjYW5uZXIucG9zKX10b2tlbj1bdHlwZSx2YWx1ZSxzdGFydCxzY2FubmVyLnBvc107dG9rZW5zLnB1c2godG9rZW4pO2lmKHR5cGU9PT0iIyJ8fHR5cGU9PT0iXiIpe3NlY3Rpb25zLnB1c2godG9rZW4pfWVsc2UgaWYodHlwZT09PSIvIil7b3BlblNlY3Rpb249c2VjdGlvbnMucG9wKCk7aWYoIW9wZW5TZWN0aW9uKXt0aHJvdyBuZXcgRXJyb3IoJ1Vub3BlbmVkIHNlY3Rpb24gIicrdmFsdWUrJyIgYXQgJytzdGFydCl9aWYob3BlblNlY3Rpb25bMV0hPT12YWx1ZSl7dGhyb3cgbmV3IEVycm9yKCdVbmNsb3NlZCBzZWN0aW9uICInK29wZW5TZWN0aW9uWzFdKyciIGF0ICcrc3RhcnQpfX1lbHNlIGlmKHR5cGU9PT0ibmFtZSJ8fHR5cGU9PT0ieyJ8fHR5cGU9PT0iJiIpe25vblNwYWNlPXRydWV9ZWxzZSBpZih0eXBlPT09Ij0iKXt0YWdSZXM9ZXNjYXBlVGFncyh0YWdzPXZhbHVlLnNwbGl0KHNwYWNlUmUpKX19b3BlblNlY3Rpb249c2VjdGlvbnMucG9wKCk7aWYob3BlblNlY3Rpb24pe3Rocm93IG5ldyBFcnJvcignVW5jbG9zZWQgc2VjdGlvbiAiJytvcGVuU2VjdGlvblsxXSsnIiBhdCAnK3NjYW5uZXIucG9zKX1yZXR1cm4gbmVzdFRva2VucyhzcXVhc2hUb2tlbnModG9rZW5zKSl9ZnVuY3Rpb24gc3F1YXNoVG9rZW5zKHRva2Vucyl7dmFyIHNxdWFzaGVkVG9rZW5zPVtdO3ZhciB0b2tlbixsYXN0VG9rZW47Zm9yKHZhciBpPTAsbGVuPXRva2Vucy5sZW5ndGg7aTxsZW47KytpKXt0b2tlbj10b2tlbnNbaV07aWYodG9rZW4pe2lmKHRva2VuWzBdPT09InRleHQiJiZsYXN0VG9rZW4mJmxhc3RUb2tlblswXT09PSJ0ZXh0Iil7bGFzdFRva2VuWzFdKz10b2tlblsxXTtsYXN0VG9rZW5bM109dG9rZW5bM119ZWxzZXtzcXVhc2hlZFRva2Vucy5wdXNoKHRva2VuKTtsYXN0VG9rZW49dG9rZW59fX1yZXR1cm4gc3F1YXNoZWRUb2tlbnN9ZnVuY3Rpb24gbmVzdFRva2Vucyh0b2tlbnMpe3ZhciBuZXN0ZWRUb2tlbnM9W107dmFyIGNvbGxlY3Rvcj1uZXN0ZWRUb2tlbnM7dmFyIHNlY3Rpb25zPVtdO3ZhciB0b2tlbixzZWN0aW9uO2Zvcih2YXIgaT0wLGxlbj10b2tlbnMubGVuZ3RoO2k8bGVuOysraSl7dG9rZW49dG9rZW5zW2ldO3N3aXRjaCh0b2tlblswXSl7Y2FzZSIjIjpjYXNlIl4iOmNvbGxlY3Rvci5wdXNoKHRva2VuKTtzZWN0aW9ucy5wdXNoKHRva2VuKTtjb2xsZWN0b3I9dG9rZW5bNF09W107YnJlYWs7Y2FzZSIvIjpzZWN0aW9uPXNlY3Rpb25zLnBvcCgpO3NlY3Rpb25bNV09dG9rZW5bMl07Y29sbGVjdG9yPXNlY3Rpb25zLmxlbmd0aD4wP3NlY3Rpb25zW3NlY3Rpb25zLmxlbmd0aC0xXVs0XTpuZXN0ZWRUb2tlbnM7YnJlYWs7ZGVmYXVsdDpjb2xsZWN0b3IucHVzaCh0b2tlbil9fXJldHVybiBuZXN0ZWRUb2tlbnN9ZnVuY3Rpb24gU2Nhbm5lcihzdHJpbmcpe3RoaXMuc3RyaW5nPXN0cmluZzt0aGlzLnRhaWw9c3RyaW5nO3RoaXMucG9zPTB9U2Nhbm5lci5wcm90b3R5cGUuZW9zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGFpbD09PSIifTtTY2FubmVyLnByb3RvdHlwZS5zY2FuPWZ1bmN0aW9uKHJlKXt2YXIgbWF0Y2g9dGhpcy50YWlsLm1hdGNoKHJlKTtpZihtYXRjaCYmbWF0Y2guaW5kZXg9PT0wKXt2YXIgc3RyaW5nPW1hdGNoWzBdO3RoaXMudGFpbD10aGlzLnRhaWwuc3Vic3RyaW5nKHN0cmluZy5sZW5ndGgpO3RoaXMucG9zKz1zdHJpbmcubGVuZ3RoO3JldHVybiBzdHJpbmd9cmV0dXJuIiJ9O1NjYW5uZXIucHJvdG90eXBlLnNjYW5VbnRpbD1mdW5jdGlvbihyZSl7dmFyIGluZGV4PXRoaXMudGFpbC5zZWFyY2gocmUpLG1hdGNoO3N3aXRjaChpbmRleCl7Y2FzZS0xOm1hdGNoPXRoaXMudGFpbDt0aGlzLnRhaWw9IiI7YnJlYWs7Y2FzZSAwOm1hdGNoPSIiO2JyZWFrO2RlZmF1bHQ6bWF0Y2g9dGhpcy50YWlsLnN1YnN0cmluZygwLGluZGV4KTt0aGlzLnRhaWw9dGhpcy50YWlsLnN1YnN0cmluZyhpbmRleCl9dGhpcy5wb3MrPW1hdGNoLmxlbmd0aDtyZXR1cm4gbWF0Y2h9O2Z1bmN0aW9uIENvbnRleHQodmlldyxwYXJlbnRDb250ZXh0KXt0aGlzLnZpZXc9dmlldz09bnVsbD97fTp2aWV3O3RoaXMuY2FjaGU9eyIuIjp0aGlzLnZpZXd9O3RoaXMucGFyZW50PXBhcmVudENvbnRleHR9Q29udGV4dC5wcm90b3R5cGUucHVzaD1mdW5jdGlvbih2aWV3KXtyZXR1cm4gbmV3IENvbnRleHQodmlldyx0aGlzKX07Q29udGV4dC5wcm90b3R5cGUubG9va3VwPWZ1bmN0aW9uKG5hbWUpe3ZhciB2YWx1ZTtpZihuYW1lIGluIHRoaXMuY2FjaGUpe3ZhbHVlPXRoaXMuY2FjaGVbbmFtZV19ZWxzZXt2YXIgY29udGV4dD10aGlzO3doaWxlKGNvbnRleHQpe2lmKG5hbWUuaW5kZXhPZigiLiIpPjApe3ZhbHVlPWNvbnRleHQudmlldzt2YXIgbmFtZXM9bmFtZS5zcGxpdCgiLiIpLGk9MDt3aGlsZSh2YWx1ZSE9bnVsbCYmaTxuYW1lcy5sZW5ndGgpe3ZhbHVlPXZhbHVlW25hbWVzW2krK11dfX1lbHNle3ZhbHVlPWNvbnRleHQudmlld1tuYW1lXX1pZih2YWx1ZSE9bnVsbClicmVhaztjb250ZXh0PWNvbnRleHQucGFyZW50fXRoaXMuY2FjaGVbbmFtZV09dmFsdWV9aWYoaXNGdW5jdGlvbih2YWx1ZSkpe3ZhbHVlPXZhbHVlLmNhbGwodGhpcy52aWV3KX1yZXR1cm4gdmFsdWV9O2Z1bmN0aW9uIFdyaXRlcigpe3RoaXMuY2FjaGU9e319V3JpdGVyLnByb3RvdHlwZS5jbGVhckNhY2hlPWZ1bmN0aW9uKCl7dGhpcy5jYWNoZT17fX07V3JpdGVyLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0ZW1wbGF0ZSx0YWdzKXt2YXIgY2FjaGU9dGhpcy5jYWNoZTt2YXIgdG9rZW5zPWNhY2hlW3RlbXBsYXRlXTtpZih0b2tlbnM9PW51bGwpe3Rva2Vucz1jYWNoZVt0ZW1wbGF0ZV09cGFyc2VUZW1wbGF0ZSh0ZW1wbGF0ZSx0YWdzKX1yZXR1cm4gdG9rZW5zfTtXcml0ZXIucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbih0ZW1wbGF0ZSx2aWV3LHBhcnRpYWxzKXt2YXIgdG9rZW5zPXRoaXMucGFyc2UodGVtcGxhdGUpO3ZhciBjb250ZXh0PXZpZXcgaW5zdGFuY2VvZiBDb250ZXh0P3ZpZXc6bmV3IENvbnRleHQodmlldyk7cmV0dXJuIHRoaXMucmVuZGVyVG9rZW5zKHRva2Vucyxjb250ZXh0LHBhcnRpYWxzLHRlbXBsYXRlKX07V3JpdGVyLnByb3RvdHlwZS5yZW5kZXJUb2tlbnM9ZnVuY3Rpb24odG9rZW5zLGNvbnRleHQscGFydGlhbHMsb3JpZ2luYWxUZW1wbGF0ZSl7dmFyIGJ1ZmZlcj0iIjt2YXIgc2VsZj10aGlzO2Z1bmN0aW9uIHN1YlJlbmRlcih0ZW1wbGF0ZSl7cmV0dXJuIHNlbGYucmVuZGVyKHRlbXBsYXRlLGNvbnRleHQscGFydGlhbHMpfXZhciB0b2tlbix2YWx1ZTtmb3IodmFyIGk9MCxsZW49dG9rZW5zLmxlbmd0aDtpPGxlbjsrK2kpe3Rva2VuPXRva2Vuc1tpXTtzd2l0Y2godG9rZW5bMF0pe2Nhc2UiIyI6dmFsdWU9Y29udGV4dC5sb29rdXAodG9rZW5bMV0pO2lmKCF2YWx1ZSljb250aW51ZTtpZihpc0FycmF5KHZhbHVlKSl7Zm9yKHZhciBqPTAsamxlbj12YWx1ZS5sZW5ndGg7ajxqbGVuOysrail7YnVmZmVyKz10aGlzLnJlbmRlclRva2Vucyh0b2tlbls0XSxjb250ZXh0LnB1c2godmFsdWVbal0pLHBhcnRpYWxzLG9yaWdpbmFsVGVtcGxhdGUpfX1lbHNlIGlmKHR5cGVvZiB2YWx1ZT09PSJvYmplY3QifHx0eXBlb2YgdmFsdWU9PT0ic3RyaW5nIil7YnVmZmVyKz10aGlzLnJlbmRlclRva2Vucyh0b2tlbls0XSxjb250ZXh0LnB1c2godmFsdWUpLHBhcnRpYWxzLG9yaWdpbmFsVGVtcGxhdGUpfWVsc2UgaWYoaXNGdW5jdGlvbih2YWx1ZSkpe2lmKHR5cGVvZiBvcmlnaW5hbFRlbXBsYXRlIT09InN0cmluZyIpe3Rocm93IG5ldyBFcnJvcigiQ2Fubm90IHVzZSBoaWdoZXItb3JkZXIgc2VjdGlvbnMgd2l0aG91dCB0aGUgb3JpZ2luYWwgdGVtcGxhdGUiKX12YWx1ZT12YWx1ZS5jYWxsKGNvbnRleHQudmlldyxvcmlnaW5hbFRlbXBsYXRlLnNsaWNlKHRva2VuWzNdLHRva2VuWzVdKSxzdWJSZW5kZXIpO2lmKHZhbHVlIT1udWxsKWJ1ZmZlcis9dmFsdWV9ZWxzZXtidWZmZXIrPXRoaXMucmVuZGVyVG9rZW5zKHRva2VuWzRdLGNvbnRleHQscGFydGlhbHMsb3JpZ2luYWxUZW1wbGF0ZSl9YnJlYWs7Y2FzZSJeIjp2YWx1ZT1jb250ZXh0Lmxvb2t1cCh0b2tlblsxXSk7aWYoIXZhbHVlfHxpc0FycmF5KHZhbHVlKSYmdmFsdWUubGVuZ3RoPT09MCl7YnVmZmVyKz10aGlzLnJlbmRlclRva2Vucyh0b2tlbls0XSxjb250ZXh0LHBhcnRpYWxzLG9yaWdpbmFsVGVtcGxhdGUpfWJyZWFrO2Nhc2UiPiI6aWYoIXBhcnRpYWxzKWNvbnRpbnVlO3ZhbHVlPWlzRnVuY3Rpb24ocGFydGlhbHMpP3BhcnRpYWxzKHRva2VuWzFdKTpwYXJ0aWFsc1t0b2tlblsxXV07aWYodmFsdWUhPW51bGwpYnVmZmVyKz10aGlzLnJlbmRlclRva2Vucyh0aGlzLnBhcnNlKHZhbHVlKSxjb250ZXh0LHBhcnRpYWxzLHZhbHVlKTticmVhaztjYXNlIiYiOnZhbHVlPWNvbnRleHQubG9va3VwKHRva2VuWzFdKTtpZih2YWx1ZSE9bnVsbClidWZmZXIrPXZhbHVlO2JyZWFrO2Nhc2UibmFtZSI6dmFsdWU9Y29udGV4dC5sb29rdXAodG9rZW5bMV0pO2lmKHZhbHVlIT1udWxsKWJ1ZmZlcis9bXVzdGFjaGUuZXNjYXBlKHZhbHVlKTticmVhaztjYXNlInRleHQiOmJ1ZmZlcis9dG9rZW5bMV07YnJlYWt9fXJldHVybiBidWZmZXJ9O211c3RhY2hlLm5hbWU9Im11c3RhY2hlLmpzIjttdXN0YWNoZS52ZXJzaW9uPSIwLjguMSI7bXVzdGFjaGUudGFncz1bInt7IiwifX0iXTt2YXIgZGVmYXVsdFdyaXRlcj1uZXcgV3JpdGVyO211c3RhY2hlLmNsZWFyQ2FjaGU9ZnVuY3Rpb24oKXtyZXR1cm4gZGVmYXVsdFdyaXRlci5jbGVhckNhY2hlKCl9O211c3RhY2hlLnBhcnNlPWZ1bmN0aW9uKHRlbXBsYXRlLHRhZ3Mpe3JldHVybiBkZWZhdWx0V3JpdGVyLnBhcnNlKHRlbXBsYXRlLHRhZ3MpfTttdXN0YWNoZS5yZW5kZXI9ZnVuY3Rpb24odGVtcGxhdGUsdmlldyxwYXJ0aWFscyl7cmV0dXJuIGRlZmF1bHRXcml0ZXIucmVuZGVyKHRlbXBsYXRlLHZpZXcscGFydGlhbHMpfTttdXN0YWNoZS50b19odG1sPWZ1bmN0aW9uKHRlbXBsYXRlLHZpZXcscGFydGlhbHMsc2VuZCl7dmFyIHJlc3VsdD1tdXN0YWNoZS5yZW5kZXIodGVtcGxhdGUsdmlldyxwYXJ0aWFscyk7aWYoaXNGdW5jdGlvbihzZW5kKSl7c2VuZChyZXN1bHQpfWVsc2V7cmV0dXJuIHJlc3VsdH19O211c3RhY2hlLmVzY2FwZT1lc2NhcGVIdG1sO211c3RhY2hlLlNjYW5uZXI9U2Nhbm5lcjttdXN0YWNoZS5Db250ZXh0PUNvbnRleHQ7bXVzdGFjaGUuV3JpdGVyPVdyaXRlcn0pOw=="},{"meta":{"name":"tieba_ui.js","url":"https://greasyfork.org/scripts/2657/code/tieba_ui.js","ts":1606985023621,"mimetype":"text/javascript"},"source":"LyoqCiAqIEBwYWNrYWdlIG9yZy5qaXh1bi50aWViYS51aQogKiBAYXV0aG9yICBqaXh1bgogKiBAc291cmNlICBodHRwOi8vdGIxLmJkc3RhdGljLmNvbS90Yi9zdGF0aWMtY29tbW9uL2xpYi90Yl9saWJfMDRlNzc5MS5qcwogKi8KCi8vIERlYnVnZ2luZwovLyB2YXIgdW5zYWZlV2luZG93ID0gd2luZG93OwoKLy8g6YWN572u6aG555uu5Y+C6KeBICQuZGlhbG9nLnNldHRpbmcg55qE5YC8Ci8vIG5ldyAkLmRpYWxvZyAoIHsg6YWN572uIH0gKQoKLy8g6Z2Z5oCB5Ye95pWw5bey57uP5Zyo55u45YWz5Ye95pWw5rOo6YeK5LqGCi8vICQuZGlhbG9nLm9wZW4KLy8gJC5kaWFsb2cuYXNrCi8vIC4uLgoKKGZ1bmN0aW9uICgkKSB7CgkkLmZuLmRyYWdnYWJsZSA9IGZ1bmN0aW9uKG9wdCkgewoJCXZhciAkdGhhdCA9IHRoaXM7CgkJb3B0ID0gJC5leHRlbmQoewoJCQloYW5kbGU6ICR0aGF0LAoJCQlzdGFydDogJC5ub29wLAoJCQlzdG9wOiAkLm5vb3AKCQl9LCBvcHQpOwoKCQl2YXIgX2VsZW1lbnQgPSAkdGhhdFswXSwKCQkJX2VsZW1lbnRQYXJlbnQgPSAkdGhhdC5wYXJlbnQoKVswXTsKCgkJdmFyIF9nZXRQb3MgPSBmdW5jdGlvbiAoZWxlKSB7CgkJCXZhciBhZGRPbiA9IGVsZS5vZmZzZXRQYXJlbnQgIT0gX2VsZW1lbnRQYXJlbnQgJiYgZWxlLm9mZnNldFBhcmVudAoJCQkJPyBfZ2V0UG9zIChlbGUub2Zmc2V0UGFyZW50KQoJCQkJOiB7eDogMCwgeTogMH07CgoJCQlyZXR1cm4gewoJCQkJeDogZWxlLm9mZnNldExlZnQgKyBhZGRPbi54LAoJCQkJeTogZWxlLm9mZnNldFRvcCArIGFkZE9uLnkKCQkJfTsKCQl9OwoKCQl2YXIgYmFzZU9mZnNldCwgb2Zmc2V0LCBpc0RyYWc7CgkJdmFyIF9tb3VzZURvd24gPSBmdW5jdGlvbiAoZSkgewoJCQliYXNlT2Zmc2V0ID0gX2dldFBvcyAoX2VsZW1lbnQpOwoJCQlvZmZzZXQgPSB7CgkJCQl4OiBlLnBhZ2VYLAoJCQkJeTogZS5wYWdlWQoJCQl9OwoKCQkJaXNEcmFnID0gdHJ1ZTsKCQkJZS5wcmV2ZW50RGVmYXVsdCgpOwoJCQlvcHQuc3RhcnQoKTsKCQl9LCBfbW91c2VVcCA9IGZ1bmN0aW9uICgpIHsKCQkJaXNEcmFnID0gZmFsc2U7CgkJCW9wdC5zdG9wICgpOwoJCX0sIF9tb3VzZU1vdmUgPSBmdW5jdGlvbiAoZSkgewoJCQlpZiAoIWlzRHJhZykgcmV0dXJuOwoKCQkJJHRoYXQuY3NzICh7CgkJCQlsZWZ0OiBiYXNlT2Zmc2V0LnggKyBlLnBhZ2VYIC0gb2Zmc2V0LngsCgkJCQl0b3AgOiBiYXNlT2Zmc2V0LnkgKyBlLnBhZ2VZIC0gb2Zmc2V0LnkKCQkJfSk7CgkJfTsKCgkJb3B0LmhhbmRsZS5vbignbW91c2Vkb3duJywgX21vdXNlRG93bik7CgkJJChkb2N1bWVudCkKCQkJLm9uICgnbW91c2Vtb3ZlJywgX21vdXNlTW92ZSkKCQkJLm9uICgnbW91c2V1cCcsICAgX21vdXNlVXApOwoKCQlyZXR1cm4gZnVuY3Rpb24gKCkgewoJCQlvcHQuaGFuZGxlLm9mZiAoJ21vdXNlZG93bicsIF9tb3VzZURvd24pOwoJCQkkKGRvY3VtZW50KQoJCQkJLm9mZiAoJ21vdXNlbW92ZScsIF9tb3VzZU1vdmUpCgkJCQkub2ZmICgnbW91c2V1cCcsICAgX21vdXNlVXApOwoJCX07Cgl9OwoKCSQuZ2V0ekluZGV4ID0gZnVuY3Rpb24gKCkgewoJCSQuekluZGV4ID0gJC56SW5kZXggfHwgNTAwMDA7CgkJcmV0dXJuICQuekluZGV4ICsrOwoJfTsKCgl2YXIgJG1vZGFsID0gZnVuY3Rpb24gKG9wdHMpIHsKCQl2YXIgdGhhdCA9IHRoaXM7CgkJdGhpcy5jZmcgPSAkLmV4dGVuZCh7fSwgewoJCQljbGFzc05hbWU6ICJkaWFsb2dKbW9kYWwiLAoJCQlyZXNpemVhYmxlOiB0cnVlCgkJfSwgb3B0cyk7CgoJCXRoaXMuZWxlbWVudCA9CgkJCSQoJzxkaXY+JykKCQkJCS5hZGRDbGFzcyh0aGlzLmNmZy5jbGFzc05hbWUpCgkJCQkuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSkKCQkJCS5jc3MoewoJCQkJCWRpc3BsYXk6ICJub25lIiwKCQkJCQl6SW5kZXg6ICQuZ2V0ekluZGV4KCksCgkJCQkJd2lkdGg6IHRoaXMud2lkdGgoKSwKCQkJCQloZWlnaHQ6IHRoaXMuaGVpZ2h0KCkKCQkJCX0pOwoKCQlpZiAodGhpcy5jZmcuc2hvdykKCQkJdGhpcy5zaG93ICgpOwoKCQl0aGlzLnJlc2l6ZUZ1bmMgPSBmdW5jdGlvbiAoKSB7CgkJCXRoYXQuY3NzKHsKCQkJCXdpZHRoOiB0aGF0LndpZHRoICgpLAoJCQkJaGVpZ2h0OiB0aGF0LmhlaWdodCAoKQoJCQl9KTsKCgkJCXRoYXQudHJpZ2dlckhhbmRsZXIoInJlc2l6ZSIpOwoJCX07CgoJCWlmICh0aGlzLmNmZy5yZXNpemVhYmxlKSB7CgkJCSQodW5zYWZlV2luZG93KS5vbigicmVzaXplIiwgdGhpcy5yZXNpemVGdW5jKTsKCQl9Cgl9OwoKCgoJJG1vZGFsLnByb3RvdHlwZSA9IHsKCQljb25zdHJ1Y3RvcjogJG1vZGFsLAoKCQlzaG93OiBmdW5jdGlvbiAoKSB7CgkJCXRoaXMuZWxlbWVudC5zaG93LmFwcGx5KHRoaXMuZWxlbWVudCwgYXJndW1lbnRzKTsKCQl9LAoKCQloaWRlOiBmdW5jdGlvbiAoKSB7CgkJCXRoaXMuZWxlbWVudC5oaWRlLmFwcGx5KHRoaXMuZWxlbWVudCwgYXJndW1lbnRzKTsKCQl9LAoKCQl3aWR0aDogZnVuY3Rpb24gKCkgewoJCQlyZXR1cm4gJCh1bnNhZmVXaW5kb3cpLndpZHRoKCk7CgkJfSwKCgkJaGVpZ2h0OiBmdW5jdGlvbiAoKSB7CgkJCXJldHVybiBNYXRoLm1heCgkKCJib2R5IikuaGVpZ2h0KCksICQoImh0bWwiKS5oZWlnaHQoKSk7CgkJfSwKCgkJY3NzOiBmdW5jdGlvbiAoKSB7CgkJCXJldHVybiB0aGlzLmVsZW1lbnQuY3NzLmFwcGx5KHRoaXMuZWxlbWVudCwgYXJndW1lbnRzKTsKCQl9LAoKCQl0cmlnZ2VySGFuZGxlcjogZnVuY3Rpb24gKCkgewoJCQl0aGlzLmVsZW1lbnQudHJpZ2dlckhhbmRsZXIuYXBwbHkodGhpcy5lbGVtZW50LCBhcmd1bWVudHMpOwoJCX0sCgoJCWJpbmQ6IGZ1bmN0aW9uICgpIHsKCQkJdGhpcy5lbGVtZW50Lm9uLmFwcGx5KHRoaXMuZWxlbWVudCwgYXJndW1lbnRzKTsKCQl9LAoKCQlyZW1vdmU6IGZ1bmN0aW9uICgpIHsKCQkJaWYgKHRoaXMuZWxlbWVudCkgewoJCQkJdGhpcy5lbGVtZW50LnJlbW92ZSgpOwoJCQl9CgkJCSQodW5zYWZlV2luZG93KS5vZmYoInJlc2l6ZSIsIHRoaXMucmVzaXplRnVuYyk7CgkJCWZvciAodmFyIHQgaW4gdGhpcykgewoJCQkJaWYgKHRoaXMuaGFzT3duUHJvcGVydHkodCkpIHsKCQkJCQlkZWxldGUgdGhpc1t0XTsKCQkJCX0KCQkJfQoJCX0KCgkJLy8gX3Byb2Nlc3NUYWdlcyDnp7vpmaQKCQkvLyDlm6DkuLrlhajpg6jpg73mmK/lhbzlrrkgSUUg55So5Luj56CB44CCCgoJfTsKCgkkLm1vZGFsID0gJG1vZGFsOwoKCXZhciBsc3RFdmVudHMgPSBbIm9uYWNjZXB0IiwgIm9uY2FuY2VsIiwgIm9uY2xvc2UiLCAib25yZXNpemUiLCAib25oaWRlIl07CgkKCXZhciAkZGlhbG9nID0gZnVuY3Rpb24gKGRpYWxvZ09wdHMpIHsKCQl2YXIgdGhhdCA9IHRoaXM7CgkJdmFyIGNiT25SZXNpemUgPSBmdW5jdGlvbiAoKSB7CgkJCQoJCQlpZiAoIXRoYXQuZHJhZ2dlZCkgewoJCQkJdGhhdC5lbGVtZW50LnRyaWdnZXJIYW5kbGVyKCJvbnJlc2l6ZSIpOwoJCQkJCgkJCQlpZiAodGhhdC5zaXplVGltZXIpCgkJCQkJY2xlYXJUaW1lb3V0KHRoYXQuc2l6ZVRpbWVyKTsKCQkJCQoJCQkJdGhhdC5zaXplVGltZXIgPSBzZXRUaW1lb3V0KHRoYXQuc2V0UG9zaXRpb24ub24odGhhdCksIDUpCgkJCX0KCQl9OwoKCQkkZGlhbG9nLklOU1QucHVzaCh0aGlzKTsKCQkKCQl0aGlzLmNmZyA9ICQuZXh0ZW5kKHt9LCAkZGlhbG9nLnNldHRpbmcsIGRpYWxvZ09wdHMpOwoJCWlmICghdGhpcy5jZmcuc2hvd1RpdGxlKQoJCQl0aGlzLmNmZy5kcmFnZ2FibGUgPSAgZmFsc2U7CgkJCgkJaWYgKG51bGwgIT0gdGhpcy5jZmcudG9wIHx8IG51bGwgIT0gdGhpcy5jZmcubGVmdCkgewoJCQl0aGlzLmNmZy5hdXRvQ2VudGVyID0gZmFsc2U7CgkJfQoKCQl2YXIgZGlhbG9nQ2xhc3MgPSAiZGlhbG9nSiBkaWFsb2dUaWViYVVpIjsKCgkJaWYgKHRoaXMuY2ZnLmhvbGRlckNsYXNzTmFtZSkKCQkJZGlhbG9nQ2xhc3MgKz0gIiAiICsgdGhpcy5jZmcuaG9sZGVyQ2xhc3NOYW1lOwoKCQlpZiAodGhpcy5jZmcuZml4ZWQpCgkJCWRpYWxvZ0NsYXNzICs9ICIgZGlhbG9nSmZpeCI7CgoJCWlmICh0aGlzLmNmZy5zaG93U2hhZG93KQoJCQlkaWFsb2dDbGFzcyArPSAiIGRpYWxvZ0pzaGFkb3ciOwoKCQlpZiAodGhpcy5jZmcubW9kYWwpIHsKCQkJdmFyIG1vZGFsQXJnID0ge307CgoJCQlpZiAodGhpcy5jZmcubW9kYWxDbGFzc05hbWUpCgkJCQltb2RhbEFyZy5jbGFzc05hbWUgPSB0aGlzLmNmZy5tb2RhbENsYXNzTmFtZTsKCgkJCXRoaXMubW9kYWwgPSBuZXcgJC5tb2RhbChtb2RhbEFyZyk7CgkJfQoKCQl0aGlzLmVsZW1lbnQgPQoJCQkkKCc8ZGl2IGNsYXNzPSInICsgZGlhbG9nQ2xhc3MgKyAnIj48L2Rpdj4nKQoJCQkJLmhpZGUgKCkKCQkJCS5jc3MoewoJCQkJCXpJbmRleDogJC5nZXR6SW5kZXgoKQoJCQkJfSkuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSk7CgoJCXRoaXMuZWxlbWVudFdyYXBwZXIgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCd1aURpYWxvZ1dyYXBwZXInKS5hcHBlbmRUbyh0aGlzLmVsZW1lbnQpOwoKCQkvLyDlh4blpIflr7nor53moYbmoIfpopgKCQl0aGlzLl9zZXR1cFRpdGxlQmFyKCk7CgkJdGhpcy5zZXRUaXRsZSh0aGlzLmNmZy50aXRsZSk7CgkJdGhpcy5fc2V0dXBOb1RpdGxlKCk7CgoJCS8vIOWHhuWkh+WvueivneahhuWGheWuuQoJCXRoaXMuX3NldHVwQ29udGVudCgpOwoJCWlmICgnaWZyYW1lJyA9PT0gdGhpcy5jZmcuY29udGVudFR5cGUpIHsKCQkJdGhpcy5jZmcuaHRtbCA9ICQoIjxpZnJhbWU+IikuY3NzKHsKCQkJCXdpZHRoOiAiMTAwJSIsCgkJCQloZWlnaHQ6ICIxMDAlIiwKCQkJCWJvcmRlcjogIm5vbmUiCgkJCX0pLmF0dHIoewoJCQkJc3JjOiB0aGlzLmNmZy5odG1sCgkJCX0pOwoJCX0KCQl0aGlzLnNldENvbnRlbnQodGhpcy5jZmcuaHRtbCk7CgoJCS8vIOiuvuWumuWvueivneahhuWuveOAgemrmAoJCS8vIEppeHVuOiDorr7lrprpu5jorqQgNDAweDgwIOeahOWuvemrmOOAggoJCXRoaXMud2lkdGgodGhpcy5jZmcud2lkdGgpOwoJCXRoaXMuaGVpZ2h0KHRoaXMuY2ZnLmhlaWdodCk7CgkJdGhpcy5zZXRQb3NpdGlvbih0aGlzLmNmZy5sZWZ0LCB0aGlzLmNmZy50b3ApOwoKCQlpZiAodGhpcy5jZmcuc2hvdykKCQkJdGhpcy5zaG93KCk7CgoJCWlmICh0aGlzLmNmZy5hdXRvQ2VudGVyICkKCQkJJCh1bnNhZmVXaW5kb3cpLm9uKCJyZXNpemUiLCBjYk9uUmVzaXplKTsKCgkJLy8g6K6+5a6a5ouW5YqoCgkJdGhpcy5fc2V0U2Nyb2xsICgpOwoJCSQuZWFjaCAobHN0RXZlbnRzLCBmdW5jdGlvbiAoaSwgZXZlbnROYW1lKSB7CgkJCWlmICh0aGF0LmNmZ1tldmVudE5hbWVdKSB7CgkJCQl0aGF0Lm9uKGV2ZW50TmFtZSwgdGhhdC5jZmdbZXZlbnROYW1lXSk7CgkJCX0KCQl9KTsKCgkJaWYgKHRoaXMuY2ZnLmVzY2FibGUpCgkJCXRoaXMuX3NldHVwRXNjS2V5KCk7CgoJCS8vIOWFs+mXreWvueivneahhgoJCXRoaXMuY2xvc2UgPSBmdW5jdGlvbiAoKSB7CgkJCS8vIOWmguaenOaLkue7neWFs+mXreWImei/lOWbngoJCQlpZiAodGhhdC5lbGVtZW50LnRyaWdnZXJIYW5kbGVyKCJvbmNsb3NlIikgPT09ICBmYWxzZSkKCQkJCXJldHVybiBmYWxzZTsKCgkJCS8vIOWPlua2iOe7keWumiByZXNpemUg5LqL5Lu2CgkJCSQodW5zYWZlV2luZG93KS5vZmYoInJlc2l6ZSIsIGNiT25SZXNpemUpOwoKCQkJLy8g56e76ZmkIG1vZGFsCgkJCWlmICh0aGF0Lm1vZGFsKQoJCQkJdGhhdC5tb2RhbC5yZW1vdmUoKTsKCgkJCXRoYXQuX3NldFNjcm9sbCh0cnVlKTsKCQkJdGhhdC5lbGVtZW50LnJlbW92ZSgpOwoKCQkJZm9yICh2YXIgdCA9IDA7IHQgPCAkZGlhbG9nLklOU1QubGVuZ3RoOyB0KyspIHsKCQkJCWlmICgkZGlhbG9nLklOU1RbdF0gPT0gdGhhdCkgewoJCQkJCSRkaWFsb2cuSU5TVC5zcGxpY2UodCwgMSk7CgkJCQkJYnJlYWs7CgkJCQl9CgkJCX0KCgkJCXJldHVybiB0cnVlOwoJCX0KCX07CgkKCgkkLmV4dGVuZCgkZGlhbG9nLCB7CgkJLyoqCgkJICog5ZCv5Yqo5LiA5Liq5Z+65pys5a+56K+d5qGGCgkJICogQHBhcmFtIGNvbnRlbnQgICDlr7nor53moYblhoXlrrkKCQkgKiBAcGFyYW0gb3B0cyAgICAgIOWFtuWug+S8oOWPggoJCSAqIEByZXR1cm5zIHskZGlhbG9nfQoJCSAqLwoJCW9wZW46IGZ1bmN0aW9uIChjb250ZW50LCBvcHRzKSB7CgkJCXJldHVybiAobmV3ICRkaWFsb2coJC5leHRlbmQoe30sIG9wdHMsIHtodG1sOiBjb250ZW50fSkpKTsKCQl9LAoKCQkvKioKCQkgKiDliJvlu7rkuIDkuKror6Lpl67lr7nor53moYYKCQkgKiBAcGFyYW0gaHRtbCAgICAgICAgICDlr7nor53moYblhoXlrrkKCQkgKiBAcGFyYW0gYXJyQW5zd2VycyAgICDlm57nrZTmjInpkq7lhoXlrrkKCQkgKgoJCSAqIEBwYXJhbSBjYWxsYmFjayAgICAgIOS4pOS4quWPguaVsCwg5Y6f5Z6L5aaC5LiLOgoJCSAqICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrIChpLCAkZGlhbG9nKQoJCSAqICAgICAgICAgICAgICAgICAgICAgIGkg5Li65Zue562U5oyJ6ZKu5bqP5Y+3LCAkZGlhbG9nIOS4uuWvueivneahhuacrOS9kwoJCSAqICAgICAgICAgICAgICAgICAgICAgIHRoaXMg57uR5a6a5Li6ICQo5oyJ6ZKuKeOAggoJCSAqCgkJICogQHBhcmFtIG9wdHMgICAgICAgICAg5Yib5bu65pe25Lyg6YCS57uZICRkaWFsb2cgLyAkbW9kYWwg55qE5Y+C5pWwCgkJICogQHJldHVybnMge30KCQkgKi8KCQlhc2s6IGZ1bmN0aW9uIChodG1sLCBhcnJBbnN3ZXJzLCBjYWxsYmFjaywgb3B0cykgewoJCQlpZiAoIW9wdHMpIG9wdHMgPSB7fTsKCgkJCXZhciBfJGRpYWxvZyA9IG5ldyAkZGlhbG9nKCQuZXh0ZW5kKHttb2RhbDogdHJ1ZX0sIG9wdHMsIHtodG1sOiBodG1sIHx8ICIiLCBzaG93OiB0cnVlfSkpOwoKCQkJaWYgKCQuaXNBcnJheShhcnJBbnN3ZXJzKSAmJiBhcnJBbnN3ZXJzLmxlbmd0aCkgewoJCQkJdmFyIGFuc3dlckNvbnRhaW5lciA9ICQoJzxkaXY+JykKCQkJCQkuYWRkQ2xhc3MoJ2RpYWxvZ0phbnN3ZXJzJykKCQkJCQkuYXBwZW5kVG8oXyRkaWFsb2cuZWxlbWVudFdyYXBwZXIpOwoKCQkJCSQoYXJyQW5zd2VycykuZWFjaCAoZnVuY3Rpb24gKGksIHZhbCkgewoJCQkJCS8vYW5zd2VyQ29udGFpbmVyLmFwcGVuZCAoJCgnPGlucHV0PicpLnZhbCh2YWwpLmFkZENsYXNzKCdkaWFsb2dKYnRuJykuYXR0cigndHlwZScsICdidXR0b24nKSkKCQkJCQkvLwkuYXBwZW5kICgnICcpOwoKCQkJCQkvLyDkuIvpnaLov5nkuKrnmoTmjInpkq7mnInok53oibLmoLflvI8KCQkJCQlhbnN3ZXJDb250YWluZXIKCQkJCQkJLmFwcGVuZCAoCgkJCQkJCQkkKCc8YT4nKS5hZGRDbGFzcygndWlfYnRuIHVpX2J0bl9tJykuYXBwZW5kKCQoJzxzcGFuPicpLmFwcGVuZCgnPGVtPicpLnRleHQodmFsKSkKCQkJCQkJCQkuY2xpY2sgKGZ1bmN0aW9uICgpIHsKCQkJCQkJCQkJaWYgKGZhbHNlICE9PSBjYWxsYmFjay5jYWxsKHRoaXMsIGksIF8kZGlhbG9nKSkKCQkJCQkJCQkJCV8kZGlhbG9nLmNsb3NlKCk7CgkJCQkJCQkJfSkKCQkJCQkJKTsKCQkJCX0pOwoKCQkJCV8kZGlhbG9nLmJ1dHRvbnMgPSAkKCJpbnB1dCIsIGFuc3dlckNvbnRhaW5lcik7CgkJCX0KCQkJXyRkaWFsb2cuc2V0UG9zaXRpb24oKTsKCgkJCWlmIChvcHRzLnNob3cpCgkJCQlfJGRpYWxvZy5zaG93KCk7CgkJCXJldHVybiBfJGRpYWxvZzsKCQl9LAoKCQkvKioKCQkgKiDmmL7npLrkuIDmnaHorablkYrmoYYKCQkgKiBAcGFyYW0gbWVzc2FnZSAgICAgICAgICAg6K2m5ZGK5raI5oGvCgkJICogQHBhcmFtIFtvcHRzXSAgICAgICAgICAgICRtb2RhbCAvICRkaWFsb2cg5Y+C5pWwCgkJICogQHBhcmFtIG9wdHMuYWNjZXB0VmFsdWUg44CM56Gu5a6a44CN5oyJ6ZKu5qCH6aKYCgkJICogQHJldHVybnMgeyRkaWFsb2d9CgkJICovCgkJYWxlcnQ6IGZ1bmN0aW9uIChtZXNzYWdlLCBvcHRzKSB7CgkJCXZhciBleHRPcHRzID0gJC5leHRlbmQoe30sIG9wdHMgfHwge30pOwoJCQlyZXR1cm4gJGRpYWxvZy5hc2sobWVzc2FnZSwgW2V4dE9wdHMuYWNjZXB0VmFsdWUgfHwgIuehruWumiJdLCBmdW5jdGlvbiAoZSwgdCkgewoJCQkJcmV0dXJuIHQuZWxlbWVudC50cmlnZ2VySGFuZGxlcihsc3RFdmVudHNbZV0sIHRoaXMpCgkJCX0sIGV4dE9wdHMpCgkJfSwKCgkJLyoqCgkJICog5pi+56S65LiA5Liq56Gu6K6k5qGGCgkJICogQHBhcmFtIG1lc3NhZ2UgICAgICAgICAgIOehruiupOeahOa2iOaBrwoJCSAqIEBwYXJhbSBbb3B0c10gICAgICAgICAgICAkbW9kYWwgLyAkZGlhbG9nIOWPguaVsAoJCSAqIEBwYXJhbSBvcHRzLmFjY2VwdFZhbHVlICDjgIznoa7lrprjgI3mjInpkq7moIfpopgKCQkgKiBAcmV0dXJucyB7JGRpYWxvZ30KCQkgKi8KCQljb25maXJtOiBmdW5jdGlvbiAobWVzc2FnZSwgb3B0cykgewoJCQl2YXIgZXh0T3B0cyA9ICQuZXh0ZW5kKHt9LCBvcHRzIHx8IHt9KTsKCQkJcmV0dXJuICRkaWFsb2cuYXNrKG1lc3NhZ2UsIFtleHRPcHRzLmFjY2VwdFZhbHVlIHx8ICLnoa7lrpoiLCBleHRPcHRzLmNhbmNlbFZhbHVlIHx8ICLlj5bmtogiXSwgZnVuY3Rpb24gKGUsIHQpIHsKCQkJCXJldHVybiB0LmVsZW1lbnQudHJpZ2dlckhhbmRsZXIobHN0RXZlbnRzW2VdLCB0aGlzKQoJCQl9LCBleHRPcHRzKQoJCX0sCgoJCS8qKgoJCSAqIOaYvuekuuS4gOS4quWumuaXtuitpuWRiuahhgoJCSAqIEBwYXJhbSBtZXNzYWdlICAgICAgICAgICAgICAg5pi+56S655qE5raI5oGvCgkJICogQHBhcmFtIGNhbGxiYWNrICAgICAgICAgICAgICDlm57osIMsIOaXoOWPguaVsAoJCSAqIEBwYXJhbSBbb3B0c10gICAgICAgICAgICAgICAg5Y+C5pWw6ZuG5ZCICgkJICogQHBhcmFtIG9wdHMuYWNjZXB0VmFsdWUgICAgICDjgIznoa7lrprjgI3mjInpkq7moIfpopgKCQkgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdHMuYnV0dG9uIOaYr+WQpuaYvuekuuehruWumuaMiemSrgoJCSAqIEBwYXJhbSBvcHRzLnRpbWUgICAgICAgICAgICAg562J5b6F5pe26ZW/CgkJICogQHJldHVybnMgeyp9CgkJICovCgkJYXNzZXJ0OiBmdW5jdGlvbiAobWVzc2FnZSwgY2FsbGJhY2ssIG9wdHMpIHsKCQkJdmFyIGV4dE9wdHMgPSAkLmV4dGVuZCh7YnV0dG9uOiB0cnVlfSwgb3B0cyB8fCB7fSk7CgoJCQlpZiAoMiA9PSBhcmd1bWVudHMubGVuZ3RoKSB7CgkJCQlleHRPcHRzID0gY2FsbGJhY2s7CgkJCQljYWxsYmFjayA9ICQubm9vcDsKCQkJfQoKCQkJdmFyICRkaWFsb2dBc2sgPSAkZGlhbG9nLmFzaygKCQkJCQltZXNzYWdlLAoJCQkJCWV4dE9wdHMuYnV0dG9uID8gW2V4dE9wdHMuYWNjZXB0VmFsdWUgfHwgIuehruWumiJdIDogW10sCgkJCQkJZnVuY3Rpb24gKGksICRkaWFsb2cpIHsKCQkJCQkJcmV0dXJuICRkaWFsb2cuZWxlbWVudC50cmlnZ2VySGFuZGxlcihsc3RFdmVudHNbaV0sIHRoaXMpCgkJCQkJfSwKCQkJCQlleHRPcHRzCgkJCQkpOwoKCQkJc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CgkJCQlpZiAoJGRpYWxvZ0FzayAmJiAkZGlhbG9nQXNrLmNsb3NlKQoJCQkJCSRkaWFsb2dBc2suY2xvc2UoKTsKCgkJCQlpZiAoY2FsbGJhY2spCgkJCQkJY2FsbGJhY2soKTsKCgkJCX0sIHBhcnNlSW50KGV4dE9wdHMudGltZSkgfHwgMjAwMCk7CgoJCQlyZXR1cm4gJGRpYWxvZ0FzazsKCQl9LAoKCQkvKioKCQkgKiDov5znq6/liqDovb3kuIDkuKrpobXpnaLlubbmmL7npLrlhbblhoXlrrkKCQkgKiBAcGFyYW0gdXJsICAgICAgICAgICDnm67moIflnLDlnYAKCQkgKiBAcGFyYW0gb3B0cyAgICAgICAgICDpgInpobkKCQkgKiBAcGFyYW0gb3B0cy5maWx0ZXIgICDpobXpnaLlhoXlrrnpgInmi6nlmagKCQkgKiBAcGFyYW0gb3B0cy5jYWNoZSAgICDlj4Lop4EgalF1ZXJ5LmFqYXgKCQkgKiBAcGFyYW0gb3B0cy50eXBlICAgICDlj4Lop4EgalF1ZXJ5LmFqYXgKCQkgKiBAcmV0dXJucyB7JGRpYWxvZ30KCQkgKi8KCQlsb2FkOiBmdW5jdGlvbiAodXJsLCBvcHRzKSB7CgkJCW9wdHMgPSBvcHRzIHx8IHt9OwoJCQl2YXIgXyRkaWFsb2cgPSBuZXcgJGRpYWxvZyhvcHRzKTsKCQkJdmFyIHJlcXVlc3RPYmogPSB7CgkJCQl1cmw6IHVybCwKCQkJCXR5cGU6ICJHRVQiLAoJCQkJZGF0YVR5cGU6ICJodG1sIiwKCQkJCWNhY2hlOiBmYWxzZSwKCQkJCXN1Y2Nlc3M6IGZ1bmN0aW9uIChodG1sKSB7CgkJCQkJaWYgKG9wdHMuZmlsdGVyKQoJCQkJCQlodG1sID0gJChvcHRzLmZpbHRlciwgaHRtbCk7CgoJCQkJCV8kZGlhbG9nLnNldENvbnRlbnQoaHRtbCk7CgkJCQl9CgkJCX07CgoJCQkkLmVhY2goWyJ0eXBlIiwgImNhY2hlIl0sIGZ1bmN0aW9uIChpLCBzdHIpIHsKCQkJCWlmIChvcHRzLmhhc093blByb3BlcnR5KHN0cikpIHsKCQkJCQlyZXF1ZXN0T2JqW3N0cl0gPSBvcHRzW3N0cl07CgkJCQkJZGVsZXRlIG9wdHNbc3RyXTsKCQkJCX0KCQkJfSk7CgoJCQkkLmFqYXgocmVxdWVzdE9iaik7CgkJCXJldHVybiBfJGRpYWxvZzsKCQl9LAoKCQkvKioKCQkgKiDlhbPpl63miYDmnInlvIDlkK/nmoTlr7nor53moYYKCQkgKi8KCQljbG9zZTogZnVuY3Rpb24gKCkgewoJCQlmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuSU5TVC5sZW5ndGg7IGkrKykgewoJCQkJLy8g5aaC5p6c5ouS57ud5YWz6ZetLCBpLS0g54S25ZCO57un57ut5p6a5Li+5YWz6Zet6L+H56iLCgkJCQlpZiAoZmFsc2UgIT09IHRoaXMuSU5TVFtpXS5jbG9zZSgpKSB7CgkJCQkJaS0tOwoJCQkJfQoJCQl9CgkJfSwKCgkJc2V0dGluZzogewoJCQltb2RhbDogdHJ1ZSwKCQkJc2hvd1NoYWRvdzogdHJ1ZSwKCQkJc2hvd1RpdGxlOiB0cnVlLAoJCQlub1RpdGxlOiBmYWxzZSwKCgkJCS8vIOm7mOiupCA0MDAgeCA4MAoJCQl3aWR0aDogNDAwLAoJCQloZWlnaHQ6IDgwLAoJCQlmaXhlZDogdHJ1ZSwKCQkJbGVmdDogbnVsbCwKCQkJdG9wOiBudWxsLAoJCQlzaG93OiB0cnVlLAoJCQljbG9zZWFibGU6IHRydWUsCgkJCWhpZGVPbmNsb3NlOiBmYWxzZSwKCQkJZHJhZ2dhYmxlOiB0cnVlLAoJCQljb250ZW50VHlwZTogbnVsbCwKCQkJcmVzaXplYWJsZTogZmFsc2UsCgkJCWNsb3NlVGlwczogbnVsbCwKCQkJZXNjYWJsZTogdHJ1ZSwKCQkJc2Nyb2xsYWJsZTogdHJ1ZSwKCQkJbW9kYWxDbGFzc05hbWU6IG51bGwsCgkJCWF1dG9DZW50ZXI6IHRydWUsCgkJCWh0bWw6IG51bGwsCgkJCW1pbldpZHRoOiAyMDAsCgkJCW1pbkhlaWdodDogMTAwLAoJCQltYXhXaWR0aDogbnVsbCwKCQkJbWF4SGVpZ2h0OiBudWxsCgkJfQoJfSk7CgoJJGRpYWxvZy5wcm90b3R5cGUgPSB7CgkJY29uc3RydWN0b3I6ICRkaWFsb2csCgoJCS8qKgoJCSAqIOaTpumZpOWOn+Wni+agh+mimOW5tuiuvuWumuaWsOagh+mimAoJCSAqIOWPr+S7peS4uiBqUXVlcnkg5a+56LGh44CBRE9NIOWvueixoQoJCSAqIEBwYXJhbSBuZXdUaXRsZQoJCSAqLwoJCXNldFRpdGxlOiBmdW5jdGlvbiAobmV3VGl0bGUpIHsKCQkJdGhpcy5lbGVtZW50LmZpbmQoIi5kaWFsb2dKdGl0bGU+c3Bhbi5kaWFsb2dKdHh0IikuaHRtbChuZXdUaXRsZSB8fCAiIik7CgkJfSwKCgkJLyoqCgkJICog5pOm6Zmk5Y6f5aeL5YaF5a655bm26K6+5a6a5paw5YaF5a65CgkJICog5Y+v5Lul5Li6IGpRdWVyeSDlr7nosaHjgIFET00g5a+56LGhCgkJICogQHBhcmFtIG5ld0NvbnRlbnQKCQkgKi8KCQlzZXRDb250ZW50OiBmdW5jdGlvbiAobmV3Q29udGVudCkgewoJCQluZXdDb250ZW50ICYmIHRoaXMuZWxlbWVudC5maW5kKCIuZGlhbG9nSmJvZHkiKS5odG1sKG5ld0NvbnRlbnQpOwoJCX0sCgoJCS8qKgoJCSAqIOiuvuWumuaWsOWuveW6pgoJCSAqIEBwYXJhbSBuZXdXaWR0aAoJCSAqIEByZXR1cm5zIHsqfQoJCSAqLwoJCXdpZHRoOiBmdW5jdGlvbiAobmV3V2lkdGgpIHsKCQkJcmV0dXJuIHRoaXMuZWxlbWVudC5jc3MoIndpZHRoIiwgbmV3V2lkdGgpOwoJCX0sCgoJCS8qKgoJCSAqIOiuvuWumuaWsOmrmOW6pgoJCSAqIEBwYXJhbSBuZXdIZWlnaHQKCQkgKiBAcmV0dXJucyB7Kn0KCQkgKi8KCQloZWlnaHQ6IGZ1bmN0aW9uIChuZXdIZWlnaHQpIHsKCQkJcmV0dXJuICQoIi5kaWFsb2dKYm9keSIsIHRoaXMuZWxlbWVudCkuY3NzKCJoZWlnaHQiLCBuZXdIZWlnaHQpOwoJCX0sCgoJCS8qKgoJCSAqIOiuvuWumuWvueivneahhuS9jee9rgoJCSAqIEBwYXJhbSBbbGVmdF0g5bem6L65LCDnlZnnqbrlsYXkuK0KCQkgKiBAcGFyYW0gW3RvcF0gIOWPs+i+uSwg55WZ56m65bGF5LitCgkJICovCgkJc2V0UG9zaXRpb246IGZ1bmN0aW9uIChsZWZ0LCB0b3ApIHsKCQkJaWYgKCEkLmlzTnVtZXJpYyhsZWZ0KSAmJiAhJC5pc051bWVyaWModG9wKSkgewoJCQkJdmFyICRkb2MgPSAkKGRvY3VtZW50KSwKCQkJCQkkd2luID0gJCh1bnNhZmVXaW5kb3cpLAoJCQkJCW5ld1Bvc09mZnNldCA9IHRoaXMuY2ZnLmZpeGVkID8gWzAsIDBdIDogWyRkb2Muc2Nyb2xsTGVmdCgpLCAkZG9jLnNjcm9sbFRvcCgpXTsKCgkJCQlsZWZ0ID0gbmV3UG9zT2Zmc2V0IFswXSArICgkd2luLndpZHRoKCkgIC0gdGhpcy5lbGVtZW50Lm91dGVyV2lkdGgoKSApIC8gMjsKCQkJCXRvcCAgPSBuZXdQb3NPZmZzZXQgWzFdICsgKCR3aW4uaGVpZ2h0KCkgLSB0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKSkgLyAyOwoKCQkJCWlmICh0b3AgPCAwKSB0b3AgPSAwOwoJCQl9CgoJCQl0aGlzLmVsZW1lbnQuY3NzKHsKCQkJCWxlZnQ6IGxlZnQsCgkJCQl0b3A6IHRvcAoJCQl9KTsKCgkJCXRoaXMudHJpZ2dlckhhbmRsZXIoInJlc2l6ZSIpOwoJCX0sCgkJLyoqCgkJICog6I635Y+W5qCH6aKYIChIVE1MKQoJCSAqIEByZXR1cm5zIHtTdHJpbmd9CgkJICovCgkJZ2V0VGl0bGU6IGZ1bmN0aW9uICgpIHsKCQkJcmV0dXJuIHRoaXMuZWxlbWVudC5maW5kKCIuZGlhbG9nSnRpdGxlPnNwYW4iKS5odG1sKCk7CgkJfSwKCQkvKioKCQkgKiDojrflj5bmoIfpopjmlofmnKwKCQkgKiBAcmV0dXJucyB7U3RyaW5nfQoJCSAqLwoJCWdldFRpdGxlVGV4dDogZnVuY3Rpb24gKCkgewoJCQlyZXR1cm4gdGhpcy5lbGVtZW50LmZpbmQoIi5kaWFsb2dKdGl0bGUiKS50ZXh0KCk7CgkJfSwKCgkJLyoqCgkJICog6I635Y+W5a+56K+d5qGG5YaF5a65IChIVE1MKQoJCSAqIEByZXR1cm5zIHtTdHJpbmd9CgkJICovCgkJZ2V0Q29udGVudDogZnVuY3Rpb24gKCkgewoJCQlyZXR1cm4gJCgiLmRpYWxvZ0pib2R5IiwgdGhpcy5lbGVtZW50KS5odG1sKCkKCQl9LAoJCS8qKgoJCSAqIOiOt+WPluWvueivneahhuWGheWuuQoJCSAqIEByZXR1cm5zIHtTdHJpbmd9CgkJICovCgkJZ2V0Q29udGVudFRleHQ6IGZ1bmN0aW9uICgpIHsKCQkJcmV0dXJuICQoIi5kaWFsb2dKYm9keSIsIHRoaXMuZWxlbWVudCkudGV4dCgpCgkJfSwKCgkJLyoqCgkJICog5pi+56S65a+56K+d5qGGCgkJICovCgkJc2hvdzogZnVuY3Rpb24gKCkgewoJCQl0aGlzLmVsZW1lbnQuc2hvdy5hcHBseSh0aGlzLmVsZW1lbnQsIGFyZ3VtZW50cyk7CgoJCQlpZiAodGhpcy5tb2RhbCkgewoJCQkJdGhpcy5tb2RhbC5jZmcuc2FmZXR5ID0gdGhpcy5lbGVtZW50OwoJCQkJdGhpcy5tb2RhbC5zaG93LmFwcGx5KHRoaXMubW9kYWwsIGFyZ3VtZW50cyk7CgkJCX0KCQl9LAoKCQkvKioKCQkgKiDpmpDol4/lr7nor53moYYKCQkgKiBAcmV0dXJucyB7Ym9vbGVhbn0KCQkgKi8KCQloaWRlOiBmdW5jdGlvbiAoKSB7CgkJCWlmICh0aGlzLmVsZW1lbnQudHJpZ2dlckhhbmRsZXIoIm9uaGlkZSIpID09PSBmYWxzZSkKCQkJCXJldHVybiBmYWxzZTsKCgkJCXRoaXMuZWxlbWVudC5oaWRlLmFwcGx5KHRoaXMuZWxlbWVudCwgYXJndW1lbnRzKTsKCQkJaWYgKHRoaXMubW9kYWwpCgkJCQl0aGlzLm1vZGFsLmhpZGUuYXBwbHkodGhpcy5tb2RhbCwgYXJndW1lbnRzKTsKCgkJCXJldHVybiB0cnVlOwoJCX0sCgoJCS8qKgoJCSAqIOiOt+WPluWvueivneahhiBET00g5YWD57SgCgkJICogQHJldHVybnMge0hUTUxFbGVtZW50fQoJCSAqLwoJCWdldEVsZW1lbnQ6IGZ1bmN0aW9uICgpIHsKCQkJcmV0dXJuIHRoaXMuZWxlbWVudFswXTsKCQl9LAoKCQkvKioKCQkgKiDnu5Hlrprkuovku7YKCQkgKiBAcmV0dXJucyB7JGRpYWxvZ30KCQkgKi8KCQliaW5kOiBmdW5jdGlvbiAoKSB7CgkJCXRoaXMuZWxlbWVudC5vbi5hcHBseSh0aGlzLmVsZW1lbnQsIGFyZ3VtZW50cyk7CgkJCXJldHVybiB0aGlzOwoJCX0sCgoJCS8qKgoJCSAqIOinpuWPkeS6i+S7tgoJCSAqLwoJCXRyaWdnZXJIYW5kbGVyOiBmdW5jdGlvbiAoKSB7CgkJCXRoaXMuZWxlbWVudC50cmlnZ2VySGFuZGxlci5hcHBseSh0aGlzLmVsZW1lbnQsIGFyZ3VtZW50cyk7CgkJfSwKCgkJLyoqCgkJICog6I635Y+W5oyJ6ZKuCgkJICogQHJldHVybnMge0FycmF5fHVuZGVmaW5lZH0KCQkgKi8KCQlnZXRCdXR0b25zOiBmdW5jdGlvbiAoKSB7CgkJCXJldHVybiB0aGlzLmJ1dHRvbnM7CgkJfSwKCgkJLyoqCgkJICog5YaF6YOo5Ye95pWwOiDorr7lrprml6DmoIfpopjlr7nor53moYYKCQkgKiBAcHJpdmF0ZQoJCSAqLwoJCV9zZXR1cE5vVGl0bGU6IGZ1bmN0aW9uICgpIHsKCQkJaWYgKHRoaXMuY2ZnLm5vVGl0bGUpIHsKCQkJCSQoIi5kaWFsb2dKdGl0bGUiKS5jc3MoewoJCQkJCSJib3JkZXItYm90dG9tIjogMCwKCQkJCQkiYmFja2dyb3VuZC1jb2xvciI6ICIjZmZmIgoJCQkJfSk7CgkJCX0KCQl9LAoKCQkvKioKCQkgKiDlhoXpg6jlh73mlbA6IOiuvuWumuWvueivneahhuagh+mimOagjwoJCSAqIEBwcml2YXRlCgkJICovCgkJX3NldHVwVGl0bGVCYXI6IGZ1bmN0aW9uICgpIHsKCQkJaWYgKHRoaXMuY2ZnLnNob3dUaXRsZSkgewoJCQkJdmFyIHRoYXQgPSB0aGlzOwoJCQkJdmFyIHRpdGxlQmFyID0gdGhhdC50aXRsZUJhciA9CgkJCQkJJCgnPGRpdj4nKS5hcHBlbmQoCgkJCQkJCSQoJzxzcGFuPicpLmFkZENsYXNzKCdkaWFsb2dKdHh0JykKCQkJCQkpLmFkZENsYXNzKCdkaWFsb2dKdGl0bGUnKQoJCQkJCS5hcHBlbmRUbyh0aGlzLmVsZW1lbnRXcmFwcGVyKTsKCgkJCQlpZiAodGhpcy5jZmcuY2xvc2VhYmxlKSB7CgkJCQkJJCgnPGE+JykuYWRkQ2xhc3MoJ2RpYWxvZ0pjbG9zZScpLmF0dHIoewoJCQkJCQl0aXRsZTogdGhpcy5jZmcuY2xvc2VUaXBzIHx8ICLlhbPpl63mnKznqpflj6MiLAoJCQkJCQlocmVmOiAgJyMnCgkJCQkJfSkudGV4dCgnICcpLmFwcGVuZFRvKHRpdGxlQmFyKQoJCQkJCS5vbiAoJ21vdXNlZG93bicsIGZ1bmN0aW9uIChlKSB7CgkJCQkJCWUuc3RvcFByb3BhZ2F0aW9uKCk7CgkJCQkJfSkuY2xpY2soZnVuY3Rpb24gKCkgewoJCQkJCQlpZiAodGhhdC5jZmcuaGlkZU9uY2xvc2UpIHsKCQkJCQkJCXRoYXQuaGlkZSgpCgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl0aGF0LmNsb3NlKCk7CgkJCQkJCX0KCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCX0pOwoKCQkJCQlpZiAodGhpcy5jZmcuZHJhZ2dhYmxlKSB7CgkJCQkJCXRpdGxlQmFyLmNzcyAoewoJCQkJCQkJY3Vyc29yOiAnbW92ZScKCQkJCQkJfSk7CgoJCQkJCQl2YXIgX3JtRHJhZyA9ICQodGhhdC5lbGVtZW50KS5kcmFnZ2FibGUoewoJCQkJCQkJaGFuZGxlOiB0aXRsZUJhciwKCQkJCQkJCXN0YXJ0OiBmdW5jdGlvbiAoKSB7CgkJCQkJCQkJdGhhdC5fc2V0dXBIYWNrRGl2KDEpCgkJCQkJCQl9LAoJCQkJCQkJc3RvcDogZnVuY3Rpb24gKCkgewoJCQkJCQkJCXRoYXQuZHJhZ2dlZCA9IHRydWU7CgkJCQkJCQkJdGhhdC5fc2V0dXBIYWNrRGl2KDApOwoJCQkJCQkJfQoJCQkJCQl9KTsKCQkJCQkJJCh0aGF0LmVsZW1lbnQpLm9uKCJvbmNsb3NlIiwgX3JtRHJhZyk7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfSwKCgkJX3NldHVwSGFja0RpdjogZnVuY3Rpb24gKGJTaG93SGFja0RpdikgewoJCQl2YXIgXyRkaWFsb2cgPSB0aGlzOwoJCQlpZiAoYlNob3dIYWNrRGl2KSB7CgkJCQlpZiAoJCgiSUZSQU1FIiwgXyRkaWFsb2cuZWxlbWVudCkubGVuZ3RoKSB7CgkJCQkJdmFyICRjb250ZW50ID0gJCgiLmRpYWxvZ0pjb250ZW50IiwgXyRkaWFsb2cuZWxlbWVudCk7CgkJCQkJaWYgKCFfJGRpYWxvZy5oYWNrX2RpdikgewoJCQkJCQlfJGRpYWxvZy5oYWNrX2RpdiA9ICQoIjxkaXY+IikuYXBwZW5kVG8oJGNvbnRlbnQpLmNzcyh7CgkJCQkJCQlwb3NpdGlvbjogImFic29sdXRlIiwKCQkJCQkJCWxlZnQ6IDAsCgkJCQkJCQl0b3A6IDAsCgkJCQkJCQljdXJzb3I6ICJtb3ZlIgoJCQkJCQl9KTsKCQkJCQl9CgkJCQkJXyRkaWFsb2cuaGFja19kaXYuc2hvdygpLmNzcyh7CgkJCQkJCXdpZHRoOiAgXyRkaWFsb2cuZWxlbWVudC5vdXRlcldpZHRoKCksCgkJCQkJCWhlaWdodDogXyRkaWFsb2cuZWxlbWVudC5vdXRlckhlaWdodCgpCgkJCQkJfSkKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCWlmIChfJGRpYWxvZy5oYWNrX2RpdikKCQkJCQlfJGRpYWxvZy5oYWNrX2Rpdi5oaWRlICgpOwoJCQl9CgkJfSwKCgkJX3NldHVwRXNjS2V5OiBmdW5jdGlvbiAoKSB7CgkJCXZhciAkdGhhdCA9IHRoaXM7CgoJCQl2YXIgX2VzY0tleUNiID0gZnVuY3Rpb24gKG4pIHsKCQkJCS8vIEVTQyAtIDB4MWIKCQkJCWlmICgweDFiID09IG4ud2hpY2gpIHsKCQkJCQlpZiAoJHRoYXQuc2hvd1RpdGxlKSB7CgkJCQkJCSQoIi5kaWFsb2dKY2xvc2UiLCAkdGhhdC50aXRsZUJhcikudHJpZ2dlckhhbmRsZXIoImNsaWNrIikKCQkJCQl9IGVsc2UgewoJCQkJCQkkdGhhdC5jbG9zZSgpOwoJCQkJCX0KCQkJCX0KCQkJfTsKCgkJCSQoZG9jdW1lbnQpLm9uKCJrZXlkb3duIiwgX2VzY0tleUNiKTsKCQkJJCgkdGhhdC5lbGVtZW50KS5vbigib25jbG9zZSIsIGZ1bmN0aW9uICgpIHsKCQkJCSQoZG9jdW1lbnQpLm9mZigia2V5ZG93biIsIF9lc2NLZXlDYikKCQkJfSk7CgkJfSwKCgkJX3NldHVwQ29udGVudDogZnVuY3Rpb24gKCkgewoJCQl0aGlzLmVsZW1lbnRXcmFwcGVyLmFwcGVuZCgKCQkJCSQoJzxkaXY+JykuYWRkQ2xhc3MoJ2RpYWxvZ0pjb250ZW50JykuYXBwZW5kKAoJCQkJCSQoJzxkaXY+JykuYWRkQ2xhc3MoJ2RpYWxvZ0pib2R5JykpKTsKCQl9LAoKCQlfc2V0U2Nyb2xsOiBmdW5jdGlvbiAoYlNldFNjcm9sbCkgewoJCQlpZiAodGhpcy5jZmcubW9kYWwgJiYgIXRoaXMuY2ZnLnNjcm9sbGFibGUpIHsKCQkJCXZhciBodG1sUm9vdCA9ICQoImh0bWwiKTsKCQkJCWlmIChodG1sUm9vdC5sZW5ndGgpIHsKCQkJCQl2YXIgaSA9IGh0bWxSb290WzBdLnNjcm9sbFRvcDsKCQkJCQlpZiAoYlNldFNjcm9sbCkgewoJCQkJCQlodG1sUm9vdC5jc3MoewoJCQkJCQkJb3ZlcmZsb3c6IHRoaXMuZWxlbWVudC5kYXRhKCJodG1sT3ZlcmZsb3ciKSB8fCAiIiwKCQkJCQkJCXBhZGRpbmdSaWdodDogMAoJCQkJCQl9KTsKCQkJCQl9IGVsc2UgewoJCQkJCQlpZiAoaHRtbFJvb3RbMF0uc3R5bGUub3ZlckZsb3cpIHsKCQkJCQkJCXRoaXMuZWxlbWVudC5kYXRhKCJodG1sT3ZlcmZsb3ciLCBodG1sUm9vdFswXS5zdHlsZS5vdmVyRmxvdyk7CgkJCQkJCX0KCgkJCQkJCWh0bWxSb290LmNzcyh7CgkJCQkJCQlvdmVyZmxvdzogImhpZGRlbiIsCgkJCQkJCQlwYWRkaW5nUmlnaHQ6IDE3CgkJCQkJCX0pCgkJCQkJfQoKCQkJCQlodG1sUm9vdFswXS5zY3JvbGxUb3AgPSBpCgkJCQl9CgkJCX0KCQl9Cgl9OwoKCSQuZWFjaChsc3RFdmVudHMsIGZ1bmN0aW9uIChlLCB0KSB7CgkJJGRpYWxvZy5wcm90b3R5cGVbdF0gPSBmdW5jdGlvbiAoZSkgewoJCQl0aGlzLm9uKHQsIGUpCgkJfQoJfSk7CgkkZGlhbG9nLklOU1QgPSBbXTsKCSQuZGlhbG9nID0gJGRpYWxvZzsKfSkoalF1ZXJ5KTs="},{"meta":{"name":"Interval_Looper.js","url":"https://greasyfork.org/scripts/3588/code/Interval_Looper.js","ts":1606985023622,"mimetype":"text/javascript"},"source":"Ly8gSW50ZXJ2YWwgTG9vcGVyIGJ5IEppeHVuOgovLyBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9KaXh1bk1vZS9jNzdiYjM5MzZhNjg5OTdmY2UyMgoKdmFyIEludGVydmFsTG9vcCA9IGZ1bmN0aW9uIChhcnJEYXRhLCBsb29wZXIsIGRlbGF5KSB7CglpZiAoISh0aGlzIGluc3RhbmNlb2YgSW50ZXJ2YWxMb29wKSkKCQlyZXR1cm4gbmV3IEludGVydmFsTG9vcCAoYXJyRGF0YSwgbG9vcGVyLCBkZWxheSk7CiAKCS8qKgoJICogU3RhdHVzCgkgKiBAdHlwZSBOdW1iZXIKCSAqIDA6IOW+queOr+acquW8gOWniwoJICogMTog5q2j5Zyo5b6q546vCgkgKiAyOiDlvqrnjq/nu5PmnZ8KCSAqLwoJdGhpcy5zdGF0dXMgPSAwOwoJdGhpcy5uZXh0ID0gdGhpcy5fbmV4dC5iaW5kICh0aGlzKTsKCXRoaXMuaW5kZXggPSAwOwogCgl0aGlzLnNldERlbGF5IChkZWxheSB8fCA1MCk7Cgl0aGlzLmRhdGEgPSAoYXJyRGF0YSBpbnN0YW5jZW9mIEFycmF5KSA/IGFyckRhdGEgOiBbXTsKCXRoaXMuc2V0TG9vcGVyIChsb29wZXIpOwp9OwogCkludGVydmFsTG9vcC5wcm90b3R5cGUgPSB7CglfZ2V0RGVsYXk6IGZ1bmN0aW9uICgpIHsKCQlpZiAoIXRoaXMuZGVsYXkpCgkJCXJldHVybiA1MDsKIAoJCWlmICh0aGlzLmRlbGF5LmFwcGx5KQoJCQlyZXR1cm4gdGhpcy5kZWxheSgpOwogCgkJcmV0dXJuIHRoaXMuZGVsYXk7Cgl9LAoJX25leHQ6IGZ1bmN0aW9uICgpIHsKCQkvLyDnirbmgIHmlLnkuLog6L+b6KGM5LitCgkJdGhpcy5zdGF0dXMgPSAxOwoJCWlmICh0aGlzLmluZGV4IDwgdGhpcy5kYXRhLmxlbmd0aCkgewoJCQlzZXRUaW1lb3V0ICh0aGlzLmxvb3Blci5iaW5kKHRoaXMsIHRoaXMuZGF0YVt0aGlzLmluZGV4XSksIHRoaXMuZGVsYXkpOwoJCQl0aGlzLmluZGV4ICsrOwoJCQlpZiAodGhpcy5vblByb2dyZXNzICYmIHRoaXMub25Qcm9ncmVzcy5hcHBseSkgewoJCQkJdHJ5IHsKCQkJCQl0aGlzLm9uUHJvZ3Jlc3MgKHRoaXMuaW5kZXgsIHRoaXMuZGF0YS5sZW5ndGgpOwoJCQkJfSBjYXRjaCAoZSkgewoJCQkJCWNvbnNvbGUuZXJyb3IgKCdFcnJvciB3aGlsZSBjYWxsYmFjayB0byBgb25Qcm9ncmVzc2AnKTsKCQkJCQljb25zb2xlLmVycm9yIChlKTsKCQkJCX0KCQkJfQoJCX0gZWxzZSB7CgkJCXRoaXMuc3RhdHVzID0gMjsKCQkJaWYgKHRoaXMub25Db21wbGV0ZSAmJiB0aGlzLm9uQ29tcGxldGUuYXBwbHkpIHsKCQkJCXRyeSB7CgkJCQkJdGhpcy5vbkNvbXBsZXRlICh0aGlzLmRhdGEubGVuZ3RoKTsKCQkJCX0gY2F0Y2ggKGUpIHsKCQkJCQljb25zb2xlLmVycm9yICgnRXJyb3Igd2hpbGUgY2FsbGJhY2sgdG8gYG9uQ29tcGxldGVgJyk7CgkJCQkJY29uc29sZS5lcnJvciAoZSk7CgkJCQl9CgkJCX0KCQl9Cgl9LAoJY2xlYW51cDogZnVuY3Rpb24gKCkgewoJCWlmICh0aGlzLnN0YXR1cyA9PSAyKSB7CgkJCS8vIOW3sue7j+eUqOi/h+eahOaVsOaNruWwsea4heaOieOAggoJCQl0aGlzLmRhdGEuc3BsaWNlKDAsIHRoaXMuaW5kZXgpOwoJCQl0aGlzLmluZGV4ID0gMDsKCQkJdGhpcy5zdGF0dXMgPSAwOwoJCX0KIAoJCXJldHVybiB0aGlzOwoJfSwKCWFkZDogZnVuY3Rpb24gKCkgewoJCWlmIChhcmd1bWVudHMubGVuZ3RoID4gMCkgewoJCQkvLyDlsIbmiYDmnInlj4LmlbDkvZzkuLrmlbDmja7mjqjlhaUgdGhpcy5kYXRhCgkJCWZvciAodmFyIGkgPSAwOyBpPGFyZ3VtZW50cy5sZW5ndGg7IGkrKykKCQkJCXRoaXMuZGF0YS5wdXNoIChhcmd1bWVudHNbaV0pOwogCgkJCS8vIOaVtOS4que7hOW3sue7j+WujOe7k++8jOa4heeQhuWQjuiHquWKqOe7p+e7rQoJCQlpZiAodGhpcy5zdGF0dXMgPT0gMikKCQkJCXRoaXMuY2xlYW51cCgpLm5leHQoKTsKCQl9CiAKCQkvLyDov57plIEKCQlyZXR1cm4gdGhpczsKCX0sCglzZXREZWxheTogZnVuY3Rpb24gKG5ld0RlbGF5KSB7CgkJaWYgKG5ld0RlbGF5KSB0aGlzLmRlbGF5ID0gcGFyc2VJbnQgKG5ld0RlbGF5KTsKCQlyZXR1cm4gdGhpczsKCX0sCglzZXRMb29wZXI6IGZ1bmN0aW9uIChmb29DYWxsYmFjaykgewoJCWlmIChmb29DYWxsYmFjayAmJiBmb29DYWxsYmFjay5hcHBseSkKCQkJdGhpcy5sb29wZXIgPSBmb29DYWxsYmFjay5iaW5kKHRoaXMsIHRoaXMubmV4dCk7CiAKCQlyZXR1cm4gdGhpczsKCX0sCglsb29wOiBmdW5jdGlvbiAoKSB7CgkJaWYgKHRoaXMuc3RhdHVzID09IDApCgkJCS8vIOWwmuacquWQr+WKqCwg5LuO5aS05byA5aeLCgkJCXRoaXMubmV4dCAoKTsKIAoJCXJldHVybiB0aGlzOwoJfQp9Ow=="},{"meta":{"name":"gm2_port_v103.js","url":"https://greasyfork.org/scripts/2599/code/gm2_port_v103.js","ts":1606985023617,"mimetype":"text/javascript"},"source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIEdNIDIgcG9ydCAtIEZ1bmN0aW9uIE92ZXJyaWRlIEhlbHBlcgovLyBARGVzY3JpcHRpb24gTm90IHlldC4KLy8gQG5hbWVzcGFjZSAgIG9yZy5qaXh1bi5nbTIucG9ydAovLyBAdmVyc2lvbiAgICAgMS4wLjQKCi8vIHVuc2FmZVdpbmRvdyByZXF1aXJlZCB0byB1c2UgYGV4cG9ydEZ1bmN0aW9uYC4KLy8gQGdyYW50ICAgICAgIHVuc2FmZVdpbmRvdwoKLy8gQHJ1bi1hdCAgICAgIGRvY3VtZW50LXN0YXJ0Ci8vID09L1VzZXJTY3JpcHQ9PQoKLy8gQ2hlY2sgaWYgaXMgR00gMi54CmlmICh0eXBlb2YgZXhwb3J0RnVuY3Rpb24gPT0gJ3VuZGVmaW5lZCcpIHsKCS8vIEZvciBHTSAxLnggYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgc2hvdWxkIHdvcmsuCgl2YXIgZXhwb3J0RnVuY3Rpb24gPSAoZnVuY3Rpb24gKGZvbywgc2NvcGUsIGRlZkFzKSB7CgkJaWYgKGRlZkFzICYmIGRlZkFzLmRlZmluZUFzKSB7CgkJCXNjb3BlW2RlZkFzLmRlZmluZUFzXSA9IGZvbzsKCQl9CgkJcmV0dXJuIGZvbzsKCX0pLmJpbmQodW5zYWZlV2luZG93KTsKCgkvLyBXZWxsLi4gSXQncyBub3QgZ29pbmcgdG8gZG8gYW55dGhpbmcuCgl2YXIgY2xvbmVJbnRvID0gKGZ1bmN0aW9uIChvYmosIHNjb3BlLCBvcHQpIHsKCQlyZXR1cm4gb2JqOwoJfSkuYmluZCh1bnNhZmVXaW5kb3cpOwp9CgovKioKICogdW5zYWZlT2JqZWN0OgogKiBCYXNpY2FsbHkgY2xvbmVJbnRvIGJ1dCBjb3VsZCB3aXRob3V0IHNjb3BlIChEZWZhdWx0OiB1bnNhZmVXaW5kb3cpCiAqIAogKiBAcGFyYW0gIHtPYmplY3R9IG9iaiAgIE9iamVjdCB0byBwYXNzIHRocm91Z2gKICogQHBhcmFtICB7T2JqZWN0fSBzY29wZSBTY29wZSB3aGVyZSBvYmplY3QgaXMgZ29pbmcgdG8gYmUgYXBwbGllZC4KICogQHBhcmFtICB7T2JqZWN0fSBvcHQgICBPcHRpb25zCiAqIEByZXR1cm4ge09iamVjdH0gICAgICAgQSByZWZlcmVuY2UgdG8gdGhlIGNsb25lZCBvYmplY3QuCiAqLwp2YXIgdW5zYWZlT2JqZWN0ID0gZnVuY3Rpb24gKG9iaiwgc2NvcGUsIG9wdCkgewoJcmV0dXJuIGNsb25lSW50byAob2JqLCBzY29wZSB8fCB1bnNhZmVXaW5kb3csIG9wdCB8fCB7fSk7Cn07CgovKioKICogdW5zYWZlRGVmaW5lRnVuY3Rpb24KICogQHBhcmFtICB7U3RyaW5nfSBmb29OYW1lIFRhcmdldCBuYW1lCiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmb28gICBUaGUgZnVuY3Rpb24gdG8gb3ZlcnJpZGUKICogQHBhcmFtICB7T2JqZWN0fSBzY29wZSAgIHVuc2FmZVdpbmRvdwogKiBAcmV0dXJuIHtGdW5jdGlvbn0gICAgICAgVGhlIHBsYWNlaG9sZGVyIGZ1bmN0aW9uIHdoaWNoIGhhcyBiZWVuIGNyZWF0ZWQgaW4gdGhlIHRhcmdldCBjb250ZXh0LgogKi8KdmFyIHVuc2FmZURlZmluZUZ1bmN0aW9uID0gZnVuY3Rpb24gKGZvb05hbWUsIGZvbywgc2NvcGUpIHsKCS8vIEB0aHJvdyBUeXBlRXJyb3I6IGNhbid0IHJlZGVmaW5lIG5vbi1jb25maWd1cmFibGUgcHJvcGVydHkKCS8vIEB0aHJvdyBFcnJvcjogRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uCglyZXR1cm4gZXhwb3J0RnVuY3Rpb24gKGZvbywgc2NvcGUgfHwgdW5zYWZlV2luZG93LCB7ZGVmaW5lQXM6IGZvb05hbWV9KTsKfTsKCi8qKgogKiB1bnNhZmVPdmVyd3JpdGVGdW5jdGlvbgogKiBAcGFyYW0gIHtPYmplY3R9IGZvb01hcHBpbmcge25hbWU6IGZvb30KICogQHBhcmFtICB7T2JqZWN0fSBzY29wZSAgICAgIHVuc2FmZVdpbmRvdwogKiBAcGFyYW0gIHtTdHJpbmd9IHNjb3BlTmFtZSAgT3B0aW9uYWwsIHJlcXVpcmVkIGlmIHRhcmdldCBpcyBub3QgYHdpbmRvd2AuCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmcuIFRoZSB0YXJnZXQgaXMgd2luZG93LmFwaS54eHgsICcuYXBpJyB3b3VsZAogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmUgdGhlIHNjb3BlTmFtZS4KICogQHJldHVybiB7SFRNTCBFbGVtZW50fSAgICAgIFNjcmlwdCBUYWcKICovCnZhciB1bnNhZmVPdmVyd3JpdGVGdW5jdGlvbiA9IGZ1bmN0aW9uIChmb29NYXBwaW5nLCBzY29wZSwgc2NvcGVOYW1lKSB7Cgl2YXIgYXJnTWFwcGluZyA9IHt9LCB0bXBOYW1lOwoKCS8vIE1hcHBpbmcgbmV3IHJhbmRvbSBuYW1lcy4KCWZvciAodmFyIHggaW4gZm9vTWFwcGluZykgewoJCWlmIChmb29NYXBwaW5nLmhhc093blByb3BlcnR5KHgpKSB7CgkJCXRyeSB7CgkJCQl0bXBOYW1lID0gJ3Vfd19mXycgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCkuc2xpY2UoMikgKyArbmV3IERhdGUoKTsKCQkJCQoJCQkJLy8gRXhwb3J0IGZ1bmN0aW9uCgkJCQkvLyB1bnNhZmVEZWZpbmVGdW5jdGlvbiB3aWxsIHRha2UgY2FyZSBvZiBudWxsIHZhbHVlcy4KCQkJCXVuc2FmZURlZmluZUZ1bmN0aW9uICh0bXBOYW1lLCBmb29NYXBwaW5nW3hdLCBzY29wZSk7CgkJCQlhcmdNYXBwaW5nW3hdID0gdG1wTmFtZTsKCQkJfSBjYXRjaCAoZSkgewoJCQkJY29uc29sZS5lcnJvciAoJ0Vycm9yIGF0IGB1bnNhZmVPdmVyd3JpdGVgOicsIGUpOwoJCQl9CgkJfQoJfQoKCXZhciB0bXBTY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50ICgnc2NyaXB0Jyk7Cgl0bXBTY3JpcHQudGV4dENvbnRlbnQgPSAnOygnKyAoZnVuY3Rpb24gKGosIHgpIHsKCQlmb3IgKHggaW4gaikKCQkJaWYgKGouaGFzT3duUHJvcGVydHkoeCkpCgkJCQkvLyBNYXAgZXZlcnl0aGluZy4KCQkJCS8vIElmIE9iamVjdCB3aXRoIGN1c3RvbSBmdW5jdGlvbiAvIEZ1bmN0aW9uIAoJCQkJLy8gcGFzc2VkIGluIGl0IHdpbGwgdGhyb3cgQ2xvbmVOb25SZWZsZWN0b3JzV3JpdGUuCgkJCQkvLyBVc2UgdW5zYWZlT3ZlcndyaXRlRnVuY3Rpb25TYWZlUHJveHkgaWYgeW91IG5lZWQgdG8gYnlwYXNzIHRoYXQuCgkJCQkvLyBIb3dldmVyLCBpdCdzIGdvaW5nIHRvIGJlIHNsb3dlci4KCQkJCXdpbmRvdy8qKi9beF0gPSB3aW5kb3cvKiovW2pbeF1dOwoJCQoJCS8vIFRPRE86IE1heWJlIHJlbW92ZSB0aGlzIHNjcmlwdCB0YWcgYWZ0ZXIgZmluaXNoPwoJfSkudG9TdHJpbmcoKS5yZXBsYWNlKC9cL1wqXCpcLy9nLCBzY29wZU5hbWUgPyBzY29wZU5hbWUgOiAnJykgKycpKCcgKyBKU09OLnN0cmluZ2lmeShhcmdNYXBwaW5nKSArICcpOyc7Cglkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkICh0bXBTY3JpcHQpOwoKCXJldHVybiB0bXBTY3JpcHQ7Cn07CgovKioKICogRXJyb3JVbnNhZmU6CiAqIEFuIGVycm9yIGNsYXNzIGZvciB1bnNhZmVPdmVyd3JpdGVGdW5jdGlvblNhZmVQcm94eS4KICogCiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lICAgIEVycm9yIE5hbWUKICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgRXJyb3IgTWVzc2FnZQogKi8KdmFyIEVycm9yVW5zYWZlID0gZnVuY3Rpb24gKG5hbWUsIG1lc3NhZ2UpIHsKCXJldHVybiBjbG9uZUludG8gKHsKCQluYW1lOiBuYW1lIHx8ICdFcnJvclVuc2FmZScsCgkJbWVzc2FnZTogbWVzc2FnZSB8fCAnVW5rbm93biBlcnJvci4nCgl9LCBzY29wZSB8fCB1bnNhZmVXaW5kb3cpOwp9OwoKLyoqCiAqIEVycm9yVW5zYWZlU3VjY2VzczoKICogQW4gRXJyb3IgQ2xhc3MgZm9yIHVuc2FmZU92ZXJ3cml0ZUZ1bmN0aW9uU2FmZVByb3h5LgogKiBJbmZvcm0gcHJveHkgdG8gZXhlY3V0ZSBvcmlnaW9uYWwgZnVuY3Rpb24gd2l0aCBpdHMgZnVsbCBhcmd1bWVudHMuCiAqIAogKiBAcGFyYW0ge1t0eXBlXX0gbWVzc2FnZSBbZGVzY3JpcHRpb25dCiAqIEBwYXJhbSB7W3R5cGVdfSBzY29wZSAgIFtkZXNjcmlwdGlvbl0KICovCnZhciBFcnJvclVuc2FmZVN1Y2Nlc3MgPSBmdW5jdGlvbiAobWVzc2FnZSwgc2NvcGUpIHsKCXJldHVybiBjbG9uZUludG8gKHsKCQluYW1lOiAnRXJyb3JVbnNhZmVTdWNjZXNzOiBQcm94eUZpbmlzaCcsCgkJc3VjY2VzczogdHJ1ZSwKCQltZXNzYWdlOiBtZXNzYWdlIHx8ICcnCgl9LCBzY29wZSB8fCB1bnNhZmVXaW5kb3cpOwp9OwoKLyoqCiAqIHVuc2FmZU92ZXJ3cml0ZUZ1bmN0aW9uU2FmZVByb3h5CiAqIFNpbWlsYXIgdG8gdW5zYWZlT3ZlcndyaXRlRnVuY3Rpb24sIGJ1dCBpdHMgYSBwcm94eSBpbnN0ZWFkLgogKiBJdCB3aWxsIHN0cmlwIGFsbCBmdW5jdGlvbnMgYmVmb3JlIHBhc3MgaW4gdG8gc2FuZGJveGVkIGZ1bmN0aW9uLgogKiBTbywgaXQgY2FuIHByZXZlbnQgQ2xvbmVOb25SZWZsZWN0b3JzV3JpdGUgZXJyb3IuCiAqIAogKiBAcGFyYW0gIHtbdHlwZV19IGZvb01hcHBpbmcgW2Rlc2NyaXB0aW9uXQogKiBAcGFyYW0gIHtbdHlwZV19IHNjb3BlICAgICAgW2Rlc2NyaXB0aW9uXQogKiBAcGFyYW0gIHtbdHlwZV19IHNjb3BlTmFtZSAgW2Rlc2NyaXB0aW9uXQogKiBAcmV0dXJuIHtbdHlwZV19ICAgICAgICAgICAgW2Rlc2NyaXB0aW9uXQogKi8KdmFyIHVuc2FmZU92ZXJ3cml0ZUZ1bmN0aW9uU2FmZVByb3h5ID0gZnVuY3Rpb24gKGZvb01hcHBpbmcsIHNjb3BlLCBzY29wZU5hbWUpIHsKCXZhciBhcmdNYXBwaW5nID0ge30sIHRtcE5hbWU7CgoJLy8gTWFwcGluZyBuZXcgcmFuZG9tIG5hbWVzLgoJZm9yICh2YXIgeCBpbiBmb29NYXBwaW5nKSB7CgkJaWYgKGZvb01hcHBpbmcuaGFzT3duUHJvcGVydHkoeCkpIHsKCQkJdHJ5IHsKCQkJCXRtcE5hbWUgPSAndV93X2ZfJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoKS5zbGljZSgyKSArICtuZXcgRGF0ZSgpOwoJCQkJCgkJCQkvLyBFeHBvcnQgZnVuY3Rpb24KCQkJCS8vIHVuc2FmZURlZmluZUZ1bmN0aW9uIHdpbGwgdGFrZSBjYXJlIG9mIG51bGwgdmFsdWVzLgoJCQkJdW5zYWZlRGVmaW5lRnVuY3Rpb24gKHRtcE5hbWUsIGZvb01hcHBpbmdbeF0sIHNjb3BlKTsKCQkJCWFyZ01hcHBpbmdbeF0gPSB0bXBOYW1lOwoJCQl9IGNhdGNoIChlKSB7CgkJCQljb25zb2xlLmVycm9yICgnRXJyb3IgYXQgYHVuc2FmZU92ZXJ3cml0ZWA6JywgZSk7CgkJCQlhbGVydCAoZSk7CgkJCX0KCQl9Cgl9CgoJdmFyIHRtcFNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgKCdzY3JpcHQnKTsKCXRtcFNjcmlwdC50ZXh0Q29udGVudCA9ICc7KCcrIChmdW5jdGlvbiAoaiwgeCkgewoJCWZvciAoeCBpbiBqKQoJCQlpZiAoai5oYXNPd25Qcm9wZXJ0eSh4KSkgewoJCQkJKGZ1bmN0aW9uICh4LCBiYWssIGZvbykgewoJCQkJCS8vIEFzc2lnbiB2YXJpYWJsZSB0byBvdXIgcHJveHkgZnVuY3Rpb24uCgkJCQkJd2luZG93LyoqL1t4XSA9IGZ1bmN0aW9uICgpIHsKCQkJCQkJLy8gY29uc29sZS5pbmZvIChhcmd1bWVudHMpOwoJCQkJCQlmb3IgKHZhciBpID0gMCwgeSwgYXJncyA9IFtdOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CgkJCQkJCQkvLyBBcnJheSAtIFN1cmUgd2UgY2FuIGhhbmRsZSB0aGlzIHJpZ2h0PwoJCQkJCQkJaWYgKGFyZ3VtZW50c1tpXSBpbnN0YW5jZW9mIEFycmF5KSB7CgkJCQkJCQkJYXJncy5wdXNoIChhcmd1bWVudHNbaV0uc2xpY2UoKSk7CgkJCQkJCQl9IGVsc2UgaWYgKGFyZ3VtZW50c1tpXSBpbnN0YW5jZW9mIE9iamVjdCkgewoJCQkJCQkJCS8vIFN0cmlwIG9mZiBhbGwgcHJvdG90eXBlIGZ1bmN0aW9ucywgaWYgcG9zc2libGUuCgkJCQkJCQkJCgkJCQkJCQkJLy8gVE9ETzogbWF5YmUgdHJ5LWNhdGNoIHRoZSBmb2xsb3dpbmcgbGluZT8KCQkJCQkJCQlhcmdzLnB1c2ggKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkgKGFyZ3VtZW50c1tpXSkpKTsKCQkJCQkJCX0gZWxzZSBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgYXJndW1lbnRzW2ldKSB7CgkJCQkJCQkJLy8gRnVuY3Rpb24gY2FuJ3QgYmUgc2FuZGJveGllZCA6PAoJCQkJCQkJCWFyZ3MucHVzaCAobnVsbCk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCS8vIGlkay4uLiBzaG91bGQgYmUgc2FmZSB0byBwYXNzIHRocm91Z2g/CgkJCQkJCQkJYXJncy5wdXNoIChhcmd1bWVudHNbaV0pOwoJCQkJCQkJfQoJCQkJCQl9CgoJCQkJCQl0cnkgewoJCQkJCQkJLy8gVHJ5IHRvIGNhbGwgb3VyIGZ1bmN0aW9uIQoJCQkJCQkJcmV0dXJuIGZvby5hcHBseSh0aGlzLCBhcmdzKTsKCQkJCQkJfSBjYXRjaCAoZXJyKSB7CgkJCQkJCQkvLyBXZSB0aHJvdyB0aGlzIGVycm9yIG9uIHB1cnBvc2UsCgkJCQkJCQkvLyBpZiB3ZSBuZWVkIHRvIGRvIHRoZSBjb21wbGV0ZSBjYWxsYmFjay4KCQkJCQkJCQoJCQkJCQkJLy8gSWYgdGhlIGVycm9yIGRvbidlIGhhdmUgc3VjY2VzcyBmbGFnLCB3ZSdsbCAKCQkJCQkJCS8vIHRocm93IHRoZSBlcnJvciB0byBjb25zb2xlLgoKCQkJCQkJCWlmICghZXJyLnN1Y2Nlc3MpIGNvbnNvbGUuZXJyb3IgKGVycik7CgkJCQkJCQlyZXR1cm4gYmFrLmFwcGx5ICh0aGlzLCBhcmd1bWVudHMpOwoJCQkJCQl9CgkJCQkJfTsKCQkJCX0pICh4LCB3aW5kb3cvKiovW3hdLCB3aW5kb3cvKiovW2pbeF1dKTsKCQkJfQoKCQkvLyBUT0RPOiBNYXliZSByZW1vdmUgdGhpcyBzY3JpcHQgdGFnIGFmdGVyIGZpbmlzaD8KCX0pLnRvU3RyaW5nKCkucmVwbGFjZSgvXC9cKlwqXC8vZywgc2NvcGVOYW1lID8gc2NvcGVOYW1lIDogJycpICsnKSgnICsgSlNPTi5zdHJpbmdpZnkoYXJnTWFwcGluZykgKyAnKTsnOwoJZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCAodG1wU2NyaXB0KTsKCglyZXR1cm4gdG1wU2NyaXB0Owp9OwoKLyoqCiAqIEV4ZWN1dGUgZnVuY3Rpb24gYW5vbnltb3VzbHkKICogQHBhcmFtICB7RnVuY3Rpb259IGZvbwogKiBAcGFyYW0gIHtBbnl9IEFueSBhcmd1bWVudHMgdG8gYmUgcGFzc2VkIGluLgogKiBAcmV0dXJuIHtTY3JpcHROb2RlfQogKi8KdmFyIHVuc2FmZUV4ZWMgPSBmdW5jdGlvbiAoZm9vKSB7Cgl2YXIgdG1wU2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCAoJ3NjcmlwdCcpOwoKCS8vIE5vdyBzdXBwb3J0cyBhcmd1bWVudHMhCgl0bXBTY3JpcHQudGV4dENvbnRlbnQgPQoJCSc7KCcgKyBmb28gKyAnKS5hcHBseSAobnVsbCwgJyArCgkJCUpTT04uc3RyaW5naWZ5KFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSkgKyAnKTsnOwoKCWRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQgKHRtcFNjcmlwdCk7CglyZXR1cm4gdG1wU2NyaXB0Owp9Ow=="}]},{"name":"searchEngineJump-NextStage","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1604018245715,"data":{}},"enabled":false,"position":4,"file_url":"https://greasyfork.org/scripts/16193-searchenginejump-nextstage/code/searchEngineJump-NextStage.user.js","uuid":"7a6776be-46bd-4b74-8eb8-1a2defb44857","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUJCQlzZWFyY2hFbmdpbmVKdW1wLU5leHRTdGFnZQovLyBAYXV0aG9yCQkJdGVkNDIzCi8vIEBjb250cmlidXRvcgkJTkxGICYmIHl3emhhaXFpCi8vIEBkZXNjcmlwdGlvbgkJ5pa55L6/55qE5Zyo5ZCE5Liq5byV5pOO5LmL6Ze06Lez6L2s44CC5Y+v6Ieq5a6a5LmJ5pCc57Si5YiX6KGo55qEIE5MRiDkv67mlLnniYjjgIIKLy8gQHZlcnNpb24JCQkxMC4yMDEwLjE1LjAKLy8gQGluY2x1ZGUJCQkqCi8vIEBuYW1lc3BhY2UJCWh0dHBzOi8vZ2l0aHViLmNvbS90ZWQ0MjMKLy8gQHJlcXVpcmUJCQlodHRwczovL2NvZGUuanF1ZXJ5LmNvbS9qcXVlcnktMy4zLjEubWluLmpzCi8vIEBncmFudAkJCUdNX2dldFZhbHVlCi8vIEBncmFudAkJCUdNX3NldFZhbHVlCi8vIEBncmFudAkJCUdNX2FkZFN0eWxlCi8vIEBncmFudCAgICAgIAkJR01fcmVnaXN0ZXJNZW51Q29tbWFuZAovLyBAcnVuLWF0CQkJZG9jdW1lbnQtc3RhcnQKLy8gPT0vVXNlclNjcmlwdD09CgoKKGZ1bmN0aW9uKCkgewoJInVzZSBzdHJpY3QiOwoJdmFyIHByZWZzID0gewoJCWRpc3BsYXk6IHRydWUsCgkJb3BlbkluTmV3VGFiOiB0cnVlLCAvL+aYr+WQpuWcqOaWsOmhtemdouaJk+W8gC4KCQllbmdpbmVMaXN0RGF0YVR5cGU6ICJ0ZWQ0MjMiLCAvL+aQnOe0ouWIl+ihqOm7mOiupOexu+WeiwoJCWRlYnVnOiBmYWxzZQoJfTsKCXZhciBzdmcgPXsKCQlsaXN0OiAnPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTEuNjI2IDUxMS42MjYiPjxwYXRoIGQ9Ik02My45NTMgMTY0LjQ1M0g5LjEzNWMtMi40NzQgMC00LjYxNS45LTYuNDIzIDIuNzA5Qy45MDMgMTY4Ljk3MiAwIDE3MS4xMTQgMCAxNzMuNTg5djU0LjgxN2MwIDIuNDczLjkwMyA0LjYxOSAyLjcxMiA2LjQyNCAxLjgwOSAxLjgwMyAzLjk0OSAyLjcxMiA2LjQyMyAyLjcxMmg1NC44MThjMi40NzQgMCA0LjYxNS0uOTA1IDYuNDIzLTIuNzEyIDEuODA5LTEuODA5IDIuNzEyLTMuOTUxIDIuNzEyLTYuNDI0di01NC44MTdjMC0yLjQ3NS0uOTA0LTQuNjE3LTIuNzEyLTYuNDI3LTEuODA4LTEuODA2LTMuOTQ5LTIuNzA5LTYuNDIzLTIuNzA5ek02My45NTMgMzgzLjcyMkg5LjEzNWMtMi40NzQgMC00LjYxNS44OTYtNi40MjMgMi43MDdDLjkwMyAzODguMjM4IDAgMzkwLjM3OCAwIDM5Mi44NTR2NTQuODJjMCAyLjQ3MS45MDMgNC42MDkgMi43MTIgNi40MiAxLjgwOSAxLjgxMyAzLjk0OSAyLjcxNCA2LjQyMyAyLjcxNGg1NC44MThjMi40NzQgMCA0LjYxNS0uOTAzIDYuNDIzLTIuNzE0IDEuODA5LTEuODA3IDIuNzEyLTMuOTQ5IDIuNzEyLTYuNDJ2LTU0LjgyYzAtMi40NzctLjkwNC00LjYxNi0yLjcxMi02LjQyNi0xLjgwOC0xLjgwMy0zLjk0OS0yLjcwNi02LjQyMy0yLjcwNnpNNjMuOTUzIDI3NC4wODJIOS4xMzVjLTIuNDc0IDAtNC42MTUuOTEtNi40MjMgMi43MTRTMCAyODAuNzQ5IDAgMjgzLjIydjU0LjgxNWMwIDIuNDc4LjkwMyA0LjYyIDIuNzEyIDYuNDI3IDEuODA5IDEuODA4IDMuOTQ5IDIuNzA3IDYuNDIzIDIuNzA3aDU0LjgxOGMyLjQ3NCAwIDQuNjE1LS44OTYgNi40MjMtMi43MDcgMS44MDktMS44MDcgMi43MTItMy45NDkgMi43MTItNi40MjdWMjgzLjIyYzAtMi40NzEtLjkwNC00LjYxMy0yLjcxMi02LjQyNC0xLjgwOC0xLjgwNy0zLjk0OS0yLjcxNC02LjQyMy0yLjcxNHpNNjMuOTUzIDU0LjgxN0g5LjEzNWMtMi40NzQgMC00LjYxNS45MDMtNi40MjMgMi43MTJTMCA2MS40NzkgMCA2My45NTN2NTQuODE3YzAgMi40NzUuOTAzIDQuNjE1IDIuNzEyIDYuNDI0czMuOTQ5IDIuNzEyIDYuNDIzIDIuNzEyaDU0LjgxOGMyLjQ3NCAwIDQuNjE1LS45IDYuNDIzLTIuNzEyIDEuODA5LTEuODA5IDIuNzEyLTMuOTQ5IDIuNzEyLTYuNDI0VjYzLjk1M2MwLTIuNDc1LS45MDQtNC42MTUtMi43MTItNi40MjQtMS44MDgtMS44MDQtMy45NDktMi43MTItNi40MjMtMi43MTJ6TTUwMi40OSAzODMuNzIySDExOC43NzFjLTIuNDc0IDAtNC42MTUuODk2LTYuNDIzIDIuNzA3LTEuODA5IDEuODEtMi43MTIgMy45NDktMi43MTIgNi40MjZ2NTQuODJjMCAyLjQ3MS45MDMgNC42MDkgMi43MTIgNi40MiAxLjgwOSAxLjgxMyAzLjk0NiAyLjcxNCA2LjQyMyAyLjcxNEg1MDIuNDljMi40NzggMCA0LjYxNi0uOTAzIDYuNDI3LTIuNzE0IDEuODEtMS44MTEgMi43MS0zLjk0OSAyLjcxLTYuNDJ2LTU0LjgyYzAtMi40NzctLjkwMy00LjYxNi0yLjcxLTYuNDI2LTEuODExLTEuODA0LTMuOTUtMi43MDctNi40MjctMi43MDd6TTUwMi40OSAyNzQuMDgySDExOC43NzFjLTIuNDc0IDAtNC42MTUuOTEtNi40MjMgMi43MTRzLTIuNzEyIDMuOTUzLTIuNzEyIDYuNDI0djU0LjgxNWMwIDIuNDc4LjkwMyA0LjYyIDIuNzEyIDYuNDI3IDEuODA5IDEuODA4IDMuOTQ2IDIuNzA3IDYuNDIzIDIuNzA3SDUwMi40OWMyLjQ3OCAwIDQuNjE2LS44OTYgNi40MjctMi43MDcgMS44MS0xLjgwNyAyLjcxLTMuOTQ5IDIuNzEtNi40MjdWMjgzLjIyYzAtMi40NzEtLjkwMy00LjYxMy0yLjcxLTYuNDI0LTEuODExLTEuODA0LTMuOTUtMi43MTQtNi40MjctMi43MTR6TTUwOC45MTcgNTcuNTI5Yy0xLjgxMS0xLjgwNS0zLjk0OS0yLjcxMi02LjQyNy0yLjcxMkgxMTguNzcxYy0yLjQ3NCAwLTQuNjE1LjkwMy02LjQyMyAyLjcxMnMtMi43MTIgMy45NDktMi43MTIgNi40MjR2NTQuODE3YzAgMi40NzUuOTAzIDQuNjE1IDIuNzEyIDYuNDI0czMuOTQ2IDIuNzEyIDYuNDIzIDIuNzEySDUwMi40OWMyLjQ3OCAwIDQuNjE2LS45IDYuNDI3LTIuNzEyIDEuODEtMS44MDkgMi43MS0zLjk0OSAyLjcxLTYuNDI0VjYzLjk1M2MtLjAwMS0yLjQ3NC0uOTA0LTQuNjE1LTIuNzEtNi40MjR6TTUwMi40OSAxNjQuNDUzSDExOC43NzFjLTIuNDc0IDAtNC42MTUuOS02LjQyMyAyLjcwOS0xLjgwOSAxLjgxLTIuNzEyIDMuOTUyLTIuNzEyIDYuNDI3djU0LjgxN2MwIDIuNDczLjkwMyA0LjYxNSAyLjcxMiA2LjQyNCAxLjgwOSAxLjgwMyAzLjk0NiAyLjcxMiA2LjQyMyAyLjcxMkg1MDIuNDljMi40NzggMCA0LjYxNi0uOTA1IDYuNDI3LTIuNzEyIDEuODEtMS44MDkgMi43MS0zLjk1MSAyLjcxLTYuNDI0di01NC44MTdjMC0yLjQ3NS0uOTAzLTQuNjE3LTIuNzEtNi40MjctMS44MTEtMS44MDYtMy45NS0yLjcwOS02LjQyNy0yLjcwOXoiLz48L3N2Zz4nLAoJCXNldHRpbmc6ICc8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDQzOC41MjkgNDM4LjUyOSI+PHBhdGggZD0iTTQzNi4yNSAxODEuNDM4Yy0xLjUyOS0yLjAwMi0zLjUyNC0zLjE5My01Ljk5NS0zLjU3MWwtNTIuMjQ5LTcuOTkyYy0yLjg1NC05LjEzNy02Ljc1Ni0xOC40NjEtMTEuNzA0LTI3Ljk4IDMuNDIyLTQuNzU4IDguNTU5LTExLjQ2NiAxNS40MS0yMC4xMjkgNi44NTEtOC42NjEgMTEuNzAzLTE0Ljk4NyAxNC41NjEtMTguOTg2IDEuNTIzLTIuMDk0IDIuMjc5LTQuMjgxIDIuMjc5LTYuNTY3IDAtMi42NjMtLjY2LTQuNzU1LTEuOTk4LTYuMjgtNi44NDgtOS43MDgtMjIuNTUyLTI1Ljg4NS00Ny4xMDYtNDguNTM2LTIuMjc1LTEuOTAzLTQuNjYxLTIuODU0LTcuMTMyLTIuODU0LTIuODU3IDAtNS4xNC44NTUtNi44NTQgMi41NjdsLTQwLjUzOSAzMC41NDljLTcuODA2LTMuOTk5LTE2LjM3MS03LjUyLTI1LjY5My0xMC41NjVsLTcuOTk0LTUyLjUyOWMtLjE5MS0yLjQ3NC0xLjI4Ny00LjUyMS0zLjI4NS02LjEzOUMyNTUuOTUuODA2IDI1My42MjMgMCAyNTAuOTU0IDBoLTYzLjM4Yy01LjUyIDAtOC45NDcgMi42NjMtMTAuMjc4IDcuOTkzLTIuNDc1IDkuNTEzLTUuMjM2IDI3LjIxNC04LjI4IDUzLjEtOC45NDcgMi44Ni0xNy42MDcgNi40NzYtMjUuOTgxIDEwLjg1M2wtMzkuMzk5LTMwLjU0OWMtMi40NzQtMS45MDMtNC45NDgtMi44NTQtNy40MjItMi44NTQtNC4xODcgMC0xMy4xNzkgNi44MDQtMjYuOTc5IDIwLjQxMy0xMy44IDEzLjYxMi0yMy4xNjkgMjMuODQxLTI4LjEyMiAzMC42OS0xLjcxNCAyLjQ3NC0yLjU2OCA0LjY2NC0yLjU2OCA2LjU2NyAwIDIuMjg2Ljk1IDQuNTcgMi44NTMgNi44NTEgMTIuNzUxIDE1LjQyIDIyLjkzNiAyOC41NDkgMzAuNTUgMzkuNDAzLTQuNzU5IDguNzU0LTguNDcgMTcuNTExLTExLjEzMiAyNi4yNjVsLTUzLjEwNSA3Ljk5MmMtMi4wOTMuMzgyLTMuOSAxLjYyMS01LjQyNCAzLjcxNUMuNzYgMTgyLjUzMSAwIDE4NC43MjIgMCAxODcuMDAydjYzLjM4M2MwIDIuNDc4Ljc2IDQuNzA5IDIuMjg0IDYuNzA4IDEuNTI0IDEuOTk4IDMuNTIxIDMuMTk1IDUuOTk2IDMuNTcybDUyLjI1IDcuNzFjMi42NjMgOS4zMjUgNi41NjQgMTguNzQzIDExLjcwNCAyOC4yNTctMy40MjQgNC43NjEtOC41NjMgMTEuNDY4LTE1LjQxNSAyMC4xMjktNi44NTEgOC42NjUtMTEuNzA5IDE0Ljk4OS0xNC41NjEgMTguOTg2LTEuNTI1IDIuMTAyLTIuMjg1IDQuMjg1LTIuMjg1IDYuNTcgMCAyLjQ3MS42NjYgNC42NTggMS45OTcgNi41NjEgNy40MjMgMTAuMjg0IDIzLjEyNSAyNi4yNzIgNDcuMTA5IDQ3Ljk2OSAyLjA5NSAyLjA5NCA0LjQ3NSAzLjEzOCA3LjEzNyAzLjEzOCAyLjg1NyAwIDUuMjM2LS44NTIgNy4xMzgtMi41NjNsNDAuMjU5LTMwLjU1M2M3LjgwOCAzLjk5NyAxNi4zNzEgNy41MTkgMjUuNjk3IDEwLjU2OGw3Ljk5MyA1Mi41MjljLjE5MyAyLjQ3MSAxLjI4NyA0LjUxOCAzLjI4MyA2LjE0IDEuOTk3IDEuNjIyIDQuMzMxIDIuNDIzIDYuOTk1IDIuNDIzaDYzLjM4YzUuNTMgMCA4Ljk1Mi0yLjY2MiAxMC4yODctNy45OTQgMi40NzEtOS41MTQgNS4yMjktMjcuMjEzIDguMjc0LTUzLjA5OCA4Ljk0Ni0yLjg1OCAxNy42MDctNi40NzYgMjUuOTgxLTEwLjg1NWwzOS40MDIgMzAuODRjMi42NjMgMS43MTIgNS4xNDEgMi41NjMgNy40MiAyLjU2MyA0LjE4NiAwIDEzLjEzMS02Ljc1MiAyNi44MzMtMjAuMjcgMTMuNzA5LTEzLjUxMSAyMy4xMy0yMy43OSAyOC4yNjQtMzAuODM3IDEuNzExLTEuOTAyIDIuNTY5LTQuMDkgMi41NjktNi41NjEgMC0yLjQ3OC0uOTQ3LTQuODYyLTIuODU3LTcuMTM5LTEzLjY5OC0xNi43NTQtMjMuODgzLTI5Ljg4Mi0zMC41NDYtMzkuNDAyIDMuODA2LTcuMDQzIDcuNTE5LTE1LjcwMSAxMS4xMzYtMjUuOThsNTIuODE3LTcuOTg4YzIuMjc5LS4zODMgNC4xODktMS42MjIgNS43MDgtMy43MTYgMS41MjMtMi4wOTggMi4yNzktNC4yODggMi4yNzktNi41NzF2LTYzLjM3NmMuMDA1LTIuNDc0LS43NTEtNC43MDctMi4yNzgtNi43MDd6bS0xNjUuMzA0IDg5LjUwMWMtMTQuMjcxIDE0LjI3Ny0zMS40OTcgMjEuNDE2LTUxLjY3NiAyMS40MTYtMjAuMTc3IDAtMzcuNDAxLTcuMTM5LTUxLjY3OC0yMS40MTYtMTQuMjcyLTE0LjI3MS0yMS40MTEtMzEuNDk4LTIxLjQxMS01MS42NzMgMC0yMC4xNzcgNy4xMzUtMzcuNDAxIDIxLjQxMS01MS42NzggMTQuMjc3LTE0LjI3MiAzMS41MDQtMjEuNDExIDUxLjY3OC0yMS40MTEgMjAuMTc5IDAgMzcuNDA2IDcuMTM5IDUxLjY3NiAyMS40MTEgMTQuMjc0IDE0LjI3NyAyMS40MTMgMzEuNTAxIDIxLjQxMyA1MS42NzggMCAyMC4xNzUtNy4xMzggMzcuNDAzLTIxLjQxMyA1MS42NzN6Ii8+PC9zdmc+JwoJfTsKCXZhciBlbmdpbmVMaXN0RGF0YSA9IHsKCQljdXN0b206ICIiLAoJCXRlZDQyMzogIue9kemhtVxuCUdvb2dsZVxuCQlHb29nbGUsIGh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vc2VhcmNoP3E9JXMmc2FmZT1vZmZcbgkJR29vZ2xlLmhrLCBodHRwczovL3d3dy5nb29nbGUuY29tLmhrL3NlYXJjaD9xPSVzJnNhZmU9b2ZmXG4JCUdvb2dsZS5jby5qcO+8jGh0dHBzOi8vd3d3Lmdvb2dsZS5jby5qcC9zZWFyY2g/cT0lcyZzYWZlPW9mZlxuCeeZvuW6piwgaHR0cHM6Ly93d3cuYmFpZHUuY29tL3M/d2Q9JXNcbgnnp5jov7ksIGh0dHBzOi8vbWlqaXNvdS5jb20vP3E9JXNcbgkzNjAsIGh0dHBzOi8vd3d3LnNvLmNvbS9zP3E9JXNcbglCaW5nXG4JCUJpbmcoQ04pLCBodHRwczovL2NuLmJpbmcuY29tL3NlYXJjaD9xPSVzXG4JCUJpbmcoR2xvYmFsKSwgaHR0cHM6Ly9nbG9iYWwuYmluZy5jb20vc2VhcmNoP3E9JXMmc2V0bWt0PWVuLXVzJnNldGxhbmc9ZW4tdXNcbgnmkJzni5csIGh0dHBzOi8vd3d3LnNvZ291LmNvbS93ZWI/cXVlcnk9JXNcbglEdWNrRHVja0dvLCBodHRwczovL2R1Y2tkdWNrZ28uY29tLz9xPSVzXG4JWWFob29cbgkJWWFob28sIGh0dHBzOi8vc2VhcmNoLnlhaG9vLmNvbS9zZWFyY2g/cD0lc1xuCQlZYWhvbyh0dyksIGh0dHBzOi8vdHcuc2VhcmNoLnlhaG9vLmNvbS9zZWFyY2g/cD0lc1xuIAkJWWFob28uY28uanAsIGh0dHBzOi8vc2VhcmNoLnlhaG9vLmNvLmpwL3NlYXJjaD9wPSVzJmFxPS0xJng9d3J0XG4JU3RhcnRwYWdlLCBodHRwczovL3d3dy5zdGFydHBhZ2UuY29tL2RvL3NlYXJjaC8lcG9zdCNxdWVyeT0lc1xu6LWE5paZXG4JV2lraVxuCQlaV2lraSwgaHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3cvaW5kZXgucGhwP3NlYXJjaD0lcyZidXR0b249JnRpdGxlPVNwZWNpYWwlM0FTZWFyY2hcbgkJRVdpa2ksIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93L2luZGV4LnBocD9zZWFyY2g9JXMmYnV0dG9uPSZ0aXRsZT1TcGVjaWFsJTNBU2VhcmNoXG4JCUpXaWtpLCBodHRwczovL2phLndpa2lwZWRpYS5vcmcvdy9pbmRleC5waHA/c2VhcmNoPSVzJmJ1dHRvbj0mdGl0bGU9U3BlY2lhbCUzQVNlYXJjaFxuCeeZvuW6pueZvuenkSwgaHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vc2VhcmNod29yZC8/d29yZD0lc1xuCUludGVybmV0IEFyY2hpdmUsIGh0dHBzOi8vYXJjaGl2ZS5vcmcvc2VhcmNoLnBocD9xdWVyeT0lc1xuCVNjaG9sYXIsIGh0dHA6Ly9zY2hvbGFyLmdvb2dsZS5jb20vc2Nob2xhcj9obD16aC1DTiZxPSVzJmJ0bkc9JmxyPVxuCeeZvuW6puWtpuacrywgaHR0cHM6Ly94dWVzaHUuYmFpZHUuY29tL3M/d2Q9JXNcbgnnn6XkuY4sIGh0dHBzOi8vd3d3LnpoaWh1LmNvbS9zZWFyY2g/cT0lc1xuCeiQjOWomOeZvuenkSwgaHR0cDovL3poLm1vZWdpcmwub3JnL2luZGV4LnBocD9zZWFyY2g9JXNcbglHb29nbGUgQm9vaywgaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9zZWFyY2g/cT0lcyZidG5HPeaQnOe0ouWbvuS5piZ0Ym09YmtzJnRibz0xJmhsPXpoLUNOJmd3c19yZD1zc2xcbgnniLHlrabmnK8sIGh0dHBzOi8vcy5peHVlc2h1LmNvbS8/cT0lc1xuCee7tOaZriwgaHR0cDovL2xpYi5jcXZpcC5jb20vUWlrYW4vU2VhcmNoL0luZGV4P2Zyb209UWlrYW5fU2VhcmNoX0luZGV4LyVwb3N0I2tleT11JTNEJXMjaW5kZXhLZXk9JXNcbgnlvIDlj5FcbgkJc3RhY2tvdmVyZmxvdywgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9zZWFyY2g/cT0lc1xuCQlNRE4sIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL3NlYXJjaD9xPSVzXG4JCWdpdGh1YiwgaHR0cHM6Ly9naXRodWIuY29tL3NlYXJjaD9xPSVzXG4JCWtydWdsZSwgaHR0cDovL29wZW5zZWFyY2gua3J1Z2xlLm9yZy9kb2N1bWVudC9zZWFyY2gvI3F1ZXJ5PSVzXG4JCW5wbSwgaHR0cHM6Ly93d3cubnBtanMub3JnL3NlYXJjaD9xPSVzXG7lnLDlm75cbgnnmb7luqYsIGh0dHA6Ly9tYXAuYmFpZHUuY29tLz9uZXdtYXA9MSZzPXMlMjZ3ZCUzRCVzXG4JR29vZ2xlLCBodHRwczovL3d3dy5nb29nbGUuY29tL21hcHMvc2VhcmNoLyVzL1xuCUJpbmcsIGh0dHBzOi8vd3d3LmJpbmcuY29tL2RpdHUvP3E9JXNcbgnmkJzni5csIGh0dHBzOi8vbWFwLnNvZ291LmNvbS8jbHE9JXNcbumfs+S5kFxuCeWNg+WNgywgaHR0cHM6Ly9tdXNpYy50YWloZS5jb20vc2VhcmNoP3dvcmQ9JXNcbglRUSwgaHR0cHM6Ly95LnFxLmNvbS9wb3J0YWwvc2VhcmNoLmh0bWwjcGFnZT0xJnNlYXJjaGlkPTEmdD1zb25nJnc9JXNcbgnkuIDlkKwsIGh0dHBzOi8vc28uMXRpbmcuY29tL3Nvbmc/cT0lc1xuCeiZvuexsywgaHR0cDovL3d3dy54aWFtaS5jb20vc2VhcmNoP2tleT0lc1xuCXBpYXBybywgaHR0cHM6Ly9waWFwcm8uanAvc2VhcmNoLz92aWV3PWF1ZGlvJmtleXdvcmQ9JXNcbgnliJjlv5fov5ssIGh0dHBzOi8vbXVzaWMubGl1emhpamluLmNuLz9uYW1lPSVzJnR5cGU9cXFcbgnmrYzor41cbgkJUVHmrYzor40sIGh0dHBzOi8veS5xcS5jb20vcG9ydGFsL3NlYXJjaC5odG1sI3BhZ2U9MSZzZWFyY2hpZD0xJnQ9bHlyaWMmdz0lc1xuCQnkuIDlkKzmrYzor40sIGh0dHBzOi8vc28uMXRpbmcuY29tL2x5cmljP3E9JXNcbgkJ5q2M6K+N6L+3LCBodHRwOi8vZ2VjaW1pLmNvbS9zZWFyY2gvP2tleXdvcmQ9JXNcbuWbvueJh1xuCeeZvuW6piwgaHR0cDovL2ltYWdlLmJhaWR1LmNvbS9zZWFyY2gvaW5kZXg/dG49YmFpZHVpbWFnZSZ3b3JkPSVzXG4JR29vZ2xlLCBodHRwczovL3d3dy5nb29nbGUuY29tLmhrL3NlYXJjaD90Ym09aXNjaCZxPSVzXG4J6Iqx55OjLCBodHRwczovL2h1YWJhbi5jb20vc2VhcmNoLz9xPSVzXG4JUGljc2VhcmNoLCBodHRwOi8vY24ucGljc2VhcmNoLmNvbS9pbmRleC5jZ2k/cT0lc1xuCUZsaWNrciwgaHR0cHM6Ly93d3cuZmxpY2tyLmNvbS9zZWFyY2gvP3c9YWxsJnE9JXNcbglQaXhpdiwgaHR0cDovL3d3dy5waXhpdi5uZXQvc2VhcmNoLnBocD9zX21vZGU9c190YWcmd29yZD0lc1xuCWRBLCBodHRwczovL3d3dy5kZXZpYW50YXJ0LmNvbS9icm93c2UvYWxsLz9xPSVzXG7kuIvovb1cbglCVERpZ2csIGh0dHBzOi8vYnRkaWcuY29tL3NlYXJjaD9xPSVzXG4JaWRvcGUsIGh0dHBzOi8vaWRvcGUuc2UvdG9ycmVudC1saXN0LyVzXG4JVEssIGh0dHBzOi8vd3d3LnRvcnJlbnRraXR0eS50di9zZWFyY2gvJXNcbglsaW1ldG9ycmVudHNcbgkJY28sIGh0dHBzOi8vd3d3LmxpbWV0b3JyZW50cy5jby9zZWFyY2gvYWxsLyVzXG4JCWFzaWEsIGh0dHBzOi8vd3d3LmxpbWV0b3JyZW50cy5hc2lhL3NlYXJjaC9hbGwvJXNcbgkJcHJvLCBodHRwczovL3d3dy5saW1ldG9yLnByby9zZWFyY2gvYWxsLyVzXG4JRUQyS1xuCQl4aWFvaHgsIGh0dHBzOi8vdjEueGlhb2h4Lm9yZy9zZWFyY2g/a2V5PSVzXG4JCWNkc29zbywgaHR0cHM6Ly93d3cuY2Rzb3NvLmNjL3NlYXJjaGVzLSVzLWhvdC0xLW51bGwuaHRtbFxuCeWtl+W5lVxuCQlzdWIgSEQsIGh0dHBzOi8vc3ViaGQubGEvc2VhcmNoLyVzXG4JCeWwhOaJi+e9kSjkvKopLCBodHRwczovL2Fzc3J0Lm5ldC9zdWIvP3NlYXJjaHdvcmQ9JXNcbgkJWVllVHMsIGh0dHA6Ly93d3cucnJ5czIwMjAuY29tL3NlYXJjaC9pbmRleD9rZXl3b3JkPSVzXG4JCXppbXVrdSwgaHR0cDovL3d3dy56aW11a3UubGEvc2VhcmNoP3E9JXNcbgkJU3Vic2NlbmUsIGh0dHBzOi8vc3Vic2NlbmUuY29tL3N1YnRpdGxlcy9zZWFyY2hieXRpdGxlJXBvc3QjcXVlcnk9JXNcbgkJUjNTVUIsIGh0dHBzOi8vcjNzdWIuY29tL3NlYXJjaC5waHA/cz0lc1xu5b2x6KeGXG4JdG9ycmVudGZ1bmsyLCBodHRwczovL3d3dy50b3JyZW50ZnVuazIuY29tL2FsbC90b3JyZW50cy8lcy5odG1sP3Y9JnNtaT0mc21hPSZpPTI1MFxuCXRoZXBpcmF0ZWJheSwgaHR0cHM6Ly90aGVwaXJhdGViYXkub3JnL3NlYXJjaC8lc1xuCXpvb3FsZSwgaHR0cHM6Ly96b29xbGUuY29tL3NlYXJjaD9xPSVzXG4JcGlhbnl1YW4sIGh0dHA6Ly93d3cucGlhbnl1YW4ubGEvc2VhcmNoP3E9JXNcbglUb3JyZW50ejIsIGh0dHBzOi8vdG9ycmVudHoyLmV1L3NlYXJjaD9mPSVzXG4JMTMzN3gudG8sIGh0dHBzOi8vd3d3LjEzNzd4LnRvL3NlYXJjaC8lcy8xL1xuCVRvcmxvY2ssIGh0dHBzOi8vd3d3LnRvcmxvY2syLmNvbS9hbGwvdG9ycmVudHMvJXMuaHRtbFxuCVlvdXJCVCwgaHR0cHM6Ly95b3VyYml0dG9ycmVudDIuY29tLz9xPSVzXG4JVEQsIGh0dHBzOi8vd3d3LnRvcnJlbnRkb3dubG9hZHMubWUvc2VhcmNoLz9zZWFyY2g9JXNcbglleHRyYXRvcnJlbnQuc2ksIGh0dHBzOi8vZXh0cmF0b3JyZW50LnNpL3NlYXJjaC8/c2VhcmNoPSVzXG4JeGlhb2h4LCBodHRwczovL3d3dy54aWFvaHgub3JnL3NlYXJjaD9rZXk9JXNcbglSQVJCR1xuCQlyYXJiZ3ByeCwgaHR0cHM6Ly9yYXJiZ3ByeC5vcmcvdG9ycmVudHMucGhwP3NlYXJjaD0lc1xuCQlyYXJiZ3Byb3h5LCBodHRwczovL3JhcmJncHJveHkub3JnL3RvcnJlbnRzLnBocD9zZWFyY2g9JXNcbglraWNrYXNzKOmVnOWDjzEpLCBodHRwczovL2thdC5zeC9zZWFyY2gucGhwP3E9JXNcbglraWNrYXNzKOmVnOWDjzIpXG4JCWtpY2thc3N0b3JyZW50cywgaHR0cHM6Ly9raWNrYXNzdG9ycmVudHMudG8vdXNlYXJjaC8lc1xuCQlraWNrYXNzMS50bywgaHR0cHM6Ly9raWNrYXNzMS50by91c2VhcmNoLyVzL1xuCQlrYXQuYW0sIGh0dHBzOi8va2F0LmFtL3VzZWFyY2gvJXMvXG4JCWtpY2thc3N0b3JyZW50LmNyLCBodHRwczovL2tpY2thc3N0b3JyZW50LmNyL3VzZWFyY2gvJXMvXG5BQ0dcbglOeWFhUGFudHN1LCBodHRwczovL255YWEubmV0L3NlYXJjaD9jPV8mdXNlcklEPTAmcT0lc1xuCW55YWEuc2lcbgkJbnlhYS5zaSwgaHR0cHM6Ly9ueWFhLnNpLz9mPTAmYz0wXzAmcT0lc1xuCQlueWFhLnVrLCBodHRwczovL255YWEudWsvP2Y9MCZjPTBfMCZxPSVzXG4JZG1oeSwgaHR0cHM6Ly9zaGFyZS5kbWh5Lm9yZy90b3BpY3MvbGlzdD9rZXl3b3JkPSVzXG4JVG9reW90b3NobywgaHR0cHM6Ly93d3cudG9reW90b3Noby5pbmZvL3NlYXJjaC5waHA/dGVybXM9JXNcbglNaWthbiwgaHR0cDovL21pa2FuYW5pLm1lL0hvbWUvU2VhcmNoP3NlYXJjaHN0cj0lc1xuCe+8ik1pb0JU77yKLCBodHRwOi8vd3d3Lm1pb2J0LmNvbS9zZWFyY2gucGhwP2tleXdvcmQ9JXNcbglzaGFuYSBwcm9qZWN0LCBodHRwczovL3d3dy5zaGFuYXByb2plY3QuY29tL3NlYXJjaC8/dGl0bGU9JXNcbgnnroDljZXliqjmvKssIGh0dHBzOi8vd3d3LjM2ZG0uY29tL3NlYXJjaC5waHA/a2V5d29yZD0lc1xuCUtPVE9NSSBSU1MsIGh0dHBzOi8vbW9lNHNhbGUuaW4vP2t3PSVzXG4JQUNH54uX54uXLCBodHRwOi8vYnQuYWNnLmdnL3NlYXJjaC5waHA/a2V5d29yZD0lc1xuCUFDRy5SSVAsIGh0dHBzOi8vYWNnLnJpcC8/dGVybT0lc1xuCUFjZ25YLCBodHRwczovL3d3dy5hY2dueC5zZS9zZWFyY2gucGhwP3NvcnRfaWQ9MCZrZXl3b3JkPSVzXG4J5pyr5pel5YuV5ryrLCBodHRwczovL3NoYXJlLmFjZ254LnNlL3NlYXJjaC5waHA/c29ydF9pZD0wJmtleXdvcmQ9JXNcblN1a2ViZWlcbglOYXlhUGFudHN1LCBodHRwczovL3N1a2ViZWkubnlhYS5uZXQvc2VhcmNoP2M9XyZ1c2VySUQ9MCZxPSVzXG4JbnlhYS5zaVxuCQlueWFhLnNpLCBodHRwczovL3N1a2ViZWkubnlhYS5zaS8/Zj0wJmM9MF8wJnE9JXNcbgkJbnlhYS51aywgaHR0cHM6Ly9zdWtlYmVpLm55YWEudWsvP2Y9MCZjPTBfMCZxPSVzXG4JR2xvZGxzLCBodHRwczovL2dsb2Rscy50by9zZWFyY2hfcmVzdWx0cy5waHA/c2VhcmNoPSVzXG4JQW5pRGV4LCBodHRwczovL2FuaWRleC5pbmZvLz9xPSVzXG4JQWNnblggRXJvLCBodHRwczovL3d3dy5hbml4Lm1vZS9zZWFyY2gucGhwP3NvcnRfaWQ9MCZrZXl3b3JkPSVzXG4JQW5pUmVuYSwgaHR0cHM6Ly93d3cuYW5pcmVuYS5jb20vP3M9JXNcbglHR0Jhc2VzLCBodHRwOi8vd3d3LmdnYmFzZXMuY29tL3NlYXJjaC5zbz90aXRsZT0lc1xu572R6LStXG4J5LiA5reYLCBodHRwczovL3d3dy5ldGFvLmNvbS9zZWFyY2guaHRtP25xPSVzXG4J5Lqs5LicLCBodHRwczovL3NlYXJjaC5qZC5jb20vU2VhcmNoP2tleXdvcmQ9JXMmZW5jPXV0Zi04XG4J5reY5a6dLCBodHRwczovL3MudGFvYmFvLmNvbS9zZWFyY2g/cT0lc1xuCeS6mumprOmAiiwgaHR0cHM6Ly93d3cuYW1hem9uLmNuL3MvcmVmPW5iX3NzP2tleXdvcmRzPSVzXG5ldGNcbgnpgq7nvJblupMsIGh0dHA6Ly93d3cueW91Ymlhbmt1LmNvbS8lc1xuCUFNTywgaHR0cHM6Ly9hZGRvbnMubW96aWxsYS5vcmcvemgtQ04vZmlyZWZveC9zZWFyY2gvP3E9JXNcbgnmsYnlhbgo5a2XKSwgaHR0cDovL3d3dy56ZGljLm5ldC9zb3VzdW8vP3E9JXMmdHA9dHAxXG4J5rGJ5YW4KOivjSksIGh0dHA6Ly93d3cuemRpYy5uZXQvc291c3VvLz9xPSVzJnRwPXRwMyIsCgl9OwoKCXZhciBNQUlOX0NTUyA9ICIjc2VqLWJ1dHRvbntcbglwb3NpdGlvbjogZml4ZWQ7XG4gICAgdG9wOiAwcHg7XG4gICAgbGVmdDogMHB4O1xuICAgIHdpZHRoOiAxNHB4O1xuICAgIGhlaWdodDogMTRweDtcbiAgICBiYWNrZ3JvdW5kOiBncmV5O1xuICAgIGJvcmRlci1yYWRpdXM6IDdweCAhaW1wb3J0YW50O1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIHotaW5kZXg6IDkxMTExMTExMTExO1xuICAgIGN1cnNvcjogY3Jvc3NoYWlyO1xufVxuI3Nlai1jb250YWluZXJ7XG4JcG9zaXRpb246Zml4ZWQ7XG4JdG9wOjBweDtcbgl6LWluZGV4OjkxMTExMTExMTExO1xuCW1hcmdpbjowO1xuCWJhY2tncm91bmQ6IHdoaXRlO1xuCWJveC1zaGFkb3c6MHB4IDBweCAzcHggI2FhYWFhYTtcbgltYXJnaW46MCBhdXRvO1xuCWRpc3BsYXk6dGFibGU7XG4JZm9udC1mYW1pbHk6IENvbWljIFNhbnMgTVMsICdNaWNyb3NvZnQgWWFIZWknLCDlvq7ova/pm4Xpu5E7XG4JbGluZS1oZWlnaHQ6IDEuNTtcbglmb250LXNpemU6IDlweDtcbgl0cmFuc2l0aW9uOiBvcGFjaXR5IDAuNXMgZWFzZS1pbi1vdXQ7XG59XG5zZWp1bHtcbglib3JkZXI6IDFweCBzb2xpZCAjMzMzO1xufVxuI3Nlai1jb250YWluZXIgc3Zne1xuCWhlaWdodDoxNXB4O1xuCXZlcnRpY2FsLWFsaWduOiB0ZXh0LWJvdHRvbTtcbglwYWRkaW5nLXJpZ2h0OiAxcHg7XG59XG4jc2VqLWNvbnRhaW5lciBidXR0b257XG4JZm9udC1zaXplOjlweDtcbn1cblxuc2VqdWwsIHNlamxpe1xuCW1hcmdpbjogMDtcbglwYWRkaW5nOiAwO1xuCWxpc3Qtc3R5bGU6IG5vbmUgb3V0c2lkZTtcbn1cbnNlamxpe1xuCWRpc3BsYXk6IGxpc3QtaXRlbTtcbn1cbnNlamxpOmhvdmVyPnNlanVse1xuCWRpc3BsYXk6YmxvY2s7XG59XG5ib2R5PnNlanVsPnNlamxpe1xuCWZsb2F0OiBsZWZ0O1xufVxuc2VqbGkgc2VqdWx7XG4JcG9zaXRpb246IGFic29sdXRlO1xufVxuc2VqbGkgc2VqdWwgc2VqdWx7XG4JbWFyZ2luLWxlZnQ6IDEwMHB4O1xuCW1hcmdpbi10b3A6IC0zMHB4O1xufVxuc2VqbGkgc2VqdWwgLnNlai1lbmdpbmV7XG4JcGFkZGluZzogNHB4IDBweDtcbgl3aWR0aDoxMDAlO1xuCXRleHQtYWxpZ246IGxlZnQ7XG4JdGV4dC1pbmRlbnQ6IDVweDtcbn1cbiNzZWotY29udGFpbmVyPnNlamxpe1xuCWZsb2F0OiBsZWZ0O1xuCWJvcmRlci1yaWdodDogMXB4IHNvbGlkICMzMzM7XG59XG4jc2VqLWNvbnRhaW5lcj5zZWpsaTpsYXN0LWNoaWxke1xuCWJvcmRlci1yaWdodDogbm9uZTtcbn1cbiNzZWotZXhwYW5kZWQtY2F0ZWdvcnl7XG4JZGlzcGxheTogaW5saW5lLWJsb2NrO1xuCWZvbnQtd2VpZ2h0OiBib2xkO1xuCXBhZGRpbmc6IDBweCA0cHg7XG4JbGluZS1oZWlnaHQ6IDI7XG59XG4jc2VqLWV4cGFuZGVkLWNhdGVnb3J5OjphZnRlcntcbgljb250ZW50OicgOic7XG59XG4uc2VqLWVuZ2luZXtcbglsaW5lLWhlaWdodDogMjtcbglkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4JbWFyZ2luOiAwO1xuCWJvcmRlcjogbm9uZTtcbglwYWRkaW5nOiAwcHggNHB4O1xuCXRleHQtZGVjb3JhdGlvbjogbm9uZTtcbgl0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMTVzIGVhc2UtaW4tb3V0O1xufVxuYS5zZWotZW5naW5le1xuCXdoaXRlLXNwYWNlOiBub3dyYXA7XG4JbWluLXdpZHRoOiA1NXB4O1xuCXRleHQtYWxpZ246IGNlbnRlcjtcbn1cbmJ1dHRvbi5zZWotZW5naW5le1xuCWJhY2tncm91bmQtY29sb3I6ICNGRkZGRkY7XG4JZm9udC1mYW1pbHk6IENvbWljIFNhbnMgTVMsICdNaWNyb3NvZnQgWWFIZWknLCDlvq7ova/pm4Xpu5E7XG4JY29sb3I6ICMxMjA4ODY7XG4JY3Vyc29yOnBvaW50ZXI7XG59XG5hLnNlai1lbmdpbmU6dmlzaXRlZCwgYS5zZWotZW5naW5lOmFjdGl2ZXtcbgljb2xvcjogIzEyMDg4Njtcbn1cbmEuc2VqLWVuZ2luZTpsaW5rLCBhLnNlai1lbmdpbmU6dmlzaXRlZHtcbgl0ZXh0LWRlY29yYXRpb246IG5vbmU7XG59XG4uc2VqLWRyb3AtbGlzdC10cmlnZ2VyLXNob3due1xuCWJhY2tncm91bmQtY29sb3I6ICNERUVERkYgIWltcG9ydGFudDtcbn1cbi5zZWotZHJvcC1saXN0LXRyaWdnZXI6OmFmdGVyIHtcbgljb250ZW50OlwnXCc7XG4JZGlzcGxheTogaW5saW5lLWJsb2NrO1xuCW1hcmdpbjogMCAwIDAgM3B4O1xuCXBhZGRpbmc6IDA7XG4Jd2lkdGg6IDA7XG4JaGVpZ2h0OiAwO1xuCWJvcmRlci10b3A6IDZweCBzb2xpZCAjQkNCQ0JDO1xuCWJvcmRlci1yaWdodDogNXB4IHNvbGlkIHRyYW5zcGFyZW50O1xuCWJvcmRlci1sZWZ0OiA1cHggc29saWQgdHJhbnNwYXJlbnQ7XG4JYm9yZGVyLWJvdHRvbTogMHB4IHNvbGlkIHRyYW5zcGFyZW50O1xuCXRyYW5zaXRpb246IC13ZWJraXQtdHJhbnNmb3JtIDAuM3MgZWFzZS1pbi1vdXQ7XG4JdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuM3MgZWFzZS1pbi1vdXQ7XG4JdmVydGljYWwtYWxpZ246IHVuc2V0O1xufVxuLnNlai1kcm9wLWxpc3QtdHJpZ2dlci1zaG93bjo6YWZ0ZXIge1xuCS13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMTgwZGVnKTtcbgl0cmFuc2Zvcm06IHJvdGF0ZSgxODBkZWcpO1xufVxuLnNlai1lbmdpbmU6aG92ZXIge1xuCWJhY2tncm91bmQtY29sb3I6ICNFQUVBRUE7XG59XG4uc2VqLWVuZ2luZS1pY29uIHtcbglkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4JaGVpZ2h0OiAxNnB4O1xuCWJvcmRlcjogbm9uZTtcbglwYWRkaW5nOiAwO1xuCW1hcmdpbjogMCAzcHggMCAwO1xuCXZlcnRpY2FsLWFsaWduOiBzdWI7XG59XG4uc2VqLWRyb3AtbGlzdCB7XG4JZGlzcGxheTogbm9uZTtcbglmbG9hdDogbGVmdDtcbgltaW4td2lkdGg6IDEwMHB4O1xuCWZvbnQtc2l6ZTogMTNweDtcbgktbW96LWJveC1zaGFkb3c6IDJweCAycHggNXB4ICNjY2M7XG4JLXdlYmtpdC1ib3gtc2hhZG93OiAycHggMnB4IDVweCAjY2NjO1xuCWJveC1zaGFkb3c6IDJweCAycHggNXB4ICNjY2M7XG4JYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG59XG4uc2VqLWRyb3AtbGlzdD4gc2VqbGkge1xuCWJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjMzMzO1xufVxuLnNlai1kcm9wLWxpc3Q+IHNlamxpOmxhc3QtY2hpbGQge1xuCWJvcmRlci1ib3R0b206IG5vbmU7XG59IjsKCgl2YXIgY2F0ZWdvcnlNYXAgPSB7IC8vcnVsZXMg5ZKMIGVuZ2luZUxpc3Qg55qE5a+55bqUCgkJIndlYiI6ICLnvZHpobUiLAoJCSJtYXAiOiAi5Zyw5Zu+IiwKCQkidmlkZW8iOiAi6KeG6aKRIiwKCQkibXVzaWMiOiAi6Z+z5LmQIiwKCQkiaW1hZ2UiOiAi5Zu+54mHIiwKCQkiTW92aWUiOiAi5b2x6KeGIiwKCQkia25vd2xlZGdlIjogIui1hOaWmSIsCgkJInNvY2lhbGl0eSI6ICLnpL7kuqQiLAoJCSJzaG9wcGluZyI6ICLnvZHotK0iLAoJCSJkb3dubG9hZCI6ICLkuIvovb0iLAoJfTsKCgl2YXIgZW5naW5lTGlzdEludHJvZHVjZSA9IGdldE1TdHIoZnVuY3Rpb24oKSB7CgkJLyoKCQk8ZGl2PgoJCQk8aDI+5YiG57G76KeE5YiZ77yaPC9oMj4KCQkJPGk+44CQ5ZCN56ew5pyA5aW95LiN6KaB5pu05pS577yM57G75Yir6Lef56uZ54K56KeE5YiZ5pyJ5Liq5a+55bqU5YWz57O744CRPC9pPgoJCQk8cD4x44CBIumfs+S5kC0tbXVzaWMi77yM5Luj6KGo57G75Yir5pivICLpn7PkuZAiPC9wPgoJCTwvZGl2PgoJCTxkaXY+CgkJCTxoMj7mkJzntKLlvJXmk47op4TliJnvvJo8L2gyPgoJCQk8Y29kZT7lkI3np7DvvIzlnLDlnYDvvIglcyDlhbPplK7lrZfvvIk8L2NvZGU+CgkJCTxwPjHjgIEiLy8iIOW8gOWktOS8muiiq+W/veeVpTwvcD4KCQkJPHA+MuOAgeS4remXtOWIhumalOespu+8muS4reaWh+mAl+WPt++8iO+8jO+8iSDmiJYg6Iux5paH6YCX5Y+3ICsg56m65qC877yILCDvvIk8L3A+CgkJCTxwPjPjgIHnq5nngrnlm77moIfkuZ/lj6/nnIHnlaU8L3A+CgkJCTxwPjTjgIFQT1NUIOiMg+S+iyDnu7Tmma4sIGh0dHA6Ly9saWIuY3F2aXAuY29tL1Fpa2FuL1NlYXJjaC9JbmRleD9mcm9tPVFpa2FuX1NlYXJjaF9JbmRleC8lcG9zdCNrZXk9dSUzRCVzI2luZGV4S2V5PSVzPC9wPgoJCTwvZGl2PgoJCSAqLwoJfSk7CgoJZnVuY3Rpb24gaW50cm9kdWNlVG9IdG1sKCkgewoJCXJldHVybiBlbmdpbmVMaXN0SW50cm9kdWNlLnJlcGxhY2UoLyjvvIguKj/vvIkpL2csICI8c3Bhbj4kMTwvc3Bhbj4iKQoJCQkucmVwbGFjZSgvIiguKj8pIi9nLCAiPHNwYW4+JDE8L3NwYW4+Iik7Cgl9CgkKCWZ1bmN0aW9uIGlzVGhlU2FtZUNhdGVnb3J5KGMxLCBjMikgewoJCXJldHVybiAoY2F0ZWdvcnlNYXBbYzFdIHx8IGMxKSA9PSAoY2F0ZWdvcnlNYXBbYzJdIHx8IGMyKTsKCX0KCgl2YXIgcnVsZXMgPSBbIC8v5qC55o2u6KeE5YiZ5oqK5pCc57Si5byV5pOO5YiX6KGo5o+S5YWl5Yiw5oyH5a6a572R56uZCQkKCQl7Ly8g572R6aG1LOesrOS4gOS4quWPr+S7peW9k+aooeadv+eciwoJCQluYW1lOiAiZ29vZ2xl572R6aG15pCc57SiIiwgLy/kvaDopoHliqDovb3nmoTnvZHnq5nnmoTlkI3lrZco5pa55L6/6Ieq5bex5p+l5om+KQoJCQl1cmw6IC9eaHR0cHM/OlwvXC8oZW5jcnlwdGVkXC5nb29nbGVcLmNvbXx3d3dcLmdvb2dsZVwuKD8hY29cLmpwKVteXC9dezIsOX0pXC8od2ViaHB8c2VhcmNofCN8JHxcPykoPyEuKnRibT0pLywgLy/lnKjlk6rkuKrnvZHnq5nkuIrliqDovb0s5q2j5YiZLgoJCQltdXRhdGlvblRpdGxlOiB0cnVlLCAvL211dGF0aW9uVGl0bGXnm5Hop4bmoIfpopjnmoTlj5jljJYKCQkJZW5naW5lTGlzdDogIndlYiIsIC8v5Yqg6L295ZOq5Liq57G75Z6L55qE5YiX6KGoOgoJCQkvLyBrZXl3b3JkIOS9v+eUqCBjc3PpgInkuK3kuIDkuKpmb3JtIGlucHV05YWD57SgIOaIluiAhSDor6XpobnmmK/kuIDkuKrlh73mlbDvvIzkvb/nlKjov5Tlm57lgLwKCQkJLy8g5o+S5YWl5paH5qGjLOebuOWFswoJCQkvLyB0YXJnZXQg5bCG5byV5pOO6Lez6L2s5bel5YW35qCP5o+S5YWl5Yiw5paH5qGj55qE5p+Q5Liq5YWD57SgCgkJCS8vICjor7fkvb/nlKhjc3PljLnphY0s5q+U5aaCOiAiI3N1YmZvcm1fY3RybCIgKTsKCQkJLy8gd2hlcmUg5Zub56eNOgoJCQkvLyAiYmVmb3JlQmVnaW4iKOaPkuWFpeWIsOe7meWumuWFg+e0oOeahOWJjemdoikgOwoJCQkvLyAiYWZ0ZXJCZWdpbiIo5L2c5Li657uZ5a6a5YWD57Sg55qE56ys5LiA5Liq5a2Q5YWD57SgKSA7CgkJCS8vICJiZWZvcmVFbmQiICjkvZzkuLrnu5nlrprlhYPntKDnmoTmnIDlkI7kuIDkuKrlrZDlhYPntKApIDsKCQkJLy8gImFmdGVyRW5kIijmj5LlhaXliLDnu5nlrprlhYPntKDnmoTlkI7pnaIpOy4KCQl9LCB7CgkJCW5hbWU6ICJnb29nbGUuY28uanAiLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC93d3dcLmdvb2dsZVwuY29cLmpwXC8od2ViaHB8c2VhcmNofCN8JHxcPykoPzouKD8hJnRibT0pKSokLywKCQkJbXV0YXRpb25UaXRsZTogdHJ1ZSwKCQkJZW5naW5lTGlzdDogIndlYiIsCgkJCQoJCX0sIHsKCQkJbmFtZTogIlN0YXJ0cGFnZSIsCgkJCXVybDogL15odHRwcz86XC9cL1thLXowLTldezN9XC5zdGFydHBhZ2VcLmNvbVwvZG8vLAoJCQltdXRhdGlvblRpdGxlOiB0cnVlLAoJCQllbmdpbmVMaXN0OiAid2ViIiwKCQkJCgkJfSwgewoJCQluYW1lOiAiYmFpZHUg572R6aG15pCc57SiIiwgLy/lm6DkuLrkuI3liLfmlrDmkJzntKLvvIzmiYDku6Xnmb7luqbot7PnroDmtIHmkJzntKLkvJrmnInpl67popgKCQkJdXJsOiAvXmh0dHBzPzpcL1wvd3d3XC5iYWlkdVwuY29tXC8oPzpzLip8YmFpZHUuKnxcP2JuLip8XD90bi4qfCkkLywvL2Ju44CBdG7mmK/mjqjlub/kuYvnsbvnmoTkuJzopb8KCQkJbXV0YXRpb25UaXRsZTogdHJ1ZSwKCQkJZW5naW5lTGlzdDogIndlYiIsCgkJCWVuZEZpeDogZnVuY3Rpb24oKSB7CgkJCQkJaWYgKGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImxnIikpLmRpc3BsYXkgIT0gIm5vbmUiKSByZW1vdmUoKTsKCQkJCX0gLy/pgJrov4fmo4DmtYvpppbpobXlm77niYfliKTmlq3vvIzlnKjpppbpobXnmoTor53kuI3mmL7npLoKCQl9LCB7CgkJCW5hbWU6ICLnp5jov7kiLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC9taWppc291XC5jb21cL1w/cT0vLAoJCQllbmdpbmVMaXN0OiAid2ViIiwKCQl9LCB7CgkJCW5hbWU6ICJiaW5nKGdsb2JhbCkiLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC9nbG9iYWxcLmJpbmdcLmNvbVwvc2VhcmNoLywKCQkJZW5naW5lTGlzdDogIndlYiIsCgkJfSwgewoJCQluYW1lOiAi5b+F5bqU572R6aG15pCc57SiIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvKGNufHd3dylcLmJpbmdcLmNvbVwvc2VhcmNoLywKCQkJZW5naW5lTGlzdDogIndlYiIsCgkJfSwgewoJCQluYW1lOiAiMzYw5pCc57SiIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvd3d3XC5zb1wuY29tXC9zXD8vLAoJCQllbmdpbmVMaXN0OiAid2ViIiwKCQl9LCB7CgkJCW5hbWU6ICLmkJzni5fnvZHpobXmkJzntKIiLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC93d3dcLnNvZ291XC5jb21cLyg/OndlYnxzKS8sCgkJCWVuZ2luZUxpc3Q6ICJ3ZWIiLAoJCQlrZXl3b3JkOiAiI3VwcXVlcnkiLAoJCX0sIHsKCQkJbmFtZTogIumbheiZjue9kemhteaQnOe0oiIsCgkJCXVybDogL15odHRwcz86XC9cL3NlYXJjaFwueWFob29cLmNvbVwvc2VhcmNoLywKCQkJY2hhbmdlOiAibm9FeHRlcm5hbFJlcXVlc3RzIiwKCQkJZW5naW5lTGlzdDogIue9kemhtSIsCgkJfSwgewoJCQluYW1lOiAidHcueWFob28iLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC90d1wuc2VhcmNoXC55YWhvb1wuY29tXC9zZWFyY2gvLAoJCQljaGFuZ2U6ICJub0V4dGVybmFsUmVxdWVzdHMiLAoJCQllbmdpbmVMaXN0OiAid2ViIiwKCQl9LCB7CgkJCW5hbWU6ICJ5YWhvby5jby5qcCIsCgkJCXVybDogL15odHRwcz86XC9cL3NlYXJjaFwueWFob29cLmNvXC5qcFwvc2VhcmNoLywKCQkJZW5naW5lTGlzdDogIndlYiIsCgkJfSwgewoJCQluYW1lOiAiZHVja2R1Y2tnbyIsCgkJCXVybDogL15odHRwcz86XC9cL2R1Y2tkdWNrZ29cLmNvbVwvXD8vLAoJCQllbmdpbmVMaXN0OiAid2ViIiwKCQl9LAoJCS8vIOefpeivhgoJCXsKCQkJbmFtZTogIlNjaG9sYXIiLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC9zY2hvbGFyXC5nb29nbGUoPzpcLlxEezEsM30pezEsMn1cL3NjaG9sYXJcPy8sCgkJCWVuZ2luZUxpc3Q6ICLotYTmlpkiLAoJCX0sIHsKCQkJbmFtZTogIueZvuW6puWtpuacryIsCgkJCXVybDogL15odHRwcz86XC9cL3h1ZXNodVwuYmFpZHVcLmNvbVwvc1w/LywKCQkJZW5naW5lTGlzdDogIui1hOaWmSIsCgkJCQoJCX0sIHsKCQkJbmFtZTogIklBIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvYXJjaGl2ZVwub3JnXC9zZWFyY2hcLnBocC8sCgkJCWVuZ2luZUxpc3Q6ICLotYTmlpkiLAoJCQlrZXl3b3JkOiAiaW5wdXRbdHlwZT0ndGV4dCddW3ZhbHVlXSIsCgkJfSwgewoJCQluYW1lOiAi55m+5bqm55m+56eRIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvYmFpa2VcLmJhaWR1XC5jb21cLyhzZWFyY2h8aXRlbSkvLAoJCQllbmdpbmVMaXN0OiAi6LWE5paZIiwKCQl9LCB7CgkJCW5hbWU6ICLokIzlqJjnmb7np5EiLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC96aFwubW9lZ2lybFwub3JnXC8uLywKCQkJZW5naW5lTGlzdDogIui1hOaWmSIsCgkJCWtleXdvcmQ6IGZ1bmN0aW9uKCkgewoJCQkJaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzZWFyY2hUZXh0IikpIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJpbnB1dFt0eXBlPSdzZWFyY2gnXSIpLnZhbHVlOwoJCQkJZWxzZSByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZpcnN0SGVhZGluZyIpLnRleHRDb250ZW50OwoJCQl9LAoJCX0sIHsKCQkJbmFtZTogIkdvb2dsZSBib29rIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvd3d3XC5nb29nbGVcLmNvLnsxLDN9XC9zZWFyY2hcPy4qKCZidG5HPSVFNil8KHRibT1ia3MpLywKCQkJbXV0YXRpb25UaXRsZTogdHJ1ZSwKCQkJZW5naW5lTGlzdDogIui1hOaWmSIsCgkJfSwgewoJCQluYW1lOiAi5LqS5Yqo55m+56eRIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvW2Etel17MiwzfVwuYmFpa2VcLmNvbVwvW2Etel0vLAoJCQllbmdpbmVMaXN0OiAi6LWE5paZIiwKCQkJa2V5d29yZDogZnVuY3Rpb24oKSB7CgkJCQl2YXIgaW5wdXQ7CgkJCQlpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiYWNfaW5wdXQiKVswXSAhPSB1bmRlZmluZWQpIHsKCQkJCQlpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiYWNfaW5wdXQiKVswXS52YWx1ZSAhPSAiIikKCQkJCQkJaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJhY19pbnB1dCIpWzBdLnZhbHVlOwoJCQkJCWVsc2UgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImJsdWUiKVswXS5pbm5lckhUTUwgIT0gIiIpIGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiYmx1ZSIpWzBdLmlubmVySFRNTDsKCQkJCQllbHNlIGlucHV0ID0gZG9jdW1lbnQuZXZhbHVhdGUoIi8vaDEiLCBkb2N1bWVudCwgbnVsbCwgOSwgbnVsbCkuc2luZ2xlTm9kZVZhbHVlLmlubmVySFRNTDsKCQkJCX0gZWxzZSBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiYmx1ZSIpWzBdLmlubmVySFRNTCAhPSAiIikgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJibHVlIilbMF0uaW5uZXJIVE1MOwoJCQkJZWxzZSBpbnB1dCA9IGRvY3VtZW50LmV2YWx1YXRlKCIvL2gxIiwgZG9jdW1lbnQsIG51bGwsIDksIG51bGwpLnNpbmdsZU5vZGVWYWx1ZS5pbm5lckhUTUw7CgkJCQlyZXR1cm4gaW5wdXQ7CgkJCX0sCgkJfSwgewoJCQluYW1lOiAid2lraSIsCgkJCXVybDogL15odHRwcz86XC9cLy4uXC53aWtpcGVkaWFcLm9yZ1wvd1wvaW5kZXhcLnBocCg/IS4qXD9zZWFyY2g9KS8sCgkJCWVuZ2luZUxpc3Q6ICLotYTmlpkiLAoJCX0sIHsKCQkJbmFtZTogIndpa2lbWkhdIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvemhcLndpa2lwZWRpYVwub3JnXC8oPzp6aHx3aWtpXC98d1wvaW5kZXgucGhwXD9zZWFyY2g9KS8sCgkJCWVuZ2luZUxpc3Q6ICLotYTmlpkiLAoJCQlrZXl3b3JkOiBmdW5jdGlvbigpIHsKCQkJCWlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic2VhcmNoVGV4dCIpKXJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc2VhcmNoVGV4dD5pbnB1dCIpLnZhbHVlOwoJCQkJZWxzZSByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZpcnN0SGVhZGluZyIpLmNoaWxkTm9kZXNbMF0udGV4dENvbnRlbnQ7CgkJCX0sCgkJCQoJCX0sIHsKCQkJbmFtZTogIndpa2lbRU5dIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvZW5cLndpa2lwZWRpYVwub3JnXC8od2lraVwvfHdcL2luZGV4XC5waHBcP3NlYXJjaD0pLywKCQkJZW5naW5lTGlzdDogIui1hOaWmSIsCgkJCWtleXdvcmQ6IGZ1bmN0aW9uKCkgewoJCQkJaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzZWFyY2hUZXh0IikpCgkJCQkJcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzZWFyY2hUZXh0PmlucHV0IikudmFsdWU7CgkJCQllbHNlIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZmlyc3RIZWFkaW5nIikuY2hpbGROb2Rlc1swXS50ZXh0Q29udGVudDsKCQkJfSwKCQkJCgkJfSwgewoJCQluYW1lOiAid2lraVtKUF0iLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC9qYVwud2lraXBlZGlhXC5vcmdcLyh3aWtpXC98d1wvaW5kZXhcLnBocFw/c2VhcmNoPSkvLAoJCQllbmdpbmVMaXN0OiAi6LWE5paZIiwKCQkJa2V5d29yZDogZnVuY3Rpb24oKSB7CgkJCQlpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNlYXJjaFRleHQiKSlyZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NlYXJjaFRleHQ+aW5wdXQiKS52YWx1ZTsKCQkJCWVsc2UgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmaXJzdEhlYWRpbmciKS5jaGlsZE5vZGVzWzBdLnRleHRDb250ZW50OwoJCQl9LAoJCX0sIHsKCQkJbmFtZTogIueZvuW6puefpemBkyhzZWFyY2gpIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvemhpZGFvXC5iYWlkdVwuY29tXC9zZWFyY2gvLAoJCQllbmdpbmVMaXN0OiAi6LWE5paZIiwKCQl9LCB7CgkJCW5hbWU6ICLnmb7luqbnn6XpgZMoc2VhcmNoKSIsCgkJCXVybDogL15odHRwcz86XC9cL3poaWRhb1wuYmFpZHVcLmNvbVwvc2VhcmNoLywKCQkJZW5naW5lTGlzdDogIui1hOaWmSIsCgkJfSwgewoJCQluYW1lOiAi57u05pmuIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvbGliXC5jcXZpcFwuY29tXC9RaWthbi8sCgkJCWVuZ2luZUxpc3Q6ICLotYTmlpkiLAoJCX0sIHsKCQkJbmFtZTogIueIseWtpuacryIsCgkJCXVybDogL15odHRwcz86XC9cL3NcLml4dWVzaHVcLmNvbVwvXD9xLywKCQkJZW5naW5lTGlzdDogIui1hOaWmSIsCgkJfSwgewoJCQluYW1lOiAi55+l5LmOIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvd3d3XC56aGlodVwuY29tXC9zZWFyY2hcPy8sCgkJCWNoYW5nZTogIm5vRXh0ZXJuYWxSZXF1ZXN0cyIsCgkJCWVuZ2luZUxpc3Q6ICLotYTmlpkiLAoJCX0sIHsKCQkJbmFtZTogInN0YWNrb3ZlcmZsb3ciLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC9zdGFja292ZXJmbG93XC5jb21cL3NlYXJjaFw/LywKCQkJZW5naW5lTGlzdDogIui1hOaWmSIsCgkJfSwgewoJCQluYW1lOiAi55m+5bqm5paH5bqTIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvd2Vua3VcLmJhaWR1XC5jb21cL3NlYXJjaFw/LywKCQkJZW5naW5lTGlzdDogIui1hOaWmSIsCgkJfSwgewoJCQluYW1lOiAi6LGG5LiBIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvd3d3XC5kb2NpblwuY29tXC9zZWFyY2hcLmRvLywKCQkJZW5naW5lTGlzdDogIui1hOaWmSIsCgkJCQoJCX0sCgkJLy8g5Zyw5Zu+CgkJewoJCQluYW1lOiAi55m+5bqm5Zyw5Zu+IiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvbWFwXC5iYWlkdVwuY29tXC9cP25ld21hcC8sCgkJCWVuZ2luZUxpc3Q6ICJtYXAiLAoJCX0sIHsKCQkJbmFtZTogImdvb2dsZeWcsOWbviIsCgkJCXVybDogL15odHRwcz86XC9cL3d3d1wuZ29vZ2xlXC5jby57MSw0fVwvbWFwcy8sCgkJCWVuZ2luZUxpc3Q6ICJtYXAiLAoJCQltdXRhdGlvblRpdGxlOiB0cnVlLAoJCX0sIHsKCQkJbmFtZTogIkJpbmflnLDlm74iLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC9bXi5dKlwuYmluZ1wuY29tXC9kaXR1XC8vLAoJCQllbmdpbmVMaXN0OiAibWFwIiwKCQl9LCB7CgkJCW5hbWU6ICLmkJzni5flnLDlm74iLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC9tYXBcLnNvZ291XC5jb21cLyMvLAoJCQllbmdpbmVMaXN0OiAibWFwIiwKCQl9LAoJCS8vIOmfs+S5kAoJCXsKCQkJbmFtZTogIuWNg+WNg+mfs+S5kCIsCgkJCXVybDogL15odHRwcz86XC9cL211c2ljXC50YWloZVwuY29tXC9zZWFyY2gvLAoJCQllbmdpbmVMaXN0OiAibXVzaWMiLAoJCQlrZXl3b3JkOiIuY29udGFpbmVyIGlucHV0W3ZhbHVla2V5XSIKCQl9LCB7CgkJCW5hbWU6ICJRUemfs+S5kCIsCgkJCXVybDogL15odHRwcz86XC9cL3lcLnFxXC5jb21cL3BvcnRhbFwvc2VhcmNoLywKCQkJZW5naW5lTGlzdDogIm11c2ljIiwKCQkJa2V5d29yZDogIi5zZWFyY2hfaW5wdXRfX2lucHV0IiwKCQl9LCB7CgkJCW5hbWU6ICLpn7Pmgqblj7AiLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC9zb1wueWlueXVldGFpXC5jb21cL212XD8vLAoJCQllbmdpbmVMaXN0OiAibXVzaWMiLAoJCX0sIHsKCQkJbmFtZTogIuWImOW/l+i/myIsCgkJCXVybDogL15odHRwcz86XC9cL211c2ljXC5saXV6aGlqaW5cLmNuXC9cP25hbWUvLAoJCQllbmdpbmVMaXN0OiAibXVzaWMiLAoJCX0sIHsKCQkJbmFtZTogIuS4gOWQrOmfs+S5kCIsCgkJCXVybDogL15odHRwcz86XC9cL3NvXC4xdGluZ1wuY29tXC8oPyFseXJpYykvLAoJCQllbmdpbmVMaXN0OiAibXVzaWMiLAoJCQlldGM6IGZ1bmN0aW9uKCkgeyAvL+WkhOeQhuS4gOWQrOagueaNrnJlZmZlcuaLkue7neiuv+mXrueahOmXrumimAoJCQkJaWYgKGRvY3VtZW50LnJlZmVycmVyLmluZGV4T2YoImh0dHBzOi8vc28uMXRpbmcuY29tIikgPT0gLTEpIHsKCQkJCQlsb2NhdGlvbi5yZWxvYWQoKTsKCQkJCX0KCQkJfQoJCX0sIHsKCQkJbmFtZTogIuS4gOWQrOatjOivjSIsCgkJCXVybDogL15odHRwcz86XC9cL3NvXC4xdGluZ1wuY29tXC9seXJpYy8sCgkJCWVuZ2luZUxpc3Q6ICJtdXNpYyIsCgkJCWV0YzogZnVuY3Rpb24oKSB7IC8v5aSE55CG5LiA5ZCs5qC55o2ucmVmZmVy5ouS57ud6K6/6Zeu55qE6Zeu6aKYCgkJCQlpZiAoZG9jdW1lbnQucmVmZXJyZXIuaW5kZXhPZigiaHR0cHM6Ly9zby4xdGluZy5jb20iKSA9PSAtMSkgewoJCQkJCWxvY2F0aW9uLnJlbG9hZCgpOwoJCQkJfQoJCQl9CgkJfSwgewoJCQluYW1lOiAi5q2M6K+N6L+3IiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvZ2VjaW1pXC5jb21cL3NlYXJjaC8sCgkJCWVuZ2luZUxpc3Q6ICJtdXNpYyIsCgkJCWtleXdvcmQ6IGZ1bmN0aW9uKCkgewoJCQkJdmFyIGtleSA9IGxvY2F0aW9uLmhyZWYuc3BsaXQoImtleXdvcmQ9IilbMV07CgkJCQlyZXR1cm4ga2V5OwoJCQl9LAoJCX0sIHsKCQkJbmFtZTogInhpYW1pIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvd3d3XC54aWFtaVwuY29tXC9zZWFyY2gvLAoJCQllbmdpbmVMaXN0OiAibXVzaWMiLAoJCQlrZXl3b3JkOiBmdW5jdGlvbigpIHsKCQkJCXZhciBrZXkgPSBsb2NhdGlvbi5ocmVmLnNwbGl0KCJrZXk9IilbMV07CgkJCQlyZXR1cm4ga2V5OwoJCQl9LAoJCX0sCgkJLy8g5Zu+54mHCgkJewoJCQluYW1lOiAi6LC35q2M5Zu+54mHIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvXHd7MiwxMH1cLmdvb2dsZSg/OlwuXER7MSwzfSl7MSwyfVwvc2VhcmNoXD8oLip0YnM9c2JpKXwoLip0Ym09aXNjaCkvLAoJCQllbmdpbmVMaXN0OiAiaW1hZ2UiLAoJCX0sIHsKCQkJbmFtZTogIueZvuW6puWbvueJhyIsCgkJCXVybDogL15odHRwcz86XC9cL2ltYWdlXC5iYWlkdVwuYyhvbXxuKVwvc2VhcmNoLywKCQkJZW5naW5lTGlzdDogImltYWdlIiwKCQkJc3R5bGU6ICJtYXJnaW4tbGVmdDozNXB4IgoJCX0sIHsKCQkJbmFtZTogIjM2MOWbvueJhyIsCgkJCXVybDogL15odHRwcz86XC9cL1xpbWFnZVwuc29cLmNvbVwvaVw/LywKCQkJZW5naW5lTGlzdDogImltYWdlIiwKCQl9LCB7CgkJCW5hbWU6ICJiaW5n5Zu+54mHIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvLipcLmJpbmdcLmNvbVwvaW1hZ2VzXC9zZWFyY2gvLAoJCQllbmdpbmVMaXN0OiAiaW1hZ2UiLAoJCQkJCX0sIHsKCQkJbmFtZTogIuaQnOeLl+WbvueJhyIsCgkJCXVybDogL15odHRwcz86XC9cL3BpY1wuc29nb3VcLmNvbVwvcGljLywKCQkJZW5naW5lTGlzdDogImltYWdlIiwKCQl9LCB7CgkJCW5hbWU6ICLoirHnk6MiLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC9odWFiYW5cLmNvbVwvc2VhcmNoXC9cPy8sCgkJCWVuZ2luZUxpc3Q6ICJpbWFnZSIsCgkJfSwgewoJCQluYW1lOiAiZmxpY2tyIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvd3d3XC5mbGlja3JcLmNvbVwvc2VhcmNoLywKCQkJY2hhbmdlOiAibm9FeHRlcm5hbFJlcXVlc3RzIiwKCQkJZW5naW5lTGlzdDogImltYWdlIiwKCQkJa2V5d29yZDogZnVuY3Rpb24oKSB7CgkJCQl2YXIgaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJpbnB1dFt0eXBlPSd0ZXh0J11bdmFsdWVdIik7CgkJCQlpZiAoaW5wdXQpIHJldHVybiBpbnB1dC52YWx1ZTsKCQkJCWVsc2UgewoJCQkJCXZhciBtID0gbG9jYXRpb24uc2VhcmNoLm1hdGNoKC9xPShbXiZdKykvaSk7CgkJCQkJaWYgKG0pIHJldHVybiB0cnVlOwoJCQkJfQoJCQl9LAoJCX0sIHsKCQkJbmFtZTogInBpY3NlYXJjaCIsCgkJCXVybDogL15odHRwOlwvXC8oLi58Li4uKVwucGljc2VhcmNoXC5jb21cL2luZGV4XC5jZ2kvLAoJCQllbmdpbmVMaXN0OiAiaW1hZ2UiLAoJCX0sIHsKCQkJbmFtZTogInBpeGl2IiwKCQkJdXJsOiAvXmh0dHA6XC9cL3d3d1wucGl4aXZcLm5ldFwvc2VhcmNoXC5waHAvLAoJCQllbmdpbmVMaXN0OiAiaW1hZ2UiLAoJCQlrZXl3b3JkOiAiaW5wdXRbbmFtZT13b3JkXSIsCgkJfSwgewoJCQluYW1lOiAiZGV2aWFudGFydCIsCgkJCXVybDogL15odHRwcz86XC9cL3d3d1wuZGV2aWFudGFydFwuY29tXC9icm93c2VcL2FsbFwvLywKCQkJZW5naW5lTGlzdDogImltYWdlIiwKCQkJa2V5d29yZDogIiNzZWFyY2hJbnB1dCIsCgkJCWV0YzogZnVuY3Rpb24oKSB7IC8v6L+Z5Liq5piv5Li65LqG6LCD5pW057yW56CBCgkJCQlpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZigiJTI2JTIzIikgPT0gLTEgJiYgLyVbQS1GYS1mOC05XVtBLUZhLWYwLTldLy50ZXN0KHdpbmRvdy5sb2NhdGlvbi5ocmVmKSkgewoJCQkJCXZhciB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgicT0iKTsKCQkJCQl3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybFswXSArICJxPSIgKyB0b0VzY2FwZUNoYXJhY3RlcihkZWNvZGVVUklDb21wb25lbnQodXJsWzFdKSk7CgkJCQl9CgkJCX0KCQl9LAoJCS8vIOS4i+i9vQoJCXsKCQkJbmFtZTogInhpYW9oeCIsCgkJCXVybDogL15odHRwcz86XC9cL3d3d1wueGlhb2h4XC5vcmdcL3NlYXJjaFw/LywKCQkJZW5naW5lTGlzdDogImRvd25sb2FkIiwKCQkJa2V5d29yZDoiaW5wdXQuc2VhcmNoIgoJCX0sIHsKCQkJbmFtZTogInhpYW9oeCIsCgkJCXVybDogL15odHRwcz86XC9cL3YxXC54aWFvaHhcLm9yZ1wvc2VhcmNoXD8vLAoJCQllbmdpbmVMaXN0OiAiZG93bmxvYWQiLAoJCX0sIHsKCQkJbmFtZTogImNkc29zbyIsCgkJCXVybDogL15odHRwcz86XC9cL3d3d1wuY2Rzb3NvXC5jY1wvc2VhcmNoZXMvLAoJCQllbmdpbmVMaXN0OiAiZG93bmxvYWQiLAoJCX0sIHsKCQkJbmFtZTogImVkMjAwMCIsCgkJCXVybDogL15odHRwcz86XC9cL3d3d1wuZWQyMDAwXC5jb21cL0ZpbGVMaXN0XC5hc3AvLAoJCQllbmdpbmVMaXN0OiAiZG93bmxvYWQiLAoJCX0sIHsKCQkJbmFtZTogIkJUU09XIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvYnRpb1wucHdcL3NlYXJjaFwvLywKCQkJZW5naW5lTGlzdDogImRvd25sb2FkIiwKCQl9LCB7CgkJCW5hbWU6ICJsaW1ldG9ycmVudHMiLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC93d3dcLihsaW1ldG9ycmVudHNcLihpbmZvfGFzaWF8Y28pfGxpbWV0b3JcLnBybylcL3NlYXJjaFwvLywKCQkJZW5naW5lTGlzdDogImRvd25sb2FkIiwKCQl9LCB7CgkJCW5hbWU6ICJpZG9wZSIsCgkJCXVybDogL15odHRwcz86XC9cL2lkb3BlXC5zZVwvdG9ycmVudC1saXN0XC8vLAoJCQllbmdpbmVMaXN0OiAiZG93bmxvYWQiLAoJCX0sIHsJCQkKCQkJbmFtZTogInRvcnJlbnRraXR0eSIsCQoJCQl1cmw6IC9eaHR0cHM/OlwvXC8od3d3XC4pP3RvcnJlbnRraXR0eVwuKG5ldHxvcmd8dHYpXC9zZWFyY2hcLy8sCQoJCQllbmdpbmVMaXN0OiAiZG93bmxvYWQiLAkKCQkJa2V5d29yZDogZnVuY3Rpb24oKSB7CQoJCQkJcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoMiIpWzBdLmlubmVySFRNTC5zbGljZSgxOCwgLTEpOwkKCQkJfSwJCgkJfSwgCgkJLy/lvbHop4YKCQl7CgkJCW5hbWU6ICJ0aGVwaXJhdGViYXkiLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC90aGVwaXJhdGViYXlcLm9yZ1wvc2VhcmNoLywKCQkJZW5naW5lTGlzdDogIk1vdmllIiwKCQl9LCB7CgkJCW5hbWU6ICIxMzM3eCIsCgkJCXVybDogL15odHRwcz86XC9cL3d3d1wuMTM3N3hcLnRvXC8oc29ydC0pP3NlYXJjaC8sCgkJCWVuZ2luZUxpc3Q6ICJNb3ZpZSIsCgkJfSwgewoJCQluYW1lOiAiYnRkaWciLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC8od3d3XC4pP2J0ZGlnXC5jb21cL3NlYXJjaFw/LywKCQkJZW5naW5lTGlzdDogImRvd25sb2FkIiwKCQl9LCB7CgkJCW5hbWU6ICJraWNrYXNzKOabv+S7oykiLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC8oa2lja2FzczFcLnRvfGtpY2thc3N0b3JyZW50XC5jcnxrYXRcLmFtfGtpY2thc3N0b3JyZW50c1wudG8pXC91c2VhcmNoXC8vLAoJCQllbmdpbmVMaXN0OiAiTW92aWUiLAoJCQlrZXl3b3JkOiBmdW5jdGlvbigpIHsKCQkJCXZhciBrZXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjY29udGVudFNlYXJjaCIpLnZhbHVlOwoJCQkJaWYgKGtleSkgcmV0dXJuIGtleTsKCQkJCWVsc2Uga2V5ID0gZG9jdW1lbnQudGl0bGUuc3BsaXQoJyInKVsxXTsKCQkJCXJldHVybiBrZXk7CgkJCX0sCgkJfSwgewoJCQluYW1lOiAia2lja2FzcyjplZzlg48xKSIsCgkJCXVybDogL15odHRwcz86XC9cL2thdFwuc3hcL3U/c2VhcmNoLywKCQkJZW5naW5lTGlzdDogIk1vdmllIiwKCQl9LCB7CgkJCW5hbWU6ICJSQVJCRyIsCgkJCXVybDogL15odHRwcz86XC9cLyhyYXJiZ3Byb3h5XC5vcmd8cmFyYmdcLmlzfHJhcmJncHJ4XC5vcmcpXC90b3JyZW50c1wucGhwXD9zZWFyY2gvLAoJCQllbmdpbmVMaXN0OiAiTW92aWUiLAoJCX0sIHsKCQkJbmFtZTogInlvdXJiaXR0b3JyZW50IiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wveW91cmJpdHRvcnJlbnQyP1wuY29tXC9cP3EvLAoJCQllbmdpbmVMaXN0OiAiTW92aWUiLAoJCX0sIHsKCQkJbmFtZTogInBpYW55dWFuIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvd3d3XC5waWFueXVhblwubGFcL3NlYXJjaFw/cS8sCgkJCWVuZ2luZUxpc3Q6ICJNb3ZpZSIsCgkJfSwgewoJCQluYW1lOiAidG9ycmVudGZ1bmsyIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvd3d3XC50b3JyZW50ZnVuazJcLmNvbVwvW2Etel0vLAoJCQllbmdpbmVMaXN0OiAiZG93bmxvYWQiLAoJCX0sIHsKCQkJbmFtZTogImlkb3BlIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvem9vcWxlXC5jb21cL3NlYXJjaFw/LywKCQkJZW5naW5lTGlzdDogImRvd25sb2FkIiwKCQl9LCB7CgkJCW5hbWU6ICJ0b3Jsb2NrIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvd3d3XC50b3Jsb2NrMlwuY29tXC9bYS16QS1aXS8sCgkJCWVuZ2luZUxpc3Q6ICJNb3ZpZSIsCgkJCWtleXdvcmQ6IGZ1bmN0aW9uKCkgewoJCQkJdmFyIGtleSA9IGRvY3VtZW50LnRpdGxlLnNwbGl0KCdUb3JyZW50cycpWzBdLnJlcGxhY2UoJy0nLCcgJyk7CgkJCQlyZXR1cm4ga2V5OwoJCQl9LAoJCX0sIHsKCQkJbmFtZTogInRvcnJlbnQgZG93bmxvYWRzIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvd3d3XC50b3JyZW50ZG93bmxvYWRzXC5tZVwvc2VhcmNoXC9cP3NlYXJjaC8sCgkJCWVuZ2luZUxpc3Q6ICJNb3ZpZSIsCgkJCWtleXdvcmQ6ICJpbnB1dFtuYW1lPSdzZWFyY2gnXSIsCgkJfSwgewoJCQluYW1lOiAiZXh0cmF0b3JyZW50LnNpIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvZXh0cmF0b3JyZW50XC5zaVwvc2VhcmNoXC9cP3NlYXJjaC8sCgkJCWVuZ2luZUxpc3Q6ICJNb3ZpZSIsCgkJfSwgewkKCQkJbmFtZTogIlRvcnJlbnR6MiIsCQoJCQl1cmw6IC9eaHR0cHM/OlwvXC90b3JyZW50ejJcLmV1XC9zZWFyY2gvLAkKCQkJZW5naW5lTGlzdDogImRvd25sb2FkIiwJCgkJfSwKCQkvL0FDRwoJCXsKCQkJbmFtZTogImRtaHkiLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC9zaGFyZVwuZG1oeVwub3JnXC90b3BpY3NcL2xpc3QvLAoJCQllbmdpbmVMaXN0OiAiQUNHIiwKCQkJa2V5d29yZDogZnVuY3Rpb24oKSB7CgkJCQl2YXIga2V5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2tleXdvcmQiKS52YWx1ZTsKCQkJCWlmIChrZXkpIHJldHVybiBrZXk7CgkJCQllbHNlIGtleSA9IGRvY3VtZW50LnRpdGxlLnNwbGl0KC/jgIx844CNLylbMV07CgkJCQlyZXR1cm4ga2V5OwoJCQl9LAoJCX0sIHsKCQkJbmFtZTogIlRva3lvdG9zaG8iLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC93d3dcLnRva3lvdG9zaG9cLmluZm9cL3NlYXJjaFwucGhwLywKCQkJZW5naW5lTGlzdDogIkFDRyIsCgkJfSwgewoJCQluYW1lOiAi77yKTWlvQlTvvIoiLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC93d3dcLm1pb2J0XC5jb21cL3NlYXJjaFwucGhwLywKCQkJZW5naW5lTGlzdDogIkFDRyIsCgkJCWtleXdvcmQ6ICIjdG9wc2VhcmNoIiwKCQl9LCB7CgkJCW5hbWU6ICLniLHmgYvliqjmvKsiLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC93d3dcLmtpc3NzdWJcLm9yZ1wvc2VhcmNoXC5waHAvLAoJCQllbmdpbmVMaXN0OiAiQUNHIiwKCQkJa2V5d29yZDogIiN0b3BzZWFyY2giLAoJCX0sIHsKCQkJbmFtZTogIk1pa2FuIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvbWlrYW5hbmlcLm1lXC9Ib21lXC9TZWFyY2hcP3NlYXJjaHN0ci8sCgkJCWVuZ2luZUxpc3Q6ICJBQ0ciLAoJCX0sIHsKCQkJbmFtZTogImFjZ3NvdSIsCgkJCXVybDogL15odHRwcz86XC9cL3d3d1wuYWNnc291XC5jb21cL3NlYXJjaFwucGhwLywKCQkJZW5naW5lTGlzdDogIkFDRyIsCgkJCWtleXdvcmQ6ICIjdG9wc2VhcmNoIiwKCQl9LCB7CgkJCW5hbWU6ICIzNmRtIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvd3d3XC4zNmRtXC5jb21cL3NlYXJjaFwucGhwLywKCQkJZW5naW5lTGlzdDogIkFDRyIsCgkJCWtleXdvcmQ6ICIjdG9wc2VhcmNoIiwKCQl9LCB7CgkJCW5hbWU6ICJLT1RPTUkgUlNTIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvbW9lNHNhbGVcLmluXC9cP2t3LywKCQkJZW5naW5lTGlzdDogIkFDRyIsCgkJfSwgewoJCQluYW1lOiAiQUNH54uX54uXIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvYnRcLmFjZ1wuZ2dcL3NlYXJjaC8sCgkJCWVuZ2luZUxpc3Q6ICJBQ0ciLAoJCQlrZXl3b3JkOiAiI3RvcHNlYXJjaCIsCgkJfSwgewoJCQluYW1lOiAiQUNHLlJJUCIsCgkJCXVybDogL15odHRwcz86XC9cL2FjZ1wucmlwXC9cP3Rlcm0vLAoJCQllbmdpbmVMaXN0OiAiQUNHIiwKCQl9LCB7CgkJCW5hbWU6ICJueWFhLnNpIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvbnlhYVwuKHNpfHVrKVwvXD8vLAoJCQllbmdpbmVMaXN0OiAiQUNHIiwKCQl9LCB7CgkJCW5hbWU6ICJOeWFhcGFudHN1IiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvKG55YWFcLnx3d3dcLnwpPyhwYW50c3VcLmNhdHxueWFhXC5wdClcL3NlYXJjaFw/LywKCQkJZW5naW5lTGlzdDogIkFDRyIsCgkJfSwgewoJCQluYW1lOiAic2hhbmEgcHJvamVjdCIsCgkJCXVybDogL15odHRwcz86XC9cL3d3d1wuc2hhbmFwcm9qZWN0XC5jb21cL3NlYXJjaC8sCgkJCWVuZ2luZUxpc3Q6ICJBQ0ciLAoJCX0sIHsKCQkJbmFtZTogIkFjZ25YIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvd3d3XC5hY2dueFwuc2VcL3NlYXJjaFwucGhwXD8vLAoJCQllbmdpbmVMaXN0OiAiQUNHIiwKCQkJa2V5d29yZDogIiN0b3BzZWFyY2giLAoJCX0sIHsKCQkJbmFtZTogIuacq+aXpeWKqOa8qyIsCgkJCXVybDogL15odHRwcz86XC9cL3NoYXJlXC5hY2dueFwuc2VcL3NlYXJjaFwucGhwXD8vLAoJCQllbmdpbmVMaXN0OiAiQUNHIiwKCQkJa2V5d29yZDogIiN0b3BzZWFyY2giLAoJCX0sIHsKCQkJbmFtZTogIkFuaVJlbmEiLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC93d3dcLmFuaXJlbmFcLmNvbVwvXD9zLywKCQkJZW5naW5lTGlzdDogIkFDRyIsCgkJfSwKCQkvL1N1a2ViZWkKCQl7CgkJCW5hbWU6ICJHR0Jhc2VzIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvd3d3XC5nZ2Jhc2VzXC5jb21cL3NlYXJjaC8sCgkJCWVuZ2luZUxpc3Q6ICJTdWtlYmVpIiwKCQl9LCB7CgkJCW5hbWU6ICJzdWtlYmVpLm55YWEuc2kiLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC9zdWtlYmVpXC5ueWFhXC4oc2l8dWspXC9cPy8sCgkJCWVuZ2luZUxpc3Q6ICJTdWtlYmVpIiwKCQl9LHsKCQkJbmFtZTogIk5heWFwYW50c3Uoc3VrZWJlaSkiLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC9zdWtlYmVpXC4ocGFudHN1XC5jYXR8bnlhYVwucHQpXC9zZWFyY2hcPy8sCgkJCWVuZ2luZUxpc3Q6ICJTdWtlYmVpIiwKCQl9LCB7CgkJCW5hbWU6ICJhbml4IiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvd3d3XC5hbml4XC5tb2VcL3NlYXJjaFwucGhwXD8vLAoJCQllbmdpbmVMaXN0OiAiU3VrZWJlaSIsCgkJCWtleXdvcmQ6ICIjdG9wc2VhcmNoIiwKCQl9LCB7CgkJCW5hbWU6ICJBbmlEZXgiLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC9hbmlkZXhcLmluZm9cL1w/cS8sCgkJCWVuZ2luZUxpc3Q6ICJTdWtlYmVpIiwKCQl9LAoJCS8v5a2X5bmVCgkJewoJCQluYW1lOiAic3Vib20iLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC93d3dcLnN1Ym9tXC5uZXRcL3NlYXJjaC8sCgkJCWVuZ2luZUxpc3Q6ICJkb3dubG9hZCIsCgkJfSwgewoJCQluYW1lOiAic3ViaGQiLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC9zdWJoZFwubGFcL3NlYXJjaC8sCgkJCWVuZ2luZUxpc3Q6ICJkb3dubG9hZCIsCgkJCWtleXdvcmQ6ICIjc24iLAoJCX0sIHsKCQkJbmFtZTogIuWwhOaJi+e9kSjkvKopIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvYXNzcnRcLm5ldFwvc3ViXC9cP3MvLAoJCQllbmdpbmVMaXN0OiAiZG93bmxvYWQiLAoJCX0sIHsKCQkJbmFtZTogIlN1YnNjZW5lIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvc3Vic2NlbmVcLmNvbVwvc3VidGl0bGVzXC9zZWFyY2hieXRpdGxlLywKCQkJZW5naW5lTGlzdDogImRvd25sb2FkIiwKCQl9LCB7CgkJCW5hbWU6ICJSM1NVQiIsCgkJCXVybDogL15odHRwcz86XC9cL3Izc3ViXC5jb21cL3NlYXJjaFwucGhwLywKCQkJZW5naW5lTGlzdDogImRvd25sb2FkIiwKCQl9LAoJCS8vIOi0reeJqQoJCXsKCQkJbmFtZTogIuS4gOa3mCIsCgkJCXVybDogL15odHRwcz86XC9cL3d3dz9cLmV0YW9cLmNvbVwvc2VhcmNoLywKCQkJZW5naW5lTGlzdDogInNob3BwaW5nIiwKCQkJCgkJfSwgewoJCQluYW1lOiAi5Lqs5LicIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvc2VhcmNoXC5qZFwuY29tXC8oU3xzKWVhcmNoXD8vaSwKCQkJZW5naW5lTGlzdDogInNob3BwaW5nIiwKCQkJCgkJfSwgewoJCQluYW1lOiAi5reY5a6d5pCc57SiIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvKHN8aGFvc291XC5haSlcLnRhb2Jhb1wuY29tXC9zZWFyY2gvLAoJCQllbmdpbmVMaXN0OiAic2hvcHBpbmciLAoJCX0sIHsKCQkJbmFtZTogIuaYk+i/hSIsCgkJCXVybDogL15odHRwcz86XC9cL3NlYXJjaGV4XC55aXh1blwuY29tXC9odG1sXD8vLAoJCQllbmdpbmVMaXN0OiAic2hvcHBpbmciLAoJCX0sIHsKCQkJbmFtZTogIuiLj+WugSIsCgkJCXVybDogL15odHRwcz86XC9cL3NlYXJjaFwuc3VuaW5nXC5jb21cLy8sCgkJCWVuZ2luZUxpc3Q6ICJzaG9wcGluZyIsCgkJfSwgewoJCQluYW1lOiAi5aSp54yrIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvbGlzdFwudG1hbGxcLmNvbVwvXC8/c2VhcmNoLywKCQkJZW5naW5lTGlzdDogInNob3BwaW5nIiwKCQl9LCB7CgkJCW5hbWU6ICLkuprpqazpgIoiLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC93d3dcLmFtYXpvblwuY25cL3NcL3JlZi8sCgkJCWVuZ2luZUxpc3Q6ICJzaG9wcGluZyIsCgkJfSwgewoJCQluYW1lOiAi5b2T5b2TIiwKCQkJdXJsOiAvXmh0dHBzPzpcL1wvc2VhcmNoXC5kYW5nZGFuZ1wuY29tXC9cP2tleS8sCgkJCWVuZ2luZUxpc3Q6ICJzaG9wcGluZyIKCQl9LCB7CgkJCW5hbWU6ICJuZXdlZ2ciLAoJCQl1cmw6IC9eaHR0cHM/OlwvXC93d3dcLm5ld2VnZ1wuY29tXC50d1wvc2VhcmNoXD8vLAoJCQllbmdpbmVMaXN0OiAic2hvcHBpbmciLAoJCQlrZXl3b3JkOiAiI3NlYXJjaHdvcmQiLAoJCX0sCgldOwoKCWZ1bmN0aW9uIGxvYWRQcmVmcygpIHsKCQlwcmVmcy5kaXNwbGF5ID0gR01fZ2V0VmFsdWUoImRpc3BsYXkiLCBwcmVmcy5kaXNwbGF5KTsKCQlwcmVmcy5vcGVuSW5OZXdUYWIgPSBHTV9nZXRWYWx1ZSgib3BlbkluTmV3VGFiIiwgcHJlZnMub3BlbkluTmV3VGFiKTsKCQlwcmVmcy5kZWJ1ZyA9IEdNX2dldFZhbHVlKCJkZWJ1ZyIsIHByZWZzLmRlYnVnKTsKCQlwcmVmcy5lbmdpbmVMaXN0RGF0YVR5cGUgPSBHTV9nZXRWYWx1ZSgiZW5naW5lTGlzdERhdGFUeXBlIiwgcHJlZnMuZW5naW5lTGlzdERhdGFUeXBlKTsKCQllbmdpbmVMaXN0RGF0YS5jdXN0b20gPSBHTV9nZXRWYWx1ZSgiZW5naW5lTGlzdCIpIHx8ICIiOwoJCXJlbG9hZERlYnVnKCk7Cgl9CgoJZnVuY3Rpb24gb3BlblByZWZzKCkgewoJCQl2YXIgZCA9IGRvY3VtZW50OwoJCQl2YXIgb24gPSBmdW5jdGlvbihub2RlLCBlLCBmKSB7CgkJCQlub2RlLmFkZEV2ZW50TGlzdGVuZXIoZSwgZiwgZmFsc2UpOwoJCQl9OwoKCQkJdmFyICQgPSBmdW5jdGlvbihzKSB7CgkJCQlyZXR1cm4gZC5nZXRFbGVtZW50QnlJZCgic2VqLXByZWZzLSIgKyBzKTsKCQkJfTsKCQkJaWYgKCQoInNldHVwIikpIHJldHVybjsKCgkJCXZhciBzdHlsZU5vZGUgPSBHTV9hZGRTdHlsZSgiXAoJCSNzZWotcHJlZnMtc2V0dXAgeyBwb3NpdGlvbjpmaXhlZDt6LWluZGV4OjIxNDc0ODM2NDc7dG9wOjM4cHg7cmlnaHQ6NjBweDtwYWRkaW5nOjIwcHggMzBweCAxMHB4O2JhY2tncm91bmQ6I2VlZTt3aWR0aDo1MDBweDtib3JkZXI6MXB4IHNvbGlkIGJsYWNrOyB9XAoJCSNzZWotcHJlZnMtc2V0dXAgKiB7IGNvbG9yOmJsYWNrO3RleHQtYWxpZ246bGVmdDtsaW5lLWhlaWdodDpub3JtYWw7Zm9udC1zaXplOjEycHg7IH1cCgkJI3Nlai1wcmVmcy1zZXR1cCBpIHsgJ01pY3Jvc29mdCBZYUhlaSBVSScsJ+W+rui9r+mbhem7kScsQXJpYWw7IH1cCgkJI3Nlai1wcmVmcy1zZXR1cCBhIHsgY29sb3I6YmxhY2s7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZTsgfVwKCQkjc2VqLXByZWZzLXNldHVwIGRpdiB7IHRleHQtYWxpZ246Y2VudGVyO2ZvbnQtc2l6ZToxNHB4OyB9XAoJCSNzZWotcHJlZnMtdGl0bGUgeyBmb250LXdlaWdodDpib2xkOyB9XAoJCSNzZWotcHJlZnMtc2V0dXAgdWwgeyBtYXJnaW46MTVweCAwIDAgMDtwYWRkaW5nOjA7bGlzdC1zdHlsZTpub25lO2JhY2tncm91bmQ6I2VlZTtib3JkZXI6MDsgfVwKCQkjc2VqLXByZWZzLXNldHVwIGlucHV0LCAjc2VqLXByZWZzLXNldHVwIHNlbGVjdCB7IGJvcmRlcjoxcHggc29saWQgZ3JheTtwYWRkaW5nOjJweDtiYWNrZ3JvdW5kOndoaXRlOyBoZWlnaHQ6IGF1dG87IH1cCgkJI3Nlai1wcmVmcy1zZXR1cCBsaSB7IG1hcmdpbjowO3BhZGRpbmc6NnB4IDA7dmVydGljYWwtYWxpZ246bWlkZGxlO2JhY2tncm91bmQ6I2VlZTtib3JkZXI6MCB9XAoJCSNzZWotcHJlZnMtc2V0dXAgdGV4dGFyZWEgeyB3aWR0aDo5OCU7IGhlaWdodDo2MHB4OyBtYXJnaW46M3B4IDA7IGZvbnQtZmFtaWx5OiAnTWljcm9zb2Z0IFlhSGVpIFVJJywn5b6u6L2v6ZuF6buRJyxBcmlhbDsgfVwKCQkjc2VqLXByZWZzLXNldHVwIGJ1dHRvbiB7IHBhZGRpbmc6IDFweCA2cHg7IGZvbnQtc2l6ZTogMTJweDsgbWFyZ2luLXJpZ2h0OiAzcHg7IH1cCgkJI3Nlai1wcmVmcy1zZXR1cCAjdG9wLWJ1dHRvbnN7dGV4dC1hbGlnbjogbGVmdDt9XAoJCSNzZWotcHJlZnMtc2V0dXAgaW1nIHsgZGlzcGxheTogaW5pdGlhbDsgfVwKCQkjc2VqLXByZWZzLW1pbml0aXAgeyBwb3NpdGlvbjogYWJzb2x1dGU7IGJhY2tncm91bmQ6ICNmZjk7IGJvcmRlcjogMXB4IHNvbGlkICNGOTY7IHBhZGRpbmc6IDEwcHg7IGxlZnQ6IC00MDBweDsgdG9wOiAyMDBweDsgcmlnaHQ6IDU3MHB4OyB9XAoJCSNzZWotcHJlZnMtbWluaXRpcCBwIHsgbWFyZ2luOiA1cHggNXB4OyB9XAoJCSNzZWotcHJlZnMtbWluaXRpcCBzcGFuIHsgY29sb3I6IGdyZWVuOyB9XAoJCSNzZWotcHJlZnMtZGVidWcgeyBtYXJnaW4tbGVmdDogMThweDsgfVwKCQkiKTsKCgkJCXZhciBkaXYgPSBkLmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCQlkaXYuaWQgPSAic2VqLXByZWZzLXNldHVwIjsKCQkJZC5ib2R5LmFwcGVuZENoaWxkKGRpdik7CgkJCWRpdi5pbm5lckhUTUwgPSAiXAoJCTxkaXYgaWQ9J3RvcC1idXR0b25zJz5cCgkJCTxidXR0b24gaWQ9J3Nlai1wcmVmcy1vaycgdGl0bGU9J+eri+WNs+eUn+aViCc+4oiaIOehruWumjwvYnV0dG9uPlwKCQkJPGJ1dHRvbiBpZD0nc2VqLXByZWZzLWNhbmNlbCcgdGl0bGU9J+WPlua2iOacrOasoeiuvuWumu+8jOaJgOaciemAiemhuei/mOWOnyc+WCDlj5bmtog8L2J1dHRvbj5cCgkJPC9kaXY+XAoJCTxkaXYgaWQ9J3Nlai1wcmVmcy10aXRsZSc+U2VhcmNoRW5naW5lSnVtcENFIOiuvue9rjwvZGl2PlwKCQk8dWw+XAoJCQk8bGk+XAoJCQkJPGlucHV0IHR5cGU9J2NoZWNrYm94JyBpZD0nc2VqLXByZWZzLW9wZW5Jbk5ld1RhYicgLz4g5Zyo5paw6aG16Z2i5omT5byAXAoJCQkJPGlucHV0IHR5cGU9J2NoZWNrYm94JyBpZD0nc2VqLXByZWZzLWRlYnVnJyAvPiDosIPor5XmqKHlvI9cCgkJCTwvbGk+XAoJCQk8bGk+XAoJCQkJ5pCc57Si5YiX6KGo54mI5pys77yaXAoJCQkJPHNlbGVjdCBpZD0nc2VqLXByZWZzLWVuZ2luZUxpc3REYXRhVHlwZScgPlwKCQkJCQk8b3B0aW9uIHZhbHVlPSdjdXN0b20nPueUqOaIt+eJiOacrDwvb3B0aW9uPlwKCQkJCQk8b3B0aW9uIHZhbHVlPSd0ZWQ0MjMnPnRlZDQyM+eJiOacrDwvb3B0aW9uPlwKCQkJCTwvc2VsZWN0PlwKCQkJCTxhIHN0eWxlPSdtYXJnaW4tbGVmdDogMjBweDsnIHRhcmdldD0nX2JsYW5rJyBocmVmPSdodHRwczovL2dyZWFzeWZvcmsub3JnL3poLUNOL3NjcmlwdHMvMTYxOTMvZmVlZGJhY2snIHRpdGxlPSfpgJrov4flj43ppojnu5nkvZzogIXliqDlhaXkvaDnmoTniYjmnKwnPuWKoOWFpeS9oOeahOeJiOacrO+8nzwvYT5cCgkJCTwvbGk+XAoJCQk8bGk+6Ieq5a6a5LmJ5pCc57Si5YiX6KGoOlwKCQkJCTxzZWotaSBpZD0nc2VqLXByZWZzLWVuZ2luZUxpc3QtdGlwJz4oPyk8L3Nlai1pPlwKCQkJCTxkaXY+XAoJCQkJCTx0ZXh0YXJlYSBpZD0nc2VqLXByZWZzLWVuZ2luZUxpc3QnIHN0eWxlPSdoZWlnaHQ6IDM1MHB4Oyc+PC90ZXh0YXJlYT5cCgkJCQk8L2Rpdj5cCgkJCTwvbGk+XAoJCTwvdWw+XAoJCTxkaXYgaWQ9J3Nlai1wcmVmcy1taW5pdGlwJyBzdHlsZT0nZGlzcGxheTogbm9uZTsnPiIgKwoJCQkJaW50cm9kdWNlVG9IdG1sKCkgKyAiXAoJCTwvZGl2PlwKCQkiOwoJCQlkaXYgPSBudWxsOwoKCQkJdmFyIGVuZ2luZUxpc3RUeXBlX3NlbCA9ICQoImVuZ2luZUxpc3REYXRhVHlwZSIpLAoJCQkJZW5naW5lTGlzdF90eHQgPSAkKCJlbmdpbmVMaXN0Iik7CgoJCQl2YXIgY2xvc2UgPSBmdW5jdGlvbigpIHsKCQkJCWlmIChzdHlsZU5vZGUpIHsKCQkJCQlzdHlsZU5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZU5vZGUpOwoJCQkJfQoJCQkJdmFyIGRpdiA9ICQoInNldHVwIik7CgkJCQlkaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkaXYpOwoJCQl9OwoKCQkJb24oJCgib2siKSwgImNsaWNrIiwgZnVuY3Rpb24oKSB7CgkJCQlHTV9zZXRWYWx1ZSgib3BlbkluTmV3VGFiIiwgcHJlZnMub3BlbkluTmV3VGFiID0gISEkKCJvcGVuSW5OZXdUYWIiKS5jaGVja2VkKTsKCQkJCUdNX3NldFZhbHVlKCJkZWJ1ZyIsIHByZWZzLmRlYnVnID0gISEkKCJkZWJ1ZyIpLmNoZWNrZWQpOwoJCQkJR01fc2V0VmFsdWUoImVuZ2luZUxpc3REYXRhVHlwZSIsIHByZWZzLmVuZ2luZUxpc3REYXRhVHlwZSA9IGVuZ2luZUxpc3RUeXBlX3NlbC52YWx1ZSk7CgoJCQkJaWYgKGVuZ2luZUxpc3RUeXBlX3NlbC52YWx1ZSA9PSAiY3VzdG9tIikgewoJCQkJCUdNX3NldFZhbHVlKCJlbmdpbmVMaXN0IiwgZW5naW5lTGlzdERhdGEuY3VzdG9tID0gZW5naW5lTGlzdF90eHQudmFsdWUpOwoJCQkJfQoKCQkJCS8vIOWIt+aWsOW3peWFt+adoQoJCQkJcmVtb3ZlKCk7CgkJCQlyZWxvYWREZWJ1ZygpOwoJCQkJZGVidWcoInJ1biIpOwoJCQkJcnVuKCk7CgkJCQljbG9zZSgpOwoJCQl9KTsKCgkJCW9uKCQoImNhbmNlbCIpLCAiY2xpY2siLCBjbG9zZSk7CgoJCQkkKCJlbmdpbmVMaXN0LXRpcCIpLm9uY2xpY2sgPSBmdW5jdGlvbigpIHsKCQkJCXZhciBtaW5pdGlwID0gJCgibWluaXRpcCIpOwoJCQkJbWluaXRpcC5zdHlsZS5kaXNwbGF5ID0gKG1pbml0aXAuc3R5bGUuZGlzcGxheSA9PSAiYmxvY2siKSA/ICJub25lIiA6ICJibG9jayI7CgkJCX07CgoJCQllbmdpbmVMaXN0VHlwZV9zZWwub25jaGFuZ2UgPSBmdW5jdGlvbigpIHsKCQkJCWVuZ2luZUxpc3RfdHh0LnZhbHVlID0gZW5naW5lTGlzdERhdGFbZW5naW5lTGlzdFR5cGVfc2VsLnZhbHVlXS50cmltKCk7CgkJCX07CgoJCQkkKCJvcGVuSW5OZXdUYWIiKS5jaGVja2VkID0gcHJlZnMub3BlbkluTmV3VGFiOwoJCQkkKCJkZWJ1ZyIpLmNoZWNrZWQgPSBwcmVmcy5kZWJ1ZzsKCQkJZW5naW5lTGlzdFR5cGVfc2VsLnZhbHVlID0gcHJlZnMuZW5naW5lTGlzdERhdGFUeXBlOwoKCQkJZW5naW5lTGlzdF90eHQudmFsdWUgPSBlbmdpbmVMaXN0RGF0YVtwcmVmcy5lbmdpbmVMaXN0RGF0YVR5cGVdLnRyaW0oKTsKCQl9CgkJLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS3lj6/orr7nva7pobnnu5PmnZ8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCXZhciBkZWJ1ZzsKCglmdW5jdGlvbiByZWxvYWREZWJ1ZygpIHsKCQlkZWJ1ZyA9IHByZWZzLmRlYnVnID8gY29uc29sZS5sb2cuYmluZChjb25zb2xlKSA6IGZ1bmN0aW9uKCkge307Ly9jb25zb2xlLmRlYnVn5ZyoY2hyb21l6YeM5aSx5Y675L2c55SoCgl9CgoKCWZ1bmN0aW9uIGdldFBvc3RGb3JtSFRNTChuYW1lLCB1cmwsIGFyZ3MsIG5ld1RhYikgeyAvL+iOt+WPliBtZXRob2Qg5Li6IFBPU1Qg55qE6KGo5Y2V55qEIEhUTUwKCQl2YXIgZm9ybSA9ICI8Zm9ybSBtZXRob2Q9J3Bvc3QnIiArCgkJCSIgYWN0aW9uPSciICsgdXJsICsgIicgaWQgPSdzZWpfIiArIG5hbWUgKyAiJyIgKwoJCQkobmV3VGFiID8gIiB0YXJnZXQ9J19ibGFuayciIDogIiIpICsKCQkJIj4iOwoJCWZvciAodmFyIGFyZyBpbiBhcmdzKSB7CgkJCXZhciBpbnB1dCA9ICI8aW5wdXQgdHlwZT0naGlkZGVuJyIgKwoJCQkJIiBuYW1lPSciICsgYXJnICsgIiciICsKCQkJCSIgdmFsdWU9JyIgKyBhcmdzW2FyZ10gKyAiJyIgKwoJCQkJIiAvPiI7CgkJCWZvcm0gKz0gaW5wdXQ7CgkJfQoJCWZvcm0gKz0gIjwvZm9ybT4iOwoJCXJldHVybiBmb3JtOwoJfQoKCWZ1bmN0aW9uIHdyYXBUb0hpZGUoaHRtbCkgeyAvL+WMheijhSBIVE1MIOWFg+e0oOS7o+eggeS7pemakOiXj+ivpeWFg+e0oAoJCXJldHVybiAiPHNwYW4gc3R5bGU9J2Rpc3BsYXk6bm9uZTsnPiIgKyBodG1sICsgIjwvc3Bhbj4iOwoJfQoKCWZ1bmN0aW9uIHRvUkUob2JqKSB7CgkJaWYgKG9iaiBpbnN0YW5jZW9mIFJlZ0V4cCkgewoJCQlyZXR1cm4gb2JqOwoJCX0gZWxzZSBpZiAob2JqIGluc3RhbmNlb2YgQXJyYXkpIHsKCQkJcmV0dXJuIG5ldyBSZWdFeHAob2JqWzBdLCBvYmpbMV0pOwoJCX0gZWxzZSB7CgkJCXJldHVybiBuZXcgUmVnRXhwKG9iaik7CgkJfQoJfQoKCWZ1bmN0aW9uIGdldE1TdHIoZnVuYykgewoJCXZhciBsaW5lcyA9IGZ1bmMudG9TdHJpbmcoKTsKCQlsaW5lcyA9IGxpbmVzLnN1YnN0cmluZyhsaW5lcy5pbmRleE9mKCIvKiIpICsgMywgbGluZXMubGFzdEluZGV4T2YoIiovIikpOwoJCXJldHVybiBsaW5lczsKCX0KCglmdW5jdGlvbiB0b0VzY2FwZUNoYXJhY3RlcihzdHIpIHsgLy9kQeS9v+eUqElTTy04ODU5LTHnvJbnoIHvvIznvZHpobXlj6rog73kvb/nlKjovazkuYnlrZfnrKYoVVRGMTYp5p2l5pi+56S65YW25LuW5a2X56ymIOi/memHjOaYr+Wvuei9rOS5ieWtl+espihVVEYxNinov5vooYznvJbnoIEKCQl2YXIgbGVuZ3RoID0gc3RyLmxlbmd0aDsKCQl2YXIgcmV0ID0gW107CgkJdmFyIGNoYXJhY3RlcjsKCQl2YXIgY2hhckNvZGU7CgkJdmFyIGdDb2RlOwoJCXZhciBuZVJlZyA9IC9bXGRBLXpdLzsKCQlmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CgkJCWNoYXJDb2RlID0gc3RyLmNoYXJDb2RlQXQoaSk7CgkJCWlmIChjaGFyQ29kZSA8PSAxMjgpIHsKCQkJCWNoYXJhY3RlciA9IHN0ci5jaGFyQXQoaSk7CgkJCQlpZiAobmVSZWcudGVzdChjaGFyYWN0ZXIpKSB7IC8qYXNjaWnnmoTmlbDlrZflrZfmr43kuI3nvJbnoIEqLwoJCQkJCXJldC5wdXNoKGNoYXJhY3Rlcik7CgkJCQl9IGVsc2UgcmV0LnB1c2goIiUiICsgY2hhckNvZGUudG9TdHJpbmcoMTYpKTsKCQkJfSBlbHNlIHsKCQkJCWdDb2RlID0gY2hhckNvZGUudG9TdHJpbmcoKTsKCQkJCWlmIChnQ29kZSkgewoJCQkJCXdoaWxlIChnQ29kZS5sZW5ndGggPCA0KSB7CgkJCQkJCWdDb2RlID0gIjAiICsgZ0NvZGU7CgkJCQkJfQoJCQkJCXJldC5wdXNoKCIlMjYlMjMiICsgZ0NvZGUgKyAiJTNCIik7CgkJCQl9IGVsc2UgewoJCQkJCS8q5a2X5bqT6YeM6Z2i5rKh5pyJLiovCgkJCQl9CgkJCX0KCQl9CgkJcmV0dXJuIHJldC5qb2luKCIiKTsKCX0KCglmdW5jdGlvbiBnZXRGYXZpY29uVXJsKHVybCwgdHlwZSkgewoJCXZhciB1cmkgPSBwYXJzZVVyaSh1cmwpOwoJCXN3aXRjaCAodHlwZSkgewoJCQljYXNlIDA6CgkJCQlyZXR1cm4gImh0dHA6Ly9nLnNvei5pbS8iICsgdXJpLmhvc3Q7CgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gdXJpLnByb3RvY29sICsgIjovLyIgKyB1cmkuaG9zdCArICIvZmF2aWNvbi5pY28iOwoJCX0KCX0KCgkvLyBwYXJzZVVyaSAxLjIuMgoJLy8gKGMpIFN0ZXZlbiBMZXZpdGhhbiA8c3RldmVubGV2aXRoYW4uY29tPgoJLy8gTUlUIExpY2Vuc2UKCXZhciBwYXJzZVVyaSA9IGZ1bmN0aW9uKHN0cikgewoJCXZhciBvID0gcGFyc2VVcmkub3B0aW9ucywKCQkJbSA9IG8ucGFyc2VyW28uc3RyaWN0TW9kZSA/ICJzdHJpY3QiIDogImxvb3NlIl0uZXhlYyhzdHIpLAoJCQl1cmkgPSB7fSwKCQkJaSA9IDE0OwoKCQl3aGlsZSAoaS0tKSB1cmlbby5rZXlbaV1dID0gbVtpXSB8fCAiIjsKCgkJdXJpW28uZHMubmFtZV0gPSB7fTsKCQl1cmlbby5kcy5uYW1lXVswXSA9IHt9OwoJCXVyaVtvLmRzLm5hbWVdWzBdWyJrZXkiXSA9ICh1cmkucHJvdG9jb2wgPyB1cmkucHJvdG9jb2wgOiAiaHR0cCIpICsgIjovLyIgKyB1cmkuaG9zdCArICh1cmkucG9ydCA/ICI6IiArIHVyaS5wb3J0IDogIiIpICsgIi8iOwoJCXVyaVtvLmRzLm5hbWVdWzBdWyJ2YWwiXSA9ICIvIjsKCQlpID0gMDsKCQl2YXIgdGVtcHN1YiA9ICIvIiwKCQkJc3VicyA9IHVyaVtvLmtleVsxMF1dLnN1YnN0cigxKS5zcGxpdCgiLyIpOwoJCWZvciAodmFyIGogPSAxOyBqIDwgKHN1YnMubGVuZ3RoICsgMSk7IGorKywgaSsrKSB7CgkJCXRlbXBzdWIgKz0gdGVtcHN1YiA9PT0gIi8iID8gc3Vic1tpXSA6ICIvIiArIHN1YnNbaV07CgkJCWlmIChzdWJzW2ldKSB7CgkJCQl1cmlbby5kcy5uYW1lXVtqXSA9IHt9OwoJCQkJdXJpW28uZHMubmFtZV1bal1bImtleSJdID0gc3Vic1tpXTsKCQkJCXVyaVtvLmRzLm5hbWVdW2pdWyJ2YWwiXSA9IHRlbXBzdWI7CgkJCX0KCQl9CgoJCXVyaVtvLnEubmFtZV0gPSB7fTsKCQl1cmlbby5rZXlbMTJdXS5yZXBsYWNlKG8ucS5wYXJzZXIsIGZ1bmN0aW9uKCQwLCAkMSwgJDIpIHsKCQkJaWYgKCQxKSB1cmlbby5xLm5hbWVdWyQxXSA9ICQyOwoJCX0pOwoJCXVyaVtvLmFxLm5hbWVdID0ge307CgkJdXJpW28ua2V5WzEzXV0ucmVwbGFjZShvLmFxLnBhcnNlciwgZnVuY3Rpb24oJDAsICQxLCAkMikgewoJCQlpZiAoJDEpIHVyaVtvLmFxLm5hbWVdWyQxXSA9ICQyOwoJCX0pOwoKCQlyZXR1cm4gdXJpOwoJfTsKCXBhcnNlVXJpLm9wdGlvbnMgPSB7CgkJc3RyaWN0TW9kZTogZmFsc2UsCgkJa2V5OiBbInNvdXJjZSIsICJwcm90b2NvbCIsICJhdXRob3JpdHkiLCAidXNlckluZm8iLCAidXNlciIsICJwYXNzd29yZCIsICJob3N0IiwgInBvcnQiLCAicmVsYXRpdmUiLCAicGF0aCIsICJkaXJlY3RvcnkiLCAiZmlsZSIsICJxdWVyeSIsICJhbmNob3IiXSwKCQlxOiB7CgkJCW5hbWU6ICJxdWVyeUtleSIsCgkJCXBhcnNlcjogLyg/Ol58JikoW14mPV0qKT0/KFteJl0qKS9nCgkJfSwKCQlhcTogewoJCQluYW1lOiAiYW5jaG9ycXVlcnlLZXkiLAoJCQlwYXJzZXI6IC8oPzpefCYpKFteJj1dKik9PyhbXiZdKikvZwoJCX0sCgkJZHM6IHsKCQkJbmFtZTogImRpcmVjdG9yeVN1YiIKCQl9LAoJCXBhcnNlcjogewoJCQlzdHJpY3Q6IC9eKD86KFteOlwvPyNdKyk6KT8oPzpcL1wvKCg/OigoW146QF0qKSg/OjooW146QF0qKSk/KT9AKT8oW146XC8/I10qKSg/OjooXGQqKSk/KSk/KCgoKD86W14/I1wvXSpcLykqKShbXj8jXSopKSg/Olw/KFteI10qKSk/KD86IyguKikpPykvLAoJCQlsb29zZTogL14oPzooPyFbXjpAXSs6W146QFwvXSpAKShbXjpcLz8jLl0rKTopPyg/OlwvXC8pPygoPzooKFteOkBdKikoPzo6KFteOkBdKikpPyk/QCk/KFteOlwvPyNdKikoPzo6KFxkKikpPykoKChcLyg/OltePyNdKD8hW14/I1wvXSpcLltePyNcLy5dKyg/Ols/I118JCkpKSpcLz8pPyhbXj8jXC9dKikpKD86XD8oW14jXSopKT8oPzojKC4qKSk/KS8KCQl9Cgl9OwoKCWZ1bmN0aW9uIGFkZEdsb2JhbFN0eWxlKCkgewoJCS8vIOa3u+WKoOWFqOWxgOagt+W8j+WSjOiHquWumuS5ieagt+W8jwoJCXZhciBzdHlsZTsKCQlpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzZWotc3R5bGUiKSkgewoJCQlzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7CgkJCXN0eWxlLmlkID0gInNlai1zdHlsZSI7CgkJCXN0eWxlLnR5cGUgPSAidGV4dC9jc3MiOwoJCQlzdHlsZS50ZXh0Q29udGVudCA9IE1BSU5fQ1NTICsgIlxuIiArIChtYXRjaGVkUnVsZS5zdHlsaXNoIHx8ICIiKTsKCQkJZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7CgkJCWlmIChwcmVmcy5kaXNwbGF5ID09PSBmYWxzZSl7CgkJCQlzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7CgkJCQlzdHlsZS5pZCA9ICJzZWotZGlzcGxheS1zdHlsZSI7CgkJCQlzdHlsZS50eXBlID0gInRleHQvY3NzIjsKCQkJCXN0eWxlLnRleHRDb250ZW50ID0gIiNzZWotY29udGFpbmVye3BvaW50ZXItZXZlbnRzOm5vbmU7b3BhY2l0eTogMC4xO30iOwoJCQkJZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7CgkJCX0KCQl9CgoJfQoKCWZ1bmN0aW9uIGFkZENvbnRhaW5lcihpVGFyZ2V0LCBpSW5wdXQpIHsKCQlmdW5jdGlvbiBwYXJzZURhdGFTdHIoc3RyKSB7IC8v6L2s5o2i5paH5pys5pWw5o2uCgkJCXZhciBMaXN0ID0gc3RyLnNwbGl0KC9cbig/PVteXHNdKS8pOwoJCQlMaXN0LmZvckVhY2goZnVuY3Rpb24oZWFjaExpc3QpIHsKCQkJCXZhciBsaW5lID0gZWFjaExpc3Quc3BsaXQoL1tcblxyXSsvKTsKCQkJCXZhciBjYXRlZ29yeSA9IGxpbmVbMF07CgkJCQljYXRlZ29yeSA9IGNhdGVnb3J5LnNwbGl0KCItLSIpOwoJCQkJaWYgKGlzVGhlU2FtZUNhdGVnb3J5KGNhdGVnb3J5WzBdLCBtYXRjaGVkUnVsZS5lbmdpbmVMaXN0KSkgewoJCQkJCWNvbnRhaW5lci5pbm5lckhUTUwgKz0gIjxzZWpsaT48c2Vqc3BhbiBpZD0nc2VqLWV4cGFuZGVkLWNhdGVnb3J5Jz4iICsgc3ZnLmxpc3QgKyBjYXRlZ29yeVswXSArICI8L3NlanNwYW4+PC9zZWpsaT4iOwoJCQkJCXBhcnNlTGluZShjb250YWluZXIsIGxpbmUsIHRydWUpOwoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgY29udFNlamxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2VqbGkiKTsKCQkJCQljb250U2VqbGkuaW5uZXJIVE1MID0gIjxzZWpzcGFuIGNsYXNzPSdzZWotZW5naW5lIHNlai1kcm9wLWxpc3QtdHJpZ2dlcic+Iisgc3ZnLmxpc3QgKyBjYXRlZ29yeVswXSArICI8L3NlanNwYW4+IjsKCQkJCQl2YXIgc2VqdWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWp1bCIpOwoJCQkJCXNlanVsLmNsYXNzTmFtZSA9ICJzZWotZHJvcC1saXN0IjsKCQkJCQlwYXJzZUxpbmUoc2VqdWwsIGxpbmUsIGZhbHNlKTsKCQkJCQljb250U2VqbGkuYXBwZW5kQ2hpbGQoc2VqdWwpOwoJCQkJCWNvbnRhaW5lci5hcHBlbmRDaGlsZChjb250U2VqbGkpOwoJCQkJfQoJCQl9KTsKCgoJCQkvL3N0ciA9IHN0ci5yZXBsYWNlKC9bXG5ccl0rW1xzXC9dKi1ccyooXFMrKTovZywgIl9QT1NUXyAkMToiKTsgLy/mj5DliY3lpITnkIbkuIvnibnmrornmoQgcG9zdCDmlrnlvI8KCgkJCWZ1bmN0aW9uIHBhcnNlQXJncyhzdHIpIHsKCQkJCXZhciBhcnIgPSBzdHIuc3BsaXQoIiMiKTsKCQkJCXZhciBhcmdzID0ge307CgkJCQlhcnIuZm9yRWFjaChmdW5jdGlvbihzKSB7CgkJCQkJdmFyIGFyZ0FyciA9IHMuc3BsaXQoIj0iKTsKCQkJCQlhcmdzW2FyZ0FyclswXV0gPSBhcmdBcnJbMV07CgkJCQl9KTsKCQkJCXJldHVybiBhcmdzOwoJCQl9OwoKCQkJZnVuY3Rpb24gcGFyc2VMaW5lKGNvbnRhaW5lciwgbGluZSwgaXNDdXJyZW50KSB7CgkJCQlsaW5lLnNwbGljZSgwLCAxKTsKCQkJCXZhciBzZWp1bCwgZGVmYXVsdEVuZ2luZSwgY29udFNlamxpOwoJCQkJdmFyIGZsYWcsIGZsYWcyOwoJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lLmxlbmd0aDsgaSsrKSB7CgkJCQkJaWYgKCFsaW5lW2ldKSBjb250aW51ZTsKCgkJCQkJaWYgKGxpbmVbaV0uaW5kZXhPZigiLy8iKSA9PSAwKSB7CgkJCQkJCWNvbnRpbnVlOwoJCQkJCX0KCQkJCQl2YXIgYXJyID0gbGluZVtpXS5yZXBsYWNlKC/vvIwvZywgIiwgIikuc3BsaXQoLyxccy8pOwoJCQkJCWlmIChpc0N1cnJlbnQgJiYgbWF0Y2hlZFJ1bGUuZW5naW5lTGlzdCAmJiB0b1JFKG1hdGNoZWRSdWxlLnVybCkudGVzdChhcnJbMV0pKSB7IC8v5Y675o6J6Lez6L2s5Yiw5b2T5YmN5byV5pOOCgkJCQkJCWlmIChmbGFnID09IGkgLSAxKSBmbGFnKys7CgkJCQkJCWlmIChmbGFnMiA9PSBpIC0gMSkgewoJCQkJCQkJaWYgKGkgPT0gbGluZS5sZW5ndGggLSAxKSB7CgkJCQkJCQkJY29udFNlamxpLmFwcGVuZENoaWxkKHNlanVsKTsKCQkJCQkJCQljb250YWluZXIuYXBwZW5kQ2hpbGQoY29udFNlamxpKTsKCQkJCQkJCX0KCQkJCQkJCWZsYWcyKys7CgkJCQkJCX0KCQkJCQkJY29udGludWU7CgkJCQkJfQoJCQkJCXZhciBlbmdpbmUgPSB7fTsKCQkJCQlpZiAobGluZVtpXS5pbmRleE9mKCIlcG9zdCIpICE9IC0xKSB7CgkJCQkJCWVuZ2luZS5tZXRob2QgPSAiUE9TVCI7CgkJCQkJCXZhciB0d28gPSBsaW5lW2ldLnNwbGl0KCIlcG9zdCMiKTsKCQkJCQkJbGluZVtpXSA9IHR3b1swXTsKCQkJCQkJZW5naW5lLmFyZ3MgPSBwYXJzZUFyZ3ModHdvWzFdKTsKCQkJCQl9CgkJCQkJaWYgKGFyci5sZW5ndGggPT09IDEpIHsgLy/liIbnsbsKCQkJCQkJZmxhZyA9IGk7CgkJCQkJCWlmIChmbGFnMiA9PSBpIC0gMSAmJiBzZWp1bCAhPSAiIikgewoJCQkJCQkJY29udFNlamxpLmFwcGVuZENoaWxkKHNlanVsKTsKCQkJCQkJCWNvbnRhaW5lci5hcHBlbmRDaGlsZChjb250U2VqbGkpOwoJCQkJCQl9CgkJCQkJCWRlZmF1bHRFbmdpbmUgPSBhcnJbMF0udHJpbSgpOwoJCQkJCQlzZWp1bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNlanVsIik7CgkJCQkJCXNlanVsLmNsYXNzTmFtZSA9ICJzZWotZHJvcC1saXN0IjsKCQkJCQkJY29udGludWU7CgkJCQkJfQoJCQkJCWlmICgvXHNccy8udGVzdChhcnJbMF0pKSB7IC8v5byV5pOO5YiG57G75Y+q5pSv5oyBMue6p++8jOaJgOS7peS4pOS4qnRhYuWwseaYr+S6jOe6p+WIhuexu+eahOW8leaTjgoJCQkJCQl2YXIgc2VqbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWpsaSIpOwoJCQkJCQlzZWpsaS5pbm5lckhUTUwgPSBnZXRhUGF0dGVybihhcnIsZW5naW5lKTsKCQkJCQkJc2VqdWwuYXBwZW5kQ2hpbGQoc2VqbGkpOwoJCQkJCQlpZiAoaSA9PSBmbGFnICsgMSkgeyAvL+eUseS6juS6jOe6p+WIhuexu+Wkp+WkmuaYr+W8leaTjue7huWIhu+8jOaJgOS7peW8leaTjuWQjeWtl+S4iuS5n+mcgOimgeiDveeCueWHu+aJjeihjAoJCQkJCQkJYXJyWzBdID0gZGVmYXVsdEVuZ2luZTsKCQkJCQkJCWNvbnRTZWpsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNlamxpIik7CgkJCQkJCQljb250U2VqbGkuaW5uZXJIVE1MID0gZ2V0YVBhdHRlcm4oYXJyLGVuZ2luZSkucmVwbGFjZSgic2VqLWVuZ2luZSIsICJzZWotZW5naW5lIHNlai1kcm9wLWxpc3QtdHJpZ2dlciIpOwoJCQkJCQl9CgkJCQkJCWZsYWcyID0gaTsgLy9mbGFnMuS7o+ihqOS6jOe6p+WIhuexu+eahOW8leaTjuagh+iusO+8jOe7k+adn+WQjumcgOimgeWGmeWFpeWIl+ihqAoJCQkJCQlpZiAoaSA9PSBsaW5lLmxlbmd0aCAtIDEpIHsgLy/lpoLmnpzlt7LkuoznuqfliIbnsbvnmoTlvJXmk47nu5PlsL7vvIzlhpnlhaXliJfooagKCQkJCQkJCWNvbnRTZWpsaS5hcHBlbmRDaGlsZChzZWp1bCk7CgkJCQkJCQljb250YWluZXIuYXBwZW5kQ2hpbGQoY29udFNlamxpKTsKCQkJCQkJfQoJCQkJCQljb250aW51ZTsKCQkJCQl9CgkJCQkJaWYgKC9cc1teXHNdLy50ZXN0KGFyclswXSkpIHsKCQkJCQkJaWYgKGZsYWcyID09IGkgLSAxICYmIHNlanVsICE9ICIiKSB7IC8v55yL5piv5ZCm5LqM57qn5YiG57G75byV5pOO57uT5p2fCgkJCQkJCQljb250U2VqbGkuYXBwZW5kQ2hpbGQoc2VqdWwpOwoJCQkJCQkJY29udGFpbmVyLmFwcGVuZENoaWxkKGNvbnRTZWpsaSk7CgkJCQkJCX0KCQkJCQkJc2VqdWwgPSAiIjsKCQkJCQkJc2VqbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWpsaSIpOwoJCQkJCQlzZWpsaS5pbm5lckhUTUwgPSBnZXRhUGF0dGVybihhcnIsZW5naW5lKTsKCQkJCQkJY29udGFpbmVyLmFwcGVuZENoaWxkKHNlamxpKTsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJfQoKCQlmdW5jdGlvbiBnZXRhUGF0dGVybihhcnIsZW5naW5lKSB7CgkJCQllbmdpbmUubmFtZSA9IGFyclswXS50cmltKCk7CgkJCQllbmdpbmUudXJsID0gYXJyWzFdOwoJCQkJaWYoZW5naW5lLm1ldGhvZCA9PSAiUE9TVCIpIGVuZ2luZS51cmwgPSBlbmdpbmUudXJsLnNwbGl0KCIlcG9zdCIpWzBdOwoJCQkJZW5naW5lLmhvc3QgPSBwYXJzZVVyaShlbmdpbmUudXJsKS5ob3N0OwoJCQkJaWYgKGFyclsyXSkgZW5naW5lLmZhdmljb24gPSBhcnJbMl07CgkJCQl2YXIgYSA9IGFQYXR0ZXJuLnJlcGxhY2UoIiR1cmwkIiwgZW5naW5lLnVybCkKCQkJCQkucmVwbGFjZSgiJG5hbWUkIiwgZW5naW5lLm5hbWUpCgkJCQkJLnJlcGxhY2UoIiR0aXRsZSQiLCBlbmdpbmUubmFtZSk7CgkJCQlpZiAoZW5naW5lLmZhdmljb24pIHsKCQkJCQlpZiAoL15mYS8udGVzdChlbmdpbmUuZmF2aWNvbikpIGEgPSBhLnJlcGxhY2UoIjxpbWcgc3JjPSckZmF2aWNvbiQnIGNsYXNzPSdzZWotZW5naW5lLWljb24nIC8+IiwgIjxzZWotaSBjbGFzcz0nZmEgIiArIGVuZ2luZS5mYXZpY29uICsgIic+PC9zZWotaT4iKTsKCQkJCQlhID0gYS5yZXBsYWNlKCIkZmF2aWNvbiQiLCBlbmdpbmUuZmF2aWNvbik7CgkJCQl9IGVsc2UgewoJCQkJCWEgPSBhLnJlcGxhY2UoInNyYz0nJGZhdmljb24kJyIsICIiKTsKCQkJCX0KCgkJCQlpZiAoZW5naW5lLm1ldGhvZCAmJiBlbmdpbmUubWV0aG9kLnRvVXBwZXJDYXNlKCkgPT0gIlBPU1QiKSB7CgkJCQkJdmFyIGYgPSB3cmFwVG9IaWRlKGdldFBvc3RGb3JtSFRNTChlbmdpbmUubmFtZSwgZW5naW5lLnVybCwgZW5naW5lLmFyZ3MsIHByZWZzLm9wZW5Jbk5ld1RhYikpOwoJCQkJCWEgPSBhLnJlcGxhY2UoIiRmb3JtJCIsIGYpOwoJCQkJCWEgPSBhLnJlcGxhY2UoImEgaHJlZj0nJyIsImJ1dHRvbiB0eXBlPSdzdWJtaXQnIHZhbHVlPSdTdWJtaXQnIiArICJmb3JtPSdzZWpfIisgZW5naW5lLm5hbWUgKyAiJyIgKTsKCQkJCX0gZWxzZSB7CgkJCQkJYSA9IGEucmVwbGFjZSgiJGZvcm0kIiwgIiIpOwoJCQkJfQoJCQkJcmV0dXJuIGE7CgkJCX0KCQkJLy8g5Yib5bu6ZG9tCgkJdmFyIGFQYXR0ZXJuID0gIjxhIGhyZWY9JycgY2xhc3M9J3Nlai1lbmdpbmUnIiArIChwcmVmcy5vcGVuSW5OZXdUYWIgPyAiIHRhcmdldD0nX2JsYW5rJyAiIDogIiAiKSArCgkJCSJ1cmw9JyR1cmwkJyBfdGl0bGU9JyR0aXRsZSQnPiIgKwoJCQkiPGltZyBzcmM9JyRmYXZpY29uJCcgY2xhc3M9J3Nlai1lbmdpbmUtaWNvbicgLz4kZm9ybSQ8c3Bhbj4kbmFtZSQ8L3NwYW4+PC9hPiI7CgoJCXZhciBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWp1bCIpOwoJCWNvbnRhaW5lci5pZCA9ICJzZWotY29udGFpbmVyIjsKCgkJY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlZG93biIsIG1vdXNlZG93bmhhbmRsZXIsIHRydWUpOwoJCWlmIChtYXRjaGVkUnVsZS5zdHlsZSkgewoJCQljb250YWluZXIuc3R5bGUuY3NzVGV4dCA9IG1hdGNoZWRSdWxlLnN0eWxlOwoJCX0KCQkvLyDmoLnmja7mkJzntKLliJfooajnmoTnsbvlnovlvpfliLDmlbDmja4KCQl2YXIgZW5naW5lTGlzdERhdGFTdHIgPSBlbmdpbmVMaXN0RGF0YVtwcmVmcy5lbmdpbmVMaXN0RGF0YVR5cGVdIHx8IGVuZ2luZUxpc3REYXRhLm5vcm1hbDsKCQlwYXJzZURhdGFTdHIoZW5naW5lTGlzdERhdGFTdHIpOwoJCXZhciBpbnNlcnRXaGVyZSA9IG1hdGNoZWRSdWxlLmluc2VydEludG9Eb2MgPyBtYXRjaGVkUnVsZS5pbnNlcnRJbnRvRG9jLndoZXJlIDogImJlZm9yZUJlZ2luIjsgLy/orr7nva7mj5LlhaXnmoTkvY3nva4KCQkKCQl2YXIgc2VqQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNlai1idXR0b24iKTsKCgkJaWYgKCFzZWpCdXR0b24pIHt9IGVsc2UgaWYgKHNlakJ1dHRvbikgewoJCQlzZWpCdXR0b24ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWpCdXR0b24pOwoJCX0KCgkJdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNlamRpdiIpOwoJCWJ1dHRvbi5pZCA9ICJzZWotYnV0dG9uIjsKCQlidXR0b24ub25tb3VzZW92ZXIgPSBmdW5jdGlvbigpIHsKCQkJCWlmICgkKCIjc2VqLWNvbnRhaW5lciIpLmNzcygicG9pbnRlci1ldmVudHMiKSA9PT0gIm5vbmUiKSB7CgkJCQkJJCgiI3Nlai1jb250YWluZXIiKS5jc3MoInBvaW50ZXItZXZlbnRzIiwgImFsbCIpLmNzcygib3BhY2l0eSIsICIxIik7CgkJCQkJR01fc2V0VmFsdWUoImRpc3BsYXkiLCB0cnVlKTsKCQkJCX0gZWxzZSB7CgkJCQkJJCgiI3Nlai1jb250YWluZXIiKS5jc3MoInBvaW50ZXItZXZlbnRzIiwgIm5vbmUiKS5jc3MoIm9wYWNpdHkiLCAiMC4xIik7CgkJCQkJR01fc2V0VmFsdWUoImRpc3BsYXkiLCBmYWxzZSk7CgkJCQl9CgkJCX0KCQlkb2N1bWVudC5oZWFkLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGJ1dHRvbixkb2N1bWVudC5oZWFkKTsKCQkvL+iuvue9ruaMiemSrgoJCXZhciBjb25maWdCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWotbGkiKTsKCQljb25maWdCdG4uaW5uZXJIVE1MID0gIjxzZWpzcGFuIGNsYXNzPSdzZWotZW5naW5lJz4iICsgc3ZnLnNldHRpbmcgKyAiPC9zZWpzcGFuPiI7CgkJY29uZmlnQnRuLm9uY2xpY2sgPSBvcGVuUHJlZnM7CgkJY29udGFpbmVyLmFwcGVuZENoaWxkKGNvbmZpZ0J0bik7CgoJCXN3aXRjaCAoaW5zZXJ0V2hlcmUudG9Mb3dlckNhc2UoKSkgeyAvL+aPkuWFpeWIsOaWh+aho+S4rQoJCQljYXNlICJiZWZvcmViZWdpbiI6CgkJCQlpVGFyZ2V0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGNvbnRhaW5lciwgaVRhcmdldCk7CgkJCQlicmVhazsKCQkJY2FzZSAiYWZ0ZXJiZWdpbiI6CgkJCQlpZiAoaVRhcmdldC5maXJzdENoaWxkKSB7CgkJCQkJaVRhcmdldC5pbnNlcnRCZWZvcmUoY29udGFpbmVyLCBpVGFyZ2V0LmZpcnN0Q2hpbGQpOwoJCQkJfSBlbHNlIHsKCQkJCQlpVGFyZ2V0LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSAiYmVmb3JlZW5kIjoKCQkJCWlUYXJnZXQuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTsKCQkJCWJyZWFrOwoJCQljYXNlICJhZnRlcmVuZCI6CgkJCQlpZiAoaVRhcmdldC5uZXh0U2libGluZykgewoJCQkJCWlUYXJnZXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY29udGFpbmVyLCBpVGFyZ2V0Lm5leHRTaWJsaW5nKTsKCQkJCX0gZWxzZSB7CgkJCQkJaVRhcmdldC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7CgkJCQl9CgkJCQlicmVhazsKCQl9CgoJCWlmICh0eXBlb2YgbWF0Y2hlZFJ1bGUuZW5kRml4ID09ICJmdW5jdGlvbiIpIHsKCQkJdHJ5IHsKCQkJCW1hdGNoZWRSdWxlLmVuZEZpeCgpOwoJCQl9IGNhdGNoIChleCkgewoJCQkJY29uc29sZS5lcnJvcigiZW5kRml4IOmUmeivryIsIGV4KTsKCQkJfQoJCX0KCgkJZnVuY3Rpb24gbW91c2Vkb3duaGFuZGxlcihlKSB7CgkJCXZhciB0YXJnZXQgPSBlLnRhcmdldDsKCQkJaWYgKCF0YXJnZXQuaHJlZikgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7CgkJCWlmICghdGFyZ2V0IHx8IHRhcmdldC5jbGFzc05hbWUuaW5kZXhPZigic2VqLWVuZ2luZSIpID09IC0xKSByZXR1cm47CgkJCWlmICghdGFyZ2V0IHx8ICF0aGlzLmNvbnRhaW5zKHRhcmdldCkpIHJldHVybjsKCQkJdmFyIHZhbHVlOwoJCQlpZiAodHlwZW9mIGlJbnB1dCA9PSAiZnVuY3Rpb24iKSB2YWx1ZSA9IGlJbnB1dCgpOwoJCQllbHNlIHsKCQkJCWlmIChpSW5wdXQubm9kZU5hbWUgPT0gIklOUFVUIiB8fCBpSW5wdXQubG9jYWxOYW1lID09ICJ0ZXh0YXJlYSIpIHZhbHVlID0gaUlucHV0LnZhbHVlOwoJCQkJZWxzZSB2YWx1ZSA9IGlJbnB1dC50ZXh0Q29udGVudDsKCQkJfQoJCQlpZiAoZG9jdW1lbnQuY2hhcmFjdGVyU2V0ICE9ICJVVEYtOCIpIHZhbHVlID0gZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTsKCQkJLy8g5qC55o2u5ZCO5Luj5YWD57Sg5Lit5piv5ZCm5a2Y5ZyoIGZvcm0g5YWD57Sg77yM5Yik5pat5o+Q5Lqk5pa55byP5bm26L+b6KGM5aSE55CGCgkJCS8vIOWmguaenOayoeaciSBmb3JtIOWFg+e0oO+8jOWwhuS8muS9v+eUqCBHRVQg5pa55rOV5o+Q5Lqk77yb5aaC5p6c5pyJ77yM5bCG5Lya5L2/55SoIFBPU1Qg5pa55rOV5o+Q5LqkCgkJCXZhciBmb3JtcyA9IHRhcmdldC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiZm9ybSIpOwoJCQlpZiAoZm9ybXMubGVuZ3RoID09IDApIHsgLy/mj5DkuqTmlrnlvI/kuLogR0VUCgkJCXZhbHVlID0gdmFsdWUucmVwbGFjZSgiJiIsIiUyNiIpOy8vJuebtOaOpeaPkOS6pOWIsOWcsOWdgOagj+S4reaXoOazleaQnOe0ou+8jOWPr+iDvei/mOacieWFtuS7lueJueauiuespuWPt+S5n+mcgOimgeexu+S8vOWkhOeQhuOAguWPquWcqGdldAoJCQl2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoIiMiLCIlMjMiKTsKCQkJCXRhcmdldC5ocmVmID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgidXJsIikucmVwbGFjZSgvJXMvZywgdmFsdWUpOyAvL+abv+aNoiLlhajpg6gi5YWz6ZSu6K+NCgkJCX0gZWxzZSB7IC8v5o+Q5Lqk5pa55byP5Li6IFBPU1QKCQkJCXZhciBpbnB1dHMgPSB0YXJnZXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0Iik7CgkJCQlmb3IgKHZhciBpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7IGkrKykgaW5wdXRzW2ldLnZhbHVlID0gaW5wdXRzW2ldLnZhbHVlLnJlcGxhY2UoLyVzL2csIHZhbHVlKTsgLy8vLyDmm7/mjaIi5YWo6YOoIuWFs+mUruivjQoJCQl9CgkJfQoJfQoKCWZ1bmN0aW9uIHJ1bigpIHsKCQkvLyDnmb7luqbmkJzntKLmj5LlhaXliLDpobbpg6jmkJzntKLmnaHkuIvpnaLlsLHkvJrpgKDmiJDpobXpnaLpg6jliIblhYPntKDnmoTmtojlpLHvvIzmiYDku6XpnIDopoHmr4/kuKrpg6jliIbpg73liKTmlq3kuIvmmK/lkKblrZjlnKgKCQkvLyDliKTmlq3mj5LlhaXkvY3nva7lkozovpPlhaXmoYbmmK/lkKblrZjlnKgKCQl2YXIgaVRhcmdldCA9IG1hdGNoZWRSdWxlLmluc2VydEludG9Eb2MgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG1hdGNoZWRSdWxlLmluc2VydEludG9Eb2MudGFyZ2V0KSA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTsKCQl2YXIgaUlucHV0OwoJCWlmIChtYXRjaGVkUnVsZS5rZXl3b3JkKSB7CgkJCWlmICh0eXBlb2YgbWF0Y2hlZFJ1bGUua2V5d29yZCA9PSAiZnVuY3Rpb24iKSB7CgkJCQlpSW5wdXQgPSBtYXRjaGVkUnVsZS5rZXl3b3JkOwoJCQkJaWYgKCFpSW5wdXQoKSkgewoJCQkJCXJldHVybjsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCWlJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobWF0Y2hlZFJ1bGUua2V5d29yZCk7CgkJCX0KCQl9IGVsc2UgewoJCQlpSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJpbnB1dFt0eXBlPSdzZWFyY2gnXSxpbnB1dFt0eXBlPSd0ZXh0J11bYXV0b2NvbXBsZXRlPSdvZmYnXSxpbnB1dFthdXRvY29tcGxldGU9J29mZiddOm5vdChbdHlwZV0pIikgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaW5wdXRbdHlwZT0ndGV4dCddW25hbWVdW3ZhbHVlXSxpbnB1dFtuYW1lXVt2YWx1ZV06bm90KFt0eXBlXSkiKTsKCQl9CgkJZGVidWcoIuaPkuWFpeeahOS9jee9ruS4uiAlbyIsIGlUYXJnZXQpOwoJCWRlYnVnKCLljLnphY3nmoTovpPlhaXmoYbkuLogJW8iLCBpSW5wdXQpOwoKCQlpZiAoIWlUYXJnZXQgfHwgIWlJbnB1dCkgewoJCQlkZWJ1Zygi5LiN5a2Y5Zyo5o+S5YWl55qE5L2N572u5oiW5Yy56YWN55qE6L6T5YWl5qGGIiwgaVRhcmdldCwgaUlucHV0KTsKCQkJcmV0dXJuOwoJCX0KCgkJYWRkR2xvYmFsU3R5bGUoKTsKCgkJLy8g5Yik5pat5piv5ZCm5a2Y5ZyoCgkJdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzZWotY29udGFpbmVyIik7CgoJCWlmICghY29udGFpbmVyKSB7fSBlbHNlIGlmIChjb250YWluZXIpIHsKCQkJY29udGFpbmVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY29udGFpbmVyKTsKCQl9CgkJYWRkQ29udGFpbmVyKGlUYXJnZXQsIGlJbnB1dCk7CgkJY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNlai1jb250YWluZXIiKTsKCQlpZihjb250YWluZXIpY29udGFpbmVyLnN0eWxlLmxlZnQgPSAiY2FsYyg1MCUgLSAiICsgZ2V0Q29tcHV0ZWRTdHlsZShjb250YWluZXIpLndpZHRoICsgIiAvIDIpIjsKCX0KCglmdW5jdGlvbiByZW1vdmUoKSB7CgkJdmFyIGVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiI3Nlai1jb250YWluZXIiKTsKCQlpZiAoIWVsZW1zKSByZXR1cm47CgoJCVtdLmZvckVhY2guY2FsbChlbGVtcywgZnVuY3Rpb24oZWxlbSkgewoJCQllbGVtLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWxlbSk7CgkJfSk7CgkJCgkJZWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIjc2VqLWJ1dHRvbiIpOwoJCVtdLmZvckVhY2guY2FsbChlbGVtcywgZnVuY3Rpb24oZWxlbSkgewoJCQllbGVtLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWxlbSk7CgkJfSk7Cgl9CgoJLy8gaWZyYW1lIOemgeatouWKoOi9vQoJaWYgKHdpbmRvdy5zZWxmICE9IHdpbmRvdy50b3ApIHJldHVybjsKCQoJbG9hZFByZWZzKCk7CgkKCXZhciBtYXRjaGVkUnVsZTsKCglydWxlcy5zb21lKGZ1bmN0aW9uKHJ1bGUpIHsKCQlpZiAodG9SRShydWxlLnVybCkudGVzdChsb2NhdGlvbi5ocmVmKSkgewoJCQltYXRjaGVkUnVsZSA9IHJ1bGU7CgkJCWlmICh0eXBlb2YgcnVsZS5ldGMgPT0gImZ1bmN0aW9uIikgewoJCQkJdHJ5IHsKCQkJCQlydWxlLmV0YygpOwoJCQkJfSBjYXRjaCAoZXgpIHsKCQkJCQljb25zb2xlLmVycm9yKCLmiafooYwgZXRjIOmUmeivryIsIGV4KTsKCQkJCX0KCQkJfQoJCQlyZXR1cm4gdHJ1ZTsKCQl9Cgl9KTsKCgl2YXIgZmxhZyA9IDA7CglkZWJ1Zygi5Yy56YWN55qE6KeE5YiZ5Li6IiwgbWF0Y2hlZFJ1bGUpOwoJZGVidWcoIuiEmuacrOaJp+ihjOS6jjoiK2RvY3VtZW50LnJlYWR5U3RhdGUpOwoJZGVidWcoIm9ucmVhZHlzdGF0ZWNoYW5nZSBmdW5jdGlvbjoiK2RvY3VtZW50Lm9ucmVhZHlzdGF0ZWNoYW5nZSk7CglpZiAoIW1hdGNoZWRSdWxlKSByZXR1cm47CglHTV9yZWdpc3Rlck1lbnVDb21tYW5kKCLorr7nva4iLG9wZW5QcmVmcyk7Cglkb2N1bWVudC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsKCQlmbGFnID0gMTsKCQlpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PSAiaW50ZXJhY3RpdmUiKSB7CgkJCWRlYnVnKCJvbnJlYWR5c3RhdGVjaGFuZ2U6ICIgKyBkb2N1bWVudC5yZWFkeVN0YXRlKTsKCQkJcnVuKCk7CgkJfSBlbHNlIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09ICJjb21wbGV0ZSIpIHsKCQkJZGVidWcoIm9ucmVhZHlzdGF0ZWNoYW5nZTogIiArIGRvY3VtZW50LnJlYWR5U3RhdGUpOwoJCQlydW4oKTsKCQkJLyppZiAod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiQ2hyb21lIikgIT0gLTEpIHsKCQkJCXNldFRpbWVvdXQocnVuKCksIDEwMDApOwoJCQl9Ki8KCQl9Cgl9OwoJd2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkgey8v55So5LqORHVja0R1Y2tHbyzlvbHlk43liLDkuoZvbnJlYWR5c3RhdGVjaGFuZ2UKCQlkZWJ1Zygib25sb2FkIik7CgkJaWYgKGZsYWcgPT0gMClydW4oKTsKCQlmbGFnID0gMTsKCX07CglpZiAobWF0Y2hlZFJ1bGUubXV0YXRpb25UaXRsZSkgewoJCWRlYnVnKCLmt7vliqDmoIfpopjoioLngrnnm5Hop4blmag6IHRpdGxlIik7CgkJdmFyIHdhdGNoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigidGl0bGUiKTsKCQl2YXIgb2JzZXJ2ZXIgPSBuZXcgd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24obXV0YXRpb25zKSB7CgkJCWRlYnVnKCLmoIfpopjlj5HnlJ/kuoblj5jljJYiLCBkb2N1bWVudC50aXRsZSk7CgkJCXJ1bigpOwoJCX0pOwoJCW9ic2VydmVyLm9ic2VydmUod2F0Y2gsIHsKCQkJY2hpbGRMaXN0OiB0cnVlLAoJCQlzdWJ0cmVlOiB0cnVlLAoJCQljaGFyYWN0ZXJEYXRhOiB0cnVlCgkJfSk7Cgl9Cn0pKCk7Cg==","requires":[{"meta":{"name":"jquery-3.3.1.min.js","url":"https://code.jquery.com/jquery-3.3.1.min.js","ts":1604018246409,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2My4zLjEgfCAoYykgSlMgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovCiFmdW5jdGlvbihlLHQpeyJ1c2Ugc3RyaWN0Ijsib2JqZWN0Ij09dHlwZW9mIG1vZHVsZSYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lLmRvY3VtZW50P3QoZSwhMCk6ZnVuY3Rpb24oZSl7aWYoIWUuZG9jdW1lbnQpdGhyb3cgbmV3IEVycm9yKCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50Iik7cmV0dXJuIHQoZSl9OnQoZSl9KCJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLGZ1bmN0aW9uKGUsdCl7InVzZSBzdHJpY3QiO3ZhciBuPVtdLHI9ZS5kb2N1bWVudCxpPU9iamVjdC5nZXRQcm90b3R5cGVPZixvPW4uc2xpY2UsYT1uLmNvbmNhdCxzPW4ucHVzaCx1PW4uaW5kZXhPZixsPXt9LGM9bC50b1N0cmluZyxmPWwuaGFzT3duUHJvcGVydHkscD1mLnRvU3RyaW5nLGQ9cC5jYWxsKE9iamVjdCksaD17fSxnPWZ1bmN0aW9uIGUodCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHQmJiJudW1iZXIiIT10eXBlb2YgdC5ub2RlVHlwZX0seT1mdW5jdGlvbiBlKHQpe3JldHVybiBudWxsIT10JiZ0PT09dC53aW5kb3d9LHY9e3R5cGU6ITAsc3JjOiEwLG5vTW9kdWxlOiEwfTtmdW5jdGlvbiBtKGUsdCxuKXt2YXIgaSxvPSh0PXR8fHIpLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO2lmKG8udGV4dD1lLG4pZm9yKGkgaW4gdiluW2ldJiYob1tpXT1uW2ldKTt0LmhlYWQuYXBwZW5kQ2hpbGQobykucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvKX1mdW5jdGlvbiB4KGUpe3JldHVybiBudWxsPT1lP2UrIiI6Im9iamVjdCI9PXR5cGVvZiBlfHwiZnVuY3Rpb24iPT10eXBlb2YgZT9sW2MuY2FsbChlKV18fCJvYmplY3QiOnR5cGVvZiBlfXZhciBiPSIzLjMuMSIsdz1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcgdy5mbi5pbml0KGUsdCl9LFQ9L15bXHNcdUZFRkZceEEwXSt8W1xzXHVGRUZGXHhBMF0rJC9nO3cuZm49dy5wcm90b3R5cGU9e2pxdWVyeToiMy4zLjEiLGNvbnN0cnVjdG9yOncsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBvLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT9vLmNhbGwodGhpcyk6ZTwwP3RoaXNbZSt0aGlzLmxlbmd0aF06dGhpc1tlXX0scHVzaFN0YWNrOmZ1bmN0aW9uKGUpe3ZhciB0PXcubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGUpO3JldHVybiB0LnByZXZPYmplY3Q9dGhpcyx0fSxlYWNoOmZ1bmN0aW9uKGUpe3JldHVybiB3LmVhY2godGhpcyxlKX0sbWFwOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayh3Lm1hcCh0aGlzLGZ1bmN0aW9uKHQsbil7cmV0dXJuIGUuY2FsbCh0LG4sdCl9KSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG8uYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5sZW5ndGgsbj0rZSsoZTwwP3Q6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4+PTAmJm48dD9bdGhpc1tuXV06W10pfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2T2JqZWN0fHx0aGlzLmNvbnN0cnVjdG9yKCl9LHB1c2g6cyxzb3J0Om4uc29ydCxzcGxpY2U6bi5zcGxpY2V9LHcuZXh0ZW5kPXcuZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGUsdCxuLHIsaSxvLGE9YXJndW1lbnRzWzBdfHx7fSxzPTEsdT1hcmd1bWVudHMubGVuZ3RoLGw9ITE7Zm9yKCJib29sZWFuIj09dHlwZW9mIGEmJihsPWEsYT1hcmd1bWVudHNbc118fHt9LHMrKyksIm9iamVjdCI9PXR5cGVvZiBhfHxnKGEpfHwoYT17fSkscz09PXUmJihhPXRoaXMscy0tKTtzPHU7cysrKWlmKG51bGwhPShlPWFyZ3VtZW50c1tzXSkpZm9yKHQgaW4gZSluPWFbdF0sYSE9PShyPWVbdF0pJiYobCYmciYmKHcuaXNQbGFpbk9iamVjdChyKXx8KGk9QXJyYXkuaXNBcnJheShyKSkpPyhpPyhpPSExLG89biYmQXJyYXkuaXNBcnJheShuKT9uOltdKTpvPW4mJncuaXNQbGFpbk9iamVjdChuKT9uOnt9LGFbdF09dy5leHRlbmQobCxvLHIpKTp2b2lkIDAhPT1yJiYoYVt0XT1yKSk7cmV0dXJuIGF9LHcuZXh0ZW5kKHtleHBhbmRvOiJqUXVlcnkiKygiMy4zLjEiK01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xEL2csIiIpLGlzUmVhZHk6ITAsZXJyb3I6ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKGUpfSxub29wOmZ1bmN0aW9uKCl7fSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0LG47cmV0dXJuISghZXx8IltvYmplY3QgT2JqZWN0XSIhPT1jLmNhbGwoZSkpJiYoISh0PWkoZSkpfHwiZnVuY3Rpb24iPT10eXBlb2Yobj1mLmNhbGwodCwiY29uc3RydWN0b3IiKSYmdC5jb25zdHJ1Y3RvcikmJnAuY2FsbChuKT09PWQpfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0O2Zvcih0IGluIGUpcmV0dXJuITE7cmV0dXJuITB9LGdsb2JhbEV2YWw6ZnVuY3Rpb24oZSl7bShlKX0sZWFjaDpmdW5jdGlvbihlLHQpe3ZhciBuLHI9MDtpZihDKGUpKXtmb3Iobj1lLmxlbmd0aDtyPG47cisrKWlmKCExPT09dC5jYWxsKGVbcl0scixlW3JdKSlicmVha31lbHNlIGZvcihyIGluIGUpaWYoITE9PT10LmNhbGwoZVtyXSxyLGVbcl0pKWJyZWFrO3JldHVybiBlfSx0cmltOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lPyIiOihlKyIiKS5yZXBsYWNlKFQsIiIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oZSx0KXt2YXIgbj10fHxbXTtyZXR1cm4gbnVsbCE9ZSYmKEMoT2JqZWN0KGUpKT93Lm1lcmdlKG4sInN0cmluZyI9PXR5cGVvZiBlP1tlXTplKTpzLmNhbGwobixlKSksbn0saW5BcnJheTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIG51bGw9PXQ/LTE6dS5jYWxsKHQsZSxuKX0sbWVyZ2U6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49K3QubGVuZ3RoLHI9MCxpPWUubGVuZ3RoO3I8bjtyKyspZVtpKytdPXRbcl07cmV0dXJuIGUubGVuZ3RoPWksZX0sZ3JlcDpmdW5jdGlvbihlLHQsbil7Zm9yKHZhciByLGk9W10sbz0wLGE9ZS5sZW5ndGgscz0hbjtvPGE7bysrKShyPSF0KGVbb10sbykpIT09cyYmaS5wdXNoKGVbb10pO3JldHVybiBpfSxtYXA6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbz0wLHM9W107aWYoQyhlKSlmb3Iocj1lLmxlbmd0aDtvPHI7bysrKW51bGwhPShpPXQoZVtvXSxvLG4pKSYmcy5wdXNoKGkpO2Vsc2UgZm9yKG8gaW4gZSludWxsIT0oaT10KGVbb10sbyxuKSkmJnMucHVzaChpKTtyZXR1cm4gYS5hcHBseShbXSxzKX0sZ3VpZDoxLHN1cHBvcnQ6aH0pLCJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJih3LmZuW1N5bWJvbC5pdGVyYXRvcl09bltTeW1ib2wuaXRlcmF0b3JdKSx3LmVhY2goIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IgU3ltYm9sIi5zcGxpdCgiICIpLGZ1bmN0aW9uKGUsdCl7bFsiW29iamVjdCAiK3QrIl0iXT10LnRvTG93ZXJDYXNlKCl9KTtmdW5jdGlvbiBDKGUpe3ZhciB0PSEhZSYmImxlbmd0aCJpbiBlJiZlLmxlbmd0aCxuPXgoZSk7cmV0dXJuIWcoZSkmJiF5KGUpJiYoImFycmF5Ij09PW58fDA9PT10fHwibnVtYmVyIj09dHlwZW9mIHQmJnQ+MCYmdC0xIGluIGUpfXZhciBFPWZ1bmN0aW9uKGUpe3ZhciB0LG4scixpLG8sYSxzLHUsbCxjLGYscCxkLGgsZyx5LHYsbSx4LGI9InNpenpsZSIrMSpuZXcgRGF0ZSx3PWUuZG9jdW1lbnQsVD0wLEM9MCxFPWFlKCksaz1hZSgpLFM9YWUoKSxEPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10JiYoZj0hMCksMH0sTj17fS5oYXNPd25Qcm9wZXJ0eSxBPVtdLGo9QS5wb3AscT1BLnB1c2gsTD1BLnB1c2gsSD1BLnNsaWNlLE89ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MCxyPWUubGVuZ3RoO248cjtuKyspaWYoZVtuXT09PXQpcmV0dXJuIG47cmV0dXJuLTF9LFA9ImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkIixNPSJbXFx4MjBcXHRcXHJcXG5cXGZdIixSPSIoPzpcXFxcLnxbXFx3LV18W15cMC1cXHhhMF0pKyIsST0iXFxbIitNKyIqKCIrUisiKSg/OiIrTSsiKihbKl4kfCF+XT89KSIrTSsiKig/OicoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwifCgiK1IrIikpfCkiK00rIipcXF0iLFc9IjooIitSKyIpKD86XFwoKCgnKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcIil8KCg/OlxcXFwufFteXFxcXCgpW1xcXV18IitJKyIpKil8LiopXFwpfCkiLCQ9bmV3IFJlZ0V4cChNKyIrIiwiZyIpLEI9bmV3IFJlZ0V4cCgiXiIrTSsiK3woKD86XnxbXlxcXFxdKSg/OlxcXFwuKSopIitNKyIrJCIsImciKSxGPW5ldyBSZWdFeHAoIl4iK00rIiosIitNKyIqIiksXz1uZXcgUmVnRXhwKCJeIitNKyIqKFs+K35dfCIrTSsiKSIrTSsiKiIpLHo9bmV3IFJlZ0V4cCgiPSIrTSsiKihbXlxcXSdcIl0qPykiK00rIipcXF0iLCJnIiksWD1uZXcgUmVnRXhwKFcpLFU9bmV3IFJlZ0V4cCgiXiIrUisiJCIpLFY9e0lEOm5ldyBSZWdFeHAoIl4jKCIrUisiKSIpLENMQVNTOm5ldyBSZWdFeHAoIl5cXC4oIitSKyIpIiksVEFHOm5ldyBSZWdFeHAoIl4oIitSKyJ8WypdKSIpLEFUVFI6bmV3IFJlZ0V4cCgiXiIrSSksUFNFVURPOm5ldyBSZWdFeHAoIl4iK1cpLENISUxEOm5ldyBSZWdFeHAoIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcKCIrTSsiKihldmVufG9kZHwoKFsrLV18KShcXGQqKW58KSIrTSsiKig/OihbKy1dfCkiK00rIiooXFxkKyl8KSkiK00rIipcXCl8KSIsImkiKSxib29sOm5ldyBSZWdFeHAoIl4oPzoiK1ArIikkIiwiaSIpLG5lZWRzQ29udGV4dDpuZXcgUmVnRXhwKCJeIitNKyIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXCgiK00rIiooKD86LVxcZCk/XFxkKikiK00rIipcXCl8KSg/PVteLV18JCkiLCJpIil9LEc9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxZPS9eaFxkJC9pLFE9L15bXntdK1x7XHMqXFtuYXRpdmUgXHcvLEo9L14oPzojKFtcdy1dKyl8KFx3Kyl8XC4oW1x3LV0rKSkkLyxLPS9bK35dLyxaPW5ldyBSZWdFeHAoIlxcXFwoW1xcZGEtZl17MSw2fSIrTSsiP3woIitNKyIpfC4pIiwiaWciKSxlZT1mdW5jdGlvbihlLHQsbil7dmFyIHI9IjB4Iit0LTY1NTM2O3JldHVybiByIT09cnx8bj90OnI8MD9TdHJpbmcuZnJvbUNoYXJDb2RlKHIrNjU1MzYpOlN0cmluZy5mcm9tQ2hhckNvZGUocj4+MTB8NTUyOTYsMTAyMyZyfDU2MzIwKX0sdGU9LyhbXDAtXHgxZlx4N2ZdfF4tP1xkKXxeLSR8W15cMC1ceDFmXHg3Zi1cdUZGRkZcdy1dL2csbmU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD8iXDAiPT09ZT8iXHVmZmZkIjplLnNsaWNlKDAsLTEpKyJcXCIrZS5jaGFyQ29kZUF0KGUubGVuZ3RoLTEpLnRvU3RyaW5nKDE2KSsiICI6IlxcIitlfSxyZT1mdW5jdGlvbigpe3AoKX0saWU9bWUoZnVuY3Rpb24oZSl7cmV0dXJuITA9PT1lLmRpc2FibGVkJiYoImZvcm0iaW4gZXx8ImxhYmVsImluIGUpfSx7ZGlyOiJwYXJlbnROb2RlIixuZXh0OiJsZWdlbmQifSk7dHJ5e0wuYXBwbHkoQT1ILmNhbGwody5jaGlsZE5vZGVzKSx3LmNoaWxkTm9kZXMpLEFbdy5jaGlsZE5vZGVzLmxlbmd0aF0ubm9kZVR5cGV9Y2F0Y2goZSl7TD17YXBwbHk6QS5sZW5ndGg/ZnVuY3Rpb24oZSx0KXtxLmFwcGx5KGUsSC5jYWxsKHQpKX06ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmxlbmd0aCxyPTA7d2hpbGUoZVtuKytdPXRbcisrXSk7ZS5sZW5ndGg9bi0xfX19ZnVuY3Rpb24gb2UoZSx0LHIsaSl7dmFyIG8scyxsLGMsZixoLHYsbT10JiZ0Lm93bmVyRG9jdW1lbnQsVD10P3Qubm9kZVR5cGU6OTtpZihyPXJ8fFtdLCJzdHJpbmciIT10eXBlb2YgZXx8IWV8fDEhPT1UJiY5IT09VCYmMTEhPT1UKXJldHVybiByO2lmKCFpJiYoKHQ/dC5vd25lckRvY3VtZW50fHx0OncpIT09ZCYmcCh0KSx0PXR8fGQsZykpe2lmKDExIT09VCYmKGY9Si5leGVjKGUpKSlpZihvPWZbMV0pe2lmKDk9PT1UKXtpZighKGw9dC5nZXRFbGVtZW50QnlJZChvKSkpcmV0dXJuIHI7aWYobC5pZD09PW8pcmV0dXJuIHIucHVzaChsKSxyfWVsc2UgaWYobSYmKGw9bS5nZXRFbGVtZW50QnlJZChvKSkmJngodCxsKSYmbC5pZD09PW8pcmV0dXJuIHIucHVzaChsKSxyfWVsc2V7aWYoZlsyXSlyZXR1cm4gTC5hcHBseShyLHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSkpLHI7aWYoKG89ZlszXSkmJm4uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXJldHVybiBMLmFwcGx5KHIsdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKG8pKSxyfWlmKG4ucXNhJiYhU1tlKyIgIl0mJigheXx8IXkudGVzdChlKSkpe2lmKDEhPT1UKW09dCx2PWU7ZWxzZSBpZigib2JqZWN0IiE9PXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7KGM9dC5nZXRBdHRyaWJ1dGUoImlkIikpP2M9Yy5yZXBsYWNlKHRlLG5lKTp0LnNldEF0dHJpYnV0ZSgiaWQiLGM9Yikscz0oaD1hKGUpKS5sZW5ndGg7d2hpbGUocy0tKWhbc109IiMiK2MrIiAiK3ZlKGhbc10pO3Y9aC5qb2luKCIsIiksbT1LLnRlc3QoZSkmJmdlKHQucGFyZW50Tm9kZSl8fHR9aWYodil0cnl7cmV0dXJuIEwuYXBwbHkocixtLnF1ZXJ5U2VsZWN0b3JBbGwodikpLHJ9Y2F0Y2goZSl7fWZpbmFsbHl7Yz09PWImJnQucmVtb3ZlQXR0cmlidXRlKCJpZCIpfX19cmV0dXJuIHUoZS5yZXBsYWNlKEIsIiQxIiksdCxyLGkpfWZ1bmN0aW9uIGFlKCl7dmFyIGU9W107ZnVuY3Rpb24gdChuLGkpe3JldHVybiBlLnB1c2gobisiICIpPnIuY2FjaGVMZW5ndGgmJmRlbGV0ZSB0W2Uuc2hpZnQoKV0sdFtuKyIgIl09aX1yZXR1cm4gdH1mdW5jdGlvbiBzZShlKXtyZXR1cm4gZVtiXT0hMCxlfWZ1bmN0aW9uIHVlKGUpe3ZhciB0PWQuY3JlYXRlRWxlbWVudCgiZmllbGRzZXQiKTt0cnl7cmV0dXJuISFlKHQpfWNhdGNoKGUpe3JldHVybiExfWZpbmFsbHl7dC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodCksdD1udWxsfX1mdW5jdGlvbiBsZShlLHQpe3ZhciBuPWUuc3BsaXQoInwiKSxpPW4ubGVuZ3RoO3doaWxlKGktLSlyLmF0dHJIYW5kbGVbbltpXV09dH1mdW5jdGlvbiBjZShlLHQpe3ZhciBuPXQmJmUscj1uJiYxPT09ZS5ub2RlVHlwZSYmMT09PXQubm9kZVR5cGUmJmUuc291cmNlSW5kZXgtdC5zb3VyY2VJbmRleDtpZihyKXJldHVybiByO2lmKG4pd2hpbGUobj1uLm5leHRTaWJsaW5nKWlmKG49PT10KXJldHVybi0xO3JldHVybiBlPzE6LTF9ZnVuY3Rpb24gZmUoZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiJpbnB1dCI9PT10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJnQudHlwZT09PWV9fWZ1bmN0aW9uIHBlKGUpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgbj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKCJpbnB1dCI9PT1ufHwiYnV0dG9uIj09PW4pJiZ0LnR5cGU9PT1lfX1mdW5jdGlvbiBkZShlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuImZvcm0iaW4gdD90LnBhcmVudE5vZGUmJiExPT09dC5kaXNhYmxlZD8ibGFiZWwiaW4gdD8ibGFiZWwiaW4gdC5wYXJlbnROb2RlP3QucGFyZW50Tm9kZS5kaXNhYmxlZD09PWU6dC5kaXNhYmxlZD09PWU6dC5pc0Rpc2FibGVkPT09ZXx8dC5pc0Rpc2FibGVkIT09IWUmJmllKHQpPT09ZTp0LmRpc2FibGVkPT09ZToibGFiZWwiaW4gdCYmdC5kaXNhYmxlZD09PWV9fWZ1bmN0aW9uIGhlKGUpe3JldHVybiBzZShmdW5jdGlvbih0KXtyZXR1cm4gdD0rdCxzZShmdW5jdGlvbihuLHIpe3ZhciBpLG89ZShbXSxuLmxlbmd0aCx0KSxhPW8ubGVuZ3RoO3doaWxlKGEtLSluW2k9b1thXV0mJihuW2ldPSEocltpXT1uW2ldKSl9KX0pfWZ1bmN0aW9uIGdlKGUpe3JldHVybiBlJiYidW5kZWZpbmVkIiE9dHlwZW9mIGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUmJmV9bj1vZS5zdXBwb3J0PXt9LG89b2UuaXNYTUw9ZnVuY3Rpb24oZSl7dmFyIHQ9ZSYmKGUub3duZXJEb2N1bWVudHx8ZSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiEhdCYmIkhUTUwiIT09dC5ub2RlTmFtZX0scD1vZS5zZXREb2N1bWVudD1mdW5jdGlvbihlKXt2YXIgdCxpLGE9ZT9lLm93bmVyRG9jdW1lbnR8fGU6dztyZXR1cm4gYSE9PWQmJjk9PT1hLm5vZGVUeXBlJiZhLmRvY3VtZW50RWxlbWVudD8oZD1hLGg9ZC5kb2N1bWVudEVsZW1lbnQsZz0hbyhkKSx3IT09ZCYmKGk9ZC5kZWZhdWx0VmlldykmJmkudG9wIT09aSYmKGkuYWRkRXZlbnRMaXN0ZW5lcj9pLmFkZEV2ZW50TGlzdGVuZXIoInVubG9hZCIscmUsITEpOmkuYXR0YWNoRXZlbnQmJmkuYXR0YWNoRXZlbnQoIm9udW5sb2FkIixyZSkpLG4uYXR0cmlidXRlcz11ZShmdW5jdGlvbihlKXtyZXR1cm4gZS5jbGFzc05hbWU9ImkiLCFlLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KSxuLmdldEVsZW1lbnRzQnlUYWdOYW1lPXVlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmFwcGVuZENoaWxkKGQuY3JlYXRlQ29tbWVudCgiIikpLCFlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RofSksbi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPVEudGVzdChkLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLG4uZ2V0QnlJZD11ZShmdW5jdGlvbihlKXtyZXR1cm4gaC5hcHBlbmRDaGlsZChlKS5pZD1iLCFkLmdldEVsZW1lbnRzQnlOYW1lfHwhZC5nZXRFbGVtZW50c0J5TmFtZShiKS5sZW5ndGh9KSxuLmdldEJ5SWQ/KHIuZmlsdGVyLklEPWZ1bmN0aW9uKGUpe3ZhciB0PWUucmVwbGFjZShaLGVlKTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlKCJpZCIpPT09dH19LHIuZmluZC5JRD1mdW5jdGlvbihlLHQpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgdC5nZXRFbGVtZW50QnlJZCYmZyl7dmFyIG49dC5nZXRFbGVtZW50QnlJZChlKTtyZXR1cm4gbj9bbl06W119fSk6KHIuZmlsdGVyLklEPWZ1bmN0aW9uKGUpe3ZhciB0PWUucmVwbGFjZShaLGVlKTtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49InVuZGVmaW5lZCIhPXR5cGVvZiBlLmdldEF0dHJpYnV0ZU5vZGUmJmUuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtyZXR1cm4gbiYmbi52YWx1ZT09PXR9fSxyLmZpbmQuSUQ9ZnVuY3Rpb24oZSx0KXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHQuZ2V0RWxlbWVudEJ5SWQmJmcpe3ZhciBuLHIsaSxvPXQuZ2V0RWxlbWVudEJ5SWQoZSk7aWYobyl7aWYoKG49by5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpKSYmbi52YWx1ZT09PWUpcmV0dXJuW29dO2k9dC5nZXRFbGVtZW50c0J5TmFtZShlKSxyPTA7d2hpbGUobz1pW3IrK10paWYoKG49by5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpKSYmbi52YWx1ZT09PWUpcmV0dXJuW29dfXJldHVybltdfX0pLHIuZmluZC5UQUc9bi5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihlLHQpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgdC5nZXRFbGVtZW50c0J5VGFnTmFtZT90LmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpOm4ucXNhP3QucXVlcnlTZWxlY3RvckFsbChlKTp2b2lkIDB9OmZ1bmN0aW9uKGUsdCl7dmFyIG4scj1bXSxpPTAsbz10LmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpO2lmKCIqIj09PWUpe3doaWxlKG49b1tpKytdKTE9PT1uLm5vZGVUeXBlJiZyLnB1c2gobik7cmV0dXJuIHJ9cmV0dXJuIG99LHIuZmluZC5DTEFTUz1uLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGUsdCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiB0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmcpcmV0dXJuIHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShlKX0sdj1bXSx5PVtdLChuLnFzYT1RLnRlc3QoZC5xdWVyeVNlbGVjdG9yQWxsKSkmJih1ZShmdW5jdGlvbihlKXtoLmFwcGVuZENoaWxkKGUpLmlubmVySFRNTD0iPGEgaWQ9JyIrYisiJz48L2E+PHNlbGVjdCBpZD0nIitiKyItXHJcXCcgbXNhbGxvd2NhcHR1cmU9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD4iLGUucXVlcnlTZWxlY3RvckFsbCgiW21zYWxsb3djYXB0dXJlXj0nJ10iKS5sZW5ndGgmJnkucHVzaCgiWypeJF09IitNKyIqKD86Jyd8XCJcIikiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5sZW5ndGh8fHkucHVzaCgiXFxbIitNKyIqKD86dmFsdWV8IitQKyIpIiksZS5xdWVyeVNlbGVjdG9yQWxsKCJbaWR+PSIrYisiLV0iKS5sZW5ndGh8fHkucHVzaCgifj0iKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RofHx5LnB1c2goIjpjaGVja2VkIiksZS5xdWVyeVNlbGVjdG9yQWxsKCJhIyIrYisiKyoiKS5sZW5ndGh8fHkucHVzaCgiLiMuK1srfl0iKX0pLHVlKGZ1bmN0aW9uKGUpe2UuaW5uZXJIVE1MPSI8YSBocmVmPScnIGRpc2FibGVkPSdkaXNhYmxlZCc+PC9hPjxzZWxlY3QgZGlzYWJsZWQ9J2Rpc2FibGVkJz48b3B0aW9uLz48L3NlbGVjdD4iO3ZhciB0PWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTt0LnNldEF0dHJpYnV0ZSgidHlwZSIsImhpZGRlbiIpLGUuYXBwZW5kQ2hpbGQodCkuc2V0QXR0cmlidXRlKCJuYW1lIiwiRCIpLGUucXVlcnlTZWxlY3RvckFsbCgiW25hbWU9ZF0iKS5sZW5ndGgmJnkucHVzaCgibmFtZSIrTSsiKlsqXiR8IX5dPz0iKSwyIT09ZS5xdWVyeVNlbGVjdG9yQWxsKCI6ZW5hYmxlZCIpLmxlbmd0aCYmeS5wdXNoKCI6ZW5hYmxlZCIsIjpkaXNhYmxlZCIpLGguYXBwZW5kQ2hpbGQoZSkuZGlzYWJsZWQ9ITAsMiE9PWUucXVlcnlTZWxlY3RvckFsbCgiOmRpc2FibGVkIikubGVuZ3RoJiZ5LnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksZS5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4IikseS5wdXNoKCIsLio6Iil9KSksKG4ubWF0Y2hlc1NlbGVjdG9yPVEudGVzdChtPWgubWF0Y2hlc3x8aC53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fGgubW96TWF0Y2hlc1NlbGVjdG9yfHxoLm9NYXRjaGVzU2VsZWN0b3J8fGgubXNNYXRjaGVzU2VsZWN0b3IpKSYmdWUoZnVuY3Rpb24oZSl7bi5kaXNjb25uZWN0ZWRNYXRjaD1tLmNhbGwoZSwiKiIpLG0uY2FsbChlLCJbcyE9JyddOngiKSx2LnB1c2goIiE9IixXKX0pLHk9eS5sZW5ndGgmJm5ldyBSZWdFeHAoeS5qb2luKCJ8IikpLHY9di5sZW5ndGgmJm5ldyBSZWdFeHAodi5qb2luKCJ8IikpLHQ9US50ZXN0KGguY29tcGFyZURvY3VtZW50UG9zaXRpb24pLHg9dHx8US50ZXN0KGguY29udGFpbnMpP2Z1bmN0aW9uKGUsdCl7dmFyIG49OT09PWUubm9kZVR5cGU/ZS5kb2N1bWVudEVsZW1lbnQ6ZSxyPXQmJnQucGFyZW50Tm9kZTtyZXR1cm4gZT09PXJ8fCEoIXJ8fDEhPT1yLm5vZGVUeXBlfHwhKG4uY29udGFpbnM/bi5jb250YWlucyhyKTplLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiYxNiZlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHIpKSl9OmZ1bmN0aW9uKGUsdCl7aWYodCl3aGlsZSh0PXQucGFyZW50Tm9kZSlpZih0PT09ZSlyZXR1cm4hMDtyZXR1cm4hMX0sRD10P2Z1bmN0aW9uKGUsdCl7aWYoZT09PXQpcmV0dXJuIGY9ITAsMDt2YXIgcj0hZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbi0hdC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtyZXR1cm4gcnx8KDEmKHI9KGUub3duZXJEb2N1bWVudHx8ZSk9PT0odC5vd25lckRvY3VtZW50fHx0KT9lLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHQpOjEpfHwhbi5zb3J0RGV0YWNoZWQmJnQuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZSk9PT1yP2U9PT1kfHxlLm93bmVyRG9jdW1lbnQ9PT13JiZ4KHcsZSk/LTE6dD09PWR8fHQub3duZXJEb2N1bWVudD09PXcmJngodyx0KT8xOmM/TyhjLGUpLU8oYyx0KTowOjQmcj8tMToxKX06ZnVuY3Rpb24oZSx0KXtpZihlPT09dClyZXR1cm4gZj0hMCwwO3ZhciBuLHI9MCxpPWUucGFyZW50Tm9kZSxvPXQucGFyZW50Tm9kZSxhPVtlXSxzPVt0XTtpZighaXx8IW8pcmV0dXJuIGU9PT1kPy0xOnQ9PT1kPzE6aT8tMTpvPzE6Yz9PKGMsZSktTyhjLHQpOjA7aWYoaT09PW8pcmV0dXJuIGNlKGUsdCk7bj1lO3doaWxlKG49bi5wYXJlbnROb2RlKWEudW5zaGlmdChuKTtuPXQ7d2hpbGUobj1uLnBhcmVudE5vZGUpcy51bnNoaWZ0KG4pO3doaWxlKGFbcl09PT1zW3JdKXIrKztyZXR1cm4gcj9jZShhW3JdLHNbcl0pOmFbcl09PT13Py0xOnNbcl09PT13PzE6MH0sZCk6ZH0sb2UubWF0Y2hlcz1mdW5jdGlvbihlLHQpe3JldHVybiBvZShlLG51bGwsbnVsbCx0KX0sb2UubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGUsdCl7aWYoKGUub3duZXJEb2N1bWVudHx8ZSkhPT1kJiZwKGUpLHQ9dC5yZXBsYWNlKHosIj0nJDEnXSIpLG4ubWF0Y2hlc1NlbGVjdG9yJiZnJiYhU1t0KyIgIl0mJighdnx8IXYudGVzdCh0KSkmJigheXx8IXkudGVzdCh0KSkpdHJ5e3ZhciByPW0uY2FsbChlLHQpO2lmKHJ8fG4uZGlzY29ubmVjdGVkTWF0Y2h8fGUuZG9jdW1lbnQmJjExIT09ZS5kb2N1bWVudC5ub2RlVHlwZSlyZXR1cm4gcn1jYXRjaChlKXt9cmV0dXJuIG9lKHQsZCxudWxsLFtlXSkubGVuZ3RoPjB9LG9lLmNvbnRhaW5zPWZ1bmN0aW9uKGUsdCl7cmV0dXJuKGUub3duZXJEb2N1bWVudHx8ZSkhPT1kJiZwKGUpLHgoZSx0KX0sb2UuYXR0cj1mdW5jdGlvbihlLHQpeyhlLm93bmVyRG9jdW1lbnR8fGUpIT09ZCYmcChlKTt2YXIgaT1yLmF0dHJIYW5kbGVbdC50b0xvd2VyQ2FzZSgpXSxvPWkmJk4uY2FsbChyLmF0dHJIYW5kbGUsdC50b0xvd2VyQ2FzZSgpKT9pKGUsdCwhZyk6dm9pZCAwO3JldHVybiB2b2lkIDAhPT1vP286bi5hdHRyaWJ1dGVzfHwhZz9lLmdldEF0dHJpYnV0ZSh0KToobz1lLmdldEF0dHJpYnV0ZU5vZGUodCkpJiZvLnNwZWNpZmllZD9vLnZhbHVlOm51bGx9LG9lLmVzY2FwZT1mdW5jdGlvbihlKXtyZXR1cm4oZSsiIikucmVwbGFjZSh0ZSxuZSl9LG9lLmVycm9yPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcigiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIitlKX0sb2UudW5pcXVlU29ydD1mdW5jdGlvbihlKXt2YXIgdCxyPVtdLGk9MCxvPTA7aWYoZj0hbi5kZXRlY3REdXBsaWNhdGVzLGM9IW4uc29ydFN0YWJsZSYmZS5zbGljZSgwKSxlLnNvcnQoRCksZil7d2hpbGUodD1lW28rK10pdD09PWVbb10mJihpPXIucHVzaChvKSk7d2hpbGUoaS0tKWUuc3BsaWNlKHJbaV0sMSl9cmV0dXJuIGM9bnVsbCxlfSxpPW9lLmdldFRleHQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj0iIixyPTAsbz1lLm5vZGVUeXBlO2lmKG8pe2lmKDE9PT1vfHw5PT09b3x8MTE9PT1vKXtpZigic3RyaW5nIj09dHlwZW9mIGUudGV4dENvbnRlbnQpcmV0dXJuIGUudGV4dENvbnRlbnQ7Zm9yKGU9ZS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKW4rPWkoZSl9ZWxzZSBpZigzPT09b3x8ND09PW8pcmV0dXJuIGUubm9kZVZhbHVlfWVsc2Ugd2hpbGUodD1lW3IrK10pbis9aSh0KTtyZXR1cm4gbn0sKHI9b2Uuc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86c2UsbWF0Y2g6VixhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6eyI+Ijp7ZGlyOiJwYXJlbnROb2RlIixmaXJzdDohMH0sIiAiOntkaXI6InBhcmVudE5vZGUifSwiKyI6e2RpcjoicHJldmlvdXNTaWJsaW5nIixmaXJzdDohMH0sIn4iOntkaXI6InByZXZpb3VzU2libGluZyJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS5yZXBsYWNlKFosZWUpLGVbM109KGVbM118fGVbNF18fGVbNV18fCIiKS5yZXBsYWNlKFosZWUpLCJ+PSI9PT1lWzJdJiYoZVszXT0iICIrZVszXSsiICIpLGUuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS50b0xvd2VyQ2FzZSgpLCJudGgiPT09ZVsxXS5zbGljZSgwLDMpPyhlWzNdfHxvZS5lcnJvcihlWzBdKSxlWzRdPSsoZVs0XT9lWzVdKyhlWzZdfHwxKToyKigiZXZlbiI9PT1lWzNdfHwib2RkIj09PWVbM10pKSxlWzVdPSsoZVs3XStlWzhdfHwib2RkIj09PWVbM10pKTplWzNdJiZvZS5lcnJvcihlWzBdKSxlfSxQU0VVRE86ZnVuY3Rpb24oZSl7dmFyIHQsbj0hZVs2XSYmZVsyXTtyZXR1cm4gVi5DSElMRC50ZXN0KGVbMF0pP251bGw6KGVbM10/ZVsyXT1lWzRdfHxlWzVdfHwiIjpuJiZYLnRlc3QobikmJih0PWEobiwhMCkpJiYodD1uLmluZGV4T2YoIikiLG4ubGVuZ3RoLXQpLW4ubGVuZ3RoKSYmKGVbMF09ZVswXS5zbGljZSgwLHQpLGVbMl09bi5zbGljZSgwLHQpKSxlLnNsaWNlKDAsMykpfX0sZmlsdGVyOntUQUc6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yZXBsYWNlKFosZWUpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIioiPT09ZT9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihlKXtyZXR1cm4gZS5ub2RlTmFtZSYmZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09dH19LENMQVNTOmZ1bmN0aW9uKGUpe3ZhciB0PUVbZSsiICJdO3JldHVybiB0fHwodD1uZXcgUmVnRXhwKCIoXnwiK00rIikiK2UrIigiK00rInwkKSIpKSYmRShlLGZ1bmN0aW9uKGUpe3JldHVybiB0LnRlc3QoInN0cmluZyI9PXR5cGVvZiBlLmNsYXNzTmFtZSYmZS5jbGFzc05hbWV8fCJ1bmRlZmluZWQiIT10eXBlb2YgZS5nZXRBdHRyaWJ1dGUmJmUuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIil9KX0sQVRUUjpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBpPW9lLmF0dHIocixlKTtyZXR1cm4gbnVsbD09aT8iIT0iPT09dDohdHx8KGkrPSIiLCI9Ij09PXQ/aT09PW46IiE9Ij09PXQ/aSE9PW46Il49Ij09PXQ/biYmMD09PWkuaW5kZXhPZihuKToiKj0iPT09dD9uJiZpLmluZGV4T2Yobik+LTE6IiQ9Ij09PXQ/biYmaS5zbGljZSgtbi5sZW5ndGgpPT09bjoifj0iPT09dD8oIiAiK2kucmVwbGFjZSgkLCIgIikrIiAiKS5pbmRleE9mKG4pPi0xOiJ8PSI9PT10JiYoaT09PW58fGkuc2xpY2UoMCxuLmxlbmd0aCsxKT09PW4rIi0iKSl9fSxDSElMRDpmdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvPSJudGgiIT09ZS5zbGljZSgwLDMpLGE9Imxhc3QiIT09ZS5zbGljZSgtNCkscz0ib2YtdHlwZSI9PT10O3JldHVybiAxPT09ciYmMD09PWk/ZnVuY3Rpb24oZSl7cmV0dXJuISFlLnBhcmVudE5vZGV9OmZ1bmN0aW9uKHQsbix1KXt2YXIgbCxjLGYscCxkLGgsZz1vIT09YT8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLHk9dC5wYXJlbnROb2RlLHY9cyYmdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLG09IXUmJiFzLHg9ITE7aWYoeSl7aWYobyl7d2hpbGUoZyl7cD10O3doaWxlKHA9cFtnXSlpZihzP3Aubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXY6MT09PXAubm9kZVR5cGUpcmV0dXJuITE7aD1nPSJvbmx5Ij09PWUmJiFoJiYibmV4dFNpYmxpbmcifXJldHVybiEwfWlmKGg9W2E/eS5maXJzdENoaWxkOnkubGFzdENoaWxkXSxhJiZtKXt4PShkPShsPShjPShmPShwPXkpW2JdfHwocFtiXT17fSkpW3AudW5pcXVlSURdfHwoZltwLnVuaXF1ZUlEXT17fSkpW2VdfHxbXSlbMF09PT1UJiZsWzFdKSYmbFsyXSxwPWQmJnkuY2hpbGROb2Rlc1tkXTt3aGlsZShwPSsrZCYmcCYmcFtnXXx8KHg9ZD0wKXx8aC5wb3AoKSlpZigxPT09cC5ub2RlVHlwZSYmKyt4JiZwPT09dCl7Y1tlXT1bVCxkLHhdO2JyZWFrfX1lbHNlIGlmKG0mJih4PWQ9KGw9KGM9KGY9KHA9dClbYl18fChwW2JdPXt9KSlbcC51bmlxdWVJRF18fChmW3AudW5pcXVlSURdPXt9KSlbZV18fFtdKVswXT09PVQmJmxbMV0pLCExPT09eCl3aGlsZShwPSsrZCYmcCYmcFtnXXx8KHg9ZD0wKXx8aC5wb3AoKSlpZigocz9wLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT12OjE9PT1wLm5vZGVUeXBlKSYmKyt4JiYobSYmKChjPShmPXBbYl18fChwW2JdPXt9KSlbcC51bmlxdWVJRF18fChmW3AudW5pcXVlSURdPXt9KSlbZV09W1QseF0pLHA9PT10KSlicmVhaztyZXR1cm4oeC09aSk9PT1yfHx4JXI9PTAmJngvcj49MH19fSxQU0VVRE86ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXIucHNldWRvc1tlXXx8ci5zZXRGaWx0ZXJzW2UudG9Mb3dlckNhc2UoKV18fG9lLmVycm9yKCJ1bnN1cHBvcnRlZCBwc2V1ZG86ICIrZSk7cmV0dXJuIGlbYl0/aSh0KTppLmxlbmd0aD4xPyhuPVtlLGUsIiIsdF0sci5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KGUudG9Mb3dlckNhc2UoKSk/c2UoZnVuY3Rpb24oZSxuKXt2YXIgcixvPWkoZSx0KSxhPW8ubGVuZ3RoO3doaWxlKGEtLSllW3I9TyhlLG9bYV0pXT0hKG5bcl09b1thXSl9KTpmdW5jdGlvbihlKXtyZXR1cm4gaShlLDAsbil9KTppfX0scHNldWRvczp7bm90OnNlKGZ1bmN0aW9uKGUpe3ZhciB0PVtdLG49W10scj1zKGUucmVwbGFjZShCLCIkMSIpKTtyZXR1cm4gcltiXT9zZShmdW5jdGlvbihlLHQsbixpKXt2YXIgbyxhPXIoZSxudWxsLGksW10pLHM9ZS5sZW5ndGg7d2hpbGUocy0tKShvPWFbc10pJiYoZVtzXT0hKHRbc109bykpfSk6ZnVuY3Rpb24oZSxpLG8pe3JldHVybiB0WzBdPWUscih0LG51bGwsbyxuKSx0WzBdPW51bGwsIW4ucG9wKCl9fSksaGFzOnNlKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gb2UoZSx0KS5sZW5ndGg+MH19KSxjb250YWluczpzZShmdW5jdGlvbihlKXtyZXR1cm4gZT1lLnJlcGxhY2UoWixlZSksZnVuY3Rpb24odCl7cmV0dXJuKHQudGV4dENvbnRlbnR8fHQuaW5uZXJUZXh0fHxpKHQpKS5pbmRleE9mKGUpPi0xfX0pLGxhbmc6c2UoZnVuY3Rpb24oZSl7cmV0dXJuIFUudGVzdChlfHwiIil8fG9lLmVycm9yKCJ1bnN1cHBvcnRlZCBsYW5nOiAiK2UpLGU9ZS5yZXBsYWNlKFosZWUpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24odCl7dmFyIG47ZG97aWYobj1nP3QubGFuZzp0LmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKXx8dC5nZXRBdHRyaWJ1dGUoImxhbmciKSlyZXR1cm4obj1uLnRvTG93ZXJDYXNlKCkpPT09ZXx8MD09PW4uaW5kZXhPZihlKyItIil9d2hpbGUoKHQ9dC5wYXJlbnROb2RlKSYmMT09PXQubm9kZVR5cGUpO3JldHVybiExfX0pLHRhcmdldDpmdW5jdGlvbih0KXt2YXIgbj1lLmxvY2F0aW9uJiZlLmxvY2F0aW9uLmhhc2g7cmV0dXJuIG4mJm4uc2xpY2UoMSk9PT10LmlkfSxyb290OmZ1bmN0aW9uKGUpe3JldHVybiBlPT09aH0sZm9jdXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT1kLmFjdGl2ZUVsZW1lbnQmJighZC5oYXNGb2N1c3x8ZC5oYXNGb2N1cygpKSYmISEoZS50eXBlfHxlLmhyZWZ8fH5lLnRhYkluZGV4KX0sZW5hYmxlZDpkZSghMSksZGlzYWJsZWQ6ZGUoITApLGNoZWNrZWQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT10JiYhIWUuY2hlY2tlZHx8Im9wdGlvbiI9PT10JiYhIWUuc2VsZWN0ZWR9LHNlbGVjdGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlLnBhcmVudE5vZGUmJmUucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LCEwPT09ZS5zZWxlY3RlZH0sZW1wdHk6ZnVuY3Rpb24oZSl7Zm9yKGU9ZS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWlmKGUubm9kZVR5cGU8NilyZXR1cm4hMTtyZXR1cm4hMH0scGFyZW50OmZ1bmN0aW9uKGUpe3JldHVybiFyLnBzZXVkb3MuZW1wdHkoZSl9LGhlYWRlcjpmdW5jdGlvbihlKXtyZXR1cm4gWS50ZXN0KGUubm9kZU5hbWUpfSxpbnB1dDpmdW5jdGlvbihlKXtyZXR1cm4gRy50ZXN0KGUubm9kZU5hbWUpfSxidXR0b246ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT10JiYiYnV0dG9uIj09PWUudHlwZXx8ImJ1dHRvbiI9PT10fSx0ZXh0OmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiJpbnB1dCI9PT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJiJ0ZXh0Ij09PWUudHlwZSYmKG51bGw9PSh0PWUuZ2V0QXR0cmlidXRlKCJ0eXBlIikpfHwidGV4dCI9PT10LnRvTG93ZXJDYXNlKCkpfSxmaXJzdDpoZShmdW5jdGlvbigpe3JldHVyblswXX0pLGxhc3Q6aGUoZnVuY3Rpb24oZSx0KXtyZXR1cm5bdC0xXX0pLGVxOmhlKGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm5bbjwwP24rdDpuXX0pLGV2ZW46aGUoZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MDtuPHQ7bis9MillLnB1c2gobik7cmV0dXJuIGV9KSxvZGQ6aGUoZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MTtuPHQ7bis9MillLnB1c2gobik7cmV0dXJuIGV9KSxsdDpoZShmdW5jdGlvbihlLHQsbil7Zm9yKHZhciByPW48MD9uK3Q6bjstLXI+PTA7KWUucHVzaChyKTtyZXR1cm4gZX0pLGd0OmhlKGZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9bjwwP24rdDpuOysrcjx0OyllLnB1c2gocik7cmV0dXJuIGV9KX19KS5wc2V1ZG9zLm50aD1yLnBzZXVkb3MuZXE7Zm9yKHQgaW57cmFkaW86ITAsY2hlY2tib3g6ITAsZmlsZTohMCxwYXNzd29yZDohMCxpbWFnZTohMH0pci5wc2V1ZG9zW3RdPWZlKHQpO2Zvcih0IGlue3N1Ym1pdDohMCxyZXNldDohMH0pci5wc2V1ZG9zW3RdPXBlKHQpO2Z1bmN0aW9uIHllKCl7fXllLnByb3RvdHlwZT1yLmZpbHRlcnM9ci5wc2V1ZG9zLHIuc2V0RmlsdGVycz1uZXcgeWUsYT1vZS50b2tlbml6ZT1mdW5jdGlvbihlLHQpe3ZhciBuLGksbyxhLHMsdSxsLGM9a1tlKyIgIl07aWYoYylyZXR1cm4gdD8wOmMuc2xpY2UoMCk7cz1lLHU9W10sbD1yLnByZUZpbHRlcjt3aGlsZShzKXtuJiYhKGk9Ri5leGVjKHMpKXx8KGkmJihzPXMuc2xpY2UoaVswXS5sZW5ndGgpfHxzKSx1LnB1c2gobz1bXSkpLG49ITEsKGk9Xy5leGVjKHMpKSYmKG49aS5zaGlmdCgpLG8ucHVzaCh7dmFsdWU6bix0eXBlOmlbMF0ucmVwbGFjZShCLCIgIil9KSxzPXMuc2xpY2Uobi5sZW5ndGgpKTtmb3IoYSBpbiByLmZpbHRlcikhKGk9VlthXS5leGVjKHMpKXx8bFthXSYmIShpPWxbYV0oaSkpfHwobj1pLnNoaWZ0KCksby5wdXNoKHt2YWx1ZTpuLHR5cGU6YSxtYXRjaGVzOml9KSxzPXMuc2xpY2Uobi5sZW5ndGgpKTtpZighbilicmVha31yZXR1cm4gdD9zLmxlbmd0aDpzP29lLmVycm9yKGUpOmsoZSx1KS5zbGljZSgwKX07ZnVuY3Rpb24gdmUoZSl7Zm9yKHZhciB0PTAsbj1lLmxlbmd0aCxyPSIiO3Q8bjt0Kyspcis9ZVt0XS52YWx1ZTtyZXR1cm4gcn1mdW5jdGlvbiBtZShlLHQsbil7dmFyIHI9dC5kaXIsaT10Lm5leHQsbz1pfHxyLGE9biYmInBhcmVudE5vZGUiPT09byxzPUMrKztyZXR1cm4gdC5maXJzdD9mdW5jdGlvbih0LG4saSl7d2hpbGUodD10W3JdKWlmKDE9PT10Lm5vZGVUeXBlfHxhKXJldHVybiBlKHQsbixpKTtyZXR1cm4hMX06ZnVuY3Rpb24odCxuLHUpe3ZhciBsLGMsZixwPVtULHNdO2lmKHUpe3doaWxlKHQ9dFtyXSlpZigoMT09PXQubm9kZVR5cGV8fGEpJiZlKHQsbix1KSlyZXR1cm4hMH1lbHNlIHdoaWxlKHQ9dFtyXSlpZigxPT09dC5ub2RlVHlwZXx8YSlpZihmPXRbYl18fCh0W2JdPXt9KSxjPWZbdC51bmlxdWVJRF18fChmW3QudW5pcXVlSURdPXt9KSxpJiZpPT09dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXQ9dFtyXXx8dDtlbHNle2lmKChsPWNbb10pJiZsWzBdPT09VCYmbFsxXT09PXMpcmV0dXJuIHBbMl09bFsyXTtpZihjW29dPXAscFsyXT1lKHQsbix1KSlyZXR1cm4hMH1yZXR1cm4hMX19ZnVuY3Rpb24geGUoZSl7cmV0dXJuIGUubGVuZ3RoPjE/ZnVuY3Rpb24odCxuLHIpe3ZhciBpPWUubGVuZ3RoO3doaWxlKGktLSlpZighZVtpXSh0LG4scikpcmV0dXJuITE7cmV0dXJuITB9OmVbMF19ZnVuY3Rpb24gYmUoZSx0LG4pe2Zvcih2YXIgcj0wLGk9dC5sZW5ndGg7cjxpO3IrKylvZShlLHRbcl0sbik7cmV0dXJuIG59ZnVuY3Rpb24gd2UoZSx0LG4scixpKXtmb3IodmFyIG8sYT1bXSxzPTAsdT1lLmxlbmd0aCxsPW51bGwhPXQ7czx1O3MrKykobz1lW3NdKSYmKG4mJiFuKG8scixpKXx8KGEucHVzaChvKSxsJiZ0LnB1c2gocykpKTtyZXR1cm4gYX1mdW5jdGlvbiBUZShlLHQsbixyLGksbyl7cmV0dXJuIHImJiFyW2JdJiYocj1UZShyKSksaSYmIWlbYl0mJihpPVRlKGksbykpLHNlKGZ1bmN0aW9uKG8sYSxzLHUpe3ZhciBsLGMsZixwPVtdLGQ9W10saD1hLmxlbmd0aCxnPW98fGJlKHR8fCIqIixzLm5vZGVUeXBlP1tzXTpzLFtdKSx5PSFlfHwhbyYmdD9nOndlKGcscCxlLHMsdSksdj1uP2l8fChvP2U6aHx8cik/W106YTp5O2lmKG4mJm4oeSx2LHMsdSkscil7bD13ZSh2LGQpLHIobCxbXSxzLHUpLGM9bC5sZW5ndGg7d2hpbGUoYy0tKShmPWxbY10pJiYodltkW2NdXT0hKHlbZFtjXV09ZikpfWlmKG8pe2lmKGl8fGUpe2lmKGkpe2w9W10sYz12Lmxlbmd0aDt3aGlsZShjLS0pKGY9dltjXSkmJmwucHVzaCh5W2NdPWYpO2kobnVsbCx2PVtdLGwsdSl9Yz12Lmxlbmd0aDt3aGlsZShjLS0pKGY9dltjXSkmJihsPWk/TyhvLGYpOnBbY10pPi0xJiYob1tsXT0hKGFbbF09ZikpfX1lbHNlIHY9d2Uodj09PWE/di5zcGxpY2UoaCx2Lmxlbmd0aCk6diksaT9pKG51bGwsYSx2LHUpOkwuYXBwbHkoYSx2KX0pfWZ1bmN0aW9uIENlKGUpe2Zvcih2YXIgdCxuLGksbz1lLmxlbmd0aCxhPXIucmVsYXRpdmVbZVswXS50eXBlXSxzPWF8fHIucmVsYXRpdmVbIiAiXSx1PWE/MTowLGM9bWUoZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10fSxzLCEwKSxmPW1lKGZ1bmN0aW9uKGUpe3JldHVybiBPKHQsZSk+LTF9LHMsITApLHA9W2Z1bmN0aW9uKGUsbixyKXt2YXIgaT0hYSYmKHJ8fG4hPT1sKXx8KCh0PW4pLm5vZGVUeXBlP2MoZSxuLHIpOmYoZSxuLHIpKTtyZXR1cm4gdD1udWxsLGl9XTt1PG87dSsrKWlmKG49ci5yZWxhdGl2ZVtlW3VdLnR5cGVdKXA9W21lKHhlKHApLG4pXTtlbHNle2lmKChuPXIuZmlsdGVyW2VbdV0udHlwZV0uYXBwbHkobnVsbCxlW3VdLm1hdGNoZXMpKVtiXSl7Zm9yKGk9Kyt1O2k8bztpKyspaWYoci5yZWxhdGl2ZVtlW2ldLnR5cGVdKWJyZWFrO3JldHVybiBUZSh1PjEmJnhlKHApLHU+MSYmdmUoZS5zbGljZSgwLHUtMSkuY29uY2F0KHt2YWx1ZToiICI9PT1lW3UtMl0udHlwZT8iKiI6IiJ9KSkucmVwbGFjZShCLCIkMSIpLG4sdTxpJiZDZShlLnNsaWNlKHUsaSkpLGk8byYmQ2UoZT1lLnNsaWNlKGkpKSxpPG8mJnZlKGUpKX1wLnB1c2gobil9cmV0dXJuIHhlKHApfWZ1bmN0aW9uIEVlKGUsdCl7dmFyIG49dC5sZW5ndGg+MCxpPWUubGVuZ3RoPjAsbz1mdW5jdGlvbihvLGEscyx1LGMpe3ZhciBmLGgseSx2PTAsbT0iMCIseD1vJiZbXSxiPVtdLHc9bCxDPW98fGkmJnIuZmluZC5UQUcoIioiLGMpLEU9VCs9bnVsbD09dz8xOk1hdGgucmFuZG9tKCl8fC4xLGs9Qy5sZW5ndGg7Zm9yKGMmJihsPWE9PT1kfHxhfHxjKTttIT09ayYmbnVsbCE9KGY9Q1ttXSk7bSsrKXtpZihpJiZmKXtoPTAsYXx8Zi5vd25lckRvY3VtZW50PT09ZHx8KHAoZikscz0hZyk7d2hpbGUoeT1lW2grK10paWYoeShmLGF8fGQscykpe3UucHVzaChmKTticmVha31jJiYoVD1FKX1uJiYoKGY9IXkmJmYpJiZ2LS0sbyYmeC5wdXNoKGYpKX1pZih2Kz1tLG4mJm0hPT12KXtoPTA7d2hpbGUoeT10W2grK10peSh4LGIsYSxzKTtpZihvKXtpZih2PjApd2hpbGUobS0tKXhbbV18fGJbbV18fChiW21dPWouY2FsbCh1KSk7Yj13ZShiKX1MLmFwcGx5KHUsYiksYyYmIW8mJmIubGVuZ3RoPjAmJnYrdC5sZW5ndGg+MSYmb2UudW5pcXVlU29ydCh1KX1yZXR1cm4gYyYmKFQ9RSxsPXcpLHh9O3JldHVybiBuP3NlKG8pOm99cmV0dXJuIHM9b2UuY29tcGlsZT1mdW5jdGlvbihlLHQpe3ZhciBuLHI9W10saT1bXSxvPVNbZSsiICJdO2lmKCFvKXt0fHwodD1hKGUpKSxuPXQubGVuZ3RoO3doaWxlKG4tLSkobz1DZSh0W25dKSlbYl0/ci5wdXNoKG8pOmkucHVzaChvKTsobz1TKGUsRWUoaSxyKSkpLnNlbGVjdG9yPWV9cmV0dXJuIG99LHU9b2Uuc2VsZWN0PWZ1bmN0aW9uKGUsdCxuLGkpe3ZhciBvLHUsbCxjLGYscD0iZnVuY3Rpb24iPT10eXBlb2YgZSYmZSxkPSFpJiZhKGU9cC5zZWxlY3Rvcnx8ZSk7aWYobj1ufHxbXSwxPT09ZC5sZW5ndGgpe2lmKCh1PWRbMF09ZFswXS5zbGljZSgwKSkubGVuZ3RoPjImJiJJRCI9PT0obD11WzBdKS50eXBlJiY5PT09dC5ub2RlVHlwZSYmZyYmci5yZWxhdGl2ZVt1WzFdLnR5cGVdKXtpZighKHQ9KHIuZmluZC5JRChsLm1hdGNoZXNbMF0ucmVwbGFjZShaLGVlKSx0KXx8W10pWzBdKSlyZXR1cm4gbjtwJiYodD10LnBhcmVudE5vZGUpLGU9ZS5zbGljZSh1LnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1vPVYubmVlZHNDb250ZXh0LnRlc3QoZSk/MDp1Lmxlbmd0aDt3aGlsZShvLS0pe2lmKGw9dVtvXSxyLnJlbGF0aXZlW2M9bC50eXBlXSlicmVhaztpZigoZj1yLmZpbmRbY10pJiYoaT1mKGwubWF0Y2hlc1swXS5yZXBsYWNlKFosZWUpLEsudGVzdCh1WzBdLnR5cGUpJiZnZSh0LnBhcmVudE5vZGUpfHx0KSkpe2lmKHUuc3BsaWNlKG8sMSksIShlPWkubGVuZ3RoJiZ2ZSh1KSkpcmV0dXJuIEwuYXBwbHkobixpKSxuO2JyZWFrfX19cmV0dXJuKHB8fHMoZSxkKSkoaSx0LCFnLG4sIXR8fEsudGVzdChlKSYmZ2UodC5wYXJlbnROb2RlKXx8dCksbn0sbi5zb3J0U3RhYmxlPWIuc3BsaXQoIiIpLnNvcnQoRCkuam9pbigiIik9PT1iLG4uZGV0ZWN0RHVwbGljYXRlcz0hIWYscCgpLG4uc29ydERldGFjaGVkPXVlKGZ1bmN0aW9uKGUpe3JldHVybiAxJmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZC5jcmVhdGVFbGVtZW50KCJmaWVsZHNldCIpKX0pLHVlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiIsIiMiPT09ZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpfSl8fGxlKCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoIixmdW5jdGlvbihlLHQsbil7aWYoIW4pcmV0dXJuIGUuZ2V0QXR0cmlidXRlKHQsInR5cGUiPT09dC50b0xvd2VyQ2FzZSgpPzE6Mil9KSxuLmF0dHJpYnV0ZXMmJnVlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD0iPGlucHV0Lz4iLGUuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwiIiksIiI9PT1lLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpfSl8fGxlKCJ2YWx1ZSIsZnVuY3Rpb24oZSx0LG4pe2lmKCFuJiYiaW5wdXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXJldHVybiBlLmRlZmF1bHRWYWx1ZX0pLHVlKGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKX0pfHxsZShQLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcjtpZighbilyZXR1cm4hMD09PWVbdF0/dC50b0xvd2VyQ2FzZSgpOihyPWUuZ2V0QXR0cmlidXRlTm9kZSh0KSkmJnIuc3BlY2lmaWVkP3IudmFsdWU6bnVsbH0pLG9lfShlKTt3LmZpbmQ9RSx3LmV4cHI9RS5zZWxlY3RvcnMsdy5leHByWyI6Il09dy5leHByLnBzZXVkb3Msdy51bmlxdWVTb3J0PXcudW5pcXVlPUUudW5pcXVlU29ydCx3LnRleHQ9RS5nZXRUZXh0LHcuaXNYTUxEb2M9RS5pc1hNTCx3LmNvbnRhaW5zPUUuY29udGFpbnMsdy5lc2NhcGVTZWxlY3Rvcj1FLmVzY2FwZTt2YXIgaz1mdW5jdGlvbihlLHQsbil7dmFyIHI9W10saT12b2lkIDAhPT1uO3doaWxlKChlPWVbdF0pJiY5IT09ZS5ub2RlVHlwZSlpZigxPT09ZS5ub2RlVHlwZSl7aWYoaSYmdyhlKS5pcyhuKSlicmVhaztyLnB1c2goZSl9cmV0dXJuIHJ9LFM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49W107ZTtlPWUubmV4dFNpYmxpbmcpMT09PWUubm9kZVR5cGUmJmUhPT10JiZuLnB1c2goZSk7cmV0dXJuIG59LEQ9dy5leHByLm1hdGNoLm5lZWRzQ29udGV4dDtmdW5jdGlvbiBOKGUsdCl7cmV0dXJuIGUubm9kZU5hbWUmJmUubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXQudG9Mb3dlckNhc2UoKX12YXIgQT0vXjwoW2Etel1bXlwvXDA+Olx4MjBcdFxyXG5cZl0qKVtceDIwXHRcclxuXGZdKlwvPz4oPzo8XC9cMT58KSQvaTtmdW5jdGlvbiBqKGUsdCxuKXtyZXR1cm4gZyh0KT93LmdyZXAoZSxmdW5jdGlvbihlLHIpe3JldHVybiEhdC5jYWxsKGUscixlKSE9PW59KTp0Lm5vZGVUeXBlP3cuZ3JlcChlLGZ1bmN0aW9uKGUpe3JldHVybiBlPT09dCE9PW59KToic3RyaW5nIiE9dHlwZW9mIHQ/dy5ncmVwKGUsZnVuY3Rpb24oZSl7cmV0dXJuIHUuY2FsbCh0LGUpPi0xIT09bn0pOncuZmlsdGVyKHQsZSxuKX13LmZpbHRlcj1mdW5jdGlvbihlLHQsbil7dmFyIHI9dFswXTtyZXR1cm4gbiYmKGU9Ijpub3QoIitlKyIpIiksMT09PXQubGVuZ3RoJiYxPT09ci5ub2RlVHlwZT93LmZpbmQubWF0Y2hlc1NlbGVjdG9yKHIsZSk/W3JdOltdOncuZmluZC5tYXRjaGVzKGUsdy5ncmVwKHQsZnVuY3Rpb24oZSl7cmV0dXJuIDE9PT1lLm5vZGVUeXBlfSkpfSx3LmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihlKXt2YXIgdCxuLHI9dGhpcy5sZW5ndGgsaT10aGlzO2lmKCJzdHJpbmciIT10eXBlb2YgZSlyZXR1cm4gdGhpcy5wdXNoU3RhY2sodyhlKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodD0wO3Q8cjt0KyspaWYody5jb250YWlucyhpW3RdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihuPXRoaXMucHVzaFN0YWNrKFtdKSx0PTA7dDxyO3QrKyl3LmZpbmQoZSxpW3RdLG4pO3JldHVybiByPjE/dy51bmlxdWVTb3J0KG4pOm59LGZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soaih0aGlzLGV8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soaih0aGlzLGV8fFtdLCEwKSl9LGlzOmZ1bmN0aW9uKGUpe3JldHVybiEhaih0aGlzLCJzdHJpbmciPT10eXBlb2YgZSYmRC50ZXN0KGUpP3coZSk6ZXx8W10sITEpLmxlbmd0aH19KTt2YXIgcSxMPS9eKD86XHMqKDxbXHdcV10rPilbXj5dKnwjKFtcdy1dKykpJC87KHcuZm4uaW5pdD1mdW5jdGlvbihlLHQsbil7dmFyIGksbztpZighZSlyZXR1cm4gdGhpcztpZihuPW58fHEsInN0cmluZyI9PXR5cGVvZiBlKXtpZighKGk9IjwiPT09ZVswXSYmIj4iPT09ZVtlLmxlbmd0aC0xXSYmZS5sZW5ndGg+PTM/W251bGwsZSxudWxsXTpMLmV4ZWMoZSkpfHwhaVsxXSYmdClyZXR1cm4hdHx8dC5qcXVlcnk/KHR8fG4pLmZpbmQoZSk6dGhpcy5jb25zdHJ1Y3Rvcih0KS5maW5kKGUpO2lmKGlbMV0pe2lmKHQ9dCBpbnN0YW5jZW9mIHc/dFswXTp0LHcubWVyZ2UodGhpcyx3LnBhcnNlSFRNTChpWzFdLHQmJnQubm9kZVR5cGU/dC5vd25lckRvY3VtZW50fHx0OnIsITApKSxBLnRlc3QoaVsxXSkmJncuaXNQbGFpbk9iamVjdCh0KSlmb3IoaSBpbiB0KWcodGhpc1tpXSk/dGhpc1tpXSh0W2ldKTp0aGlzLmF0dHIoaSx0W2ldKTtyZXR1cm4gdGhpc31yZXR1cm4obz1yLmdldEVsZW1lbnRCeUlkKGlbMl0pKSYmKHRoaXNbMF09byx0aGlzLmxlbmd0aD0xKSx0aGlzfXJldHVybiBlLm5vZGVUeXBlPyh0aGlzWzBdPWUsdGhpcy5sZW5ndGg9MSx0aGlzKTpnKGUpP3ZvaWQgMCE9PW4ucmVhZHk/bi5yZWFkeShlKTplKHcpOncubWFrZUFycmF5KGUsdGhpcyl9KS5wcm90b3R5cGU9dy5mbixxPXcocik7dmFyIEg9L14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sTz17Y2hpbGRyZW46ITAsY29udGVudHM6ITAsbmV4dDohMCxwcmV2OiEwfTt3LmZuLmV4dGVuZCh7aGFzOmZ1bmN0aW9uKGUpe3ZhciB0PXcoZSx0aGlzKSxuPXQubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2Zvcih2YXIgZT0wO2U8bjtlKyspaWYody5jb250YWlucyh0aGlzLHRbZV0pKXJldHVybiEwfSl9LGNsb3Nlc3Q6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTAsaT10aGlzLmxlbmd0aCxvPVtdLGE9InN0cmluZyIhPXR5cGVvZiBlJiZ3KGUpO2lmKCFELnRlc3QoZSkpZm9yKDtyPGk7cisrKWZvcihuPXRoaXNbcl07biYmbiE9PXQ7bj1uLnBhcmVudE5vZGUpaWYobi5ub2RlVHlwZTwxMSYmKGE/YS5pbmRleChuKT4tMToxPT09bi5ub2RlVHlwZSYmdy5maW5kLm1hdGNoZXNTZWxlY3RvcihuLGUpKSl7by5wdXNoKG4pO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhvLmxlbmd0aD4xP3cudW5pcXVlU29ydChvKTpvKX0saW5kZXg6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/InN0cmluZyI9PXR5cGVvZiBlP3UuY2FsbCh3KGUpLHRoaXNbMF0pOnUuY2FsbCh0aGlzLGUuanF1ZXJ5P2VbMF06ZSk6dGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xfSxhZGQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sody51bmlxdWVTb3J0KHcubWVyZ2UodGhpcy5nZXQoKSx3KGUsdCkpKSl9LGFkZEJhY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWU/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoZSkpfX0pO2Z1bmN0aW9uIFAoZSx0KXt3aGlsZSgoZT1lW3RdKSYmMSE9PWUubm9kZVR5cGUpO3JldHVybiBlfXcuZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGUpe3ZhciB0PWUucGFyZW50Tm9kZTtyZXR1cm4gdCYmMTEhPT10Lm5vZGVUeXBlP3Q6bnVsbH0scGFyZW50czpmdW5jdGlvbihlKXtyZXR1cm4gayhlLCJwYXJlbnROb2RlIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGsoZSwicGFyZW50Tm9kZSIsbil9LG5leHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIFAoZSwibmV4dFNpYmxpbmciKX0scHJldjpmdW5jdGlvbihlKXtyZXR1cm4gUChlLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dEFsbDpmdW5jdGlvbihlKXtyZXR1cm4gayhlLCJuZXh0U2libGluZyIpfSxwcmV2QWxsOmZ1bmN0aW9uKGUpe3JldHVybiBrKGUsInByZXZpb3VzU2libGluZyIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBrKGUsIm5leHRTaWJsaW5nIixuKX0scHJldlVudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gayhlLCJwcmV2aW91c1NpYmxpbmciLG4pfSxzaWJsaW5nczpmdW5jdGlvbihlKXtyZXR1cm4gUygoZS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxlKX0sY2hpbGRyZW46ZnVuY3Rpb24oZSl7cmV0dXJuIFMoZS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oZSl7cmV0dXJuIE4oZSwiaWZyYW1lIik/ZS5jb250ZW50RG9jdW1lbnQ6KE4oZSwidGVtcGxhdGUiKSYmKGU9ZS5jb250ZW50fHxlKSx3Lm1lcmdlKFtdLGUuY2hpbGROb2RlcykpfX0sZnVuY3Rpb24oZSx0KXt3LmZuW2VdPWZ1bmN0aW9uKG4scil7dmFyIGk9dy5tYXAodGhpcyx0LG4pO3JldHVybiJVbnRpbCIhPT1lLnNsaWNlKC01KSYmKHI9biksciYmInN0cmluZyI9PXR5cGVvZiByJiYoaT13LmZpbHRlcihyLGkpKSx0aGlzLmxlbmd0aD4xJiYoT1tlXXx8dy51bmlxdWVTb3J0KGkpLEgudGVzdChlKSYmaS5yZXZlcnNlKCkpLHRoaXMucHVzaFN0YWNrKGkpfX0pO3ZhciBNPS9bXlx4MjBcdFxyXG5cZl0rL2c7ZnVuY3Rpb24gUihlKXt2YXIgdD17fTtyZXR1cm4gdy5lYWNoKGUubWF0Y2goTSl8fFtdLGZ1bmN0aW9uKGUsbil7dFtuXT0hMH0pLHR9dy5DYWxsYmFja3M9ZnVuY3Rpb24oZSl7ZT0ic3RyaW5nIj09dHlwZW9mIGU/UihlKTp3LmV4dGVuZCh7fSxlKTt2YXIgdCxuLHIsaSxvPVtdLGE9W10scz0tMSx1PWZ1bmN0aW9uKCl7Zm9yKGk9aXx8ZS5vbmNlLHI9dD0hMDthLmxlbmd0aDtzPS0xKXtuPWEuc2hpZnQoKTt3aGlsZSgrK3M8by5sZW5ndGgpITE9PT1vW3NdLmFwcGx5KG5bMF0sblsxXSkmJmUuc3RvcE9uRmFsc2UmJihzPW8ubGVuZ3RoLG49ITEpfWUubWVtb3J5fHwobj0hMSksdD0hMSxpJiYobz1uP1tdOiIiKX0sbD17YWRkOmZ1bmN0aW9uKCl7cmV0dXJuIG8mJihuJiYhdCYmKHM9by5sZW5ndGgtMSxhLnB1c2gobikpLGZ1bmN0aW9uIHQobil7dy5lYWNoKG4sZnVuY3Rpb24obixyKXtnKHIpP2UudW5pcXVlJiZsLmhhcyhyKXx8by5wdXNoKHIpOnImJnIubGVuZ3RoJiYic3RyaW5nIiE9PXgocikmJnQocil9KX0oYXJndW1lbnRzKSxuJiYhdCYmdSgpKSx0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gdy5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihlLHQpe3ZhciBuO3doaWxlKChuPXcuaW5BcnJheSh0LG8sbikpPi0xKW8uc3BsaWNlKG4sMSksbjw9cyYmcy0tfSksdGhpc30saGFzOmZ1bmN0aW9uKGUpe3JldHVybiBlP3cuaW5BcnJheShlLG8pPi0xOm8ubGVuZ3RoPjB9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIG8mJihvPVtdKSx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGk9YT1bXSxvPW49IiIsdGhpc30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hb30sbG9jazpmdW5jdGlvbigpe3JldHVybiBpPWE9W10sbnx8dHx8KG89bj0iIiksdGhpc30sbG9ja2VkOmZ1bmN0aW9uKCl7cmV0dXJuISFpfSxmaXJlV2l0aDpmdW5jdGlvbihlLG4pe3JldHVybiBpfHwobj1bZSwobj1ufHxbXSkuc2xpY2U/bi5zbGljZSgpOm5dLGEucHVzaChuKSx0fHx1KCkpLHRoaXN9LGZpcmU6ZnVuY3Rpb24oKXtyZXR1cm4gbC5maXJlV2l0aCh0aGlzLGFyZ3VtZW50cyksdGhpc30sZmlyZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIXJ9fTtyZXR1cm4gbH07ZnVuY3Rpb24gSShlKXtyZXR1cm4gZX1mdW5jdGlvbiBXKGUpe3Rocm93IGV9ZnVuY3Rpb24gJChlLHQsbixyKXt2YXIgaTt0cnl7ZSYmZyhpPWUucHJvbWlzZSk/aS5jYWxsKGUpLmRvbmUodCkuZmFpbChuKTplJiZnKGk9ZS50aGVuKT9pLmNhbGwoZSx0LG4pOnQuYXBwbHkodm9pZCAwLFtlXS5zbGljZShyKSl9Y2F0Y2goZSl7bi5hcHBseSh2b2lkIDAsW2VdKX19dy5leHRlbmQoe0RlZmVycmVkOmZ1bmN0aW9uKHQpe3ZhciBuPVtbIm5vdGlmeSIsInByb2dyZXNzIix3LkNhbGxiYWNrcygibWVtb3J5Iiksdy5DYWxsYmFja3MoIm1lbW9yeSIpLDJdLFsicmVzb2x2ZSIsImRvbmUiLHcuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLHcuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLDAsInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIix3LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSx3LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwxLCJyZWplY3RlZCJdXSxyPSJwZW5kaW5nIixpPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiByfSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gby5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LCJjYXRjaCI6ZnVuY3Rpb24oZSl7cmV0dXJuIGkudGhlbihudWxsLGUpfSxwaXBlOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzO3JldHVybiB3LkRlZmVycmVkKGZ1bmN0aW9uKHQpe3cuZWFjaChuLGZ1bmN0aW9uKG4scil7dmFyIGk9ZyhlW3JbNF1dKSYmZVtyWzRdXTtvW3JbMV1dKGZ1bmN0aW9uKCl7dmFyIGU9aSYmaS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZSYmZyhlLnByb21pc2UpP2UucHJvbWlzZSgpLnByb2dyZXNzKHQubm90aWZ5KS5kb25lKHQucmVzb2x2ZSkuZmFpbCh0LnJlamVjdCk6dFtyWzBdKyJXaXRoIl0odGhpcyxpP1tlXTphcmd1bWVudHMpfSl9KSxlPW51bGx9KS5wcm9taXNlKCl9LHRoZW46ZnVuY3Rpb24odCxyLGkpe3ZhciBvPTA7ZnVuY3Rpb24gYSh0LG4scixpKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcz10aGlzLHU9YXJndW1lbnRzLGw9ZnVuY3Rpb24oKXt2YXIgZSxsO2lmKCEodDxvKSl7aWYoKGU9ci5hcHBseShzLHUpKT09PW4ucHJvbWlzZSgpKXRocm93IG5ldyBUeXBlRXJyb3IoIlRoZW5hYmxlIHNlbGYtcmVzb2x1dGlvbiIpO2w9ZSYmKCJvYmplY3QiPT10eXBlb2YgZXx8ImZ1bmN0aW9uIj09dHlwZW9mIGUpJiZlLnRoZW4sZyhsKT9pP2wuY2FsbChlLGEobyxuLEksaSksYShvLG4sVyxpKSk6KG8rKyxsLmNhbGwoZSxhKG8sbixJLGkpLGEobyxuLFcsaSksYShvLG4sSSxuLm5vdGlmeVdpdGgpKSk6KHIhPT1JJiYocz12b2lkIDAsdT1bZV0pLChpfHxuLnJlc29sdmVXaXRoKShzLHUpKX19LGM9aT9sOmZ1bmN0aW9uKCl7dHJ5e2woKX1jYXRjaChlKXt3LkRlZmVycmVkLmV4Y2VwdGlvbkhvb2smJncuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayhlLGMuc3RhY2tUcmFjZSksdCsxPj1vJiYociE9PVcmJihzPXZvaWQgMCx1PVtlXSksbi5yZWplY3RXaXRoKHMsdSkpfX07dD9jKCk6KHcuRGVmZXJyZWQuZ2V0U3RhY2tIb29rJiYoYy5zdGFja1RyYWNlPXcuRGVmZXJyZWQuZ2V0U3RhY2tIb29rKCkpLGUuc2V0VGltZW91dChjKSl9fXJldHVybiB3LkRlZmVycmVkKGZ1bmN0aW9uKGUpe25bMF1bM10uYWRkKGEoMCxlLGcoaSk/aTpJLGUubm90aWZ5V2l0aCkpLG5bMV1bM10uYWRkKGEoMCxlLGcodCk/dDpJKSksblsyXVszXS5hZGQoYSgwLGUsZyhyKT9yOlcpKX0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZT93LmV4dGVuZChlLGkpOml9fSxvPXt9O3JldHVybiB3LmVhY2gobixmdW5jdGlvbihlLHQpe3ZhciBhPXRbMl0scz10WzVdO2lbdFsxXV09YS5hZGQscyYmYS5hZGQoZnVuY3Rpb24oKXtyPXN9LG5bMy1lXVsyXS5kaXNhYmxlLG5bMy1lXVszXS5kaXNhYmxlLG5bMF1bMl0ubG9jayxuWzBdWzNdLmxvY2spLGEuYWRkKHRbM10uZmlyZSksb1t0WzBdXT1mdW5jdGlvbigpe3JldHVybiBvW3RbMF0rIldpdGgiXSh0aGlzPT09bz92b2lkIDA6dGhpcyxhcmd1bWVudHMpLHRoaXN9LG9bdFswXSsiV2l0aCJdPWEuZmlyZVdpdGh9KSxpLnByb21pc2UobyksdCYmdC5jYWxsKG8sbyksb30sd2hlbjpmdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoLG49dCxyPUFycmF5KG4pLGk9by5jYWxsKGFyZ3VtZW50cyksYT13LkRlZmVycmVkKCkscz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24obil7cltlXT10aGlzLGlbZV09YXJndW1lbnRzLmxlbmd0aD4xP28uY2FsbChhcmd1bWVudHMpOm4sLS10fHxhLnJlc29sdmVXaXRoKHIsaSl9fTtpZih0PD0xJiYoJChlLGEuZG9uZShzKG4pKS5yZXNvbHZlLGEucmVqZWN0LCF0KSwicGVuZGluZyI9PT1hLnN0YXRlKCl8fGcoaVtuXSYmaVtuXS50aGVuKSkpcmV0dXJuIGEudGhlbigpO3doaWxlKG4tLSkkKGlbbl0scyhuKSxhLnJlamVjdCk7cmV0dXJuIGEucHJvbWlzZSgpfX0pO3ZhciBCPS9eKEV2YWx8SW50ZXJuYWx8UmFuZ2V8UmVmZXJlbmNlfFN5bnRheHxUeXBlfFVSSSlFcnJvciQvO3cuRGVmZXJyZWQuZXhjZXB0aW9uSG9vaz1mdW5jdGlvbih0LG4pe2UuY29uc29sZSYmZS5jb25zb2xlLndhcm4mJnQmJkIudGVzdCh0Lm5hbWUpJiZlLmNvbnNvbGUud2FybigialF1ZXJ5LkRlZmVycmVkIGV4Y2VwdGlvbjogIit0Lm1lc3NhZ2UsdC5zdGFjayxuKX0sdy5yZWFkeUV4Y2VwdGlvbj1mdW5jdGlvbih0KXtlLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyB0fSl9O3ZhciBGPXcuRGVmZXJyZWQoKTt3LmZuLnJlYWR5PWZ1bmN0aW9uKGUpe3JldHVybiBGLnRoZW4oZSlbImNhdGNoIl0oZnVuY3Rpb24oZSl7dy5yZWFkeUV4Y2VwdGlvbihlKX0pLHRoaXN9LHcuZXh0ZW5kKHtpc1JlYWR5OiExLHJlYWR5V2FpdDoxLHJlYWR5OmZ1bmN0aW9uKGUpeyghMD09PWU/LS13LnJlYWR5V2FpdDp3LmlzUmVhZHkpfHwody5pc1JlYWR5PSEwLCEwIT09ZSYmLS13LnJlYWR5V2FpdD4wfHxGLnJlc29sdmVXaXRoKHIsW3ddKSl9fSksdy5yZWFkeS50aGVuPUYudGhlbjtmdW5jdGlvbiBfKCl7ci5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixfKSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoImxvYWQiLF8pLHcucmVhZHkoKX0iY29tcGxldGUiPT09ci5yZWFkeVN0YXRlfHwibG9hZGluZyIhPT1yLnJlYWR5U3RhdGUmJiFyLmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbD9lLnNldFRpbWVvdXQody5yZWFkeSk6KHIuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsXyksZS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixfKSk7dmFyIHo9ZnVuY3Rpb24oZSx0LG4scixpLG8sYSl7dmFyIHM9MCx1PWUubGVuZ3RoLGw9bnVsbD09bjtpZigib2JqZWN0Ij09PXgobikpe2k9ITA7Zm9yKHMgaW4gbil6KGUsdCxzLG5bc10sITAsbyxhKX1lbHNlIGlmKHZvaWQgMCE9PXImJihpPSEwLGcocil8fChhPSEwKSxsJiYoYT8odC5jYWxsKGUsciksdD1udWxsKToobD10LHQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBsLmNhbGwodyhlKSxuKX0pKSx0KSlmb3IoO3M8dTtzKyspdChlW3NdLG4sYT9yOnIuY2FsbChlW3NdLHMsdChlW3NdLG4pKSk7cmV0dXJuIGk/ZTpsP3QuY2FsbChlKTp1P3QoZVswXSxuKTpvfSxYPS9eLW1zLS8sVT0vLShbYS16XSkvZztmdW5jdGlvbiBWKGUsdCl7cmV0dXJuIHQudG9VcHBlckNhc2UoKX1mdW5jdGlvbiBHKGUpe3JldHVybiBlLnJlcGxhY2UoWCwibXMtIikucmVwbGFjZShVLFYpfXZhciBZPWZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZS5ub2RlVHlwZXx8OT09PWUubm9kZVR5cGV8fCErZS5ub2RlVHlwZX07ZnVuY3Rpb24gUSgpe3RoaXMuZXhwYW5kbz13LmV4cGFuZG8rUS51aWQrK31RLnVpZD0xLFEucHJvdG90eXBlPXtjYWNoZTpmdW5jdGlvbihlKXt2YXIgdD1lW3RoaXMuZXhwYW5kb107cmV0dXJuIHR8fCh0PXt9LFkoZSkmJihlLm5vZGVUeXBlP2VbdGhpcy5leHBhbmRvXT10Ok9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHRoaXMuZXhwYW5kbyx7dmFsdWU6dCxjb25maWd1cmFibGU6ITB9KSkpLHR9LHNldDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaT10aGlzLmNhY2hlKGUpO2lmKCJzdHJpbmciPT10eXBlb2YgdClpW0codCldPW47ZWxzZSBmb3IociBpbiB0KWlbRyhyKV09dFtyXTtyZXR1cm4gaX0sZ2V0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMD09PXQ/dGhpcy5jYWNoZShlKTplW3RoaXMuZXhwYW5kb10mJmVbdGhpcy5leHBhbmRvXVtHKHQpXX0sYWNjZXNzOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdm9pZCAwPT09dHx8dCYmInN0cmluZyI9PXR5cGVvZiB0JiZ2b2lkIDA9PT1uP3RoaXMuZ2V0KGUsdCk6KHRoaXMuc2V0KGUsdCxuKSx2b2lkIDAhPT1uP246dCl9LHJlbW92ZTpmdW5jdGlvbihlLHQpe3ZhciBuLHI9ZVt0aGlzLmV4cGFuZG9dO2lmKHZvaWQgMCE9PXIpe2lmKHZvaWQgMCE9PXQpe249KHQ9QXJyYXkuaXNBcnJheSh0KT90Lm1hcChHKToodD1HKHQpKWluIHI/W3RdOnQubWF0Y2goTSl8fFtdKS5sZW5ndGg7d2hpbGUobi0tKWRlbGV0ZSByW3Rbbl1dfSh2b2lkIDA9PT10fHx3LmlzRW1wdHlPYmplY3QocikpJiYoZS5ub2RlVHlwZT9lW3RoaXMuZXhwYW5kb109dm9pZCAwOmRlbGV0ZSBlW3RoaXMuZXhwYW5kb10pfX0saGFzRGF0YTpmdW5jdGlvbihlKXt2YXIgdD1lW3RoaXMuZXhwYW5kb107cmV0dXJuIHZvaWQgMCE9PXQmJiF3LmlzRW1wdHlPYmplY3QodCl9fTt2YXIgSj1uZXcgUSxLPW5ldyBRLFo9L14oPzpce1tcd1xXXSpcfXxcW1tcd1xXXSpcXSkkLyxlZT0vW0EtWl0vZztmdW5jdGlvbiB0ZShlKXtyZXR1cm4idHJ1ZSI9PT1lfHwiZmFsc2UiIT09ZSYmKCJudWxsIj09PWU/bnVsbDplPT09K2UrIiI/K2U6Wi50ZXN0KGUpP0pTT04ucGFyc2UoZSk6ZSl9ZnVuY3Rpb24gbmUoZSx0LG4pe3ZhciByO2lmKHZvaWQgMD09PW4mJjE9PT1lLm5vZGVUeXBlKWlmKHI9ImRhdGEtIit0LnJlcGxhY2UoZWUsIi0kJiIpLnRvTG93ZXJDYXNlKCksInN0cmluZyI9PXR5cGVvZihuPWUuZ2V0QXR0cmlidXRlKHIpKSl7dHJ5e249dGUobil9Y2F0Y2goZSl7fUsuc2V0KGUsdCxuKX1lbHNlIG49dm9pZCAwO3JldHVybiBufXcuZXh0ZW5kKHtoYXNEYXRhOmZ1bmN0aW9uKGUpe3JldHVybiBLLmhhc0RhdGEoZSl8fEouaGFzRGF0YShlKX0sZGF0YTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIEsuYWNjZXNzKGUsdCxuKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlLHQpe0sucmVtb3ZlKGUsdCl9LF9kYXRhOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gSi5hY2Nlc3MoZSx0LG4pfSxfcmVtb3ZlRGF0YTpmdW5jdGlvbihlLHQpe0oucmVtb3ZlKGUsdCl9fSksdy5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGksbz10aGlzWzBdLGE9byYmby5hdHRyaWJ1dGVzO2lmKHZvaWQgMD09PWUpe2lmKHRoaXMubGVuZ3RoJiYoaT1LLmdldChvKSwxPT09by5ub2RlVHlwZSYmIUouZ2V0KG8sImhhc0RhdGFBdHRycyIpKSl7bj1hLmxlbmd0aDt3aGlsZShuLS0pYVtuXSYmMD09PShyPWFbbl0ubmFtZSkuaW5kZXhPZigiZGF0YS0iKSYmKHI9RyhyLnNsaWNlKDUpKSxuZShvLHIsaVtyXSkpO0ouc2V0KG8sImhhc0RhdGFBdHRycyIsITApfXJldHVybiBpfXJldHVybiJvYmplY3QiPT10eXBlb2YgZT90aGlzLmVhY2goZnVuY3Rpb24oKXtLLnNldCh0aGlzLGUpfSk6eih0aGlzLGZ1bmN0aW9uKHQpe3ZhciBuO2lmKG8mJnZvaWQgMD09PXQpe2lmKHZvaWQgMCE9PShuPUsuZ2V0KG8sZSkpKXJldHVybiBuO2lmKHZvaWQgMCE9PShuPW5lKG8sZSkpKXJldHVybiBufWVsc2UgdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Sy5zZXQodGhpcyxlLHQpfSl9LG51bGwsdCxhcmd1bWVudHMubGVuZ3RoPjEsbnVsbCwhMCl9LHJlbW92ZURhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe0sucmVtb3ZlKHRoaXMsZSl9KX19KSx3LmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByO2lmKGUpcmV0dXJuIHQ9KHR8fCJmeCIpKyJxdWV1ZSIscj1KLmdldChlLHQpLG4mJighcnx8QXJyYXkuaXNBcnJheShuKT9yPUouYWNjZXNzKGUsdCx3Lm1ha2VBcnJheShuKSk6ci5wdXNoKG4pKSxyfHxbXX0sZGVxdWV1ZTpmdW5jdGlvbihlLHQpe3Q9dHx8ImZ4Ijt2YXIgbj13LnF1ZXVlKGUsdCkscj1uLmxlbmd0aCxpPW4uc2hpZnQoKSxvPXcuX3F1ZXVlSG9va3MoZSx0KSxhPWZ1bmN0aW9uKCl7dy5kZXF1ZXVlKGUsdCl9OyJpbnByb2dyZXNzIj09PWkmJihpPW4uc2hpZnQoKSxyLS0pLGkmJigiZngiPT09dCYmbi51bnNoaWZ0KCJpbnByb2dyZXNzIiksZGVsZXRlIG8uc3RvcCxpLmNhbGwoZSxhLG8pKSwhciYmbyYmby5lbXB0eS5maXJlKCl9LF9xdWV1ZUhvb2tzOmZ1bmN0aW9uKGUsdCl7dmFyIG49dCsicXVldWVIb29rcyI7cmV0dXJuIEouZ2V0KGUsbil8fEouYWNjZXNzKGUsbix7ZW1wdHk6dy5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IikuYWRkKGZ1bmN0aW9uKCl7Si5yZW1vdmUoZSxbdCsicXVldWUiLG5dKX0pfSl9fSksdy5mbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49MjtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGUmJih0PWUsZT0iZngiLG4tLSksYXJndW1lbnRzLmxlbmd0aDxuP3cucXVldWUodGhpc1swXSxlKTp2b2lkIDA9PT10P3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49dy5xdWV1ZSh0aGlzLGUsdCk7dy5fcXVldWVIb29rcyh0aGlzLGUpLCJmeCI9PT1lJiYiaW5wcm9ncmVzcyIhPT1uWzBdJiZ3LmRlcXVldWUodGhpcyxlKX0pfSxkZXF1ZXVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt3LmRlcXVldWUodGhpcyxlKX0pfSxjbGVhclF1ZXVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnF1ZXVlKGV8fCJmeCIsW10pfSxwcm9taXNlOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj0xLGk9dy5EZWZlcnJlZCgpLG89dGhpcyxhPXRoaXMubGVuZ3RoLHM9ZnVuY3Rpb24oKXstLXJ8fGkucmVzb2x2ZVdpdGgobyxbb10pfTsic3RyaW5nIiE9dHlwZW9mIGUmJih0PWUsZT12b2lkIDApLGU9ZXx8ImZ4Ijt3aGlsZShhLS0pKG49Si5nZXQob1thXSxlKyJxdWV1ZUhvb2tzIikpJiZuLmVtcHR5JiYocisrLG4uZW1wdHkuYWRkKHMpKTtyZXR1cm4gcygpLGkucHJvbWlzZSh0KX19KTt2YXIgcmU9L1srLV0/KD86XGQqXC58KVxkKyg/OltlRV1bKy1dP1xkK3wpLy5zb3VyY2UsaWU9bmV3IFJlZ0V4cCgiXig/OihbKy1dKT18KSgiK3JlKyIpKFthLXolXSopJCIsImkiKSxvZT1bIlRvcCIsIlJpZ2h0IiwiQm90dG9tIiwiTGVmdCJdLGFlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIm5vbmUiPT09KGU9dHx8ZSkuc3R5bGUuZGlzcGxheXx8IiI9PT1lLnN0eWxlLmRpc3BsYXkmJncuY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpJiYibm9uZSI9PT13LmNzcyhlLCJkaXNwbGF5Iil9LHNlPWZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG8sYT17fTtmb3IobyBpbiB0KWFbb109ZS5zdHlsZVtvXSxlLnN0eWxlW29dPXRbb107aT1uLmFwcGx5KGUscnx8W10pO2ZvcihvIGluIHQpZS5zdHlsZVtvXT1hW29dO3JldHVybiBpfTtmdW5jdGlvbiB1ZShlLHQsbixyKXt2YXIgaSxvLGE9MjAscz1yP2Z1bmN0aW9uKCl7cmV0dXJuIHIuY3VyKCl9OmZ1bmN0aW9uKCl7cmV0dXJuIHcuY3NzKGUsdCwiIil9LHU9cygpLGw9biYmblszXXx8KHcuY3NzTnVtYmVyW3RdPyIiOiJweCIpLGM9KHcuY3NzTnVtYmVyW3RdfHwicHgiIT09bCYmK3UpJiZpZS5leGVjKHcuY3NzKGUsdCkpO2lmKGMmJmNbM10hPT1sKXt1Lz0yLGw9bHx8Y1szXSxjPSt1fHwxO3doaWxlKGEtLSl3LnN0eWxlKGUsdCxjK2wpLCgxLW8pKigxLShvPXMoKS91fHwuNSkpPD0wJiYoYT0wKSxjLz1vO2MqPTIsdy5zdHlsZShlLHQsYytsKSxuPW58fFtdfXJldHVybiBuJiYoYz0rY3x8K3V8fDAsaT1uWzFdP2MrKG5bMV0rMSkqblsyXTorblsyXSxyJiYoci51bml0PWwsci5zdGFydD1jLHIuZW5kPWkpKSxpfXZhciBsZT17fTtmdW5jdGlvbiBjZShlKXt2YXIgdCxuPWUub3duZXJEb2N1bWVudCxyPWUubm9kZU5hbWUsaT1sZVtyXTtyZXR1cm4gaXx8KHQ9bi5ib2R5LmFwcGVuZENoaWxkKG4uY3JlYXRlRWxlbWVudChyKSksaT13LmNzcyh0LCJkaXNwbGF5IiksdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpLCJub25lIj09PWkmJihpPSJibG9jayIpLGxlW3JdPWksaSl9ZnVuY3Rpb24gZmUoZSx0KXtmb3IodmFyIG4scixpPVtdLG89MCxhPWUubGVuZ3RoO288YTtvKyspKHI9ZVtvXSkuc3R5bGUmJihuPXIuc3R5bGUuZGlzcGxheSx0Pygibm9uZSI9PT1uJiYoaVtvXT1KLmdldChyLCJkaXNwbGF5Iil8fG51bGwsaVtvXXx8KHIuc3R5bGUuZGlzcGxheT0iIikpLCIiPT09ci5zdHlsZS5kaXNwbGF5JiZhZShyKSYmKGlbb109Y2UocikpKToibm9uZSIhPT1uJiYoaVtvXT0ibm9uZSIsSi5zZXQociwiZGlzcGxheSIsbikpKTtmb3Iobz0wO288YTtvKyspbnVsbCE9aVtvXSYmKGVbb10uc3R5bGUuZGlzcGxheT1pW29dKTtyZXR1cm4gZX13LmZuLmV4dGVuZCh7c2hvdzpmdW5jdGlvbigpe3JldHVybiBmZSh0aGlzLCEwKX0saGlkZTpmdW5jdGlvbigpe3JldHVybiBmZSh0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKGUpe3JldHVybiJib29sZWFuIj09dHlwZW9mIGU/ZT90aGlzLnNob3coKTp0aGlzLmhpZGUoKTp0aGlzLmVhY2goZnVuY3Rpb24oKXthZSh0aGlzKT93KHRoaXMpLnNob3coKTp3KHRoaXMpLmhpZGUoKX0pfX0pO3ZhciBwZT0vXig/OmNoZWNrYm94fHJhZGlvKSQvaSxkZT0vPChbYS16XVteXC9cMD5ceDIwXHRcclxuXGZdKykvaSxoZT0vXiR8Xm1vZHVsZSR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksZ2U9e29wdGlvbjpbMSwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPiIsIjwvc2VsZWN0PiJdLHRoZWFkOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSxjb2w6WzIsIjx0YWJsZT48Y29sZ3JvdXA+IiwiPC9jb2xncm91cD48L3RhYmxlPiJdLHRyOlsyLCI8dGFibGU+PHRib2R5PiIsIjwvdGJvZHk+PC90YWJsZT4iXSx0ZDpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sX2RlZmF1bHQ6WzAsIiIsIiJdfTtnZS5vcHRncm91cD1nZS5vcHRpb24sZ2UudGJvZHk9Z2UudGZvb3Q9Z2UuY29sZ3JvdXA9Z2UuY2FwdGlvbj1nZS50aGVhZCxnZS50aD1nZS50ZDtmdW5jdGlvbiB5ZShlLHQpe3ZhciBuO3JldHVybiBuPSJ1bmRlZmluZWQiIT10eXBlb2YgZS5nZXRFbGVtZW50c0J5VGFnTmFtZT9lLmdldEVsZW1lbnRzQnlUYWdOYW1lKHR8fCIqIik6InVuZGVmaW5lZCIhPXR5cGVvZiBlLnF1ZXJ5U2VsZWN0b3JBbGw/ZS5xdWVyeVNlbGVjdG9yQWxsKHR8fCIqIik6W10sdm9pZCAwPT09dHx8dCYmTihlLHQpP3cubWVyZ2UoW2VdLG4pOm59ZnVuY3Rpb24gdmUoZSx0KXtmb3IodmFyIG49MCxyPWUubGVuZ3RoO248cjtuKyspSi5zZXQoZVtuXSwiZ2xvYmFsRXZhbCIsIXR8fEouZ2V0KHRbbl0sImdsb2JhbEV2YWwiKSl9dmFyIG1lPS88fCYjP1x3KzsvO2Z1bmN0aW9uIHhlKGUsdCxuLHIsaSl7Zm9yKHZhciBvLGEscyx1LGwsYyxmPXQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLHA9W10sZD0wLGg9ZS5sZW5ndGg7ZDxoO2QrKylpZigobz1lW2RdKXx8MD09PW8paWYoIm9iamVjdCI9PT14KG8pKXcubWVyZ2UocCxvLm5vZGVUeXBlP1tvXTpvKTtlbHNlIGlmKG1lLnRlc3Qobykpe2E9YXx8Zi5hcHBlbmRDaGlsZCh0LmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxzPShkZS5leGVjKG8pfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpLHU9Z2Vbc118fGdlLl9kZWZhdWx0LGEuaW5uZXJIVE1MPXVbMV0rdy5odG1sUHJlZmlsdGVyKG8pK3VbMl0sYz11WzBdO3doaWxlKGMtLSlhPWEubGFzdENoaWxkO3cubWVyZ2UocCxhLmNoaWxkTm9kZXMpLChhPWYuZmlyc3RDaGlsZCkudGV4dENvbnRlbnQ9IiJ9ZWxzZSBwLnB1c2godC5jcmVhdGVUZXh0Tm9kZShvKSk7Zi50ZXh0Q29udGVudD0iIixkPTA7d2hpbGUobz1wW2QrK10paWYociYmdy5pbkFycmF5KG8scik+LTEpaSYmaS5wdXNoKG8pO2Vsc2UgaWYobD13LmNvbnRhaW5zKG8ub3duZXJEb2N1bWVudCxvKSxhPXllKGYuYXBwZW5kQ2hpbGQobyksInNjcmlwdCIpLGwmJnZlKGEpLG4pe2M9MDt3aGlsZShvPWFbYysrXSloZS50ZXN0KG8udHlwZXx8IiIpJiZuLnB1c2gobyl9cmV0dXJuIGZ9IWZ1bmN0aW9uKCl7dmFyIGU9ci5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkuYXBwZW5kQ2hpbGQoci5jcmVhdGVFbGVtZW50KCJkaXYiKSksdD1yLmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7dC5zZXRBdHRyaWJ1dGUoInR5cGUiLCJyYWRpbyIpLHQuc2V0QXR0cmlidXRlKCJjaGVja2VkIiwiY2hlY2tlZCIpLHQuc2V0QXR0cmlidXRlKCJuYW1lIiwidCIpLGUuYXBwZW5kQ2hpbGQodCksaC5jaGVja0Nsb25lPWUuY2xvbmVOb2RlKCEwKS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5jaGVja2VkLGUuaW5uZXJIVE1MPSI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+IixoLm5vQ2xvbmVDaGVja2VkPSEhZS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWV9KCk7dmFyIGJlPXIuZG9jdW1lbnRFbGVtZW50LHdlPS9ea2V5LyxUZT0vXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnV8ZHJhZ3xkcm9wKXxjbGljay8sQ2U9L14oW14uXSopKD86XC4oLispfCkvO2Z1bmN0aW9uIEVlKCl7cmV0dXJuITB9ZnVuY3Rpb24ga2UoKXtyZXR1cm4hMX1mdW5jdGlvbiBTZSgpe3RyeXtyZXR1cm4gci5hY3RpdmVFbGVtZW50fWNhdGNoKGUpe319ZnVuY3Rpb24gRGUoZSx0LG4scixpLG8pe3ZhciBhLHM7aWYoIm9iamVjdCI9PXR5cGVvZiB0KXsic3RyaW5nIiE9dHlwZW9mIG4mJihyPXJ8fG4sbj12b2lkIDApO2ZvcihzIGluIHQpRGUoZSxzLG4scix0W3NdLG8pO3JldHVybiBlfWlmKG51bGw9PXImJm51bGw9PWk/KGk9bixyPW49dm9pZCAwKTpudWxsPT1pJiYoInN0cmluZyI9PXR5cGVvZiBuPyhpPXIscj12b2lkIDApOihpPXIscj1uLG49dm9pZCAwKSksITE9PT1pKWk9a2U7ZWxzZSBpZighaSlyZXR1cm4gZTtyZXR1cm4gMT09PW8mJihhPWksKGk9ZnVuY3Rpb24oZSl7cmV0dXJuIHcoKS5vZmYoZSksYS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KS5ndWlkPWEuZ3VpZHx8KGEuZ3VpZD13Lmd1aWQrKykpLGUuZWFjaChmdW5jdGlvbigpe3cuZXZlbnQuYWRkKHRoaXMsdCxpLHIsbil9KX13LmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKGUsdCxuLHIsaSl7dmFyIG8sYSxzLHUsbCxjLGYscCxkLGgsZyx5PUouZ2V0KGUpO2lmKHkpe24uaGFuZGxlciYmKG49KG89bikuaGFuZGxlcixpPW8uc2VsZWN0b3IpLGkmJncuZmluZC5tYXRjaGVzU2VsZWN0b3IoYmUsaSksbi5ndWlkfHwobi5ndWlkPXcuZ3VpZCsrKSwodT15LmV2ZW50cyl8fCh1PXkuZXZlbnRzPXt9KSwoYT15LmhhbmRsZSl8fChhPXkuaGFuZGxlPWZ1bmN0aW9uKHQpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgdyYmdy5ldmVudC50cmlnZ2VyZWQhPT10LnR5cGU/dy5ldmVudC5kaXNwYXRjaC5hcHBseShlLGFyZ3VtZW50cyk6dm9pZCAwfSksbD0odD0odHx8IiIpLm1hdGNoKE0pfHxbIiJdKS5sZW5ndGg7d2hpbGUobC0tKWQ9Zz0ocz1DZS5leGVjKHRbbF0pfHxbXSlbMV0saD0oc1syXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLGQmJihmPXcuZXZlbnQuc3BlY2lhbFtkXXx8e30sZD0oaT9mLmRlbGVnYXRlVHlwZTpmLmJpbmRUeXBlKXx8ZCxmPXcuZXZlbnQuc3BlY2lhbFtkXXx8e30sYz13LmV4dGVuZCh7dHlwZTpkLG9yaWdUeXBlOmcsZGF0YTpyLGhhbmRsZXI6bixndWlkOm4uZ3VpZCxzZWxlY3RvcjppLG5lZWRzQ29udGV4dDppJiZ3LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QoaSksbmFtZXNwYWNlOmguam9pbigiLiIpfSxvKSwocD11W2RdKXx8KChwPXVbZF09W10pLmRlbGVnYXRlQ291bnQ9MCxmLnNldHVwJiYhMSE9PWYuc2V0dXAuY2FsbChlLHIsaCxhKXx8ZS5hZGRFdmVudExpc3RlbmVyJiZlLmFkZEV2ZW50TGlzdGVuZXIoZCxhKSksZi5hZGQmJihmLmFkZC5jYWxsKGUsYyksYy5oYW5kbGVyLmd1aWR8fChjLmhhbmRsZXIuZ3VpZD1uLmd1aWQpKSxpP3Auc3BsaWNlKHAuZGVsZWdhdGVDb3VudCsrLDAsYyk6cC5wdXNoKGMpLHcuZXZlbnQuZ2xvYmFsW2RdPSEwKX19LHJlbW92ZTpmdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvLGEscyx1LGwsYyxmLHAsZCxoLGcseT1KLmhhc0RhdGEoZSkmJkouZ2V0KGUpO2lmKHkmJih1PXkuZXZlbnRzKSl7bD0odD0odHx8IiIpLm1hdGNoKE0pfHxbIiJdKS5sZW5ndGg7d2hpbGUobC0tKWlmKHM9Q2UuZXhlYyh0W2xdKXx8W10sZD1nPXNbMV0saD0oc1syXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLGQpe2Y9dy5ldmVudC5zcGVjaWFsW2RdfHx7fSxwPXVbZD0ocj9mLmRlbGVnYXRlVHlwZTpmLmJpbmRUeXBlKXx8ZF18fFtdLHM9c1syXSYmbmV3IFJlZ0V4cCgiKF58XFwuKSIraC5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKSxhPW89cC5sZW5ndGg7d2hpbGUoby0tKWM9cFtvXSwhaSYmZyE9PWMub3JpZ1R5cGV8fG4mJm4uZ3VpZCE9PWMuZ3VpZHx8cyYmIXMudGVzdChjLm5hbWVzcGFjZSl8fHImJnIhPT1jLnNlbGVjdG9yJiYoIioqIiE9PXJ8fCFjLnNlbGVjdG9yKXx8KHAuc3BsaWNlKG8sMSksYy5zZWxlY3RvciYmcC5kZWxlZ2F0ZUNvdW50LS0sZi5yZW1vdmUmJmYucmVtb3ZlLmNhbGwoZSxjKSk7YSYmIXAubGVuZ3RoJiYoZi50ZWFyZG93biYmITEhPT1mLnRlYXJkb3duLmNhbGwoZSxoLHkuaGFuZGxlKXx8dy5yZW1vdmVFdmVudChlLGQseS5oYW5kbGUpLGRlbGV0ZSB1W2RdKX1lbHNlIGZvcihkIGluIHUpdy5ldmVudC5yZW1vdmUoZSxkK3RbbF0sbixyLCEwKTt3LmlzRW1wdHlPYmplY3QodSkmJkoucmVtb3ZlKGUsImhhbmRsZSBldmVudHMiKX19LGRpc3BhdGNoOmZ1bmN0aW9uKGUpe3ZhciB0PXcuZXZlbnQuZml4KGUpLG4scixpLG8sYSxzLHU9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpLGw9KEouZ2V0KHRoaXMsImV2ZW50cyIpfHx7fSlbdC50eXBlXXx8W10sYz13LmV2ZW50LnNwZWNpYWxbdC50eXBlXXx8e307Zm9yKHVbMF09dCxuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl1W25dPWFyZ3VtZW50c1tuXTtpZih0LmRlbGVnYXRlVGFyZ2V0PXRoaXMsIWMucHJlRGlzcGF0Y2h8fCExIT09Yy5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsdCkpe3M9dy5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsdCxsKSxuPTA7d2hpbGUoKG89c1tuKytdKSYmIXQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7dC5jdXJyZW50VGFyZ2V0PW8uZWxlbSxyPTA7d2hpbGUoKGE9by5oYW5kbGVyc1tyKytdKSYmIXQuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSl0LnJuYW1lc3BhY2UmJiF0LnJuYW1lc3BhY2UudGVzdChhLm5hbWVzcGFjZSl8fCh0LmhhbmRsZU9iaj1hLHQuZGF0YT1hLmRhdGEsdm9pZCAwIT09KGk9KCh3LmV2ZW50LnNwZWNpYWxbYS5vcmlnVHlwZV18fHt9KS5oYW5kbGV8fGEuaGFuZGxlcikuYXBwbHkoby5lbGVtLHUpKSYmITE9PT0odC5yZXN1bHQ9aSkmJih0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wUHJvcGFnYXRpb24oKSkpfXJldHVybiBjLnBvc3REaXNwYXRjaCYmYy5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLHQpLHQucmVzdWx0fX0saGFuZGxlcnM6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGksbyxhLHM9W10sdT10LmRlbGVnYXRlQ291bnQsbD1lLnRhcmdldDtpZih1JiZsLm5vZGVUeXBlJiYhKCJjbGljayI9PT1lLnR5cGUmJmUuYnV0dG9uPj0xKSlmb3IoO2whPT10aGlzO2w9bC5wYXJlbnROb2RlfHx0aGlzKWlmKDE9PT1sLm5vZGVUeXBlJiYoImNsaWNrIiE9PWUudHlwZXx8ITAhPT1sLmRpc2FibGVkKSl7Zm9yKG89W10sYT17fSxuPTA7bjx1O24rKyl2b2lkIDA9PT1hW2k9KHI9dFtuXSkuc2VsZWN0b3IrIiAiXSYmKGFbaV09ci5uZWVkc0NvbnRleHQ/dyhpLHRoaXMpLmluZGV4KGwpPi0xOncuZmluZChpLHRoaXMsbnVsbCxbbF0pLmxlbmd0aCksYVtpXSYmby5wdXNoKHIpO28ubGVuZ3RoJiZzLnB1c2goe2VsZW06bCxoYW5kbGVyczpvfSl9cmV0dXJuIGw9dGhpcyx1PHQubGVuZ3RoJiZzLnB1c2goe2VsZW06bCxoYW5kbGVyczp0LnNsaWNlKHUpfSksc30sYWRkUHJvcDpmdW5jdGlvbihlLHQpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh3LkV2ZW50LnByb3RvdHlwZSxlLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCxnZXQ6Zyh0KT9mdW5jdGlvbigpe2lmKHRoaXMub3JpZ2luYWxFdmVudClyZXR1cm4gdCh0aGlzLm9yaWdpbmFsRXZlbnQpfTpmdW5jdGlvbigpe2lmKHRoaXMub3JpZ2luYWxFdmVudClyZXR1cm4gdGhpcy5vcmlnaW5hbEV2ZW50W2VdfSxzZXQ6ZnVuY3Rpb24odCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsZSx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dH0pfX0pfSxmaXg6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbdy5leHBhbmRvXT9lOm5ldyB3LkV2ZW50KGUpfSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sZm9jdXM6e3RyaWdnZXI6ZnVuY3Rpb24oKXtpZih0aGlzIT09U2UoKSYmdGhpcy5mb2N1cylyZXR1cm4gdGhpcy5mb2N1cygpLCExfSxkZWxlZ2F0ZVR5cGU6ImZvY3VzaW4ifSxibHVyOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7aWYodGhpcz09PVNlKCkmJnRoaXMuYmx1cilyZXR1cm4gdGhpcy5ibHVyKCksITF9LGRlbGVnYXRlVHlwZToiZm9jdXNvdXQifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe2lmKCJjaGVja2JveCI9PT10aGlzLnR5cGUmJnRoaXMuY2xpY2smJk4odGhpcywiaW5wdXQiKSlyZXR1cm4gdGhpcy5jbGljaygpLCExfSxfZGVmYXVsdDpmdW5jdGlvbihlKXtyZXR1cm4gTihlLnRhcmdldCwiYSIpfX0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oZSl7dm9pZCAwIT09ZS5yZXN1bHQmJmUub3JpZ2luYWxFdmVudCYmKGUub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1lLnJlc3VsdCl9fX19LHcucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oZSx0LG4pe2UucmVtb3ZlRXZlbnRMaXN0ZW5lciYmZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsbil9LHcuRXZlbnQ9ZnVuY3Rpb24oZSx0KXtpZighKHRoaXMgaW5zdGFuY2VvZiB3LkV2ZW50KSlyZXR1cm4gbmV3IHcuRXZlbnQoZSx0KTtlJiZlLnR5cGU/KHRoaXMub3JpZ2luYWxFdmVudD1lLHRoaXMudHlwZT1lLnR5cGUsdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9ZS5kZWZhdWx0UHJldmVudGVkfHx2b2lkIDA9PT1lLmRlZmF1bHRQcmV2ZW50ZWQmJiExPT09ZS5yZXR1cm5WYWx1ZT9FZTprZSx0aGlzLnRhcmdldD1lLnRhcmdldCYmMz09PWUudGFyZ2V0Lm5vZGVUeXBlP2UudGFyZ2V0LnBhcmVudE5vZGU6ZS50YXJnZXQsdGhpcy5jdXJyZW50VGFyZ2V0PWUuY3VycmVudFRhcmdldCx0aGlzLnJlbGF0ZWRUYXJnZXQ9ZS5yZWxhdGVkVGFyZ2V0KTp0aGlzLnR5cGU9ZSx0JiZ3LmV4dGVuZCh0aGlzLHQpLHRoaXMudGltZVN0YW1wPWUmJmUudGltZVN0YW1wfHxEYXRlLm5vdygpLHRoaXNbdy5leHBhbmRvXT0hMH0sdy5FdmVudC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOncuRXZlbnQsaXNEZWZhdWx0UHJldmVudGVkOmtlLGlzUHJvcGFnYXRpb25TdG9wcGVkOmtlLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOmtlLGlzU2ltdWxhdGVkOiExLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPUVlLGUmJiF0aGlzLmlzU2ltdWxhdGVkJiZlLnByZXZlbnREZWZhdWx0KCl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPUVlLGUmJiF0aGlzLmlzU2ltdWxhdGVkJiZlLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1FZSxlJiYhdGhpcy5pc1NpbXVsYXRlZCYmZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0aGlzLnN0b3BQcm9wYWdhdGlvbigpfX0sdy5lYWNoKHthbHRLZXk6ITAsYnViYmxlczohMCxjYW5jZWxhYmxlOiEwLGNoYW5nZWRUb3VjaGVzOiEwLGN0cmxLZXk6ITAsZGV0YWlsOiEwLGV2ZW50UGhhc2U6ITAsbWV0YUtleTohMCxwYWdlWDohMCxwYWdlWTohMCxzaGlmdEtleTohMCx2aWV3OiEwLCJjaGFyIjohMCxjaGFyQ29kZTohMCxrZXk6ITAsa2V5Q29kZTohMCxidXR0b246ITAsYnV0dG9uczohMCxjbGllbnRYOiEwLGNsaWVudFk6ITAsb2Zmc2V0WDohMCxvZmZzZXRZOiEwLHBvaW50ZXJJZDohMCxwb2ludGVyVHlwZTohMCxzY3JlZW5YOiEwLHNjcmVlblk6ITAsdGFyZ2V0VG91Y2hlczohMCx0b0VsZW1lbnQ6ITAsdG91Y2hlczohMCx3aGljaDpmdW5jdGlvbihlKXt2YXIgdD1lLmJ1dHRvbjtyZXR1cm4gbnVsbD09ZS53aGljaCYmd2UudGVzdChlLnR5cGUpP251bGwhPWUuY2hhckNvZGU/ZS5jaGFyQ29kZTplLmtleUNvZGU6IWUud2hpY2gmJnZvaWQgMCE9PXQmJlRlLnRlc3QoZS50eXBlKT8xJnQ/MToyJnQ/Mzo0JnQ/MjowOmUud2hpY2h9fSx3LmV2ZW50LmFkZFByb3ApLHcuZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCIscG9pbnRlcmVudGVyOiJwb2ludGVyb3ZlciIscG9pbnRlcmxlYXZlOiJwb2ludGVyb3V0In0sZnVuY3Rpb24oZSx0KXt3LmV2ZW50LnNwZWNpYWxbZV09e2RlbGVnYXRlVHlwZTp0LGJpbmRUeXBlOnQsaGFuZGxlOmZ1bmN0aW9uKGUpe3ZhciBuLHI9dGhpcyxpPWUucmVsYXRlZFRhcmdldCxvPWUuaGFuZGxlT2JqO3JldHVybiBpJiYoaT09PXJ8fHcuY29udGFpbnMocixpKSl8fChlLnR5cGU9by5vcmlnVHlwZSxuPW8uaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksZS50eXBlPXQpLG59fX0pLHcuZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gRGUodGhpcyxlLHQsbixyKX0sb25lOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiBEZSh0aGlzLGUsdCxuLHIsMSl9LG9mZjpmdW5jdGlvbihlLHQsbil7dmFyIHIsaTtpZihlJiZlLnByZXZlbnREZWZhdWx0JiZlLmhhbmRsZU9iailyZXR1cm4gcj1lLmhhbmRsZU9iaix3KGUuZGVsZWdhdGVUYXJnZXQpLm9mZihyLm5hbWVzcGFjZT9yLm9yaWdUeXBlKyIuIityLm5hbWVzcGFjZTpyLm9yaWdUeXBlLHIuc2VsZWN0b3Isci5oYW5kbGVyKSx0aGlzO2lmKCJvYmplY3QiPT10eXBlb2YgZSl7Zm9yKGkgaW4gZSl0aGlzLm9mZihpLHQsZVtpXSk7cmV0dXJuIHRoaXN9cmV0dXJuITEhPT10JiYiZnVuY3Rpb24iIT10eXBlb2YgdHx8KG49dCx0PXZvaWQgMCksITE9PT1uJiYobj1rZSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dy5ldmVudC5yZW1vdmUodGhpcyxlLG4sdCl9KX19KTt2YXIgTmU9LzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW2Etel1bXlwvXDA+XHgyMFx0XHJcblxmXSopW14+XSopXC8+L2dpLEFlPS88c2NyaXB0fDxzdHlsZXw8bGluay9pLGplPS9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLHFlPS9eXHMqPCEoPzpcW0NEQVRBXFt8LS0pfCg/OlxdXF18LS0pPlxzKiQvZztmdW5jdGlvbiBMZShlLHQpe3JldHVybiBOKGUsInRhYmxlIikmJk4oMTEhPT10Lm5vZGVUeXBlP3Q6dC5maXJzdENoaWxkLCJ0ciIpP3coZSkuY2hpbGRyZW4oInRib2R5IilbMF18fGU6ZX1mdW5jdGlvbiBIZShlKXtyZXR1cm4gZS50eXBlPShudWxsIT09ZS5nZXRBdHRyaWJ1dGUoInR5cGUiKSkrIi8iK2UudHlwZSxlfWZ1bmN0aW9uIE9lKGUpe3JldHVybiJ0cnVlLyI9PT0oZS50eXBlfHwiIikuc2xpY2UoMCw1KT9lLnR5cGU9ZS50eXBlLnNsaWNlKDUpOmUucmVtb3ZlQXR0cmlidXRlKCJ0eXBlIiksZX1mdW5jdGlvbiBQZShlLHQpe3ZhciBuLHIsaSxvLGEscyx1LGw7aWYoMT09PXQubm9kZVR5cGUpe2lmKEouaGFzRGF0YShlKSYmKG89Si5hY2Nlc3MoZSksYT1KLnNldCh0LG8pLGw9by5ldmVudHMpKXtkZWxldGUgYS5oYW5kbGUsYS5ldmVudHM9e307Zm9yKGkgaW4gbClmb3Iobj0wLHI9bFtpXS5sZW5ndGg7bjxyO24rKyl3LmV2ZW50LmFkZCh0LGksbFtpXVtuXSl9Sy5oYXNEYXRhKGUpJiYocz1LLmFjY2VzcyhlKSx1PXcuZXh0ZW5kKHt9LHMpLEsuc2V0KHQsdSkpfX1mdW5jdGlvbiBNZShlLHQpe3ZhciBuPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsiaW5wdXQiPT09biYmcGUudGVzdChlLnR5cGUpP3QuY2hlY2tlZD1lLmNoZWNrZWQ6ImlucHV0IiE9PW4mJiJ0ZXh0YXJlYSIhPT1ufHwodC5kZWZhdWx0VmFsdWU9ZS5kZWZhdWx0VmFsdWUpfWZ1bmN0aW9uIFJlKGUsdCxuLHIpe3Q9YS5hcHBseShbXSx0KTt2YXIgaSxvLHMsdSxsLGMsZj0wLHA9ZS5sZW5ndGgsZD1wLTEseT10WzBdLHY9Zyh5KTtpZih2fHxwPjEmJiJzdHJpbmciPT10eXBlb2YgeSYmIWguY2hlY2tDbG9uZSYmamUudGVzdCh5KSlyZXR1cm4gZS5lYWNoKGZ1bmN0aW9uKGkpe3ZhciBvPWUuZXEoaSk7diYmKHRbMF09eS5jYWxsKHRoaXMsaSxvLmh0bWwoKSkpLFJlKG8sdCxuLHIpfSk7aWYocCYmKGk9eGUodCxlWzBdLm93bmVyRG9jdW1lbnQsITEsZSxyKSxvPWkuZmlyc3RDaGlsZCwxPT09aS5jaGlsZE5vZGVzLmxlbmd0aCYmKGk9byksb3x8cikpe2Zvcih1PShzPXcubWFwKHllKGksInNjcmlwdCIpLEhlKSkubGVuZ3RoO2Y8cDtmKyspbD1pLGYhPT1kJiYobD13LmNsb25lKGwsITAsITApLHUmJncubWVyZ2Uocyx5ZShsLCJzY3JpcHQiKSkpLG4uY2FsbChlW2ZdLGwsZik7aWYodSlmb3IoYz1zW3MubGVuZ3RoLTFdLm93bmVyRG9jdW1lbnQsdy5tYXAocyxPZSksZj0wO2Y8dTtmKyspbD1zW2ZdLGhlLnRlc3QobC50eXBlfHwiIikmJiFKLmFjY2VzcyhsLCJnbG9iYWxFdmFsIikmJncuY29udGFpbnMoYyxsKSYmKGwuc3JjJiYibW9kdWxlIiE9PShsLnR5cGV8fCIiKS50b0xvd2VyQ2FzZSgpP3cuX2V2YWxVcmwmJncuX2V2YWxVcmwobC5zcmMpOm0obC50ZXh0Q29udGVudC5yZXBsYWNlKHFlLCIiKSxjLGwpKX1yZXR1cm4gZX1mdW5jdGlvbiBJZShlLHQsbil7Zm9yKHZhciByLGk9dD93LmZpbHRlcih0LGUpOmUsbz0wO251bGwhPShyPWlbb10pO28rKylufHwxIT09ci5ub2RlVHlwZXx8dy5jbGVhbkRhdGEoeWUocikpLHIucGFyZW50Tm9kZSYmKG4mJncuY29udGFpbnMoci5vd25lckRvY3VtZW50LHIpJiZ2ZSh5ZShyLCJzY3JpcHQiKSksci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHIpKTtyZXR1cm4gZX13LmV4dGVuZCh7aHRtbFByZWZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKE5lLCI8JDE+PC8kMj4iKX0sY2xvbmU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHM9ZS5jbG9uZU5vZGUoITApLHU9dy5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSk7aWYoIShoLm5vQ2xvbmVDaGVja2VkfHwxIT09ZS5ub2RlVHlwZSYmMTEhPT1lLm5vZGVUeXBlfHx3LmlzWE1MRG9jKGUpKSlmb3IoYT15ZShzKSxyPTAsaT0obz15ZShlKSkubGVuZ3RoO3I8aTtyKyspTWUob1tyXSxhW3JdKTtpZih0KWlmKG4pZm9yKG89b3x8eWUoZSksYT1hfHx5ZShzKSxyPTAsaT1vLmxlbmd0aDtyPGk7cisrKVBlKG9bcl0sYVtyXSk7ZWxzZSBQZShlLHMpO3JldHVybihhPXllKHMsInNjcmlwdCIpKS5sZW5ndGg+MCYmdmUoYSwhdSYmeWUoZSwic2NyaXB0IikpLHN9LGNsZWFuRGF0YTpmdW5jdGlvbihlKXtmb3IodmFyIHQsbixyLGk9dy5ldmVudC5zcGVjaWFsLG89MDt2b2lkIDAhPT0obj1lW29dKTtvKyspaWYoWShuKSl7aWYodD1uW0ouZXhwYW5kb10pe2lmKHQuZXZlbnRzKWZvcihyIGluIHQuZXZlbnRzKWlbcl0/dy5ldmVudC5yZW1vdmUobixyKTp3LnJlbW92ZUV2ZW50KG4scix0LmhhbmRsZSk7bltKLmV4cGFuZG9dPXZvaWQgMH1uW0suZXhwYW5kb10mJihuW0suZXhwYW5kb109dm9pZCAwKX19fSksdy5mbi5leHRlbmQoe2RldGFjaDpmdW5jdGlvbihlKXtyZXR1cm4gSWUodGhpcyxlLCEwKX0scmVtb3ZlOmZ1bmN0aW9uKGUpe3JldHVybiBJZSh0aGlzLGUpfSx0ZXh0OmZ1bmN0aW9uKGUpe3JldHVybiB6KHRoaXMsZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWU/dy50ZXh0KHRoaXMpOnRoaXMuZW1wdHkoKS5lYWNoKGZ1bmN0aW9uKCl7MSE9PXRoaXMubm9kZVR5cGUmJjExIT09dGhpcy5ub2RlVHlwZSYmOSE9PXRoaXMubm9kZVR5cGV8fCh0aGlzLnRleHRDb250ZW50PWUpfSl9LG51bGwsZSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIFJlKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGUpezEhPT10aGlzLm5vZGVUeXBlJiYxMSE9PXRoaXMubm9kZVR5cGUmJjkhPT10aGlzLm5vZGVUeXBlfHxMZSh0aGlzLGUpLmFwcGVuZENoaWxkKGUpfSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gUmUodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciB0PUxlKHRoaXMsZSk7dC5pbnNlcnRCZWZvcmUoZSx0LmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gUmUodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gUmUodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdGhpcy5uZXh0U2libGluZyl9KX0sZW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGUsdD0wO251bGwhPShlPXRoaXNbdF0pO3QrKykxPT09ZS5ub2RlVHlwZSYmKHcuY2xlYW5EYXRhKHllKGUsITEpKSxlLnRleHRDb250ZW50PSIiKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT1udWxsIT1lJiZlLHQ9bnVsbD09dD9lOnQsdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gdy5jbG9uZSh0aGlzLGUsdCl9KX0saHRtbDpmdW5jdGlvbihlKXtyZXR1cm4geih0aGlzLGZ1bmN0aW9uKGUpe3ZhciB0PXRoaXNbMF18fHt9LG49MCxyPXRoaXMubGVuZ3RoO2lmKHZvaWQgMD09PWUmJjE9PT10Lm5vZGVUeXBlKXJldHVybiB0LmlubmVySFRNTDtpZigic3RyaW5nIj09dHlwZW9mIGUmJiFBZS50ZXN0KGUpJiYhZ2VbKGRlLmV4ZWMoZSl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCldKXtlPXcuaHRtbFByZWZpbHRlcihlKTt0cnl7Zm9yKDtuPHI7bisrKTE9PT0odD10aGlzW25dfHx7fSkubm9kZVR5cGUmJih3LmNsZWFuRGF0YSh5ZSh0LCExKSksdC5pbm5lckhUTUw9ZSk7dD0wfWNhdGNoKGUpe319dCYmdGhpcy5lbXB0eSgpLmFwcGVuZChlKX0sbnVsbCxlLGFyZ3VtZW50cy5sZW5ndGgpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbigpe3ZhciBlPVtdO3JldHVybiBSZSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbih0KXt2YXIgbj10aGlzLnBhcmVudE5vZGU7dy5pbkFycmF5KHRoaXMsZSk8MCYmKHcuY2xlYW5EYXRhKHllKHRoaXMpKSxuJiZuLnJlcGxhY2VDaGlsZCh0LHRoaXMpKX0sZSl9fSksdy5lYWNoKHthcHBlbmRUbzoiYXBwZW5kIixwcmVwZW5kVG86InByZXBlbmQiLGluc2VydEJlZm9yZToiYmVmb3JlIixpbnNlcnRBZnRlcjoiYWZ0ZXIiLHJlcGxhY2VBbGw6InJlcGxhY2VXaXRoIn0sZnVuY3Rpb24oZSx0KXt3LmZuW2VdPWZ1bmN0aW9uKGUpe2Zvcih2YXIgbixyPVtdLGk9dyhlKSxvPWkubGVuZ3RoLTEsYT0wO2E8PW87YSsrKW49YT09PW8/dGhpczp0aGlzLmNsb25lKCEwKSx3KGlbYV0pW3RdKG4pLHMuYXBwbHkocixuLmdldCgpKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2socil9fSk7dmFyIFdlPW5ldyBSZWdFeHAoIl4oIityZSsiKSg/IXB4KVthLXolXSskIiwiaSIpLCRlPWZ1bmN0aW9uKHQpe3ZhciBuPXQub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldztyZXR1cm4gbiYmbi5vcGVuZXJ8fChuPWUpLG4uZ2V0Q29tcHV0ZWRTdHlsZSh0KX0sQmU9bmV3IFJlZ0V4cChvZS5qb2luKCJ8IiksImkiKTshZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7aWYoYyl7bC5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi0xMTExMXB4O3dpZHRoOjYwcHg7bWFyZ2luLXRvcDoxcHg7cGFkZGluZzowO2JvcmRlcjowIixjLnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6YmxvY2s7Ym94LXNpemluZzpib3JkZXItYm94O292ZXJmbG93OnNjcm9sbDttYXJnaW46YXV0bztib3JkZXI6MXB4O3BhZGRpbmc6MXB4O3dpZHRoOjYwJTt0b3A6MSUiLGJlLmFwcGVuZENoaWxkKGwpLmFwcGVuZENoaWxkKGMpO3ZhciB0PWUuZ2V0Q29tcHV0ZWRTdHlsZShjKTtpPSIxJSIhPT10LnRvcCx1PTEyPT09bih0Lm1hcmdpbkxlZnQpLGMuc3R5bGUucmlnaHQ9IjYwJSIscz0zNj09PW4odC5yaWdodCksbz0zNj09PW4odC53aWR0aCksYy5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiLGE9MzY9PT1jLm9mZnNldFdpZHRofHwiYWJzb2x1dGUiLGJlLnJlbW92ZUNoaWxkKGwpLGM9bnVsbH19ZnVuY3Rpb24gbihlKXtyZXR1cm4gTWF0aC5yb3VuZChwYXJzZUZsb2F0KGUpKX12YXIgaSxvLGEscyx1LGw9ci5jcmVhdGVFbGVtZW50KCJkaXYiKSxjPXIuY3JlYXRlRWxlbWVudCgiZGl2Iik7Yy5zdHlsZSYmKGMuc3R5bGUuYmFja2dyb3VuZENsaXA9ImNvbnRlbnQtYm94IixjLmNsb25lTm9kZSghMCkuc3R5bGUuYmFja2dyb3VuZENsaXA9IiIsaC5jbGVhckNsb25lU3R5bGU9ImNvbnRlbnQtYm94Ij09PWMuc3R5bGUuYmFja2dyb3VuZENsaXAsdy5leHRlbmQoaCx7Ym94U2l6aW5nUmVsaWFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdCgpLG99LHBpeGVsQm94U3R5bGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHQoKSxzfSxwaXhlbFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHQoKSxpfSxyZWxpYWJsZU1hcmdpbkxlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdCgpLHV9LHNjcm9sbGJveFNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdCgpLGF9fSkpfSgpO2Z1bmN0aW9uIEZlKGUsdCxuKXt2YXIgcixpLG8sYSxzPWUuc3R5bGU7cmV0dXJuKG49bnx8JGUoZSkpJiYoIiIhPT0oYT1uLmdldFByb3BlcnR5VmFsdWUodCl8fG5bdF0pfHx3LmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKXx8KGE9dy5zdHlsZShlLHQpKSwhaC5waXhlbEJveFN0eWxlcygpJiZXZS50ZXN0KGEpJiZCZS50ZXN0KHQpJiYocj1zLndpZHRoLGk9cy5taW5XaWR0aCxvPXMubWF4V2lkdGgscy5taW5XaWR0aD1zLm1heFdpZHRoPXMud2lkdGg9YSxhPW4ud2lkdGgscy53aWR0aD1yLHMubWluV2lkdGg9aSxzLm1heFdpZHRoPW8pKSx2b2lkIDAhPT1hP2ErIiI6YX1mdW5jdGlvbiBfZShlLHQpe3JldHVybntnZXQ6ZnVuY3Rpb24oKXtpZighZSgpKXJldHVybih0aGlzLmdldD10KS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZGVsZXRlIHRoaXMuZ2V0fX19dmFyIHplPS9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyxYZT0vXi0tLyxVZT17cG9zaXRpb246ImFic29sdXRlIix2aXNpYmlsaXR5OiJoaWRkZW4iLGRpc3BsYXk6ImJsb2NrIn0sVmU9e2xldHRlclNwYWNpbmc6IjAiLGZvbnRXZWlnaHQ6IjQwMCJ9LEdlPVsiV2Via2l0IiwiTW96IiwibXMiXSxZZT1yLmNyZWF0ZUVsZW1lbnQoImRpdiIpLnN0eWxlO2Z1bmN0aW9uIFFlKGUpe2lmKGUgaW4gWWUpcmV0dXJuIGU7dmFyIHQ9ZVswXS50b1VwcGVyQ2FzZSgpK2Uuc2xpY2UoMSksbj1HZS5sZW5ndGg7d2hpbGUobi0tKWlmKChlPUdlW25dK3QpaW4gWWUpcmV0dXJuIGV9ZnVuY3Rpb24gSmUoZSl7dmFyIHQ9dy5jc3NQcm9wc1tlXTtyZXR1cm4gdHx8KHQ9dy5jc3NQcm9wc1tlXT1RZShlKXx8ZSksdH1mdW5jdGlvbiBLZShlLHQsbil7dmFyIHI9aWUuZXhlYyh0KTtyZXR1cm4gcj9NYXRoLm1heCgwLHJbMl0tKG58fDApKSsoclszXXx8InB4Iik6dH1mdW5jdGlvbiBaZShlLHQsbixyLGksbyl7dmFyIGE9IndpZHRoIj09PXQ/MTowLHM9MCx1PTA7aWYobj09PShyPyJib3JkZXIiOiJjb250ZW50IikpcmV0dXJuIDA7Zm9yKDthPDQ7YSs9MikibWFyZ2luIj09PW4mJih1Kz13LmNzcyhlLG4rb2VbYV0sITAsaSkpLHI/KCJjb250ZW50Ij09PW4mJih1LT13LmNzcyhlLCJwYWRkaW5nIitvZVthXSwhMCxpKSksIm1hcmdpbiIhPT1uJiYodS09dy5jc3MoZSwiYm9yZGVyIitvZVthXSsiV2lkdGgiLCEwLGkpKSk6KHUrPXcuY3NzKGUsInBhZGRpbmciK29lW2FdLCEwLGkpLCJwYWRkaW5nIiE9PW4/dSs9dy5jc3MoZSwiYm9yZGVyIitvZVthXSsiV2lkdGgiLCEwLGkpOnMrPXcuY3NzKGUsImJvcmRlciIrb2VbYV0rIldpZHRoIiwhMCxpKSk7cmV0dXJuIXImJm8+PTAmJih1Kz1NYXRoLm1heCgwLE1hdGguY2VpbChlWyJvZmZzZXQiK3RbMF0udG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpXS1vLXUtcy0uNSkpKSx1fWZ1bmN0aW9uIGV0KGUsdCxuKXt2YXIgcj0kZShlKSxpPUZlKGUsdCxyKSxvPSJib3JkZXItYm94Ij09PXcuY3NzKGUsImJveFNpemluZyIsITEsciksYT1vO2lmKFdlLnRlc3QoaSkpe2lmKCFuKXJldHVybiBpO2k9ImF1dG8ifXJldHVybiBhPWEmJihoLmJveFNpemluZ1JlbGlhYmxlKCl8fGk9PT1lLnN0eWxlW3RdKSwoImF1dG8iPT09aXx8IXBhcnNlRmxvYXQoaSkmJiJpbmxpbmUiPT09dy5jc3MoZSwiZGlzcGxheSIsITEscikpJiYoaT1lWyJvZmZzZXQiK3RbMF0udG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpXSxhPSEwKSwoaT1wYXJzZUZsb2F0KGkpfHwwKStaZShlLHQsbnx8KG8/ImJvcmRlciI6ImNvbnRlbnQiKSxhLHIsaSkrInB4In13LmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihlLHQpe2lmKHQpe3ZhciBuPUZlKGUsIm9wYWNpdHkiKTtyZXR1cm4iIj09PW4/IjEiOm59fX19LGNzc051bWJlcjp7YW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6ITAsY29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZmxleEdyb3c6ITAsZmxleFNocmluazohMCxmb250V2VpZ2h0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcmRlcjohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6e30sc3R5bGU6ZnVuY3Rpb24oZSx0LG4scil7aWYoZSYmMyE9PWUubm9kZVR5cGUmJjghPT1lLm5vZGVUeXBlJiZlLnN0eWxlKXt2YXIgaSxvLGEscz1HKHQpLHU9WGUudGVzdCh0KSxsPWUuc3R5bGU7aWYodXx8KHQ9SmUocykpLGE9dy5jc3NIb29rc1t0XXx8dy5jc3NIb29rc1tzXSx2b2lkIDA9PT1uKXJldHVybiBhJiYiZ2V0ImluIGEmJnZvaWQgMCE9PShpPWEuZ2V0KGUsITEscikpP2k6bFt0XTsic3RyaW5nIj09KG89dHlwZW9mIG4pJiYoaT1pZS5leGVjKG4pKSYmaVsxXSYmKG49dWUoZSx0LGkpLG89Im51bWJlciIpLG51bGwhPW4mJm49PT1uJiYoIm51bWJlciI9PT1vJiYobis9aSYmaVszXXx8KHcuY3NzTnVtYmVyW3NdPyIiOiJweCIpKSxoLmNsZWFyQ2xvbmVTdHlsZXx8IiIhPT1ufHwwIT09dC5pbmRleE9mKCJiYWNrZ3JvdW5kIil8fChsW3RdPSJpbmhlcml0IiksYSYmInNldCJpbiBhJiZ2b2lkIDA9PT0obj1hLnNldChlLG4scikpfHwodT9sLnNldFByb3BlcnR5KHQsbik6bFt0XT1uKSl9fSxjc3M6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxhLHM9Ryh0KTtyZXR1cm4gWGUudGVzdCh0KXx8KHQ9SmUocykpLChhPXcuY3NzSG9va3NbdF18fHcuY3NzSG9va3Nbc10pJiYiZ2V0ImluIGEmJihpPWEuZ2V0KGUsITAsbikpLHZvaWQgMD09PWkmJihpPUZlKGUsdCxyKSksIm5vcm1hbCI9PT1pJiZ0IGluIFZlJiYoaT1WZVt0XSksIiI9PT1ufHxuPyhvPXBhcnNlRmxvYXQoaSksITA9PT1ufHxpc0Zpbml0ZShvKT9vfHwwOmkpOml9fSksdy5lYWNoKFsiaGVpZ2h0Iiwid2lkdGgiXSxmdW5jdGlvbihlLHQpe3cuY3NzSG9va3NbdF09e2dldDpmdW5jdGlvbihlLG4scil7aWYobilyZXR1cm4hemUudGVzdCh3LmNzcyhlLCJkaXNwbGF5IikpfHxlLmdldENsaWVudFJlY3RzKCkubGVuZ3RoJiZlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoP2V0KGUsdCxyKTpzZShlLFVlLGZ1bmN0aW9uKCl7cmV0dXJuIGV0KGUsdCxyKX0pfSxzZXQ6ZnVuY3Rpb24oZSxuLHIpe3ZhciBpLG89JGUoZSksYT0iYm9yZGVyLWJveCI9PT13LmNzcyhlLCJib3hTaXppbmciLCExLG8pLHM9ciYmWmUoZSx0LHIsYSxvKTtyZXR1cm4gYSYmaC5zY3JvbGxib3hTaXplKCk9PT1vLnBvc2l0aW9uJiYocy09TWF0aC5jZWlsKGVbIm9mZnNldCIrdFswXS50b1VwcGVyQ2FzZSgpK3Quc2xpY2UoMSldLXBhcnNlRmxvYXQob1t0XSktWmUoZSx0LCJib3JkZXIiLCExLG8pLS41KSkscyYmKGk9aWUuZXhlYyhuKSkmJiJweCIhPT0oaVszXXx8InB4IikmJihlLnN0eWxlW3RdPW4sbj13LmNzcyhlLHQpKSxLZShlLG4scyl9fX0pLHcuY3NzSG9va3MubWFyZ2luTGVmdD1fZShoLnJlbGlhYmxlTWFyZ2luTGVmdCxmdW5jdGlvbihlLHQpe2lmKHQpcmV0dXJuKHBhcnNlRmxvYXQoRmUoZSwibWFyZ2luTGVmdCIpKXx8ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0LXNlKGUse21hcmdpbkxlZnQ6MH0sZnVuY3Rpb24oKXtyZXR1cm4gZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0fSkpKyJweCJ9KSx3LmVhY2goe21hcmdpbjoiIixwYWRkaW5nOiIiLGJvcmRlcjoiV2lkdGgifSxmdW5jdGlvbihlLHQpe3cuY3NzSG9va3NbZSt0XT17ZXhwYW5kOmZ1bmN0aW9uKG4pe2Zvcih2YXIgcj0wLGk9e30sbz0ic3RyaW5nIj09dHlwZW9mIG4/bi5zcGxpdCgiICIpOltuXTtyPDQ7cisrKWlbZStvZVtyXSt0XT1vW3JdfHxvW3ItMl18fG9bMF07cmV0dXJuIGl9fSwibWFyZ2luIiE9PWUmJih3LmNzc0hvb2tzW2UrdF0uc2V0PUtlKX0pLHcuZm4uZXh0ZW5kKHtjc3M6ZnVuY3Rpb24oZSx0KXtyZXR1cm4geih0aGlzLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89e30sYT0wO2lmKEFycmF5LmlzQXJyYXkodCkpe2ZvcihyPSRlKGUpLGk9dC5sZW5ndGg7YTxpO2ErKylvW3RbYV1dPXcuY3NzKGUsdFthXSwhMSxyKTtyZXR1cm4gb31yZXR1cm4gdm9pZCAwIT09bj93LnN0eWxlKGUsdCxuKTp3LmNzcyhlLHQpfSxlLHQsYXJndW1lbnRzLmxlbmd0aD4xKX19KTtmdW5jdGlvbiB0dChlLHQsbixyLGkpe3JldHVybiBuZXcgdHQucHJvdG90eXBlLmluaXQoZSx0LG4scixpKX13LlR3ZWVuPXR0LHR0LnByb3RvdHlwZT17Y29uc3RydWN0b3I6dHQsaW5pdDpmdW5jdGlvbihlLHQsbixyLGksbyl7dGhpcy5lbGVtPWUsdGhpcy5wcm9wPW4sdGhpcy5lYXNpbmc9aXx8dy5lYXNpbmcuX2RlZmF1bHQsdGhpcy5vcHRpb25zPXQsdGhpcy5zdGFydD10aGlzLm5vdz10aGlzLmN1cigpLHRoaXMuZW5kPXIsdGhpcy51bml0PW98fCh3LmNzc051bWJlcltuXT8iIjoicHgiKX0sY3VyOmZ1bmN0aW9uKCl7dmFyIGU9dHQucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIGUmJmUuZ2V0P2UuZ2V0KHRoaXMpOnR0LnByb3BIb29rcy5fZGVmYXVsdC5nZXQodGhpcyl9LHJ1bjpmdW5jdGlvbihlKXt2YXIgdCxuPXR0LnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiB0aGlzLm9wdGlvbnMuZHVyYXRpb24/dGhpcy5wb3M9dD13LmVhc2luZ1t0aGlzLmVhc2luZ10oZSx0aGlzLm9wdGlvbnMuZHVyYXRpb24qZSwwLDEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKTp0aGlzLnBvcz10PWUsdGhpcy5ub3c9KHRoaXMuZW5kLXRoaXMuc3RhcnQpKnQrdGhpcy5zdGFydCx0aGlzLm9wdGlvbnMuc3RlcCYmdGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyksbiYmbi5zZXQ/bi5zZXQodGhpcyk6dHQucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKSx0aGlzfX0sdHQucHJvdG90eXBlLmluaXQucHJvdG90eXBlPXR0LnByb3RvdHlwZSx0dC5wcm9wSG9va3M9e19kZWZhdWx0OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIDEhPT1lLmVsZW0ubm9kZVR5cGV8fG51bGwhPWUuZWxlbVtlLnByb3BdJiZudWxsPT1lLmVsZW0uc3R5bGVbZS5wcm9wXT9lLmVsZW1bZS5wcm9wXToodD13LmNzcyhlLmVsZW0sZS5wcm9wLCIiKSkmJiJhdXRvIiE9PXQ/dDowfSxzZXQ6ZnVuY3Rpb24oZSl7dy5meC5zdGVwW2UucHJvcF0/dy5meC5zdGVwW2UucHJvcF0oZSk6MSE9PWUuZWxlbS5ub2RlVHlwZXx8bnVsbD09ZS5lbGVtLnN0eWxlW3cuY3NzUHJvcHNbZS5wcm9wXV0mJiF3LmNzc0hvb2tzW2UucHJvcF0/ZS5lbGVtW2UucHJvcF09ZS5ub3c6dy5zdHlsZShlLmVsZW0sZS5wcm9wLGUubm93K2UudW5pdCl9fX0sdHQucHJvcEhvb2tzLnNjcm9sbFRvcD10dC5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGUpe2UuZWxlbS5ub2RlVHlwZSYmZS5lbGVtLnBhcmVudE5vZGUmJihlLmVsZW1bZS5wcm9wXT1lLm5vdyl9fSx3LmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKGUpe3JldHVybiBlfSxzd2luZzpmdW5jdGlvbihlKXtyZXR1cm4uNS1NYXRoLmNvcyhlKk1hdGguUEkpLzJ9LF9kZWZhdWx0OiJzd2luZyJ9LHcuZng9dHQucHJvdG90eXBlLmluaXQsdy5meC5zdGVwPXt9O3ZhciBudCxydCxpdD0vXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sb3Q9L3F1ZXVlSG9va3MkLztmdW5jdGlvbiBhdCgpe3J0JiYoITE9PT1yLmhpZGRlbiYmZS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU/ZS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYXQpOmUuc2V0VGltZW91dChhdCx3LmZ4LmludGVydmFsKSx3LmZ4LnRpY2soKSl9ZnVuY3Rpb24gc3QoKXtyZXR1cm4gZS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bnQ9dm9pZCAwfSksbnQ9RGF0ZS5ub3coKX1mdW5jdGlvbiB1dChlLHQpe3ZhciBuLHI9MCxpPXtoZWlnaHQ6ZX07Zm9yKHQ9dD8xOjA7cjw0O3IrPTItdClpWyJtYXJnaW4iKyhuPW9lW3JdKV09aVsicGFkZGluZyIrbl09ZTtyZXR1cm4gdCYmKGkub3BhY2l0eT1pLndpZHRoPWUpLGl9ZnVuY3Rpb24gbHQoZSx0LG4pe2Zvcih2YXIgcixpPShwdC50d2VlbmVyc1t0XXx8W10pLmNvbmNhdChwdC50d2VlbmVyc1siKiJdKSxvPTAsYT1pLmxlbmd0aDtvPGE7bysrKWlmKHI9aVtvXS5jYWxsKG4sdCxlKSlyZXR1cm4gcn1mdW5jdGlvbiBjdChlLHQsbil7dmFyIHIsaSxvLGEscyx1LGwsYyxmPSJ3aWR0aCJpbiB0fHwiaGVpZ2h0ImluIHQscD10aGlzLGQ9e30saD1lLnN0eWxlLGc9ZS5ub2RlVHlwZSYmYWUoZSkseT1KLmdldChlLCJmeHNob3ciKTtuLnF1ZXVlfHwobnVsbD09KGE9dy5fcXVldWVIb29rcyhlLCJmeCIpKS51bnF1ZXVlZCYmKGEudW5xdWV1ZWQ9MCxzPWEuZW1wdHkuZmlyZSxhLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXthLnVucXVldWVkfHxzKCl9KSxhLnVucXVldWVkKysscC5hbHdheXMoZnVuY3Rpb24oKXtwLmFsd2F5cyhmdW5jdGlvbigpe2EudW5xdWV1ZWQtLSx3LnF1ZXVlKGUsImZ4IikubGVuZ3RofHxhLmVtcHR5LmZpcmUoKX0pfSkpO2ZvcihyIGluIHQpaWYoaT10W3JdLGl0LnRlc3QoaSkpe2lmKGRlbGV0ZSB0W3JdLG89b3x8InRvZ2dsZSI9PT1pLGk9PT0oZz8iaGlkZSI6InNob3ciKSl7aWYoInNob3ciIT09aXx8IXl8fHZvaWQgMD09PXlbcl0pY29udGludWU7Zz0hMH1kW3JdPXkmJnlbcl18fHcuc3R5bGUoZSxyKX1pZigodT0hdy5pc0VtcHR5T2JqZWN0KHQpKXx8IXcuaXNFbXB0eU9iamVjdChkKSl7ZiYmMT09PWUubm9kZVR5cGUmJihuLm92ZXJmbG93PVtoLm92ZXJmbG93LGgub3ZlcmZsb3dYLGgub3ZlcmZsb3dZXSxudWxsPT0obD15JiZ5LmRpc3BsYXkpJiYobD1KLmdldChlLCJkaXNwbGF5IikpLCJub25lIj09PShjPXcuY3NzKGUsImRpc3BsYXkiKSkmJihsP2M9bDooZmUoW2VdLCEwKSxsPWUuc3R5bGUuZGlzcGxheXx8bCxjPXcuY3NzKGUsImRpc3BsYXkiKSxmZShbZV0pKSksKCJpbmxpbmUiPT09Y3x8ImlubGluZS1ibG9jayI9PT1jJiZudWxsIT1sKSYmIm5vbmUiPT09dy5jc3MoZSwiZmxvYXQiKSYmKHV8fChwLmRvbmUoZnVuY3Rpb24oKXtoLmRpc3BsYXk9bH0pLG51bGw9PWwmJihjPWguZGlzcGxheSxsPSJub25lIj09PWM/IiI6YykpLGguZGlzcGxheT0iaW5saW5lLWJsb2NrIikpLG4ub3ZlcmZsb3cmJihoLm92ZXJmbG93PSJoaWRkZW4iLHAuYWx3YXlzKGZ1bmN0aW9uKCl7aC5vdmVyZmxvdz1uLm92ZXJmbG93WzBdLGgub3ZlcmZsb3dYPW4ub3ZlcmZsb3dbMV0saC5vdmVyZmxvd1k9bi5vdmVyZmxvd1syXX0pKSx1PSExO2ZvcihyIGluIGQpdXx8KHk/ImhpZGRlbiJpbiB5JiYoZz15LmhpZGRlbik6eT1KLmFjY2VzcyhlLCJmeHNob3ciLHtkaXNwbGF5Omx9KSxvJiYoeS5oaWRkZW49IWcpLGcmJmZlKFtlXSwhMCkscC5kb25lKGZ1bmN0aW9uKCl7Z3x8ZmUoW2VdKSxKLnJlbW92ZShlLCJmeHNob3ciKTtmb3IociBpbiBkKXcuc3R5bGUoZSxyLGRbcl0pfSkpLHU9bHQoZz95W3JdOjAscixwKSxyIGluIHl8fCh5W3JdPXUuc3RhcnQsZyYmKHUuZW5kPXUuc3RhcnQsdS5zdGFydD0wKSl9fWZ1bmN0aW9uIGZ0KGUsdCl7dmFyIG4scixpLG8sYTtmb3IobiBpbiBlKWlmKHI9RyhuKSxpPXRbcl0sbz1lW25dLEFycmF5LmlzQXJyYXkobykmJihpPW9bMV0sbz1lW25dPW9bMF0pLG4hPT1yJiYoZVtyXT1vLGRlbGV0ZSBlW25dKSwoYT13LmNzc0hvb2tzW3JdKSYmImV4cGFuZCJpbiBhKXtvPWEuZXhwYW5kKG8pLGRlbGV0ZSBlW3JdO2ZvcihuIGluIG8pbiBpbiBlfHwoZVtuXT1vW25dLHRbbl09aSl9ZWxzZSB0W3JdPWl9ZnVuY3Rpb24gcHQoZSx0LG4pe3ZhciByLGksbz0wLGE9cHQucHJlZmlsdGVycy5sZW5ndGgscz13LkRlZmVycmVkKCkuYWx3YXlzKGZ1bmN0aW9uKCl7ZGVsZXRlIHUuZWxlbX0pLHU9ZnVuY3Rpb24oKXtpZihpKXJldHVybiExO2Zvcih2YXIgdD1udHx8c3QoKSxuPU1hdGgubWF4KDAsbC5zdGFydFRpbWUrbC5kdXJhdGlvbi10KSxyPTEtKG4vbC5kdXJhdGlvbnx8MCksbz0wLGE9bC50d2VlbnMubGVuZ3RoO288YTtvKyspbC50d2VlbnNbb10ucnVuKHIpO3JldHVybiBzLm5vdGlmeVdpdGgoZSxbbCxyLG5dKSxyPDEmJmE/bjooYXx8cy5ub3RpZnlXaXRoKGUsW2wsMSwwXSkscy5yZXNvbHZlV2l0aChlLFtsXSksITEpfSxsPXMucHJvbWlzZSh7ZWxlbTplLHByb3BzOncuZXh0ZW5kKHt9LHQpLG9wdHM6dy5leHRlbmQoITAse3NwZWNpYWxFYXNpbmc6e30sZWFzaW5nOncuZWFzaW5nLl9kZWZhdWx0fSxuKSxvcmlnaW5hbFByb3BlcnRpZXM6dCxvcmlnaW5hbE9wdGlvbnM6bixzdGFydFRpbWU6bnR8fHN0KCksZHVyYXRpb246bi5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24odCxuKXt2YXIgcj13LlR3ZWVuKGUsbC5vcHRzLHQsbixsLm9wdHMuc3BlY2lhbEVhc2luZ1t0XXx8bC5vcHRzLmVhc2luZyk7cmV0dXJuIGwudHdlZW5zLnB1c2gocikscn0sc3RvcDpmdW5jdGlvbih0KXt2YXIgbj0wLHI9dD9sLnR3ZWVucy5sZW5ndGg6MDtpZihpKXJldHVybiB0aGlzO2ZvcihpPSEwO248cjtuKyspbC50d2VlbnNbbl0ucnVuKDEpO3JldHVybiB0PyhzLm5vdGlmeVdpdGgoZSxbbCwxLDBdKSxzLnJlc29sdmVXaXRoKGUsW2wsdF0pKTpzLnJlamVjdFdpdGgoZSxbbCx0XSksdGhpc319KSxjPWwucHJvcHM7Zm9yKGZ0KGMsbC5vcHRzLnNwZWNpYWxFYXNpbmcpO288YTtvKyspaWYocj1wdC5wcmVmaWx0ZXJzW29dLmNhbGwobCxlLGMsbC5vcHRzKSlyZXR1cm4gZyhyLnN0b3ApJiYody5fcXVldWVIb29rcyhsLmVsZW0sbC5vcHRzLnF1ZXVlKS5zdG9wPXIuc3RvcC5iaW5kKHIpKSxyO3JldHVybiB3Lm1hcChjLGx0LGwpLGcobC5vcHRzLnN0YXJ0KSYmbC5vcHRzLnN0YXJ0LmNhbGwoZSxsKSxsLnByb2dyZXNzKGwub3B0cy5wcm9ncmVzcykuZG9uZShsLm9wdHMuZG9uZSxsLm9wdHMuY29tcGxldGUpLmZhaWwobC5vcHRzLmZhaWwpLmFsd2F5cyhsLm9wdHMuYWx3YXlzKSx3LmZ4LnRpbWVyKHcuZXh0ZW5kKHUse2VsZW06ZSxhbmltOmwscXVldWU6bC5vcHRzLnF1ZXVlfSkpLGx9dy5BbmltYXRpb249dy5leHRlbmQocHQse3R3ZWVuZXJzOnsiKiI6W2Z1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5jcmVhdGVUd2VlbihlLHQpO3JldHVybiB1ZShuLmVsZW0sZSxpZS5leGVjKHQpLG4pLG59XX0sdHdlZW5lcjpmdW5jdGlvbihlLHQpe2coZSk/KHQ9ZSxlPVsiKiJdKTplPWUubWF0Y2goTSk7Zm9yKHZhciBuLHI9MCxpPWUubGVuZ3RoO3I8aTtyKyspbj1lW3JdLHB0LnR3ZWVuZXJzW25dPXB0LnR3ZWVuZXJzW25dfHxbXSxwdC50d2VlbmVyc1tuXS51bnNoaWZ0KHQpfSxwcmVmaWx0ZXJzOltjdF0scHJlZmlsdGVyOmZ1bmN0aW9uKGUsdCl7dD9wdC5wcmVmaWx0ZXJzLnVuc2hpZnQoZSk6cHQucHJlZmlsdGVycy5wdXNoKGUpfX0pLHcuc3BlZWQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUmJiJvYmplY3QiPT10eXBlb2YgZT93LmV4dGVuZCh7fSxlKTp7Y29tcGxldGU6bnx8IW4mJnR8fGcoZSkmJmUsZHVyYXRpb246ZSxlYXNpbmc6biYmdHx8dCYmIWcodCkmJnR9O3JldHVybiB3LmZ4Lm9mZj9yLmR1cmF0aW9uPTA6Im51bWJlciIhPXR5cGVvZiByLmR1cmF0aW9uJiYoci5kdXJhdGlvbiBpbiB3LmZ4LnNwZWVkcz9yLmR1cmF0aW9uPXcuZnguc3BlZWRzW3IuZHVyYXRpb25dOnIuZHVyYXRpb249dy5meC5zcGVlZHMuX2RlZmF1bHQpLG51bGwhPXIucXVldWUmJiEwIT09ci5xdWV1ZXx8KHIucXVldWU9ImZ4Iiksci5vbGQ9ci5jb21wbGV0ZSxyLmNvbXBsZXRlPWZ1bmN0aW9uKCl7ZyhyLm9sZCkmJnIub2xkLmNhbGwodGhpcyksci5xdWV1ZSYmdy5kZXF1ZXVlKHRoaXMsci5xdWV1ZSl9LHJ9LHcuZm4uZXh0ZW5kKHtmYWRlVG86ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIHRoaXMuZmlsdGVyKGFlKS5jc3MoIm9wYWNpdHkiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OnR9LGUsbixyKX0sYW5pbWF0ZTpmdW5jdGlvbihlLHQsbixyKXt2YXIgaT13LmlzRW1wdHlPYmplY3QoZSksbz13LnNwZWVkKHQsbixyKSxhPWZ1bmN0aW9uKCl7dmFyIHQ9cHQodGhpcyx3LmV4dGVuZCh7fSxlKSxvKTsoaXx8Si5nZXQodGhpcywiZmluaXNoIikpJiZ0LnN0b3AoITApfTtyZXR1cm4gYS5maW5pc2g9YSxpfHwhMT09PW8ucXVldWU/dGhpcy5lYWNoKGEpOnRoaXMucXVldWUoby5xdWV1ZSxhKX0sc3RvcDpmdW5jdGlvbihlLHQsbil7dmFyIHI9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdG9wO2RlbGV0ZSBlLnN0b3AsdChuKX07cmV0dXJuInN0cmluZyIhPXR5cGVvZiBlJiYobj10LHQ9ZSxlPXZvaWQgMCksdCYmITEhPT1lJiZ0aGlzLnF1ZXVlKGV8fCJmeCIsW10pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PSEwLGk9bnVsbCE9ZSYmZSsicXVldWVIb29rcyIsbz13LnRpbWVycyxhPUouZ2V0KHRoaXMpO2lmKGkpYVtpXSYmYVtpXS5zdG9wJiZyKGFbaV0pO2Vsc2UgZm9yKGkgaW4gYSlhW2ldJiZhW2ldLnN0b3AmJm90LnRlc3QoaSkmJnIoYVtpXSk7Zm9yKGk9by5sZW5ndGg7aS0tOylvW2ldLmVsZW0hPT10aGlzfHxudWxsIT1lJiZvW2ldLnF1ZXVlIT09ZXx8KG9baV0uYW5pbS5zdG9wKG4pLHQ9ITEsby5zcGxpY2UoaSwxKSk7IXQmJm58fHcuZGVxdWV1ZSh0aGlzLGUpfSl9LGZpbmlzaDpmdW5jdGlvbihlKXtyZXR1cm4hMSE9PWUmJihlPWV8fCJmeCIpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0LG49Si5nZXQodGhpcykscj1uW2UrInF1ZXVlIl0saT1uW2UrInF1ZXVlSG9va3MiXSxvPXcudGltZXJzLGE9cj9yLmxlbmd0aDowO2ZvcihuLmZpbmlzaD0hMCx3LnF1ZXVlKHRoaXMsZSxbXSksaSYmaS5zdG9wJiZpLnN0b3AuY2FsbCh0aGlzLCEwKSx0PW8ubGVuZ3RoO3QtLTspb1t0XS5lbGVtPT09dGhpcyYmb1t0XS5xdWV1ZT09PWUmJihvW3RdLmFuaW0uc3RvcCghMCksby5zcGxpY2UodCwxKSk7Zm9yKHQ9MDt0PGE7dCsrKXJbdF0mJnJbdF0uZmluaXNoJiZyW3RdLmZpbmlzaC5jYWxsKHRoaXMpO2RlbGV0ZSBuLmZpbmlzaH0pfX0pLHcuZWFjaChbInRvZ2dsZSIsInNob3ciLCJoaWRlIl0sZnVuY3Rpb24oZSx0KXt2YXIgbj13LmZuW3RdO3cuZm5bdF09ZnVuY3Rpb24oZSxyLGkpe3JldHVybiBudWxsPT1lfHwiYm9vbGVhbiI9PXR5cGVvZiBlP24uYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZSh1dCh0LCEwKSxlLHIsaSl9fSksdy5lYWNoKHtzbGlkZURvd246dXQoInNob3ciKSxzbGlkZVVwOnV0KCJoaWRlIiksc2xpZGVUb2dnbGU6dXQoInRvZ2dsZSIpLGZhZGVJbjp7b3BhY2l0eToic2hvdyJ9LGZhZGVPdXQ6e29wYWNpdHk6ImhpZGUifSxmYWRlVG9nZ2xlOntvcGFjaXR5OiJ0b2dnbGUifX0sZnVuY3Rpb24oZSx0KXt3LmZuW2VdPWZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gdGhpcy5hbmltYXRlKHQsZSxuLHIpfX0pLHcudGltZXJzPVtdLHcuZngudGljaz1mdW5jdGlvbigpe3ZhciBlLHQ9MCxuPXcudGltZXJzO2ZvcihudD1EYXRlLm5vdygpO3Q8bi5sZW5ndGg7dCsrKShlPW5bdF0pKCl8fG5bdF0hPT1lfHxuLnNwbGljZSh0LS0sMSk7bi5sZW5ndGh8fHcuZnguc3RvcCgpLG50PXZvaWQgMH0sdy5meC50aW1lcj1mdW5jdGlvbihlKXt3LnRpbWVycy5wdXNoKGUpLHcuZnguc3RhcnQoKX0sdy5meC5pbnRlcnZhbD0xMyx3LmZ4LnN0YXJ0PWZ1bmN0aW9uKCl7cnR8fChydD0hMCxhdCgpKX0sdy5meC5zdG9wPWZ1bmN0aW9uKCl7cnQ9bnVsbH0sdy5meC5zcGVlZHM9e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH0sdy5mbi5kZWxheT1mdW5jdGlvbih0LG4pe3JldHVybiB0PXcuZng/dy5meC5zcGVlZHNbdF18fHQ6dCxuPW58fCJmeCIsdGhpcy5xdWV1ZShuLGZ1bmN0aW9uKG4scil7dmFyIGk9ZS5zZXRUaW1lb3V0KG4sdCk7ci5zdG9wPWZ1bmN0aW9uKCl7ZS5jbGVhclRpbWVvdXQoaSl9fSl9LGZ1bmN0aW9uKCl7dmFyIGU9ci5jcmVhdGVFbGVtZW50KCJpbnB1dCIpLHQ9ci5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKS5hcHBlbmRDaGlsZChyLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTtlLnR5cGU9ImNoZWNrYm94IixoLmNoZWNrT249IiIhPT1lLnZhbHVlLGgub3B0U2VsZWN0ZWQ9dC5zZWxlY3RlZCwoZT1yLmNyZWF0ZUVsZW1lbnQoImlucHV0IikpLnZhbHVlPSJ0IixlLnR5cGU9InJhZGlvIixoLnJhZGlvVmFsdWU9InQiPT09ZS52YWx1ZX0oKTt2YXIgZHQsaHQ9dy5leHByLmF0dHJIYW5kbGU7dy5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4geih0aGlzLHcuYXR0cixlLHQsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dy5yZW1vdmVBdHRyKHRoaXMsZSl9KX19KSx3LmV4dGVuZCh7YXR0cjpmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvPWUubm9kZVR5cGU7aWYoMyE9PW8mJjghPT1vJiYyIT09bylyZXR1cm4idW5kZWZpbmVkIj09dHlwZW9mIGUuZ2V0QXR0cmlidXRlP3cucHJvcChlLHQsbik6KDE9PT1vJiZ3LmlzWE1MRG9jKGUpfHwoaT13LmF0dHJIb29rc1t0LnRvTG93ZXJDYXNlKCldfHwody5leHByLm1hdGNoLmJvb2wudGVzdCh0KT9kdDp2b2lkIDApKSx2b2lkIDAhPT1uP251bGw9PT1uP3ZvaWQgdy5yZW1vdmVBdHRyKGUsdCk6aSYmInNldCJpbiBpJiZ2b2lkIDAhPT0ocj1pLnNldChlLG4sdCkpP3I6KGUuc2V0QXR0cmlidXRlKHQsbisiIiksbik6aSYmImdldCJpbiBpJiZudWxsIT09KHI9aS5nZXQoZSx0KSk/cjpudWxsPT0ocj13LmZpbmQuYXR0cihlLHQpKT92b2lkIDA6cil9LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGUsdCl7aWYoIWgucmFkaW9WYWx1ZSYmInJhZGlvIj09PXQmJk4oZSwiaW5wdXQiKSl7dmFyIG49ZS52YWx1ZTtyZXR1cm4gZS5zZXRBdHRyaWJ1dGUoInR5cGUiLHQpLG4mJihlLnZhbHVlPW4pLHR9fX19LHJlbW92ZUF0dHI6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTAsaT10JiZ0Lm1hdGNoKE0pO2lmKGkmJjE9PT1lLm5vZGVUeXBlKXdoaWxlKG49aVtyKytdKWUucmVtb3ZlQXR0cmlidXRlKG4pfX0pLGR0PXtzZXQ6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiExPT09dD93LnJlbW92ZUF0dHIoZSxuKTplLnNldEF0dHJpYnV0ZShuLG4pLG59fSx3LmVhY2gody5leHByLm1hdGNoLmJvb2wuc291cmNlLm1hdGNoKC9cdysvZyksZnVuY3Rpb24oZSx0KXt2YXIgbj1odFt0XXx8dy5maW5kLmF0dHI7aHRbdF09ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG8sYT10LnRvTG93ZXJDYXNlKCk7cmV0dXJuIHJ8fChvPWh0W2FdLGh0W2FdPWksaT1udWxsIT1uKGUsdCxyKT9hOm51bGwsaHRbYV09byksaX19KTt2YXIgZ3Q9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSx5dD0vXig/OmF8YXJlYSkkL2k7dy5mbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oZSx0KXtyZXR1cm4geih0aGlzLHcucHJvcCxlLHQsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlUHJvcDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXNbdy5wcm9wRml4W2VdfHxlXX0pfX0pLHcuZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89ZS5ub2RlVHlwZTtpZigzIT09byYmOCE9PW8mJjIhPT1vKXJldHVybiAxPT09byYmdy5pc1hNTERvYyhlKXx8KHQ9dy5wcm9wRml4W3RdfHx0LGk9dy5wcm9wSG9va3NbdF0pLHZvaWQgMCE9PW4/aSYmInNldCJpbiBpJiZ2b2lkIDAhPT0ocj1pLnNldChlLG4sdCkpP3I6ZVt0XT1uOmkmJiJnZXQiaW4gaSYmbnVsbCE9PShyPWkuZ2V0KGUsdCkpP3I6ZVt0XX0scHJvcEhvb2tzOnt0YWJJbmRleDp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0PXcuZmluZC5hdHRyKGUsInRhYmluZGV4Iik7cmV0dXJuIHQ/cGFyc2VJbnQodCwxMCk6Z3QudGVzdChlLm5vZGVOYW1lKXx8eXQudGVzdChlLm5vZGVOYW1lKSYmZS5ocmVmPzA6LTF9fX0scHJvcEZpeDp7ImZvciI6Imh0bWxGb3IiLCJjbGFzcyI6ImNsYXNzTmFtZSJ9fSksaC5vcHRTZWxlY3RlZHx8KHcucHJvcEhvb2tzLnNlbGVjdGVkPXtnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXJlbnROb2RlO3JldHVybiB0JiZ0LnBhcmVudE5vZGUmJnQucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LG51bGx9LHNldDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7dCYmKHQuc2VsZWN0ZWRJbmRleCx0LnBhcmVudE5vZGUmJnQucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4KX19KSx3LmVhY2goWyJ0YWJJbmRleCIsInJlYWRPbmx5IiwibWF4TGVuZ3RoIiwiY2VsbFNwYWNpbmciLCJjZWxsUGFkZGluZyIsInJvd1NwYW4iLCJjb2xTcGFuIiwidXNlTWFwIiwiZnJhbWVCb3JkZXIiLCJjb250ZW50RWRpdGFibGUiXSxmdW5jdGlvbigpe3cucHJvcEZpeFt0aGlzLnRvTG93ZXJDYXNlKCldPXRoaXN9KTtmdW5jdGlvbiB2dChlKXtyZXR1cm4oZS5tYXRjaChNKXx8W10pLmpvaW4oIiAiKX1mdW5jdGlvbiBtdChlKXtyZXR1cm4gZS5nZXRBdHRyaWJ1dGUmJmUuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIn1mdW5jdGlvbiB4dChlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9lOiJzdHJpbmciPT10eXBlb2YgZT9lLm1hdGNoKE0pfHxbXTpbXX13LmZuLmV4dGVuZCh7YWRkQ2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGksbyxhLHMsdT0wO2lmKGcoZSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbih0KXt3KHRoaXMpLmFkZENsYXNzKGUuY2FsbCh0aGlzLHQsbXQodGhpcykpKX0pO2lmKCh0PXh0KGUpKS5sZW5ndGgpd2hpbGUobj10aGlzW3UrK10paWYoaT1tdChuKSxyPTE9PT1uLm5vZGVUeXBlJiYiICIrdnQoaSkrIiAiKXthPTA7d2hpbGUobz10W2ErK10pci5pbmRleE9mKCIgIitvKyIgIik8MCYmKHIrPW8rIiAiKTtpIT09KHM9dnQocikpJiZuLnNldEF0dHJpYnV0ZSgiY2xhc3MiLHMpfXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLGEscyx1PTA7aWYoZyhlKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3codGhpcykucmVtb3ZlQ2xhc3MoZS5jYWxsKHRoaXMsdCxtdCh0aGlzKSkpfSk7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuYXR0cigiY2xhc3MiLCIiKTtpZigodD14dChlKSkubGVuZ3RoKXdoaWxlKG49dGhpc1t1KytdKWlmKGk9bXQobikscj0xPT09bi5ub2RlVHlwZSYmIiAiK3Z0KGkpKyIgIil7YT0wO3doaWxlKG89dFthKytdKXdoaWxlKHIuaW5kZXhPZigiICIrbysiICIpPi0xKXI9ci5yZXBsYWNlKCIgIitvKyIgIiwiICIpO2khPT0ocz12dChyKSkmJm4uc2V0QXR0cmlidXRlKCJjbGFzcyIscyl9cmV0dXJuIHRoaXN9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGUsdCl7dmFyIG49dHlwZW9mIGUscj0ic3RyaW5nIj09PW58fEFycmF5LmlzQXJyYXkoZSk7cmV0dXJuImJvb2xlYW4iPT10eXBlb2YgdCYmcj90P3RoaXMuYWRkQ2xhc3MoZSk6dGhpcy5yZW1vdmVDbGFzcyhlKTpnKGUpP3RoaXMuZWFjaChmdW5jdGlvbihuKXt3KHRoaXMpLnRvZ2dsZUNsYXNzKGUuY2FsbCh0aGlzLG4sbXQodGhpcyksdCksdCl9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdCxpLG8sYTtpZihyKXtpPTAsbz13KHRoaXMpLGE9eHQoZSk7d2hpbGUodD1hW2krK10pby5oYXNDbGFzcyh0KT9vLnJlbW92ZUNsYXNzKHQpOm8uYWRkQ2xhc3ModCl9ZWxzZSB2b2lkIDAhPT1lJiYiYm9vbGVhbiIhPT1ufHwoKHQ9bXQodGhpcykpJiZKLnNldCh0aGlzLCJfX2NsYXNzTmFtZV9fIix0KSx0aGlzLnNldEF0dHJpYnV0ZSYmdGhpcy5zZXRBdHRyaWJ1dGUoImNsYXNzIix0fHwhMT09PWU/IiI6Si5nZXQodGhpcywiX19jbGFzc05hbWVfXyIpfHwiIikpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0LG4scj0wO3Q9IiAiK2UrIiAiO3doaWxlKG49dGhpc1tyKytdKWlmKDE9PT1uLm5vZGVUeXBlJiYoIiAiK3Z0KG10KG4pKSsiICIpLmluZGV4T2YodCk+LTEpcmV0dXJuITA7cmV0dXJuITF9fSk7dmFyIGJ0PS9cci9nO3cuZm4uZXh0ZW5kKHt2YWw6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGk9dGhpc1swXTt7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gcj1nKGUpLHRoaXMuZWFjaChmdW5jdGlvbihuKXt2YXIgaTsxPT09dGhpcy5ub2RlVHlwZSYmKG51bGw9PShpPXI/ZS5jYWxsKHRoaXMsbix3KHRoaXMpLnZhbCgpKTplKT9pPSIiOiJudW1iZXIiPT10eXBlb2YgaT9pKz0iIjpBcnJheS5pc0FycmF5KGkpJiYoaT13Lm1hcChpLGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lPyIiOmUrIiJ9KSksKHQ9dy52YWxIb29rc1t0aGlzLnR5cGVdfHx3LnZhbEhvb2tzW3RoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0pJiYic2V0ImluIHQmJnZvaWQgMCE9PXQuc2V0KHRoaXMsaSwidmFsdWUiKXx8KHRoaXMudmFsdWU9aSkpfSk7aWYoaSlyZXR1cm4odD13LnZhbEhvb2tzW2kudHlwZV18fHcudmFsSG9va3NbaS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSkmJiJnZXQiaW4gdCYmdm9pZCAwIT09KG49dC5nZXQoaSwidmFsdWUiKSk/bjoic3RyaW5nIj09dHlwZW9mKG49aS52YWx1ZSk/bi5yZXBsYWNlKGJ0LCIiKTpudWxsPT1uPyIiOm59fX0pLHcuZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dy5maW5kLmF0dHIoZSwidmFsdWUiKTtyZXR1cm4gbnVsbCE9dD90OnZ0KHcudGV4dChlKSl9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaT1lLm9wdGlvbnMsbz1lLnNlbGVjdGVkSW5kZXgsYT0ic2VsZWN0LW9uZSI9PT1lLnR5cGUscz1hP251bGw6W10sdT1hP28rMTppLmxlbmd0aDtmb3Iocj1vPDA/dTphP286MDtyPHU7cisrKWlmKCgobj1pW3JdKS5zZWxlY3RlZHx8cj09PW8pJiYhbi5kaXNhYmxlZCYmKCFuLnBhcmVudE5vZGUuZGlzYWJsZWR8fCFOKG4ucGFyZW50Tm9kZSwib3B0Z3JvdXAiKSkpe2lmKHQ9dyhuKS52YWwoKSxhKXJldHVybiB0O3MucHVzaCh0KX1yZXR1cm4gc30sc2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPWUub3B0aW9ucyxvPXcubWFrZUFycmF5KHQpLGE9aS5sZW5ndGg7d2hpbGUoYS0tKSgocj1pW2FdKS5zZWxlY3RlZD13LmluQXJyYXkody52YWxIb29rcy5vcHRpb24uZ2V0KHIpLG8pPi0xKSYmKG49ITApO3JldHVybiBufHwoZS5zZWxlY3RlZEluZGV4PS0xKSxvfX19fSksdy5lYWNoKFsicmFkaW8iLCJjaGVja2JveCJdLGZ1bmN0aW9uKCl7dy52YWxIb29rc1t0aGlzXT17c2V0OmZ1bmN0aW9uKGUsdCl7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gZS5jaGVja2VkPXcuaW5BcnJheSh3KGUpLnZhbCgpLHQpPi0xfX0saC5jaGVja09ufHwody52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PT1lLmdldEF0dHJpYnV0ZSgidmFsdWUiKT8ib24iOmUudmFsdWV9KX0pLGguZm9jdXNpbj0ib25mb2N1c2luImluIGU7dmFyIHd0PS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxUdD1mdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbigpfTt3LmV4dGVuZCh3LmV2ZW50LHt0cmlnZ2VyOmZ1bmN0aW9uKHQsbixpLG8pe3ZhciBhLHMsdSxsLGMscCxkLGgsdj1baXx8cl0sbT1mLmNhbGwodCwidHlwZSIpP3QudHlwZTp0LHg9Zi5jYWxsKHQsIm5hbWVzcGFjZSIpP3QubmFtZXNwYWNlLnNwbGl0KCIuIik6W107aWYocz1oPXU9aT1pfHxyLDMhPT1pLm5vZGVUeXBlJiY4IT09aS5ub2RlVHlwZSYmIXd0LnRlc3QobSt3LmV2ZW50LnRyaWdnZXJlZCkmJihtLmluZGV4T2YoIi4iKT4tMSYmKG09KHg9bS5zcGxpdCgiLiIpKS5zaGlmdCgpLHguc29ydCgpKSxjPW0uaW5kZXhPZigiOiIpPDAmJiJvbiIrbSx0PXRbdy5leHBhbmRvXT90Om5ldyB3LkV2ZW50KG0sIm9iamVjdCI9PXR5cGVvZiB0JiZ0KSx0LmlzVHJpZ2dlcj1vPzI6Myx0Lm5hbWVzcGFjZT14LmpvaW4oIi4iKSx0LnJuYW1lc3BhY2U9dC5uYW1lc3BhY2U/bmV3IFJlZ0V4cCgiKF58XFwuKSIreC5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKTpudWxsLHQucmVzdWx0PXZvaWQgMCx0LnRhcmdldHx8KHQudGFyZ2V0PWkpLG49bnVsbD09bj9bdF06dy5tYWtlQXJyYXkobixbdF0pLGQ9dy5ldmVudC5zcGVjaWFsW21dfHx7fSxvfHwhZC50cmlnZ2VyfHwhMSE9PWQudHJpZ2dlci5hcHBseShpLG4pKSl7aWYoIW8mJiFkLm5vQnViYmxlJiYheShpKSl7Zm9yKGw9ZC5kZWxlZ2F0ZVR5cGV8fG0sd3QudGVzdChsK20pfHwocz1zLnBhcmVudE5vZGUpO3M7cz1zLnBhcmVudE5vZGUpdi5wdXNoKHMpLHU9czt1PT09KGkub3duZXJEb2N1bWVudHx8cikmJnYucHVzaCh1LmRlZmF1bHRWaWV3fHx1LnBhcmVudFdpbmRvd3x8ZSl9YT0wO3doaWxlKChzPXZbYSsrXSkmJiF0LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpaD1zLHQudHlwZT1hPjE/bDpkLmJpbmRUeXBlfHxtLChwPShKLmdldChzLCJldmVudHMiKXx8e30pW3QudHlwZV0mJkouZ2V0KHMsImhhbmRsZSIpKSYmcC5hcHBseShzLG4pLChwPWMmJnNbY10pJiZwLmFwcGx5JiZZKHMpJiYodC5yZXN1bHQ9cC5hcHBseShzLG4pLCExPT09dC5yZXN1bHQmJnQucHJldmVudERlZmF1bHQoKSk7cmV0dXJuIHQudHlwZT1tLG98fHQuaXNEZWZhdWx0UHJldmVudGVkKCl8fGQuX2RlZmF1bHQmJiExIT09ZC5fZGVmYXVsdC5hcHBseSh2LnBvcCgpLG4pfHwhWShpKXx8YyYmZyhpW21dKSYmIXkoaSkmJigodT1pW2NdKSYmKGlbY109bnVsbCksdy5ldmVudC50cmlnZ2VyZWQ9bSx0LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkmJmguYWRkRXZlbnRMaXN0ZW5lcihtLFR0KSxpW21dKCksdC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpJiZoLnJlbW92ZUV2ZW50TGlzdGVuZXIobSxUdCksdy5ldmVudC50cmlnZ2VyZWQ9dm9pZCAwLHUmJihpW2NdPXUpKSx0LnJlc3VsdH19LHNpbXVsYXRlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj13LmV4dGVuZChuZXcgdy5FdmVudCxuLHt0eXBlOmUsaXNTaW11bGF0ZWQ6ITB9KTt3LmV2ZW50LnRyaWdnZXIocixudWxsLHQpfX0pLHcuZm4uZXh0ZW5kKHt0cmlnZ2VyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3cuZXZlbnQudHJpZ2dlcihlLHQsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzWzBdO2lmKG4pcmV0dXJuIHcuZXZlbnQudHJpZ2dlcihlLHQsbiwhMCl9fSksaC5mb2N1c2lufHx3LmVhY2goe2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCJ9LGZ1bmN0aW9uKGUsdCl7dmFyIG49ZnVuY3Rpb24oZSl7dy5ldmVudC5zaW11bGF0ZSh0LGUudGFyZ2V0LHcuZXZlbnQuZml4KGUpKX07dy5ldmVudC5zcGVjaWFsW3RdPXtzZXR1cDpmdW5jdGlvbigpe3ZhciByPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxpPUouYWNjZXNzKHIsdCk7aXx8ci5hZGRFdmVudExpc3RlbmVyKGUsbiwhMCksSi5hY2Nlc3Mocix0LChpfHwwKSsxKX0sdGVhcmRvd246ZnVuY3Rpb24oKXt2YXIgcj10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsaT1KLmFjY2VzcyhyLHQpLTE7aT9KLmFjY2VzcyhyLHQsaSk6KHIucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLG4sITApLEoucmVtb3ZlKHIsdCkpfX19KTt2YXIgQ3Q9ZS5sb2NhdGlvbixFdD1EYXRlLm5vdygpLGt0PS9cPy87dy5wYXJzZVhNTD1mdW5jdGlvbih0KXt2YXIgbjtpZighdHx8InN0cmluZyIhPXR5cGVvZiB0KXJldHVybiBudWxsO3RyeXtuPShuZXcgZS5ET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyh0LCJ0ZXh0L3htbCIpfWNhdGNoKGUpe249dm9pZCAwfXJldHVybiBuJiYhbi5nZXRFbGVtZW50c0J5VGFnTmFtZSgicGFyc2VyZXJyb3IiKS5sZW5ndGh8fHcuZXJyb3IoIkludmFsaWQgWE1MOiAiK3QpLG59O3ZhciBTdD0vXFtcXSQvLER0PS9ccj9cbi9nLE50PS9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSxBdD0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7ZnVuY3Rpb24ganQoZSx0LG4scil7dmFyIGk7aWYoQXJyYXkuaXNBcnJheSh0KSl3LmVhY2godCxmdW5jdGlvbih0LGkpe258fFN0LnRlc3QoZSk/cihlLGkpOmp0KGUrIlsiKygib2JqZWN0Ij09dHlwZW9mIGkmJm51bGwhPWk/dDoiIikrIl0iLGksbixyKX0pO2Vsc2UgaWYobnx8Im9iamVjdCIhPT14KHQpKXIoZSx0KTtlbHNlIGZvcihpIGluIHQpanQoZSsiWyIraSsiXSIsdFtpXSxuLHIpfXcucGFyYW09ZnVuY3Rpb24oZSx0KXt2YXIgbixyPVtdLGk9ZnVuY3Rpb24oZSx0KXt2YXIgbj1nKHQpP3QoKTp0O3Jbci5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChlKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KG51bGw9PW4/IiI6bil9O2lmKEFycmF5LmlzQXJyYXkoZSl8fGUuanF1ZXJ5JiYhdy5pc1BsYWluT2JqZWN0KGUpKXcuZWFjaChlLGZ1bmN0aW9uKCl7aSh0aGlzLm5hbWUsdGhpcy52YWx1ZSl9KTtlbHNlIGZvcihuIGluIGUpanQobixlW25dLHQsaSk7cmV0dXJuIHIuam9pbigiJiIpfSx3LmZuLmV4dGVuZCh7c2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHcucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKX0sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgZT13LnByb3AodGhpcywiZWxlbWVudHMiKTtyZXR1cm4gZT93Lm1ha2VBcnJheShlKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiF3KHRoaXMpLmlzKCI6ZGlzYWJsZWQiKSYmQXQudGVzdCh0aGlzLm5vZGVOYW1lKSYmIU50LnRlc3QoZSkmJih0aGlzLmNoZWNrZWR8fCFwZS50ZXN0KGUpKX0pLm1hcChmdW5jdGlvbihlLHQpe3ZhciBuPXcodGhpcykudmFsKCk7cmV0dXJuIG51bGw9PW4/bnVsbDpBcnJheS5pc0FycmF5KG4pP3cubWFwKG4sZnVuY3Rpb24oZSl7cmV0dXJue25hbWU6dC5uYW1lLHZhbHVlOmUucmVwbGFjZShEdCwiXHJcbiIpfX0pOntuYW1lOnQubmFtZSx2YWx1ZTpuLnJlcGxhY2UoRHQsIlxyXG4iKX19KS5nZXQoKX19KTt2YXIgcXQ9LyUyMC9nLEx0PS8jLiokLyxIdD0vKFs/Jl0pXz1bXiZdKi8sT3Q9L14oLio/KTpbIFx0XSooW15cclxuXSopJC9nbSxQdD0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxNdD0vXig/OkdFVHxIRUFEKSQvLFJ0PS9eXC9cLy8sSXQ9e30sV3Q9e30sJHQ9IiovIi5jb25jYXQoIioiKSxCdD1yLmNyZWF0ZUVsZW1lbnQoImEiKTtCdC5ocmVmPUN0LmhyZWY7ZnVuY3Rpb24gRnQoZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbil7InN0cmluZyIhPXR5cGVvZiB0JiYobj10LHQ9IioiKTt2YXIgcixpPTAsbz10LnRvTG93ZXJDYXNlKCkubWF0Y2goTSl8fFtdO2lmKGcobikpd2hpbGUocj1vW2krK10pIisiPT09clswXT8ocj1yLnNsaWNlKDEpfHwiKiIsKGVbcl09ZVtyXXx8W10pLnVuc2hpZnQobikpOihlW3JdPWVbcl18fFtdKS5wdXNoKG4pfX1mdW5jdGlvbiBfdChlLHQsbixyKXt2YXIgaT17fSxvPWU9PT1XdDtmdW5jdGlvbiBhKHMpe3ZhciB1O3JldHVybiBpW3NdPSEwLHcuZWFjaChlW3NdfHxbXSxmdW5jdGlvbihlLHMpe3ZhciBsPXModCxuLHIpO3JldHVybiJzdHJpbmciIT10eXBlb2YgbHx8b3x8aVtsXT9vPyEodT1sKTp2b2lkIDA6KHQuZGF0YVR5cGVzLnVuc2hpZnQobCksYShsKSwhMSl9KSx1fXJldHVybiBhKHQuZGF0YVR5cGVzWzBdKXx8IWlbIioiXSYmYSgiKiIpfWZ1bmN0aW9uIHp0KGUsdCl7dmFyIG4scixpPXcuYWpheFNldHRpbmdzLmZsYXRPcHRpb25zfHx7fTtmb3IobiBpbiB0KXZvaWQgMCE9PXRbbl0mJigoaVtuXT9lOnJ8fChyPXt9KSlbbl09dFtuXSk7cmV0dXJuIHImJncuZXh0ZW5kKCEwLGUsciksZX1mdW5jdGlvbiBYdChlLHQsbil7dmFyIHIsaSxvLGEscz1lLmNvbnRlbnRzLHU9ZS5kYXRhVHlwZXM7d2hpbGUoIioiPT09dVswXSl1LnNoaWZ0KCksdm9pZCAwPT09ciYmKHI9ZS5taW1lVHlwZXx8dC5nZXRSZXNwb25zZUhlYWRlcigiQ29udGVudC1UeXBlIikpO2lmKHIpZm9yKGkgaW4gcylpZihzW2ldJiZzW2ldLnRlc3Qocikpe3UudW5zaGlmdChpKTticmVha31pZih1WzBdaW4gbilvPXVbMF07ZWxzZXtmb3IoaSBpbiBuKXtpZighdVswXXx8ZS5jb252ZXJ0ZXJzW2krIiAiK3VbMF1dKXtvPWk7YnJlYWt9YXx8KGE9aSl9bz1vfHxhfWlmKG8pcmV0dXJuIG8hPT11WzBdJiZ1LnVuc2hpZnQobyksbltvXX1mdW5jdGlvbiBVdChlLHQsbixyKXt2YXIgaSxvLGEscyx1LGw9e30sYz1lLmRhdGFUeXBlcy5zbGljZSgpO2lmKGNbMV0pZm9yKGEgaW4gZS5jb252ZXJ0ZXJzKWxbYS50b0xvd2VyQ2FzZSgpXT1lLmNvbnZlcnRlcnNbYV07bz1jLnNoaWZ0KCk7d2hpbGUobylpZihlLnJlc3BvbnNlRmllbGRzW29dJiYobltlLnJlc3BvbnNlRmllbGRzW29dXT10KSwhdSYmciYmZS5kYXRhRmlsdGVyJiYodD1lLmRhdGFGaWx0ZXIodCxlLmRhdGFUeXBlKSksdT1vLG89Yy5zaGlmdCgpKWlmKCIqIj09PW8pbz11O2Vsc2UgaWYoIioiIT09dSYmdSE9PW8pe2lmKCEoYT1sW3UrIiAiK29dfHxsWyIqICIrb10pKWZvcihpIGluIGwpaWYoKHM9aS5zcGxpdCgiICIpKVsxXT09PW8mJihhPWxbdSsiICIrc1swXV18fGxbIiogIitzWzBdXSkpeyEwPT09YT9hPWxbaV06ITAhPT1sW2ldJiYobz1zWzBdLGMudW5zaGlmdChzWzFdKSk7YnJlYWt9aWYoITAhPT1hKWlmKGEmJmVbInRocm93cyJdKXQ9YSh0KTtlbHNlIHRyeXt0PWEodCl9Y2F0Y2goZSl7cmV0dXJue3N0YXRlOiJwYXJzZXJlcnJvciIsZXJyb3I6YT9lOiJObyBjb252ZXJzaW9uIGZyb20gIit1KyIgdG8gIitvfX19cmV0dXJue3N0YXRlOiJzdWNjZXNzIixkYXRhOnR9fXcuZXh0ZW5kKHthY3RpdmU6MCxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fSxhamF4U2V0dGluZ3M6e3VybDpDdC5ocmVmLHR5cGU6IkdFVCIsaXNMb2NhbDpQdC50ZXN0KEN0LnByb3RvY29sKSxnbG9iYWw6ITAscHJvY2Vzc0RhdGE6ITAsYXN5bmM6ITAsY29udGVudFR5cGU6ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCIsYWNjZXB0czp7IioiOiR0LHRleHQ6InRleHQvcGxhaW4iLGh0bWw6InRleHQvaHRtbCIseG1sOiJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sIixqc29uOiJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQifSxjb250ZW50czp7eG1sOi9cYnhtbFxiLyxodG1sOi9cYmh0bWwvLGpzb246L1xianNvblxiL30scmVzcG9uc2VGaWVsZHM6e3htbDoicmVzcG9uc2VYTUwiLHRleHQ6InJlc3BvbnNlVGV4dCIsanNvbjoicmVzcG9uc2VKU09OIn0sY29udmVydGVyczp7IiogdGV4dCI6U3RyaW5nLCJ0ZXh0IGh0bWwiOiEwLCJ0ZXh0IGpzb24iOkpTT04ucGFyc2UsInRleHQgeG1sIjp3LnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD96dCh6dChlLHcuYWpheFNldHRpbmdzKSx0KTp6dCh3LmFqYXhTZXR0aW5ncyxlKX0sYWpheFByZWZpbHRlcjpGdChJdCksYWpheFRyYW5zcG9ydDpGdChXdCksYWpheDpmdW5jdGlvbih0LG4peyJvYmplY3QiPT10eXBlb2YgdCYmKG49dCx0PXZvaWQgMCksbj1ufHx7fTt2YXIgaSxvLGEscyx1LGwsYyxmLHAsZCxoPXcuYWpheFNldHVwKHt9LG4pLGc9aC5jb250ZXh0fHxoLHk9aC5jb250ZXh0JiYoZy5ub2RlVHlwZXx8Zy5qcXVlcnkpP3coZyk6dy5ldmVudCx2PXcuRGVmZXJyZWQoKSxtPXcuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLHg9aC5zdGF0dXNDb2RlfHx7fSxiPXt9LFQ9e30sQz0iY2FuY2VsZWQiLEU9e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihlKXt2YXIgdDtpZihjKXtpZighcyl7cz17fTt3aGlsZSh0PU90LmV4ZWMoYSkpc1t0WzFdLnRvTG93ZXJDYXNlKCldPXRbMl19dD1zW2UudG9Mb3dlckNhc2UoKV19cmV0dXJuIG51bGw9PXQ/bnVsbDp0fSxnZXRBbGxSZXNwb25zZUhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gYz9hOm51bGx9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbnVsbD09YyYmKGU9VFtlLnRvTG93ZXJDYXNlKCldPVRbZS50b0xvd2VyQ2FzZSgpXXx8ZSxiW2VdPXQpLHRoaXN9LG92ZXJyaWRlTWltZVR5cGU6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWMmJihoLm1pbWVUeXBlPWUpLHRoaXN9LHN0YXR1c0NvZGU6ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoZSlpZihjKUUuYWx3YXlzKGVbRS5zdGF0dXNdKTtlbHNlIGZvcih0IGluIGUpeFt0XT1beFt0XSxlW3RdXTtyZXR1cm4gdGhpc30sYWJvcnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZXx8QztyZXR1cm4gaSYmaS5hYm9ydCh0KSxrKDAsdCksdGhpc319O2lmKHYucHJvbWlzZShFKSxoLnVybD0oKHR8fGgudXJsfHxDdC5ocmVmKSsiIikucmVwbGFjZShSdCxDdC5wcm90b2NvbCsiLy8iKSxoLnR5cGU9bi5tZXRob2R8fG4udHlwZXx8aC5tZXRob2R8fGgudHlwZSxoLmRhdGFUeXBlcz0oaC5kYXRhVHlwZXx8IioiKS50b0xvd2VyQ2FzZSgpLm1hdGNoKE0pfHxbIiJdLG51bGw9PWguY3Jvc3NEb21haW4pe2w9ci5jcmVhdGVFbGVtZW50KCJhIik7dHJ5e2wuaHJlZj1oLnVybCxsLmhyZWY9bC5ocmVmLGguY3Jvc3NEb21haW49QnQucHJvdG9jb2wrIi8vIitCdC5ob3N0IT1sLnByb3RvY29sKyIvLyIrbC5ob3N0fWNhdGNoKGUpe2guY3Jvc3NEb21haW49ITB9fWlmKGguZGF0YSYmaC5wcm9jZXNzRGF0YSYmInN0cmluZyIhPXR5cGVvZiBoLmRhdGEmJihoLmRhdGE9dy5wYXJhbShoLmRhdGEsaC50cmFkaXRpb25hbCkpLF90KEl0LGgsbixFKSxjKXJldHVybiBFOyhmPXcuZXZlbnQmJmguZ2xvYmFsKSYmMD09dy5hY3RpdmUrKyYmdy5ldmVudC50cmlnZ2VyKCJhamF4U3RhcnQiKSxoLnR5cGU9aC50eXBlLnRvVXBwZXJDYXNlKCksaC5oYXNDb250ZW50PSFNdC50ZXN0KGgudHlwZSksbz1oLnVybC5yZXBsYWNlKEx0LCIiKSxoLmhhc0NvbnRlbnQ/aC5kYXRhJiZoLnByb2Nlc3NEYXRhJiYwPT09KGguY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSYmKGguZGF0YT1oLmRhdGEucmVwbGFjZShxdCwiKyIpKTooZD1oLnVybC5zbGljZShvLmxlbmd0aCksaC5kYXRhJiYoaC5wcm9jZXNzRGF0YXx8InN0cmluZyI9PXR5cGVvZiBoLmRhdGEpJiYobys9KGt0LnRlc3Qobyk/IiYiOiI/IikraC5kYXRhLGRlbGV0ZSBoLmRhdGEpLCExPT09aC5jYWNoZSYmKG89by5yZXBsYWNlKEh0LCIkMSIpLGQ9KGt0LnRlc3Qobyk/IiYiOiI/IikrIl89IitFdCsrK2QpLGgudXJsPW8rZCksaC5pZk1vZGlmaWVkJiYody5sYXN0TW9kaWZpZWRbb10mJkUuc2V0UmVxdWVzdEhlYWRlcigiSWYtTW9kaWZpZWQtU2luY2UiLHcubGFzdE1vZGlmaWVkW29dKSx3LmV0YWdbb10mJkUuc2V0UmVxdWVzdEhlYWRlcigiSWYtTm9uZS1NYXRjaCIsdy5ldGFnW29dKSksKGguZGF0YSYmaC5oYXNDb250ZW50JiYhMSE9PWguY29udGVudFR5cGV8fG4uY29udGVudFR5cGUpJiZFLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsaC5jb250ZW50VHlwZSksRS5zZXRSZXF1ZXN0SGVhZGVyKCJBY2NlcHQiLGguZGF0YVR5cGVzWzBdJiZoLmFjY2VwdHNbaC5kYXRhVHlwZXNbMF1dP2guYWNjZXB0c1toLmRhdGFUeXBlc1swXV0rKCIqIiE9PWguZGF0YVR5cGVzWzBdPyIsICIrJHQrIjsgcT0wLjAxIjoiIik6aC5hY2NlcHRzWyIqIl0pO2ZvcihwIGluIGguaGVhZGVycylFLnNldFJlcXVlc3RIZWFkZXIocCxoLmhlYWRlcnNbcF0pO2lmKGguYmVmb3JlU2VuZCYmKCExPT09aC5iZWZvcmVTZW5kLmNhbGwoZyxFLGgpfHxjKSlyZXR1cm4gRS5hYm9ydCgpO2lmKEM9ImFib3J0IixtLmFkZChoLmNvbXBsZXRlKSxFLmRvbmUoaC5zdWNjZXNzKSxFLmZhaWwoaC5lcnJvciksaT1fdChXdCxoLG4sRSkpe2lmKEUucmVhZHlTdGF0ZT0xLGYmJnkudHJpZ2dlcigiYWpheFNlbmQiLFtFLGhdKSxjKXJldHVybiBFO2guYXN5bmMmJmgudGltZW91dD4wJiYodT1lLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtFLmFib3J0KCJ0aW1lb3V0Iil9LGgudGltZW91dCkpO3RyeXtjPSExLGkuc2VuZChiLGspfWNhdGNoKGUpe2lmKGMpdGhyb3cgZTtrKC0xLGUpfX1lbHNlIGsoLTEsIk5vIFRyYW5zcG9ydCIpO2Z1bmN0aW9uIGsodCxuLHIscyl7dmFyIGwscCxkLGIsVCxDPW47Y3x8KGM9ITAsdSYmZS5jbGVhclRpbWVvdXQodSksaT12b2lkIDAsYT1zfHwiIixFLnJlYWR5U3RhdGU9dD4wPzQ6MCxsPXQ+PTIwMCYmdDwzMDB8fDMwND09PXQsciYmKGI9WHQoaCxFLHIpKSxiPVV0KGgsYixFLGwpLGw/KGguaWZNb2RpZmllZCYmKChUPUUuZ2V0UmVzcG9uc2VIZWFkZXIoIkxhc3QtTW9kaWZpZWQiKSkmJih3Lmxhc3RNb2RpZmllZFtvXT1UKSwoVD1FLmdldFJlc3BvbnNlSGVhZGVyKCJldGFnIikpJiYody5ldGFnW29dPVQpKSwyMDQ9PT10fHwiSEVBRCI9PT1oLnR5cGU/Qz0ibm9jb250ZW50IjozMDQ9PT10P0M9Im5vdG1vZGlmaWVkIjooQz1iLnN0YXRlLHA9Yi5kYXRhLGw9IShkPWIuZXJyb3IpKSk6KGQ9QywhdCYmQ3x8KEM9ImVycm9yIix0PDAmJih0PTApKSksRS5zdGF0dXM9dCxFLnN0YXR1c1RleHQ9KG58fEMpKyIiLGw/di5yZXNvbHZlV2l0aChnLFtwLEMsRV0pOnYucmVqZWN0V2l0aChnLFtFLEMsZF0pLEUuc3RhdHVzQ29kZSh4KSx4PXZvaWQgMCxmJiZ5LnRyaWdnZXIobD8iYWpheFN1Y2Nlc3MiOiJhamF4RXJyb3IiLFtFLGgsbD9wOmRdKSxtLmZpcmVXaXRoKGcsW0UsQ10pLGYmJih5LnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW0UsaF0pLC0tdy5hY3RpdmV8fHcuZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSkpfXJldHVybiBFfSxnZXRKU09OOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdy5nZXQoZSx0LG4sImpzb24iKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHcuZ2V0KGUsdm9pZCAwLHQsInNjcmlwdCIpfX0pLHcuZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihlLHQpe3dbdF09ZnVuY3Rpb24oZSxuLHIsaSl7cmV0dXJuIGcobikmJihpPWl8fHIscj1uLG49dm9pZCAwKSx3LmFqYXgody5leHRlbmQoe3VybDplLHR5cGU6dCxkYXRhVHlwZTppLGRhdGE6bixzdWNjZXNzOnJ9LHcuaXNQbGFpbk9iamVjdChlKSYmZSkpfX0pLHcuX2V2YWxVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuIHcuYWpheCh7dXJsOmUsdHlwZToiR0VUIixkYXRhVHlwZToic2NyaXB0IixjYWNoZTohMCxhc3luYzohMSxnbG9iYWw6ITEsInRocm93cyI6ITB9KX0sdy5mbi5leHRlbmQoe3dyYXBBbGw6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHRoaXNbMF0mJihnKGUpJiYoZT1lLmNhbGwodGhpc1swXSkpLHQ9dyhlLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApLHRoaXNbMF0ucGFyZW50Tm9kZSYmdC5pbnNlcnRCZWZvcmUodGhpc1swXSksdC5tYXAoZnVuY3Rpb24oKXt2YXIgZT10aGlzO3doaWxlKGUuZmlyc3RFbGVtZW50Q2hpbGQpZT1lLmZpcnN0RWxlbWVudENoaWxkO3JldHVybiBlfSkuYXBwZW5kKHRoaXMpKSx0aGlzfSx3cmFwSW5uZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGcoZSk/dGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3codGhpcykud3JhcElubmVyKGUuY2FsbCh0aGlzLHQpKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PXcodGhpcyksbj10LmNvbnRlbnRzKCk7bi5sZW5ndGg/bi53cmFwQWxsKGUpOnQuYXBwZW5kKGUpfSl9LHdyYXA6ZnVuY3Rpb24oZSl7dmFyIHQ9ZyhlKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKG4pe3codGhpcykud3JhcEFsbCh0P2UuY2FsbCh0aGlzLG4pOmUpfSl9LHVud3JhcDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wYXJlbnQoZSkubm90KCJib2R5IikuZWFjaChmdW5jdGlvbigpe3codGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKX0pLHRoaXN9fSksdy5leHByLnBzZXVkb3MuaGlkZGVuPWZ1bmN0aW9uKGUpe3JldHVybiF3LmV4cHIucHNldWRvcy52aXNpYmxlKGUpfSx3LmV4cHIucHNldWRvcy52aXNpYmxlPWZ1bmN0aW9uKGUpe3JldHVybiEhKGUub2Zmc2V0V2lkdGh8fGUub2Zmc2V0SGVpZ2h0fHxlLmdldENsaWVudFJlY3RzKCkubGVuZ3RoKX0sdy5hamF4U2V0dGluZ3MueGhyPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiBuZXcgZS5YTUxIdHRwUmVxdWVzdH1jYXRjaChlKXt9fTt2YXIgVnQ9ezA6MjAwLDEyMjM6MjA0fSxHdD13LmFqYXhTZXR0aW5ncy54aHIoKTtoLmNvcnM9ISFHdCYmIndpdGhDcmVkZW50aWFscyJpbiBHdCxoLmFqYXg9R3Q9ISFHdCx3LmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24odCl7dmFyIG4scjtpZihoLmNvcnN8fEd0JiYhdC5jcm9zc0RvbWFpbilyZXR1cm57c2VuZDpmdW5jdGlvbihpLG8pe3ZhciBhLHM9dC54aHIoKTtpZihzLm9wZW4odC50eXBlLHQudXJsLHQuYXN5bmMsdC51c2VybmFtZSx0LnBhc3N3b3JkKSx0LnhockZpZWxkcylmb3IoYSBpbiB0LnhockZpZWxkcylzW2FdPXQueGhyRmllbGRzW2FdO3QubWltZVR5cGUmJnMub3ZlcnJpZGVNaW1lVHlwZSYmcy5vdmVycmlkZU1pbWVUeXBlKHQubWltZVR5cGUpLHQuY3Jvc3NEb21haW58fGlbIlgtUmVxdWVzdGVkLVdpdGgiXXx8KGlbIlgtUmVxdWVzdGVkLVdpdGgiXT0iWE1MSHR0cFJlcXVlc3QiKTtmb3IoYSBpbiBpKXMuc2V0UmVxdWVzdEhlYWRlcihhLGlbYV0pO249ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7biYmKG49cj1zLm9ubG9hZD1zLm9uZXJyb3I9cy5vbmFib3J0PXMub250aW1lb3V0PXMub25yZWFkeXN0YXRlY2hhbmdlPW51bGwsImFib3J0Ij09PWU/cy5hYm9ydCgpOiJlcnJvciI9PT1lPyJudW1iZXIiIT10eXBlb2Ygcy5zdGF0dXM/bygwLCJlcnJvciIpOm8ocy5zdGF0dXMscy5zdGF0dXNUZXh0KTpvKFZ0W3Muc3RhdHVzXXx8cy5zdGF0dXMscy5zdGF0dXNUZXh0LCJ0ZXh0IiE9PShzLnJlc3BvbnNlVHlwZXx8InRleHQiKXx8InN0cmluZyIhPXR5cGVvZiBzLnJlc3BvbnNlVGV4dD97YmluYXJ5OnMucmVzcG9uc2V9Ont0ZXh0OnMucmVzcG9uc2VUZXh0fSxzLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSl9fSxzLm9ubG9hZD1uKCkscj1zLm9uZXJyb3I9cy5vbnRpbWVvdXQ9bigiZXJyb3IiKSx2b2lkIDAhPT1zLm9uYWJvcnQ/cy5vbmFib3J0PXI6cy5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXs0PT09cy5yZWFkeVN0YXRlJiZlLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtuJiZyKCl9KX0sbj1uKCJhYm9ydCIpO3RyeXtzLnNlbmQodC5oYXNDb250ZW50JiZ0LmRhdGF8fG51bGwpfWNhdGNoKGUpe2lmKG4pdGhyb3cgZX19LGFib3J0OmZ1bmN0aW9uKCl7biYmbigpfX19KSx3LmFqYXhQcmVmaWx0ZXIoZnVuY3Rpb24oZSl7ZS5jcm9zc0RvbWFpbiYmKGUuY29udGVudHMuc2NyaXB0PSExKX0pLHcuYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6InRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0In0sY29udGVudHM6e3NjcmlwdDovXGIoPzpqYXZhfGVjbWEpc2NyaXB0XGIvfSxjb252ZXJ0ZXJzOnsidGV4dCBzY3JpcHQiOmZ1bmN0aW9uKGUpe3JldHVybiB3Lmdsb2JhbEV2YWwoZSksZX19fSksdy5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUuY2FjaGUmJihlLmNhY2hlPSExKSxlLmNyb3NzRG9tYWluJiYoZS50eXBlPSJHRVQiKX0pLHcuYWpheFRyYW5zcG9ydCgic2NyaXB0IixmdW5jdGlvbihlKXtpZihlLmNyb3NzRG9tYWluKXt2YXIgdCxuO3JldHVybntzZW5kOmZ1bmN0aW9uKGksbyl7dD13KCI8c2NyaXB0PiIpLnByb3Aoe2NoYXJzZXQ6ZS5zY3JpcHRDaGFyc2V0LHNyYzplLnVybH0pLm9uKCJsb2FkIGVycm9yIixuPWZ1bmN0aW9uKGUpe3QucmVtb3ZlKCksbj1udWxsLGUmJm8oImVycm9yIj09PWUudHlwZT80MDQ6MjAwLGUudHlwZSl9KSxyLmhlYWQuYXBwZW5kQ2hpbGQodFswXSl9LGFib3J0OmZ1bmN0aW9uKCl7biYmbigpfX19fSk7dmFyIFl0PVtdLFF0PS8oPSlcPyg/PSZ8JCl8XD9cPy87dy5hamF4U2V0dXAoe2pzb25wOiJjYWxsYmFjayIsanNvbnBDYWxsYmFjazpmdW5jdGlvbigpe3ZhciBlPVl0LnBvcCgpfHx3LmV4cGFuZG8rIl8iK0V0Kys7cmV0dXJuIHRoaXNbZV09ITAsZX19KSx3LmFqYXhQcmVmaWx0ZXIoImpzb24ganNvbnAiLGZ1bmN0aW9uKHQsbixyKXt2YXIgaSxvLGEscz0hMSE9PXQuanNvbnAmJihRdC50ZXN0KHQudXJsKT8idXJsIjoic3RyaW5nIj09dHlwZW9mIHQuZGF0YSYmMD09PSh0LmNvbnRlbnRUeXBlfHwiIikuaW5kZXhPZigiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikmJlF0LnRlc3QodC5kYXRhKSYmImRhdGEiKTtpZihzfHwianNvbnAiPT09dC5kYXRhVHlwZXNbMF0pcmV0dXJuIGk9dC5qc29ucENhbGxiYWNrPWcodC5qc29ucENhbGxiYWNrKT90Lmpzb25wQ2FsbGJhY2soKTp0Lmpzb25wQ2FsbGJhY2sscz90W3NdPXRbc10ucmVwbGFjZShRdCwiJDEiK2kpOiExIT09dC5qc29ucCYmKHQudXJsKz0oa3QudGVzdCh0LnVybCk/IiYiOiI/IikrdC5qc29ucCsiPSIraSksdC5jb252ZXJ0ZXJzWyJzY3JpcHQganNvbiJdPWZ1bmN0aW9uKCl7cmV0dXJuIGF8fHcuZXJyb3IoaSsiIHdhcyBub3QgY2FsbGVkIiksYVswXX0sdC5kYXRhVHlwZXNbMF09Impzb24iLG89ZVtpXSxlW2ldPWZ1bmN0aW9uKCl7YT1hcmd1bWVudHN9LHIuYWx3YXlzKGZ1bmN0aW9uKCl7dm9pZCAwPT09bz93KGUpLnJlbW92ZVByb3AoaSk6ZVtpXT1vLHRbaV0mJih0Lmpzb25wQ2FsbGJhY2s9bi5qc29ucENhbGxiYWNrLFl0LnB1c2goaSkpLGEmJmcobykmJm8oYVswXSksYT1vPXZvaWQgMH0pLCJzY3JpcHQifSksaC5jcmVhdGVIVE1MRG9jdW1lbnQ9ZnVuY3Rpb24oKXt2YXIgZT1yLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIikuYm9keTtyZXR1cm4gZS5pbm5lckhUTUw9Ijxmb3JtPjwvZm9ybT48Zm9ybT48L2Zvcm0+IiwyPT09ZS5jaGlsZE5vZGVzLmxlbmd0aH0oKSx3LnBhcnNlSFRNTD1mdW5jdGlvbihlLHQsbil7aWYoInN0cmluZyIhPXR5cGVvZiBlKXJldHVybltdOyJib29sZWFuIj09dHlwZW9mIHQmJihuPXQsdD0hMSk7dmFyIGksbyxhO3JldHVybiB0fHwoaC5jcmVhdGVIVE1MRG9jdW1lbnQ/KChpPSh0PXIuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKSkuY3JlYXRlRWxlbWVudCgiYmFzZSIpKS5ocmVmPXIubG9jYXRpb24uaHJlZix0LmhlYWQuYXBwZW5kQ2hpbGQoaSkpOnQ9ciksbz1BLmV4ZWMoZSksYT0hbiYmW10sbz9bdC5jcmVhdGVFbGVtZW50KG9bMV0pXToobz14ZShbZV0sdCxhKSxhJiZhLmxlbmd0aCYmdyhhKS5yZW1vdmUoKSx3Lm1lcmdlKFtdLG8uY2hpbGROb2RlcykpfSx3LmZuLmxvYWQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhPXRoaXMscz1lLmluZGV4T2YoIiAiKTtyZXR1cm4gcz4tMSYmKHI9dnQoZS5zbGljZShzKSksZT1lLnNsaWNlKDAscykpLGcodCk/KG49dCx0PXZvaWQgMCk6dCYmIm9iamVjdCI9PXR5cGVvZiB0JiYoaT0iUE9TVCIpLGEubGVuZ3RoPjAmJncuYWpheCh7dXJsOmUsdHlwZTppfHwiR0VUIixkYXRhVHlwZToiaHRtbCIsZGF0YTp0fSkuZG9uZShmdW5jdGlvbihlKXtvPWFyZ3VtZW50cyxhLmh0bWwocj93KCI8ZGl2PiIpLmFwcGVuZCh3LnBhcnNlSFRNTChlKSkuZmluZChyKTplKX0pLmFsd2F5cyhuJiZmdW5jdGlvbihlLHQpe2EuZWFjaChmdW5jdGlvbigpe24uYXBwbHkodGhpcyxvfHxbZS5yZXNwb25zZVRleHQsdCxlXSl9KX0pLHRoaXN9LHcuZWFjaChbImFqYXhTdGFydCIsImFqYXhTdG9wIiwiYWpheENvbXBsZXRlIiwiYWpheEVycm9yIiwiYWpheFN1Y2Nlc3MiLCJhamF4U2VuZCJdLGZ1bmN0aW9uKGUsdCl7dy5mblt0XT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5vbih0LGUpfX0pLHcuZXhwci5wc2V1ZG9zLmFuaW1hdGVkPWZ1bmN0aW9uKGUpe3JldHVybiB3LmdyZXAody50aW1lcnMsZnVuY3Rpb24odCl7cmV0dXJuIGU9PT10LmVsZW19KS5sZW5ndGh9LHcub2Zmc2V0PXtzZXRPZmZzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHMsdSxsLGM9dy5jc3MoZSwicG9zaXRpb24iKSxmPXcoZSkscD17fTsic3RhdGljIj09PWMmJihlLnN0eWxlLnBvc2l0aW9uPSJyZWxhdGl2ZSIpLHM9Zi5vZmZzZXQoKSxvPXcuY3NzKGUsInRvcCIpLHU9dy5jc3MoZSwibGVmdCIpLChsPSgiYWJzb2x1dGUiPT09Y3x8ImZpeGVkIj09PWMpJiYobyt1KS5pbmRleE9mKCJhdXRvIik+LTEpPyhhPShyPWYucG9zaXRpb24oKSkudG9wLGk9ci5sZWZ0KTooYT1wYXJzZUZsb2F0KG8pfHwwLGk9cGFyc2VGbG9hdCh1KXx8MCksZyh0KSYmKHQ9dC5jYWxsKGUsbix3LmV4dGVuZCh7fSxzKSkpLG51bGwhPXQudG9wJiYocC50b3A9dC50b3Atcy50b3ArYSksbnVsbCE9dC5sZWZ0JiYocC5sZWZ0PXQubGVmdC1zLmxlZnQraSksInVzaW5nImluIHQ/dC51c2luZy5jYWxsKGUscCk6Zi5jc3MocCl9fSx3LmZuLmV4dGVuZCh7b2Zmc2V0OmZ1bmN0aW9uKGUpe2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHZvaWQgMD09PWU/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24odCl7dy5vZmZzZXQuc2V0T2Zmc2V0KHRoaXMsZSx0KX0pO3ZhciB0LG4scj10aGlzWzBdO2lmKHIpcmV0dXJuIHIuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGg/KHQ9ci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxuPXIub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldyx7dG9wOnQudG9wK24ucGFnZVlPZmZzZXQsbGVmdDp0LmxlZnQrbi5wYWdlWE9mZnNldH0pOnt0b3A6MCxsZWZ0OjB9fSxwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBlLHQsbixyPXRoaXNbMF0saT17dG9wOjAsbGVmdDowfTtpZigiZml4ZWQiPT09dy5jc3MociwicG9zaXRpb24iKSl0PXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7ZWxzZXt0PXRoaXMub2Zmc2V0KCksbj1yLm93bmVyRG9jdW1lbnQsZT1yLm9mZnNldFBhcmVudHx8bi5kb2N1bWVudEVsZW1lbnQ7d2hpbGUoZSYmKGU9PT1uLmJvZHl8fGU9PT1uLmRvY3VtZW50RWxlbWVudCkmJiJzdGF0aWMiPT09dy5jc3MoZSwicG9zaXRpb24iKSllPWUucGFyZW50Tm9kZTtlJiZlIT09ciYmMT09PWUubm9kZVR5cGUmJigoaT13KGUpLm9mZnNldCgpKS50b3ArPXcuY3NzKGUsImJvcmRlclRvcFdpZHRoIiwhMCksaS5sZWZ0Kz13LmNzcyhlLCJib3JkZXJMZWZ0V2lkdGgiLCEwKSl9cmV0dXJue3RvcDp0LnRvcC1pLnRvcC13LmNzcyhyLCJtYXJnaW5Ub3AiLCEwKSxsZWZ0OnQubGVmdC1pLmxlZnQtdy5jc3MociwibWFyZ2luTGVmdCIsITApfX19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlPXRoaXMub2Zmc2V0UGFyZW50O3doaWxlKGUmJiJzdGF0aWMiPT09dy5jc3MoZSwicG9zaXRpb24iKSllPWUub2Zmc2V0UGFyZW50O3JldHVybiBlfHxiZX0pfX0pLHcuZWFjaCh7c2Nyb2xsTGVmdDoicGFnZVhPZmZzZXQiLHNjcm9sbFRvcDoicGFnZVlPZmZzZXQifSxmdW5jdGlvbihlLHQpe3ZhciBuPSJwYWdlWU9mZnNldCI9PT10O3cuZm5bZV09ZnVuY3Rpb24ocil7cmV0dXJuIHoodGhpcyxmdW5jdGlvbihlLHIsaSl7dmFyIG87aWYoeShlKT9vPWU6OT09PWUubm9kZVR5cGUmJihvPWUuZGVmYXVsdFZpZXcpLHZvaWQgMD09PWkpcmV0dXJuIG8/b1t0XTplW3JdO28/by5zY3JvbGxUbyhuP28ucGFnZVhPZmZzZXQ6aSxuP2k6by5wYWdlWU9mZnNldCk6ZVtyXT1pfSxlLHIsYXJndW1lbnRzLmxlbmd0aCl9fSksdy5lYWNoKFsidG9wIiwibGVmdCJdLGZ1bmN0aW9uKGUsdCl7dy5jc3NIb29rc1t0XT1fZShoLnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oZSxuKXtpZihuKXJldHVybiBuPUZlKGUsdCksV2UudGVzdChuKT93KGUpLnBvc2l0aW9uKClbdF0rInB4IjpufSl9KSx3LmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihlLHQpe3cuZWFjaCh7cGFkZGluZzoiaW5uZXIiK2UsY29udGVudDp0LCIiOiJvdXRlciIrZX0sZnVuY3Rpb24obixyKXt3LmZuW3JdPWZ1bmN0aW9uKGksbyl7dmFyIGE9YXJndW1lbnRzLmxlbmd0aCYmKG58fCJib29sZWFuIiE9dHlwZW9mIGkpLHM9bnx8KCEwPT09aXx8ITA9PT1vPyJtYXJnaW4iOiJib3JkZXIiKTtyZXR1cm4geih0aGlzLGZ1bmN0aW9uKHQsbixpKXt2YXIgbztyZXR1cm4geSh0KT8wPT09ci5pbmRleE9mKCJvdXRlciIpP3RbImlubmVyIitlXTp0LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsiY2xpZW50IitlXTo5PT09dC5ub2RlVHlwZT8obz10LmRvY3VtZW50RWxlbWVudCxNYXRoLm1heCh0LmJvZHlbInNjcm9sbCIrZV0sb1sic2Nyb2xsIitlXSx0LmJvZHlbIm9mZnNldCIrZV0sb1sib2Zmc2V0IitlXSxvWyJjbGllbnQiK2VdKSk6dm9pZCAwPT09aT93LmNzcyh0LG4scyk6dy5zdHlsZSh0LG4saSxzKX0sdCxhP2k6dm9pZCAwLGEpfX0pfSksdy5lYWNoKCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgcmVzaXplIHNjcm9sbCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGNvbnRleHRtZW51Ii5zcGxpdCgiICIpLGZ1bmN0aW9uKGUsdCl7dy5mblt0XT1mdW5jdGlvbihlLG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbih0LG51bGwsZSxuKTp0aGlzLnRyaWdnZXIodCl9fSksdy5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMubW91c2VlbnRlcihlKS5tb3VzZWxlYXZlKHR8fGUpfX0pLHcuZm4uZXh0ZW5kKHtiaW5kOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5vbihlLG51bGwsdCxuKX0sdW5iaW5kOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMub2ZmKGUsbnVsbCx0KX0sZGVsZWdhdGU6ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIHRoaXMub24odCxlLG4scil9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihlLCIqKiIpOnRoaXMub2ZmKHQsZXx8IioqIixuKX19KSx3LnByb3h5PWZ1bmN0aW9uKGUsdCl7dmFyIG4scixpO2lmKCJzdHJpbmciPT10eXBlb2YgdCYmKG49ZVt0XSx0PWUsZT1uKSxnKGUpKXJldHVybiByPW8uY2FsbChhcmd1bWVudHMsMiksaT1mdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHR8fHRoaXMsci5jb25jYXQoby5jYWxsKGFyZ3VtZW50cykpKX0saS5ndWlkPWUuZ3VpZD1lLmd1aWR8fHcuZ3VpZCsrLGl9LHcuaG9sZFJlYWR5PWZ1bmN0aW9uKGUpe2U/dy5yZWFkeVdhaXQrKzp3LnJlYWR5KCEwKX0sdy5pc0FycmF5PUFycmF5LmlzQXJyYXksdy5wYXJzZUpTT049SlNPTi5wYXJzZSx3Lm5vZGVOYW1lPU4sdy5pc0Z1bmN0aW9uPWcsdy5pc1dpbmRvdz15LHcuY2FtZWxDYXNlPUcsdy50eXBlPXgsdy5ub3c9RGF0ZS5ub3csdy5pc051bWVyaWM9ZnVuY3Rpb24oZSl7dmFyIHQ9dy50eXBlKGUpO3JldHVybigibnVtYmVyIj09PXR8fCJzdHJpbmciPT09dCkmJiFpc05hTihlLXBhcnNlRmxvYXQoZSkpfSwiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoImpxdWVyeSIsW10sZnVuY3Rpb24oKXtyZXR1cm4gd30pO3ZhciBKdD1lLmpRdWVyeSxLdD1lLiQ7cmV0dXJuIHcubm9Db25mbGljdD1mdW5jdGlvbih0KXtyZXR1cm4gZS4kPT09dyYmKGUuJD1LdCksdCYmZS5qUXVlcnk9PT13JiYoZS5qUXVlcnk9SnQpLHd9LHR8fChlLmpRdWVyeT1lLiQ9dyksd30pOwo="}]},{"name":"淘宝、天猫、聚划算、京东、苏宁、唯品会、耐克、魅族、联想、华硕抢购助手v2","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":["gwdang.com","ubja.vip","alicdn.com","api.m.taobao.com","jd.com","quan.suning.com"],"orig_excludes":[],"orig_includes":["/http(?:s|)://(?:detail|item)\\.(?:taobao|tmall)\\.(?:[^./]+)/item.htm/","https://chaoshi.tmall.com/*","https://chaoshi.detail.tmall.com/*","https://detail.tmall.hk/*","https://buy.tmall.com/order/*","https://buy.taobao.com/*","https://cart.tmall.com/*","https://cart.taobao.com/*","https://s.click.taobao.com*","https://buy.tmall.com/order/confirmOrderWap.htm*","https://buy.taobao.com/auction/order/confirm_order.htm*","https://buy.tmall.com/auction/order/confirm_order.htm*","https://buy.liangxinyao.com/order/confirm_order.htm*","https://detail.liangxinyao.com/*","https://cart.jd.com/*","*/item.jd.com/*","*//item.jd.hk/*","https://trade.jd.com/shopping/order/*","https://trade.jd.hk/shopping/order/*","https://plogin.m.jd.com*","https://m.jd.com/*","https://wqdeal.jd.com*","https://wqs.jd.com*","https://wq.jd.com/*","https://marathon.jd.com*","https://union-click.jd.com*","*/product.suning.com/*","https://shopping.suning.com/cart.do*","https://shopping.suning.com/order.do*","https://shopping.hksuning.com*","https://product.hksuning.com*","https://detail.meizu.com/item*","https://ordercenter.meizu.com/order/*","https://*.lenovo.com.cn/product/*","https://buy.lenovo.com.cn/checkout/*","https://www.asus.com.cn/store/product*","https://www.asus.com.cn/store/checkout/*","https://detail.vip.com/*","https://cart.vip.com/*","https://checkout.vip.com/*","https://www.nike.com/cn/t/*","https://www.nike.com/cn/zh-Hans/cart*","https://www.nike.com/cn/checkout*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"Acyce":"s9000","AutoSubOdr":"n1","goBtn":"n1","goodsId":"s0","goodsNum":"s1","jlmd":"n1","mqmd":"n0","qzxd":"n0","ref":"n0"},"ts":1604191475369},"enabled":false,"position":5,"file_url":"https://greasyfork.org/scripts/393577-%E6%B7%98%E5%AE%9D-%E5%A4%A9%E7%8C%AB-%E8%81%9A%E5%88%92%E7%AE%97-%E4%BA%AC%E4%B8%9C-%E8%8B%8F%E5%AE%81-%E5%94%AF%E5%93%81%E4%BC%9A-%E8%80%90%E5%85%8B-%E9%AD%85%E6%97%8F-%E8%81%94%E6%83%B3-%E5%8D%8E%E7%A1%95%E6%8A%A2%E8%B4%AD%E5%8A%A9%E6%89%8Bv2/code/%E6%B7%98%E5%AE%9D%E3%80%81%E5%A4%A9%E7%8C%AB%E3%80%81%E8%81%9A%E5%88%92%E7%AE%97%E3%80%81%E4%BA%AC%E4%B8%9C%E3%80%81%E8%8B%8F%E5%AE%81%E3%80%81%E5%94%AF%E5%93%81%E4%BC%9A%E3%80%81%E8%80%90%E5%85%8B%E3%80%81%E9%AD%85%E6%97%8F%E3%80%81%E8%81%94%E6%83%B3%E3%80%81%E5%8D%8E%E7%A1%95%E6%8A%A2%E8%B4%AD%E5%8A%A9%E6%89%8Bv2.user.js","uuid":"78ec173f-8be1-42de-b33f-afdd22c37572","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDmt5jlrp3jgIHlpKnnjKvjgIHogZrliJLnrpfjgIHkuqzkuJzjgIHoi4/lroHjgIHllK/lk4HkvJrjgIHogJDlhYvjgIHprYXml4/jgIHogZTmg7PjgIHljY7noZXmiqLotK3liqnmiYt2MgovLyBAbmFtZXNwYWNlICAgIEFpY2UuRnVfZ3dUb29scwovLyBAdmVyc2lvbiAgICAgIDAuMS42MwovLyBAZGVzY3JpcHRpb24gIOa3mOWuneOAgeWkqeeMq+OAgeiBmuWIkueul+OAgeS6rOS4nOOAgeiLj+WugeOAgeWUr+WTgeS8muOAgeiAkOWFi+OAgemtheaXj+iHquWKqOaKoui0reW3peWFt++8jOaUr+aMgea3mOWuneOAgeWkqeeMq+OAgeiBmuWIkueul+OAgeS6rOS4nOOAgeiLj+WugeaYk+i0reOAgeiLj+Wugemmmea4r+OAgeWUr+WTgeS8muOAgeiAkOWFi+OAgemtheaXj+OAgeiBlOaDs+OAgeWNjuehleeahOWVhuWTgemhtemdouaKoui0reOAgei0reeJqei9puaKoui0re+8jOWcqOmdnuaKoui0remhtemdouaUr+aMgea3mOWuneOAgeWkqeeMq+OAgeS6rOS4nOOAgeiLj+WugeaYk+i0remakOiXj+S8mOaDoOWIuOmihuWPluWPiuWOhuWPsuS7t+agvOafpeeci+OAggovLyBAaW5jbHVkZSAgICAgL2h0dHAoPzpzfCk6Ly8oPzpkZXRhaWx8aXRlbSlcLig/OnRhb2Jhb3x0bWFsbClcLig/OlteLi9dKykvaXRlbS5odG0vCi8vIEBpbmNsdWRlICAgICBodHRwczovL2NoYW9zaGkudG1hbGwuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vY2hhb3NoaS5kZXRhaWwudG1hbGwuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vZGV0YWlsLnRtYWxsLmhrLyoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vYnV5LnRtYWxsLmNvbS9vcmRlci8qCi8vIEBpbmNsdWRlICAgICBodHRwczovL2J1eS50YW9iYW8uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vY2FydC50bWFsbC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cHM6Ly9jYXJ0LnRhb2Jhby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cHM6Ly9zLmNsaWNrLnRhb2Jhby5jb20qCi8vIEBpbmNsdWRlICAgICBodHRwczovL2J1eS50bWFsbC5jb20vb3JkZXIvY29uZmlybU9yZGVyV2FwLmh0bSoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vYnV5LnRhb2Jhby5jb20vYXVjdGlvbi9vcmRlci9jb25maXJtX29yZGVyLmh0bSoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vYnV5LnRtYWxsLmNvbS9hdWN0aW9uL29yZGVyL2NvbmZpcm1fb3JkZXIuaHRtKgovLyBAaW5jbHVkZSAgICAgaHR0cHM6Ly9idXkubGlhbmd4aW55YW8uY29tL29yZGVyL2NvbmZpcm1fb3JkZXIuaHRtKgovLyBAaW5jbHVkZSAgICAgaHR0cHM6Ly9kZXRhaWwubGlhbmd4aW55YW8uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vY2FydC5qZC5jb20vKgovLyBAaW5jbHVkZSAgICAgKi9pdGVtLmpkLmNvbS8qCi8vIEBpbmNsdWRlICAgICAqLy9pdGVtLmpkLmhrLyoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vdHJhZGUuamQuY29tL3Nob3BwaW5nL29yZGVyLyoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vdHJhZGUuamQuaGsvc2hvcHBpbmcvb3JkZXIvKgovLyBAaW5jbHVkZSAgICAgaHR0cHM6Ly9wbG9naW4ubS5qZC5jb20qCi8vIEBpbmNsdWRlICAgICBodHRwczovL20uamQuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vd3FkZWFsLmpkLmNvbSoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vd3FzLmpkLmNvbSoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vd3EuamQuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vbWFyYXRob24uamQuY29tKgovLyBAaW5jbHVkZSAgICAgaHR0cHM6Ly91bmlvbi1jbGljay5qZC5jb20qCi8vIEBpbmNsdWRlICAgICAqL3Byb2R1Y3Quc3VuaW5nLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwczovL3Nob3BwaW5nLnN1bmluZy5jb20vY2FydC5kbyoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vc2hvcHBpbmcuc3VuaW5nLmNvbS9vcmRlci5kbyoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vc2hvcHBpbmcuaGtzdW5pbmcuY29tKgovLyBAaW5jbHVkZSAgICAgaHR0cHM6Ly9wcm9kdWN0Lmhrc3VuaW5nLmNvbSoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vZGV0YWlsLm1laXp1LmNvbS9pdGVtKgovLyBAaW5jbHVkZSAgICAgaHR0cHM6Ly9vcmRlcmNlbnRlci5tZWl6dS5jb20vb3JkZXIvKgovLyBAaW5jbHVkZSAgICAgaHR0cHM6Ly8qLmxlbm92by5jb20uY24vcHJvZHVjdC8qCi8vIEBpbmNsdWRlICAgICBodHRwczovL2J1eS5sZW5vdm8uY29tLmNuL2NoZWNrb3V0LyoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vd3d3LmFzdXMuY29tLmNuL3N0b3JlL3Byb2R1Y3QqCi8vIEBpbmNsdWRlICAgICBodHRwczovL3d3dy5hc3VzLmNvbS5jbi9zdG9yZS9jaGVja291dC8qCi8vIEBpbmNsdWRlICAgICBodHRwczovL2RldGFpbC52aXAuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vY2FydC52aXAuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vY2hlY2tvdXQudmlwLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwczovL3d3dy5uaWtlLmNvbS9jbi90LyoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vd3d3Lm5pa2UuY29tL2NuL3poLUhhbnMvY2FydCoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vd3d3Lm5pa2UuY29tL2NuL2NoZWNrb3V0KgovLyBAcmVxdWlyZSAgICAgaHR0cDovL2xpYnMuYmFpZHUuY29tL2pxdWVyeS8yLjAuMC9qcXVlcnkubWluLmpzCi8vIEByZXF1aXJlICAgICBodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2pxdWVyeUAzLjIuMS9kaXN0L2pxdWVyeS5taW4uanMKLy8gQHJlcXVpcmUgICAgIGh0dHBzOi8vY2RuLnN0YXRpY2ZpbGUub3JnL2pxdWVyeS8xLjEyLjQvanF1ZXJ5Lm1pbi5qcwovLyBAZ3JhbnQgICAgICAgR01feG1saHR0cFJlcXVlc3QKLy8gQGdyYW50ICAgICAgIEdNX3NldFZhbHVlCi8vIEBncmFudCAgICAgICBHTV9nZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgdW5zYWZlV2luZG93Ci8vIEBjb25uZWN0ICAgICBnd2RhbmcuY29tCi8vIEBjb25uZWN0ICAgICB1YmphLnZpcAovLyBAY29ubmVjdCAgICAgYWxpY2RuLmNvbQovLyBAY29ubmVjdCAgICAgYXBpLm0udGFvYmFvLmNvbQovLyBAY29ubmVjdCAgICAgamQuY29tCi8vIEBjb25uZWN0ICAgICBxdWFuLnN1bmluZy5jb20KLy8gQGF1dGhvciAgICAgIEFpY2UuRnUKCi8vID09L1VzZXJTY3JpcHQ9PQooZnVuY3Rpb24oKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICB2YXIgbXlDb24gPSAnPGRpdiBpZD0iQWljZVFnc2NwIj48ZGw+PGR0PiZuYnNwOzwvZHQ+PC9kbD48ZGQ+PGEgc3R5bGU9InBhZGRpbmc6NXB4IDI4cHg7YmFja2dyb3VuZDpibHVlO2NvbG9yOiNmZmY7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOjEuNWVtIiBpZD0iQWljZVN0YXJ0Ij7lvIDlp4vlgJLorqHml7Y8L2E+Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7PGEgc3R5bGU9InBhZGRpbmc6NXB4IDI4cHg7YmFja2dyb3VuZDpibHVlO2NvbG9yOiNmZmY7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOjEuNWVtIiBpZD0iQWljZVByaWNlIj7ljoblj7Lku7fmoLw8L2E+Jm5ic3A7Jm5ic3A7PGlucHV0IGlkPSJRZ01vZGUiIHR5cGU9ImNoZWNrYm94IiAvPuW8uuWItuW8gOWQr+aKoui0reaooeW8jyZuYnNwOyZuYnNwOzxkZD48L2RsPjxkbCBpZD0iQWljZVBtIj48ZGQ+5byA5aeL5pe26Ze0Jm5ic3A7Jm5ic3A7PGlucHV0IGlkPSJBaWNlU3RhcnRUaW1lIiBzdHlsZT0id2lkdGg6MTgwcHg7Ii8+Jm5ic3A7Jm5ic3A75o+Q5YmNJm5ic3A7Jm5ic3A7PGlucHV0IHR5cGU9Im51bWJlciIgaWQ9IkFpY2VCZWZvcmVUaW1lIiBzdHlsZT0id2lkdGg6MzVweDsiIHZhbHVlPSIxMDAiLz5tczwvZGQ+PGRkPjxpbnB1dCBpZD0iQWljZVN5Y1RpbWUiIHR5cGU9ImNoZWNrYm94IiBjaGVja2VkPXRydWU+6YeH55So5pyN5Yqh5Zmo5pe26Ze0PC9kZD48ZGQ+PGlucHV0IGlkPSJBaWNlUXhkIiB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD1mYWxzZT7lvLrliLbkuIvljZUo5Yu+6YCJ5ZCO5Lya5Yi35paw5aaC5p6c5rKh55m75b2V5Lya6Lez6L2s55m75b2VKTxhIGlkPSJBaWNlUXhkYSIgaHJlZj0iIj48L2E+PC9kZD48ZGQ+ICZuYnNwOyZuYnNwOzwvZGQ+PGRkPiA8aW5wdXQgaWQ9IkFpY2VPc20iIHR5cGU9ImNoZWNrYm94Ij7oh6rliqjkuIvljZUmbmJzcDsmbmJzcDvkuIvljZXpopHnjocmbmJzcDsmbmJzcDs8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iQWljZUN5Y2UiIHN0eWxlPSJ3aWR0aDo1NXB4OyIgdmFsdWU9IjUwMCIvPm1zPC9kZD48L2RsPjxkbD7mm7TlpJrkvJjmg6DvvIzor7flhbPms6jlvq7kv6HlsI/nqIvluo88L2RsPjxkbD48ZHQ+PGltYWdlIHNyYz0iaHR0cHM6Ly94Y3gudWJqYS52aXAvYXBwL2JhcmNvZGUuanBnIj48aWZyYW1lIGlkPSJmbmFtZSIgc2FuZGJveD0iYWxsb3ctbW9kYWxzIGFsbG93LWZvcm1zIGFsbG93LXBvcHVwcyBhbGxvdy10b3AtbmF2aWdhdGlvbiBhbGxvdy1zY3JpcHRzIGFsbG93LXNhbWUtb3JpZ2luIiBzcmM9Imh0dHBzOi8veGN4LnViamEudmlwL215d2ViL3RndC5odG1sIiB3aWR0aD0iMCIgaGVpZ2h0PSIwIiBzY3JvbGxpbmc9Im5vIiAvPjwvZHQ+PC9kbD48ZGQ+PC9kbD48L2Rpdj4nOwogICAgdmFyIG15Q29uU04gPSAnPGRpdiBpZD0iQWljZVFnc2NwIj48ZGw+PGR0PiZuYnNwOzwvZHQ+PC9kbD48ZGQ+PGEgc3R5bGU9InBhZGRpbmc6NXB4IDI4cHg7YmFja2dyb3VuZDpibHVlO2NvbG9yOiNmZmY7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOjEuNWVtIiBpZD0iQWljZVN0YXJ0Ij7lvIDlp4vlgJLorqHml7Y8L2E+Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7PGEgc3R5bGU9InBhZGRpbmc6NXB4IDI4cHg7YmFja2dyb3VuZDpibHVlO2NvbG9yOiNmZmY7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOjEuNWVtIiBpZD0iQWljZVByaWNlIj7ljoblj7Lku7fmoLw8L2E+Jm5ic3A7Jm5ic3A7PGlucHV0IGlkPSJRZ01vZGUiIHR5cGU9ImNoZWNrYm94IiAvPuW8uuWItuW8gOWQr+aKoui0reaooeW8jyZuYnNwOyZuYnNwOzwvZGQ+PGRsPjxkdD4mbmJzcDs8L2R0PjwvZGw+PGRkPjxkbCBpZD0iQWljZVBtIj7lvIDlp4vml7bpl7QmbmJzcDsmbmJzcDs8aW5wdXQgaWQ9IkFpY2VTdGFydFRpbWUiIHN0eWxlPSJ3aWR0aDoxODBweDsiLz4mbmJzcDsmbmJzcDvmj5DliY0mbmJzcDsmbmJzcDs8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iQWljZUJlZm9yZVRpbWUiIHN0eWxlPSJ3aWR0aDozNXB4OyIgdmFsdWU9IjEwMCIvPm1zJm5ic3A7Jm5ic3A7PC9kZD48ZGQ+PGlucHV0IGlkPSJBaWNlU3ljVGltZSIgdHlwZT0iY2hlY2tib3giIGNoZWNrZWQ9dHJ1ZT7ph4fnlKjmnI3liqHlmajml7bpl7Q8L2RkPjxkZD48aW5wdXQgaWQ9IkFpY2VPc20iIHR5cGU9ImNoZWNrYm94Ij7oh6rliqjkuIvljZUmbmJzcDsmbmJzcDvkuIvljZXpopHnjocmbmJzcDsmbmJzcDs8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iQWljZUN5Y2UiIHN0eWxlPSJ3aWR0aDo1NXB4OyIgdmFsdWU9IjEwMDAiLz5tczwvZGw+PGRsPuabtOWkmuS8mOaDoO+8jOivt+WFs+azqOW+ruS/oeWwj+eoi+W6jzwvZGw+PGRsPjxpbWFnZSBzcmM9Imh0dHBzOi8veGN4LnViamEudmlwL2FwcC9iYXJjb2RlLmpwZyI+PGlmcmFtZSBpZD0iZm5hbWUiIHNyYz0iaHR0cHM6Ly94Y3gudWJqYS52aXAvbXl3ZWIvdGdqLmh0bWwiIHdpZHRoPSIwIiBoZWlnaHQ9IjAiIHNjcm9sbGluZz0ibm8iIC8+PC9kbD48ZGQ+PC9kbD48L2Rpdj4nOwogICAgdmFyIG15Q29uTmlrZSA9ICc8ZGl2IGlkPSJBaWNlUWdzY3AiPjxkbD48ZHQ+Jm5ic3A7PC9kdD48L2RsPjxkZD48YSBzdHlsZT0icGFkZGluZzo1cHggMjhweDtiYWNrZ3JvdW5kOmJsdWU7Y29sb3I6I2ZmZjtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6MWVtIiBpZD0iQWljZVN0YXJ0Ij7lvIDlp4vlgJLorqHml7Y8L2E+PC9kZD48ZGQ+PGRsIGlkPSJBaWNlUG0iPuW8gOWni+aXtumXtCZuYnNwOyZuYnNwOzxpbnB1dCBpZD0iQWljZVN0YXJ0VGltZSIgc3R5bGU9IndpZHRoOjE4MHB4OyIvPjwvZGQ+PGRkPjxkbD7mj5DliY0mbmJzcDsmbmJzcDs8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iQWljZUJlZm9yZVRpbWUiIHN0eWxlPSJ3aWR0aDo2MHB4OyIgdmFsdWU9IjEwMCIvPm1zJm5ic3A7Jm5ic3A7PC9kbD48ZGQ+PGlucHV0IGlkPSJBaWNlU3ljVGltZSIgdHlwZT0iY2hlY2tib3giIGNoZWNrZWQ9dHJ1ZT7ph4fnlKjmnI3liqHlmajml7bpl7Q8L2RkPjxkZD48aW5wdXQgaWQ9IkFpY2VPc20iIHR5cGU9ImNoZWNrYm94Ij7oh6rliqjkuIvljZUmbmJzcDsmbmJzcDvkuIvljZXpopHnjocmbmJzcDsmbmJzcDs8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iQWljZUN5Y2UiIHN0eWxlPSJ3aWR0aDo1NXB4OyIgdmFsdWU9IjEwMDAiLz5tczwvZGw+PGRsPuabtOWkmuS8mOaDoO+8jOivt+WFs+azqOW+ruS/oeWwj+eoi+W6jzwvZGw+PGRsPjxpbWFnZSBzcmM9Imh0dHBzOi8veGN4LnViamEudmlwL2FwcC9iYXJjb2RlLmpwZyI+PGlmcmFtZSBpZD0iZm5hbWUiIHNyYz0iaHR0cHM6Ly94Y3gudWJqYS52aXAvbXl3ZWIvdGdqLmh0bWwiIHdpZHRoPSIwIiBoZWlnaHQ9IjAiIHNjcm9sbGluZz0ibm8iIC8+PC9kbD48ZGQ+PC9kbD48L2Rpdj4nOwogICAgdmFyIG15Q29uVmlwID0gJzxkaXYgaWQ9IkFpY2VRZ3NjcCI+PGRsPjxkdD4mbmJzcDs8L2R0PjwvZGw+PGRkPjxhIHN0eWxlPSJwYWRkaW5nOjVweCAyOHB4O2JhY2tncm91bmQ6Ymx1ZTtjb2xvcjojZmZmO2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZToxLjVlbSIgaWQ9IkFpY2VTdGFydCI+5byA5aeL5YCS6K6h5pe2PC9hPiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOzxhIHN0eWxlPSJwYWRkaW5nOjVweCAyOHB4O2JhY2tncm91bmQ6Ymx1ZTtjb2xvcjojZmZmO2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZToxLjVlbSIgaWQ9IkFpY2VQcmljZSI+5Y6G5Y+y5Lu35qC8PC9hPiZuYnNwOyZuYnNwOzxpbnB1dCBpZD0iUWdNb2RlIiB0eXBlPSJjaGVja2JveCIgLz7lvLrliLblvIDlkK/miqLotK3mqKHlvI8mbmJzcDsmbmJzcDs8L2RkPjxkbD48ZHQ+Jm5ic3A7PC9kdD48L2RsPjxkZD48ZGwgaWQ9IkFpY2VQbSI+5byA5aeL5pe26Ze0Jm5ic3A7Jm5ic3A7PGlucHV0IGlkPSJBaWNlU3RhcnRUaW1lIiBzdHlsZT0id2lkdGg6MTgwcHg7Ii8+Jm5ic3A7Jm5ic3A75o+Q5YmNJm5ic3A7Jm5ic3A7PGlucHV0IHR5cGU9Im51bWJlciIgaWQ9IkFpY2VCZWZvcmVUaW1lIiBzdHlsZT0id2lkdGg6MzVweDsiIHZhbHVlPSIxMDAiLz5tcyZuYnNwOyZuYnNwOzwvZGQ+PGRkPjxpbnB1dCBpZD0iQWljZVN5Y1RpbWUiIHR5cGU9ImNoZWNrYm94IiBjaGVja2VkPXRydWU+6YeH55So5pyN5Yqh5Zmo5pe26Ze0PC9kZD48ZGQ+PGlucHV0IGlkPSJBaWNlT3NtIiB0eXBlPSJjaGVja2JveCI+6Ieq5Yqo5LiL5Y2VJm5ic3A7Jm5ic3A75LiL5Y2V6aKR546HJm5ic3A7Jm5ic3A7PGlucHV0IHR5cGU9Im51bWJlciIgaWQ9IkFpY2VDeWNlIiBzdHlsZT0id2lkdGg6NTVweDsiIHZhbHVlPSIxMDAwIi8+bXM8L2RsPjxkbD7mm7TlpJrkvJjmg6DvvIzor7flhbPms6jlvq7kv6HlsI/nqIvluo88L2RsPjxkbD48aW1hZ2Ugc3JjPSJodHRwczovL3hjeC51YmphLnZpcC9hcHAvYmFyY29kZS5qcGciPjxpZnJhbWUgaWQ9ImZuYW1lIiBzcmM9Imh0dHBzOi8veGN4LnViamEudmlwL215d2ViL3RndGouaHRtbCIgd2lkdGg9IjAiIGhlaWdodD0iMCIgc2Nyb2xsaW5nPSJubyIgLz48L2RsPjxkZD48L2RsPjwvZGl2Pic7CiAgICB2YXIgbXlDb25KRCA9ICc8ZGl2IGlkPSJBaWNlUWdzY3AiPjxkZD4mbmJzcDsmbmJzcDs8L2RkPjxkbD48ZHQ+Jm5ic3A7PC9kdD48L2RsPjxkbD48ZGQ+Jm5ic3A7PC9kdD48L2RkPjwvZGw+PGRkPjxhIHN0eWxlPSJwYWRkaW5nOjVweCAyOHB4O2JhY2tncm91bmQ6Ymx1ZTtjb2xvcjojZmZmO2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZToxLjVlbSIgaWQ9IkFpY2VTdGFydCI+5byA5aeL5YCS6K6h5pe2PC9hPiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOzxhIHN0eWxlPSJwYWRkaW5nOjVweCAyOHB4O2JhY2tncm91bmQ6Ymx1ZTtjb2xvcjojZmZmO2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZToxLjVlbSIgaWQ9IkFpY2VQcmljZSI+5Y6G5Y+y5Lu35qC8PC9hPiZuYnNwOyZuYnNwOzxpbnB1dCBpZD0iUWdNb2RlIiB0eXBlPSJjaGVja2JveCIgLz7lvLrliLblvIDlkK/miqLotK3mqKHlvI8mbmJzcDsmbmJzcDxkZD48L2RsPjxkbCBpZD0iQWljZVBtIj48ZGQ+Jm5ic3A7PC9kZD48ZGQ+PGRsPjxwICBzdHlsZT0iY29sb3I6IHJlZCI+6aG16Z2i5oqi6LSt5qih5byP77ya5Li65L+d6K+B5oqi6LSt6YCf5bqm5Y+K5LiL5Yiw5YW25LuW6K6i5Y2V77yM6K+35YWI5riF56m66LSt54mp6L2m5YaN6L+b6KGM5oqi6LSt77yBPC9wPjwvZGw+5byA5aeL5pe26Ze0Jm5ic3A7Jm5ic3A7PGlucHV0IGlkPSJBaWNlU3RhcnRUaW1lIiBzdHlsZT0id2lkdGg6MTgwcHg7Ii8+Jm5ic3A7Jm5ic3A75o+Q5YmNJm5ic3A7Jm5ic3A7PGlucHV0IHR5cGU9Im51bWJlciIgaWQ9IkFpY2VCZWZvcmVUaW1lIiBzdHlsZT0id2lkdGg6MzVweDsiIHZhbHVlPSIxMDAiLz5tczwvZGQ+PGRkPjxpbnB1dCBpZD0iQWljZVN5Y1RpbWUiIHR5cGU9ImNoZWNrYm94IiBjaGVja2VkPXRydWU+6YeH55So5pyN5Yqh5Zmo5pe26Ze0PC9kZD48ZGQ+PGlucHV0IGlkPSJBaWNlUXhkIiB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD1mYWxzZT7lvLrliLbkuIvljZUo5Yu+6YCJ5ZCO5Lya5Yi35paw5aaC5p6c5rKh55m75b2V5Lya6Lez6L2s55m75b2VKTxhIGlkPSJBaWNlUXhkYSIgaHJlZj0iIj48L2E+PC9kZD48ZGQ+IDxpbnB1dCBpZD0iQWljZU9zbSIgdHlwZT0iY2hlY2tib3giIGNoZWNrZWQ9ImNoZWNrZWQiIHN0eWxlPSJkaXNwbGF5OiBub25lIj4mbmJzcDsmbmJzcDvkuIvljZXpopHnjocmbmJzcDsmbmJzcDs8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iQWljZUN5Y2UiIHN0eWxlPSJ3aWR0aDo1NXB4OyIgdmFsdWU9IjUwMCIvPm1zPC9kZD48L2RsPjxkbD48ZHQ+Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A75pu05aSa5LyY5oOg77yM6K+35YWz5rOo5b6u5L+h5bCP56iL5bqPPC9kbD48L2R0PjxkbD48ZHQ+PGltYWdlIHNyYz0iaHR0cHM6Ly94Y3gudWJqYS52aXAvYXBwL2JhcmNvZGUuanBnIj48aWZyYW1lIGlkPSJmbmFtZSIgc3JjPSJodHRwczovL3hjeC51YmphLnZpcC9teXdlYi90Z3RqLmh0bWwiIHdpZHRoPSIwIiBoZWlnaHQ9IjAiIHNjcm9sbGluZz0ibm8iIC8+PC9kdD48L2RsPjxkZD48L2RsPjwvZGl2Pic7CiAgICAvL3ZhciBteUNvbkpETWIgPSAnPGRkPiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOzxzcGFuPjxhIHRhcmdldD0iX2JsYW5rIiBzdHlsZT0iY29sb3I6ICMyMjcyYzg7Zm9udC1zaXplOiAxZW07Zm9udC13ZWlnaHQ6IGJvbGQ7Ij7otK3nianliqnmiYsgQnkgQWljZS5GdTwvYT48L3NwYW4+Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7PGEgc3R5bGU9InBhZGRpbmc6M3B4IDI4cHg7YmFja2dyb3VuZDpibHVlO2NvbG9yOiNmZmY7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOjFlbSIgaWQ9IkFpY2VTdGFydCI+5byA5aeL5YCS6K6h5pe2PC9hPjxkZD4mbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDvlvIDlp4vml7bpl7QmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDs8aW5wdXQgaWQ9IkFpY2VTdGFydFRpbWUiIHN0eWxlPSJ3aWR0aDoxNDBweDsiLz4mbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDvmj5DliY08aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iQWljZUJlZm9yZVRpbWUiIHN0eWxlPSJ3aWR0aDozNXB4OyIgdmFsdWU9IjEwMCIvPm1zICAmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDs8aW5wdXQgaWQ9IkFpY2VPc20iIHR5cGU9ImhpZGRlbiIgPjxpbnB1dCBpZD0iQWljZVd4IiB0eXBlPSJyYWRpbyIgY2hlY2tlZD0iY2hlY2tlZCIgdmFsdWU9IiIgIG5hbWU9IkFjaGsiIC8+5b6u5L+h5pSv5LuYPGlucHV0IGlkPSJBaWNlSmQiIHR5cGU9InJhZGlvIiB2YWx1ZT0iIiBuYW1lPSJBY2hrIiAvPuS6rOS4nOaUr+S7mDwvZGQ+PC9kbD4nOwogICAgdmFyIG15Q29uSkRDYXJ0ID0gJzxkaXYgaWQ9IkFpY2VRZ3NjcCI+PGRkPjxzcGFuPjxhIHRhcmdldD0iX2JsYW5rIiBzdHlsZT0iY29sb3I6ICMyMjcyYzg7Zm9udC1zaXplOiAxZW07Zm9udC13ZWlnaHQ6IGJvbGQ7Ij7otK3nianliqnmiYsgQnkgQWljZS5GdTwvYT48L3NwYW4+Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7PGEgc3R5bGU9InBhZGRpbmc6M3B4IDI4cHg7YmFja2dyb3VuZDpibHVlO2NvbG9yOiNmZmY7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOjFlbSIgaWQ9IkFpY2VTdGFydCI+5byA5aeL5YCS6K6h5pe2PC9hPiZuYnNwOyZuYnNwOzxpbnB1dCBpZD0iQWljZVN5Y1RpbWUiIHR5cGU9ImNoZWNrYm94IiBjaGVja2VkPXRydWU+6YeH55So5pyN5Yqh5Zmo5pe26Ze0PGRkPuW8gOWni+aXtumXtCZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOzxpbnB1dCBpZD0iQWljZVN0YXJ0VGltZSIgc3R5bGU9IndpZHRoOjE0MHB4OyIvPiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwO+aPkOWJjTxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJBaWNlQmVmb3JlVGltZSIgc3R5bGU9IndpZHRoOjM1cHg7IiB2YWx1ZT0iMTAwIi8+bXMmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDs8ZHQ+PGRkPjxpbnB1dCBpZD0iQWljZU9zbSIgdHlwZT0iY2hlY2tib3giIC8+6Ieq5Yqo5LiL5Y2VJm5ic3A7Jm5ic3A75LiL5Y2V6aKR546HJm5ic3A7Jm5ic3A7PGlucHV0IHR5cGU9Im51bWJlciIgaWQ9IkFpY2VDeWNlIiBzdHlsZT0id2lkdGg6NTVweDsiIHZhbHVlPSI1MDAiLz5tcyZuYnNwOyZuYnNwOzxpbnB1dCBpZD0iQWljZU1xbW9kZSIgdHlwZT0iY2hlY2tib3giIC8+55uy5oqi5qih5byPJm5ic3A7Jm5ic3A7PGlucHV0IGlkPSJBaWNlSmxtb2RlIiB0eXBlPSJjaGVja2JveCIgLz7mjaHmvI/mqKHlvI8mbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDs8L2RkPjwvZHQ+PGR0PjxkZD7mj5DliY08aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iQWljZU1xbW9kZVRpbWUiIHN0eWxlPSJ3aWR0aDozNXB4IiB2YWx1ZT0iMyIvPnMg5Yi35pawPC9kZD48L2R0PjwvZGQ+PC9kbD48L2Rpdj4nOwogICAgdmFyIG15Q29uQ2FydCA9ICc8ZGl2IGlkPSJBaWNlUWdzY3AiPjxkZD48c3Bhbj48YSB0YXJnZXQ9Il9ibGFuayIgc3R5bGU9ImNvbG9yOiAjMjI3MmM4O2ZvbnQtc2l6ZTogMWVtO2ZvbnQtd2VpZ2h0OiBib2xkOyI+6LSt54mp5Yqp5omLIEJ5IEFpY2UuRnU8L2E+PC9zcGFuPiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOzxhIHN0eWxlPSJwYWRkaW5nOjNweCAyOHB4O2JhY2tncm91bmQ6Ymx1ZTtjb2xvcjojZmZmO2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZToxZW0iIGlkPSJBaWNlU3RhcnQiPuW8gOWni+WAkuiuoeaXtjwvYT4mbmJzcDsmbmJzcDs8aW5wdXQgaWQ9IkFpY2VTeWNUaW1lIiB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD10cnVlPumHh+eUqOacjeWKoeWZqOaXtumXtDxkZD7lvIDlp4vml7bpl7QmbmJzcDsmbmJzcDs8aW5wdXQgaWQ9IkFpY2VTdGFydFRpbWUiIHN0eWxlPSJ3aWR0aDoxNDBweDsiLz4mbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDvmj5DliY08aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iQWljZUJlZm9yZVRpbWUiIHN0eWxlPSJ3aWR0aDozNXB4OyIgdmFsdWU9IjEwMCIvPm1zICAmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDs8aW5wdXQgaWQ9IkFpY2VPc20iIHR5cGU9ImNoZWNrYm94IiAvPuiHquWKqOS4i+WNlSZuYnNwOyZuYnNwOyAgIOS4i+WNlemikeeOhyZuYnNwOyZuYnNwOzxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJBaWNlQ3ljZSIgc3R5bGU9IndpZHRoOjU1cHg7IiB2YWx1ZT0iNTAwIi8+bXMmbmJzcDsmbmJzcDs8aW5wdXQgaWQ9IkFpY2VNcW1vZGUiIHR5cGU9ImNoZWNrYm94IiAvPuebsuaKouaooeW8jyZuYnNwOyZuYnNwO+aPkOWJjTxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJBaWNlTXFtb2RlVGltZSIgc3R5bGU9IndpZHRoOjM1cHgiIHZhbHVlPSIzIi8+cyDliLfmlrA8L2RkPjwvZGw+PC9kaXY+JzsKICAgIHZhciBpZkxqID0gbnVsbDsKICAgIHZhciBmcm1JZCA9IDA7CiAgICB2YXIgYnRuQnV5ID0gbnVsbDsKICAgIHZhciByZWFsVGltZTsKICAgIHZhciBzdGFydHRpbWU7CiAgICB2YXIgZW5kdGltZTsKICAgIHZhciBpbml0c2R0aW1lX2ludCA9IDA7Ly/nrKzkuIDmrKHojrflvpfnmoTmnI3liqHlmajml7bpl7QKICAgIHZhciB0aGlzc2R0aW1lX2ludDsKICAgIHZhciBkODsvL+aKoui0reaXtumXtAogICAgdmFyIGN5Y2UgPSAxMDA7IC8vIOWkmuWwkeavq+enkueCueWHu+S4gOasoQogICAgdmFyIGJ3dGltZSA9IDEwMDsvL+WJjee9ruaXtumXtAogICAgdmFyIGdvc3RhcnQgPSAwOwogICAgdmFyIGJ0bkNhcnQ9IG51bGw7CiAgICB2YXIgaWZZaHEgPSAwOwogICAgdmFyIGNoayA9IDE7CiAgICB2YXIgZ29vZHNJZCA9IG51bGw7CiAgICB2YXIgc2t1SWQgPW51bGw7CiAgICB2YXIgc2ppZCA9IG51bGwgOwogICAgdmFyIGdvQ2FydCA9MDsKICAgIHZhciBnb0J0biA9IDA7Ly/miafooYzmiqLotK3mjInpkq4KICAgIHZhciBhbGxjayA9IG51bGw7Ly/otK3nianovablhajpgIkKICAgIHZhciBpZlJlZiA9IDA7IC8v5piv5ZCm5Yi35pawCiAgICB2YXIgbXFCZlRpbSA9IDM7Ly/nm7LmiqLmj5DliY3liLfmlrDml7bpl7QKICAgIHZhciBxenhkID0gMCAvL+W8uuWItuS4i+WNlQogICAgdmFyIHlocWlkID0gIjc3MTI4MDA5MiI7CiAgICAvL+WOhuWPsuS7t+agvOaPkOS6pOWPguaVsAogICAgdmFyIHBkYXRhID1udWxsOwogICAgdmFyIHBiZWdpblRpbWU9bnVsbDsKICAgIHZhciBwaWNkYXRhID1udWxsOwogICAgdmFyIGZtID0gbnVsbDsKICAgIHZhciBidXlUb3AgPSAxIC8v6aG16Z2i5o+Q5Lqk5qyh5pWw5LiK6ZmQIOS4jeWQjOmhtemdouaPkOS6pOasoeaVsOS4jeWQjAogICAgdmFyIGJ1eVBsID0gMjUwLy/pobXpnaLmiafooYznmoTpopHnjocKICAgIHZhciB0aW1lVXJsID0gbnVsbDsvL+aXtumXtOWQjOatpQogICAgLy9Mb2FkaW5nCiAgICB2YXIgX1BhZ2VIZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LAogICAgICAgIF9QYWdlV2lkdGggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7CiAgICB2YXIgX0xvYWRpbmdUb3AgPSBfUGFnZUhlaWdodCA+IDYxID8gKF9QYWdlSGVpZ2h0IC0gNjEpIC8gMiA6IDAsCiAgICAgICAgX0xvYWRpbmdMZWZ0ID0gX1BhZ2VXaWR0aCA+IDIxNSA/IChfUGFnZVdpZHRoIC0gMjE1KSAvIDIgOiAwOwogICAgdmFyIF9Mb2FkaW5nSHRtbCA9ICc8ZGl2IGlkPSJsb2FkaW5nRGl2IiBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7bGVmdDowO3dpZHRoOjEwMCU7aGVpZ2h0OicgKyBfUGFnZUhlaWdodCArICdweDt0b3A6MDtiYWNrZ3JvdW5kOiNmM2Y4ZmY7b3BhY2l0eToxO2ZpbHRlcjphbHBoYShvcGFjaXR5PTgwKTt6LWluZGV4OjEwMDAwOyI+PGRpdiBzdHlsZT0icG9zaXRpb246IGFic29sdXRlOyBjdXJzb3IxOiB3YWl0OyBsZWZ0OiAnICsgX0xvYWRpbmdMZWZ0ICsgJ3B4OyB0b3A6JyArIF9Mb2FkaW5nVG9wICsgJ3B4OyB3aWR0aDogYXV0bzsgaGVpZ2h0OiA1N3B4OyBsaW5lLWhlaWdodDogNTdweDsgcGFkZGluZy1sZWZ0OiA1MHB4OyBwYWRkaW5nLXJpZ2h0OiA1cHg7IGJhY2tncm91bmQ6ICNmZmYgdXJsKEltYWdlL2xvYWRpbmcuZ2lmKSBuby1yZXBlYXQgc2Nyb2xsIDVweCAxMHB4OyBib3JkZXI6IDJweCBzb2xpZCAjOTVCOEU3OyBjb2xvcjogIzY5Njk2OTsgZm9udC1mYW1pbHk6XCdNaWNyb3NvZnQgWWFIZWlcJzsiPumhtemdouWKoOi9veS4re+8jOivt+etieW+hS4uLjwvZGl2PjwvZGl2Pic7CiAgICB2YXIgZnJvVXJsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvY1VybCcpOwogICAgZnJvVXJsID0gZnJvVXJsPT1udWxsPyIiOmZyb1VybDsKICAgIHZhciBtcU1kID0gR01fZ2V0VmFsdWUoJ21xbWQnKTsKICAgIHZhciBqbE1kID0gR01fZ2V0VmFsdWUoJ2psbWQnKTsKICAgIGlmKGpsTWQ9PSJ1bmRlZmluZWQiIHwgamxNZCA9PSBudWxsKXsKICAgICAgICBHTV9zZXRWYWx1ZSgiamxtZCIsMCk7CiAgICB9CiAgICBpZlJlZiA9IEdNX2dldFZhbHVlKCJyZWYiKTsKICAgIGlmKGlmUmVmPT0xIHwgaWZSZWYgPT0gbnVsbCl7CiAgICAgICAgR01fc2V0VmFsdWUoInJlZiIsMCk7CiAgICB9CiAgICBjeWNlID0gR01fZ2V0VmFsdWUoIkFjeWNlIik7CiAgICBpZihjeWNlPT0idW5kZWZpbmVkIiB8IGN5Y2UgPT0gbnVsbCl7CiAgICAgICAgY3ljZT0xMDA7CiAgICB9CiAgICBnb0J0biA9IEdNX2dldFZhbHVlKCJnb0J0biIpOwogICAgaWYoZ29CdG49PSJ1bmRlZmluZWQiIHwgZ29CdG4gPT0gbnVsbCl7CiAgICAgICAgZ29CdG49MTAwOwogICAgfQogICAgZ29DYXJ0ID0gR01fZ2V0VmFsdWUoImdvQ2FydCIpOwogICAgaWYoZ29DYXJ0PT0idW5kZWZpbmVkIiB8IGdvQ2FydCA9PSBudWxsKXsKICAgICAgICBnb0NhcnQ9MTAwOwogICAgfQogICAgcXp4ZCA9IEdNX2dldFZhbHVlKCJxenhkIik7CiAgICB2YXIgQWljZVFxc2NwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIkFpY2VRZ3NjcCIpOwogICAgaWYgKEFpY2VRcXNjcCE9PSBudWxsICYmIHR5cGVvZihBaWNlUXFzY3ApID09PSAnb2JqZWN0JykgewogICAgICAgICQoIiNBaWNlUXFzY3AiKS5yZW1vdmUoKTsKICAgICAgICByZXR1cm47CiAgICB9CgogICAgaWYod2luZG93LmxvY2F0aW9uLm9yaWdpbiA9PSAiaHR0cHM6Ly9kZXRhaWwudG1hbGwuY29tIiB8fCB3aW5kb3cubG9jYXRpb24ub3JpZ2luID09ICJodHRwczovL2NoYW9zaGkuZGV0YWlsLnRtYWxsLmNvbSIgfHwgd2luZG93LmxvY2F0aW9uLm9yaWdpbiA9PSAiaHR0cHM6Ly9kZXRhaWwudG1hbGwuaGsifHx3aW5kb3cubG9jYXRpb24ub3JpZ2luID09ICJodHRwczovL2RldGFpbC5saWFuZ3hpbnlhby5jb20iKXsKICAgICAgICB2YXIgZmRpdiA9IGdldFRhcmdldEJ5VEFWKCdkaXYnLCdjbGFzcycsJ3RiLXNrdScpOy8vJ3RiLWFjdGlvbiB0bS1jbGVhcicpOwogICAgICAgIGZkaXYuaWQ9J0pfRHRsJzsKICAgICAgICAkKCcjSl9EdGwnKS5hcHBlbmQobXlDb24pOwogICAgICAgIGlmTGogPSBnZXRUYXJnZXRCeVRBVignZGl2JywnY2xhc3MnLCd0Yi1idG4td2FpdCcpOwogICAgICAgIGJ0bkJ1eSA9Z2V0VGFyZ2V0QnlJZCgnSl9MaW5rQnV5Jyk7CiAgICAgICAgZ29vZHNJZD0vKD86JnxcPylpZD0oXGQrKS8uZXhlYyh3aW5kb3cubG9jYXRpb24uaHJlZilbMV0gOwogICAgICAgIHZhciBmdXIgPSAwOwogICAgICAgIGlmIChteUNvbi5pbmRleE9mKCJteXdlYi90Z2oiKSkgZnVyID0gd2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZignbW1fJyt5aHFpZCk9PS0xIDsKICAgICAgICBpZiAoZnVyICYmIHdpbmRvdy5sb2NhdGlvbi5ocmVmIT1mcm9VcmwpIHsKICAgICAgICAgICAgZ2V0WWhxdXJsKGdvb2RzSWQsIiIsMywyKTsKICAgICAgICB9CgoKICAgICAgICBpZiAocXp4ZD09MCl7CiAgICAgICAgICAgIGdldFRhcmdldEJ5SWQoIkFpY2VReGQiKS5jaGVja2VkID0gZmFsc2U7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGdldFRhcmdldEJ5SWQoIkFpY2VReGQiKS5jaGVja2VkID0gdHJ1ZTsKCiAgICAgICAgfQogICAgICAgIEdNX3NldFZhbHVlKCJnb29kc0lkIiwiMCIpOwogICAgICAgIGJ1eVRvcCA9IDQ7CiAgICAgICAgYnV5UGwgPSA1MDA7CiAgICAgICAgbXFNZCA9IDA7CiAgICAgICAgZnJtSWQgPSAxOwogICAgfQogICAgaWYod2luZG93LmxvY2F0aW9uLm9yaWdpbiA9PSAiaHR0cHM6Ly9pdGVtLnRhb2Jhby5jb20iKXsKICAgICAgICAkKCcjSl9pc2t1JykuYXBwZW5kKG15Q29uKTsKICAgICAgICBpZkxqID0gZ2V0VGFyZ2V0QnlUQVYoJ2RpdicsJ2NsYXNzJywndGItYnRuLXdhaXQnKTsKICAgICAgICBidG5CdXkgPWdldFRhcmdldEJ5VEFWKCdhJywnY2xhc3MnLCdKX0xpbmtCdXknKTsKICAgICAgICBnb29kc0lkPS8oPzomfFw/KWlkPShcZCspLy5leGVjKHdpbmRvdy5sb2NhdGlvbi5ocmVmKVsxXSA7CiAgICAgICAgLy9pZiAoKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoJ21tXycreWhxaWQpPT0tMSkmJih3aW5kb3cubG9jYXRpb24uaHJlZiE9ZnJvVXJsKSkgewogICAgICAgIGZ1ciA9IDA7CiAgICAgICAgaWYgKG15Q29uLmluZGV4T2YoIm15d2ViL3RnaiIpKSBmdXIgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCdtbV8nK3locWlkKT09LTEgOwoKICAgICAgICBpZiAoZnVyJiZ3aW5kb3cubG9jYXRpb24uaHJlZiE9ZnJvVXJsKSB7CiAgICAgICAgICAgIGdldFlocXVybChnb29kc0lkLCIiLDMsMik7CiAgICAgICAgfQogICAgICAgIGlmIChxenhkPT0wKXsKICAgICAgICAgICAgZ2V0VGFyZ2V0QnlJZCgiQWljZVF4ZCIpLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgZ2V0VGFyZ2V0QnlJZCgiQWljZVF4ZCIpLmNoZWNrZWQgPSB0cnVlOwoKICAgICAgICB9CgogICAgICAgIEdNX3NldFZhbHVlKCJnb29kc0lkIiwiMCIpOwoKICAgICAgICBidXlUb3AgPSA0OwogICAgICAgIGJ1eVBsID0gNTAwOwoKICAgICAgICBtcU1kID0gMDsKICAgICAgICBmcm1JZCA9IDI7CiAgICB9CgogICAgaWYod2luZG93LmxvY2F0aW9uLm9yaWdpbiA9PSAiaHR0cHM6Ly9jYXJ0LnRhb2Jhby5jb20iKXsKICAgICAgICAkKCcjSl9TZWFyY2gnKS5hcHBlbmQobXlDb25DYXJ0KTsKICAgICAgICBidXlUb3AgPSAxOwogICAgICAgIGJ1eVBsID0gNTAwOwogICAgICAgIGZybUlkID0gMzsKICAgIH0KCiAgICBpZih3aW5kb3cubG9jYXRpb24ub3JpZ2luID09ICJodHRwczovL2NhcnQudG1hbGwuY29tIil7CiAgICAgICAgJCgnI21hbGxTZWFyY2gnKS5hcHBlbmQobXlDb25DYXJ0KTsKICAgICAgICBidXlUb3AgPSAxOwogICAgICAgIGJ1eVBsID0gNTAwOwogICAgICAgIGZybUlkID0gNDsKICAgIH0KCiAgICBpZih3aW5kb3cubG9jYXRpb24ub3JpZ2luID09ICJodHRwczovL2l0ZW0uamQuY29tInx8d2luZG93LmxvY2F0aW9uLm9yaWdpbiA9PSAiaHR0cHM6Ly9pdGVtLmpkLmhrIil7CiAgICAgICAgJCgnI2Nob29zZS1idG5zJykuYXBwZW5kKG15Q29uSkQpOwogICAgICAgIGdvb2RzSWQ9IC8oXGQrKVwuaHRtbC8uZXhlYyh3aW5kb3cubG9jYXRpb24uaHJlZilbMV0gOwogICAgICAgIHZhciBwdXJsID0gL2l0ZW1cLmpkXC4oPzpbXi4vXSspXC8oXGQrKVwuaHRtbC8uZXhlYyh3aW5kb3cubG9jYXRpb24uaHJlZikKICAgICAgICBpZiAocHVybCAhPSBudWxsICYmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCc/Jyk9PS0xKSYmKHdpbmRvdy5sb2NhdGlvbi5ocmVmIT1mcm9VcmwpKSB7CiAgICAgICAgICAgIGdldFlocXVybChnb29kc0lkLCIiLDIsMik7CiAgICAgICAgfQoKICAgICAgICBpZiAocXp4ZD09MCl7CiAgICAgICAgICAgIGdldFRhcmdldEJ5SWQoIkFpY2VReGQiKS5jaGVja2VkID0gZmFsc2U7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGdldFRhcmdldEJ5SWQoIkFpY2VReGQiKS5jaGVja2VkID0gdHJ1ZTsKCiAgICAgICAgfQogICAgICAgIEdNX3NldFZhbHVlKCJnb29kc0lkIiwiMCIpOwogICAgICAgIGlmIChnZXRUYXJnZXRCeUlkKCJBaWNlUXhkIikuY2hlY2tlZCl7CiAgICAgICAgICAgIC8vR01fc2V0VmFsdWUoImdvb2RzSWQiLCIwIik7CiAgICAgICAgICAgIGdldFRhcmdldEJ5SWQoIkFpY2VReGRhIikuaHJlZj0iaHR0cHM6Ly93cXMuamQuY29tL29yZGVyL3NfY29uZmlybV9taWFvLnNodG1sP3NjZW5ldmFsPTImc2NlbmU9amQmaXNDYW5FZGl0PTEmY29tbWxpc3Q9LCwxLCIrIGdvb2RzSWQ7CiAgICAgICAgICAgIGJ0bkJ1eT0gZ2V0VGFyZ2V0QnlJZCgiQWljZVF4ZGEiKTsKICAgICAgICAgICAgR01fc2V0VmFsdWUoInF6eGQiLDApOwogICAgICAgICAgICBidXlUb3AgPSAxMDsKICAgICAgICAgICAgYnV5UGwgPSAyNTA7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIC8vIGlwaG9uZVgg5oqi6LStCiAgICAgICAgICAgIGlmIChnZXRUYXJnZXRCeUlkKCJjaG9vc2UtYnRuLWtvIikhPT0gbnVsbCAmJiB0eXBlb2YoZ2V0VGFyZ2V0QnlJZCgnYnRuLWNob29zZS1idG4ta28nKSkgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiKCsrKysrKysrKysrK2lwaG9uZVgg5oqi6LStIik7CiAgICAgICAgICAgICAgICB2YXIgc2t1ID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL1teMC05XS9pZywgIiIpOwogICAgICAgICAgICAgICAgdmFyIHJlZiA9ICIvL2NhcnQuamQuY29tL2dhdGUuYWN0aW9uP3BpZD0iICsgc2t1ICsgIiZwY291bnQ9MSZwdHlwZT0xIjsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJodHRwczoiICsgcmVmKTsKICAgICAgICAgICAgICAgIGJ0bkJ1eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjaG9vc2UtYnRuLWtvIik7CiAgICAgICAgICAgICAgICBidG5CdXkuaHJlZiA9IHJlZjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy/pooTnuqbmiqLotK0KICAgICAgICAgICAgaWYgKGdldFRhcmdldEJ5SWQoImJ0bi1yZXNlcnZhdGlvbiIpIT09IG51bGwgJiYgdHlwZW9mKGdldFRhcmdldEJ5SWQoJ2J0bi1yZXNlcnZhdGlvbicpKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCIoKysrKysrKysrKysr5q2j5Zyo6aKE57qm5oqi6LStIik7CgogICAgICAgICAgICAgICAgYnRuQnV5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJ0bi1yZXNlcnZhdGlvbiIpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvL+enkuadgAogICAgICAgICAgICBpZiAoZ2V0VGFyZ2V0QnlJZCgnSW5pdENhcnRVcmwnKSE9PSBudWxsICYmIHR5cGVvZihnZXRUYXJnZXRCeUlkKCdJbml0Q2FydFVybCcpKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCIoKysrKysrKysrKysr5q2j5Zyo56eS5p2AIik7CiAgICAgICAgICAgICAgICBidG5CdXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiSW5pdENhcnRVcmwiKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYnV5VG9wID0gMTsKICAgICAgICAgICAgYnV5UGwgPSA1MDA7CiAgICAgICAgfQoKICAgICAgICBtcU1kID0gMDsKICAgICAgICBmcm1JZCA9IDU7CiAgICB9CgogICAgaWYod2luZG93LmxvY2F0aW9uLm9yaWdpbiA9PSAiaHR0cHM6Ly9jYXJ0LmpkLmNvbSIpewogICAgICAgIGlmKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoJ2h0dHBzOi8vY2FydC5qZC5jb20vYWRkVG9DYXJ0Lmh0bWwnKSE9LTEpewogICAgICAgICAgICAvL+WOu+i0reeJqei9pue7k+eulwogICAgICAgICAgICBpZiAoZ2V0VGFyZ2V0QnlJZCgiR290b1Nob3BwaW5nQ2FydCIpIT09IG51bGwgJiYgdHlwZW9mKGdldFRhcmdldEJ5SWQoJ0dvdG9TaG9wcGluZ0NhcnQnKSkgPT09ICdvYmplY3QnKXsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCIoKysrKysrKysrKysr5q2j5Zyo5Y676LSt54mp6L2m57uT566XIik7CiAgICAgICAgICAgICAgICBidG5CdXkgPSBnZXRUYXJnZXRCeUlkKCJHb3RvU2hvcHBpbmdDYXJ0Iik7CiAgICAgICAgICAgICAgICBidG5CdXkuY2xpY2soKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHZhciBTZWFyY2ggPSBnZXRUYXJnZXRCeVRBVignZGl2JywnY2xhc3MnLCd3IHcxIGhlYWRlciBjbGVhcmZpeCcpOwogICAgICAgIFNlYXJjaC5pZCA9ICJBaWNlU2VhcmNoIgogICAgICAgICQoJyNBaWNlU2VhcmNoJykuYXBwZW5kKG15Q29uSkRDYXJ0KTsKICAgICAgICBidXlUb3AgPSAxOwogICAgICAgIGJ1eVBsID0gNTAwOwogICAgICAgIGZybUlkID0gNjsKICAgIH0KCiAgICBpZih3aW5kb3cubG9jYXRpb24ub3JpZ2luID09ICJodHRwczovL3Byb2R1Y3Quc3VuaW5nLmNvbSIpewogICAgICAgIGdvb2RzSWQ9IC8oXGQrKVwuaHRtbC8uZXhlYyh3aW5kb3cubG9jYXRpb24uaHJlZilbMV07CiAgICAgICAgc2ppZCA9ICAvKFxkKykvLmV4ZWMod2luZG93LmxvY2F0aW9uLmhyZWYpWzFdOwogICAgICAgIGlmICgod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZigndXRtX3NvdXJjZT11bmlvbicpPT0tMSkmJndpbmRvdy5sb2NhdGlvbi5ocmVmIT1mcm9VcmwpIHsKICAgICAgICAgICAgZ2V0WWhxdXJsKGdvb2RzSWQsc2ppZCw0LDIpOwogICAgICAgIH0KICAgICAgICB2YXIgc25EaXYgPSBnZXRUYXJnZXRCeVRBVignZGl2JywnY2xhc3MnLCdtYWluYnRucyBjbGVhcmZpeCcpOwogICAgICAgIHNuRGl2LmlkID0gIkFpY2VEaXYiCiAgICAgICAgJCgnI0FpY2VEaXYnKS5hcHBlbmQobXlDb25TTik7CiAgICAgICAgYnRuQnV5ID1nZXRUYXJnZXRCeUlkKCdidXlOb3dBZGRDYXJ0Jyk7CiAgICAgICAgYnV5VG9wID0gMTsKICAgICAgICBidXlQbCA9IDUwMDsKICAgICAgICBtcU1kID0gMDsKICAgICAgICBmcm1JZCA9IDc7CiAgICB9CgogICAgaWYod2luZG93LmxvY2F0aW9uLm9yaWdpbiA9PSAiaHR0cHM6Ly9wcm9kdWN0Lmhrc3VuaW5nLmNvbSIpewogICAgICAgIGdvb2RzSWQ9IC8oXGQrKVwuaHRtbC8uZXhlYyh3aW5kb3cubG9jYXRpb24uaHJlZilbMV07CiAgICAgICAgc2ppZCA9ICAvKFxkKykvLmV4ZWMod2luZG93LmxvY2F0aW9uLmhyZWYpWzFdOwogICAgICAgIGlmICgod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZigndXRtX3NvdXJjZT11bmlvbicpPT0tMSkmJndpbmRvdy5sb2NhdGlvbi5ocmVmIT1mcm9VcmwpIHsKICAgICAgICAgICAgZ2V0WWhxdXJsKGdvb2RzSWQsc2ppZCw0LDIpOwogICAgICAgIH0KICAgICAgICB2YXIgc25oa0RpdiA9IGdldFRhcmdldEJ5VEFWKCdkaXYnLCdjbGFzcycsJ21haW4tYnRucycpOwogICAgICAgIHNuaGtEaXYuaWQgPSAiQWljZURpdiIKICAgICAgICAkKCcjQWljZURpdicpLmFwcGVuZChteUNvblNOKTsKICAgICAgICBidG5CdXkgPWdldFRhcmdldEJ5VEFWKCdsaScsJ2NsYXNzJywnYnRuLWRhcmstYnV5Jyk7CiAgICAgICAgYnV5VG9wID0gMTsKICAgICAgICBidXlQbCA9IDUwMDsKICAgICAgICBtcU1kID0gMDsKICAgICAgICBmcm1JZCA9IDc7CiAgICB9CgoKICAgIGlmKHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gPT0gImh0dHBzOi8vc2hvcHBpbmcuc3VuaW5nLmNvbSIgJiYgd2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZignY2FydC5kbycpIT0tMSApewogICAgICAgIHZhciBTZWFyY2hTbiA9IGdldFRhcmdldEJ5VEFWKCdkaXYnLCdjbGFzcycsJ2NhcnQtc2VhcmNoJyk7CiAgICAgICAgU2VhcmNoU24uaWQgPSAiQWljZVNlYXJjaCIKICAgICAgICAkKCcjQWljZVNlYXJjaCcpLmFwcGVuZChteUNvbkNhcnQpOwogICAgICAgIGJ1eVRvcCA9IDE7CiAgICAgICAgYnV5UGwgPSA1MDA7CiAgICAgICAgZnJtSWQgPSA4OwogICAgfQoKICAgIGlmKHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gPT0gImh0dHBzOi8vc2hvcHBpbmcuaGtzdW5pbmcuY29tIiAgJiYgd2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZignY2FydDEnKSE9LTEpewogICAgICAgIHZhciBTZWFyY2hTbmhrID0gZ2V0VGFyZ2V0QnlUQVYoJ2RpdicsJ2NsYXNzJywnbmctaGVhZGVyLWJveCcpOwogICAgICAgIFNlYXJjaFNuaGsuaWQgPSAiQWljZVNlYXJjaCIKICAgICAgICAkKCcjQWljZVNlYXJjaCcpLmFwcGVuZChteUNvbkNhcnQpOwogICAgICAgIGJ1eVRvcCA9IDE7CiAgICAgICAgYnV5UGwgPSA1MDA7CiAgICAgICAgZnJtSWQgPSA4OwogICAgfQoKICAgIGlmKHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gPT0gImh0dHBzOi8vd3FkZWFsLmpkLmNvbSIgfHwgd2luZG93LmxvY2F0aW9uLm9yaWdpbiA9PSAiaHR0cHM6Ly93cXMuamQuY29tInx8IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gPT0gImh0dHBzOi8vd3EuamQuY29tIiApewogICAgICAgIG1xTWQgPSAwOwogICAgICAgIGZybUlkID0gOTsKICAgIH0KCiAgICBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZigiaHR0cHM6Ly9idXkudG1hbGwuY29tL29yZGVyL2NvbmZpcm1PcmRlcldhcC5odG0iKSE9LTEpewogICAgICAgIG1xTWQgPSAwOwogICAgICAgIGZybUlkID0gMTA7CiAgICB9CgogICAgaWYod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZigiaHR0cHM6Ly9kZXRhaWwubWVpenUuY29tL2l0ZW0iKSE9LTEpewogICAgICAgIHZhciBtekRpdiA9IGdldFRhcmdldEJ5VEFWKCdkaXYnLCdjbGFzcycsJ3Byb3BlcnR5LWJ1eScpOwogICAgICAgIG16RGl2LmlkID0gIkFpY2VEaXYiCiAgICAgICAgJCgnI0FpY2VEaXYnKS5hcHBlbmQobXlDb25TTik7CiAgICAgICAgYnRuQnV5ID1nZXRUYXJnZXRCeUlkKCdKX2J0bkJ1eScpOwogICAgICAgIGJ1eVRvcCA9IDE7CiAgICAgICAgYnV5UGwgPSA1MDA7CiAgICAgICAgbXFNZCA9IDA7CiAgICAgICAgZnJtSWQgPSAxMTsKICAgIH0KCiAgICBpZih3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCJsZW5vdm8uY29tLmNuL3Byb2R1Y3QiKSE9LTEpewogICAgICAgIHZhciBseERpdiA9IGdldFRhcmdldEJ5SWQoJ2RldGFpbF9yaWdodCcpOwogICAgICAgIGx4RGl2LmlkID0gIkFpY2VEaXYiCiAgICAgICAgJCgnI0FpY2VEaXYnKS5hcHBlbmQobXlDb25TTik7CiAgICAgICAgYnRuQnV5ID1nZXRUYXJnZXRCeUlkKCdsamdtJyk7CiAgICAgICAgYnV5VG9wID0gMTsKICAgICAgICBidXlQbCA9IDUwMDsKICAgICAgICBtcU1kID0gMDsKICAgICAgICBmcm1JZCA9IDEyOwogICAgfQoKICAgIGlmKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoImFzdXMuY29tLmNuL3N0b3JlL3Byb2R1Y3QiKSE9LTEpewogICAgICAgIHZhciBoc0RpdiA9IGdldFRhcmdldEJ5VEFWKCdkaXYnLCdjbGFzcycsJ3Byb2R1Y3QtYWN0aW9uJyk7CiAgICAgICAgaHNEaXYuaWQgPSAiQWljZURpdiIKICAgICAgICAkKCcjQWljZURpdicpLmFwcGVuZChteUNvblNOKTsKICAgICAgICBidG5CdXkgPWdldFRhcmdldEJ5VEFWKCdidXR0b24nLCdjbGFzcycsJ2J0biBidG4taW1wb3J0IGJ0bi1odWdlIGFjdGlvbi1idXlub3cnKTsKICAgICAgICBidXlUb3AgPSAxOwogICAgICAgIGJ1eVBsID0gNTAwOwogICAgICAgIG1xTWQgPSAwOwogICAgICAgIGZybUlkID0gMTM7CiAgICB9CgogICAgaWYod2luZG93LmxvY2F0aW9uLm9yaWdpbiA9PSAiaHR0cHM6Ly9kZXRhaWwudmlwLmNvbSIpewogICAgICAgIGdvb2RzSWQ9IC8oXGQrKVwuaHRtbC8uZXhlYyh3aW5kb3cubG9jYXRpb24uaHJlZilbMV07CiAgICAgICAgaWYgKCh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCd0LnZpcC5jb20nKT09LTEpJiZ3aW5kb3cubG9jYXRpb24uaHJlZiE9ZnJvVXJsKSB7CiAgICAgICAgICAgIGdldFlocXVybChnb29kc0lkLCcnLDUsMik7CiAgICAgICAgfQogICAgICAgIHZhciB2aXBEaXYgPSBnZXRUYXJnZXRCeVRBVignZGl2JywnY2xhc3MnLCdwcm9kdWN0LWNvbnRlbnQtaW5uZXIgY2xlYXJmaXggaGFzUGFuZWxWaWV3Jyk7CiAgICAgICAgdmlwRGl2LmlkID0gIkFpY2VEaXYiCiAgICAgICAgJCgnI0FpY2VEaXYnKS5hcHBlbmQobXlDb25WaXApOwogICAgICAgIGJ0bkJ1eSA9Z2V0VGFyZ2V0QnlJZCgnSi1jYXJ0QWRkLXN1Ym1pdCcpOwogICAgICAgIGJ1eVRvcCA9IDE7CiAgICAgICAgYnV5UGwgPSA1MDA7CiAgICAgICAgbXFNZCA9IDA7CiAgICAgICAgZnJtSWQgPSAxNDsKICAgIH0KCiAgICBpZih3aW5kb3cubG9jYXRpb24ub3JpZ2luID09ICJodHRwczovL2NhcnQudmlwLmNvbSIpewogICAgICAgIHZhciB2aXBTZWFyY2ggPSBnZXRUYXJnZXRCeVRBVignZGl2JywnY2xhc3MnLCdtLWZsb3ctc3RlcCB6LWZsb3ctc3RlcC1jYXJ0Jyk7CiAgICAgICAgdmlwU2VhcmNoLmlkID0gIkFpY2VTZWFyY2giCiAgICAgICAgJCgnI0FpY2VTZWFyY2gnKS5hcHBlbmQobXlDb25KRENhcnQpOwogICAgICAgIGJ1eVRvcCA9IDE7CiAgICAgICAgYnV5UGwgPSA1MDA7CiAgICAgICAgZnJtSWQgPSAxNTsKICAgIH0KCiAgICBpZih3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCJuaWtlLmNvbS9jbi90IikhPS0xKXsKICAgICAgICBHTV9zZXRWYWx1ZSgiZ29DYXJ0IiwwKTsvL+mBv+WFjeW9seWTjeato+W4uOS4i+WNlQogICAgICAgIGZybUlkID0gMTY7CiAgICB9CgogICAgaWYod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZigibmlrZS5jb20vY24vemgtSGFucy9jYXJ0IikhPS0xKXsKICAgICAgICBHTV9zZXRWYWx1ZSgiZ29DYXJ0IiwwKTsvL+mBv+WFjeW9seWTjeato+W4uOS4i+WNlQogICAgICAgIGlmKGdvQ2FydD09MSl7CiAgICAgICAgICAgIHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgICAgICAgIHZhciBuaWtlSnMgPSBnZXRUYXJnZXRCeVRBVignYnV0dG9uJywnY2xhc3MnLCdjc3MtMWxrY25pbyBlMTZwd2R0bTAnKTsKICAgICAgICAgICAgICAgIGlmIChuaWtlSnMgIT09IG51bGwgJiYgdHlwZW9mKG5pa2VKcykgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICAgICAgbmlrZUpzLmNsaWNrKCk7CiAgICAgICAgICAgICAgICB9ZWxzZXt9CiAgICAgICAgICAgIH0sMTAwMCk7CiAgICAgICAgfQogICAgICAgIGZybUlkID0gMTc7CiAgICB9CgoKICAgIHZhciBja2h0bWw9IiI7CiAgICBpZih3aW5kb3cubG9jYXRpb24ub3JpZ2luID09ICJodHRwczovL3MuY2xpY2sudGFvYmFvLmNvbSJ8fHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gPT0gImh0dHBzOi8vdW5pb24tY2xpY2suamQuY29tIil7CiAgICAgICAgY2todG1sPSQoIjpyb290IikuaHRtbCgpLnJlcGxhY2UoInRvcC5sb2NhdGlvbiIsInNlbGYubG9jYXRpb24iKTsKICAgICAgICB2YXIgY3p6ID0gIC88c2NyaXB0W1xzXStbXGRcRF0qPFwvc2NyaXB0Pi9nLmV4ZWMoY2todG1sKTsKICAgICAgICBkb2N1bWVudC53cml0ZShjenopOwogICAgfQoKICAgIGZ1bmN0aW9uIHF4ZFRCKCl7IC8v5Zugc2t15LiN6Kem5Y+R6aG16Z2i5Yi35paw77yM5reY5a6d5by65LiL5Y2V54us56uL5Ye65p2l5aSE55CGCiAgICAgICAgdmFyIHNrUmV4ID0gbnVsbDsKICAgICAgICBpZiAoZnJtSWQ9PTEpewogICAgICAgICAgICBza1JleCA9IC8oPzomfFw/KXNrdUlkPShcZCspLy5leGVjKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTsKICAgICAgICAgICAgaWYgKHNrUmV4IT1udWxsKXsKICAgICAgICAgICAgICAgIHNrdUlkPXNrUmV4WzFdIDsKICAgICAgICAgICAgfQogICAgICAgIH1lbHNlIGlmIChmcm1JZD09Mil7CiAgICAgICAgICAgIHZhciBzZWxTa3UgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJ0Yi1zZWxlY3RlZCIpOwogICAgICAgICAgICBpZiAoc2VsU2t1ICE9PSBudWxsICYmIHR5cGVvZihzZWxTa3UpID09PSAnb2JqZWN0JyYmc2VsU2t1WzBdLmdldEF0dHJpYnV0ZSgiZGF0YS12YWx1ZSIpIT1udWxsKXsKICAgICAgICAgICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKGA7YCArc2VsU2t1WzBdLmdldEF0dHJpYnV0ZSgiZGF0YS12YWx1ZSIpK2A7YCtzZWxTa3VbMV0uZ2V0QXR0cmlidXRlKCJkYXRhLXZhbHVlIikrYDsuKj9za3VJZFwiOi4qP1wiKC4qPylcImApOwogICAgICAgICAgICAgICAgc2tSZXggPSByZWcuZXhlYyhKU09OLnN0cmluZ2lmeShIdWIuY29uZmlnLmdldCgnc2t1JykudmFsSXRlbUluZm8uc2t1TWFwKSk7CiAgICAgICAgICAgICAgICBpZiAoc2tSZXghPW51bGwpewogICAgICAgICAgICAgICAgICAgIHNrdUlkPXNrUmV4WzFdIDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB2YXIgcXR5ID0gZ2V0VGFyZ2V0QnlUQVYoJ2lucHV0JywnY2xhc3MnLCd0Yi10ZXh0IG11aS1hbW91bnQtaW5wdXQnKTsKICAgICAgICBpZiAocXR5ICE9PSBudWxsICYmIHR5cGVvZihxdHkpID09PSAnb2JqZWN0Jyl7CiAgICAgICAgICAgIHF0eT1xdHkudmFsdWU7CiAgICAgICAgfWVsc2UgeyBxdHkgPTEgOyB9CgogICAgICAgIGlmIChnZXRUYXJnZXRCeUlkKCJBaWNlUXhkIikuY2hlY2tlZCl7CiAgICAgICAgICAgIGdldFRhcmdldEJ5SWQoIkFpY2VReGRhIikuaHJlZj0iaHR0cHM6Ly9idXkudG1hbGwuY29tL29yZGVyL2NvbmZpcm1PcmRlcldhcC5odG0/aXRlbUlkPSIrIGdvb2RzSWQgKyImc2t1SWQ9Iisgc2t1SWQgKyImcXVhbnRpdHk9IisgcXR5ICsiJmJ1eU5vdz10cnVlJl9pbnB1dF9jaGFyc2V0PXV0Zi04JngtaXRlbWlkPSIrIGdvb2RzSWQ7CiAgICAgICAgICAgIGJ0bkJ1eT0gZ2V0VGFyZ2V0QnlJZCgiQWljZVF4ZGEiKTsKICAgICAgICAgICAgR01fc2V0VmFsdWUoInF6eGQiLDApOwogICAgICAgICAgICBidXlUb3AgPSAxMDsKICAgICAgICAgICAgYnV5UGwgPSAyNTA7CiAgICAgICAgfQogICAgfQoKICAgIHZhciBndGltZSA9IjIwMjAtMDItMjUgMjE6MjI6MTAuMCI7Ly/miqLmi43ml7bpl7QKICAgIGd0aW1lID0gZ3RpbWUuc3Vic3RyaW5nKDAsMTkpOwogICAgZ3RpbWUgPSBndGltZS5yZXBsYWNlKC8tL2csJy8nKTsKICAgIHZhciB0aW1lc3RhbXAgPSBuZXcgRGF0ZShndGltZSkuZ2V0VGltZSgpOwogICAgdmFyIHRwID0gZ2V0Q29va2llKCJmdF9xZ2QiKTsKICAgIHZhciBjRHQgPSBuZXcgRGF0ZSgpOwogICAgaWYgKHRwPT1udWxsKXsKICAgICAgICBzZXRDb29raWUoImZ0X3FnZCIsdGltZXN0YW1wKTsKICAgICAgICBjRHQuc2V0VGltZSh0aW1lc3RhbXApOwogICAgfWVsc2V7CiAgICAgICAgY0R0LnNldFRpbWUodHApOwogICAgfQoKICAgIGNoayA9IEdNX2dldFZhbHVlKCJBdXRvU3ViT2RyIik7CgoKICAgIGlmKGZybUlkIT0wJiZmcm1JZCE9OSYmZnJtSWQhPTEwJiZmcm1JZCE9MTYmJmZybUlkIT0xNyl7CgogICAgICAgIGlmIChjaGshPW51bGwpewogICAgICAgICAgICBpZiAoY2hrPT0wKXsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdBaWNlT3NtJykuY2hlY2tlZD1mYWxzZTsKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnQWljZU9zbScpLmNoZWNrZWQ9dHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYoZnJtSWQ9PTF8ZnJtSWQ9PTJ8ZnJtSWQ9PTV8ZnJtSWQ9PTd8ZnJtSWQ9PTExfGZybUlkPT0xMnxmcm1JZD09MTN8ZnJtSWQ9PTE0KXsKICAgICAgICAgICAgaWYgKGZybUlkPT0xfGZybUlkPT0yfGZybUlkPT01KXsKICAgICAgICAgICAgICAgIHZhciBReGRNb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0FpY2VReGQnKTsKICAgICAgICAgICAgICAgIFF4ZE1vZGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBpZihReGRNb2RlLmNoZWNrZWQpewogICAgICAgICAgICAgICAgICAgICAgICBHTV9zZXRWYWx1ZSgicXp4ZCIsMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGZybUlkPT01KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlcGxhY2UoImh0dHBzOi8vcGxvZ2luLm0uamQuY29tL3VzZXIvbG9naW4uYWN0aW9uP2FwcGlkPTMwMCZyZXR1cm51cmw9IiArIGVuY29kZVVSSUNvbXBvbmVudCh3aW5kb3cubG9jYXRpb24uaHJlZikpOwogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihmcm1JZD09MXxmcm1JZD09Mil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2xvY2F0aW9uLnJlcGxhY2UoImh0dHBzOi8vbG9naW4ubS50YW9iYW8uY29tL2xvZ2luLmh0bT9yZWRpcmVjdFVSTD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5sb2NhdGlvbi5ocmVmKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnQWljZU9zbScpLmNoZWNrZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGZybUlkPT0xfGZybUlkPT0yKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdBaWNlT3NtJykuY2hlY2tlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlKCJxenhkIiwwKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIFFnTW9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdRZ01vZGUnKTsKICAgICAgICAgICAgUWdNb2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBpZihRZ01vZGUuY2hlY2tlZD09MCl7CiAgICAgICAgICAgICAgICAgICAgJCgnI0FpY2VTdGFydCcpLnByb3AoJ2xhc3RDaGlsZCcpLm5vZGVWYWx1ZT0i5LyY5oOg5Yi4IjsKICAgICAgICAgICAgICAgICAgICAkKCcjQWljZVBtJykuaGlkZSgpOwogICAgICAgICAgICAgICAgICAgIGlmWWhxPTE7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAvKgogICAgICAgICAgICAgICAgICAgIGlmKGZybUlkPT01KXsKICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygiaHR0cHM6Ly93cXMuamQuY29tL29yZGVyL3NfY29uZmlybV9taWFvLnNodG1sP3NjZW5lPWpkJmlzQ2FuRWRpdD0xJnNyYz0mY29tbWxpc3Q9LCwxLCIrIGdvb2RzSWQgKyImdXJsVHlwZT1sb2dpbiN3ZWNoYXRfcmVkaXJlY3QiKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy9sb2NhdGlvbi5yZXBsYWNlKCJodHRwczovL3dxcy5qZC5jb20vb3JkZXIvc19jb25maXJtX21pYW8uc2h0bWw/c2NlbmV2YWw9MiZzY2VuZT1qZCZpc0NhbkVkaXQ9MSZjb21tbGlzdD0sLDEsIisgZ29vZHNJZCArIiZ3ZHJlZj0iK2VuY29kZVVSSUNvbXBvbmVudCh3aW5kb3cubG9jYXRpb24uaHJlZikpOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZXBsYWNlKCJodHRwczovL3dxcy5qZC5jb20vb3JkZXIvc19jb25maXJtX21pYW8uc2h0bWw/c2NlbmV2YWw9MiZiaWQ9JnNjZW5lPWpkJmlzQ2FuRWRpdD0xJkVuY3J5cHRJbmZvPSZUb2tlbj0mY29tbWxpc3Q9LCwxLCIrZ29vZHNJZCsiJndlaWdodD0mdmVuZGVyVHlwZT0tMSZ1cmxUeXBlPWxvZ2luI3dlY2hhdF9yZWRpcmVjdCIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgICAgIGdvc3RhcnQgPSAwOwogICAgICAgICAgICAgICAgICAgICQoJyNBaWNlU3RhcnQnKS5wcm9wKCdsYXN0Q2hpbGQnKS5ub2RlVmFsdWU9IuW8gOWni+WAkuiuoeaXtiI7CiAgICAgICAgICAgICAgICAgICAgJCgnI0FpY2VQbScpLnNob3coKTsKICAgICAgICAgICAgICAgICAgICBpZllocT0wOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGlmKGZybUlkPT0zfGZybUlkPT00fGZybUlkPT02fGZybUlkPT04fGZybUlkPT0xNSl7CgogICAgICAgICAgICBpZihtcU1kIT1udWxsKXsKICAgICAgICAgICAgICAgIGlmIChtcU1kPT0wKXsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnQWljZU1xbW9kZScpLmNoZWNrZWQ9ZmFsc2U7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnQWljZU1xbW9kZScpLmNoZWNrZWQ9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICBtcU1kID0gMTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIEFpY2VNcW1vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnQWljZU1xbW9kZScpOwogICAgICAgICAgICBBaWNlTXFtb2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBHTV9zZXRWYWx1ZSgnbXFtZCcsQWljZU1xbW9kZS5jaGVja2VkPzE6MCk7CiAgICAgICAgICAgICAgICBBaWNlTXFtb2RlLmNoZWNrZWQ/bXFNZD0xOm1xTWQ9MDsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBtcUJmVGltID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0FpY2VNcW1vZGVUaW1lJykudmFsdWU7CgogICAgICAgICAgICBpZihmcm1JZD09NiYmamxNZCE9bnVsbCl7CiAgICAgICAgICAgICAgICBpZiAoamxNZD09MCl7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0FpY2VKbG1vZGUnKS5jaGVja2VkPWZhbHNlOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdBaWNlQ3ljZScpLnZhbHVlPTUwMDsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdBaWNlSmxtb2RlJykuY2hlY2tlZD10cnVlOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdBaWNlQ3ljZScpLnZhbHVlPTkwMDA7CiAgICAgICAgICAgICAgICAgICAgamxNZCA9IDE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGJ3dGltZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdBaWNlQmVmb3JlVGltZScpLnZhbHVlOwoKCiAgICAgICAgdmFyIGpzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0FpY2VTdGFydFRpbWUnKTsKICAgICAgICBqcy52YWx1ZSA9IGRhdGVGb3JtYXQoIllZWVktbW0tZGQgSEg6TU06U1MiLCBjRHQpOwogICAgICAgIC8vY29uc29sZS5sb2coanMudmFsdWUpOwoKICAgICAgICB2YXIgdGogPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnQWljZVN0YXJ0Jyk7CiAgICAgICAgdGouYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgZ3RpbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnQWljZVN0YXJ0VGltZScpLnZhbHVlIDsKICAgICAgICAgICAgZ3RpbWUgPSBndGltZS5zdWJzdHJpbmcoMCwxOSk7CiAgICAgICAgICAgIGd0aW1lID0gZ3RpbWUucmVwbGFjZSgvLS9nLCcvJyk7CiAgICAgICAgICAgIHZhciB0aW1lc3RhbXAxID0gbmV3IERhdGUoZ3RpbWUpLmdldFRpbWUoKTsKICAgICAgICAgICAgc2V0Q29va2llKCJmdF9xZ2QiLHRpbWVzdGFtcDEpOwogICAgICAgICAgICAvL2xvY2F0aW9uLnJlcGxhY2UobG9jYXRpb24uaHJlZik7CiAgICAgICAgICAgIGlmIChpZllocT09MSl7CiAgICAgICAgICAgICAgICAvL+S8mOaDoOWIuOeCueWHu+S6i+S7tgogICAgICAgICAgICAgICAgLy9hbGVydCgi5pqC5pe25peg5rOV5L2/55So6K+l5Yqf6IO977yBIik7CiAgICAgICAgICAgICAgICB2YXIgZnJJZCA9MDsKICAgICAgICAgICAgICAgIGlmIChmcm1JZD09MSB8fCBmcm1JZCA9PTIpewogICAgICAgICAgICAgICAgICAgIGZySWQgPTM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZihmcm1JZD09NSl7CiAgICAgICAgICAgICAgICAgICAgZnJJZCA9MjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKGZybUlkPT03KXsKICAgICAgICAgICAgICAgICAgICBmcklkID00OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYoZnJtSWQ9PTE0KXsKICAgICAgICAgICAgICAgICAgICBmcklkID01OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZuYW1lIikuc3JjID0gZm0gOwogICAgICAgICAgICAgICAgZm5hbWUub25sb2FkPWZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgdmFyIGV4dXJsPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm5hbWUiKS5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKHtnb29kc0lkOiBnb29kc0lkLHNqaWQ6c2ppZCxmbWQ6ZnJJZCxtaWQ6MX0sICcqJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlKCJyZWYiLDApOwogICAgICAgICAgICAgICAgaWYoZnJtSWQ9PTF8ZnJtSWQ9PTIpeyAvL+WkhOeQhua3mOWuneW8uuWItuS4i+WNlQogICAgICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlKCJnb29kc0lkIixnb29kc0lkKTsKICAgICAgICAgICAgICAgICAgICBxeGRUQigpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYoZnJtSWQ9PTN8ZnJtSWQ9PTR8ZnJtSWQ9PTZ8ZnJtSWQ9PTh8ZnJtSWQ9PTE1KXsKICAgICAgICAgICAgICAgICAgICBtcUJmVGltID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0FpY2VNcW1vZGVUaW1lJykudmFsdWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZihmcm1JZD09NSl7CiAgICAgICAgICAgICAgICAgICAgR01fc2V0VmFsdWUoImdvb2RzSWQiLGdvb2RzSWQpOwogICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnV5LW51bScpIT09IG51bGwgJiYgdHlwZW9mKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidXktbnVtJykpID09PSAnb2JqZWN0Jyl7CiAgICAgICAgICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlKCJnb29kc051bSIsZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1eS1udW0nKS52YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGdvc3RhcnQ9PTApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZ29zdGFydCA9IDE7CiAgICAgICAgICAgICAgICAgICAgaWZSZWYgPSAwOwogICAgICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlKCJBY3ljZSIsZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0FpY2VDeWNlJykudmFsdWUpOwogICAgICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlKCJnb0J0biIsMSk7CiAgICAgICAgICAgICAgICAgICAgJCgnI0FpY2VTdGFydCcpLnByb3AoJ2xhc3RDaGlsZCcpLm5vZGVWYWx1ZT0i5q2j5Zyo5YCS6K6h5pe2IjsKICAgICAgICAgICAgICAgIH1lbHNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZ29zdGFydCA9IDA7CiAgICAgICAgICAgICAgICAgICAgJCgnI0FpY2VTdGFydCcpLnByb3AoJ2xhc3RDaGlsZCcpLm5vZGVWYWx1ZT0i5byA5aeL5YCS6K6h5pe2IjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgU3ljVGltZUNoayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdBaWNlU3ljVGltZScpOwogICAgICAgICAgICAgICAgaWYgKFN5Y1RpbWVDaGsuY2hlY2tlZD09MCl7CiAgICAgICAgICAgICAgICAgICAgc3luY0xvY1RpbWUoKTsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHN5bmNUaW1lKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgfSk7CgogICAgICAgIHZhciBBdXRvT3NtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0FpY2VPc20nKTsKICAgICAgICBBdXRvT3NtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIEdNX3NldFZhbHVlKCJBdXRvU3ViT2RyIixBdXRvT3NtLmNoZWNrZWQ/MTowKTsKICAgICAgICAgICAgQXV0b09zbS5jaGVja2VkP2Noaz0xOmNoaz0wOwogICAgICAgIH0pOwoKICAgICAgICBpZihmcm1JZD09Nil7CiAgICAgICAgICAgIHZhciBBSmwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnQWljZUpsbW9kZScpOwogICAgICAgICAgICBBSmwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlKCJqbG1kIixBSmwuY2hlY2tlZD8xOjApOwogICAgICAgICAgICAgICAgaWYoQUpsLmNoZWNrZWQpewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLmjaHmvI/mqKHlvI/pu5jorqTlhajpgInotK3nianovabvvIzlvIDlkK/liY3or7fnoa7kv53otK3nianovabph4zpg73mmK/pnIDopoHmjaHmvI/nmoTllYblk4EiKTsKICAgICAgICAgICAgICAgICAgICBqbE1kID0xOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdBaWNlQ3ljZScpLnZhbHVlPTkwMDA7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBqbE1kPTA7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0FpY2VDeWNlJykudmFsdWU9NTAwOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CgoKICAgICAgICB2YXIgYnRuUHJpY2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnQWljZVByaWNlJyk7CiAgICAgICAgaWYgKGJ0blByaWNlICE9PSBudWxsICYmIHR5cGVvZihidG5QcmljZSkgPT09ICdvYmplY3QnKXsKICAgICAgICAgICAgYnRuUHJpY2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIC8v5Y6G5Y+y5Lu35qC854K55Ye75LqL5Lu2CiAgICAgICAgICAgICAgICBwZGF0YSA9IG51bGw7CiAgICAgICAgICAgICAgICBwYmVnaW5UaW1lID0gbnVsbDsKICAgICAgICAgICAgICAgIHBpY2RhdGEgPSBudWxsOwogICAgICAgICAgICAgICAgdmFyIHVybCA9IGxvY2F0aW9uLmhyZWY7CiAgICAgICAgICAgICAgICB2YXIgZ3dkVXJsID0gImh0dHBzOi8vYnJvd3Nlci5nd2RhbmcuY29tL2V4dGVuc2lvbi9wcmljZV90b3dhcmRzP3VybD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KHVybCkKICAgICAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICB1cmw6IGd3ZFVybCwKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDEwMDAwLAogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgICAgICAgICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgICAgICAgICAgICAgICAgJ0NhY2hlLUNvbnRyb2wnOiAncHVibGljJwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgb25sb2FkOiBmdW5jdGlvbihyZXMpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAvL2xvYWRpbmdNYXNrLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobWFzayk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKHJlcy5yZXNwb25zZVRleHQpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uLmlzX2JhbiA9PSBudWxsKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coanNvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWxsSGlkZT0iIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB5ZWFySGlkZT0iIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtb250aEhpZGU9IiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvbi5zdG9yZVswXS5hbGxfbGluZSA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsSGlkZT0ic3R5bGU9J2Rpc3BsYXk6IG5vbmU7JyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvbi5zdG9yZVswXS55ZWFyX2xpbmUgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHllYXJIaWRlPSJzdHlsZT0nZGlzcGxheTogbm9uZTsnIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uLnN0b3JlWzBdLm1vbnRoX2xpbmUgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoSGlkZT0ic3R5bGU9J2Rpc3BsYXk6IG5vbmU7JyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvbi5zdG9yZS5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGRhdGEgPSBqc29uLnN0b3JlWzFdLmFsbF9saW5lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBkYXRhID0ganNvbi5zdG9yZVswXS5hbGxfbGluZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBiZWdpblRpbWUgPSBqc29uLnN0b3JlWzBdLmFsbF9saW5lX2JlZ2luX3RpbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaWNkYXRhID0gZGRhdGE7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhtbCA9ICI8ZGl2ICAgc3R5bGU9J21hcmdpbi1sZWZ0OjUwcHg7bWFyZ2luLXRvcDoyMHB4O2Rpc3BsYXk6IGJsb2NrOyc+PGEgY2xhc3M9J2FjdGl2ZS1wbG90IHR5cGUtcGxvdCcgIithbGxIaWRlKyIgaWQ9J3Bsb3RBbGwnPuWFqOmDqDwvYT48YSBjbGFzcz0ndHlwZS1wbG90JyAiKyB5ZWFySGlkZSArIiBpZD0ncGxvdFllYXInPuW5tOe6vzwvYT48YSBjbGFzcz0ndHlwZS1wbG90JyAiK21vbnRoSGlkZSsiIGlkPSdwbG90TW9udGgnPuaciOe6vzwvYT4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaG1sPSBobWwgKyAiPGRpdiBpZD0naGlzcHJpY2UnIHN0eWxlPSd3aWR0aDogNzIwcHg7aGVpZ2h0OjM1MHB4O21hcmdpbjogMDtwYWRkaW5nOiAwJz48L2Rpdj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BXaW5kKCcnLCcwJywn5Y6G5Y+y5Lu35qC8JyxoaXNQcmljZVNob3coaG1sKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhqc29uLmFjdGlvbi50byk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcFdpbmQoanNvbi5hY3Rpb24udG8sJzEnLCfor7fpqozor4HlkI7liLfmlrDpobXpnaLvvIEnLCcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgfSk7CgogICAgICAgIH0KICAgIH0KCgoKICAgIGZ1bmN0aW9uIGhpc1ByaWNlU2hvdyhzQm9keSl7CgogICAgICAgIHZhciBwcmljZUh0bWw9CiAgICAgICAgICAgIGAKPGh0bWw+CjxoZWFkPgo8bWV0YSBjaGFyc2V0PSJnYmsiIC8+CjxtZXRhIG5hbWU9InJlbmRlcmVyIiBjb250ZW50PSJ3ZWJraXQiLz4KPG1ldGEgaHR0cC1lcXVpdj0iWC1VQS1Db21wYXRpYmxlIiBjb250ZW50PSJJRT1FZGdlIi8+CjwvaGVhZD4KPFRJVExFPuWOhuWPsuS7t+agvDwvVElUTEU+CjxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9lY2hhcnRzLzQuMy4wL2VjaGFydHMubWluLmpzIj48L3NjcmlwdD4KPEJPRFkgQkdDT0xPUj0jZmZmZmZmPgoke3NCb2R5fQo8L0JPRFk+CjxzY3JpcHQ+CnZhciBwQ2hhcnQgPSBlY2hhcnRzLmluaXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hpc3ByaWNlJykpOwpzaG93UHJpY2UoKTsKZnVuY3Rpb24gc2hvd1ByaWNlKCkgewp2YXIgZGF0YSA9WyR7cGRhdGF9XTsKdmFyIGJlZ2luVGltZSA9JHtwYmVnaW5UaW1lfTsKdmFyIHBpY2RhdGEgPVske3BpY2RhdGF9XTsKdmFyIGR0ID0gW107CmZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykgewp2YXIgZCA9IG5ldyBEYXRlKGJlZ2luVGltZSk7CmQuc2V0RGF0ZShkLmdldERhdGUoKSArIGkpOwpkdC5wdXNoKGQudG9Mb2NhbGVEYXRlU3RyaW5nKCkpOwp9CgovLyDmjIflrprlm77ooajnmoTphY3nva7pobnlkozmlbDmja4KdmFyIG9wdGlvbiA9IHsKCnRvb2x0aXA6IHsKZW50ZXJhYmxlOiB0cnVlLAp0cmlnZ2VyOiAnYXhpcycsCmZvcm1hdHRlcjogZnVuY3Rpb24gKHBhcmFtcykgewoKcmV0dXJuIHBhcmFtc1swXS5heGlzVmFsdWUgKyAiPGJyLz4iICsgcGFyYW1zWzBdLmRhdGE7Cn0sCmF4aXNQb2ludGVyOiB7CmFuaW1hdGlvbjogZmFsc2UKfQp9LApsZWdlbmQ6IHsKZGF0YTogWyfpobXpnaLku7cnLCAn5Yiw5omL5Lu3J10sCnNlbGVjdGVkOiB7CifpobXpnaLku7cnOiB0cnVlLAon5Yiw5omL5Lu3JzogdHJ1ZQoKfQoKfSwKeEF4aXM6IHsKZGF0YTogZHQsCnNwbGl0QXJlYTogeyBzaG93OiBmYWxzZSB9LApib3VuZGFyeUdhcDogZmFsc2UsCnNwbGl0TGluZTogewpzaG93OiB0cnVlLAoKfSwKYXhpc0xhYmVsOiB7CgppbnRlcnZhbDogcGFyc2VJbnQoKGRhdGEubGVuZ3RoKSAvIDEwKSwKZm9ybWF0dGVyOiBmdW5jdGlvbiAodmFsdWUpIHsKCnJldHVybiB2YWx1ZS5zdWJzdHJpbmcoNSk7Cn0KfSwKfSwKeUF4aXM6IHsKc3BsaXRBcmVhOiB7IHNob3c6IGZhbHNlIH0sCnNwbGl0TGluZTogewpzaG93OiB0cnVlLAoKfQp9LApzZXJpZXM6IFt7Cm5hbWU6ICfpobXpnaLku7cnLAp0eXBlOiAnbGluZScsCmRhdGE6IGRhdGEsCnNob3dTeW1ib2w6IGZhbHNlLApob3ZlckFuaW1hdGlvbjogZmFsc2UsCm1hcmtQb2ludDogewpzeW1ib2w6ICdwaW4nLAoKZGF0YTogWwp7IHR5cGU6ICdtYXgnLCBuYW1lOiAn5pyA5aSn5YC8JyB9LAp7IHR5cGU6ICdtaW4nLCBuYW1lOiAn5pyA5bCP5YC8JyB9Cl0KfSwKbWFya0xpbmU6IHsKZGF0YTogWwp7IHR5cGU6ICdhdmVyYWdlJywgbmFtZTogJ+W5s+Wdh+WAvCcgfQpdCn0KfSwKewpuYW1lOiAn5Yiw5omL5Lu3JywKdHlwZTogJ2xpbmUnLApkYXRhOiBwaWNkYXRhLApzaG93U3ltYm9sOiBmYWxzZSwKaG92ZXJBbmltYXRpb246IGZhbHNlLAptYXJrUG9pbnQ6IHsKc3ltYm9sOiAncGluJywKCmRhdGE6IFsKeyB0eXBlOiAnbWF4JywgbmFtZTogJ+acgOWkp+WAvCcgfSwKeyB0eXBlOiAnbWluJywgbmFtZTogJ+acgOWwj+WAvCcgfQpdCn0sCm1hcmtMaW5lOiB7CmRhdGE6IFsKeyB0eXBlOiAnYXZlcmFnZScsIG5hbWU6ICflubPlnYflgLwnIH0KXQp9Cn0KXQp9OwoKCnBDaGFydC5zZXRPcHRpb24ob3B0aW9uKTsKfTsKPC9zY3JpcHQ+CjwvaHRtbD4KYAogICAgICAgIHJldHVybiBwcmljZUh0bWw7CiAgICB9OwogICAgaWYoZnJtSWQ9PTkgJiYgR01fZ2V0VmFsdWUoImdvb2RzSWQiKSE9MCl7ICAvL+S6rOS4nOaJi+acuumhtemdouWkhOeQhiDpgb/lhY3nlKjmiLfmraPluLjorr/pl67miYvmnLrpobXpnaLmiafooYzohJrmnKwKICAgICAgICB2YXIgdDIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsKICAgICAgICAgICAgaWYgKCQoIiNpZC1wY3Byb21wdC1tYXNrIikpIHsKICAgICAgICAgICAgICAgICQoIiNpZC1wY3Byb21wdC1tYXNrIikucmVtb3ZlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCQoIi5tb2RfYWxlcnRfdjJfbWFzIikpIHsKICAgICAgICAgICAgICAgICQoIi5tb2RfYWxlcnRfdjJfbWFzIikucmVtb3ZlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCQoIi5tb2RfYWxlcnRfbWFzayIpKSB7CiAgICAgICAgICAgICAgICAkKCIubW9kX2FsZXJ0X21hc2siKS5yZW1vdmUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZigkKCIubW9kX2FsZXJ0X3YyIHNob3cgZml4ZWQiKSl7CiAgICAgICAgICAgICAgICAkKCIubW9kX2FsZXJ0X3YyIHNob3cgZml4ZWQiKS5yZW1vdmUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZigkKCIubW9kX2FsZXJ0X3YyX21hc2sgc2hvdyIpKXsKICAgICAgICAgICAgICAgICQoIi5tb2RfYWxlcnRfdjJfbWFzayBzaG93IikucmVtb3ZlKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICgkKCIjbGluZVZvaWNlTW9iaWxlIikubGVuZ3RoID09IDEpIHsKICAgICAgICAgICAgICAgIHZhciBtb2JpbGUgPSAkKCIjbGluZVZvaWNlTW9iaWxlIikudmFsKCk7CiAgICAgICAgICAgICAgICBpZiAobW9iaWxlID09ICIiKSB7CiAgICAgICAgICAgICAgICAgICAgJCgiI2xpbmVWb2ljZU1vYmlsZSIpLnZhbCgiMTM5MTIzNDU2NzgiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHBob25lTnVtID0gZ2V0VGFyZ2V0QnlUQVYoJ2lucHV0JywnY2xhc3MnLCdudW0nKTsKICAgICAgICAgICAgdmFyIGdOdW0gPSBHTV9nZXRWYWx1ZSgiZ29vZHNOdW0iKTsKICAgICAgICAgICAgaWYgKHBob25lTnVtICE9PSBudWxsICYmIHR5cGVvZihwaG9uZU51bSkgPT0gJ29iamVjdCcgJiYgcGhvbmVOdW0udmFsdWUhPWdOdW0pIHsKICAgICAgICAgICAgICAgIHBob25lTnVtLnZhbHVlPSBnTnVtOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgemZrID0gbnVsbDsKICAgICAgICAgICAgdmFyIHpmazE9IDAgOwogICAgICAgICAgICBpZiAoZ2V0VGFyZ2V0QnlJZCgicGF5UGFzcyIpICE9PSBudWxsICYmIHR5cGVvZihnZXRUYXJnZXRCeUlkKCJwYXlQYXNzIikpID09ICdvYmplY3QnKXsKICAgICAgICAgICAgICAgIHpmayA9IGdldFRhcmdldEJ5SWQoInBheVBhc3MiKS5zdHlsZS5kaXNwbGF5OwogICAgICAgICAgICAgICAgaWYgKHpmayE9Im5vbmUiKXsKICAgICAgICAgICAgICAgICAgICB2YXIgemZrU2QgPSBnZXRUYXJnZXRCeUlkKCJzaG90RG90IikubGFzdENoaWxkOwogICAgICAgICAgICAgICAgICAgIGlmKCQoIiNzaG90RG90IikuY2hpbGRyZW4oKS5sZW5ndGg9PTYgJiYgemZrU2QhPT0gbnVsbCAmJiB0eXBlb2YoemZrU2QpID09ICdvYmplY3QnICYmIHpma1NkLmNsYXNzTmFtZSE9Im9uIikgewogICAgICAgICAgICAgICAgICAgICAgICB6ZmsxPTA7CiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIHpmazE9MTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICB6ZmsxPTA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIG9sWmYgPWdldFRhcmdldEJ5SWQoImJ0blBheU9uTGluZSIpOwogICAgICAgICAgICBpZiAob2xaZiAhPT0gbnVsbCAmJiB0eXBlb2Yob2xaZikgPT09ICdvYmplY3QnICYmIHpmazEhPTEpIHsKICAgICAgICAgICAgICAgIG9sWmYuY2xpY2soKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHp4WmYgPSBudWxsOwogICAgICAgICAgICB6eFpmID0gZ2V0VGFyZ2V0QnlUQVYoImEiLCJjbGFzcyIsIm1vZF9idG4gYmdfMiIpOwogICAgICAgICAgICBpZiAoenhaZiAhPT0gbnVsbCAmJiB0eXBlb2YoenhaZikgPT09ICdvYmplY3QnJiYgemZrMSE9MSkgewogICAgICAgICAgICAgICAgenhaZi5jbGljaygpOwogICAgICAgICAgICAgICAgLy9jbGVhckludGVydmFsKHQyKTsKICAgICAgICAgICAgfWVsc2V7fQoKCiAgICAgICAgICAgIC8vIOWPlua2iOaPkOekugoKICAgICAgICAgICAgaWYgKGdldFRhcmdldEJ5VEFWKCJhIiwiY2xhc3MiLCJtb2RfYWxlcnRfdjIgc2hvdyBmaXhlZCIpICE9PSBudWxsICYmIHR5cGVvZihnZXRUYXJnZXRCeVRBVigiYSIsImNsYXNzIiwibW9kX2FsZXJ0X3YyIHNob3cgZml4ZWQiKSkgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICB2YXIgYWx0djIgPSBnZXRUYXJnZXRCeVRBVigiYSIsImNsYXNzIiwibW9kX2FsZXJ0X3YyIHNob3cgZml4ZWQiKS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYScpWzBdOwogICAgICAgICAgICAgICAgaWYgKGFsdHYyICE9PSBudWxsICYmIHR5cGVvZihhbHR2MikgPT09ICdvYmplY3QnKXsKICAgICAgICAgICAgICAgICAgICBhbHR2Mi5jbGljaygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgZ1dkID0gbnVsbDsKICAgICAgICAgICAgZ1dkID0gZ2V0VGFyZ2V0QnlUQVYoImEiLCJjbGFzcyIsImJ0biBjb25maXJtIGJ0bl8xIik7CiAgICAgICAgICAgIGlmIChnV2QgIT09IG51bGwgJiYgdHlwZW9mKGdXZCkgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICBnV2QuY2xpY2soKTsKICAgICAgICAgICAgICAgIC8vY2xlYXJJbnRlcnZhbCh0Mik7CiAgICAgICAgICAgIH1lbHNle30KCiAgICAgICAgICAgIC8vCiAgICAgICAgICAgIHZhciBxcjEgPSBnZXRUYXJnZXRCeVRBVigiYSIsImNsYXNzIiwibW9kX2J0biBjb25maXJtIGJnX2dfamQiKTsKICAgICAgICAgICAgaWYgKHFyMSAhPT0gbnVsbCAmJiB0eXBlb2YocXIxKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgIHFyMS5jbGljaygpOwogICAgICAgICAgICAgICAgLy9jbGVhckludGVydmFsKHQyKTsKICAgICAgICAgICAgfQoKICAgICAgICB9LGN5Y2UpCiAgICAgICAgfQoKICAgIGlmKGZybUlkPT0xMCAmJiBHTV9nZXRWYWx1ZSgiZ29vZHNJZCIpIT0wKXsgLy/mt5jlrp3miYvmnLrpobXpnaLlpITnkIYKICAgICAgICB2YXIgdDMgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsKICAgICAgICAgICAgdmFyIG9yZGVydGVybXMgPW51bGw7CiAgICAgICAgICAgIG9yZGVydGVybXMgPSBnZXRUYXJnZXRCeVRBVigiZGl2IiwiY2xhc3MiLCJvcmRlci10ZXJtcyIpOy8v5aSE55CG5ZCM5oSP5Y2P6K6uCiAgICAgICAgICAgIGlmIChvcmRlcnRlcm1zICE9PSBudWxsICYmIHR5cGVvZihvcmRlcnRlcm1zKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgIG9yZGVydGVybXMuZmlyc3RFbGVtZW50Q2hpbGQubGFzdEVsZW1lbnRDaGlsZC5sYXN0RWxlbWVudENoaWxkLmlkPSJvcmRlcnRlcm1zIjsKICAgICAgICAgICAgICAgICQoIiNvcmRlcnRlcm1zIikudHJpZ2dlcigiY2xpY2siKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHN1Ym1pdFRicyA9IG51bGw7CiAgICAgICAgICAgIHN1Ym1pdFRicyA9IGdldFRhcmdldEJ5VEFWKCJkaXYiLCJjbGFzcyIsImNlbGwgZml4ZWQgYWN0aW9uIik7CiAgICAgICAgICAgIGlmIChzdWJtaXRUYnMgIT09IG51bGwgJiYgdHlwZW9mKHN1Ym1pdFRicykgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICBzdWJtaXRUYnMuZmlyc3RFbGVtZW50Q2hpbGQuaWQ9ICJzdWJtaXRUYnMiOwogICAgICAgICAgICAgICAgJCgiI3N1Ym1pdFRicyIpLnRyaWdnZXIoImNsaWNrIik7CiAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKXsgIC8v5Zug5reY5a6d6ZmQ5Yi2IOWbuuWumuS4i+WNlemikeeOhwogICAgICAgICAgICAgICAgICAgICQoIiNzdWJtaXRUYnMiKS50cmlnZ2VyKCJjbGljayIpOwoKICAgICAgICAgICAgICAgICAgICB2YXIgb3JkZXJtc2J0biA9bnVsbDsKICAgICAgICAgICAgICAgICAgICBvcmRlcm1zYnRuID0gZ2V0VGFyZ2V0QnlUQVYoImRpdiIsImNsYXNzIiwiY2VsbCBhbGlnbi1jZW50ZXIgb3JkZXItbXMtYnRuIGJ0bi1vayIpOy8v5aSE55CG5ZCM5oSP6KeE5YiZ5bm25LuY5qy+CiAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVybXNidG4gIT09IG51bGwgJiYgdHlwZW9mKG9yZGVybXNidG4pID09PSAnb2JqZWN0JykgewogICAgICAgICAgICAgICAgICAgICAgICBvcmRlcm1zYnRuLmlkPSJvcmRlcm1zYnRuIjsKICAgICAgICAgICAgICAgICAgICAgICAgJCgiI29yZGVybXNidG4iKS50cmlnZ2VyKCJjbGljayIpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB9LCAxMDAwKTsKCgoKICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodDMpOwoKICAgICAgICAgICAgfWVsc2V7fQoKICAgICAgICB9LDIwMCkKCiAgICAgICAgfQoKICAgIGlmKGNoaz09MSAmJiBnb0J0bj09MSl7IC8v6Ieq5Yqo5o+Q5Lqk6K6i5Y2VCiAgICAgICAgdmFyIHQxID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBnWGQgPSBudWxsOwogICAgICAgICAgICBpZiAoKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoImpkLmNvbSIpIT0tMSl8fCh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCJqZC5oayIpIT0tMSkpewogICAgICAgICAgICAgICAgZ1hkID0gZ2V0VGFyZ2V0QnlJZCgib3JkZXItc3VibWl0Iik7CiAgICAgICAgICAgICAgICBpZihnWGQgIT09IG51bGwgJiYgdHlwZW9mKGdYZCkgPT09ICdvYmplY3QnKXsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIGdYZCA9IGdldFRhcmdldEJ5VEFWKCJidXR0b24iLCJjbGFzcyIsImNoZWNrb3V0LXN1Ym1pdCIpOwogICAgICAgICAgICAgICAgICAgICQuZ2V0KCJodHRwczovL2NhcnQuamQuY29tL3NlbGVjdEFsbEl0ZW0uYWN0aW9uP3Q9MCZvdXRTa3VzPSIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9ZWxzZSBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZigic3VuaW5nLmNvbS9vcmRlci5kbyIpIT0tMSB8IHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoInNob3BwaW5nLmhrc3VuaW5nLmNvbS9jYXJ0IikhPS0xKXsKICAgICAgICAgICAgICAgIGlmKGdldFRhcmdldEJ5VEFWKCdkaXYnLCdjbGFzcycsImNob29zZS1saXN0IikhPT0gbnVsbCAmJiB0eXBlb2YoZ2V0VGFyZ2V0QnlUQVYoJ2RpdicsJ2NsYXNzJywiY2hvb3NlLWxpc3QiKSkgPT09ICdvYmplY3QnCiAgICAgICAgICAgICAgICAgICAmJiBnZXRUYXJnZXRCeVRBVignZGl2JywnY2xhc3MnLCJjaG9vc2UtbGlzdCIpLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLmNsYXNzTmFtZSE9ImNob29zZS1pdGVtIGNoZWNrZWQiKXsKICAgICAgICAgICAgICAgICAgICBnZXRUYXJnZXRCeVRBVignZGl2JywnY2xhc3MnLCJjaG9vc2UtbGlzdCIpLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLmNsaWNrKCk7CiAgICAgICAgICAgICAgICB9Ly8tLS0g6IuP5a6B6aaZ5rivCiAgICAgICAgICAgICAgICBnWGQgPSBnZXRUYXJnZXRCeVRBVigiYSIsImNsYXNzIiwiY2hlY2tvdXQtc3VibWl0LWJ0biBjYXJ0LWJ0biBsIik7CiAgICAgICAgICAgIH1lbHNlIGlmKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoIm1laXp1LmNvbS9vcmRlciIpIT0tMSkgeyAvLy0t6a2F5pePCiAgICAgICAgICAgICAgICBnWGQgPSBnZXRUYXJnZXRCeUlkKCJzdWJtaXRGb3JtIik7CiAgICAgICAgICAgIH1lbHNlIGlmKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoImJ1eS5sZW5vdm8uY29tLmNuIikhPS0xKSB7IC8vLS3ogZTmg7MKICAgICAgICAgICAgICAgIGdYZCA9IGdldFRhcmdldEJ5VEFWKCJzcGFuIiwiY2xhc3MiLCJmciBzdWJtaXRCdG4iKTsKICAgICAgICAgICAgfWVsc2UgaWYod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZigiYXN1cy5jb20uY24vc3RvcmUvY2hlY2tvdXQiKSE9LTEpIHsgLy8tLeWNjuehlQogICAgICAgICAgICAgICAgZ1hkID0gZ2V0VGFyZ2V0QnlUQVYoImJ1dHRvbiIsImNsYXNzIiwiYnRuIGJ0bi1pbXBvcnQgYnRuLWJpZyBhY3Rpb24tc3VibWl0LW9yZGVyIGdhLWNoZWNrb3V0Iik7CiAgICAgICAgICAgIH1lbHNlIGlmKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoImNoZWNrb3V0LnZpcC5jb20iKSE9LTEpIHsgLy8tLeWUr+WTgeS8mgogICAgICAgICAgICAgICAgZ1hkID0gZ2V0VGFyZ2V0QnlUQVYoImEiLCJjbGFzcyIsInVpLWJ0bi1sYXJnZSB1aS1idG4tcHJpbWFyeSB1aS1idG4tbG9hZGluZyBKX29yZGVyX3N1Ym1pdF9idG4iKTsKICAgICAgICAgICAgfWVsc2UgaWYod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZigibmlrZS5jb20vY24vY2hlY2tvdXQiKSE9LTEpIHsgLy8tLW5pa2UKICAgICAgICAgICAgICAgIGdYZCA9IGdldFRhcmdldEJ5VEFWKCJidXR0b24iLCJjbGFzcyIsImpzLW5leHQtc3RlcCBjb250aW51ZVBheW1lbnRCdG4gbW9kLW5jc3MtYnRuIG5jc3MtYnRuLWFjY2VudCBuY3NzLWJyYW5kIG1vZC1idXR0b24td2lkdGggcHQzLXNtIHBybDUtc20gcGIzLXNtIHB0Mi1sZyBwYjItbGcgdS1tZC1pYiB1LXVwcGVyY2FzZSB1LXJvdW5kZWQgZnMxNC1zbSIpOwogICAgICAgICAgICAgICAgaWYgKGdYZCAhPT0gbnVsbCAmJiB0eXBlb2YoZ1hkKSA9PT0gJ29iamVjdCcpIHt9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBnWGQgPSBnZXRUYXJnZXRCeVRBVigiYSIsImNsYXNzIiwibmNzcy1idG4tYWNjZW50IHB0My1zbSBwcmw1LXNtIHBiMy1zbSBwdDItbGcgcGIyLWxnIGQtbGctaWIgZC1zbS1iIHUtcm91bmRlZCB1LWJvbGQiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICB2YXIgY2hrZGogPSBnZXRUYXJnZXRCeVRBVigibGFiZWwiLCJjbGFzcyIsInByZS1hZ3JlZSIpOy8v5aSE55CG5a6a6YeR5Y2P6K6uCiAgICAgICAgICAgICAgICBpZiAoY2hrZGogIT09IG51bGwgJiYgdHlwZW9mKGNoa2RqKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgICAgICBjaGtkai5maXJzdEVsZW1lbnRDaGlsZC5pZD0iY2hrZGoiOwogICAgICAgICAgICAgICAgICAgICQoIiNjaGtkaiIpLnRyaWdnZXIoImNsaWNrIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBnWGQgPSBnZXRUYXJnZXRCeVRBVigiYSIsImNsYXNzIiwiZ28tYnRuIik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGdYZCAhPT0gbnVsbCAmJiB0eXBlb2YoZ1hkKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgIGdYZC5jbGljaygpOwogICAgICAgICAgICAgICAgaWYgKGpsTWQ9PTEpey8v6L+Z6YeM6ZyA6KaB6K6+572u5LiA5Liq5o2h5ryP5qCH5b+XIOS4jeeUqOi/meenjeaWueazleWIpOaWrQogICAgICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlKCJnb0J0biIsMCk7CiAgICAgICAgICAgICAgICAgICAgaWYoKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoImpkLmNvbSIpIT0tMSl8fCh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCJqZC5oayIpIT0tMSkpewogICAgICAgICAgICAgICAgICAgICAgICBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICJodHRwczovL2NhcnQuamQuY29tL3NlbGVjdEFsbEl0ZW0uYWN0aW9uP3Q9MCZvdXRTa3VzPSIgLCAgLy/ov5nph4zpnIDopoHpqozor4Eg5Y+v6IO95Lya5oqK6LSt54mp6L2m5omA5pyJ5ZWG5ZOB6YO957uT566XCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMTAwMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uKHJlc3BvbnNlRGV0YWlscykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAkKCIudWktZGlhbG9nIikucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICQoIi51aS1tYXNrIikucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICQoJy51aS1kaWFsb2csLnVpLW1hc2snKS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHQxKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWVsc2V7fQogICAgICAgIH0sY3ljZSkKICAgICAgICB9CgogICAgd2luZG93Lm9ubG9hZD1mdW5jdGlvbiAoKXsKICAgICAgICAvL2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJidG4tcmVzZXJ2YXRpb24iKS5jbGFzc05hbWU9J2J0bi1zcGVjaWFsMSBidG4tbGcnOwogICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm5hbWUiKSAhPT0gbnVsbCAmJiB0eXBlb2YoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZuYW1lIikpID09PSAnb2JqZWN0JykgewogICAgICAgICAgICBmbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmbmFtZSIpLnNyYzsKICAgICAgICB9CiAgICAgICAgaWYoKGZybUlkID09IDEpfChmcm1JZCA9PSAyKXwoZnJtSWQgPT0gNyl8KGZybUlkID09IDE0KSl7CiAgICAgICAgICAgIGlmIChmcm1JZCA9PSAxKXsKICAgICAgICAgICAgICAgIGlmTGogPSBnZXRUYXJnZXRCeVRBVignZGl2JywnY2xhc3MnLCd0Yi1idG4td2FpdCcpOwogICAgICAgICAgICB9ZWxzZSBpZihmcm1JZCA9PSAyKXsKICAgICAgICAgICAgICAgIGlmTGogPSBnZXRUYXJnZXRCeVRBVignZGl2JywnY2xhc3MnLCd0Yi10cWcnKTsKICAgICAgICAgICAgfWVsc2UgaWYoZnJtSWQgPT0gNyl7CiAgICAgICAgICAgICAgICBpZkxqID0gbnVsbDsKICAgICAgICAgICAgfWVsc2UgaWYoZnJtSWQgPT0gMTQpewogICAgICAgICAgICAgICAgaWZMaiA9IG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYoaWZMaiA9PSBudWxsICl7CiAgICAgICAgICAgICAgICAvL3ZhciBudUxqID0gZ2V0VGFyZ2V0QnlUQVYoJ2RpdicsJ2NsYXNzJywndGItYnRuLWJ1eSB0Yi1idG4tc2t1IHRiLWhpZGRlbicpOwogICAgICAgICAgICAgICAgLy9pZiAobnVMaiE9bnVsbCl7fWVsc2V7CiAgICAgICAgICAgICAgICAkKCcjQWljZVN0YXJ0JykucHJvcCgnbGFzdENoaWxkJykubm9kZVZhbHVlPSLkvJjmg6DliLgiOwogICAgICAgICAgICAgICAgJCgnI0FpY2VQbScpLmhpZGUoKTsKICAgICAgICAgICAgICAgIGlmWWhxPTE7CiAgICAgICAgICAgICAgICAvL30KICAgICAgICAgICAgfQogICAgICAgICAgICBHTV9zZXRWYWx1ZSgiZ29CdG4iLDApOwogICAgICAgIH0KICAgICAgICBpZigoZnJtSWQ9PTMpfChmcm1JZD09NCkpewogICAgICAgICAgICBhbGxjayA9IGdldFRhcmdldEJ5SWQoJ0pfU2VsZWN0QWxsMScpOwogICAgICAgICAgICBidG5DYXJ0ID0gZ2V0VGFyZ2V0QnlJZCgiSl9HbyIpOwogICAgICAgICAgICBpZiAoYnRuQ2FydCAhPT0gbnVsbCAmJiB0eXBlb2YoYnRuQ2FydCkgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICBidG5CdXkgPSBidG5DYXJ0OwogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtidG5CdXk9IGdldFRhcmdldEJ5SWQoIkpfR28iKTt9LDEwMDApCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYoaWZSZWY9PTEmJm1xTWQ9PTEpewogICAgICAgICAgICAgICAgbXFNb2RlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYoZnJtSWQ9PTUpewogICAgICAgICAgICAkKCcjQWljZVN0YXJ0JykucHJvcCgnbGFzdENoaWxkJykubm9kZVZhbHVlPSLkvJjmg6DliLgiOwogICAgICAgICAgICAkKCcjQWljZVBtJykuaGlkZSgpOwogICAgICAgICAgICBHTV9zZXRWYWx1ZSgiZ29CdG4iLDApOwogICAgICAgICAgICBpZllocT0xOwogICAgICAgIH0KICAgICAgICBpZihmcm1JZD09Nil7CiAgICAgICAgICAgIGFsbGNrID0gZ2V0VGFyZ2V0QnlUQVYoJ2lucHV0JywnY2xhc3MnLCJqZGNoZWNrYm94Iik7CiAgICAgICAgICAgIGlmIChhbGxjayA9PSBudWxsIHx8IHR5cGVvZihhbGxjaykgPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgIC8vbG9jYXRpb24ucmVwbGFjZShsb2NhdGlvbi5ocmVmKTsKICAgICAgICAgICAgICAgIGlmKGlmUmVmPT0xJiZtcU1kPT0xKXsKICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBidG5DYXJ0ID0gZ2V0VGFyZ2V0QnlUQVYoJ2EnLCdjbGFzcycsInN1Ym1pdC1idG4iKTsKICAgICAgICAgICAgaWYgKGJ0bkNhcnQgIT09IG51bGwgJiYgdHlwZW9mKGJ0bkNhcnQpID09PSAnb2JqZWN0JykgewogICAgICAgICAgICAgICAgYnRuQnV5ID0gYnRuQ2FydDsKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBidG5DYXJ0ID0gZ2V0VGFyZ2V0QnlUQVYoJ2EnLCdjbGFzcycsImNvbW1vbi1zdWJtaXQtYnRuIik7CiAgICAgICAgICAgICAgICBpZiAoYnRuQ2FydCAhPT0gbnVsbCAmJiB0eXBlb2YoYnRuQ2FydCkgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICAgICAgYnRuQnV5ID0gYnRuQ2FydDsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgYnRuQnV5PSBnZXRUYXJnZXRCeVRBVignYScsJ2NsYXNzJywic3VibWl0LWJ0biIpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnRuQnV5ICE9PSBudWxsICYmIHR5cGVvZihidG5CdXkpID09PSAnb2JqZWN0Jyl7fWVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuQnV5PSBnZXRUYXJnZXRCeVRBVignYScsJ2NsYXNzJywiY29tbW9uLXN1Ym1pdC1idG4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sMTAwMCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZihHTV9nZXRWYWx1ZSgiZ29vZHNJZCIpIT0wKXsKICAgICAgICAgICAgICAgIHZhciBjR29vZHNJZCA9IEdNX2dldFZhbHVlKCJnb29kc0lkIik7CiAgICAgICAgICAgICAgICBHTV9zZXRWYWx1ZSgiZ29vZHNJZCIsMCk7CiAgICAgICAgICAgICAgICBHTV9zZXRWYWx1ZSgiQXV0b1N1Yk9kciIsMSkKICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICB2YXIgY2hrcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXJ0LWxpc3QnKS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW5wdXQnKTsKICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBmb3IodmFyIGlpPTA7IGlpPGNoa3MubGVuZ3RoO2lpKyspewogICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBpZihjaGtzW2lpXS5uYW1lID09ICdjaGVja0l0ZW0nKXsKICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGtzW2lpXS5jaGVja2VkPT0xKXsKICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGtzW2lpXS5jbGljaygpOwogICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLyoKICAgICAgICAgICAgICAgICBpZiAoYWxsY2suY2hlY2tlZD09MSl7CiAgICAgICAgICAgICAgICAgICAgYWxsY2suY2xpY2soKTsKICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgYWxsY2suY2xpY2soKTsKICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24gKCl7YWxsY2suY2xpY2soKTtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZHVjdF8nK2NHb29kc0lkKS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW5wdXQnKVswXS5jbGljaztidG5CdXkuY2xpY2soKTsgcmV0dXJufSwgMTAwMCk7CiAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9kdWN0XycrY0dvb2RzSWQpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbnB1dCcpWzBdLmNsaWNrOwogICAgICAgICAgICAgICAgICovCiAgICAgICAgICAgICAgICBidG5CdXkuY2xpY2soKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoaWZSZWY9PTEmJm1xTWQ9PTEpewogICAgICAgICAgICAgICAgbXFNb2RlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmKGZybUlkPT04KXsKICAgICAgICAgICAgYWxsY2sgPSBnZXRUYXJnZXRCeUlkKCdjaG9vc2VBbGxDaGVja0JveCcpOwogICAgICAgICAgICBidG5DYXJ0ID0gZ2V0VGFyZ2V0QnlUQVYoJ2EnLCdjbGFzcycsImNoZWNrb3V0IGNhcnQtYnRuIik7CiAgICAgICAgICAgIGlmIChidG5DYXJ0ICE9PSBudWxsICYmIHR5cGVvZihidG5DYXJ0KSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgIGJ0bkJ1eSA9IGJ0bkNhcnQ7CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgYnRuQ2FydCA9IGdldFRhcmdldEJ5VEFWKCdhJywnY2xhc3MnLCJjaGVja291dCIpOy8v6aaZ5riv6IuP5a6BCiAgICAgICAgICAgICAgICBpZiAoYnRuQ2FydCAhPT0gbnVsbCAmJiB0eXBlb2YoYnRuQ2FydCkgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICAgICAgYnRuQnV5ID0gYnRuQ2FydDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoaWZSZWY9PTEmJm1xTWQ9PTEpewogICAgICAgICAgICAgICAgbXFNb2RlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmKGZybUlkPT0xNSl7CiAgICAgICAgICAgIGFsbGNrID0gZ2V0VGFyZ2V0QnlJZCgnSl9jYXJ0X2xpc3QnKTsvL+WUr+WTgeS8muayoeacieWFqOmAiSDpmo/kvr/ngrnkuIDkuIsKICAgICAgICAgICAgYnRuQ2FydCA9IGdldFRhcmdldEJ5VEFWKCdhJywnbWFyc19zZWFkJywiY2FydF9jaGVja291dF9idG4iKTsKICAgICAgICAgICAgaWYgKGJ0bkNhcnQgIT09IG51bGwgJiYgdHlwZW9mKGJ0bkNhcnQpID09PSAnb2JqZWN0JykgewogICAgICAgICAgICAgICAgYnRuQnV5ID0gYnRuQ2FydDsKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YnRuQnV5PSBnZXRUYXJnZXRCeVRBVignYScsJ21hcnNfc2VhZCcsImNhcnRfY2hlY2tvdXRfYnRuIik7fSwxMDAwKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKGlmUmVmPT0xJiZtcU1kPT0xKXsKICAgICAgICAgICAgICAgIG1xTW9kZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZihmcm1JZD09MTYpewogICAgICAgICAgICBuaWtlQnV5KCk7CiAgICAgICAgfQoKCiAgICB9CgogICAgZnVuY3Rpb24gZ2V0U3R5bGUoZWxlbWVudCwgYXR0cil7CiAgICAgICAgaWYoZWxlbWVudC5jdXJyZW50U3R5bGUpewogICAgICAgICAgICByZXR1cm4gZWxlbWVudC5jdXJyZW50U3R5bGVbYXR0cl07CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIHJldHVybiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50LG51bGwpW2F0dHJdOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBkYXRlRm9ybWF0KGZtdCwgZGF0ZSkgewogICAgICAgIGxldCByZXQ7CiAgICAgICAgbGV0IG9wdCA9IHsKICAgICAgICAgICAgIlkrIjogZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCksIC8vIOW5tAogICAgICAgICAgICAibSsiOiAoZGF0ZS5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKSwgLy8g5pyICiAgICAgICAgICAgICJkKyI6IGRhdGUuZ2V0RGF0ZSgpLnRvU3RyaW5nKCksIC8vIOaXpQogICAgICAgICAgICAiSCsiOiBkYXRlLmdldEhvdXJzKCkudG9TdHJpbmcoKSwgLy8g5pe2CiAgICAgICAgICAgICJNKyI6IGRhdGUuZ2V0TWludXRlcygpLnRvU3RyaW5nKCksIC8vIOWIhgogICAgICAgICAgICAiUysiOiBkYXRlLmdldFNlY29uZHMoKS50b1N0cmluZygpIC8vIOenkgogICAgICAgICAgICAvLyDmnInlhbbku5bmoLzlvI/ljJblrZfnrKbpnIDmsYLlj6/ku6Xnu6fnu63mt7vliqDvvIzlv4XpobvovazljJbmiJDlrZfnrKbkuLIKICAgICAgICB9OwoKICAgICAgICBpZiAoLyhZKykvLmV4ZWMoZm10KSkgZm10ID0gZm10LnJlcGxhY2UoUmVnRXhwLiQxLCAoZGF0ZS5nZXRGdWxsWWVhcigpICsgIiIpLnN1YnN0cig0IC0gUmVnRXhwLiQxLmxlbmd0aCkpOwogICAgICAgIGZvciAobGV0IGsgaW4gb3B0KSB7CiAgICAgICAgICAgIHJldCA9IG5ldyBSZWdFeHAoIigiICsgayArICIpIikuZXhlYyhmbXQpOwogICAgICAgICAgICBpZiAocmV0KSB7CiAgICAgICAgICAgICAgICBmbXQgPSBmbXQucmVwbGFjZShyZXRbMV0sIChyZXRbMV0ubGVuZ3RoID09IDEpID8gKG9wdFtrXSkgOiAoKCIwMCIgKyBvcHRba10pLnN1YnN0cigoIiIgKyBvcHRba10pLmxlbmd0aCkpKTsKICAgICAgICAgICAgfTsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gZm10OwogICAgfQoKCiAgICBmdW5jdGlvbiBnZXRUYXJnZXRCeUlkKHRfaWQpewogICAgICAgIHZhciB0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0X2lkKTsKICAgICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFRhcmdldEJ5VEFWKHRfdGFnLHRfYXR0cix0X3ZhbHVlKXsKICAgICAgICB2YXIgdGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUodF90YWcpOwogICAgICAgIGZvcih2YXIgaT0wO2kgPHRhcmdldC5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgaWYodGFyZ2V0W2ldLmdldEF0dHJpYnV0ZSh0X2F0dHIpID09IHRfdmFsdWUpewogICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFtpXTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiB0cmltKHN0cil7CiAgICAgICAgc3RyID0gc3RyLnJlcGxhY2UoLyheXHMqKXwoXHMqJCkvZywgIiIpOwogICAgICAgIHJldHVybiBzdHI7CiAgICB9CgogICAgLy/lhpljb29raWVzCiAgICBmdW5jdGlvbiBzZXRDb29raWUobmFtZSx2YWx1ZSkKICAgIHsKICAgICAgICB2YXIgRGF5cyA9IDMwOwogICAgICAgIHZhciBleHAgPSBuZXcgRGF0ZSgpOwogICAgICAgIGV4cC5zZXRUaW1lKGV4cC5nZXRUaW1lKCkgKyBEYXlzKjI0KjYwKjYwKjEwMDApOwogICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyAiPSIrIGVzY2FwZSAodmFsdWUpICsgIjtleHBpcmVzPSIgKyBleHAudG9HTVRTdHJpbmcoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRDb29raWUobmFtZSkKICAgIHsKICAgICAgICB2YXIgYXJyLHJlZz1uZXcgUmVnRXhwKCIoXnwgKSIrbmFtZSsiPShbXjtdKikoO3wkKSIpOwogICAgICAgIGlmKGFycj1kb2N1bWVudC5jb29raWUubWF0Y2gocmVnKSl7CiAgICAgICAgICAgIHJldHVybiB1bmVzY2FwZShhcnJbMl0pOwogICAgICAgIH0KICAgICAgICBlbHNlewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gb3BXaW5kKHB1cmwscGlzd2ViLHBuYW1lLHBobWwpewogICAgICAgIHZhciB1cmwgPSBwdXJsOwogICAgICAgIHZhciBuYW1lID1wbmFtZTsKICAgICAgICB2YXIgaVdpZHRoPTgwMDsKICAgICAgICB2YXIgaUhlaWdodD00NTA7CiAgICAgICAgdmFyIGlUb3AgPSAod2luZG93LnNjcmVlbi5oZWlnaHQtMzAtaUhlaWdodCkvMjsKICAgICAgICB2YXIgaUxlZnQgPSAod2luZG93LnNjcmVlbi53aWR0aC0xMC1pV2lkdGgpLzI7CiAgICAgICAgdmFyIE9wZW5XaW5kb3cgPXdpbmRvdy5vcGVuKHVybCxuYW1lLCdoZWlnaHQ9JytpSGVpZ2h0KycsLGlubmVySGVpZ2h0PScraUhlaWdodCsnLHdpZHRoPScraVdpZHRoKycsaW5uZXJXaWR0aD0nK2lXaWR0aCsnLHRvcD0nK2lUb3ArJyxsZWZ0PScraUxlZnQrJyx0b29sYmFyPW5vLG1lbnViYXI9bm8sc2Nyb2xsYmFycz1hdXRvLHJlc2l6ZWFibGU9bm8sbG9jYXRpb249bm8sc3RhdHVzPW5vJyk7CiAgICAgICAgaWYocGlzd2ViPT0wKXsKICAgICAgICAgICAgT3BlbldpbmRvdy5kb2N1bWVudC53cml0ZShwaG1sKTsKICAgICAgICAgICAgT3BlbldpbmRvdy5kb2N1bWVudC5jbG9zZSgpOwogICAgICAgICAgICBPcGVuV2luZG93LmZvY3VzKCk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGdldFlocXVybCh2R29vZHMsdlNqaWQsdmZpZCx2bWlkKXsKICAgICAgICB2YXIgdGZtID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBmbmFtZSA9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm5hbWUiKTsKICAgICAgICAgICAgaWYgKGZuYW1lICE9PSBudWxsICYmIHR5cGVvZihmbmFtZSkgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICBmbmFtZS5vbmxvYWQ9ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vR01fc2V0VmFsdWUoImxvY1VybCIsd2luZG93LnRvcC5sb2NhdGlvbi5ocmVmKTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImxvY1VybCIsIHdpbmRvdy50b3AubG9jYXRpb24uaHJlZik7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHVybD0gZm5hbWUuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSh7Z29vZHNJZDogdkdvb2RzLHNqaWQ6dlNqaWQsZm1kOnZmaWQsbWlkOnZtaWR9LCAnKicpOwogICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRmbSk7CiAgICAgICAgICAgICAgICAgICAgfWNhdGNoKGUpe307CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LDEwMCk7CiAgICB9CgoKICAgIHZhciBzdHJKb3NuID0gbnVsbDsKICAgIHVuc2FmZVdpbmRvdy5mZmY9IChkKSA9PiB7CiAgICAgICAgc3RySm9zbiA9IGQ7CiAgICB9OwoKICAgIGNvbnN0IG1xTiA9MCA7CiAgICBmdW5jdGlvbiBtcU1vZGUoKQogICAgewogICAgICAgIGNvbnNvbGUubG9nKCLlvIDlp4vnm7LmiqIiKTsKICAgICAgICBpZiAobXFOPj02MCkgcmV0dXJuOyAvL+mBv+WFjeW9seWTjeeUqOaIt+ato+W4uOS9v+eUqAogICAgICAgIHZhciBkaXZTZWwgPSBudWxsOwogICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCJqZC5jb20iKSE9LTF8d2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZigic3VuaW5nLmNvbSIpIT0tMSl7CiAgICAgICAgICAgIGlmKGFsbGNrICE9PSBudWxsICYmIHR5cGVvZihhbGxjaykgPT09ICdvYmplY3QnKXsKICAgICAgICAgICAgICAgIGlmIChhbGxjay5jaGVja2VkPT0wKXsKICAgICAgICAgICAgICAgICAgICBhbGxjay5jbGljaygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIG1xTisrOwogICAgICAgICAgICAgICAgbXFNb2RlKCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgZGl2U2VsID0gZ2V0VGFyZ2V0QnlUQVYoJ2RpdicsJ2NsYXNzJywnc2VsZWN0LWFsbCBKX1NlbGVjdEFsbCcpOwoKICAgICAgICAgICAgaWYgKGFsbGNrICE9PSBudWxsICYmIHR5cGVvZihhbGxjaykgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICBpZihkaXZTZWwgIT09IG51bGwgJiYgdHlwZW9mKGRpdlNlbCkgPT09ICdvYmplY3QnKXsKICAgICAgICAgICAgICAgICAgICBhbGxjay5jbGljaygpOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgbXFOKys7CiAgICAgICAgICAgICAgICAgICAgbXFNb2RlKCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIG1xTisrOwogICAgICAgICAgICAgICAgbXFNb2RlKCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgICQoJyNBaWNlU3RhcnQnKS5wcm9wKCdsYXN0Q2hpbGQnKS5ub2RlVmFsdWU9IuetieW+heaKoui0rSI7CgogICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICBpZiAoYnRuQnV5ICE9PSBudWxsICYmIHR5cGVvZihidG5CdXkpID09PSAnb2JqZWN0JykgewogICAgICAgICAgICAgICAgYnRuQnV5LmNsaWNrKCk7CiAgICAgICAgICAgIH1lbHNle30KCiAgICAgICAgfSwgNTAwKTsKCiAgICB9CgogICAgZnVuY3Rpb24gbmlrZUJ1eSgpewogICAgICAgIHZhciBua0RpdiA9IGdldFRhcmdldEJ5SWQoJ2Zsb2F0aW5nLWF0Yy13cmFwcGVyJyk7CiAgICAgICAgaWYgKG5rRGl2ICE9PSBudWxsICYmIHR5cGVvZihua0RpdikgPT09ICdvYmplY3QnKSB7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIG5rRGl2ID0gZ2V0VGFyZ2V0QnlUQVYoJ2RpdicsJ2NsYXNzJywnbXQ4LWxnJyk7CiAgICAgICAgfQogICAgICAgIG5rRGl2LmlkID0gIkFpY2VEaXYiCiAgICAgICAgJCgnI0FpY2VEaXYnKS5hcHBlbmQobXlDb25OaWtlKTsKICAgICAgICBidG5CdXkgPWdldFRhcmdldEJ5VEFWKCdidXR0b24nLCdjbGFzcycsJ25jc3MtYnRuLXByaW1hcnktZGFyayBidG4tbGcgY3NzLXkwbXl1dCBhZGQtdG8tY2FydC1idG4nKTsKICAgICAgICBHTV9zZXRWYWx1ZSgiZ29CdG4iLDApOwogICAgICAgIGJ1eVRvcCA9IDE7CiAgICAgICAgYnV5UGwgPSA1MDA7CiAgICAgICAgbXFNZCA9IDA7CiAgICAgICAgaWYgKGNoayE9bnVsbCl7CiAgICAgICAgICAgIGlmIChjaGs9PTApewogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0FpY2VPc20nKS5jaGVja2VkPWZhbHNlOwogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdBaWNlT3NtJykuY2hlY2tlZD10cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBid3RpbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnQWljZUJlZm9yZVRpbWUnKS52YWx1ZTsKCgogICAgICAgIHZhciBqcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdBaWNlU3RhcnRUaW1lJyk7CiAgICAgICAganMudmFsdWUgPSBkYXRlRm9ybWF0KCJZWVlZLW1tLWRkIEhIOk1NOlNTIiwgY0R0KTsKCiAgICAgICAgdmFyIHRqID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0FpY2VTdGFydCcpOwogICAgICAgIHRqLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGd0aW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0FpY2VTdGFydFRpbWUnKS52YWx1ZSA7CiAgICAgICAgICAgIGd0aW1lID0gZ3RpbWUuc3Vic3RyaW5nKDAsMTkpOwogICAgICAgICAgICBndGltZSA9IGd0aW1lLnJlcGxhY2UoLy0vZywnLycpOwogICAgICAgICAgICB2YXIgdGltZXN0YW1wMSA9IG5ldyBEYXRlKGd0aW1lKS5nZXRUaW1lKCk7CiAgICAgICAgICAgIHNldENvb2tpZSgiZnRfcWdkIix0aW1lc3RhbXAxKTsKICAgICAgICAgICAgaWYgKGdvc3RhcnQ9PTApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGdvc3RhcnQgPSAxOwogICAgICAgICAgICAgICAgaWZSZWYgPSAwOwogICAgICAgICAgICAgICAgR01fc2V0VmFsdWUoIkFjeWNlIixkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnQWljZUN5Y2UnKS52YWx1ZSk7CiAgICAgICAgICAgICAgICBHTV9zZXRWYWx1ZSgiZ29CdG4iLDEpOwogICAgICAgICAgICAgICAgR01fc2V0VmFsdWUoImdvQ2FydCIsMSk7CiAgICAgICAgICAgICAgICAkKCcjQWljZVN0YXJ0JykucHJvcCgnbGFzdENoaWxkJykubm9kZVZhbHVlPSLmraPlnKjlgJLorqHml7YiOwogICAgICAgICAgICB9ZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBnb3N0YXJ0ID0gMDsKICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlKCJnb0J0biIsMCk7CiAgICAgICAgICAgICAgICBHTV9zZXRWYWx1ZSgiZ29DYXJ0IiwwKTsKICAgICAgICAgICAgICAgICQoJyNBaWNlU3RhcnQnKS5wcm9wKCdsYXN0Q2hpbGQnKS5ub2RlVmFsdWU9IuW8gOWni+WAkuiuoeaXtiI7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBTeWNUaW1lQ2hrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0FpY2VTeWNUaW1lJyk7CiAgICAgICAgICAgIGlmIChTeWNUaW1lQ2hrLmNoZWNrZWQ9PTApewogICAgICAgICAgICAgICAgc3luY0xvY1RpbWUoKTsKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBzeW5jVGltZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIHZhciBBdXRvT3NtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0FpY2VPc20nKTsKICAgICAgICBBdXRvT3NtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIEdNX3NldFZhbHVlKCJBdXRvU3ViT2RyIixBdXRvT3NtLmNoZWNrZWQ/MTowKTsKICAgICAgICAgICAgQXV0b09zbS5jaGVja2VkP2Noaz0xOmNoaz0wOwogICAgICAgIH0pOwogICAgfQoKICAgIHZhciB0aW1lRmxnID0gMDsKICAgIGlmIChmcm1JZD09MXxmcm1JZD09Mnxmcm1JZD09M3xmcm1JZD09NHxmcm1JZD09MTApewogICAgICAgIHRpbWVGbGc9MTsKICAgICAgICB0aW1lVXJsPSJodHRwczovL2FwaS5tLnRhb2Jhby5jb20vcmVzdC9hcGkzLmRvP2FwaT1tdG9wLmNvbW1vbi5nZXRUaW1lc3RhbXAiOwogICAgfWVsc2UgaWYoZnJtSWQ9PTV8ZnJtSWQ9PTZ8fGZybUlkPT05KXsKICAgICAgICB0aW1lRmxnPTI7CiAgICAgICAgdGltZVVybD1gaHR0cHM6Ly9hLmpkLmNvbS8vYWpheC9xdWVyeVNlcnZlckRhdGEuaHRtbGA7CiAgICB9ZWxzZSBpZihmcm1JZD09N3xmcm1JZD09OCl7CiAgICAgICAgdGltZUZsZz0zOwogICAgICAgIHRpbWVVcmw9Imh0dHBzOi8vcXVhbi5zdW5pbmcuY29tL2dldFN5c1RpbWUuZG8iOwogICAgfWVsc2V7CiAgICAgICAgdGltZUZsZz0wOwogICAgICAgIHRpbWVVcmw9Imh0dHBzOi8vdC5hbGljZG4uY29tL3QvZ2V0dGltZT9jYWxsYmFjaz1mZmYiOwogICAgfQoKICAgIGZ1bmN0aW9uIHN5bmNMb2NUaW1lKCkKICAgIHsKICAgICAgICBpZiAoZ29zdGFydD09MCkgcmV0dXJuOwogICAgICAgIHZhciB0aW1lc3RhbXAgPSBnZXRDb29raWUoImZ0X3FnZCIpOwogICAgICAgIGQ4ID0gbmV3IERhdGUoKTsKICAgICAgICBkOC5zZXRUaW1lKHRpbWVzdGFtcCk7Ly/or7vlj5bmiqLmi43ml7bpl7QKICAgICAgICB2YXIgY3VydGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwoKICAgICAgICB2YXIgc2QgPSBuZXcgRGF0ZSgpOwogICAgICAgIHNkID0gY3VydGltZTsKCiAgICAgICAgdmFyIHR0eCA9IGQ4IC0gc2Q7CiAgICAgICAgaWYgKHR0eCA8IDApLy/lt7Lov4cxCiAgICAgICAgewogICAgICAgICAgICBhbGVydCgi5pe26Ze05bey6L+HIik7CiAgICAgICAgICAgIGlmICh0dHg+IC0yMDAwKSAvL+mBv+WFjemHjeWkjeWIt+mhtemdogogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgICAgfQogICAgICAgIH1lbHNlIGlmICh0dHggPiA2MCAqIDEwMDAgKiAyKS8vMuWIhumSn+aJjeWQjOatpQogICAgICAgIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIui3neemu+aKoui0rei/mOacieS4gOauteaXtumXtCIpOwogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+CiAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgc3luY0xvY1RpbWUoKTsKICAgICAgICAgICAgfSwgMzAgKiAxMDAwKTsvLzEwKjEwMDAg5pS55Li6MzBTIOmBv+WFjeWkqumikee5geWvvOiHtOacjeWKoeWZqOWNoemhvwogICAgICAgIH1lbHNlIGlmICh0dHggPiAwKSB7CiAgICAgICAgICAgIGlmICh0dHggPD0gbXFCZlRpbSAqIDEwMDAgKiAxICYmIG1xTWQgPT0xICl7CiAgICAgICAgICAgICAgICBpZihpZlJlZj09MCl7CiAgICAgICAgICAgICAgICAgICAgR01fc2V0VmFsdWUoInJlZiIsMSk7CiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICQoJyNBaWNlU3RhcnQnKS5wcm9wKCdsYXN0Q2hpbGQnKS5ub2RlVmFsdWU9Iuato+WcqOWAkuiuoeaXtu+8iCIrcGFyc2VJbnQodHR4LzEwMDApKyJT77yJIjsKICAgICAgICAgICAgaWYgKChkOCAtIHNkKSA8PSAyMDAwKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygi562J5b6F5oqi6LStIik7CiAgICAgICAgICAgICAgICAkKCcjQWljZVN0YXJ0JykucHJvcCgnbGFzdENoaWxkJykubm9kZVZhbHVlPSLnrYnlvoXmiqLotK0iOwogICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYnV5Q3ljZSA9MCAvL+W9k+WJjemhtemdouaPkOS6pOasoeaVsCDpgb/lhY3lpJrmrKHmj5DkuqQKICAgICAgICAgICAgICAgICAgICB2YXIgdDMgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJ4eHh4eCIrYnRuQnV5KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1eUN5Y2U+PSBidXlUb3ApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI0FpY2VTdGFydCcpLnByb3AoJ2xhc3RDaGlsZCcpLm5vZGVWYWx1ZT0i5byA5aeL5YCS6K6h5pe2IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodDMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChidG5CdXkgIT09IG51bGwgJiYgdHlwZW9mKGJ0bkJ1eSkgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnRuQnV5LnN0eWxlLmRpc3BsYXkhPW51bGwgJiYgdHlwZW9mKGJ0bkJ1eS5zdHlsZS5kaXNwbGF5KT09PSAnb2JqZWN0JyAmJmJ0bkJ1eS5zdHlsZS5kaXNwbGF5PT0ibm9uZSIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuQnV5LmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZnJtSWQ9PTE2KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVwbGFjZSgiaHR0cHM6Ly93d3cubmlrZS5jb20vY24vemgtSGFucy9jYXJ0Iik7IC8vbmlrZeS4jeebtOaOpeiwg+aVtOi0reeJqei9piDpnIDopoHlpJrmiafooYzkuIDmraUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwyMDAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXlDeWNlKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle30KICAgICAgICAgICAgICAgICAgICB9LGJ1eVBsKTsKCiAgICAgICAgICAgICAgICB9LCBkOCAtIHNkIC0gYnd0aW1lKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHN5bmNMb2NUaW1lKCk7CiAgICAgICAgICAgICAgICB9LCAyMDApOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgIH0KCiAgICBmdW5jdGlvbiBzeW5jVGltZSgpCiAgICB7CiAgICAgICAgaWYgKGdvc3RhcnQ9PTApIHJldHVybjsKICAgICAgICB2YXIgdGltZXN0YW1wID0gZ2V0Q29va2llKCJmdF9xZ2QiKTsKICAgICAgICBkOCA9IG5ldyBEYXRlKCk7CiAgICAgICAgZDguc2V0VGltZSh0aW1lc3RhbXApOy8v6K+75Y+W5oqi5ouN5pe26Ze0CiAgICAgICAgc3RhcnR0aW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICAvL3VybDogImh0dHBzOi8vdC5hbGljZG4uY29tL3QvZ2V0dGltZT9jYWxsYmFjaz1mZmYiLAogICAgICAgICAgICB1cmw6IHRpbWVVcmwgLAogICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICB0aW1lb3V0OiAxMDAwMCwKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgLy8gJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29ucCcsCiAgICAgICAgICAgICAgICAvLyAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb25wJywKICAgICAgICAgICAgICAgIC8vICdDYWNoZS1Db250cm9sJzogJ3B1YmxpYycKICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOidhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24ocmVzcG9uc2VEZXRhaWxzKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHJlc3BvbnNlRGV0YWlscy5maW5hbFVybCk7CiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2VEZXRhaWxzLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhyZXNwb25zZURldGFpbHMucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAvL2V2YWwoIHJlc3BvbnNlRGV0YWlscy5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgIHZhciBzdHJKb3NuID0gSlNPTi5wYXJzZShyZXNwb25zZURldGFpbHMucmVzcG9uc2VUZXh0LnJlcGxhY2UoJ2ZmZignLCcnKS5yZXBsYWNlKCcpJywnJykpOwogICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coc3RySm9zbik7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHN0ckpvc247CiAgICAgICAgICAgICAgICAgICAgZW5kdGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgICAgICAgICAgICAgIC8v5pyN5Yqh5Zmo5pe26Ze0CiAgICAgICAgICAgICAgICAgICAgdmFyIHNkID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgICAgICAgICAvL3NkLnNldFRpbWUocmVzdWx0LnRpbWUgKiAxMDAwKTsgLy8xMOS9jeaXtumXtOaIswogICAgICAgICAgICAgICAgICAgIC8vc2Quc2V0VGltZShyZXN1bHQuZGF0YS50KTsgLy8xM+S9jeaXtumXtOaIsyDkuI3pnIDopoEqMTAwMAogICAgICAgICAgICAgICAgICAgIGlmICh0aW1lRmxnPT0xKXsKICAgICAgICAgICAgICAgICAgICAgICAgc2Quc2V0VGltZShyZXN1bHQuZGF0YS50KTsKICAgICAgICAgICAgICAgICAgICB9ZWxzZSAgaWYgKHRpbWVGbGc9PTIpewogICAgICAgICAgICAgICAgICAgICAgICBzZC5zZXRUaW1lKHJlc3VsdC5zZXJ2ZXJUaW1lKTsKICAgICAgICAgICAgICAgICAgICB9ZWxzZSAgaWYgKHRpbWVGbGc9PTMpewogICAgICAgICAgICAgICAgICAgICAgICBzZCA9IG5ldyBEYXRlKHJlc3VsdC5zeXNUaW1lMik7CiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIHNkLnNldFRpbWUocmVzdWx0LnRpbWUgKiAxMDAwKTsgLy8xMOS9jeaXtumXtOaIswogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgdHR4ID0gZDggLSBzZDsKICAgICAgICAgICAgICAgICAgICBpZiAodHR4IDwgMCkvL+W3sui/hzEKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLml7bpl7Tlt7Lov4ciKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR0eD4gLTIwMDApIC8v6YG/5YWN6YeN5aSN5Yi36aG16Z2iCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbG9jYXRpb24ucmVwbGFjZShsb2NhdGlvbi5ocmVmKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYgKHR0eCA+IDYwICogMTAwMCAqIDIpLy8y5YiG6ZKf5omN5ZCM5q2lCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygi6Led56a75oqi6LSt6L+Y5pyJ5LiA5q615pe26Ze0Iik7CiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2xvY2F0aW9uLnJlcGxhY2UobG9jYXRpb24uaHJlZik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeW5jVGltZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9LCAzMCAqIDEwMDApOy8vMTAqMTAwMCDmlLnkuLozMFMg6YG/5YWN5aSq6aKR57mB5a+86Ie05pyN5Yqh5Zmo5Y2h6aG/CiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYgKHR0eCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR0eCA8PSBtcUJmVGltICogMTAwMCAqIDEgJiYgbXFNZCA9PTEgKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGlmUmVmPT0wKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHTV9zZXRWYWx1ZSgicmVmIiwxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2xvY2F0aW9uLnJlcGxhY2UobG9jYXRpb24uaHJlZik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNBaWNlU3RhcnQnKS5wcm9wKCdsYXN0Q2hpbGQnKS5ub2RlVmFsdWU9Iuato+WcqOWAkuiuoeaXtu+8iCIrcGFyc2VJbnQodHR4LzEwMDApKyJT77yJIjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluaXRzZHRpbWVfaW50ID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaW5pdHNkdGltZV9pbnQgPSBwYXJzZUludChyZXN1bHQuZGF0YS50LzEwMDApLy9wYXJzZUludChyZXN1bHQudGltZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGltZUZsZz09MSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdHNkdGltZV9pbnQgPSBwYXJzZUludChyZXN1bHQuZGF0YS50LzEwMDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgIGlmICh0aW1lRmxnPT0yKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0c2R0aW1lX2ludCA9IHBhcnNlSW50KHJlc3VsdC5zZXJ2ZXJUaW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlICBpZiAodGltZUZsZz09Myl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNuVGltZSA9IHJlc3VsdC5zeXNUaW1lMi5zdWJzdHJpbmcoMCwxOSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc25UaW1lID0gc25UaW1lLnJlcGxhY2UoLy0vZywnLycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRzZHRpbWVfaW50ID0gcGFyc2VJbnQobmV3IERhdGUoc25UaW1lKS5nZXRUaW1lKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdHNkdGltZV9pbnQgPSBwYXJzZUludChyZXN1bHQudGltZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChkOCAtIHNkKSA8PSAyMDAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygi562J5b6F5oqi6LStIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjQWljZVN0YXJ0JykucHJvcCgnbGFzdENoaWxkJykubm9kZVZhbHVlPSLnrYnlvoXmiqLotK0iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYnV5Q3ljZSA9MCAvL+W9k+WJjemhtemdouaPkOS6pOasoeaVsCDpgb/lhY3lpJrmrKHmj5DkuqQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZihmcm1JZD09MSB8fCBmcm1JZD09MiB8fCBmcm1JZD09Nyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGJ1eVRvcD0xMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgYnV5VG9wPTE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0MyA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coInh4eHh4IitidG5CdXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnV5Q3ljZT49IGJ1eVRvcCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjQWljZVN0YXJ0JykucHJvcCgnbGFzdENoaWxkJykubm9kZVZhbHVlPSLlvIDlp4vlgJLorqHml7YiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0Myk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ0bkJ1eSAhPT0gbnVsbCAmJiB0eXBlb2YoYnRuQnV5KSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChidG5CdXkuc3R5bGUuZGlzcGxheSE9bnVsbCAmJiB0eXBlb2YoYnRuQnV5LnN0eWxlLmRpc3BsYXkpPT09ICdvYmplY3QnICYmYnRuQnV5LnN0eWxlLmRpc3BsYXk9PSJub25lIil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG5CdXkuY2xpY2soKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihmcm1JZD09MTYpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZXBsYWNlKCJodHRwczovL3d3dy5uaWtlLmNvbS9jbi96aC1IYW5zL2NhcnQiKTsgLy9uaWtl5LiN55u05o6l6LCD5pW06LSt54mp6L2mIOmcgOimgeWkmuaJp+ihjOS4gOatpQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LDIwMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1eUN5Y2UrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sYnV5UGwpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGQ4IC0gc2QgLSBid3RpbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ0bkJ1eSAhPT0gbnVsbCAmJiB0eXBlb2YoYnRuQnV5KSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuQnV5LmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7fQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGQ4IC0gc2QgLSBid3RpbWUpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ0bkJ1eSAhPT0gbnVsbCAmJiB0eXBlb2YoYnRuQnV5KSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuQnV5LmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7fQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGQ4IC0gc2QgLSBid3RpbWUgKyAxMDApOyAvL+mHjeWkjeaPkOS6pOS4gOasoeehruS/neaPkOS6pOWIsAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5bmNUaW1lKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDApOwogICAgICAgICAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgfQoKCgoKfSkoKTs=","requires":[{"meta":{"name":"jquery.min.js","url":"http://libs.baidu.com/jquery/2.0.0/jquery.min.js","ts":1604045684122,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2Mi4wLjAgfCAoYykgMjAwNSwgMjAxMyBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiB8IGpxdWVyeS5vcmcvbGljZW5zZQ0KLy9AIHNvdXJjZU1hcHBpbmdVUkw9anF1ZXJ5Lm1pbi5tYXANCiovDQooZnVuY3Rpb24oZSx1bmRlZmluZWQpe3ZhciB0LG4scj10eXBlb2YgdW5kZWZpbmVkLGk9ZS5sb2NhdGlvbixvPWUuZG9jdW1lbnQscz1vLmRvY3VtZW50RWxlbWVudCxhPWUualF1ZXJ5LHU9ZS4kLGw9e30sYz1bXSxmPSIyLjAuMCIscD1jLmNvbmNhdCxoPWMucHVzaCxkPWMuc2xpY2UsZz1jLmluZGV4T2YsbT1sLnRvU3RyaW5nLHk9bC5oYXNPd25Qcm9wZXJ0eSx2PWYudHJpbSx4PWZ1bmN0aW9uKGUsbil7cmV0dXJuIG5ldyB4LmZuLmluaXQoZSxuLHQpfSxiPS9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8uc291cmNlLHc9L1xTKy9nLFQ9L14oPzooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0qKSkkLyxDPS9ePChcdyspXHMqXC8/Pig/OjxcL1wxPnwpJC8saz0vXi1tcy0vLE49Ly0oW1xkYS16XSkvZ2ksRT1mdW5jdGlvbihlLHQpe3JldHVybiB0LnRvVXBwZXJDYXNlKCl9LFM9ZnVuY3Rpb24oKXtvLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLFMsITEpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigibG9hZCIsUywhMSkseC5yZWFkeSgpfTt4LmZuPXgucHJvdG90eXBlPXtqcXVlcnk6Zixjb25zdHJ1Y3Rvcjp4LGluaXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk7aWYoIWUpcmV0dXJuIHRoaXM7aWYoInN0cmluZyI9PXR5cGVvZiBlKXtpZihyPSI8Ij09PWUuY2hhckF0KDApJiYiPiI9PT1lLmNoYXJBdChlLmxlbmd0aC0xKSYmZS5sZW5ndGg+PTM/W251bGwsZSxudWxsXTpULmV4ZWMoZSksIXJ8fCFyWzFdJiZ0KXJldHVybiF0fHx0LmpxdWVyeT8odHx8bikuZmluZChlKTp0aGlzLmNvbnN0cnVjdG9yKHQpLmZpbmQoZSk7aWYoclsxXSl7aWYodD10IGluc3RhbmNlb2YgeD90WzBdOnQseC5tZXJnZSh0aGlzLHgucGFyc2VIVE1MKHJbMV0sdCYmdC5ub2RlVHlwZT90Lm93bmVyRG9jdW1lbnR8fHQ6bywhMCkpLEMudGVzdChyWzFdKSYmeC5pc1BsYWluT2JqZWN0KHQpKWZvcihyIGluIHQpeC5pc0Z1bmN0aW9uKHRoaXNbcl0pP3RoaXNbcl0odFtyXSk6dGhpcy5hdHRyKHIsdFtyXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGk9by5nZXRFbGVtZW50QnlJZChyWzJdKSxpJiZpLnBhcmVudE5vZGUmJih0aGlzLmxlbmd0aD0xLHRoaXNbMF09aSksdGhpcy5jb250ZXh0PW8sdGhpcy5zZWxlY3Rvcj1lLHRoaXN9cmV0dXJuIGUubm9kZVR5cGU/KHRoaXMuY29udGV4dD10aGlzWzBdPWUsdGhpcy5sZW5ndGg9MSx0aGlzKTp4LmlzRnVuY3Rpb24oZSk/bi5yZWFkeShlKTooZS5zZWxlY3RvciE9PXVuZGVmaW5lZCYmKHRoaXMuc2VsZWN0b3I9ZS5zZWxlY3Rvcix0aGlzLmNvbnRleHQ9ZS5jb250ZXh0KSx4Lm1ha2VBcnJheShlLHRoaXMpKX0sc2VsZWN0b3I6IiIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBkLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT90aGlzLnRvQXJyYXkoKTowPmU/dGhpc1t0aGlzLmxlbmd0aCtlXTp0aGlzW2VdfSxwdXNoU3RhY2s6ZnVuY3Rpb24oZSl7dmFyIHQ9eC5tZXJnZSh0aGlzLmNvbnN0cnVjdG9yKCksZSk7cmV0dXJuIHQucHJldk9iamVjdD10aGlzLHQuY29udGV4dD10aGlzLmNvbnRleHQsdH0sZWFjaDpmdW5jdGlvbihlLHQpe3JldHVybiB4LmVhY2godGhpcyxlLHQpfSxyZWFkeTpmdW5jdGlvbihlKXtyZXR1cm4geC5yZWFkeS5wcm9taXNlKCkuZG9uZShlKSx0aGlzfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhkLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LGVxOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubGVuZ3RoLG49K2UrKDA+ZT90OjApO3JldHVybiB0aGlzLnB1c2hTdGFjayhuPj0wJiZ0Pm4/W3RoaXNbbl1dOltdKX0sbWFwOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4Lm1hcCh0aGlzLGZ1bmN0aW9uKHQsbil7cmV0dXJuIGUuY2FsbCh0LG4sdCl9KSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IobnVsbCl9LHB1c2g6aCxzb3J0OltdLnNvcnQsc3BsaWNlOltdLnNwbGljZX0seC5mbi5pbml0LnByb3RvdHlwZT14LmZuLHguZXh0ZW5kPXguZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGUsdCxuLHIsaSxvLHM9YXJndW1lbnRzWzBdfHx7fSxhPTEsdT1hcmd1bWVudHMubGVuZ3RoLGw9ITE7Zm9yKCJib29sZWFuIj09dHlwZW9mIHMmJihsPXMscz1hcmd1bWVudHNbMV18fHt9LGE9MiksIm9iamVjdCI9PXR5cGVvZiBzfHx4LmlzRnVuY3Rpb24ocyl8fChzPXt9KSx1PT09YSYmKHM9dGhpcywtLWEpO3U+YTthKyspaWYobnVsbCE9KGU9YXJndW1lbnRzW2FdKSlmb3IodCBpbiBlKW49c1t0XSxyPWVbdF0scyE9PXImJihsJiZyJiYoeC5pc1BsYWluT2JqZWN0KHIpfHwoaT14LmlzQXJyYXkocikpKT8oaT8oaT0hMSxvPW4mJnguaXNBcnJheShuKT9uOltdKTpvPW4mJnguaXNQbGFpbk9iamVjdChuKT9uOnt9LHNbdF09eC5leHRlbmQobCxvLHIpKTpyIT09dW5kZWZpbmVkJiYoc1t0XT1yKSk7cmV0dXJuIHN9LHguZXh0ZW5kKHtleHBhbmRvOiJqUXVlcnkiKyhmK01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xEL2csIiIpLG5vQ29uZmxpY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIGUuJD09PXgmJihlLiQ9dSksdCYmZS5qUXVlcnk9PT14JiYoZS5qUXVlcnk9YSkseH0saXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oZSl7ZT94LnJlYWR5V2FpdCsrOngucmVhZHkoITApfSxyZWFkeTpmdW5jdGlvbihlKXsoZT09PSEwPy0teC5yZWFkeVdhaXQ6eC5pc1JlYWR5KXx8KHguaXNSZWFkeT0hMCxlIT09ITAmJi0teC5yZWFkeVdhaXQ+MHx8KG4ucmVzb2x2ZVdpdGgobyxbeF0pLHguZm4udHJpZ2dlciYmeChvKS50cmlnZ2VyKCJyZWFkeSIpLm9mZigicmVhZHkiKSkpfSxpc0Z1bmN0aW9uOmZ1bmN0aW9uKGUpe3JldHVybiJmdW5jdGlvbiI9PT14LnR5cGUoZSl9LGlzQXJyYXk6QXJyYXkuaXNBcnJheSxpc1dpbmRvdzpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZSYmZT09PWUud2luZG93fSxpc051bWVyaWM6ZnVuY3Rpb24oZSl7cmV0dXJuIWlzTmFOKHBhcnNlRmxvYXQoZSkpJiZpc0Zpbml0ZShlKX0sdHlwZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT9lKyIiOiJvYmplY3QiPT10eXBlb2YgZXx8ImZ1bmN0aW9uIj09dHlwZW9mIGU/bFttLmNhbGwoZSldfHwib2JqZWN0Ijp0eXBlb2YgZX0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihlKXtpZigib2JqZWN0IiE9PXgudHlwZShlKXx8ZS5ub2RlVHlwZXx8eC5pc1dpbmRvdyhlKSlyZXR1cm4hMTt0cnl7aWYoZS5jb25zdHJ1Y3RvciYmIXkuY2FsbChlLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwiaXNQcm90b3R5cGVPZiIpKXJldHVybiExfWNhdGNoKHQpe3JldHVybiExfXJldHVybiEwfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0O2Zvcih0IGluIGUpcmV0dXJuITE7cmV0dXJuITB9LGVycm9yOmZ1bmN0aW9uKGUpe3Rocm93IEVycm9yKGUpfSxwYXJzZUhUTUw6ZnVuY3Rpb24oZSx0LG4pe2lmKCFlfHwic3RyaW5nIiE9dHlwZW9mIGUpcmV0dXJuIG51bGw7ImJvb2xlYW4iPT10eXBlb2YgdCYmKG49dCx0PSExKSx0PXR8fG87dmFyIHI9Qy5leGVjKGUpLGk9IW4mJltdO3JldHVybiByP1t0LmNyZWF0ZUVsZW1lbnQoclsxXSldOihyPXguYnVpbGRGcmFnbWVudChbZV0sdCxpKSxpJiZ4KGkpLnJlbW92ZSgpLHgubWVyZ2UoW10sci5jaGlsZE5vZGVzKSl9LHBhcnNlSlNPTjpKU09OLnBhcnNlLHBhcnNlWE1MOmZ1bmN0aW9uKGUpe3ZhciB0LG47aWYoIWV8fCJzdHJpbmciIT10eXBlb2YgZSlyZXR1cm4gbnVsbDt0cnl7bj1uZXcgRE9NUGFyc2VyLHQ9bi5wYXJzZUZyb21TdHJpbmcoZSwidGV4dC94bWwiKX1jYXRjaChyKXt0PXVuZGVmaW5lZH1yZXR1cm4oIXR8fHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RoKSYmeC5lcnJvcigiSW52YWxpZCBYTUw6ICIrZSksdH0sbm9vcDpmdW5jdGlvbigpe30sZ2xvYmFsRXZhbDpmdW5jdGlvbihlKXt2YXIgdCxuPWV2YWw7ZT14LnRyaW0oZSksZSYmKDE9PT1lLmluZGV4T2YoInVzZSBzdHJpY3QiKT8odD1vLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpLHQudGV4dD1lLG8uaGVhZC5hcHBlbmRDaGlsZCh0KS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpKTpuKGUpKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoaywibXMtIikucmVwbGFjZShOLEUpfSxub2RlTmFtZTpmdW5jdGlvbihlLHQpe3JldHVybiBlLm5vZGVOYW1lJiZlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT10LnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk9MCxvPWUubGVuZ3RoLHM9aihlKTtpZihuKXtpZihzKXtmb3IoO28+aTtpKyspaWYocj10LmFwcGx5KGVbaV0sbikscj09PSExKWJyZWFrfWVsc2UgZm9yKGkgaW4gZSlpZihyPXQuYXBwbHkoZVtpXSxuKSxyPT09ITEpYnJlYWt9ZWxzZSBpZihzKXtmb3IoO28+aTtpKyspaWYocj10LmNhbGwoZVtpXSxpLGVbaV0pLHI9PT0hMSlicmVha31lbHNlIGZvcihpIGluIGUpaWYocj10LmNhbGwoZVtpXSxpLGVbaV0pLHI9PT0hMSlicmVhaztyZXR1cm4gZX0sdHJpbTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT8iIjp2LmNhbGwoZSl9LG1ha2VBcnJheTpmdW5jdGlvbihlLHQpe3ZhciBuPXR8fFtdO3JldHVybiBudWxsIT1lJiYoaihPYmplY3QoZSkpP3gubWVyZ2Uobiwic3RyaW5nIj09dHlwZW9mIGU/W2VdOmUpOmguY2FsbChuLGUpKSxufSxpbkFycmF5OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbnVsbD09dD8tMTpnLmNhbGwodCxlLG4pfSxtZXJnZTpmdW5jdGlvbihlLHQpe3ZhciBuPXQubGVuZ3RoLHI9ZS5sZW5ndGgsaT0wO2lmKCJudW1iZXIiPT10eXBlb2Ygbilmb3IoO24+aTtpKyspZVtyKytdPXRbaV07ZWxzZSB3aGlsZSh0W2ldIT09dW5kZWZpbmVkKWVbcisrXT10W2krK107cmV0dXJuIGUubGVuZ3RoPXIsZX0sZ3JlcDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaT1bXSxvPTAscz1lLmxlbmd0aDtmb3Iobj0hIW47cz5vO28rKylyPSEhdChlW29dLG8pLG4hPT1yJiZpLnB1c2goZVtvXSk7cmV0dXJuIGl9LG1hcDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaT0wLG89ZS5sZW5ndGgscz1qKGUpLGE9W107aWYocylmb3IoO28+aTtpKyspcj10KGVbaV0saSxuKSxudWxsIT1yJiYoYVthLmxlbmd0aF09cik7ZWxzZSBmb3IoaSBpbiBlKXI9dChlW2ldLGksbiksbnVsbCE9ciYmKGFbYS5sZW5ndGhdPXIpO3JldHVybiBwLmFwcGx5KFtdLGEpfSxndWlkOjEscHJveHk6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGk7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiYobj1lW3RdLHQ9ZSxlPW4pLHguaXNGdW5jdGlvbihlKT8ocj1kLmNhbGwoYXJndW1lbnRzLDIpLGk9ZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0fHx0aGlzLHIuY29uY2F0KGQuY2FsbChhcmd1bWVudHMpKSl9LGkuZ3VpZD1lLmd1aWQ9ZS5ndWlkfHx4Lmd1aWQrKyxpKTp1bmRlZmluZWR9LGFjY2VzczpmdW5jdGlvbihlLHQsbixyLGksbyxzKXt2YXIgYT0wLHU9ZS5sZW5ndGgsbD1udWxsPT1uO2lmKCJvYmplY3QiPT09eC50eXBlKG4pKXtpPSEwO2ZvcihhIGluIG4peC5hY2Nlc3MoZSx0LGEsblthXSwhMCxvLHMpfWVsc2UgaWYociE9PXVuZGVmaW5lZCYmKGk9ITAseC5pc0Z1bmN0aW9uKHIpfHwocz0hMCksbCYmKHM/KHQuY2FsbChlLHIpLHQ9bnVsbCk6KGw9dCx0PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbC5jYWxsKHgoZSksbil9KSksdCkpZm9yKDt1PmE7YSsrKXQoZVthXSxuLHM/cjpyLmNhbGwoZVthXSxhLHQoZVthXSxuKSkpO3JldHVybiBpP2U6bD90LmNhbGwoZSk6dT90KGVbMF0sbik6b30sbm93OkRhdGUubm93LHN3YXA6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxzPXt9O2ZvcihvIGluIHQpc1tvXT1lLnN0eWxlW29dLGUuc3R5bGVbb109dFtvXTtpPW4uYXBwbHkoZSxyfHxbXSk7Zm9yKG8gaW4gdCllLnN0eWxlW29dPXNbb107cmV0dXJuIGl9fSkseC5yZWFkeS5wcm9taXNlPWZ1bmN0aW9uKHQpe3JldHVybiBufHwobj14LkRlZmVycmVkKCksImNvbXBsZXRlIj09PW8ucmVhZHlTdGF0ZT9zZXRUaW1lb3V0KHgucmVhZHkpOihvLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLFMsITEpLGUuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsUywhMSkpKSxuLnByb21pc2UodCl9LHguZWFjaCgiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvciIuc3BsaXQoIiAiKSxmdW5jdGlvbihlLHQpe2xbIltvYmplY3QgIit0KyJdIl09dC50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gaihlKXt2YXIgdD1lLmxlbmd0aCxuPXgudHlwZShlKTtyZXR1cm4geC5pc1dpbmRvdyhlKT8hMToxPT09ZS5ub2RlVHlwZSYmdD8hMDoiYXJyYXkiPT09bnx8ImZ1bmN0aW9uIiE9PW4mJigwPT09dHx8Im51bWJlciI9PXR5cGVvZiB0JiZ0PjAmJnQtMSBpbiBlKX10PXgobyksZnVuY3Rpb24oZSx1bmRlZmluZWQpe3ZhciB0LG4scixpLG8scyxhLHUsbCxjLGYscCxoLGQsZyxtLHk9InNpenpsZSIrLW5ldyBEYXRlLHY9ZS5kb2N1bWVudCxiPXt9LHc9MCxUPTAsQz1vdCgpLGs9b3QoKSxOPW90KCksRT0hMSxTPWZ1bmN0aW9uKCl7cmV0dXJuIDB9LGo9dHlwZW9mIHVuZGVmaW5lZCxEPTE8PDMxLEE9W10sTD1BLnBvcCxxPUEucHVzaCxIPUEucHVzaCxPPUEuc2xpY2UsRj1BLmluZGV4T2Z8fGZ1bmN0aW9uKGUpe3ZhciB0PTAsbj10aGlzLmxlbmd0aDtmb3IoO24+dDt0KyspaWYodGhpc1t0XT09PWUpcmV0dXJuIHQ7cmV0dXJuLTF9LFA9ImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkIixSPSJbXFx4MjBcXHRcXHJcXG5cXGZdIixNPSIoPzpcXFxcLnxbXFx3LV18W15cXHgwMC1cXHhhMF0pKyIsVz1NLnJlcGxhY2UoInciLCJ3IyIpLCQ9IlxcWyIrUisiKigiK00rIikiK1IrIiooPzooWypeJHwhfl0/PSkiK1IrIiooPzooWydcIl0pKCg/OlxcXFwufFteXFxcXF0pKj8pXFwzfCgiK1crIil8KXwpIitSKyIqXFxdIixCPSI6KCIrTSsiKSg/OlxcKCgoWydcIl0pKCg/OlxcXFwufFteXFxcXF0pKj8pXFwzfCgoPzpcXFxcLnxbXlxcXFwoKVtcXF1dfCIrJC5yZXBsYWNlKDMsOCkrIikqKXwuKilcXCl8KSIsST1SZWdFeHAoIl4iK1IrIit8KCg/Ol58W15cXFxcXSkoPzpcXFxcLikqKSIrUisiKyQiLCJnIiksej1SZWdFeHAoIl4iK1IrIiosIitSKyIqIiksXz1SZWdFeHAoIl4iK1IrIiooWz4rfl18IitSKyIpIitSKyIqIiksWD1SZWdFeHAoUisiKlsrfl0iKSxVPVJlZ0V4cCgiPSIrUisiKihbXlxcXSdcIl0qKSIrUisiKlxcXSIsImciKSxZPVJlZ0V4cChCKSxWPVJlZ0V4cCgiXiIrVysiJCIpLEc9e0lEOlJlZ0V4cCgiXiMoIitNKyIpIiksQ0xBU1M6UmVnRXhwKCJeXFwuKCIrTSsiKSIpLFRBRzpSZWdFeHAoIl4oIitNLnJlcGxhY2UoInciLCJ3KiIpKyIpIiksQVRUUjpSZWdFeHAoIl4iKyQpLFBTRVVETzpSZWdFeHAoIl4iK0IpLENISUxEOlJlZ0V4cCgiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFwoIitSKyIqKGV2ZW58b2RkfCgoWystXXwpKFxcZCopbnwpIitSKyIqKD86KFsrLV18KSIrUisiKihcXGQrKXwpKSIrUisiKlxcKXwpIiwiaSIpLCJib29sZWFuIjpSZWdFeHAoIl4oPzoiK1ArIikkIiwiaSIpLG5lZWRzQ29udGV4dDpSZWdFeHAoIl4iK1IrIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcKCIrUisiKigoPzotXFxkKT9cXGQqKSIrUisiKlxcKXwpKD89W14tXXwkKSIsImkiKX0sSj0vXltee10rXHtccypcW25hdGl2ZSBcdy8sUT0vXig/OiMoW1x3LV0rKXwoXHcrKXxcLihbXHctXSspKSQvLEs9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxaPS9eaFxkJC9pLGV0PS8nfFxcL2csdHQ9L1xcKFtcZGEtZkEtRl17MSw2fVtceDIwXHRcclxuXGZdP3wuKS9nLG50PWZ1bmN0aW9uKGUsdCl7dmFyIG49IjB4Iit0LTY1NTM2O3JldHVybiBuIT09bj90OjA+bj9TdHJpbmcuZnJvbUNoYXJDb2RlKG4rNjU1MzYpOlN0cmluZy5mcm9tQ2hhckNvZGUoNTUyOTZ8bj4+MTAsNTYzMjB8MTAyMyZuKX07dHJ5e0guYXBwbHkoQT1PLmNhbGwodi5jaGlsZE5vZGVzKSx2LmNoaWxkTm9kZXMpLEFbdi5jaGlsZE5vZGVzLmxlbmd0aF0ubm9kZVR5cGV9Y2F0Y2gocnQpe0g9e2FwcGx5OkEubGVuZ3RoP2Z1bmN0aW9uKGUsdCl7cS5hcHBseShlLE8uY2FsbCh0KSl9OmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5sZW5ndGgscj0wO3doaWxlKGVbbisrXT10W3IrK10pO2UubGVuZ3RoPW4tMX19fWZ1bmN0aW9uIGl0KGUpe3JldHVybiBKLnRlc3QoZSsiIil9ZnVuY3Rpb24gb3QoKXt2YXIgZSx0PVtdO3JldHVybiBlPWZ1bmN0aW9uKG4saSl7cmV0dXJuIHQucHVzaChuKz0iICIpPnIuY2FjaGVMZW5ndGgmJmRlbGV0ZSBlW3Quc2hpZnQoKV0sZVtuXT1pfX1mdW5jdGlvbiBzdChlKXtyZXR1cm4gZVt5XT0hMCxlfWZ1bmN0aW9uIGF0KGUpe3ZhciB0PWMuY3JlYXRlRWxlbWVudCgiZGl2Iik7dHJ5e3JldHVybiEhZSh0KX1jYXRjaChuKXtyZXR1cm4hMX1maW5hbGx5e3QucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpLHQ9bnVsbH19ZnVuY3Rpb24gdXQoZSx0LG4scil7dmFyIGksbyxzLGEsdSxmLGQsZyx4LHc7aWYoKHQ/dC5vd25lckRvY3VtZW50fHx0OnYpIT09YyYmbCh0KSx0PXR8fGMsbj1ufHxbXSwhZXx8InN0cmluZyIhPXR5cGVvZiBlKXJldHVybiBuO2lmKDEhPT0oYT10Lm5vZGVUeXBlKSYmOSE9PWEpcmV0dXJuW107aWYocCYmIXIpe2lmKGk9US5leGVjKGUpKWlmKHM9aVsxXSl7aWYoOT09PWEpe2lmKG89dC5nZXRFbGVtZW50QnlJZChzKSwhb3x8IW8ucGFyZW50Tm9kZSlyZXR1cm4gbjtpZihvLmlkPT09cylyZXR1cm4gbi5wdXNoKG8pLG59ZWxzZSBpZih0Lm93bmVyRG9jdW1lbnQmJihvPXQub3duZXJEb2N1bWVudC5nZXRFbGVtZW50QnlJZChzKSkmJm0odCxvKSYmby5pZD09PXMpcmV0dXJuIG4ucHVzaChvKSxufWVsc2V7aWYoaVsyXSlyZXR1cm4gSC5hcHBseShuLHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSkpLG47aWYoKHM9aVszXSkmJmIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXJldHVybiBILmFwcGx5KG4sdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHMpKSxufWlmKGIucXNhJiYoIWh8fCFoLnRlc3QoZSkpKXtpZihnPWQ9eSx4PXQsdz05PT09YSYmZSwxPT09YSYmIm9iamVjdCIhPT10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe2Y9Z3QoZSksKGQ9dC5nZXRBdHRyaWJ1dGUoImlkIikpP2c9ZC5yZXBsYWNlKGV0LCJcXCQmIik6dC5zZXRBdHRyaWJ1dGUoImlkIixnKSxnPSJbaWQ9JyIrZysiJ10gIix1PWYubGVuZ3RoO3doaWxlKHUtLSlmW3VdPWcrbXQoZlt1XSk7eD1YLnRlc3QoZSkmJnQucGFyZW50Tm9kZXx8dCx3PWYuam9pbigiLCIpfWlmKHcpdHJ5e3JldHVybiBILmFwcGx5KG4seC5xdWVyeVNlbGVjdG9yQWxsKHcpKSxufWNhdGNoKFQpe31maW5hbGx5e2R8fHQucmVtb3ZlQXR0cmlidXRlKCJpZCIpfX19cmV0dXJuIGt0KGUucmVwbGFjZShJLCIkMSIpLHQsbixyKX1vPXV0LmlzWE1MPWZ1bmN0aW9uKGUpe3ZhciB0PWUmJihlLm93bmVyRG9jdW1lbnR8fGUpLmRvY3VtZW50RWxlbWVudDtyZXR1cm4gdD8iSFRNTCIhPT10Lm5vZGVOYW1lOiExfSxsPXV0LnNldERvY3VtZW50PWZ1bmN0aW9uKGUpe3ZhciB0PWU/ZS5vd25lckRvY3VtZW50fHxlOnY7cmV0dXJuIHQhPT1jJiY5PT09dC5ub2RlVHlwZSYmdC5kb2N1bWVudEVsZW1lbnQ/KGM9dCxmPXQuZG9jdW1lbnRFbGVtZW50LHA9IW8odCksYi5nZXRFbGVtZW50c0J5VGFnTmFtZT1hdChmdW5jdGlvbihlKXtyZXR1cm4gZS5hcHBlbmRDaGlsZCh0LmNyZWF0ZUNvbW1lbnQoIiIpKSwhZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLmxlbmd0aH0pLGIuYXR0cmlidXRlcz1hdChmdW5jdGlvbihlKXtyZXR1cm4gZS5jbGFzc05hbWU9ImkiLCFlLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KSxiLmdldEVsZW1lbnRzQnlDbGFzc05hbWU9YXQoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5uZXJIVE1MPSI8ZGl2IGNsYXNzPSdhJz48L2Rpdj48ZGl2IGNsYXNzPSdhIGknPjwvZGl2PiIsZS5maXJzdENoaWxkLmNsYXNzTmFtZT0iaSIsMj09PWUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiaSIpLmxlbmd0aH0pLGIuc29ydERldGFjaGVkPWF0KGZ1bmN0aW9uKGUpe3JldHVybiAxJmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYy5jcmVhdGVFbGVtZW50KCJkaXYiKSl9KSxiLmdldEJ5SWQ9YXQoZnVuY3Rpb24oZSl7cmV0dXJuIGYuYXBwZW5kQ2hpbGQoZSkuaWQ9eSwhdC5nZXRFbGVtZW50c0J5TmFtZXx8IXQuZ2V0RWxlbWVudHNCeU5hbWUoeSkubGVuZ3RofSksYi5nZXRCeUlkPyhyLmZpbmQuSUQ9ZnVuY3Rpb24oZSx0KXtpZih0eXBlb2YgdC5nZXRFbGVtZW50QnlJZCE9PWomJnApe3ZhciBuPXQuZ2V0RWxlbWVudEJ5SWQoZSk7cmV0dXJuIG4mJm4ucGFyZW50Tm9kZT9bbl06W119fSxyLmZpbHRlci5JRD1mdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UodHQsbnQpO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5nZXRBdHRyaWJ1dGUoImlkIik9PT10fX0pOihyLmZpbmQuSUQ9ZnVuY3Rpb24oZSx0KXtpZih0eXBlb2YgdC5nZXRFbGVtZW50QnlJZCE9PWomJnApe3ZhciBuPXQuZ2V0RWxlbWVudEJ5SWQoZSk7cmV0dXJuIG4/bi5pZD09PWV8fHR5cGVvZiBuLmdldEF0dHJpYnV0ZU5vZGUhPT1qJiZuLmdldEF0dHJpYnV0ZU5vZGUoImlkIikudmFsdWU9PT1lP1tuXTp1bmRlZmluZWQ6W119fSxyLmZpbHRlci5JRD1mdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UodHQsbnQpO3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj10eXBlb2YgZS5nZXRBdHRyaWJ1dGVOb2RlIT09aiYmZS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO3JldHVybiBuJiZuLnZhbHVlPT09dH19KSxyLmZpbmQuVEFHPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHlwZW9mIHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPT1qP3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk6dW5kZWZpbmVkfTpmdW5jdGlvbihlLHQpe3ZhciBuLHI9W10saT0wLG89dC5nZXRFbGVtZW50c0J5VGFnTmFtZShlKTtpZigiKiI9PT1lKXt3aGlsZShuPW9baSsrXSkxPT09bi5ub2RlVHlwZSYmci5wdXNoKG4pO3JldHVybiByfXJldHVybiBvfSxyLmZpbmQuQ0xBU1M9Yi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZmdW5jdGlvbihlLHQpe3JldHVybiB0eXBlb2YgdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lIT09aiYmcD90LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZSk6dW5kZWZpbmVkfSxkPVtdLGg9W10sKGIucXNhPWl0KHQucXVlcnlTZWxlY3RvckFsbCkpJiYoYXQoZnVuY3Rpb24oZSl7ZS5pbm5lckhUTUw9IjxzZWxlY3Q+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD4iLGUucXVlcnlTZWxlY3RvckFsbCgiW3NlbGVjdGVkXSIpLmxlbmd0aHx8aC5wdXNoKCJcXFsiK1IrIiooPzp2YWx1ZXwiK1ArIikiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RofHxoLnB1c2goIjpjaGVja2VkIil9KSxhdChmdW5jdGlvbihlKXt2YXIgdD1jLmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7dC5zZXRBdHRyaWJ1dGUoInR5cGUiLCJoaWRkZW4iKSxlLmFwcGVuZENoaWxkKHQpLnNldEF0dHJpYnV0ZSgidCIsIiIpLGUucXVlcnlTZWxlY3RvckFsbCgiW3RePScnXSIpLmxlbmd0aCYmaC5wdXNoKCJbKl4kXT0iK1IrIiooPzonJ3xcIlwiKSIpLGUucXVlcnlTZWxlY3RvckFsbCgiOmVuYWJsZWQiKS5sZW5ndGh8fGgucHVzaCgiOmVuYWJsZWQiLCI6ZGlzYWJsZWQiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIiosOngiKSxoLnB1c2goIiwuKjoiKX0pKSwoYi5tYXRjaGVzU2VsZWN0b3I9aXQoZz1mLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8Zi5tb3pNYXRjaGVzU2VsZWN0b3J8fGYub01hdGNoZXNTZWxlY3Rvcnx8Zi5tc01hdGNoZXNTZWxlY3RvcikpJiZhdChmdW5jdGlvbihlKXtiLmRpc2Nvbm5lY3RlZE1hdGNoPWcuY2FsbChlLCJkaXYiKSxnLmNhbGwoZSwiW3MhPScnXTp4IiksZC5wdXNoKCIhPSIsQil9KSxoPWgubGVuZ3RoJiZSZWdFeHAoaC5qb2luKCJ8IikpLGQ9ZC5sZW5ndGgmJlJlZ0V4cChkLmpvaW4oInwiKSksbT1pdChmLmNvbnRhaW5zKXx8Zi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj9mdW5jdGlvbihlLHQpe3ZhciBuPTk9PT1lLm5vZGVUeXBlP2UuZG9jdW1lbnRFbGVtZW50OmUscj10JiZ0LnBhcmVudE5vZGU7cmV0dXJuIGU9PT1yfHwhKCFyfHwxIT09ci5ub2RlVHlwZXx8IShuLmNvbnRhaW5zP24uY29udGFpbnMocik6ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmMTYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihyKSkpfTpmdW5jdGlvbihlLHQpe2lmKHQpd2hpbGUodD10LnBhcmVudE5vZGUpaWYodD09PWUpcmV0dXJuITA7cmV0dXJuITF9LFM9Zi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj9mdW5jdGlvbihlLG4pe2lmKGU9PT1uKXJldHVybiBFPSEwLDA7dmFyIHI9bi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihuKTtyZXR1cm4gcj8xJnJ8fCFiLnNvcnREZXRhY2hlZCYmbi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihlKT09PXI/ZT09PXR8fG0odixlKT8tMTpuPT09dHx8bSh2LG4pPzE6dT9GLmNhbGwodSxlKS1GLmNhbGwodSxuKTowOjQmcj8tMToxOmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24/LTE6MX06ZnVuY3Rpb24oZSxuKXt2YXIgcixpPTAsbz1lLnBhcmVudE5vZGUscz1uLnBhcmVudE5vZGUsYT1bZV0sbD1bbl07aWYoZT09PW4pcmV0dXJuIEU9ITAsMDtpZighb3x8IXMpcmV0dXJuIGU9PT10Py0xOm49PT10PzE6bz8tMTpzPzE6dT9GLmNhbGwodSxlKS1GLmNhbGwodSxuKTowO2lmKG89PT1zKXJldHVybiBsdChlLG4pO3I9ZTt3aGlsZShyPXIucGFyZW50Tm9kZSlhLnVuc2hpZnQocik7cj1uO3doaWxlKHI9ci5wYXJlbnROb2RlKWwudW5zaGlmdChyKTt3aGlsZShhW2ldPT09bFtpXSlpKys7cmV0dXJuIGk/bHQoYVtpXSxsW2ldKTphW2ldPT09dj8tMTpsW2ldPT09dj8xOjB9LGMpOmN9LHV0Lm1hdGNoZXM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdXQoZSxudWxsLG51bGwsdCl9LHV0Lm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihlLHQpe2lmKChlLm93bmVyRG9jdW1lbnR8fGUpIT09YyYmbChlKSx0PXQucmVwbGFjZShVLCI9JyQxJ10iKSwhKCFiLm1hdGNoZXNTZWxlY3Rvcnx8IXB8fGQmJmQudGVzdCh0KXx8aCYmaC50ZXN0KHQpKSl0cnl7dmFyIG49Zy5jYWxsKGUsdCk7aWYobnx8Yi5kaXNjb25uZWN0ZWRNYXRjaHx8ZS5kb2N1bWVudCYmMTEhPT1lLmRvY3VtZW50Lm5vZGVUeXBlKXJldHVybiBufWNhdGNoKHIpe31yZXR1cm4gdXQodCxjLG51bGwsW2VdKS5sZW5ndGg+MH0sdXQuY29udGFpbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4oZS5vd25lckRvY3VtZW50fHxlKSE9PWMmJmwoZSksbShlLHQpfSx1dC5hdHRyPWZ1bmN0aW9uKGUsdCl7KGUub3duZXJEb2N1bWVudHx8ZSkhPT1jJiZsKGUpO3ZhciBuPXIuYXR0ckhhbmRsZVt0LnRvTG93ZXJDYXNlKCldLGk9biYmbihlLHQsIXApO3JldHVybiBpPT09dW5kZWZpbmVkP2IuYXR0cmlidXRlc3x8IXA/ZS5nZXRBdHRyaWJ1dGUodCk6KGk9ZS5nZXRBdHRyaWJ1dGVOb2RlKHQpKSYmaS5zcGVjaWZpZWQ/aS52YWx1ZTpudWxsOml9LHV0LmVycm9yPWZ1bmN0aW9uKGUpe3Rocm93IEVycm9yKCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiAiK2UpfSx1dC51bmlxdWVTb3J0PWZ1bmN0aW9uKGUpe3ZhciB0LG49W10scj0wLGk9MDtpZihFPSFiLmRldGVjdER1cGxpY2F0ZXMsdT0hYi5zb3J0U3RhYmxlJiZlLnNsaWNlKDApLGUuc29ydChTKSxFKXt3aGlsZSh0PWVbaSsrXSl0PT09ZVtpXSYmKHI9bi5wdXNoKGkpKTt3aGlsZShyLS0pZS5zcGxpY2UobltyXSwxKX1yZXR1cm4gZX07ZnVuY3Rpb24gbHQoZSx0KXt2YXIgbj10JiZlLHI9biYmKH50LnNvdXJjZUluZGV4fHxEKS0ofmUuc291cmNlSW5kZXh8fEQpO2lmKHIpcmV0dXJuIHI7aWYobil3aGlsZShuPW4ubmV4dFNpYmxpbmcpaWYobj09PXQpcmV0dXJuLTE7cmV0dXJuIGU/MTotMX1mdW5jdGlvbiBjdChlLHQsbil7dmFyIHI7cmV0dXJuIG4/dW5kZWZpbmVkOihyPWUuZ2V0QXR0cmlidXRlTm9kZSh0KSkmJnIuc3BlY2lmaWVkP3IudmFsdWU6ZVt0XT09PSEwP3QudG9Mb3dlckNhc2UoKTpudWxsfWZ1bmN0aW9uIGZ0KGUsdCxuKXt2YXIgcjtyZXR1cm4gbj91bmRlZmluZWQ6cj1lLmdldEF0dHJpYnV0ZSh0LCJ0eXBlIj09PXQudG9Mb3dlckNhc2UoKT8xOjIpfWZ1bmN0aW9uIHB0KGUpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgbj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuImlucHV0Ij09PW4mJnQudHlwZT09PWV9fWZ1bmN0aW9uIGh0KGUpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgbj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKCJpbnB1dCI9PT1ufHwiYnV0dG9uIj09PW4pJiZ0LnR5cGU9PT1lfX1mdW5jdGlvbiBkdChlKXtyZXR1cm4gc3QoZnVuY3Rpb24odCl7cmV0dXJuIHQ9K3Qsc3QoZnVuY3Rpb24obixyKXt2YXIgaSxvPWUoW10sbi5sZW5ndGgsdCkscz1vLmxlbmd0aDt3aGlsZShzLS0pbltpPW9bc11dJiYobltpXT0hKHJbaV09bltpXSkpfSl9KX1pPXV0LmdldFRleHQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj0iIixyPTAsbz1lLm5vZGVUeXBlO2lmKG8pe2lmKDE9PT1vfHw5PT09b3x8MTE9PT1vKXtpZigic3RyaW5nIj09dHlwZW9mIGUudGV4dENvbnRlbnQpcmV0dXJuIGUudGV4dENvbnRlbnQ7Zm9yKGU9ZS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKW4rPWkoZSl9ZWxzZSBpZigzPT09b3x8ND09PW8pcmV0dXJuIGUubm9kZVZhbHVlfWVsc2UgZm9yKDt0PWVbcl07cisrKW4rPWkodCk7cmV0dXJuIG59LHI9dXQuc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86c3QsbWF0Y2g6RyxhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6eyI+Ijp7ZGlyOiJwYXJlbnROb2RlIixmaXJzdDohMH0sIiAiOntkaXI6InBhcmVudE5vZGUifSwiKyI6e2RpcjoicHJldmlvdXNTaWJsaW5nIixmaXJzdDohMH0sIn4iOntkaXI6InByZXZpb3VzU2libGluZyJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS5yZXBsYWNlKHR0LG50KSxlWzNdPShlWzRdfHxlWzVdfHwiIikucmVwbGFjZSh0dCxudCksIn49Ij09PWVbMl0mJihlWzNdPSIgIitlWzNdKyIgIiksZS5zbGljZSgwLDQpfSxDSElMRDpmdW5jdGlvbihlKXtyZXR1cm4gZVsxXT1lWzFdLnRvTG93ZXJDYXNlKCksIm50aCI9PT1lWzFdLnNsaWNlKDAsMyk/KGVbM118fHV0LmVycm9yKGVbMF0pLGVbNF09KyhlWzRdP2VbNV0rKGVbNl18fDEpOjIqKCJldmVuIj09PWVbM118fCJvZGQiPT09ZVszXSkpLGVbNV09KyhlWzddK2VbOF18fCJvZGQiPT09ZVszXSkpOmVbM10mJnV0LmVycm9yKGVbMF0pLGV9LFBTRVVETzpmdW5jdGlvbihlKXt2YXIgdCxuPSFlWzVdJiZlWzJdO3JldHVybiBHLkNISUxELnRlc3QoZVswXSk/bnVsbDooZVs0XT9lWzJdPWVbNF06biYmWS50ZXN0KG4pJiYodD1ndChuLCEwKSkmJih0PW4uaW5kZXhPZigiKSIsbi5sZW5ndGgtdCktbi5sZW5ndGgpJiYoZVswXT1lWzBdLnNsaWNlKDAsdCksZVsyXT1uLnNsaWNlKDAsdCkpLGUuc2xpY2UoMCwzKSl9fSxmaWx0ZXI6e1RBRzpmdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UodHQsbnQpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIioiPT09ZT9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihlKXtyZXR1cm4gZS5ub2RlTmFtZSYmZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09dH19LENMQVNTOmZ1bmN0aW9uKGUpe3ZhciB0PUNbZSsiICJdO3JldHVybiB0fHwodD1SZWdFeHAoIihefCIrUisiKSIrZSsiKCIrUisifCQpIikpJiZDKGUsZnVuY3Rpb24oZSl7cmV0dXJuIHQudGVzdCgic3RyaW5nIj09dHlwZW9mIGUuY2xhc3NOYW1lJiZlLmNsYXNzTmFtZXx8dHlwZW9mIGUuZ2V0QXR0cmlidXRlIT09aiYmZS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiKX0pfSxBVFRSOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIGk9dXQuYXR0cihyLGUpO3JldHVybiBudWxsPT1pPyIhPSI9PT10OnQ/KGkrPSIiLCI9Ij09PXQ/aT09PW46IiE9Ij09PXQ/aSE9PW46Il49Ij09PXQ/biYmMD09PWkuaW5kZXhPZihuKToiKj0iPT09dD9uJiZpLmluZGV4T2Yobik+LTE6IiQ9Ij09PXQ/biYmaS5zbGljZSgtbi5sZW5ndGgpPT09bjoifj0iPT09dD8oIiAiK2krIiAiKS5pbmRleE9mKG4pPi0xOiJ8PSI9PT10P2k9PT1ufHxpLnNsaWNlKDAsbi5sZW5ndGgrMSk9PT1uKyItIjohMSk6ITB9fSxDSElMRDpmdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvPSJudGgiIT09ZS5zbGljZSgwLDMpLHM9Imxhc3QiIT09ZS5zbGljZSgtNCksYT0ib2YtdHlwZSI9PT10O3JldHVybiAxPT09ciYmMD09PWk/ZnVuY3Rpb24oZSl7cmV0dXJuISFlLnBhcmVudE5vZGV9OmZ1bmN0aW9uKHQsbix1KXt2YXIgbCxjLGYscCxoLGQsZz1vIT09cz8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLG09dC5wYXJlbnROb2RlLHY9YSYmdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHg9IXUmJiFhO2lmKG0pe2lmKG8pe3doaWxlKGcpe2Y9dDt3aGlsZShmPWZbZ10paWYoYT9mLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT12OjE9PT1mLm5vZGVUeXBlKXJldHVybiExO2Q9Zz0ib25seSI9PT1lJiYhZCYmIm5leHRTaWJsaW5nIn1yZXR1cm4hMH1pZihkPVtzP20uZmlyc3RDaGlsZDptLmxhc3RDaGlsZF0scyYmeCl7Yz1tW3ldfHwobVt5XT17fSksbD1jW2VdfHxbXSxoPWxbMF09PT13JiZsWzFdLHA9bFswXT09PXcmJmxbMl0sZj1oJiZtLmNoaWxkTm9kZXNbaF07d2hpbGUoZj0rK2gmJmYmJmZbZ118fChwPWg9MCl8fGQucG9wKCkpaWYoMT09PWYubm9kZVR5cGUmJisrcCYmZj09PXQpe2NbZV09W3csaCxwXTticmVha319ZWxzZSBpZih4JiYobD0odFt5XXx8KHRbeV09e30pKVtlXSkmJmxbMF09PT13KXA9bFsxXTtlbHNlIHdoaWxlKGY9KytoJiZmJiZmW2ddfHwocD1oPTApfHxkLnBvcCgpKWlmKChhP2Yubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXY6MT09PWYubm9kZVR5cGUpJiYrK3AmJih4JiYoKGZbeV18fChmW3ldPXt9KSlbZV09W3cscF0pLGY9PT10KSlicmVhaztyZXR1cm4gcC09aSxwPT09cnx8MD09PXAlciYmcC9yPj0wfX19LFBTRVVETzpmdW5jdGlvbihlLHQpe3ZhciBuLGk9ci5wc2V1ZG9zW2VdfHxyLnNldEZpbHRlcnNbZS50b0xvd2VyQ2FzZSgpXXx8dXQuZXJyb3IoInVuc3VwcG9ydGVkIHBzZXVkbzogIitlKTtyZXR1cm4gaVt5XT9pKHQpOmkubGVuZ3RoPjE/KG49W2UsZSwiIix0XSxyLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoZS50b0xvd2VyQ2FzZSgpKT9zdChmdW5jdGlvbihlLG4pe3ZhciByLG89aShlLHQpLHM9by5sZW5ndGg7d2hpbGUocy0tKXI9Ri5jYWxsKGUsb1tzXSksZVtyXT0hKG5bcl09b1tzXSl9KTpmdW5jdGlvbihlKXtyZXR1cm4gaShlLDAsbil9KTppfX0scHNldWRvczp7bm90OnN0KGZ1bmN0aW9uKGUpe3ZhciB0PVtdLG49W10scj1zKGUucmVwbGFjZShJLCIkMSIpKTtyZXR1cm4gclt5XT9zdChmdW5jdGlvbihlLHQsbixpKXt2YXIgbyxzPXIoZSxudWxsLGksW10pLGE9ZS5sZW5ndGg7d2hpbGUoYS0tKShvPXNbYV0pJiYoZVthXT0hKHRbYV09bykpfSk6ZnVuY3Rpb24oZSxpLG8pe3JldHVybiB0WzBdPWUscih0LG51bGwsbyxuKSwhbi5wb3AoKX19KSxoYXM6c3QoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiB1dChlLHQpLmxlbmd0aD4wfX0pLGNvbnRhaW5zOnN0KGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4odC50ZXh0Q29udGVudHx8dC5pbm5lclRleHR8fGkodCkpLmluZGV4T2YoZSk+LTF9fSksbGFuZzpzdChmdW5jdGlvbihlKXtyZXR1cm4gVi50ZXN0KGV8fCIiKXx8dXQuZXJyb3IoInVuc3VwcG9ydGVkIGxhbmc6ICIrZSksZT1lLnJlcGxhY2UodHQsbnQpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24odCl7dmFyIG47ZG8gaWYobj1wP3QubGFuZzp0LmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKXx8dC5nZXRBdHRyaWJ1dGUoImxhbmciKSlyZXR1cm4gbj1uLnRvTG93ZXJDYXNlKCksbj09PWV8fDA9PT1uLmluZGV4T2YoZSsiLSIpO3doaWxlKCh0PXQucGFyZW50Tm9kZSkmJjE9PT10Lm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24odCl7dmFyIG49ZS5sb2NhdGlvbiYmZS5sb2NhdGlvbi5oYXNoO3JldHVybiBuJiZuLnNsaWNlKDEpPT09dC5pZH0scm9vdDpmdW5jdGlvbihlKXtyZXR1cm4gZT09PWZ9LGZvY3VzOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09Yy5hY3RpdmVFbGVtZW50JiYoIWMuaGFzRm9jdXN8fGMuaGFzRm9jdXMoKSkmJiEhKGUudHlwZXx8ZS5ocmVmfHx+ZS50YWJJbmRleCl9LGVuYWJsZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGlzYWJsZWQ9PT0hMX0sZGlzYWJsZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGlzYWJsZWQ9PT0hMH0sY2hlY2tlZDpmdW5jdGlvbihlKXt2YXIgdD1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuImlucHV0Ij09PXQmJiEhZS5jaGVja2VkfHwib3B0aW9uIj09PXQmJiEhZS5zZWxlY3RlZH0sc2VsZWN0ZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFyZW50Tm9kZSYmZS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsZS5zZWxlY3RlZD09PSEwfSxlbXB0eTpmdW5jdGlvbihlKXtmb3IoZT1lLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpaWYoZS5ub2RlTmFtZT4iQCJ8fDM9PT1lLm5vZGVUeXBlfHw0PT09ZS5ub2RlVHlwZSlyZXR1cm4hMTtyZXR1cm4hMH0scGFyZW50OmZ1bmN0aW9uKGUpe3JldHVybiFyLnBzZXVkb3MuZW1wdHkoZSl9LGhlYWRlcjpmdW5jdGlvbihlKXtyZXR1cm4gWi50ZXN0KGUubm9kZU5hbWUpfSxpbnB1dDpmdW5jdGlvbihlKXtyZXR1cm4gSy50ZXN0KGUubm9kZU5hbWUpfSxidXR0b246ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT10JiYiYnV0dG9uIj09PWUudHlwZXx8ImJ1dHRvbiI9PT10fSx0ZXh0OmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiJpbnB1dCI9PT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJiJ0ZXh0Ij09PWUudHlwZSYmKG51bGw9PSh0PWUuZ2V0QXR0cmlidXRlKCJ0eXBlIikpfHx0LnRvTG93ZXJDYXNlKCk9PT1lLnR5cGUpfSxmaXJzdDpkdChmdW5jdGlvbigpe3JldHVyblswXX0pLGxhc3Q6ZHQoZnVuY3Rpb24oZSx0KXtyZXR1cm5bdC0xXX0pLGVxOmR0KGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm5bMD5uP24rdDpuXX0pLGV2ZW46ZHQoZnVuY3Rpb24oZSx0KXt2YXIgbj0wO2Zvcig7dD5uO24rPTIpZS5wdXNoKG4pO3JldHVybiBlfSksb2RkOmR0KGZ1bmN0aW9uKGUsdCl7dmFyIG49MTtmb3IoO3Q+bjtuKz0yKWUucHVzaChuKTtyZXR1cm4gZX0pLGx0OmR0KGZ1bmN0aW9uKGUsdCxuKXt2YXIgcj0wPm4/bit0Om47Zm9yKDstLXI+PTA7KWUucHVzaChyKTtyZXR1cm4gZX0pLGd0OmR0KGZ1bmN0aW9uKGUsdCxuKXt2YXIgcj0wPm4/bit0Om47Zm9yKDt0PisrcjspZS5wdXNoKHIpO3JldHVybiBlfSl9fTtmb3IodCBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlyLnBzZXVkb3NbdF09cHQodCk7Zm9yKHQgaW57c3VibWl0OiEwLHJlc2V0OiEwfSlyLnBzZXVkb3NbdF09aHQodCk7ZnVuY3Rpb24gZ3QoZSx0KXt2YXIgbixpLG8scyxhLHUsbCxjPWtbZSsiICJdO2lmKGMpcmV0dXJuIHQ/MDpjLnNsaWNlKDApO2E9ZSx1PVtdLGw9ci5wcmVGaWx0ZXI7d2hpbGUoYSl7KCFufHwoaT16LmV4ZWMoYSkpKSYmKGkmJihhPWEuc2xpY2UoaVswXS5sZW5ndGgpfHxhKSx1LnB1c2gobz1bXSkpLG49ITEsKGk9Xy5leGVjKGEpKSYmKG49aS5zaGlmdCgpLG8ucHVzaCh7dmFsdWU6bix0eXBlOmlbMF0ucmVwbGFjZShJLCIgIil9KSxhPWEuc2xpY2Uobi5sZW5ndGgpKTtmb3IocyBpbiByLmZpbHRlcikhKGk9R1tzXS5leGVjKGEpKXx8bFtzXSYmIShpPWxbc10oaSkpfHwobj1pLnNoaWZ0KCksby5wdXNoKHt2YWx1ZTpuLHR5cGU6cyxtYXRjaGVzOml9KSxhPWEuc2xpY2Uobi5sZW5ndGgpKTtpZighbilicmVha31yZXR1cm4gdD9hLmxlbmd0aDphP3V0LmVycm9yKGUpOmsoZSx1KS5zbGljZSgwKX1mdW5jdGlvbiBtdChlKXt2YXIgdD0wLG49ZS5sZW5ndGgscj0iIjtmb3IoO24+dDt0Kyspcis9ZVt0XS52YWx1ZTtyZXR1cm4gcn1mdW5jdGlvbiB5dChlLHQscil7dmFyIGk9dC5kaXIsbz1yJiYicGFyZW50Tm9kZSI9PT1pLHM9VCsrO3JldHVybiB0LmZpcnN0P2Z1bmN0aW9uKHQsbixyKXt3aGlsZSh0PXRbaV0paWYoMT09PXQubm9kZVR5cGV8fG8pcmV0dXJuIGUodCxuLHIpfTpmdW5jdGlvbih0LHIsYSl7dmFyIHUsbCxjLGY9dysiICIrcztpZihhKXt3aGlsZSh0PXRbaV0paWYoKDE9PT10Lm5vZGVUeXBlfHxvKSYmZSh0LHIsYSkpcmV0dXJuITB9ZWxzZSB3aGlsZSh0PXRbaV0paWYoMT09PXQubm9kZVR5cGV8fG8paWYoYz10W3ldfHwodFt5XT17fSksKGw9Y1tpXSkmJmxbMF09PT1mKXtpZigodT1sWzFdKT09PSEwfHx1PT09bilyZXR1cm4gdT09PSEwfWVsc2UgaWYobD1jW2ldPVtmXSxsWzFdPWUodCxyLGEpfHxuLGxbMV09PT0hMClyZXR1cm4hMH19ZnVuY3Rpb24gdnQoZSl7cmV0dXJuIGUubGVuZ3RoPjE/ZnVuY3Rpb24odCxuLHIpe3ZhciBpPWUubGVuZ3RoO3doaWxlKGktLSlpZighZVtpXSh0LG4scikpcmV0dXJuITE7cmV0dXJuITB9OmVbMF19ZnVuY3Rpb24geHQoZSx0LG4scixpKXt2YXIgbyxzPVtdLGE9MCx1PWUubGVuZ3RoLGw9bnVsbCE9dDtmb3IoO3U+YTthKyspKG89ZVthXSkmJighbnx8bihvLHIsaSkpJiYocy5wdXNoKG8pLGwmJnQucHVzaChhKSk7cmV0dXJuIHN9ZnVuY3Rpb24gYnQoZSx0LG4scixpLG8pe3JldHVybiByJiYhclt5XSYmKHI9YnQocikpLGkmJiFpW3ldJiYoaT1idChpLG8pKSxzdChmdW5jdGlvbihvLHMsYSx1KXt2YXIgbCxjLGYscD1bXSxoPVtdLGQ9cy5sZW5ndGgsZz1vfHxDdCh0fHwiKiIsYS5ub2RlVHlwZT9bYV06YSxbXSksbT0hZXx8IW8mJnQ/Zzp4dChnLHAsZSxhLHUpLHk9bj9pfHwobz9lOmR8fHIpP1tdOnM6bTtpZihuJiZuKG0seSxhLHUpLHIpe2w9eHQoeSxoKSxyKGwsW10sYSx1KSxjPWwubGVuZ3RoO3doaWxlKGMtLSkoZj1sW2NdKSYmKHlbaFtjXV09IShtW2hbY11dPWYpKX1pZihvKXtpZihpfHxlKXtpZihpKXtsPVtdLGM9eS5sZW5ndGg7d2hpbGUoYy0tKShmPXlbY10pJiZsLnB1c2gobVtjXT1mKTtpKG51bGwseT1bXSxsLHUpfWM9eS5sZW5ndGg7d2hpbGUoYy0tKShmPXlbY10pJiYobD1pP0YuY2FsbChvLGYpOnBbY10pPi0xJiYob1tsXT0hKHNbbF09ZikpfX1lbHNlIHk9eHQoeT09PXM/eS5zcGxpY2UoZCx5Lmxlbmd0aCk6eSksaT9pKG51bGwscyx5LHUpOkguYXBwbHkocyx5KX0pfWZ1bmN0aW9uIHd0KGUpe3ZhciB0LG4saSxvPWUubGVuZ3RoLHM9ci5yZWxhdGl2ZVtlWzBdLnR5cGVdLHU9c3x8ci5yZWxhdGl2ZVsiICJdLGw9cz8xOjAsYz15dChmdW5jdGlvbihlKXtyZXR1cm4gZT09PXR9LHUsITApLGY9eXQoZnVuY3Rpb24oZSl7cmV0dXJuIEYuY2FsbCh0LGUpPi0xfSx1LCEwKSxwPVtmdW5jdGlvbihlLG4scil7cmV0dXJuIXMmJihyfHxuIT09YSl8fCgodD1uKS5ub2RlVHlwZT9jKGUsbixyKTpmKGUsbixyKSl9XTtmb3IoO28+bDtsKyspaWYobj1yLnJlbGF0aXZlW2VbbF0udHlwZV0pcD1beXQodnQocCksbildO2Vsc2V7aWYobj1yLmZpbHRlcltlW2xdLnR5cGVdLmFwcGx5KG51bGwsZVtsXS5tYXRjaGVzKSxuW3ldKXtmb3IoaT0rK2w7bz5pO2krKylpZihyLnJlbGF0aXZlW2VbaV0udHlwZV0pYnJlYWs7cmV0dXJuIGJ0KGw+MSYmdnQocCksbD4xJiZtdChlLnNsaWNlKDAsbC0xKSkucmVwbGFjZShJLCIkMSIpLG4saT5sJiZ3dChlLnNsaWNlKGwsaSkpLG8+aSYmd3QoZT1lLnNsaWNlKGkpKSxvPmkmJm10KGUpKX1wLnB1c2gobil9cmV0dXJuIHZ0KHApfWZ1bmN0aW9uIFR0KGUsdCl7dmFyIGk9MCxvPXQubGVuZ3RoPjAscz1lLmxlbmd0aD4wLHU9ZnVuY3Rpb24odSxsLGYscCxoKXt2YXIgZCxnLG0seT1bXSx2PTAseD0iMCIsYj11JiZbXSxUPW51bGwhPWgsQz1hLGs9dXx8cyYmci5maW5kLlRBRygiKiIsaCYmbC5wYXJlbnROb2RlfHxsKSxOPXcrPW51bGw9PUM/MTpNYXRoLnJhbmRvbSgpfHwuMTtmb3IoVCYmKGE9bCE9PWMmJmwsbj1pKTtudWxsIT0oZD1rW3hdKTt4Kyspe2lmKHMmJmQpe2c9MDt3aGlsZShtPWVbZysrXSlpZihtKGQsbCxmKSl7cC5wdXNoKGQpO2JyZWFrfVQmJih3PU4sbj0rK2kpfW8mJigoZD0hbSYmZCkmJnYtLSx1JiZiLnB1c2goZCkpfWlmKHYrPXgsbyYmeCE9PXYpe2c9MDt3aGlsZShtPXRbZysrXSltKGIseSxsLGYpO2lmKHUpe2lmKHY+MCl3aGlsZSh4LS0pYlt4XXx8eVt4XXx8KHlbeF09TC5jYWxsKHApKTt5PXh0KHkpfUguYXBwbHkocCx5KSxUJiYhdSYmeS5sZW5ndGg+MCYmdit0Lmxlbmd0aD4xJiZ1dC51bmlxdWVTb3J0KHApfXJldHVybiBUJiYodz1OLGE9QyksYn07cmV0dXJuIG8/c3QodSk6dX1zPXV0LmNvbXBpbGU9ZnVuY3Rpb24oZSx0KXt2YXIgbixyPVtdLGk9W10sbz1OW2UrIiAiXTtpZighbyl7dHx8KHQ9Z3QoZSkpLG49dC5sZW5ndGg7d2hpbGUobi0tKW89d3QodFtuXSksb1t5XT9yLnB1c2gobyk6aS5wdXNoKG8pO289TihlLFR0KGkscikpfXJldHVybiBvfTtmdW5jdGlvbiBDdChlLHQsbil7dmFyIHI9MCxpPXQubGVuZ3RoO2Zvcig7aT5yO3IrKyl1dChlLHRbcl0sbik7cmV0dXJuIG59ZnVuY3Rpb24ga3QoZSx0LG4saSl7dmFyIG8sYSx1LGwsYyxmPWd0KGUpO2lmKCFpJiYxPT09Zi5sZW5ndGgpe2lmKGE9ZlswXT1mWzBdLnNsaWNlKDApLGEubGVuZ3RoPjImJiJJRCI9PT0odT1hWzBdKS50eXBlJiY5PT09dC5ub2RlVHlwZSYmcCYmci5yZWxhdGl2ZVthWzFdLnR5cGVdKXtpZih0PShyLmZpbmQuSUQodS5tYXRjaGVzWzBdLnJlcGxhY2UodHQsbnQpLHQpfHxbXSlbMF0sIXQpcmV0dXJuIG47ZT1lLnNsaWNlKGEuc2hpZnQoKS52YWx1ZS5sZW5ndGgpfW89Ry5uZWVkc0NvbnRleHQudGVzdChlKT8wOmEubGVuZ3RoO3doaWxlKG8tLSl7aWYodT1hW29dLHIucmVsYXRpdmVbbD11LnR5cGVdKWJyZWFrO2lmKChjPXIuZmluZFtsXSkmJihpPWModS5tYXRjaGVzWzBdLnJlcGxhY2UodHQsbnQpLFgudGVzdChhWzBdLnR5cGUpJiZ0LnBhcmVudE5vZGV8fHQpKSl7aWYoYS5zcGxpY2UobywxKSxlPWkubGVuZ3RoJiZtdChhKSwhZSlyZXR1cm4gSC5hcHBseShuLGkpLG47YnJlYWt9fX1yZXR1cm4gcyhlLGYpKGksdCwhcCxuLFgudGVzdChlKSksbn1yLnBzZXVkb3MubnRoPXIucHNldWRvcy5lcTtmdW5jdGlvbiBOdCgpe31OdC5wcm90b3R5cGU9ci5maWx0ZXJzPXIucHNldWRvcyxyLnNldEZpbHRlcnM9bmV3IE50LGIuc29ydFN0YWJsZT15LnNwbGl0KCIiKS5zb3J0KFMpLmpvaW4oIiIpPT09eSxsKCksWzAsMF0uc29ydChTKSxiLmRldGVjdER1cGxpY2F0ZXM9RSxhdChmdW5jdGlvbihlKXtpZihlLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiIsIiMiIT09ZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpKXt2YXIgdD0idHlwZXxocmVmfGhlaWdodHx3aWR0aCIuc3BsaXQoInwiKSxuPXQubGVuZ3RoO3doaWxlKG4tLSlyLmF0dHJIYW5kbGVbdFtuXV09ZnR9fSksYXQoZnVuY3Rpb24oZSl7aWYobnVsbCE9ZS5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIikpe3ZhciB0PVAuc3BsaXQoInwiKSxuPXQubGVuZ3RoO3doaWxlKG4tLSlyLmF0dHJIYW5kbGVbdFtuXV09Y3R9fSkseC5maW5kPXV0LHguZXhwcj11dC5zZWxlY3RvcnMseC5leHByWyI6Il09eC5leHByLnBzZXVkb3MseC51bmlxdWU9dXQudW5pcXVlU29ydCx4LnRleHQ9dXQuZ2V0VGV4dCx4LmlzWE1MRG9jPXV0LmlzWE1MLHguY29udGFpbnM9dXQuY29udGFpbnN9KGUpO3ZhciBEPXt9O2Z1bmN0aW9uIEEoZSl7dmFyIHQ9RFtlXT17fTtyZXR1cm4geC5lYWNoKGUubWF0Y2godyl8fFtdLGZ1bmN0aW9uKGUsbil7dFtuXT0hMH0pLHR9eC5DYWxsYmFja3M9ZnVuY3Rpb24oZSl7ZT0ic3RyaW5nIj09dHlwZW9mIGU/RFtlXXx8QShlKTp4LmV4dGVuZCh7fSxlKTt2YXIgdCxuLHIsaSxvLHMsYT1bXSx1PSFlLm9uY2UmJltdLGw9ZnVuY3Rpb24oZil7Zm9yKHQ9ZS5tZW1vcnkmJmYsbj0hMCxzPWl8fDAsaT0wLG89YS5sZW5ndGgscj0hMDthJiZvPnM7cysrKWlmKGFbc10uYXBwbHkoZlswXSxmWzFdKT09PSExJiZlLnN0b3BPbkZhbHNlKXt0PSExO2JyZWFrfXI9ITEsYSYmKHU/dS5sZW5ndGgmJmwodS5zaGlmdCgpKTp0P2E9W106Yy5kaXNhYmxlKCkpfSxjPXthZGQ6ZnVuY3Rpb24oKXtpZihhKXt2YXIgbj1hLmxlbmd0aDsoZnVuY3Rpb24gcyh0KXt4LmVhY2godCxmdW5jdGlvbih0LG4pe3ZhciByPXgudHlwZShuKTsiZnVuY3Rpb24iPT09cj9lLnVuaXF1ZSYmYy5oYXMobil8fGEucHVzaChuKTpuJiZuLmxlbmd0aCYmInN0cmluZyIhPT1yJiZzKG4pfSl9KShhcmd1bWVudHMpLHI/bz1hLmxlbmd0aDp0JiYoaT1uLGwodCkpfXJldHVybiB0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gYSYmeC5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihlLHQpe3ZhciBuO3doaWxlKChuPXguaW5BcnJheSh0LGEsbikpPi0xKWEuc3BsaWNlKG4sMSksciYmKG8+PW4mJm8tLSxzPj1uJiZzLS0pfSksdGhpc30saGFzOmZ1bmN0aW9uKGUpe3JldHVybiBlP3guaW5BcnJheShlLGEpPi0xOiEoIWF8fCFhLmxlbmd0aCl9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIGE9W10sbz0wLHRoaXN9LGRpc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gYT11PXQ9dW5kZWZpbmVkLHRoaXN9LGRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIWF9LGxvY2s6ZnVuY3Rpb24oKXtyZXR1cm4gdT11bmRlZmluZWQsdHx8Yy5kaXNhYmxlKCksdGhpc30sbG9ja2VkOmZ1bmN0aW9uKCl7cmV0dXJuIXV9LGZpcmVXaXRoOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ9dHx8W10sdD1bZSx0LnNsaWNlP3Quc2xpY2UoKTp0XSwhYXx8biYmIXV8fChyP3UucHVzaCh0KTpsKHQpKSx0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGMuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpLHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFufX07cmV0dXJuIGN9LHguZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihlKXt2YXIgdD1bWyJyZXNvbHZlIiwiZG9uZSIseC5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIix4LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwicmVqZWN0ZWQiXSxbIm5vdGlmeSIsInByb2dyZXNzIix4LkNhbGxiYWNrcygibWVtb3J5IildXSxuPSJwZW5kaW5nIixyPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBufSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gaS5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LHRoZW46ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHM7cmV0dXJuIHguRGVmZXJyZWQoZnVuY3Rpb24obil7eC5lYWNoKHQsZnVuY3Rpb24odCxvKXt2YXIgcz1vWzBdLGE9eC5pc0Z1bmN0aW9uKGVbdF0pJiZlW3RdO2lbb1sxXV0oZnVuY3Rpb24oKXt2YXIgZT1hJiZhLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtlJiZ4LmlzRnVuY3Rpb24oZS5wcm9taXNlKT9lLnByb21pc2UoKS5kb25lKG4ucmVzb2x2ZSkuZmFpbChuLnJlamVjdCkucHJvZ3Jlc3Mobi5ub3RpZnkpOm5bcysiV2l0aCJdKHRoaXM9PT1yP24ucHJvbWlzZSgpOnRoaXMsYT9bZV06YXJndW1lbnRzKX0pfSksZT1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lP3guZXh0ZW5kKGUscik6cn19LGk9e307cmV0dXJuIHIucGlwZT1yLnRoZW4seC5lYWNoKHQsZnVuY3Rpb24oZSxvKXt2YXIgcz1vWzJdLGE9b1szXTtyW29bMV1dPXMuYWRkLGEmJnMuYWRkKGZ1bmN0aW9uKCl7bj1hfSx0WzFeZV1bMl0uZGlzYWJsZSx0WzJdWzJdLmxvY2spLGlbb1swXV09ZnVuY3Rpb24oKXtyZXR1cm4gaVtvWzBdKyJXaXRoIl0odGhpcz09PWk/cjp0aGlzLGFyZ3VtZW50cyksdGhpc30saVtvWzBdKyJXaXRoIl09cy5maXJlV2l0aH0pLHIucHJvbWlzZShpKSxlJiZlLmNhbGwoaSxpKSxpfSx3aGVuOmZ1bmN0aW9uKGUpe3ZhciB0PTAsbj1kLmNhbGwoYXJndW1lbnRzKSxyPW4ubGVuZ3RoLGk9MSE9PXJ8fGUmJnguaXNGdW5jdGlvbihlLnByb21pc2UpP3I6MCxvPTE9PT1pP2U6eC5EZWZlcnJlZCgpLHM9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBmdW5jdGlvbihyKXt0W2VdPXRoaXMsbltlXT1hcmd1bWVudHMubGVuZ3RoPjE/ZC5jYWxsKGFyZ3VtZW50cyk6cixuPT09YT9vLm5vdGlmeVdpdGgodCxuKTotLWl8fG8ucmVzb2x2ZVdpdGgodCxuKX19LGEsdSxsO2lmKHI+MSlmb3IoYT1BcnJheShyKSx1PUFycmF5KHIpLGw9QXJyYXkocik7cj50O3QrKyluW3RdJiZ4LmlzRnVuY3Rpb24oblt0XS5wcm9taXNlKT9uW3RdLnByb21pc2UoKS5kb25lKHModCxsLG4pKS5mYWlsKG8ucmVqZWN0KS5wcm9ncmVzcyhzKHQsdSxhKSk6LS1pO3JldHVybiBpfHxvLnJlc29sdmVXaXRoKGwsbiksby5wcm9taXNlKCl9fSkseC5zdXBwb3J0PWZ1bmN0aW9uKHQpe3ZhciBuPW8uY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxyPW8uY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGk9by5jcmVhdGVFbGVtZW50KCJkaXYiKSxzPW8uY3JlYXRlRWxlbWVudCgic2VsZWN0IiksYT1zLmFwcGVuZENoaWxkKG8uY3JlYXRlRWxlbWVudCgib3B0aW9uIikpO3JldHVybiBuLnR5cGU/KG4udHlwZT0iY2hlY2tib3giLHQuY2hlY2tPbj0iIiE9PW4udmFsdWUsdC5vcHRTZWxlY3RlZD1hLnNlbGVjdGVkLHQucmVsaWFibGVNYXJnaW5SaWdodD0hMCx0LmJveFNpemluZ1JlbGlhYmxlPSEwLHQucGl4ZWxQb3NpdGlvbj0hMSxuLmNoZWNrZWQ9ITAsdC5ub0Nsb25lQ2hlY2tlZD1uLmNsb25lTm9kZSghMCkuY2hlY2tlZCxzLmRpc2FibGVkPSEwLHQub3B0RGlzYWJsZWQ9IWEuZGlzYWJsZWQsbj1vLmNyZWF0ZUVsZW1lbnQoImlucHV0Iiksbi52YWx1ZT0idCIsbi50eXBlPSJyYWRpbyIsdC5yYWRpb1ZhbHVlPSJ0Ij09PW4udmFsdWUsbi5zZXRBdHRyaWJ1dGUoImNoZWNrZWQiLCJ0Iiksbi5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJ0Iiksci5hcHBlbmRDaGlsZChuKSx0LmNoZWNrQ2xvbmU9ci5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsdC5mb2N1c2luQnViYmxlcz0ib25mb2N1c2luImluIGUsaS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iY29udGVudC1ib3giLGkuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iIix0LmNsZWFyQ2xvbmVTdHlsZT0iY29udGVudC1ib3giPT09aS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCx4KGZ1bmN0aW9uKCl7dmFyIG4scixzPSJwYWRkaW5nOjA7bWFyZ2luOjA7Ym9yZGVyOjA7ZGlzcGxheTpibG9jazstd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O2JveC1zaXppbmc6Y29udGVudC1ib3giLGE9by5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdO2EmJihuPW8uY3JlYXRlRWxlbWVudCgiZGl2Iiksbi5zdHlsZS5jc3NUZXh0PSJib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6LTk5OTlweDttYXJnaW4tdG9wOjFweCIsYS5hcHBlbmRDaGlsZChuKS5hcHBlbmRDaGlsZChpKSxpLmlubmVySFRNTD0iIixpLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtwYWRkaW5nOjFweDtib3JkZXI6MXB4O2Rpc3BsYXk6YmxvY2s7d2lkdGg6NHB4O21hcmdpbi10b3A6MSU7cG9zaXRpb246YWJzb2x1dGU7dG9wOjElIix4LnN3YXAoYSxudWxsIT1hLnN0eWxlLnpvb20/e3pvb206MX06e30sZnVuY3Rpb24oKXt0LmJveFNpemluZz00PT09aS5vZmZzZXRXaWR0aH0pLGUuZ2V0Q29tcHV0ZWRTdHlsZSYmKHQucGl4ZWxQb3NpdGlvbj0iMSUiIT09KGUuZ2V0Q29tcHV0ZWRTdHlsZShpLG51bGwpfHx7fSkudG9wLHQuYm94U2l6aW5nUmVsaWFibGU9IjRweCI9PT0oZS5nZXRDb21wdXRlZFN0eWxlKGksbnVsbCl8fHt3aWR0aDoiNHB4In0pLndpZHRoLHI9aS5hcHBlbmRDaGlsZChvLmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxyLnN0eWxlLmNzc1RleHQ9aS5zdHlsZS5jc3NUZXh0PXMsci5zdHlsZS5tYXJnaW5SaWdodD1yLnN0eWxlLndpZHRoPSIwIixpLnN0eWxlLndpZHRoPSIxcHgiLHQucmVsaWFibGVNYXJnaW5SaWdodD0hcGFyc2VGbG9hdCgoZS5nZXRDb21wdXRlZFN0eWxlKHIsbnVsbCl8fHt9KS5tYXJnaW5SaWdodCkpLGEucmVtb3ZlQ2hpbGQobikpfSksdCk6dH0oe30pO3ZhciBMLHEsSD0vKD86XHtbXHNcU10qXH18XFtbXHNcU10qXF0pJC8sTz0vKFtBLVpdKS9nO2Z1bmN0aW9uIEYoKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5jYWNoZT17fSwwLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57fX19KSx0aGlzLmV4cGFuZG89eC5leHBhbmRvK01hdGgucmFuZG9tKCl9Ri51aWQ9MSxGLmFjY2VwdHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUubm9kZVR5cGU/MT09PWUubm9kZVR5cGV8fDk9PT1lLm5vZGVUeXBlOiEwfSxGLnByb3RvdHlwZT17a2V5OmZ1bmN0aW9uKGUpe2lmKCFGLmFjY2VwdHMoZSkpcmV0dXJuIDA7dmFyIHQ9e30sbj1lW3RoaXMuZXhwYW5kb107aWYoIW4pe249Ri51aWQrKzt0cnl7dFt0aGlzLmV4cGFuZG9dPXt2YWx1ZTpufSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLHQpfWNhdGNoKHIpe3RbdGhpcy5leHBhbmRvXT1uLHguZXh0ZW5kKGUsdCl9fXJldHVybiB0aGlzLmNhY2hlW25dfHwodGhpcy5jYWNoZVtuXT17fSksbn0sc2V0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpPXRoaXMua2V5KGUpLG89dGhpcy5jYWNoZVtpXTtpZigic3RyaW5nIj09dHlwZW9mIHQpb1t0XT1uO2Vsc2UgaWYoeC5pc0VtcHR5T2JqZWN0KG8pKXRoaXMuY2FjaGVbaV09dDtlbHNlIGZvcihyIGluIHQpb1tyXT10W3JdfSxnZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmNhY2hlW3RoaXMua2V5KGUpXTtyZXR1cm4gdD09PXVuZGVmaW5lZD9uOm5bdF19LGFjY2VzczpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHQ9PT11bmRlZmluZWR8fHQmJiJzdHJpbmciPT10eXBlb2YgdCYmbj09PXVuZGVmaW5lZD90aGlzLmdldChlLHQpOih0aGlzLnNldChlLHQsbiksbiE9PXVuZGVmaW5lZD9uOnQpfSxyZW1vdmU6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGk9dGhpcy5rZXkoZSksbz10aGlzLmNhY2hlW2ldO2lmKHQ9PT11bmRlZmluZWQpdGhpcy5jYWNoZVtpXT17fTtlbHNle3guaXNBcnJheSh0KT9yPXQuY29uY2F0KHQubWFwKHguY2FtZWxDYXNlKSk6dCBpbiBvP3I9W3RdOihyPXguY2FtZWxDYXNlKHQpLHI9ciBpbiBvP1tyXTpyLm1hdGNoKHcpfHxbXSksbj1yLmxlbmd0aDt3aGlsZShuLS0pZGVsZXRlIG9bcltuXV19fSxoYXNEYXRhOmZ1bmN0aW9uKGUpe3JldHVybiF4LmlzRW1wdHlPYmplY3QodGhpcy5jYWNoZVtlW3RoaXMuZXhwYW5kb11dfHx7fSl9LGRpc2NhcmQ6ZnVuY3Rpb24oZSl7ZGVsZXRlIHRoaXMuY2FjaGVbdGhpcy5rZXkoZSldfX0sTD1uZXcgRixxPW5ldyBGLHguZXh0ZW5kKHthY2NlcHREYXRhOkYuYWNjZXB0cyxoYXNEYXRhOmZ1bmN0aW9uKGUpe3JldHVybiBMLmhhc0RhdGEoZSl8fHEuaGFzRGF0YShlKX0sZGF0YTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIEwuYWNjZXNzKGUsdCxuKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlLHQpe0wucmVtb3ZlKGUsdCl9LF9kYXRhOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gcS5hY2Nlc3MoZSx0LG4pfSxfcmVtb3ZlRGF0YTpmdW5jdGlvbihlLHQpe3EucmVtb3ZlKGUsdCl9fSkseC5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGk9dGhpc1swXSxvPTAscz1udWxsO2lmKGU9PT11bmRlZmluZWQpe2lmKHRoaXMubGVuZ3RoJiYocz1MLmdldChpKSwxPT09aS5ub2RlVHlwZSYmIXEuZ2V0KGksImhhc0RhdGFBdHRycyIpKSl7Zm9yKG49aS5hdHRyaWJ1dGVzO24ubGVuZ3RoPm87bysrKXI9bltvXS5uYW1lLDA9PT1yLmluZGV4T2YoImRhdGEtIikmJihyPXguY2FtZWxDYXNlKHIuc3Vic3RyaW5nKDUpKSxQKGkscixzW3JdKSk7cS5zZXQoaSwiaGFzRGF0YUF0dHJzIiwhMCl9cmV0dXJuIHN9cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlP3RoaXMuZWFjaChmdW5jdGlvbigpe0wuc2V0KHRoaXMsZSl9KTp4LmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKHQpe3ZhciBuLHI9eC5jYW1lbENhc2UoZSk7aWYoaSYmdD09PXVuZGVmaW5lZCl7aWYobj1MLmdldChpLGUpLG4hPT11bmRlZmluZWQpcmV0dXJuIG47aWYobj1MLmdldChpLHIpLG4hPT11bmRlZmluZWQpcmV0dXJuIG47aWYobj1QKGkscix1bmRlZmluZWQpLG4hPT11bmRlZmluZWQpcmV0dXJuIG59ZWxzZSB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbj1MLmdldCh0aGlzLHIpO0wuc2V0KHRoaXMscix0KSwtMSE9PWUuaW5kZXhPZigiLSIpJiZuIT09dW5kZWZpbmVkJiZMLnNldCh0aGlzLGUsdCl9KX0sbnVsbCx0LGFyZ3VtZW50cy5sZW5ndGg+MSxudWxsLCEwKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7TC5yZW1vdmUodGhpcyxlKX0pfX0pO2Z1bmN0aW9uIFAoZSx0LG4pe3ZhciByO2lmKG49PT11bmRlZmluZWQmJjE9PT1lLm5vZGVUeXBlKWlmKHI9ImRhdGEtIit0LnJlcGxhY2UoTywiLSQxIikudG9Mb3dlckNhc2UoKSxuPWUuZ2V0QXR0cmlidXRlKHIpLCJzdHJpbmciPT10eXBlb2Ygbil7dHJ5e249InRydWUiPT09bj8hMDoiZmFsc2UiPT09bj8hMToibnVsbCI9PT1uP251bGw6K24rIiI9PT1uPytuOkgudGVzdChuKT9KU09OLnBhcnNlKG4pOm59Y2F0Y2goaSl7fUwuc2V0KGUsdCxuKX1lbHNlIG49dW5kZWZpbmVkO3JldHVybiBufXguZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihlLHQsbil7dmFyIHI7cmV0dXJuIGU/KHQ9KHR8fCJmeCIpKyJxdWV1ZSIscj1xLmdldChlLHQpLG4mJighcnx8eC5pc0FycmF5KG4pP3I9cS5hY2Nlc3MoZSx0LHgubWFrZUFycmF5KG4pKTpyLnB1c2gobikpLHJ8fFtdKTp1bmRlZmluZWR9LGRlcXVldWU6ZnVuY3Rpb24oZSx0KXt0PXR8fCJmeCI7dmFyIG49eC5xdWV1ZShlLHQpLHI9bi5sZW5ndGgsaT1uLnNoaWZ0KCksbz14Ll9xdWV1ZUhvb2tzKGUsdCkscz1mdW5jdGlvbigpe3guZGVxdWV1ZShlLHQpfTsiaW5wcm9ncmVzcyI9PT1pJiYoaT1uLnNoaWZ0KCksci0tKSxvLmN1cj1pLGkmJigiZngiPT09dCYmbi51bnNoaWZ0KCJpbnByb2dyZXNzIiksZGVsZXRlIG8uc3RvcCxpLmNhbGwoZSxzLG8pKSwhciYmbyYmby5lbXB0eS5maXJlKCl9LF9xdWV1ZUhvb2tzOmZ1bmN0aW9uKGUsdCl7dmFyIG49dCsicXVldWVIb29rcyI7cmV0dXJuIHEuZ2V0KGUsbil8fHEuYWNjZXNzKGUsbix7ZW1wdHk6eC5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IikuYWRkKGZ1bmN0aW9uKCl7cS5yZW1vdmUoZSxbdCsicXVldWUiLG5dKX0pfSl9fSkseC5mbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49MjtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGUmJih0PWUsZT0iZngiLG4tLSksbj5hcmd1bWVudHMubGVuZ3RoP3gucXVldWUodGhpc1swXSxlKTp0PT09dW5kZWZpbmVkP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49eC5xdWV1ZSh0aGlzLGUsdCk7DQp4Ll9xdWV1ZUhvb2tzKHRoaXMsZSksImZ4Ij09PWUmJiJpbnByb2dyZXNzIiE9PW5bMF0mJnguZGVxdWV1ZSh0aGlzLGUpfSl9LGRlcXVldWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3guZGVxdWV1ZSh0aGlzLGUpfSl9LGRlbGF5OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9eC5meD94LmZ4LnNwZWVkc1tlXXx8ZTplLHQ9dHx8ImZ4Iix0aGlzLnF1ZXVlKHQsZnVuY3Rpb24odCxuKXt2YXIgcj1zZXRUaW1lb3V0KHQsZSk7bi5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHIpfX0pfSxjbGVhclF1ZXVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnF1ZXVlKGV8fCJmeCIsW10pfSxwcm9taXNlOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj0xLGk9eC5EZWZlcnJlZCgpLG89dGhpcyxzPXRoaXMubGVuZ3RoLGE9ZnVuY3Rpb24oKXstLXJ8fGkucmVzb2x2ZVdpdGgobyxbb10pfTsic3RyaW5nIiE9dHlwZW9mIGUmJih0PWUsZT11bmRlZmluZWQpLGU9ZXx8ImZ4Ijt3aGlsZShzLS0pbj1xLmdldChvW3NdLGUrInF1ZXVlSG9va3MiKSxuJiZuLmVtcHR5JiYocisrLG4uZW1wdHkuYWRkKGEpKTtyZXR1cm4gYSgpLGkucHJvbWlzZSh0KX19KTt2YXIgUixNLFc9L1tcdFxyXG5dL2csJD0vXHIvZyxCPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2k7eC5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4geC5hY2Nlc3ModGhpcyx4LmF0dHIsZSx0LGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3gucmVtb3ZlQXR0cih0aGlzLGUpfSl9LHByb3A6ZnVuY3Rpb24oZSx0KXtyZXR1cm4geC5hY2Nlc3ModGhpcyx4LnByb3AsZSx0LGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2RlbGV0ZSB0aGlzW3gucHJvcEZpeFtlXXx8ZV19KX0sYWRkQ2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGksbyxzPTAsYT10aGlzLmxlbmd0aCx1PSJzdHJpbmciPT10eXBlb2YgZSYmZTtpZih4LmlzRnVuY3Rpb24oZSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbih0KXt4KHRoaXMpLmFkZENsYXNzKGUuY2FsbCh0aGlzLHQsdGhpcy5jbGFzc05hbWUpKX0pO2lmKHUpZm9yKHQ9KGV8fCIiKS5tYXRjaCh3KXx8W107YT5zO3MrKylpZihuPXRoaXNbc10scj0xPT09bi5ub2RlVHlwZSYmKG4uY2xhc3NOYW1lPygiICIrbi5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKFcsIiAiKToiICIpKXtvPTA7d2hpbGUoaT10W28rK10pMD5yLmluZGV4T2YoIiAiK2krIiAiKSYmKHIrPWkrIiAiKTtuLmNsYXNzTmFtZT14LnRyaW0ocil9cmV0dXJuIHRoaXN9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpLG8scz0wLGE9dGhpcy5sZW5ndGgsdT0wPT09YXJndW1lbnRzLmxlbmd0aHx8InN0cmluZyI9PXR5cGVvZiBlJiZlO2lmKHguaXNGdW5jdGlvbihlKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3godGhpcykucmVtb3ZlQ2xhc3MoZS5jYWxsKHRoaXMsdCx0aGlzLmNsYXNzTmFtZSkpfSk7aWYodSlmb3IodD0oZXx8IiIpLm1hdGNoKHcpfHxbXTthPnM7cysrKWlmKG49dGhpc1tzXSxyPTE9PT1uLm5vZGVUeXBlJiYobi5jbGFzc05hbWU/KCIgIituLmNsYXNzTmFtZSsiICIpLnJlcGxhY2UoVywiICIpOiIiKSl7bz0wO3doaWxlKGk9dFtvKytdKXdoaWxlKHIuaW5kZXhPZigiICIraSsiICIpPj0wKXI9ci5yZXBsYWNlKCIgIitpKyIgIiwiICIpO24uY2xhc3NOYW1lPWU/eC50cmltKHIpOiIifXJldHVybiB0aGlzfSx0b2dnbGVDbGFzczpmdW5jdGlvbihlLHQpe3ZhciBuPXR5cGVvZiBlLGk9ImJvb2xlYW4iPT10eXBlb2YgdDtyZXR1cm4geC5pc0Z1bmN0aW9uKGUpP3RoaXMuZWFjaChmdW5jdGlvbihuKXt4KHRoaXMpLnRvZ2dsZUNsYXNzKGUuY2FsbCh0aGlzLG4sdGhpcy5jbGFzc05hbWUsdCksdCl9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXtpZigic3RyaW5nIj09PW4pe3ZhciBvLHM9MCxhPXgodGhpcyksdT10LGw9ZS5tYXRjaCh3KXx8W107d2hpbGUobz1sW3MrK10pdT1pP3U6IWEuaGFzQ2xhc3MobyksYVt1PyJhZGRDbGFzcyI6InJlbW92ZUNsYXNzIl0obyl9ZWxzZShuPT09cnx8ImJvb2xlYW4iPT09bikmJih0aGlzLmNsYXNzTmFtZSYmcS5zZXQodGhpcywiX19jbGFzc05hbWVfXyIsdGhpcy5jbGFzc05hbWUpLHRoaXMuY2xhc3NOYW1lPXRoaXMuY2xhc3NOYW1lfHxlPT09ITE/IiI6cS5nZXQodGhpcywiX19jbGFzc05hbWVfXyIpfHwiIil9KX0saGFzQ2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQ9IiAiK2UrIiAiLG49MCxyPXRoaXMubGVuZ3RoO2Zvcig7cj5uO24rKylpZigxPT09dGhpc1tuXS5ub2RlVHlwZSYmKCIgIit0aGlzW25dLmNsYXNzTmFtZSsiICIpLnJlcGxhY2UoVywiICIpLmluZGV4T2YodCk+PTApcmV0dXJuITA7cmV0dXJuITF9LHZhbDpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaT10aGlzWzBdO3tpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiByPXguaXNGdW5jdGlvbihlKSx0aGlzLmVhY2goZnVuY3Rpb24obil7dmFyIGksbz14KHRoaXMpOzE9PT10aGlzLm5vZGVUeXBlJiYoaT1yP2UuY2FsbCh0aGlzLG4sby52YWwoKSk6ZSxudWxsPT1pP2k9IiI6Im51bWJlciI9PXR5cGVvZiBpP2krPSIiOnguaXNBcnJheShpKSYmKGk9eC5tYXAoaSxmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT8iIjplKyIifSkpLHQ9eC52YWxIb29rc1t0aGlzLnR5cGVdfHx4LnZhbEhvb2tzW3RoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0sdCYmInNldCJpbiB0JiZ0LnNldCh0aGlzLGksInZhbHVlIikhPT11bmRlZmluZWR8fCh0aGlzLnZhbHVlPWkpKX0pO2lmKGkpcmV0dXJuIHQ9eC52YWxIb29rc1tpLnR5cGVdfHx4LnZhbEhvb2tzW2kubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0sdCYmImdldCJpbiB0JiYobj10LmdldChpLCJ2YWx1ZSIpKSE9PXVuZGVmaW5lZD9uOihuPWkudmFsdWUsInN0cmluZyI9PXR5cGVvZiBuP24ucmVwbGFjZSgkLCIiKTpudWxsPT1uPyIiOm4pfX19KSx4LmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWUuYXR0cmlidXRlcy52YWx1ZTtyZXR1cm4hdHx8dC5zcGVjaWZpZWQ/ZS52YWx1ZTplLnRleHR9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihlKXt2YXIgdCxuLHI9ZS5vcHRpb25zLGk9ZS5zZWxlY3RlZEluZGV4LG89InNlbGVjdC1vbmUiPT09ZS50eXBlfHwwPmkscz1vP251bGw6W10sYT1vP2krMTpyLmxlbmd0aCx1PTA+aT9hOm8/aTowO2Zvcig7YT51O3UrKylpZihuPXJbdV0sISghbi5zZWxlY3RlZCYmdSE9PWl8fCh4LnN1cHBvcnQub3B0RGlzYWJsZWQ/bi5kaXNhYmxlZDpudWxsIT09bi5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIikpfHxuLnBhcmVudE5vZGUuZGlzYWJsZWQmJngubm9kZU5hbWUobi5wYXJlbnROb2RlLCJvcHRncm91cCIpKSl7aWYodD14KG4pLnZhbCgpLG8pcmV0dXJuIHQ7cy5wdXNoKHQpfXJldHVybiBzfSxzZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGk9ZS5vcHRpb25zLG89eC5tYWtlQXJyYXkodCkscz1pLmxlbmd0aDt3aGlsZShzLS0pcj1pW3NdLChyLnNlbGVjdGVkPXguaW5BcnJheSh4KHIpLnZhbCgpLG8pPj0wKSYmKG49ITApO3JldHVybiBufHwoZS5zZWxlY3RlZEluZGV4PS0xKSxvfX19LGF0dHI6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLG8scz1lLm5vZGVUeXBlO2lmKGUmJjMhPT1zJiY4IT09cyYmMiE9PXMpcmV0dXJuIHR5cGVvZiBlLmdldEF0dHJpYnV0ZT09PXI/eC5wcm9wKGUsdCxuKTooMT09PXMmJnguaXNYTUxEb2MoZSl8fCh0PXQudG9Mb3dlckNhc2UoKSxpPXguYXR0ckhvb2tzW3RdfHwoeC5leHByLm1hdGNoLmJvb2xlYW4udGVzdCh0KT9NOlIpKSxuPT09dW5kZWZpbmVkP2kmJiJnZXQiaW4gaSYmbnVsbCE9PShvPWkuZ2V0KGUsdCkpP286KG89eC5maW5kLmF0dHIoZSx0KSxudWxsPT1vP3VuZGVmaW5lZDpvKTpudWxsIT09bj9pJiYic2V0ImluIGkmJihvPWkuc2V0KGUsbix0KSkhPT11bmRlZmluZWQ/bzooZS5zZXRBdHRyaWJ1dGUodCxuKyIiKSxuKTooeC5yZW1vdmVBdHRyKGUsdCksdW5kZWZpbmVkKSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGk9MCxvPXQmJnQubWF0Y2godyk7aWYobyYmMT09PWUubm9kZVR5cGUpd2hpbGUobj1vW2krK10pcj14LnByb3BGaXhbbl18fG4seC5leHByLm1hdGNoLmJvb2xlYW4udGVzdChuKSYmKGVbcl09ITEpLGUucmVtb3ZlQXR0cmlidXRlKG4pfSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihlLHQpe2lmKCF4LnN1cHBvcnQucmFkaW9WYWx1ZSYmInJhZGlvIj09PXQmJngubm9kZU5hbWUoZSwiaW5wdXQiKSl7dmFyIG49ZS52YWx1ZTtyZXR1cm4gZS5zZXRBdHRyaWJ1dGUoInR5cGUiLHQpLG4mJihlLnZhbHVlPW4pLHR9fX19LHByb3BGaXg6eyJmb3IiOiJodG1sRm9yIiwiY2xhc3MiOiJjbGFzc05hbWUifSxwcm9wOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8scz1lLm5vZGVUeXBlO2lmKGUmJjMhPT1zJiY4IT09cyYmMiE9PXMpcmV0dXJuIG89MSE9PXN8fCF4LmlzWE1MRG9jKGUpLG8mJih0PXgucHJvcEZpeFt0XXx8dCxpPXgucHJvcEhvb2tzW3RdKSxuIT09dW5kZWZpbmVkP2kmJiJzZXQiaW4gaSYmKHI9aS5zZXQoZSxuLHQpKSE9PXVuZGVmaW5lZD9yOmVbdF09bjppJiYiZ2V0ImluIGkmJm51bGwhPT0ocj1pLmdldChlLHQpKT9yOmVbdF19LHByb3BIb29rczp7dGFiSW5kZXg6e2dldDpmdW5jdGlvbihlKXtyZXR1cm4gZS5oYXNBdHRyaWJ1dGUoInRhYmluZGV4Iil8fEIudGVzdChlLm5vZGVOYW1lKXx8ZS5ocmVmP2UudGFiSW5kZXg6LTF9fX19KSxNPXtzZXQ6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0PT09ITE/eC5yZW1vdmVBdHRyKGUsbik6ZS5zZXRBdHRyaWJ1dGUobixuKSxufX0seC5lYWNoKHguZXhwci5tYXRjaC5ib29sZWFuLnNvdXJjZS5tYXRjaCgvXHcrL2cpLGZ1bmN0aW9uKGUsdCl7dmFyIG49eC5leHByLmF0dHJIYW5kbGVbdF18fHguZmluZC5hdHRyO3guZXhwci5hdHRySGFuZGxlW3RdPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT14LmV4cHIuYXR0ckhhbmRsZVt0XSxvPXI/dW5kZWZpbmVkOih4LmV4cHIuYXR0ckhhbmRsZVt0XT11bmRlZmluZWQpIT1uKGUsdCxyKT90LnRvTG93ZXJDYXNlKCk6bnVsbDtyZXR1cm4geC5leHByLmF0dHJIYW5kbGVbdF09aSxvfX0pLHguc3VwcG9ydC5vcHRTZWxlY3RlZHx8KHgucHJvcEhvb2tzLnNlbGVjdGVkPXtnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXJlbnROb2RlO3JldHVybiB0JiZ0LnBhcmVudE5vZGUmJnQucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LG51bGx9fSkseC5lYWNoKFsidGFiSW5kZXgiLCJyZWFkT25seSIsIm1heExlbmd0aCIsImNlbGxTcGFjaW5nIiwiY2VsbFBhZGRpbmciLCJyb3dTcGFuIiwiY29sU3BhbiIsInVzZU1hcCIsImZyYW1lQm9yZGVyIiwiY29udGVudEVkaXRhYmxlIl0sZnVuY3Rpb24oKXt4LnByb3BGaXhbdGhpcy50b0xvd2VyQ2FzZSgpXT10aGlzfSkseC5lYWNoKFsicmFkaW8iLCJjaGVja2JveCJdLGZ1bmN0aW9uKCl7eC52YWxIb29rc1t0aGlzXT17c2V0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHguaXNBcnJheSh0KT9lLmNoZWNrZWQ9eC5pbkFycmF5KHgoZSkudmFsKCksdCk+PTA6dW5kZWZpbmVkfX0seC5zdXBwb3J0LmNoZWNrT258fCh4LnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09PWUuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpPyJvbiI6ZS52YWx1ZX0pfSk7dmFyIEk9L15rZXkvLHo9L14oPzptb3VzZXxjb250ZXh0bWVudSl8Y2xpY2svLF89L14oPzpmb2N1c2luZm9jdXN8Zm9jdXNvdXRibHVyKSQvLFg9L14oW14uXSopKD86XC4oLispfCkkLztmdW5jdGlvbiBVKCl7cmV0dXJuITB9ZnVuY3Rpb24gWSgpe3JldHVybiExfWZ1bmN0aW9uIFYoKXt0cnl7cmV0dXJuIG8uYWN0aXZlRWxlbWVudH1jYXRjaChlKXt9fXguZXZlbnQ9e2dsb2JhbDp7fSxhZGQ6ZnVuY3Rpb24oZSx0LG4saSxvKXt2YXIgcyxhLHUsbCxjLGYscCxoLGQsZyxtLHk9cS5nZXQoZSk7aWYoeSl7bi5oYW5kbGVyJiYocz1uLG49cy5oYW5kbGVyLG89cy5zZWxlY3Rvciksbi5ndWlkfHwobi5ndWlkPXguZ3VpZCsrKSwobD15LmV2ZW50cyl8fChsPXkuZXZlbnRzPXt9KSwoYT15LmhhbmRsZSl8fChhPXkuaGFuZGxlPWZ1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgeD09PXJ8fGUmJnguZXZlbnQudHJpZ2dlcmVkPT09ZS50eXBlP3VuZGVmaW5lZDp4LmV2ZW50LmRpc3BhdGNoLmFwcGx5KGEuZWxlbSxhcmd1bWVudHMpfSxhLmVsZW09ZSksdD0odHx8IiIpLm1hdGNoKHcpfHxbIiJdLGM9dC5sZW5ndGg7d2hpbGUoYy0tKXU9WC5leGVjKHRbY10pfHxbXSxkPW09dVsxXSxnPSh1WzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksZCYmKHA9eC5ldmVudC5zcGVjaWFsW2RdfHx7fSxkPShvP3AuZGVsZWdhdGVUeXBlOnAuYmluZFR5cGUpfHxkLHA9eC5ldmVudC5zcGVjaWFsW2RdfHx7fSxmPXguZXh0ZW5kKHt0eXBlOmQsb3JpZ1R5cGU6bSxkYXRhOmksaGFuZGxlcjpuLGd1aWQ6bi5ndWlkLHNlbGVjdG9yOm8sbmVlZHNDb250ZXh0Om8mJnguZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChvKSxuYW1lc3BhY2U6Zy5qb2luKCIuIil9LHMpLChoPWxbZF0pfHwoaD1sW2RdPVtdLGguZGVsZWdhdGVDb3VudD0wLHAuc2V0dXAmJnAuc2V0dXAuY2FsbChlLGksZyxhKSE9PSExfHxlLmFkZEV2ZW50TGlzdGVuZXImJmUuYWRkRXZlbnRMaXN0ZW5lcihkLGEsITEpKSxwLmFkZCYmKHAuYWRkLmNhbGwoZSxmKSxmLmhhbmRsZXIuZ3VpZHx8KGYuaGFuZGxlci5ndWlkPW4uZ3VpZCkpLG8/aC5zcGxpY2UoaC5kZWxlZ2F0ZUNvdW50KyssMCxmKTpoLnB1c2goZikseC5ldmVudC5nbG9iYWxbZF09ITApO2U9bnVsbH19LHJlbW92ZTpmdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvLHMsYSx1LGwsYyxmLHAsaCxkLGcsbT1xLmhhc0RhdGEoZSkmJnEuZ2V0KGUpO2lmKG0mJih1PW0uZXZlbnRzKSl7dD0odHx8IiIpLm1hdGNoKHcpfHxbIiJdLGw9dC5sZW5ndGg7d2hpbGUobC0tKWlmKGE9WC5leGVjKHRbbF0pfHxbXSxoPWc9YVsxXSxkPShhWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksaCl7Zj14LmV2ZW50LnNwZWNpYWxbaF18fHt9LGg9KHI/Zi5kZWxlZ2F0ZVR5cGU6Zi5iaW5kVHlwZSl8fGgscD11W2hdfHxbXSxhPWFbMl0mJlJlZ0V4cCgiKF58XFwuKSIrZC5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKSxzPW89cC5sZW5ndGg7d2hpbGUoby0tKWM9cFtvXSwhaSYmZyE9PWMub3JpZ1R5cGV8fG4mJm4uZ3VpZCE9PWMuZ3VpZHx8YSYmIWEudGVzdChjLm5hbWVzcGFjZSl8fHImJnIhPT1jLnNlbGVjdG9yJiYoIioqIiE9PXJ8fCFjLnNlbGVjdG9yKXx8KHAuc3BsaWNlKG8sMSksYy5zZWxlY3RvciYmcC5kZWxlZ2F0ZUNvdW50LS0sZi5yZW1vdmUmJmYucmVtb3ZlLmNhbGwoZSxjKSk7cyYmIXAubGVuZ3RoJiYoZi50ZWFyZG93biYmZi50ZWFyZG93bi5jYWxsKGUsZCxtLmhhbmRsZSkhPT0hMXx8eC5yZW1vdmVFdmVudChlLGgsbS5oYW5kbGUpLGRlbGV0ZSB1W2hdKX1lbHNlIGZvcihoIGluIHUpeC5ldmVudC5yZW1vdmUoZSxoK3RbbF0sbixyLCEwKTt4LmlzRW1wdHlPYmplY3QodSkmJihkZWxldGUgbS5oYW5kbGUscS5yZW1vdmUoZSwiZXZlbnRzIikpfX0sdHJpZ2dlcjpmdW5jdGlvbih0LG4scixpKXt2YXIgcyxhLHUsbCxjLGYscCxoPVtyfHxvXSxkPXkuY2FsbCh0LCJ0eXBlIik/dC50eXBlOnQsZz15LmNhbGwodCwibmFtZXNwYWNlIik/dC5uYW1lc3BhY2Uuc3BsaXQoIi4iKTpbXTtpZihhPXU9cj1yfHxvLDMhPT1yLm5vZGVUeXBlJiY4IT09ci5ub2RlVHlwZSYmIV8udGVzdChkK3guZXZlbnQudHJpZ2dlcmVkKSYmKGQuaW5kZXhPZigiLiIpPj0wJiYoZz1kLnNwbGl0KCIuIiksZD1nLnNoaWZ0KCksZy5zb3J0KCkpLGM9MD5kLmluZGV4T2YoIjoiKSYmIm9uIitkLHQ9dFt4LmV4cGFuZG9dP3Q6bmV3IHguRXZlbnQoZCwib2JqZWN0Ij09dHlwZW9mIHQmJnQpLHQuaXNUcmlnZ2VyPWk/MjozLHQubmFtZXNwYWNlPWcuam9pbigiLiIpLHQubmFtZXNwYWNlX3JlPXQubmFtZXNwYWNlP1JlZ0V4cCgiKF58XFwuKSIrZy5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKTpudWxsLHQucmVzdWx0PXVuZGVmaW5lZCx0LnRhcmdldHx8KHQudGFyZ2V0PXIpLG49bnVsbD09bj9bdF06eC5tYWtlQXJyYXkobixbdF0pLHA9eC5ldmVudC5zcGVjaWFsW2RdfHx7fSxpfHwhcC50cmlnZ2VyfHxwLnRyaWdnZXIuYXBwbHkocixuKSE9PSExKSl7aWYoIWkmJiFwLm5vQnViYmxlJiYheC5pc1dpbmRvdyhyKSl7Zm9yKGw9cC5kZWxlZ2F0ZVR5cGV8fGQsXy50ZXN0KGwrZCl8fChhPWEucGFyZW50Tm9kZSk7YTthPWEucGFyZW50Tm9kZSloLnB1c2goYSksdT1hO3U9PT0oci5vd25lckRvY3VtZW50fHxvKSYmaC5wdXNoKHUuZGVmYXVsdFZpZXd8fHUucGFyZW50V2luZG93fHxlKX1zPTA7d2hpbGUoKGE9aFtzKytdKSYmIXQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl0LnR5cGU9cz4xP2w6cC5iaW5kVHlwZXx8ZCxmPShxLmdldChhLCJldmVudHMiKXx8e30pW3QudHlwZV0mJnEuZ2V0KGEsImhhbmRsZSIpLGYmJmYuYXBwbHkoYSxuKSxmPWMmJmFbY10sZiYmeC5hY2NlcHREYXRhKGEpJiZmLmFwcGx5JiZmLmFwcGx5KGEsbik9PT0hMSYmdC5wcmV2ZW50RGVmYXVsdCgpO3JldHVybiB0LnR5cGU9ZCxpfHx0LmlzRGVmYXVsdFByZXZlbnRlZCgpfHxwLl9kZWZhdWx0JiZwLl9kZWZhdWx0LmFwcGx5KGgucG9wKCksbikhPT0hMXx8IXguYWNjZXB0RGF0YShyKXx8YyYmeC5pc0Z1bmN0aW9uKHJbZF0pJiYheC5pc1dpbmRvdyhyKSYmKHU9cltjXSx1JiYocltjXT1udWxsKSx4LmV2ZW50LnRyaWdnZXJlZD1kLHJbZF0oKSx4LmV2ZW50LnRyaWdnZXJlZD11bmRlZmluZWQsdSYmKHJbY109dSkpLHQucmVzdWx0fX0sZGlzcGF0Y2g6ZnVuY3Rpb24oZSl7ZT14LmV2ZW50LmZpeChlKTt2YXIgdCxuLHIsaSxvLHM9W10sYT1kLmNhbGwoYXJndW1lbnRzKSx1PShxLmdldCh0aGlzLCJldmVudHMiKXx8e30pW2UudHlwZV18fFtdLGw9eC5ldmVudC5zcGVjaWFsW2UudHlwZV18fHt9O2lmKGFbMF09ZSxlLmRlbGVnYXRlVGFyZ2V0PXRoaXMsIWwucHJlRGlzcGF0Y2h8fGwucHJlRGlzcGF0Y2guY2FsbCh0aGlzLGUpIT09ITEpe3M9eC5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsZSx1KSx0PTA7d2hpbGUoKGk9c1t0KytdKSYmIWUuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7ZS5jdXJyZW50VGFyZ2V0PWkuZWxlbSxuPTA7d2hpbGUoKG89aS5oYW5kbGVyc1tuKytdKSYmIWUuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSkoIWUubmFtZXNwYWNlX3JlfHxlLm5hbWVzcGFjZV9yZS50ZXN0KG8ubmFtZXNwYWNlKSkmJihlLmhhbmRsZU9iaj1vLGUuZGF0YT1vLmRhdGEscj0oKHguZXZlbnQuc3BlY2lhbFtvLm9yaWdUeXBlXXx8e30pLmhhbmRsZXx8by5oYW5kbGVyKS5hcHBseShpLmVsZW0sYSksciE9PXVuZGVmaW5lZCYmKGUucmVzdWx0PXIpPT09ITEmJihlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKSkpfXJldHVybiBsLnBvc3REaXNwYXRjaCYmbC5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLGUpLGUucmVzdWx0fX0saGFuZGxlcnM6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGksbyxzPVtdLGE9dC5kZWxlZ2F0ZUNvdW50LHU9ZS50YXJnZXQ7aWYoYSYmdS5ub2RlVHlwZSYmKCFlLmJ1dHRvbnx8ImNsaWNrIiE9PWUudHlwZSkpZm9yKDt1IT09dGhpczt1PXUucGFyZW50Tm9kZXx8dGhpcylpZih1LmRpc2FibGVkIT09ITB8fCJjbGljayIhPT1lLnR5cGUpe2ZvcihyPVtdLG49MDthPm47bisrKW89dFtuXSxpPW8uc2VsZWN0b3IrIiAiLHJbaV09PT11bmRlZmluZWQmJihyW2ldPW8ubmVlZHNDb250ZXh0P3goaSx0aGlzKS5pbmRleCh1KT49MDp4LmZpbmQoaSx0aGlzLG51bGwsW3VdKS5sZW5ndGgpLHJbaV0mJnIucHVzaChvKTtyLmxlbmd0aCYmcy5wdXNoKHtlbGVtOnUsaGFuZGxlcnM6cn0pfXJldHVybiB0Lmxlbmd0aD5hJiZzLnB1c2goe2VsZW06dGhpcyxoYW5kbGVyczp0LnNsaWNlKGEpfSksc30scHJvcHM6ImFsdEtleSBidWJibGVzIGNhbmNlbGFibGUgY3RybEtleSBjdXJyZW50VGFyZ2V0IGV2ZW50UGhhc2UgbWV0YUtleSByZWxhdGVkVGFyZ2V0IHNoaWZ0S2V5IHRhcmdldCB0aW1lU3RhbXAgdmlldyB3aGljaCIuc3BsaXQoIiAiKSxmaXhIb29rczp7fSxrZXlIb29rczp7cHJvcHM6ImNoYXIgY2hhckNvZGUga2V5IGtleUNvZGUiLnNwbGl0KCIgIiksZmlsdGVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG51bGw9PWUud2hpY2gmJihlLndoaWNoPW51bGwhPXQuY2hhckNvZGU/dC5jaGFyQ29kZTp0LmtleUNvZGUpLGV9fSxtb3VzZUhvb2tzOntwcm9wczoiYnV0dG9uIGJ1dHRvbnMgY2xpZW50WCBjbGllbnRZIG9mZnNldFggb2Zmc2V0WSBwYWdlWCBwYWdlWSBzY3JlZW5YIHNjcmVlblkgdG9FbGVtZW50Ii5zcGxpdCgiICIpLGZpbHRlcjpmdW5jdGlvbihlLHQpe3ZhciBuLHIsaSxzPXQuYnV0dG9uO3JldHVybiBudWxsPT1lLnBhZ2VYJiZudWxsIT10LmNsaWVudFgmJihuPWUudGFyZ2V0Lm93bmVyRG9jdW1lbnR8fG8scj1uLmRvY3VtZW50RWxlbWVudCxpPW4uYm9keSxlLnBhZ2VYPXQuY2xpZW50WCsociYmci5zY3JvbGxMZWZ0fHxpJiZpLnNjcm9sbExlZnR8fDApLShyJiZyLmNsaWVudExlZnR8fGkmJmkuY2xpZW50TGVmdHx8MCksZS5wYWdlWT10LmNsaWVudFkrKHImJnIuc2Nyb2xsVG9wfHxpJiZpLnNjcm9sbFRvcHx8MCktKHImJnIuY2xpZW50VG9wfHxpJiZpLmNsaWVudFRvcHx8MCkpLGUud2hpY2h8fHM9PT11bmRlZmluZWR8fChlLndoaWNoPTEmcz8xOjImcz8zOjQmcz8yOjApLGV9fSxmaXg6ZnVuY3Rpb24oZSl7aWYoZVt4LmV4cGFuZG9dKXJldHVybiBlO3ZhciB0LG4scixpPWUudHlwZSxvPWUscz10aGlzLmZpeEhvb2tzW2ldO3N8fCh0aGlzLmZpeEhvb2tzW2ldPXM9ei50ZXN0KGkpP3RoaXMubW91c2VIb29rczpJLnRlc3QoaSk/dGhpcy5rZXlIb29rczp7fSkscj1zLnByb3BzP3RoaXMucHJvcHMuY29uY2F0KHMucHJvcHMpOnRoaXMucHJvcHMsZT1uZXcgeC5FdmVudChvKSx0PXIubGVuZ3RoO3doaWxlKHQtLSluPXJbdF0sZVtuXT1vW25dO3JldHVybiAzPT09ZS50YXJnZXQubm9kZVR5cGUmJihlLnRhcmdldD1lLnRhcmdldC5wYXJlbnROb2RlKSxzLmZpbHRlcj9zLmZpbHRlcihlLG8pOmV9LHNwZWNpYWw6e2xvYWQ6e25vQnViYmxlOiEwfSxmb2N1czp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzIT09VigpJiZ0aGlzLmZvY3VzPyh0aGlzLmZvY3VzKCksITEpOnVuZGVmaW5lZH0sZGVsZWdhdGVUeXBlOiJmb2N1c2luIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzPT09VigpJiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp1bmRlZmluZWR9LGRlbGVnYXRlVHlwZToiZm9jdXNvdXQifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiJjaGVja2JveCI9PT10aGlzLnR5cGUmJnRoaXMuY2xpY2smJngubm9kZU5hbWUodGhpcywiaW5wdXQiKT8odGhpcy5jbGljaygpLCExKTp1bmRlZmluZWR9LF9kZWZhdWx0OmZ1bmN0aW9uKGUpe3JldHVybiB4Lm5vZGVOYW1lKGUudGFyZ2V0LCJhIil9fSxiZWZvcmV1bmxvYWQ6e3Bvc3REaXNwYXRjaDpmdW5jdGlvbihlKXtlLnJlc3VsdCE9PXVuZGVmaW5lZCYmKGUub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1lLnJlc3VsdCl9fX0sc2ltdWxhdGU6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGk9eC5leHRlbmQobmV3IHguRXZlbnQsbix7dHlwZTplLGlzU2ltdWxhdGVkOiEwLG9yaWdpbmFsRXZlbnQ6e319KTtyP3guZXZlbnQudHJpZ2dlcihpLG51bGwsdCk6eC5ldmVudC5kaXNwYXRjaC5jYWxsKHQsaSksaS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmbi5wcmV2ZW50RGVmYXVsdCgpfX0seC5yZW1vdmVFdmVudD1mdW5jdGlvbihlLHQsbil7ZS5yZW1vdmVFdmVudExpc3RlbmVyJiZlLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxuLCExKX0seC5FdmVudD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgeC5FdmVudD8oZSYmZS50eXBlPyh0aGlzLm9yaWdpbmFsRXZlbnQ9ZSx0aGlzLnR5cGU9ZS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWUuZGVmYXVsdFByZXZlbnRlZHx8ZS5nZXRQcmV2ZW50RGVmYXVsdCYmZS5nZXRQcmV2ZW50RGVmYXVsdCgpP1U6WSk6dGhpcy50eXBlPWUsdCYmeC5leHRlbmQodGhpcyx0KSx0aGlzLnRpbWVTdGFtcD1lJiZlLnRpbWVTdGFtcHx8eC5ub3coKSx0aGlzW3guZXhwYW5kb109ITAsdW5kZWZpbmVkKTpuZXcgeC5FdmVudChlLHQpfSx4LkV2ZW50LnByb3RvdHlwZT17aXNEZWZhdWx0UHJldmVudGVkOlksaXNQcm9wYWdhdGlvblN0b3BwZWQ6WSxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDpZLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPVUsZSYmZS5wcmV2ZW50RGVmYXVsdCYmZS5wcmV2ZW50RGVmYXVsdCgpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1VLGUmJmUuc3RvcFByb3BhZ2F0aW9uJiZlLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPVUsdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LHguZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCJ9LGZ1bmN0aW9uKGUsdCl7eC5ldmVudC5zcGVjaWFsW2VdPXtkZWxlZ2F0ZVR5cGU6dCxiaW5kVHlwZTp0LGhhbmRsZTpmdW5jdGlvbihlKXt2YXIgbixyPXRoaXMsaT1lLnJlbGF0ZWRUYXJnZXQsbz1lLmhhbmRsZU9iajtyZXR1cm4oIWl8fGkhPT1yJiYheC5jb250YWlucyhyLGkpKSYmKGUudHlwZT1vLm9yaWdUeXBlLG49by5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxlLnR5cGU9dCksbn19fSkseC5zdXBwb3J0LmZvY3VzaW5CdWJibGVzfHx4LmVhY2goe2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCJ9LGZ1bmN0aW9uKGUsdCl7dmFyIG49MCxyPWZ1bmN0aW9uKGUpe3guZXZlbnQuc2ltdWxhdGUodCxlLnRhcmdldCx4LmV2ZW50LmZpeChlKSwhMCl9O3guZXZlbnQuc3BlY2lhbFt0XT17c2V0dXA6ZnVuY3Rpb24oKXswPT09bisrJiZvLmFkZEV2ZW50TGlzdGVuZXIoZSxyLCEwKX0sdGVhcmRvd246ZnVuY3Rpb24oKXswPT09LS1uJiZvLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSxyLCEwKX19fSkseC5mbi5leHRlbmQoe29uOmZ1bmN0aW9uKGUsdCxuLHIsaSl7dmFyIG8scztpZigib2JqZWN0Ij09dHlwZW9mIGUpeyJzdHJpbmciIT10eXBlb2YgdCYmKG49bnx8dCx0PXVuZGVmaW5lZCk7Zm9yKHMgaW4gZSl0aGlzLm9uKHMsdCxuLGVbc10saSk7cmV0dXJuIHRoaXN9aWYobnVsbD09biYmbnVsbD09cj8ocj10LG49dD11bmRlZmluZWQpOm51bGw9PXImJigic3RyaW5nIj09dHlwZW9mIHQ/KHI9bixuPXVuZGVmaW5lZCk6KHI9bixuPXQsdD11bmRlZmluZWQpKSxyPT09ITEpcj1ZO2Vsc2UgaWYoIXIpcmV0dXJuIHRoaXM7cmV0dXJuIDE9PT1pJiYobz1yLHI9ZnVuY3Rpb24oZSl7cmV0dXJuIHgoKS5vZmYoZSksby5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHIuZ3VpZD1vLmd1aWR8fChvLmd1aWQ9eC5ndWlkKyspKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt4LmV2ZW50LmFkZCh0aGlzLGUscixuLHQpfSl9LG9uZTpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gdGhpcy5vbihlLHQsbixyLDEpfSxvZmY6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk7aWYoZSYmZS5wcmV2ZW50RGVmYXVsdCYmZS5oYW5kbGVPYmopcmV0dXJuIHI9ZS5oYW5kbGVPYmoseChlLmRlbGVnYXRlVGFyZ2V0KS5vZmYoci5uYW1lc3BhY2U/ci5vcmlnVHlwZSsiLiIrci5uYW1lc3BhY2U6ci5vcmlnVHlwZSxyLnNlbGVjdG9yLHIuaGFuZGxlciksdGhpcztpZigib2JqZWN0Ij09dHlwZW9mIGUpe2ZvcihpIGluIGUpdGhpcy5vZmYoaSx0LGVbaV0pO3JldHVybiB0aGlzfXJldHVybih0PT09ITF8fCJmdW5jdGlvbiI9PXR5cGVvZiB0KSYmKG49dCx0PXVuZGVmaW5lZCksbj09PSExJiYobj1ZKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt4LmV2ZW50LnJlbW92ZSh0aGlzLGUsbix0KX0pfSx0cmlnZ2VyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3guZXZlbnQudHJpZ2dlcihlLHQsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzWzBdO3JldHVybiBuP3guZXZlbnQudHJpZ2dlcihlLHQsbiwhMCk6dW5kZWZpbmVkfX0pO3ZhciBHPS9eLlteOiNcW1wuLF0qJC8sSj14LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LFE9e2NoaWxkcmVuOiEwLGNvbnRlbnRzOiEwLG5leHQ6ITAscHJldjohMH07eC5mbi5leHRlbmQoe2ZpbmQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGk9dGhpcy5sZW5ndGg7aWYoInN0cmluZyIhPXR5cGVvZiBlKXJldHVybiB0PXRoaXMsdGhpcy5wdXNoU3RhY2soeChlKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3Iocj0wO2k+cjtyKyspaWYoeC5jb250YWlucyh0W3JdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihuPVtdLHI9MDtpPnI7cisrKXguZmluZChlLHRoaXNbcl0sbik7cmV0dXJuIG49dGhpcy5wdXNoU3RhY2soaT4xP3gudW5pcXVlKG4pOm4pLG4uc2VsZWN0b3I9KHRoaXMuc2VsZWN0b3I/dGhpcy5zZWxlY3RvcisiICI6IiIpK2Usbn0saGFzOmZ1bmN0aW9uKGUpe3ZhciB0PXgoZSx0aGlzKSxuPXQubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe3ZhciBlPTA7Zm9yKDtuPmU7ZSsrKWlmKHguY29udGFpbnModGhpcyx0W2VdKSlyZXR1cm4hMH0pfSxub3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKFoodGhpcyxlfHxbXSwhMCkpfSxmaWx0ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKFoodGhpcyxlfHxbXSwhMSkpfSxpczpmdW5jdGlvbihlKXtyZXR1cm4hIWUmJigic3RyaW5nIj09dHlwZW9mIGU/Si50ZXN0KGUpP3goZSx0aGlzLmNvbnRleHQpLmluZGV4KHRoaXNbMF0pPj0wOnguZmlsdGVyKGUsdGhpcykubGVuZ3RoPjA6dGhpcy5maWx0ZXIoZSkubGVuZ3RoPjApfSxjbG9zZXN0OmZ1bmN0aW9uKGUsdCl7dmFyIG4scj0wLGk9dGhpcy5sZW5ndGgsbz1bXSxzPUoudGVzdChlKXx8InN0cmluZyIhPXR5cGVvZiBlP3goZSx0fHx0aGlzLmNvbnRleHQpOjA7Zm9yKDtpPnI7cisrKWZvcihuPXRoaXNbcl07biYmbiE9PXQ7bj1uLnBhcmVudE5vZGUpaWYoMTE+bi5ub2RlVHlwZSYmKHM/cy5pbmRleChuKT4tMToxPT09bi5ub2RlVHlwZSYmeC5maW5kLm1hdGNoZXNTZWxlY3RvcihuLGUpKSl7bj1vLnB1c2gobik7YnJlYWt9cmV0dXJuIHRoaXMucHVzaFN0YWNrKG8ubGVuZ3RoPjE/eC51bmlxdWUobyk6byl9LGluZGV4OmZ1bmN0aW9uKGUpe3JldHVybiBlPyJzdHJpbmciPT10eXBlb2YgZT9nLmNhbGwoeChlKSx0aGlzWzBdKTpnLmNhbGwodGhpcyxlLmpxdWVyeT9lWzBdOmUpOnRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZT90aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aDotMX0sYWRkOmZ1bmN0aW9uKGUsdCl7dmFyIG49InN0cmluZyI9PXR5cGVvZiBlP3goZSx0KTp4Lm1ha2VBcnJheShlJiZlLm5vZGVUeXBlP1tlXTplKSxyPXgubWVyZ2UodGhpcy5nZXQoKSxuKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soeC51bmlxdWUocikpfSxhZGRCYWNrOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmFkZChudWxsPT1lP3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKGUpKX19KTtmdW5jdGlvbiBLKGUsdCl7d2hpbGUoKGU9ZVt0XSkmJjEhPT1lLm5vZGVUeXBlKTtyZXR1cm4gZX14LmVhY2goe3BhcmVudDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7cmV0dXJuIHQmJjExIT09dC5ub2RlVHlwZT90Om51bGx9LHBhcmVudHM6ZnVuY3Rpb24oZSl7cmV0dXJuIHguZGlyKGUsInBhcmVudE5vZGUiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4geC5kaXIoZSwicGFyZW50Tm9kZSIsbil9LG5leHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIEsoZSwibmV4dFNpYmxpbmciKX0scHJldjpmdW5jdGlvbihlKXtyZXR1cm4gSyhlLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dEFsbDpmdW5jdGlvbihlKXtyZXR1cm4geC5kaXIoZSwibmV4dFNpYmxpbmciKX0scHJldkFsbDpmdW5jdGlvbihlKXtyZXR1cm4geC5kaXIoZSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHguZGlyKGUsIm5leHRTaWJsaW5nIixuKX0scHJldlVudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4geC5kaXIoZSwicHJldmlvdXNTaWJsaW5nIixuKX0sc2libGluZ3M6ZnVuY3Rpb24oZSl7cmV0dXJuIHguc2libGluZygoZS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxlKX0sY2hpbGRyZW46ZnVuY3Rpb24oZSl7cmV0dXJuIHguc2libGluZyhlLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihlKXtyZXR1cm4geC5ub2RlTmFtZShlLCJpZnJhbWUiKT9lLmNvbnRlbnREb2N1bWVudHx8ZS5jb250ZW50V2luZG93LmRvY3VtZW50OngubWVyZ2UoW10sZS5jaGlsZE5vZGVzKX19LGZ1bmN0aW9uKGUsdCl7eC5mbltlXT1mdW5jdGlvbihuLHIpe3ZhciBpPXgubWFwKHRoaXMsdCxuKTtyZXR1cm4iVW50aWwiIT09ZS5zbGljZSgtNSkmJihyPW4pLHImJiJzdHJpbmciPT10eXBlb2YgciYmKGk9eC5maWx0ZXIocixpKSksdGhpcy5sZW5ndGg+MSYmKFFbZV18fHgudW5pcXVlKGkpLCJwIj09PWVbMF0mJmkucmV2ZXJzZSgpKSx0aGlzLnB1c2hTdGFjayhpKX19KSx4LmV4dGVuZCh7ZmlsdGVyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10WzBdO3JldHVybiBuJiYoZT0iOm5vdCgiK2UrIikiKSwxPT09dC5sZW5ndGgmJjE9PT1yLm5vZGVUeXBlP3guZmluZC5tYXRjaGVzU2VsZWN0b3IocixlKT9bcl06W106eC5maW5kLm1hdGNoZXMoZSx4LmdyZXAodCxmdW5jdGlvbihlKXtyZXR1cm4gMT09PWUubm9kZVR5cGV9KSl9LGRpcjpmdW5jdGlvbihlLHQsbil7dmFyIHI9W10saT1uIT09dW5kZWZpbmVkO3doaWxlKChlPWVbdF0pJiY5IT09ZS5ub2RlVHlwZSlpZigxPT09ZS5ub2RlVHlwZSl7aWYoaSYmeChlKS5pcyhuKSlicmVhaztyLnB1c2goZSl9cmV0dXJuIHJ9LHNpYmxpbmc6ZnVuY3Rpb24oZSx0KXt2YXIgbj1bXTtmb3IoO2U7ZT1lLm5leHRTaWJsaW5nKTE9PT1lLm5vZGVUeXBlJiZlIT09dCYmbi5wdXNoKGUpO3JldHVybiBufX0pO2Z1bmN0aW9uIFooZSx0LG4pe2lmKHguaXNGdW5jdGlvbih0KSlyZXR1cm4geC5ncmVwKGUsZnVuY3Rpb24oZSxyKXtyZXR1cm4hIXQuY2FsbChlLHIsZSkhPT1ufSk7aWYodC5ub2RlVHlwZSlyZXR1cm4geC5ncmVwKGUsZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10IT09bn0pO2lmKCJzdHJpbmciPT10eXBlb2YgdCl7aWYoRy50ZXN0KHQpKXJldHVybiB4LmZpbHRlcih0LGUsbik7dD14LmZpbHRlcih0LGUpfXJldHVybiB4LmdyZXAoZSxmdW5jdGlvbihlKXtyZXR1cm4gZy5jYWxsKHQsZSk+PTAhPT1ufSl9dmFyIGV0PS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcdzpdKylbXj5dKilcLz4vZ2ksdHQ9LzwoW1x3Ol0rKS8sbnQ9Lzx8JiM/XHcrOy8scnQ9LzwoPzpzY3JpcHR8c3R5bGV8bGluaykvaSxpdD0vXig/OmNoZWNrYm94fHJhZGlvKSQvaSxvdD0vY2hlY2tlZFxzKig/OltePV18PVxzKi5jaGVja2VkLikvaSxzdD0vXiR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksYXQ9L150cnVlXC8oLiopLyx1dD0vXlxzKjwhKD86XFtDREFUQVxbfC0tKXwoPzpcXVxdfC0tKT5ccyokL2csbHQ9e29wdGlvbjpbMSwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPiIsIjwvc2VsZWN0PiJdLHRoZWFkOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sdGQ6WzMsIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdLF9kZWZhdWx0OlswLCIiLCIiXX07bHQub3B0Z3JvdXA9bHQub3B0aW9uLGx0LnRib2R5PWx0LnRmb290PWx0LmNvbGdyb3VwPWx0LmNhcHRpb249bHQuY29sPWx0LnRoZWFkLGx0LnRoPWx0LnRkLHguZm4uZXh0ZW5kKHt0ZXh0OmZ1bmN0aW9uKGUpe3JldHVybiB4LmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKGUpe3JldHVybiBlPT09dW5kZWZpbmVkP3gudGV4dCh0aGlzKTp0aGlzLmVtcHR5KCkuYXBwZW5kKCh0aGlzWzBdJiZ0aGlzWzBdLm93bmVyRG9jdW1lbnR8fG8pLmNyZWF0ZVRleHROb2RlKGUpKX0sbnVsbCxlLGFyZ3VtZW50cy5sZW5ndGgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oZSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciB0PWN0KHRoaXMsZSk7dC5hcHBlbmRDaGlsZChlKX19KX0scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihlKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIHQ9Y3QodGhpcyxlKTt0Lmluc2VydEJlZm9yZShlLHQuZmlyc3RDaGlsZCl9fSl9LGJlZm9yZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihlKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSx0aGlzKX0pfSxhZnRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihlKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSx0aGlzLm5leHRTaWJsaW5nKX0pfSxyZW1vdmU6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPWU/eC5maWx0ZXIoZSx0aGlzKTp0aGlzLGk9MDtmb3IoO251bGwhPShuPXJbaV0pO2krKyl0fHwxIT09bi5ub2RlVHlwZXx8eC5jbGVhbkRhdGEoZ3QobikpLG4ucGFyZW50Tm9kZSYmKHQmJnguY29udGFpbnMobi5vd25lckRvY3VtZW50LG4pJiZodChndChuLCJzY3JpcHQiKSksbi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG4pKTtyZXR1cm4gdGhpc30sZW1wdHk6ZnVuY3Rpb24oKXt2YXIgZSx0PTA7Zm9yKDtudWxsIT0oZT10aGlzW3RdKTt0KyspMT09PWUubm9kZVR5cGUmJih4LmNsZWFuRGF0YShndChlLCExKSksZS50ZXh0Q29udGVudD0iIik7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9bnVsbD09ZT8hMTplLHQ9bnVsbD09dD9lOnQsdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4geC5jbG9uZSh0aGlzLGUsdCl9KX0saHRtbDpmdW5jdGlvbihlKXtyZXR1cm4geC5hY2Nlc3ModGhpcyxmdW5jdGlvbihlKXt2YXIgdD10aGlzWzBdfHx7fSxuPTAscj10aGlzLmxlbmd0aDtpZihlPT09dW5kZWZpbmVkJiYxPT09dC5ub2RlVHlwZSlyZXR1cm4gdC5pbm5lckhUTUw7aWYoInN0cmluZyI9PXR5cGVvZiBlJiYhcnQudGVzdChlKSYmIWx0Wyh0dC5leGVjKGUpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7ZT1lLnJlcGxhY2UoZXQsIjwkMT48LyQyPiIpO3RyeXtmb3IoO3I+bjtuKyspdD10aGlzW25dfHx7fSwxPT09dC5ub2RlVHlwZSYmKHguY2xlYW5EYXRhKGd0KHQsITEpKSx0LmlubmVySFRNTD1lKTt0PTB9Y2F0Y2goaSl7fX10JiZ0aGlzLmVtcHR5KCkuYXBwZW5kKGUpfSxudWxsLGUsYXJndW1lbnRzLmxlbmd0aCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKCl7dmFyIGU9eC5tYXAodGhpcyxmdW5jdGlvbihlKXtyZXR1cm5bZS5uZXh0U2libGluZyxlLnBhcmVudE5vZGVdfSksdD0wO3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihuKXt2YXIgcj1lW3QrK10saT1lW3QrK107aSYmKHgodGhpcykucmVtb3ZlKCksaS5pbnNlcnRCZWZvcmUobixyKSl9LCEwKSx0P3RoaXM6dGhpcy5yZW1vdmUoKX0sZGV0YWNoOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlbW92ZShlLCEwKX0sZG9tTWFuaXA6ZnVuY3Rpb24oZSx0LG4pe2U9cC5hcHBseShbXSxlKTt2YXIgcixpLG8scyxhLHUsbD0wLGM9dGhpcy5sZW5ndGgsZj10aGlzLGg9Yy0xLGQ9ZVswXSxnPXguaXNGdW5jdGlvbihkKTtpZihnfHwhKDE+PWN8fCJzdHJpbmciIT10eXBlb2YgZHx8eC5zdXBwb3J0LmNoZWNrQ2xvbmUpJiZvdC50ZXN0KGQpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24ocil7dmFyIGk9Zi5lcShyKTtnJiYoZVswXT1kLmNhbGwodGhpcyxyLGkuaHRtbCgpKSksaS5kb21NYW5pcChlLHQsbil9KTtpZihjJiYocj14LmJ1aWxkRnJhZ21lbnQoZSx0aGlzWzBdLm93bmVyRG9jdW1lbnQsITEsIW4mJnRoaXMpLGk9ci5maXJzdENoaWxkLDE9PT1yLmNoaWxkTm9kZXMubGVuZ3RoJiYocj1pKSxpKSl7Zm9yKG89eC5tYXAoZ3Qociwic2NyaXB0IiksZnQpLHM9by5sZW5ndGg7Yz5sO2wrKylhPXIsbCE9PWgmJihhPXguY2xvbmUoYSwhMCwhMCkscyYmeC5tZXJnZShvLGd0KGEsInNjcmlwdCIpKSksdC5jYWxsKHRoaXNbbF0sYSxsKTtpZihzKWZvcih1PW9bby5sZW5ndGgtMV0ub3duZXJEb2N1bWVudCx4Lm1hcChvLHB0KSxsPTA7cz5sO2wrKylhPW9bbF0sc3QudGVzdChhLnR5cGV8fCIiKSYmIXEuYWNjZXNzKGEsImdsb2JhbEV2YWwiKSYmeC5jb250YWlucyh1LGEpJiYoYS5zcmM/eC5fZXZhbFVybChhLnNyYyk6eC5nbG9iYWxFdmFsKGEudGV4dENvbnRlbnQucmVwbGFjZSh1dCwiIikpKX1yZXR1cm4gdGhpc319KSx4LmVhY2goe2FwcGVuZFRvOiJhcHBlbmQiLHByZXBlbmRUbzoicHJlcGVuZCIsaW5zZXJ0QmVmb3JlOiJiZWZvcmUiLGluc2VydEFmdGVyOiJhZnRlciIscmVwbGFjZUFsbDoicmVwbGFjZVdpdGgifSxmdW5jdGlvbihlLHQpe3guZm5bZV09ZnVuY3Rpb24oZSl7dmFyIG4scj1bXSxpPXgoZSksbz1pLmxlbmd0aC0xLHM9MDtmb3IoO28+PXM7cysrKW49cz09PW8/dGhpczp0aGlzLmNsb25lKCEwKSx4KGlbc10pW3RdKG4pLGguYXBwbHkocixuLmdldCgpKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2socil9fSkseC5leHRlbmQoe2Nsb25lOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8scyxhPWUuY2xvbmVOb2RlKCEwKSx1PXguY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpO2lmKCEoeC5zdXBwb3J0Lm5vQ2xvbmVDaGVja2VkfHwxIT09ZS5ub2RlVHlwZSYmMTEhPT1lLm5vZGVUeXBlfHx4LmlzWE1MRG9jKGUpKSlmb3Iocz1ndChhKSxvPWd0KGUpLHI9MCxpPW8ubGVuZ3RoO2k+cjtyKyspbXQob1tyXSxzW3JdKTtpZih0KWlmKG4pZm9yKG89b3x8Z3QoZSkscz1zfHxndChhKSxyPTAsaT1vLmxlbmd0aDtpPnI7cisrKWR0KG9bcl0sc1tyXSk7ZWxzZSBkdChlLGEpO3JldHVybiBzPWd0KGEsInNjcmlwdCIpLHMubGVuZ3RoPjAmJmh0KHMsIXUmJmd0KGUsInNjcmlwdCIpKSxhfSxidWlsZEZyYWdtZW50OmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG8scyxhLHUsbCxjPTAsZj1lLmxlbmd0aCxwPXQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGg9W107Zm9yKDtmPmM7YysrKWlmKGk9ZVtjXSxpfHwwPT09aSlpZigib2JqZWN0Ij09PXgudHlwZShpKSl4Lm1lcmdlKGgsaS5ub2RlVHlwZT9baV06aSk7ZWxzZSBpZihudC50ZXN0KGkpKXtvPW98fHAuYXBwZW5kQ2hpbGQodC5jcmVhdGVFbGVtZW50KCJkaXYiKSkscz0odHQuZXhlYyhpKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKSxhPWx0W3NdfHxsdC5fZGVmYXVsdCxvLmlubmVySFRNTD1hWzFdK2kucmVwbGFjZShldCwiPCQxPjwvJDI+IikrYVsyXSxsPWFbMF07d2hpbGUobC0tKW89by5maXJzdENoaWxkO3gubWVyZ2UoaCxvLmNoaWxkTm9kZXMpLG89cC5maXJzdENoaWxkLG8udGV4dENvbnRlbnQ9IiJ9ZWxzZSBoLnB1c2godC5jcmVhdGVUZXh0Tm9kZShpKSk7cC50ZXh0Q29udGVudD0iIixjPTA7d2hpbGUoaT1oW2MrK10paWYoKCFyfHwtMT09PXguaW5BcnJheShpLHIpKSYmKHU9eC5jb250YWlucyhpLm93bmVyRG9jdW1lbnQsaSksbz1ndChwLmFwcGVuZENoaWxkKGkpLCJzY3JpcHQiKSx1JiZodChvKSxuKSl7bD0wO3doaWxlKGk9b1tsKytdKXN0LnRlc3QoaS50eXBlfHwiIikmJm4ucHVzaChpKX1yZXR1cm4gcH0sY2xlYW5EYXRhOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpPWUubGVuZ3RoLG89MCxzPXguZXZlbnQuc3BlY2lhbDtmb3IoO2k+bztvKyspe2lmKG49ZVtvXSx4LmFjY2VwdERhdGEobikmJih0PXEuYWNjZXNzKG4pKSlmb3IociBpbiB0LmV2ZW50cylzW3JdP3guZXZlbnQucmVtb3ZlKG4scik6eC5yZW1vdmVFdmVudChuLHIsdC5oYW5kbGUpO0wuZGlzY2FyZChuKSxxLmRpc2NhcmQobil9fSxfZXZhbFVybDpmdW5jdGlvbihlKXtyZXR1cm4geC5hamF4KHt1cmw6ZSx0eXBlOiJHRVQiLGRhdGFUeXBlOiJ0ZXh0Iixhc3luYzohMSxnbG9iYWw6ITEsc3VjY2Vzczp4Lmdsb2JhbEV2YWx9KX19KTtmdW5jdGlvbiBjdChlLHQpe3JldHVybiB4Lm5vZGVOYW1lKGUsInRhYmxlIikmJngubm9kZU5hbWUoMT09PXQubm9kZVR5cGU/dDp0LmZpcnN0Q2hpbGQsInRyIik/ZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKVswXXx8ZS5hcHBlbmRDaGlsZChlLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGJvZHkiKSk6ZX1mdW5jdGlvbiBmdChlKXtyZXR1cm4gZS50eXBlPShudWxsIT09ZS5nZXRBdHRyaWJ1dGUoInR5cGUiKSkrIi8iK2UudHlwZSxlfWZ1bmN0aW9uIHB0KGUpe3ZhciB0PWF0LmV4ZWMoZS50eXBlKTtyZXR1cm4gdD9lLnR5cGU9dFsxXTplLnJlbW92ZUF0dHJpYnV0ZSgidHlwZSIpLGV9ZnVuY3Rpb24gaHQoZSx0KXt2YXIgbj1lLmxlbmd0aCxyPTA7Zm9yKDtuPnI7cisrKXEuc2V0KGVbcl0sImdsb2JhbEV2YWwiLCF0fHxxLmdldCh0W3JdLCJnbG9iYWxFdmFsIikpfWZ1bmN0aW9uIGR0KGUsdCl7dmFyIG4scixpLG8scyxhLHUsbDtpZigxPT09dC5ub2RlVHlwZSl7aWYocS5oYXNEYXRhKGUpJiYobz1xLmFjY2VzcyhlKSxzPXguZXh0ZW5kKHt9LG8pLGw9by5ldmVudHMscS5zZXQodCxzKSxsKSl7ZGVsZXRlIHMuaGFuZGxlLHMuZXZlbnRzPXt9O2ZvcihpIGluIGwpZm9yKG49MCxyPWxbaV0ubGVuZ3RoO3I+bjtuKyspeC5ldmVudC5hZGQodCxpLGxbaV1bbl0pfUwuaGFzRGF0YShlKSYmKGE9TC5hY2Nlc3MoZSksdT14LmV4dGVuZCh7fSxhKSxMLnNldCh0LHUpKX19ZnVuY3Rpb24gZ3QoZSx0KXt2YXIgbj1lLmdldEVsZW1lbnRzQnlUYWdOYW1lP2UuZ2V0RWxlbWVudHNCeVRhZ05hbWUodHx8IioiKTplLnF1ZXJ5U2VsZWN0b3JBbGw/ZS5xdWVyeVNlbGVjdG9yQWxsKHR8fCIqIik6W107cmV0dXJuIHQ9PT11bmRlZmluZWR8fHQmJngubm9kZU5hbWUoZSx0KT94Lm1lcmdlKFtlXSxuKTpufWZ1bmN0aW9uIG10KGUsdCl7dmFyIG49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOyJpbnB1dCI9PT1uJiZpdC50ZXN0KGUudHlwZSk/dC5jaGVja2VkPWUuY2hlY2tlZDooImlucHV0Ij09PW58fCJ0ZXh0YXJlYSI9PT1uKSYmKHQuZGVmYXVsdFZhbHVlPWUuZGVmYXVsdFZhbHVlKX14LmZuLmV4dGVuZCh7d3JhcEFsbDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4geC5pc0Z1bmN0aW9uKGUpP3RoaXMuZWFjaChmdW5jdGlvbih0KXt4KHRoaXMpLndyYXBBbGwoZS5jYWxsKHRoaXMsdCkpfSk6KHRoaXNbMF0mJih0PXgoZSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKCEwKSx0aGlzWzBdLnBhcmVudE5vZGUmJnQuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pLHQubWFwKGZ1bmN0aW9uKCl7dmFyIGU9dGhpczt3aGlsZShlLmZpcnN0RWxlbWVudENoaWxkKWU9ZS5maXJzdEVsZW1lbnRDaGlsZDtyZXR1cm4gZX0pLmFwcGVuZCh0aGlzKSksdGhpcyl9LHdyYXBJbm5lcjpmdW5jdGlvbihlKXtyZXR1cm4geC5pc0Z1bmN0aW9uKGUpP3RoaXMuZWFjaChmdW5jdGlvbih0KXt4KHRoaXMpLndyYXBJbm5lcihlLmNhbGwodGhpcyx0KSl9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD14KHRoaXMpLG49dC5jb250ZW50cygpO24ubGVuZ3RoP24ud3JhcEFsbChlKTp0LmFwcGVuZChlKX0pfSx3cmFwOmZ1bmN0aW9uKGUpe3ZhciB0PXguaXNGdW5jdGlvbihlKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKG4pe3godGhpcykud3JhcEFsbCh0P2UuY2FsbCh0aGlzLG4pOmUpfSl9LHVud3JhcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudCgpLmVhY2goZnVuY3Rpb24oKXt4Lm5vZGVOYW1lKHRoaXMsImJvZHkiKXx8eCh0aGlzKS5yZXBsYWNlV2l0aCh0aGlzLmNoaWxkTm9kZXMpfSkuZW5kKCl9fSk7dmFyIHl0LHZ0LHh0PS9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyxidD0vXm1hcmdpbi8sd3Q9UmVnRXhwKCJeKCIrYisiKSguKikkIiwiaSIpLFR0PVJlZ0V4cCgiXigiK2IrIikoPyFweClbYS16JV0rJCIsImkiKSxDdD1SZWdFeHAoIl4oWystXSk9KCIrYisiKSIsImkiKSxrdD17Qk9EWToiYmxvY2sifSxOdD17cG9zaXRpb246ImFic29sdXRlIix2aXNpYmlsaXR5OiJoaWRkZW4iLGRpc3BsYXk6ImJsb2NrIn0sRXQ9e2xldHRlclNwYWNpbmc6MCxmb250V2VpZ2h0OjQwMH0sU3Q9WyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXSxqdD1bIldlYmtpdCIsIk8iLCJNb3oiLCJtcyJdO2Z1bmN0aW9uIER0KGUsdCl7aWYodCBpbiBlKXJldHVybiB0O3ZhciBuPXQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKSxyPXQsaT1qdC5sZW5ndGg7d2hpbGUoaS0tKWlmKHQ9anRbaV0rbix0IGluIGUpcmV0dXJuIHQ7cmV0dXJuIHJ9ZnVuY3Rpb24gQXQoZSx0KXtyZXR1cm4gZT10fHxlLCJub25lIj09PXguY3NzKGUsImRpc3BsYXkiKXx8IXguY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpfWZ1bmN0aW9uIEx0KHQpe3JldHVybiBlLmdldENvbXB1dGVkU3R5bGUodCxudWxsKX1mdW5jdGlvbiBxdChlLHQpe3ZhciBuLHIsaSxvPVtdLHM9MCxhPWUubGVuZ3RoO2Zvcig7YT5zO3MrKylyPWVbc10sci5zdHlsZSYmKG9bc109cS5nZXQociwib2xkZGlzcGxheSIpLG49ci5zdHlsZS5kaXNwbGF5LHQ/KG9bc118fCJub25lIiE9PW58fChyLnN0eWxlLmRpc3BsYXk9IiIpLCIiPT09ci5zdHlsZS5kaXNwbGF5JiZBdChyKSYmKG9bc109cS5hY2Nlc3Mociwib2xkZGlzcGxheSIsUHQoci5ub2RlTmFtZSkpKSk6b1tzXXx8KGk9QXQociksKG4mJiJub25lIiE9PW58fCFpKSYmcS5zZXQociwib2xkZGlzcGxheSIsaT9uOnguY3NzKHIsImRpc3BsYXkiKSkpKTtmb3Iocz0wO2E+cztzKyspcj1lW3NdLHIuc3R5bGUmJih0JiYibm9uZSIhPT1yLnN0eWxlLmRpc3BsYXkmJiIiIT09ci5zdHlsZS5kaXNwbGF5fHwoci5zdHlsZS5kaXNwbGF5PXQ/b1tzXXx8IiI6Im5vbmUiKSk7cmV0dXJuIGV9eC5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihlLHQpe3JldHVybiB4LmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89e30scz0wO2lmKHguaXNBcnJheSh0KSl7Zm9yKHI9THQoZSksaT10Lmxlbmd0aDtpPnM7cysrKW9bdFtzXV09eC5jc3MoZSx0W3NdLCExLHIpO3JldHVybiBvfXJldHVybiBuIT09dW5kZWZpbmVkP3guc3R5bGUoZSx0LG4pOnguY3NzKGUsdCl9LGUsdCxhcmd1bWVudHMubGVuZ3RoPjEpfSxzaG93OmZ1bmN0aW9uKCl7cmV0dXJuIHF0KHRoaXMsITApfSxoaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIHF0KHRoaXMpfSx0b2dnbGU6ZnVuY3Rpb24oZSl7dmFyIHQ9ImJvb2xlYW4iPT10eXBlb2YgZTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7KHQ/ZTpBdCh0aGlzKSk/eCh0aGlzKS5zaG93KCk6eCh0aGlzKS5oaWRlKCl9KX19KSx4LmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihlLHQpe2lmKHQpe3ZhciBuPXl0KGUsIm9wYWNpdHkiKTtyZXR1cm4iIj09PW4/IjEiOm59fX19LGNzc051bWJlcjp7Y29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZm9udFdlaWdodDohMCxsaW5lSGVpZ2h0OiEwLG9wYWNpdHk6ITAsb3JwaGFuczohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITB9LGNzc1Byb3BzOnsiZmxvYXQiOiJjc3NGbG9hdCJ9LHN0eWxlOmZ1bmN0aW9uKGUsdCxuLHIpe2lmKGUmJjMhPT1lLm5vZGVUeXBlJiY4IT09ZS5ub2RlVHlwZSYmZS5zdHlsZSl7dmFyIGksbyxzLGE9eC5jYW1lbENhc2UodCksdT1lLnN0eWxlO3JldHVybiB0PXguY3NzUHJvcHNbYV18fCh4LmNzc1Byb3BzW2FdPUR0KHUsYSkpLHM9eC5jc3NIb29rc1t0XXx8eC5jc3NIb29rc1thXSxuPT09dW5kZWZpbmVkP3MmJiJnZXQiaW4gcyYmKGk9cy5nZXQoZSwhMSxyKSkhPT11bmRlZmluZWQ/aTp1W3RdOihvPXR5cGVvZiBuLCJzdHJpbmciPT09byYmKGk9Q3QuZXhlYyhuKSkmJihuPShpWzFdKzEpKmlbMl0rcGFyc2VGbG9hdCh4LmNzcyhlLHQpKSxvPSJudW1iZXIiKSxudWxsPT1ufHwibnVtYmVyIj09PW8mJmlzTmFOKG4pfHwoIm51bWJlciIhPT1vfHx4LmNzc051bWJlclthXXx8KG4rPSJweCIpLHguc3VwcG9ydC5jbGVhckNsb25lU3R5bGV8fCIiIT09bnx8MCE9PXQuaW5kZXhPZigiYmFja2dyb3VuZCIpfHwodVt0XT0iaW5oZXJpdCIpLHMmJiJzZXQiaW4gcyYmKG49cy5zZXQoZSxuLHIpKT09PXVuZGVmaW5lZHx8KHVbdF09bikpLHVuZGVmaW5lZCl9fSxjc3M6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxzLGE9eC5jYW1lbENhc2UodCk7cmV0dXJuIHQ9eC5jc3NQcm9wc1thXXx8KHguY3NzUHJvcHNbYV09RHQoZS5zdHlsZSxhKSkscz14LmNzc0hvb2tzW3RdfHx4LmNzc0hvb2tzW2FdLHMmJiJnZXQiaW4gcyYmKGk9cy5nZXQoZSwhMCxuKSksaT09PXVuZGVmaW5lZCYmKGk9eXQoZSx0LHIpKSwibm9ybWFsIj09PWkmJnQgaW4gRXQmJihpPUV0W3RdKSwiIj09PW58fG4/KG89cGFyc2VGbG9hdChpKSxuPT09ITB8fHguaXNOdW1lcmljKG8pP298fDA6aSk6aX19KSx5dD1mdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvLHM9bnx8THQoZSksYT1zP3MuZ2V0UHJvcGVydHlWYWx1ZSh0KXx8c1t0XTp1bmRlZmluZWQsdT1lLnN0eWxlO3JldHVybiBzJiYoIiIhPT1hfHx4LmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKXx8KGE9eC5zdHlsZShlLHQpKSxUdC50ZXN0KGEpJiZidC50ZXN0KHQpJiYocj11LndpZHRoLGk9dS5taW5XaWR0aCxvPXUubWF4V2lkdGgsdS5taW5XaWR0aD11Lm1heFdpZHRoPXUud2lkdGg9YSxhPXMud2lkdGgsdS53aWR0aD1yLHUubWluV2lkdGg9aSx1Lm1heFdpZHRoPW8pKSxhfTtmdW5jdGlvbiBIdChlLHQsbil7dmFyIHI9d3QuZXhlYyh0KTtyZXR1cm4gcj9NYXRoLm1heCgwLHJbMV0tKG58fDApKSsoclsyXXx8InB4Iik6dH1mdW5jdGlvbiBPdChlLHQsbixyLGkpe3ZhciBvPW49PT0ocj8iYm9yZGVyIjoiY29udGVudCIpPzQ6IndpZHRoIj09PXQ/MTowLHM9MDtmb3IoOzQ+bztvKz0yKSJtYXJnaW4iPT09biYmKHMrPXguY3NzKGUsbitTdFtvXSwhMCxpKSkscj8oImNvbnRlbnQiPT09biYmKHMtPXguY3NzKGUsInBhZGRpbmciK1N0W29dLCEwLGkpKSwibWFyZ2luIiE9PW4mJihzLT14LmNzcyhlLCJib3JkZXIiK1N0W29dKyJXaWR0aCIsITAsaSkpKToocys9eC5jc3MoZSwicGFkZGluZyIrU3Rbb10sITAsaSksInBhZGRpbmciIT09biYmKHMrPXguY3NzKGUsImJvcmRlciIrU3Rbb10rIldpZHRoIiwhMCxpKSkpO3JldHVybiBzfWZ1bmN0aW9uIEZ0KGUsdCxuKXt2YXIgcj0hMCxpPSJ3aWR0aCI9PT10P2Uub2Zmc2V0V2lkdGg6ZS5vZmZzZXRIZWlnaHQsbz1MdChlKSxzPXguc3VwcG9ydC5ib3hTaXppbmcmJiJib3JkZXItYm94Ij09PXguY3NzKGUsImJveFNpemluZyIsITEsbyk7aWYoMD49aXx8bnVsbD09aSl7aWYoaT15dChlLHQsbyksKDA+aXx8bnVsbD09aSkmJihpPWUuc3R5bGVbdF0pLFR0LnRlc3QoaSkpcmV0dXJuIGk7cj1zJiYoeC5zdXBwb3J0LmJveFNpemluZ1JlbGlhYmxlfHxpPT09ZS5zdHlsZVt0XSksaT1wYXJzZUZsb2F0KGkpfHwwfXJldHVybiBpK090KGUsdCxufHwocz8iYm9yZGVyIjoiY29udGVudCIpLHIsbykrInB4In1mdW5jdGlvbiBQdChlKXt2YXIgdD1vLG49a3RbZV07cmV0dXJuIG58fChuPVJ0KGUsdCksIm5vbmUiIT09biYmbnx8KHZ0PSh2dHx8eCgiPGlmcmFtZSBmcmFtZWJvcmRlcj0nMCcgd2lkdGg9JzAnIGhlaWdodD0nMCcvPiIpLmNzcygiY3NzVGV4dCIsImRpc3BsYXk6YmxvY2sgIWltcG9ydGFudCIpKS5hcHBlbmRUbyh0LmRvY3VtZW50RWxlbWVudCksdD0odnRbMF0uY29udGVudFdpbmRvd3x8dnRbMF0uY29udGVudERvY3VtZW50KS5kb2N1bWVudCx0LndyaXRlKCI8IWRvY3R5cGUgaHRtbD48aHRtbD48Ym9keT4iKSx0LmNsb3NlKCksbj1SdChlLHQpLHZ0LmRldGFjaCgpKSxrdFtlXT1uKSxufWZ1bmN0aW9uIFJ0KGUsdCl7dmFyIG49eCh0LmNyZWF0ZUVsZW1lbnQoZSkpLmFwcGVuZFRvKHQuYm9keSkscj14LmNzcyhuWzBdLCJkaXNwbGF5Iik7cmV0dXJuIG4ucmVtb3ZlKCkscn14LmVhY2goWyJoZWlnaHQiLCJ3aWR0aCJdLGZ1bmN0aW9uKGUsdCl7eC5jc3NIb29rc1t0XT17Z2V0OmZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gbj8wPT09ZS5vZmZzZXRXaWR0aCYmeHQudGVzdCh4LmNzcyhlLCJkaXNwbGF5IikpP3guc3dhcChlLE50LGZ1bmN0aW9uKCl7cmV0dXJuIEZ0KGUsdCxyKX0pOkZ0KGUsdCxyKTp1bmRlZmluZWR9LHNldDpmdW5jdGlvbihlLG4scil7dmFyIGk9ciYmTHQoZSk7cmV0dXJuIEh0KGUsbixyP090KGUsdCxyLHguc3VwcG9ydC5ib3hTaXppbmcmJiJib3JkZXItYm94Ij09PXguY3NzKGUsImJveFNpemluZyIsITEsaSksaSk6MCl9fX0pLHgoZnVuY3Rpb24oKXt4LnN1cHBvcnQucmVsaWFibGVNYXJnaW5SaWdodHx8KHguY3NzSG9va3MubWFyZ2luUmlnaHQ9e2dldDpmdW5jdGlvbihlLHQpe3JldHVybiB0P3guc3dhcChlLHtkaXNwbGF5OiJpbmxpbmUtYmxvY2sifSx5dCxbZSwibWFyZ2luUmlnaHQiXSk6dW5kZWZpbmVkfX0pLCF4LnN1cHBvcnQucGl4ZWxQb3NpdGlvbiYmeC5mbi5wb3NpdGlvbiYmeC5lYWNoKFsidG9wIiwibGVmdCJdLGZ1bmN0aW9uKGUsdCl7eC5jc3NIb29rc1t0XT17Z2V0OmZ1bmN0aW9uKGUsbil7cmV0dXJuIG4/KG49eXQoZSx0KSxUdC50ZXN0KG4pP3goZSkucG9zaXRpb24oKVt0XSsicHgiOm4pOnVuZGVmaW5lZH19fSl9KSx4LmV4cHImJnguZXhwci5maWx0ZXJzJiYoeC5leHByLmZpbHRlcnMuaGlkZGVuPWZ1bmN0aW9uKGUpe3JldHVybiAwPj1lLm9mZnNldFdpZHRoJiYwPj1lLm9mZnNldEhlaWdodH0seC5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihlKXtyZXR1cm4heC5leHByLmZpbHRlcnMuaGlkZGVuKGUpfSkseC5lYWNoKHttYXJnaW46IiIscGFkZGluZzoiIixib3JkZXI6IldpZHRoIn0sZnVuY3Rpb24oZSx0KXt4LmNzc0hvb2tzW2UrdF09e2V4cGFuZDpmdW5jdGlvbihuKXt2YXIgcj0wLGk9e30sbz0ic3RyaW5nIj09dHlwZW9mIG4/bi5zcGxpdCgiICIpOltuXTtmb3IoOzQ+cjtyKyspaVtlK1N0W3JdK3RdPW9bcl18fG9bci0yXXx8b1swXTtyZXR1cm4gaX19LGJ0LnRlc3QoZSl8fCh4LmNzc0hvb2tzW2UrdF0uc2V0PUh0KX0pO3ZhciBNdD0vJTIwL2csV3Q9L1xbXF0kLywkdD0vXHI/XG4vZyxCdD0vXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksSXQ9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO3guZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4geC5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlPXgucHJvcCh0aGlzLCJlbGVtZW50cyIpO3JldHVybiBlP3gubWFrZUFycmF5KGUpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgZT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIXgodGhpcykuaXMoIjpkaXNhYmxlZCIpJiZJdC50ZXN0KHRoaXMubm9kZU5hbWUpJiYhQnQudGVzdChlKSYmKHRoaXMuY2hlY2tlZHx8IWl0LnRlc3QoZSkpfSkubWFwKGZ1bmN0aW9uKGUsdCl7dmFyIG49eCh0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09bj9udWxsOnguaXNBcnJheShuKT94Lm1hcChuLGZ1bmN0aW9uKGUpe3JldHVybntuYW1lOnQubmFtZSx2YWx1ZTplLnJlcGxhY2UoJHQsIlxyXG4iKX19KTp7bmFtZTp0Lm5hbWUsdmFsdWU6bi5yZXBsYWNlKCR0LCJcclxuIil9fSkuZ2V0KCl9fSkseC5wYXJhbT1mdW5jdGlvbihlLHQpe3ZhciBuLHI9W10saT1mdW5jdGlvbihlLHQpe3Q9eC5pc0Z1bmN0aW9uKHQpP3QoKTpudWxsPT10PyIiOnQscltyLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGUpKyI9IitlbmNvZGVVUklDb21wb25lbnQodCl9O2lmKHQ9PT11bmRlZmluZWQmJih0PXguYWpheFNldHRpbmdzJiZ4LmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbCkseC5pc0FycmF5KGUpfHxlLmpxdWVyeSYmIXguaXNQbGFpbk9iamVjdChlKSl4LmVhY2goZSxmdW5jdGlvbigpe2kodGhpcy5uYW1lLHRoaXMudmFsdWUpfSk7ZWxzZSBmb3IobiBpbiBlKXp0KG4sZVtuXSx0LGkpO3JldHVybiByLmpvaW4oIiYiKS5yZXBsYWNlKE10LCIrIil9O2Z1bmN0aW9uIHp0KGUsdCxuLHIpe3ZhciBpO2lmKHguaXNBcnJheSh0KSl4LmVhY2godCxmdW5jdGlvbih0LGkpe258fFd0LnRlc3QoZSk/cihlLGkpOnp0KGUrIlsiKygib2JqZWN0Ij09dHlwZW9mIGk/dDoiIikrIl0iLGksbixyKX0pO2Vsc2UgaWYobnx8Im9iamVjdCIhPT14LnR5cGUodCkpcihlLHQpO2Vsc2UgZm9yKGkgaW4gdCl6dChlKyJbIitpKyJdIix0W2ldLG4scil9eC5lYWNoKCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yIGNvbnRleHRtZW51Ii5zcGxpdCgiICIpLGZ1bmN0aW9uKGUsdCl7eC5mblt0XT1mdW5jdGlvbihlLG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbih0LG51bGwsZSxuKTp0aGlzLnRyaWdnZXIodCl9fSkseC5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMubW91c2VlbnRlcihlKS5tb3VzZWxlYXZlKHR8fGUpfSxiaW5kOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5vbihlLG51bGwsdCxuKX0sdW5iaW5kOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMub2ZmKGUsbnVsbCx0KX0sZGVsZWdhdGU6ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIHRoaXMub24odCxlLG4scil9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihlLCIqKiIpOnRoaXMub2ZmKHQsZXx8IioqIixuKX19KTt2YXIgX3QsWHQsVXQ9eC5ub3coKSxZdD0vXD8vLFZ0PS8jLiokLyxHdD0vKFs/Jl0pXz1bXiZdKi8sSnQ9L14oLio/KTpbIFx0XSooW15cclxuXSopJC9nbSxRdD0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxLdD0vXig/OkdFVHxIRUFEKSQvLFp0PS9eXC9cLy8sZW49L14oW1x3ListXSs6KSg/OlwvXC8oW15cLz8jOl0qKSg/OjooXGQrKXwpfCkvLHRuPXguZm4ubG9hZCxubj17fSxybj17fSxvbj0iKi8iLmNvbmNhdCgiKiIpO3RyeXtYdD1pLmhyZWZ9Y2F0Y2goc24pe1h0PW8uY3JlYXRlRWxlbWVudCgiYSIpLFh0LmhyZWY9IiIsWHQ9WHQuaHJlZn1fdD1lbi5leGVjKFh0LnRvTG93ZXJDYXNlKCkpfHxbXTtmdW5jdGlvbiBhbihlKXtyZXR1cm4gZnVuY3Rpb24odCxuKXsic3RyaW5nIiE9dHlwZW9mIHQmJihuPXQsdD0iKiIpO3ZhciByLGk9MCxvPXQudG9Mb3dlckNhc2UoKS5tYXRjaCh3KXx8W107DQppZih4LmlzRnVuY3Rpb24obikpd2hpbGUocj1vW2krK10pIisiPT09clswXT8ocj1yLnNsaWNlKDEpfHwiKiIsKGVbcl09ZVtyXXx8W10pLnVuc2hpZnQobikpOihlW3JdPWVbcl18fFtdKS5wdXNoKG4pfX1mdW5jdGlvbiB1bihlLHQsbixyKXt2YXIgaT17fSxvPWU9PT1ybjtmdW5jdGlvbiBzKGEpe3ZhciB1O3JldHVybiBpW2FdPSEwLHguZWFjaChlW2FdfHxbXSxmdW5jdGlvbihlLGEpe3ZhciBsPWEodCxuLHIpO3JldHVybiJzdHJpbmciIT10eXBlb2YgbHx8b3x8aVtsXT9vPyEodT1sKTp1bmRlZmluZWQ6KHQuZGF0YVR5cGVzLnVuc2hpZnQobCkscyhsKSwhMSl9KSx1fXJldHVybiBzKHQuZGF0YVR5cGVzWzBdKXx8IWlbIioiXSYmcygiKiIpfWZ1bmN0aW9uIGxuKGUsdCl7dmFyIG4scixpPXguYWpheFNldHRpbmdzLmZsYXRPcHRpb25zfHx7fTtmb3IobiBpbiB0KXRbbl0hPT11bmRlZmluZWQmJigoaVtuXT9lOnJ8fChyPXt9KSlbbl09dFtuXSk7cmV0dXJuIHImJnguZXh0ZW5kKCEwLGUsciksZX14LmZuLmxvYWQ9ZnVuY3Rpb24oZSx0LG4pe2lmKCJzdHJpbmciIT10eXBlb2YgZSYmdG4pcmV0dXJuIHRuLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgcixpLG8scz10aGlzLGE9ZS5pbmRleE9mKCIgIik7cmV0dXJuIGE+PTAmJihyPWUuc2xpY2UoYSksZT1lLnNsaWNlKDAsYSkpLHguaXNGdW5jdGlvbih0KT8obj10LHQ9dW5kZWZpbmVkKTp0JiYib2JqZWN0Ij09dHlwZW9mIHQmJihpPSJQT1NUIikscy5sZW5ndGg+MCYmeC5hamF4KHt1cmw6ZSx0eXBlOmksZGF0YVR5cGU6Imh0bWwiLGRhdGE6dH0pLmRvbmUoZnVuY3Rpb24oZSl7bz1hcmd1bWVudHMscy5odG1sKHI/eCgiPGRpdj4iKS5hcHBlbmQoeC5wYXJzZUhUTUwoZSkpLmZpbmQocik6ZSl9KS5jb21wbGV0ZShuJiZmdW5jdGlvbihlLHQpe3MuZWFjaChuLG98fFtlLnJlc3BvbnNlVGV4dCx0LGVdKX0pLHRoaXN9LHguZWFjaChbImFqYXhTdGFydCIsImFqYXhTdG9wIiwiYWpheENvbXBsZXRlIiwiYWpheEVycm9yIiwiYWpheFN1Y2Nlc3MiLCJhamF4U2VuZCJdLGZ1bmN0aW9uKGUsdCl7eC5mblt0XT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5vbih0LGUpfX0pLHguZXh0ZW5kKHthY3RpdmU6MCxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fSxhamF4U2V0dGluZ3M6e3VybDpYdCx0eXBlOiJHRVQiLGlzTG9jYWw6UXQudGVzdChfdFsxXSksZ2xvYmFsOiEwLHByb2Nlc3NEYXRhOiEwLGFzeW5jOiEwLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLGFjY2VwdHM6eyIqIjpvbix0ZXh0OiJ0ZXh0L3BsYWluIixodG1sOiJ0ZXh0L2h0bWwiLHhtbDoiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsanNvbjoiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0In0sY29udGVudHM6e3htbDoveG1sLyxodG1sOi9odG1sLyxqc29uOi9qc29uL30scmVzcG9uc2VGaWVsZHM6e3htbDoicmVzcG9uc2VYTUwiLHRleHQ6InJlc3BvbnNlVGV4dCIsanNvbjoicmVzcG9uc2VKU09OIn0sY29udmVydGVyczp7IiogdGV4dCI6U3RyaW5nLCJ0ZXh0IGh0bWwiOiEwLCJ0ZXh0IGpzb24iOngucGFyc2VKU09OLCJ0ZXh0IHhtbCI6eC5wYXJzZVhNTH0sZmxhdE9wdGlvbnM6e3VybDohMCxjb250ZXh0OiEwfX0sYWpheFNldHVwOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/bG4obG4oZSx4LmFqYXhTZXR0aW5ncyksdCk6bG4oeC5hamF4U2V0dGluZ3MsZSl9LGFqYXhQcmVmaWx0ZXI6YW4obm4pLGFqYXhUcmFuc3BvcnQ6YW4ocm4pLGFqYXg6ZnVuY3Rpb24oZSx0KXsib2JqZWN0Ij09dHlwZW9mIGUmJih0PWUsZT11bmRlZmluZWQpLHQ9dHx8e307dmFyIG4scixpLG8scyxhLHUsbCxjPXguYWpheFNldHVwKHt9LHQpLGY9Yy5jb250ZXh0fHxjLHA9Yy5jb250ZXh0JiYoZi5ub2RlVHlwZXx8Zi5qcXVlcnkpP3goZik6eC5ldmVudCxoPXguRGVmZXJyZWQoKSxkPXguQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLGc9Yy5zdGF0dXNDb2RlfHx7fSxtPXt9LHk9e30sdj0wLGI9ImNhbmNlbGVkIixUPXtyZWFkeVN0YXRlOjAsZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoMj09PXYpe2lmKCFvKXtvPXt9O3doaWxlKHQ9SnQuZXhlYyhpKSlvW3RbMV0udG9Mb3dlckNhc2UoKV09dFsyXX10PW9bZS50b0xvd2VyQ2FzZSgpXX1yZXR1cm4gbnVsbD09dD9udWxsOnR9LGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe3JldHVybiAyPT09dj9pOm51bGx9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuIHZ8fChlPXlbbl09eVtuXXx8ZSxtW2VdPXQpLHRoaXN9LG92ZXJyaWRlTWltZVR5cGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHZ8fChjLm1pbWVUeXBlPWUpLHRoaXN9LHN0YXR1c0NvZGU6ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoZSlpZigyPnYpZm9yKHQgaW4gZSlnW3RdPVtnW3RdLGVbdF1dO2Vsc2UgVC5hbHdheXMoZVtULnN0YXR1c10pO3JldHVybiB0aGlzfSxhYm9ydDpmdW5jdGlvbihlKXt2YXIgdD1lfHxiO3JldHVybiBuJiZuLmFib3J0KHQpLGsoMCx0KSx0aGlzfX07aWYoaC5wcm9taXNlKFQpLmNvbXBsZXRlPWQuYWRkLFQuc3VjY2Vzcz1ULmRvbmUsVC5lcnJvcj1ULmZhaWwsYy51cmw9KChlfHxjLnVybHx8WHQpKyIiKS5yZXBsYWNlKFZ0LCIiKS5yZXBsYWNlKFp0LF90WzFdKyIvLyIpLGMudHlwZT10Lm1ldGhvZHx8dC50eXBlfHxjLm1ldGhvZHx8Yy50eXBlLGMuZGF0YVR5cGVzPXgudHJpbShjLmRhdGFUeXBlfHwiKiIpLnRvTG93ZXJDYXNlKCkubWF0Y2godyl8fFsiIl0sbnVsbD09Yy5jcm9zc0RvbWFpbiYmKGE9ZW4uZXhlYyhjLnVybC50b0xvd2VyQ2FzZSgpKSxjLmNyb3NzRG9tYWluPSEoIWF8fGFbMV09PT1fdFsxXSYmYVsyXT09PV90WzJdJiYoYVszXXx8KCJodHRwOiI9PT1hWzFdPyI4MCI6IjQ0MyIpKT09PShfdFszXXx8KCJodHRwOiI9PT1fdFsxXT8iODAiOiI0NDMiKSkpKSxjLmRhdGEmJmMucHJvY2Vzc0RhdGEmJiJzdHJpbmciIT10eXBlb2YgYy5kYXRhJiYoYy5kYXRhPXgucGFyYW0oYy5kYXRhLGMudHJhZGl0aW9uYWwpKSx1bihubixjLHQsVCksMj09PXYpcmV0dXJuIFQ7dT1jLmdsb2JhbCx1JiYwPT09eC5hY3RpdmUrKyYmeC5ldmVudC50cmlnZ2VyKCJhamF4U3RhcnQiKSxjLnR5cGU9Yy50eXBlLnRvVXBwZXJDYXNlKCksYy5oYXNDb250ZW50PSFLdC50ZXN0KGMudHlwZSkscj1jLnVybCxjLmhhc0NvbnRlbnR8fChjLmRhdGEmJihyPWMudXJsKz0oWXQudGVzdChyKT8iJiI6Ij8iKStjLmRhdGEsZGVsZXRlIGMuZGF0YSksYy5jYWNoZT09PSExJiYoYy51cmw9R3QudGVzdChyKT9yLnJlcGxhY2UoR3QsIiQxXz0iK1V0KyspOnIrKFl0LnRlc3Qocik/IiYiOiI/IikrIl89IitVdCsrKSksYy5pZk1vZGlmaWVkJiYoeC5sYXN0TW9kaWZpZWRbcl0mJlQuc2V0UmVxdWVzdEhlYWRlcigiSWYtTW9kaWZpZWQtU2luY2UiLHgubGFzdE1vZGlmaWVkW3JdKSx4LmV0YWdbcl0mJlQuc2V0UmVxdWVzdEhlYWRlcigiSWYtTm9uZS1NYXRjaCIseC5ldGFnW3JdKSksKGMuZGF0YSYmYy5oYXNDb250ZW50JiZjLmNvbnRlbnRUeXBlIT09ITF8fHQuY29udGVudFR5cGUpJiZULnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsYy5jb250ZW50VHlwZSksVC5zZXRSZXF1ZXN0SGVhZGVyKCJBY2NlcHQiLGMuZGF0YVR5cGVzWzBdJiZjLmFjY2VwdHNbYy5kYXRhVHlwZXNbMF1dP2MuYWNjZXB0c1tjLmRhdGFUeXBlc1swXV0rKCIqIiE9PWMuZGF0YVR5cGVzWzBdPyIsICIrb24rIjsgcT0wLjAxIjoiIik6Yy5hY2NlcHRzWyIqIl0pO2ZvcihsIGluIGMuaGVhZGVycylULnNldFJlcXVlc3RIZWFkZXIobCxjLmhlYWRlcnNbbF0pO2lmKGMuYmVmb3JlU2VuZCYmKGMuYmVmb3JlU2VuZC5jYWxsKGYsVCxjKT09PSExfHwyPT09dikpcmV0dXJuIFQuYWJvcnQoKTtiPSJhYm9ydCI7Zm9yKGwgaW57c3VjY2VzczoxLGVycm9yOjEsY29tcGxldGU6MX0pVFtsXShjW2xdKTtpZihuPXVuKHJuLGMsdCxUKSl7VC5yZWFkeVN0YXRlPTEsdSYmcC50cmlnZ2VyKCJhamF4U2VuZCIsW1QsY10pLGMuYXN5bmMmJmMudGltZW91dD4wJiYocz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7VC5hYm9ydCgidGltZW91dCIpfSxjLnRpbWVvdXQpKTt0cnl7dj0xLG4uc2VuZChtLGspfWNhdGNoKEMpe2lmKCEoMj52KSl0aHJvdyBDO2soLTEsQyl9fWVsc2UgaygtMSwiTm8gVHJhbnNwb3J0Iik7ZnVuY3Rpb24gayhlLHQsbyxhKXt2YXIgbCxtLHksYix3LEM9dDsyIT09diYmKHY9MixzJiZjbGVhclRpbWVvdXQocyksbj11bmRlZmluZWQsaT1hfHwiIixULnJlYWR5U3RhdGU9ZT4wPzQ6MCxsPWU+PTIwMCYmMzAwPmV8fDMwND09PWUsbyYmKGI9Y24oYyxULG8pKSxiPWZuKGMsYixULGwpLGw/KGMuaWZNb2RpZmllZCYmKHc9VC5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpLHcmJih4Lmxhc3RNb2RpZmllZFtyXT13KSx3PVQuZ2V0UmVzcG9uc2VIZWFkZXIoImV0YWciKSx3JiYoeC5ldGFnW3JdPXcpKSwyMDQ9PT1lP0M9Im5vY29udGVudCI6MzA0PT09ZT9DPSJub3Rtb2RpZmllZCI6KEM9Yi5zdGF0ZSxtPWIuZGF0YSx5PWIuZXJyb3IsbD0heSkpOih5PUMsKGV8fCFDKSYmKEM9ImVycm9yIiwwPmUmJihlPTApKSksVC5zdGF0dXM9ZSxULnN0YXR1c1RleHQ9KHR8fEMpKyIiLGw/aC5yZXNvbHZlV2l0aChmLFttLEMsVF0pOmgucmVqZWN0V2l0aChmLFtULEMseV0pLFQuc3RhdHVzQ29kZShnKSxnPXVuZGVmaW5lZCx1JiZwLnRyaWdnZXIobD8iYWpheFN1Y2Nlc3MiOiJhamF4RXJyb3IiLFtULGMsbD9tOnldKSxkLmZpcmVXaXRoKGYsW1QsQ10pLHUmJihwLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW1QsY10pLC0teC5hY3RpdmV8fHguZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSkpfXJldHVybiBUfSxnZXRKU09OOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4geC5nZXQoZSx0LG4sImpzb24iKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHguZ2V0KGUsdW5kZWZpbmVkLHQsInNjcmlwdCIpfX0pLHguZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihlLHQpe3hbdF09ZnVuY3Rpb24oZSxuLHIsaSl7cmV0dXJuIHguaXNGdW5jdGlvbihuKSYmKGk9aXx8cixyPW4sbj11bmRlZmluZWQpLHguYWpheCh7dXJsOmUsdHlwZTp0LGRhdGFUeXBlOmksZGF0YTpuLHN1Y2Nlc3M6cn0pfX0pO2Z1bmN0aW9uIGNuKGUsdCxuKXt2YXIgcixpLG8scyxhPWUuY29udGVudHMsdT1lLmRhdGFUeXBlczt3aGlsZSgiKiI9PT11WzBdKXUuc2hpZnQoKSxyPT09dW5kZWZpbmVkJiYocj1lLm1pbWVUeXBlfHx0LmdldFJlc3BvbnNlSGVhZGVyKCJDb250ZW50LVR5cGUiKSk7aWYocilmb3IoaSBpbiBhKWlmKGFbaV0mJmFbaV0udGVzdChyKSl7dS51bnNoaWZ0KGkpO2JyZWFrfWlmKHVbMF1pbiBuKW89dVswXTtlbHNle2ZvcihpIGluIG4pe2lmKCF1WzBdfHxlLmNvbnZlcnRlcnNbaSsiICIrdVswXV0pe289aTticmVha31zfHwocz1pKX1vPW98fHN9cmV0dXJuIG8/KG8hPT11WzBdJiZ1LnVuc2hpZnQobyksbltvXSk6dW5kZWZpbmVkfWZ1bmN0aW9uIGZuKGUsdCxuLHIpe3ZhciBpLG8scyxhLHUsbD17fSxjPWUuZGF0YVR5cGVzLnNsaWNlKCk7aWYoY1sxXSlmb3IocyBpbiBlLmNvbnZlcnRlcnMpbFtzLnRvTG93ZXJDYXNlKCldPWUuY29udmVydGVyc1tzXTtvPWMuc2hpZnQoKTt3aGlsZShvKWlmKGUucmVzcG9uc2VGaWVsZHNbb10mJihuW2UucmVzcG9uc2VGaWVsZHNbb11dPXQpLCF1JiZyJiZlLmRhdGFGaWx0ZXImJih0PWUuZGF0YUZpbHRlcih0LGUuZGF0YVR5cGUpKSx1PW8sbz1jLnNoaWZ0KCkpaWYoIioiPT09bylvPXU7ZWxzZSBpZigiKiIhPT11JiZ1IT09byl7aWYocz1sW3UrIiAiK29dfHxsWyIqICIrb10sIXMpZm9yKGkgaW4gbClpZihhPWkuc3BsaXQoIiAiKSxhWzFdPT09byYmKHM9bFt1KyIgIithWzBdXXx8bFsiKiAiK2FbMF1dKSl7cz09PSEwP3M9bFtpXTpsW2ldIT09ITAmJihvPWFbMF0sYy51bnNoaWZ0KGFbMV0pKTticmVha31pZihzIT09ITApaWYocyYmZVsidGhyb3dzIl0pdD1zKHQpO2Vsc2UgdHJ5e3Q9cyh0KX1jYXRjaChmKXtyZXR1cm57c3RhdGU6InBhcnNlcmVycm9yIixlcnJvcjpzP2Y6Ik5vIGNvbnZlcnNpb24gZnJvbSAiK3UrIiB0byAiK299fX1yZXR1cm57c3RhdGU6InN1Y2Nlc3MiLGRhdGE6dH19eC5hamF4U2V0dXAoe2FjY2VwdHM6e3NjcmlwdDoidGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHQifSxjb250ZW50czp7c2NyaXB0Oi8oPzpqYXZhfGVjbWEpc2NyaXB0L30sY29udmVydGVyczp7InRleHQgc2NyaXB0IjpmdW5jdGlvbihlKXtyZXR1cm4geC5nbG9iYWxFdmFsKGUpLGV9fX0pLHguYWpheFByZWZpbHRlcigic2NyaXB0IixmdW5jdGlvbihlKXtlLmNhY2hlPT09dW5kZWZpbmVkJiYoZS5jYWNoZT0hMSksZS5jcm9zc0RvbWFpbiYmKGUudHlwZT0iR0VUIil9KSx4LmFqYXhUcmFuc3BvcnQoInNjcmlwdCIsZnVuY3Rpb24oZSl7aWYoZS5jcm9zc0RvbWFpbil7dmFyIHQsbjtyZXR1cm57c2VuZDpmdW5jdGlvbihyLGkpe3Q9eCgiPHNjcmlwdD4iKS5wcm9wKHthc3luYzohMCxjaGFyc2V0OmUuc2NyaXB0Q2hhcnNldCxzcmM6ZS51cmx9KS5vbigibG9hZCBlcnJvciIsbj1mdW5jdGlvbihlKXt0LnJlbW92ZSgpLG49bnVsbCxlJiZpKCJlcnJvciI9PT1lLnR5cGU/NDA0OjIwMCxlLnR5cGUpfSksby5oZWFkLmFwcGVuZENoaWxkKHRbMF0pfSxhYm9ydDpmdW5jdGlvbigpe24mJm4oKX19fX0pO3ZhciBwbj1bXSxobj0vKD0pXD8oPz0mfCQpfFw/XD8vO3guYWpheFNldHVwKHtqc29ucDoiY2FsbGJhY2siLGpzb25wQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgZT1wbi5wb3AoKXx8eC5leHBhbmRvKyJfIitVdCsrO3JldHVybiB0aGlzW2VdPSEwLGV9fSkseC5hamF4UHJlZmlsdGVyKCJqc29uIGpzb25wIixmdW5jdGlvbih0LG4scil7dmFyIGksbyxzLGE9dC5qc29ucCE9PSExJiYoaG4udGVzdCh0LnVybCk/InVybCI6InN0cmluZyI9PXR5cGVvZiB0LmRhdGEmJiEodC5jb250ZW50VHlwZXx8IiIpLmluZGV4T2YoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpJiZobi50ZXN0KHQuZGF0YSkmJiJkYXRhIik7cmV0dXJuIGF8fCJqc29ucCI9PT10LmRhdGFUeXBlc1swXT8oaT10Lmpzb25wQ2FsbGJhY2s9eC5pc0Z1bmN0aW9uKHQuanNvbnBDYWxsYmFjayk/dC5qc29ucENhbGxiYWNrKCk6dC5qc29ucENhbGxiYWNrLGE/dFthXT10W2FdLnJlcGxhY2UoaG4sIiQxIitpKTp0Lmpzb25wIT09ITEmJih0LnVybCs9KFl0LnRlc3QodC51cmwpPyImIjoiPyIpK3QuanNvbnArIj0iK2kpLHQuY29udmVydGVyc1sic2NyaXB0IGpzb24iXT1mdW5jdGlvbigpe3JldHVybiBzfHx4LmVycm9yKGkrIiB3YXMgbm90IGNhbGxlZCIpLHNbMF19LHQuZGF0YVR5cGVzWzBdPSJqc29uIixvPWVbaV0sZVtpXT1mdW5jdGlvbigpe3M9YXJndW1lbnRzfSxyLmFsd2F5cyhmdW5jdGlvbigpe2VbaV09byx0W2ldJiYodC5qc29ucENhbGxiYWNrPW4uanNvbnBDYWxsYmFjayxwbi5wdXNoKGkpKSxzJiZ4LmlzRnVuY3Rpb24obykmJm8oc1swXSkscz1vPXVuZGVmaW5lZH0pLCJzY3JpcHQiKTp1bmRlZmluZWR9KSx4LmFqYXhTZXR0aW5ncy54aHI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdH1jYXRjaChlKXt9fTt2YXIgZG49eC5hamF4U2V0dGluZ3MueGhyKCksZ249ezA6MjAwLDEyMjM6MjA0fSxtbj0wLHluPXt9O2UuQWN0aXZlWE9iamVjdCYmeChlKS5vbigidW5sb2FkIixmdW5jdGlvbigpe2Zvcih2YXIgZSBpbiB5bil5bltlXSgpO3luPXVuZGVmaW5lZH0pLHguc3VwcG9ydC5jb3JzPSEhZG4mJiJ3aXRoQ3JlZGVudGlhbHMiaW4gZG4seC5zdXBwb3J0LmFqYXg9ZG49ISFkbix4LmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHguc3VwcG9ydC5jb3JzfHxkbiYmIWUuY3Jvc3NEb21haW4/e3NlbmQ6ZnVuY3Rpb24obixyKXt2YXIgaSxvLHM9ZS54aHIoKTtpZihzLm9wZW4oZS50eXBlLGUudXJsLGUuYXN5bmMsZS51c2VybmFtZSxlLnBhc3N3b3JkKSxlLnhockZpZWxkcylmb3IoaSBpbiBlLnhockZpZWxkcylzW2ldPWUueGhyRmllbGRzW2ldO2UubWltZVR5cGUmJnMub3ZlcnJpZGVNaW1lVHlwZSYmcy5vdmVycmlkZU1pbWVUeXBlKGUubWltZVR5cGUpLGUuY3Jvc3NEb21haW58fG5bIlgtUmVxdWVzdGVkLVdpdGgiXXx8KG5bIlgtUmVxdWVzdGVkLVdpdGgiXT0iWE1MSHR0cFJlcXVlc3QiKTtmb3IoaSBpbiBuKXMuc2V0UmVxdWVzdEhlYWRlcihpLG5baV0pO3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dCYmKGRlbGV0ZSB5bltvXSx0PXMub25sb2FkPXMub25lcnJvcj1udWxsLCJhYm9ydCI9PT1lP3MuYWJvcnQoKToiZXJyb3IiPT09ZT9yKHMuc3RhdHVzfHw0MDQscy5zdGF0dXNUZXh0KTpyKGduW3Muc3RhdHVzXXx8cy5zdGF0dXMscy5zdGF0dXNUZXh0LCJzdHJpbmciPT10eXBlb2Ygcy5yZXNwb25zZVRleHQ/e3RleHQ6cy5yZXNwb25zZVRleHR9OnVuZGVmaW5lZCxzLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSl9fSxzLm9ubG9hZD10KCkscy5vbmVycm9yPXQoImVycm9yIiksdD15bltvPW1uKytdPXQoImFib3J0Iikscy5zZW5kKGUuaGFzQ29udGVudCYmZS5kYXRhfHxudWxsKX0sYWJvcnQ6ZnVuY3Rpb24oKXt0JiZ0KCl9fTp1bmRlZmluZWR9KTt2YXIgdm4seG4sYm49L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLHduPVJlZ0V4cCgiXig/OihbKy1dKT18KSgiK2IrIikoW2EteiVdKikkIiwiaSIpLFRuPS9xdWV1ZUhvb2tzJC8sQ249W0RuXSxrbj17IioiOltmdW5jdGlvbihlLHQpe3ZhciBuLHIsaT10aGlzLmNyZWF0ZVR3ZWVuKGUsdCksbz13bi5leGVjKHQpLHM9aS5jdXIoKSxhPStzfHwwLHU9MSxsPTIwO2lmKG8pe2lmKG49K29bMl0scj1vWzNdfHwoeC5jc3NOdW1iZXJbZV0/IiI6InB4IiksInB4IiE9PXImJmEpe2E9eC5jc3MoaS5lbGVtLGUsITApfHxufHwxO2RvIHU9dXx8Ii41IixhLz11LHguc3R5bGUoaS5lbGVtLGUsYStyKTt3aGlsZSh1IT09KHU9aS5jdXIoKS9zKSYmMSE9PXUmJi0tbCl9aS51bml0PXIsaS5zdGFydD1hLGkuZW5kPW9bMV0/YSsob1sxXSsxKSpuOm59cmV0dXJuIGl9XX07ZnVuY3Rpb24gTm4oKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe3ZuPXVuZGVmaW5lZH0pLHZuPXgubm93KCl9ZnVuY3Rpb24gRW4oZSx0KXt4LmVhY2godCxmdW5jdGlvbih0LG4pe3ZhciByPShrblt0XXx8W10pLmNvbmNhdChrblsiKiJdKSxpPTAsbz1yLmxlbmd0aDtmb3IoO28+aTtpKyspaWYocltpXS5jYWxsKGUsdCxuKSlyZXR1cm59KX1mdW5jdGlvbiBTbihlLHQsbil7dmFyIHIsaSxvPTAscz1Dbi5sZW5ndGgsYT14LkRlZmVycmVkKCkuYWx3YXlzKGZ1bmN0aW9uKCl7ZGVsZXRlIHUuZWxlbX0pLHU9ZnVuY3Rpb24oKXtpZihpKXJldHVybiExO3ZhciB0PXZufHxObigpLG49TWF0aC5tYXgoMCxsLnN0YXJ0VGltZStsLmR1cmF0aW9uLXQpLHI9bi9sLmR1cmF0aW9ufHwwLG89MS1yLHM9MCx1PWwudHdlZW5zLmxlbmd0aDtmb3IoO3U+cztzKyspbC50d2VlbnNbc10ucnVuKG8pO3JldHVybiBhLm5vdGlmeVdpdGgoZSxbbCxvLG5dKSwxPm8mJnU/bjooYS5yZXNvbHZlV2l0aChlLFtsXSksITEpfSxsPWEucHJvbWlzZSh7ZWxlbTplLHByb3BzOnguZXh0ZW5kKHt9LHQpLG9wdHM6eC5leHRlbmQoITAse3NwZWNpYWxFYXNpbmc6e319LG4pLG9yaWdpbmFsUHJvcGVydGllczp0LG9yaWdpbmFsT3B0aW9uczpuLHN0YXJ0VGltZTp2bnx8Tm4oKSxkdXJhdGlvbjpuLmR1cmF0aW9uLHR3ZWVuczpbXSxjcmVhdGVUd2VlbjpmdW5jdGlvbih0LG4pe3ZhciByPXguVHdlZW4oZSxsLm9wdHMsdCxuLGwub3B0cy5zcGVjaWFsRWFzaW5nW3RdfHxsLm9wdHMuZWFzaW5nKTtyZXR1cm4gbC50d2VlbnMucHVzaChyKSxyfSxzdG9wOmZ1bmN0aW9uKHQpe3ZhciBuPTAscj10P2wudHdlZW5zLmxlbmd0aDowO2lmKGkpcmV0dXJuIHRoaXM7Zm9yKGk9ITA7cj5uO24rKylsLnR3ZWVuc1tuXS5ydW4oMSk7cmV0dXJuIHQ/YS5yZXNvbHZlV2l0aChlLFtsLHRdKTphLnJlamVjdFdpdGgoZSxbbCx0XSksdGhpc319KSxjPWwucHJvcHM7Zm9yKGpuKGMsbC5vcHRzLnNwZWNpYWxFYXNpbmcpO3M+bztvKyspaWYocj1DbltvXS5jYWxsKGwsZSxjLGwub3B0cykpcmV0dXJuIHI7cmV0dXJuIEVuKGwsYykseC5pc0Z1bmN0aW9uKGwub3B0cy5zdGFydCkmJmwub3B0cy5zdGFydC5jYWxsKGUsbCkseC5meC50aW1lcih4LmV4dGVuZCh1LHtlbGVtOmUsYW5pbTpsLHF1ZXVlOmwub3B0cy5xdWV1ZX0pKSxsLnByb2dyZXNzKGwub3B0cy5wcm9ncmVzcykuZG9uZShsLm9wdHMuZG9uZSxsLm9wdHMuY29tcGxldGUpLmZhaWwobC5vcHRzLmZhaWwpLmFsd2F5cyhsLm9wdHMuYWx3YXlzKX1mdW5jdGlvbiBqbihlLHQpe3ZhciBuLHIsaSxvLHM7Zm9yKG4gaW4gZSlpZihyPXguY2FtZWxDYXNlKG4pLGk9dFtyXSxvPWVbbl0seC5pc0FycmF5KG8pJiYoaT1vWzFdLG89ZVtuXT1vWzBdKSxuIT09ciYmKGVbcl09byxkZWxldGUgZVtuXSkscz14LmNzc0hvb2tzW3JdLHMmJiJleHBhbmQiaW4gcyl7bz1zLmV4cGFuZChvKSxkZWxldGUgZVtyXTtmb3IobiBpbiBvKW4gaW4gZXx8KGVbbl09b1tuXSx0W25dPWkpfWVsc2UgdFtyXT1pfXguQW5pbWF0aW9uPXguZXh0ZW5kKFNuLHt0d2VlbmVyOmZ1bmN0aW9uKGUsdCl7eC5pc0Z1bmN0aW9uKGUpPyh0PWUsZT1bIioiXSk6ZT1lLnNwbGl0KCIgIik7dmFyIG4scj0wLGk9ZS5sZW5ndGg7Zm9yKDtpPnI7cisrKW49ZVtyXSxrbltuXT1rbltuXXx8W10sa25bbl0udW5zaGlmdCh0KX0scHJlZmlsdGVyOmZ1bmN0aW9uKGUsdCl7dD9Dbi51bnNoaWZ0KGUpOkNuLnB1c2goZSl9fSk7ZnVuY3Rpb24gRG4oZSx0LG4pe3ZhciByLGksbyxzLGEsdSxsLGMsZixwPXRoaXMsaD1lLnN0eWxlLGQ9e30sZz1bXSxtPWUubm9kZVR5cGUmJkF0KGUpO24ucXVldWV8fChjPXguX3F1ZXVlSG9va3MoZSwiZngiKSxudWxsPT1jLnVucXVldWVkJiYoYy51bnF1ZXVlZD0wLGY9Yy5lbXB0eS5maXJlLGMuZW1wdHkuZmlyZT1mdW5jdGlvbigpe2MudW5xdWV1ZWR8fGYoKX0pLGMudW5xdWV1ZWQrKyxwLmFsd2F5cyhmdW5jdGlvbigpe3AuYWx3YXlzKGZ1bmN0aW9uKCl7Yy51bnF1ZXVlZC0tLHgucXVldWUoZSwiZngiKS5sZW5ndGh8fGMuZW1wdHkuZmlyZSgpfSl9KSksMT09PWUubm9kZVR5cGUmJigiaGVpZ2h0ImluIHR8fCJ3aWR0aCJpbiB0KSYmKG4ub3ZlcmZsb3c9W2gub3ZlcmZsb3csaC5vdmVyZmxvd1gsaC5vdmVyZmxvd1ldLCJpbmxpbmUiPT09eC5jc3MoZSwiZGlzcGxheSIpJiYibm9uZSI9PT14LmNzcyhlLCJmbG9hdCIpJiYoaC5kaXNwbGF5PSJpbmxpbmUtYmxvY2siKSksbi5vdmVyZmxvdyYmKGgub3ZlcmZsb3c9ImhpZGRlbiIscC5hbHdheXMoZnVuY3Rpb24oKXtoLm92ZXJmbG93PW4ub3ZlcmZsb3dbMF0saC5vdmVyZmxvd1g9bi5vdmVyZmxvd1sxXSxoLm92ZXJmbG93WT1uLm92ZXJmbG93WzJdfSkpLGE9cS5nZXQoZSwiZnhzaG93Iik7Zm9yKHIgaW4gdClpZihvPXRbcl0sYm4uZXhlYyhvKSl7aWYoZGVsZXRlIHRbcl0sdT11fHwidG9nZ2xlIj09PW8sbz09PShtPyJoaWRlIjoic2hvdyIpKXtpZigic2hvdyIhPT1vfHxhPT09dW5kZWZpbmVkfHxhW3JdPT09dW5kZWZpbmVkKWNvbnRpbnVlO209ITB9Zy5wdXNoKHIpfWlmKHM9Zy5sZW5ndGgpe2E9cS5nZXQoZSwiZnhzaG93Iil8fHEuYWNjZXNzKGUsImZ4c2hvdyIse30pLCJoaWRkZW4iaW4gYSYmKG09YS5oaWRkZW4pLHUmJihhLmhpZGRlbj0hbSksbT94KGUpLnNob3coKTpwLmRvbmUoZnVuY3Rpb24oKXt4KGUpLmhpZGUoKX0pLHAuZG9uZShmdW5jdGlvbigpe3ZhciB0O3EucmVtb3ZlKGUsImZ4c2hvdyIpO2Zvcih0IGluIGQpeC5zdHlsZShlLHQsZFt0XSl9KTtmb3Iocj0wO3M+cjtyKyspaT1nW3JdLGw9cC5jcmVhdGVUd2VlbihpLG0/YVtpXTowKSxkW2ldPWFbaV18fHguc3R5bGUoZSxpKSxpIGluIGF8fChhW2ldPWwuc3RhcnQsbSYmKGwuZW5kPWwuc3RhcnQsbC5zdGFydD0id2lkdGgiPT09aXx8ImhlaWdodCI9PT1pPzE6MCkpfX1mdW5jdGlvbiBBbihlLHQsbixyLGkpe3JldHVybiBuZXcgQW4ucHJvdG90eXBlLmluaXQoZSx0LG4scixpKX14LlR3ZWVuPUFuLEFuLnByb3RvdHlwZT17Y29uc3RydWN0b3I6QW4saW5pdDpmdW5jdGlvbihlLHQsbixyLGksbyl7dGhpcy5lbGVtPWUsdGhpcy5wcm9wPW4sdGhpcy5lYXNpbmc9aXx8InN3aW5nIix0aGlzLm9wdGlvbnM9dCx0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9cix0aGlzLnVuaXQ9b3x8KHguY3NzTnVtYmVyW25dPyIiOiJweCIpfSxjdXI6ZnVuY3Rpb24oKXt2YXIgZT1Bbi5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gZSYmZS5nZXQ/ZS5nZXQodGhpcyk6QW4ucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGUpe3ZhciB0LG49QW4ucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIHRoaXMucG9zPXQ9dGhpcy5vcHRpb25zLmR1cmF0aW9uP3guZWFzaW5nW3RoaXMuZWFzaW5nXShlLHRoaXMub3B0aW9ucy5kdXJhdGlvbiplLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOmUsdGhpcy5ub3c9KHRoaXMuZW5kLXRoaXMuc3RhcnQpKnQrdGhpcy5zdGFydCx0aGlzLm9wdGlvbnMuc3RlcCYmdGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyksbiYmbi5zZXQ/bi5zZXQodGhpcyk6QW4ucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKSx0aGlzfX0sQW4ucHJvdG90eXBlLmluaXQucHJvdG90eXBlPUFuLnByb3RvdHlwZSxBbi5wcm9wSG9va3M9e19kZWZhdWx0OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIG51bGw9PWUuZWxlbVtlLnByb3BdfHxlLmVsZW0uc3R5bGUmJm51bGwhPWUuZWxlbS5zdHlsZVtlLnByb3BdPyh0PXguY3NzKGUuZWxlbSxlLnByb3AsIiIpLHQmJiJhdXRvIiE9PXQ/dDowKTplLmVsZW1bZS5wcm9wXX0sc2V0OmZ1bmN0aW9uKGUpe3guZnguc3RlcFtlLnByb3BdP3guZnguc3RlcFtlLnByb3BdKGUpOmUuZWxlbS5zdHlsZSYmKG51bGwhPWUuZWxlbS5zdHlsZVt4LmNzc1Byb3BzW2UucHJvcF1dfHx4LmNzc0hvb2tzW2UucHJvcF0pP3guc3R5bGUoZS5lbGVtLGUucHJvcCxlLm5vdytlLnVuaXQpOmUuZWxlbVtlLnByb3BdPWUubm93fX19LEFuLnByb3BIb29rcy5zY3JvbGxUb3A9QW4ucHJvcEhvb2tzLnNjcm9sbExlZnQ9e3NldDpmdW5jdGlvbihlKXtlLmVsZW0ubm9kZVR5cGUmJmUuZWxlbS5wYXJlbnROb2RlJiYoZS5lbGVtW2UucHJvcF09ZS5ub3cpfX0seC5lYWNoKFsidG9nZ2xlIiwic2hvdyIsImhpZGUiXSxmdW5jdGlvbihlLHQpe3ZhciBuPXguZm5bdF07eC5mblt0XT1mdW5jdGlvbihlLHIsaSl7cmV0dXJuIG51bGw9PWV8fCJib29sZWFuIj09dHlwZW9mIGU/bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dGhpcy5hbmltYXRlKExuKHQsITApLGUscixpKX19KSx4LmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiB0aGlzLmZpbHRlcihBdCkuY3NzKCJvcGFjaXR5IiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTp0fSxlLG4scil9LGFuaW1hdGU6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGk9eC5pc0VtcHR5T2JqZWN0KGUpLG89eC5zcGVlZCh0LG4scikscz1mdW5jdGlvbigpe3ZhciB0PVNuKHRoaXMseC5leHRlbmQoe30sZSksbyk7cy5maW5pc2g9ZnVuY3Rpb24oKXt0LnN0b3AoITApfSwoaXx8cS5nZXQodGhpcywiZmluaXNoIikpJiZ0LnN0b3AoITApfTtyZXR1cm4gcy5maW5pc2g9cyxpfHxvLnF1ZXVlPT09ITE/dGhpcy5lYWNoKHMpOnRoaXMucXVldWUoby5xdWV1ZSxzKX0sc3RvcDpmdW5jdGlvbihlLHQsbil7dmFyIHI9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdG9wO2RlbGV0ZSBlLnN0b3AsdChuKX07cmV0dXJuInN0cmluZyIhPXR5cGVvZiBlJiYobj10LHQ9ZSxlPXVuZGVmaW5lZCksdCYmZSE9PSExJiZ0aGlzLnF1ZXVlKGV8fCJmeCIsW10pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PSEwLGk9bnVsbCE9ZSYmZSsicXVldWVIb29rcyIsbz14LnRpbWVycyxzPXEuZ2V0KHRoaXMpO2lmKGkpc1tpXSYmc1tpXS5zdG9wJiZyKHNbaV0pO2Vsc2UgZm9yKGkgaW4gcylzW2ldJiZzW2ldLnN0b3AmJlRuLnRlc3QoaSkmJnIoc1tpXSk7Zm9yKGk9by5sZW5ndGg7aS0tOylvW2ldLmVsZW0hPT10aGlzfHxudWxsIT1lJiZvW2ldLnF1ZXVlIT09ZXx8KG9baV0uYW5pbS5zdG9wKG4pLHQ9ITEsby5zcGxpY2UoaSwxKSk7KHR8fCFuKSYmeC5kZXF1ZXVlKHRoaXMsZSl9KX0sZmluaXNoOmZ1bmN0aW9uKGUpe3JldHVybiBlIT09ITEmJihlPWV8fCJmeCIpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0LG49cS5nZXQodGhpcykscj1uW2UrInF1ZXVlIl0saT1uW2UrInF1ZXVlSG9va3MiXSxvPXgudGltZXJzLHM9cj9yLmxlbmd0aDowO2ZvcihuLmZpbmlzaD0hMCx4LnF1ZXVlKHRoaXMsZSxbXSksaSYmaS5jdXImJmkuY3VyLmZpbmlzaCYmaS5jdXIuZmluaXNoLmNhbGwodGhpcyksdD1vLmxlbmd0aDt0LS07KW9bdF0uZWxlbT09PXRoaXMmJm9bdF0ucXVldWU9PT1lJiYob1t0XS5hbmltLnN0b3AoITApLG8uc3BsaWNlKHQsMSkpO2Zvcih0PTA7cz50O3QrKylyW3RdJiZyW3RdLmZpbmlzaCYmclt0XS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgbi5maW5pc2h9KX19KTtmdW5jdGlvbiBMbihlLHQpe3ZhciBuLHI9e2hlaWdodDplfSxpPTA7Zm9yKHQ9dD8xOjA7ND5pO2krPTItdCluPVN0W2ldLHJbIm1hcmdpbiIrbl09clsicGFkZGluZyIrbl09ZTtyZXR1cm4gdCYmKHIub3BhY2l0eT1yLndpZHRoPWUpLHJ9eC5lYWNoKHtzbGlkZURvd246TG4oInNob3ciKSxzbGlkZVVwOkxuKCJoaWRlIiksc2xpZGVUb2dnbGU6TG4oInRvZ2dsZSIpLGZhZGVJbjp7b3BhY2l0eToic2hvdyJ9LGZhZGVPdXQ6e29wYWNpdHk6ImhpZGUifSxmYWRlVG9nZ2xlOntvcGFjaXR5OiJ0b2dnbGUifX0sZnVuY3Rpb24oZSx0KXt4LmZuW2VdPWZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gdGhpcy5hbmltYXRlKHQsZSxuLHIpfX0pLHguc3BlZWQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUmJiJvYmplY3QiPT10eXBlb2YgZT94LmV4dGVuZCh7fSxlKTp7Y29tcGxldGU6bnx8IW4mJnR8fHguaXNGdW5jdGlvbihlKSYmZSxkdXJhdGlvbjplLGVhc2luZzpuJiZ0fHx0JiYheC5pc0Z1bmN0aW9uKHQpJiZ0fTtyZXR1cm4gci5kdXJhdGlvbj14LmZ4Lm9mZj8wOiJudW1iZXIiPT10eXBlb2Ygci5kdXJhdGlvbj9yLmR1cmF0aW9uOnIuZHVyYXRpb24gaW4geC5meC5zcGVlZHM/eC5meC5zcGVlZHNbci5kdXJhdGlvbl06eC5meC5zcGVlZHMuX2RlZmF1bHQsKG51bGw9PXIucXVldWV8fHIucXVldWU9PT0hMCkmJihyLnF1ZXVlPSJmeCIpLHIub2xkPXIuY29tcGxldGUsci5jb21wbGV0ZT1mdW5jdGlvbigpe3guaXNGdW5jdGlvbihyLm9sZCkmJnIub2xkLmNhbGwodGhpcyksci5xdWV1ZSYmeC5kZXF1ZXVlKHRoaXMsci5xdWV1ZSl9LHJ9LHguZWFzaW5nPXtsaW5lYXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LHN3aW5nOmZ1bmN0aW9uKGUpe3JldHVybi41LU1hdGguY29zKGUqTWF0aC5QSSkvMn19LHgudGltZXJzPVtdLHguZng9QW4ucHJvdG90eXBlLmluaXQseC5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIGUsdD14LnRpbWVycyxuPTA7Zm9yKHZuPXgubm93KCk7dC5sZW5ndGg+bjtuKyspZT10W25dLGUoKXx8dFtuXSE9PWV8fHQuc3BsaWNlKG4tLSwxKTt0Lmxlbmd0aHx8eC5meC5zdG9wKCksdm49dW5kZWZpbmVkfSx4LmZ4LnRpbWVyPWZ1bmN0aW9uKGUpe2UoKSYmeC50aW1lcnMucHVzaChlKSYmeC5meC5zdGFydCgpfSx4LmZ4LmludGVydmFsPTEzLHguZnguc3RhcnQ9ZnVuY3Rpb24oKXt4bnx8KHhuPXNldEludGVydmFsKHguZngudGljayx4LmZ4LmludGVydmFsKSl9LHguZnguc3RvcD1mdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwoeG4pLHhuPW51bGx9LHguZnguc3BlZWRzPXtzbG93OjYwMCxmYXN0OjIwMCxfZGVmYXVsdDo0MDB9LHguZnguc3RlcD17fSx4LmV4cHImJnguZXhwci5maWx0ZXJzJiYoeC5leHByLmZpbHRlcnMuYW5pbWF0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHguZ3JlcCh4LnRpbWVycyxmdW5jdGlvbih0KXtyZXR1cm4gZT09PXQuZWxlbX0pLmxlbmd0aH0pLHguZm4ub2Zmc2V0PWZ1bmN0aW9uKGUpe2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGU9PT11bmRlZmluZWQ/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24odCl7eC5vZmZzZXQuc2V0T2Zmc2V0KHRoaXMsZSx0KX0pO3ZhciB0LG4saT10aGlzWzBdLG89e3RvcDowLGxlZnQ6MH0scz1pJiZpLm93bmVyRG9jdW1lbnQ7aWYocylyZXR1cm4gdD1zLmRvY3VtZW50RWxlbWVudCx4LmNvbnRhaW5zKHQsaSk/KHR5cGVvZiBpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCE9PXImJihvPWkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLG49cW4ocykse3RvcDpvLnRvcCtuLnBhZ2VZT2Zmc2V0LXQuY2xpZW50VG9wLGxlZnQ6by5sZWZ0K24ucGFnZVhPZmZzZXQtdC5jbGllbnRMZWZ0fSk6b30seC5vZmZzZXQ9e3NldE9mZnNldDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvLHMsYSx1LGwsYz14LmNzcyhlLCJwb3NpdGlvbiIpLGY9eChlKSxwPXt9OyJzdGF0aWMiPT09YyYmKGUuc3R5bGUucG9zaXRpb249InJlbGF0aXZlIiksYT1mLm9mZnNldCgpLG89eC5jc3MoZSwidG9wIiksdT14LmNzcyhlLCJsZWZ0IiksbD0oImFic29sdXRlIj09PWN8fCJmaXhlZCI9PT1jKSYmKG8rdSkuaW5kZXhPZigiYXV0byIpPi0xLGw/KHI9Zi5wb3NpdGlvbigpLHM9ci50b3AsaT1yLmxlZnQpOihzPXBhcnNlRmxvYXQobyl8fDAsaT1wYXJzZUZsb2F0KHUpfHwwKSx4LmlzRnVuY3Rpb24odCkmJih0PXQuY2FsbChlLG4sYSkpLG51bGwhPXQudG9wJiYocC50b3A9dC50b3AtYS50b3ArcyksbnVsbCE9dC5sZWZ0JiYocC5sZWZ0PXQubGVmdC1hLmxlZnQraSksInVzaW5nImluIHQ/dC51c2luZy5jYWxsKGUscCk6Zi5jc3MocCl9fSx4LmZuLmV4dGVuZCh7cG9zaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzWzBdKXt2YXIgZSx0LG49dGhpc1swXSxyPXt0b3A6MCxsZWZ0OjB9O3JldHVybiJmaXhlZCI9PT14LmNzcyhuLCJwb3NpdGlvbiIpP3Q9bi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTooZT10aGlzLm9mZnNldFBhcmVudCgpLHQ9dGhpcy5vZmZzZXQoKSx4Lm5vZGVOYW1lKGVbMF0sImh0bWwiKXx8KHI9ZS5vZmZzZXQoKSksci50b3ArPXguY3NzKGVbMF0sImJvcmRlclRvcFdpZHRoIiwhMCksci5sZWZ0Kz14LmNzcyhlWzBdLCJib3JkZXJMZWZ0V2lkdGgiLCEwKSkse3RvcDp0LnRvcC1yLnRvcC14LmNzcyhuLCJtYXJnaW5Ub3AiLCEwKSxsZWZ0OnQubGVmdC1yLmxlZnQteC5jc3MobiwibWFyZ2luTGVmdCIsITApfX19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlPXRoaXMub2Zmc2V0UGFyZW50fHxzO3doaWxlKGUmJiF4Lm5vZGVOYW1lKGUsImh0bWwiKSYmInN0YXRpYyI9PT14LmNzcyhlLCJwb3NpdGlvbiIpKWU9ZS5vZmZzZXRQYXJlbnQ7cmV0dXJuIGV8fHN9KX19KSx4LmVhY2goe3Njcm9sbExlZnQ6InBhZ2VYT2Zmc2V0IixzY3JvbGxUb3A6InBhZ2VZT2Zmc2V0In0sZnVuY3Rpb24odCxuKXt2YXIgcj0icGFnZVlPZmZzZXQiPT09bjt4LmZuW3RdPWZ1bmN0aW9uKGkpe3JldHVybiB4LmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKHQsaSxvKXt2YXIgcz1xbih0KTtyZXR1cm4gbz09PXVuZGVmaW5lZD9zP3Nbbl06dFtpXToocz9zLnNjcm9sbFRvKHI/ZS5wYWdlWE9mZnNldDpvLHI/bzplLnBhZ2VZT2Zmc2V0KTp0W2ldPW8sdW5kZWZpbmVkKX0sdCxpLGFyZ3VtZW50cy5sZW5ndGgsbnVsbCl9fSk7ZnVuY3Rpb24gcW4oZSl7cmV0dXJuIHguaXNXaW5kb3coZSk/ZTo5PT09ZS5ub2RlVHlwZSYmZS5kZWZhdWx0Vmlld314LmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihlLHQpe3guZWFjaCh7cGFkZGluZzoiaW5uZXIiK2UsY29udGVudDp0LCIiOiJvdXRlciIrZX0sZnVuY3Rpb24obixyKXt4LmZuW3JdPWZ1bmN0aW9uKHIsaSl7dmFyIG89YXJndW1lbnRzLmxlbmd0aCYmKG58fCJib29sZWFuIiE9dHlwZW9mIHIpLHM9bnx8KHI9PT0hMHx8aT09PSEwPyJtYXJnaW4iOiJib3JkZXIiKTtyZXR1cm4geC5hY2Nlc3ModGhpcyxmdW5jdGlvbih0LG4scil7dmFyIGk7cmV0dXJuIHguaXNXaW5kb3codCk/dC5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrZV06OT09PXQubm9kZVR5cGU/KGk9dC5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgodC5ib2R5WyJzY3JvbGwiK2VdLGlbInNjcm9sbCIrZV0sdC5ib2R5WyJvZmZzZXQiK2VdLGlbIm9mZnNldCIrZV0saVsiY2xpZW50IitlXSkpOnI9PT11bmRlZmluZWQ/eC5jc3ModCxuLHMpOnguc3R5bGUodCxuLHIscyl9LHQsbz9yOnVuZGVmaW5lZCxvLG51bGwpfX0pfSkseC5mbi5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RofSx4LmZuLmFuZFNlbGY9eC5mbi5hZGRCYWNrLCJvYmplY3QiPT10eXBlb2YgbW9kdWxlJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPXg6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKCJqcXVlcnkiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIHh9KSwib2JqZWN0Ij09dHlwZW9mIGUmJiJvYmplY3QiPT10eXBlb2YgZS5kb2N1bWVudCYmKGUualF1ZXJ5PWUuJD14KX0pKHdpbmRvdyk7"},{"meta":{"name":"jquery.min.js","url":"https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js","ts":1604045683870,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2My4yLjEgfCAoYykgSlMgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovCiFmdW5jdGlvbihhLGIpeyJ1c2Ugc3RyaWN0Ijsib2JqZWN0Ij09dHlwZW9mIG1vZHVsZSYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1hLmRvY3VtZW50P2IoYSwhMCk6ZnVuY3Rpb24oYSl7aWYoIWEuZG9jdW1lbnQpdGhyb3cgbmV3IEVycm9yKCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50Iik7cmV0dXJuIGIoYSl9OmIoYSl9KCJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLGZ1bmN0aW9uKGEsYil7InVzZSBzdHJpY3QiO3ZhciBjPVtdLGQ9YS5kb2N1bWVudCxlPU9iamVjdC5nZXRQcm90b3R5cGVPZixmPWMuc2xpY2UsZz1jLmNvbmNhdCxoPWMucHVzaCxpPWMuaW5kZXhPZixqPXt9LGs9ai50b1N0cmluZyxsPWouaGFzT3duUHJvcGVydHksbT1sLnRvU3RyaW5nLG49bS5jYWxsKE9iamVjdCksbz17fTtmdW5jdGlvbiBwKGEsYil7Yj1ifHxkO3ZhciBjPWIuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7Yy50ZXh0PWEsYi5oZWFkLmFwcGVuZENoaWxkKGMpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYyl9dmFyIHE9IjMuMi4xIixyPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyByLmZuLmluaXQoYSxiKX0scz0vXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2csdD0vXi1tcy0vLHU9Ly0oW2Etel0pL2csdj1mdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9O3IuZm49ci5wcm90b3R5cGU9e2pxdWVyeTpxLGNvbnN0cnVjdG9yOnIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBmLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9mLmNhbGwodGhpcyk6YTwwP3RoaXNbYSt0aGlzLmxlbmd0aF06dGhpc1thXX0scHVzaFN0YWNrOmZ1bmN0aW9uKGEpe3ZhciBiPXIubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGEpO3JldHVybiBiLnByZXZPYmplY3Q9dGhpcyxifSxlYWNoOmZ1bmN0aW9uKGEpe3JldHVybiByLmVhY2godGhpcyxhKX0sbWFwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayhyLm1hcCh0aGlzLGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuY2FsbChiLGMsYil9KSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGYuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sZW5ndGgsYz0rYSsoYTwwP2I6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGM+PTAmJmM8Yj9bdGhpc1tjXV06W10pfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2T2JqZWN0fHx0aGlzLmNvbnN0cnVjdG9yKCl9LHB1c2g6aCxzb3J0OmMuc29ydCxzcGxpY2U6Yy5zcGxpY2V9LHIuZXh0ZW5kPXIuZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGEsYixjLGQsZSxmLGc9YXJndW1lbnRzWzBdfHx7fSxoPTEsaT1hcmd1bWVudHMubGVuZ3RoLGo9ITE7Zm9yKCJib29sZWFuIj09dHlwZW9mIGcmJihqPWcsZz1hcmd1bWVudHNbaF18fHt9LGgrKyksIm9iamVjdCI9PXR5cGVvZiBnfHxyLmlzRnVuY3Rpb24oZyl8fChnPXt9KSxoPT09aSYmKGc9dGhpcyxoLS0pO2g8aTtoKyspaWYobnVsbCE9KGE9YXJndW1lbnRzW2hdKSlmb3IoYiBpbiBhKWM9Z1tiXSxkPWFbYl0sZyE9PWQmJihqJiZkJiYoci5pc1BsYWluT2JqZWN0KGQpfHwoZT1BcnJheS5pc0FycmF5KGQpKSk/KGU/KGU9ITEsZj1jJiZBcnJheS5pc0FycmF5KGMpP2M6W10pOmY9YyYmci5pc1BsYWluT2JqZWN0KGMpP2M6e30sZ1tiXT1yLmV4dGVuZChqLGYsZCkpOnZvaWQgMCE9PWQmJihnW2JdPWQpKTtyZXR1cm4gZ30sci5leHRlbmQoe2V4cGFuZG86ImpRdWVyeSIrKHErTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXEQvZywiIiksaXNSZWFkeTohMCxlcnJvcjpmdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoYSl9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuImZ1bmN0aW9uIj09PXIudHlwZShhKX0saXNXaW5kb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWEmJmE9PT1hLndpbmRvd30saXNOdW1lcmljOmZ1bmN0aW9uKGEpe3ZhciBiPXIudHlwZShhKTtyZXR1cm4oIm51bWJlciI9PT1ifHwic3RyaW5nIj09PWIpJiYhaXNOYU4oYS1wYXJzZUZsb2F0KGEpKX0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihhKXt2YXIgYixjO3JldHVybiEoIWF8fCJbb2JqZWN0IE9iamVjdF0iIT09ay5jYWxsKGEpKSYmKCEoYj1lKGEpKXx8KGM9bC5jYWxsKGIsImNvbnN0cnVjdG9yIikmJmIuY29uc3RydWN0b3IsImZ1bmN0aW9uIj09dHlwZW9mIGMmJm0uY2FsbChjKT09PW4pKX0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtmb3IoYiBpbiBhKXJldHVybiExO3JldHVybiEwfSx0eXBlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP2ErIiI6Im9iamVjdCI9PXR5cGVvZiBhfHwiZnVuY3Rpb24iPT10eXBlb2YgYT9qW2suY2FsbChhKV18fCJvYmplY3QiOnR5cGVvZiBhfSxnbG9iYWxFdmFsOmZ1bmN0aW9uKGEpe3AoYSl9LGNhbWVsQ2FzZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKHQsIm1zLSIpLnJlcGxhY2UodSx2KX0sZWFjaDpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9MDtpZih3KGEpKXtmb3IoYz1hLmxlbmd0aDtkPGM7ZCsrKWlmKGIuY2FsbChhW2RdLGQsYVtkXSk9PT0hMSlicmVha31lbHNlIGZvcihkIGluIGEpaWYoYi5jYWxsKGFbZF0sZCxhW2RdKT09PSExKWJyZWFrO3JldHVybiBhfSx0cmltOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hPyIiOihhKyIiKS5yZXBsYWNlKHMsIiIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHxbXTtyZXR1cm4gbnVsbCE9YSYmKHcoT2JqZWN0KGEpKT9yLm1lcmdlKGMsInN0cmluZyI9PXR5cGVvZiBhP1thXTphKTpoLmNhbGwoYyxhKSksY30saW5BcnJheTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG51bGw9PWI/LTE6aS5jYWxsKGIsYSxjKX0sbWVyZ2U6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9K2IubGVuZ3RoLGQ9MCxlPWEubGVuZ3RoO2Q8YztkKyspYVtlKytdPWJbZF07cmV0dXJuIGEubGVuZ3RoPWUsYX0sZ3JlcDpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkLGU9W10sZj0wLGc9YS5sZW5ndGgsaD0hYztmPGc7ZisrKWQ9IWIoYVtmXSxmKSxkIT09aCYmZS5wdXNoKGFbZl0pO3JldHVybiBlfSxtYXA6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj0wLGg9W107aWYodyhhKSlmb3IoZD1hLmxlbmd0aDtmPGQ7ZisrKWU9YihhW2ZdLGYsYyksbnVsbCE9ZSYmaC5wdXNoKGUpO2Vsc2UgZm9yKGYgaW4gYSllPWIoYVtmXSxmLGMpLG51bGwhPWUmJmgucHVzaChlKTtyZXR1cm4gZy5hcHBseShbXSxoKX0sZ3VpZDoxLHByb3h5OmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlO2lmKCJzdHJpbmciPT10eXBlb2YgYiYmKGM9YVtiXSxiPWEsYT1jKSxyLmlzRnVuY3Rpb24oYSkpcmV0dXJuIGQ9Zi5jYWxsKGFyZ3VtZW50cywyKSxlPWZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYnx8dGhpcyxkLmNvbmNhdChmLmNhbGwoYXJndW1lbnRzKSkpfSxlLmd1aWQ9YS5ndWlkPWEuZ3VpZHx8ci5ndWlkKyssZX0sbm93OkRhdGUubm93LHN1cHBvcnQ6b30pLCJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJihyLmZuW1N5bWJvbC5pdGVyYXRvcl09Y1tTeW1ib2wuaXRlcmF0b3JdKSxyLmVhY2goIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IgU3ltYm9sIi5zcGxpdCgiICIpLGZ1bmN0aW9uKGEsYil7alsiW29iamVjdCAiK2IrIl0iXT1iLnRvTG93ZXJDYXNlKCl9KTtmdW5jdGlvbiB3KGEpe3ZhciBiPSEhYSYmImxlbmd0aCJpbiBhJiZhLmxlbmd0aCxjPXIudHlwZShhKTtyZXR1cm4iZnVuY3Rpb24iIT09YyYmIXIuaXNXaW5kb3coYSkmJigiYXJyYXkiPT09Y3x8MD09PWJ8fCJudW1iZXIiPT10eXBlb2YgYiYmYj4wJiZiLTEgaW4gYSl9dmFyIHg9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaSxqLGssbCxtLG4sbyxwLHEscixzLHQsdT0ic2l6emxlIisxKm5ldyBEYXRlLHY9YS5kb2N1bWVudCx3PTAseD0wLHk9aGEoKSx6PWhhKCksQT1oYSgpLEI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWImJihsPSEwKSwwfSxDPXt9Lmhhc093blByb3BlcnR5LEQ9W10sRT1ELnBvcCxGPUQucHVzaCxHPUQucHVzaCxIPUQuc2xpY2UsST1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKylpZihhW2NdPT09YilyZXR1cm4gYztyZXR1cm4tMX0sSj0iY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWQiLEs9IltcXHgyMFxcdFxcclxcblxcZl0iLEw9Iig/OlxcXFwufFtcXHctXXxbXlwwLVxceGEwXSkrIixNPSJcXFsiK0srIiooIitMKyIpKD86IitLKyIqKFsqXiR8IX5dPz0pIitLKyIqKD86JygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCJ8KCIrTCsiKSl8KSIrSysiKlxcXSIsTj0iOigiK0wrIikoPzpcXCgoKCcoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwiKXwoKD86XFxcXC58W15cXFxcKClbXFxdXXwiK00rIikqKXwuKilcXCl8KSIsTz1uZXcgUmVnRXhwKEsrIisiLCJnIiksUD1uZXcgUmVnRXhwKCJeIitLKyIrfCgoPzpefFteXFxcXF0pKD86XFxcXC4pKikiK0srIiskIiwiZyIpLFE9bmV3IFJlZ0V4cCgiXiIrSysiKiwiK0srIioiKSxSPW5ldyBSZWdFeHAoIl4iK0srIiooWz4rfl18IitLKyIpIitLKyIqIiksUz1uZXcgUmVnRXhwKCI9IitLKyIqKFteXFxdJ1wiXSo/KSIrSysiKlxcXSIsImciKSxUPW5ldyBSZWdFeHAoTiksVT1uZXcgUmVnRXhwKCJeIitMKyIkIiksVj17SUQ6bmV3IFJlZ0V4cCgiXiMoIitMKyIpIiksQ0xBU1M6bmV3IFJlZ0V4cCgiXlxcLigiK0wrIikiKSxUQUc6bmV3IFJlZ0V4cCgiXigiK0wrInxbKl0pIiksQVRUUjpuZXcgUmVnRXhwKCJeIitNKSxQU0VVRE86bmV3IFJlZ0V4cCgiXiIrTiksQ0hJTEQ6bmV3IFJlZ0V4cCgiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFwoIitLKyIqKGV2ZW58b2RkfCgoWystXXwpKFxcZCopbnwpIitLKyIqKD86KFsrLV18KSIrSysiKihcXGQrKXwpKSIrSysiKlxcKXwpIiwiaSIpLGJvb2w6bmV3IFJlZ0V4cCgiXig/OiIrSisiKSQiLCJpIiksbmVlZHNDb250ZXh0Om5ldyBSZWdFeHAoIl4iK0srIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcKCIrSysiKigoPzotXFxkKT9cXGQqKSIrSysiKlxcKXwpKD89W14tXXwkKSIsImkiKX0sVz0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLFg9L15oXGQkL2ksWT0vXltee10rXHtccypcW25hdGl2ZSBcdy8sWj0vXig/OiMoW1x3LV0rKXwoXHcrKXxcLihbXHctXSspKSQvLCQ9L1srfl0vLF89bmV3IFJlZ0V4cCgiXFxcXChbXFxkYS1mXXsxLDZ9IitLKyI/fCgiK0srIil8LikiLCJpZyIpLGFhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD0iMHgiK2ItNjU1MzY7cmV0dXJuIGQhPT1kfHxjP2I6ZDwwP1N0cmluZy5mcm9tQ2hhckNvZGUoZCs2NTUzNik6U3RyaW5nLmZyb21DaGFyQ29kZShkPj4xMHw1NTI5NiwxMDIzJmR8NTYzMjApfSxiYT0vKFtcMC1ceDFmXHg3Zl18Xi0/XGQpfF4tJHxbXlwwLVx4MWZceDdmLVx1RkZGRlx3LV0vZyxjYT1mdW5jdGlvbihhLGIpe3JldHVybiBiPyJcMCI9PT1hPyJcdWZmZmQiOmEuc2xpY2UoMCwtMSkrIlxcIithLmNoYXJDb2RlQXQoYS5sZW5ndGgtMSkudG9TdHJpbmcoMTYpKyIgIjoiXFwiK2F9LGRhPWZ1bmN0aW9uKCl7bSgpfSxlYT10YShmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSEwJiYoImZvcm0iaW4gYXx8ImxhYmVsImluIGEpfSx7ZGlyOiJwYXJlbnROb2RlIixuZXh0OiJsZWdlbmQifSk7dHJ5e0cuYXBwbHkoRD1ILmNhbGwodi5jaGlsZE5vZGVzKSx2LmNoaWxkTm9kZXMpLERbdi5jaGlsZE5vZGVzLmxlbmd0aF0ubm9kZVR5cGV9Y2F0Y2goZmEpe0c9e2FwcGx5OkQubGVuZ3RoP2Z1bmN0aW9uKGEsYil7Ri5hcHBseShhLEguY2FsbChiKSl9OmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sZW5ndGgsZD0wO3doaWxlKGFbYysrXT1iW2QrK10pO2EubGVuZ3RoPWMtMX19fWZ1bmN0aW9uIGdhKGEsYixkLGUpe3ZhciBmLGgsaixrLGwsbyxyLHM9YiYmYi5vd25lckRvY3VtZW50LHc9Yj9iLm5vZGVUeXBlOjk7aWYoZD1kfHxbXSwic3RyaW5nIiE9dHlwZW9mIGF8fCFhfHwxIT09dyYmOSE9PXcmJjExIT09dylyZXR1cm4gZDtpZighZSYmKChiP2Iub3duZXJEb2N1bWVudHx8Yjp2KSE9PW4mJm0oYiksYj1ifHxuLHApKXtpZigxMSE9PXcmJihsPVouZXhlYyhhKSkpaWYoZj1sWzFdKXtpZig5PT09dyl7aWYoIShqPWIuZ2V0RWxlbWVudEJ5SWQoZikpKXJldHVybiBkO2lmKGouaWQ9PT1mKXJldHVybiBkLnB1c2goaiksZH1lbHNlIGlmKHMmJihqPXMuZ2V0RWxlbWVudEJ5SWQoZikpJiZ0KGIsaikmJmouaWQ9PT1mKXJldHVybiBkLnB1c2goaiksZH1lbHNle2lmKGxbMl0pcmV0dXJuIEcuYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpKSxkO2lmKChmPWxbM10pJiZjLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSlyZXR1cm4gRy5hcHBseShkLGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShmKSksZH1pZihjLnFzYSYmIUFbYSsiICJdJiYoIXF8fCFxLnRlc3QoYSkpKXtpZigxIT09dylzPWIscj1hO2Vsc2UgaWYoIm9iamVjdCIhPT1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpeyhrPWIuZ2V0QXR0cmlidXRlKCJpZCIpKT9rPWsucmVwbGFjZShiYSxjYSk6Yi5zZXRBdHRyaWJ1dGUoImlkIixrPXUpLG89ZyhhKSxoPW8ubGVuZ3RoO3doaWxlKGgtLSlvW2hdPSIjIitrKyIgIitzYShvW2hdKTtyPW8uam9pbigiLCIpLHM9JC50ZXN0KGEpJiZxYShiLnBhcmVudE5vZGUpfHxifWlmKHIpdHJ5e3JldHVybiBHLmFwcGx5KGQscy5xdWVyeVNlbGVjdG9yQWxsKHIpKSxkfWNhdGNoKHgpe31maW5hbGx5e2s9PT11JiZiLnJlbW92ZUF0dHJpYnV0ZSgiaWQiKX19fXJldHVybiBpKGEucmVwbGFjZShQLCIkMSIpLGIsZCxlKX1mdW5jdGlvbiBoYSgpe3ZhciBhPVtdO2Z1bmN0aW9uIGIoYyxlKXtyZXR1cm4gYS5wdXNoKGMrIiAiKT5kLmNhY2hlTGVuZ3RoJiZkZWxldGUgYlthLnNoaWZ0KCldLGJbYysiICJdPWV9cmV0dXJuIGJ9ZnVuY3Rpb24gaWEoYSl7cmV0dXJuIGFbdV09ITAsYX1mdW5jdGlvbiBqYShhKXt2YXIgYj1uLmNyZWF0ZUVsZW1lbnQoImZpZWxkc2V0Iik7dHJ5e3JldHVybiEhYShiKX1jYXRjaChjKXtyZXR1cm4hMX1maW5hbGx5e2IucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGI9bnVsbH19ZnVuY3Rpb24ga2EoYSxiKXt2YXIgYz1hLnNwbGl0KCJ8IiksZT1jLmxlbmd0aDt3aGlsZShlLS0pZC5hdHRySGFuZGxlW2NbZV1dPWJ9ZnVuY3Rpb24gbGEoYSxiKXt2YXIgYz1iJiZhLGQ9YyYmMT09PWEubm9kZVR5cGUmJjE9PT1iLm5vZGVUeXBlJiZhLnNvdXJjZUluZGV4LWIuc291cmNlSW5kZXg7aWYoZClyZXR1cm4gZDtpZihjKXdoaWxlKGM9Yy5uZXh0U2libGluZylpZihjPT09YilyZXR1cm4tMTtyZXR1cm4gYT8xOi0xfWZ1bmN0aW9uIG1hKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuImlucHV0Ij09PWMmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG5hKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKCJpbnB1dCI9PT1jfHwiYnV0dG9uIj09PWMpJiZiLnR5cGU9PT1hfX1mdW5jdGlvbiBvYShhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuImZvcm0iaW4gYj9iLnBhcmVudE5vZGUmJmIuZGlzYWJsZWQ9PT0hMT8ibGFiZWwiaW4gYj8ibGFiZWwiaW4gYi5wYXJlbnROb2RlP2IucGFyZW50Tm9kZS5kaXNhYmxlZD09PWE6Yi5kaXNhYmxlZD09PWE6Yi5pc0Rpc2FibGVkPT09YXx8Yi5pc0Rpc2FibGVkIT09IWEmJmVhKGIpPT09YTpiLmRpc2FibGVkPT09YToibGFiZWwiaW4gYiYmYi5kaXNhYmxlZD09PWF9fWZ1bmN0aW9uIHBhKGEpe3JldHVybiBpYShmdW5jdGlvbihiKXtyZXR1cm4gYj0rYixpYShmdW5jdGlvbihjLGQpe3ZhciBlLGY9YShbXSxjLmxlbmd0aCxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSljW2U9ZltnXV0mJihjW2VdPSEoZFtlXT1jW2VdKSl9KX0pfWZ1bmN0aW9uIHFhKGEpe3JldHVybiBhJiYidW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUmJmF9Yz1nYS5zdXBwb3J0PXt9LGY9Z2EuaXNYTUw9ZnVuY3Rpb24oYSl7dmFyIGI9YSYmKGEub3duZXJEb2N1bWVudHx8YSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiEhYiYmIkhUTUwiIT09Yi5ub2RlTmFtZX0sbT1nYS5zZXREb2N1bWVudD1mdW5jdGlvbihhKXt2YXIgYixlLGc9YT9hLm93bmVyRG9jdW1lbnR8fGE6djtyZXR1cm4gZyE9PW4mJjk9PT1nLm5vZGVUeXBlJiZnLmRvY3VtZW50RWxlbWVudD8obj1nLG89bi5kb2N1bWVudEVsZW1lbnQscD0hZihuKSx2IT09biYmKGU9bi5kZWZhdWx0VmlldykmJmUudG9wIT09ZSYmKGUuYWRkRXZlbnRMaXN0ZW5lcj9lLmFkZEV2ZW50TGlzdGVuZXIoInVubG9hZCIsZGEsITEpOmUuYXR0YWNoRXZlbnQmJmUuYXR0YWNoRXZlbnQoIm9udW5sb2FkIixkYSkpLGMuYXR0cmlidXRlcz1qYShmdW5jdGlvbihhKXtyZXR1cm4gYS5jbGFzc05hbWU9ImkiLCFhLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KSxjLmdldEVsZW1lbnRzQnlUYWdOYW1lPWphKGZ1bmN0aW9uKGEpe3JldHVybiBhLmFwcGVuZENoaWxkKG4uY3JlYXRlQ29tbWVudCgiIikpLCFhLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RofSksYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPVkudGVzdChuLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLGMuZ2V0QnlJZD1qYShmdW5jdGlvbihhKXtyZXR1cm4gby5hcHBlbmRDaGlsZChhKS5pZD11LCFuLmdldEVsZW1lbnRzQnlOYW1lfHwhbi5nZXRFbGVtZW50c0J5TmFtZSh1KS5sZW5ndGh9KSxjLmdldEJ5SWQ/KGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShfLGFhKTtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKCJpZCIpPT09Yn19LGQuZmluZC5JRD1mdW5jdGlvbihhLGIpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgYi5nZXRFbGVtZW50QnlJZCYmcCl7dmFyIGM9Yi5nZXRFbGVtZW50QnlJZChhKTtyZXR1cm4gYz9bY106W119fSk6KGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShfLGFhKTtyZXR1cm4gZnVuY3Rpb24oYSl7dmFyIGM9InVuZGVmaW5lZCIhPXR5cGVvZiBhLmdldEF0dHJpYnV0ZU5vZGUmJmEuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtyZXR1cm4gYyYmYy52YWx1ZT09PWJ9fSxkLmZpbmQuSUQ9ZnVuY3Rpb24oYSxiKXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIGIuZ2V0RWxlbWVudEJ5SWQmJnApe3ZhciBjLGQsZSxmPWIuZ2V0RWxlbWVudEJ5SWQoYSk7aWYoZil7aWYoYz1mLmdldEF0dHJpYnV0ZU5vZGUoImlkIiksYyYmYy52YWx1ZT09PWEpcmV0dXJuW2ZdO2U9Yi5nZXRFbGVtZW50c0J5TmFtZShhKSxkPTA7d2hpbGUoZj1lW2QrK10paWYoYz1mLmdldEF0dHJpYnV0ZU5vZGUoImlkIiksYyYmYy52YWx1ZT09PWEpcmV0dXJuW2ZdfXJldHVybltdfX0pLGQuZmluZC5UQUc9Yy5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihhLGIpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgYi5nZXRFbGVtZW50c0J5VGFnTmFtZT9iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpOmMucXNhP2IucXVlcnlTZWxlY3RvckFsbChhKTp2b2lkIDB9OmZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPTAsZj1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpO2lmKCIqIj09PWEpe3doaWxlKGM9ZltlKytdKTE9PT1jLm5vZGVUeXBlJiZkLnB1c2goYyk7cmV0dXJuIGR9cmV0dXJuIGZ9LGQuZmluZC5DTEFTUz1jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGEsYil7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJnApcmV0dXJuIGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShhKX0scj1bXSxxPVtdLChjLnFzYT1ZLnRlc3Qobi5xdWVyeVNlbGVjdG9yQWxsKSkmJihqYShmdW5jdGlvbihhKXtvLmFwcGVuZENoaWxkKGEpLmlubmVySFRNTD0iPGEgaWQ9JyIrdSsiJz48L2E+PHNlbGVjdCBpZD0nIit1KyItXHJcXCcgbXNhbGxvd2NhcHR1cmU9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD4iLGEucXVlcnlTZWxlY3RvckFsbCgiW21zYWxsb3djYXB0dXJlXj0nJ10iKS5sZW5ndGgmJnEucHVzaCgiWypeJF09IitLKyIqKD86Jyd8XCJcIikiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5sZW5ndGh8fHEucHVzaCgiXFxbIitLKyIqKD86dmFsdWV8IitKKyIpIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJbaWR+PSIrdSsiLV0iKS5sZW5ndGh8fHEucHVzaCgifj0iKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RofHxxLnB1c2goIjpjaGVja2VkIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJhIyIrdSsiKyoiKS5sZW5ndGh8fHEucHVzaCgiLiMuK1srfl0iKX0pLGphKGZ1bmN0aW9uKGEpe2EuaW5uZXJIVE1MPSI8YSBocmVmPScnIGRpc2FibGVkPSdkaXNhYmxlZCc+PC9hPjxzZWxlY3QgZGlzYWJsZWQ9J2Rpc2FibGVkJz48b3B0aW9uLz48L3NlbGVjdD4iO3ZhciBiPW4uY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtiLnNldEF0dHJpYnV0ZSgidHlwZSIsImhpZGRlbiIpLGEuYXBwZW5kQ2hpbGQoYikuc2V0QXR0cmlidXRlKCJuYW1lIiwiRCIpLGEucXVlcnlTZWxlY3RvckFsbCgiW25hbWU9ZF0iKS5sZW5ndGgmJnEucHVzaCgibmFtZSIrSysiKlsqXiR8IX5dPz0iKSwyIT09YS5xdWVyeVNlbGVjdG9yQWxsKCI6ZW5hYmxlZCIpLmxlbmd0aCYmcS5wdXNoKCI6ZW5hYmxlZCIsIjpkaXNhYmxlZCIpLG8uYXBwZW5kQ2hpbGQoYSkuZGlzYWJsZWQ9ITAsMiE9PWEucXVlcnlTZWxlY3RvckFsbCgiOmRpc2FibGVkIikubGVuZ3RoJiZxLnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksYS5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4IikscS5wdXNoKCIsLio6Iil9KSksKGMubWF0Y2hlc1NlbGVjdG9yPVkudGVzdChzPW8ubWF0Y2hlc3x8by53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fG8ubW96TWF0Y2hlc1NlbGVjdG9yfHxvLm9NYXRjaGVzU2VsZWN0b3J8fG8ubXNNYXRjaGVzU2VsZWN0b3IpKSYmamEoZnVuY3Rpb24oYSl7Yy5kaXNjb25uZWN0ZWRNYXRjaD1zLmNhbGwoYSwiKiIpLHMuY2FsbChhLCJbcyE9JyddOngiKSxyLnB1c2goIiE9IixOKX0pLHE9cS5sZW5ndGgmJm5ldyBSZWdFeHAocS5qb2luKCJ8IikpLHI9ci5sZW5ndGgmJm5ldyBSZWdFeHAoci5qb2luKCJ8IikpLGI9WS50ZXN0KG8uY29tcGFyZURvY3VtZW50UG9zaXRpb24pLHQ9Ynx8WS50ZXN0KG8uY29udGFpbnMpP2Z1bmN0aW9uKGEsYil7dmFyIGM9OT09PWEubm9kZVR5cGU/YS5kb2N1bWVudEVsZW1lbnQ6YSxkPWImJmIucGFyZW50Tm9kZTtyZXR1cm4gYT09PWR8fCEoIWR8fDEhPT1kLm5vZGVUeXBlfHwhKGMuY29udGFpbnM/Yy5jb250YWlucyhkKTphLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiYxNiZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGQpKSl9OmZ1bmN0aW9uKGEsYil7aWYoYil3aGlsZShiPWIucGFyZW50Tm9kZSlpZihiPT09YSlyZXR1cm4hMDtyZXR1cm4hMX0sQj1iP2Z1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgZD0hYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbi0hYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtyZXR1cm4gZD9kOihkPShhLm93bmVyRG9jdW1lbnR8fGEpPT09KGIub3duZXJEb2N1bWVudHx8Yik/YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihiKToxLDEmZHx8IWMuc29ydERldGFjaGVkJiZiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGEpPT09ZD9hPT09bnx8YS5vd25lckRvY3VtZW50PT09diYmdCh2LGEpPy0xOmI9PT1ufHxiLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYik/MTprP0koayxhKS1JKGssYik6MDo0JmQ/LTE6MSl9OmZ1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgYyxkPTAsZT1hLnBhcmVudE5vZGUsZj1iLnBhcmVudE5vZGUsZz1bYV0saD1bYl07aWYoIWV8fCFmKXJldHVybiBhPT09bj8tMTpiPT09bj8xOmU/LTE6Zj8xOms/SShrLGEpLUkoayxiKTowO2lmKGU9PT1mKXJldHVybiBsYShhLGIpO2M9YTt3aGlsZShjPWMucGFyZW50Tm9kZSlnLnVuc2hpZnQoYyk7Yz1iO3doaWxlKGM9Yy5wYXJlbnROb2RlKWgudW5zaGlmdChjKTt3aGlsZShnW2RdPT09aFtkXSlkKys7cmV0dXJuIGQ/bGEoZ1tkXSxoW2RdKTpnW2RdPT09dj8tMTpoW2RdPT09dj8xOjB9LG4pOm59LGdhLm1hdGNoZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZ2EoYSxudWxsLG51bGwsYil9LGdhLm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihhLGIpe2lmKChhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSxiPWIucmVwbGFjZShTLCI9JyQxJ10iKSxjLm1hdGNoZXNTZWxlY3RvciYmcCYmIUFbYisiICJdJiYoIXJ8fCFyLnRlc3QoYikpJiYoIXF8fCFxLnRlc3QoYikpKXRyeXt2YXIgZD1zLmNhbGwoYSxiKTtpZihkfHxjLmRpc2Nvbm5lY3RlZE1hdGNofHxhLmRvY3VtZW50JiYxMSE9PWEuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIGR9Y2F0Y2goZSl7fXJldHVybiBnYShiLG4sbnVsbCxbYV0pLmxlbmd0aD4wfSxnYS5jb250YWlucz1mdW5jdGlvbihhLGIpe3JldHVybihhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSx0KGEsYil9LGdhLmF0dHI9ZnVuY3Rpb24oYSxiKXsoYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSk7dmFyIGU9ZC5hdHRySGFuZGxlW2IudG9Mb3dlckNhc2UoKV0sZj1lJiZDLmNhbGwoZC5hdHRySGFuZGxlLGIudG9Mb3dlckNhc2UoKSk/ZShhLGIsIXApOnZvaWQgMDtyZXR1cm4gdm9pZCAwIT09Zj9mOmMuYXR0cmlidXRlc3x8IXA/YS5nZXRBdHRyaWJ1dGUoYik6KGY9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpKSYmZi5zcGVjaWZpZWQ/Zi52YWx1ZTpudWxsfSxnYS5lc2NhcGU9ZnVuY3Rpb24oYSl7cmV0dXJuKGErIiIpLnJlcGxhY2UoYmEsY2EpfSxnYS5lcnJvcj1mdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246ICIrYSl9LGdhLnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZD1bXSxlPTAsZj0wO2lmKGw9IWMuZGV0ZWN0RHVwbGljYXRlcyxrPSFjLnNvcnRTdGFibGUmJmEuc2xpY2UoMCksYS5zb3J0KEIpLGwpe3doaWxlKGI9YVtmKytdKWI9PT1hW2ZdJiYoZT1kLnB1c2goZikpO3doaWxlKGUtLSlhLnNwbGljZShkW2VdLDEpfXJldHVybiBrPW51bGwsYX0sZT1nYS5nZXRUZXh0PWZ1bmN0aW9uKGEpe3ZhciBiLGM9IiIsZD0wLGY9YS5ub2RlVHlwZTtpZihmKXtpZigxPT09Znx8OT09PWZ8fDExPT09Zil7aWYoInN0cmluZyI9PXR5cGVvZiBhLnRleHRDb250ZW50KXJldHVybiBhLnRleHRDb250ZW50O2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZyljKz1lKGEpfWVsc2UgaWYoMz09PWZ8fDQ9PT1mKXJldHVybiBhLm5vZGVWYWx1ZX1lbHNlIHdoaWxlKGI9YVtkKytdKWMrPWUoYik7cmV0dXJuIGN9LGQ9Z2Euc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86aWEsbWF0Y2g6VixhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6eyI+Ijp7ZGlyOiJwYXJlbnROb2RlIixmaXJzdDohMH0sIiAiOntkaXI6InBhcmVudE5vZGUifSwiKyI6e2RpcjoicHJldmlvdXNTaWJsaW5nIixmaXJzdDohMH0sIn4iOntkaXI6InByZXZpb3VzU2libGluZyJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS5yZXBsYWNlKF8sYWEpLGFbM109KGFbM118fGFbNF18fGFbNV18fCIiKS5yZXBsYWNlKF8sYWEpLCJ+PSI9PT1hWzJdJiYoYVszXT0iICIrYVszXSsiICIpLGEuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS50b0xvd2VyQ2FzZSgpLCJudGgiPT09YVsxXS5zbGljZSgwLDMpPyhhWzNdfHxnYS5lcnJvcihhWzBdKSxhWzRdPSsoYVs0XT9hWzVdKyhhWzZdfHwxKToyKigiZXZlbiI9PT1hWzNdfHwib2RkIj09PWFbM10pKSxhWzVdPSsoYVs3XSthWzhdfHwib2RkIj09PWFbM10pKTphWzNdJiZnYS5lcnJvcihhWzBdKSxhfSxQU0VVRE86ZnVuY3Rpb24oYSl7dmFyIGIsYz0hYVs2XSYmYVsyXTtyZXR1cm4gVi5DSElMRC50ZXN0KGFbMF0pP251bGw6KGFbM10/YVsyXT1hWzRdfHxhWzVdfHwiIjpjJiZULnRlc3QoYykmJihiPWcoYywhMCkpJiYoYj1jLmluZGV4T2YoIikiLGMubGVuZ3RoLWIpLWMubGVuZ3RoKSYmKGFbMF09YVswXS5zbGljZSgwLGIpLGFbMl09Yy5zbGljZSgwLGIpKSxhLnNsaWNlKDAsMykpfX0sZmlsdGVyOntUQUc6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKF8sYWEpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIioiPT09YT9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihhKXtyZXR1cm4gYS5ub2RlTmFtZSYmYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09Yn19LENMQVNTOmZ1bmN0aW9uKGEpe3ZhciBiPXlbYSsiICJdO3JldHVybiBifHwoYj1uZXcgUmVnRXhwKCIoXnwiK0srIikiK2ErIigiK0srInwkKSIpKSYmeShhLGZ1bmN0aW9uKGEpe3JldHVybiBiLnRlc3QoInN0cmluZyI9PXR5cGVvZiBhLmNsYXNzTmFtZSYmYS5jbGFzc05hbWV8fCJ1bmRlZmluZWQiIT10eXBlb2YgYS5nZXRBdHRyaWJ1dGUmJmEuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIil9KX0sQVRUUjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe3ZhciBlPWdhLmF0dHIoZCxhKTtyZXR1cm4gbnVsbD09ZT8iIT0iPT09YjohYnx8KGUrPSIiLCI9Ij09PWI/ZT09PWM6IiE9Ij09PWI/ZSE9PWM6Il49Ij09PWI/YyYmMD09PWUuaW5kZXhPZihjKToiKj0iPT09Yj9jJiZlLmluZGV4T2YoYyk+LTE6IiQ9Ij09PWI/YyYmZS5zbGljZSgtYy5sZW5ndGgpPT09Yzoifj0iPT09Yj8oIiAiK2UucmVwbGFjZShPLCIgIikrIiAiKS5pbmRleE9mKGMpPi0xOiJ8PSI9PT1iJiYoZT09PWN8fGUuc2xpY2UoMCxjLmxlbmd0aCsxKT09PWMrIi0iKSl9fSxDSElMRDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPSJudGgiIT09YS5zbGljZSgwLDMpLGc9Imxhc3QiIT09YS5zbGljZSgtNCksaD0ib2YtdHlwZSI9PT1iO3JldHVybiAxPT09ZCYmMD09PWU/ZnVuY3Rpb24oYSl7cmV0dXJuISFhLnBhcmVudE5vZGV9OmZ1bmN0aW9uKGIsYyxpKXt2YXIgaixrLGwsbSxuLG8scD1mIT09Zz8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLHE9Yi5wYXJlbnROb2RlLHI9aCYmYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHM9IWkmJiFoLHQ9ITE7aWYocSl7aWYoZil7d2hpbGUocCl7bT1iO3doaWxlKG09bVtwXSlpZihoP20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PW0ubm9kZVR5cGUpcmV0dXJuITE7bz1wPSJvbmx5Ij09PWEmJiFvJiYibmV4dFNpYmxpbmcifXJldHVybiEwfWlmKG89W2c/cS5maXJzdENoaWxkOnEubGFzdENoaWxkXSxnJiZzKXttPXEsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biYmalsyXSxtPW4mJnEuY2hpbGROb2Rlc1tuXTt3aGlsZShtPSsrbiYmbSYmbVtwXXx8KHQ9bj0wKXx8by5wb3AoKSlpZigxPT09bS5ub2RlVHlwZSYmKyt0JiZtPT09Yil7a1thXT1bdyxuLHRdO2JyZWFrfX1lbHNlIGlmKHMmJihtPWIsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biksdD09PSExKXdoaWxlKG09KytuJiZtJiZtW3BdfHwodD1uPTApfHxvLnBvcCgpKWlmKChoP20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PW0ubm9kZVR5cGUpJiYrK3QmJihzJiYobD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksa1thXT1bdyx0XSksbT09PWIpKWJyZWFrO3JldHVybiB0LT1lLHQ9PT1kfHx0JWQ9PT0wJiZ0L2Q+PTB9fX0sUFNFVURPOmZ1bmN0aW9uKGEsYil7dmFyIGMsZT1kLnBzZXVkb3NbYV18fGQuc2V0RmlsdGVyc1thLnRvTG93ZXJDYXNlKCldfHxnYS5lcnJvcigidW5zdXBwb3J0ZWQgcHNldWRvOiAiK2EpO3JldHVybiBlW3VdP2UoYik6ZS5sZW5ndGg+MT8oYz1bYSxhLCIiLGJdLGQuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShhLnRvTG93ZXJDYXNlKCkpP2lhKGZ1bmN0aW9uKGEsYyl7dmFyIGQsZj1lKGEsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pZD1JKGEsZltnXSksYVtkXT0hKGNbZF09ZltnXSl9KTpmdW5jdGlvbihhKXtyZXR1cm4gZShhLDAsYyl9KTplfX0scHNldWRvczp7bm90OmlhKGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W10sZD1oKGEucmVwbGFjZShQLCIkMSIpKTtyZXR1cm4gZFt1XT9pYShmdW5jdGlvbihhLGIsYyxlKXt2YXIgZixnPWQoYSxudWxsLGUsW10pLGg9YS5sZW5ndGg7d2hpbGUoaC0tKShmPWdbaF0pJiYoYVtoXT0hKGJbaF09ZikpfSk6ZnVuY3Rpb24oYSxlLGYpe3JldHVybiBiWzBdPWEsZChiLG51bGwsZixjKSxiWzBdPW51bGwsIWMucG9wKCl9fSksaGFzOmlhKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZ2EoYSxiKS5sZW5ndGg+MH19KSxjb250YWluczppYShmdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UoXyxhYSksZnVuY3Rpb24oYil7cmV0dXJuKGIudGV4dENvbnRlbnR8fGIuaW5uZXJUZXh0fHxlKGIpKS5pbmRleE9mKGEpPi0xfX0pLGxhbmc6aWEoZnVuY3Rpb24oYSl7cmV0dXJuIFUudGVzdChhfHwiIil8fGdhLmVycm9yKCJ1bnN1cHBvcnRlZCBsYW5nOiAiK2EpLGE9YS5yZXBsYWNlKF8sYWEpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24oYil7dmFyIGM7ZG8gaWYoYz1wP2IubGFuZzpiLmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKXx8Yi5nZXRBdHRyaWJ1dGUoImxhbmciKSlyZXR1cm4gYz1jLnRvTG93ZXJDYXNlKCksYz09PWF8fDA9PT1jLmluZGV4T2YoYSsiLSIpO3doaWxlKChiPWIucGFyZW50Tm9kZSkmJjE9PT1iLm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24oYil7dmFyIGM9YS5sb2NhdGlvbiYmYS5sb2NhdGlvbi5oYXNoO3JldHVybiBjJiZjLnNsaWNlKDEpPT09Yi5pZH0scm9vdDpmdW5jdGlvbihhKXtyZXR1cm4gYT09PW99LGZvY3VzOmZ1bmN0aW9uKGEpe3JldHVybiBhPT09bi5hY3RpdmVFbGVtZW50JiYoIW4uaGFzRm9jdXN8fG4uaGFzRm9jdXMoKSkmJiEhKGEudHlwZXx8YS5ocmVmfHx+YS50YWJJbmRleCl9LGVuYWJsZWQ6b2EoITEpLGRpc2FibGVkOm9hKCEwKSxjaGVja2VkOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmISFhLmNoZWNrZWR8fCJvcHRpb24iPT09YiYmISFhLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxhLnNlbGVjdGVkPT09ITB9LGVtcHR5OmZ1bmN0aW9uKGEpe2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylpZihhLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4hZC5wc2V1ZG9zLmVtcHR5KGEpfSxoZWFkZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIFgudGVzdChhLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFcudGVzdChhLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmImJ1dHRvbiI9PT1hLnR5cGV8fCJidXR0b24iPT09Yn0sdGV4dDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4iaW5wdXQiPT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYidGV4dCI9PT1hLnR5cGUmJihudWxsPT0oYj1hLmdldEF0dHJpYnV0ZSgidHlwZSIpKXx8InRleHQiPT09Yi50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6cGEoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0OnBhKGZ1bmN0aW9uKGEsYil7cmV0dXJuW2ItMV19KSxlcTpwYShmdW5jdGlvbihhLGIsYyl7cmV0dXJuW2M8MD9jK2I6Y119KSxldmVuOnBhKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7YzxiO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksb2RkOnBhKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE7YzxiO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksbHQ6cGEoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1jPDA/YytiOmM7LS1kPj0wOylhLnB1c2goZCk7cmV0dXJuIGF9KSxndDpwYShmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPWM8MD9jK2I6YzsrK2Q8YjspYS5wdXNoKGQpO3JldHVybiBhfSl9fSxkLnBzZXVkb3MubnRoPWQucHNldWRvcy5lcTtmb3IoYiBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlkLnBzZXVkb3NbYl09bWEoYik7Zm9yKGIgaW57c3VibWl0OiEwLHJlc2V0OiEwfSlkLnBzZXVkb3NbYl09bmEoYik7ZnVuY3Rpb24gcmEoKXt9cmEucHJvdG90eXBlPWQuZmlsdGVycz1kLnBzZXVkb3MsZC5zZXRGaWx0ZXJzPW5ldyByYSxnPWdhLnRva2VuaXplPWZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGcsaCxpLGosaz16W2ErIiAiXTtpZihrKXJldHVybiBiPzA6ay5zbGljZSgwKTtoPWEsaT1bXSxqPWQucHJlRmlsdGVyO3doaWxlKGgpe2MmJiEoZT1RLmV4ZWMoaCkpfHwoZSYmKGg9aC5zbGljZShlWzBdLmxlbmd0aCl8fGgpLGkucHVzaChmPVtdKSksYz0hMSwoZT1SLmV4ZWMoaCkpJiYoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZVswXS5yZXBsYWNlKFAsIiAiKX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2ZvcihnIGluIGQuZmlsdGVyKSEoZT1WW2ddLmV4ZWMoaCkpfHxqW2ddJiYhKGU9altnXShlKSl8fChjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTpnLG1hdGNoZXM6ZX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2lmKCFjKWJyZWFrfXJldHVybiBiP2gubGVuZ3RoOmg/Z2EuZXJyb3IoYSk6eihhLGkpLnNsaWNlKDApfTtmdW5jdGlvbiBzYShhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoLGQ9IiI7YjxjO2IrKylkKz1hW2JdLnZhbHVlO3JldHVybiBkfWZ1bmN0aW9uIHRhKGEsYixjKXt2YXIgZD1iLmRpcixlPWIubmV4dCxmPWV8fGQsZz1jJiYicGFyZW50Tm9kZSI9PT1mLGg9eCsrO3JldHVybiBiLmZpcnN0P2Z1bmN0aW9uKGIsYyxlKXt3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGcpcmV0dXJuIGEoYixjLGUpO3JldHVybiExfTpmdW5jdGlvbihiLGMsaSl7dmFyIGosayxsLG09W3csaF07aWYoaSl7d2hpbGUoYj1iW2RdKWlmKCgxPT09Yi5ub2RlVHlwZXx8ZykmJmEoYixjLGkpKXJldHVybiEwfWVsc2Ugd2hpbGUoYj1iW2RdKWlmKDE9PT1iLm5vZGVUeXBlfHxnKWlmKGw9Ylt1XXx8KGJbdV09e30pLGs9bFtiLnVuaXF1ZUlEXXx8KGxbYi51bmlxdWVJRF09e30pLGUmJmU9PT1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpYj1iW2RdfHxiO2Vsc2V7aWYoKGo9a1tmXSkmJmpbMF09PT13JiZqWzFdPT09aClyZXR1cm4gbVsyXT1qWzJdO2lmKGtbZl09bSxtWzJdPWEoYixjLGkpKXJldHVybiEwfXJldHVybiExfX1mdW5jdGlvbiB1YShhKXtyZXR1cm4gYS5sZW5ndGg+MT9mdW5jdGlvbihiLGMsZCl7dmFyIGU9YS5sZW5ndGg7d2hpbGUoZS0tKWlmKCFhW2VdKGIsYyxkKSlyZXR1cm4hMTtyZXR1cm4hMH06YVswXX1mdW5jdGlvbiB2YShhLGIsYyl7Zm9yKHZhciBkPTAsZT1iLmxlbmd0aDtkPGU7ZCsrKWdhKGEsYltkXSxjKTtyZXR1cm4gY31mdW5jdGlvbiB3YShhLGIsYyxkLGUpe2Zvcih2YXIgZixnPVtdLGg9MCxpPWEubGVuZ3RoLGo9bnVsbCE9YjtoPGk7aCsrKShmPWFbaF0pJiYoYyYmIWMoZixkLGUpfHwoZy5wdXNoKGYpLGomJmIucHVzaChoKSkpO3JldHVybiBnfWZ1bmN0aW9uIHhhKGEsYixjLGQsZSxmKXtyZXR1cm4gZCYmIWRbdV0mJihkPXhhKGQpKSxlJiYhZVt1XSYmKGU9eGEoZSxmKSksaWEoZnVuY3Rpb24oZixnLGgsaSl7dmFyIGosayxsLG09W10sbj1bXSxvPWcubGVuZ3RoLHA9Znx8dmEoYnx8IioiLGgubm9kZVR5cGU/W2hdOmgsW10pLHE9IWF8fCFmJiZiP3A6d2EocCxtLGEsaCxpKSxyPWM/ZXx8KGY/YTpvfHxkKT9bXTpnOnE7aWYoYyYmYyhxLHIsaCxpKSxkKXtqPXdhKHIsbiksZChqLFtdLGgsaSksaz1qLmxlbmd0aDt3aGlsZShrLS0pKGw9altrXSkmJihyW25ba11dPSEocVtuW2tdXT1sKSl9aWYoZil7aWYoZXx8YSl7aWYoZSl7aj1bXSxrPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmai5wdXNoKHFba109bCk7ZShudWxsLHI9W10saixpKX1rPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmKGo9ZT9JKGYsbCk6bVtrXSk+LTEmJihmW2pdPSEoZ1tqXT1sKSl9fWVsc2Ugcj13YShyPT09Zz9yLnNwbGljZShvLHIubGVuZ3RoKTpyKSxlP2UobnVsbCxnLHIsaSk6Ry5hcHBseShnLHIpfSl9ZnVuY3Rpb24geWEoYSl7Zm9yKHZhciBiLGMsZSxmPWEubGVuZ3RoLGc9ZC5yZWxhdGl2ZVthWzBdLnR5cGVdLGg9Z3x8ZC5yZWxhdGl2ZVsiICJdLGk9Zz8xOjAsaz10YShmdW5jdGlvbihhKXtyZXR1cm4gYT09PWJ9LGgsITApLGw9dGEoZnVuY3Rpb24oYSl7cmV0dXJuIEkoYixhKT4tMX0saCwhMCksbT1bZnVuY3Rpb24oYSxjLGQpe3ZhciBlPSFnJiYoZHx8YyE9PWopfHwoKGI9Yykubm9kZVR5cGU/ayhhLGMsZCk6bChhLGMsZCkpO3JldHVybiBiPW51bGwsZX1dO2k8ZjtpKyspaWYoYz1kLnJlbGF0aXZlW2FbaV0udHlwZV0pbT1bdGEodWEobSksYyldO2Vsc2V7aWYoYz1kLmZpbHRlclthW2ldLnR5cGVdLmFwcGx5KG51bGwsYVtpXS5tYXRjaGVzKSxjW3VdKXtmb3IoZT0rK2k7ZTxmO2UrKylpZihkLnJlbGF0aXZlW2FbZV0udHlwZV0pYnJlYWs7cmV0dXJuIHhhKGk+MSYmdWEobSksaT4xJiZzYShhLnNsaWNlKDAsaS0xKS5jb25jYXQoe3ZhbHVlOiIgIj09PWFbaS0yXS50eXBlPyIqIjoiIn0pKS5yZXBsYWNlKFAsIiQxIiksYyxpPGUmJnlhKGEuc2xpY2UoaSxlKSksZTxmJiZ5YShhPWEuc2xpY2UoZSkpLGU8ZiYmc2EoYSkpfW0ucHVzaChjKX1yZXR1cm4gdWEobSl9ZnVuY3Rpb24gemEoYSxiKXt2YXIgYz1iLmxlbmd0aD4wLGU9YS5sZW5ndGg+MCxmPWZ1bmN0aW9uKGYsZyxoLGksayl7dmFyIGwsbyxxLHI9MCxzPSIwIix0PWYmJltdLHU9W10sdj1qLHg9Znx8ZSYmZC5maW5kLlRBRygiKiIsaykseT13Kz1udWxsPT12PzE6TWF0aC5yYW5kb20oKXx8LjEsej14Lmxlbmd0aDtmb3IoayYmKGo9Zz09PW58fGd8fGspO3MhPT16JiZudWxsIT0obD14W3NdKTtzKyspe2lmKGUmJmwpe289MCxnfHxsLm93bmVyRG9jdW1lbnQ9PT1ufHwobShsKSxoPSFwKTt3aGlsZShxPWFbbysrXSlpZihxKGwsZ3x8bixoKSl7aS5wdXNoKGwpO2JyZWFrfWsmJih3PXkpfWMmJigobD0hcSYmbCkmJnItLSxmJiZ0LnB1c2gobCkpfWlmKHIrPXMsYyYmcyE9PXIpe289MDt3aGlsZShxPWJbbysrXSlxKHQsdSxnLGgpO2lmKGYpe2lmKHI+MCl3aGlsZShzLS0pdFtzXXx8dVtzXXx8KHVbc109RS5jYWxsKGkpKTt1PXdhKHUpfUcuYXBwbHkoaSx1KSxrJiYhZiYmdS5sZW5ndGg+MCYmcitiLmxlbmd0aD4xJiZnYS51bmlxdWVTb3J0KGkpfXJldHVybiBrJiYodz15LGo9diksdH07cmV0dXJuIGM/aWEoZik6Zn1yZXR1cm4gaD1nYS5jb21waWxlPWZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPVtdLGY9QVthKyIgIl07aWYoIWYpe2J8fChiPWcoYSkpLGM9Yi5sZW5ndGg7d2hpbGUoYy0tKWY9eWEoYltjXSksZlt1XT9kLnB1c2goZik6ZS5wdXNoKGYpO2Y9QShhLHphKGUsZCkpLGYuc2VsZWN0b3I9YX1yZXR1cm4gZn0saT1nYS5zZWxlY3Q9ZnVuY3Rpb24oYSxiLGMsZSl7dmFyIGYsaSxqLGssbCxtPSJmdW5jdGlvbiI9PXR5cGVvZiBhJiZhLG49IWUmJmcoYT1tLnNlbGVjdG9yfHxhKTtpZihjPWN8fFtdLDE9PT1uLmxlbmd0aCl7aWYoaT1uWzBdPW5bMF0uc2xpY2UoMCksaS5sZW5ndGg+MiYmIklEIj09PShqPWlbMF0pLnR5cGUmJjk9PT1iLm5vZGVUeXBlJiZwJiZkLnJlbGF0aXZlW2lbMV0udHlwZV0pe2lmKGI9KGQuZmluZC5JRChqLm1hdGNoZXNbMF0ucmVwbGFjZShfLGFhKSxiKXx8W10pWzBdLCFiKXJldHVybiBjO20mJihiPWIucGFyZW50Tm9kZSksYT1hLnNsaWNlKGkuc2hpZnQoKS52YWx1ZS5sZW5ndGgpfWY9Vi5uZWVkc0NvbnRleHQudGVzdChhKT8wOmkubGVuZ3RoO3doaWxlKGYtLSl7aWYoaj1pW2ZdLGQucmVsYXRpdmVbaz1qLnR5cGVdKWJyZWFrO2lmKChsPWQuZmluZFtrXSkmJihlPWwoai5tYXRjaGVzWzBdLnJlcGxhY2UoXyxhYSksJC50ZXN0KGlbMF0udHlwZSkmJnFhKGIucGFyZW50Tm9kZSl8fGIpKSl7aWYoaS5zcGxpY2UoZiwxKSxhPWUubGVuZ3RoJiZzYShpKSwhYSlyZXR1cm4gRy5hcHBseShjLGUpLGM7YnJlYWt9fX1yZXR1cm4obXx8aChhLG4pKShlLGIsIXAsYywhYnx8JC50ZXN0KGEpJiZxYShiLnBhcmVudE5vZGUpfHxiKSxjfSxjLnNvcnRTdGFibGU9dS5zcGxpdCgiIikuc29ydChCKS5qb2luKCIiKT09PXUsYy5kZXRlY3REdXBsaWNhdGVzPSEhbCxtKCksYy5zb3J0RGV0YWNoZWQ9amEoZnVuY3Rpb24oYSl7cmV0dXJuIDEmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihuLmNyZWF0ZUVsZW1lbnQoImZpZWxkc2V0IikpfSksamEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPSI8YSBocmVmPScjJz48L2E+IiwiIyI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJocmVmIil9KXx8a2EoInR5cGV8aHJlZnxoZWlnaHR8d2lkdGgiLGZ1bmN0aW9uKGEsYixjKXtpZighYylyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoYiwidHlwZSI9PT1iLnRvTG93ZXJDYXNlKCk/MToyKX0pLGMuYXR0cmlidXRlcyYmamEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPSI8aW5wdXQvPiIsYS5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKSwiIj09PWEuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoInZhbHVlIil9KXx8a2EoInZhbHVlIixmdW5jdGlvbihhLGIsYyl7aWYoIWMmJiJpbnB1dCI9PT1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpcmV0dXJuIGEuZGVmYXVsdFZhbHVlfSksamEoZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWEuZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpfSl8fGthKEosZnVuY3Rpb24oYSxiLGMpe3ZhciBkO2lmKCFjKXJldHVybiBhW2JdPT09ITA/Yi50b0xvd2VyQ2FzZSgpOihkPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmQuc3BlY2lmaWVkP2QudmFsdWU6bnVsbH0pLGdhfShhKTtyLmZpbmQ9eCxyLmV4cHI9eC5zZWxlY3RvcnMsci5leHByWyI6Il09ci5leHByLnBzZXVkb3Msci51bmlxdWVTb3J0PXIudW5pcXVlPXgudW5pcXVlU29ydCxyLnRleHQ9eC5nZXRUZXh0LHIuaXNYTUxEb2M9eC5pc1hNTCxyLmNvbnRhaW5zPXguY29udGFpbnMsci5lc2NhcGVTZWxlY3Rvcj14LmVzY2FwZTt2YXIgeT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9W10sZT12b2lkIDAhPT1jO3doaWxlKChhPWFbYl0pJiY5IT09YS5ub2RlVHlwZSlpZigxPT09YS5ub2RlVHlwZSl7aWYoZSYmcihhKS5pcyhjKSlicmVhaztkLnB1c2goYSl9cmV0dXJuIGR9LHo9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W107YTthPWEubmV4dFNpYmxpbmcpMT09PWEubm9kZVR5cGUmJmEhPT1iJiZjLnB1c2goYSk7cmV0dXJuIGN9LEE9ci5leHByLm1hdGNoLm5lZWRzQ29udGV4dDtmdW5jdGlvbiBCKGEsYil7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWIudG9Mb3dlckNhc2UoKX12YXIgQz0vXjwoW2Etel1bXlwvXDA+Olx4MjBcdFxyXG5cZl0qKVtceDIwXHRcclxuXGZdKlwvPz4oPzo8XC9cMT58KSQvaSxEPS9eLlteOiNcW1wuLF0qJC87ZnVuY3Rpb24gRShhLGIsYyl7cmV0dXJuIHIuaXNGdW5jdGlvbihiKT9yLmdyZXAoYSxmdW5jdGlvbihhLGQpe3JldHVybiEhYi5jYWxsKGEsZCxhKSE9PWN9KTpiLm5vZGVUeXBlP3IuZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBhPT09YiE9PWN9KToic3RyaW5nIiE9dHlwZW9mIGI/ci5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGkuY2FsbChiLGEpPi0xIT09Y30pOkQudGVzdChiKT9yLmZpbHRlcihiLGEsYyk6KGI9ci5maWx0ZXIoYixhKSxyLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gaS5jYWxsKGIsYSk+LTEhPT1jJiYxPT09YS5ub2RlVHlwZX0pKX1yLmZpbHRlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YlswXTtyZXR1cm4gYyYmKGE9Ijpub3QoIithKyIpIiksMT09PWIubGVuZ3RoJiYxPT09ZC5ub2RlVHlwZT9yLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGQsYSk/W2RdOltdOnIuZmluZC5tYXRjaGVzKGEsci5ncmVwKGIsZnVuY3Rpb24oYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlfSkpfSxyLmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihhKXt2YXIgYixjLGQ9dGhpcy5sZW5ndGgsZT10aGlzO2lmKCJzdHJpbmciIT10eXBlb2YgYSlyZXR1cm4gdGhpcy5wdXNoU3RhY2socihhKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IoYj0wO2I8ZDtiKyspaWYoci5jb250YWlucyhlW2JdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihjPXRoaXMucHVzaFN0YWNrKFtdKSxiPTA7YjxkO2IrKylyLmZpbmQoYSxlW2JdLGMpO3JldHVybiBkPjE/ci51bmlxdWVTb3J0KGMpOmN9LGZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soRSh0aGlzLGF8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soRSh0aGlzLGF8fFtdLCEwKSl9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiEhRSh0aGlzLCJzdHJpbmciPT10eXBlb2YgYSYmQS50ZXN0KGEpP3IoYSk6YXx8W10sITEpLmxlbmd0aH19KTt2YXIgRixHPS9eKD86XHMqKDxbXHdcV10rPilbXj5dKnwjKFtcdy1dKykpJC8sSD1yLmZuLmluaXQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBlLGY7aWYoIWEpcmV0dXJuIHRoaXM7aWYoYz1jfHxGLCJzdHJpbmciPT10eXBlb2YgYSl7aWYoZT0iPCI9PT1hWzBdJiYiPiI9PT1hW2EubGVuZ3RoLTFdJiZhLmxlbmd0aD49Mz9bbnVsbCxhLG51bGxdOkcuZXhlYyhhKSwhZXx8IWVbMV0mJmIpcmV0dXJuIWJ8fGIuanF1ZXJ5PyhifHxjKS5maW5kKGEpOnRoaXMuY29uc3RydWN0b3IoYikuZmluZChhKTtpZihlWzFdKXtpZihiPWIgaW5zdGFuY2VvZiByP2JbMF06YixyLm1lcmdlKHRoaXMsci5wYXJzZUhUTUwoZVsxXSxiJiZiLm5vZGVUeXBlP2Iub3duZXJEb2N1bWVudHx8YjpkLCEwKSksQy50ZXN0KGVbMV0pJiZyLmlzUGxhaW5PYmplY3QoYikpZm9yKGUgaW4gYilyLmlzRnVuY3Rpb24odGhpc1tlXSk/dGhpc1tlXShiW2VdKTp0aGlzLmF0dHIoZSxiW2VdKTtyZXR1cm4gdGhpc31yZXR1cm4gZj1kLmdldEVsZW1lbnRCeUlkKGVbMl0pLGYmJih0aGlzWzBdPWYsdGhpcy5sZW5ndGg9MSksdGhpc31yZXR1cm4gYS5ub2RlVHlwZT8odGhpc1swXT1hLHRoaXMubGVuZ3RoPTEsdGhpcyk6ci5pc0Z1bmN0aW9uKGEpP3ZvaWQgMCE9PWMucmVhZHk/Yy5yZWFkeShhKTphKHIpOnIubWFrZUFycmF5KGEsdGhpcyl9O0gucHJvdG90eXBlPXIuZm4sRj1yKGQpO3ZhciBJPS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLEo9e2NoaWxkcmVuOiEwLGNvbnRlbnRzOiEwLG5leHQ6ITAscHJldjohMH07ci5mbi5leHRlbmQoe2hhczpmdW5jdGlvbihhKXt2YXIgYj1yKGEsdGhpcyksYz1iLmxlbmd0aDtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGM7YSsrKWlmKHIuY29udGFpbnModGhpcyxiW2FdKSlyZXR1cm4hMH0pfSxjbG9zZXN0OmZ1bmN0aW9uKGEsYil7dmFyIGMsZD0wLGU9dGhpcy5sZW5ndGgsZj1bXSxnPSJzdHJpbmciIT10eXBlb2YgYSYmcihhKTtpZighQS50ZXN0KGEpKWZvcig7ZDxlO2QrKylmb3IoYz10aGlzW2RdO2MmJmMhPT1iO2M9Yy5wYXJlbnROb2RlKWlmKGMubm9kZVR5cGU8MTEmJihnP2cuaW5kZXgoYyk+LTE6MT09PWMubm9kZVR5cGUmJnIuZmluZC5tYXRjaGVzU2VsZWN0b3IoYyxhKSkpe2YucHVzaChjKTticmVha31yZXR1cm4gdGhpcy5wdXNoU3RhY2soZi5sZW5ndGg+MT9yLnVuaXF1ZVNvcnQoZik6Zil9LGluZGV4OmZ1bmN0aW9uKGEpe3JldHVybiBhPyJzdHJpbmciPT10eXBlb2YgYT9pLmNhbGwocihhKSx0aGlzWzBdKTppLmNhbGwodGhpcyxhLmpxdWVyeT9hWzBdOmEpOnRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZT90aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aDotMX0sYWRkOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHIudW5pcXVlU29ydChyLm1lcmdlKHRoaXMuZ2V0KCkscihhLGIpKSkpfSxhZGRCYWNrOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFkZChudWxsPT1hP3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKGEpKX19KTtmdW5jdGlvbiBLKGEsYil7d2hpbGUoKGE9YVtiXSkmJjEhPT1hLm5vZGVUeXBlKTtyZXR1cm4gYX1yLmVhY2goe3BhcmVudDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJjExIT09Yi5ub2RlVHlwZT9iOm51bGx9LHBhcmVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIHkoYSwicGFyZW50Tm9kZSIpfSxwYXJlbnRzVW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB5KGEsInBhcmVudE5vZGUiLGMpfSxuZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBLKGEsIm5leHRTaWJsaW5nIil9LHByZXY6ZnVuY3Rpb24oYSl7cmV0dXJuIEsoYSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIHkoYSwibmV4dFNpYmxpbmciKX0scHJldkFsbDpmdW5jdGlvbihhKXtyZXR1cm4geShhLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dFVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4geShhLCJuZXh0U2libGluZyIsYyl9LHByZXZVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHkoYSwicHJldmlvdXNTaWJsaW5nIixjKX0sc2libGluZ3M6ZnVuY3Rpb24oYSl7cmV0dXJuIHooKGEucGFyZW50Tm9kZXx8e30pLmZpcnN0Q2hpbGQsYSl9LGNoaWxkcmVuOmZ1bmN0aW9uKGEpe3JldHVybiB6KGEuZmlyc3RDaGlsZCl9LGNvbnRlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBCKGEsImlmcmFtZSIpP2EuY29udGVudERvY3VtZW50OihCKGEsInRlbXBsYXRlIikmJihhPWEuY29udGVudHx8YSksci5tZXJnZShbXSxhLmNoaWxkTm9kZXMpKX19LGZ1bmN0aW9uKGEsYil7ci5mblthXT1mdW5jdGlvbihjLGQpe3ZhciBlPXIubWFwKHRoaXMsYixjKTtyZXR1cm4iVW50aWwiIT09YS5zbGljZSgtNSkmJihkPWMpLGQmJiJzdHJpbmciPT10eXBlb2YgZCYmKGU9ci5maWx0ZXIoZCxlKSksdGhpcy5sZW5ndGg+MSYmKEpbYV18fHIudW5pcXVlU29ydChlKSxJLnRlc3QoYSkmJmUucmV2ZXJzZSgpKSx0aGlzLnB1c2hTdGFjayhlKX19KTt2YXIgTD0vW15ceDIwXHRcclxuXGZdKy9nO2Z1bmN0aW9uIE0oYSl7dmFyIGI9e307cmV0dXJuIHIuZWFjaChhLm1hdGNoKEwpfHxbXSxmdW5jdGlvbihhLGMpe2JbY109ITB9KSxifXIuQ2FsbGJhY2tzPWZ1bmN0aW9uKGEpe2E9InN0cmluZyI9PXR5cGVvZiBhP00oYSk6ci5leHRlbmQoe30sYSk7dmFyIGIsYyxkLGUsZj1bXSxnPVtdLGg9LTEsaT1mdW5jdGlvbigpe2ZvcihlPWV8fGEub25jZSxkPWI9ITA7Zy5sZW5ndGg7aD0tMSl7Yz1nLnNoaWZ0KCk7d2hpbGUoKytoPGYubGVuZ3RoKWZbaF0uYXBwbHkoY1swXSxjWzFdKT09PSExJiZhLnN0b3BPbkZhbHNlJiYoaD1mLmxlbmd0aCxjPSExKX1hLm1lbW9yeXx8KGM9ITEpLGI9ITEsZSYmKGY9Yz9bXToiIil9LGo9e2FkZDpmdW5jdGlvbigpe3JldHVybiBmJiYoYyYmIWImJihoPWYubGVuZ3RoLTEsZy5wdXNoKGMpKSxmdW5jdGlvbiBkKGIpe3IuZWFjaChiLGZ1bmN0aW9uKGIsYyl7ci5pc0Z1bmN0aW9uKGMpP2EudW5pcXVlJiZqLmhhcyhjKXx8Zi5wdXNoKGMpOmMmJmMubGVuZ3RoJiYic3RyaW5nIiE9PXIudHlwZShjKSYmZChjKX0pfShhcmd1bWVudHMpLGMmJiFiJiZpKCkpLHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe3JldHVybiByLmVhY2goYXJndW1lbnRzLGZ1bmN0aW9uKGEsYil7dmFyIGM7d2hpbGUoKGM9ci5pbkFycmF5KGIsZixjKSk+LTEpZi5zcGxpY2UoYywxKSxjPD1oJiZoLS19KSx0aGlzfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/ci5pbkFycmF5KGEsZik+LTE6Zi5sZW5ndGg+MH0sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gZiYmKGY9W10pLHRoaXN9LGRpc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gZT1nPVtdLGY9Yz0iIix0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFmfSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIGU9Zz1bXSxjfHxifHwoZj1jPSIiKSx0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWV9LGZpcmVXaXRoOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGV8fChjPWN8fFtdLGM9W2EsYy5zbGljZT9jLnNsaWNlKCk6Y10sZy5wdXNoKGMpLGJ8fGkoKSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBqLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhZH19O3JldHVybiBqfTtmdW5jdGlvbiBOKGEpe3JldHVybiBhfWZ1bmN0aW9uIE8oYSl7dGhyb3cgYX1mdW5jdGlvbiBQKGEsYixjLGQpe3ZhciBlO3RyeXthJiZyLmlzRnVuY3Rpb24oZT1hLnByb21pc2UpP2UuY2FsbChhKS5kb25lKGIpLmZhaWwoYyk6YSYmci5pc0Z1bmN0aW9uKGU9YS50aGVuKT9lLmNhbGwoYSxiLGMpOmIuYXBwbHkodm9pZCAwLFthXS5zbGljZShkKSl9Y2F0Y2goYSl7Yy5hcHBseSh2b2lkIDAsW2FdKX19ci5leHRlbmQoe0RlZmVycmVkOmZ1bmN0aW9uKGIpe3ZhciBjPVtbIm5vdGlmeSIsInByb2dyZXNzIixyLkNhbGxiYWNrcygibWVtb3J5Iiksci5DYWxsYmFja3MoIm1lbW9yeSIpLDJdLFsicmVzb2x2ZSIsImRvbmUiLHIuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLHIuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLDAsInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIixyLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSxyLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwxLCJyZWplY3RlZCJdXSxkPSJwZW5kaW5nIixlPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBkfSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gZi5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LCJjYXRjaCI6ZnVuY3Rpb24oYSl7cmV0dXJuIGUudGhlbihudWxsLGEpfSxwaXBlOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiByLkRlZmVycmVkKGZ1bmN0aW9uKGIpe3IuZWFjaChjLGZ1bmN0aW9uKGMsZCl7dmFyIGU9ci5pc0Z1bmN0aW9uKGFbZFs0XV0pJiZhW2RbNF1dO2ZbZFsxXV0oZnVuY3Rpb24oKXt2YXIgYT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthJiZyLmlzRnVuY3Rpb24oYS5wcm9taXNlKT9hLnByb21pc2UoKS5wcm9ncmVzcyhiLm5vdGlmeSkuZG9uZShiLnJlc29sdmUpLmZhaWwoYi5yZWplY3QpOmJbZFswXSsiV2l0aCJdKHRoaXMsZT9bYV06YXJndW1lbnRzKX0pfSksYT1udWxsfSkucHJvbWlzZSgpfSx0aGVuOmZ1bmN0aW9uKGIsZCxlKXt2YXIgZj0wO2Z1bmN0aW9uIGcoYixjLGQsZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGg9dGhpcyxpPWFyZ3VtZW50cyxqPWZ1bmN0aW9uKCl7dmFyIGEsajtpZighKGI8Zikpe2lmKGE9ZC5hcHBseShoLGkpLGE9PT1jLnByb21pc2UoKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGVuYWJsZSBzZWxmLXJlc29sdXRpb24iKTtqPWEmJigib2JqZWN0Ij09dHlwZW9mIGF8fCJmdW5jdGlvbiI9PXR5cGVvZiBhKSYmYS50aGVuLHIuaXNGdW5jdGlvbihqKT9lP2ouY2FsbChhLGcoZixjLE4sZSksZyhmLGMsTyxlKSk6KGYrKyxqLmNhbGwoYSxnKGYsYyxOLGUpLGcoZixjLE8sZSksZyhmLGMsTixjLm5vdGlmeVdpdGgpKSk6KGQhPT1OJiYoaD12b2lkIDAsaT1bYV0pLChlfHxjLnJlc29sdmVXaXRoKShoLGkpKX19LGs9ZT9qOmZ1bmN0aW9uKCl7dHJ5e2ooKX1jYXRjaChhKXtyLkRlZmVycmVkLmV4Y2VwdGlvbkhvb2smJnIuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayhhLGsuc3RhY2tUcmFjZSksYisxPj1mJiYoZCE9PU8mJihoPXZvaWQgMCxpPVthXSksYy5yZWplY3RXaXRoKGgsaSkpfX07Yj9rKCk6KHIuRGVmZXJyZWQuZ2V0U3RhY2tIb29rJiYoay5zdGFja1RyYWNlPXIuRGVmZXJyZWQuZ2V0U3RhY2tIb29rKCkpLGEuc2V0VGltZW91dChrKSl9fXJldHVybiByLkRlZmVycmVkKGZ1bmN0aW9uKGEpe2NbMF1bM10uYWRkKGcoMCxhLHIuaXNGdW5jdGlvbihlKT9lOk4sYS5ub3RpZnlXaXRoKSksY1sxXVszXS5hZGQoZygwLGEsci5pc0Z1bmN0aW9uKGIpP2I6TikpLGNbMl1bM10uYWRkKGcoMCxhLHIuaXNGdW5jdGlvbihkKT9kOk8pKX0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT9yLmV4dGVuZChhLGUpOmV9fSxmPXt9O3JldHVybiByLmVhY2goYyxmdW5jdGlvbihhLGIpe3ZhciBnPWJbMl0saD1iWzVdO2VbYlsxXV09Zy5hZGQsaCYmZy5hZGQoZnVuY3Rpb24oKXtkPWh9LGNbMy1hXVsyXS5kaXNhYmxlLGNbMF1bMl0ubG9jayksZy5hZGQoYlszXS5maXJlKSxmW2JbMF1dPWZ1bmN0aW9uKCl7cmV0dXJuIGZbYlswXSsiV2l0aCJdKHRoaXM9PT1mP3ZvaWQgMDp0aGlzLGFyZ3VtZW50cyksdGhpc30sZltiWzBdKyJXaXRoIl09Zy5maXJlV2l0aH0pLGUucHJvbWlzZShmKSxiJiZiLmNhbGwoZixmKSxmfSx3aGVuOmZ1bmN0aW9uKGEpe3ZhciBiPWFyZ3VtZW50cy5sZW5ndGgsYz1iLGQ9QXJyYXkoYyksZT1mLmNhbGwoYXJndW1lbnRzKSxnPXIuRGVmZXJyZWQoKSxoPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihjKXtkW2FdPXRoaXMsZVthXT1hcmd1bWVudHMubGVuZ3RoPjE/Zi5jYWxsKGFyZ3VtZW50cyk6YywtLWJ8fGcucmVzb2x2ZVdpdGgoZCxlKX19O2lmKGI8PTEmJihQKGEsZy5kb25lKGgoYykpLnJlc29sdmUsZy5yZWplY3QsIWIpLCJwZW5kaW5nIj09PWcuc3RhdGUoKXx8ci5pc0Z1bmN0aW9uKGVbY10mJmVbY10udGhlbikpKXJldHVybiBnLnRoZW4oKTt3aGlsZShjLS0pUChlW2NdLGgoYyksZy5yZWplY3QpO3JldHVybiBnLnByb21pc2UoKX19KTt2YXIgUT0vXihFdmFsfEludGVybmFsfFJhbmdlfFJlZmVyZW5jZXxTeW50YXh8VHlwZXxVUkkpRXJyb3IkLztyLkRlZmVycmVkLmV4Y2VwdGlvbkhvb2s9ZnVuY3Rpb24oYixjKXthLmNvbnNvbGUmJmEuY29uc29sZS53YXJuJiZiJiZRLnRlc3QoYi5uYW1lKSYmYS5jb25zb2xlLndhcm4oImpRdWVyeS5EZWZlcnJlZCBleGNlcHRpb246ICIrYi5tZXNzYWdlLGIuc3RhY2ssYyl9LHIucmVhZHlFeGNlcHRpb249ZnVuY3Rpb24oYil7YS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgYn0pfTt2YXIgUj1yLkRlZmVycmVkKCk7ci5mbi5yZWFkeT1mdW5jdGlvbihhKXtyZXR1cm4gUi50aGVuKGEpWyJjYXRjaCJdKGZ1bmN0aW9uKGEpe3IucmVhZHlFeGNlcHRpb24oYSl9KSx0aGlzfSxyLmV4dGVuZCh7aXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxyZWFkeTpmdW5jdGlvbihhKXsoYT09PSEwPy0tci5yZWFkeVdhaXQ6ci5pc1JlYWR5KXx8KHIuaXNSZWFkeT0hMCxhIT09ITAmJi0tci5yZWFkeVdhaXQ+MHx8Ui5yZXNvbHZlV2l0aChkLFtyXSkpfX0pLHIucmVhZHkudGhlbj1SLnRoZW47ZnVuY3Rpb24gUygpe2QucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsUyksCmEucmVtb3ZlRXZlbnRMaXN0ZW5lcigibG9hZCIsUyksci5yZWFkeSgpfSJjb21wbGV0ZSI9PT1kLnJlYWR5U3RhdGV8fCJsb2FkaW5nIiE9PWQucmVhZHlTdGF0ZSYmIWQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsP2Euc2V0VGltZW91dChyLnJlYWR5KTooZC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixTKSxhLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLFMpKTt2YXIgVD1mdW5jdGlvbihhLGIsYyxkLGUsZixnKXt2YXIgaD0wLGk9YS5sZW5ndGgsaj1udWxsPT1jO2lmKCJvYmplY3QiPT09ci50eXBlKGMpKXtlPSEwO2ZvcihoIGluIGMpVChhLGIsaCxjW2hdLCEwLGYsZyl9ZWxzZSBpZih2b2lkIDAhPT1kJiYoZT0hMCxyLmlzRnVuY3Rpb24oZCl8fChnPSEwKSxqJiYoZz8oYi5jYWxsKGEsZCksYj1udWxsKTooaj1iLGI9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBqLmNhbGwocihhKSxjKX0pKSxiKSlmb3IoO2g8aTtoKyspYihhW2hdLGMsZz9kOmQuY2FsbChhW2hdLGgsYihhW2hdLGMpKSk7cmV0dXJuIGU/YTpqP2IuY2FsbChhKTppP2IoYVswXSxjKTpmfSxVPWZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZXx8OT09PWEubm9kZVR5cGV8fCErYS5ub2RlVHlwZX07ZnVuY3Rpb24gVigpe3RoaXMuZXhwYW5kbz1yLmV4cGFuZG8rVi51aWQrK31WLnVpZD0xLFYucHJvdG90eXBlPXtjYWNoZTpmdW5jdGlvbihhKXt2YXIgYj1hW3RoaXMuZXhwYW5kb107cmV0dXJuIGJ8fChiPXt9LFUoYSkmJihhLm5vZGVUeXBlP2FbdGhpcy5leHBhbmRvXT1iOk9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLHRoaXMuZXhwYW5kbyx7dmFsdWU6Yixjb25maWd1cmFibGU6ITB9KSkpLGJ9LHNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT10aGlzLmNhY2hlKGEpO2lmKCJzdHJpbmciPT10eXBlb2YgYillW3IuY2FtZWxDYXNlKGIpXT1jO2Vsc2UgZm9yKGQgaW4gYillW3IuY2FtZWxDYXNlKGQpXT1iW2RdO3JldHVybiBlfSxnZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdm9pZCAwPT09Yj90aGlzLmNhY2hlKGEpOmFbdGhpcy5leHBhbmRvXSYmYVt0aGlzLmV4cGFuZG9dW3IuY2FtZWxDYXNlKGIpXX0sYWNjZXNzOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdm9pZCAwPT09Ynx8YiYmInN0cmluZyI9PXR5cGVvZiBiJiZ2b2lkIDA9PT1jP3RoaXMuZ2V0KGEsYik6KHRoaXMuc2V0KGEsYixjKSx2b2lkIDAhPT1jP2M6Yil9LHJlbW92ZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9YVt0aGlzLmV4cGFuZG9dO2lmKHZvaWQgMCE9PWQpe2lmKHZvaWQgMCE9PWIpe0FycmF5LmlzQXJyYXkoYik/Yj1iLm1hcChyLmNhbWVsQ2FzZSk6KGI9ci5jYW1lbENhc2UoYiksYj1iIGluIGQ/W2JdOmIubWF0Y2goTCl8fFtdKSxjPWIubGVuZ3RoO3doaWxlKGMtLSlkZWxldGUgZFtiW2NdXX0odm9pZCAwPT09Ynx8ci5pc0VtcHR5T2JqZWN0KGQpKSYmKGEubm9kZVR5cGU/YVt0aGlzLmV4cGFuZG9dPXZvaWQgMDpkZWxldGUgYVt0aGlzLmV4cGFuZG9dKX19LGhhc0RhdGE6ZnVuY3Rpb24oYSl7dmFyIGI9YVt0aGlzLmV4cGFuZG9dO3JldHVybiB2b2lkIDAhPT1iJiYhci5pc0VtcHR5T2JqZWN0KGIpfX07dmFyIFc9bmV3IFYsWD1uZXcgVixZPS9eKD86XHtbXHdcV10qXH18XFtbXHdcV10qXF0pJC8sWj0vW0EtWl0vZztmdW5jdGlvbiAkKGEpe3JldHVybiJ0cnVlIj09PWF8fCJmYWxzZSIhPT1hJiYoIm51bGwiPT09YT9udWxsOmE9PT0rYSsiIj8rYTpZLnRlc3QoYSk/SlNPTi5wYXJzZShhKTphKX1mdW5jdGlvbiBfKGEsYixjKXt2YXIgZDtpZih2b2lkIDA9PT1jJiYxPT09YS5ub2RlVHlwZSlpZihkPSJkYXRhLSIrYi5yZXBsYWNlKFosIi0kJiIpLnRvTG93ZXJDYXNlKCksYz1hLmdldEF0dHJpYnV0ZShkKSwic3RyaW5nIj09dHlwZW9mIGMpe3RyeXtjPSQoYyl9Y2F0Y2goZSl7fVguc2V0KGEsYixjKX1lbHNlIGM9dm9pZCAwO3JldHVybiBjfXIuZXh0ZW5kKHtoYXNEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiBYLmhhc0RhdGEoYSl8fFcuaGFzRGF0YShhKX0sZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIFguYWNjZXNzKGEsYixjKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe1gucmVtb3ZlKGEsYil9LF9kYXRhOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gVy5hY2Nlc3MoYSxiLGMpfSxfcmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe1cucmVtb3ZlKGEsYil9fSksci5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj10aGlzWzBdLGc9ZiYmZi5hdHRyaWJ1dGVzO2lmKHZvaWQgMD09PWEpe2lmKHRoaXMubGVuZ3RoJiYoZT1YLmdldChmKSwxPT09Zi5ub2RlVHlwZSYmIVcuZ2V0KGYsImhhc0RhdGFBdHRycyIpKSl7Yz1nLmxlbmd0aDt3aGlsZShjLS0pZ1tjXSYmKGQ9Z1tjXS5uYW1lLDA9PT1kLmluZGV4T2YoImRhdGEtIikmJihkPXIuY2FtZWxDYXNlKGQuc2xpY2UoNSkpLF8oZixkLGVbZF0pKSk7Vy5zZXQoZiwiaGFzRGF0YUF0dHJzIiwhMCl9cmV0dXJuIGV9cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBhP3RoaXMuZWFjaChmdW5jdGlvbigpe1guc2V0KHRoaXMsYSl9KTpUKHRoaXMsZnVuY3Rpb24oYil7dmFyIGM7aWYoZiYmdm9pZCAwPT09Yil7aWYoYz1YLmdldChmLGEpLHZvaWQgMCE9PWMpcmV0dXJuIGM7aWYoYz1fKGYsYSksdm9pZCAwIT09YylyZXR1cm4gY31lbHNlIHRoaXMuZWFjaChmdW5jdGlvbigpe1guc2V0KHRoaXMsYSxiKX0pfSxudWxsLGIsYXJndW1lbnRzLmxlbmd0aD4xLG51bGwsITApfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtYLnJlbW92ZSh0aGlzLGEpfSl9fSksci5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZDtpZihhKXJldHVybiBiPShifHwiZngiKSsicXVldWUiLGQ9Vy5nZXQoYSxiKSxjJiYoIWR8fEFycmF5LmlzQXJyYXkoYyk/ZD1XLmFjY2VzcyhhLGIsci5tYWtlQXJyYXkoYykpOmQucHVzaChjKSksZHx8W119LGRlcXVldWU6ZnVuY3Rpb24oYSxiKXtiPWJ8fCJmeCI7dmFyIGM9ci5xdWV1ZShhLGIpLGQ9Yy5sZW5ndGgsZT1jLnNoaWZ0KCksZj1yLl9xdWV1ZUhvb2tzKGEsYiksZz1mdW5jdGlvbigpe3IuZGVxdWV1ZShhLGIpfTsiaW5wcm9ncmVzcyI9PT1lJiYoZT1jLnNoaWZ0KCksZC0tKSxlJiYoImZ4Ij09PWImJmMudW5zaGlmdCgiaW5wcm9ncmVzcyIpLGRlbGV0ZSBmLnN0b3AsZS5jYWxsKGEsZyxmKSksIWQmJmYmJmYuZW1wdHkuZmlyZSgpfSxfcXVldWVIb29rczpmdW5jdGlvbihhLGIpe3ZhciBjPWIrInF1ZXVlSG9va3MiO3JldHVybiBXLmdldChhLGMpfHxXLmFjY2VzcyhhLGMse2VtcHR5OnIuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLmFkZChmdW5jdGlvbigpe1cucmVtb3ZlKGEsW2IrInF1ZXVlIixjXSl9KX0pfX0pLHIuZm4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIpe3ZhciBjPTI7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBhJiYoYj1hLGE9ImZ4IixjLS0pLGFyZ3VtZW50cy5sZW5ndGg8Yz9yLnF1ZXVlKHRoaXNbMF0sYSk6dm9pZCAwPT09Yj90aGlzOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPXIucXVldWUodGhpcyxhLGIpO3IuX3F1ZXVlSG9va3ModGhpcyxhKSwiZngiPT09YSYmImlucHJvZ3Jlc3MiIT09Y1swXSYmci5kZXF1ZXVlKHRoaXMsYSl9KX0sZGVxdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ci5kZXF1ZXVlKHRoaXMsYSl9KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWV1ZShhfHwiZngiLFtdKX0scHJvbWlzZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9MSxlPXIuRGVmZXJyZWQoKSxmPXRoaXMsZz10aGlzLmxlbmd0aCxoPWZ1bmN0aW9uKCl7LS1kfHxlLnJlc29sdmVXaXRoKGYsW2ZdKX07InN0cmluZyIhPXR5cGVvZiBhJiYoYj1hLGE9dm9pZCAwKSxhPWF8fCJmeCI7d2hpbGUoZy0tKWM9Vy5nZXQoZltnXSxhKyJxdWV1ZUhvb2tzIiksYyYmYy5lbXB0eSYmKGQrKyxjLmVtcHR5LmFkZChoKSk7cmV0dXJuIGgoKSxlLnByb21pc2UoYil9fSk7dmFyIGFhPS9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8uc291cmNlLGJhPW5ldyBSZWdFeHAoIl4oPzooWystXSk9fCkoIithYSsiKShbYS16JV0qKSQiLCJpIiksY2E9WyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXSxkYT1mdW5jdGlvbihhLGIpe3JldHVybiBhPWJ8fGEsIm5vbmUiPT09YS5zdHlsZS5kaXNwbGF5fHwiIj09PWEuc3R5bGUuZGlzcGxheSYmci5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSkmJiJub25lIj09PXIuY3NzKGEsImRpc3BsYXkiKX0sZWE9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnPXt9O2ZvcihmIGluIGIpZ1tmXT1hLnN0eWxlW2ZdLGEuc3R5bGVbZl09YltmXTtlPWMuYXBwbHkoYSxkfHxbXSk7Zm9yKGYgaW4gYilhLnN0eWxlW2ZdPWdbZl07cmV0dXJuIGV9O2Z1bmN0aW9uIGZhKGEsYixjLGQpe3ZhciBlLGY9MSxnPTIwLGg9ZD9mdW5jdGlvbigpe3JldHVybiBkLmN1cigpfTpmdW5jdGlvbigpe3JldHVybiByLmNzcyhhLGIsIiIpfSxpPWgoKSxqPWMmJmNbM118fChyLmNzc051bWJlcltiXT8iIjoicHgiKSxrPShyLmNzc051bWJlcltiXXx8InB4IiE9PWomJitpKSYmYmEuZXhlYyhyLmNzcyhhLGIpKTtpZihrJiZrWzNdIT09ail7aj1qfHxrWzNdLGM9Y3x8W10saz0raXx8MTtkbyBmPWZ8fCIuNSIsay89ZixyLnN0eWxlKGEsYixrK2opO3doaWxlKGYhPT0oZj1oKCkvaSkmJjEhPT1mJiYtLWcpfXJldHVybiBjJiYoaz0ra3x8K2l8fDAsZT1jWzFdP2srKGNbMV0rMSkqY1syXTorY1syXSxkJiYoZC51bml0PWosZC5zdGFydD1rLGQuZW5kPWUpKSxlfXZhciBnYT17fTtmdW5jdGlvbiBoYShhKXt2YXIgYixjPWEub3duZXJEb2N1bWVudCxkPWEubm9kZU5hbWUsZT1nYVtkXTtyZXR1cm4gZT9lOihiPWMuYm9keS5hcHBlbmRDaGlsZChjLmNyZWF0ZUVsZW1lbnQoZCkpLGU9ci5jc3MoYiwiZGlzcGxheSIpLGIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSwibm9uZSI9PT1lJiYoZT0iYmxvY2siKSxnYVtkXT1lLGUpfWZ1bmN0aW9uIGlhKGEsYil7Zm9yKHZhciBjLGQsZT1bXSxmPTAsZz1hLmxlbmd0aDtmPGc7ZisrKWQ9YVtmXSxkLnN0eWxlJiYoYz1kLnN0eWxlLmRpc3BsYXksYj8oIm5vbmUiPT09YyYmKGVbZl09Vy5nZXQoZCwiZGlzcGxheSIpfHxudWxsLGVbZl18fChkLnN0eWxlLmRpc3BsYXk9IiIpKSwiIj09PWQuc3R5bGUuZGlzcGxheSYmZGEoZCkmJihlW2ZdPWhhKGQpKSk6Im5vbmUiIT09YyYmKGVbZl09Im5vbmUiLFcuc2V0KGQsImRpc3BsYXkiLGMpKSk7Zm9yKGY9MDtmPGc7ZisrKW51bGwhPWVbZl0mJihhW2ZdLnN0eWxlLmRpc3BsYXk9ZVtmXSk7cmV0dXJuIGF9ci5mbi5leHRlbmQoe3Nob3c6ZnVuY3Rpb24oKXtyZXR1cm4gaWEodGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gaWEodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihhKXtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBhP2E/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGEodGhpcyk/cih0aGlzKS5zaG93KCk6cih0aGlzKS5oaWRlKCl9KX19KTt2YXIgamE9L14oPzpjaGVja2JveHxyYWRpbykkL2ksa2E9LzwoW2Etel1bXlwvXDA+XHgyMFx0XHJcblxmXSspL2ksbGE9L14kfFwvKD86amF2YXxlY21hKXNjcmlwdC9pLG1hPXtvcHRpb246WzEsIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCI8L3NlbGVjdD4iXSx0aGVhZDpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sdGQ6WzMsIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdLF9kZWZhdWx0OlswLCIiLCIiXX07bWEub3B0Z3JvdXA9bWEub3B0aW9uLG1hLnRib2R5PW1hLnRmb290PW1hLmNvbGdyb3VwPW1hLmNhcHRpb249bWEudGhlYWQsbWEudGg9bWEudGQ7ZnVuY3Rpb24gbmEoYSxiKXt2YXIgYztyZXR1cm4gYz0idW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWU/YS5nZXRFbGVtZW50c0J5VGFnTmFtZShifHwiKiIpOiJ1bmRlZmluZWQiIT10eXBlb2YgYS5xdWVyeVNlbGVjdG9yQWxsP2EucXVlcnlTZWxlY3RvckFsbChifHwiKiIpOltdLHZvaWQgMD09PWJ8fGImJkIoYSxiKT9yLm1lcmdlKFthXSxjKTpjfWZ1bmN0aW9uIG9hKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKVcuc2V0KGFbY10sImdsb2JhbEV2YWwiLCFifHxXLmdldChiW2NdLCJnbG9iYWxFdmFsIikpfXZhciBwYT0vPHwmIz9cdys7LztmdW5jdGlvbiBxYShhLGIsYyxkLGUpe2Zvcih2YXIgZixnLGgsaSxqLGssbD1iLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxtPVtdLG49MCxvPWEubGVuZ3RoO248bztuKyspaWYoZj1hW25dLGZ8fDA9PT1mKWlmKCJvYmplY3QiPT09ci50eXBlKGYpKXIubWVyZ2UobSxmLm5vZGVUeXBlP1tmXTpmKTtlbHNlIGlmKHBhLnRlc3QoZikpe2c9Z3x8bC5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxoPShrYS5leGVjKGYpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpLGk9bWFbaF18fG1hLl9kZWZhdWx0LGcuaW5uZXJIVE1MPWlbMV0rci5odG1sUHJlZmlsdGVyKGYpK2lbMl0saz1pWzBdO3doaWxlKGstLSlnPWcubGFzdENoaWxkO3IubWVyZ2UobSxnLmNoaWxkTm9kZXMpLGc9bC5maXJzdENoaWxkLGcudGV4dENvbnRlbnQ9IiJ9ZWxzZSBtLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShmKSk7bC50ZXh0Q29udGVudD0iIixuPTA7d2hpbGUoZj1tW24rK10paWYoZCYmci5pbkFycmF5KGYsZCk+LTEpZSYmZS5wdXNoKGYpO2Vsc2UgaWYoaj1yLmNvbnRhaW5zKGYub3duZXJEb2N1bWVudCxmKSxnPW5hKGwuYXBwZW5kQ2hpbGQoZiksInNjcmlwdCIpLGomJm9hKGcpLGMpe2s9MDt3aGlsZShmPWdbaysrXSlsYS50ZXN0KGYudHlwZXx8IiIpJiZjLnB1c2goZil9cmV0dXJuIGx9IWZ1bmN0aW9uKCl7dmFyIGE9ZC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksYj1hLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudCgiZGl2IikpLGM9ZC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2Muc2V0QXR0cmlidXRlKCJ0eXBlIiwicmFkaW8iKSxjLnNldEF0dHJpYnV0ZSgiY2hlY2tlZCIsImNoZWNrZWQiKSxjLnNldEF0dHJpYnV0ZSgibmFtZSIsInQiKSxiLmFwcGVuZENoaWxkKGMpLG8uY2hlY2tDbG9uZT1iLmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCxiLmlubmVySFRNTD0iPHRleHRhcmVhPng8L3RleHRhcmVhPiIsby5ub0Nsb25lQ2hlY2tlZD0hIWIuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlfSgpO3ZhciByYT1kLmRvY3VtZW50RWxlbWVudCxzYT0vXmtleS8sdGE9L14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51fGRyYWd8ZHJvcCl8Y2xpY2svLHVhPS9eKFteLl0qKSg/OlwuKC4rKXwpLztmdW5jdGlvbiB2YSgpe3JldHVybiEwfWZ1bmN0aW9uIHdhKCl7cmV0dXJuITF9ZnVuY3Rpb24geGEoKXt0cnl7cmV0dXJuIGQuYWN0aXZlRWxlbWVudH1jYXRjaChhKXt9fWZ1bmN0aW9uIHlhKGEsYixjLGQsZSxmKXt2YXIgZyxoO2lmKCJvYmplY3QiPT10eXBlb2YgYil7InN0cmluZyIhPXR5cGVvZiBjJiYoZD1kfHxjLGM9dm9pZCAwKTtmb3IoaCBpbiBiKXlhKGEsaCxjLGQsYltoXSxmKTtyZXR1cm4gYX1pZihudWxsPT1kJiZudWxsPT1lPyhlPWMsZD1jPXZvaWQgMCk6bnVsbD09ZSYmKCJzdHJpbmciPT10eXBlb2YgYz8oZT1kLGQ9dm9pZCAwKTooZT1kLGQ9YyxjPXZvaWQgMCkpLGU9PT0hMSllPXdhO2Vsc2UgaWYoIWUpcmV0dXJuIGE7cmV0dXJuIDE9PT1mJiYoZz1lLGU9ZnVuY3Rpb24oYSl7cmV0dXJuIHIoKS5vZmYoYSksZy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGUuZ3VpZD1nLmd1aWR8fChnLmd1aWQ9ci5ndWlkKyspKSxhLmVhY2goZnVuY3Rpb24oKXtyLmV2ZW50LmFkZCh0aGlzLGIsZSxkLGMpfSl9ci5ldmVudD17Z2xvYmFsOnt9LGFkZDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG0sbixvLHAscT1XLmdldChhKTtpZihxKXtjLmhhbmRsZXImJihmPWMsYz1mLmhhbmRsZXIsZT1mLnNlbGVjdG9yKSxlJiZyLmZpbmQubWF0Y2hlc1NlbGVjdG9yKHJhLGUpLGMuZ3VpZHx8KGMuZ3VpZD1yLmd1aWQrKyksKGk9cS5ldmVudHMpfHwoaT1xLmV2ZW50cz17fSksKGc9cS5oYW5kbGUpfHwoZz1xLmhhbmRsZT1mdW5jdGlvbihiKXtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIHImJnIuZXZlbnQudHJpZ2dlcmVkIT09Yi50eXBlP3IuZXZlbnQuZGlzcGF0Y2guYXBwbHkoYSxhcmd1bWVudHMpOnZvaWQgMH0pLGI9KGJ8fCIiKS5tYXRjaChMKXx8WyIiXSxqPWIubGVuZ3RoO3doaWxlKGotLSloPXVhLmV4ZWMoYltqXSl8fFtdLG49cD1oWzFdLG89KGhbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKSxuJiYobD1yLmV2ZW50LnNwZWNpYWxbbl18fHt9LG49KGU/bC5kZWxlZ2F0ZVR5cGU6bC5iaW5kVHlwZSl8fG4sbD1yLmV2ZW50LnNwZWNpYWxbbl18fHt9LGs9ci5leHRlbmQoe3R5cGU6bixvcmlnVHlwZTpwLGRhdGE6ZCxoYW5kbGVyOmMsZ3VpZDpjLmd1aWQsc2VsZWN0b3I6ZSxuZWVkc0NvbnRleHQ6ZSYmci5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KGUpLG5hbWVzcGFjZTpvLmpvaW4oIi4iKX0sZiksKG09aVtuXSl8fChtPWlbbl09W10sbS5kZWxlZ2F0ZUNvdW50PTAsbC5zZXR1cCYmbC5zZXR1cC5jYWxsKGEsZCxvLGcpIT09ITF8fGEuYWRkRXZlbnRMaXN0ZW5lciYmYS5hZGRFdmVudExpc3RlbmVyKG4sZykpLGwuYWRkJiYobC5hZGQuY2FsbChhLGspLGsuaGFuZGxlci5ndWlkfHwoay5oYW5kbGVyLmd1aWQ9Yy5ndWlkKSksZT9tLnNwbGljZShtLmRlbGVnYXRlQ291bnQrKywwLGspOm0ucHVzaChrKSxyLmV2ZW50Lmdsb2JhbFtuXT0hMCl9fSxyZW1vdmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG4sbyxwLHE9Vy5oYXNEYXRhKGEpJiZXLmdldChhKTtpZihxJiYoaT1xLmV2ZW50cykpe2I9KGJ8fCIiKS5tYXRjaChMKXx8WyIiXSxqPWIubGVuZ3RoO3doaWxlKGotLSlpZihoPXVhLmV4ZWMoYltqXSl8fFtdLG49cD1oWzFdLG89KGhbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKSxuKXtsPXIuZXZlbnQuc3BlY2lhbFtuXXx8e30sbj0oZD9sLmRlbGVnYXRlVHlwZTpsLmJpbmRUeXBlKXx8bixtPWlbbl18fFtdLGg9aFsyXSYmbmV3IFJlZ0V4cCgiKF58XFwuKSIrby5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKSxnPWY9bS5sZW5ndGg7d2hpbGUoZi0tKWs9bVtmXSwhZSYmcCE9PWsub3JpZ1R5cGV8fGMmJmMuZ3VpZCE9PWsuZ3VpZHx8aCYmIWgudGVzdChrLm5hbWVzcGFjZSl8fGQmJmQhPT1rLnNlbGVjdG9yJiYoIioqIiE9PWR8fCFrLnNlbGVjdG9yKXx8KG0uc3BsaWNlKGYsMSksay5zZWxlY3RvciYmbS5kZWxlZ2F0ZUNvdW50LS0sbC5yZW1vdmUmJmwucmVtb3ZlLmNhbGwoYSxrKSk7ZyYmIW0ubGVuZ3RoJiYobC50ZWFyZG93biYmbC50ZWFyZG93bi5jYWxsKGEsbyxxLmhhbmRsZSkhPT0hMXx8ci5yZW1vdmVFdmVudChhLG4scS5oYW5kbGUpLGRlbGV0ZSBpW25dKX1lbHNlIGZvcihuIGluIGkpci5ldmVudC5yZW1vdmUoYSxuK2Jbal0sYyxkLCEwKTtyLmlzRW1wdHlPYmplY3QoaSkmJlcucmVtb3ZlKGEsImhhbmRsZSBldmVudHMiKX19LGRpc3BhdGNoOmZ1bmN0aW9uKGEpe3ZhciBiPXIuZXZlbnQuZml4KGEpLGMsZCxlLGYsZyxoLGk9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpLGo9KFcuZ2V0KHRoaXMsImV2ZW50cyIpfHx7fSlbYi50eXBlXXx8W10saz1yLmV2ZW50LnNwZWNpYWxbYi50eXBlXXx8e307Zm9yKGlbMF09YixjPTE7Yzxhcmd1bWVudHMubGVuZ3RoO2MrKylpW2NdPWFyZ3VtZW50c1tjXTtpZihiLmRlbGVnYXRlVGFyZ2V0PXRoaXMsIWsucHJlRGlzcGF0Y2h8fGsucHJlRGlzcGF0Y2guY2FsbCh0aGlzLGIpIT09ITEpe2g9ci5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsYixqKSxjPTA7d2hpbGUoKGY9aFtjKytdKSYmIWIuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7Yi5jdXJyZW50VGFyZ2V0PWYuZWxlbSxkPTA7d2hpbGUoKGc9Zi5oYW5kbGVyc1tkKytdKSYmIWIuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSliLnJuYW1lc3BhY2UmJiFiLnJuYW1lc3BhY2UudGVzdChnLm5hbWVzcGFjZSl8fChiLmhhbmRsZU9iaj1nLGIuZGF0YT1nLmRhdGEsZT0oKHIuZXZlbnQuc3BlY2lhbFtnLm9yaWdUeXBlXXx8e30pLmhhbmRsZXx8Zy5oYW5kbGVyKS5hcHBseShmLmVsZW0saSksdm9pZCAwIT09ZSYmKGIucmVzdWx0PWUpPT09ITEmJihiLnByZXZlbnREZWZhdWx0KCksYi5zdG9wUHJvcGFnYXRpb24oKSkpfXJldHVybiBrLnBvc3REaXNwYXRjaCYmay5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLGIpLGIucmVzdWx0fX0saGFuZGxlcnM6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnLGg9W10saT1iLmRlbGVnYXRlQ291bnQsaj1hLnRhcmdldDtpZihpJiZqLm5vZGVUeXBlJiYhKCJjbGljayI9PT1hLnR5cGUmJmEuYnV0dG9uPj0xKSlmb3IoO2ohPT10aGlzO2o9ai5wYXJlbnROb2RlfHx0aGlzKWlmKDE9PT1qLm5vZGVUeXBlJiYoImNsaWNrIiE9PWEudHlwZXx8ai5kaXNhYmxlZCE9PSEwKSl7Zm9yKGY9W10sZz17fSxjPTA7YzxpO2MrKylkPWJbY10sZT1kLnNlbGVjdG9yKyIgIix2b2lkIDA9PT1nW2VdJiYoZ1tlXT1kLm5lZWRzQ29udGV4dD9yKGUsdGhpcykuaW5kZXgoaik+LTE6ci5maW5kKGUsdGhpcyxudWxsLFtqXSkubGVuZ3RoKSxnW2VdJiZmLnB1c2goZCk7Zi5sZW5ndGgmJmgucHVzaCh7ZWxlbTpqLGhhbmRsZXJzOmZ9KX1yZXR1cm4gaj10aGlzLGk8Yi5sZW5ndGgmJmgucHVzaCh7ZWxlbTpqLGhhbmRsZXJzOmIuc2xpY2UoaSl9KSxofSxhZGRQcm9wOmZ1bmN0aW9uKGEsYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIuRXZlbnQucHJvdG90eXBlLGEse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLGdldDpyLmlzRnVuY3Rpb24oYik/ZnVuY3Rpb24oKXtpZih0aGlzLm9yaWdpbmFsRXZlbnQpcmV0dXJuIGIodGhpcy5vcmlnaW5hbEV2ZW50KX06ZnVuY3Rpb24oKXtpZih0aGlzLm9yaWdpbmFsRXZlbnQpcmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudFthXX0sc2V0OmZ1bmN0aW9uKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLGEse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOmJ9KX19KX0sZml4OmZ1bmN0aW9uKGEpe3JldHVybiBhW3IuZXhwYW5kb10/YTpuZXcgci5FdmVudChhKX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6ITB9LGZvY3VzOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7aWYodGhpcyE9PXhhKCkmJnRoaXMuZm9jdXMpcmV0dXJuIHRoaXMuZm9jdXMoKSwhMX0sZGVsZWdhdGVUeXBlOiJmb2N1c2luIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe2lmKHRoaXM9PT14YSgpJiZ0aGlzLmJsdXIpcmV0dXJuIHRoaXMuYmx1cigpLCExfSxkZWxlZ2F0ZVR5cGU6ImZvY3Vzb3V0In0sY2xpY2s6e3RyaWdnZXI6ZnVuY3Rpb24oKXtpZigiY2hlY2tib3giPT09dGhpcy50eXBlJiZ0aGlzLmNsaWNrJiZCKHRoaXMsImlucHV0IikpcmV0dXJuIHRoaXMuY2xpY2soKSwhMX0sX2RlZmF1bHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEIoYS50YXJnZXQsImEiKX19LGJlZm9yZXVubG9hZDp7cG9zdERpc3BhdGNoOmZ1bmN0aW9uKGEpe3ZvaWQgMCE9PWEucmVzdWx0JiZhLm9yaWdpbmFsRXZlbnQmJihhLm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWU9YS5yZXN1bHQpfX19fSxyLnJlbW92ZUV2ZW50PWZ1bmN0aW9uKGEsYixjKXthLnJlbW92ZUV2ZW50TGlzdGVuZXImJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGMpfSxyLkV2ZW50PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiByLkV2ZW50PyhhJiZhLnR5cGU/KHRoaXMub3JpZ2luYWxFdmVudD1hLHRoaXMudHlwZT1hLnR5cGUsdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9YS5kZWZhdWx0UHJldmVudGVkfHx2b2lkIDA9PT1hLmRlZmF1bHRQcmV2ZW50ZWQmJmEucmV0dXJuVmFsdWU9PT0hMT92YTp3YSx0aGlzLnRhcmdldD1hLnRhcmdldCYmMz09PWEudGFyZ2V0Lm5vZGVUeXBlP2EudGFyZ2V0LnBhcmVudE5vZGU6YS50YXJnZXQsdGhpcy5jdXJyZW50VGFyZ2V0PWEuY3VycmVudFRhcmdldCx0aGlzLnJlbGF0ZWRUYXJnZXQ9YS5yZWxhdGVkVGFyZ2V0KTp0aGlzLnR5cGU9YSxiJiZyLmV4dGVuZCh0aGlzLGIpLHRoaXMudGltZVN0YW1wPWEmJmEudGltZVN0YW1wfHxyLm5vdygpLHZvaWQodGhpc1tyLmV4cGFuZG9dPSEwKSk6bmV3IHIuRXZlbnQoYSxiKX0sci5FdmVudC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOnIuRXZlbnQsaXNEZWZhdWx0UHJldmVudGVkOndhLGlzUHJvcGFnYXRpb25TdG9wcGVkOndhLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOndhLGlzU2ltdWxhdGVkOiExLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPXZhLGEmJiF0aGlzLmlzU2ltdWxhdGVkJiZhLnByZXZlbnREZWZhdWx0KCl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPXZhLGEmJiF0aGlzLmlzU2ltdWxhdGVkJiZhLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD12YSxhJiYhdGhpcy5pc1NpbXVsYXRlZCYmYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0aGlzLnN0b3BQcm9wYWdhdGlvbigpfX0sci5lYWNoKHthbHRLZXk6ITAsYnViYmxlczohMCxjYW5jZWxhYmxlOiEwLGNoYW5nZWRUb3VjaGVzOiEwLGN0cmxLZXk6ITAsZGV0YWlsOiEwLGV2ZW50UGhhc2U6ITAsbWV0YUtleTohMCxwYWdlWDohMCxwYWdlWTohMCxzaGlmdEtleTohMCx2aWV3OiEwLCJjaGFyIjohMCxjaGFyQ29kZTohMCxrZXk6ITAsa2V5Q29kZTohMCxidXR0b246ITAsYnV0dG9uczohMCxjbGllbnRYOiEwLGNsaWVudFk6ITAsb2Zmc2V0WDohMCxvZmZzZXRZOiEwLHBvaW50ZXJJZDohMCxwb2ludGVyVHlwZTohMCxzY3JlZW5YOiEwLHNjcmVlblk6ITAsdGFyZ2V0VG91Y2hlczohMCx0b0VsZW1lbnQ6ITAsdG91Y2hlczohMCx3aGljaDpmdW5jdGlvbihhKXt2YXIgYj1hLmJ1dHRvbjtyZXR1cm4gbnVsbD09YS53aGljaCYmc2EudGVzdChhLnR5cGUpP251bGwhPWEuY2hhckNvZGU/YS5jaGFyQ29kZTphLmtleUNvZGU6IWEud2hpY2gmJnZvaWQgMCE9PWImJnRhLnRlc3QoYS50eXBlKT8xJmI/MToyJmI/Mzo0JmI/MjowOmEud2hpY2h9fSxyLmV2ZW50LmFkZFByb3ApLHIuZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCIscG9pbnRlcmVudGVyOiJwb2ludGVyb3ZlciIscG9pbnRlcmxlYXZlOiJwb2ludGVyb3V0In0sZnVuY3Rpb24oYSxiKXtyLmV2ZW50LnNwZWNpYWxbYV09e2RlbGVnYXRlVHlwZTpiLGJpbmRUeXBlOmIsaGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBjLGQ9dGhpcyxlPWEucmVsYXRlZFRhcmdldCxmPWEuaGFuZGxlT2JqO3JldHVybiBlJiYoZT09PWR8fHIuY29udGFpbnMoZCxlKSl8fChhLnR5cGU9Zi5vcmlnVHlwZSxjPWYuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksYS50eXBlPWIpLGN9fX0pLHIuZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4geWEodGhpcyxhLGIsYyxkKX0sb25lOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB5YSh0aGlzLGEsYixjLGQsMSl9LG9mZjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZTtpZihhJiZhLnByZXZlbnREZWZhdWx0JiZhLmhhbmRsZU9iailyZXR1cm4gZD1hLmhhbmRsZU9iaixyKGEuZGVsZWdhdGVUYXJnZXQpLm9mZihkLm5hbWVzcGFjZT9kLm9yaWdUeXBlKyIuIitkLm5hbWVzcGFjZTpkLm9yaWdUeXBlLGQuc2VsZWN0b3IsZC5oYW5kbGVyKSx0aGlzO2lmKCJvYmplY3QiPT10eXBlb2YgYSl7Zm9yKGUgaW4gYSl0aGlzLm9mZihlLGIsYVtlXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGIhPT0hMSYmImZ1bmN0aW9uIiE9dHlwZW9mIGJ8fChjPWIsYj12b2lkIDApLGM9PT0hMSYmKGM9d2EpLHRoaXMuZWFjaChmdW5jdGlvbigpe3IuZXZlbnQucmVtb3ZlKHRoaXMsYSxjLGIpfSl9fSk7dmFyIHphPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFthLXpdW15cL1wwPlx4MjBcdFxyXG5cZl0qKVtePl0qKVwvPi9naSxBYT0vPHNjcmlwdHw8c3R5bGV8PGxpbmsvaSxCYT0vY2hlY2tlZFxzKig/OltePV18PVxzKi5jaGVja2VkLikvaSxDYT0vXnRydWVcLyguKikvLERhPS9eXHMqPCEoPzpcW0NEQVRBXFt8LS0pfCg/OlxdXF18LS0pPlxzKiQvZztmdW5jdGlvbiBFYShhLGIpe3JldHVybiBCKGEsInRhYmxlIikmJkIoMTEhPT1iLm5vZGVUeXBlP2I6Yi5maXJzdENoaWxkLCJ0ciIpP3IoIj50Ym9keSIsYSlbMF18fGE6YX1mdW5jdGlvbiBGYShhKXtyZXR1cm4gYS50eXBlPShudWxsIT09YS5nZXRBdHRyaWJ1dGUoInR5cGUiKSkrIi8iK2EudHlwZSxhfWZ1bmN0aW9uIEdhKGEpe3ZhciBiPUNhLmV4ZWMoYS50eXBlKTtyZXR1cm4gYj9hLnR5cGU9YlsxXTphLnJlbW92ZUF0dHJpYnV0ZSgidHlwZSIpLGF9ZnVuY3Rpb24gSGEoYSxiKXt2YXIgYyxkLGUsZixnLGgsaSxqO2lmKDE9PT1iLm5vZGVUeXBlKXtpZihXLmhhc0RhdGEoYSkmJihmPVcuYWNjZXNzKGEpLGc9Vy5zZXQoYixmKSxqPWYuZXZlbnRzKSl7ZGVsZXRlIGcuaGFuZGxlLGcuZXZlbnRzPXt9O2ZvcihlIGluIGopZm9yKGM9MCxkPWpbZV0ubGVuZ3RoO2M8ZDtjKyspci5ldmVudC5hZGQoYixlLGpbZV1bY10pfVguaGFzRGF0YShhKSYmKGg9WC5hY2Nlc3MoYSksaT1yLmV4dGVuZCh7fSxoKSxYLnNldChiLGkpKX19ZnVuY3Rpb24gSWEoYSxiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7ImlucHV0Ij09PWMmJmphLnRlc3QoYS50eXBlKT9iLmNoZWNrZWQ9YS5jaGVja2VkOiJpbnB1dCIhPT1jJiYidGV4dGFyZWEiIT09Y3x8KGIuZGVmYXVsdFZhbHVlPWEuZGVmYXVsdFZhbHVlKX1mdW5jdGlvbiBKYShhLGIsYyxkKXtiPWcuYXBwbHkoW10sYik7dmFyIGUsZixoLGksaixrLGw9MCxtPWEubGVuZ3RoLG49bS0xLHE9YlswXSxzPXIuaXNGdW5jdGlvbihxKTtpZihzfHxtPjEmJiJzdHJpbmciPT10eXBlb2YgcSYmIW8uY2hlY2tDbG9uZSYmQmEudGVzdChxKSlyZXR1cm4gYS5lYWNoKGZ1bmN0aW9uKGUpe3ZhciBmPWEuZXEoZSk7cyYmKGJbMF09cS5jYWxsKHRoaXMsZSxmLmh0bWwoKSkpLEphKGYsYixjLGQpfSk7aWYobSYmKGU9cWEoYixhWzBdLm93bmVyRG9jdW1lbnQsITEsYSxkKSxmPWUuZmlyc3RDaGlsZCwxPT09ZS5jaGlsZE5vZGVzLmxlbmd0aCYmKGU9ZiksZnx8ZCkpe2ZvcihoPXIubWFwKG5hKGUsInNjcmlwdCIpLEZhKSxpPWgubGVuZ3RoO2w8bTtsKyspaj1lLGwhPT1uJiYoaj1yLmNsb25lKGosITAsITApLGkmJnIubWVyZ2UoaCxuYShqLCJzY3JpcHQiKSkpLGMuY2FsbChhW2xdLGosbCk7aWYoaSlmb3Ioaz1oW2gubGVuZ3RoLTFdLm93bmVyRG9jdW1lbnQsci5tYXAoaCxHYSksbD0wO2w8aTtsKyspaj1oW2xdLGxhLnRlc3Qoai50eXBlfHwiIikmJiFXLmFjY2VzcyhqLCJnbG9iYWxFdmFsIikmJnIuY29udGFpbnMoayxqKSYmKGouc3JjP3IuX2V2YWxVcmwmJnIuX2V2YWxVcmwoai5zcmMpOnAoai50ZXh0Q29udGVudC5yZXBsYWNlKERhLCIiKSxrKSl9cmV0dXJuIGF9ZnVuY3Rpb24gS2EoYSxiLGMpe2Zvcih2YXIgZCxlPWI/ci5maWx0ZXIoYixhKTphLGY9MDtudWxsIT0oZD1lW2ZdKTtmKyspY3x8MSE9PWQubm9kZVR5cGV8fHIuY2xlYW5EYXRhKG5hKGQpKSxkLnBhcmVudE5vZGUmJihjJiZyLmNvbnRhaW5zKGQub3duZXJEb2N1bWVudCxkKSYmb2EobmEoZCwic2NyaXB0IikpLGQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkKSk7cmV0dXJuIGF9ci5leHRlbmQoe2h0bWxQcmVmaWx0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSh6YSwiPCQxPjwvJDI+Iil9LGNsb25lOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuY2xvbmVOb2RlKCEwKSxpPXIuY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpO2lmKCEoby5ub0Nsb25lQ2hlY2tlZHx8MSE9PWEubm9kZVR5cGUmJjExIT09YS5ub2RlVHlwZXx8ci5pc1hNTERvYyhhKSkpZm9yKGc9bmEoaCksZj1uYShhKSxkPTAsZT1mLmxlbmd0aDtkPGU7ZCsrKUlhKGZbZF0sZ1tkXSk7aWYoYilpZihjKWZvcihmPWZ8fG5hKGEpLGc9Z3x8bmEoaCksZD0wLGU9Zi5sZW5ndGg7ZDxlO2QrKylIYShmW2RdLGdbZF0pO2Vsc2UgSGEoYSxoKTtyZXR1cm4gZz1uYShoLCJzY3JpcHQiKSxnLmxlbmd0aD4wJiZvYShnLCFpJiZuYShhLCJzY3JpcHQiKSksaH0sY2xlYW5EYXRhOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjLGQsZT1yLmV2ZW50LnNwZWNpYWwsZj0wO3ZvaWQgMCE9PShjPWFbZl0pO2YrKylpZihVKGMpKXtpZihiPWNbVy5leHBhbmRvXSl7aWYoYi5ldmVudHMpZm9yKGQgaW4gYi5ldmVudHMpZVtkXT9yLmV2ZW50LnJlbW92ZShjLGQpOnIucmVtb3ZlRXZlbnQoYyxkLGIuaGFuZGxlKTtjW1cuZXhwYW5kb109dm9pZCAwfWNbWC5leHBhbmRvXSYmKGNbWC5leHBhbmRvXT12b2lkIDApfX19KSxyLmZuLmV4dGVuZCh7ZGV0YWNoOmZ1bmN0aW9uKGEpe3JldHVybiBLYSh0aGlzLGEsITApfSxyZW1vdmU6ZnVuY3Rpb24oYSl7cmV0dXJuIEthKHRoaXMsYSl9LHRleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFQodGhpcyxmdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YT9yLnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmVhY2goZnVuY3Rpb24oKXsxIT09dGhpcy5ub2RlVHlwZSYmMTEhPT10aGlzLm5vZGVUeXBlJiY5IT09dGhpcy5ub2RlVHlwZXx8KHRoaXMudGV4dENvbnRlbnQ9YSl9KX0sbnVsbCxhLGFyZ3VtZW50cy5sZW5ndGgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gSmEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPUVhKHRoaXMsYSk7Yi5hcHBlbmRDaGlsZChhKX19KX0scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiBKYSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihhKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIGI9RWEodGhpcyxhKTtiLmluc2VydEJlZm9yZShhLGIuZmlyc3RDaGlsZCl9fSl9LGJlZm9yZTpmdW5jdGlvbigpe3JldHVybiBKYSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihhKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzKX0pfSxhZnRlcjpmdW5jdGlvbigpe3JldHVybiBKYSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihhKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzLm5leHRTaWJsaW5nKX0pfSxlbXB0eTpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPTA7bnVsbCE9KGE9dGhpc1tiXSk7YisrKTE9PT1hLm5vZGVUeXBlJiYoci5jbGVhbkRhdGEobmEoYSwhMSkpLGEudGV4dENvbnRlbnQ9IiIpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihhLGIpe3JldHVybiBhPW51bGwhPWEmJmEsYj1udWxsPT1iP2E6Yix0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiByLmNsb25lKHRoaXMsYSxiKX0pfSxodG1sOmZ1bmN0aW9uKGEpe3JldHVybiBUKHRoaXMsZnVuY3Rpb24oYSl7dmFyIGI9dGhpc1swXXx8e30sYz0wLGQ9dGhpcy5sZW5ndGg7aWYodm9pZCAwPT09YSYmMT09PWIubm9kZVR5cGUpcmV0dXJuIGIuaW5uZXJIVE1MO2lmKCJzdHJpbmciPT10eXBlb2YgYSYmIUFhLnRlc3QoYSkmJiFtYVsoa2EuZXhlYyhhKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKV0pe2E9ci5odG1sUHJlZmlsdGVyKGEpO3RyeXtmb3IoO2M8ZDtjKyspYj10aGlzW2NdfHx7fSwxPT09Yi5ub2RlVHlwZSYmKHIuY2xlYW5EYXRhKG5hKGIsITEpKSxiLmlubmVySFRNTD1hKTtiPTB9Y2F0Y2goZSl7fX1iJiZ0aGlzLmVtcHR5KCkuYXBwZW5kKGEpfSxudWxsLGEsYXJndW1lbnRzLmxlbmd0aCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKCl7dmFyIGE9W107cmV0dXJuIEphKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMucGFyZW50Tm9kZTtyLmluQXJyYXkodGhpcyxhKTwwJiYoci5jbGVhbkRhdGEobmEodGhpcykpLGMmJmMucmVwbGFjZUNoaWxkKGIsdGhpcykpfSxhKX19KSxyLmVhY2goe2FwcGVuZFRvOiJhcHBlbmQiLHByZXBlbmRUbzoicHJlcGVuZCIsaW5zZXJ0QmVmb3JlOiJiZWZvcmUiLGluc2VydEFmdGVyOiJhZnRlciIscmVwbGFjZUFsbDoicmVwbGFjZVdpdGgifSxmdW5jdGlvbihhLGIpe3IuZm5bYV09ZnVuY3Rpb24oYSl7Zm9yKHZhciBjLGQ9W10sZT1yKGEpLGY9ZS5sZW5ndGgtMSxnPTA7Zzw9ZjtnKyspYz1nPT09Zj90aGlzOnRoaXMuY2xvbmUoITApLHIoZVtnXSlbYl0oYyksaC5hcHBseShkLGMuZ2V0KCkpO3JldHVybiB0aGlzLnB1c2hTdGFjayhkKX19KTt2YXIgTGE9L15tYXJnaW4vLE1hPW5ldyBSZWdFeHAoIl4oIithYSsiKSg/IXB4KVthLXolXSskIiwiaSIpLE5hPWZ1bmN0aW9uKGIpe3ZhciBjPWIub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldztyZXR1cm4gYyYmYy5vcGVuZXJ8fChjPWEpLGMuZ2V0Q29tcHV0ZWRTdHlsZShiKX07IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYigpe2lmKGkpe2kuc3R5bGUuY3NzVGV4dD0iYm94LXNpemluZzpib3JkZXItYm94O3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6YmxvY2s7bWFyZ2luOmF1dG87Ym9yZGVyOjFweDtwYWRkaW5nOjFweDt0b3A6MSU7d2lkdGg6NTAlIixpLmlubmVySFRNTD0iIixyYS5hcHBlbmRDaGlsZChoKTt2YXIgYj1hLmdldENvbXB1dGVkU3R5bGUoaSk7Yz0iMSUiIT09Yi50b3AsZz0iMnB4Ij09PWIubWFyZ2luTGVmdCxlPSI0cHgiPT09Yi53aWR0aCxpLnN0eWxlLm1hcmdpblJpZ2h0PSI1MCUiLGY9IjRweCI9PT1iLm1hcmdpblJpZ2h0LHJhLnJlbW92ZUNoaWxkKGgpLGk9bnVsbH19dmFyIGMsZSxmLGcsaD1kLmNyZWF0ZUVsZW1lbnQoImRpdiIpLGk9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKTtpLnN0eWxlJiYoaS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iY29udGVudC1ib3giLGkuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iIixvLmNsZWFyQ2xvbmVTdHlsZT0iY29udGVudC1ib3giPT09aS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCxoLnN0eWxlLmNzc1RleHQ9ImJvcmRlcjowO3dpZHRoOjhweDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHg7cGFkZGluZzowO21hcmdpbi10b3A6MXB4O3Bvc2l0aW9uOmFic29sdXRlIixoLmFwcGVuZENoaWxkKGkpLHIuZXh0ZW5kKG8se3BpeGVsUG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gYigpLGN9LGJveFNpemluZ1JlbGlhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGIoKSxlfSxwaXhlbE1hcmdpblJpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIGIoKSxmfSxyZWxpYWJsZU1hcmdpbkxlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gYigpLGd9fSkpfSgpO2Z1bmN0aW9uIE9hKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuc3R5bGU7cmV0dXJuIGM9Y3x8TmEoYSksYyYmKGc9Yy5nZXRQcm9wZXJ0eVZhbHVlKGIpfHxjW2JdLCIiIT09Z3x8ci5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSl8fChnPXIuc3R5bGUoYSxiKSksIW8ucGl4ZWxNYXJnaW5SaWdodCgpJiZNYS50ZXN0KGcpJiZMYS50ZXN0KGIpJiYoZD1oLndpZHRoLGU9aC5taW5XaWR0aCxmPWgubWF4V2lkdGgsaC5taW5XaWR0aD1oLm1heFdpZHRoPWgud2lkdGg9ZyxnPWMud2lkdGgsaC53aWR0aD1kLGgubWluV2lkdGg9ZSxoLm1heFdpZHRoPWYpKSx2b2lkIDAhPT1nP2crIiI6Z31mdW5jdGlvbiBQYShhLGIpe3JldHVybntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYSgpP3ZvaWQgZGVsZXRlIHRoaXMuZ2V0Oih0aGlzLmdldD1iKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX12YXIgUWE9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLFJhPS9eLS0vLFNhPXtwb3NpdGlvbjoiYWJzb2x1dGUiLHZpc2liaWxpdHk6ImhpZGRlbiIsZGlzcGxheToiYmxvY2sifSxUYT17bGV0dGVyU3BhY2luZzoiMCIsZm9udFdlaWdodDoiNDAwIn0sVWE9WyJXZWJraXQiLCJNb3oiLCJtcyJdLFZhPWQuY3JlYXRlRWxlbWVudCgiZGl2Iikuc3R5bGU7ZnVuY3Rpb24gV2EoYSl7aWYoYSBpbiBWYSlyZXR1cm4gYTt2YXIgYj1hWzBdLnRvVXBwZXJDYXNlKCkrYS5zbGljZSgxKSxjPVVhLmxlbmd0aDt3aGlsZShjLS0paWYoYT1VYVtjXStiLGEgaW4gVmEpcmV0dXJuIGF9ZnVuY3Rpb24gWGEoYSl7dmFyIGI9ci5jc3NQcm9wc1thXTtyZXR1cm4gYnx8KGI9ci5jc3NQcm9wc1thXT1XYShhKXx8YSksYn1mdW5jdGlvbiBZYShhLGIsYyl7dmFyIGQ9YmEuZXhlYyhiKTtyZXR1cm4gZD9NYXRoLm1heCgwLGRbMl0tKGN8fDApKSsoZFszXXx8InB4Iik6Yn1mdW5jdGlvbiBaYShhLGIsYyxkLGUpe3ZhciBmLGc9MDtmb3IoZj1jPT09KGQ/ImJvcmRlciI6ImNvbnRlbnQiKT80OiJ3aWR0aCI9PT1iPzE6MDtmPDQ7Zis9MikibWFyZ2luIj09PWMmJihnKz1yLmNzcyhhLGMrY2FbZl0sITAsZSkpLGQ/KCJjb250ZW50Ij09PWMmJihnLT1yLmNzcyhhLCJwYWRkaW5nIitjYVtmXSwhMCxlKSksIm1hcmdpbiIhPT1jJiYoZy09ci5jc3MoYSwiYm9yZGVyIitjYVtmXSsiV2lkdGgiLCEwLGUpKSk6KGcrPXIuY3NzKGEsInBhZGRpbmciK2NhW2ZdLCEwLGUpLCJwYWRkaW5nIiE9PWMmJihnKz1yLmNzcyhhLCJib3JkZXIiK2NhW2ZdKyJXaWR0aCIsITAsZSkpKTtyZXR1cm4gZ31mdW5jdGlvbiAkYShhLGIsYyl7dmFyIGQsZT1OYShhKSxmPU9hKGEsYixlKSxnPSJib3JkZXItYm94Ij09PXIuY3NzKGEsImJveFNpemluZyIsITEsZSk7cmV0dXJuIE1hLnRlc3QoZik/ZjooZD1nJiYoby5ib3hTaXppbmdSZWxpYWJsZSgpfHxmPT09YS5zdHlsZVtiXSksImF1dG8iPT09ZiYmKGY9YVsib2Zmc2V0IitiWzBdLnRvVXBwZXJDYXNlKCkrYi5zbGljZSgxKV0pLGY9cGFyc2VGbG9hdChmKXx8MCxmK1phKGEsYixjfHwoZz8iYm9yZGVyIjoiY29udGVudCIpLGQsZSkrInB4Iil9ci5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oYSxiKXtpZihiKXt2YXIgYz1PYShhLCJvcGFjaXR5Iik7cmV0dXJuIiI9PT1jPyIxIjpjfX19fSxjc3NOdW1iZXI6e2FuaW1hdGlvbkl0ZXJhdGlvbkNvdW50OiEwLGNvbHVtbkNvdW50OiEwLGZpbGxPcGFjaXR5OiEwLGZsZXhHcm93OiEwLGZsZXhTaHJpbms6ITAsZm9udFdlaWdodDohMCxsaW5lSGVpZ2h0OiEwLG9wYWNpdHk6ITAsb3JkZXI6ITAsb3JwaGFuczohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITB9LGNzc1Byb3BzOnsiZmxvYXQiOiJjc3NGbG9hdCJ9LHN0eWxlOmZ1bmN0aW9uKGEsYixjLGQpe2lmKGEmJjMhPT1hLm5vZGVUeXBlJiY4IT09YS5ub2RlVHlwZSYmYS5zdHlsZSl7dmFyIGUsZixnLGg9ci5jYW1lbENhc2UoYiksaT1SYS50ZXN0KGIpLGo9YS5zdHlsZTtyZXR1cm4gaXx8KGI9WGEoaCkpLGc9ci5jc3NIb29rc1tiXXx8ci5jc3NIb29rc1toXSx2b2lkIDA9PT1jP2cmJiJnZXQiaW4gZyYmdm9pZCAwIT09KGU9Zy5nZXQoYSwhMSxkKSk/ZTpqW2JdOihmPXR5cGVvZiBjLCJzdHJpbmciPT09ZiYmKGU9YmEuZXhlYyhjKSkmJmVbMV0mJihjPWZhKGEsYixlKSxmPSJudW1iZXIiKSxudWxsIT1jJiZjPT09YyYmKCJudW1iZXIiPT09ZiYmKGMrPWUmJmVbM118fChyLmNzc051bWJlcltoXT8iIjoicHgiKSksby5jbGVhckNsb25lU3R5bGV8fCIiIT09Y3x8MCE9PWIuaW5kZXhPZigiYmFja2dyb3VuZCIpfHwoaltiXT0iaW5oZXJpdCIpLGcmJiJzZXQiaW4gZyYmdm9pZCAwPT09KGM9Zy5zZXQoYSxjLGQpKXx8KGk/ai5zZXRQcm9wZXJ0eShiLGMpOmpbYl09YykpLHZvaWQgMCl9fSxjc3M6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnLGg9ci5jYW1lbENhc2UoYiksaT1SYS50ZXN0KGIpO3JldHVybiBpfHwoYj1YYShoKSksZz1yLmNzc0hvb2tzW2JdfHxyLmNzc0hvb2tzW2hdLGcmJiJnZXQiaW4gZyYmKGU9Zy5nZXQoYSwhMCxjKSksdm9pZCAwPT09ZSYmKGU9T2EoYSxiLGQpKSwibm9ybWFsIj09PWUmJmIgaW4gVGEmJihlPVRhW2JdKSwiIj09PWN8fGM/KGY9cGFyc2VGbG9hdChlKSxjPT09ITB8fGlzRmluaXRlKGYpP2Z8fDA6ZSk6ZX19KSxyLmVhY2goWyJoZWlnaHQiLCJ3aWR0aCJdLGZ1bmN0aW9uKGEsYil7ci5jc3NIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGEsYyxkKXtpZihjKXJldHVybiFRYS50ZXN0KHIuY3NzKGEsImRpc3BsYXkiKSl8fGEuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgmJmEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg/JGEoYSxiLGQpOmVhKGEsU2EsZnVuY3Rpb24oKXtyZXR1cm4gJGEoYSxiLGQpfSl9LHNldDpmdW5jdGlvbihhLGMsZCl7dmFyIGUsZj1kJiZOYShhKSxnPWQmJlphKGEsYixkLCJib3JkZXItYm94Ij09PXIuY3NzKGEsImJveFNpemluZyIsITEsZiksZik7cmV0dXJuIGcmJihlPWJhLmV4ZWMoYykpJiYicHgiIT09KGVbM118fCJweCIpJiYoYS5zdHlsZVtiXT1jLGM9ci5jc3MoYSxiKSksWWEoYSxjLGcpfX19KSxyLmNzc0hvb2tzLm1hcmdpbkxlZnQ9UGEoby5yZWxpYWJsZU1hcmdpbkxlZnQsZnVuY3Rpb24oYSxiKXtpZihiKXJldHVybihwYXJzZUZsb2F0KE9hKGEsIm1hcmdpbkxlZnQiKSl8fGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdC1lYShhLHttYXJnaW5MZWZ0OjB9LGZ1bmN0aW9uKCl7cmV0dXJuIGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdH0pKSsicHgifSksci5lYWNoKHttYXJnaW46IiIscGFkZGluZzoiIixib3JkZXI6IldpZHRoIn0sZnVuY3Rpb24oYSxiKXtyLmNzc0hvb2tzW2ErYl09e2V4cGFuZDpmdW5jdGlvbihjKXtmb3IodmFyIGQ9MCxlPXt9LGY9InN0cmluZyI9PXR5cGVvZiBjP2Muc3BsaXQoIiAiKTpbY107ZDw0O2QrKyllW2ErY2FbZF0rYl09ZltkXXx8ZltkLTJdfHxmWzBdO3JldHVybiBlfX0sTGEudGVzdChhKXx8KHIuY3NzSG9va3NbYStiXS5zZXQ9WWEpfSksci5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihhLGIpe3JldHVybiBUKHRoaXMsZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj17fSxnPTA7aWYoQXJyYXkuaXNBcnJheShiKSl7Zm9yKGQ9TmEoYSksZT1iLmxlbmd0aDtnPGU7ZysrKWZbYltnXV09ci5jc3MoYSxiW2ddLCExLGQpO3JldHVybiBmfXJldHVybiB2b2lkIDAhPT1jP3Iuc3R5bGUoYSxiLGMpOnIuY3NzKGEsYil9LGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfX0pO2Z1bmN0aW9uIF9hKGEsYixjLGQsZSl7cmV0dXJuIG5ldyBfYS5wcm90b3R5cGUuaW5pdChhLGIsYyxkLGUpfXIuVHdlZW49X2EsX2EucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpfYSxpbml0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmVsZW09YSx0aGlzLnByb3A9Yyx0aGlzLmVhc2luZz1lfHxyLmVhc2luZy5fZGVmYXVsdCx0aGlzLm9wdGlvbnM9Yix0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9ZCx0aGlzLnVuaXQ9Znx8KHIuY3NzTnVtYmVyW2NdPyIiOiJweCIpfSxjdXI6ZnVuY3Rpb24oKXt2YXIgYT1fYS5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gYSYmYS5nZXQ/YS5nZXQodGhpcyk6X2EucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGEpe3ZhciBiLGM9X2EucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIHRoaXMub3B0aW9ucy5kdXJhdGlvbj90aGlzLnBvcz1iPXIuZWFzaW5nW3RoaXMuZWFzaW5nXShhLHRoaXMub3B0aW9ucy5kdXJhdGlvbiphLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOnRoaXMucG9zPWI9YSx0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqYit0aGlzLnN0YXJ0LHRoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSxjJiZjLnNldD9jLnNldCh0aGlzKTpfYS5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLHRoaXN9fSxfYS5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGU9X2EucHJvdG90eXBlLF9hLnByb3BIb29rcz17X2RlZmF1bHQ6e2dldDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gMSE9PWEuZWxlbS5ub2RlVHlwZXx8bnVsbCE9YS5lbGVtW2EucHJvcF0mJm51bGw9PWEuZWxlbS5zdHlsZVthLnByb3BdP2EuZWxlbVthLnByb3BdOihiPXIuY3NzKGEuZWxlbSxhLnByb3AsIiIpLGImJiJhdXRvIiE9PWI/YjowKX0sc2V0OmZ1bmN0aW9uKGEpe3IuZnguc3RlcFthLnByb3BdP3IuZnguc3RlcFthLnByb3BdKGEpOjEhPT1hLmVsZW0ubm9kZVR5cGV8fG51bGw9PWEuZWxlbS5zdHlsZVtyLmNzc1Byb3BzW2EucHJvcF1dJiYhci5jc3NIb29rc1thLnByb3BdP2EuZWxlbVthLnByb3BdPWEubm93OnIuc3R5bGUoYS5lbGVtLGEucHJvcCxhLm5vdythLnVuaXQpfX19LF9hLnByb3BIb29rcy5zY3JvbGxUb3A9X2EucHJvcEhvb2tzLnNjcm9sbExlZnQ9e3NldDpmdW5jdGlvbihhKXthLmVsZW0ubm9kZVR5cGUmJmEuZWxlbS5wYXJlbnROb2RlJiYoYS5lbGVtW2EucHJvcF09YS5ub3cpfX0sci5lYXNpbmc9e2xpbmVhcjpmdW5jdGlvbihhKXtyZXR1cm4gYX0sc3dpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuLjUtTWF0aC5jb3MoYSpNYXRoLlBJKS8yfSxfZGVmYXVsdDoic3dpbmcifSxyLmZ4PV9hLnByb3RvdHlwZS5pbml0LHIuZnguc3RlcD17fTt2YXIgYWIsYmIsY2I9L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLGRiPS9xdWV1ZUhvb2tzJC87ZnVuY3Rpb24gZWIoKXtiYiYmKGQuaGlkZGVuPT09ITEmJmEucmVxdWVzdEFuaW1hdGlvbkZyYW1lP2EucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGViKTphLnNldFRpbWVvdXQoZWIsci5meC5pbnRlcnZhbCksci5meC50aWNrKCkpfWZ1bmN0aW9uIGZiKCl7cmV0dXJuIGEuc2V0VGltZW91dChmdW5jdGlvbigpe2FiPXZvaWQgMH0pLGFiPXIubm93KCl9ZnVuY3Rpb24gZ2IoYSxiKXt2YXIgYyxkPTAsZT17aGVpZ2h0OmF9O2ZvcihiPWI/MTowO2Q8NDtkKz0yLWIpYz1jYVtkXSxlWyJtYXJnaW4iK2NdPWVbInBhZGRpbmciK2NdPWE7cmV0dXJuIGImJihlLm9wYWNpdHk9ZS53aWR0aD1hKSxlfWZ1bmN0aW9uIGhiKGEsYixjKXtmb3IodmFyIGQsZT0oa2IudHdlZW5lcnNbYl18fFtdKS5jb25jYXQoa2IudHdlZW5lcnNbIioiXSksZj0wLGc9ZS5sZW5ndGg7ZjxnO2YrKylpZihkPWVbZl0uY2FsbChjLGIsYSkpcmV0dXJuIGR9ZnVuY3Rpb24gaWIoYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGssbD0id2lkdGgiaW4gYnx8ImhlaWdodCJpbiBiLG09dGhpcyxuPXt9LG89YS5zdHlsZSxwPWEubm9kZVR5cGUmJmRhKGEpLHE9Vy5nZXQoYSwiZnhzaG93Iik7Yy5xdWV1ZXx8KGc9ci5fcXVldWVIb29rcyhhLCJmeCIpLG51bGw9PWcudW5xdWV1ZWQmJihnLnVucXVldWVkPTAsaD1nLmVtcHR5LmZpcmUsZy5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7Zy51bnF1ZXVlZHx8aCgpfSksZy51bnF1ZXVlZCsrLG0uYWx3YXlzKGZ1bmN0aW9uKCl7bS5hbHdheXMoZnVuY3Rpb24oKXtnLnVucXVldWVkLS0sci5xdWV1ZShhLCJmeCIpLmxlbmd0aHx8Zy5lbXB0eS5maXJlKCl9KX0pKTtmb3IoZCBpbiBiKWlmKGU9YltkXSxjYi50ZXN0KGUpKXtpZihkZWxldGUgYltkXSxmPWZ8fCJ0b2dnbGUiPT09ZSxlPT09KHA/ImhpZGUiOiJzaG93Iikpe2lmKCJzaG93IiE9PWV8fCFxfHx2b2lkIDA9PT1xW2RdKWNvbnRpbnVlO3A9ITB9bltkXT1xJiZxW2RdfHxyLnN0eWxlKGEsZCl9aWYoaT0hci5pc0VtcHR5T2JqZWN0KGIpLGl8fCFyLmlzRW1wdHlPYmplY3Qobikpe2wmJjE9PT1hLm5vZGVUeXBlJiYoYy5vdmVyZmxvdz1bby5vdmVyZmxvdyxvLm92ZXJmbG93WCxvLm92ZXJmbG93WV0saj1xJiZxLmRpc3BsYXksbnVsbD09aiYmKGo9Vy5nZXQoYSwiZGlzcGxheSIpKSxrPXIuY3NzKGEsImRpc3BsYXkiKSwibm9uZSI9PT1rJiYoaj9rPWo6KGlhKFthXSwhMCksaj1hLnN0eWxlLmRpc3BsYXl8fGosaz1yLmNzcyhhLCJkaXNwbGF5IiksaWEoW2FdKSkpLCgiaW5saW5lIj09PWt8fCJpbmxpbmUtYmxvY2siPT09ayYmbnVsbCE9aikmJiJub25lIj09PXIuY3NzKGEsImZsb2F0IikmJihpfHwobS5kb25lKGZ1bmN0aW9uKCl7by5kaXNwbGF5PWp9KSxudWxsPT1qJiYoaz1vLmRpc3BsYXksaj0ibm9uZSI9PT1rPyIiOmspKSxvLmRpc3BsYXk9ImlubGluZS1ibG9jayIpKSxjLm92ZXJmbG93JiYoby5vdmVyZmxvdz0iaGlkZGVuIixtLmFsd2F5cyhmdW5jdGlvbigpe28ub3ZlcmZsb3c9Yy5vdmVyZmxvd1swXSxvLm92ZXJmbG93WD1jLm92ZXJmbG93WzFdLG8ub3ZlcmZsb3dZPWMub3ZlcmZsb3dbMl19KSksaT0hMTtmb3IoZCBpbiBuKWl8fChxPyJoaWRkZW4iaW4gcSYmKHA9cS5oaWRkZW4pOnE9Vy5hY2Nlc3MoYSwiZnhzaG93Iix7ZGlzcGxheTpqfSksZiYmKHEuaGlkZGVuPSFwKSxwJiZpYShbYV0sITApLG0uZG9uZShmdW5jdGlvbigpe3B8fGlhKFthXSksVy5yZW1vdmUoYSwiZnhzaG93Iik7Zm9yKGQgaW4gbilyLnN0eWxlKGEsZCxuW2RdKX0pKSxpPWhiKHA/cVtkXTowLGQsbSksZCBpbiBxfHwocVtkXT1pLnN0YXJ0LHAmJihpLmVuZD1pLnN0YXJ0LGkuc3RhcnQ9MCkpfX1mdW5jdGlvbiBqYihhLGIpe3ZhciBjLGQsZSxmLGc7Zm9yKGMgaW4gYSlpZihkPXIuY2FtZWxDYXNlKGMpLGU9YltkXSxmPWFbY10sQXJyYXkuaXNBcnJheShmKSYmKGU9ZlsxXSxmPWFbY109ZlswXSksYyE9PWQmJihhW2RdPWYsZGVsZXRlIGFbY10pLGc9ci5jc3NIb29rc1tkXSxnJiYiZXhwYW5kImluIGcpe2Y9Zy5leHBhbmQoZiksZGVsZXRlIGFbZF07Zm9yKGMgaW4gZiljIGluIGF8fChhW2NdPWZbY10sYltjXT1lKX1lbHNlIGJbZF09ZX1mdW5jdGlvbiBrYihhLGIsYyl7dmFyIGQsZSxmPTAsZz1rYi5wcmVmaWx0ZXJzLmxlbmd0aCxoPXIuRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgaS5lbGVtfSksaT1mdW5jdGlvbigpe2lmKGUpcmV0dXJuITE7Zm9yKHZhciBiPWFifHxmYigpLGM9TWF0aC5tYXgoMCxqLnN0YXJ0VGltZStqLmR1cmF0aW9uLWIpLGQ9Yy9qLmR1cmF0aW9ufHwwLGY9MS1kLGc9MCxpPWoudHdlZW5zLmxlbmd0aDtnPGk7ZysrKWoudHdlZW5zW2ddLnJ1bihmKTtyZXR1cm4gaC5ub3RpZnlXaXRoKGEsW2osZixjXSksZjwxJiZpP2M6KGl8fGgubm90aWZ5V2l0aChhLFtqLDEsMF0pLGgucmVzb2x2ZVdpdGgoYSxbal0pLCExKX0saj1oLnByb21pc2Uoe2VsZW06YSxwcm9wczpyLmV4dGVuZCh7fSxiKSxvcHRzOnIuZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9LGVhc2luZzpyLmVhc2luZy5fZGVmYXVsdH0sYyksb3JpZ2luYWxQcm9wZXJ0aWVzOmIsb3JpZ2luYWxPcHRpb25zOmMsc3RhcnRUaW1lOmFifHxmYigpLGR1cmF0aW9uOmMuZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9ci5Ud2VlbihhLGoub3B0cyxiLGMsai5vcHRzLnNwZWNpYWxFYXNpbmdbYl18fGoub3B0cy5lYXNpbmcpO3JldHVybiBqLnR3ZWVucy5wdXNoKGQpLGR9LHN0b3A6ZnVuY3Rpb24oYil7dmFyIGM9MCxkPWI/ai50d2VlbnMubGVuZ3RoOjA7aWYoZSlyZXR1cm4gdGhpcztmb3IoZT0hMDtjPGQ7YysrKWoudHdlZW5zW2NdLnJ1bigxKTtyZXR1cm4gYj8oaC5ub3RpZnlXaXRoKGEsW2osMSwwXSksaC5yZXNvbHZlV2l0aChhLFtqLGJdKSk6aC5yZWplY3RXaXRoKGEsW2osYl0pLHRoaXN9fSksaz1qLnByb3BzO2ZvcihqYihrLGoub3B0cy5zcGVjaWFsRWFzaW5nKTtmPGc7ZisrKWlmKGQ9a2IucHJlZmlsdGVyc1tmXS5jYWxsKGosYSxrLGoub3B0cykpcmV0dXJuIHIuaXNGdW5jdGlvbihkLnN0b3ApJiYoci5fcXVldWVIb29rcyhqLmVsZW0sai5vcHRzLnF1ZXVlKS5zdG9wPXIucHJveHkoZC5zdG9wLGQpKSxkO3JldHVybiByLm1hcChrLGhiLGopLHIuaXNGdW5jdGlvbihqLm9wdHMuc3RhcnQpJiZqLm9wdHMuc3RhcnQuY2FsbChhLGopLGoucHJvZ3Jlc3Moai5vcHRzLnByb2dyZXNzKS5kb25lKGoub3B0cy5kb25lLGoub3B0cy5jb21wbGV0ZSkuZmFpbChqLm9wdHMuZmFpbCkuYWx3YXlzKGoub3B0cy5hbHdheXMpLHIuZngudGltZXIoci5leHRlbmQoaSx7ZWxlbTphLGFuaW06aixxdWV1ZTpqLm9wdHMucXVldWV9KSksan1yLkFuaW1hdGlvbj1yLmV4dGVuZChrYix7dHdlZW5lcnM6eyIqIjpbZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNyZWF0ZVR3ZWVuKGEsYik7cmV0dXJuIGZhKGMuZWxlbSxhLGJhLmV4ZWMoYiksYyksY31dfSx0d2VlbmVyOmZ1bmN0aW9uKGEsYil7ci5pc0Z1bmN0aW9uKGEpPyhiPWEsYT1bIioiXSk6YT1hLm1hdGNoKEwpO2Zvcih2YXIgYyxkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKWM9YVtkXSxrYi50d2VlbmVyc1tjXT1rYi50d2VlbmVyc1tjXXx8W10sa2IudHdlZW5lcnNbY10udW5zaGlmdChiKX0scHJlZmlsdGVyczpbaWJdLHByZWZpbHRlcjpmdW5jdGlvbihhLGIpe2I/a2IucHJlZmlsdGVycy51bnNoaWZ0KGEpOmtiLnByZWZpbHRlcnMucHVzaChhKX19KSxyLnNwZWVkPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hJiYib2JqZWN0Ij09dHlwZW9mIGE/ci5leHRlbmQoe30sYSk6e2NvbXBsZXRlOmN8fCFjJiZifHxyLmlzRnVuY3Rpb24oYSkmJmEsZHVyYXRpb246YSxlYXNpbmc6YyYmYnx8YiYmIXIuaXNGdW5jdGlvbihiKSYmYn07cmV0dXJuIHIuZngub2ZmP2QuZHVyYXRpb249MDoibnVtYmVyIiE9dHlwZW9mIGQuZHVyYXRpb24mJihkLmR1cmF0aW9uIGluIHIuZnguc3BlZWRzP2QuZHVyYXRpb249ci5meC5zcGVlZHNbZC5kdXJhdGlvbl06ZC5kdXJhdGlvbj1yLmZ4LnNwZWVkcy5fZGVmYXVsdCksbnVsbCE9ZC5xdWV1ZSYmZC5xdWV1ZSE9PSEwfHwoZC5xdWV1ZT0iZngiKSxkLm9sZD1kLmNvbXBsZXRlLGQuY29tcGxldGU9ZnVuY3Rpb24oKXtyLmlzRnVuY3Rpb24oZC5vbGQpJiZkLm9sZC5jYWxsKHRoaXMpLGQucXVldWUmJnIuZGVxdWV1ZSh0aGlzLGQucXVldWUpfSxkfSxyLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmZpbHRlcihkYSkuY3NzKCJvcGFjaXR5IiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTpifSxhLGMsZCl9LGFuaW1hdGU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ci5pc0VtcHR5T2JqZWN0KGEpLGY9ci5zcGVlZChiLGMsZCksZz1mdW5jdGlvbigpe3ZhciBiPWtiKHRoaXMsci5leHRlbmQoe30sYSksZik7KGV8fFcuZ2V0KHRoaXMsImZpbmlzaCIpKSYmYi5zdG9wKCEwKX07cmV0dXJuIGcuZmluaXNoPWcsZXx8Zi5xdWV1ZT09PSExP3RoaXMuZWFjaChnKTp0aGlzLnF1ZXVlKGYucXVldWUsZyl9LHN0b3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWZ1bmN0aW9uKGEpe3ZhciBiPWEuc3RvcDtkZWxldGUgYS5zdG9wLGIoYyl9O3JldHVybiJzdHJpbmciIT10eXBlb2YgYSYmKGM9YixiPWEsYT12b2lkIDApLGImJmEhPT0hMSYmdGhpcy5xdWV1ZShhfHwiZngiLFtdKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj0hMCxlPW51bGwhPWEmJmErInF1ZXVlSG9va3MiLGY9ci50aW1lcnMsZz1XLmdldCh0aGlzKTtpZihlKWdbZV0mJmdbZV0uc3RvcCYmZChnW2VdKTtlbHNlIGZvcihlIGluIGcpZ1tlXSYmZ1tlXS5zdG9wJiZkYi50ZXN0KGUpJiZkKGdbZV0pO2ZvcihlPWYubGVuZ3RoO2UtLTspZltlXS5lbGVtIT09dGhpc3x8bnVsbCE9YSYmZltlXS5xdWV1ZSE9PWF8fChmW2VdLmFuaW0uc3RvcChjKSxiPSExLGYuc3BsaWNlKGUsMSkpOyFiJiZjfHxyLmRlcXVldWUodGhpcyxhKX0pfSxmaW5pc2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT0hMSYmKGE9YXx8ImZ4IiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsYz1XLmdldCh0aGlzKSxkPWNbYSsicXVldWUiXSxlPWNbYSsicXVldWVIb29rcyJdLGY9ci50aW1lcnMsZz1kP2QubGVuZ3RoOjA7Zm9yKGMuZmluaXNoPSEwLHIucXVldWUodGhpcyxhLFtdKSxlJiZlLnN0b3AmJmUuc3RvcC5jYWxsKHRoaXMsITApLGI9Zi5sZW5ndGg7Yi0tOylmW2JdLmVsZW09PT10aGlzJiZmW2JdLnF1ZXVlPT09YSYmKGZbYl0uYW5pbS5zdG9wKCEwKSxmLnNwbGljZShiLDEpKTtmb3IoYj0wO2I8ZztiKyspZFtiXSYmZFtiXS5maW5pc2gmJmRbYl0uZmluaXNoLmNhbGwodGhpcyk7ZGVsZXRlIGMuZmluaXNofSl9fSksci5lYWNoKFsidG9nZ2xlIiwic2hvdyIsImhpZGUiXSxmdW5jdGlvbihhLGIpe3ZhciBjPXIuZm5bYl07ci5mbltiXT1mdW5jdGlvbihhLGQsZSl7cmV0dXJuIG51bGw9PWF8fCJib29sZWFuIj09dHlwZW9mIGE/Yy5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dGhpcy5hbmltYXRlKGdiKGIsITApLGEsZCxlKX19KSxyLmVhY2goe3NsaWRlRG93bjpnYigic2hvdyIpLHNsaWRlVXA6Z2IoImhpZGUiKSxzbGlkZVRvZ2dsZTpnYigidG9nZ2xlIiksZmFkZUluOntvcGFjaXR5OiJzaG93In0sZmFkZU91dDp7b3BhY2l0eToiaGlkZSJ9LGZhZGVUb2dnbGU6e29wYWNpdHk6InRvZ2dsZSJ9fSxmdW5jdGlvbihhLGIpe3IuZm5bYV09ZnVuY3Rpb24oYSxjLGQpe3JldHVybiB0aGlzLmFuaW1hdGUoYixhLGMsZCl9fSksci50aW1lcnM9W10sci5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIGEsYj0wLGM9ci50aW1lcnM7Zm9yKGFiPXIubm93KCk7YjxjLmxlbmd0aDtiKyspYT1jW2JdLGEoKXx8Y1tiXSE9PWF8fGMuc3BsaWNlKGItLSwxKTtjLmxlbmd0aHx8ci5meC5zdG9wKCksYWI9dm9pZCAwfSxyLmZ4LnRpbWVyPWZ1bmN0aW9uKGEpe3IudGltZXJzLnB1c2goYSksci5meC5zdGFydCgpfSxyLmZ4LmludGVydmFsPTEzLHIuZnguc3RhcnQ9ZnVuY3Rpb24oKXtiYnx8KGJiPSEwLGViKCkpfSxyLmZ4LnN0b3A9ZnVuY3Rpb24oKXtiYj1udWxsfSxyLmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSxyLmZuLmRlbGF5PWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGI9ci5meD9yLmZ4LnNwZWVkc1tiXXx8YjpiLGM9Y3x8ImZ4Iix0aGlzLnF1ZXVlKGMsZnVuY3Rpb24oYyxkKXt2YXIgZT1hLnNldFRpbWVvdXQoYyxiKTtkLnN0b3A9ZnVuY3Rpb24oKXthLmNsZWFyVGltZW91dChlKX19KX0sZnVuY3Rpb24oKXt2YXIgYT1kLmNyZWF0ZUVsZW1lbnQoImlucHV0IiksYj1kLmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLGM9Yi5hcHBlbmRDaGlsZChkLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTthLnR5cGU9ImNoZWNrYm94IixvLmNoZWNrT249IiIhPT1hLnZhbHVlLG8ub3B0U2VsZWN0ZWQ9Yy5zZWxlY3RlZCxhPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxhLnZhbHVlPSJ0IixhLnR5cGU9InJhZGlvIixvLnJhZGlvVmFsdWU9InQiPT09YS52YWx1ZX0oKTt2YXIgbGIsbWI9ci5leHByLmF0dHJIYW5kbGU7ci5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVCh0aGlzLHIuYXR0cixhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ci5yZW1vdmVBdHRyKHRoaXMsYSl9KX19KSxyLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWEubm9kZVR5cGU7aWYoMyE9PWYmJjghPT1mJiYyIT09ZilyZXR1cm4idW5kZWZpbmVkIj09dHlwZW9mIGEuZ2V0QXR0cmlidXRlP3IucHJvcChhLGIsYyk6KDE9PT1mJiZyLmlzWE1MRG9jKGEpfHwoZT1yLmF0dHJIb29rc1tiLnRvTG93ZXJDYXNlKCldfHwoci5leHByLm1hdGNoLmJvb2wudGVzdChiKT9sYjp2b2lkIDApKSx2b2lkIDAhPT1jP251bGw9PT1jP3ZvaWQgci5yZW1vdmVBdHRyKGEsYik6ZSYmInNldCJpbiBlJiZ2b2lkIDAhPT0oZD1lLnNldChhLGMsYikpP2Q6KGEuc2V0QXR0cmlidXRlKGIsYysiIiksYyk6ZSYmImdldCJpbiBlJiZudWxsIT09KGQ9ZS5nZXQoYSxiKSk/ZDooZD1yLmZpbmQuYXR0cihhLGIpLApudWxsPT1kP3ZvaWQgMDpkKSl9LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGEsYil7aWYoIW8ucmFkaW9WYWx1ZSYmInJhZGlvIj09PWImJkIoYSwiaW5wdXQiKSl7dmFyIGM9YS52YWx1ZTtyZXR1cm4gYS5zZXRBdHRyaWJ1dGUoInR5cGUiLGIpLGMmJihhLnZhbHVlPWMpLGJ9fX19LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTAsZT1iJiZiLm1hdGNoKEwpO2lmKGUmJjE9PT1hLm5vZGVUeXBlKXdoaWxlKGM9ZVtkKytdKWEucmVtb3ZlQXR0cmlidXRlKGMpfX0pLGxiPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiPT09ITE/ci5yZW1vdmVBdHRyKGEsYyk6YS5zZXRBdHRyaWJ1dGUoYyxjKSxjfX0sci5lYWNoKHIuZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCgvXHcrL2cpLGZ1bmN0aW9uKGEsYil7dmFyIGM9bWJbYl18fHIuZmluZC5hdHRyO21iW2JdPWZ1bmN0aW9uKGEsYixkKXt2YXIgZSxmLGc9Yi50b0xvd2VyQ2FzZSgpO3JldHVybiBkfHwoZj1tYltnXSxtYltnXT1lLGU9bnVsbCE9YyhhLGIsZCk/ZzpudWxsLG1iW2ddPWYpLGV9fSk7dmFyIG5iPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksb2I9L14oPzphfGFyZWEpJC9pO3IuZm4uZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFQodGhpcyxyLnByb3AsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2RlbGV0ZSB0aGlzW3IucHJvcEZpeFthXXx8YV19KX19KSxyLmV4dGVuZCh7cHJvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWEubm9kZVR5cGU7aWYoMyE9PWYmJjghPT1mJiYyIT09ZilyZXR1cm4gMT09PWYmJnIuaXNYTUxEb2MoYSl8fChiPXIucHJvcEZpeFtiXXx8YixlPXIucHJvcEhvb2tzW2JdKSx2b2lkIDAhPT1jP2UmJiJzZXQiaW4gZSYmdm9pZCAwIT09KGQ9ZS5zZXQoYSxjLGIpKT9kOmFbYl09YzplJiYiZ2V0ImluIGUmJm51bGwhPT0oZD1lLmdldChhLGIpKT9kOmFbYl19LHByb3BIb29rczp7dGFiSW5kZXg6e2dldDpmdW5jdGlvbihhKXt2YXIgYj1yLmZpbmQuYXR0cihhLCJ0YWJpbmRleCIpO3JldHVybiBiP3BhcnNlSW50KGIsMTApOm5iLnRlc3QoYS5ub2RlTmFtZSl8fG9iLnRlc3QoYS5ub2RlTmFtZSkmJmEuaHJlZj8wOi0xfX19LHByb3BGaXg6eyJmb3IiOiJodG1sRm9yIiwiY2xhc3MiOiJjbGFzc05hbWUifX0pLG8ub3B0U2VsZWN0ZWR8fChyLnByb3BIb29rcy5zZWxlY3RlZD17Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxudWxsfSxzZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnROb2RlO2ImJihiLnNlbGVjdGVkSW5kZXgsYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCl9fSksci5lYWNoKFsidGFiSW5kZXgiLCJyZWFkT25seSIsIm1heExlbmd0aCIsImNlbGxTcGFjaW5nIiwiY2VsbFBhZGRpbmciLCJyb3dTcGFuIiwiY29sU3BhbiIsInVzZU1hcCIsImZyYW1lQm9yZGVyIiwiY29udGVudEVkaXRhYmxlIl0sZnVuY3Rpb24oKXtyLnByb3BGaXhbdGhpcy50b0xvd2VyQ2FzZSgpXT10aGlzfSk7ZnVuY3Rpb24gcGIoYSl7dmFyIGI9YS5tYXRjaChMKXx8W107cmV0dXJuIGIuam9pbigiICIpfWZ1bmN0aW9uIHFiKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZSYmYS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIifXIuZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpPTA7aWYoci5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7cih0aGlzKS5hZGRDbGFzcyhhLmNhbGwodGhpcyxiLHFiKHRoaXMpKSl9KTtpZigic3RyaW5nIj09dHlwZW9mIGEmJmEpe2I9YS5tYXRjaChMKXx8W107d2hpbGUoYz10aGlzW2krK10paWYoZT1xYihjKSxkPTE9PT1jLm5vZGVUeXBlJiYiICIrcGIoZSkrIiAiKXtnPTA7d2hpbGUoZj1iW2crK10pZC5pbmRleE9mKCIgIitmKyIgIik8MCYmKGQrPWYrIiAiKTtoPXBiKGQpLGUhPT1oJiZjLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGgpfX1yZXR1cm4gdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaT0wO2lmKHIuaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe3IodGhpcykucmVtb3ZlQ2xhc3MoYS5jYWxsKHRoaXMsYixxYih0aGlzKSkpfSk7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuYXR0cigiY2xhc3MiLCIiKTtpZigic3RyaW5nIj09dHlwZW9mIGEmJmEpe2I9YS5tYXRjaChMKXx8W107d2hpbGUoYz10aGlzW2krK10paWYoZT1xYihjKSxkPTE9PT1jLm5vZGVUeXBlJiYiICIrcGIoZSkrIiAiKXtnPTA7d2hpbGUoZj1iW2crK10pd2hpbGUoZC5pbmRleE9mKCIgIitmKyIgIik+LTEpZD1kLnJlcGxhY2UoIiAiK2YrIiAiLCIgIik7aD1wYihkKSxlIT09aCYmYy5zZXRBdHRyaWJ1dGUoImNsYXNzIixoKX19cmV0dXJuIHRoaXN9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGEsYil7dmFyIGM9dHlwZW9mIGE7cmV0dXJuImJvb2xlYW4iPT10eXBlb2YgYiYmInN0cmluZyI9PT1jP2I/dGhpcy5hZGRDbGFzcyhhKTp0aGlzLnJlbW92ZUNsYXNzKGEpOnIuaXNGdW5jdGlvbihhKT90aGlzLmVhY2goZnVuY3Rpb24oYyl7cih0aGlzKS50b2dnbGVDbGFzcyhhLmNhbGwodGhpcyxjLHFiKHRoaXMpLGIpLGIpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsZCxlLGY7aWYoInN0cmluZyI9PT1jKXtkPTAsZT1yKHRoaXMpLGY9YS5tYXRjaChMKXx8W107d2hpbGUoYj1mW2QrK10pZS5oYXNDbGFzcyhiKT9lLnJlbW92ZUNsYXNzKGIpOmUuYWRkQ2xhc3MoYil9ZWxzZSB2b2lkIDAhPT1hJiYiYm9vbGVhbiIhPT1jfHwoYj1xYih0aGlzKSxiJiZXLnNldCh0aGlzLCJfX2NsYXNzTmFtZV9fIixiKSx0aGlzLnNldEF0dHJpYnV0ZSYmdGhpcy5zZXRBdHRyaWJ1dGUoImNsYXNzIixifHxhPT09ITE/IiI6Vy5nZXQodGhpcywiX19jbGFzc05hbWVfXyIpfHwiIikpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZD0wO2I9IiAiK2ErIiAiO3doaWxlKGM9dGhpc1tkKytdKWlmKDE9PT1jLm5vZGVUeXBlJiYoIiAiK3BiKHFiKGMpKSsiICIpLmluZGV4T2YoYik+LTEpcmV0dXJuITA7cmV0dXJuITF9fSk7dmFyIHJiPS9cci9nO3IuZm4uZXh0ZW5kKHt2YWw6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU9dGhpc1swXTt7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZD1yLmlzRnVuY3Rpb24oYSksdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe3ZhciBlOzE9PT10aGlzLm5vZGVUeXBlJiYoZT1kP2EuY2FsbCh0aGlzLGMscih0aGlzKS52YWwoKSk6YSxudWxsPT1lP2U9IiI6Im51bWJlciI9PXR5cGVvZiBlP2UrPSIiOkFycmF5LmlzQXJyYXkoZSkmJihlPXIubWFwKGUsZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/IiI6YSsiIn0pKSxiPXIudmFsSG9va3NbdGhpcy50eXBlXXx8ci52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJiJzZXQiaW4gYiYmdm9pZCAwIT09Yi5zZXQodGhpcyxlLCJ2YWx1ZSIpfHwodGhpcy52YWx1ZT1lKSl9KTtpZihlKXJldHVybiBiPXIudmFsSG9va3NbZS50eXBlXXx8ci52YWxIb29rc1tlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJiJnZXQiaW4gYiYmdm9pZCAwIT09KGM9Yi5nZXQoZSwidmFsdWUiKSk/YzooYz1lLnZhbHVlLCJzdHJpbmciPT10eXBlb2YgYz9jLnJlcGxhY2UocmIsIiIpOm51bGw9PWM/IiI6Yyl9fX0pLHIuZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9ci5maW5kLmF0dHIoYSwidmFsdWUiKTtyZXR1cm4gbnVsbCE9Yj9iOnBiKHIudGV4dChhKSl9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihhKXt2YXIgYixjLGQsZT1hLm9wdGlvbnMsZj1hLnNlbGVjdGVkSW5kZXgsZz0ic2VsZWN0LW9uZSI9PT1hLnR5cGUsaD1nP251bGw6W10saT1nP2YrMTplLmxlbmd0aDtmb3IoZD1mPDA/aTpnP2Y6MDtkPGk7ZCsrKWlmKGM9ZVtkXSwoYy5zZWxlY3RlZHx8ZD09PWYpJiYhYy5kaXNhYmxlZCYmKCFjLnBhcmVudE5vZGUuZGlzYWJsZWR8fCFCKGMucGFyZW50Tm9kZSwib3B0Z3JvdXAiKSkpe2lmKGI9cihjKS52YWwoKSxnKXJldHVybiBiO2gucHVzaChiKX1yZXR1cm4gaH0sc2V0OmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPWEub3B0aW9ucyxmPXIubWFrZUFycmF5KGIpLGc9ZS5sZW5ndGg7d2hpbGUoZy0tKWQ9ZVtnXSwoZC5zZWxlY3RlZD1yLmluQXJyYXkoci52YWxIb29rcy5vcHRpb24uZ2V0KGQpLGYpPi0xKSYmKGM9ITApO3JldHVybiBjfHwoYS5zZWxlY3RlZEluZGV4PS0xKSxmfX19fSksci5lYWNoKFsicmFkaW8iLCJjaGVja2JveCJdLGZ1bmN0aW9uKCl7ci52YWxIb29rc1t0aGlzXT17c2V0OmZ1bmN0aW9uKGEsYil7aWYoQXJyYXkuaXNBcnJheShiKSlyZXR1cm4gYS5jaGVja2VkPXIuaW5BcnJheShyKGEpLnZhbCgpLGIpPi0xfX0sby5jaGVja09ufHwoci52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PT1hLmdldEF0dHJpYnV0ZSgidmFsdWUiKT8ib24iOmEudmFsdWV9KX0pO3ZhciBzYj0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC87ci5leHRlbmQoci5ldmVudCx7dHJpZ2dlcjpmdW5jdGlvbihiLGMsZSxmKXt2YXIgZyxoLGksaixrLG0sbixvPVtlfHxkXSxwPWwuY2FsbChiLCJ0eXBlIik/Yi50eXBlOmIscT1sLmNhbGwoYiwibmFtZXNwYWNlIik/Yi5uYW1lc3BhY2Uuc3BsaXQoIi4iKTpbXTtpZihoPWk9ZT1lfHxkLDMhPT1lLm5vZGVUeXBlJiY4IT09ZS5ub2RlVHlwZSYmIXNiLnRlc3QocCtyLmV2ZW50LnRyaWdnZXJlZCkmJihwLmluZGV4T2YoIi4iKT4tMSYmKHE9cC5zcGxpdCgiLiIpLHA9cS5zaGlmdCgpLHEuc29ydCgpKSxrPXAuaW5kZXhPZigiOiIpPDAmJiJvbiIrcCxiPWJbci5leHBhbmRvXT9iOm5ldyByLkV2ZW50KHAsIm9iamVjdCI9PXR5cGVvZiBiJiZiKSxiLmlzVHJpZ2dlcj1mPzI6MyxiLm5hbWVzcGFjZT1xLmpvaW4oIi4iKSxiLnJuYW1lc3BhY2U9Yi5uYW1lc3BhY2U/bmV3IFJlZ0V4cCgiKF58XFwuKSIrcS5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKTpudWxsLGIucmVzdWx0PXZvaWQgMCxiLnRhcmdldHx8KGIudGFyZ2V0PWUpLGM9bnVsbD09Yz9bYl06ci5tYWtlQXJyYXkoYyxbYl0pLG49ci5ldmVudC5zcGVjaWFsW3BdfHx7fSxmfHwhbi50cmlnZ2VyfHxuLnRyaWdnZXIuYXBwbHkoZSxjKSE9PSExKSl7aWYoIWYmJiFuLm5vQnViYmxlJiYhci5pc1dpbmRvdyhlKSl7Zm9yKGo9bi5kZWxlZ2F0ZVR5cGV8fHAsc2IudGVzdChqK3ApfHwoaD1oLnBhcmVudE5vZGUpO2g7aD1oLnBhcmVudE5vZGUpby5wdXNoKGgpLGk9aDtpPT09KGUub3duZXJEb2N1bWVudHx8ZCkmJm8ucHVzaChpLmRlZmF1bHRWaWV3fHxpLnBhcmVudFdpbmRvd3x8YSl9Zz0wO3doaWxlKChoPW9bZysrXSkmJiFiLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpYi50eXBlPWc+MT9qOm4uYmluZFR5cGV8fHAsbT0oVy5nZXQoaCwiZXZlbnRzIil8fHt9KVtiLnR5cGVdJiZXLmdldChoLCJoYW5kbGUiKSxtJiZtLmFwcGx5KGgsYyksbT1rJiZoW2tdLG0mJm0uYXBwbHkmJlUoaCkmJihiLnJlc3VsdD1tLmFwcGx5KGgsYyksYi5yZXN1bHQ9PT0hMSYmYi5wcmV2ZW50RGVmYXVsdCgpKTtyZXR1cm4gYi50eXBlPXAsZnx8Yi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8bi5fZGVmYXVsdCYmbi5fZGVmYXVsdC5hcHBseShvLnBvcCgpLGMpIT09ITF8fCFVKGUpfHxrJiZyLmlzRnVuY3Rpb24oZVtwXSkmJiFyLmlzV2luZG93KGUpJiYoaT1lW2tdLGkmJihlW2tdPW51bGwpLHIuZXZlbnQudHJpZ2dlcmVkPXAsZVtwXSgpLHIuZXZlbnQudHJpZ2dlcmVkPXZvaWQgMCxpJiYoZVtrXT1pKSksYi5yZXN1bHR9fSxzaW11bGF0ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ci5leHRlbmQobmV3IHIuRXZlbnQsYyx7dHlwZTphLGlzU2ltdWxhdGVkOiEwfSk7ci5ldmVudC50cmlnZ2VyKGQsbnVsbCxiKX19KSxyLmZuLmV4dGVuZCh7dHJpZ2dlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtyLmV2ZW50LnRyaWdnZXIoYSxiLHRoaXMpfSl9LHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpc1swXTtpZihjKXJldHVybiByLmV2ZW50LnRyaWdnZXIoYSxiLGMsITApfX0pLHIuZWFjaCgiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IHJlc2l6ZSBzY3JvbGwgY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBjb250ZXh0bWVudSIuc3BsaXQoIiAiKSxmdW5jdGlvbihhLGIpe3IuZm5bYl09ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4wP3RoaXMub24oYixudWxsLGEsYyk6dGhpcy50cmlnZ2VyKGIpfX0pLHIuZm4uZXh0ZW5kKHtob3ZlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoYSkubW91c2VsZWF2ZShifHxhKX19KSxvLmZvY3VzaW49Im9uZm9jdXNpbiJpbiBhLG8uZm9jdXNpbnx8ci5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe3IuZXZlbnQuc2ltdWxhdGUoYixhLnRhcmdldCxyLmV2ZW50LmZpeChhKSl9O3IuZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1XLmFjY2VzcyhkLGIpO2V8fGQuYWRkRXZlbnRMaXN0ZW5lcihhLGMsITApLFcuYWNjZXNzKGQsYiwoZXx8MCkrMSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLGU9Vy5hY2Nlc3MoZCxiKS0xO2U/Vy5hY2Nlc3MoZCxiLGUpOihkLnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxjLCEwKSxXLnJlbW92ZShkLGIpKX19fSk7dmFyIHRiPWEubG9jYXRpb24sdWI9ci5ub3coKSx2Yj0vXD8vO3IucGFyc2VYTUw9ZnVuY3Rpb24oYil7dmFyIGM7aWYoIWJ8fCJzdHJpbmciIT10eXBlb2YgYilyZXR1cm4gbnVsbDt0cnl7Yz0obmV3IGEuRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcoYiwidGV4dC94bWwiKX1jYXRjaChkKXtjPXZvaWQgMH1yZXR1cm4gYyYmIWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RofHxyLmVycm9yKCJJbnZhbGlkIFhNTDogIitiKSxjfTt2YXIgd2I9L1xbXF0kLyx4Yj0vXHI/XG4vZyx5Yj0vXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksemI9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO2Z1bmN0aW9uIEFiKGEsYixjLGQpe3ZhciBlO2lmKEFycmF5LmlzQXJyYXkoYikpci5lYWNoKGIsZnVuY3Rpb24oYixlKXtjfHx3Yi50ZXN0KGEpP2QoYSxlKTpBYihhKyJbIisoIm9iamVjdCI9PXR5cGVvZiBlJiZudWxsIT1lP2I6IiIpKyJdIixlLGMsZCl9KTtlbHNlIGlmKGN8fCJvYmplY3QiIT09ci50eXBlKGIpKWQoYSxiKTtlbHNlIGZvcihlIGluIGIpQWIoYSsiWyIrZSsiXSIsYltlXSxjLGQpfXIucGFyYW09ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9ZnVuY3Rpb24oYSxiKXt2YXIgYz1yLmlzRnVuY3Rpb24oYik/YigpOmI7ZFtkLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGEpKyI9IitlbmNvZGVVUklDb21wb25lbnQobnVsbD09Yz8iIjpjKX07aWYoQXJyYXkuaXNBcnJheShhKXx8YS5qcXVlcnkmJiFyLmlzUGxhaW5PYmplY3QoYSkpci5lYWNoKGEsZnVuY3Rpb24oKXtlKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKGMgaW4gYSlBYihjLGFbY10sYixlKTtyZXR1cm4gZC5qb2luKCImIil9LHIuZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gci5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPXIucHJvcCh0aGlzLCJlbGVtZW50cyIpO3JldHVybiBhP3IubWFrZUFycmF5KGEpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgYT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIXIodGhpcykuaXMoIjpkaXNhYmxlZCIpJiZ6Yi50ZXN0KHRoaXMubm9kZU5hbWUpJiYheWIudGVzdChhKSYmKHRoaXMuY2hlY2tlZHx8IWphLnRlc3QoYSkpfSkubWFwKGZ1bmN0aW9uKGEsYil7dmFyIGM9cih0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09Yz9udWxsOkFycmF5LmlzQXJyYXkoYyk/ci5tYXAoYyxmdW5jdGlvbihhKXtyZXR1cm57bmFtZTpiLm5hbWUsdmFsdWU6YS5yZXBsYWNlKHhiLCJcclxuIil9fSk6e25hbWU6Yi5uYW1lLHZhbHVlOmMucmVwbGFjZSh4YiwiXHJcbiIpfX0pLmdldCgpfX0pO3ZhciBCYj0vJTIwL2csQ2I9LyMuKiQvLERiPS8oWz8mXSlfPVteJl0qLyxFYj0vXiguKj8pOlsgXHRdKihbXlxyXG5dKikkL2dtLEZiPS9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLEdiPS9eKD86R0VUfEhFQUQpJC8sSGI9L15cL1wvLyxJYj17fSxKYj17fSxLYj0iKi8iLmNvbmNhdCgiKiIpLExiPWQuY3JlYXRlRWxlbWVudCgiYSIpO0xiLmhyZWY9dGIuaHJlZjtmdW5jdGlvbiBNYihhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXsic3RyaW5nIiE9dHlwZW9mIGImJihjPWIsYj0iKiIpO3ZhciBkLGU9MCxmPWIudG9Mb3dlckNhc2UoKS5tYXRjaChMKXx8W107aWYoci5pc0Z1bmN0aW9uKGMpKXdoaWxlKGQ9ZltlKytdKSIrIj09PWRbMF0/KGQ9ZC5zbGljZSgxKXx8IioiLChhW2RdPWFbZF18fFtdKS51bnNoaWZ0KGMpKTooYVtkXT1hW2RdfHxbXSkucHVzaChjKX19ZnVuY3Rpb24gTmIoYSxiLGMsZCl7dmFyIGU9e30sZj1hPT09SmI7ZnVuY3Rpb24gZyhoKXt2YXIgaTtyZXR1cm4gZVtoXT0hMCxyLmVhY2goYVtoXXx8W10sZnVuY3Rpb24oYSxoKXt2YXIgaj1oKGIsYyxkKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGp8fGZ8fGVbal0/Zj8hKGk9aik6dm9pZCAwOihiLmRhdGFUeXBlcy51bnNoaWZ0KGopLGcoaiksITEpfSksaX1yZXR1cm4gZyhiLmRhdGFUeXBlc1swXSl8fCFlWyIqIl0mJmcoIioiKX1mdW5jdGlvbiBPYihhLGIpe3ZhciBjLGQsZT1yLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKGMgaW4gYil2b2lkIDAhPT1iW2NdJiYoKGVbY10/YTpkfHwoZD17fSkpW2NdPWJbY10pO3JldHVybiBkJiZyLmV4dGVuZCghMCxhLGQpLGF9ZnVuY3Rpb24gUGIoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jb250ZW50cyxpPWEuZGF0YVR5cGVzO3doaWxlKCIqIj09PWlbMF0paS5zaGlmdCgpLHZvaWQgMD09PWQmJihkPWEubWltZVR5cGV8fGIuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpKTtpZihkKWZvcihlIGluIGgpaWYoaFtlXSYmaFtlXS50ZXN0KGQpKXtpLnVuc2hpZnQoZSk7YnJlYWt9aWYoaVswXWluIGMpZj1pWzBdO2Vsc2V7Zm9yKGUgaW4gYyl7aWYoIWlbMF18fGEuY29udmVydGVyc1tlKyIgIitpWzBdXSl7Zj1lO2JyZWFrfWd8fChnPWUpfWY9Znx8Z31pZihmKXJldHVybiBmIT09aVswXSYmaS51bnNoaWZ0KGYpLGNbZl19ZnVuY3Rpb24gUWIoYSxiLGMsZCl7dmFyIGUsZixnLGgsaSxqPXt9LGs9YS5kYXRhVHlwZXMuc2xpY2UoKTtpZihrWzFdKWZvcihnIGluIGEuY29udmVydGVycylqW2cudG9Mb3dlckNhc2UoKV09YS5jb252ZXJ0ZXJzW2ddO2Y9ay5zaGlmdCgpO3doaWxlKGYpaWYoYS5yZXNwb25zZUZpZWxkc1tmXSYmKGNbYS5yZXNwb25zZUZpZWxkc1tmXV09YiksIWkmJmQmJmEuZGF0YUZpbHRlciYmKGI9YS5kYXRhRmlsdGVyKGIsYS5kYXRhVHlwZSkpLGk9ZixmPWsuc2hpZnQoKSlpZigiKiI9PT1mKWY9aTtlbHNlIGlmKCIqIiE9PWkmJmkhPT1mKXtpZihnPWpbaSsiICIrZl18fGpbIiogIitmXSwhZylmb3IoZSBpbiBqKWlmKGg9ZS5zcGxpdCgiICIpLGhbMV09PT1mJiYoZz1qW2krIiAiK2hbMF1dfHxqWyIqICIraFswXV0pKXtnPT09ITA/Zz1qW2VdOmpbZV0hPT0hMCYmKGY9aFswXSxrLnVuc2hpZnQoaFsxXSkpO2JyZWFrfWlmKGchPT0hMClpZihnJiZhWyJ0aHJvd3MiXSliPWcoYik7ZWxzZSB0cnl7Yj1nKGIpfWNhdGNoKGwpe3JldHVybntzdGF0ZToicGFyc2VyZXJyb3IiLGVycm9yOmc/bDoiTm8gY29udmVyc2lvbiBmcm9tICIraSsiIHRvICIrZn19fXJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTpifX1yLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6dGIuaHJlZix0eXBlOiJHRVQiLGlzTG9jYWw6RmIudGVzdCh0Yi5wcm90b2NvbCksZ2xvYmFsOiEwLHByb2Nlc3NEYXRhOiEwLGFzeW5jOiEwLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLGFjY2VwdHM6eyIqIjpLYix0ZXh0OiJ0ZXh0L3BsYWluIixodG1sOiJ0ZXh0L2h0bWwiLHhtbDoiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsanNvbjoiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0In0sY29udGVudHM6e3htbDovXGJ4bWxcYi8saHRtbDovXGJodG1sLyxqc29uOi9cYmpzb25cYi99LHJlc3BvbnNlRmllbGRzOnt4bWw6InJlc3BvbnNlWE1MIix0ZXh0OiJyZXNwb25zZVRleHQiLGpzb246InJlc3BvbnNlSlNPTiJ9LGNvbnZlcnRlcnM6eyIqIHRleHQiOlN0cmluZywidGV4dCBodG1sIjohMCwidGV4dCBqc29uIjpKU09OLnBhcnNlLCJ0ZXh0IHhtbCI6ci5wYXJzZVhNTH0sZmxhdE9wdGlvbnM6e3VybDohMCxjb250ZXh0OiEwfX0sYWpheFNldHVwOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/T2IoT2IoYSxyLmFqYXhTZXR0aW5ncyksYik6T2Ioci5hamF4U2V0dGluZ3MsYSl9LGFqYXhQcmVmaWx0ZXI6TWIoSWIpLGFqYXhUcmFuc3BvcnQ6TWIoSmIpLGFqYXg6ZnVuY3Rpb24oYixjKXsib2JqZWN0Ij09dHlwZW9mIGImJihjPWIsYj12b2lkIDApLGM9Y3x8e307dmFyIGUsZixnLGgsaSxqLGssbCxtLG4sbz1yLmFqYXhTZXR1cCh7fSxjKSxwPW8uY29udGV4dHx8byxxPW8uY29udGV4dCYmKHAubm9kZVR5cGV8fHAuanF1ZXJ5KT9yKHApOnIuZXZlbnQscz1yLkRlZmVycmVkKCksdD1yLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSx1PW8uc3RhdHVzQ29kZXx8e30sdj17fSx3PXt9LHg9ImNhbmNlbGVkIix5PXtyZWFkeVN0YXRlOjAsZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoayl7aWYoIWgpe2g9e307d2hpbGUoYj1FYi5leGVjKGcpKWhbYlsxXS50b0xvd2VyQ2FzZSgpXT1iWzJdfWI9aFthLnRvTG93ZXJDYXNlKCldfXJldHVybiBudWxsPT1iP251bGw6Yn0sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIGs/ZzpudWxsfSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG51bGw9PWsmJihhPXdbYS50b0xvd2VyQ2FzZSgpXT13W2EudG9Mb3dlckNhc2UoKV18fGEsdlthXT1iKSx0aGlzfSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1rJiYoby5taW1lVHlwZT1hKSx0aGlzfSxzdGF0dXNDb2RlOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKGEpaWYoayl5LmFsd2F5cyhhW3kuc3RhdHVzXSk7ZWxzZSBmb3IoYiBpbiBhKXVbYl09W3VbYl0sYVtiXV07cmV0dXJuIHRoaXN9LGFib3J0OmZ1bmN0aW9uKGEpe3ZhciBiPWF8fHg7cmV0dXJuIGUmJmUuYWJvcnQoYiksQSgwLGIpLHRoaXN9fTtpZihzLnByb21pc2UoeSksby51cmw9KChifHxvLnVybHx8dGIuaHJlZikrIiIpLnJlcGxhY2UoSGIsdGIucHJvdG9jb2wrIi8vIiksby50eXBlPWMubWV0aG9kfHxjLnR5cGV8fG8ubWV0aG9kfHxvLnR5cGUsby5kYXRhVHlwZXM9KG8uZGF0YVR5cGV8fCIqIikudG9Mb3dlckNhc2UoKS5tYXRjaChMKXx8WyIiXSxudWxsPT1vLmNyb3NzRG9tYWluKXtqPWQuY3JlYXRlRWxlbWVudCgiYSIpO3RyeXtqLmhyZWY9by51cmwsai5ocmVmPWouaHJlZixvLmNyb3NzRG9tYWluPUxiLnByb3RvY29sKyIvLyIrTGIuaG9zdCE9ai5wcm90b2NvbCsiLy8iK2ouaG9zdH1jYXRjaCh6KXtvLmNyb3NzRG9tYWluPSEwfX1pZihvLmRhdGEmJm8ucHJvY2Vzc0RhdGEmJiJzdHJpbmciIT10eXBlb2Ygby5kYXRhJiYoby5kYXRhPXIucGFyYW0oby5kYXRhLG8udHJhZGl0aW9uYWwpKSxOYihJYixvLGMseSksaylyZXR1cm4geTtsPXIuZXZlbnQmJm8uZ2xvYmFsLGwmJjA9PT1yLmFjdGl2ZSsrJiZyLmV2ZW50LnRyaWdnZXIoImFqYXhTdGFydCIpLG8udHlwZT1vLnR5cGUudG9VcHBlckNhc2UoKSxvLmhhc0NvbnRlbnQ9IUdiLnRlc3Qoby50eXBlKSxmPW8udXJsLnJlcGxhY2UoQ2IsIiIpLG8uaGFzQ29udGVudD9vLmRhdGEmJm8ucHJvY2Vzc0RhdGEmJjA9PT0oby5jb250ZW50VHlwZXx8IiIpLmluZGV4T2YoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpJiYoby5kYXRhPW8uZGF0YS5yZXBsYWNlKEJiLCIrIikpOihuPW8udXJsLnNsaWNlKGYubGVuZ3RoKSxvLmRhdGEmJihmKz0odmIudGVzdChmKT8iJiI6Ij8iKStvLmRhdGEsZGVsZXRlIG8uZGF0YSksby5jYWNoZT09PSExJiYoZj1mLnJlcGxhY2UoRGIsIiQxIiksbj0odmIudGVzdChmKT8iJiI6Ij8iKSsiXz0iK3ViKysgK24pLG8udXJsPWYrbiksby5pZk1vZGlmaWVkJiYoci5sYXN0TW9kaWZpZWRbZl0mJnkuc2V0UmVxdWVzdEhlYWRlcigiSWYtTW9kaWZpZWQtU2luY2UiLHIubGFzdE1vZGlmaWVkW2ZdKSxyLmV0YWdbZl0mJnkuc2V0UmVxdWVzdEhlYWRlcigiSWYtTm9uZS1NYXRjaCIsci5ldGFnW2ZdKSksKG8uZGF0YSYmby5oYXNDb250ZW50JiZvLmNvbnRlbnRUeXBlIT09ITF8fGMuY29udGVudFR5cGUpJiZ5LnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsby5jb250ZW50VHlwZSkseS5zZXRSZXF1ZXN0SGVhZGVyKCJBY2NlcHQiLG8uZGF0YVR5cGVzWzBdJiZvLmFjY2VwdHNbby5kYXRhVHlwZXNbMF1dP28uYWNjZXB0c1tvLmRhdGFUeXBlc1swXV0rKCIqIiE9PW8uZGF0YVR5cGVzWzBdPyIsICIrS2IrIjsgcT0wLjAxIjoiIik6by5hY2NlcHRzWyIqIl0pO2ZvcihtIGluIG8uaGVhZGVycyl5LnNldFJlcXVlc3RIZWFkZXIobSxvLmhlYWRlcnNbbV0pO2lmKG8uYmVmb3JlU2VuZCYmKG8uYmVmb3JlU2VuZC5jYWxsKHAseSxvKT09PSExfHxrKSlyZXR1cm4geS5hYm9ydCgpO2lmKHg9ImFib3J0Iix0LmFkZChvLmNvbXBsZXRlKSx5LmRvbmUoby5zdWNjZXNzKSx5LmZhaWwoby5lcnJvciksZT1OYihKYixvLGMseSkpe2lmKHkucmVhZHlTdGF0ZT0xLGwmJnEudHJpZ2dlcigiYWpheFNlbmQiLFt5LG9dKSxrKXJldHVybiB5O28uYXN5bmMmJm8udGltZW91dD4wJiYoaT1hLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt5LmFib3J0KCJ0aW1lb3V0Iil9LG8udGltZW91dCkpO3RyeXtrPSExLGUuc2VuZCh2LEEpfWNhdGNoKHope2lmKGspdGhyb3cgejtBKC0xLHopfX1lbHNlIEEoLTEsIk5vIFRyYW5zcG9ydCIpO2Z1bmN0aW9uIEEoYixjLGQsaCl7dmFyIGosbSxuLHYsdyx4PWM7a3x8KGs9ITAsaSYmYS5jbGVhclRpbWVvdXQoaSksZT12b2lkIDAsZz1ofHwiIix5LnJlYWR5U3RhdGU9Yj4wPzQ6MCxqPWI+PTIwMCYmYjwzMDB8fDMwND09PWIsZCYmKHY9UGIobyx5LGQpKSx2PVFiKG8sdix5LGopLGo/KG8uaWZNb2RpZmllZCYmKHc9eS5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpLHcmJihyLmxhc3RNb2RpZmllZFtmXT13KSx3PXkuZ2V0UmVzcG9uc2VIZWFkZXIoImV0YWciKSx3JiYoci5ldGFnW2ZdPXcpKSwyMDQ9PT1ifHwiSEVBRCI9PT1vLnR5cGU/eD0ibm9jb250ZW50IjozMDQ9PT1iP3g9Im5vdG1vZGlmaWVkIjooeD12LnN0YXRlLG09di5kYXRhLG49di5lcnJvcixqPSFuKSk6KG49eCwhYiYmeHx8KHg9ImVycm9yIixiPDAmJihiPTApKSkseS5zdGF0dXM9Yix5LnN0YXR1c1RleHQ9KGN8fHgpKyIiLGo/cy5yZXNvbHZlV2l0aChwLFttLHgseV0pOnMucmVqZWN0V2l0aChwLFt5LHgsbl0pLHkuc3RhdHVzQ29kZSh1KSx1PXZvaWQgMCxsJiZxLnRyaWdnZXIoaj8iYWpheFN1Y2Nlc3MiOiJhamF4RXJyb3IiLFt5LG8saj9tOm5dKSx0LmZpcmVXaXRoKHAsW3kseF0pLGwmJihxLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW3ksb10pLC0tci5hY3RpdmV8fHIuZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSkpfXJldHVybiB5fSxnZXRKU09OOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gci5nZXQoYSxiLGMsImpzb24iKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHIuZ2V0KGEsdm9pZCAwLGIsInNjcmlwdCIpfX0pLHIuZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihhLGIpe3JbYl09ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIHIuaXNGdW5jdGlvbihjKSYmKGU9ZXx8ZCxkPWMsYz12b2lkIDApLHIuYWpheChyLmV4dGVuZCh7dXJsOmEsdHlwZTpiLGRhdGFUeXBlOmUsZGF0YTpjLHN1Y2Nlc3M6ZH0sci5pc1BsYWluT2JqZWN0KGEpJiZhKSl9fSksci5fZXZhbFVybD1mdW5jdGlvbihhKXtyZXR1cm4gci5hamF4KHt1cmw6YSx0eXBlOiJHRVQiLGRhdGFUeXBlOiJzY3JpcHQiLGNhY2hlOiEwLGFzeW5jOiExLGdsb2JhbDohMSwidGhyb3dzIjohMH0pfSxyLmZuLmV4dGVuZCh7d3JhcEFsbDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gdGhpc1swXSYmKHIuaXNGdW5jdGlvbihhKSYmKGE9YS5jYWxsKHRoaXNbMF0pKSxiPXIoYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKCEwKSx0aGlzWzBdLnBhcmVudE5vZGUmJmIuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pLGIubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpczt3aGlsZShhLmZpcnN0RWxlbWVudENoaWxkKWE9YS5maXJzdEVsZW1lbnRDaGlsZDtyZXR1cm4gYX0pLmFwcGVuZCh0aGlzKSksdGhpc30sd3JhcElubmVyOmZ1bmN0aW9uKGEpe3JldHVybiByLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe3IodGhpcykud3JhcElubmVyKGEuY2FsbCh0aGlzLGIpKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPXIodGhpcyksYz1iLmNvbnRlbnRzKCk7Yy5sZW5ndGg/Yy53cmFwQWxsKGEpOmIuYXBwZW5kKGEpfSl9LHdyYXA6ZnVuY3Rpb24oYSl7dmFyIGI9ci5pc0Z1bmN0aW9uKGEpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYyl7cih0aGlzKS53cmFwQWxsKGI/YS5jYWxsKHRoaXMsYyk6YSl9KX0sdW53cmFwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnBhcmVudChhKS5ub3QoImJvZHkiKS5lYWNoKGZ1bmN0aW9uKCl7cih0aGlzKS5yZXBsYWNlV2l0aCh0aGlzLmNoaWxkTm9kZXMpfSksdGhpc319KSxyLmV4cHIucHNldWRvcy5oaWRkZW49ZnVuY3Rpb24oYSl7cmV0dXJuIXIuZXhwci5wc2V1ZG9zLnZpc2libGUoYSl9LHIuZXhwci5wc2V1ZG9zLnZpc2libGU9ZnVuY3Rpb24oYSl7cmV0dXJuISEoYS5vZmZzZXRXaWR0aHx8YS5vZmZzZXRIZWlnaHR8fGEuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgpfSxyLmFqYXhTZXR0aW5ncy54aHI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBhLlhNTEh0dHBSZXF1ZXN0fWNhdGNoKGIpe319O3ZhciBSYj17MDoyMDAsMTIyMzoyMDR9LFNiPXIuYWpheFNldHRpbmdzLnhocigpO28uY29ycz0hIVNiJiYid2l0aENyZWRlbnRpYWxzImluIFNiLG8uYWpheD1TYj0hIVNiLHIuYWpheFRyYW5zcG9ydChmdW5jdGlvbihiKXt2YXIgYyxkO2lmKG8uY29yc3x8U2ImJiFiLmNyb3NzRG9tYWluKXJldHVybntzZW5kOmZ1bmN0aW9uKGUsZil7dmFyIGcsaD1iLnhocigpO2lmKGgub3BlbihiLnR5cGUsYi51cmwsYi5hc3luYyxiLnVzZXJuYW1lLGIucGFzc3dvcmQpLGIueGhyRmllbGRzKWZvcihnIGluIGIueGhyRmllbGRzKWhbZ109Yi54aHJGaWVsZHNbZ107Yi5taW1lVHlwZSYmaC5vdmVycmlkZU1pbWVUeXBlJiZoLm92ZXJyaWRlTWltZVR5cGUoYi5taW1lVHlwZSksYi5jcm9zc0RvbWFpbnx8ZVsiWC1SZXF1ZXN0ZWQtV2l0aCJdfHwoZVsiWC1SZXF1ZXN0ZWQtV2l0aCJdPSJYTUxIdHRwUmVxdWVzdCIpO2ZvcihnIGluIGUpaC5zZXRSZXF1ZXN0SGVhZGVyKGcsZVtnXSk7Yz1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtjJiYoYz1kPWgub25sb2FkPWgub25lcnJvcj1oLm9uYWJvcnQ9aC5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCwiYWJvcnQiPT09YT9oLmFib3J0KCk6ImVycm9yIj09PWE/Im51bWJlciIhPXR5cGVvZiBoLnN0YXR1cz9mKDAsImVycm9yIik6ZihoLnN0YXR1cyxoLnN0YXR1c1RleHQpOmYoUmJbaC5zdGF0dXNdfHxoLnN0YXR1cyxoLnN0YXR1c1RleHQsInRleHQiIT09KGgucmVzcG9uc2VUeXBlfHwidGV4dCIpfHwic3RyaW5nIiE9dHlwZW9mIGgucmVzcG9uc2VUZXh0P3tiaW5hcnk6aC5yZXNwb25zZX06e3RleHQ6aC5yZXNwb25zZVRleHR9LGguZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpKX19LGgub25sb2FkPWMoKSxkPWgub25lcnJvcj1jKCJlcnJvciIpLHZvaWQgMCE9PWgub25hYm9ydD9oLm9uYWJvcnQ9ZDpoLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpezQ9PT1oLnJlYWR5U3RhdGUmJmEuc2V0VGltZW91dChmdW5jdGlvbigpe2MmJmQoKX0pfSxjPWMoImFib3J0Iik7dHJ5e2guc2VuZChiLmhhc0NvbnRlbnQmJmIuZGF0YXx8bnVsbCl9Y2F0Y2goaSl7aWYoYyl0aHJvdyBpfX0sYWJvcnQ6ZnVuY3Rpb24oKXtjJiZjKCl9fX0pLHIuYWpheFByZWZpbHRlcihmdW5jdGlvbihhKXthLmNyb3NzRG9tYWluJiYoYS5jb250ZW50cy5zY3JpcHQ9ITEpfSksci5hamF4U2V0dXAoe2FjY2VwdHM6e3NjcmlwdDoidGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHQifSxjb250ZW50czp7c2NyaXB0Oi9cYig/OmphdmF8ZWNtYSlzY3JpcHRcYi99LGNvbnZlcnRlcnM6eyJ0ZXh0IHNjcmlwdCI6ZnVuY3Rpb24oYSl7cmV0dXJuIHIuZ2xvYmFsRXZhbChhKSxhfX19KSxyLmFqYXhQcmVmaWx0ZXIoInNjcmlwdCIsZnVuY3Rpb24oYSl7dm9pZCAwPT09YS5jYWNoZSYmKGEuY2FjaGU9ITEpLGEuY3Jvc3NEb21haW4mJihhLnR5cGU9IkdFVCIpfSksci5hamF4VHJhbnNwb3J0KCJzY3JpcHQiLGZ1bmN0aW9uKGEpe2lmKGEuY3Jvc3NEb21haW4pe3ZhciBiLGM7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oZSxmKXtiPXIoIjxzY3JpcHQ+IikucHJvcCh7Y2hhcnNldDphLnNjcmlwdENoYXJzZXQsc3JjOmEudXJsfSkub24oImxvYWQgZXJyb3IiLGM9ZnVuY3Rpb24oYSl7Yi5yZW1vdmUoKSxjPW51bGwsYSYmZigiZXJyb3IiPT09YS50eXBlPzQwNDoyMDAsYS50eXBlKX0pLGQuaGVhZC5hcHBlbmRDaGlsZChiWzBdKX0sYWJvcnQ6ZnVuY3Rpb24oKXtjJiZjKCl9fX19KTt2YXIgVGI9W10sVWI9Lyg9KVw/KD89JnwkKXxcP1w/LztyLmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGE9VGIucG9wKCl8fHIuZXhwYW5kbysiXyIrdWIrKztyZXR1cm4gdGhpc1thXT0hMCxhfX0pLHIuYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsZnVuY3Rpb24oYixjLGQpe3ZhciBlLGYsZyxoPWIuanNvbnAhPT0hMSYmKFViLnRlc3QoYi51cmwpPyJ1cmwiOiJzdHJpbmciPT10eXBlb2YgYi5kYXRhJiYwPT09KGIuY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSYmVWIudGVzdChiLmRhdGEpJiYiZGF0YSIpO2lmKGh8fCJqc29ucCI9PT1iLmRhdGFUeXBlc1swXSlyZXR1cm4gZT1iLmpzb25wQ2FsbGJhY2s9ci5pc0Z1bmN0aW9uKGIuanNvbnBDYWxsYmFjayk/Yi5qc29ucENhbGxiYWNrKCk6Yi5qc29ucENhbGxiYWNrLGg/YltoXT1iW2hdLnJlcGxhY2UoVWIsIiQxIitlKTpiLmpzb25wIT09ITEmJihiLnVybCs9KHZiLnRlc3QoYi51cmwpPyImIjoiPyIpK2IuanNvbnArIj0iK2UpLGIuY29udmVydGVyc1sic2NyaXB0IGpzb24iXT1mdW5jdGlvbigpe3JldHVybiBnfHxyLmVycm9yKGUrIiB3YXMgbm90IGNhbGxlZCIpLGdbMF19LGIuZGF0YVR5cGVzWzBdPSJqc29uIixmPWFbZV0sYVtlXT1mdW5jdGlvbigpe2c9YXJndW1lbnRzfSxkLmFsd2F5cyhmdW5jdGlvbigpe3ZvaWQgMD09PWY/cihhKS5yZW1vdmVQcm9wKGUpOmFbZV09ZixiW2VdJiYoYi5qc29ucENhbGxiYWNrPWMuanNvbnBDYWxsYmFjayxUYi5wdXNoKGUpKSxnJiZyLmlzRnVuY3Rpb24oZikmJmYoZ1swXSksZz1mPXZvaWQgMH0pLCJzY3JpcHQifSksby5jcmVhdGVIVE1MRG9jdW1lbnQ9ZnVuY3Rpb24oKXt2YXIgYT1kLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIikuYm9keTtyZXR1cm4gYS5pbm5lckhUTUw9Ijxmb3JtPjwvZm9ybT48Zm9ybT48L2Zvcm0+IiwyPT09YS5jaGlsZE5vZGVzLmxlbmd0aH0oKSxyLnBhcnNlSFRNTD1mdW5jdGlvbihhLGIsYyl7aWYoInN0cmluZyIhPXR5cGVvZiBhKXJldHVybltdOyJib29sZWFuIj09dHlwZW9mIGImJihjPWIsYj0hMSk7dmFyIGUsZixnO3JldHVybiBifHwoby5jcmVhdGVIVE1MRG9jdW1lbnQ/KGI9ZC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpLGU9Yi5jcmVhdGVFbGVtZW50KCJiYXNlIiksZS5ocmVmPWQubG9jYXRpb24uaHJlZixiLmhlYWQuYXBwZW5kQ2hpbGQoZSkpOmI9ZCksZj1DLmV4ZWMoYSksZz0hYyYmW10sZj9bYi5jcmVhdGVFbGVtZW50KGZbMV0pXTooZj1xYShbYV0sYixnKSxnJiZnLmxlbmd0aCYmcihnKS5yZW1vdmUoKSxyLm1lcmdlKFtdLGYuY2hpbGROb2RlcykpfSxyLmZuLmxvYWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnPXRoaXMsaD1hLmluZGV4T2YoIiAiKTtyZXR1cm4gaD4tMSYmKGQ9cGIoYS5zbGljZShoKSksYT1hLnNsaWNlKDAsaCkpLHIuaXNGdW5jdGlvbihiKT8oYz1iLGI9dm9pZCAwKTpiJiYib2JqZWN0Ij09dHlwZW9mIGImJihlPSJQT1NUIiksZy5sZW5ndGg+MCYmci5hamF4KHt1cmw6YSx0eXBlOmV8fCJHRVQiLGRhdGFUeXBlOiJodG1sIixkYXRhOmJ9KS5kb25lKGZ1bmN0aW9uKGEpe2Y9YXJndW1lbnRzLGcuaHRtbChkP3IoIjxkaXY+IikuYXBwZW5kKHIucGFyc2VIVE1MKGEpKS5maW5kKGQpOmEpfSkuYWx3YXlzKGMmJmZ1bmN0aW9uKGEsYil7Zy5lYWNoKGZ1bmN0aW9uKCl7Yy5hcHBseSh0aGlzLGZ8fFthLnJlc3BvbnNlVGV4dCxiLGFdKX0pfSksdGhpc30sci5lYWNoKFsiYWpheFN0YXJ0IiwiYWpheFN0b3AiLCJhamF4Q29tcGxldGUiLCJhamF4RXJyb3IiLCJhamF4U3VjY2VzcyIsImFqYXhTZW5kIl0sZnVuY3Rpb24oYSxiKXtyLmZuW2JdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9uKGIsYSl9fSksci5leHByLnBzZXVkb3MuYW5pbWF0ZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHIuZ3JlcChyLnRpbWVycyxmdW5jdGlvbihiKXtyZXR1cm4gYT09PWIuZWxlbX0pLmxlbmd0aH0sci5vZmZzZXQ9e3NldE9mZnNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGcsaCxpLGosaz1yLmNzcyhhLCJwb3NpdGlvbiIpLGw9cihhKSxtPXt9OyJzdGF0aWMiPT09ayYmKGEuc3R5bGUucG9zaXRpb249InJlbGF0aXZlIiksaD1sLm9mZnNldCgpLGY9ci5jc3MoYSwidG9wIiksaT1yLmNzcyhhLCJsZWZ0Iiksaj0oImFic29sdXRlIj09PWt8fCJmaXhlZCI9PT1rKSYmKGYraSkuaW5kZXhPZigiYXV0byIpPi0xLGo/KGQ9bC5wb3NpdGlvbigpLGc9ZC50b3AsZT1kLmxlZnQpOihnPXBhcnNlRmxvYXQoZil8fDAsZT1wYXJzZUZsb2F0KGkpfHwwKSxyLmlzRnVuY3Rpb24oYikmJihiPWIuY2FsbChhLGMsci5leHRlbmQoe30saCkpKSxudWxsIT1iLnRvcCYmKG0udG9wPWIudG9wLWgudG9wK2cpLG51bGwhPWIubGVmdCYmKG0ubGVmdD1iLmxlZnQtaC5sZWZ0K2UpLCJ1c2luZyJpbiBiP2IudXNpbmcuY2FsbChhLG0pOmwuY3NzKG0pfX0sci5mbi5leHRlbmQoe29mZnNldDpmdW5jdGlvbihhKXtpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiB2b2lkIDA9PT1hP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe3Iub2Zmc2V0LnNldE9mZnNldCh0aGlzLGEsYil9KTt2YXIgYixjLGQsZSxmPXRoaXNbMF07aWYoZilyZXR1cm4gZi5nZXRDbGllbnRSZWN0cygpLmxlbmd0aD8oZD1mLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGI9Zi5vd25lckRvY3VtZW50LGM9Yi5kb2N1bWVudEVsZW1lbnQsZT1iLmRlZmF1bHRWaWV3LHt0b3A6ZC50b3ArZS5wYWdlWU9mZnNldC1jLmNsaWVudFRvcCxsZWZ0OmQubGVmdCtlLnBhZ2VYT2Zmc2V0LWMuY2xpZW50TGVmdH0pOnt0b3A6MCxsZWZ0OjB9fSxwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBhLGIsYz10aGlzWzBdLGQ9e3RvcDowLGxlZnQ6MH07cmV0dXJuImZpeGVkIj09PXIuY3NzKGMsInBvc2l0aW9uIik/Yj1jLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOihhPXRoaXMub2Zmc2V0UGFyZW50KCksYj10aGlzLm9mZnNldCgpLEIoYVswXSwiaHRtbCIpfHwoZD1hLm9mZnNldCgpKSxkPXt0b3A6ZC50b3Arci5jc3MoYVswXSwiYm9yZGVyVG9wV2lkdGgiLCEwKSxsZWZ0OmQubGVmdCtyLmNzcyhhWzBdLCJib3JkZXJMZWZ0V2lkdGgiLCEwKX0pLHt0b3A6Yi50b3AtZC50b3Atci5jc3MoYywibWFyZ2luVG9wIiwhMCksbGVmdDpiLmxlZnQtZC5sZWZ0LXIuY3NzKGMsIm1hcmdpbkxlZnQiLCEwKX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9mZnNldFBhcmVudDt3aGlsZShhJiYic3RhdGljIj09PXIuY3NzKGEsInBvc2l0aW9uIikpYT1hLm9mZnNldFBhcmVudDtyZXR1cm4gYXx8cmF9KX19KSxyLmVhY2goe3Njcm9sbExlZnQ6InBhZ2VYT2Zmc2V0IixzY3JvbGxUb3A6InBhZ2VZT2Zmc2V0In0sZnVuY3Rpb24oYSxiKXt2YXIgYz0icGFnZVlPZmZzZXQiPT09YjtyLmZuW2FdPWZ1bmN0aW9uKGQpe3JldHVybiBUKHRoaXMsZnVuY3Rpb24oYSxkLGUpe3ZhciBmO3JldHVybiByLmlzV2luZG93KGEpP2Y9YTo5PT09YS5ub2RlVHlwZSYmKGY9YS5kZWZhdWx0Vmlldyksdm9pZCAwPT09ZT9mP2ZbYl06YVtkXTp2b2lkKGY/Zi5zY3JvbGxUbyhjP2YucGFnZVhPZmZzZXQ6ZSxjP2U6Zi5wYWdlWU9mZnNldCk6YVtkXT1lKX0sYSxkLGFyZ3VtZW50cy5sZW5ndGgpfX0pLHIuZWFjaChbInRvcCIsImxlZnQiXSxmdW5jdGlvbihhLGIpe3IuY3NzSG9va3NbYl09UGEoby5waXhlbFBvc2l0aW9uLGZ1bmN0aW9uKGEsYyl7aWYoYylyZXR1cm4gYz1PYShhLGIpLE1hLnRlc3QoYyk/cihhKS5wb3NpdGlvbigpW2JdKyJweCI6Y30pfSksci5lYWNoKHtIZWlnaHQ6ImhlaWdodCIsV2lkdGg6IndpZHRoIn0sZnVuY3Rpb24oYSxiKXtyLmVhY2goe3BhZGRpbmc6ImlubmVyIithLGNvbnRlbnQ6YiwiIjoib3V0ZXIiK2F9LGZ1bmN0aW9uKGMsZCl7ci5mbltkXT1mdW5jdGlvbihlLGYpe3ZhciBnPWFyZ3VtZW50cy5sZW5ndGgmJihjfHwiYm9vbGVhbiIhPXR5cGVvZiBlKSxoPWN8fChlPT09ITB8fGY9PT0hMD8ibWFyZ2luIjoiYm9yZGVyIik7cmV0dXJuIFQodGhpcyxmdW5jdGlvbihiLGMsZSl7dmFyIGY7cmV0dXJuIHIuaXNXaW5kb3coYik/MD09PWQuaW5kZXhPZigib3V0ZXIiKT9iWyJpbm5lciIrYV06Yi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrYV06OT09PWIubm9kZVR5cGU/KGY9Yi5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgoYi5ib2R5WyJzY3JvbGwiK2FdLGZbInNjcm9sbCIrYV0sYi5ib2R5WyJvZmZzZXQiK2FdLGZbIm9mZnNldCIrYV0sZlsiY2xpZW50IithXSkpOnZvaWQgMD09PWU/ci5jc3MoYixjLGgpOnIuc3R5bGUoYixjLGUsaCl9LGIsZz9lOnZvaWQgMCxnKX19KX0pLHIuZm4uZXh0ZW5kKHtiaW5kOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5vbihhLG51bGwsYixjKX0sdW5iaW5kOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMub2ZmKGEsbnVsbCxiKX0sZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMub24oYixhLGMsZCl9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihhLCIqKiIpOnRoaXMub2ZmKGIsYXx8IioqIixjKX19KSxyLmhvbGRSZWFkeT1mdW5jdGlvbihhKXthP3IucmVhZHlXYWl0Kys6ci5yZWFkeSghMCl9LHIuaXNBcnJheT1BcnJheS5pc0FycmF5LHIucGFyc2VKU09OPUpTT04ucGFyc2Usci5ub2RlTmFtZT1CLCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZSgianF1ZXJ5IixbXSxmdW5jdGlvbigpe3JldHVybiByfSk7dmFyIFZiPWEualF1ZXJ5LFdiPWEuJDtyZXR1cm4gci5ub0NvbmZsaWN0PWZ1bmN0aW9uKGIpe3JldHVybiBhLiQ9PT1yJiYoYS4kPVdiKSxiJiZhLmpRdWVyeT09PXImJihhLmpRdWVyeT1WYikscn0sYnx8KGEualF1ZXJ5PWEuJD1yKSxyfSk7Cg=="},{"meta":{"name":"jquery.min.js","url":"https://cdn.staticfile.org/jquery/1.12.4/jquery.min.js","ts":1604045683984,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2MS4xMi40IHwgKGMpIGpRdWVyeSBGb3VuZGF0aW9uIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovCiFmdW5jdGlvbihhLGIpeyJvYmplY3QiPT10eXBlb2YgbW9kdWxlJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWEuZG9jdW1lbnQ/YihhLCEwKTpmdW5jdGlvbihhKXtpZighYS5kb2N1bWVudCl0aHJvdyBuZXcgRXJyb3IoImpRdWVyeSByZXF1aXJlcyBhIHdpbmRvdyB3aXRoIGEgZG9jdW1lbnQiKTtyZXR1cm4gYihhKX06YihhKX0oInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OnRoaXMsZnVuY3Rpb24oYSxiKXt2YXIgYz1bXSxkPWEuZG9jdW1lbnQsZT1jLnNsaWNlLGY9Yy5jb25jYXQsZz1jLnB1c2gsaD1jLmluZGV4T2YsaT17fSxqPWkudG9TdHJpbmcsaz1pLmhhc093blByb3BlcnR5LGw9e30sbT0iMS4xMi40IixuPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBuLmZuLmluaXQoYSxiKX0sbz0vXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2cscD0vXi1tcy0vLHE9Ly0oW1xkYS16XSkvZ2kscj1mdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9O24uZm49bi5wcm90b3R5cGU9e2pxdWVyeTptLGNvbnN0cnVjdG9yOm4sc2VsZWN0b3I6IiIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBlLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT8wPmE/dGhpc1thK3RoaXMubGVuZ3RoXTp0aGlzW2FdOmUuY2FsbCh0aGlzKX0scHVzaFN0YWNrOmZ1bmN0aW9uKGEpe3ZhciBiPW4ubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGEpO3JldHVybiBiLnByZXZPYmplY3Q9dGhpcyxiLmNvbnRleHQ9dGhpcy5jb250ZXh0LGJ9LGVhY2g6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZWFjaCh0aGlzLGEpfSxtYXA6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4ubWFwKHRoaXMsZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5jYWxsKGIsYyxiKX0pKX0sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSxmaXJzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKDApfSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoLTEpfSxlcTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmxlbmd0aCxjPSthKygwPmE/YjowKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soYz49MCYmYj5jP1t0aGlzW2NdXTpbXSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IoKX0scHVzaDpnLHNvcnQ6Yy5zb3J0LHNwbGljZTpjLnNwbGljZX0sbi5leHRlbmQ9bi5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlLGYsZz1hcmd1bWVudHNbMF18fHt9LGg9MSxpPWFyZ3VtZW50cy5sZW5ndGgsaj0hMTtmb3IoImJvb2xlYW4iPT10eXBlb2YgZyYmKGo9ZyxnPWFyZ3VtZW50c1toXXx8e30saCsrKSwib2JqZWN0Ij09dHlwZW9mIGd8fG4uaXNGdW5jdGlvbihnKXx8KGc9e30pLGg9PT1pJiYoZz10aGlzLGgtLSk7aT5oO2grKylpZihudWxsIT0oZT1hcmd1bWVudHNbaF0pKWZvcihkIGluIGUpYT1nW2RdLGM9ZVtkXSxnIT09YyYmKGomJmMmJihuLmlzUGxhaW5PYmplY3QoYyl8fChiPW4uaXNBcnJheShjKSkpPyhiPyhiPSExLGY9YSYmbi5pc0FycmF5KGEpP2E6W10pOmY9YSYmbi5pc1BsYWluT2JqZWN0KGEpP2E6e30sZ1tkXT1uLmV4dGVuZChqLGYsYykpOnZvaWQgMCE9PWMmJihnW2RdPWMpKTtyZXR1cm4gZ30sbi5leHRlbmQoe2V4cGFuZG86ImpRdWVyeSIrKG0rTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXEQvZywiIiksaXNSZWFkeTohMCxlcnJvcjpmdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoYSl9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuImZ1bmN0aW9uIj09PW4udHlwZShhKX0saXNBcnJheTpBcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm4iYXJyYXkiPT09bi50eXBlKGEpfSxpc1dpbmRvdzpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YSYmYT09YS53aW5kb3d9LGlzTnVtZXJpYzpmdW5jdGlvbihhKXt2YXIgYj1hJiZhLnRvU3RyaW5nKCk7cmV0dXJuIW4uaXNBcnJheShhKSYmYi1wYXJzZUZsb2F0KGIpKzE+PTB9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI7Zm9yKGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtpZighYXx8Im9iamVjdCIhPT1uLnR5cGUoYSl8fGEubm9kZVR5cGV8fG4uaXNXaW5kb3coYSkpcmV0dXJuITE7dHJ5e2lmKGEuY29uc3RydWN0b3ImJiFrLmNhbGwoYSwiY29uc3RydWN0b3IiKSYmIWsuY2FsbChhLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwiaXNQcm90b3R5cGVPZiIpKXJldHVybiExfWNhdGNoKGMpe3JldHVybiExfWlmKCFsLm93bkZpcnN0KWZvcihiIGluIGEpcmV0dXJuIGsuY2FsbChhLGIpO2ZvcihiIGluIGEpO3JldHVybiB2b2lkIDA9PT1ifHxrLmNhbGwoYSxiKX0sdHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9hKyIiOiJvYmplY3QiPT10eXBlb2YgYXx8ImZ1bmN0aW9uIj09dHlwZW9mIGE/aVtqLmNhbGwoYSldfHwib2JqZWN0Ijp0eXBlb2YgYX0sZ2xvYmFsRXZhbDpmdW5jdGlvbihiKXtiJiZuLnRyaW0oYikmJihhLmV4ZWNTY3JpcHR8fGZ1bmN0aW9uKGIpe2EuZXZhbC5jYWxsKGEsYil9KShiKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UocCwibXMtIikucmVwbGFjZShxLHIpfSxub2RlTmFtZTpmdW5jdGlvbihhLGIpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1iLnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTA7aWYocyhhKSl7Zm9yKGM9YS5sZW5ndGg7Yz5kO2QrKylpZihiLmNhbGwoYVtkXSxkLGFbZF0pPT09ITEpYnJlYWt9ZWxzZSBmb3IoZCBpbiBhKWlmKGIuY2FsbChhW2RdLGQsYVtkXSk9PT0hMSlicmVhaztyZXR1cm4gYX0sdHJpbTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT8iIjooYSsiIikucmVwbGFjZShvLCIiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8W107cmV0dXJuIG51bGwhPWEmJihzKE9iamVjdChhKSk/bi5tZXJnZShjLCJzdHJpbmciPT10eXBlb2YgYT9bYV06YSk6Zy5jYWxsKGMsYSkpLGN9LGluQXJyYXk6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO2lmKGIpe2lmKGgpcmV0dXJuIGguY2FsbChiLGEsYyk7Zm9yKGQ9Yi5sZW5ndGgsYz1jPzA+Yz9NYXRoLm1heCgwLGQrYyk6YzowO2Q+YztjKyspaWYoYyBpbiBiJiZiW2NdPT09YSlyZXR1cm4gY31yZXR1cm4tMX0sbWVyZ2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz0rYi5sZW5ndGgsZD0wLGU9YS5sZW5ndGg7d2hpbGUoYz5kKWFbZSsrXT1iW2QrK107aWYoYyE9PWMpd2hpbGUodm9pZCAwIT09YltkXSlhW2UrK109YltkKytdO3JldHVybiBhLmxlbmd0aD1lLGF9LGdyZXA6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZCxlPVtdLGY9MCxnPWEubGVuZ3RoLGg9IWM7Zz5mO2YrKylkPSFiKGFbZl0sZiksZCE9PWgmJmUucHVzaChhW2ZdKTtyZXR1cm4gZX0sbWFwOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGc9MCxoPVtdO2lmKHMoYSkpZm9yKGQ9YS5sZW5ndGg7ZD5nO2crKyllPWIoYVtnXSxnLGMpLG51bGwhPWUmJmgucHVzaChlKTtlbHNlIGZvcihnIGluIGEpZT1iKGFbZ10sZyxjKSxudWxsIT1lJiZoLnB1c2goZSk7cmV0dXJuIGYuYXBwbHkoW10saCl9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZjtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGImJihmPWFbYl0sYj1hLGE9Ziksbi5pc0Z1bmN0aW9uKGEpPyhjPWUuY2FsbChhcmd1bWVudHMsMiksZD1mdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGJ8fHRoaXMsYy5jb25jYXQoZS5jYWxsKGFyZ3VtZW50cykpKX0sZC5ndWlkPWEuZ3VpZD1hLmd1aWR8fG4uZ3VpZCsrLGQpOnZvaWQgMH0sbm93OmZ1bmN0aW9uKCl7cmV0dXJuK25ldyBEYXRlfSxzdXBwb3J0Omx9KSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYobi5mbltTeW1ib2wuaXRlcmF0b3JdPWNbU3ltYm9sLml0ZXJhdG9yXSksbi5lYWNoKCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIFN5bWJvbCIuc3BsaXQoIiAiKSxmdW5jdGlvbihhLGIpe2lbIltvYmplY3QgIitiKyJdIl09Yi50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gcyhhKXt2YXIgYj0hIWEmJiJsZW5ndGgiaW4gYSYmYS5sZW5ndGgsYz1uLnR5cGUoYSk7cmV0dXJuImZ1bmN0aW9uIj09PWN8fG4uaXNXaW5kb3coYSk/ITE6ImFycmF5Ij09PWN8fDA9PT1ifHwibnVtYmVyIj09dHlwZW9mIGImJmI+MCYmYi0xIGluIGF9dmFyIHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaSxqLGssbCxtLG4sbyxwLHEscixzLHQsdT0ic2l6emxlIisxKm5ldyBEYXRlLHY9YS5kb2N1bWVudCx3PTAseD0wLHk9Z2EoKSx6PWdhKCksQT1nYSgpLEI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWImJihsPSEwKSwwfSxDPTE8PDMxLEQ9e30uaGFzT3duUHJvcGVydHksRT1bXSxGPUUucG9wLEc9RS5wdXNoLEg9RS5wdXNoLEk9RS5zbGljZSxKPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKWlmKGFbY109PT1iKXJldHVybiBjO3JldHVybi0xfSxLPSJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZCIsTD0iW1xceDIwXFx0XFxyXFxuXFxmXSIsTT0iKD86XFxcXC58W1xcdy1dfFteXFx4MDAtXFx4YTBdKSsiLE49IlxcWyIrTCsiKigiK00rIikoPzoiK0wrIiooWypeJHwhfl0/PSkiK0wrIiooPzonKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcInwoIitNKyIpKXwpIitMKyIqXFxdIixPPSI6KCIrTSsiKSg/OlxcKCgoJygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCIpfCgoPzpcXFxcLnxbXlxcXFwoKVtcXF1dfCIrTisiKSopfC4qKVxcKXwpIixQPW5ldyBSZWdFeHAoTCsiKyIsImciKSxRPW5ldyBSZWdFeHAoIl4iK0wrIit8KCg/Ol58W15cXFxcXSkoPzpcXFxcLikqKSIrTCsiKyQiLCJnIiksUj1uZXcgUmVnRXhwKCJeIitMKyIqLCIrTCsiKiIpLFM9bmV3IFJlZ0V4cCgiXiIrTCsiKihbPit+XXwiK0wrIikiK0wrIioiKSxUPW5ldyBSZWdFeHAoIj0iK0wrIiooW15cXF0nXCJdKj8pIitMKyIqXFxdIiwiZyIpLFU9bmV3IFJlZ0V4cChPKSxWPW5ldyBSZWdFeHAoIl4iK00rIiQiKSxXPXtJRDpuZXcgUmVnRXhwKCJeIygiK00rIikiKSxDTEFTUzpuZXcgUmVnRXhwKCJeXFwuKCIrTSsiKSIpLFRBRzpuZXcgUmVnRXhwKCJeKCIrTSsifFsqXSkiKSxBVFRSOm5ldyBSZWdFeHAoIl4iK04pLFBTRVVETzpuZXcgUmVnRXhwKCJeIitPKSxDSElMRDpuZXcgUmVnRXhwKCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXCgiK0wrIiooZXZlbnxvZGR8KChbKy1dfCkoXFxkKilufCkiK0wrIiooPzooWystXXwpIitMKyIqKFxcZCspfCkpIitMKyIqXFwpfCkiLCJpIiksYm9vbDpuZXcgUmVnRXhwKCJeKD86IitLKyIpJCIsImkiKSxuZWVkc0NvbnRleHQ6bmV3IFJlZ0V4cCgiXiIrTCsiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFwoIitMKyIqKCg/Oi1cXGQpP1xcZCopIitMKyIqXFwpfCkoPz1bXi1dfCQpIiwiaSIpfSxYPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksWT0vXmhcZCQvaSxaPS9eW157XStce1xzKlxbbmF0aXZlIFx3LywkPS9eKD86IyhbXHctXSspfChcdyspfFwuKFtcdy1dKykpJC8sXz0vWyt+XS8sYWE9Lyd8XFwvZyxiYT1uZXcgUmVnRXhwKCJcXFxcKFtcXGRhLWZdezEsNn0iK0wrIj98KCIrTCsiKXwuKSIsImlnIiksY2E9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSIweCIrYi02NTUzNjtyZXR1cm4gZCE9PWR8fGM/YjowPmQ/U3RyaW5nLmZyb21DaGFyQ29kZShkKzY1NTM2KTpTdHJpbmcuZnJvbUNoYXJDb2RlKGQ+PjEwfDU1Mjk2LDEwMjMmZHw1NjMyMCl9LGRhPWZ1bmN0aW9uKCl7bSgpfTt0cnl7SC5hcHBseShFPUkuY2FsbCh2LmNoaWxkTm9kZXMpLHYuY2hpbGROb2RlcyksRVt2LmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChlYSl7SD17YXBwbHk6RS5sZW5ndGg/ZnVuY3Rpb24oYSxiKXtHLmFwcGx5KGEsSS5jYWxsKGIpKX06ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmxlbmd0aCxkPTA7d2hpbGUoYVtjKytdPWJbZCsrXSk7YS5sZW5ndGg9Yy0xfX19ZnVuY3Rpb24gZmEoYSxiLGQsZSl7dmFyIGYsaCxqLGssbCxvLHIscyx3PWImJmIub3duZXJEb2N1bWVudCx4PWI/Yi5ub2RlVHlwZTo5O2lmKGQ9ZHx8W10sInN0cmluZyIhPXR5cGVvZiBhfHwhYXx8MSE9PXgmJjkhPT14JiYxMSE9PXgpcmV0dXJuIGQ7aWYoIWUmJigoYj9iLm93bmVyRG9jdW1lbnR8fGI6dikhPT1uJiZtKGIpLGI9Ynx8bixwKSl7aWYoMTEhPT14JiYobz0kLmV4ZWMoYSkpKWlmKGY9b1sxXSl7aWYoOT09PXgpe2lmKCEoaj1iLmdldEVsZW1lbnRCeUlkKGYpKSlyZXR1cm4gZDtpZihqLmlkPT09ZilyZXR1cm4gZC5wdXNoKGopLGR9ZWxzZSBpZih3JiYoaj13LmdldEVsZW1lbnRCeUlkKGYpKSYmdChiLGopJiZqLmlkPT09ZilyZXR1cm4gZC5wdXNoKGopLGR9ZWxzZXtpZihvWzJdKXJldHVybiBILmFwcGx5KGQsYi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKSksZDtpZigoZj1vWzNdKSYmYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpcmV0dXJuIEguYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZikpLGR9aWYoYy5xc2EmJiFBW2ErIiAiXSYmKCFxfHwhcS50ZXN0KGEpKSl7aWYoMSE9PXgpdz1iLHM9YTtlbHNlIGlmKCJvYmplY3QiIT09Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXsoaz1iLmdldEF0dHJpYnV0ZSgiaWQiKSk/az1rLnJlcGxhY2UoYWEsIlxcJCYiKTpiLnNldEF0dHJpYnV0ZSgiaWQiLGs9dSkscj1nKGEpLGg9ci5sZW5ndGgsbD1WLnRlc3Qoayk/IiMiK2s6IltpZD0nIitrKyInXSI7d2hpbGUoaC0tKXJbaF09bCsiICIrcWEocltoXSk7cz1yLmpvaW4oIiwiKSx3PV8udGVzdChhKSYmb2EoYi5wYXJlbnROb2RlKXx8Yn1pZihzKXRyeXtyZXR1cm4gSC5hcHBseShkLHcucXVlcnlTZWxlY3RvckFsbChzKSksZH1jYXRjaCh5KXt9ZmluYWxseXtrPT09dSYmYi5yZW1vdmVBdHRyaWJ1dGUoImlkIil9fX1yZXR1cm4gaShhLnJlcGxhY2UoUSwiJDEiKSxiLGQsZSl9ZnVuY3Rpb24gZ2EoKXt2YXIgYT1bXTtmdW5jdGlvbiBiKGMsZSl7cmV0dXJuIGEucHVzaChjKyIgIik+ZC5jYWNoZUxlbmd0aCYmZGVsZXRlIGJbYS5zaGlmdCgpXSxiW2MrIiAiXT1lfXJldHVybiBifWZ1bmN0aW9uIGhhKGEpe3JldHVybiBhW3VdPSEwLGF9ZnVuY3Rpb24gaWEoYSl7dmFyIGI9bi5jcmVhdGVFbGVtZW50KCJkaXYiKTt0cnl7cmV0dXJuISFhKGIpfWNhdGNoKGMpe3JldHVybiExfWZpbmFsbHl7Yi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksYj1udWxsfX1mdW5jdGlvbiBqYShhLGIpe3ZhciBjPWEuc3BsaXQoInwiKSxlPWMubGVuZ3RoO3doaWxlKGUtLSlkLmF0dHJIYW5kbGVbY1tlXV09Yn1mdW5jdGlvbiBrYShhLGIpe3ZhciBjPWImJmEsZD1jJiYxPT09YS5ub2RlVHlwZSYmMT09PWIubm9kZVR5cGUmJih+Yi5zb3VyY2VJbmRleHx8QyktKH5hLnNvdXJjZUluZGV4fHxDKTtpZihkKXJldHVybiBkO2lmKGMpd2hpbGUoYz1jLm5leHRTaWJsaW5nKWlmKGM9PT1iKXJldHVybi0xO3JldHVybiBhPzE6LTF9ZnVuY3Rpb24gbGEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YyYmYi50eXBlPT09YX19ZnVuY3Rpb24gbWEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4oImlucHV0Ij09PWN8fCJidXR0b24iPT09YykmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG5hKGEpe3JldHVybiBoYShmdW5jdGlvbihiKXtyZXR1cm4gYj0rYixoYShmdW5jdGlvbihjLGQpe3ZhciBlLGY9YShbXSxjLmxlbmd0aCxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSljW2U9ZltnXV0mJihjW2VdPSEoZFtlXT1jW2VdKSl9KX0pfWZ1bmN0aW9uIG9hKGEpe3JldHVybiBhJiYidW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUmJmF9Yz1mYS5zdXBwb3J0PXt9LGY9ZmEuaXNYTUw9ZnVuY3Rpb24oYSl7dmFyIGI9YSYmKGEub3duZXJEb2N1bWVudHx8YSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiBiPyJIVE1MIiE9PWIubm9kZU5hbWU6ITF9LG09ZmEuc2V0RG9jdW1lbnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZSxnPWE/YS5vd25lckRvY3VtZW50fHxhOnY7cmV0dXJuIGchPT1uJiY5PT09Zy5ub2RlVHlwZSYmZy5kb2N1bWVudEVsZW1lbnQ/KG49ZyxvPW4uZG9jdW1lbnRFbGVtZW50LHA9IWYobiksKGU9bi5kZWZhdWx0VmlldykmJmUudG9wIT09ZSYmKGUuYWRkRXZlbnRMaXN0ZW5lcj9lLmFkZEV2ZW50TGlzdGVuZXIoInVubG9hZCIsZGEsITEpOmUuYXR0YWNoRXZlbnQmJmUuYXR0YWNoRXZlbnQoIm9udW5sb2FkIixkYSkpLGMuYXR0cmlidXRlcz1pYShmdW5jdGlvbihhKXtyZXR1cm4gYS5jbGFzc05hbWU9ImkiLCFhLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KSxjLmdldEVsZW1lbnRzQnlUYWdOYW1lPWlhKGZ1bmN0aW9uKGEpe3JldHVybiBhLmFwcGVuZENoaWxkKG4uY3JlYXRlQ29tbWVudCgiIikpLCFhLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RofSksYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPVoudGVzdChuLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLGMuZ2V0QnlJZD1pYShmdW5jdGlvbihhKXtyZXR1cm4gby5hcHBlbmRDaGlsZChhKS5pZD11LCFuLmdldEVsZW1lbnRzQnlOYW1lfHwhbi5nZXRFbGVtZW50c0J5TmFtZSh1KS5sZW5ndGh9KSxjLmdldEJ5SWQ/KGQuZmluZC5JRD1mdW5jdGlvbihhLGIpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgYi5nZXRFbGVtZW50QnlJZCYmcCl7dmFyIGM9Yi5nZXRFbGVtZW50QnlJZChhKTtyZXR1cm4gYz9bY106W119fSxkLmZpbHRlci5JRD1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoYmEsY2EpO3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoImlkIik9PT1ifX0pOihkZWxldGUgZC5maW5kLklELGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShiYSxjYSk7cmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBjPSJ1bmRlZmluZWQiIT10eXBlb2YgYS5nZXRBdHRyaWJ1dGVOb2RlJiZhLmdldEF0dHJpYnV0ZU5vZGUoImlkIik7cmV0dXJuIGMmJmMudmFsdWU9PT1ifX0pLGQuZmluZC5UQUc9Yy5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihhLGIpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgYi5nZXRFbGVtZW50c0J5VGFnTmFtZT9iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpOmMucXNhP2IucXVlcnlTZWxlY3RvckFsbChhKTp2b2lkIDB9OmZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPTAsZj1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpO2lmKCIqIj09PWEpe3doaWxlKGM9ZltlKytdKTE9PT1jLm5vZGVUeXBlJiZkLnB1c2goYyk7cmV0dXJuIGR9cmV0dXJuIGZ9LGQuZmluZC5DTEFTUz1jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGEsYil7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJnA/Yi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGEpOnZvaWQgMH0scj1bXSxxPVtdLChjLnFzYT1aLnRlc3Qobi5xdWVyeVNlbGVjdG9yQWxsKSkmJihpYShmdW5jdGlvbihhKXtvLmFwcGVuZENoaWxkKGEpLmlubmVySFRNTD0iPGEgaWQ9JyIrdSsiJz48L2E+PHNlbGVjdCBpZD0nIit1KyItXHJcXCcgbXNhbGxvd2NhcHR1cmU9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD4iLGEucXVlcnlTZWxlY3RvckFsbCgiW21zYWxsb3djYXB0dXJlXj0nJ10iKS5sZW5ndGgmJnEucHVzaCgiWypeJF09IitMKyIqKD86Jyd8XCJcIikiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5sZW5ndGh8fHEucHVzaCgiXFxbIitMKyIqKD86dmFsdWV8IitLKyIpIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJbaWR+PSIrdSsiLV0iKS5sZW5ndGh8fHEucHVzaCgifj0iKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RofHxxLnB1c2goIjpjaGVja2VkIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJhIyIrdSsiKyoiKS5sZW5ndGh8fHEucHVzaCgiLiMuK1srfl0iKX0pLGlhKGZ1bmN0aW9uKGEpe3ZhciBiPW4uY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtiLnNldEF0dHJpYnV0ZSgidHlwZSIsImhpZGRlbiIpLGEuYXBwZW5kQ2hpbGQoYikuc2V0QXR0cmlidXRlKCJuYW1lIiwiRCIpLGEucXVlcnlTZWxlY3RvckFsbCgiW25hbWU9ZF0iKS5sZW5ndGgmJnEucHVzaCgibmFtZSIrTCsiKlsqXiR8IX5dPz0iKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RofHxxLnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksYS5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4IikscS5wdXNoKCIsLio6Iil9KSksKGMubWF0Y2hlc1NlbGVjdG9yPVoudGVzdChzPW8ubWF0Y2hlc3x8by53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fG8ubW96TWF0Y2hlc1NlbGVjdG9yfHxvLm9NYXRjaGVzU2VsZWN0b3J8fG8ubXNNYXRjaGVzU2VsZWN0b3IpKSYmaWEoZnVuY3Rpb24oYSl7Yy5kaXNjb25uZWN0ZWRNYXRjaD1zLmNhbGwoYSwiZGl2Iikscy5jYWxsKGEsIltzIT0nJ106eCIpLHIucHVzaCgiIT0iLE8pfSkscT1xLmxlbmd0aCYmbmV3IFJlZ0V4cChxLmpvaW4oInwiKSkscj1yLmxlbmd0aCYmbmV3IFJlZ0V4cChyLmpvaW4oInwiKSksYj1aLnRlc3Qoby5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiksdD1ifHxaLnRlc3Qoby5jb250YWlucyk/ZnVuY3Rpb24oYSxiKXt2YXIgYz05PT09YS5ub2RlVHlwZT9hLmRvY3VtZW50RWxlbWVudDphLGQ9YiYmYi5wYXJlbnROb2RlO3JldHVybiBhPT09ZHx8ISghZHx8MSE9PWQubm9kZVR5cGV8fCEoYy5jb250YWlucz9jLmNvbnRhaW5zKGQpOmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZCkpKX06ZnVuY3Rpb24oYSxiKXtpZihiKXdoaWxlKGI9Yi5wYXJlbnROb2RlKWlmKGI9PT1hKXJldHVybiEwO3JldHVybiExfSxCPWI/ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gbD0hMCwwO3ZhciBkPSFhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uLSFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO3JldHVybiBkP2Q6KGQ9KGEub3duZXJEb2N1bWVudHx8YSk9PT0oYi5vd25lckRvY3VtZW50fHxiKT9hLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGIpOjEsMSZkfHwhYy5zb3J0RGV0YWNoZWQmJmIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYSk9PT1kP2E9PT1ufHxhLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYSk/LTE6Yj09PW58fGIub3duZXJEb2N1bWVudD09PXYmJnQodixiKT8xOms/SihrLGEpLUooayxiKTowOjQmZD8tMToxKX06ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gbD0hMCwwO3ZhciBjLGQ9MCxlPWEucGFyZW50Tm9kZSxmPWIucGFyZW50Tm9kZSxnPVthXSxoPVtiXTtpZighZXx8IWYpcmV0dXJuIGE9PT1uPy0xOmI9PT1uPzE6ZT8tMTpmPzE6az9KKGssYSktSihrLGIpOjA7aWYoZT09PWYpcmV0dXJuIGthKGEsYik7Yz1hO3doaWxlKGM9Yy5wYXJlbnROb2RlKWcudW5zaGlmdChjKTtjPWI7d2hpbGUoYz1jLnBhcmVudE5vZGUpaC51bnNoaWZ0KGMpO3doaWxlKGdbZF09PT1oW2RdKWQrKztyZXR1cm4gZD9rYShnW2RdLGhbZF0pOmdbZF09PT12Py0xOmhbZF09PT12PzE6MH0sbik6bn0sZmEubWF0Y2hlcz1mdW5jdGlvbihhLGIpe3JldHVybiBmYShhLG51bGwsbnVsbCxiKX0sZmEubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGEsYil7aWYoKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLGI9Yi5yZXBsYWNlKFQsIj0nJDEnXSIpLGMubWF0Y2hlc1NlbGVjdG9yJiZwJiYhQVtiKyIgIl0mJighcnx8IXIudGVzdChiKSkmJighcXx8IXEudGVzdChiKSkpdHJ5e3ZhciBkPXMuY2FsbChhLGIpO2lmKGR8fGMuZGlzY29ubmVjdGVkTWF0Y2h8fGEuZG9jdW1lbnQmJjExIT09YS5kb2N1bWVudC5ub2RlVHlwZSlyZXR1cm4gZH1jYXRjaChlKXt9cmV0dXJuIGZhKGIsbixudWxsLFthXSkubGVuZ3RoPjB9LGZhLmNvbnRhaW5zPWZ1bmN0aW9uKGEsYil7cmV0dXJuKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLHQoYSxiKX0sZmEuYXR0cj1mdW5jdGlvbihhLGIpeyhhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKTt2YXIgZT1kLmF0dHJIYW5kbGVbYi50b0xvd2VyQ2FzZSgpXSxmPWUmJkQuY2FsbChkLmF0dHJIYW5kbGUsYi50b0xvd2VyQ2FzZSgpKT9lKGEsYiwhcCk6dm9pZCAwO3JldHVybiB2b2lkIDAhPT1mP2Y6Yy5hdHRyaWJ1dGVzfHwhcD9hLmdldEF0dHJpYnV0ZShiKTooZj1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZmLnNwZWNpZmllZD9mLnZhbHVlOm51bGx9LGZhLmVycm9yPWZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcigiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIithKX0sZmEudW5pcXVlU29ydD1mdW5jdGlvbihhKXt2YXIgYixkPVtdLGU9MCxmPTA7aWYobD0hYy5kZXRlY3REdXBsaWNhdGVzLGs9IWMuc29ydFN0YWJsZSYmYS5zbGljZSgwKSxhLnNvcnQoQiksbCl7d2hpbGUoYj1hW2YrK10pYj09PWFbZl0mJihlPWQucHVzaChmKSk7d2hpbGUoZS0tKWEuc3BsaWNlKGRbZV0sMSl9cmV0dXJuIGs9bnVsbCxhfSxlPWZhLmdldFRleHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz0iIixkPTAsZj1hLm5vZGVUeXBlO2lmKGYpe2lmKDE9PT1mfHw5PT09Znx8MTE9PT1mKXtpZigic3RyaW5nIj09dHlwZW9mIGEudGV4dENvbnRlbnQpcmV0dXJuIGEudGV4dENvbnRlbnQ7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWMrPWUoYSl9ZWxzZSBpZigzPT09Znx8ND09PWYpcmV0dXJuIGEubm9kZVZhbHVlfWVsc2Ugd2hpbGUoYj1hW2QrK10pYys9ZShiKTtyZXR1cm4gY30sZD1mYS5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzpoYSxtYXRjaDpXLGF0dHJIYW5kbGU6e30sZmluZDp7fSxyZWxhdGl2ZTp7Ij4iOntkaXI6InBhcmVudE5vZGUiLGZpcnN0OiEwfSwiICI6e2RpcjoicGFyZW50Tm9kZSJ9LCIrIjp7ZGlyOiJwcmV2aW91c1NpYmxpbmciLGZpcnN0OiEwfSwifiI6e2RpcjoicHJldmlvdXNTaWJsaW5nIn19LHByZUZpbHRlcjp7QVRUUjpmdW5jdGlvbihhKXtyZXR1cm4gYVsxXT1hWzFdLnJlcGxhY2UoYmEsY2EpLGFbM109KGFbM118fGFbNF18fGFbNV18fCIiKS5yZXBsYWNlKGJhLGNhKSwifj0iPT09YVsyXSYmKGFbM109IiAiK2FbM10rIiAiKSxhLnNsaWNlKDAsNCl9LENISUxEOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0udG9Mb3dlckNhc2UoKSwibnRoIj09PWFbMV0uc2xpY2UoMCwzKT8oYVszXXx8ZmEuZXJyb3IoYVswXSksYVs0XT0rKGFbNF0/YVs1XSsoYVs2XXx8MSk6MiooImV2ZW4iPT09YVszXXx8Im9kZCI9PT1hWzNdKSksYVs1XT0rKGFbN10rYVs4XXx8Im9kZCI9PT1hWzNdKSk6YVszXSYmZmEuZXJyb3IoYVswXSksYX0sUFNFVURPOmZ1bmN0aW9uKGEpe3ZhciBiLGM9IWFbNl0mJmFbMl07cmV0dXJuIFcuQ0hJTEQudGVzdChhWzBdKT9udWxsOihhWzNdP2FbMl09YVs0XXx8YVs1XXx8IiI6YyYmVS50ZXN0KGMpJiYoYj1nKGMsITApKSYmKGI9Yy5pbmRleE9mKCIpIixjLmxlbmd0aC1iKS1jLmxlbmd0aCkmJihhWzBdPWFbMF0uc2xpY2UoMCxiKSxhWzJdPWMuc2xpY2UoMCxiKSksYS5zbGljZSgwLDMpKX19LGZpbHRlcjp7VEFHOmZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShiYSxjYSkudG9Mb3dlckNhc2UoKTtyZXR1cm4iKiI9PT1hP2Z1bmN0aW9uKCl7cmV0dXJuITB9OmZ1bmN0aW9uKGEpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1ifX0sQ0xBU1M6ZnVuY3Rpb24oYSl7dmFyIGI9eVthKyIgIl07cmV0dXJuIGJ8fChiPW5ldyBSZWdFeHAoIihefCIrTCsiKSIrYSsiKCIrTCsifCQpIikpJiZ5KGEsZnVuY3Rpb24oYSl7cmV0dXJuIGIudGVzdCgic3RyaW5nIj09dHlwZW9mIGEuY2xhc3NOYW1lJiZhLmNsYXNzTmFtZXx8InVuZGVmaW5lZCIhPXR5cGVvZiBhLmdldEF0dHJpYnV0ZSYmYS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiKX0pfSxBVFRSOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGU9ZmEuYXR0cihkLGEpO3JldHVybiBudWxsPT1lPyIhPSI9PT1iOmI/KGUrPSIiLCI9Ij09PWI/ZT09PWM6IiE9Ij09PWI/ZSE9PWM6Il49Ij09PWI/YyYmMD09PWUuaW5kZXhPZihjKToiKj0iPT09Yj9jJiZlLmluZGV4T2YoYyk+LTE6IiQ9Ij09PWI/YyYmZS5zbGljZSgtYy5sZW5ndGgpPT09Yzoifj0iPT09Yj8oIiAiK2UucmVwbGFjZShQLCIgIikrIiAiKS5pbmRleE9mKGMpPi0xOiJ8PSI9PT1iP2U9PT1jfHxlLnNsaWNlKDAsYy5sZW5ndGgrMSk9PT1jKyItIjohMSk6ITB9fSxDSElMRDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPSJudGgiIT09YS5zbGljZSgwLDMpLGc9Imxhc3QiIT09YS5zbGljZSgtNCksaD0ib2YtdHlwZSI9PT1iO3JldHVybiAxPT09ZCYmMD09PWU/ZnVuY3Rpb24oYSl7cmV0dXJuISFhLnBhcmVudE5vZGV9OmZ1bmN0aW9uKGIsYyxpKXt2YXIgaixrLGwsbSxuLG8scD1mIT09Zz8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLHE9Yi5wYXJlbnROb2RlLHI9aCYmYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHM9IWkmJiFoLHQ9ITE7aWYocSl7aWYoZil7d2hpbGUocCl7bT1iO3doaWxlKG09bVtwXSlpZihoP20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PW0ubm9kZVR5cGUpcmV0dXJuITE7bz1wPSJvbmx5Ij09PWEmJiFvJiYibmV4dFNpYmxpbmcifXJldHVybiEwfWlmKG89W2c/cS5maXJzdENoaWxkOnEubGFzdENoaWxkXSxnJiZzKXttPXEsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biYmalsyXSxtPW4mJnEuY2hpbGROb2Rlc1tuXTt3aGlsZShtPSsrbiYmbSYmbVtwXXx8KHQ9bj0wKXx8by5wb3AoKSlpZigxPT09bS5ub2RlVHlwZSYmKyt0JiZtPT09Yil7a1thXT1bdyxuLHRdO2JyZWFrfX1lbHNlIGlmKHMmJihtPWIsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biksdD09PSExKXdoaWxlKG09KytuJiZtJiZtW3BdfHwodD1uPTApfHxvLnBvcCgpKWlmKChoP20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PW0ubm9kZVR5cGUpJiYrK3QmJihzJiYobD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksa1thXT1bdyx0XSksbT09PWIpKWJyZWFrO3JldHVybiB0LT1lLHQ9PT1kfHx0JWQ9PT0wJiZ0L2Q+PTB9fX0sUFNFVURPOmZ1bmN0aW9uKGEsYil7dmFyIGMsZT1kLnBzZXVkb3NbYV18fGQuc2V0RmlsdGVyc1thLnRvTG93ZXJDYXNlKCldfHxmYS5lcnJvcigidW5zdXBwb3J0ZWQgcHNldWRvOiAiK2EpO3JldHVybiBlW3VdP2UoYik6ZS5sZW5ndGg+MT8oYz1bYSxhLCIiLGJdLGQuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShhLnRvTG93ZXJDYXNlKCkpP2hhKGZ1bmN0aW9uKGEsYyl7dmFyIGQsZj1lKGEsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pZD1KKGEsZltnXSksYVtkXT0hKGNbZF09ZltnXSl9KTpmdW5jdGlvbihhKXtyZXR1cm4gZShhLDAsYyl9KTplfX0scHNldWRvczp7bm90OmhhKGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W10sZD1oKGEucmVwbGFjZShRLCIkMSIpKTtyZXR1cm4gZFt1XT9oYShmdW5jdGlvbihhLGIsYyxlKXt2YXIgZixnPWQoYSxudWxsLGUsW10pLGg9YS5sZW5ndGg7d2hpbGUoaC0tKShmPWdbaF0pJiYoYVtoXT0hKGJbaF09ZikpfSk6ZnVuY3Rpb24oYSxlLGYpe3JldHVybiBiWzBdPWEsZChiLG51bGwsZixjKSxiWzBdPW51bGwsIWMucG9wKCl9fSksaGFzOmhhKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZmEoYSxiKS5sZW5ndGg+MH19KSxjb250YWluczpoYShmdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UoYmEsY2EpLGZ1bmN0aW9uKGIpe3JldHVybihiLnRleHRDb250ZW50fHxiLmlubmVyVGV4dHx8ZShiKSkuaW5kZXhPZihhKT4tMX19KSxsYW5nOmhhKGZ1bmN0aW9uKGEpe3JldHVybiBWLnRlc3QoYXx8IiIpfHxmYS5lcnJvcigidW5zdXBwb3J0ZWQgbGFuZzogIithKSxhPWEucmVwbGFjZShiYSxjYSkudG9Mb3dlckNhc2UoKSxmdW5jdGlvbihiKXt2YXIgYztkbyBpZihjPXA/Yi5sYW5nOmIuZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpfHxiLmdldEF0dHJpYnV0ZSgibGFuZyIpKXJldHVybiBjPWMudG9Mb3dlckNhc2UoKSxjPT09YXx8MD09PWMuaW5kZXhPZihhKyItIik7d2hpbGUoKGI9Yi5wYXJlbnROb2RlKSYmMT09PWIubm9kZVR5cGUpO3JldHVybiExfX0pLHRhcmdldDpmdW5jdGlvbihiKXt2YXIgYz1hLmxvY2F0aW9uJiZhLmxvY2F0aW9uLmhhc2g7cmV0dXJuIGMmJmMuc2xpY2UoMSk9PT1iLmlkfSxyb290OmZ1bmN0aW9uKGEpe3JldHVybiBhPT09b30sZm9jdXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1uLmFjdGl2ZUVsZW1lbnQmJighbi5oYXNGb2N1c3x8bi5oYXNGb2N1cygpKSYmISEoYS50eXBlfHxhLmhyZWZ8fH5hLnRhYkluZGV4KX0sZW5hYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSExfSxkaXNhYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSEwfSxjaGVja2VkOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmISFhLmNoZWNrZWR8fCJvcHRpb24iPT09YiYmISFhLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxhLnNlbGVjdGVkPT09ITB9LGVtcHR5OmZ1bmN0aW9uKGEpe2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylpZihhLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4hZC5wc2V1ZG9zLmVtcHR5KGEpfSxoZWFkZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIFkudGVzdChhLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFgudGVzdChhLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmImJ1dHRvbiI9PT1hLnR5cGV8fCJidXR0b24iPT09Yn0sdGV4dDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4iaW5wdXQiPT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYidGV4dCI9PT1hLnR5cGUmJihudWxsPT0oYj1hLmdldEF0dHJpYnV0ZSgidHlwZSIpKXx8InRleHQiPT09Yi50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6bmEoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0Om5hKGZ1bmN0aW9uKGEsYil7cmV0dXJuW2ItMV19KSxlcTpuYShmdW5jdGlvbihhLGIsYyl7cmV0dXJuWzA+Yz9jK2I6Y119KSxldmVuOm5hKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksb2RkOm5hKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksbHQ6bmEoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wPmM/YytiOmM7LS1kPj0wOylhLnB1c2goZCk7cmV0dXJuIGF9KSxndDpuYShmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA+Yz9jK2I6YzsrK2Q8YjspYS5wdXNoKGQpO3JldHVybiBhfSl9fSxkLnBzZXVkb3MubnRoPWQucHNldWRvcy5lcTtmb3IoYiBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlkLnBzZXVkb3NbYl09bGEoYik7Zm9yKGIgaW57c3VibWl0OiEwLHJlc2V0OiEwfSlkLnBzZXVkb3NbYl09bWEoYik7ZnVuY3Rpb24gcGEoKXt9cGEucHJvdG90eXBlPWQuZmlsdGVycz1kLnBzZXVkb3MsZC5zZXRGaWx0ZXJzPW5ldyBwYSxnPWZhLnRva2VuaXplPWZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGcsaCxpLGosaz16W2ErIiAiXTtpZihrKXJldHVybiBiPzA6ay5zbGljZSgwKTtoPWEsaT1bXSxqPWQucHJlRmlsdGVyO3doaWxlKGgpe2MmJiEoZT1SLmV4ZWMoaCkpfHwoZSYmKGg9aC5zbGljZShlWzBdLmxlbmd0aCl8fGgpLGkucHVzaChmPVtdKSksYz0hMSwoZT1TLmV4ZWMoaCkpJiYoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZVswXS5yZXBsYWNlKFEsIiAiKX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2ZvcihnIGluIGQuZmlsdGVyKSEoZT1XW2ddLmV4ZWMoaCkpfHxqW2ddJiYhKGU9altnXShlKSl8fChjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTpnLG1hdGNoZXM6ZX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2lmKCFjKWJyZWFrfXJldHVybiBiP2gubGVuZ3RoOmg/ZmEuZXJyb3IoYSk6eihhLGkpLnNsaWNlKDApfTtmdW5jdGlvbiBxYShhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoLGQ9IiI7Yz5iO2IrKylkKz1hW2JdLnZhbHVlO3JldHVybiBkfWZ1bmN0aW9uIHJhKGEsYixjKXt2YXIgZD1iLmRpcixlPWMmJiJwYXJlbnROb2RlIj09PWQsZj14Kys7cmV0dXJuIGIuZmlyc3Q/ZnVuY3Rpb24oYixjLGYpe3doaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZSlyZXR1cm4gYShiLGMsZil9OmZ1bmN0aW9uKGIsYyxnKXt2YXIgaCxpLGosaz1bdyxmXTtpZihnKXt3aGlsZShiPWJbZF0paWYoKDE9PT1iLm5vZGVUeXBlfHxlKSYmYShiLGMsZykpcmV0dXJuITB9ZWxzZSB3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGUpe2lmKGo9Ylt1XXx8KGJbdV09e30pLGk9altiLnVuaXF1ZUlEXXx8KGpbYi51bmlxdWVJRF09e30pLChoPWlbZF0pJiZoWzBdPT09dyYmaFsxXT09PWYpcmV0dXJuIGtbMl09aFsyXTtpZihpW2RdPWssa1syXT1hKGIsYyxnKSlyZXR1cm4hMH19fWZ1bmN0aW9uIHNhKGEpe3JldHVybiBhLmxlbmd0aD4xP2Z1bmN0aW9uKGIsYyxkKXt2YXIgZT1hLmxlbmd0aDt3aGlsZShlLS0paWYoIWFbZV0oYixjLGQpKXJldHVybiExO3JldHVybiEwfTphWzBdfWZ1bmN0aW9uIHRhKGEsYixjKXtmb3IodmFyIGQ9MCxlPWIubGVuZ3RoO2U+ZDtkKyspZmEoYSxiW2RdLGMpO3JldHVybiBjfWZ1bmN0aW9uIHVhKGEsYixjLGQsZSl7Zm9yKHZhciBmLGc9W10saD0wLGk9YS5sZW5ndGgsaj1udWxsIT1iO2k+aDtoKyspKGY9YVtoXSkmJihjJiYhYyhmLGQsZSl8fChnLnB1c2goZiksaiYmYi5wdXNoKGgpKSk7cmV0dXJuIGd9ZnVuY3Rpb24gdmEoYSxiLGMsZCxlLGYpe3JldHVybiBkJiYhZFt1XSYmKGQ9dmEoZCkpLGUmJiFlW3VdJiYoZT12YShlLGYpKSxoYShmdW5jdGlvbihmLGcsaCxpKXt2YXIgaixrLGwsbT1bXSxuPVtdLG89Zy5sZW5ndGgscD1mfHx0YShifHwiKiIsaC5ub2RlVHlwZT9baF06aCxbXSkscT0hYXx8IWYmJmI/cDp1YShwLG0sYSxoLGkpLHI9Yz9lfHwoZj9hOm98fGQpP1tdOmc6cTtpZihjJiZjKHEscixoLGkpLGQpe2o9dWEocixuKSxkKGosW10saCxpKSxrPWoubGVuZ3RoO3doaWxlKGstLSkobD1qW2tdKSYmKHJbbltrXV09IShxW25ba11dPWwpKX1pZihmKXtpZihlfHxhKXtpZihlKXtqPVtdLGs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiZqLnB1c2gocVtrXT1sKTtlKG51bGwscj1bXSxqLGkpfWs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiYoaj1lP0ooZixsKTptW2tdKT4tMSYmKGZbal09IShnW2pdPWwpKX19ZWxzZSByPXVhKHI9PT1nP3Iuc3BsaWNlKG8sci5sZW5ndGgpOnIpLGU/ZShudWxsLGcscixpKTpILmFwcGx5KGcscil9KX1mdW5jdGlvbiB3YShhKXtmb3IodmFyIGIsYyxlLGY9YS5sZW5ndGgsZz1kLnJlbGF0aXZlW2FbMF0udHlwZV0saD1nfHxkLnJlbGF0aXZlWyIgIl0saT1nPzE6MCxrPXJhKGZ1bmN0aW9uKGEpe3JldHVybiBhPT09Yn0saCwhMCksbD1yYShmdW5jdGlvbihhKXtyZXR1cm4gSihiLGEpPi0xfSxoLCEwKSxtPVtmdW5jdGlvbihhLGMsZCl7dmFyIGU9IWcmJihkfHxjIT09ail8fCgoYj1jKS5ub2RlVHlwZT9rKGEsYyxkKTpsKGEsYyxkKSk7cmV0dXJuIGI9bnVsbCxlfV07Zj5pO2krKylpZihjPWQucmVsYXRpdmVbYVtpXS50eXBlXSltPVtyYShzYShtKSxjKV07ZWxzZXtpZihjPWQuZmlsdGVyW2FbaV0udHlwZV0uYXBwbHkobnVsbCxhW2ldLm1hdGNoZXMpLGNbdV0pe2ZvcihlPSsraTtmPmU7ZSsrKWlmKGQucmVsYXRpdmVbYVtlXS50eXBlXSlicmVhaztyZXR1cm4gdmEoaT4xJiZzYShtKSxpPjEmJnFhKGEuc2xpY2UoMCxpLTEpLmNvbmNhdCh7dmFsdWU6IiAiPT09YVtpLTJdLnR5cGU/IioiOiIifSkpLnJlcGxhY2UoUSwiJDEiKSxjLGU+aSYmd2EoYS5zbGljZShpLGUpKSxmPmUmJndhKGE9YS5zbGljZShlKSksZj5lJiZxYShhKSl9bS5wdXNoKGMpfXJldHVybiBzYShtKX1mdW5jdGlvbiB4YShhLGIpe3ZhciBjPWIubGVuZ3RoPjAsZT1hLmxlbmd0aD4wLGY9ZnVuY3Rpb24oZixnLGgsaSxrKXt2YXIgbCxvLHEscj0wLHM9IjAiLHQ9ZiYmW10sdT1bXSx2PWoseD1mfHxlJiZkLmZpbmQuVEFHKCIqIixrKSx5PXcrPW51bGw9PXY/MTpNYXRoLnJhbmRvbSgpfHwuMSx6PXgubGVuZ3RoO2ZvcihrJiYoaj1nPT09bnx8Z3x8ayk7cyE9PXomJm51bGwhPShsPXhbc10pO3MrKyl7aWYoZSYmbCl7bz0wLGd8fGwub3duZXJEb2N1bWVudD09PW58fChtKGwpLGg9IXApO3doaWxlKHE9YVtvKytdKWlmKHEobCxnfHxuLGgpKXtpLnB1c2gobCk7YnJlYWt9ayYmKHc9eSl9YyYmKChsPSFxJiZsKSYmci0tLGYmJnQucHVzaChsKSl9aWYocis9cyxjJiZzIT09cil7bz0wO3doaWxlKHE9YltvKytdKXEodCx1LGcsaCk7aWYoZil7aWYocj4wKXdoaWxlKHMtLSl0W3NdfHx1W3NdfHwodVtzXT1GLmNhbGwoaSkpO3U9dWEodSl9SC5hcHBseShpLHUpLGsmJiFmJiZ1Lmxlbmd0aD4wJiZyK2IubGVuZ3RoPjEmJmZhLnVuaXF1ZVNvcnQoaSl9cmV0dXJuIGsmJih3PXksaj12KSx0fTtyZXR1cm4gYz9oYShmKTpmfXJldHVybiBoPWZhLmNvbXBpbGU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9W10sZj1BW2ErIiAiXTtpZighZil7Ynx8KGI9ZyhhKSksYz1iLmxlbmd0aDt3aGlsZShjLS0pZj13YShiW2NdKSxmW3VdP2QucHVzaChmKTplLnB1c2goZik7Zj1BKGEseGEoZSxkKSksZi5zZWxlY3Rvcj1hfXJldHVybiBmfSxpPWZhLnNlbGVjdD1mdW5jdGlvbihhLGIsZSxmKXt2YXIgaSxqLGssbCxtLG49ImZ1bmN0aW9uIj09dHlwZW9mIGEmJmEsbz0hZiYmZyhhPW4uc2VsZWN0b3J8fGEpO2lmKGU9ZXx8W10sMT09PW8ubGVuZ3RoKXtpZihqPW9bMF09b1swXS5zbGljZSgwKSxqLmxlbmd0aD4yJiYiSUQiPT09KGs9alswXSkudHlwZSYmYy5nZXRCeUlkJiY5PT09Yi5ub2RlVHlwZSYmcCYmZC5yZWxhdGl2ZVtqWzFdLnR5cGVdKXtpZihiPShkLmZpbmQuSUQoay5tYXRjaGVzWzBdLnJlcGxhY2UoYmEsY2EpLGIpfHxbXSlbMF0sIWIpcmV0dXJuIGU7biYmKGI9Yi5wYXJlbnROb2RlKSxhPWEuc2xpY2Uoai5zaGlmdCgpLnZhbHVlLmxlbmd0aCl9aT1XLm5lZWRzQ29udGV4dC50ZXN0KGEpPzA6ai5sZW5ndGg7d2hpbGUoaS0tKXtpZihrPWpbaV0sZC5yZWxhdGl2ZVtsPWsudHlwZV0pYnJlYWs7aWYoKG09ZC5maW5kW2xdKSYmKGY9bShrLm1hdGNoZXNbMF0ucmVwbGFjZShiYSxjYSksXy50ZXN0KGpbMF0udHlwZSkmJm9hKGIucGFyZW50Tm9kZSl8fGIpKSl7aWYoai5zcGxpY2UoaSwxKSxhPWYubGVuZ3RoJiZxYShqKSwhYSlyZXR1cm4gSC5hcHBseShlLGYpLGU7YnJlYWt9fX1yZXR1cm4obnx8aChhLG8pKShmLGIsIXAsZSwhYnx8Xy50ZXN0KGEpJiZvYShiLnBhcmVudE5vZGUpfHxiKSxlfSxjLnNvcnRTdGFibGU9dS5zcGxpdCgiIikuc29ydChCKS5qb2luKCIiKT09PXUsYy5kZXRlY3REdXBsaWNhdGVzPSEhbCxtKCksYy5zb3J0RGV0YWNoZWQ9aWEoZnVuY3Rpb24oYSl7cmV0dXJuIDEmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihuLmNyZWF0ZUVsZW1lbnQoImRpdiIpKX0pLGlhKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiIsIiMiPT09YS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpfSl8fGphKCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGM/dm9pZCAwOmEuZ2V0QXR0cmlidXRlKGIsInR5cGUiPT09Yi50b0xvd2VyQ2FzZSgpPzE6Mil9KSxjLmF0dHJpYnV0ZXMmJmlhKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD0iPGlucHV0Lz4iLGEuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwiIiksIiI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpfSl8fGphKCJ2YWx1ZSIsZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjfHwiaW5wdXQiIT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpP3ZvaWQgMDphLmRlZmF1bHRWYWx1ZX0pLGlhKGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKX0pfHxqYShLLGZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYz92b2lkIDA6YVtiXT09PSEwP2IudG9Mb3dlckNhc2UoKTooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZkLnNwZWNpZmllZD9kLnZhbHVlOm51bGx9KSxmYX0oYSk7bi5maW5kPXQsbi5leHByPXQuc2VsZWN0b3JzLG4uZXhwclsiOiJdPW4uZXhwci5wc2V1ZG9zLG4udW5pcXVlU29ydD1uLnVuaXF1ZT10LnVuaXF1ZVNvcnQsbi50ZXh0PXQuZ2V0VGV4dCxuLmlzWE1MRG9jPXQuaXNYTUwsbi5jb250YWlucz10LmNvbnRhaW5zO3ZhciB1PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPXZvaWQgMCE9PWM7d2hpbGUoKGE9YVtiXSkmJjkhPT1hLm5vZGVUeXBlKWlmKDE9PT1hLm5vZGVUeXBlKXtpZihlJiZuKGEpLmlzKGMpKWJyZWFrO2QucHVzaChhKX1yZXR1cm4gZH0sdj1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXTthO2E9YS5uZXh0U2libGluZykxPT09YS5ub2RlVHlwZSYmYSE9PWImJmMucHVzaChhKTtyZXR1cm4gY30sdz1uLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LHg9L148KFtcdy1dKylccypcLz8+KD86PFwvXDE+fCkkLyx5PS9eLlteOiNcW1wuLF0qJC87ZnVuY3Rpb24geihhLGIsYyl7aWYobi5pc0Z1bmN0aW9uKGIpKXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhLGQpe3JldHVybiEhYi5jYWxsKGEsZCxhKSE9PWN9KTtpZihiLm5vZGVUeXBlKXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gYT09PWIhPT1jfSk7aWYoInN0cmluZyI9PXR5cGVvZiBiKXtpZih5LnRlc3QoYikpcmV0dXJuIG4uZmlsdGVyKGIsYSxjKTtiPW4uZmlsdGVyKGIsYSl9cmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBuLmluQXJyYXkoYSxiKT4tMSE9PWN9KX1uLmZpbHRlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YlswXTtyZXR1cm4gYyYmKGE9Ijpub3QoIithKyIpIiksMT09PWIubGVuZ3RoJiYxPT09ZC5ub2RlVHlwZT9uLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGQsYSk/W2RdOltdOm4uZmluZC5tYXRjaGVzKGEsbi5ncmVwKGIsZnVuY3Rpb24oYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlfSkpfSxuLmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihhKXt2YXIgYixjPVtdLGQ9dGhpcyxlPWQubGVuZ3RoO2lmKCJzdHJpbmciIT10eXBlb2YgYSlyZXR1cm4gdGhpcy5wdXNoU3RhY2sobihhKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IoYj0wO2U+YjtiKyspaWYobi5jb250YWlucyhkW2JdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihiPTA7ZT5iO2IrKyluLmZpbmQoYSxkW2JdLGMpO3JldHVybiBjPXRoaXMucHVzaFN0YWNrKGU+MT9uLnVuaXF1ZShjKTpjKSxjLnNlbGVjdG9yPXRoaXMuc2VsZWN0b3I/dGhpcy5zZWxlY3RvcisiICIrYTphLGN9LGZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soeih0aGlzLGF8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soeih0aGlzLGF8fFtdLCEwKSl9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiEheih0aGlzLCJzdHJpbmciPT10eXBlb2YgYSYmdy50ZXN0KGEpP24oYSk6YXx8W10sITEpLmxlbmd0aH19KTt2YXIgQSxCPS9eKD86XHMqKDxbXHdcV10rPilbXj5dKnwjKFtcdy1dKikpJC8sQz1uLmZuLmluaXQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBlLGY7aWYoIWEpcmV0dXJuIHRoaXM7aWYoYz1jfHxBLCJzdHJpbmciPT10eXBlb2YgYSl7aWYoZT0iPCI9PT1hLmNoYXJBdCgwKSYmIj4iPT09YS5jaGFyQXQoYS5sZW5ndGgtMSkmJmEubGVuZ3RoPj0zP1tudWxsLGEsbnVsbF06Qi5leGVjKGEpLCFlfHwhZVsxXSYmYilyZXR1cm4hYnx8Yi5qcXVlcnk/KGJ8fGMpLmZpbmQoYSk6dGhpcy5jb25zdHJ1Y3RvcihiKS5maW5kKGEpO2lmKGVbMV0pe2lmKGI9YiBpbnN0YW5jZW9mIG4/YlswXTpiLG4ubWVyZ2UodGhpcyxuLnBhcnNlSFRNTChlWzFdLGImJmIubm9kZVR5cGU/Yi5vd25lckRvY3VtZW50fHxiOmQsITApKSx4LnRlc3QoZVsxXSkmJm4uaXNQbGFpbk9iamVjdChiKSlmb3IoZSBpbiBiKW4uaXNGdW5jdGlvbih0aGlzW2VdKT90aGlzW2VdKGJbZV0pOnRoaXMuYXR0cihlLGJbZV0pO3JldHVybiB0aGlzfWlmKGY9ZC5nZXRFbGVtZW50QnlJZChlWzJdKSxmJiZmLnBhcmVudE5vZGUpe2lmKGYuaWQhPT1lWzJdKXJldHVybiBBLmZpbmQoYSk7dGhpcy5sZW5ndGg9MSx0aGlzWzBdPWZ9cmV0dXJuIHRoaXMuY29udGV4dD1kLHRoaXMuc2VsZWN0b3I9YSx0aGlzfXJldHVybiBhLm5vZGVUeXBlPyh0aGlzLmNvbnRleHQ9dGhpc1swXT1hLHRoaXMubGVuZ3RoPTEsdGhpcyk6bi5pc0Z1bmN0aW9uKGEpPyJ1bmRlZmluZWQiIT10eXBlb2YgYy5yZWFkeT9jLnJlYWR5KGEpOmEobik6KHZvaWQgMCE9PWEuc2VsZWN0b3ImJih0aGlzLnNlbGVjdG9yPWEuc2VsZWN0b3IsdGhpcy5jb250ZXh0PWEuY29udGV4dCksbi5tYWtlQXJyYXkoYSx0aGlzKSl9O0MucHJvdG90eXBlPW4uZm4sQT1uKGQpO3ZhciBEPS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLEU9e2NoaWxkcmVuOiEwLGNvbnRlbnRzOiEwLG5leHQ6ITAscHJldjohMH07bi5mbi5leHRlbmQoe2hhczpmdW5jdGlvbihhKXt2YXIgYixjPW4oYSx0aGlzKSxkPWMubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2ZvcihiPTA7ZD5iO2IrKylpZihuLmNvbnRhaW5zKHRoaXMsY1tiXSkpcmV0dXJuITB9KX0sY2xvc2VzdDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT10aGlzLmxlbmd0aCxmPVtdLGc9dy50ZXN0KGEpfHwic3RyaW5nIiE9dHlwZW9mIGE/bihhLGJ8fHRoaXMuY29udGV4dCk6MDtlPmQ7ZCsrKWZvcihjPXRoaXNbZF07YyYmYyE9PWI7Yz1jLnBhcmVudE5vZGUpaWYoYy5ub2RlVHlwZTwxMSYmKGc/Zy5pbmRleChjKT4tMToxPT09Yy5ub2RlVHlwZSYmbi5maW5kLm1hdGNoZXNTZWxlY3RvcihjLGEpKSl7Zi5wdXNoKGMpO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhmLmxlbmd0aD4xP24udW5pcXVlU29ydChmKTpmKX0saW5kZXg6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/InN0cmluZyI9PXR5cGVvZiBhP24uaW5BcnJheSh0aGlzWzBdLG4oYSkpOm4uaW5BcnJheShhLmpxdWVyeT9hWzBdOmEsdGhpcyk6dGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xfSxhZGQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobi51bmlxdWVTb3J0KG4ubWVyZ2UodGhpcy5nZXQoKSxuKGEsYikpKSl9LGFkZEJhY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWE/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoYSkpfX0pO2Z1bmN0aW9uIEYoYSxiKXtkbyBhPWFbYl07d2hpbGUoYSYmMSE9PWEubm9kZVR5cGUpO3JldHVybiBhfW4uZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmMTEhPT1iLm5vZGVUeXBlP2I6bnVsbH0scGFyZW50czpmdW5jdGlvbihhKXtyZXR1cm4gdShhLCJwYXJlbnROb2RlIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHUoYSwicGFyZW50Tm9kZSIsYyl9LG5leHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEYoYSwibmV4dFNpYmxpbmciKX0scHJldjpmdW5jdGlvbihhKXtyZXR1cm4gRihhLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dEFsbDpmdW5jdGlvbihhKXtyZXR1cm4gdShhLCJuZXh0U2libGluZyIpfSxwcmV2QWxsOmZ1bmN0aW9uKGEpe3JldHVybiB1KGEsInByZXZpb3VzU2libGluZyIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB1KGEsIm5leHRTaWJsaW5nIixjKX0scHJldlVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdShhLCJwcmV2aW91c1NpYmxpbmciLGMpfSxzaWJsaW5nczpmdW5jdGlvbihhKXtyZXR1cm4gdigoYS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxhKX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7cmV0dXJuIHYoYS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIG4ubm9kZU5hbWUoYSwiaWZyYW1lIik/YS5jb250ZW50RG9jdW1lbnR8fGEuY29udGVudFdpbmRvdy5kb2N1bWVudDpuLm1lcmdlKFtdLGEuY2hpbGROb2Rlcyl9fSxmdW5jdGlvbihhLGIpe24uZm5bYV09ZnVuY3Rpb24oYyxkKXt2YXIgZT1uLm1hcCh0aGlzLGIsYyk7cmV0dXJuIlVudGlsIiE9PWEuc2xpY2UoLTUpJiYoZD1jKSxkJiYic3RyaW5nIj09dHlwZW9mIGQmJihlPW4uZmlsdGVyKGQsZSkpLHRoaXMubGVuZ3RoPjEmJihFW2FdfHwoZT1uLnVuaXF1ZVNvcnQoZSkpLEQudGVzdChhKSYmKGU9ZS5yZXZlcnNlKCkpKSx0aGlzLnB1c2hTdGFjayhlKX19KTt2YXIgRz0vXFMrL2c7ZnVuY3Rpb24gSChhKXt2YXIgYj17fTtyZXR1cm4gbi5lYWNoKGEubWF0Y2goRyl8fFtdLGZ1bmN0aW9uKGEsYyl7YltjXT0hMH0pLGJ9bi5DYWxsYmFja3M9ZnVuY3Rpb24oYSl7YT0ic3RyaW5nIj09dHlwZW9mIGE/SChhKTpuLmV4dGVuZCh7fSxhKTt2YXIgYixjLGQsZSxmPVtdLGc9W10saD0tMSxpPWZ1bmN0aW9uKCl7Zm9yKGU9YS5vbmNlLGQ9Yj0hMDtnLmxlbmd0aDtoPS0xKXtjPWcuc2hpZnQoKTt3aGlsZSgrK2g8Zi5sZW5ndGgpZltoXS5hcHBseShjWzBdLGNbMV0pPT09ITEmJmEuc3RvcE9uRmFsc2UmJihoPWYubGVuZ3RoLGM9ITEpfWEubWVtb3J5fHwoYz0hMSksYj0hMSxlJiYoZj1jP1tdOiIiKX0saj17YWRkOmZ1bmN0aW9uKCl7cmV0dXJuIGYmJihjJiYhYiYmKGg9Zi5sZW5ndGgtMSxnLnB1c2goYykpLGZ1bmN0aW9uIGQoYil7bi5lYWNoKGIsZnVuY3Rpb24oYixjKXtuLmlzRnVuY3Rpb24oYyk/YS51bmlxdWUmJmouaGFzKGMpfHxmLnB1c2goYyk6YyYmYy5sZW5ndGgmJiJzdHJpbmciIT09bi50eXBlKGMpJiZkKGMpfSl9KGFyZ3VtZW50cyksYyYmIWImJmkoKSksdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIG4uZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oYSxiKXt2YXIgYzt3aGlsZSgoYz1uLmluQXJyYXkoYixmLGMpKT4tMSlmLnNwbGljZShjLDEpLGg+PWMmJmgtLX0pLHRoaXN9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gYT9uLmluQXJyYXkoYSxmKT4tMTpmLmxlbmd0aD4wfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBmJiYoZj1bXSksdGhpc30sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiBlPWc9W10sZj1jPSIiLHRoaXN9LGRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIWZ9LGxvY2s6ZnVuY3Rpb24oKXtyZXR1cm4gZT0hMCxjfHxqLmRpc2FibGUoKSx0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWV9LGZpcmVXaXRoOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGV8fChjPWN8fFtdLGM9W2EsYy5zbGljZT9jLnNsaWNlKCk6Y10sZy5wdXNoKGMpLGJ8fGkoKSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBqLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhZH19O3JldHVybiBqfSxuLmV4dGVuZCh7RGVmZXJyZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9W1sicmVzb2x2ZSIsImRvbmUiLG4uQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLCJyZXNvbHZlZCJdLFsicmVqZWN0IiwiZmFpbCIsbi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlamVjdGVkIl0sWyJub3RpZnkiLCJwcm9ncmVzcyIsbi5DYWxsYmFja3MoIm1lbW9yeSIpXV0sYz0icGVuZGluZyIsZD17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gY30sYWx3YXlzOmZ1bmN0aW9uKCl7cmV0dXJuIGUuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSx0aGlzfSx0aGVuOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiBuLkRlZmVycmVkKGZ1bmN0aW9uKGMpe24uZWFjaChiLGZ1bmN0aW9uKGIsZil7dmFyIGc9bi5pc0Z1bmN0aW9uKGFbYl0pJiZhW2JdO2VbZlsxXV0oZnVuY3Rpb24oKXt2YXIgYT1nJiZnLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthJiZuLmlzRnVuY3Rpb24oYS5wcm9taXNlKT9hLnByb21pc2UoKS5wcm9ncmVzcyhjLm5vdGlmeSkuZG9uZShjLnJlc29sdmUpLmZhaWwoYy5yZWplY3QpOmNbZlswXSsiV2l0aCJdKHRoaXM9PT1kP2MucHJvbWlzZSgpOnRoaXMsZz9bYV06YXJndW1lbnRzKX0pfSksYT1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hP24uZXh0ZW5kKGEsZCk6ZH19LGU9e307cmV0dXJuIGQucGlwZT1kLnRoZW4sbi5lYWNoKGIsZnVuY3Rpb24oYSxmKXt2YXIgZz1mWzJdLGg9ZlszXTtkW2ZbMV1dPWcuYWRkLGgmJmcuYWRkKGZ1bmN0aW9uKCl7Yz1ofSxiWzFeYV1bMl0uZGlzYWJsZSxiWzJdWzJdLmxvY2spLGVbZlswXV09ZnVuY3Rpb24oKXtyZXR1cm4gZVtmWzBdKyJXaXRoIl0odGhpcz09PWU/ZDp0aGlzLGFyZ3VtZW50cyksdGhpc30sZVtmWzBdKyJXaXRoIl09Zy5maXJlV2l0aH0pLGQucHJvbWlzZShlKSxhJiZhLmNhbGwoZSxlKSxlfSx3aGVuOmZ1bmN0aW9uKGEpe3ZhciBiPTAsYz1lLmNhbGwoYXJndW1lbnRzKSxkPWMubGVuZ3RoLGY9MSE9PWR8fGEmJm4uaXNGdW5jdGlvbihhLnByb21pc2UpP2Q6MCxnPTE9PT1mP2E6bi5EZWZlcnJlZCgpLGg9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXtiW2FdPXRoaXMsY1thXT1hcmd1bWVudHMubGVuZ3RoPjE/ZS5jYWxsKGFyZ3VtZW50cyk6ZCxjPT09aT9nLm5vdGlmeVdpdGgoYixjKTotLWZ8fGcucmVzb2x2ZVdpdGgoYixjKX19LGksaixrO2lmKGQ+MSlmb3IoaT1uZXcgQXJyYXkoZCksaj1uZXcgQXJyYXkoZCksaz1uZXcgQXJyYXkoZCk7ZD5iO2IrKyljW2JdJiZuLmlzRnVuY3Rpb24oY1tiXS5wcm9taXNlKT9jW2JdLnByb21pc2UoKS5wcm9ncmVzcyhoKGIsaixpKSkuZG9uZShoKGIsayxjKSkuZmFpbChnLnJlamVjdCk6LS1mO3JldHVybiBmfHxnLnJlc29sdmVXaXRoKGssYyksZy5wcm9taXNlKCl9fSk7dmFyIEk7bi5mbi5yZWFkeT1mdW5jdGlvbihhKXtyZXR1cm4gbi5yZWFkeS5wcm9taXNlKCkuZG9uZShhKSx0aGlzfSxuLmV4dGVuZCh7aXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oYSl7YT9uLnJlYWR5V2FpdCsrOm4ucmVhZHkoITApfSxyZWFkeTpmdW5jdGlvbihhKXsoYT09PSEwPy0tbi5yZWFkeVdhaXQ6bi5pc1JlYWR5KXx8KG4uaXNSZWFkeT0hMCxhIT09ITAmJi0tbi5yZWFkeVdhaXQ+MHx8KEkucmVzb2x2ZVdpdGgoZCxbbl0pLG4uZm4udHJpZ2dlckhhbmRsZXImJihuKGQpLnRyaWdnZXJIYW5kbGVyKCJyZWFkeSIpLG4oZCkub2ZmKCJyZWFkeSIpKSkpfX0pO2Z1bmN0aW9uIEooKXtkLmFkZEV2ZW50TGlzdGVuZXI/KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsSyksYS5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIixLKSk6KGQuZGV0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsSyksYS5kZXRhY2hFdmVudCgib25sb2FkIixLKSl9ZnVuY3Rpb24gSygpeyhkLmFkZEV2ZW50TGlzdGVuZXJ8fCJsb2FkIj09PWEuZXZlbnQudHlwZXx8ImNvbXBsZXRlIj09PWQucmVhZHlTdGF0ZSkmJihKKCksbi5yZWFkeSgpKX1uLnJlYWR5LnByb21pc2U9ZnVuY3Rpb24oYil7aWYoIUkpaWYoST1uLkRlZmVycmVkKCksImNvbXBsZXRlIj09PWQucmVhZHlTdGF0ZXx8ImxvYWRpbmciIT09ZC5yZWFkeVN0YXRlJiYhZC5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwpYS5zZXRUaW1lb3V0KG4ucmVhZHkpO2Vsc2UgaWYoZC5hZGRFdmVudExpc3RlbmVyKWQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsSyksYS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixLKTtlbHNle2QuYXR0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsSyksYS5hdHRhY2hFdmVudCgib25sb2FkIixLKTt2YXIgYz0hMTt0cnl7Yz1udWxsPT1hLmZyYW1lRWxlbWVudCYmZC5kb2N1bWVudEVsZW1lbnR9Y2F0Y2goZSl7fWMmJmMuZG9TY3JvbGwmJiFmdW5jdGlvbiBmKCl7aWYoIW4uaXNSZWFkeSl7dHJ5e2MuZG9TY3JvbGwoImxlZnQiKX1jYXRjaChiKXtyZXR1cm4gYS5zZXRUaW1lb3V0KGYsNTApfUooKSxuLnJlYWR5KCl9fSgpfXJldHVybiBJLnByb21pc2UoYil9LG4ucmVhZHkucHJvbWlzZSgpO3ZhciBMO2ZvcihMIGluIG4obCkpYnJlYWs7bC5vd25GaXJzdD0iMCI9PT1MLGwuaW5saW5lQmxvY2tOZWVkc0xheW91dD0hMSxuKGZ1bmN0aW9uKCl7dmFyIGEsYixjLGU7Yz1kLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF0sYyYmYy5zdHlsZSYmKGI9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKSxlPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksZS5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweCIsYy5hcHBlbmRDaGlsZChlKS5hcHBlbmRDaGlsZChiKSwidW5kZWZpbmVkIiE9dHlwZW9mIGIuc3R5bGUuem9vbSYmKGIuc3R5bGUuY3NzVGV4dD0iZGlzcGxheTppbmxpbmU7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzoxcHg7d2lkdGg6MXB4O3pvb206MSIsbC5pbmxpbmVCbG9ja05lZWRzTGF5b3V0PWE9Mz09PWIub2Zmc2V0V2lkdGgsYSYmKGMuc3R5bGUuem9vbT0xKSksYy5yZW1vdmVDaGlsZChlKSl9KSxmdW5jdGlvbigpe3ZhciBhPWQuY3JlYXRlRWxlbWVudCgiZGl2Iik7bC5kZWxldGVFeHBhbmRvPSEwO3RyeXtkZWxldGUgYS50ZXN0fWNhdGNoKGIpe2wuZGVsZXRlRXhwYW5kbz0hMX1hPW51bGx9KCk7dmFyIE09ZnVuY3Rpb24oYSl7dmFyIGI9bi5ub0RhdGFbKGEubm9kZU5hbWUrIiAiKS50b0xvd2VyQ2FzZSgpXSxjPSthLm5vZGVUeXBlfHwxO3JldHVybiAxIT09YyYmOSE9PWM/ITE6IWJ8fGIhPT0hMCYmYS5nZXRBdHRyaWJ1dGUoImNsYXNzaWQiKT09PWJ9LE49L14oPzpce1tcd1xXXSpcfXxcW1tcd1xXXSpcXSkkLyxPPS8oW0EtWl0pL2c7ZnVuY3Rpb24gUChhLGIsYyl7aWYodm9pZCAwPT09YyYmMT09PWEubm9kZVR5cGUpe3ZhciBkPSJkYXRhLSIrYi5yZXBsYWNlKE8sIi0kMSIpLnRvTG93ZXJDYXNlKCk7aWYoYz1hLmdldEF0dHJpYnV0ZShkKSwic3RyaW5nIj09dHlwZW9mIGMpe3RyeXtjPSJ0cnVlIj09PWM/ITA6ImZhbHNlIj09PWM/ITE6Im51bGwiPT09Yz9udWxsOitjKyIiPT09Yz8rYzpOLnRlc3QoYyk/bi5wYXJzZUpTT04oYyk6Y31jYXRjaChlKXt9bi5kYXRhKGEsYixjKX1lbHNlIGM9dm9pZCAwOwp9cmV0dXJuIGN9ZnVuY3Rpb24gUShhKXt2YXIgYjtmb3IoYiBpbiBhKWlmKCgiZGF0YSIhPT1ifHwhbi5pc0VtcHR5T2JqZWN0KGFbYl0pKSYmInRvSlNPTiIhPT1iKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIFIoYSxiLGQsZSl7aWYoTShhKSl7dmFyIGYsZyxoPW4uZXhwYW5kbyxpPWEubm9kZVR5cGUsaj1pP24uY2FjaGU6YSxrPWk/YVtoXTphW2hdJiZoO2lmKGsmJmpba10mJihlfHxqW2tdLmRhdGEpfHx2b2lkIDAhPT1kfHwic3RyaW5nIiE9dHlwZW9mIGIpcmV0dXJuIGt8fChrPWk/YVtoXT1jLnBvcCgpfHxuLmd1aWQrKzpoKSxqW2tdfHwoaltrXT1pP3t9Ont0b0pTT046bi5ub29wfSksIm9iamVjdCIhPXR5cGVvZiBiJiYiZnVuY3Rpb24iIT10eXBlb2YgYnx8KGU/altrXT1uLmV4dGVuZChqW2tdLGIpOmpba10uZGF0YT1uLmV4dGVuZChqW2tdLmRhdGEsYikpLGc9altrXSxlfHwoZy5kYXRhfHwoZy5kYXRhPXt9KSxnPWcuZGF0YSksdm9pZCAwIT09ZCYmKGdbbi5jYW1lbENhc2UoYildPWQpLCJzdHJpbmciPT10eXBlb2YgYj8oZj1nW2JdLG51bGw9PWYmJihmPWdbbi5jYW1lbENhc2UoYildKSk6Zj1nLGZ9fWZ1bmN0aW9uIFMoYSxiLGMpe2lmKE0oYSkpe3ZhciBkLGUsZj1hLm5vZGVUeXBlLGc9Zj9uLmNhY2hlOmEsaD1mP2Fbbi5leHBhbmRvXTpuLmV4cGFuZG87aWYoZ1toXSl7aWYoYiYmKGQ9Yz9nW2hdOmdbaF0uZGF0YSkpe24uaXNBcnJheShiKT9iPWIuY29uY2F0KG4ubWFwKGIsbi5jYW1lbENhc2UpKTpiIGluIGQ/Yj1bYl06KGI9bi5jYW1lbENhc2UoYiksYj1iIGluIGQ/W2JdOmIuc3BsaXQoIiAiKSksZT1iLmxlbmd0aDt3aGlsZShlLS0pZGVsZXRlIGRbYltlXV07aWYoYz8hUShkKTohbi5pc0VtcHR5T2JqZWN0KGQpKXJldHVybn0oY3x8KGRlbGV0ZSBnW2hdLmRhdGEsUShnW2hdKSkpJiYoZj9uLmNsZWFuRGF0YShbYV0sITApOmwuZGVsZXRlRXhwYW5kb3x8ZyE9Zy53aW5kb3c/ZGVsZXRlIGdbaF06Z1toXT12b2lkIDApfX19bi5leHRlbmQoe2NhY2hlOnt9LG5vRGF0YTp7ImFwcGxldCAiOiEwLCJlbWJlZCAiOiEwLCJvYmplY3QgIjoiY2xzaWQ6RDI3Q0RCNkUtQUU2RC0xMWNmLTk2QjgtNDQ0NTUzNTQwMDAwIn0saGFzRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gYT1hLm5vZGVUeXBlP24uY2FjaGVbYVtuLmV4cGFuZG9dXTphW24uZXhwYW5kb10sISFhJiYhUShhKX0sZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIFIoYSxiLGMpfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFMoYSxiKX0sX2RhdGE6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBSKGEsYixjLCEwKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUyhhLGIsITApfX0pLG4uZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9dGhpc1swXSxnPWYmJmYuYXR0cmlidXRlcztpZih2b2lkIDA9PT1hKXtpZih0aGlzLmxlbmd0aCYmKGU9bi5kYXRhKGYpLDE9PT1mLm5vZGVUeXBlJiYhbi5fZGF0YShmLCJwYXJzZWRBdHRycyIpKSl7Yz1nLmxlbmd0aDt3aGlsZShjLS0pZ1tjXSYmKGQ9Z1tjXS5uYW1lLDA9PT1kLmluZGV4T2YoImRhdGEtIikmJihkPW4uY2FtZWxDYXNlKGQuc2xpY2UoNSkpLFAoZixkLGVbZF0pKSk7bi5fZGF0YShmLCJwYXJzZWRBdHRycyIsITApfXJldHVybiBlfXJldHVybiJvYmplY3QiPT10eXBlb2YgYT90aGlzLmVhY2goZnVuY3Rpb24oKXtuLmRhdGEodGhpcyxhKX0pOmFyZ3VtZW50cy5sZW5ndGg+MT90aGlzLmVhY2goZnVuY3Rpb24oKXtuLmRhdGEodGhpcyxhLGIpfSk6Zj9QKGYsYSxuLmRhdGEoZixhKSk6dm9pZCAwfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLnJlbW92ZURhdGEodGhpcyxhKX0pfX0pLG4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGE/KGI9KGJ8fCJmeCIpKyJxdWV1ZSIsZD1uLl9kYXRhKGEsYiksYyYmKCFkfHxuLmlzQXJyYXkoYyk/ZD1uLl9kYXRhKGEsYixuLm1ha2VBcnJheShjKSk6ZC5wdXNoKGMpKSxkfHxbXSk6dm9pZCAwfSxkZXF1ZXVlOmZ1bmN0aW9uKGEsYil7Yj1ifHwiZngiO3ZhciBjPW4ucXVldWUoYSxiKSxkPWMubGVuZ3RoLGU9Yy5zaGlmdCgpLGY9bi5fcXVldWVIb29rcyhhLGIpLGc9ZnVuY3Rpb24oKXtuLmRlcXVldWUoYSxiKX07ImlucHJvZ3Jlc3MiPT09ZSYmKGU9Yy5zaGlmdCgpLGQtLSksZSYmKCJmeCI9PT1iJiZjLnVuc2hpZnQoImlucHJvZ3Jlc3MiKSxkZWxldGUgZi5zdG9wLGUuY2FsbChhLGcsZikpLCFkJiZmJiZmLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iKyJxdWV1ZUhvb2tzIjtyZXR1cm4gbi5fZGF0YShhLGMpfHxuLl9kYXRhKGEsYyx7ZW1wdHk6bi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IikuYWRkKGZ1bmN0aW9uKCl7bi5fcmVtb3ZlRGF0YShhLGIrInF1ZXVlIiksbi5fcmVtb3ZlRGF0YShhLGMpfSl9KX19KSxuLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz0yO3JldHVybiJzdHJpbmciIT10eXBlb2YgYSYmKGI9YSxhPSJmeCIsYy0tKSxhcmd1bWVudHMubGVuZ3RoPGM/bi5xdWV1ZSh0aGlzWzBdLGEpOnZvaWQgMD09PWI/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1uLnF1ZXVlKHRoaXMsYSxiKTtuLl9xdWV1ZUhvb2tzKHRoaXMsYSksImZ4Ij09PWEmJiJpbnByb2dyZXNzIiE9PWNbMF0mJm4uZGVxdWV1ZSh0aGlzLGEpfSl9LGRlcXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe24uZGVxdWV1ZSh0aGlzLGEpfSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVldWUoYXx8ImZ4IixbXSl9LHByb21pc2U6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTEsZT1uLkRlZmVycmVkKCksZj10aGlzLGc9dGhpcy5sZW5ndGgsaD1mdW5jdGlvbigpey0tZHx8ZS5yZXNvbHZlV2l0aChmLFtmXSl9OyJzdHJpbmciIT10eXBlb2YgYSYmKGI9YSxhPXZvaWQgMCksYT1hfHwiZngiO3doaWxlKGctLSljPW4uX2RhdGEoZltnXSxhKyJxdWV1ZUhvb2tzIiksYyYmYy5lbXB0eSYmKGQrKyxjLmVtcHR5LmFkZChoKSk7cmV0dXJuIGgoKSxlLnByb21pc2UoYil9fSksZnVuY3Rpb24oKXt2YXIgYTtsLnNocmlua1dyYXBCbG9ja3M9ZnVuY3Rpb24oKXtpZihudWxsIT1hKXJldHVybiBhO2E9ITE7dmFyIGIsYyxlO3JldHVybiBjPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXSxjJiZjLnN0eWxlPyhiPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksZT1kLmNyZWF0ZUVsZW1lbnQoImRpdiIpLGUuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHgiLGMuYXBwZW5kQ2hpbGQoZSkuYXBwZW5kQ2hpbGQoYiksInVuZGVmaW5lZCIhPXR5cGVvZiBiLnN0eWxlLnpvb20mJihiLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MXB4O3dpZHRoOjFweDt6b29tOjEiLGIuYXBwZW5kQ2hpbGQoZC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuc3R5bGUud2lkdGg9IjVweCIsYT0zIT09Yi5vZmZzZXRXaWR0aCksYy5yZW1vdmVDaGlsZChlKSxhKTp2b2lkIDB9fSgpO3ZhciBUPS9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8uc291cmNlLFU9bmV3IFJlZ0V4cCgiXig/OihbKy1dKT18KSgiK1QrIikoW2EteiVdKikkIiwiaSIpLFY9WyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXSxXPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9Ynx8YSwibm9uZSI9PT1uLmNzcyhhLCJkaXNwbGF5Iil8fCFuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKX07ZnVuY3Rpb24gWChhLGIsYyxkKXt2YXIgZSxmPTEsZz0yMCxoPWQ/ZnVuY3Rpb24oKXtyZXR1cm4gZC5jdXIoKX06ZnVuY3Rpb24oKXtyZXR1cm4gbi5jc3MoYSxiLCIiKX0saT1oKCksaj1jJiZjWzNdfHwobi5jc3NOdW1iZXJbYl0/IiI6InB4Iiksaz0obi5jc3NOdW1iZXJbYl18fCJweCIhPT1qJiYraSkmJlUuZXhlYyhuLmNzcyhhLGIpKTtpZihrJiZrWzNdIT09ail7aj1qfHxrWzNdLGM9Y3x8W10saz0raXx8MTtkbyBmPWZ8fCIuNSIsay89ZixuLnN0eWxlKGEsYixrK2opO3doaWxlKGYhPT0oZj1oKCkvaSkmJjEhPT1mJiYtLWcpfXJldHVybiBjJiYoaz0ra3x8K2l8fDAsZT1jWzFdP2srKGNbMV0rMSkqY1syXTorY1syXSxkJiYoZC51bml0PWosZC5zdGFydD1rLGQuZW5kPWUpKSxlfXZhciBZPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe3ZhciBoPTAsaT1hLmxlbmd0aCxqPW51bGw9PWM7aWYoIm9iamVjdCI9PT1uLnR5cGUoYykpe2U9ITA7Zm9yKGggaW4gYylZKGEsYixoLGNbaF0sITAsZixnKX1lbHNlIGlmKHZvaWQgMCE9PWQmJihlPSEwLG4uaXNGdW5jdGlvbihkKXx8KGc9ITApLGomJihnPyhiLmNhbGwoYSxkKSxiPW51bGwpOihqPWIsYj1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGouY2FsbChuKGEpLGMpfSkpLGIpKWZvcig7aT5oO2grKyliKGFbaF0sYyxnP2Q6ZC5jYWxsKGFbaF0saCxiKGFbaF0sYykpKTtyZXR1cm4gZT9hOmo/Yi5jYWxsKGEpOmk/YihhWzBdLGMpOmZ9LFo9L14oPzpjaGVja2JveHxyYWRpbykkL2ksJD0vPChbXHc6LV0rKS8sXz0vXiR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksYWE9L15ccysvLGJhPSJhYmJyfGFydGljbGV8YXNpZGV8YXVkaW98YmRpfGNhbnZhc3xkYXRhfGRhdGFsaXN0fGRldGFpbHN8ZGlhbG9nfGZpZ2NhcHRpb258ZmlndXJlfGZvb3RlcnxoZWFkZXJ8aGdyb3VwfG1haW58bWFya3xtZXRlcnxuYXZ8b3V0cHV0fHBpY3R1cmV8cHJvZ3Jlc3N8c2VjdGlvbnxzdW1tYXJ5fHRlbXBsYXRlfHRpbWV8dmlkZW8iO2Z1bmN0aW9uIGNhKGEpe3ZhciBiPWJhLnNwbGl0KCJ8IiksYz1hLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZihjLmNyZWF0ZUVsZW1lbnQpd2hpbGUoYi5sZW5ndGgpYy5jcmVhdGVFbGVtZW50KGIucG9wKCkpO3JldHVybiBjfSFmdW5jdGlvbigpe3ZhciBhPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksYj1kLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxjPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTthLmlubmVySFRNTD0iICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+IixsLmxlYWRpbmdXaGl0ZXNwYWNlPTM9PT1hLmZpcnN0Q2hpbGQubm9kZVR5cGUsbC50Ym9keT0hYS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKS5sZW5ndGgsbC5odG1sU2VyaWFsaXplPSEhYS5nZXRFbGVtZW50c0J5VGFnTmFtZSgibGluayIpLmxlbmd0aCxsLmh0bWw1Q2xvbmU9Ijw6bmF2PjwvOm5hdj4iIT09ZC5jcmVhdGVFbGVtZW50KCJuYXYiKS5jbG9uZU5vZGUoITApLm91dGVySFRNTCxjLnR5cGU9ImNoZWNrYm94IixjLmNoZWNrZWQ9ITAsYi5hcHBlbmRDaGlsZChjKSxsLmFwcGVuZENoZWNrZWQ9Yy5jaGVja2VkLGEuaW5uZXJIVE1MPSI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+IixsLm5vQ2xvbmVDaGVja2VkPSEhYS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWUsYi5hcHBlbmRDaGlsZChhKSxjPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxjLnNldEF0dHJpYnV0ZSgidHlwZSIsInJhZGlvIiksYy5zZXRBdHRyaWJ1dGUoImNoZWNrZWQiLCJjaGVja2VkIiksYy5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJ0IiksYS5hcHBlbmRDaGlsZChjKSxsLmNoZWNrQ2xvbmU9YS5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsbC5ub0Nsb25lRXZlbnQ9ISFhLmFkZEV2ZW50TGlzdGVuZXIsYVtuLmV4cGFuZG9dPTEsbC5hdHRyaWJ1dGVzPSFhLmdldEF0dHJpYnV0ZShuLmV4cGFuZG8pfSgpO3ZhciBkYT17b3B0aW9uOlsxLCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+IiwiPC9zZWxlY3Q+Il0sbGVnZW5kOlsxLCI8ZmllbGRzZXQ+IiwiPC9maWVsZHNldD4iXSxhcmVhOlsxLCI8bWFwPiIsIjwvbWFwPiJdLHBhcmFtOlsxLCI8b2JqZWN0PiIsIjwvb2JqZWN0PiJdLHRoZWFkOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0ZDpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sX2RlZmF1bHQ6bC5odG1sU2VyaWFsaXplP1swLCIiLCIiXTpbMSwiWDxkaXY+IiwiPC9kaXY+Il19O2RhLm9wdGdyb3VwPWRhLm9wdGlvbixkYS50Ym9keT1kYS50Zm9vdD1kYS5jb2xncm91cD1kYS5jYXB0aW9uPWRhLnRoZWFkLGRhLnRoPWRhLnRkO2Z1bmN0aW9uIGVhKGEsYil7dmFyIGMsZCxlPTAsZj0idW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWU/YS5nZXRFbGVtZW50c0J5VGFnTmFtZShifHwiKiIpOiJ1bmRlZmluZWQiIT10eXBlb2YgYS5xdWVyeVNlbGVjdG9yQWxsP2EucXVlcnlTZWxlY3RvckFsbChifHwiKiIpOnZvaWQgMDtpZighZilmb3IoZj1bXSxjPWEuY2hpbGROb2Rlc3x8YTtudWxsIT0oZD1jW2VdKTtlKyspIWJ8fG4ubm9kZU5hbWUoZCxiKT9mLnB1c2goZCk6bi5tZXJnZShmLGVhKGQsYikpO3JldHVybiB2b2lkIDA9PT1ifHxiJiZuLm5vZGVOYW1lKGEsYik/bi5tZXJnZShbYV0sZik6Zn1mdW5jdGlvbiBmYShhLGIpe2Zvcih2YXIgYyxkPTA7bnVsbCE9KGM9YVtkXSk7ZCsrKW4uX2RhdGEoYywiZ2xvYmFsRXZhbCIsIWJ8fG4uX2RhdGEoYltkXSwiZ2xvYmFsRXZhbCIpKX12YXIgZ2E9Lzx8JiM/XHcrOy8saGE9Lzx0Ym9keS9pO2Z1bmN0aW9uIGlhKGEpe1oudGVzdChhLnR5cGUpJiYoYS5kZWZhdWx0Q2hlY2tlZD1hLmNoZWNrZWQpfWZ1bmN0aW9uIGphKGEsYixjLGQsZSl7Zm9yKHZhciBmLGcsaCxpLGosayxtLG89YS5sZW5ndGgscD1jYShiKSxxPVtdLHI9MDtvPnI7cisrKWlmKGc9YVtyXSxnfHwwPT09ZylpZigib2JqZWN0Ij09PW4udHlwZShnKSluLm1lcmdlKHEsZy5ub2RlVHlwZT9bZ106Zyk7ZWxzZSBpZihnYS50ZXN0KGcpKXtpPWl8fHAuYXBwZW5kQ2hpbGQoYi5jcmVhdGVFbGVtZW50KCJkaXYiKSksaj0oJC5leGVjKGcpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpLG09ZGFbal18fGRhLl9kZWZhdWx0LGkuaW5uZXJIVE1MPW1bMV0rbi5odG1sUHJlZmlsdGVyKGcpK21bMl0sZj1tWzBdO3doaWxlKGYtLSlpPWkubGFzdENoaWxkO2lmKCFsLmxlYWRpbmdXaGl0ZXNwYWNlJiZhYS50ZXN0KGcpJiZxLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShhYS5leGVjKGcpWzBdKSksIWwudGJvZHkpe2c9InRhYmxlIiE9PWp8fGhhLnRlc3QoZyk/Ijx0YWJsZT4iIT09bVsxXXx8aGEudGVzdChnKT8wOmk6aS5maXJzdENoaWxkLGY9ZyYmZy5jaGlsZE5vZGVzLmxlbmd0aDt3aGlsZShmLS0pbi5ub2RlTmFtZShrPWcuY2hpbGROb2Rlc1tmXSwidGJvZHkiKSYmIWsuY2hpbGROb2Rlcy5sZW5ndGgmJmcucmVtb3ZlQ2hpbGQoayl9bi5tZXJnZShxLGkuY2hpbGROb2RlcyksaS50ZXh0Q29udGVudD0iIjt3aGlsZShpLmZpcnN0Q2hpbGQpaS5yZW1vdmVDaGlsZChpLmZpcnN0Q2hpbGQpO2k9cC5sYXN0Q2hpbGR9ZWxzZSBxLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShnKSk7aSYmcC5yZW1vdmVDaGlsZChpKSxsLmFwcGVuZENoZWNrZWR8fG4uZ3JlcChlYShxLCJpbnB1dCIpLGlhKSxyPTA7d2hpbGUoZz1xW3IrK10paWYoZCYmbi5pbkFycmF5KGcsZCk+LTEpZSYmZS5wdXNoKGcpO2Vsc2UgaWYoaD1uLmNvbnRhaW5zKGcub3duZXJEb2N1bWVudCxnKSxpPWVhKHAuYXBwZW5kQ2hpbGQoZyksInNjcmlwdCIpLGgmJmZhKGkpLGMpe2Y9MDt3aGlsZShnPWlbZisrXSlfLnRlc3QoZy50eXBlfHwiIikmJmMucHVzaChnKX1yZXR1cm4gaT1udWxsLHB9IWZ1bmN0aW9uKCl7dmFyIGIsYyxlPWQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Zm9yKGIgaW57c3VibWl0OiEwLGNoYW5nZTohMCxmb2N1c2luOiEwfSljPSJvbiIrYiwobFtiXT1jIGluIGEpfHwoZS5zZXRBdHRyaWJ1dGUoYywidCIpLGxbYl09ZS5hdHRyaWJ1dGVzW2NdLmV4cGFuZG89PT0hMSk7ZT1udWxsfSgpO3ZhciBrYT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYSkkL2ksbGE9L15rZXkvLG1hPS9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudXxkcmFnfGRyb3ApfGNsaWNrLyxuYT0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sb2E9L14oW14uXSopKD86XC4oLispfCkvO2Z1bmN0aW9uIHBhKCl7cmV0dXJuITB9ZnVuY3Rpb24gcWEoKXtyZXR1cm4hMX1mdW5jdGlvbiByYSgpe3RyeXtyZXR1cm4gZC5hY3RpdmVFbGVtZW50fWNhdGNoKGEpe319ZnVuY3Rpb24gc2EoYSxiLGMsZCxlLGYpe3ZhciBnLGg7aWYoIm9iamVjdCI9PXR5cGVvZiBiKXsic3RyaW5nIiE9dHlwZW9mIGMmJihkPWR8fGMsYz12b2lkIDApO2ZvcihoIGluIGIpc2EoYSxoLGMsZCxiW2hdLGYpO3JldHVybiBhfWlmKG51bGw9PWQmJm51bGw9PWU/KGU9YyxkPWM9dm9pZCAwKTpudWxsPT1lJiYoInN0cmluZyI9PXR5cGVvZiBjPyhlPWQsZD12b2lkIDApOihlPWQsZD1jLGM9dm9pZCAwKSksZT09PSExKWU9cWE7ZWxzZSBpZighZSlyZXR1cm4gYTtyZXR1cm4gMT09PWYmJihnPWUsZT1mdW5jdGlvbihhKXtyZXR1cm4gbigpLm9mZihhKSxnLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZS5ndWlkPWcuZ3VpZHx8KGcuZ3VpZD1uLmd1aWQrKykpLGEuZWFjaChmdW5jdGlvbigpe24uZXZlbnQuYWRkKHRoaXMsYixlLGQsYyl9KX1uLmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZyxoLGksaixrLGwsbSxvLHAscSxyPW4uX2RhdGEoYSk7aWYocil7Yy5oYW5kbGVyJiYoaT1jLGM9aS5oYW5kbGVyLGU9aS5zZWxlY3RvciksYy5ndWlkfHwoYy5ndWlkPW4uZ3VpZCsrKSwoZz1yLmV2ZW50cyl8fChnPXIuZXZlbnRzPXt9KSwoaz1yLmhhbmRsZSl8fChrPXIuaGFuZGxlPWZ1bmN0aW9uKGEpe3JldHVybiJ1bmRlZmluZWQiPT10eXBlb2Ygbnx8YSYmbi5ldmVudC50cmlnZ2VyZWQ9PT1hLnR5cGU/dm9pZCAwOm4uZXZlbnQuZGlzcGF0Y2guYXBwbHkoay5lbGVtLGFyZ3VtZW50cyl9LGsuZWxlbT1hKSxiPShifHwiIikubWF0Y2goRyl8fFsiIl0saD1iLmxlbmd0aDt3aGlsZShoLS0pZj1vYS5leGVjKGJbaF0pfHxbXSxvPXE9ZlsxXSxwPShmWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksbyYmKGo9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShlP2ouZGVsZWdhdGVUeXBlOmouYmluZFR5cGUpfHxvLGo9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxsPW4uZXh0ZW5kKHt0eXBlOm8sb3JpZ1R5cGU6cSxkYXRhOmQsaGFuZGxlcjpjLGd1aWQ6Yy5ndWlkLHNlbGVjdG9yOmUsbmVlZHNDb250ZXh0OmUmJm4uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChlKSxuYW1lc3BhY2U6cC5qb2luKCIuIil9LGkpLChtPWdbb10pfHwobT1nW29dPVtdLG0uZGVsZWdhdGVDb3VudD0wLGouc2V0dXAmJmouc2V0dXAuY2FsbChhLGQscCxrKSE9PSExfHwoYS5hZGRFdmVudExpc3RlbmVyP2EuYWRkRXZlbnRMaXN0ZW5lcihvLGssITEpOmEuYXR0YWNoRXZlbnQmJmEuYXR0YWNoRXZlbnQoIm9uIitvLGspKSksai5hZGQmJihqLmFkZC5jYWxsKGEsbCksbC5oYW5kbGVyLmd1aWR8fChsLmhhbmRsZXIuZ3VpZD1jLmd1aWQpKSxlP20uc3BsaWNlKG0uZGVsZWdhdGVDb3VudCsrLDAsbCk6bS5wdXNoKGwpLG4uZXZlbnQuZ2xvYmFsW29dPSEwKTthPW51bGx9fSxyZW1vdmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG8scCxxLHI9bi5oYXNEYXRhKGEpJiZuLl9kYXRhKGEpO2lmKHImJihrPXIuZXZlbnRzKSl7Yj0oYnx8IiIpLm1hdGNoKEcpfHxbIiJdLGo9Yi5sZW5ndGg7d2hpbGUoai0tKWlmKGg9b2EuZXhlYyhiW2pdKXx8W10sbz1xPWhbMV0scD0oaFsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLG8pe2w9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShkP2wuZGVsZWdhdGVUeXBlOmwuYmluZFR5cGUpfHxvLG09a1tvXXx8W10saD1oWzJdJiZuZXcgUmVnRXhwKCIoXnxcXC4pIitwLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpLGk9Zj1tLmxlbmd0aDt3aGlsZShmLS0pZz1tW2ZdLCFlJiZxIT09Zy5vcmlnVHlwZXx8YyYmYy5ndWlkIT09Zy5ndWlkfHxoJiYhaC50ZXN0KGcubmFtZXNwYWNlKXx8ZCYmZCE9PWcuc2VsZWN0b3ImJigiKioiIT09ZHx8IWcuc2VsZWN0b3IpfHwobS5zcGxpY2UoZiwxKSxnLnNlbGVjdG9yJiZtLmRlbGVnYXRlQ291bnQtLSxsLnJlbW92ZSYmbC5yZW1vdmUuY2FsbChhLGcpKTtpJiYhbS5sZW5ndGgmJihsLnRlYXJkb3duJiZsLnRlYXJkb3duLmNhbGwoYSxwLHIuaGFuZGxlKSE9PSExfHxuLnJlbW92ZUV2ZW50KGEsbyxyLmhhbmRsZSksZGVsZXRlIGtbb10pfWVsc2UgZm9yKG8gaW4gayluLmV2ZW50LnJlbW92ZShhLG8rYltqXSxjLGQsITApO24uaXNFbXB0eU9iamVjdChrKSYmKGRlbGV0ZSByLmhhbmRsZSxuLl9yZW1vdmVEYXRhKGEsImV2ZW50cyIpKX19LHRyaWdnZXI6ZnVuY3Rpb24oYixjLGUsZil7dmFyIGcsaCxpLGosbCxtLG8scD1bZXx8ZF0scT1rLmNhbGwoYiwidHlwZSIpP2IudHlwZTpiLHI9ay5jYWxsKGIsIm5hbWVzcGFjZSIpP2IubmFtZXNwYWNlLnNwbGl0KCIuIik6W107aWYoaT1tPWU9ZXx8ZCwzIT09ZS5ub2RlVHlwZSYmOCE9PWUubm9kZVR5cGUmJiFuYS50ZXN0KHErbi5ldmVudC50cmlnZ2VyZWQpJiYocS5pbmRleE9mKCIuIik+LTEmJihyPXEuc3BsaXQoIi4iKSxxPXIuc2hpZnQoKSxyLnNvcnQoKSksaD1xLmluZGV4T2YoIjoiKTwwJiYib24iK3EsYj1iW24uZXhwYW5kb10/YjpuZXcgbi5FdmVudChxLCJvYmplY3QiPT10eXBlb2YgYiYmYiksYi5pc1RyaWdnZXI9Zj8yOjMsYi5uYW1lc3BhY2U9ci5qb2luKCIuIiksYi5ybmFtZXNwYWNlPWIubmFtZXNwYWNlP25ldyBSZWdFeHAoIihefFxcLikiK3Iuam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIik6bnVsbCxiLnJlc3VsdD12b2lkIDAsYi50YXJnZXR8fChiLnRhcmdldD1lKSxjPW51bGw9PWM/W2JdOm4ubWFrZUFycmF5KGMsW2JdKSxsPW4uZXZlbnQuc3BlY2lhbFtxXXx8e30sZnx8IWwudHJpZ2dlcnx8bC50cmlnZ2VyLmFwcGx5KGUsYykhPT0hMSkpe2lmKCFmJiYhbC5ub0J1YmJsZSYmIW4uaXNXaW5kb3coZSkpe2ZvcihqPWwuZGVsZWdhdGVUeXBlfHxxLG5hLnRlc3QoaitxKXx8KGk9aS5wYXJlbnROb2RlKTtpO2k9aS5wYXJlbnROb2RlKXAucHVzaChpKSxtPWk7bT09PShlLm93bmVyRG9jdW1lbnR8fGQpJiZwLnB1c2gobS5kZWZhdWx0Vmlld3x8bS5wYXJlbnRXaW5kb3d8fGEpfW89MDt3aGlsZSgoaT1wW28rK10pJiYhYi5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKWIudHlwZT1vPjE/ajpsLmJpbmRUeXBlfHxxLGc9KG4uX2RhdGEoaSwiZXZlbnRzIil8fHt9KVtiLnR5cGVdJiZuLl9kYXRhKGksImhhbmRsZSIpLGcmJmcuYXBwbHkoaSxjKSxnPWgmJmlbaF0sZyYmZy5hcHBseSYmTShpKSYmKGIucmVzdWx0PWcuYXBwbHkoaSxjKSxiLnJlc3VsdD09PSExJiZiLnByZXZlbnREZWZhdWx0KCkpO2lmKGIudHlwZT1xLCFmJiYhYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmKCFsLl9kZWZhdWx0fHxsLl9kZWZhdWx0LmFwcGx5KHAucG9wKCksYyk9PT0hMSkmJk0oZSkmJmgmJmVbcV0mJiFuLmlzV2luZG93KGUpKXttPWVbaF0sbSYmKGVbaF09bnVsbCksbi5ldmVudC50cmlnZ2VyZWQ9cTt0cnl7ZVtxXSgpfWNhdGNoKHMpe31uLmV2ZW50LnRyaWdnZXJlZD12b2lkIDAsbSYmKGVbaF09bSl9cmV0dXJuIGIucmVzdWx0fX0sZGlzcGF0Y2g6ZnVuY3Rpb24oYSl7YT1uLmV2ZW50LmZpeChhKTt2YXIgYixjLGQsZixnLGg9W10saT1lLmNhbGwoYXJndW1lbnRzKSxqPShuLl9kYXRhKHRoaXMsImV2ZW50cyIpfHx7fSlbYS50eXBlXXx8W10saz1uLmV2ZW50LnNwZWNpYWxbYS50eXBlXXx8e307aWYoaVswXT1hLGEuZGVsZWdhdGVUYXJnZXQ9dGhpcywhay5wcmVEaXNwYXRjaHx8ay5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsYSkhPT0hMSl7aD1uLmV2ZW50LmhhbmRsZXJzLmNhbGwodGhpcyxhLGopLGI9MDt3aGlsZSgoZj1oW2IrK10pJiYhYS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXthLmN1cnJlbnRUYXJnZXQ9Zi5lbGVtLGM9MDt3aGlsZSgoZz1mLmhhbmRsZXJzW2MrK10pJiYhYS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKWEucm5hbWVzcGFjZSYmIWEucm5hbWVzcGFjZS50ZXN0KGcubmFtZXNwYWNlKXx8KGEuaGFuZGxlT2JqPWcsYS5kYXRhPWcuZGF0YSxkPSgobi5ldmVudC5zcGVjaWFsW2cub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxnLmhhbmRsZXIpLmFwcGx5KGYuZWxlbSxpKSx2b2lkIDAhPT1kJiYoYS5yZXN1bHQ9ZCk9PT0hMSYmKGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpKSl9cmV0dXJuIGsucG9zdERpc3BhdGNoJiZrLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsYSksYS5yZXN1bHR9fSxoYW5kbGVyczpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGc9W10saD1iLmRlbGVnYXRlQ291bnQsaT1hLnRhcmdldDtpZihoJiZpLm5vZGVUeXBlJiYoImNsaWNrIiE9PWEudHlwZXx8aXNOYU4oYS5idXR0b24pfHxhLmJ1dHRvbjwxKSlmb3IoO2khPXRoaXM7aT1pLnBhcmVudE5vZGV8fHRoaXMpaWYoMT09PWkubm9kZVR5cGUmJihpLmRpc2FibGVkIT09ITB8fCJjbGljayIhPT1hLnR5cGUpKXtmb3IoZD1bXSxjPTA7aD5jO2MrKylmPWJbY10sZT1mLnNlbGVjdG9yKyIgIix2b2lkIDA9PT1kW2VdJiYoZFtlXT1mLm5lZWRzQ29udGV4dD9uKGUsdGhpcykuaW5kZXgoaSk+LTE6bi5maW5kKGUsdGhpcyxudWxsLFtpXSkubGVuZ3RoKSxkW2VdJiZkLnB1c2goZik7ZC5sZW5ndGgmJmcucHVzaCh7ZWxlbTppLGhhbmRsZXJzOmR9KX1yZXR1cm4gaDxiLmxlbmd0aCYmZy5wdXNoKHtlbGVtOnRoaXMsaGFuZGxlcnM6Yi5zbGljZShoKX0pLGd9LGZpeDpmdW5jdGlvbihhKXtpZihhW24uZXhwYW5kb10pcmV0dXJuIGE7dmFyIGIsYyxlLGY9YS50eXBlLGc9YSxoPXRoaXMuZml4SG9va3NbZl07aHx8KHRoaXMuZml4SG9va3NbZl09aD1tYS50ZXN0KGYpP3RoaXMubW91c2VIb29rczpsYS50ZXN0KGYpP3RoaXMua2V5SG9va3M6e30pLGU9aC5wcm9wcz90aGlzLnByb3BzLmNvbmNhdChoLnByb3BzKTp0aGlzLnByb3BzLGE9bmV3IG4uRXZlbnQoZyksYj1lLmxlbmd0aDt3aGlsZShiLS0pYz1lW2JdLGFbY109Z1tjXTtyZXR1cm4gYS50YXJnZXR8fChhLnRhcmdldD1nLnNyY0VsZW1lbnR8fGQpLDM9PT1hLnRhcmdldC5ub2RlVHlwZSYmKGEudGFyZ2V0PWEudGFyZ2V0LnBhcmVudE5vZGUpLGEubWV0YUtleT0hIWEubWV0YUtleSxoLmZpbHRlcj9oLmZpbHRlcihhLGcpOmF9LHByb3BzOiJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBkZXRhaWwgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoIi5zcGxpdCgiICIpLGZpeEhvb2tzOnt9LGtleUhvb2tzOntwcm9wczoiY2hhciBjaGFyQ29kZSBrZXkga2V5Q29kZSIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbnVsbD09YS53aGljaCYmKGEud2hpY2g9bnVsbCE9Yi5jaGFyQ29kZT9iLmNoYXJDb2RlOmIua2V5Q29kZSksYX19LG1vdXNlSG9va3M6e3Byb3BzOiJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgZnJvbUVsZW1lbnQgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnQiLnNwbGl0KCIgIiksZmlsdGVyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGc9Yi5idXR0b24saD1iLmZyb21FbGVtZW50O3JldHVybiBudWxsPT1hLnBhZ2VYJiZudWxsIT1iLmNsaWVudFgmJihlPWEudGFyZ2V0Lm93bmVyRG9jdW1lbnR8fGQsZj1lLmRvY3VtZW50RWxlbWVudCxjPWUuYm9keSxhLnBhZ2VYPWIuY2xpZW50WCsoZiYmZi5zY3JvbGxMZWZ0fHxjJiZjLnNjcm9sbExlZnR8fDApLShmJiZmLmNsaWVudExlZnR8fGMmJmMuY2xpZW50TGVmdHx8MCksYS5wYWdlWT1iLmNsaWVudFkrKGYmJmYuc2Nyb2xsVG9wfHxjJiZjLnNjcm9sbFRvcHx8MCktKGYmJmYuY2xpZW50VG9wfHxjJiZjLmNsaWVudFRvcHx8MCkpLCFhLnJlbGF0ZWRUYXJnZXQmJmgmJihhLnJlbGF0ZWRUYXJnZXQ9aD09PWEudGFyZ2V0P2IudG9FbGVtZW50OmgpLGEud2hpY2h8fHZvaWQgMD09PWd8fChhLndoaWNoPTEmZz8xOjImZz8zOjQmZz8yOjApLGF9fSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sZm9jdXM6e3RyaWdnZXI6ZnVuY3Rpb24oKXtpZih0aGlzIT09cmEoKSYmdGhpcy5mb2N1cyl0cnl7cmV0dXJuIHRoaXMuZm9jdXMoKSwhMX1jYXRjaChhKXt9fSxkZWxlZ2F0ZVR5cGU6ImZvY3VzaW4ifSxibHVyOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXM9PT1yYSgpJiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZToiZm9jdXNvdXQifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiBuLm5vZGVOYW1lKHRoaXMsImlucHV0IikmJiJjaGVja2JveCI9PT10aGlzLnR5cGUmJnRoaXMuY2xpY2s/KHRoaXMuY2xpY2soKSwhMSk6dm9pZCAwfSxfZGVmYXVsdDpmdW5jdGlvbihhKXtyZXR1cm4gbi5ub2RlTmFtZShhLnRhcmdldCwiYSIpfX0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oYSl7dm9pZCAwIT09YS5yZXN1bHQmJmEub3JpZ2luYWxFdmVudCYmKGEub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1hLnJlc3VsdCl9fX0sc2ltdWxhdGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW4uZXh0ZW5kKG5ldyBuLkV2ZW50LGMse3R5cGU6YSxpc1NpbXVsYXRlZDohMH0pO24uZXZlbnQudHJpZ2dlcihkLG51bGwsYiksZC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmYy5wcmV2ZW50RGVmYXVsdCgpfX0sbi5yZW1vdmVFdmVudD1kLnJlbW92ZUV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oYSxiLGMpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lciYmYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYyl9OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD0ib24iK2I7YS5kZXRhY2hFdmVudCYmKCJ1bmRlZmluZWQiPT10eXBlb2YgYVtkXSYmKGFbZF09bnVsbCksYS5kZXRhY2hFdmVudChkLGMpKX0sbi5FdmVudD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzIGluc3RhbmNlb2Ygbi5FdmVudD8oYSYmYS50eXBlPyh0aGlzLm9yaWdpbmFsRXZlbnQ9YSx0aGlzLnR5cGU9YS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWEuZGVmYXVsdFByZXZlbnRlZHx8dm9pZCAwPT09YS5kZWZhdWx0UHJldmVudGVkJiZhLnJldHVyblZhbHVlPT09ITE/cGE6cWEpOnRoaXMudHlwZT1hLGImJm4uZXh0ZW5kKHRoaXMsYiksdGhpcy50aW1lU3RhbXA9YSYmYS50aW1lU3RhbXB8fG4ubm93KCksdm9pZCh0aGlzW24uZXhwYW5kb109ITApKTpuZXcgbi5FdmVudChhLGIpfSxuLkV2ZW50LnByb3RvdHlwZT17Y29uc3RydWN0b3I6bi5FdmVudCxpc0RlZmF1bHRQcmV2ZW50ZWQ6cWEsaXNQcm9wYWdhdGlvblN0b3BwZWQ6cWEsaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6cWEscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9cGEsYSYmKGEucHJldmVudERlZmF1bHQ/YS5wcmV2ZW50RGVmYXVsdCgpOmEucmV0dXJuVmFsdWU9ITEpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1wYSxhJiYhdGhpcy5pc1NpbXVsYXRlZCYmKGEuc3RvcFByb3BhZ2F0aW9uJiZhLnN0b3BQcm9wYWdhdGlvbigpLGEuY2FuY2VsQnViYmxlPSEwKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9cGEsYSYmYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24mJmEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LG4uZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCIscG9pbnRlcmVudGVyOiJwb2ludGVyb3ZlciIscG9pbnRlcmxlYXZlOiJwb2ludGVyb3V0In0sZnVuY3Rpb24oYSxiKXtuLmV2ZW50LnNwZWNpYWxbYV09e2RlbGVnYXRlVHlwZTpiLGJpbmRUeXBlOmIsaGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBjLGQ9dGhpcyxlPWEucmVsYXRlZFRhcmdldCxmPWEuaGFuZGxlT2JqO3JldHVybiBlJiYoZT09PWR8fG4uY29udGFpbnMoZCxlKSl8fChhLnR5cGU9Zi5vcmlnVHlwZSxjPWYuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksYS50eXBlPWIpLGN9fX0pLGwuc3VibWl0fHwobi5ldmVudC5zcGVjaWFsLnN1Ym1pdD17c2V0dXA6ZnVuY3Rpb24oKXtyZXR1cm4gbi5ub2RlTmFtZSh0aGlzLCJmb3JtIik/ITE6dm9pZCBuLmV2ZW50LmFkZCh0aGlzLCJjbGljay5fc3VibWl0IGtleXByZXNzLl9zdWJtaXQiLGZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0LGM9bi5ub2RlTmFtZShiLCJpbnB1dCIpfHxuLm5vZGVOYW1lKGIsImJ1dHRvbiIpP24ucHJvcChiLCJmb3JtIik6dm9pZCAwO2MmJiFuLl9kYXRhKGMsInN1Ym1pdCIpJiYobi5ldmVudC5hZGQoYywic3VibWl0Ll9zdWJtaXQiLGZ1bmN0aW9uKGEpe2EuX3N1Ym1pdEJ1YmJsZT0hMH0pLG4uX2RhdGEoYywic3VibWl0IiwhMCkpfSl9LHBvc3REaXNwYXRjaDpmdW5jdGlvbihhKXthLl9zdWJtaXRCdWJibGUmJihkZWxldGUgYS5fc3VibWl0QnViYmxlLHRoaXMucGFyZW50Tm9kZSYmIWEuaXNUcmlnZ2VyJiZuLmV2ZW50LnNpbXVsYXRlKCJzdWJtaXQiLHRoaXMucGFyZW50Tm9kZSxhKSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7cmV0dXJuIG4ubm9kZU5hbWUodGhpcywiZm9ybSIpPyExOnZvaWQgbi5ldmVudC5yZW1vdmUodGhpcywiLl9zdWJtaXQiKX19KSxsLmNoYW5nZXx8KG4uZXZlbnQuc3BlY2lhbC5jaGFuZ2U9e3NldHVwOmZ1bmN0aW9uKCl7cmV0dXJuIGthLnRlc3QodGhpcy5ub2RlTmFtZSk/KCJjaGVja2JveCIhPT10aGlzLnR5cGUmJiJyYWRpbyIhPT10aGlzLnR5cGV8fChuLmV2ZW50LmFkZCh0aGlzLCJwcm9wZXJ0eWNoYW5nZS5fY2hhbmdlIixmdW5jdGlvbihhKXsiY2hlY2tlZCI9PT1hLm9yaWdpbmFsRXZlbnQucHJvcGVydHlOYW1lJiYodGhpcy5fanVzdENoYW5nZWQ9ITApfSksbi5ldmVudC5hZGQodGhpcywiY2xpY2suX2NoYW5nZSIsZnVuY3Rpb24oYSl7dGhpcy5fanVzdENoYW5nZWQmJiFhLmlzVHJpZ2dlciYmKHRoaXMuX2p1c3RDaGFuZ2VkPSExKSxuLmV2ZW50LnNpbXVsYXRlKCJjaGFuZ2UiLHRoaXMsYSl9KSksITEpOnZvaWQgbi5ldmVudC5hZGQodGhpcywiYmVmb3JlYWN0aXZhdGUuX2NoYW5nZSIsZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQ7a2EudGVzdChiLm5vZGVOYW1lKSYmIW4uX2RhdGEoYiwiY2hhbmdlIikmJihuLmV2ZW50LmFkZChiLCJjaGFuZ2UuX2NoYW5nZSIsZnVuY3Rpb24oYSl7IXRoaXMucGFyZW50Tm9kZXx8YS5pc1NpbXVsYXRlZHx8YS5pc1RyaWdnZXJ8fG4uZXZlbnQuc2ltdWxhdGUoImNoYW5nZSIsdGhpcy5wYXJlbnROb2RlLGEpfSksbi5fZGF0YShiLCJjaGFuZ2UiLCEwKSl9KX0saGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0O3JldHVybiB0aGlzIT09Ynx8YS5pc1NpbXVsYXRlZHx8YS5pc1RyaWdnZXJ8fCJyYWRpbyIhPT1iLnR5cGUmJiJjaGVja2JveCIhPT1iLnR5cGU/YS5oYW5kbGVPYmouaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dm9pZCAwfSx0ZWFyZG93bjpmdW5jdGlvbigpe3JldHVybiBuLmV2ZW50LnJlbW92ZSh0aGlzLCIuX2NoYW5nZSIpLCFrYS50ZXN0KHRoaXMubm9kZU5hbWUpfX0pLGwuZm9jdXNpbnx8bi5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe24uZXZlbnQuc2ltdWxhdGUoYixhLnRhcmdldCxuLmV2ZW50LmZpeChhKSl9O24uZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1uLl9kYXRhKGQsYik7ZXx8ZC5hZGRFdmVudExpc3RlbmVyKGEsYywhMCksbi5fZGF0YShkLGIsKGV8fDApKzEpfSx0ZWFyZG93bjpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxlPW4uX2RhdGEoZCxiKS0xO2U/bi5fZGF0YShkLGIsZSk6KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGMsITApLG4uX3JlbW92ZURhdGEoZCxiKSl9fX0pLG4uZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gc2EodGhpcyxhLGIsYyxkKX0sb25lOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBzYSh0aGlzLGEsYixjLGQsMSl9LG9mZjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZTtpZihhJiZhLnByZXZlbnREZWZhdWx0JiZhLmhhbmRsZU9iailyZXR1cm4gZD1hLmhhbmRsZU9iaixuKGEuZGVsZWdhdGVUYXJnZXQpLm9mZihkLm5hbWVzcGFjZT9kLm9yaWdUeXBlKyIuIitkLm5hbWVzcGFjZTpkLm9yaWdUeXBlLGQuc2VsZWN0b3IsZC5oYW5kbGVyKSx0aGlzO2lmKCJvYmplY3QiPT10eXBlb2YgYSl7Zm9yKGUgaW4gYSl0aGlzLm9mZihlLGIsYVtlXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGIhPT0hMSYmImZ1bmN0aW9uIiE9dHlwZW9mIGJ8fChjPWIsYj12b2lkIDApLGM9PT0hMSYmKGM9cWEpLHRoaXMuZWFjaChmdW5jdGlvbigpe24uZXZlbnQucmVtb3ZlKHRoaXMsYSxjLGIpfSl9LHRyaWdnZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5ldmVudC50cmlnZ2VyKGEsYix0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXNbMF07cmV0dXJuIGM/bi5ldmVudC50cmlnZ2VyKGEsYixjLCEwKTp2b2lkIDB9fSk7dmFyIHRhPS8galF1ZXJ5XGQrPSIoPzpudWxsfFxkKykiL2csdWE9bmV3IFJlZ0V4cCgiPCg/OiIrYmErIilbXFxzLz5dIiwiaSIpLHZhPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcdzotXSspW14+XSopXC8+L2dpLHdhPS88c2NyaXB0fDxzdHlsZXw8bGluay9pLHhhPS9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLHlhPS9edHJ1ZVwvKC4qKS8semE9L15ccyo8ISg/OlxbQ0RBVEFcW3wtLSl8KD86XF1cXXwtLSk+XHMqJC9nLEFhPWNhKGQpLEJhPUFhLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudCgiZGl2IikpO2Z1bmN0aW9uIENhKGEsYil7cmV0dXJuIG4ubm9kZU5hbWUoYSwidGFibGUiKSYmbi5ub2RlTmFtZSgxMSE9PWIubm9kZVR5cGU/YjpiLmZpcnN0Q2hpbGQsInRyIik/YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKVswXXx8YS5hcHBlbmRDaGlsZChhLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGJvZHkiKSk6YX1mdW5jdGlvbiBEYShhKXtyZXR1cm4gYS50eXBlPShudWxsIT09bi5maW5kLmF0dHIoYSwidHlwZSIpKSsiLyIrYS50eXBlLGF9ZnVuY3Rpb24gRWEoYSl7dmFyIGI9eWEuZXhlYyhhLnR5cGUpO3JldHVybiBiP2EudHlwZT1iWzFdOmEucmVtb3ZlQXR0cmlidXRlKCJ0eXBlIiksYX1mdW5jdGlvbiBGYShhLGIpe2lmKDE9PT1iLm5vZGVUeXBlJiZuLmhhc0RhdGEoYSkpe3ZhciBjLGQsZSxmPW4uX2RhdGEoYSksZz1uLl9kYXRhKGIsZiksaD1mLmV2ZW50cztpZihoKXtkZWxldGUgZy5oYW5kbGUsZy5ldmVudHM9e307Zm9yKGMgaW4gaClmb3IoZD0wLGU9aFtjXS5sZW5ndGg7ZT5kO2QrKyluLmV2ZW50LmFkZChiLGMsaFtjXVtkXSl9Zy5kYXRhJiYoZy5kYXRhPW4uZXh0ZW5kKHt9LGcuZGF0YSkpfX1mdW5jdGlvbiBHYShhLGIpe3ZhciBjLGQsZTtpZigxPT09Yi5ub2RlVHlwZSl7aWYoYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksIWwubm9DbG9uZUV2ZW50JiZiW24uZXhwYW5kb10pe2U9bi5fZGF0YShiKTtmb3IoZCBpbiBlLmV2ZW50cyluLnJlbW92ZUV2ZW50KGIsZCxlLmhhbmRsZSk7Yi5yZW1vdmVBdHRyaWJ1dGUobi5leHBhbmRvKX0ic2NyaXB0Ij09PWMmJmIudGV4dCE9PWEudGV4dD8oRGEoYikudGV4dD1hLnRleHQsRWEoYikpOiJvYmplY3QiPT09Yz8oYi5wYXJlbnROb2RlJiYoYi5vdXRlckhUTUw9YS5vdXRlckhUTUwpLGwuaHRtbDVDbG9uZSYmYS5pbm5lckhUTUwmJiFuLnRyaW0oYi5pbm5lckhUTUwpJiYoYi5pbm5lckhUTUw9YS5pbm5lckhUTUwpKToiaW5wdXQiPT09YyYmWi50ZXN0KGEudHlwZSk/KGIuZGVmYXVsdENoZWNrZWQ9Yi5jaGVja2VkPWEuY2hlY2tlZCxiLnZhbHVlIT09YS52YWx1ZSYmKGIudmFsdWU9YS52YWx1ZSkpOiJvcHRpb24iPT09Yz9iLmRlZmF1bHRTZWxlY3RlZD1iLnNlbGVjdGVkPWEuZGVmYXVsdFNlbGVjdGVkOiJpbnB1dCIhPT1jJiYidGV4dGFyZWEiIT09Y3x8KGIuZGVmYXVsdFZhbHVlPWEuZGVmYXVsdFZhbHVlKX19ZnVuY3Rpb24gSGEoYSxiLGMsZCl7Yj1mLmFwcGx5KFtdLGIpO3ZhciBlLGcsaCxpLGosayxtPTAsbz1hLmxlbmd0aCxwPW8tMSxxPWJbMF0scj1uLmlzRnVuY3Rpb24ocSk7aWYocnx8bz4xJiYic3RyaW5nIj09dHlwZW9mIHEmJiFsLmNoZWNrQ2xvbmUmJnhhLnRlc3QocSkpcmV0dXJuIGEuZWFjaChmdW5jdGlvbihlKXt2YXIgZj1hLmVxKGUpO3ImJihiWzBdPXEuY2FsbCh0aGlzLGUsZi5odG1sKCkpKSxIYShmLGIsYyxkKX0pO2lmKG8mJihrPWphKGIsYVswXS5vd25lckRvY3VtZW50LCExLGEsZCksZT1rLmZpcnN0Q2hpbGQsMT09PWsuY2hpbGROb2Rlcy5sZW5ndGgmJihrPWUpLGV8fGQpKXtmb3IoaT1uLm1hcChlYShrLCJzY3JpcHQiKSxEYSksaD1pLmxlbmd0aDtvPm07bSsrKWc9ayxtIT09cCYmKGc9bi5jbG9uZShnLCEwLCEwKSxoJiZuLm1lcmdlKGksZWEoZywic2NyaXB0IikpKSxjLmNhbGwoYVttXSxnLG0pO2lmKGgpZm9yKGo9aVtpLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LG4ubWFwKGksRWEpLG09MDtoPm07bSsrKWc9aVttXSxfLnRlc3QoZy50eXBlfHwiIikmJiFuLl9kYXRhKGcsImdsb2JhbEV2YWwiKSYmbi5jb250YWlucyhqLGcpJiYoZy5zcmM/bi5fZXZhbFVybCYmbi5fZXZhbFVybChnLnNyYyk6bi5nbG9iYWxFdmFsKChnLnRleHR8fGcudGV4dENvbnRlbnR8fGcuaW5uZXJIVE1MfHwiIikucmVwbGFjZSh6YSwiIikpKTtrPWU9bnVsbH1yZXR1cm4gYX1mdW5jdGlvbiBJYShhLGIsYyl7Zm9yKHZhciBkLGU9Yj9uLmZpbHRlcihiLGEpOmEsZj0wO251bGwhPShkPWVbZl0pO2YrKyljfHwxIT09ZC5ub2RlVHlwZXx8bi5jbGVhbkRhdGEoZWEoZCkpLGQucGFyZW50Tm9kZSYmKGMmJm4uY29udGFpbnMoZC5vd25lckRvY3VtZW50LGQpJiZmYShlYShkLCJzY3JpcHQiKSksZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGQpKTtyZXR1cm4gYX1uLmV4dGVuZCh7aHRtbFByZWZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKHZhLCI8JDE+PC8kMj4iKX0sY2xvbmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGgsaT1uLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKTtpZihsLmh0bWw1Q2xvbmV8fG4uaXNYTUxEb2MoYSl8fCF1YS50ZXN0KCI8IithLm5vZGVOYW1lKyI+Iik/Zj1hLmNsb25lTm9kZSghMCk6KEJhLmlubmVySFRNTD1hLm91dGVySFRNTCxCYS5yZW1vdmVDaGlsZChmPUJhLmZpcnN0Q2hpbGQpKSwhKGwubm9DbG9uZUV2ZW50JiZsLm5vQ2xvbmVDaGVja2VkfHwxIT09YS5ub2RlVHlwZSYmMTEhPT1hLm5vZGVUeXBlfHxuLmlzWE1MRG9jKGEpKSlmb3IoZD1lYShmKSxoPWVhKGEpLGc9MDtudWxsIT0oZT1oW2ddKTsrK2cpZFtnXSYmR2EoZSxkW2ddKTtpZihiKWlmKGMpZm9yKGg9aHx8ZWEoYSksZD1kfHxlYShmKSxnPTA7bnVsbCE9KGU9aFtnXSk7ZysrKUZhKGUsZFtnXSk7ZWxzZSBGYShhLGYpO3JldHVybiBkPWVhKGYsInNjcmlwdCIpLGQubGVuZ3RoPjAmJmZhKGQsIWkmJmVhKGEsInNjcmlwdCIpKSxkPWg9ZT1udWxsLGZ9LGNsZWFuRGF0YTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgZCxlLGYsZyxoPTAsaT1uLmV4cGFuZG8saj1uLmNhY2hlLGs9bC5hdHRyaWJ1dGVzLG09bi5ldmVudC5zcGVjaWFsO251bGwhPShkPWFbaF0pO2grKylpZigoYnx8TShkKSkmJihmPWRbaV0sZz1mJiZqW2ZdKSl7aWYoZy5ldmVudHMpZm9yKGUgaW4gZy5ldmVudHMpbVtlXT9uLmV2ZW50LnJlbW92ZShkLGUpOm4ucmVtb3ZlRXZlbnQoZCxlLGcuaGFuZGxlKTtqW2ZdJiYoZGVsZXRlIGpbZl0sa3x8InVuZGVmaW5lZCI9PXR5cGVvZiBkLnJlbW92ZUF0dHJpYnV0ZT9kW2ldPXZvaWQgMDpkLnJlbW92ZUF0dHJpYnV0ZShpKSxjLnB1c2goZikpfX19KSxuLmZuLmV4dGVuZCh7ZG9tTWFuaXA6SGEsZGV0YWNoOmZ1bmN0aW9uKGEpe3JldHVybiBJYSh0aGlzLGEsITApfSxyZW1vdmU6ZnVuY3Rpb24oYSl7cmV0dXJuIElhKHRoaXMsYSl9LHRleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YT9uLnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmFwcGVuZCgodGhpc1swXSYmdGhpc1swXS5vd25lckRvY3VtZW50fHxkKS5jcmVhdGVUZXh0Tm9kZShhKSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIEhhKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj1DYSh0aGlzLGEpO2IuYXBwZW5kQ2hpbGQoYSl9fSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPUNhKHRoaXMsYSk7Yi5pbnNlcnRCZWZvcmUoYSxiLmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcy5uZXh0U2libGluZyl9KX0sZW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wO251bGwhPShhPXRoaXNbYl0pO2IrKyl7MT09PWEubm9kZVR5cGUmJm4uY2xlYW5EYXRhKGVhKGEsITEpKTt3aGlsZShhLmZpcnN0Q2hpbGQpYS5yZW1vdmVDaGlsZChhLmZpcnN0Q2hpbGQpO2Eub3B0aW9ucyYmbi5ub2RlTmFtZShhLCJzZWxlY3QiKSYmKGEub3B0aW9ucy5sZW5ndGg9MCl9cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9bnVsbD09YT8hMTphLGI9bnVsbD09Yj9hOmIsdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gbi5jbG9uZSh0aGlzLGEsYil9KX0saHRtbDpmdW5jdGlvbihhKXtyZXR1cm4gWSh0aGlzLGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXNbMF18fHt9LGM9MCxkPXRoaXMubGVuZ3RoO2lmKHZvaWQgMD09PWEpcmV0dXJuIDE9PT1iLm5vZGVUeXBlP2IuaW5uZXJIVE1MLnJlcGxhY2UodGEsIiIpOnZvaWQgMDtpZigic3RyaW5nIj09dHlwZW9mIGEmJiF3YS50ZXN0KGEpJiYobC5odG1sU2VyaWFsaXplfHwhdWEudGVzdChhKSkmJihsLmxlYWRpbmdXaGl0ZXNwYWNlfHwhYWEudGVzdChhKSkmJiFkYVsoJC5leGVjKGEpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7YT1uLmh0bWxQcmVmaWx0ZXIoYSk7dHJ5e2Zvcig7ZD5jO2MrKyliPXRoaXNbY118fHt9LDE9PT1iLm5vZGVUeXBlJiYobi5jbGVhbkRhdGEoZWEoYiwhMSkpLGIuaW5uZXJIVE1MPWEpO2I9MH1jYXRjaChlKXt9fWImJnRoaXMuZW1wdHkoKS5hcHBlbmQoYSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgYT1bXTtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5wYXJlbnROb2RlO24uaW5BcnJheSh0aGlzLGEpPDAmJihuLmNsZWFuRGF0YShlYSh0aGlzKSksYyYmYy5yZXBsYWNlQ2hpbGQoYix0aGlzKSl9LGEpfX0pLG4uZWFjaCh7YXBwZW5kVG86ImFwcGVuZCIscHJlcGVuZFRvOiJwcmVwZW5kIixpbnNlcnRCZWZvcmU6ImJlZm9yZSIsaW5zZXJ0QWZ0ZXI6ImFmdGVyIixyZXBsYWNlQWxsOiJyZXBsYWNlV2l0aCJ9LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhKXtmb3IodmFyIGMsZD0wLGU9W10sZj1uKGEpLGg9Zi5sZW5ndGgtMTtoPj1kO2QrKyljPWQ9PT1oP3RoaXM6dGhpcy5jbG9uZSghMCksbihmW2RdKVtiXShjKSxnLmFwcGx5KGUsYy5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGUpfX0pO3ZhciBKYSxLYT17SFRNTDoiYmxvY2siLEJPRFk6ImJsb2NrIn07ZnVuY3Rpb24gTGEoYSxiKXt2YXIgYz1uKGIuY3JlYXRlRWxlbWVudChhKSkuYXBwZW5kVG8oYi5ib2R5KSxkPW4uY3NzKGNbMF0sImRpc3BsYXkiKTtyZXR1cm4gYy5kZXRhY2goKSxkfWZ1bmN0aW9uIE1hKGEpe3ZhciBiPWQsYz1LYVthXTtyZXR1cm4gY3x8KGM9TGEoYSxiKSwibm9uZSIhPT1jJiZjfHwoSmE9KEphfHxuKCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+IikpLmFwcGVuZFRvKGIuZG9jdW1lbnRFbGVtZW50KSxiPShKYVswXS5jb250ZW50V2luZG93fHxKYVswXS5jb250ZW50RG9jdW1lbnQpLmRvY3VtZW50LGIud3JpdGUoKSxiLmNsb3NlKCksYz1MYShhLGIpLEphLmRldGFjaCgpKSxLYVthXT1jKSxjfXZhciBOYT0vXm1hcmdpbi8sT2E9bmV3IFJlZ0V4cCgiXigiK1QrIikoPyFweClbYS16JV0rJCIsImkiKSxQYT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGc9e307Zm9yKGYgaW4gYilnW2ZdPWEuc3R5bGVbZl0sYS5zdHlsZVtmXT1iW2ZdO2U9Yy5hcHBseShhLGR8fFtdKTtmb3IoZiBpbiBiKWEuc3R5bGVbZl09Z1tmXTtyZXR1cm4gZX0sUWE9ZC5kb2N1bWVudEVsZW1lbnQ7IWZ1bmN0aW9uKCl7dmFyIGIsYyxlLGYsZyxoLGk9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKSxqPWQuY3JlYXRlRWxlbWVudCgiZGl2Iik7aWYoai5zdHlsZSl7ai5zdHlsZS5jc3NUZXh0PSJmbG9hdDpsZWZ0O29wYWNpdHk6LjUiLGwub3BhY2l0eT0iMC41Ij09PWouc3R5bGUub3BhY2l0eSxsLmNzc0Zsb2F0PSEhai5zdHlsZS5jc3NGbG9hdCxqLnN0eWxlLmJhY2tncm91bmRDbGlwPSJjb250ZW50LWJveCIsai5jbG9uZU5vZGUoITApLnN0eWxlLmJhY2tncm91bmRDbGlwPSIiLGwuY2xlYXJDbG9uZVN0eWxlPSJjb250ZW50LWJveCI9PT1qLnN0eWxlLmJhY2tncm91bmRDbGlwLGk9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKSxpLnN0eWxlLmNzc1RleHQ9ImJvcmRlcjowO3dpZHRoOjhweDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHg7cGFkZGluZzowO21hcmdpbi10b3A6MXB4O3Bvc2l0aW9uOmFic29sdXRlIixqLmlubmVySFRNTD0iIixpLmFwcGVuZENoaWxkKGopLGwuYm94U2l6aW5nPSIiPT09ai5zdHlsZS5ib3hTaXppbmd8fCIiPT09ai5zdHlsZS5Nb3pCb3hTaXppbmd8fCIiPT09ai5zdHlsZS5XZWJraXRCb3hTaXppbmcsbi5leHRlbmQobCx7cmVsaWFibGVIaWRkZW5PZmZzZXRzOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWImJmsoKSxmfSxib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksZX0scGl4ZWxNYXJnaW5SaWdodDpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksY30scGl4ZWxQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksYn0scmVsaWFibGVNYXJnaW5SaWdodDpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksZ30scmVsaWFibGVNYXJnaW5MZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWImJmsoKSxofX0pO2Z1bmN0aW9uIGsoKXt2YXIgayxsLG09ZC5kb2N1bWVudEVsZW1lbnQ7bS5hcHBlbmRDaGlsZChpKSxqLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO21hcmdpbjphdXRvO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7dG9wOjElO3dpZHRoOjUwJSIsYj1lPWg9ITEsYz1nPSEwLGEuZ2V0Q29tcHV0ZWRTdHlsZSYmKGw9YS5nZXRDb21wdXRlZFN0eWxlKGopLGI9IjElIiE9PShsfHx7fSkudG9wLGg9IjJweCI9PT0obHx8e30pLm1hcmdpbkxlZnQsZT0iNHB4Ij09PShsfHx7d2lkdGg6IjRweCJ9KS53aWR0aCxqLnN0eWxlLm1hcmdpblJpZ2h0PSI1MCUiLGM9IjRweCI9PT0obHx8e21hcmdpblJpZ2h0OiI0cHgifSkubWFyZ2luUmlnaHQsaz1qLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudCgiZGl2IikpLGsuc3R5bGUuY3NzVGV4dD1qLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MCIsay5zdHlsZS5tYXJnaW5SaWdodD1rLnN0eWxlLndpZHRoPSIwIixqLnN0eWxlLndpZHRoPSIxcHgiLGc9IXBhcnNlRmxvYXQoKGEuZ2V0Q29tcHV0ZWRTdHlsZShrKXx8e30pLm1hcmdpblJpZ2h0KSxqLnJlbW92ZUNoaWxkKGspKSxqLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGY9MD09PWouZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgsZiYmKGouc3R5bGUuZGlzcGxheT0iIixqLmlubmVySFRNTD0iPHRhYmxlPjx0cj48dGQ+PC90ZD48dGQ+dDwvdGQ+PC90cj48L3RhYmxlPiIsai5jaGlsZE5vZGVzWzBdLnN0eWxlLmJvcmRlckNvbGxhcHNlPSJzZXBhcmF0ZSIsaz1qLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZCIpLGtbMF0uc3R5bGUuY3NzVGV4dD0ibWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowO2Rpc3BsYXk6bm9uZSIsZj0wPT09a1swXS5vZmZzZXRIZWlnaHQsZiYmKGtbMF0uc3R5bGUuZGlzcGxheT0iIixrWzFdLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGY9MD09PWtbMF0ub2Zmc2V0SGVpZ2h0KSksbS5yZW1vdmVDaGlsZChpKX19fSgpO3ZhciBSYSxTYSxUYT0vXih0b3B8cmlnaHR8Ym90dG9tfGxlZnQpJC87YS5nZXRDb21wdXRlZFN0eWxlPyhSYT1mdW5jdGlvbihiKXt2YXIgYz1iLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7cmV0dXJuIGMmJmMub3BlbmVyfHwoYz1hKSxjLmdldENvbXB1dGVkU3R5bGUoYil9LFNhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuc3R5bGU7cmV0dXJuIGM9Y3x8UmEoYSksZz1jP2MuZ2V0UHJvcGVydHlWYWx1ZShiKXx8Y1tiXTp2b2lkIDAsIiIhPT1nJiZ2b2lkIDAhPT1nfHxuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKXx8KGc9bi5zdHlsZShhLGIpKSxjJiYhbC5waXhlbE1hcmdpblJpZ2h0KCkmJk9hLnRlc3QoZykmJk5hLnRlc3QoYikmJihkPWgud2lkdGgsZT1oLm1pbldpZHRoLGY9aC5tYXhXaWR0aCxoLm1pbldpZHRoPWgubWF4V2lkdGg9aC53aWR0aD1nLGc9Yy53aWR0aCxoLndpZHRoPWQsaC5taW5XaWR0aD1lLGgubWF4V2lkdGg9Ziksdm9pZCAwPT09Zz9nOmcrIiJ9KTpRYS5jdXJyZW50U3R5bGUmJihSYT1mdW5jdGlvbihhKXtyZXR1cm4gYS5jdXJyZW50U3R5bGV9LFNhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuc3R5bGU7cmV0dXJuIGM9Y3x8UmEoYSksZz1jP2NbYl06dm9pZCAwLG51bGw9PWcmJmgmJmhbYl0mJihnPWhbYl0pLE9hLnRlc3QoZykmJiFUYS50ZXN0KGIpJiYoZD1oLmxlZnQsZT1hLnJ1bnRpbWVTdHlsZSxmPWUmJmUubGVmdCxmJiYoZS5sZWZ0PWEuY3VycmVudFN0eWxlLmxlZnQpLGgubGVmdD0iZm9udFNpemUiPT09Yj8iMWVtIjpnLGc9aC5waXhlbExlZnQrInB4IixoLmxlZnQ9ZCxmJiYoZS5sZWZ0PWYpKSx2b2lkIDA9PT1nP2c6ZysiInx8ImF1dG8ifSk7ZnVuY3Rpb24gVWEoYSxiKXtyZXR1cm57Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEoKT92b2lkIGRlbGV0ZSB0aGlzLmdldDoodGhpcy5nZXQ9YikuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19dmFyIFZhPS9hbHBoYVwoW14pXSpcKS9pLFdhPS9vcGFjaXR5XHMqPVxzKihbXildKikvaSxYYT0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sWWE9bmV3IFJlZ0V4cCgiXigiK1QrIikoLiopJCIsImkiKSxaYT17cG9zaXRpb246ImFic29sdXRlIix2aXNpYmlsaXR5OiJoaWRkZW4iLGRpc3BsYXk6ImJsb2NrIn0sJGE9e2xldHRlclNwYWNpbmc6IjAiLGZvbnRXZWlnaHQ6IjQwMCJ9LF9hPVsiV2Via2l0IiwiTyIsIk1veiIsIm1zIl0sYWI9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKS5zdHlsZTtmdW5jdGlvbiBiYihhKXtpZihhIGluIGFiKXJldHVybiBhO3ZhciBiPWEuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYS5zbGljZSgxKSxjPV9hLmxlbmd0aDt3aGlsZShjLS0paWYoYT1fYVtjXStiLGEgaW4gYWIpcmV0dXJuIGF9ZnVuY3Rpb24gY2IoYSxiKXtmb3IodmFyIGMsZCxlLGY9W10sZz0wLGg9YS5sZW5ndGg7aD5nO2crKylkPWFbZ10sZC5zdHlsZSYmKGZbZ109bi5fZGF0YShkLCJvbGRkaXNwbGF5IiksYz1kLnN0eWxlLmRpc3BsYXksYj8oZltnXXx8Im5vbmUiIT09Y3x8KGQuc3R5bGUuZGlzcGxheT0iIiksIiI9PT1kLnN0eWxlLmRpc3BsYXkmJlcoZCkmJihmW2ddPW4uX2RhdGEoZCwib2xkZGlzcGxheSIsTWEoZC5ub2RlTmFtZSkpKSk6KGU9VyhkKSwoYyYmIm5vbmUiIT09Y3x8IWUpJiZuLl9kYXRhKGQsIm9sZGRpc3BsYXkiLGU/YzpuLmNzcyhkLCJkaXNwbGF5IikpKSk7Zm9yKGc9MDtoPmc7ZysrKWQ9YVtnXSxkLnN0eWxlJiYoYiYmIm5vbmUiIT09ZC5zdHlsZS5kaXNwbGF5JiYiIiE9PWQuc3R5bGUuZGlzcGxheXx8KGQuc3R5bGUuZGlzcGxheT1iP2ZbZ118fCIiOiJub25lIikpO3JldHVybiBhfWZ1bmN0aW9uIGRiKGEsYixjKXt2YXIgZD1ZYS5leGVjKGIpO3JldHVybiBkP01hdGgubWF4KDAsZFsxXS0oY3x8MCkpKyhkWzJdfHwicHgiKTpifWZ1bmN0aW9uIGViKGEsYixjLGQsZSl7Zm9yKHZhciBmPWM9PT0oZD8iYm9yZGVyIjoiY29udGVudCIpPzQ6IndpZHRoIj09PWI/MTowLGc9MDs0PmY7Zis9MikibWFyZ2luIj09PWMmJihnKz1uLmNzcyhhLGMrVltmXSwhMCxlKSksZD8oImNvbnRlbnQiPT09YyYmKGctPW4uY3NzKGEsInBhZGRpbmciK1ZbZl0sITAsZSkpLCJtYXJnaW4iIT09YyYmKGctPW4uY3NzKGEsImJvcmRlciIrVltmXSsiV2lkdGgiLCEwLGUpKSk6KGcrPW4uY3NzKGEsInBhZGRpbmciK1ZbZl0sITAsZSksInBhZGRpbmciIT09YyYmKGcrPW4uY3NzKGEsImJvcmRlciIrVltmXSsiV2lkdGgiLCEwLGUpKSk7cmV0dXJuIGd9ZnVuY3Rpb24gZmIoYSxiLGMpe3ZhciBkPSEwLGU9IndpZHRoIj09PWI/YS5vZmZzZXRXaWR0aDphLm9mZnNldEhlaWdodCxmPVJhKGEpLGc9bC5ib3hTaXppbmcmJiJib3JkZXItYm94Ij09PW4uY3NzKGEsImJveFNpemluZyIsITEsZik7aWYoMD49ZXx8bnVsbD09ZSl7aWYoZT1TYShhLGIsZiksKDA+ZXx8bnVsbD09ZSkmJihlPWEuc3R5bGVbYl0pLE9hLnRlc3QoZSkpcmV0dXJuIGU7ZD1nJiYobC5ib3hTaXppbmdSZWxpYWJsZSgpfHxlPT09YS5zdHlsZVtiXSksZT1wYXJzZUZsb2F0KGUpfHwwfXJldHVybiBlK2ViKGEsYixjfHwoZz8iYm9yZGVyIjoiY29udGVudCIpLGQsZikrInB4In1uLmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihhLGIpe2lmKGIpe3ZhciBjPVNhKGEsIm9wYWNpdHkiKTtyZXR1cm4iIj09PWM/IjEiOmN9fX19LGNzc051bWJlcjp7YW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6ITAsY29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZmxleEdyb3c6ITAsZmxleFNocmluazohMCxmb250V2VpZ2h0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcmRlcjohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6eyJmbG9hdCI6bC5jc3NGbG9hdD8iY3NzRmxvYXQiOiJzdHlsZUZsb2F0In0sc3R5bGU6ZnVuY3Rpb24oYSxiLGMsZCl7aWYoYSYmMyE9PWEubm9kZVR5cGUmJjghPT1hLm5vZGVUeXBlJiZhLnN0eWxlKXt2YXIgZSxmLGcsaD1uLmNhbWVsQ2FzZShiKSxpPWEuc3R5bGU7aWYoYj1uLmNzc1Byb3BzW2hdfHwobi5jc3NQcm9wc1toXT1iYihoKXx8aCksZz1uLmNzc0hvb2tzW2JdfHxuLmNzc0hvb2tzW2hdLHZvaWQgMD09PWMpcmV0dXJuIGcmJiJnZXQiaW4gZyYmdm9pZCAwIT09KGU9Zy5nZXQoYSwhMSxkKSk/ZTppW2JdO2lmKGY9dHlwZW9mIGMsInN0cmluZyI9PT1mJiYoZT1VLmV4ZWMoYykpJiZlWzFdJiYoYz1YKGEsYixlKSxmPSJudW1iZXIiKSxudWxsIT1jJiZjPT09YyYmKCJudW1iZXIiPT09ZiYmKGMrPWUmJmVbM118fChuLmNzc051bWJlcltoXT8iIjoicHgiKSksbC5jbGVhckNsb25lU3R5bGV8fCIiIT09Y3x8MCE9PWIuaW5kZXhPZigiYmFja2dyb3VuZCIpfHwoaVtiXT0iaW5oZXJpdCIpLCEoZyYmInNldCJpbiBnJiZ2b2lkIDA9PT0oYz1nLnNldChhLGMsZCkpKSkpdHJ5e2lbYl09Y31jYXRjaChqKXt9fX0sY3NzOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlLGYsZyxoPW4uY2FtZWxDYXNlKGIpO3JldHVybiBiPW4uY3NzUHJvcHNbaF18fChuLmNzc1Byb3BzW2hdPWJiKGgpfHxoKSxnPW4uY3NzSG9va3NbYl18fG4uY3NzSG9va3NbaF0sZyYmImdldCJpbiBnJiYoZj1nLmdldChhLCEwLGMpKSx2b2lkIDA9PT1mJiYoZj1TYShhLGIsZCkpLCJub3JtYWwiPT09ZiYmYiBpbiAkYSYmKGY9JGFbYl0pLCIiPT09Y3x8Yz8oZT1wYXJzZUZsb2F0KGYpLGM9PT0hMHx8aXNGaW5pdGUoZSk/ZXx8MDpmKTpmfX0pLG4uZWFjaChbImhlaWdodCIsIndpZHRoIl0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2JdPXtnZXQ6ZnVuY3Rpb24oYSxjLGQpe3JldHVybiBjP1hhLnRlc3Qobi5jc3MoYSwiZGlzcGxheSIpKSYmMD09PWEub2Zmc2V0V2lkdGg/UGEoYSxaYSxmdW5jdGlvbigpe3JldHVybiBmYihhLGIsZCl9KTpmYihhLGIsZCk6dm9pZCAwfSxzZXQ6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPWQmJlJhKGEpO3JldHVybiBkYihhLGMsZD9lYihhLGIsZCxsLmJveFNpemluZyYmImJvcmRlci1ib3giPT09bi5jc3MoYSwiYm94U2l6aW5nIiwhMSxlKSxlKTowKX19fSksbC5vcGFjaXR5fHwobi5jc3NIb29rcy5vcGFjaXR5PXtnZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gV2EudGVzdCgoYiYmYS5jdXJyZW50U3R5bGU/YS5jdXJyZW50U3R5bGUuZmlsdGVyOmEuc3R5bGUuZmlsdGVyKXx8IiIpPy4wMSpwYXJzZUZsb2F0KFJlZ0V4cC4kMSkrIiI6Yj8iMSI6IiJ9LHNldDpmdW5jdGlvbihhLGIpe3ZhciBjPWEuc3R5bGUsZD1hLmN1cnJlbnRTdHlsZSxlPW4uaXNOdW1lcmljKGIpPyJhbHBoYShvcGFjaXR5PSIrMTAwKmIrIikiOiIiLGY9ZCYmZC5maWx0ZXJ8fGMuZmlsdGVyfHwiIjtjLnpvb209MSwoYj49MXx8IiI9PT1iKSYmIiI9PT1uLnRyaW0oZi5yZXBsYWNlKFZhLCIiKSkmJmMucmVtb3ZlQXR0cmlidXRlJiYoYy5yZW1vdmVBdHRyaWJ1dGUoImZpbHRlciIpLCIiPT09Ynx8ZCYmIWQuZmlsdGVyKXx8KGMuZmlsdGVyPVZhLnRlc3QoZik/Zi5yZXBsYWNlKFZhLGUpOmYrIiAiK2UpfX0pLG4uY3NzSG9va3MubWFyZ2luUmlnaHQ9VWEobC5yZWxpYWJsZU1hcmdpblJpZ2h0LGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/UGEoYSx7ZGlzcGxheToiaW5saW5lLWJsb2NrIn0sU2EsW2EsIm1hcmdpblJpZ2h0Il0pOnZvaWQgMH0pLG4uY3NzSG9va3MubWFyZ2luTGVmdD1VYShsLnJlbGlhYmxlTWFyZ2luTGVmdCxmdW5jdGlvbihhLGIpe3JldHVybiBiPyhwYXJzZUZsb2F0KFNhKGEsIm1hcmdpbkxlZnQiKSl8fChuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKT9hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQtUGEoYSx7Cm1hcmdpbkxlZnQ6MH0sZnVuY3Rpb24oKXtyZXR1cm4gYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0fSk6MCkpKyJweCI6dm9pZCAwfSksbi5lYWNoKHttYXJnaW46IiIscGFkZGluZzoiIixib3JkZXI6IldpZHRoIn0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2ErYl09e2V4cGFuZDpmdW5jdGlvbihjKXtmb3IodmFyIGQ9MCxlPXt9LGY9InN0cmluZyI9PXR5cGVvZiBjP2Muc3BsaXQoIiAiKTpbY107ND5kO2QrKyllW2ErVltkXStiXT1mW2RdfHxmW2QtMl18fGZbMF07cmV0dXJuIGV9fSxOYS50ZXN0KGEpfHwobi5jc3NIb29rc1thK2JdLnNldD1kYil9KSxuLmZuLmV4dGVuZCh7Y3NzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPXt9LGc9MDtpZihuLmlzQXJyYXkoYikpe2ZvcihkPVJhKGEpLGU9Yi5sZW5ndGg7ZT5nO2crKylmW2JbZ11dPW4uY3NzKGEsYltnXSwhMSxkKTtyZXR1cm4gZn1yZXR1cm4gdm9pZCAwIT09Yz9uLnN0eWxlKGEsYixjKTpuLmNzcyhhLGIpfSxhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0sc2hvdzpmdW5jdGlvbigpe3JldHVybiBjYih0aGlzLCEwKX0saGlkZTpmdW5jdGlvbigpe3JldHVybiBjYih0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKGEpe3JldHVybiJib29sZWFuIj09dHlwZW9mIGE/YT90aGlzLnNob3coKTp0aGlzLmhpZGUoKTp0aGlzLmVhY2goZnVuY3Rpb24oKXtXKHRoaXMpP24odGhpcykuc2hvdygpOm4odGhpcykuaGlkZSgpfSl9fSk7ZnVuY3Rpb24gZ2IoYSxiLGMsZCxlKXtyZXR1cm4gbmV3IGdiLnByb3RvdHlwZS5pbml0KGEsYixjLGQsZSl9bi5Ud2Vlbj1nYixnYi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmdiLGluaXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMuZWxlbT1hLHRoaXMucHJvcD1jLHRoaXMuZWFzaW5nPWV8fG4uZWFzaW5nLl9kZWZhdWx0LHRoaXMub3B0aW9ucz1iLHRoaXMuc3RhcnQ9dGhpcy5ub3c9dGhpcy5jdXIoKSx0aGlzLmVuZD1kLHRoaXMudW5pdD1mfHwobi5jc3NOdW1iZXJbY10/IiI6InB4Iil9LGN1cjpmdW5jdGlvbigpe3ZhciBhPWdiLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiBhJiZhLmdldD9hLmdldCh0aGlzKTpnYi5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpfSxydW46ZnVuY3Rpb24oYSl7dmFyIGIsYz1nYi5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gdGhpcy5vcHRpb25zLmR1cmF0aW9uP3RoaXMucG9zPWI9bi5lYXNpbmdbdGhpcy5lYXNpbmddKGEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKmEsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbik6dGhpcy5wb3M9Yj1hLHRoaXMubm93PSh0aGlzLmVuZC10aGlzLnN0YXJ0KSpiK3RoaXMuc3RhcnQsdGhpcy5vcHRpb25zLnN0ZXAmJnRoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpLGMmJmMuc2V0P2Muc2V0KHRoaXMpOmdiLnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyksdGhpc319LGdiLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZT1nYi5wcm90b3R5cGUsZ2IucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiAxIT09YS5lbGVtLm5vZGVUeXBlfHxudWxsIT1hLmVsZW1bYS5wcm9wXSYmbnVsbD09YS5lbGVtLnN0eWxlW2EucHJvcF0/YS5lbGVtW2EucHJvcF06KGI9bi5jc3MoYS5lbGVtLGEucHJvcCwiIiksYiYmImF1dG8iIT09Yj9iOjApfSxzZXQ6ZnVuY3Rpb24oYSl7bi5meC5zdGVwW2EucHJvcF0/bi5meC5zdGVwW2EucHJvcF0oYSk6MSE9PWEuZWxlbS5ub2RlVHlwZXx8bnVsbD09YS5lbGVtLnN0eWxlW24uY3NzUHJvcHNbYS5wcm9wXV0mJiFuLmNzc0hvb2tzW2EucHJvcF0/YS5lbGVtW2EucHJvcF09YS5ub3c6bi5zdHlsZShhLmVsZW0sYS5wcm9wLGEubm93K2EudW5pdCl9fX0sZ2IucHJvcEhvb2tzLnNjcm9sbFRvcD1nYi5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGEpe2EuZWxlbS5ub2RlVHlwZSYmYS5lbGVtLnBhcmVudE5vZGUmJihhLmVsZW1bYS5wcm9wXT1hLm5vdyl9fSxuLmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxzd2luZzpmdW5jdGlvbihhKXtyZXR1cm4uNS1NYXRoLmNvcyhhKk1hdGguUEkpLzJ9LF9kZWZhdWx0OiJzd2luZyJ9LG4uZng9Z2IucHJvdG90eXBlLmluaXQsbi5meC5zdGVwPXt9O3ZhciBoYixpYixqYj0vXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sa2I9L3F1ZXVlSG9va3MkLztmdW5jdGlvbiBsYigpe3JldHVybiBhLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtoYj12b2lkIDB9KSxoYj1uLm5vdygpfWZ1bmN0aW9uIG1iKGEsYil7dmFyIGMsZD17aGVpZ2h0OmF9LGU9MDtmb3IoYj1iPzE6MDs0PmU7ZSs9Mi1iKWM9VltlXSxkWyJtYXJnaW4iK2NdPWRbInBhZGRpbmciK2NdPWE7cmV0dXJuIGImJihkLm9wYWNpdHk9ZC53aWR0aD1hKSxkfWZ1bmN0aW9uIG5iKGEsYixjKXtmb3IodmFyIGQsZT0ocWIudHdlZW5lcnNbYl18fFtdKS5jb25jYXQocWIudHdlZW5lcnNbIioiXSksZj0wLGc9ZS5sZW5ndGg7Zz5mO2YrKylpZihkPWVbZl0uY2FsbChjLGIsYSkpcmV0dXJuIGR9ZnVuY3Rpb24gb2IoYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGssbT10aGlzLG89e30scD1hLnN0eWxlLHE9YS5ub2RlVHlwZSYmVyhhKSxyPW4uX2RhdGEoYSwiZnhzaG93Iik7Yy5xdWV1ZXx8KGg9bi5fcXVldWVIb29rcyhhLCJmeCIpLG51bGw9PWgudW5xdWV1ZWQmJihoLnVucXVldWVkPTAsaT1oLmVtcHR5LmZpcmUsaC5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7aC51bnF1ZXVlZHx8aSgpfSksaC51bnF1ZXVlZCsrLG0uYWx3YXlzKGZ1bmN0aW9uKCl7bS5hbHdheXMoZnVuY3Rpb24oKXtoLnVucXVldWVkLS0sbi5xdWV1ZShhLCJmeCIpLmxlbmd0aHx8aC5lbXB0eS5maXJlKCl9KX0pKSwxPT09YS5ub2RlVHlwZSYmKCJoZWlnaHQiaW4gYnx8IndpZHRoImluIGIpJiYoYy5vdmVyZmxvdz1bcC5vdmVyZmxvdyxwLm92ZXJmbG93WCxwLm92ZXJmbG93WV0saj1uLmNzcyhhLCJkaXNwbGF5Iiksaz0ibm9uZSI9PT1qP24uX2RhdGEoYSwib2xkZGlzcGxheSIpfHxNYShhLm5vZGVOYW1lKTpqLCJpbmxpbmUiPT09ayYmIm5vbmUiPT09bi5jc3MoYSwiZmxvYXQiKSYmKGwuaW5saW5lQmxvY2tOZWVkc0xheW91dCYmImlubGluZSIhPT1NYShhLm5vZGVOYW1lKT9wLnpvb209MTpwLmRpc3BsYXk9ImlubGluZS1ibG9jayIpKSxjLm92ZXJmbG93JiYocC5vdmVyZmxvdz0iaGlkZGVuIixsLnNocmlua1dyYXBCbG9ja3MoKXx8bS5hbHdheXMoZnVuY3Rpb24oKXtwLm92ZXJmbG93PWMub3ZlcmZsb3dbMF0scC5vdmVyZmxvd1g9Yy5vdmVyZmxvd1sxXSxwLm92ZXJmbG93WT1jLm92ZXJmbG93WzJdfSkpO2ZvcihkIGluIGIpaWYoZT1iW2RdLGpiLmV4ZWMoZSkpe2lmKGRlbGV0ZSBiW2RdLGY9Znx8InRvZ2dsZSI9PT1lLGU9PT0ocT8iaGlkZSI6InNob3ciKSl7aWYoInNob3ciIT09ZXx8IXJ8fHZvaWQgMD09PXJbZF0pY29udGludWU7cT0hMH1vW2RdPXImJnJbZF18fG4uc3R5bGUoYSxkKX1lbHNlIGo9dm9pZCAwO2lmKG4uaXNFbXB0eU9iamVjdChvKSkiaW5saW5lIj09PSgibm9uZSI9PT1qP01hKGEubm9kZU5hbWUpOmopJiYocC5kaXNwbGF5PWopO2Vsc2V7cj8iaGlkZGVuImluIHImJihxPXIuaGlkZGVuKTpyPW4uX2RhdGEoYSwiZnhzaG93Iix7fSksZiYmKHIuaGlkZGVuPSFxKSxxP24oYSkuc2hvdygpOm0uZG9uZShmdW5jdGlvbigpe24oYSkuaGlkZSgpfSksbS5kb25lKGZ1bmN0aW9uKCl7dmFyIGI7bi5fcmVtb3ZlRGF0YShhLCJmeHNob3ciKTtmb3IoYiBpbiBvKW4uc3R5bGUoYSxiLG9bYl0pfSk7Zm9yKGQgaW4gbylnPW5iKHE/cltkXTowLGQsbSksZCBpbiByfHwocltkXT1nLnN0YXJ0LHEmJihnLmVuZD1nLnN0YXJ0LGcuc3RhcnQ9IndpZHRoIj09PWR8fCJoZWlnaHQiPT09ZD8xOjApKX19ZnVuY3Rpb24gcGIoYSxiKXt2YXIgYyxkLGUsZixnO2ZvcihjIGluIGEpaWYoZD1uLmNhbWVsQ2FzZShjKSxlPWJbZF0sZj1hW2NdLG4uaXNBcnJheShmKSYmKGU9ZlsxXSxmPWFbY109ZlswXSksYyE9PWQmJihhW2RdPWYsZGVsZXRlIGFbY10pLGc9bi5jc3NIb29rc1tkXSxnJiYiZXhwYW5kImluIGcpe2Y9Zy5leHBhbmQoZiksZGVsZXRlIGFbZF07Zm9yKGMgaW4gZiljIGluIGF8fChhW2NdPWZbY10sYltjXT1lKX1lbHNlIGJbZF09ZX1mdW5jdGlvbiBxYihhLGIsYyl7dmFyIGQsZSxmPTAsZz1xYi5wcmVmaWx0ZXJzLmxlbmd0aCxoPW4uRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgaS5lbGVtfSksaT1mdW5jdGlvbigpe2lmKGUpcmV0dXJuITE7Zm9yKHZhciBiPWhifHxsYigpLGM9TWF0aC5tYXgoMCxqLnN0YXJ0VGltZStqLmR1cmF0aW9uLWIpLGQ9Yy9qLmR1cmF0aW9ufHwwLGY9MS1kLGc9MCxpPWoudHdlZW5zLmxlbmd0aDtpPmc7ZysrKWoudHdlZW5zW2ddLnJ1bihmKTtyZXR1cm4gaC5ub3RpZnlXaXRoKGEsW2osZixjXSksMT5mJiZpP2M6KGgucmVzb2x2ZVdpdGgoYSxbal0pLCExKX0saj1oLnByb21pc2Uoe2VsZW06YSxwcm9wczpuLmV4dGVuZCh7fSxiKSxvcHRzOm4uZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9LGVhc2luZzpuLmVhc2luZy5fZGVmYXVsdH0sYyksb3JpZ2luYWxQcm9wZXJ0aWVzOmIsb3JpZ2luYWxPcHRpb25zOmMsc3RhcnRUaW1lOmhifHxsYigpLGR1cmF0aW9uOmMuZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9bi5Ud2VlbihhLGoub3B0cyxiLGMsai5vcHRzLnNwZWNpYWxFYXNpbmdbYl18fGoub3B0cy5lYXNpbmcpO3JldHVybiBqLnR3ZWVucy5wdXNoKGQpLGR9LHN0b3A6ZnVuY3Rpb24oYil7dmFyIGM9MCxkPWI/ai50d2VlbnMubGVuZ3RoOjA7aWYoZSlyZXR1cm4gdGhpcztmb3IoZT0hMDtkPmM7YysrKWoudHdlZW5zW2NdLnJ1bigxKTtyZXR1cm4gYj8oaC5ub3RpZnlXaXRoKGEsW2osMSwwXSksaC5yZXNvbHZlV2l0aChhLFtqLGJdKSk6aC5yZWplY3RXaXRoKGEsW2osYl0pLHRoaXN9fSksaz1qLnByb3BzO2ZvcihwYihrLGoub3B0cy5zcGVjaWFsRWFzaW5nKTtnPmY7ZisrKWlmKGQ9cWIucHJlZmlsdGVyc1tmXS5jYWxsKGosYSxrLGoub3B0cykpcmV0dXJuIG4uaXNGdW5jdGlvbihkLnN0b3ApJiYobi5fcXVldWVIb29rcyhqLmVsZW0sai5vcHRzLnF1ZXVlKS5zdG9wPW4ucHJveHkoZC5zdG9wLGQpKSxkO3JldHVybiBuLm1hcChrLG5iLGopLG4uaXNGdW5jdGlvbihqLm9wdHMuc3RhcnQpJiZqLm9wdHMuc3RhcnQuY2FsbChhLGopLG4uZngudGltZXIobi5leHRlbmQoaSx7ZWxlbTphLGFuaW06aixxdWV1ZTpqLm9wdHMucXVldWV9KSksai5wcm9ncmVzcyhqLm9wdHMucHJvZ3Jlc3MpLmRvbmUoai5vcHRzLmRvbmUsai5vcHRzLmNvbXBsZXRlKS5mYWlsKGoub3B0cy5mYWlsKS5hbHdheXMoai5vcHRzLmFsd2F5cyl9bi5BbmltYXRpb249bi5leHRlbmQocWIse3R3ZWVuZXJzOnsiKiI6W2Z1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jcmVhdGVUd2VlbihhLGIpO3JldHVybiBYKGMuZWxlbSxhLFUuZXhlYyhiKSxjKSxjfV19LHR3ZWVuZXI6ZnVuY3Rpb24oYSxiKXtuLmlzRnVuY3Rpb24oYSk/KGI9YSxhPVsiKiJdKTphPWEubWF0Y2goRyk7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZDtkKyspYz1hW2RdLHFiLnR3ZWVuZXJzW2NdPXFiLnR3ZWVuZXJzW2NdfHxbXSxxYi50d2VlbmVyc1tjXS51bnNoaWZ0KGIpfSxwcmVmaWx0ZXJzOltvYl0scHJlZmlsdGVyOmZ1bmN0aW9uKGEsYil7Yj9xYi5wcmVmaWx0ZXJzLnVuc2hpZnQoYSk6cWIucHJlZmlsdGVycy5wdXNoKGEpfX0pLG4uc3BlZWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEmJiJvYmplY3QiPT10eXBlb2YgYT9uLmV4dGVuZCh7fSxhKTp7Y29tcGxldGU6Y3x8IWMmJmJ8fG4uaXNGdW5jdGlvbihhKSYmYSxkdXJhdGlvbjphLGVhc2luZzpjJiZifHxiJiYhbi5pc0Z1bmN0aW9uKGIpJiZifTtyZXR1cm4gZC5kdXJhdGlvbj1uLmZ4Lm9mZj8wOiJudW1iZXIiPT10eXBlb2YgZC5kdXJhdGlvbj9kLmR1cmF0aW9uOmQuZHVyYXRpb24gaW4gbi5meC5zcGVlZHM/bi5meC5zcGVlZHNbZC5kdXJhdGlvbl06bi5meC5zcGVlZHMuX2RlZmF1bHQsbnVsbCE9ZC5xdWV1ZSYmZC5xdWV1ZSE9PSEwfHwoZC5xdWV1ZT0iZngiKSxkLm9sZD1kLmNvbXBsZXRlLGQuY29tcGxldGU9ZnVuY3Rpb24oKXtuLmlzRnVuY3Rpb24oZC5vbGQpJiZkLm9sZC5jYWxsKHRoaXMpLGQucXVldWUmJm4uZGVxdWV1ZSh0aGlzLGQucXVldWUpfSxkfSxuLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmZpbHRlcihXKS5jc3MoIm9wYWNpdHkiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OmJ9LGEsYyxkKX0sYW5pbWF0ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uLmlzRW1wdHlPYmplY3QoYSksZj1uLnNwZWVkKGIsYyxkKSxnPWZ1bmN0aW9uKCl7dmFyIGI9cWIodGhpcyxuLmV4dGVuZCh7fSxhKSxmKTsoZXx8bi5fZGF0YSh0aGlzLCJmaW5pc2giKSkmJmIuc3RvcCghMCl9O3JldHVybiBnLmZpbmlzaD1nLGV8fGYucXVldWU9PT0hMT90aGlzLmVhY2goZyk6dGhpcy5xdWV1ZShmLnF1ZXVlLGcpfSxzdG9wOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mdW5jdGlvbihhKXt2YXIgYj1hLnN0b3A7ZGVsZXRlIGEuc3RvcCxiKGMpfTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGEmJihjPWIsYj1hLGE9dm9pZCAwKSxiJiZhIT09ITEmJnRoaXMucXVldWUoYXx8ImZ4IixbXSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9ITAsZT1udWxsIT1hJiZhKyJxdWV1ZUhvb2tzIixmPW4udGltZXJzLGc9bi5fZGF0YSh0aGlzKTtpZihlKWdbZV0mJmdbZV0uc3RvcCYmZChnW2VdKTtlbHNlIGZvcihlIGluIGcpZ1tlXSYmZ1tlXS5zdG9wJiZrYi50ZXN0KGUpJiZkKGdbZV0pO2ZvcihlPWYubGVuZ3RoO2UtLTspZltlXS5lbGVtIT09dGhpc3x8bnVsbCE9YSYmZltlXS5xdWV1ZSE9PWF8fChmW2VdLmFuaW0uc3RvcChjKSxiPSExLGYuc3BsaWNlKGUsMSkpOyFiJiZjfHxuLmRlcXVldWUodGhpcyxhKX0pfSxmaW5pc2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT0hMSYmKGE9YXx8ImZ4IiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsYz1uLl9kYXRhKHRoaXMpLGQ9Y1thKyJxdWV1ZSJdLGU9Y1thKyJxdWV1ZUhvb2tzIl0sZj1uLnRpbWVycyxnPWQ/ZC5sZW5ndGg6MDtmb3IoYy5maW5pc2g9ITAsbi5xdWV1ZSh0aGlzLGEsW10pLGUmJmUuc3RvcCYmZS5zdG9wLmNhbGwodGhpcywhMCksYj1mLmxlbmd0aDtiLS07KWZbYl0uZWxlbT09PXRoaXMmJmZbYl0ucXVldWU9PT1hJiYoZltiXS5hbmltLnN0b3AoITApLGYuc3BsaWNlKGIsMSkpO2ZvcihiPTA7Zz5iO2IrKylkW2JdJiZkW2JdLmZpbmlzaCYmZFtiXS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgYy5maW5pc2h9KX19KSxuLmVhY2goWyJ0b2dnbGUiLCJzaG93IiwiaGlkZSJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9bi5mbltiXTtuLmZuW2JdPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gbnVsbD09YXx8ImJvb2xlYW4iPT10eXBlb2YgYT9jLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUobWIoYiwhMCksYSxkLGUpfX0pLG4uZWFjaCh7c2xpZGVEb3duOm1iKCJzaG93Iiksc2xpZGVVcDptYigiaGlkZSIpLHNsaWRlVG9nZ2xlOm1iKCJ0b2dnbGUiKSxmYWRlSW46e29wYWNpdHk6InNob3cifSxmYWRlT3V0OntvcGFjaXR5OiJoaWRlIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eToidG9nZ2xlIn19LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhLGMsZCl7cmV0dXJuIHRoaXMuYW5pbWF0ZShiLGEsYyxkKX19KSxuLnRpbWVycz1bXSxuLmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgYSxiPW4udGltZXJzLGM9MDtmb3IoaGI9bi5ub3coKTtjPGIubGVuZ3RoO2MrKylhPWJbY10sYSgpfHxiW2NdIT09YXx8Yi5zcGxpY2UoYy0tLDEpO2IubGVuZ3RofHxuLmZ4LnN0b3AoKSxoYj12b2lkIDB9LG4uZngudGltZXI9ZnVuY3Rpb24oYSl7bi50aW1lcnMucHVzaChhKSxhKCk/bi5meC5zdGFydCgpOm4udGltZXJzLnBvcCgpfSxuLmZ4LmludGVydmFsPTEzLG4uZnguc3RhcnQ9ZnVuY3Rpb24oKXtpYnx8KGliPWEuc2V0SW50ZXJ2YWwobi5meC50aWNrLG4uZnguaW50ZXJ2YWwpKX0sbi5meC5zdG9wPWZ1bmN0aW9uKCl7YS5jbGVhckludGVydmFsKGliKSxpYj1udWxsfSxuLmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSxuLmZuLmRlbGF5PWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGI9bi5meD9uLmZ4LnNwZWVkc1tiXXx8YjpiLGM9Y3x8ImZ4Iix0aGlzLnF1ZXVlKGMsZnVuY3Rpb24oYyxkKXt2YXIgZT1hLnNldFRpbWVvdXQoYyxiKTtkLnN0b3A9ZnVuY3Rpb24oKXthLmNsZWFyVGltZW91dChlKX19KX0sZnVuY3Rpb24oKXt2YXIgYSxiPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxjPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksZT1kLmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLGY9ZS5hcHBlbmRDaGlsZChkLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTtjPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksYy5zZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIsInQiKSxjLmlubmVySFRNTD0iICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+IixhPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKVswXSxiLnNldEF0dHJpYnV0ZSgidHlwZSIsImNoZWNrYm94IiksYy5hcHBlbmRDaGlsZChiKSxhPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKVswXSxhLnN0eWxlLmNzc1RleHQ9InRvcDoxcHgiLGwuZ2V0U2V0QXR0cmlidXRlPSJ0IiE9PWMuY2xhc3NOYW1lLGwuc3R5bGU9L3RvcC8udGVzdChhLmdldEF0dHJpYnV0ZSgic3R5bGUiKSksbC5ocmVmTm9ybWFsaXplZD0iL2EiPT09YS5nZXRBdHRyaWJ1dGUoImhyZWYiKSxsLmNoZWNrT249ISFiLnZhbHVlLGwub3B0U2VsZWN0ZWQ9Zi5zZWxlY3RlZCxsLmVuY3R5cGU9ISFkLmNyZWF0ZUVsZW1lbnQoImZvcm0iKS5lbmN0eXBlLGUuZGlzYWJsZWQ9ITAsbC5vcHREaXNhYmxlZD0hZi5kaXNhYmxlZCxiPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxiLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKSxsLmlucHV0PSIiPT09Yi5nZXRBdHRyaWJ1dGUoInZhbHVlIiksYi52YWx1ZT0idCIsYi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJyYWRpbyIpLGwucmFkaW9WYWx1ZT0idCI9PT1iLnZhbHVlfSgpO3ZhciByYj0vXHIvZyxzYj0vW1x4MjBcdFxyXG5cZl0rL2c7bi5mbi5leHRlbmQoe3ZhbDpmdW5jdGlvbihhKXt2YXIgYixjLGQsZT10aGlzWzBdO3tpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiBkPW4uaXNGdW5jdGlvbihhKSx0aGlzLmVhY2goZnVuY3Rpb24oYyl7dmFyIGU7MT09PXRoaXMubm9kZVR5cGUmJihlPWQ/YS5jYWxsKHRoaXMsYyxuKHRoaXMpLnZhbCgpKTphLG51bGw9PWU/ZT0iIjoibnVtYmVyIj09dHlwZW9mIGU/ZSs9IiI6bi5pc0FycmF5KGUpJiYoZT1uLm1hcChlLGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hPyIiOmErIiJ9KSksYj1uLnZhbEhvb2tzW3RoaXMudHlwZV18fG4udmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiYic2V0ImluIGImJnZvaWQgMCE9PWIuc2V0KHRoaXMsZSwidmFsdWUiKXx8KHRoaXMudmFsdWU9ZSkpfSk7aWYoZSlyZXR1cm4gYj1uLnZhbEhvb2tzW2UudHlwZV18fG4udmFsSG9va3NbZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiYiZ2V0ImluIGImJnZvaWQgMCE9PShjPWIuZ2V0KGUsInZhbHVlIikpP2M6KGM9ZS52YWx1ZSwic3RyaW5nIj09dHlwZW9mIGM/Yy5yZXBsYWNlKHJiLCIiKTpudWxsPT1jPyIiOmMpfX19KSxuLmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPW4uZmluZC5hdHRyKGEsInZhbHVlIik7cmV0dXJuIG51bGwhPWI/YjpuLnRyaW0obi50ZXh0KGEpKS5yZXBsYWNlKHNiLCIgIil9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYyxkPWEub3B0aW9ucyxlPWEuc2VsZWN0ZWRJbmRleCxmPSJzZWxlY3Qtb25lIj09PWEudHlwZXx8MD5lLGc9Zj9udWxsOltdLGg9Zj9lKzE6ZC5sZW5ndGgsaT0wPmU/aDpmP2U6MDtoPmk7aSsrKWlmKGM9ZFtpXSwoYy5zZWxlY3RlZHx8aT09PWUpJiYobC5vcHREaXNhYmxlZD8hYy5kaXNhYmxlZDpudWxsPT09Yy5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIikpJiYoIWMucGFyZW50Tm9kZS5kaXNhYmxlZHx8IW4ubm9kZU5hbWUoYy5wYXJlbnROb2RlLCJvcHRncm91cCIpKSl7aWYoYj1uKGMpLnZhbCgpLGYpcmV0dXJuIGI7Zy5wdXNoKGIpfXJldHVybiBnfSxzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9YS5vcHRpb25zLGY9bi5tYWtlQXJyYXkoYiksZz1lLmxlbmd0aDt3aGlsZShnLS0paWYoZD1lW2ddLG4uaW5BcnJheShuLnZhbEhvb2tzLm9wdGlvbi5nZXQoZCksZik+LTEpdHJ5e2Quc2VsZWN0ZWQ9Yz0hMH1jYXRjaChoKXtkLnNjcm9sbEhlaWdodH1lbHNlIGQuc2VsZWN0ZWQ9ITE7cmV0dXJuIGN8fChhLnNlbGVjdGVkSW5kZXg9LTEpLGV9fX19KSxuLmVhY2goWyJyYWRpbyIsImNoZWNrYm94Il0sZnVuY3Rpb24oKXtuLnZhbEhvb2tzW3RoaXNdPXtzZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5pc0FycmF5KGIpP2EuY2hlY2tlZD1uLmluQXJyYXkobihhKS52YWwoKSxiKT4tMTp2b2lkIDB9fSxsLmNoZWNrT258fChuLnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09PWEuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpPyJvbiI6YS52YWx1ZX0pfSk7dmFyIHRiLHViLHZiPW4uZXhwci5hdHRySGFuZGxlLHdiPS9eKD86Y2hlY2tlZHxzZWxlY3RlZCkkL2kseGI9bC5nZXRTZXRBdHRyaWJ1dGUseWI9bC5pbnB1dDtuLmZuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIpe3JldHVybiBZKHRoaXMsbi5hdHRyLGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLnJlbW92ZUF0dHIodGhpcyxhKX0pfX0pLG4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9YS5ub2RlVHlwZTtpZigzIT09ZiYmOCE9PWYmJjIhPT1mKXJldHVybiJ1bmRlZmluZWQiPT10eXBlb2YgYS5nZXRBdHRyaWJ1dGU/bi5wcm9wKGEsYixjKTooMT09PWYmJm4uaXNYTUxEb2MoYSl8fChiPWIudG9Mb3dlckNhc2UoKSxlPW4uYXR0ckhvb2tzW2JdfHwobi5leHByLm1hdGNoLmJvb2wudGVzdChiKT91Yjp0YikpLHZvaWQgMCE9PWM/bnVsbD09PWM/dm9pZCBuLnJlbW92ZUF0dHIoYSxiKTplJiYic2V0ImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDooYS5zZXRBdHRyaWJ1dGUoYixjKyIiKSxjKTplJiYiZ2V0ImluIGUmJm51bGwhPT0oZD1lLmdldChhLGIpKT9kOihkPW4uZmluZC5hdHRyKGEsYiksbnVsbD09ZD92b2lkIDA6ZCkpfSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihhLGIpe2lmKCFsLnJhZGlvVmFsdWUmJiJyYWRpbyI9PT1iJiZuLm5vZGVOYW1lKGEsImlucHV0Iikpe3ZhciBjPWEudmFsdWU7cmV0dXJuIGEuc2V0QXR0cmlidXRlKCJ0eXBlIixiKSxjJiYoYS52YWx1ZT1jKSxifX19fSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPTAsZj1iJiZiLm1hdGNoKEcpO2lmKGYmJjE9PT1hLm5vZGVUeXBlKXdoaWxlKGM9ZltlKytdKWQ9bi5wcm9wRml4W2NdfHxjLG4uZXhwci5tYXRjaC5ib29sLnRlc3QoYyk/eWImJnhifHwhd2IudGVzdChjKT9hW2RdPSExOmFbbi5jYW1lbENhc2UoImRlZmF1bHQtIitjKV09YVtkXT0hMTpuLmF0dHIoYSxjLCIiKSxhLnJlbW92ZUF0dHJpYnV0ZSh4Yj9jOmQpfX0pLHViPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiPT09ITE/bi5yZW1vdmVBdHRyKGEsYyk6eWImJnhifHwhd2IudGVzdChjKT9hLnNldEF0dHJpYnV0ZSgheGImJm4ucHJvcEZpeFtjXXx8YyxjKTphW24uY2FtZWxDYXNlKCJkZWZhdWx0LSIrYyldPWFbY109ITAsY319LG4uZWFjaChuLmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1x3Ky9nKSxmdW5jdGlvbihhLGIpe3ZhciBjPXZiW2JdfHxuLmZpbmQuYXR0cjt5YiYmeGJ8fCF3Yi50ZXN0KGIpP3ZiW2JdPWZ1bmN0aW9uKGEsYixkKXt2YXIgZSxmO3JldHVybiBkfHwoZj12YltiXSx2YltiXT1lLGU9bnVsbCE9YyhhLGIsZCk/Yi50b0xvd2VyQ2FzZSgpOm51bGwsdmJbYl09ZiksZX06dmJbYl09ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjP3ZvaWQgMDphW24uY2FtZWxDYXNlKCJkZWZhdWx0LSIrYildP2IudG9Mb3dlckNhc2UoKTpudWxsfX0pLHliJiZ4Ynx8KG4uYXR0ckhvb2tzLnZhbHVlPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLm5vZGVOYW1lKGEsImlucHV0Iik/dm9pZChhLmRlZmF1bHRWYWx1ZT1iKTp0YiYmdGIuc2V0KGEsYixjKX19KSx4Ynx8KHRiPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEuZ2V0QXR0cmlidXRlTm9kZShjKTtyZXR1cm4gZHx8YS5zZXRBdHRyaWJ1dGVOb2RlKGQ9YS5vd25lckRvY3VtZW50LmNyZWF0ZUF0dHJpYnV0ZShjKSksZC52YWx1ZT1iKz0iIiwidmFsdWUiPT09Y3x8Yj09PWEuZ2V0QXR0cmlidXRlKGMpP2I6dm9pZCAwfX0sdmIuaWQ9dmIubmFtZT12Yi5jb29yZHM9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBjP3ZvaWQgMDooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiYiIiE9PWQudmFsdWU/ZC52YWx1ZTpudWxsfSxuLnZhbEhvb2tzLmJ1dHRvbj17Z2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpO3JldHVybiBjJiZjLnNwZWNpZmllZD9jLnZhbHVlOnZvaWQgMH0sc2V0OnRiLnNldH0sbi5hdHRySG9va3MuY29udGVudGVkaXRhYmxlPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3RiLnNldChhLCIiPT09Yj8hMTpiLGMpfX0sbi5lYWNoKFsid2lkdGgiLCJoZWlnaHQiXSxmdW5jdGlvbihhLGIpe24uYXR0ckhvb2tzW2JdPXtzZXQ6ZnVuY3Rpb24oYSxjKXtyZXR1cm4iIj09PWM/KGEuc2V0QXR0cmlidXRlKGIsImF1dG8iKSxjKTp2b2lkIDB9fX0pKSxsLnN0eWxlfHwobi5hdHRySG9va3Muc3R5bGU9e2dldDpmdW5jdGlvbihhKXtyZXR1cm4gYS5zdHlsZS5jc3NUZXh0fHx2b2lkIDB9LHNldDpmdW5jdGlvbihhLGIpe3JldHVybiBhLnN0eWxlLmNzc1RleHQ9YisiIn19KTt2YXIgemI9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdCkkL2ksQWI9L14oPzphfGFyZWEpJC9pO24uZm4uZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFkodGhpcyxuLnByb3AsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9bi5wcm9wRml4W2FdfHxhLHRoaXMuZWFjaChmdW5jdGlvbigpe3RyeXt0aGlzW2FdPXZvaWQgMCxkZWxldGUgdGhpc1thXX1jYXRjaChiKXt9fSl9fSksbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj1hLm5vZGVUeXBlO2lmKDMhPT1mJiY4IT09ZiYmMiE9PWYpcmV0dXJuIDE9PT1mJiZuLmlzWE1MRG9jKGEpfHwoYj1uLnByb3BGaXhbYl18fGIsZT1uLnByb3BIb29rc1tiXSksdm9pZCAwIT09Yz9lJiYic2V0ImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDphW2JdPWM6ZSYmImdldCJpbiBlJiZudWxsIT09KGQ9ZS5nZXQoYSxiKSk/ZDphW2JdfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9bi5maW5kLmF0dHIoYSwidGFiaW5kZXgiKTtyZXR1cm4gYj9wYXJzZUludChiLDEwKTp6Yi50ZXN0KGEubm9kZU5hbWUpfHxBYi50ZXN0KGEubm9kZU5hbWUpJiZhLmhyZWY/MDotMX19fSxwcm9wRml4OnsiZm9yIjoiaHRtbEZvciIsImNsYXNzIjoiY2xhc3NOYW1lIn19KSxsLmhyZWZOb3JtYWxpemVkfHxuLmVhY2goWyJocmVmIiwic3JjIl0sZnVuY3Rpb24oYSxiKXtuLnByb3BIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZShiLDQpfX19KSxsLm9wdFNlbGVjdGVkfHwobi5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJihiLnNlbGVjdGVkSW5kZXgsYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCksbnVsbH0sc2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtiJiYoYi5zZWxlY3RlZEluZGV4LGIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgpfX0pLG4uZWFjaChbInRhYkluZGV4IiwicmVhZE9ubHkiLCJtYXhMZW5ndGgiLCJjZWxsU3BhY2luZyIsImNlbGxQYWRkaW5nIiwicm93U3BhbiIsImNvbFNwYW4iLCJ1c2VNYXAiLCJmcmFtZUJvcmRlciIsImNvbnRlbnRFZGl0YWJsZSJdLGZ1bmN0aW9uKCl7bi5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pLGwuZW5jdHlwZXx8KG4ucHJvcEZpeC5lbmN0eXBlPSJlbmNvZGluZyIpO3ZhciBCYj0vW1x0XHJcblxmXS9nO2Z1bmN0aW9uIENiKGEpe3JldHVybiBuLmF0dHIoYSwiY2xhc3MiKXx8IiJ9bi5mbi5leHRlbmQoe2FkZENsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGk9MDtpZihuLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLmFkZENsYXNzKGEuY2FsbCh0aGlzLGIsQ2IodGhpcykpKX0pO2lmKCJzdHJpbmciPT10eXBlb2YgYSYmYSl7Yj1hLm1hdGNoKEcpfHxbXTt3aGlsZShjPXRoaXNbaSsrXSlpZihlPUNiKGMpLGQ9MT09PWMubm9kZVR5cGUmJigiICIrZSsiICIpLnJlcGxhY2UoQmIsIiAiKSl7Zz0wO3doaWxlKGY9YltnKytdKWQuaW5kZXhPZigiICIrZisiICIpPDAmJihkKz1mKyIgIik7aD1uLnRyaW0oZCksZSE9PWgmJm4uYXR0cihjLCJjbGFzcyIsaCl9fXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpPTA7aWYobi5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bih0aGlzKS5yZW1vdmVDbGFzcyhhLmNhbGwodGhpcyxiLENiKHRoaXMpKSl9KTtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5hdHRyKCJjbGFzcyIsIiIpO2lmKCJzdHJpbmciPT10eXBlb2YgYSYmYSl7Yj1hLm1hdGNoKEcpfHxbXTt3aGlsZShjPXRoaXNbaSsrXSlpZihlPUNiKGMpLGQ9MT09PWMubm9kZVR5cGUmJigiICIrZSsiICIpLnJlcGxhY2UoQmIsIiAiKSl7Zz0wO3doaWxlKGY9YltnKytdKXdoaWxlKGQuaW5kZXhPZigiICIrZisiICIpPi0xKWQ9ZC5yZXBsYWNlKCIgIitmKyIgIiwiICIpO2g9bi50cmltKGQpLGUhPT1oJiZuLmF0dHIoYywiY2xhc3MiLGgpfX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz10eXBlb2YgYTtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBiJiYic3RyaW5nIj09PWM/Yj90aGlzLmFkZENsYXNzKGEpOnRoaXMucmVtb3ZlQ2xhc3MoYSk6bi5pc0Z1bmN0aW9uKGEpP3RoaXMuZWFjaChmdW5jdGlvbihjKXtuKHRoaXMpLnRvZ2dsZUNsYXNzKGEuY2FsbCh0aGlzLGMsQ2IodGhpcyksYiksYil9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYixkLGUsZjtpZigic3RyaW5nIj09PWMpe2Q9MCxlPW4odGhpcyksZj1hLm1hdGNoKEcpfHxbXTt3aGlsZShiPWZbZCsrXSllLmhhc0NsYXNzKGIpP2UucmVtb3ZlQ2xhc3MoYik6ZS5hZGRDbGFzcyhiKX1lbHNlIHZvaWQgMCE9PWEmJiJib29sZWFuIiE9PWN8fChiPUNiKHRoaXMpLGImJm4uX2RhdGEodGhpcywiX19jbGFzc05hbWVfXyIsYiksbi5hdHRyKHRoaXMsImNsYXNzIixifHxhPT09ITE/IiI6bi5fZGF0YSh0aGlzLCJfX2NsYXNzTmFtZV9fIil8fCIiKSl9KX0saGFzQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPTA7Yj0iICIrYSsiICI7d2hpbGUoYz10aGlzW2QrK10paWYoMT09PWMubm9kZVR5cGUmJigiICIrQ2IoYykrIiAiKS5yZXBsYWNlKEJiLCIgIikuaW5kZXhPZihiKT4tMSlyZXR1cm4hMDtyZXR1cm4hMX19KSxuLmVhY2goImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIGNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IgY29udGV4dG1lbnUiLnNwbGl0KCIgIiksZnVuY3Rpb24oYSxiKXtuLmZuW2JdPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MD90aGlzLm9uKGIsbnVsbCxhLGMpOnRoaXMudHJpZ2dlcihiKX19KSxuLmZuLmV4dGVuZCh7aG92ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5tb3VzZWVudGVyKGEpLm1vdXNlbGVhdmUoYnx8YSl9fSk7dmFyIERiPWEubG9jYXRpb24sRWI9bi5ub3coKSxGYj0vXD8vLEdiPS8oLCl8KFxbfHspfCh9fF0pfCIoPzpbXiJcXFxyXG5dfFxcWyJcXFwvYmZucnRdfFxcdVtcZGEtZkEtRl17NH0pKiJccyo6P3x0cnVlfGZhbHNlfG51bGx8LT8oPyEwXGQpXGQrKD86XC5cZCt8KSg/OltlRV1bKy1dP1xkK3wpL2c7bi5wYXJzZUpTT049ZnVuY3Rpb24oYil7aWYoYS5KU09OJiZhLkpTT04ucGFyc2UpcmV0dXJuIGEuSlNPTi5wYXJzZShiKyIiKTt2YXIgYyxkPW51bGwsZT1uLnRyaW0oYisiIik7cmV0dXJuIGUmJiFuLnRyaW0oZS5yZXBsYWNlKEdiLGZ1bmN0aW9uKGEsYixlLGYpe3JldHVybiBjJiZiJiYoZD0wKSwwPT09ZD9hOihjPWV8fGIsZCs9IWYtIWUsIiIpfSkpP0Z1bmN0aW9uKCJyZXR1cm4gIitlKSgpOm4uZXJyb3IoIkludmFsaWQgSlNPTjogIitiKX0sbi5wYXJzZVhNTD1mdW5jdGlvbihiKXt2YXIgYyxkO2lmKCFifHwic3RyaW5nIiE9dHlwZW9mIGIpcmV0dXJuIG51bGw7dHJ5e2EuRE9NUGFyc2VyPyhkPW5ldyBhLkRPTVBhcnNlcixjPWQucGFyc2VGcm9tU3RyaW5nKGIsInRleHQveG1sIikpOihjPW5ldyBhLkFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxET00iKSxjLmFzeW5jPSJmYWxzZSIsYy5sb2FkWE1MKGIpKX1jYXRjaChlKXtjPXZvaWQgMH1yZXR1cm4gYyYmYy5kb2N1bWVudEVsZW1lbnQmJiFjLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXJzZXJlcnJvciIpLmxlbmd0aHx8bi5lcnJvcigiSW52YWxpZCBYTUw6ICIrYiksY307dmFyIEhiPS8jLiokLyxJYj0vKFs/Jl0pXz1bXiZdKi8sSmI9L14oLio/KTpbIFx0XSooW15cclxuXSopXHI/JC9nbSxLYj0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxMYj0vXig/OkdFVHxIRUFEKSQvLE1iPS9eXC9cLy8sTmI9L14oW1x3ListXSs6KSg/OlwvXC8oPzpbXlwvPyNdKkB8KShbXlwvPyM6XSopKD86OihcZCspfCl8KS8sT2I9e30sUGI9e30sUWI9IiovIi5jb25jYXQoIioiKSxSYj1EYi5ocmVmLFNiPU5iLmV4ZWMoUmIudG9Mb3dlckNhc2UoKSl8fFtdO2Z1bmN0aW9uIFRiKGEpe3JldHVybiBmdW5jdGlvbihiLGMpeyJzdHJpbmciIT10eXBlb2YgYiYmKGM9YixiPSIqIik7dmFyIGQsZT0wLGY9Yi50b0xvd2VyQ2FzZSgpLm1hdGNoKEcpfHxbXTtpZihuLmlzRnVuY3Rpb24oYykpd2hpbGUoZD1mW2UrK10pIisiPT09ZC5jaGFyQXQoMCk/KGQ9ZC5zbGljZSgxKXx8IioiLChhW2RdPWFbZF18fFtdKS51bnNoaWZ0KGMpKTooYVtkXT1hW2RdfHxbXSkucHVzaChjKX19ZnVuY3Rpb24gVWIoYSxiLGMsZCl7dmFyIGU9e30sZj1hPT09UGI7ZnVuY3Rpb24gZyhoKXt2YXIgaTtyZXR1cm4gZVtoXT0hMCxuLmVhY2goYVtoXXx8W10sZnVuY3Rpb24oYSxoKXt2YXIgaj1oKGIsYyxkKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGp8fGZ8fGVbal0/Zj8hKGk9aik6dm9pZCAwOihiLmRhdGFUeXBlcy51bnNoaWZ0KGopLGcoaiksITEpfSksaX1yZXR1cm4gZyhiLmRhdGFUeXBlc1swXSl8fCFlWyIqIl0mJmcoIioiKX1mdW5jdGlvbiBWYihhLGIpe3ZhciBjLGQsZT1uLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKGQgaW4gYil2b2lkIDAhPT1iW2RdJiYoKGVbZF0/YTpjfHwoYz17fSkpW2RdPWJbZF0pO3JldHVybiBjJiZuLmV4dGVuZCghMCxhLGMpLGF9ZnVuY3Rpb24gV2IoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jb250ZW50cyxpPWEuZGF0YVR5cGVzO3doaWxlKCIqIj09PWlbMF0paS5zaGlmdCgpLHZvaWQgMD09PWUmJihlPWEubWltZVR5cGV8fGIuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpKTtpZihlKWZvcihnIGluIGgpaWYoaFtnXSYmaFtnXS50ZXN0KGUpKXtpLnVuc2hpZnQoZyk7YnJlYWt9aWYoaVswXWluIGMpZj1pWzBdO2Vsc2V7Zm9yKGcgaW4gYyl7aWYoIWlbMF18fGEuY29udmVydGVyc1tnKyIgIitpWzBdXSl7Zj1nO2JyZWFrfWR8fChkPWcpfWY9Znx8ZH1yZXR1cm4gZj8oZiE9PWlbMF0mJmkudW5zaGlmdChmKSxjW2ZdKTp2b2lkIDB9ZnVuY3Rpb24gWGIoYSxiLGMsZCl7dmFyIGUsZixnLGgsaSxqPXt9LGs9YS5kYXRhVHlwZXMuc2xpY2UoKTtpZihrWzFdKWZvcihnIGluIGEuY29udmVydGVycylqW2cudG9Mb3dlckNhc2UoKV09YS5jb252ZXJ0ZXJzW2ddO2Y9ay5zaGlmdCgpO3doaWxlKGYpaWYoYS5yZXNwb25zZUZpZWxkc1tmXSYmKGNbYS5yZXNwb25zZUZpZWxkc1tmXV09YiksIWkmJmQmJmEuZGF0YUZpbHRlciYmKGI9YS5kYXRhRmlsdGVyKGIsYS5kYXRhVHlwZSkpLGk9ZixmPWsuc2hpZnQoKSlpZigiKiI9PT1mKWY9aTtlbHNlIGlmKCIqIiE9PWkmJmkhPT1mKXtpZihnPWpbaSsiICIrZl18fGpbIiogIitmXSwhZylmb3IoZSBpbiBqKWlmKGg9ZS5zcGxpdCgiICIpLGhbMV09PT1mJiYoZz1qW2krIiAiK2hbMF1dfHxqWyIqICIraFswXV0pKXtnPT09ITA/Zz1qW2VdOmpbZV0hPT0hMCYmKGY9aFswXSxrLnVuc2hpZnQoaFsxXSkpO2JyZWFrfWlmKGchPT0hMClpZihnJiZhWyJ0aHJvd3MiXSliPWcoYik7ZWxzZSB0cnl7Yj1nKGIpfWNhdGNoKGwpe3JldHVybntzdGF0ZToicGFyc2VyZXJyb3IiLGVycm9yOmc/bDoiTm8gY29udmVyc2lvbiBmcm9tICIraSsiIHRvICIrZn19fXJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTpifX1uLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6UmIsdHlwZToiR0VUIixpc0xvY2FsOktiLnRlc3QoU2JbMV0pLGdsb2JhbDohMCxwcm9jZXNzRGF0YTohMCxhc3luYzohMCxjb250ZW50VHlwZToiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IixhY2NlcHRzOnsiKiI6UWIsdGV4dDoidGV4dC9wbGFpbiIsaHRtbDoidGV4dC9odG1sIix4bWw6ImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwiLGpzb246ImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCJ9LGNvbnRlbnRzOnt4bWw6L1xieG1sXGIvLGh0bWw6L1xiaHRtbC8sanNvbjovXGJqc29uXGIvfSxyZXNwb25zZUZpZWxkczp7eG1sOiJyZXNwb25zZVhNTCIsdGV4dDoicmVzcG9uc2VUZXh0Iixqc29uOiJyZXNwb25zZUpTT04ifSxjb252ZXJ0ZXJzOnsiKiB0ZXh0IjpTdHJpbmcsInRleHQgaHRtbCI6ITAsInRleHQganNvbiI6bi5wYXJzZUpTT04sInRleHQgeG1sIjpuLnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj9WYihWYihhLG4uYWpheFNldHRpbmdzKSxiKTpWYihuLmFqYXhTZXR0aW5ncyxhKX0sYWpheFByZWZpbHRlcjpUYihPYiksYWpheFRyYW5zcG9ydDpUYihQYiksYWpheDpmdW5jdGlvbihiLGMpeyJvYmplY3QiPT10eXBlb2YgYiYmKGM9YixiPXZvaWQgMCksYz1jfHx7fTt2YXIgZCxlLGYsZyxoLGksaixrLGw9bi5hamF4U2V0dXAoe30sYyksbT1sLmNvbnRleHR8fGwsbz1sLmNvbnRleHQmJihtLm5vZGVUeXBlfHxtLmpxdWVyeSk/bihtKTpuLmV2ZW50LHA9bi5EZWZlcnJlZCgpLHE9bi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5Iikscj1sLnN0YXR1c0NvZGV8fHt9LHM9e30sdD17fSx1PTAsdj0iY2FuY2VsZWQiLHc9e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihhKXt2YXIgYjtpZigyPT09dSl7aWYoIWspe2s9e307d2hpbGUoYj1KYi5leGVjKGcpKWtbYlsxXS50b0xvd2VyQ2FzZSgpXT1iWzJdfWI9a1thLnRvTG93ZXJDYXNlKCldfXJldHVybiBudWxsPT1iP251bGw6Yn0sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIDI9PT11P2c6bnVsbH0sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihhLGIpe3ZhciBjPWEudG9Mb3dlckNhc2UoKTtyZXR1cm4gdXx8KGE9dFtjXT10W2NdfHxhLHNbYV09YiksdGhpc30sb3ZlcnJpZGVNaW1lVHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gdXx8KGwubWltZVR5cGU9YSksdGhpc30sc3RhdHVzQ29kZTpmdW5jdGlvbihhKXt2YXIgYjtpZihhKWlmKDI+dSlmb3IoYiBpbiBhKXJbYl09W3JbYl0sYVtiXV07ZWxzZSB3LmFsd2F5cyhhW3cuc3RhdHVzXSk7cmV0dXJuIHRoaXN9LGFib3J0OmZ1bmN0aW9uKGEpe3ZhciBiPWF8fHY7cmV0dXJuIGomJmouYWJvcnQoYikseSgwLGIpLHRoaXN9fTtpZihwLnByb21pc2UodykuY29tcGxldGU9cS5hZGQsdy5zdWNjZXNzPXcuZG9uZSx3LmVycm9yPXcuZmFpbCxsLnVybD0oKGJ8fGwudXJsfHxSYikrIiIpLnJlcGxhY2UoSGIsIiIpLnJlcGxhY2UoTWIsU2JbMV0rIi8vIiksbC50eXBlPWMubWV0aG9kfHxjLnR5cGV8fGwubWV0aG9kfHxsLnR5cGUsbC5kYXRhVHlwZXM9bi50cmltKGwuZGF0YVR5cGV8fCIqIikudG9Mb3dlckNhc2UoKS5tYXRjaChHKXx8WyIiXSxudWxsPT1sLmNyb3NzRG9tYWluJiYoZD1OYi5leGVjKGwudXJsLnRvTG93ZXJDYXNlKCkpLGwuY3Jvc3NEb21haW49ISghZHx8ZFsxXT09PVNiWzFdJiZkWzJdPT09U2JbMl0mJihkWzNdfHwoImh0dHA6Ij09PWRbMV0/IjgwIjoiNDQzIikpPT09KFNiWzNdfHwoImh0dHA6Ij09PVNiWzFdPyI4MCI6IjQ0MyIpKSkpLGwuZGF0YSYmbC5wcm9jZXNzRGF0YSYmInN0cmluZyIhPXR5cGVvZiBsLmRhdGEmJihsLmRhdGE9bi5wYXJhbShsLmRhdGEsbC50cmFkaXRpb25hbCkpLFViKE9iLGwsYyx3KSwyPT09dSlyZXR1cm4gdztpPW4uZXZlbnQmJmwuZ2xvYmFsLGkmJjA9PT1uLmFjdGl2ZSsrJiZuLmV2ZW50LnRyaWdnZXIoImFqYXhTdGFydCIpLGwudHlwZT1sLnR5cGUudG9VcHBlckNhc2UoKSxsLmhhc0NvbnRlbnQ9IUxiLnRlc3QobC50eXBlKSxmPWwudXJsLGwuaGFzQ29udGVudHx8KGwuZGF0YSYmKGY9bC51cmwrPShGYi50ZXN0KGYpPyImIjoiPyIpK2wuZGF0YSxkZWxldGUgbC5kYXRhKSxsLmNhY2hlPT09ITEmJihsLnVybD1JYi50ZXN0KGYpP2YucmVwbGFjZShJYiwiJDFfPSIrRWIrKyk6ZisoRmIudGVzdChmKT8iJiI6Ij8iKSsiXz0iK0ViKyspKSxsLmlmTW9kaWZpZWQmJihuLmxhc3RNb2RpZmllZFtmXSYmdy5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Nb2RpZmllZC1TaW5jZSIsbi5sYXN0TW9kaWZpZWRbZl0pLG4uZXRhZ1tmXSYmdy5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Ob25lLU1hdGNoIixuLmV0YWdbZl0pKSwobC5kYXRhJiZsLmhhc0NvbnRlbnQmJmwuY29udGVudFR5cGUhPT0hMXx8Yy5jb250ZW50VHlwZSkmJncuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIixsLmNvbnRlbnRUeXBlKSx3LnNldFJlcXVlc3RIZWFkZXIoIkFjY2VwdCIsbC5kYXRhVHlwZXNbMF0mJmwuYWNjZXB0c1tsLmRhdGFUeXBlc1swXV0/bC5hY2NlcHRzW2wuZGF0YVR5cGVzWzBdXSsoIioiIT09bC5kYXRhVHlwZXNbMF0/IiwgIitRYisiOyBxPTAuMDEiOiIiKTpsLmFjY2VwdHNbIioiXSk7Zm9yKGUgaW4gbC5oZWFkZXJzKXcuc2V0UmVxdWVzdEhlYWRlcihlLGwuaGVhZGVyc1tlXSk7aWYobC5iZWZvcmVTZW5kJiYobC5iZWZvcmVTZW5kLmNhbGwobSx3LGwpPT09ITF8fDI9PT11KSlyZXR1cm4gdy5hYm9ydCgpO3Y9ImFib3J0Ijtmb3IoZSBpbntzdWNjZXNzOjEsZXJyb3I6MSxjb21wbGV0ZToxfSl3W2VdKGxbZV0pO2lmKGo9VWIoUGIsbCxjLHcpKXtpZih3LnJlYWR5U3RhdGU9MSxpJiZvLnRyaWdnZXIoImFqYXhTZW5kIixbdyxsXSksMj09PXUpcmV0dXJuIHc7bC5hc3luYyYmbC50aW1lb3V0PjAmJihoPWEuc2V0VGltZW91dChmdW5jdGlvbigpe3cuYWJvcnQoInRpbWVvdXQiKX0sbC50aW1lb3V0KSk7dHJ5e3U9MSxqLnNlbmQocyx5KX1jYXRjaCh4KXtpZighKDI+dSkpdGhyb3cgeDt5KC0xLHgpfX1lbHNlIHkoLTEsIk5vIFRyYW5zcG9ydCIpO2Z1bmN0aW9uIHkoYixjLGQsZSl7dmFyIGsscyx0LHYseCx5PWM7MiE9PXUmJih1PTIsaCYmYS5jbGVhclRpbWVvdXQoaCksaj12b2lkIDAsZz1lfHwiIix3LnJlYWR5U3RhdGU9Yj4wPzQ6MCxrPWI+PTIwMCYmMzAwPmJ8fDMwND09PWIsZCYmKHY9V2IobCx3LGQpKSx2PVhiKGwsdix3LGspLGs/KGwuaWZNb2RpZmllZCYmKHg9dy5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpLHgmJihuLmxhc3RNb2RpZmllZFtmXT14KSx4PXcuZ2V0UmVzcG9uc2VIZWFkZXIoImV0YWciKSx4JiYobi5ldGFnW2ZdPXgpKSwyMDQ9PT1ifHwiSEVBRCI9PT1sLnR5cGU/eT0ibm9jb250ZW50IjozMDQ9PT1iP3k9Im5vdG1vZGlmaWVkIjooeT12LnN0YXRlLHM9di5kYXRhLHQ9di5lcnJvcixrPSF0KSk6KHQ9eSwhYiYmeXx8KHk9ImVycm9yIiwwPmImJihiPTApKSksdy5zdGF0dXM9Yix3LnN0YXR1c1RleHQ9KGN8fHkpKyIiLGs/cC5yZXNvbHZlV2l0aChtLFtzLHksd10pOnAucmVqZWN0V2l0aChtLFt3LHksdF0pLHcuc3RhdHVzQ29kZShyKSxyPXZvaWQgMCxpJiZvLnRyaWdnZXIoaz8iYWpheFN1Y2Nlc3MiOiJhamF4RXJyb3IiLFt3LGwsaz9zOnRdKSxxLmZpcmVXaXRoKG0sW3cseV0pLGkmJihvLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW3csbF0pLC0tbi5hY3RpdmV8fG4uZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSkpfXJldHVybiB3fSxnZXRKU09OOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5nZXQoYSxiLGMsImpzb24iKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG4uZ2V0KGEsdm9pZCAwLGIsInNjcmlwdCIpfX0pLG4uZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihhLGIpe25bYl09ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIG4uaXNGdW5jdGlvbihjKSYmKGU9ZXx8ZCxkPWMsYz12b2lkIDApLG4uYWpheChuLmV4dGVuZCh7dXJsOmEsdHlwZTpiLGRhdGFUeXBlOmUsZGF0YTpjLHN1Y2Nlc3M6ZH0sbi5pc1BsYWluT2JqZWN0KGEpJiZhKSl9fSksbi5fZXZhbFVybD1mdW5jdGlvbihhKXtyZXR1cm4gbi5hamF4KHt1cmw6YSx0eXBlOiJHRVQiLGRhdGFUeXBlOiJzY3JpcHQiLGNhY2hlOiEwLGFzeW5jOiExLGdsb2JhbDohMSwidGhyb3dzIjohMH0pfSxuLmZuLmV4dGVuZCh7d3JhcEFsbDpmdW5jdGlvbihhKXtpZihuLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLndyYXBBbGwoYS5jYWxsKHRoaXMsYikpfSk7aWYodGhpc1swXSl7dmFyIGI9bihhLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApO3RoaXNbMF0ucGFyZW50Tm9kZSYmYi5pbnNlcnRCZWZvcmUodGhpc1swXSksYi5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzO3doaWxlKGEuZmlyc3RDaGlsZCYmMT09PWEuZmlyc3RDaGlsZC5ub2RlVHlwZSlhPWEuZmlyc3RDaGlsZDtyZXR1cm4gYX0pLmFwcGVuZCh0aGlzKX1yZXR1cm4gdGhpc30sd3JhcElubmVyOmZ1bmN0aW9uKGEpe3JldHVybiBuLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykud3JhcElubmVyKGEuY2FsbCh0aGlzLGIpKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPW4odGhpcyksYz1iLmNvbnRlbnRzKCk7Yy5sZW5ndGg/Yy53cmFwQWxsKGEpOmIuYXBwZW5kKGEpfSl9LHdyYXA6ZnVuY3Rpb24oYSl7dmFyIGI9bi5pc0Z1bmN0aW9uKGEpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYyl7bih0aGlzKS53cmFwQWxsKGI/YS5jYWxsKHRoaXMsYyk6YSl9KX0sdW53cmFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpe24ubm9kZU5hbWUodGhpcywiYm9keSIpfHxuKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KS5lbmQoKX19KTtmdW5jdGlvbiBZYihhKXtyZXR1cm4gYS5zdHlsZSYmYS5zdHlsZS5kaXNwbGF5fHxuLmNzcyhhLCJkaXNwbGF5Iil9ZnVuY3Rpb24gWmIoYSl7aWYoIW4uY29udGFpbnMoYS5vd25lckRvY3VtZW50fHxkLGEpKXJldHVybiEwO3doaWxlKGEmJjE9PT1hLm5vZGVUeXBlKXtpZigibm9uZSI9PT1ZYihhKXx8ImhpZGRlbiI9PT1hLnR5cGUpcmV0dXJuITA7YT1hLnBhcmVudE5vZGV9cmV0dXJuITF9bi5leHByLmZpbHRlcnMuaGlkZGVuPWZ1bmN0aW9uKGEpe3JldHVybiBsLnJlbGlhYmxlSGlkZGVuT2Zmc2V0cygpP2Eub2Zmc2V0V2lkdGg8PTAmJmEub2Zmc2V0SGVpZ2h0PD0wJiYhYS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aDpaYihhKX0sbi5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihhKXtyZXR1cm4hbi5leHByLmZpbHRlcnMuaGlkZGVuKGEpfTt2YXIgJGI9LyUyMC9nLF9iPS9cW1xdJC8sYWM9L1xyP1xuL2csYmM9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLGNjPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtmdW5jdGlvbiBkYyhhLGIsYyxkKXt2YXIgZTtpZihuLmlzQXJyYXkoYikpbi5lYWNoKGIsZnVuY3Rpb24oYixlKXtjfHxfYi50ZXN0KGEpP2QoYSxlKTpkYyhhKyJbIisoIm9iamVjdCI9PXR5cGVvZiBlJiZudWxsIT1lP2I6IiIpKyJdIixlLGMsZCl9KTtlbHNlIGlmKGN8fCJvYmplY3QiIT09bi50eXBlKGIpKWQoYSxiKTtlbHNlIGZvcihlIGluIGIpZGMoYSsiWyIrZSsiXSIsYltlXSxjLGQpfW4ucGFyYW09ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9ZnVuY3Rpb24oYSxiKXtiPW4uaXNGdW5jdGlvbihiKT9iKCk6bnVsbD09Yj8iIjpiLGRbZC5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChhKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KGIpfTtpZih2b2lkIDA9PT1iJiYoYj1uLmFqYXhTZXR0aW5ncyYmbi5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpLG4uaXNBcnJheShhKXx8YS5qcXVlcnkmJiFuLmlzUGxhaW5PYmplY3QoYSkpbi5lYWNoKGEsZnVuY3Rpb24oKXtlKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKGMgaW4gYSlkYyhjLGFbY10sYixlKTtyZXR1cm4gZC5qb2luKCImIikucmVwbGFjZSgkYiwiKyIpfSxuLmZuLmV4dGVuZCh7c2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIG4ucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKX0sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT1uLnByb3AodGhpcywiZWxlbWVudHMiKTtyZXR1cm4gYT9uLm1ha2VBcnJheShhKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFuKHRoaXMpLmlzKCI6ZGlzYWJsZWQiKSYmY2MudGVzdCh0aGlzLm5vZGVOYW1lKSYmIWJjLnRlc3QoYSkmJih0aGlzLmNoZWNrZWR8fCFaLnRlc3QoYSkpfSkubWFwKGZ1bmN0aW9uKGEsYil7dmFyIGM9bih0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09Yz9udWxsOm4uaXNBcnJheShjKT9uLm1hcChjLGZ1bmN0aW9uKGEpe3JldHVybntuYW1lOmIubmFtZSx2YWx1ZTphLnJlcGxhY2UoYWMsIlxyXG4iKX19KTp7bmFtZTpiLm5hbWUsdmFsdWU6Yy5yZXBsYWNlKGFjLCJcclxuIil9fSkuZ2V0KCl9fSksbi5hamF4U2V0dGluZ3MueGhyPXZvaWQgMCE9PWEuQWN0aXZlWE9iamVjdD9mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTG9jYWw/aWMoKTpkLmRvY3VtZW50TW9kZT44P2hjKCk6L14oZ2V0fHBvc3R8aGVhZHxwdXR8ZGVsZXRlfG9wdGlvbnMpJC9pLnRlc3QodGhpcy50eXBlKSYmaGMoKXx8aWMoKX06aGM7dmFyIGVjPTAsZmM9e30sZ2M9bi5hamF4U2V0dGluZ3MueGhyKCk7YS5hdHRhY2hFdmVudCYmYS5hdHRhY2hFdmVudCgib251bmxvYWQiLGZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIGZjKWZjW2FdKHZvaWQgMCwhMCl9KSxsLmNvcnM9ISFnYyYmIndpdGhDcmVkZW50aWFscyJpbiBnYyxnYz1sLmFqYXg9ISFnYyxnYyYmbi5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGIpe2lmKCFiLmNyb3NzRG9tYWlufHxsLmNvcnMpe3ZhciBjO3JldHVybntzZW5kOmZ1bmN0aW9uKGQsZSl7dmFyIGYsZz1iLnhocigpLGg9KytlYztpZihnLm9wZW4oYi50eXBlLGIudXJsLGIuYXN5bmMsYi51c2VybmFtZSxiLnBhc3N3b3JkKSxiLnhockZpZWxkcylmb3IoZiBpbiBiLnhockZpZWxkcylnW2ZdPWIueGhyRmllbGRzW2ZdO2IubWltZVR5cGUmJmcub3ZlcnJpZGVNaW1lVHlwZSYmZy5vdmVycmlkZU1pbWVUeXBlKGIubWltZVR5cGUpLGIuY3Jvc3NEb21haW58fGRbIlgtUmVxdWVzdGVkLVdpdGgiXXx8KGRbIlgtUmVxdWVzdGVkLVdpdGgiXT0iWE1MSHR0cFJlcXVlc3QiKTtmb3IoZiBpbiBkKXZvaWQgMCE9PWRbZl0mJmcuc2V0UmVxdWVzdEhlYWRlcihmLGRbZl0rIiIpO2cuc2VuZChiLmhhc0NvbnRlbnQmJmIuZGF0YXx8bnVsbCksYz1mdW5jdGlvbihhLGQpe3ZhciBmLGksajtpZihjJiYoZHx8ND09PWcucmVhZHlTdGF0ZSkpaWYoZGVsZXRlIGZjW2hdLGM9dm9pZCAwLGcub25yZWFkeXN0YXRlY2hhbmdlPW4ubm9vcCxkKTQhPT1nLnJlYWR5U3RhdGUmJmcuYWJvcnQoKTtlbHNle2o9e30sZj1nLnN0YXR1cywic3RyaW5nIj09dHlwZW9mIGcucmVzcG9uc2VUZXh0JiYoai50ZXh0PWcucmVzcG9uc2VUZXh0KTt0cnl7aT1nLnN0YXR1c1RleHR9Y2F0Y2goayl7aT0iIn1mfHwhYi5pc0xvY2FsfHxiLmNyb3NzRG9tYWluPzEyMjM9PT1mJiYoZj0yMDQpOmY9ai50ZXh0PzIwMDo0MDR9aiYmZShmLGksaixnLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKX0sYi5hc3luYz80PT09Zy5yZWFkeVN0YXRlP2Euc2V0VGltZW91dChjKTpnLm9ucmVhZHlzdGF0ZWNoYW5nZT1mY1toXT1jOmMoKX0sYWJvcnQ6ZnVuY3Rpb24oKXtjJiZjKHZvaWQgMCwhMCl9fX19KTtmdW5jdGlvbiBoYygpe3RyeXtyZXR1cm4gbmV3IGEuWE1MSHR0cFJlcXVlc3R9Y2F0Y2goYil7fX1mdW5jdGlvbiBpYygpe3RyeXtyZXR1cm4gbmV3IGEuQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTEhUVFAiKX1jYXRjaChiKXt9fW4uYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6InRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0In0sY29udGVudHM6e3NjcmlwdDovXGIoPzpqYXZhfGVjbWEpc2NyaXB0XGIvfSxjb252ZXJ0ZXJzOnsidGV4dCBzY3JpcHQiOmZ1bmN0aW9uKGEpe3JldHVybiBuLmdsb2JhbEV2YWwoYSksYX19fSksbi5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEuY2FjaGUmJihhLmNhY2hlPSExKSxhLmNyb3NzRG9tYWluJiYoYS50eXBlPSJHRVQiLGEuZ2xvYmFsPSExKX0pLG4uYWpheFRyYW5zcG9ydCgic2NyaXB0IixmdW5jdGlvbihhKXtpZihhLmNyb3NzRG9tYWluKXt2YXIgYixjPWQuaGVhZHx8bigiaGVhZCIpWzBdfHxkLmRvY3VtZW50RWxlbWVudDtyZXR1cm57c2VuZDpmdW5jdGlvbihlLGYpe2I9ZC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSxiLmFzeW5jPSEwLGEuc2NyaXB0Q2hhcnNldCYmKGIuY2hhcnNldD1hLnNjcmlwdENoYXJzZXQpLGIuc3JjPWEudXJsLGIub25sb2FkPWIub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKGEsYyl7KGN8fCFiLnJlYWR5U3RhdGV8fC9sb2FkZWR8Y29tcGxldGUvLnRlc3QoYi5yZWFkeVN0YXRlKSkmJihiLm9ubG9hZD1iLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLGIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGI9bnVsbCxjfHxmKDIwMCwic3VjY2VzcyIpKX0sYy5pbnNlcnRCZWZvcmUoYixjLmZpcnN0Q2hpbGQpfSxhYm9ydDpmdW5jdGlvbigpe2ImJmIub25sb2FkKHZvaWQgMCwhMCl9fX19KTt2YXIgamM9W10sa2M9Lyg9KVw/KD89JnwkKXxcP1w/LztuLmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGE9amMucG9wKCl8fG4uZXhwYW5kbysiXyIrRWIrKztyZXR1cm4gdGhpc1thXT0hMCxhfX0pLG4uYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsZnVuY3Rpb24oYixjLGQpe3ZhciBlLGYsZyxoPWIuanNvbnAhPT0hMSYmKGtjLnRlc3QoYi51cmwpPyJ1cmwiOiJzdHJpbmciPT10eXBlb2YgYi5kYXRhJiYwPT09KGIuY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSYma2MudGVzdChiLmRhdGEpJiYiZGF0YSIpO3JldHVybiBofHwianNvbnAiPT09Yi5kYXRhVHlwZXNbMF0/KGU9Yi5qc29ucENhbGxiYWNrPW4uaXNGdW5jdGlvbihiLmpzb25wQ2FsbGJhY2spP2IuanNvbnBDYWxsYmFjaygpOmIuanNvbnBDYWxsYmFjayxoP2JbaF09YltoXS5yZXBsYWNlKGtjLCIkMSIrZSk6Yi5qc29ucCE9PSExJiYoYi51cmwrPShGYi50ZXN0KGIudXJsKT8iJiI6Ij8iKStiLmpzb25wKyI9IitlKSxiLmNvbnZlcnRlcnNbInNjcmlwdCBqc29uIl09ZnVuY3Rpb24oKXtyZXR1cm4gZ3x8bi5lcnJvcihlKyIgd2FzIG5vdCBjYWxsZWQiKSxnWzBdfSxiLmRhdGFUeXBlc1swXT0ianNvbiIsZj1hW2VdLGFbZV09ZnVuY3Rpb24oKXtnPWFyZ3VtZW50c30sZC5hbHdheXMoZnVuY3Rpb24oKXt2b2lkIDA9PT1mP24oYSkucmVtb3ZlUHJvcChlKTphW2VdPWYsYltlXSYmKGIuanNvbnBDYWxsYmFjaz1jLmpzb25wQ2FsbGJhY2ssamMucHVzaChlKSksZyYmbi5pc0Z1bmN0aW9uKGYpJiZmKGdbMF0pLGc9Zj12b2lkIDB9KSwic2NyaXB0Iik6dm9pZCAwfSksbi5wYXJzZUhUTUw9ZnVuY3Rpb24oYSxiLGMpe2lmKCFhfHwic3RyaW5nIiE9dHlwZW9mIGEpcmV0dXJuIG51bGw7ImJvb2xlYW4iPT10eXBlb2YgYiYmKGM9YixiPSExKSxiPWJ8fGQ7dmFyIGU9eC5leGVjKGEpLGY9IWMmJltdO3JldHVybiBlP1tiLmNyZWF0ZUVsZW1lbnQoZVsxXSldOihlPWphKFthXSxiLGYpLGYmJmYubGVuZ3RoJiZuKGYpLnJlbW92ZSgpLG4ubWVyZ2UoW10sZS5jaGlsZE5vZGVzKSl9O3ZhciBsYz1uLmZuLmxvYWQ7bi5mbi5sb2FkPWZ1bmN0aW9uKGEsYixjKXtpZigic3RyaW5nIiE9dHlwZW9mIGEmJmxjKXJldHVybiBsYy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGQsZSxmLGc9dGhpcyxoPWEuaW5kZXhPZigiICIpO3JldHVybiBoPi0xJiYoZD1uLnRyaW0oYS5zbGljZShoLGEubGVuZ3RoKSksYT1hLnNsaWNlKDAsaCkpLG4uaXNGdW5jdGlvbihiKT8oYz1iLGI9dm9pZCAwKTpiJiYib2JqZWN0Ij09dHlwZW9mIGImJihlPSJQT1NUIiksZy5sZW5ndGg+MCYmbi5hamF4KHt1cmw6YSx0eXBlOmV8fCJHRVQiLGRhdGFUeXBlOiJodG1sIixkYXRhOmJ9KS5kb25lKGZ1bmN0aW9uKGEpe2Y9YXJndW1lbnRzLGcuaHRtbChkP24oIjxkaXY+IikuYXBwZW5kKG4ucGFyc2VIVE1MKGEpKS5maW5kKGQpOmEpfSkuYWx3YXlzKGMmJmZ1bmN0aW9uKGEsYil7Zy5lYWNoKGZ1bmN0aW9uKCl7Yy5hcHBseSh0aGlzLGZ8fFthLnJlc3BvbnNlVGV4dCxiLGFdKX0pfSksdGhpc30sbi5lYWNoKFsiYWpheFN0YXJ0IiwiYWpheFN0b3AiLCJhamF4Q29tcGxldGUiLCJhamF4RXJyb3IiLCJhamF4U3VjY2VzcyIsImFqYXhTZW5kIl0sZnVuY3Rpb24oYSxiKXtuLmZuW2JdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9uKGIsYSl9fSksbi5leHByLmZpbHRlcnMuYW5pbWF0ZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZ3JlcChuLnRpbWVycyxmdW5jdGlvbihiKXtyZXR1cm4gYT09PWIuZWxlbX0pLmxlbmd0aH07ZnVuY3Rpb24gbWMoYSl7cmV0dXJuIG4uaXNXaW5kb3coYSk/YTo5PT09YS5ub2RlVHlwZT9hLmRlZmF1bHRWaWV3fHxhLnBhcmVudFdpbmRvdzohMX1uLm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrPW4uY3NzKGEsInBvc2l0aW9uIiksbD1uKGEpLG09e307InN0YXRpYyI9PT1rJiYoYS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiKSxoPWwub2Zmc2V0KCksZj1uLmNzcyhhLCJ0b3AiKSxpPW4uY3NzKGEsImxlZnQiKSxqPSgiYWJzb2x1dGUiPT09a3x8ImZpeGVkIj09PWspJiZuLmluQXJyYXkoImF1dG8iLFtmLGldKT4tMSxqPyhkPWwucG9zaXRpb24oKSxnPWQudG9wLGU9ZC5sZWZ0KTooZz1wYXJzZUZsb2F0KGYpfHwwLGU9cGFyc2VGbG9hdChpKXx8MCksbi5pc0Z1bmN0aW9uKGIpJiYoYj1iLmNhbGwoYSxjLG4uZXh0ZW5kKHt9LGgpKSksbnVsbCE9Yi50b3AmJihtLnRvcD1iLnRvcC1oLnRvcCtnKSxudWxsIT1iLmxlZnQmJihtLmxlZnQ9Yi5sZWZ0LWgubGVmdCtlKSwidXNpbmciaW4gYj9iLnVzaW5nLmNhbGwoYSxtKTpsLmNzcyhtKX19LG4uZm4uZXh0ZW5kKHtvZmZzZXQ6ZnVuY3Rpb24oYSl7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdm9pZCAwPT09YT90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihiKXtuLm9mZnNldC5zZXRPZmZzZXQodGhpcyxhLGIpfSk7dmFyIGIsYyxkPXt0b3A6MCxsZWZ0OjB9LGU9dGhpc1swXSxmPWUmJmUub3duZXJEb2N1bWVudDtpZihmKXJldHVybiBiPWYuZG9jdW1lbnRFbGVtZW50LG4uY29udGFpbnMoYixlKT8oInVuZGVmaW5lZCIhPXR5cGVvZiBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCYmKGQ9ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSksYz1tYyhmKSx7dG9wOmQudG9wKyhjLnBhZ2VZT2Zmc2V0fHxiLnNjcm9sbFRvcCktKGIuY2xpZW50VG9wfHwwKSxsZWZ0OmQubGVmdCsoYy5wYWdlWE9mZnNldHx8Yi5zY3JvbGxMZWZ0KS0oYi5jbGllbnRMZWZ0fHwwKX0pOmR9LHBvc2l0aW9uOmZ1bmN0aW9uKCl7aWYodGhpc1swXSl7dmFyIGEsYixjPXt0b3A6MCxsZWZ0OjB9LGQ9dGhpc1swXTtyZXR1cm4iZml4ZWQiPT09bi5jc3MoZCwicG9zaXRpb24iKT9iPWQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk6KGE9dGhpcy5vZmZzZXRQYXJlbnQoKSxiPXRoaXMub2Zmc2V0KCksbi5ub2RlTmFtZShhWzBdLCJodG1sIil8fChjPWEub2Zmc2V0KCkpLGMudG9wKz1uLmNzcyhhWzBdLCJib3JkZXJUb3BXaWR0aCIsITApLGMubGVmdCs9bi5jc3MoYVswXSwiYm9yZGVyTGVmdFdpZHRoIiwhMCkpLHt0b3A6Yi50b3AtYy50b3Atbi5jc3MoZCwibWFyZ2luVG9wIiwhMCksbGVmdDpiLmxlZnQtYy5sZWZ0LW4uY3NzKGQsIm1hcmdpbkxlZnQiLCEwKX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9mZnNldFBhcmVudDt3aGlsZShhJiYhbi5ub2RlTmFtZShhLCJodG1sIikmJiJzdGF0aWMiPT09bi5jc3MoYSwicG9zaXRpb24iKSlhPWEub2Zmc2V0UGFyZW50O3JldHVybiBhfHxRYX0pfX0pLG4uZWFjaCh7c2Nyb2xsTGVmdDoicGFnZVhPZmZzZXQiLHNjcm9sbFRvcDoicGFnZVlPZmZzZXQifSxmdW5jdGlvbihhLGIpe3ZhciBjPS9ZLy50ZXN0KGIpO24uZm5bYV09ZnVuY3Rpb24oZCl7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihhLGQsZSl7dmFyIGY9bWMoYSk7cmV0dXJuIHZvaWQgMD09PWU/Zj9iIGluIGY/ZltiXTpmLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtkXTphW2RdOnZvaWQoZj9mLnNjcm9sbFRvKGM/bihmKS5zY3JvbGxMZWZ0KCk6ZSxjP2U6bihmKS5zY3JvbGxUb3AoKSk6YVtkXT1lKX0sYSxkLGFyZ3VtZW50cy5sZW5ndGgsbnVsbCl9fSksbi5lYWNoKFsidG9wIiwibGVmdCJdLGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1tiXT1VYShsLnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz8oYz1TYShhLGIpLE9hLnRlc3QoYyk/bihhKS5wb3NpdGlvbigpW2JdKyJweCI6Yyk6dm9pZCAwfSl9KSxuLmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihhLGIpe24uZWFjaCh7CnBhZGRpbmc6ImlubmVyIithLGNvbnRlbnQ6YiwiIjoib3V0ZXIiK2F9LGZ1bmN0aW9uKGMsZCl7bi5mbltkXT1mdW5jdGlvbihkLGUpe3ZhciBmPWFyZ3VtZW50cy5sZW5ndGgmJihjfHwiYm9vbGVhbiIhPXR5cGVvZiBkKSxnPWN8fChkPT09ITB8fGU9PT0hMD8ibWFyZ2luIjoiYm9yZGVyIik7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihiLGMsZCl7dmFyIGU7cmV0dXJuIG4uaXNXaW5kb3coYik/Yi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrYV06OT09PWIubm9kZVR5cGU/KGU9Yi5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgoYi5ib2R5WyJzY3JvbGwiK2FdLGVbInNjcm9sbCIrYV0sYi5ib2R5WyJvZmZzZXQiK2FdLGVbIm9mZnNldCIrYV0sZVsiY2xpZW50IithXSkpOnZvaWQgMD09PWQ/bi5jc3MoYixjLGcpOm4uc3R5bGUoYixjLGQsZyl9LGIsZj9kOnZvaWQgMCxmLG51bGwpfX0pfSksbi5mbi5leHRlbmQoe2JpbmQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLm9uKGEsbnVsbCxiLGMpfSx1bmJpbmQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5vZmYoYSxudWxsLGIpfSxkZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5vbihiLGEsYyxkKX0sdW5kZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMub2ZmKGEsIioqIik6dGhpcy5vZmYoYixhfHwiKioiLGMpfX0pLG4uZm4uc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH0sbi5mbi5hbmRTZWxmPW4uZm4uYWRkQmFjaywiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoImpxdWVyeSIsW10sZnVuY3Rpb24oKXtyZXR1cm4gbn0pO3ZhciBuYz1hLmpRdWVyeSxvYz1hLiQ7cmV0dXJuIG4ubm9Db25mbGljdD1mdW5jdGlvbihiKXtyZXR1cm4gYS4kPT09biYmKGEuJD1vYyksYiYmYS5qUXVlcnk9PT1uJiYoYS5qUXVlcnk9bmMpLG59LGJ8fChhLmpRdWVyeT1hLiQ9biksbn0pOwo="}]},{"name":"🔥🔥🔥文本选中复制🔥🔥🔥","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":["static.doc88.com"],"orig_excludes":[],"orig_includes":["*://wenku.baidu.com/view/*","*://www.51test.net/show/*","*://www.xuexi.la/*","*://www.xuexila.com/*","*://www.cspengbo.com/*","*://www.doc88.com/*","*://segmentfault.com/*","*://wk.baidu.com/view/*","*://leetcode-cn.com/problems/*","*://www.zhihu.com/*","*://z.30edu.com.cn/*","*://docs.qq.com/doc/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1605003072467,"data":{}},"enabled":true,"position":6,"file_url":"https://greasyfork.org/scripts/405130-%E6%96%87%E6%9C%AC%E9%80%89%E4%B8%AD%E5%A4%8D%E5%88%B6/code/%F0%9F%94%A5%F0%9F%94%A5%F0%9F%94%A5%E6%96%87%E6%9C%AC%E9%80%89%E4%B8%AD%E5%A4%8D%E5%88%B6%F0%9F%94%A5%F0%9F%94%A5%F0%9F%94%A5.user.js","uuid":"41236fb5-9c7f-4cec-9d43-f332fcb64bd6","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIPCflKXwn5Sl8J+UpeaWh+acrOmAieS4reWkjeWItvCflKXwn5Sl8J+UpQovLyBAZGVzY3JpcHRpb24g6Kej6Zmk572R56uZ5LiN5YWB6K645aSN5Yi255qE6ZmQ5Yi277yM5paH5pys6YCJ5Lit5ZCO54K55Ye75aSN5Yi25oyJ6ZKu5Y2z5Y+v5aSN5Yi277yM5Li76KaB55So5LqOIOeZvuW6puaWh+W6kyDpgZPlrqLlt7Tlt7Qg5peg5b+n6ICD572RIOWtpuS5oOWVpiDok6zli4PojIPmlocg5oCd5ZCm56S+5Yy6IOWKm+aJoyDnn6XkuY4KLy8gQG5hbWVzcGFjZSAgIGh0dHBzOi8vZ2l0aHViLmNvbS9XaW5kcnVubmVyTWF4L1RLU2NyaXB0Ci8vIEB2ZXJzaW9uICAgICAyLjEuNwovLyBAYXV0aG9yICAgICAgQ3p5Ci8vIEBpbmNsdWRlICAgICAqOi8vd2Vua3UuYmFpZHUuY29tL3ZpZXcvKgovLyBAaW5jbHVkZSAgICAgKjovL3d3dy41MXRlc3QubmV0L3Nob3cvKgovLyBAaW5jbHVkZSAgICAgKjovL3d3dy54dWV4aS5sYS8qCi8vIEBpbmNsdWRlICAgICAqOi8vd3d3Lnh1ZXhpbGEuY29tLyoKLy8gQGluY2x1ZGUgICAgICo6Ly93d3cuY3NwZW5nYm8uY29tLyoKLy8gQGluY2x1ZGUgICAgICo6Ly93d3cuZG9jODguY29tLyoKLy8gQGluY2x1ZGUgICAgICo6Ly9zZWdtZW50ZmF1bHQuY29tLyoKLy8gQGluY2x1ZGUgICAgICo6Ly93ay5iYWlkdS5jb20vdmlldy8qCi8vIEBpbmNsdWRlICAgICAqOi8vbGVldGNvZGUtY24uY29tL3Byb2JsZW1zLyoKLy8gQGluY2x1ZGUgICAgICo6Ly93d3cuemhpaHUuY29tLyoKLy8gQGluY2x1ZGUgICAgICo6Ly96LjMwZWR1LmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICAqOi8vZG9jcy5xcS5jb20vZG9jLyoKLy8gQGxpY2Vuc2UgICAgIEdQTCBMaWNlbnNlCi8vIEByZXF1aXJlICAgICBodHRwczovL2Nkbi5ib290Y3NzLmNvbS9qcXVlcnkvMi4xLjIvanF1ZXJ5Lm1pbi5qcwovLyBAcmVxdWlyZSAgICAgaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9jbGlwYm9hcmRAMi9kaXN0L2NsaXBib2FyZC5taW4uanMKLy8gQGNvbm5lY3QgICAgIHN0YXRpYy5kb2M4OC5jb20KLy8gQGdyYW50ICAgICAgIHVuc2FmZVdpbmRvdwovLyBAZ3JhbnQgICAgICAgR01feG1saHR0cFJlcXVlc3QKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgZnVuY3Rpb24gc3R5bGVJbmplY3QoY3NzLCByZWYpIHsKICAgIGlmIChyZWYgPT09IHZvaWQgMCkgcmVmID0ge307CiAgICB2YXIgaW5zZXJ0QXQgPSByZWYuaW5zZXJ0QXQ7CgogICAgaWYgKCFjc3MgfHwgdHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykgewogICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIGhlYWQgPSBkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07CiAgICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgc3R5bGUudHlwZSA9ICd0ZXh0L2Nzcyc7CgogICAgaWYgKGluc2VydEF0ID09PSAndG9wJykgewogICAgICBpZiAoaGVhZC5maXJzdENoaWxkKSB7CiAgICAgICAgaGVhZC5pbnNlcnRCZWZvcmUoc3R5bGUsIGhlYWQuZmlyc3RDaGlsZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpOwogICAgfQoKICAgIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7CiAgICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzczsKICAgIH0gZWxzZSB7CiAgICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpOwogICAgfQogIH0KCiAgdmFyIGNzc18yNDh6ID0gIiNfY29weXt3aWR0aDo2MHB4O2hlaWdodDozMHB4O2JhY2tncm91bmQ6IzRjOThmNztjb2xvcjojZmZmO3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6MTAwMDtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7Ym9yZGVyLXJhZGl1czozcHg7Zm9udC1zaXplOjEzcHg7Y3Vyc29yOnBvaW50ZXJ9I3NlbGVjdC10b29sdGlwLCNzZk1vZGFsLC5tb2RhbC1iYWNrZHJvcCxkaXZbaWRePXJlYWRlci1oZWxwZXJde2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9Lm1vZGFsLW9wZW57b3ZlcmZsb3c6YXV0byFpbXBvcnRhbnR9Ll9zZl9hZGp1c3RfYm9keXtwYWRkaW5nLXJpZ2h0OjAhaW1wb3J0YW50fSI7CiAgc3R5bGVJbmplY3QoY3NzXzI0OHopOwoKICBmdW5jdGlvbiBpbml0RXZlbnQoJCwgQ2xpcGJvYXJkSlMpIHsKICAgICQoImJvZHkiKS5vbigibW91c2Vkb3duIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgJCgiI19jb3B5IikucmVtb3ZlKCk7CiAgICB9KTsKCiAgICBkb2N1bWVudC5vbmNvcHkgPSBmdW5jdGlvbiAoKSB7fTsKCiAgICAkKCJib2R5Iikub24oImNvcHkiLCBmdW5jdGlvbiAoZSkgewogICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0pOwogICAgQ2xpcGJvYXJkSlMucHJvdG90eXBlLm9uKCdzdWNjZXNzJywgZnVuY3Rpb24gKGUpIHsKICAgICAgJCgiI19jb3B5IikuaHRtbCgi5aSN5Yi25oiQ5YqfIik7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAkKCIjX2NvcHkiKS5mYWRlT3V0KDEwMDApOwogICAgICB9LCAxMDAwKTsKICAgICAgZS5jbGVhclNlbGVjdGlvbigpOwogICAgfSk7CiAgICBDbGlwYm9hcmRKUy5wcm90b3R5cGUub24oJ2Vycm9yJywgZnVuY3Rpb24gKGUpIHsKICAgICAgJCgiI19jb3B5IikuaHRtbCgi5aSN5Yi25aSx6LSlIik7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAkKCIjX2NvcHkiKS5mYWRlT3V0KDEwMDApOwogICAgICB9LCAxMDAwKTsKICAgICAgZS5jbGVhclNlbGVjdGlvbigpOwogICAgfSk7CiAgfQoKICB2YXIgcGF0aCA9ICIiOwoKICBmdW5jdGlvbiBpbml0KCkgewogICAgLy8gR01feG1saHR0cFJlcXVlc3QoewogICAgLy8gICAgIG1ldGhvZDogIkdFVCIsCiAgICAvLyAgICAgdXJsOiAiaHR0cHM6Ly9yZXMuZG9jODguY29tL2Fzc2V0cy9qcy92Mi5qcyIsCiAgICAvLyAgICAgb25sb2FkOiBmdW5jdGlvbihyZXNwb25zZSkgewogICAgLy8gICAgICAgICB2YXIgdmlldyA9IG5ldyBGdW5jdGlvbigidmFyIHZpZXcgPSAiICsgcmVzcG9uc2UucmVzcG9uc2VUZXh0LnJlcGxhY2UoImV2YWwiLCAiIikgKyAiOyByZXR1cm4gdmlldzsiKTsKICAgIC8vICAgICAgICAgcGF0aCA9IC88dGV4dGFyZWFbXHNcU10qP1ZpZXdlci4oW1xTXSo/KVwrW1xTXSo/XC90ZXh0YXJlYT4vLmV4ZWModmlldygpKVsxXTsKICAgIC8vICAgICB9CiAgICAvLyB9KQogICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICBtZXRob2Q6ICJHRVQiLAogICAgICB1cmw6ICJodHRwczovL3N0YXRpYy5kb2M4OC5jb20vcmVzb3VyY2VzL2pzL21vZHVsZXMvbWFpbi12MS5taW4uanM/dj0xLjI5IiwKICAgICAgb25sb2FkOiBmdW5jdGlvbiBvbmxvYWQocmVzcG9uc2UpIHsKICAgICAgICBwYXRoID0gLzx0ZXh0YXJlYVtcc1xTXSs+J1wrKFtcU10qPylcK1wiPFwvdGV4dGFyZWE+Ly5leGVjKHJlc3BvbnNlLnJlc3BvbnNlVGV4dClbMV07CiAgICAgIH0KICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gZ2V0U2VsZWN0ZWRUZXh0KCkgewogICAgdmFyIHNlbGVjdCA9IHVuc2FmZVdpbmRvdzsKICAgIHBhdGguc3BsaXQoIi4iKS5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7CiAgICAgIHNlbGVjdCA9IHNlbGVjdFt2XTsKICAgIH0pOwogICAgcmV0dXJuIHNlbGVjdDsKICB9CgogIHZhciBkb2M4OCA9IHsKICAgIGluaXQ6IGluaXQsCiAgICBnZXRTZWxlY3RlZFRleHQ6IGdldFNlbGVjdGVkVGV4dAogIH07CgogIGZ1bmN0aW9uIGluaXQkMSgkKSB7CiAgICAkKHdpbmRvdykub24oImxvYWQiLCBmdW5jdGlvbiAoZSkgewogICAgICAkKCIuc2YtZWR1LXdlbmt1LXZ3LWNvbnRhaW5lciIpLmF0dHIoInN0eWxlIiwgIiIpOwogICAgICAkKCIuc2ZhLWJvZHkiKS5vbigic2VsZWN0c3RhcnQiLCBmdW5jdGlvbiAoZSkgewogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0pOwogICAgfSk7CiAgfQoKICB2YXIgd2sgPSB7CiAgICBpbml0OiBpbml0JDEKICB9OwoKICBmdW5jdGlvbiBpbml0JDIoJCkgewogICAgJCgiYm9keSIpLmFwcGVuZCgiPHN0eWxlPiNfY29weXtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fTwvc3R5bGU+Iik7CiAgfQoKICB2YXIgbGVldGNvZGUgPSB7CiAgICBpbml0OiBpbml0JDIKICB9OwoKICBmdW5jdGlvbiBpbml0JDMoJCkgewogICAgJCgiYm9keSIpLmFwcGVuZCgiPHN0eWxlPiNfY29weXtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fTwvc3R5bGU+Iik7CiAgfQoKICB2YXIgemhpaHUgPSB7CiAgICBpbml0OiBpbml0JDMKICB9OwoKICBmdW5jdGlvbiBpbml0JDQoJCkgewogICAgd2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGlmcmFtZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaWZyYW1lIik7CgogICAgICBpZiAoaWZyYW1lcy5sZW5ndGggPT09IDIpIHsKICAgICAgICBjb25zb2xlLmxvZyhpZnJhbWVzWzFdLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQpOwogICAgICAgIHZhciBib2R5ID0gJChpZnJhbWVzWzFdLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiYm9keSIpKTsKICAgICAgICBjb25zb2xlLmxvZyhib2R5KTsKICAgICAgICBib2R5LmF0dHIoIm9uY29weSIsICIiKTsKICAgICAgICBib2R5LmF0dHIoIm9uY29udGV4dG1lbnUiLCAiIik7CiAgICAgICAgYm9keS5hdHRyKCJvbnNlbGVjdHN0YXJ0IiwgIiIpOwogICAgICB9CiAgICB9OwogIH0KCiAgdmFyIGVkdTMwID0gewogICAgaW5pdDogaW5pdCQ0CiAgfTsKCiAgZnVuY3Rpb24gaW5pdCQ1KCQpIHsKICAgIHZhciBoaWRlID0gZnVuY3Rpb24gaGlkZSgpIHsKICAgICAgcmV0dXJuICQoImJvZHkiKS5hcHBlbmQoIjxzdHlsZT4jX2NvcHl7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O308L3N0eWxlPiIpOwogICAgfTsKCiAgICBpZiAodW5zYWZlV2luZG93LnBhZCkgewogICAgICBpZiAodW5zYWZlV2luZG93LnBhZC5lZGl0b3IuX2RvY0Vudi5jb3B5YWJsZSA9PT0gdHJ1ZSkgaGlkZSgpOwogICAgICB1bnNhZmVXaW5kb3cucGFkLmVkaXRvci5fZG9jRW52LmNvcHlhYmxlID0gdHJ1ZTsKICAgIH0gZWxzZSB7CiAgICAgIGhpZGUoKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGdldFNlbGVjdGVkVGV4dCQxKCkgewogICAgaWYgKHVuc2FmZVdpbmRvdy5wYWQpIHsKICAgICAgdW5zYWZlV2luZG93LnBhZC5lZGl0b3IuY2xpcGJvYXJkTWFuYWdlci5jb3B5KCk7CiAgICAgIHJldHVybiB1bnNhZmVXaW5kb3cucGFkLmVkaXRvci5jbGlwYm9hcmRNYW5hZ2VyLmN1c3RvbUNsaXBib2FyZC5wbGFpbjsKICAgIH0KCiAgICByZXR1cm4gdm9pZCAwOwogIH0KCiAgdmFyIGRvY3FxID0gewogICAgaW5pdDogaW5pdCQ1LAogICAgZ2V0U2VsZWN0ZWRUZXh0OiBnZXRTZWxlY3RlZFRleHQkMQogIH07CgogIHZhciBzaXRlR2V0U2VsZWN0ZWRUZXh0ID0gbnVsbDsKCiAgZnVuY3Rpb24gaW5pdFdlYnNpdGUoJCwgQ2xpcGJvYXJkSlMpIHsKICAgIHZhciBtYXRoZXIgPSBmdW5jdGlvbiBtYXRoZXIocmVnZXgsIHNpdGUpIHsKICAgICAgaWYgKHJlZ2V4LnRlc3Qod2luZG93LmxvY2F0aW9uLmhyZWYpKSB7CiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiA+IDIgPyBfbGVuIC0gMiA6IDApLCBfa2V5ID0gMjsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgICAgICAgYXJnc1tfa2V5IC0gMl0gPSBhcmd1bWVudHNbX2tleV07CiAgICAgICAgfQoKICAgICAgICBzaXRlLmluaXQuYXBwbHkoc2l0ZSwgYXJncyk7CiAgICAgICAgaWYgKHNpdGUuZ2V0U2VsZWN0ZWRUZXh0KSBzaXRlR2V0U2VsZWN0ZWRUZXh0ID0gc2l0ZS5nZXRTZWxlY3RlZFRleHQ7CiAgICAgIH0KICAgIH07CgogICAgbWF0aGVyKC8uKmRvYzg4XC5jb21cLy4rLywgZG9jODgpOwogICAgbWF0aGVyKC8uKnNlZ21lbnRmYXVsdFwuY29tXC8uKy8sIHdrLCAkKTsKICAgIG1hdGhlcigvLip3a1wuYmFpZHVcLmNvbVwvdmlld1wvLisvLCB3aywgJCk7CiAgICBtYXRoZXIoLy4qbGVldGNvZGUtY25cLmNvbVwvcHJvYmxlbXNcLy4rLywgbGVldGNvZGUsICQpOwogICAgbWF0aGVyKC8uKnpoaWh1XC5jb21cLy4rLywgemhpaHUsICQpOwogICAgbWF0aGVyKC8uKjMwZWR1XC5jb21cLmNuXC8uKy8sIGVkdTMwLCAkKTsKICAgIG1hdGhlcigvLipkb2NzXC5xcVwuY29tXC8uKy8sIGRvY3FxLCAkKTsKICB9CgogIGZ1bmN0aW9uIGdldFNlbGVjdGVkVGV4dCQyKCkgewogICAgaWYgKHNpdGVHZXRTZWxlY3RlZFRleHQpIHJldHVybiBzaXRlR2V0U2VsZWN0ZWRUZXh0KCk7CiAgICBpZiAod2luZG93LmdldFNlbGVjdGlvbikgcmV0dXJuIHdpbmRvdy5nZXRTZWxlY3Rpb24oKS50b1N0cmluZygpO2Vsc2UgaWYgKGRvY3VtZW50LmdldFNlbGVjdGlvbikgcmV0dXJuIGRvY3VtZW50LmdldFNlbGVjdGlvbigpO2Vsc2UgaWYgKGRvY3VtZW50LnNlbGVjdGlvbikgcmV0dXJuIGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpLnRleHQ7CiAgICByZXR1cm4gIiI7CiAgfQoKICAoZnVuY3Rpb24gKCkgewogICAgdmFyICQgPSB3aW5kb3cuJDsKICAgIHZhciBDbGlwYm9hcmRKUyA9IHdpbmRvdy5DbGlwYm9hcmRKUzsgLy8gaHR0cHM6Ly9jbGlwYm9hcmRqcy5jb20vI2V4YW1wbGUtdGV4dAoKICAgIGluaXRFdmVudCgkLCBDbGlwYm9hcmRKUyk7CiAgICBpbml0V2Vic2l0ZSgkKTsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLCBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgY29weVRleHQgPSBnZXRTZWxlY3RlZFRleHQkMigpOwogICAgICBpZiAoY29weVRleHQpIGNvbnNvbGUubG9nKGNvcHlUZXh0KTtlbHNlIHJldHVybiAiIjsKICAgICAgJCgiI19jb3B5IikucmVtb3ZlKCk7CiAgICAgIHZhciB0ZW1wbGF0ZSA9ICJcbiAgICAgICAgICAgIDxkaXYgaWQ9XCJfY29weVwiXG4gICAgICAgICAgICBzdHlsZT1cImxlZnQ6Ii5jb25jYXQoZS5wYWdlWCArIDMwLCAicHg7dG9wOiIpLmNvbmNhdChlLnBhZ2VZLCAicHg7XCJcbiAgICAgICAgICAgIGRhdGEtY2xpcGJvYXJkLXRleHQ9XCIiKS5jb25jYXQoY29weVRleHQsICJcIj5cdTU5MERcdTUyMzY8L2Rpdj5cbiAgICAgICAgIik7CiAgICAgICQoImJvZHkiKS5hcHBlbmQodGVtcGxhdGUpOwogICAgICAkKCIjX2NvcHkiKS5vbigibW91c2Vkb3duIiwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIH0pOwogICAgICAkKCIjX2NvcHkiKS5vbigibW91c2V1cCIsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICB9KTsKICAgICAgbmV3IENsaXBib2FyZEpTKCcjX2NvcHknKTsKICAgIH0pOwogIH0pKCk7CiAgLyoqCiAgICogaHR0cHM6Ly93d3cud2Vua3Uuem9uZS8KICAgKiBodHRwOi8vd2Vua3UuYmFpZHV2dnYuY29tLwogICAqIGh0dHBzOi8vd3d3Lmh1aXlpbmd3dS5jb20vMTcxOC8KICAgKi8KCn0oKSk7Cg==","requires":[{"meta":{"name":"jquery.min.js","url":"https://cdn.bootcss.com/jquery/2.1.2/jquery.min.js","ts":1607838060259,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2Mi4xLjIgfCAoYykgMjAwNSwgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiB8IGpxdWVyeS5vcmcvbGljZW5zZSAqLwohZnVuY3Rpb24oYSxiKXsib2JqZWN0Ij09dHlwZW9mIG1vZHVsZSYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1hLmRvY3VtZW50P2IoYSwhMCk6ZnVuY3Rpb24oYSl7aWYoIWEuZG9jdW1lbnQpdGhyb3cgbmV3IEVycm9yKCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50Iik7cmV0dXJuIGIoYSl9OmIoYSl9KCJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLGZ1bmN0aW9uKGEsYil7dmFyIGM9W10sZD1jLnNsaWNlLGU9Yy5jb25jYXQsZj1jLnB1c2gsZz1jLmluZGV4T2YsaD17fSxpPWgudG9TdHJpbmcsaj1oLmhhc093blByb3BlcnR5LGs9e30sbD1hLmRvY3VtZW50LG09IjIuMS4yIixuPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBuLmZuLmluaXQoYSxiKX0sbz0vXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2cscD0vXi1tcy0vLHE9Ly0oW1xkYS16XSkvZ2kscj1mdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9O24uZm49bi5wcm90b3R5cGU9e2pxdWVyeTptLGNvbnN0cnVjdG9yOm4sc2VsZWN0b3I6IiIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBkLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT8wPmE/dGhpc1thK3RoaXMubGVuZ3RoXTp0aGlzW2FdOmQuY2FsbCh0aGlzKX0scHVzaFN0YWNrOmZ1bmN0aW9uKGEpe3ZhciBiPW4ubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGEpO3JldHVybiBiLnByZXZPYmplY3Q9dGhpcyxiLmNvbnRleHQ9dGhpcy5jb250ZXh0LGJ9LGVhY2g6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5lYWNoKHRoaXMsYSxiKX0sbWFwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayhuLm1hcCh0aGlzLGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuY2FsbChiLGMsYil9KSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGQuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sZW5ndGgsYz0rYSsoMD5hP2I6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGM+PTAmJmI+Yz9bdGhpc1tjXV06W10pfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2T2JqZWN0fHx0aGlzLmNvbnN0cnVjdG9yKG51bGwpfSxwdXNoOmYsc29ydDpjLnNvcnQsc3BsaWNlOmMuc3BsaWNlfSxuLmV4dGVuZD1uLmZuLmV4dGVuZD1mdW5jdGlvbigpe3ZhciBhLGIsYyxkLGUsZixnPWFyZ3VtZW50c1swXXx8e30saD0xLGk9YXJndW1lbnRzLmxlbmd0aCxqPSExO2ZvcigiYm9vbGVhbiI9PXR5cGVvZiBnJiYoaj1nLGc9YXJndW1lbnRzW2hdfHx7fSxoKyspLCJvYmplY3QiPT10eXBlb2YgZ3x8bi5pc0Z1bmN0aW9uKGcpfHwoZz17fSksaD09PWkmJihnPXRoaXMsaC0tKTtpPmg7aCsrKWlmKG51bGwhPShhPWFyZ3VtZW50c1toXSkpZm9yKGIgaW4gYSljPWdbYl0sZD1hW2JdLGchPT1kJiYoaiYmZCYmKG4uaXNQbGFpbk9iamVjdChkKXx8KGU9bi5pc0FycmF5KGQpKSk/KGU/KGU9ITEsZj1jJiZuLmlzQXJyYXkoYyk/YzpbXSk6Zj1jJiZuLmlzUGxhaW5PYmplY3QoYyk/Yzp7fSxnW2JdPW4uZXh0ZW5kKGosZixkKSk6dm9pZCAwIT09ZCYmKGdbYl09ZCkpO3JldHVybiBnfSxuLmV4dGVuZCh7ZXhwYW5kbzoialF1ZXJ5IisobStNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKC9cRC9nLCIiKSxpc1JlYWR5OiEwLGVycm9yOmZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcihhKX0sbm9vcDpmdW5jdGlvbigpe30saXNGdW5jdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4iZnVuY3Rpb24iPT09bi50eXBlKGEpfSxpc0FycmF5OkFycmF5LmlzQXJyYXksaXNXaW5kb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWEmJmE9PT1hLndpbmRvd30saXNOdW1lcmljOmZ1bmN0aW9uKGEpe3JldHVybiFuLmlzQXJyYXkoYSkmJmEtcGFyc2VGbG9hdChhKSsxPj0wfSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKGEpe3JldHVybiJvYmplY3QiIT09bi50eXBlKGEpfHxhLm5vZGVUeXBlfHxuLmlzV2luZG93KGEpPyExOmEuY29uc3RydWN0b3ImJiFqLmNhbGwoYS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsImlzUHJvdG90eXBlT2YiKT8hMTohMH0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtmb3IoYiBpbiBhKXJldHVybiExO3JldHVybiEwfSx0eXBlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP2ErIiI6Im9iamVjdCI9PXR5cGVvZiBhfHwiZnVuY3Rpb24iPT10eXBlb2YgYT9oW2kuY2FsbChhKV18fCJvYmplY3QiOnR5cGVvZiBhfSxnbG9iYWxFdmFsOmZ1bmN0aW9uKGEpe3ZhciBiLGM9ZXZhbDthPW4udHJpbShhKSxhJiYoMT09PWEuaW5kZXhPZigidXNlIHN0cmljdCIpPyhiPWwuY3JlYXRlRWxlbWVudCgic2NyaXB0IiksYi50ZXh0PWEsbC5oZWFkLmFwcGVuZENoaWxkKGIpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYikpOmMoYSkpfSxjYW1lbENhc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZShwLCJtcy0iKS5yZXBsYWNlKHEscil9LG5vZGVOYW1lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWIudG9Mb3dlckNhc2UoKX0sZWFjaDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT0wLGY9YS5sZW5ndGgsZz1zKGEpO2lmKGMpe2lmKGcpe2Zvcig7Zj5lO2UrKylpZihkPWIuYXBwbHkoYVtlXSxjKSxkPT09ITEpYnJlYWt9ZWxzZSBmb3IoZSBpbiBhKWlmKGQ9Yi5hcHBseShhW2VdLGMpLGQ9PT0hMSlicmVha31lbHNlIGlmKGcpe2Zvcig7Zj5lO2UrKylpZihkPWIuY2FsbChhW2VdLGUsYVtlXSksZD09PSExKWJyZWFrfWVsc2UgZm9yKGUgaW4gYSlpZihkPWIuY2FsbChhW2VdLGUsYVtlXSksZD09PSExKWJyZWFrO3JldHVybiBhfSx0cmltOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hPyIiOihhKyIiKS5yZXBsYWNlKG8sIiIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHxbXTtyZXR1cm4gbnVsbCE9YSYmKHMoT2JqZWN0KGEpKT9uLm1lcmdlKGMsInN0cmluZyI9PXR5cGVvZiBhP1thXTphKTpmLmNhbGwoYyxhKSksY30saW5BcnJheTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG51bGw9PWI/LTE6Zy5jYWxsKGIsYSxjKX0sbWVyZ2U6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9K2IubGVuZ3RoLGQ9MCxlPWEubGVuZ3RoO2M+ZDtkKyspYVtlKytdPWJbZF07cmV0dXJuIGEubGVuZ3RoPWUsYX0sZ3JlcDpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkLGU9W10sZj0wLGc9YS5sZW5ndGgsaD0hYztnPmY7ZisrKWQ9IWIoYVtmXSxmKSxkIT09aCYmZS5wdXNoKGFbZl0pO3JldHVybiBlfSxtYXA6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGY9MCxnPWEubGVuZ3RoLGg9cyhhKSxpPVtdO2lmKGgpZm9yKDtnPmY7ZisrKWQ9YihhW2ZdLGYsYyksbnVsbCE9ZCYmaS5wdXNoKGQpO2Vsc2UgZm9yKGYgaW4gYSlkPWIoYVtmXSxmLGMpLG51bGwhPWQmJmkucHVzaChkKTtyZXR1cm4gZS5hcHBseShbXSxpKX0sZ3VpZDoxLHByb3h5OmZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmO3JldHVybiJzdHJpbmciPT10eXBlb2YgYiYmKGM9YVtiXSxiPWEsYT1jKSxuLmlzRnVuY3Rpb24oYSk/KGU9ZC5jYWxsKGFyZ3VtZW50cywyKSxmPWZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYnx8dGhpcyxlLmNvbmNhdChkLmNhbGwoYXJndW1lbnRzKSkpfSxmLmd1aWQ9YS5ndWlkPWEuZ3VpZHx8bi5ndWlkKyssZik6dm9pZCAwfSxub3c6RGF0ZS5ub3csc3VwcG9ydDprfSksbi5lYWNoKCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIi5zcGxpdCgiICIpLGZ1bmN0aW9uKGEsYil7aFsiW29iamVjdCAiK2IrIl0iXT1iLnRvTG93ZXJDYXNlKCl9KTtmdW5jdGlvbiBzKGEpe3ZhciBiPWEubGVuZ3RoLGM9bi50eXBlKGEpO3JldHVybiJmdW5jdGlvbiI9PT1jfHxuLmlzV2luZG93KGEpPyExOjE9PT1hLm5vZGVUeXBlJiZiPyEwOiJhcnJheSI9PT1jfHwwPT09Ynx8Im51bWJlciI9PXR5cGVvZiBiJiZiPjAmJmItMSBpbiBhfXZhciB0PWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGksaixrLGwsbSxuLG8scCxxLHIscyx0LHU9InNpenpsZSIrMSpuZXcgRGF0ZSx2PWEuZG9jdW1lbnQsdz0wLHg9MCx5PWhiKCksej1oYigpLEE9aGIoKSxCPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1iJiYobD0hMCksMH0sQz0xPDwzMSxEPXt9Lmhhc093blByb3BlcnR5LEU9W10sRj1FLnBvcCxHPUUucHVzaCxIPUUucHVzaCxJPUUuc2xpY2UsSj1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKylpZihhW2NdPT09YilyZXR1cm4gYztyZXR1cm4tMX0sSz0iY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWQiLEw9IltcXHgyMFxcdFxcclxcblxcZl0iLE09Iig/OlxcXFwufFtcXHctXXxbXlxceDAwLVxceGEwXSkrIixOPU0ucmVwbGFjZSgidyIsIncjIiksTz0iXFxbIitMKyIqKCIrTSsiKSg/OiIrTCsiKihbKl4kfCF+XT89KSIrTCsiKig/OicoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwifCgiK04rIikpfCkiK0wrIipcXF0iLFA9IjooIitNKyIpKD86XFwoKCgnKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcIil8KCg/OlxcXFwufFteXFxcXCgpW1xcXV18IitPKyIpKil8LiopXFwpfCkiLFE9bmV3IFJlZ0V4cChMKyIrIiwiZyIpLFI9bmV3IFJlZ0V4cCgiXiIrTCsiK3woKD86XnxbXlxcXFxdKSg/OlxcXFwuKSopIitMKyIrJCIsImciKSxTPW5ldyBSZWdFeHAoIl4iK0wrIiosIitMKyIqIiksVD1uZXcgUmVnRXhwKCJeIitMKyIqKFs+K35dfCIrTCsiKSIrTCsiKiIpLFU9bmV3IFJlZ0V4cCgiPSIrTCsiKihbXlxcXSdcIl0qPykiK0wrIipcXF0iLCJnIiksVj1uZXcgUmVnRXhwKFApLFc9bmV3IFJlZ0V4cCgiXiIrTisiJCIpLFg9e0lEOm5ldyBSZWdFeHAoIl4jKCIrTSsiKSIpLENMQVNTOm5ldyBSZWdFeHAoIl5cXC4oIitNKyIpIiksVEFHOm5ldyBSZWdFeHAoIl4oIitNLnJlcGxhY2UoInciLCJ3KiIpKyIpIiksQVRUUjpuZXcgUmVnRXhwKCJeIitPKSxQU0VVRE86bmV3IFJlZ0V4cCgiXiIrUCksQ0hJTEQ6bmV3IFJlZ0V4cCgiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFwoIitMKyIqKGV2ZW58b2RkfCgoWystXXwpKFxcZCopbnwpIitMKyIqKD86KFsrLV18KSIrTCsiKihcXGQrKXwpKSIrTCsiKlxcKXwpIiwiaSIpLGJvb2w6bmV3IFJlZ0V4cCgiXig/OiIrSysiKSQiLCJpIiksbmVlZHNDb250ZXh0Om5ldyBSZWdFeHAoIl4iK0wrIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcKCIrTCsiKigoPzotXFxkKT9cXGQqKSIrTCsiKlxcKXwpKD89W14tXXwkKSIsImkiKX0sWT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLFo9L15oXGQkL2ksJD0vXltee10rXHtccypcW25hdGl2ZSBcdy8sXz0vXig/OiMoW1x3LV0rKXwoXHcrKXxcLihbXHctXSspKSQvLGFiPS9bK35dLyxiYj0vJ3xcXC9nLGNiPW5ldyBSZWdFeHAoIlxcXFwoW1xcZGEtZl17MSw2fSIrTCsiP3woIitMKyIpfC4pIiwiaWciKSxkYj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9IjB4IitiLTY1NTM2O3JldHVybiBkIT09ZHx8Yz9iOjA+ZD9TdHJpbmcuZnJvbUNoYXJDb2RlKGQrNjU1MzYpOlN0cmluZy5mcm9tQ2hhckNvZGUoZD4+MTB8NTUyOTYsMTAyMyZkfDU2MzIwKX0sZWI9ZnVuY3Rpb24oKXttKCl9O3RyeXtILmFwcGx5KEU9SS5jYWxsKHYuY2hpbGROb2Rlcyksdi5jaGlsZE5vZGVzKSxFW3YuY2hpbGROb2Rlcy5sZW5ndGhdLm5vZGVUeXBlfWNhdGNoKGZiKXtIPXthcHBseTpFLmxlbmd0aD9mdW5jdGlvbihhLGIpe0cuYXBwbHkoYSxJLmNhbGwoYikpfTpmdW5jdGlvbihhLGIpe3ZhciBjPWEubGVuZ3RoLGQ9MDt3aGlsZShhW2MrK109YltkKytdKTthLmxlbmd0aD1jLTF9fX1mdW5jdGlvbiBnYihhLGIsZCxlKXt2YXIgZixoLGosayxsLG8scixzLHcseDtpZigoYj9iLm93bmVyRG9jdW1lbnR8fGI6dikhPT1uJiZtKGIpLGI9Ynx8bixkPWR8fFtdLGs9Yi5ub2RlVHlwZSwic3RyaW5nIiE9dHlwZW9mIGF8fCFhfHwxIT09ayYmOSE9PWsmJjExIT09aylyZXR1cm4gZDtpZighZSYmcCl7aWYoMTEhPT1rJiYoZj1fLmV4ZWMoYSkpKWlmKGo9ZlsxXSl7aWYoOT09PWspe2lmKGg9Yi5nZXRFbGVtZW50QnlJZChqKSwhaHx8IWgucGFyZW50Tm9kZSlyZXR1cm4gZDtpZihoLmlkPT09ailyZXR1cm4gZC5wdXNoKGgpLGR9ZWxzZSBpZihiLm93bmVyRG9jdW1lbnQmJihoPWIub3duZXJEb2N1bWVudC5nZXRFbGVtZW50QnlJZChqKSkmJnQoYixoKSYmaC5pZD09PWopcmV0dXJuIGQucHVzaChoKSxkfWVsc2V7aWYoZlsyXSlyZXR1cm4gSC5hcHBseShkLGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSkpLGQ7aWYoKGo9ZlszXSkmJmMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSlyZXR1cm4gSC5hcHBseShkLGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShqKSksZH1pZihjLnFzYSYmKCFxfHwhcS50ZXN0KGEpKSl7aWYocz1yPXUsdz1iLHg9MSE9PWsmJmEsMT09PWsmJiJvYmplY3QiIT09Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXtvPWcoYSksKHI9Yi5nZXRBdHRyaWJ1dGUoImlkIikpP3M9ci5yZXBsYWNlKGJiLCJcXCQmIik6Yi5zZXRBdHRyaWJ1dGUoImlkIixzKSxzPSJbaWQ9JyIrcysiJ10gIixsPW8ubGVuZ3RoO3doaWxlKGwtLSlvW2xdPXMrcmIob1tsXSk7dz1hYi50ZXN0KGEpJiZwYihiLnBhcmVudE5vZGUpfHxiLHg9by5qb2luKCIsIil9aWYoeCl0cnl7cmV0dXJuIEguYXBwbHkoZCx3LnF1ZXJ5U2VsZWN0b3JBbGwoeCkpLGR9Y2F0Y2goeSl7fWZpbmFsbHl7cnx8Yi5yZW1vdmVBdHRyaWJ1dGUoImlkIil9fX1yZXR1cm4gaShhLnJlcGxhY2UoUiwiJDEiKSxiLGQsZSl9ZnVuY3Rpb24gaGIoKXt2YXIgYT1bXTtmdW5jdGlvbiBiKGMsZSl7cmV0dXJuIGEucHVzaChjKyIgIik+ZC5jYWNoZUxlbmd0aCYmZGVsZXRlIGJbYS5zaGlmdCgpXSxiW2MrIiAiXT1lfXJldHVybiBifWZ1bmN0aW9uIGliKGEpe3JldHVybiBhW3VdPSEwLGF9ZnVuY3Rpb24gamIoYSl7dmFyIGI9bi5jcmVhdGVFbGVtZW50KCJkaXYiKTt0cnl7cmV0dXJuISFhKGIpfWNhdGNoKGMpe3JldHVybiExfWZpbmFsbHl7Yi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksYj1udWxsfX1mdW5jdGlvbiBrYihhLGIpe3ZhciBjPWEuc3BsaXQoInwiKSxlPWEubGVuZ3RoO3doaWxlKGUtLSlkLmF0dHJIYW5kbGVbY1tlXV09Yn1mdW5jdGlvbiBsYihhLGIpe3ZhciBjPWImJmEsZD1jJiYxPT09YS5ub2RlVHlwZSYmMT09PWIubm9kZVR5cGUmJih+Yi5zb3VyY2VJbmRleHx8QyktKH5hLnNvdXJjZUluZGV4fHxDKTtpZihkKXJldHVybiBkO2lmKGMpd2hpbGUoYz1jLm5leHRTaWJsaW5nKWlmKGM9PT1iKXJldHVybi0xO3JldHVybiBhPzE6LTF9ZnVuY3Rpb24gbWIoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YyYmYi50eXBlPT09YX19ZnVuY3Rpb24gbmIoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4oImlucHV0Ij09PWN8fCJidXR0b24iPT09YykmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG9iKGEpe3JldHVybiBpYihmdW5jdGlvbihiKXtyZXR1cm4gYj0rYixpYihmdW5jdGlvbihjLGQpe3ZhciBlLGY9YShbXSxjLmxlbmd0aCxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSljW2U9ZltnXV0mJihjW2VdPSEoZFtlXT1jW2VdKSl9KX0pfWZ1bmN0aW9uIHBiKGEpe3JldHVybiBhJiYidW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUmJmF9Yz1nYi5zdXBwb3J0PXt9LGY9Z2IuaXNYTUw9ZnVuY3Rpb24oYSl7dmFyIGI9YSYmKGEub3duZXJEb2N1bWVudHx8YSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiBiPyJIVE1MIiE9PWIubm9kZU5hbWU6ITF9LG09Z2Iuc2V0RG9jdW1lbnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZSxnPWE/YS5vd25lckRvY3VtZW50fHxhOnY7cmV0dXJuIGchPT1uJiY5PT09Zy5ub2RlVHlwZSYmZy5kb2N1bWVudEVsZW1lbnQ/KG49ZyxvPWcuZG9jdW1lbnRFbGVtZW50LGU9Zy5kZWZhdWx0VmlldyxlJiZlIT09ZS50b3AmJihlLmFkZEV2ZW50TGlzdGVuZXI/ZS5hZGRFdmVudExpc3RlbmVyKCJ1bmxvYWQiLGViLCExKTplLmF0dGFjaEV2ZW50JiZlLmF0dGFjaEV2ZW50KCJvbnVubG9hZCIsZWIpKSxwPSFmKGcpLGMuYXR0cmlidXRlcz1qYihmdW5jdGlvbihhKXtyZXR1cm4gYS5jbGFzc05hbWU9ImkiLCFhLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KSxjLmdldEVsZW1lbnRzQnlUYWdOYW1lPWpiKGZ1bmN0aW9uKGEpe3JldHVybiBhLmFwcGVuZENoaWxkKGcuY3JlYXRlQ29tbWVudCgiIikpLCFhLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RofSksYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPSQudGVzdChnLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLGMuZ2V0QnlJZD1qYihmdW5jdGlvbihhKXtyZXR1cm4gby5hcHBlbmRDaGlsZChhKS5pZD11LCFnLmdldEVsZW1lbnRzQnlOYW1lfHwhZy5nZXRFbGVtZW50c0J5TmFtZSh1KS5sZW5ndGh9KSxjLmdldEJ5SWQ/KGQuZmluZC5JRD1mdW5jdGlvbihhLGIpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgYi5nZXRFbGVtZW50QnlJZCYmcCl7dmFyIGM9Yi5nZXRFbGVtZW50QnlJZChhKTtyZXR1cm4gYyYmYy5wYXJlbnROb2RlP1tjXTpbXX19LGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShjYixkYik7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZSgiaWQiKT09PWJ9fSk6KGRlbGV0ZSBkLmZpbmQuSUQsZC5maWx0ZXIuSUQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGNiLGRiKTtyZXR1cm4gZnVuY3Rpb24oYSl7dmFyIGM9InVuZGVmaW5lZCIhPXR5cGVvZiBhLmdldEF0dHJpYnV0ZU5vZGUmJmEuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtyZXR1cm4gYyYmYy52YWx1ZT09PWJ9fSksZC5maW5kLlRBRz1jLmdldEVsZW1lbnRzQnlUYWdOYW1lP2Z1bmN0aW9uKGEsYil7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBiLmdldEVsZW1lbnRzQnlUYWdOYW1lP2IuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSk6Yy5xc2E/Yi5xdWVyeVNlbGVjdG9yQWxsKGEpOnZvaWQgMH06ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9MCxmPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSk7aWYoIioiPT09YSl7d2hpbGUoYz1mW2UrK10pMT09PWMubm9kZVR5cGUmJmQucHVzaChjKTtyZXR1cm4gZH1yZXR1cm4gZn0sZC5maW5kLkNMQVNTPWMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZnVuY3Rpb24oYSxiKXtyZXR1cm4gcD9iLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYSk6dm9pZCAwfSxyPVtdLHE9W10sKGMucXNhPSQudGVzdChnLnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKGpiKGZ1bmN0aW9uKGEpe28uYXBwZW5kQ2hpbGQoYSkuaW5uZXJIVE1MPSI8YSBpZD0nIit1KyInPjwvYT48c2VsZWN0IGlkPSciK3UrIi1cZl0nIG1zYWxsb3djYXB0dXJlPScnPjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+IixhLnF1ZXJ5U2VsZWN0b3JBbGwoIlttc2FsbG93Y2FwdHVyZV49JyddIikubGVuZ3RoJiZxLnB1c2goIlsqXiRdPSIrTCsiKig/OicnfFwiXCIpIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJbc2VsZWN0ZWRdIikubGVuZ3RofHxxLnB1c2goIlxcWyIrTCsiKig/OnZhbHVlfCIrSysiKSIpLGEucXVlcnlTZWxlY3RvckFsbCgiW2lkfj0iK3UrIi1dIikubGVuZ3RofHxxLnB1c2goIn49IiksYS5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aHx8cS5wdXNoKCI6Y2hlY2tlZCIpLGEucXVlcnlTZWxlY3RvckFsbCgiYSMiK3UrIisqIikubGVuZ3RofHxxLnB1c2goIi4jLitbK35dIil9KSxqYihmdW5jdGlvbihhKXt2YXIgYj1nLmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7Yi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJoaWRkZW4iKSxhLmFwcGVuZENoaWxkKGIpLnNldEF0dHJpYnV0ZSgibmFtZSIsIkQiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIltuYW1lPWRdIikubGVuZ3RoJiZxLnB1c2goIm5hbWUiK0wrIipbKl4kfCF+XT89IiksYS5xdWVyeVNlbGVjdG9yQWxsKCI6ZW5hYmxlZCIpLmxlbmd0aHx8cS5wdXNoKCI6ZW5hYmxlZCIsIjpkaXNhYmxlZCIpLGEucXVlcnlTZWxlY3RvckFsbCgiKiw6eCIpLHEucHVzaCgiLC4qOiIpfSkpLChjLm1hdGNoZXNTZWxlY3Rvcj0kLnRlc3Qocz1vLm1hdGNoZXN8fG8ud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxvLm1vek1hdGNoZXNTZWxlY3Rvcnx8by5vTWF0Y2hlc1NlbGVjdG9yfHxvLm1zTWF0Y2hlc1NlbGVjdG9yKSkmJmpiKGZ1bmN0aW9uKGEpe2MuZGlzY29ubmVjdGVkTWF0Y2g9cy5jYWxsKGEsImRpdiIpLHMuY2FsbChhLCJbcyE9JyddOngiKSxyLnB1c2goIiE9IixQKX0pLHE9cS5sZW5ndGgmJm5ldyBSZWdFeHAocS5qb2luKCJ8IikpLHI9ci5sZW5ndGgmJm5ldyBSZWdFeHAoci5qb2luKCJ8IikpLGI9JC50ZXN0KG8uY29tcGFyZURvY3VtZW50UG9zaXRpb24pLHQ9Ynx8JC50ZXN0KG8uY29udGFpbnMpP2Z1bmN0aW9uKGEsYil7dmFyIGM9OT09PWEubm9kZVR5cGU/YS5kb2N1bWVudEVsZW1lbnQ6YSxkPWImJmIucGFyZW50Tm9kZTtyZXR1cm4gYT09PWR8fCEoIWR8fDEhPT1kLm5vZGVUeXBlfHwhKGMuY29udGFpbnM/Yy5jb250YWlucyhkKTphLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiYxNiZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGQpKSl9OmZ1bmN0aW9uKGEsYil7aWYoYil3aGlsZShiPWIucGFyZW50Tm9kZSlpZihiPT09YSlyZXR1cm4hMDtyZXR1cm4hMX0sQj1iP2Z1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgZD0hYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbi0hYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtyZXR1cm4gZD9kOihkPShhLm93bmVyRG9jdW1lbnR8fGEpPT09KGIub3duZXJEb2N1bWVudHx8Yik/YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihiKToxLDEmZHx8IWMuc29ydERldGFjaGVkJiZiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGEpPT09ZD9hPT09Z3x8YS5vd25lckRvY3VtZW50PT09diYmdCh2LGEpPy0xOmI9PT1nfHxiLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYik/MTprP0ooayxhKS1KKGssYik6MDo0JmQ/LTE6MSl9OmZ1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgYyxkPTAsZT1hLnBhcmVudE5vZGUsZj1iLnBhcmVudE5vZGUsaD1bYV0saT1bYl07aWYoIWV8fCFmKXJldHVybiBhPT09Zz8tMTpiPT09Zz8xOmU/LTE6Zj8xOms/SihrLGEpLUooayxiKTowO2lmKGU9PT1mKXJldHVybiBsYihhLGIpO2M9YTt3aGlsZShjPWMucGFyZW50Tm9kZSloLnVuc2hpZnQoYyk7Yz1iO3doaWxlKGM9Yy5wYXJlbnROb2RlKWkudW5zaGlmdChjKTt3aGlsZShoW2RdPT09aVtkXSlkKys7cmV0dXJuIGQ/bGIoaFtkXSxpW2RdKTpoW2RdPT09dj8tMTppW2RdPT09dj8xOjB9LGcpOm59LGdiLm1hdGNoZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZ2IoYSxudWxsLG51bGwsYil9LGdiLm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihhLGIpe2lmKChhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSxiPWIucmVwbGFjZShVLCI9JyQxJ10iKSwhKCFjLm1hdGNoZXNTZWxlY3Rvcnx8IXB8fHImJnIudGVzdChiKXx8cSYmcS50ZXN0KGIpKSl0cnl7dmFyIGQ9cy5jYWxsKGEsYik7aWYoZHx8Yy5kaXNjb25uZWN0ZWRNYXRjaHx8YS5kb2N1bWVudCYmMTEhPT1hLmRvY3VtZW50Lm5vZGVUeXBlKXJldHVybiBkfWNhdGNoKGUpe31yZXR1cm4gZ2IoYixuLG51bGwsW2FdKS5sZW5ndGg+MH0sZ2IuY29udGFpbnM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSksdChhLGIpfSxnYi5hdHRyPWZ1bmN0aW9uKGEsYil7KGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpO3ZhciBlPWQuYXR0ckhhbmRsZVtiLnRvTG93ZXJDYXNlKCldLGY9ZSYmRC5jYWxsKGQuYXR0ckhhbmRsZSxiLnRvTG93ZXJDYXNlKCkpP2UoYSxiLCFwKTp2b2lkIDA7cmV0dXJuIHZvaWQgMCE9PWY/ZjpjLmF0dHJpYnV0ZXN8fCFwP2EuZ2V0QXR0cmlidXRlKGIpOihmPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmYuc3BlY2lmaWVkP2YudmFsdWU6bnVsbH0sZ2IuZXJyb3I9ZnVuY3Rpb24oYSl7dGhyb3cgbmV3IEVycm9yKCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiAiK2EpfSxnYi51bmlxdWVTb3J0PWZ1bmN0aW9uKGEpe3ZhciBiLGQ9W10sZT0wLGY9MDtpZihsPSFjLmRldGVjdER1cGxpY2F0ZXMsaz0hYy5zb3J0U3RhYmxlJiZhLnNsaWNlKDApLGEuc29ydChCKSxsKXt3aGlsZShiPWFbZisrXSliPT09YVtmXSYmKGU9ZC5wdXNoKGYpKTt3aGlsZShlLS0pYS5zcGxpY2UoZFtlXSwxKX1yZXR1cm4gaz1udWxsLGF9LGU9Z2IuZ2V0VGV4dD1mdW5jdGlvbihhKXt2YXIgYixjPSIiLGQ9MCxmPWEubm9kZVR5cGU7aWYoZil7aWYoMT09PWZ8fDk9PT1mfHwxMT09PWYpe2lmKCJzdHJpbmciPT10eXBlb2YgYS50ZXh0Q29udGVudClyZXR1cm4gYS50ZXh0Q29udGVudDtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpYys9ZShhKX1lbHNlIGlmKDM9PT1mfHw0PT09ZilyZXR1cm4gYS5ub2RlVmFsdWV9ZWxzZSB3aGlsZShiPWFbZCsrXSljKz1lKGIpO3JldHVybiBjfSxkPWdiLnNlbGVjdG9ycz17Y2FjaGVMZW5ndGg6NTAsY3JlYXRlUHNldWRvOmliLG1hdGNoOlgsYXR0ckhhbmRsZTp7fSxmaW5kOnt9LHJlbGF0aXZlOnsiPiI6e2RpcjoicGFyZW50Tm9kZSIsZmlyc3Q6ITB9LCIgIjp7ZGlyOiJwYXJlbnROb2RlIn0sIisiOntkaXI6InByZXZpb3VzU2libGluZyIsZmlyc3Q6ITB9LCJ+Ijp7ZGlyOiJwcmV2aW91c1NpYmxpbmcifX0scHJlRmlsdGVyOntBVFRSOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0ucmVwbGFjZShjYixkYiksYVszXT0oYVszXXx8YVs0XXx8YVs1XXx8IiIpLnJlcGxhY2UoY2IsZGIpLCJ+PSI9PT1hWzJdJiYoYVszXT0iICIrYVszXSsiICIpLGEuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS50b0xvd2VyQ2FzZSgpLCJudGgiPT09YVsxXS5zbGljZSgwLDMpPyhhWzNdfHxnYi5lcnJvcihhWzBdKSxhWzRdPSsoYVs0XT9hWzVdKyhhWzZdfHwxKToyKigiZXZlbiI9PT1hWzNdfHwib2RkIj09PWFbM10pKSxhWzVdPSsoYVs3XSthWzhdfHwib2RkIj09PWFbM10pKTphWzNdJiZnYi5lcnJvcihhWzBdKSxhfSxQU0VVRE86ZnVuY3Rpb24oYSl7dmFyIGIsYz0hYVs2XSYmYVsyXTtyZXR1cm4gWC5DSElMRC50ZXN0KGFbMF0pP251bGw6KGFbM10/YVsyXT1hWzRdfHxhWzVdfHwiIjpjJiZWLnRlc3QoYykmJihiPWcoYywhMCkpJiYoYj1jLmluZGV4T2YoIikiLGMubGVuZ3RoLWIpLWMubGVuZ3RoKSYmKGFbMF09YVswXS5zbGljZSgwLGIpLGFbMl09Yy5zbGljZSgwLGIpKSxhLnNsaWNlKDAsMykpfX0sZmlsdGVyOntUQUc6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGNiLGRiKS50b0xvd2VyQ2FzZSgpO3JldHVybiIqIj09PWE/ZnVuY3Rpb24oKXtyZXR1cm4hMH06ZnVuY3Rpb24oYSl7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWJ9fSxDTEFTUzpmdW5jdGlvbihhKXt2YXIgYj15W2ErIiAiXTtyZXR1cm4gYnx8KGI9bmV3IFJlZ0V4cCgiKF58IitMKyIpIithKyIoIitMKyJ8JCkiKSkmJnkoYSxmdW5jdGlvbihhKXtyZXR1cm4gYi50ZXN0KCJzdHJpbmciPT10eXBlb2YgYS5jbGFzc05hbWUmJmEuY2xhc3NOYW1lfHwidW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0QXR0cmlidXRlJiZhLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpfSl9LEFUVFI6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXt2YXIgZT1nYi5hdHRyKGQsYSk7cmV0dXJuIG51bGw9PWU/IiE9Ij09PWI6Yj8oZSs9IiIsIj0iPT09Yj9lPT09YzoiIT0iPT09Yj9lIT09YzoiXj0iPT09Yj9jJiYwPT09ZS5pbmRleE9mKGMpOiIqPSI9PT1iP2MmJmUuaW5kZXhPZihjKT4tMToiJD0iPT09Yj9jJiZlLnNsaWNlKC1jLmxlbmd0aCk9PT1jOiJ+PSI9PT1iPygiICIrZS5yZXBsYWNlKFEsIiAiKSsiICIpLmluZGV4T2YoYyk+LTE6Inw9Ij09PWI/ZT09PWN8fGUuc2xpY2UoMCxjLmxlbmd0aCsxKT09PWMrIi0iOiExKTohMH19LENISUxEOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9Im50aCIhPT1hLnNsaWNlKDAsMyksZz0ibGFzdCIhPT1hLnNsaWNlKC00KSxoPSJvZi10eXBlIj09PWI7cmV0dXJuIDE9PT1kJiYwPT09ZT9mdW5jdGlvbihhKXtyZXR1cm4hIWEucGFyZW50Tm9kZX06ZnVuY3Rpb24oYixjLGkpe3ZhciBqLGssbCxtLG4sbyxwPWYhPT1nPyJuZXh0U2libGluZyI6InByZXZpb3VzU2libGluZyIscT1iLnBhcmVudE5vZGUscj1oJiZiLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkscz0haSYmIWg7aWYocSl7aWYoZil7d2hpbGUocCl7bD1iO3doaWxlKGw9bFtwXSlpZihoP2wubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PWwubm9kZVR5cGUpcmV0dXJuITE7bz1wPSJvbmx5Ij09PWEmJiFvJiYibmV4dFNpYmxpbmcifXJldHVybiEwfWlmKG89W2c/cS5maXJzdENoaWxkOnEubGFzdENoaWxkXSxnJiZzKXtrPXFbdV18fChxW3VdPXt9KSxqPWtbYV18fFtdLG49alswXT09PXcmJmpbMV0sbT1qWzBdPT09dyYmalsyXSxsPW4mJnEuY2hpbGROb2Rlc1tuXTt3aGlsZShsPSsrbiYmbCYmbFtwXXx8KG09bj0wKXx8by5wb3AoKSlpZigxPT09bC5ub2RlVHlwZSYmKyttJiZsPT09Yil7a1thXT1bdyxuLG1dO2JyZWFrfX1lbHNlIGlmKHMmJihqPShiW3VdfHwoYlt1XT17fSkpW2FdKSYmalswXT09PXcpbT1qWzFdO2Vsc2Ugd2hpbGUobD0rK24mJmwmJmxbcF18fChtPW49MCl8fG8ucG9wKCkpaWYoKGg/bC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09cjoxPT09bC5ub2RlVHlwZSkmJisrbSYmKHMmJigobFt1XXx8KGxbdV09e30pKVthXT1bdyxtXSksbD09PWIpKWJyZWFrO3JldHVybiBtLT1lLG09PT1kfHxtJWQ9PT0wJiZtL2Q+PTB9fX0sUFNFVURPOmZ1bmN0aW9uKGEsYil7dmFyIGMsZT1kLnBzZXVkb3NbYV18fGQuc2V0RmlsdGVyc1thLnRvTG93ZXJDYXNlKCldfHxnYi5lcnJvcigidW5zdXBwb3J0ZWQgcHNldWRvOiAiK2EpO3JldHVybiBlW3VdP2UoYik6ZS5sZW5ndGg+MT8oYz1bYSxhLCIiLGJdLGQuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShhLnRvTG93ZXJDYXNlKCkpP2liKGZ1bmN0aW9uKGEsYyl7dmFyIGQsZj1lKGEsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pZD1KKGEsZltnXSksYVtkXT0hKGNbZF09ZltnXSl9KTpmdW5jdGlvbihhKXtyZXR1cm4gZShhLDAsYyl9KTplfX0scHNldWRvczp7bm90OmliKGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W10sZD1oKGEucmVwbGFjZShSLCIkMSIpKTtyZXR1cm4gZFt1XT9pYihmdW5jdGlvbihhLGIsYyxlKXt2YXIgZixnPWQoYSxudWxsLGUsW10pLGg9YS5sZW5ndGg7d2hpbGUoaC0tKShmPWdbaF0pJiYoYVtoXT0hKGJbaF09ZikpfSk6ZnVuY3Rpb24oYSxlLGYpe3JldHVybiBiWzBdPWEsZChiLG51bGwsZixjKSxiWzBdPW51bGwsIWMucG9wKCl9fSksaGFzOmliKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZ2IoYSxiKS5sZW5ndGg+MH19KSxjb250YWluczppYihmdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UoY2IsZGIpLGZ1bmN0aW9uKGIpe3JldHVybihiLnRleHRDb250ZW50fHxiLmlubmVyVGV4dHx8ZShiKSkuaW5kZXhPZihhKT4tMX19KSxsYW5nOmliKGZ1bmN0aW9uKGEpe3JldHVybiBXLnRlc3QoYXx8IiIpfHxnYi5lcnJvcigidW5zdXBwb3J0ZWQgbGFuZzogIithKSxhPWEucmVwbGFjZShjYixkYikudG9Mb3dlckNhc2UoKSxmdW5jdGlvbihiKXt2YXIgYztkbyBpZihjPXA/Yi5sYW5nOmIuZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpfHxiLmdldEF0dHJpYnV0ZSgibGFuZyIpKXJldHVybiBjPWMudG9Mb3dlckNhc2UoKSxjPT09YXx8MD09PWMuaW5kZXhPZihhKyItIik7d2hpbGUoKGI9Yi5wYXJlbnROb2RlKSYmMT09PWIubm9kZVR5cGUpO3JldHVybiExfX0pLHRhcmdldDpmdW5jdGlvbihiKXt2YXIgYz1hLmxvY2F0aW9uJiZhLmxvY2F0aW9uLmhhc2g7cmV0dXJuIGMmJmMuc2xpY2UoMSk9PT1iLmlkfSxyb290OmZ1bmN0aW9uKGEpe3JldHVybiBhPT09b30sZm9jdXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1uLmFjdGl2ZUVsZW1lbnQmJighbi5oYXNGb2N1c3x8bi5oYXNGb2N1cygpKSYmISEoYS50eXBlfHxhLmhyZWZ8fH5hLnRhYkluZGV4KX0sZW5hYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSExfSxkaXNhYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSEwfSxjaGVja2VkOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmISFhLmNoZWNrZWR8fCJvcHRpb24iPT09YiYmISFhLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxhLnNlbGVjdGVkPT09ITB9LGVtcHR5OmZ1bmN0aW9uKGEpe2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylpZihhLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4hZC5wc2V1ZG9zLmVtcHR5KGEpfSxoZWFkZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIFoudGVzdChhLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFkudGVzdChhLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmImJ1dHRvbiI9PT1hLnR5cGV8fCJidXR0b24iPT09Yn0sdGV4dDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4iaW5wdXQiPT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYidGV4dCI9PT1hLnR5cGUmJihudWxsPT0oYj1hLmdldEF0dHJpYnV0ZSgidHlwZSIpKXx8InRleHQiPT09Yi50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6b2IoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0Om9iKGZ1bmN0aW9uKGEsYil7cmV0dXJuW2ItMV19KSxlcTpvYihmdW5jdGlvbihhLGIsYyl7cmV0dXJuWzA+Yz9jK2I6Y119KSxldmVuOm9iKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksb2RkOm9iKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksbHQ6b2IoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wPmM/YytiOmM7LS1kPj0wOylhLnB1c2goZCk7cmV0dXJuIGF9KSxndDpvYihmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA+Yz9jK2I6YzsrK2Q8YjspYS5wdXNoKGQpO3JldHVybiBhfSl9fSxkLnBzZXVkb3MubnRoPWQucHNldWRvcy5lcTtmb3IoYiBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlkLnBzZXVkb3NbYl09bWIoYik7Zm9yKGIgaW57c3VibWl0OiEwLHJlc2V0OiEwfSlkLnBzZXVkb3NbYl09bmIoYik7ZnVuY3Rpb24gcWIoKXt9cWIucHJvdG90eXBlPWQuZmlsdGVycz1kLnBzZXVkb3MsZC5zZXRGaWx0ZXJzPW5ldyBxYixnPWdiLnRva2VuaXplPWZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGcsaCxpLGosaz16W2ErIiAiXTtpZihrKXJldHVybiBiPzA6ay5zbGljZSgwKTtoPWEsaT1bXSxqPWQucHJlRmlsdGVyO3doaWxlKGgpeyghY3x8KGU9Uy5leGVjKGgpKSkmJihlJiYoaD1oLnNsaWNlKGVbMF0ubGVuZ3RoKXx8aCksaS5wdXNoKGY9W10pKSxjPSExLChlPVQuZXhlYyhoKSkmJihjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTplWzBdLnJlcGxhY2UoUiwiICIpfSksaD1oLnNsaWNlKGMubGVuZ3RoKSk7Zm9yKGcgaW4gZC5maWx0ZXIpIShlPVhbZ10uZXhlYyhoKSl8fGpbZ10mJiEoZT1qW2ddKGUpKXx8KGM9ZS5zaGlmdCgpLGYucHVzaCh7dmFsdWU6Yyx0eXBlOmcsbWF0Y2hlczplfSksaD1oLnNsaWNlKGMubGVuZ3RoKSk7aWYoIWMpYnJlYWt9cmV0dXJuIGI/aC5sZW5ndGg6aD9nYi5lcnJvcihhKTp6KGEsaSkuc2xpY2UoMCl9O2Z1bmN0aW9uIHJiKGEpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGgsZD0iIjtjPmI7YisrKWQrPWFbYl0udmFsdWU7cmV0dXJuIGR9ZnVuY3Rpb24gc2IoYSxiLGMpe3ZhciBkPWIuZGlyLGU9YyYmInBhcmVudE5vZGUiPT09ZCxmPXgrKztyZXR1cm4gYi5maXJzdD9mdW5jdGlvbihiLGMsZil7d2hpbGUoYj1iW2RdKWlmKDE9PT1iLm5vZGVUeXBlfHxlKXJldHVybiBhKGIsYyxmKX06ZnVuY3Rpb24oYixjLGcpe3ZhciBoLGksaj1bdyxmXTtpZihnKXt3aGlsZShiPWJbZF0paWYoKDE9PT1iLm5vZGVUeXBlfHxlKSYmYShiLGMsZykpcmV0dXJuITB9ZWxzZSB3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGUpe2lmKGk9Ylt1XXx8KGJbdV09e30pLChoPWlbZF0pJiZoWzBdPT09dyYmaFsxXT09PWYpcmV0dXJuIGpbMl09aFsyXTtpZihpW2RdPWosalsyXT1hKGIsYyxnKSlyZXR1cm4hMH19fWZ1bmN0aW9uIHRiKGEpe3JldHVybiBhLmxlbmd0aD4xP2Z1bmN0aW9uKGIsYyxkKXt2YXIgZT1hLmxlbmd0aDt3aGlsZShlLS0paWYoIWFbZV0oYixjLGQpKXJldHVybiExO3JldHVybiEwfTphWzBdfWZ1bmN0aW9uIHViKGEsYixjKXtmb3IodmFyIGQ9MCxlPWIubGVuZ3RoO2U+ZDtkKyspZ2IoYSxiW2RdLGMpO3JldHVybiBjfWZ1bmN0aW9uIHZiKGEsYixjLGQsZSl7Zm9yKHZhciBmLGc9W10saD0wLGk9YS5sZW5ndGgsaj1udWxsIT1iO2k+aDtoKyspKGY9YVtoXSkmJighY3x8YyhmLGQsZSkpJiYoZy5wdXNoKGYpLGomJmIucHVzaChoKSk7cmV0dXJuIGd9ZnVuY3Rpb24gd2IoYSxiLGMsZCxlLGYpe3JldHVybiBkJiYhZFt1XSYmKGQ9d2IoZCkpLGUmJiFlW3VdJiYoZT13YihlLGYpKSxpYihmdW5jdGlvbihmLGcsaCxpKXt2YXIgaixrLGwsbT1bXSxuPVtdLG89Zy5sZW5ndGgscD1mfHx1YihifHwiKiIsaC5ub2RlVHlwZT9baF06aCxbXSkscT0hYXx8IWYmJmI/cDp2YihwLG0sYSxoLGkpLHI9Yz9lfHwoZj9hOm98fGQpP1tdOmc6cTtpZihjJiZjKHEscixoLGkpLGQpe2o9dmIocixuKSxkKGosW10saCxpKSxrPWoubGVuZ3RoO3doaWxlKGstLSkobD1qW2tdKSYmKHJbbltrXV09IShxW25ba11dPWwpKX1pZihmKXtpZihlfHxhKXtpZihlKXtqPVtdLGs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiZqLnB1c2gocVtrXT1sKTtlKG51bGwscj1bXSxqLGkpfWs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiYoaj1lP0ooZixsKTptW2tdKT4tMSYmKGZbal09IShnW2pdPWwpKX19ZWxzZSByPXZiKHI9PT1nP3Iuc3BsaWNlKG8sci5sZW5ndGgpOnIpLGU/ZShudWxsLGcscixpKTpILmFwcGx5KGcscil9KX1mdW5jdGlvbiB4YihhKXtmb3IodmFyIGIsYyxlLGY9YS5sZW5ndGgsZz1kLnJlbGF0aXZlW2FbMF0udHlwZV0saD1nfHxkLnJlbGF0aXZlWyIgIl0saT1nPzE6MCxrPXNiKGZ1bmN0aW9uKGEpe3JldHVybiBhPT09Yn0saCwhMCksbD1zYihmdW5jdGlvbihhKXtyZXR1cm4gSihiLGEpPi0xfSxoLCEwKSxtPVtmdW5jdGlvbihhLGMsZCl7dmFyIGU9IWcmJihkfHxjIT09ail8fCgoYj1jKS5ub2RlVHlwZT9rKGEsYyxkKTpsKGEsYyxkKSk7cmV0dXJuIGI9bnVsbCxlfV07Zj5pO2krKylpZihjPWQucmVsYXRpdmVbYVtpXS50eXBlXSltPVtzYih0YihtKSxjKV07ZWxzZXtpZihjPWQuZmlsdGVyW2FbaV0udHlwZV0uYXBwbHkobnVsbCxhW2ldLm1hdGNoZXMpLGNbdV0pe2ZvcihlPSsraTtmPmU7ZSsrKWlmKGQucmVsYXRpdmVbYVtlXS50eXBlXSlicmVhaztyZXR1cm4gd2IoaT4xJiZ0YihtKSxpPjEmJnJiKGEuc2xpY2UoMCxpLTEpLmNvbmNhdCh7dmFsdWU6IiAiPT09YVtpLTJdLnR5cGU/IioiOiIifSkpLnJlcGxhY2UoUiwiJDEiKSxjLGU+aSYmeGIoYS5zbGljZShpLGUpKSxmPmUmJnhiKGE9YS5zbGljZShlKSksZj5lJiZyYihhKSl9bS5wdXNoKGMpfXJldHVybiB0YihtKX1mdW5jdGlvbiB5YihhLGIpe3ZhciBjPWIubGVuZ3RoPjAsZT1hLmxlbmd0aD4wLGY9ZnVuY3Rpb24oZixnLGgsaSxrKXt2YXIgbCxtLG8scD0wLHE9IjAiLHI9ZiYmW10scz1bXSx0PWosdT1mfHxlJiZkLmZpbmQuVEFHKCIqIixrKSx2PXcrPW51bGw9PXQ/MTpNYXRoLnJhbmRvbSgpfHwuMSx4PXUubGVuZ3RoO2ZvcihrJiYoaj1nIT09biYmZyk7cSE9PXgmJm51bGwhPShsPXVbcV0pO3ErKyl7aWYoZSYmbCl7bT0wO3doaWxlKG89YVttKytdKWlmKG8obCxnLGgpKXtpLnB1c2gobCk7YnJlYWt9ayYmKHc9dil9YyYmKChsPSFvJiZsKSYmcC0tLGYmJnIucHVzaChsKSl9aWYocCs9cSxjJiZxIT09cCl7bT0wO3doaWxlKG89YlttKytdKW8ocixzLGcsaCk7aWYoZil7aWYocD4wKXdoaWxlKHEtLSlyW3FdfHxzW3FdfHwoc1txXT1GLmNhbGwoaSkpO3M9dmIocyl9SC5hcHBseShpLHMpLGsmJiFmJiZzLmxlbmd0aD4wJiZwK2IubGVuZ3RoPjEmJmdiLnVuaXF1ZVNvcnQoaSl9cmV0dXJuIGsmJih3PXYsaj10KSxyfTtyZXR1cm4gYz9pYihmKTpmfXJldHVybiBoPWdiLmNvbXBpbGU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9W10sZj1BW2ErIiAiXTtpZighZil7Ynx8KGI9ZyhhKSksYz1iLmxlbmd0aDt3aGlsZShjLS0pZj14YihiW2NdKSxmW3VdP2QucHVzaChmKTplLnB1c2goZik7Zj1BKGEseWIoZSxkKSksZi5zZWxlY3Rvcj1hfXJldHVybiBmfSxpPWdiLnNlbGVjdD1mdW5jdGlvbihhLGIsZSxmKXt2YXIgaSxqLGssbCxtLG49ImZ1bmN0aW9uIj09dHlwZW9mIGEmJmEsbz0hZiYmZyhhPW4uc2VsZWN0b3J8fGEpO2lmKGU9ZXx8W10sMT09PW8ubGVuZ3RoKXtpZihqPW9bMF09b1swXS5zbGljZSgwKSxqLmxlbmd0aD4yJiYiSUQiPT09KGs9alswXSkudHlwZSYmYy5nZXRCeUlkJiY5PT09Yi5ub2RlVHlwZSYmcCYmZC5yZWxhdGl2ZVtqWzFdLnR5cGVdKXtpZihiPShkLmZpbmQuSUQoay5tYXRjaGVzWzBdLnJlcGxhY2UoY2IsZGIpLGIpfHxbXSlbMF0sIWIpcmV0dXJuIGU7biYmKGI9Yi5wYXJlbnROb2RlKSxhPWEuc2xpY2Uoai5zaGlmdCgpLnZhbHVlLmxlbmd0aCl9aT1YLm5lZWRzQ29udGV4dC50ZXN0KGEpPzA6ai5sZW5ndGg7d2hpbGUoaS0tKXtpZihrPWpbaV0sZC5yZWxhdGl2ZVtsPWsudHlwZV0pYnJlYWs7aWYoKG09ZC5maW5kW2xdKSYmKGY9bShrLm1hdGNoZXNbMF0ucmVwbGFjZShjYixkYiksYWIudGVzdChqWzBdLnR5cGUpJiZwYihiLnBhcmVudE5vZGUpfHxiKSkpe2lmKGouc3BsaWNlKGksMSksYT1mLmxlbmd0aCYmcmIoaiksIWEpcmV0dXJuIEguYXBwbHkoZSxmKSxlO2JyZWFrfX19cmV0dXJuKG58fGgoYSxvKSkoZixiLCFwLGUsYWIudGVzdChhKSYmcGIoYi5wYXJlbnROb2RlKXx8YiksZX0sYy5zb3J0U3RhYmxlPXUuc3BsaXQoIiIpLnNvcnQoQikuam9pbigiIik9PT11LGMuZGV0ZWN0RHVwbGljYXRlcz0hIWwsbSgpLGMuc29ydERldGFjaGVkPWpiKGZ1bmN0aW9uKGEpe3JldHVybiAxJmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24obi5jcmVhdGVFbGVtZW50KCJkaXYiKSl9KSxqYihmdW5jdGlvbihhKXtyZXR1cm4gYS5pbm5lckhUTUw9IjxhIGhyZWY9JyMnPjwvYT4iLCIjIj09PWEuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoImhyZWYiKX0pfHxrYigidHlwZXxocmVmfGhlaWdodHx3aWR0aCIsZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjP3ZvaWQgMDphLmdldEF0dHJpYnV0ZShiLCJ0eXBlIj09PWIudG9Mb3dlckNhc2UoKT8xOjIpfSksYy5hdHRyaWJ1dGVzJiZqYihmdW5jdGlvbihhKXtyZXR1cm4gYS5pbm5lckhUTUw9IjxpbnB1dC8+IixhLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsIiIpLCIiPT09YS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgidmFsdWUiKX0pfHxrYigidmFsdWUiLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gY3x8ImlucHV0IiE9PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT92b2lkIDA6YS5kZWZhdWx0VmFsdWV9KSxqYihmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YS5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIil9KXx8a2IoSyxmdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGM/dm9pZCAwOmFbYl09PT0hMD9iLnRvTG93ZXJDYXNlKCk6KGQ9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpKSYmZC5zcGVjaWZpZWQ/ZC52YWx1ZTpudWxsfSksZ2J9KGEpO24uZmluZD10LG4uZXhwcj10LnNlbGVjdG9ycyxuLmV4cHJbIjoiXT1uLmV4cHIucHNldWRvcyxuLnVuaXF1ZT10LnVuaXF1ZVNvcnQsbi50ZXh0PXQuZ2V0VGV4dCxuLmlzWE1MRG9jPXQuaXNYTUwsbi5jb250YWlucz10LmNvbnRhaW5zO3ZhciB1PW4uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQsdj0vXjwoXHcrKVxzKlwvPz4oPzo8XC9cMT58KSQvLHc9L14uW146I1xbXC4sXSokLztmdW5jdGlvbiB4KGEsYixjKXtpZihuLmlzRnVuY3Rpb24oYikpcmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEsZCl7cmV0dXJuISFiLmNhbGwoYSxkLGEpIT09Y30pO2lmKGIubm9kZVR5cGUpcmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBhPT09YiE9PWN9KTtpZigic3RyaW5nIj09dHlwZW9mIGIpe2lmKHcudGVzdChiKSlyZXR1cm4gbi5maWx0ZXIoYixhLGMpO2I9bi5maWx0ZXIoYixhKX1yZXR1cm4gbi5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGcuY2FsbChiLGEpPj0wIT09Y30pfW4uZmlsdGVyPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1iWzBdO3JldHVybiBjJiYoYT0iOm5vdCgiK2ErIikiKSwxPT09Yi5sZW5ndGgmJjE9PT1kLm5vZGVUeXBlP24uZmluZC5tYXRjaGVzU2VsZWN0b3IoZCxhKT9bZF06W106bi5maW5kLm1hdGNoZXMoYSxuLmdyZXAoYixmdW5jdGlvbihhKXtyZXR1cm4gMT09PWEubm9kZVR5cGV9KSl9LG4uZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKGEpe3ZhciBiLGM9dGhpcy5sZW5ndGgsZD1bXSxlPXRoaXM7aWYoInN0cmluZyIhPXR5cGVvZiBhKXJldHVybiB0aGlzLnB1c2hTdGFjayhuKGEpLmZpbHRlcihmdW5jdGlvbigpe2ZvcihiPTA7Yz5iO2IrKylpZihuLmNvbnRhaW5zKGVbYl0sdGhpcykpcmV0dXJuITB9KSk7Zm9yKGI9MDtjPmI7YisrKW4uZmluZChhLGVbYl0sZCk7cmV0dXJuIGQ9dGhpcy5wdXNoU3RhY2soYz4xP24udW5pcXVlKGQpOmQpLGQuc2VsZWN0b3I9dGhpcy5zZWxlY3Rvcj90aGlzLnNlbGVjdG9yKyIgIithOmEsZH0sZmlsdGVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4KHRoaXMsYXx8W10sITEpKX0sbm90OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4KHRoaXMsYXx8W10sITApKX0saXM6ZnVuY3Rpb24oYSl7cmV0dXJuISF4KHRoaXMsInN0cmluZyI9PXR5cGVvZiBhJiZ1LnRlc3QoYSk/bihhKTphfHxbXSwhMSkubGVuZ3RofX0pO3ZhciB5LHo9L14oPzpccyooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0qKSkkLyxBPW4uZm4uaW5pdD1mdW5jdGlvbihhLGIpe3ZhciBjLGQ7aWYoIWEpcmV0dXJuIHRoaXM7aWYoInN0cmluZyI9PXR5cGVvZiBhKXtpZihjPSI8Ij09PWFbMF0mJiI+Ij09PWFbYS5sZW5ndGgtMV0mJmEubGVuZ3RoPj0zP1tudWxsLGEsbnVsbF06ei5leGVjKGEpLCFjfHwhY1sxXSYmYilyZXR1cm4hYnx8Yi5qcXVlcnk/KGJ8fHkpLmZpbmQoYSk6dGhpcy5jb25zdHJ1Y3RvcihiKS5maW5kKGEpO2lmKGNbMV0pe2lmKGI9YiBpbnN0YW5jZW9mIG4/YlswXTpiLG4ubWVyZ2UodGhpcyxuLnBhcnNlSFRNTChjWzFdLGImJmIubm9kZVR5cGU/Yi5vd25lckRvY3VtZW50fHxiOmwsITApKSx2LnRlc3QoY1sxXSkmJm4uaXNQbGFpbk9iamVjdChiKSlmb3IoYyBpbiBiKW4uaXNGdW5jdGlvbih0aGlzW2NdKT90aGlzW2NdKGJbY10pOnRoaXMuYXR0cihjLGJbY10pO3JldHVybiB0aGlzfXJldHVybiBkPWwuZ2V0RWxlbWVudEJ5SWQoY1syXSksZCYmZC5wYXJlbnROb2RlJiYodGhpcy5sZW5ndGg9MSx0aGlzWzBdPWQpLHRoaXMuY29udGV4dD1sLHRoaXMuc2VsZWN0b3I9YSx0aGlzfXJldHVybiBhLm5vZGVUeXBlPyh0aGlzLmNvbnRleHQ9dGhpc1swXT1hLHRoaXMubGVuZ3RoPTEsdGhpcyk6bi5pc0Z1bmN0aW9uKGEpPyJ1bmRlZmluZWQiIT10eXBlb2YgeS5yZWFkeT95LnJlYWR5KGEpOmEobik6KHZvaWQgMCE9PWEuc2VsZWN0b3ImJih0aGlzLnNlbGVjdG9yPWEuc2VsZWN0b3IsdGhpcy5jb250ZXh0PWEuY29udGV4dCksbi5tYWtlQXJyYXkoYSx0aGlzKSl9O0EucHJvdG90eXBlPW4uZm4seT1uKGwpO3ZhciBCPS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLEM9e2NoaWxkcmVuOiEwLGNvbnRlbnRzOiEwLG5leHQ6ITAscHJldjohMH07bi5leHRlbmQoe2RpcjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9W10sZT12b2lkIDAhPT1jO3doaWxlKChhPWFbYl0pJiY5IT09YS5ub2RlVHlwZSlpZigxPT09YS5ub2RlVHlwZSl7aWYoZSYmbihhKS5pcyhjKSlicmVhaztkLnB1c2goYSl9cmV0dXJuIGR9LHNpYmxpbmc6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W107YTthPWEubmV4dFNpYmxpbmcpMT09PWEubm9kZVR5cGUmJmEhPT1iJiZjLnB1c2goYSk7cmV0dXJuIGN9fSksbi5mbi5leHRlbmQoe2hhczpmdW5jdGlvbihhKXt2YXIgYj1uKGEsdGhpcyksYz1iLmxlbmd0aDtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodmFyIGE9MDtjPmE7YSsrKWlmKG4uY29udGFpbnModGhpcyxiW2FdKSlyZXR1cm4hMH0pfSxjbG9zZXN0OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9MCxlPXRoaXMubGVuZ3RoLGY9W10sZz11LnRlc3QoYSl8fCJzdHJpbmciIT10eXBlb2YgYT9uKGEsYnx8dGhpcy5jb250ZXh0KTowO2U+ZDtkKyspZm9yKGM9dGhpc1tkXTtjJiZjIT09YjtjPWMucGFyZW50Tm9kZSlpZihjLm5vZGVUeXBlPDExJiYoZz9nLmluZGV4KGMpPi0xOjE9PT1jLm5vZGVUeXBlJiZuLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGMsYSkpKXtmLnB1c2goYyk7YnJlYWt9cmV0dXJuIHRoaXMucHVzaFN0YWNrKGYubGVuZ3RoPjE/bi51bmlxdWUoZik6Zil9LGluZGV4OmZ1bmN0aW9uKGEpe3JldHVybiBhPyJzdHJpbmciPT10eXBlb2YgYT9nLmNhbGwobihhKSx0aGlzWzBdKTpnLmNhbGwodGhpcyxhLmpxdWVyeT9hWzBdOmEpOnRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZT90aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aDotMX0sYWRkOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4udW5pcXVlKG4ubWVyZ2UodGhpcy5nZXQoKSxuKGEsYikpKSl9LGFkZEJhY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWE/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoYSkpfX0pO2Z1bmN0aW9uIEQoYSxiKXt3aGlsZSgoYT1hW2JdKSYmMSE9PWEubm9kZVR5cGUpO3JldHVybiBhfW4uZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmMTEhPT1iLm5vZGVUeXBlP2I6bnVsbH0scGFyZW50czpmdW5jdGlvbihhKXtyZXR1cm4gbi5kaXIoYSwicGFyZW50Tm9kZSIpfSxwYXJlbnRzVW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLmRpcihhLCJwYXJlbnROb2RlIixjKX0sbmV4dDpmdW5jdGlvbihhKXtyZXR1cm4gRChhLCJuZXh0U2libGluZyIpfSxwcmV2OmZ1bmN0aW9uKGEpe3JldHVybiBEKGEsInByZXZpb3VzU2libGluZyIpfSxuZXh0QWxsOmZ1bmN0aW9uKGEpe3JldHVybiBuLmRpcihhLCJuZXh0U2libGluZyIpfSxwcmV2QWxsOmZ1bmN0aW9uKGEpe3JldHVybiBuLmRpcihhLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dFVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5kaXIoYSwibmV4dFNpYmxpbmciLGMpfSxwcmV2VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLmRpcihhLCJwcmV2aW91c1NpYmxpbmciLGMpfSxzaWJsaW5nczpmdW5jdGlvbihhKXtyZXR1cm4gbi5zaWJsaW5nKChhLnBhcmVudE5vZGV8fHt9KS5maXJzdENoaWxkLGEpfSxjaGlsZHJlbjpmdW5jdGlvbihhKXtyZXR1cm4gbi5zaWJsaW5nKGEuZmlyc3RDaGlsZCl9LGNvbnRlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRlbnREb2N1bWVudHx8bi5tZXJnZShbXSxhLmNoaWxkTm9kZXMpfX0sZnVuY3Rpb24oYSxiKXtuLmZuW2FdPWZ1bmN0aW9uKGMsZCl7dmFyIGU9bi5tYXAodGhpcyxiLGMpO3JldHVybiJVbnRpbCIhPT1hLnNsaWNlKC01KSYmKGQ9YyksZCYmInN0cmluZyI9PXR5cGVvZiBkJiYoZT1uLmZpbHRlcihkLGUpKSx0aGlzLmxlbmd0aD4xJiYoQ1thXXx8bi51bmlxdWUoZSksQi50ZXN0KGEpJiZlLnJldmVyc2UoKSksdGhpcy5wdXNoU3RhY2soZSl9fSk7dmFyIEU9L1xTKy9nLEY9e307ZnVuY3Rpb24gRyhhKXt2YXIgYj1GW2FdPXt9O3JldHVybiBuLmVhY2goYS5tYXRjaChFKXx8W10sZnVuY3Rpb24oYSxjKXtiW2NdPSEwfSksYn1uLkNhbGxiYWNrcz1mdW5jdGlvbihhKXthPSJzdHJpbmciPT10eXBlb2YgYT9GW2FdfHxHKGEpOm4uZXh0ZW5kKHt9LGEpO3ZhciBiLGMsZCxlLGYsZyxoPVtdLGk9IWEub25jZSYmW10saj1mdW5jdGlvbihsKXtmb3IoYj1hLm1lbW9yeSYmbCxjPSEwLGc9ZXx8MCxlPTAsZj1oLmxlbmd0aCxkPSEwO2gmJmY+ZztnKyspaWYoaFtnXS5hcHBseShsWzBdLGxbMV0pPT09ITEmJmEuc3RvcE9uRmFsc2Upe2I9ITE7YnJlYWt9ZD0hMSxoJiYoaT9pLmxlbmd0aCYmaihpLnNoaWZ0KCkpOmI/aD1bXTprLmRpc2FibGUoKSl9LGs9e2FkZDpmdW5jdGlvbigpe2lmKGgpe3ZhciBjPWgubGVuZ3RoOyFmdW5jdGlvbiBnKGIpe24uZWFjaChiLGZ1bmN0aW9uKGIsYyl7dmFyIGQ9bi50eXBlKGMpOyJmdW5jdGlvbiI9PT1kP2EudW5pcXVlJiZrLmhhcyhjKXx8aC5wdXNoKGMpOmMmJmMubGVuZ3RoJiYic3RyaW5nIiE9PWQmJmcoYyl9KX0oYXJndW1lbnRzKSxkP2Y9aC5sZW5ndGg6YiYmKGU9YyxqKGIpKX1yZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIGgmJm4uZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oYSxiKXt2YXIgYzt3aGlsZSgoYz1uLmluQXJyYXkoYixoLGMpKT4tMSloLnNwbGljZShjLDEpLGQmJihmPj1jJiZmLS0sZz49YyYmZy0tKX0pLHRoaXN9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gYT9uLmluQXJyYXkoYSxoKT4tMTohKCFofHwhaC5sZW5ndGgpfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBoPVtdLGY9MCx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGg9aT1iPXZvaWQgMCx0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFofSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIGk9dm9pZCAwLGJ8fGsuZGlzYWJsZSgpLHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiFpfSxmaXJlV2l0aDpmdW5jdGlvbihhLGIpe3JldHVybiFofHxjJiYhaXx8KGI9Ynx8W10sYj1bYSxiLnNsaWNlP2Iuc2xpY2UoKTpiXSxkP2kucHVzaChiKTpqKGIpKSx0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGsuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpLHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFjfX07cmV0dXJuIGt9LG4uZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihhKXt2YXIgYj1bWyJyZXNvbHZlIiwiZG9uZSIsbi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIixuLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwicmVqZWN0ZWQiXSxbIm5vdGlmeSIsInByb2dyZXNzIixuLkNhbGxiYWNrcygibWVtb3J5IildXSxjPSJwZW5kaW5nIixkPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBjfSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gZS5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LHRoZW46ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7cmV0dXJuIG4uRGVmZXJyZWQoZnVuY3Rpb24oYyl7bi5lYWNoKGIsZnVuY3Rpb24oYixmKXt2YXIgZz1uLmlzRnVuY3Rpb24oYVtiXSkmJmFbYl07ZVtmWzFdXShmdW5jdGlvbigpe3ZhciBhPWcmJmcuYXBwbHkodGhpcyxhcmd1bWVudHMpO2EmJm4uaXNGdW5jdGlvbihhLnByb21pc2UpP2EucHJvbWlzZSgpLmRvbmUoYy5yZXNvbHZlKS5mYWlsKGMucmVqZWN0KS5wcm9ncmVzcyhjLm5vdGlmeSk6Y1tmWzBdKyJXaXRoIl0odGhpcz09PWQ/Yy5wcm9taXNlKCk6dGhpcyxnP1thXTphcmd1bWVudHMpfSl9KSxhPW51bGx9KS5wcm9taXNlKCl9LHByb21pc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWE/bi5leHRlbmQoYSxkKTpkfX0sZT17fTtyZXR1cm4gZC5waXBlPWQudGhlbixuLmVhY2goYixmdW5jdGlvbihhLGYpe3ZhciBnPWZbMl0saD1mWzNdO2RbZlsxXV09Zy5hZGQsaCYmZy5hZGQoZnVuY3Rpb24oKXtjPWh9LGJbMV5hXVsyXS5kaXNhYmxlLGJbMl1bMl0ubG9jayksZVtmWzBdXT1mdW5jdGlvbigpe3JldHVybiBlW2ZbMF0rIldpdGgiXSh0aGlzPT09ZT9kOnRoaXMsYXJndW1lbnRzKSx0aGlzfSxlW2ZbMF0rIldpdGgiXT1nLmZpcmVXaXRofSksZC5wcm9taXNlKGUpLGEmJmEuY2FsbChlLGUpLGV9LHdoZW46ZnVuY3Rpb24oYSl7dmFyIGI9MCxjPWQuY2FsbChhcmd1bWVudHMpLGU9Yy5sZW5ndGgsZj0xIT09ZXx8YSYmbi5pc0Z1bmN0aW9uKGEucHJvbWlzZSk/ZTowLGc9MT09PWY/YTpuLkRlZmVycmVkKCksaD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGUpe2JbYV09dGhpcyxjW2FdPWFyZ3VtZW50cy5sZW5ndGg+MT9kLmNhbGwoYXJndW1lbnRzKTplLGM9PT1pP2cubm90aWZ5V2l0aChiLGMpOi0tZnx8Zy5yZXNvbHZlV2l0aChiLGMpfX0saSxqLGs7aWYoZT4xKWZvcihpPW5ldyBBcnJheShlKSxqPW5ldyBBcnJheShlKSxrPW5ldyBBcnJheShlKTtlPmI7YisrKWNbYl0mJm4uaXNGdW5jdGlvbihjW2JdLnByb21pc2UpP2NbYl0ucHJvbWlzZSgpLmRvbmUoaChiLGssYykpLmZhaWwoZy5yZWplY3QpLnByb2dyZXNzKGgoYixqLGkpKTotLWY7cmV0dXJuIGZ8fGcucmVzb2x2ZVdpdGgoayxjKSxnLnByb21pc2UoKX19KTt2YXIgSDtuLmZuLnJlYWR5PWZ1bmN0aW9uKGEpe3JldHVybiBuLnJlYWR5LnByb21pc2UoKS5kb25lKGEpLHRoaXN9LG4uZXh0ZW5kKHtpc1JlYWR5OiExLHJlYWR5V2FpdDoxLGhvbGRSZWFkeTpmdW5jdGlvbihhKXthP24ucmVhZHlXYWl0Kys6bi5yZWFkeSghMCl9LHJlYWR5OmZ1bmN0aW9uKGEpeyhhPT09ITA/LS1uLnJlYWR5V2FpdDpuLmlzUmVhZHkpfHwobi5pc1JlYWR5PSEwLGEhPT0hMCYmLS1uLnJlYWR5V2FpdD4wfHwoSC5yZXNvbHZlV2l0aChsLFtuXSksbi5mbi50cmlnZ2VySGFuZGxlciYmKG4obCkudHJpZ2dlckhhbmRsZXIoInJlYWR5IiksbihsKS5vZmYoInJlYWR5IikpKSl9fSk7ZnVuY3Rpb24gSSgpe2wucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsSSwhMSksYS5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIixJLCExKSxuLnJlYWR5KCl9bi5yZWFkeS5wcm9taXNlPWZ1bmN0aW9uKGIpe3JldHVybiBIfHwoSD1uLkRlZmVycmVkKCksImNvbXBsZXRlIj09PWwucmVhZHlTdGF0ZT9zZXRUaW1lb3V0KG4ucmVhZHkpOihsLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLEksITEpLGEuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsSSwhMSkpKSxILnByb21pc2UoYil9LG4ucmVhZHkucHJvbWlzZSgpO3ZhciBKPW4uYWNjZXNzPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe3ZhciBoPTAsaT1hLmxlbmd0aCxqPW51bGw9PWM7aWYoIm9iamVjdCI9PT1uLnR5cGUoYykpe2U9ITA7Zm9yKGggaW4gYyluLmFjY2VzcyhhLGIsaCxjW2hdLCEwLGYsZyl9ZWxzZSBpZih2b2lkIDAhPT1kJiYoZT0hMCxuLmlzRnVuY3Rpb24oZCl8fChnPSEwKSxqJiYoZz8oYi5jYWxsKGEsZCksYj1udWxsKTooaj1iLGI9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBqLmNhbGwobihhKSxjKX0pKSxiKSlmb3IoO2k+aDtoKyspYihhW2hdLGMsZz9kOmQuY2FsbChhW2hdLGgsYihhW2hdLGMpKSk7cmV0dXJuIGU/YTpqP2IuY2FsbChhKTppP2IoYVswXSxjKTpmfTtuLmFjY2VwdERhdGE9ZnVuY3Rpb24oYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlfHw5PT09YS5ub2RlVHlwZXx8ISthLm5vZGVUeXBlfTtmdW5jdGlvbiBLKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMuY2FjaGU9e30sMCx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJue319fSksdGhpcy5leHBhbmRvPW4uZXhwYW5kbytLLnVpZCsrfUsudWlkPTEsSy5hY2NlcHRzPW4uYWNjZXB0RGF0YSxLLnByb3RvdHlwZT17a2V5OmZ1bmN0aW9uKGEpe2lmKCFLLmFjY2VwdHMoYSkpcmV0dXJuIDA7dmFyIGI9e30sYz1hW3RoaXMuZXhwYW5kb107aWYoIWMpe2M9Sy51aWQrKzt0cnl7Ylt0aGlzLmV4cGFuZG9dPXt2YWx1ZTpjfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhhLGIpfWNhdGNoKGQpe2JbdGhpcy5leHBhbmRvXT1jLG4uZXh0ZW5kKGEsYil9fXJldHVybiB0aGlzLmNhY2hlW2NdfHwodGhpcy5jYWNoZVtjXT17fSksY30sc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPXRoaXMua2V5KGEpLGY9dGhpcy5jYWNoZVtlXTtpZigic3RyaW5nIj09dHlwZW9mIGIpZltiXT1jO2Vsc2UgaWYobi5pc0VtcHR5T2JqZWN0KGYpKW4uZXh0ZW5kKHRoaXMuY2FjaGVbZV0sYik7ZWxzZSBmb3IoZCBpbiBiKWZbZF09YltkXTtyZXR1cm4gZn0sZ2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jYWNoZVt0aGlzLmtleShhKV07cmV0dXJuIHZvaWQgMD09PWI/YzpjW2JdfSxhY2Nlc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiB2b2lkIDA9PT1ifHxiJiYic3RyaW5nIj09dHlwZW9mIGImJnZvaWQgMD09PWM/KGQ9dGhpcy5nZXQoYSxiKSx2b2lkIDAhPT1kP2Q6dGhpcy5nZXQoYSxuLmNhbWVsQ2FzZShiKSkpOih0aGlzLnNldChhLGIsYyksdm9pZCAwIT09Yz9jOmIpfSxyZW1vdmU6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj10aGlzLmtleShhKSxnPXRoaXMuY2FjaGVbZl07aWYodm9pZCAwPT09Yil0aGlzLmNhY2hlW2ZdPXt9O2Vsc2V7bi5pc0FycmF5KGIpP2Q9Yi5jb25jYXQoYi5tYXAobi5jYW1lbENhc2UpKTooZT1uLmNhbWVsQ2FzZShiKSxiIGluIGc/ZD1bYixlXTooZD1lLGQ9ZCBpbiBnP1tkXTpkLm1hdGNoKEUpfHxbXSkpLGM9ZC5sZW5ndGg7d2hpbGUoYy0tKWRlbGV0ZSBnW2RbY11dfX0saGFzRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4hbi5pc0VtcHR5T2JqZWN0KHRoaXMuY2FjaGVbYVt0aGlzLmV4cGFuZG9dXXx8e30pfSxkaXNjYXJkOmZ1bmN0aW9uKGEpe2FbdGhpcy5leHBhbmRvXSYmZGVsZXRlIHRoaXMuY2FjaGVbYVt0aGlzLmV4cGFuZG9dXX19O3ZhciBMPW5ldyBLLE09bmV3IEssTj0vXig/Olx7W1x3XFddKlx9fFxbW1x3XFddKlxdKSQvLE89LyhbQS1aXSkvZztmdW5jdGlvbiBQKGEsYixjKXt2YXIgZDtpZih2b2lkIDA9PT1jJiYxPT09YS5ub2RlVHlwZSlpZihkPSJkYXRhLSIrYi5yZXBsYWNlKE8sIi0kMSIpLnRvTG93ZXJDYXNlKCksYz1hLmdldEF0dHJpYnV0ZShkKSwic3RyaW5nIj09dHlwZW9mIGMpe3RyeXtjPSJ0cnVlIj09PWM/ITA6ImZhbHNlIj09PWM/ITE6Im51bGwiPT09Yz9udWxsOitjKyIiPT09Yz8rYzpOLnRlc3QoYyk/bi5wYXJzZUpTT04oYyk6Y31jYXRjaChlKXt9TS5zZXQoYSxiLGMpfWVsc2UgYz12b2lkIDA7cmV0dXJuIGN9bi5leHRlbmQoe2hhc0RhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIE0uaGFzRGF0YShhKXx8TC5oYXNEYXRhKGEpfSxkYXRhOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gTS5hY2Nlc3MoYSxiLGMpCn0scmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe00ucmVtb3ZlKGEsYil9LF9kYXRhOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gTC5hY2Nlc3MoYSxiLGMpfSxfcmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe0wucmVtb3ZlKGEsYil9fSksbi5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj10aGlzWzBdLGc9ZiYmZi5hdHRyaWJ1dGVzO2lmKHZvaWQgMD09PWEpe2lmKHRoaXMubGVuZ3RoJiYoZT1NLmdldChmKSwxPT09Zi5ub2RlVHlwZSYmIUwuZ2V0KGYsImhhc0RhdGFBdHRycyIpKSl7Yz1nLmxlbmd0aDt3aGlsZShjLS0pZ1tjXSYmKGQ9Z1tjXS5uYW1lLDA9PT1kLmluZGV4T2YoImRhdGEtIikmJihkPW4uY2FtZWxDYXNlKGQuc2xpY2UoNSkpLFAoZixkLGVbZF0pKSk7TC5zZXQoZiwiaGFzRGF0YUF0dHJzIiwhMCl9cmV0dXJuIGV9cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBhP3RoaXMuZWFjaChmdW5jdGlvbigpe00uc2V0KHRoaXMsYSl9KTpKKHRoaXMsZnVuY3Rpb24oYil7dmFyIGMsZD1uLmNhbWVsQ2FzZShhKTtpZihmJiZ2b2lkIDA9PT1iKXtpZihjPU0uZ2V0KGYsYSksdm9pZCAwIT09YylyZXR1cm4gYztpZihjPU0uZ2V0KGYsZCksdm9pZCAwIT09YylyZXR1cm4gYztpZihjPVAoZixkLHZvaWQgMCksdm9pZCAwIT09YylyZXR1cm4gY31lbHNlIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPU0uZ2V0KHRoaXMsZCk7TS5zZXQodGhpcyxkLGIpLC0xIT09YS5pbmRleE9mKCItIikmJnZvaWQgMCE9PWMmJk0uc2V0KHRoaXMsYSxiKX0pfSxudWxsLGIsYXJndW1lbnRzLmxlbmd0aD4xLG51bGwsITApfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtNLnJlbW92ZSh0aGlzLGEpfSl9fSksbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYT8oYj0oYnx8ImZ4IikrInF1ZXVlIixkPUwuZ2V0KGEsYiksYyYmKCFkfHxuLmlzQXJyYXkoYyk/ZD1MLmFjY2VzcyhhLGIsbi5tYWtlQXJyYXkoYykpOmQucHVzaChjKSksZHx8W10pOnZvaWQgMH0sZGVxdWV1ZTpmdW5jdGlvbihhLGIpe2I9Ynx8ImZ4Ijt2YXIgYz1uLnF1ZXVlKGEsYiksZD1jLmxlbmd0aCxlPWMuc2hpZnQoKSxmPW4uX3F1ZXVlSG9va3MoYSxiKSxnPWZ1bmN0aW9uKCl7bi5kZXF1ZXVlKGEsYil9OyJpbnByb2dyZXNzIj09PWUmJihlPWMuc2hpZnQoKSxkLS0pLGUmJigiZngiPT09YiYmYy51bnNoaWZ0KCJpbnByb2dyZXNzIiksZGVsZXRlIGYuc3RvcCxlLmNhbGwoYSxnLGYpKSwhZCYmZiYmZi5lbXB0eS5maXJlKCl9LF9xdWV1ZUhvb2tzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YisicXVldWVIb29rcyI7cmV0dXJuIEwuZ2V0KGEsYyl8fEwuYWNjZXNzKGEsYyx7ZW1wdHk6bi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IikuYWRkKGZ1bmN0aW9uKCl7TC5yZW1vdmUoYSxbYisicXVldWUiLGNdKX0pfSl9fSksbi5mbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYil7dmFyIGM9MjtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGEmJihiPWEsYT0iZngiLGMtLSksYXJndW1lbnRzLmxlbmd0aDxjP24ucXVldWUodGhpc1swXSxhKTp2b2lkIDA9PT1iP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9bi5xdWV1ZSh0aGlzLGEsYik7bi5fcXVldWVIb29rcyh0aGlzLGEpLCJmeCI9PT1hJiYiaW5wcm9ncmVzcyIhPT1jWzBdJiZuLmRlcXVldWUodGhpcyxhKX0pfSxkZXF1ZXVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmRlcXVldWUodGhpcyxhKX0pfSxjbGVhclF1ZXVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnF1ZXVlKGF8fCJmeCIsW10pfSxwcm9taXNlOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD0xLGU9bi5EZWZlcnJlZCgpLGY9dGhpcyxnPXRoaXMubGVuZ3RoLGg9ZnVuY3Rpb24oKXstLWR8fGUucmVzb2x2ZVdpdGgoZixbZl0pfTsic3RyaW5nIiE9dHlwZW9mIGEmJihiPWEsYT12b2lkIDApLGE9YXx8ImZ4Ijt3aGlsZShnLS0pYz1MLmdldChmW2ddLGErInF1ZXVlSG9va3MiKSxjJiZjLmVtcHR5JiYoZCsrLGMuZW1wdHkuYWRkKGgpKTtyZXR1cm4gaCgpLGUucHJvbWlzZShiKX19KTt2YXIgUT0vWystXT8oPzpcZCpcLnwpXGQrKD86W2VFXVsrLV0/XGQrfCkvLnNvdXJjZSxSPVsiVG9wIiwiUmlnaHQiLCJCb3R0b20iLCJMZWZ0Il0sUz1mdW5jdGlvbihhLGIpe3JldHVybiBhPWJ8fGEsIm5vbmUiPT09bi5jc3MoYSwiZGlzcGxheSIpfHwhbi5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSl9LFQ9L14oPzpjaGVja2JveHxyYWRpbykkL2k7IWZ1bmN0aW9uKCl7dmFyIGE9bC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksYj1hLmFwcGVuZENoaWxkKGwuY3JlYXRlRWxlbWVudCgiZGl2IikpLGM9bC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2Muc2V0QXR0cmlidXRlKCJ0eXBlIiwicmFkaW8iKSxjLnNldEF0dHJpYnV0ZSgiY2hlY2tlZCIsImNoZWNrZWQiKSxjLnNldEF0dHJpYnV0ZSgibmFtZSIsInQiKSxiLmFwcGVuZENoaWxkKGMpLGsuY2hlY2tDbG9uZT1iLmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCxiLmlubmVySFRNTD0iPHRleHRhcmVhPng8L3RleHRhcmVhPiIsay5ub0Nsb25lQ2hlY2tlZD0hIWIuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlfSgpO3ZhciBVPSJ1bmRlZmluZWQiO2suZm9jdXNpbkJ1YmJsZXM9Im9uZm9jdXNpbiJpbiBhO3ZhciBWPS9ea2V5LyxXPS9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudSl8Y2xpY2svLFg9L14oPzpmb2N1c2luZm9jdXN8Zm9jdXNvdXRibHVyKSQvLFk9L14oW14uXSopKD86XC4oLispfCkkLztmdW5jdGlvbiBaKCl7cmV0dXJuITB9ZnVuY3Rpb24gJCgpe3JldHVybiExfWZ1bmN0aW9uIF8oKXt0cnl7cmV0dXJuIGwuYWN0aXZlRWxlbWVudH1jYXRjaChhKXt9fW4uZXZlbnQ9e2dsb2JhbDp7fSxhZGQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG8scCxxLHI9TC5nZXQoYSk7aWYocil7Yy5oYW5kbGVyJiYoZj1jLGM9Zi5oYW5kbGVyLGU9Zi5zZWxlY3RvciksYy5ndWlkfHwoYy5ndWlkPW4uZ3VpZCsrKSwoaT1yLmV2ZW50cyl8fChpPXIuZXZlbnRzPXt9KSwoZz1yLmhhbmRsZSl8fChnPXIuaGFuZGxlPWZ1bmN0aW9uKGIpe3JldHVybiB0eXBlb2YgbiE9PVUmJm4uZXZlbnQudHJpZ2dlcmVkIT09Yi50eXBlP24uZXZlbnQuZGlzcGF0Y2guYXBwbHkoYSxhcmd1bWVudHMpOnZvaWQgMH0pLGI9KGJ8fCIiKS5tYXRjaChFKXx8WyIiXSxqPWIubGVuZ3RoO3doaWxlKGotLSloPVkuZXhlYyhiW2pdKXx8W10sbz1xPWhbMV0scD0oaFsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLG8mJihsPW4uZXZlbnQuc3BlY2lhbFtvXXx8e30sbz0oZT9sLmRlbGVnYXRlVHlwZTpsLmJpbmRUeXBlKXx8byxsPW4uZXZlbnQuc3BlY2lhbFtvXXx8e30saz1uLmV4dGVuZCh7dHlwZTpvLG9yaWdUeXBlOnEsZGF0YTpkLGhhbmRsZXI6YyxndWlkOmMuZ3VpZCxzZWxlY3RvcjplLG5lZWRzQ29udGV4dDplJiZuLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QoZSksbmFtZXNwYWNlOnAuam9pbigiLiIpfSxmKSwobT1pW29dKXx8KG09aVtvXT1bXSxtLmRlbGVnYXRlQ291bnQ9MCxsLnNldHVwJiZsLnNldHVwLmNhbGwoYSxkLHAsZykhPT0hMXx8YS5hZGRFdmVudExpc3RlbmVyJiZhLmFkZEV2ZW50TGlzdGVuZXIobyxnLCExKSksbC5hZGQmJihsLmFkZC5jYWxsKGEsayksay5oYW5kbGVyLmd1aWR8fChrLmhhbmRsZXIuZ3VpZD1jLmd1aWQpKSxlP20uc3BsaWNlKG0uZGVsZWdhdGVDb3VudCsrLDAsayk6bS5wdXNoKGspLG4uZXZlbnQuZ2xvYmFsW29dPSEwKX19LHJlbW92ZTpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG0sbyxwLHEscj1MLmhhc0RhdGEoYSkmJkwuZ2V0KGEpO2lmKHImJihpPXIuZXZlbnRzKSl7Yj0oYnx8IiIpLm1hdGNoKEUpfHxbIiJdLGo9Yi5sZW5ndGg7d2hpbGUoai0tKWlmKGg9WS5leGVjKGJbal0pfHxbXSxvPXE9aFsxXSxwPShoWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksbyl7bD1uLmV2ZW50LnNwZWNpYWxbb118fHt9LG89KGQ/bC5kZWxlZ2F0ZVR5cGU6bC5iaW5kVHlwZSl8fG8sbT1pW29dfHxbXSxoPWhbMl0mJm5ldyBSZWdFeHAoIihefFxcLikiK3Auam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIiksZz1mPW0ubGVuZ3RoO3doaWxlKGYtLSlrPW1bZl0sIWUmJnEhPT1rLm9yaWdUeXBlfHxjJiZjLmd1aWQhPT1rLmd1aWR8fGgmJiFoLnRlc3Qoay5uYW1lc3BhY2UpfHxkJiZkIT09ay5zZWxlY3RvciYmKCIqKiIhPT1kfHwhay5zZWxlY3Rvcil8fChtLnNwbGljZShmLDEpLGsuc2VsZWN0b3ImJm0uZGVsZWdhdGVDb3VudC0tLGwucmVtb3ZlJiZsLnJlbW92ZS5jYWxsKGEsaykpO2cmJiFtLmxlbmd0aCYmKGwudGVhcmRvd24mJmwudGVhcmRvd24uY2FsbChhLHAsci5oYW5kbGUpIT09ITF8fG4ucmVtb3ZlRXZlbnQoYSxvLHIuaGFuZGxlKSxkZWxldGUgaVtvXSl9ZWxzZSBmb3IobyBpbiBpKW4uZXZlbnQucmVtb3ZlKGEsbytiW2pdLGMsZCwhMCk7bi5pc0VtcHR5T2JqZWN0KGkpJiYoZGVsZXRlIHIuaGFuZGxlLEwucmVtb3ZlKGEsImV2ZW50cyIpKX19LHRyaWdnZXI6ZnVuY3Rpb24oYixjLGQsZSl7dmFyIGYsZyxoLGksayxtLG8scD1bZHx8bF0scT1qLmNhbGwoYiwidHlwZSIpP2IudHlwZTpiLHI9ai5jYWxsKGIsIm5hbWVzcGFjZSIpP2IubmFtZXNwYWNlLnNwbGl0KCIuIik6W107aWYoZz1oPWQ9ZHx8bCwzIT09ZC5ub2RlVHlwZSYmOCE9PWQubm9kZVR5cGUmJiFYLnRlc3QocStuLmV2ZW50LnRyaWdnZXJlZCkmJihxLmluZGV4T2YoIi4iKT49MCYmKHI9cS5zcGxpdCgiLiIpLHE9ci5zaGlmdCgpLHIuc29ydCgpKSxrPXEuaW5kZXhPZigiOiIpPDAmJiJvbiIrcSxiPWJbbi5leHBhbmRvXT9iOm5ldyBuLkV2ZW50KHEsIm9iamVjdCI9PXR5cGVvZiBiJiZiKSxiLmlzVHJpZ2dlcj1lPzI6MyxiLm5hbWVzcGFjZT1yLmpvaW4oIi4iKSxiLm5hbWVzcGFjZV9yZT1iLm5hbWVzcGFjZT9uZXcgUmVnRXhwKCIoXnxcXC4pIityLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpOm51bGwsYi5yZXN1bHQ9dm9pZCAwLGIudGFyZ2V0fHwoYi50YXJnZXQ9ZCksYz1udWxsPT1jP1tiXTpuLm1ha2VBcnJheShjLFtiXSksbz1uLmV2ZW50LnNwZWNpYWxbcV18fHt9LGV8fCFvLnRyaWdnZXJ8fG8udHJpZ2dlci5hcHBseShkLGMpIT09ITEpKXtpZighZSYmIW8ubm9CdWJibGUmJiFuLmlzV2luZG93KGQpKXtmb3IoaT1vLmRlbGVnYXRlVHlwZXx8cSxYLnRlc3QoaStxKXx8KGc9Zy5wYXJlbnROb2RlKTtnO2c9Zy5wYXJlbnROb2RlKXAucHVzaChnKSxoPWc7aD09PShkLm93bmVyRG9jdW1lbnR8fGwpJiZwLnB1c2goaC5kZWZhdWx0Vmlld3x8aC5wYXJlbnRXaW5kb3d8fGEpfWY9MDt3aGlsZSgoZz1wW2YrK10pJiYhYi5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKWIudHlwZT1mPjE/aTpvLmJpbmRUeXBlfHxxLG09KEwuZ2V0KGcsImV2ZW50cyIpfHx7fSlbYi50eXBlXSYmTC5nZXQoZywiaGFuZGxlIiksbSYmbS5hcHBseShnLGMpLG09ayYmZ1trXSxtJiZtLmFwcGx5JiZuLmFjY2VwdERhdGEoZykmJihiLnJlc3VsdD1tLmFwcGx5KGcsYyksYi5yZXN1bHQ9PT0hMSYmYi5wcmV2ZW50RGVmYXVsdCgpKTtyZXR1cm4gYi50eXBlPXEsZXx8Yi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8by5fZGVmYXVsdCYmby5fZGVmYXVsdC5hcHBseShwLnBvcCgpLGMpIT09ITF8fCFuLmFjY2VwdERhdGEoZCl8fGsmJm4uaXNGdW5jdGlvbihkW3FdKSYmIW4uaXNXaW5kb3coZCkmJihoPWRba10saCYmKGRba109bnVsbCksbi5ldmVudC50cmlnZ2VyZWQ9cSxkW3FdKCksbi5ldmVudC50cmlnZ2VyZWQ9dm9pZCAwLGgmJihkW2tdPWgpKSxiLnJlc3VsdH19LGRpc3BhdGNoOmZ1bmN0aW9uKGEpe2E9bi5ldmVudC5maXgoYSk7dmFyIGIsYyxlLGYsZyxoPVtdLGk9ZC5jYWxsKGFyZ3VtZW50cyksaj0oTC5nZXQodGhpcywiZXZlbnRzIil8fHt9KVthLnR5cGVdfHxbXSxrPW4uZXZlbnQuc3BlY2lhbFthLnR5cGVdfHx7fTtpZihpWzBdPWEsYS5kZWxlZ2F0ZVRhcmdldD10aGlzLCFrLnByZURpc3BhdGNofHxrLnByZURpc3BhdGNoLmNhbGwodGhpcyxhKSE9PSExKXtoPW4uZXZlbnQuaGFuZGxlcnMuY2FsbCh0aGlzLGEsaiksYj0wO3doaWxlKChmPWhbYisrXSkmJiFhLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2EuY3VycmVudFRhcmdldD1mLmVsZW0sYz0wO3doaWxlKChnPWYuaGFuZGxlcnNbYysrXSkmJiFhLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpKCFhLm5hbWVzcGFjZV9yZXx8YS5uYW1lc3BhY2VfcmUudGVzdChnLm5hbWVzcGFjZSkpJiYoYS5oYW5kbGVPYmo9ZyxhLmRhdGE9Zy5kYXRhLGU9KChuLmV2ZW50LnNwZWNpYWxbZy5vcmlnVHlwZV18fHt9KS5oYW5kbGV8fGcuaGFuZGxlcikuYXBwbHkoZi5lbGVtLGkpLHZvaWQgMCE9PWUmJihhLnJlc3VsdD1lKT09PSExJiYoYS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcFByb3BhZ2F0aW9uKCkpKX1yZXR1cm4gay5wb3N0RGlzcGF0Y2gmJmsucG9zdERpc3BhdGNoLmNhbGwodGhpcyxhKSxhLnJlc3VsdH19LGhhbmRsZXJzOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGYsZz1bXSxoPWIuZGVsZWdhdGVDb3VudCxpPWEudGFyZ2V0O2lmKGgmJmkubm9kZVR5cGUmJighYS5idXR0b258fCJjbGljayIhPT1hLnR5cGUpKWZvcig7aSE9PXRoaXM7aT1pLnBhcmVudE5vZGV8fHRoaXMpaWYoaS5kaXNhYmxlZCE9PSEwfHwiY2xpY2siIT09YS50eXBlKXtmb3IoZD1bXSxjPTA7aD5jO2MrKylmPWJbY10sZT1mLnNlbGVjdG9yKyIgIix2b2lkIDA9PT1kW2VdJiYoZFtlXT1mLm5lZWRzQ29udGV4dD9uKGUsdGhpcykuaW5kZXgoaSk+PTA6bi5maW5kKGUsdGhpcyxudWxsLFtpXSkubGVuZ3RoKSxkW2VdJiZkLnB1c2goZik7ZC5sZW5ndGgmJmcucHVzaCh7ZWxlbTppLGhhbmRsZXJzOmR9KX1yZXR1cm4gaDxiLmxlbmd0aCYmZy5wdXNoKHtlbGVtOnRoaXMsaGFuZGxlcnM6Yi5zbGljZShoKX0pLGd9LHByb3BzOiJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBldmVudFBoYXNlIG1ldGFLZXkgcmVsYXRlZFRhcmdldCBzaGlmdEtleSB0YXJnZXQgdGltZVN0YW1wIHZpZXcgd2hpY2giLnNwbGl0KCIgIiksZml4SG9va3M6e30sa2V5SG9va3M6e3Byb3BzOiJjaGFyIGNoYXJDb2RlIGtleSBrZXlDb2RlIi5zcGxpdCgiICIpLGZpbHRlcjpmdW5jdGlvbihhLGIpe3JldHVybiBudWxsPT1hLndoaWNoJiYoYS53aGljaD1udWxsIT1iLmNoYXJDb2RlP2IuY2hhckNvZGU6Yi5rZXlDb2RlKSxhfX0sbW91c2VIb29rczp7cHJvcHM6ImJ1dHRvbiBidXR0b25zIGNsaWVudFggY2xpZW50WSBvZmZzZXRYIG9mZnNldFkgcGFnZVggcGFnZVkgc2NyZWVuWCBzY3JlZW5ZIHRvRWxlbWVudCIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj1iLmJ1dHRvbjtyZXR1cm4gbnVsbD09YS5wYWdlWCYmbnVsbCE9Yi5jbGllbnRYJiYoYz1hLnRhcmdldC5vd25lckRvY3VtZW50fHxsLGQ9Yy5kb2N1bWVudEVsZW1lbnQsZT1jLmJvZHksYS5wYWdlWD1iLmNsaWVudFgrKGQmJmQuc2Nyb2xsTGVmdHx8ZSYmZS5zY3JvbGxMZWZ0fHwwKS0oZCYmZC5jbGllbnRMZWZ0fHxlJiZlLmNsaWVudExlZnR8fDApLGEucGFnZVk9Yi5jbGllbnRZKyhkJiZkLnNjcm9sbFRvcHx8ZSYmZS5zY3JvbGxUb3B8fDApLShkJiZkLmNsaWVudFRvcHx8ZSYmZS5jbGllbnRUb3B8fDApKSxhLndoaWNofHx2b2lkIDA9PT1mfHwoYS53aGljaD0xJmY/MToyJmY/Mzo0JmY/MjowKSxhfX0sZml4OmZ1bmN0aW9uKGEpe2lmKGFbbi5leHBhbmRvXSlyZXR1cm4gYTt2YXIgYixjLGQsZT1hLnR5cGUsZj1hLGc9dGhpcy5maXhIb29rc1tlXTtnfHwodGhpcy5maXhIb29rc1tlXT1nPVcudGVzdChlKT90aGlzLm1vdXNlSG9va3M6Vi50ZXN0KGUpP3RoaXMua2V5SG9va3M6e30pLGQ9Zy5wcm9wcz90aGlzLnByb3BzLmNvbmNhdChnLnByb3BzKTp0aGlzLnByb3BzLGE9bmV3IG4uRXZlbnQoZiksYj1kLmxlbmd0aDt3aGlsZShiLS0pYz1kW2JdLGFbY109ZltjXTtyZXR1cm4gYS50YXJnZXR8fChhLnRhcmdldD1sKSwzPT09YS50YXJnZXQubm9kZVR5cGUmJihhLnRhcmdldD1hLnRhcmdldC5wYXJlbnROb2RlKSxnLmZpbHRlcj9nLmZpbHRlcihhLGYpOmF9LHNwZWNpYWw6e2xvYWQ6e25vQnViYmxlOiEwfSxmb2N1czp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzIT09XygpJiZ0aGlzLmZvY3VzPyh0aGlzLmZvY3VzKCksITEpOnZvaWQgMH0sZGVsZWdhdGVUeXBlOiJmb2N1c2luIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzPT09XygpJiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZToiZm9jdXNvdXQifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiJjaGVja2JveCI9PT10aGlzLnR5cGUmJnRoaXMuY2xpY2smJm4ubm9kZU5hbWUodGhpcywiaW5wdXQiKT8odGhpcy5jbGljaygpLCExKTp2b2lkIDB9LF9kZWZhdWx0OmZ1bmN0aW9uKGEpe3JldHVybiBuLm5vZGVOYW1lKGEudGFyZ2V0LCJhIil9fSxiZWZvcmV1bmxvYWQ6e3Bvc3REaXNwYXRjaDpmdW5jdGlvbihhKXt2b2lkIDAhPT1hLnJlc3VsdCYmYS5vcmlnaW5hbEV2ZW50JiYoYS5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlPWEucmVzdWx0KX19fSxzaW11bGF0ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uLmV4dGVuZChuZXcgbi5FdmVudCxjLHt0eXBlOmEsaXNTaW11bGF0ZWQ6ITAsb3JpZ2luYWxFdmVudDp7fX0pO2Q/bi5ldmVudC50cmlnZ2VyKGUsbnVsbCxiKTpuLmV2ZW50LmRpc3BhdGNoLmNhbGwoYixlKSxlLmlzRGVmYXVsdFByZXZlbnRlZCgpJiZjLnByZXZlbnREZWZhdWx0KCl9fSxuLnJlbW92ZUV2ZW50PWZ1bmN0aW9uKGEsYixjKXthLnJlbW92ZUV2ZW50TGlzdGVuZXImJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGMsITEpfSxuLkV2ZW50PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBuLkV2ZW50PyhhJiZhLnR5cGU/KHRoaXMub3JpZ2luYWxFdmVudD1hLHRoaXMudHlwZT1hLnR5cGUsdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9YS5kZWZhdWx0UHJldmVudGVkfHx2b2lkIDA9PT1hLmRlZmF1bHRQcmV2ZW50ZWQmJmEucmV0dXJuVmFsdWU9PT0hMT9aOiQpOnRoaXMudHlwZT1hLGImJm4uZXh0ZW5kKHRoaXMsYiksdGhpcy50aW1lU3RhbXA9YSYmYS50aW1lU3RhbXB8fG4ubm93KCksdm9pZCh0aGlzW24uZXhwYW5kb109ITApKTpuZXcgbi5FdmVudChhLGIpfSxuLkV2ZW50LnByb3RvdHlwZT17aXNEZWZhdWx0UHJldmVudGVkOiQsaXNQcm9wYWdhdGlvblN0b3BwZWQ6JCxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDokLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPVosYSYmYS5wcmV2ZW50RGVmYXVsdCYmYS5wcmV2ZW50RGVmYXVsdCgpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1aLGEmJmEuc3RvcFByb3BhZ2F0aW9uJiZhLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1aLGEmJmEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uJiZhLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLHRoaXMuc3RvcFByb3BhZ2F0aW9uKCl9fSxuLmVhY2goe21vdXNlZW50ZXI6Im1vdXNlb3ZlciIsbW91c2VsZWF2ZToibW91c2VvdXQiLHBvaW50ZXJlbnRlcjoicG9pbnRlcm92ZXIiLHBvaW50ZXJsZWF2ZToicG9pbnRlcm91dCJ9LGZ1bmN0aW9uKGEsYil7bi5ldmVudC5zcGVjaWFsW2FdPXtkZWxlZ2F0ZVR5cGU6YixiaW5kVHlwZTpiLGhhbmRsZTpmdW5jdGlvbihhKXt2YXIgYyxkPXRoaXMsZT1hLnJlbGF0ZWRUYXJnZXQsZj1hLmhhbmRsZU9iajtyZXR1cm4oIWV8fGUhPT1kJiYhbi5jb250YWlucyhkLGUpKSYmKGEudHlwZT1mLm9yaWdUeXBlLGM9Zi5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxhLnR5cGU9YiksY319fSksay5mb2N1c2luQnViYmxlc3x8bi5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe24uZXZlbnQuc2ltdWxhdGUoYixhLnRhcmdldCxuLmV2ZW50LmZpeChhKSwhMCl9O24uZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1MLmFjY2VzcyhkLGIpO2V8fGQuYWRkRXZlbnRMaXN0ZW5lcihhLGMsITApLEwuYWNjZXNzKGQsYiwoZXx8MCkrMSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLGU9TC5hY2Nlc3MoZCxiKS0xO2U/TC5hY2Nlc3MoZCxiLGUpOihkLnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxjLCEwKSxMLnJlbW92ZShkLGIpKX19fSksbi5mbi5leHRlbmQoe29uOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZztpZigib2JqZWN0Ij09dHlwZW9mIGEpeyJzdHJpbmciIT10eXBlb2YgYiYmKGM9Y3x8YixiPXZvaWQgMCk7Zm9yKGcgaW4gYSl0aGlzLm9uKGcsYixjLGFbZ10sZSk7cmV0dXJuIHRoaXN9aWYobnVsbD09YyYmbnVsbD09ZD8oZD1iLGM9Yj12b2lkIDApOm51bGw9PWQmJigic3RyaW5nIj09dHlwZW9mIGI/KGQ9YyxjPXZvaWQgMCk6KGQ9YyxjPWIsYj12b2lkIDApKSxkPT09ITEpZD0kO2Vsc2UgaWYoIWQpcmV0dXJuIHRoaXM7cmV0dXJuIDE9PT1lJiYoZj1kLGQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG4oKS5vZmYoYSksZi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGQuZ3VpZD1mLmd1aWR8fChmLmd1aWQ9bi5ndWlkKyspKSx0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmV2ZW50LmFkZCh0aGlzLGEsZCxjLGIpfSl9LG9uZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5vbihhLGIsYyxkLDEpfSxvZmY6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU7aWYoYSYmYS5wcmV2ZW50RGVmYXVsdCYmYS5oYW5kbGVPYmopcmV0dXJuIGQ9YS5oYW5kbGVPYmosbihhLmRlbGVnYXRlVGFyZ2V0KS5vZmYoZC5uYW1lc3BhY2U/ZC5vcmlnVHlwZSsiLiIrZC5uYW1lc3BhY2U6ZC5vcmlnVHlwZSxkLnNlbGVjdG9yLGQuaGFuZGxlciksdGhpcztpZigib2JqZWN0Ij09dHlwZW9mIGEpe2ZvcihlIGluIGEpdGhpcy5vZmYoZSxiLGFbZV0pO3JldHVybiB0aGlzfXJldHVybihiPT09ITF8fCJmdW5jdGlvbiI9PXR5cGVvZiBiKSYmKGM9YixiPXZvaWQgMCksYz09PSExJiYoYz0kKSx0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmV2ZW50LnJlbW92ZSh0aGlzLGEsYyxiKX0pfSx0cmlnZ2VyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe24uZXZlbnQudHJpZ2dlcihhLGIsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzWzBdO3JldHVybiBjP24uZXZlbnQudHJpZ2dlcihhLGIsYywhMCk6dm9pZCAwfX0pO3ZhciBhYj0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXHc6XSspW14+XSopXC8+L2dpLGJiPS88KFtcdzpdKykvLGNiPS88fCYjP1x3KzsvLGRiPS88KD86c2NyaXB0fHN0eWxlfGxpbmspL2ksZWI9L2NoZWNrZWRccyooPzpbXj1dfD1ccyouY2hlY2tlZC4pL2ksZmI9L14kfFwvKD86amF2YXxlY21hKXNjcmlwdC9pLGdiPS9edHJ1ZVwvKC4qKS8saGI9L15ccyo8ISg/OlxbQ0RBVEFcW3wtLSl8KD86XF1cXXwtLSk+XHMqJC9nLGliPXtvcHRpb246WzEsIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCI8L3NlbGVjdD4iXSx0aGVhZDpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sdGQ6WzMsIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdLF9kZWZhdWx0OlswLCIiLCIiXX07aWIub3B0Z3JvdXA9aWIub3B0aW9uLGliLnRib2R5PWliLnRmb290PWliLmNvbGdyb3VwPWliLmNhcHRpb249aWIudGhlYWQsaWIudGg9aWIudGQ7ZnVuY3Rpb24gamIoYSxiKXtyZXR1cm4gbi5ub2RlTmFtZShhLCJ0YWJsZSIpJiZuLm5vZGVOYW1lKDExIT09Yi5ub2RlVHlwZT9iOmIuZmlyc3RDaGlsZCwidHIiKT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0Ym9keSIpWzBdfHxhLmFwcGVuZENoaWxkKGEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIpKTphfWZ1bmN0aW9uIGtiKGEpe3JldHVybiBhLnR5cGU9KG51bGwhPT1hLmdldEF0dHJpYnV0ZSgidHlwZSIpKSsiLyIrYS50eXBlLGF9ZnVuY3Rpb24gbGIoYSl7dmFyIGI9Z2IuZXhlYyhhLnR5cGUpO3JldHVybiBiP2EudHlwZT1iWzFdOmEucmVtb3ZlQXR0cmlidXRlKCJ0eXBlIiksYX1mdW5jdGlvbiBtYihhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKylMLnNldChhW2NdLCJnbG9iYWxFdmFsIiwhYnx8TC5nZXQoYltjXSwiZ2xvYmFsRXZhbCIpKX1mdW5jdGlvbiBuYihhLGIpe3ZhciBjLGQsZSxmLGcsaCxpLGo7aWYoMT09PWIubm9kZVR5cGUpe2lmKEwuaGFzRGF0YShhKSYmKGY9TC5hY2Nlc3MoYSksZz1MLnNldChiLGYpLGo9Zi5ldmVudHMpKXtkZWxldGUgZy5oYW5kbGUsZy5ldmVudHM9e307Zm9yKGUgaW4gailmb3IoYz0wLGQ9altlXS5sZW5ndGg7ZD5jO2MrKyluLmV2ZW50LmFkZChiLGUsaltlXVtjXSl9TS5oYXNEYXRhKGEpJiYoaD1NLmFjY2VzcyhhKSxpPW4uZXh0ZW5kKHt9LGgpLE0uc2V0KGIsaSkpfX1mdW5jdGlvbiBvYihhLGIpe3ZhciBjPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWU/YS5nZXRFbGVtZW50c0J5VGFnTmFtZShifHwiKiIpOmEucXVlcnlTZWxlY3RvckFsbD9hLnF1ZXJ5U2VsZWN0b3JBbGwoYnx8IioiKTpbXTtyZXR1cm4gdm9pZCAwPT09Ynx8YiYmbi5ub2RlTmFtZShhLGIpP24ubWVyZ2UoW2FdLGMpOmN9ZnVuY3Rpb24gcGIoYSxiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7ImlucHV0Ij09PWMmJlQudGVzdChhLnR5cGUpP2IuY2hlY2tlZD1hLmNoZWNrZWQ6KCJpbnB1dCI9PT1jfHwidGV4dGFyZWEiPT09YykmJihiLmRlZmF1bHRWYWx1ZT1hLmRlZmF1bHRWYWx1ZSl9bi5leHRlbmQoe2Nsb25lOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuY2xvbmVOb2RlKCEwKSxpPW4uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpO2lmKCEoay5ub0Nsb25lQ2hlY2tlZHx8MSE9PWEubm9kZVR5cGUmJjExIT09YS5ub2RlVHlwZXx8bi5pc1hNTERvYyhhKSkpZm9yKGc9b2IoaCksZj1vYihhKSxkPTAsZT1mLmxlbmd0aDtlPmQ7ZCsrKXBiKGZbZF0sZ1tkXSk7aWYoYilpZihjKWZvcihmPWZ8fG9iKGEpLGc9Z3x8b2IoaCksZD0wLGU9Zi5sZW5ndGg7ZT5kO2QrKyluYihmW2RdLGdbZF0pO2Vsc2UgbmIoYSxoKTtyZXR1cm4gZz1vYihoLCJzY3JpcHQiKSxnLmxlbmd0aD4wJiZtYihnLCFpJiZvYihhLCJzY3JpcHQiKSksaH0sYnVpbGRGcmFnbWVudDpmdW5jdGlvbihhLGIsYyxkKXtmb3IodmFyIGUsZixnLGgsaSxqLGs9Yi5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksbD1bXSxtPTAsbz1hLmxlbmd0aDtvPm07bSsrKWlmKGU9YVttXSxlfHwwPT09ZSlpZigib2JqZWN0Ij09PW4udHlwZShlKSluLm1lcmdlKGwsZS5ub2RlVHlwZT9bZV06ZSk7ZWxzZSBpZihjYi50ZXN0KGUpKXtmPWZ8fGsuYXBwZW5kQ2hpbGQoYi5jcmVhdGVFbGVtZW50KCJkaXYiKSksZz0oYmIuZXhlYyhlKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKSxoPWliW2ddfHxpYi5fZGVmYXVsdCxmLmlubmVySFRNTD1oWzFdK2UucmVwbGFjZShhYiwiPCQxPjwvJDI+IikraFsyXSxqPWhbMF07d2hpbGUoai0tKWY9Zi5sYXN0Q2hpbGQ7bi5tZXJnZShsLGYuY2hpbGROb2RlcyksZj1rLmZpcnN0Q2hpbGQsZi50ZXh0Q29udGVudD0iIn1lbHNlIGwucHVzaChiLmNyZWF0ZVRleHROb2RlKGUpKTtrLnRleHRDb250ZW50PSIiLG09MDt3aGlsZShlPWxbbSsrXSlpZigoIWR8fC0xPT09bi5pbkFycmF5KGUsZCkpJiYoaT1uLmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKSxmPW9iKGsuYXBwZW5kQ2hpbGQoZSksInNjcmlwdCIpLGkmJm1iKGYpLGMpKXtqPTA7d2hpbGUoZT1mW2orK10pZmIudGVzdChlLnR5cGV8fCIiKSYmYy5wdXNoKGUpfXJldHVybiBrfSxjbGVhbkRhdGE6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGMsZCxlLGY9bi5ldmVudC5zcGVjaWFsLGc9MDt2b2lkIDAhPT0oYz1hW2ddKTtnKyspe2lmKG4uYWNjZXB0RGF0YShjKSYmKGU9Y1tMLmV4cGFuZG9dLGUmJihiPUwuY2FjaGVbZV0pKSl7aWYoYi5ldmVudHMpZm9yKGQgaW4gYi5ldmVudHMpZltkXT9uLmV2ZW50LnJlbW92ZShjLGQpOm4ucmVtb3ZlRXZlbnQoYyxkLGIuaGFuZGxlKTtMLmNhY2hlW2VdJiZkZWxldGUgTC5jYWNoZVtlXX1kZWxldGUgTS5jYWNoZVtjW00uZXhwYW5kb11dfX19KSxuLmZuLmV4dGVuZCh7dGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PT1hP24udGV4dCh0aGlzKTp0aGlzLmVtcHR5KCkuZWFjaChmdW5jdGlvbigpeygxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSkmJih0aGlzLnRleHRDb250ZW50PWEpfSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj1qYih0aGlzLGEpO2IuYXBwZW5kQ2hpbGQoYSl9fSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPWpiKHRoaXMsYSk7Yi5pbnNlcnRCZWZvcmUoYSxiLmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcy5uZXh0U2libGluZyl9KX0scmVtb3ZlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9YT9uLmZpbHRlcihhLHRoaXMpOnRoaXMsZT0wO251bGwhPShjPWRbZV0pO2UrKylifHwxIT09Yy5ub2RlVHlwZXx8bi5jbGVhbkRhdGEob2IoYykpLGMucGFyZW50Tm9kZSYmKGImJm4uY29udGFpbnMoYy5vd25lckRvY3VtZW50LGMpJiZtYihvYihjLCJzY3JpcHQiKSksYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpKTtyZXR1cm4gdGhpc30sZW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wO251bGwhPShhPXRoaXNbYl0pO2IrKykxPT09YS5ub2RlVHlwZSYmKG4uY2xlYW5EYXRhKG9iKGEsITEpKSxhLnRleHRDb250ZW50PSIiKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT1udWxsPT1hPyExOmEsYj1udWxsPT1iP2E6Yix0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiBuLmNsb25lKHRoaXMsYSxiKX0pfSxodG1sOmZ1bmN0aW9uKGEpe3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYSl7dmFyIGI9dGhpc1swXXx8e30sYz0wLGQ9dGhpcy5sZW5ndGg7aWYodm9pZCAwPT09YSYmMT09PWIubm9kZVR5cGUpcmV0dXJuIGIuaW5uZXJIVE1MO2lmKCJzdHJpbmciPT10eXBlb2YgYSYmIWRiLnRlc3QoYSkmJiFpYlsoYmIuZXhlYyhhKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKV0pe2E9YS5yZXBsYWNlKGFiLCI8JDE+PC8kMj4iKTt0cnl7Zm9yKDtkPmM7YysrKWI9dGhpc1tjXXx8e30sMT09PWIubm9kZVR5cGUmJihuLmNsZWFuRGF0YShvYihiLCExKSksYi5pbm5lckhUTUw9YSk7Yj0wfWNhdGNoKGUpe319YiYmdGhpcy5lbXB0eSgpLmFwcGVuZChhKX0sbnVsbCxhLGFyZ3VtZW50cy5sZW5ndGgpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYil7YT10aGlzLnBhcmVudE5vZGUsbi5jbGVhbkRhdGEob2IodGhpcykpLGEmJmEucmVwbGFjZUNoaWxkKGIsdGhpcyl9KSxhJiYoYS5sZW5ndGh8fGEubm9kZVR5cGUpP3RoaXM6dGhpcy5yZW1vdmUoKX0sZGV0YWNoOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJlbW92ZShhLCEwKX0sZG9tTWFuaXA6ZnVuY3Rpb24oYSxiKXthPWUuYXBwbHkoW10sYSk7dmFyIGMsZCxmLGcsaCxpLGo9MCxsPXRoaXMubGVuZ3RoLG09dGhpcyxvPWwtMSxwPWFbMF0scT1uLmlzRnVuY3Rpb24ocCk7aWYocXx8bD4xJiYic3RyaW5nIj09dHlwZW9mIHAmJiFrLmNoZWNrQ2xvbmUmJmViLnRlc3QocCkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihjKXt2YXIgZD1tLmVxKGMpO3EmJihhWzBdPXAuY2FsbCh0aGlzLGMsZC5odG1sKCkpKSxkLmRvbU1hbmlwKGEsYil9KTtpZihsJiYoYz1uLmJ1aWxkRnJhZ21lbnQoYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQsITEsdGhpcyksZD1jLmZpcnN0Q2hpbGQsMT09PWMuY2hpbGROb2Rlcy5sZW5ndGgmJihjPWQpLGQpKXtmb3IoZj1uLm1hcChvYihjLCJzY3JpcHQiKSxrYiksZz1mLmxlbmd0aDtsPmo7aisrKWg9YyxqIT09byYmKGg9bi5jbG9uZShoLCEwLCEwKSxnJiZuLm1lcmdlKGYsb2IoaCwic2NyaXB0IikpKSxiLmNhbGwodGhpc1tqXSxoLGopO2lmKGcpZm9yKGk9ZltmLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LG4ubWFwKGYsbGIpLGo9MDtnPmo7aisrKWg9ZltqXSxmYi50ZXN0KGgudHlwZXx8IiIpJiYhTC5hY2Nlc3MoaCwiZ2xvYmFsRXZhbCIpJiZuLmNvbnRhaW5zKGksaCkmJihoLnNyYz9uLl9ldmFsVXJsJiZuLl9ldmFsVXJsKGguc3JjKTpuLmdsb2JhbEV2YWwoaC50ZXh0Q29udGVudC5yZXBsYWNlKGhiLCIiKSkpfXJldHVybiB0aGlzfX0pLG4uZWFjaCh7YXBwZW5kVG86ImFwcGVuZCIscHJlcGVuZFRvOiJwcmVwZW5kIixpbnNlcnRCZWZvcmU6ImJlZm9yZSIsaW5zZXJ0QWZ0ZXI6ImFmdGVyIixyZXBsYWNlQWxsOiJyZXBsYWNlV2l0aCJ9LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhKXtmb3IodmFyIGMsZD1bXSxlPW4oYSksZz1lLmxlbmd0aC0xLGg9MDtnPj1oO2grKyljPWg9PT1nP3RoaXM6dGhpcy5jbG9uZSghMCksbihlW2hdKVtiXShjKSxmLmFwcGx5KGQsYy5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGQpfX0pO3ZhciBxYixyYj17fTtmdW5jdGlvbiBzYihiLGMpe3ZhciBkLGU9bihjLmNyZWF0ZUVsZW1lbnQoYikpLmFwcGVuZFRvKGMuYm9keSksZj1hLmdldERlZmF1bHRDb21wdXRlZFN0eWxlJiYoZD1hLmdldERlZmF1bHRDb21wdXRlZFN0eWxlKGVbMF0pKT9kLmRpc3BsYXk6bi5jc3MoZVswXSwiZGlzcGxheSIpO3JldHVybiBlLmRldGFjaCgpLGZ9ZnVuY3Rpb24gdGIoYSl7dmFyIGI9bCxjPXJiW2FdO3JldHVybiBjfHwoYz1zYihhLGIpLCJub25lIiE9PWMmJmN8fChxYj0ocWJ8fG4oIjxpZnJhbWUgZnJhbWVib3JkZXI9JzAnIHdpZHRoPScwJyBoZWlnaHQ9JzAnLz4iKSkuYXBwZW5kVG8oYi5kb2N1bWVudEVsZW1lbnQpLGI9cWJbMF0uY29udGVudERvY3VtZW50LGIud3JpdGUoKSxiLmNsb3NlKCksYz1zYihhLGIpLHFiLmRldGFjaCgpKSxyYlthXT1jKSxjfXZhciB1Yj0vXm1hcmdpbi8sdmI9bmV3IFJlZ0V4cCgiXigiK1ErIikoPyFweClbYS16JV0rJCIsImkiKSx3Yj1mdW5jdGlvbihiKXtyZXR1cm4gYi5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3Lm9wZW5lcj9iLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShiLG51bGwpOmEuZ2V0Q29tcHV0ZWRTdHlsZShiLG51bGwpfTtmdW5jdGlvbiB4YihhLGIsYyl7dmFyIGQsZSxmLGcsaD1hLnN0eWxlO3JldHVybiBjPWN8fHdiKGEpLGMmJihnPWMuZ2V0UHJvcGVydHlWYWx1ZShiKXx8Y1tiXSksYyYmKCIiIT09Z3x8bi5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSl8fChnPW4uc3R5bGUoYSxiKSksdmIudGVzdChnKSYmdWIudGVzdChiKSYmKGQ9aC53aWR0aCxlPWgubWluV2lkdGgsZj1oLm1heFdpZHRoLGgubWluV2lkdGg9aC5tYXhXaWR0aD1oLndpZHRoPWcsZz1jLndpZHRoLGgud2lkdGg9ZCxoLm1pbldpZHRoPWUsaC5tYXhXaWR0aD1mKSksdm9pZCAwIT09Zz9nKyIiOmd9ZnVuY3Rpb24geWIoYSxiKXtyZXR1cm57Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEoKT92b2lkIGRlbGV0ZSB0aGlzLmdldDoodGhpcy5nZXQ9YikuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19IWZ1bmN0aW9uKCl7dmFyIGIsYyxkPWwuZG9jdW1lbnRFbGVtZW50LGU9bC5jcmVhdGVFbGVtZW50KCJkaXYiKSxmPWwuY3JlYXRlRWxlbWVudCgiZGl2Iik7aWYoZi5zdHlsZSl7Zi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iY29udGVudC1ib3giLGYuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iIixrLmNsZWFyQ2xvbmVTdHlsZT0iY29udGVudC1ib3giPT09Zi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCxlLnN0eWxlLmNzc1RleHQ9ImJvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4O21hcmdpbi10b3A6MXB4O3Bvc2l0aW9uOmFic29sdXRlIixlLmFwcGVuZENoaWxkKGYpO2Z1bmN0aW9uIGcoKXtmLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbi10b3A6MSU7dG9wOjElO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7d2lkdGg6NHB4O3Bvc2l0aW9uOmFic29sdXRlIixmLmlubmVySFRNTD0iIixkLmFwcGVuZENoaWxkKGUpO3ZhciBnPWEuZ2V0Q29tcHV0ZWRTdHlsZShmLG51bGwpO2I9IjElIiE9PWcudG9wLGM9IjRweCI9PT1nLndpZHRoLGQucmVtb3ZlQ2hpbGQoZSl9YS5nZXRDb21wdXRlZFN0eWxlJiZuLmV4dGVuZChrLHtwaXhlbFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGcoKSxifSxib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT1jJiZnKCksY30scmVsaWFibGVNYXJnaW5SaWdodDpmdW5jdGlvbigpe3ZhciBiLGM9Zi5hcHBlbmRDaGlsZChsLmNyZWF0ZUVsZW1lbnQoImRpdiIpKTtyZXR1cm4gYy5zdHlsZS5jc3NUZXh0PWYuc3R5bGUuY3NzVGV4dD0iLXdlYmtpdC1ib3gtc2l6aW5nOmNvbnRlbnQtYm94Oy1tb3otYm94LXNpemluZzpjb250ZW50LWJveDtib3gtc2l6aW5nOmNvbnRlbnQtYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowIixjLnN0eWxlLm1hcmdpblJpZ2h0PWMuc3R5bGUud2lkdGg9IjAiLGYuc3R5bGUud2lkdGg9IjFweCIsZC5hcHBlbmRDaGlsZChlKSxiPSFwYXJzZUZsb2F0KGEuZ2V0Q29tcHV0ZWRTdHlsZShjLG51bGwpLm1hcmdpblJpZ2h0KSxkLnJlbW92ZUNoaWxkKGUpLGYucmVtb3ZlQ2hpbGQoYyksYn19KX19KCksbi5zd2FwPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlLGYsZz17fTtmb3IoZiBpbiBiKWdbZl09YS5zdHlsZVtmXSxhLnN0eWxlW2ZdPWJbZl07ZT1jLmFwcGx5KGEsZHx8W10pO2ZvcihmIGluIGIpYS5zdHlsZVtmXT1nW2ZdO3JldHVybiBlfTt2YXIgemI9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLEFiPW5ldyBSZWdFeHAoIl4oIitRKyIpKC4qKSQiLCJpIiksQmI9bmV3IFJlZ0V4cCgiXihbKy1dKT0oIitRKyIpIiwiaSIpLENiPXtwb3NpdGlvbjoiYWJzb2x1dGUiLHZpc2liaWxpdHk6ImhpZGRlbiIsZGlzcGxheToiYmxvY2sifSxEYj17bGV0dGVyU3BhY2luZzoiMCIsZm9udFdlaWdodDoiNDAwIn0sRWI9WyJXZWJraXQiLCJPIiwiTW96IiwibXMiXTtmdW5jdGlvbiBGYihhLGIpe2lmKGIgaW4gYSlyZXR1cm4gYjt2YXIgYz1iWzBdLnRvVXBwZXJDYXNlKCkrYi5zbGljZSgxKSxkPWIsZT1FYi5sZW5ndGg7d2hpbGUoZS0tKWlmKGI9RWJbZV0rYyxiIGluIGEpcmV0dXJuIGI7cmV0dXJuIGR9ZnVuY3Rpb24gR2IoYSxiLGMpe3ZhciBkPUFiLmV4ZWMoYik7cmV0dXJuIGQ/TWF0aC5tYXgoMCxkWzFdLShjfHwwKSkrKGRbMl18fCJweCIpOmJ9ZnVuY3Rpb24gSGIoYSxiLGMsZCxlKXtmb3IodmFyIGY9Yz09PShkPyJib3JkZXIiOiJjb250ZW50Iik/NDoid2lkdGgiPT09Yj8xOjAsZz0wOzQ+ZjtmKz0yKSJtYXJnaW4iPT09YyYmKGcrPW4uY3NzKGEsYytSW2ZdLCEwLGUpKSxkPygiY29udGVudCI9PT1jJiYoZy09bi5jc3MoYSwicGFkZGluZyIrUltmXSwhMCxlKSksIm1hcmdpbiIhPT1jJiYoZy09bi5jc3MoYSwiYm9yZGVyIitSW2ZdKyJXaWR0aCIsITAsZSkpKTooZys9bi5jc3MoYSwicGFkZGluZyIrUltmXSwhMCxlKSwicGFkZGluZyIhPT1jJiYoZys9bi5jc3MoYSwiYm9yZGVyIitSW2ZdKyJXaWR0aCIsITAsZSkpKTtyZXR1cm4gZ31mdW5jdGlvbiBJYihhLGIsYyl7dmFyIGQ9ITAsZT0id2lkdGgiPT09Yj9hLm9mZnNldFdpZHRoOmEub2Zmc2V0SGVpZ2h0LGY9d2IoYSksZz0iYm9yZGVyLWJveCI9PT1uLmNzcyhhLCJib3hTaXppbmciLCExLGYpO2lmKDA+PWV8fG51bGw9PWUpe2lmKGU9eGIoYSxiLGYpLCgwPmV8fG51bGw9PWUpJiYoZT1hLnN0eWxlW2JdKSx2Yi50ZXN0KGUpKXJldHVybiBlO2Q9ZyYmKGsuYm94U2l6aW5nUmVsaWFibGUoKXx8ZT09PWEuc3R5bGVbYl0pLGU9cGFyc2VGbG9hdChlKXx8MH1yZXR1cm4gZStIYihhLGIsY3x8KGc/ImJvcmRlciI6ImNvbnRlbnQiKSxkLGYpKyJweCJ9ZnVuY3Rpb24gSmIoYSxiKXtmb3IodmFyIGMsZCxlLGY9W10sZz0wLGg9YS5sZW5ndGg7aD5nO2crKylkPWFbZ10sZC5zdHlsZSYmKGZbZ109TC5nZXQoZCwib2xkZGlzcGxheSIpLGM9ZC5zdHlsZS5kaXNwbGF5LGI/KGZbZ118fCJub25lIiE9PWN8fChkLnN0eWxlLmRpc3BsYXk9IiIpLCIiPT09ZC5zdHlsZS5kaXNwbGF5JiZTKGQpJiYoZltnXT1MLmFjY2VzcyhkLCJvbGRkaXNwbGF5Iix0YihkLm5vZGVOYW1lKSkpKTooZT1TKGQpLCJub25lIj09PWMmJmV8fEwuc2V0KGQsIm9sZGRpc3BsYXkiLGU/YzpuLmNzcyhkLCJkaXNwbGF5IikpKSk7Zm9yKGc9MDtoPmc7ZysrKWQ9YVtnXSxkLnN0eWxlJiYoYiYmIm5vbmUiIT09ZC5zdHlsZS5kaXNwbGF5JiYiIiE9PWQuc3R5bGUuZGlzcGxheXx8KGQuc3R5bGUuZGlzcGxheT1iP2ZbZ118fCIiOiJub25lIikpO3JldHVybiBhfW4uZXh0ZW5kKHtjc3NIb29rczp7b3BhY2l0eTp7Z2V0OmZ1bmN0aW9uKGEsYil7aWYoYil7dmFyIGM9eGIoYSwib3BhY2l0eSIpO3JldHVybiIiPT09Yz8iMSI6Y319fX0sY3NzTnVtYmVyOntjb2x1bW5Db3VudDohMCxmaWxsT3BhY2l0eTohMCxmbGV4R3JvdzohMCxmbGV4U2hyaW5rOiEwLGZvbnRXZWlnaHQ6ITAsbGluZUhlaWdodDohMCxvcGFjaXR5OiEwLG9yZGVyOiEwLG9ycGhhbnM6ITAsd2lkb3dzOiEwLHpJbmRleDohMCx6b29tOiEwfSxjc3NQcm9wczp7ImZsb2F0IjoiY3NzRmxvYXQifSxzdHlsZTpmdW5jdGlvbihhLGIsYyxkKXtpZihhJiYzIT09YS5ub2RlVHlwZSYmOCE9PWEubm9kZVR5cGUmJmEuc3R5bGUpe3ZhciBlLGYsZyxoPW4uY2FtZWxDYXNlKGIpLGk9YS5zdHlsZTtyZXR1cm4gYj1uLmNzc1Byb3BzW2hdfHwobi5jc3NQcm9wc1toXT1GYihpLGgpKSxnPW4uY3NzSG9va3NbYl18fG4uY3NzSG9va3NbaF0sdm9pZCAwPT09Yz9nJiYiZ2V0ImluIGcmJnZvaWQgMCE9PShlPWcuZ2V0KGEsITEsZCkpP2U6aVtiXTooZj10eXBlb2YgYywic3RyaW5nIj09PWYmJihlPUJiLmV4ZWMoYykpJiYoYz0oZVsxXSsxKSplWzJdK3BhcnNlRmxvYXQobi5jc3MoYSxiKSksZj0ibnVtYmVyIiksbnVsbCE9YyYmYz09PWMmJigibnVtYmVyIiE9PWZ8fG4uY3NzTnVtYmVyW2hdfHwoYys9InB4Iiksay5jbGVhckNsb25lU3R5bGV8fCIiIT09Y3x8MCE9PWIuaW5kZXhPZigiYmFja2dyb3VuZCIpfHwoaVtiXT0iaW5oZXJpdCIpLGcmJiJzZXQiaW4gZyYmdm9pZCAwPT09KGM9Zy5zZXQoYSxjLGQpKXx8KGlbYl09YykpLHZvaWQgMCl9fSxjc3M6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnLGg9bi5jYW1lbENhc2UoYik7cmV0dXJuIGI9bi5jc3NQcm9wc1toXXx8KG4uY3NzUHJvcHNbaF09RmIoYS5zdHlsZSxoKSksZz1uLmNzc0hvb2tzW2JdfHxuLmNzc0hvb2tzW2hdLGcmJiJnZXQiaW4gZyYmKGU9Zy5nZXQoYSwhMCxjKSksdm9pZCAwPT09ZSYmKGU9eGIoYSxiLGQpKSwibm9ybWFsIj09PWUmJmIgaW4gRGImJihlPURiW2JdKSwiIj09PWN8fGM/KGY9cGFyc2VGbG9hdChlKSxjPT09ITB8fG4uaXNOdW1lcmljKGYpP2Z8fDA6ZSk6ZX19KSxuLmVhY2goWyJoZWlnaHQiLCJ3aWR0aCJdLGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gYz96Yi50ZXN0KG4uY3NzKGEsImRpc3BsYXkiKSkmJjA9PT1hLm9mZnNldFdpZHRoP24uc3dhcChhLENiLGZ1bmN0aW9uKCl7cmV0dXJuIEliKGEsYixkKX0pOkliKGEsYixkKTp2b2lkIDB9LHNldDpmdW5jdGlvbihhLGMsZCl7dmFyIGU9ZCYmd2IoYSk7cmV0dXJuIEdiKGEsYyxkP0hiKGEsYixkLCJib3JkZXItYm94Ij09PW4uY3NzKGEsImJveFNpemluZyIsITEsZSksZSk6MCl9fX0pLG4uY3NzSG9va3MubWFyZ2luUmlnaHQ9eWIoay5yZWxpYWJsZU1hcmdpblJpZ2h0LGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/bi5zd2FwKGEse2Rpc3BsYXk6ImlubGluZS1ibG9jayJ9LHhiLFthLCJtYXJnaW5SaWdodCJdKTp2b2lkIDB9KSxuLmVhY2goe21hcmdpbjoiIixwYWRkaW5nOiIiLGJvcmRlcjoiV2lkdGgifSxmdW5jdGlvbihhLGIpe24uY3NzSG9va3NbYStiXT17ZXhwYW5kOmZ1bmN0aW9uKGMpe2Zvcih2YXIgZD0wLGU9e30sZj0ic3RyaW5nIj09dHlwZW9mIGM/Yy5zcGxpdCgiICIpOltjXTs0PmQ7ZCsrKWVbYStSW2RdK2JdPWZbZF18fGZbZC0yXXx8ZlswXTtyZXR1cm4gZX19LHViLnRlc3QoYSl8fChuLmNzc0hvb2tzW2ErYl0uc2V0PUdiKX0pLG4uZm4uZXh0ZW5kKHtjc3M6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9e30sZz0wO2lmKG4uaXNBcnJheShiKSl7Zm9yKGQ9d2IoYSksZT1iLmxlbmd0aDtlPmc7ZysrKWZbYltnXV09bi5jc3MoYSxiW2ddLCExLGQpO3JldHVybiBmfXJldHVybiB2b2lkIDAhPT1jP24uc3R5bGUoYSxiLGMpOm4uY3NzKGEsYil9LGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxzaG93OmZ1bmN0aW9uKCl7cmV0dXJuIEpiKHRoaXMsITApfSxoaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIEpiKHRoaXMpfSx0b2dnbGU6ZnVuY3Rpb24oYSl7cmV0dXJuImJvb2xlYW4iPT10eXBlb2YgYT9hP3RoaXMuc2hvdygpOnRoaXMuaGlkZSgpOnRoaXMuZWFjaChmdW5jdGlvbigpe1ModGhpcyk/bih0aGlzKS5zaG93KCk6bih0aGlzKS5oaWRlKCl9KX19KTtmdW5jdGlvbiBLYihhLGIsYyxkLGUpe3JldHVybiBuZXcgS2IucHJvdG90eXBlLmluaXQoYSxiLGMsZCxlKX1uLlR3ZWVuPUtiLEtiLnByb3RvdHlwZT17Y29uc3RydWN0b3I6S2IsaW5pdDpmdW5jdGlvbihhLGIsYyxkLGUsZil7dGhpcy5lbGVtPWEsdGhpcy5wcm9wPWMsdGhpcy5lYXNpbmc9ZXx8InN3aW5nIix0aGlzLm9wdGlvbnM9Yix0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9ZCx0aGlzLnVuaXQ9Znx8KG4uY3NzTnVtYmVyW2NdPyIiOiJweCIpfSxjdXI6ZnVuY3Rpb24oKXt2YXIgYT1LYi5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gYSYmYS5nZXQ/YS5nZXQodGhpcyk6S2IucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGEpe3ZhciBiLGM9S2IucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIHRoaXMucG9zPWI9dGhpcy5vcHRpb25zLmR1cmF0aW9uP24uZWFzaW5nW3RoaXMuZWFzaW5nXShhLHRoaXMub3B0aW9ucy5kdXJhdGlvbiphLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOmEsdGhpcy5ub3c9KHRoaXMuZW5kLXRoaXMuc3RhcnQpKmIrdGhpcy5zdGFydCx0aGlzLm9wdGlvbnMuc3RlcCYmdGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyksYyYmYy5zZXQ/Yy5zZXQodGhpcyk6S2IucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKSx0aGlzfX0sS2IucHJvdG90eXBlLmluaXQucHJvdG90eXBlPUtiLnByb3RvdHlwZSxLYi5wcm9wSG9va3M9e19kZWZhdWx0OntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIG51bGw9PWEuZWxlbVthLnByb3BdfHxhLmVsZW0uc3R5bGUmJm51bGwhPWEuZWxlbS5zdHlsZVthLnByb3BdPyhiPW4uY3NzKGEuZWxlbSxhLnByb3AsIiIpLGImJiJhdXRvIiE9PWI/YjowKTphLmVsZW1bYS5wcm9wXX0sc2V0OmZ1bmN0aW9uKGEpe24uZnguc3RlcFthLnByb3BdP24uZnguc3RlcFthLnByb3BdKGEpOmEuZWxlbS5zdHlsZSYmKG51bGwhPWEuZWxlbS5zdHlsZVtuLmNzc1Byb3BzW2EucHJvcF1dfHxuLmNzc0hvb2tzW2EucHJvcF0pP24uc3R5bGUoYS5lbGVtLGEucHJvcCxhLm5vdythLnVuaXQpOmEuZWxlbVthLnByb3BdPWEubm93fX19LEtiLnByb3BIb29rcy5zY3JvbGxUb3A9S2IucHJvcEhvb2tzLnNjcm9sbExlZnQ9e3NldDpmdW5jdGlvbihhKXthLmVsZW0ubm9kZVR5cGUmJmEuZWxlbS5wYXJlbnROb2RlJiYoYS5lbGVtW2EucHJvcF09YS5ub3cpfX0sbi5lYXNpbmc9e2xpbmVhcjpmdW5jdGlvbihhKXtyZXR1cm4gYX0sc3dpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuLjUtTWF0aC5jb3MoYSpNYXRoLlBJKS8yfX0sbi5meD1LYi5wcm90b3R5cGUuaW5pdCxuLmZ4LnN0ZXA9e307dmFyIExiLE1iLE5iPS9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyxPYj1uZXcgUmVnRXhwKCJeKD86KFsrLV0pPXwpKCIrUSsiKShbYS16JV0qKSQiLCJpIiksUGI9L3F1ZXVlSG9va3MkLyxRYj1bVmJdLFJiPXsiKiI6W2Z1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jcmVhdGVUd2VlbihhLGIpLGQ9Yy5jdXIoKSxlPU9iLmV4ZWMoYiksZj1lJiZlWzNdfHwobi5jc3NOdW1iZXJbYV0/IiI6InB4IiksZz0obi5jc3NOdW1iZXJbYV18fCJweCIhPT1mJiYrZCkmJk9iLmV4ZWMobi5jc3MoYy5lbGVtLGEpKSxoPTEsaT0yMDtpZihnJiZnWzNdIT09Zil7Zj1mfHxnWzNdLGU9ZXx8W10sZz0rZHx8MTtkbyBoPWh8fCIuNSIsZy89aCxuLnN0eWxlKGMuZWxlbSxhLGcrZik7d2hpbGUoaCE9PShoPWMuY3VyKCkvZCkmJjEhPT1oJiYtLWkpfXJldHVybiBlJiYoZz1jLnN0YXJ0PStnfHwrZHx8MCxjLnVuaXQ9ZixjLmVuZD1lWzFdP2crKGVbMV0rMSkqZVsyXTorZVsyXSksY31dfTtmdW5jdGlvbiBTYigpe3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7TGI9dm9pZCAwfSksTGI9bi5ub3coKX1mdW5jdGlvbiBUYihhLGIpe3ZhciBjLGQ9MCxlPXtoZWlnaHQ6YX07Zm9yKGI9Yj8xOjA7ND5kO2QrPTItYiljPVJbZF0sZVsibWFyZ2luIitjXT1lWyJwYWRkaW5nIitjXT1hO3JldHVybiBiJiYoZS5vcGFjaXR5PWUud2lkdGg9YSksZX1mdW5jdGlvbiBVYihhLGIsYyl7Zm9yKHZhciBkLGU9KFJiW2JdfHxbXSkuY29uY2F0KFJiWyIqIl0pLGY9MCxnPWUubGVuZ3RoO2c+ZjtmKyspaWYoZD1lW2ZdLmNhbGwoYyxiLGEpKXJldHVybiBkfWZ1bmN0aW9uIFZiKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrLGw9dGhpcyxtPXt9LG89YS5zdHlsZSxwPWEubm9kZVR5cGUmJlMoYSkscT1MLmdldChhLCJmeHNob3ciKTtjLnF1ZXVlfHwoaD1uLl9xdWV1ZUhvb2tzKGEsImZ4IiksbnVsbD09aC51bnF1ZXVlZCYmKGgudW5xdWV1ZWQ9MCxpPWguZW1wdHkuZmlyZSxoLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXtoLnVucXVldWVkfHxpKCl9KSxoLnVucXVldWVkKyssbC5hbHdheXMoZnVuY3Rpb24oKXtsLmFsd2F5cyhmdW5jdGlvbigpe2gudW5xdWV1ZWQtLSxuLnF1ZXVlKGEsImZ4IikubGVuZ3RofHxoLmVtcHR5LmZpcmUoKX0pfSkpLDE9PT1hLm5vZGVUeXBlJiYoImhlaWdodCJpbiBifHwid2lkdGgiaW4gYikmJihjLm92ZXJmbG93PVtvLm92ZXJmbG93LG8ub3ZlcmZsb3dYLG8ub3ZlcmZsb3dZXSxqPW4uY3NzKGEsImRpc3BsYXkiKSxrPSJub25lIj09PWo/TC5nZXQoYSwib2xkZGlzcGxheSIpfHx0YihhLm5vZGVOYW1lKTpqLCJpbmxpbmUiPT09ayYmIm5vbmUiPT09bi5jc3MoYSwiZmxvYXQiKSYmKG8uZGlzcGxheT0iaW5saW5lLWJsb2NrIikpLGMub3ZlcmZsb3cmJihvLm92ZXJmbG93PSJoaWRkZW4iLGwuYWx3YXlzKGZ1bmN0aW9uKCl7by5vdmVyZmxvdz1jLm92ZXJmbG93WzBdLG8ub3ZlcmZsb3dYPWMub3ZlcmZsb3dbMV0sby5vdmVyZmxvd1k9Yy5vdmVyZmxvd1syXX0pKTtmb3IoZCBpbiBiKWlmKGU9YltkXSxOYi5leGVjKGUpKXtpZihkZWxldGUgYltkXSxmPWZ8fCJ0b2dnbGUiPT09ZSxlPT09KHA/ImhpZGUiOiJzaG93Iikpe2lmKCJzaG93IiE9PWV8fCFxfHx2b2lkIDA9PT1xW2RdKWNvbnRpbnVlO3A9ITB9bVtkXT1xJiZxW2RdfHxuLnN0eWxlKGEsZCl9ZWxzZSBqPXZvaWQgMDtpZihuLmlzRW1wdHlPYmplY3QobSkpImlubGluZSI9PT0oIm5vbmUiPT09aj90YihhLm5vZGVOYW1lKTpqKSYmKG8uZGlzcGxheT1qKTtlbHNle3E/ImhpZGRlbiJpbiBxJiYocD1xLmhpZGRlbik6cT1MLmFjY2VzcyhhLCJmeHNob3ciLHt9KSxmJiYocS5oaWRkZW49IXApLHA/bihhKS5zaG93KCk6bC5kb25lKGZ1bmN0aW9uKCl7bihhKS5oaWRlKCl9KSxsLmRvbmUoZnVuY3Rpb24oKXt2YXIgYjtMLnJlbW92ZShhLCJmeHNob3ciKTtmb3IoYiBpbiBtKW4uc3R5bGUoYSxiLG1bYl0pfSk7Zm9yKGQgaW4gbSlnPVViKHA/cVtkXTowLGQsbCksZCBpbiBxfHwocVtkXT1nLnN0YXJ0LHAmJihnLmVuZD1nLnN0YXJ0LGcuc3RhcnQ9IndpZHRoIj09PWR8fCJoZWlnaHQiPT09ZD8xOjApKX19ZnVuY3Rpb24gV2IoYSxiKXt2YXIgYyxkLGUsZixnO2ZvcihjIGluIGEpaWYoZD1uLmNhbWVsQ2FzZShjKSxlPWJbZF0sZj1hW2NdLG4uaXNBcnJheShmKSYmKGU9ZlsxXSxmPWFbY109ZlswXSksYyE9PWQmJihhW2RdPWYsZGVsZXRlIGFbY10pLGc9bi5jc3NIb29rc1tkXSxnJiYiZXhwYW5kImluIGcpe2Y9Zy5leHBhbmQoZiksZGVsZXRlIGFbZF07Zm9yKGMgaW4gZiljIGluIGF8fChhW2NdPWZbY10sYltjXT1lKX1lbHNlIGJbZF09ZX1mdW5jdGlvbiBYYihhLGIsYyl7dmFyIGQsZSxmPTAsZz1RYi5sZW5ndGgsaD1uLkRlZmVycmVkKCkuYWx3YXlzKGZ1bmN0aW9uKCl7ZGVsZXRlIGkuZWxlbX0pLGk9ZnVuY3Rpb24oKXtpZihlKXJldHVybiExO2Zvcih2YXIgYj1MYnx8U2IoKSxjPU1hdGgubWF4KDAsai5zdGFydFRpbWUrai5kdXJhdGlvbi1iKSxkPWMvai5kdXJhdGlvbnx8MCxmPTEtZCxnPTAsaT1qLnR3ZWVucy5sZW5ndGg7aT5nO2crKylqLnR3ZWVuc1tnXS5ydW4oZik7cmV0dXJuIGgubm90aWZ5V2l0aChhLFtqLGYsY10pLDE+ZiYmaT9jOihoLnJlc29sdmVXaXRoKGEsW2pdKSwhMSl9LGo9aC5wcm9taXNlKHtlbGVtOmEscHJvcHM6bi5leHRlbmQoe30sYiksb3B0czpuLmV4dGVuZCghMCx7c3BlY2lhbEVhc2luZzp7fX0sYyksb3JpZ2luYWxQcm9wZXJ0aWVzOmIsb3JpZ2luYWxPcHRpb25zOmMsc3RhcnRUaW1lOkxifHxTYigpLGR1cmF0aW9uOmMuZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9bi5Ud2VlbihhLGoub3B0cyxiLGMsai5vcHRzLnNwZWNpYWxFYXNpbmdbYl18fGoub3B0cy5lYXNpbmcpO3JldHVybiBqLnR3ZWVucy5wdXNoKGQpLGR9LHN0b3A6ZnVuY3Rpb24oYil7dmFyIGM9MCxkPWI/ai50d2VlbnMubGVuZ3RoOjA7aWYoZSlyZXR1cm4gdGhpcztmb3IoZT0hMDtkPmM7YysrKWoudHdlZW5zW2NdLnJ1bigxKTtyZXR1cm4gYj9oLnJlc29sdmVXaXRoKGEsW2osYl0pOmgucmVqZWN0V2l0aChhLFtqLGJdKSx0aGlzfX0pLGs9ai5wcm9wcztmb3IoV2IoayxqLm9wdHMuc3BlY2lhbEVhc2luZyk7Zz5mO2YrKylpZihkPVFiW2ZdLmNhbGwoaixhLGssai5vcHRzKSlyZXR1cm4gZDtyZXR1cm4gbi5tYXAoayxVYixqKSxuLmlzRnVuY3Rpb24oai5vcHRzLnN0YXJ0KSYmai5vcHRzLnN0YXJ0LmNhbGwoYSxqKSxuLmZ4LnRpbWVyKG4uZXh0ZW5kKGkse2VsZW06YSxhbmltOmoscXVldWU6ai5vcHRzLnF1ZXVlfSkpLGoucHJvZ3Jlc3Moai5vcHRzLnByb2dyZXNzKS5kb25lKGoub3B0cy5kb25lLGoub3B0cy5jb21wbGV0ZSkuZmFpbChqLm9wdHMuZmFpbCkuYWx3YXlzKGoub3B0cy5hbHdheXMpfW4uQW5pbWF0aW9uPW4uZXh0ZW5kKFhiLHt0d2VlbmVyOmZ1bmN0aW9uKGEsYil7bi5pc0Z1bmN0aW9uKGEpPyhiPWEsYT1bIioiXSk6YT1hLnNwbGl0KCIgIik7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZDtkKyspYz1hW2RdLFJiW2NdPVJiW2NdfHxbXSxSYltjXS51bnNoaWZ0KGIpfSxwcmVmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtiP1FiLnVuc2hpZnQoYSk6UWIucHVzaChhKX19KSxuLnNwZWVkPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hJiYib2JqZWN0Ij09dHlwZW9mIGE/bi5leHRlbmQoe30sYSk6e2NvbXBsZXRlOmN8fCFjJiZifHxuLmlzRnVuY3Rpb24oYSkmJmEsZHVyYXRpb246YSxlYXNpbmc6YyYmYnx8YiYmIW4uaXNGdW5jdGlvbihiKSYmYn07cmV0dXJuIGQuZHVyYXRpb249bi5meC5vZmY/MDoibnVtYmVyIj09dHlwZW9mIGQuZHVyYXRpb24/ZC5kdXJhdGlvbjpkLmR1cmF0aW9uIGluIG4uZnguc3BlZWRzP24uZnguc3BlZWRzW2QuZHVyYXRpb25dOm4uZnguc3BlZWRzLl9kZWZhdWx0LChudWxsPT1kLnF1ZXVlfHxkLnF1ZXVlPT09ITApJiYoZC5xdWV1ZT0iZngiKSxkLm9sZD1kLmNvbXBsZXRlLGQuY29tcGxldGU9ZnVuY3Rpb24oKXtuLmlzRnVuY3Rpb24oZC5vbGQpJiZkLm9sZC5jYWxsKHRoaXMpLGQucXVldWUmJm4uZGVxdWV1ZSh0aGlzLGQucXVldWUpfSxkfSxuLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmZpbHRlcihTKS5jc3MoIm9wYWNpdHkiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OmJ9LGEsYyxkKX0sYW5pbWF0ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uLmlzRW1wdHlPYmplY3QoYSksZj1uLnNwZWVkKGIsYyxkKSxnPWZ1bmN0aW9uKCl7dmFyIGI9WGIodGhpcyxuLmV4dGVuZCh7fSxhKSxmKTsoZXx8TC5nZXQodGhpcywiZmluaXNoIikpJiZiLnN0b3AoITApfTtyZXR1cm4gZy5maW5pc2g9ZyxlfHxmLnF1ZXVlPT09ITE/dGhpcy5lYWNoKGcpOnRoaXMucXVldWUoZi5xdWV1ZSxnKX0sc3RvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5zdG9wO2RlbGV0ZSBhLnN0b3AsYihjKX07cmV0dXJuInN0cmluZyIhPXR5cGVvZiBhJiYoYz1iLGI9YSxhPXZvaWQgMCksYiYmYSE9PSExJiZ0aGlzLnF1ZXVlKGF8fCJmeCIsW10pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPSEwLGU9bnVsbCE9YSYmYSsicXVldWVIb29rcyIsZj1uLnRpbWVycyxnPUwuZ2V0KHRoaXMpO2lmKGUpZ1tlXSYmZ1tlXS5zdG9wJiZkKGdbZV0pO2Vsc2UgZm9yKGUgaW4gZylnW2VdJiZnW2VdLnN0b3AmJlBiLnRlc3QoZSkmJmQoZ1tlXSk7Zm9yKGU9Zi5sZW5ndGg7ZS0tOylmW2VdLmVsZW0hPT10aGlzfHxudWxsIT1hJiZmW2VdLnF1ZXVlIT09YXx8KGZbZV0uYW5pbS5zdG9wKGMpLGI9ITEsZi5zcGxpY2UoZSwxKSk7KGJ8fCFjKSYmbi5kZXF1ZXVlKHRoaXMsYSl9KX0sZmluaXNoOmZ1bmN0aW9uKGEpe3JldHVybiBhIT09ITEmJihhPWF8fCJmeCIpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiLGM9TC5nZXQodGhpcyksZD1jW2ErInF1ZXVlIl0sZT1jW2ErInF1ZXVlSG9va3MiXSxmPW4udGltZXJzLGc9ZD9kLmxlbmd0aDowO2ZvcihjLmZpbmlzaD0hMCxuLnF1ZXVlKHRoaXMsYSxbXSksZSYmZS5zdG9wJiZlLnN0b3AuY2FsbCh0aGlzLCEwKSxiPWYubGVuZ3RoO2ItLTspZltiXS5lbGVtPT09dGhpcyYmZltiXS5xdWV1ZT09PWEmJihmW2JdLmFuaW0uc3RvcCghMCksZi5zcGxpY2UoYiwxKSk7Zm9yKGI9MDtnPmI7YisrKWRbYl0mJmRbYl0uZmluaXNoJiZkW2JdLmZpbmlzaC5jYWxsKHRoaXMpO2RlbGV0ZSBjLmZpbmlzaH0pfX0pLG4uZWFjaChbInRvZ2dsZSIsInNob3ciLCJoaWRlIl0sZnVuY3Rpb24oYSxiKXt2YXIgYz1uLmZuW2JdO24uZm5bYl09ZnVuY3Rpb24oYSxkLGUpe3JldHVybiBudWxsPT1hfHwiYm9vbGVhbiI9PXR5cGVvZiBhP2MuYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZShUYihiLCEwKSxhLGQsZSl9fSksbi5lYWNoKHtzbGlkZURvd246VGIoInNob3ciKSxzbGlkZVVwOlRiKCJoaWRlIiksc2xpZGVUb2dnbGU6VGIoInRvZ2dsZSIpLGZhZGVJbjp7b3BhY2l0eToic2hvdyJ9LGZhZGVPdXQ6e29wYWNpdHk6ImhpZGUifSxmYWRlVG9nZ2xlOntvcGFjaXR5OiJ0b2dnbGUifX0sZnVuY3Rpb24oYSxiKXtuLmZuW2FdPWZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gdGhpcy5hbmltYXRlKGIsYSxjLGQpfX0pLG4udGltZXJzPVtdLG4uZngudGljaz1mdW5jdGlvbigpe3ZhciBhLGI9MCxjPW4udGltZXJzO2ZvcihMYj1uLm5vdygpO2I8Yy5sZW5ndGg7YisrKWE9Y1tiXSxhKCl8fGNbYl0hPT1hfHxjLnNwbGljZShiLS0sMSk7Yy5sZW5ndGh8fG4uZnguc3RvcCgpLExiPXZvaWQgMH0sbi5meC50aW1lcj1mdW5jdGlvbihhKXtuLnRpbWVycy5wdXNoKGEpLGEoKT9uLmZ4LnN0YXJ0KCk6bi50aW1lcnMucG9wKCl9LG4uZnguaW50ZXJ2YWw9MTMsbi5meC5zdGFydD1mdW5jdGlvbigpe01ifHwoTWI9c2V0SW50ZXJ2YWwobi5meC50aWNrLG4uZnguaW50ZXJ2YWwpKX0sbi5meC5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbChNYiksTWI9bnVsbH0sbi5meC5zcGVlZHM9e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH0sbi5mbi5kZWxheT1mdW5jdGlvbihhLGIpe3JldHVybiBhPW4uZng/bi5meC5zcGVlZHNbYV18fGE6YSxiPWJ8fCJmeCIsdGhpcy5xdWV1ZShiLGZ1bmN0aW9uKGIsYyl7dmFyIGQ9c2V0VGltZW91dChiLGEpO2Muc3RvcD1mdW5jdGlvbigpe2NsZWFyVGltZW91dChkKX19KX0sZnVuY3Rpb24oKXt2YXIgYT1sLmNyZWF0ZUVsZW1lbnQoImlucHV0IiksYj1sLmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLGM9Yi5hcHBlbmRDaGlsZChsLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTthLnR5cGU9ImNoZWNrYm94IixrLmNoZWNrT249IiIhPT1hLnZhbHVlLGsub3B0U2VsZWN0ZWQ9Yy5zZWxlY3RlZCxiLmRpc2FibGVkPSEwLGsub3B0RGlzYWJsZWQ9IWMuZGlzYWJsZWQsYT1sLmNyZWF0ZUVsZW1lbnQoImlucHV0IiksYS52YWx1ZT0idCIsYS50eXBlPSJyYWRpbyIsay5yYWRpb1ZhbHVlPSJ0Ij09PWEudmFsdWV9KCk7dmFyIFliLFpiLCRiPW4uZXhwci5hdHRySGFuZGxlO24uZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEoodGhpcyxuLmF0dHIsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe24ucmVtb3ZlQXR0cih0aGlzLGEpfSl9fSksbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj1hLm5vZGVUeXBlO2lmKGEmJjMhPT1mJiY4IT09ZiYmMiE9PWYpcmV0dXJuIHR5cGVvZiBhLmdldEF0dHJpYnV0ZT09PVU/bi5wcm9wKGEsYixjKTooMT09PWYmJm4uaXNYTUxEb2MoYSl8fChiPWIudG9Mb3dlckNhc2UoKSxkPW4uYXR0ckhvb2tzW2JdfHwobi5leHByLm1hdGNoLmJvb2wudGVzdChiKT9aYjpZYikpLHZvaWQgMD09PWM/ZCYmImdldCJpbiBkJiZudWxsIT09KGU9ZC5nZXQoYSxiKSk/ZTooZT1uLmZpbmQuYXR0cihhLGIpLG51bGw9PWU/dm9pZCAwOmUpOm51bGwhPT1jP2QmJiJzZXQiaW4gZCYmdm9pZCAwIT09KGU9ZC5zZXQoYSxjLGIpKT9lOihhLnNldEF0dHJpYnV0ZShiLGMrIiIpLGMpOnZvaWQgbi5yZW1vdmVBdHRyKGEsYikpCn0scmVtb3ZlQXR0cjpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT0wLGY9YiYmYi5tYXRjaChFKTtpZihmJiYxPT09YS5ub2RlVHlwZSl3aGlsZShjPWZbZSsrXSlkPW4ucHJvcEZpeFtjXXx8YyxuLmV4cHIubWF0Y2guYm9vbC50ZXN0KGMpJiYoYVtkXT0hMSksYS5yZW1vdmVBdHRyaWJ1dGUoYyl9LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGEsYil7aWYoIWsucmFkaW9WYWx1ZSYmInJhZGlvIj09PWImJm4ubm9kZU5hbWUoYSwiaW5wdXQiKSl7dmFyIGM9YS52YWx1ZTtyZXR1cm4gYS5zZXRBdHRyaWJ1dGUoInR5cGUiLGIpLGMmJihhLnZhbHVlPWMpLGJ9fX19fSksWmI9e3NldDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGI9PT0hMT9uLnJlbW92ZUF0dHIoYSxjKTphLnNldEF0dHJpYnV0ZShjLGMpLGN9fSxuLmVhY2gobi5leHByLm1hdGNoLmJvb2wuc291cmNlLm1hdGNoKC9cdysvZyksZnVuY3Rpb24oYSxiKXt2YXIgYz0kYltiXXx8bi5maW5kLmF0dHI7JGJbYl09ZnVuY3Rpb24oYSxiLGQpe3ZhciBlLGY7cmV0dXJuIGR8fChmPSRiW2JdLCRiW2JdPWUsZT1udWxsIT1jKGEsYixkKT9iLnRvTG93ZXJDYXNlKCk6bnVsbCwkYltiXT1mKSxlfX0pO3ZhciBfYj0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pO24uZm4uZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEoodGhpcyxuLnByb3AsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2RlbGV0ZSB0aGlzW24ucHJvcEZpeFthXXx8YV19KX19KSxuLmV4dGVuZCh7cHJvcEZpeDp7ImZvciI6Imh0bWxGb3IiLCJjbGFzcyI6ImNsYXNzTmFtZSJ9LHByb3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnPWEubm9kZVR5cGU7aWYoYSYmMyE9PWcmJjghPT1nJiYyIT09ZylyZXR1cm4gZj0xIT09Z3x8IW4uaXNYTUxEb2MoYSksZiYmKGI9bi5wcm9wRml4W2JdfHxiLGU9bi5wcm9wSG9va3NbYl0pLHZvaWQgMCE9PWM/ZSYmInNldCJpbiBlJiZ2b2lkIDAhPT0oZD1lLnNldChhLGMsYikpP2Q6YVtiXT1jOmUmJiJnZXQiaW4gZSYmbnVsbCE9PShkPWUuZ2V0KGEsYikpP2Q6YVtiXX0scHJvcEhvb2tzOnt0YWJJbmRleDp7Z2V0OmZ1bmN0aW9uKGEpe3JldHVybiBhLmhhc0F0dHJpYnV0ZSgidGFiaW5kZXgiKXx8X2IudGVzdChhLm5vZGVOYW1lKXx8YS5ocmVmP2EudGFiSW5kZXg6LTF9fX19KSxrLm9wdFNlbGVjdGVkfHwobi5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJmIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsbnVsbH19KSxuLmVhY2goWyJ0YWJJbmRleCIsInJlYWRPbmx5IiwibWF4TGVuZ3RoIiwiY2VsbFNwYWNpbmciLCJjZWxsUGFkZGluZyIsInJvd1NwYW4iLCJjb2xTcGFuIiwidXNlTWFwIiwiZnJhbWVCb3JkZXIiLCJjb250ZW50RWRpdGFibGUiXSxmdW5jdGlvbigpe24ucHJvcEZpeFt0aGlzLnRvTG93ZXJDYXNlKCldPXRoaXN9KTt2YXIgYWM9L1tcdFxyXG5cZl0vZztuLmZuLmV4dGVuZCh7YWRkQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGg9InN0cmluZyI9PXR5cGVvZiBhJiZhLGk9MCxqPXRoaXMubGVuZ3RoO2lmKG4uaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykuYWRkQ2xhc3MoYS5jYWxsKHRoaXMsYix0aGlzLmNsYXNzTmFtZSkpfSk7aWYoaClmb3IoYj0oYXx8IiIpLm1hdGNoKEUpfHxbXTtqPmk7aSsrKWlmKGM9dGhpc1tpXSxkPTE9PT1jLm5vZGVUeXBlJiYoYy5jbGFzc05hbWU/KCIgIitjLmNsYXNzTmFtZSsiICIpLnJlcGxhY2UoYWMsIiAiKToiICIpKXtmPTA7d2hpbGUoZT1iW2YrK10pZC5pbmRleE9mKCIgIitlKyIgIik8MCYmKGQrPWUrIiAiKTtnPW4udHJpbShkKSxjLmNsYXNzTmFtZSE9PWcmJihjLmNsYXNzTmFtZT1nKX1yZXR1cm4gdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGg9MD09PWFyZ3VtZW50cy5sZW5ndGh8fCJzdHJpbmciPT10eXBlb2YgYSYmYSxpPTAsaj10aGlzLmxlbmd0aDtpZihuLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLnJlbW92ZUNsYXNzKGEuY2FsbCh0aGlzLGIsdGhpcy5jbGFzc05hbWUpKX0pO2lmKGgpZm9yKGI9KGF8fCIiKS5tYXRjaChFKXx8W107aj5pO2krKylpZihjPXRoaXNbaV0sZD0xPT09Yy5ub2RlVHlwZSYmKGMuY2xhc3NOYW1lPygiICIrYy5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKGFjLCIgIik6IiIpKXtmPTA7d2hpbGUoZT1iW2YrK10pd2hpbGUoZC5pbmRleE9mKCIgIitlKyIgIik+PTApZD1kLnJlcGxhY2UoIiAiK2UrIiAiLCIgIik7Zz1hP24udHJpbShkKToiIixjLmNsYXNzTmFtZSE9PWcmJihjLmNsYXNzTmFtZT1nKX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz10eXBlb2YgYTtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBiJiYic3RyaW5nIj09PWM/Yj90aGlzLmFkZENsYXNzKGEpOnRoaXMucmVtb3ZlQ2xhc3MoYSk6dGhpcy5lYWNoKG4uaXNGdW5jdGlvbihhKT9mdW5jdGlvbihjKXtuKHRoaXMpLnRvZ2dsZUNsYXNzKGEuY2FsbCh0aGlzLGMsdGhpcy5jbGFzc05hbWUsYiksYil9OmZ1bmN0aW9uKCl7aWYoInN0cmluZyI9PT1jKXt2YXIgYixkPTAsZT1uKHRoaXMpLGY9YS5tYXRjaChFKXx8W107d2hpbGUoYj1mW2QrK10pZS5oYXNDbGFzcyhiKT9lLnJlbW92ZUNsYXNzKGIpOmUuYWRkQ2xhc3MoYil9ZWxzZShjPT09VXx8ImJvb2xlYW4iPT09YykmJih0aGlzLmNsYXNzTmFtZSYmTC5zZXQodGhpcywiX19jbGFzc05hbWVfXyIsdGhpcy5jbGFzc05hbWUpLHRoaXMuY2xhc3NOYW1lPXRoaXMuY2xhc3NOYW1lfHxhPT09ITE/IiI6TC5nZXQodGhpcywiX19jbGFzc05hbWVfXyIpfHwiIil9KX0saGFzQ2xhc3M6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPSIgIithKyIgIixjPTAsZD10aGlzLmxlbmd0aDtkPmM7YysrKWlmKDE9PT10aGlzW2NdLm5vZGVUeXBlJiYoIiAiK3RoaXNbY10uY2xhc3NOYW1lKyIgIikucmVwbGFjZShhYywiICIpLmluZGV4T2YoYik+PTApcmV0dXJuITA7cmV0dXJuITF9fSk7dmFyIGJjPS9cci9nO24uZm4uZXh0ZW5kKHt2YWw6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU9dGhpc1swXTt7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZD1uLmlzRnVuY3Rpb24oYSksdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe3ZhciBlOzE9PT10aGlzLm5vZGVUeXBlJiYoZT1kP2EuY2FsbCh0aGlzLGMsbih0aGlzKS52YWwoKSk6YSxudWxsPT1lP2U9IiI6Im51bWJlciI9PXR5cGVvZiBlP2UrPSIiOm4uaXNBcnJheShlKSYmKGU9bi5tYXAoZSxmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT8iIjphKyIifSkpLGI9bi52YWxIb29rc1t0aGlzLnR5cGVdfHxuLnZhbEhvb2tzW3RoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0sYiYmInNldCJpbiBiJiZ2b2lkIDAhPT1iLnNldCh0aGlzLGUsInZhbHVlIil8fCh0aGlzLnZhbHVlPWUpKX0pO2lmKGUpcmV0dXJuIGI9bi52YWxIb29rc1tlLnR5cGVdfHxuLnZhbEhvb2tzW2Uubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0sYiYmImdldCJpbiBiJiZ2b2lkIDAhPT0oYz1iLmdldChlLCJ2YWx1ZSIpKT9jOihjPWUudmFsdWUsInN0cmluZyI9PXR5cGVvZiBjP2MucmVwbGFjZShiYywiIik6bnVsbD09Yz8iIjpjKX19fSksbi5leHRlbmQoe3ZhbEhvb2tzOntvcHRpb246e2dldDpmdW5jdGlvbihhKXt2YXIgYj1uLmZpbmQuYXR0cihhLCJ2YWx1ZSIpO3JldHVybiBudWxsIT1iP2I6bi50cmltKG4udGV4dChhKSl9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYyxkPWEub3B0aW9ucyxlPWEuc2VsZWN0ZWRJbmRleCxmPSJzZWxlY3Qtb25lIj09PWEudHlwZXx8MD5lLGc9Zj9udWxsOltdLGg9Zj9lKzE6ZC5sZW5ndGgsaT0wPmU/aDpmP2U6MDtoPmk7aSsrKWlmKGM9ZFtpXSwhKCFjLnNlbGVjdGVkJiZpIT09ZXx8KGsub3B0RGlzYWJsZWQ/Yy5kaXNhYmxlZDpudWxsIT09Yy5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIikpfHxjLnBhcmVudE5vZGUuZGlzYWJsZWQmJm4ubm9kZU5hbWUoYy5wYXJlbnROb2RlLCJvcHRncm91cCIpKSl7aWYoYj1uKGMpLnZhbCgpLGYpcmV0dXJuIGI7Zy5wdXNoKGIpfXJldHVybiBnfSxzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9YS5vcHRpb25zLGY9bi5tYWtlQXJyYXkoYiksZz1lLmxlbmd0aDt3aGlsZShnLS0pZD1lW2ddLChkLnNlbGVjdGVkPW4uaW5BcnJheShkLnZhbHVlLGYpPj0wKSYmKGM9ITApO3JldHVybiBjfHwoYS5zZWxlY3RlZEluZGV4PS0xKSxmfX19fSksbi5lYWNoKFsicmFkaW8iLCJjaGVja2JveCJdLGZ1bmN0aW9uKCl7bi52YWxIb29rc1t0aGlzXT17c2V0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG4uaXNBcnJheShiKT9hLmNoZWNrZWQ9bi5pbkFycmF5KG4oYSkudmFsKCksYik+PTA6dm9pZCAwfX0say5jaGVja09ufHwobi52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PT1hLmdldEF0dHJpYnV0ZSgidmFsdWUiKT8ib24iOmEudmFsdWV9KX0pLG4uZWFjaCgiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IGxvYWQgcmVzaXplIHNjcm9sbCB1bmxvYWQgY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBlcnJvciBjb250ZXh0bWVudSIuc3BsaXQoIiAiKSxmdW5jdGlvbihhLGIpe24uZm5bYl09ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4wP3RoaXMub24oYixudWxsLGEsYyk6dGhpcy50cmlnZ2VyKGIpfX0pLG4uZm4uZXh0ZW5kKHtob3ZlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoYSkubW91c2VsZWF2ZShifHxhKX0sYmluZDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHRoaXMub24oYSxudWxsLGIsYyl9LHVuYmluZDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm9mZihhLG51bGwsYil9LGRlbGVnYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLm9uKGIsYSxjLGQpfSx1bmRlbGVnYXRlOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/dGhpcy5vZmYoYSwiKioiKTp0aGlzLm9mZihiLGF8fCIqKiIsYyl9fSk7dmFyIGNjPW4ubm93KCksZGM9L1w/LztuLnBhcnNlSlNPTj1mdW5jdGlvbihhKXtyZXR1cm4gSlNPTi5wYXJzZShhKyIiKX0sbi5wYXJzZVhNTD1mdW5jdGlvbihhKXt2YXIgYixjO2lmKCFhfHwic3RyaW5nIiE9dHlwZW9mIGEpcmV0dXJuIG51bGw7dHJ5e2M9bmV3IERPTVBhcnNlcixiPWMucGFyc2VGcm9tU3RyaW5nKGEsInRleHQveG1sIil9Y2F0Y2goZCl7Yj12b2lkIDB9cmV0dXJuKCFifHxiLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXJzZXJlcnJvciIpLmxlbmd0aCkmJm4uZXJyb3IoIkludmFsaWQgWE1MOiAiK2EpLGJ9O3ZhciBlYz0vIy4qJC8sZmM9LyhbPyZdKV89W14mXSovLGdjPS9eKC4qPyk6WyBcdF0qKFteXHJcbl0qKSQvZ20saGM9L14oPzphYm91dHxhcHB8YXBwLXN0b3JhZ2V8ListZXh0ZW5zaW9ufGZpbGV8cmVzfHdpZGdldCk6JC8saWM9L14oPzpHRVR8SEVBRCkkLyxqYz0vXlwvXC8vLGtjPS9eKFtcdy4rLV0rOikoPzpcL1wvKD86W15cLz8jXSpAfCkoW15cLz8jOl0qKSg/OjooXGQrKXwpfCkvLGxjPXt9LG1jPXt9LG5jPSIqLyIuY29uY2F0KCIqIiksb2M9bG9jYXRpb24uaHJlZixwYz1rYy5leGVjKG9jLnRvTG93ZXJDYXNlKCkpfHxbXTtmdW5jdGlvbiBxYyhhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXsic3RyaW5nIiE9dHlwZW9mIGImJihjPWIsYj0iKiIpO3ZhciBkLGU9MCxmPWIudG9Mb3dlckNhc2UoKS5tYXRjaChFKXx8W107aWYobi5pc0Z1bmN0aW9uKGMpKXdoaWxlKGQ9ZltlKytdKSIrIj09PWRbMF0/KGQ9ZC5zbGljZSgxKXx8IioiLChhW2RdPWFbZF18fFtdKS51bnNoaWZ0KGMpKTooYVtkXT1hW2RdfHxbXSkucHVzaChjKX19ZnVuY3Rpb24gcmMoYSxiLGMsZCl7dmFyIGU9e30sZj1hPT09bWM7ZnVuY3Rpb24gZyhoKXt2YXIgaTtyZXR1cm4gZVtoXT0hMCxuLmVhY2goYVtoXXx8W10sZnVuY3Rpb24oYSxoKXt2YXIgaj1oKGIsYyxkKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGp8fGZ8fGVbal0/Zj8hKGk9aik6dm9pZCAwOihiLmRhdGFUeXBlcy51bnNoaWZ0KGopLGcoaiksITEpfSksaX1yZXR1cm4gZyhiLmRhdGFUeXBlc1swXSl8fCFlWyIqIl0mJmcoIioiKX1mdW5jdGlvbiBzYyhhLGIpe3ZhciBjLGQsZT1uLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKGMgaW4gYil2b2lkIDAhPT1iW2NdJiYoKGVbY10/YTpkfHwoZD17fSkpW2NdPWJbY10pO3JldHVybiBkJiZuLmV4dGVuZCghMCxhLGQpLGF9ZnVuY3Rpb24gdGMoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jb250ZW50cyxpPWEuZGF0YVR5cGVzO3doaWxlKCIqIj09PWlbMF0paS5zaGlmdCgpLHZvaWQgMD09PWQmJihkPWEubWltZVR5cGV8fGIuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpKTtpZihkKWZvcihlIGluIGgpaWYoaFtlXSYmaFtlXS50ZXN0KGQpKXtpLnVuc2hpZnQoZSk7YnJlYWt9aWYoaVswXWluIGMpZj1pWzBdO2Vsc2V7Zm9yKGUgaW4gYyl7aWYoIWlbMF18fGEuY29udmVydGVyc1tlKyIgIitpWzBdXSl7Zj1lO2JyZWFrfWd8fChnPWUpfWY9Znx8Z31yZXR1cm4gZj8oZiE9PWlbMF0mJmkudW5zaGlmdChmKSxjW2ZdKTp2b2lkIDB9ZnVuY3Rpb24gdWMoYSxiLGMsZCl7dmFyIGUsZixnLGgsaSxqPXt9LGs9YS5kYXRhVHlwZXMuc2xpY2UoKTtpZihrWzFdKWZvcihnIGluIGEuY29udmVydGVycylqW2cudG9Mb3dlckNhc2UoKV09YS5jb252ZXJ0ZXJzW2ddO2Y9ay5zaGlmdCgpO3doaWxlKGYpaWYoYS5yZXNwb25zZUZpZWxkc1tmXSYmKGNbYS5yZXNwb25zZUZpZWxkc1tmXV09YiksIWkmJmQmJmEuZGF0YUZpbHRlciYmKGI9YS5kYXRhRmlsdGVyKGIsYS5kYXRhVHlwZSkpLGk9ZixmPWsuc2hpZnQoKSlpZigiKiI9PT1mKWY9aTtlbHNlIGlmKCIqIiE9PWkmJmkhPT1mKXtpZihnPWpbaSsiICIrZl18fGpbIiogIitmXSwhZylmb3IoZSBpbiBqKWlmKGg9ZS5zcGxpdCgiICIpLGhbMV09PT1mJiYoZz1qW2krIiAiK2hbMF1dfHxqWyIqICIraFswXV0pKXtnPT09ITA/Zz1qW2VdOmpbZV0hPT0hMCYmKGY9aFswXSxrLnVuc2hpZnQoaFsxXSkpO2JyZWFrfWlmKGchPT0hMClpZihnJiZhWyJ0aHJvd3MiXSliPWcoYik7ZWxzZSB0cnl7Yj1nKGIpfWNhdGNoKGwpe3JldHVybntzdGF0ZToicGFyc2VyZXJyb3IiLGVycm9yOmc/bDoiTm8gY29udmVyc2lvbiBmcm9tICIraSsiIHRvICIrZn19fXJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTpifX1uLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6b2MsdHlwZToiR0VUIixpc0xvY2FsOmhjLnRlc3QocGNbMV0pLGdsb2JhbDohMCxwcm9jZXNzRGF0YTohMCxhc3luYzohMCxjb250ZW50VHlwZToiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IixhY2NlcHRzOnsiKiI6bmMsdGV4dDoidGV4dC9wbGFpbiIsaHRtbDoidGV4dC9odG1sIix4bWw6ImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwiLGpzb246ImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCJ9LGNvbnRlbnRzOnt4bWw6L3htbC8saHRtbDovaHRtbC8sanNvbjovanNvbi99LHJlc3BvbnNlRmllbGRzOnt4bWw6InJlc3BvbnNlWE1MIix0ZXh0OiJyZXNwb25zZVRleHQiLGpzb246InJlc3BvbnNlSlNPTiJ9LGNvbnZlcnRlcnM6eyIqIHRleHQiOlN0cmluZywidGV4dCBodG1sIjohMCwidGV4dCBqc29uIjpuLnBhcnNlSlNPTiwidGV4dCB4bWwiOm4ucGFyc2VYTUx9LGZsYXRPcHRpb25zOnt1cmw6ITAsY29udGV4dDohMH19LGFqYXhTZXR1cDpmdW5jdGlvbihhLGIpe3JldHVybiBiP3NjKHNjKGEsbi5hamF4U2V0dGluZ3MpLGIpOnNjKG4uYWpheFNldHRpbmdzLGEpfSxhamF4UHJlZmlsdGVyOnFjKGxjKSxhamF4VHJhbnNwb3J0OnFjKG1jKSxhamF4OmZ1bmN0aW9uKGEsYil7Im9iamVjdCI9PXR5cGVvZiBhJiYoYj1hLGE9dm9pZCAwKSxiPWJ8fHt9O3ZhciBjLGQsZSxmLGcsaCxpLGosaz1uLmFqYXhTZXR1cCh7fSxiKSxsPWsuY29udGV4dHx8ayxtPWsuY29udGV4dCYmKGwubm9kZVR5cGV8fGwuanF1ZXJ5KT9uKGwpOm4uZXZlbnQsbz1uLkRlZmVycmVkKCkscD1uLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSxxPWsuc3RhdHVzQ29kZXx8e30scj17fSxzPXt9LHQ9MCx1PSJjYW5jZWxlZCIsdj17cmVhZHlTdGF0ZTowLGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKDI9PT10KXtpZighZil7Zj17fTt3aGlsZShiPWdjLmV4ZWMoZSkpZltiWzFdLnRvTG93ZXJDYXNlKCldPWJbMl19Yj1mW2EudG9Mb3dlckNhc2UoKV19cmV0dXJuIG51bGw9PWI/bnVsbDpifSxnZXRBbGxSZXNwb25zZUhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gMj09PXQ/ZTpudWxsfSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS50b0xvd2VyQ2FzZSgpO3JldHVybiB0fHwoYT1zW2NdPXNbY118fGEsclthXT1iKSx0aGlzfSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKGEpe3JldHVybiB0fHwoay5taW1lVHlwZT1hKSx0aGlzfSxzdGF0dXNDb2RlOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKGEpaWYoMj50KWZvcihiIGluIGEpcVtiXT1bcVtiXSxhW2JdXTtlbHNlIHYuYWx3YXlzKGFbdi5zdGF0dXNdKTtyZXR1cm4gdGhpc30sYWJvcnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YXx8dTtyZXR1cm4gYyYmYy5hYm9ydChiKSx4KDAsYiksdGhpc319O2lmKG8ucHJvbWlzZSh2KS5jb21wbGV0ZT1wLmFkZCx2LnN1Y2Nlc3M9di5kb25lLHYuZXJyb3I9di5mYWlsLGsudXJsPSgoYXx8ay51cmx8fG9jKSsiIikucmVwbGFjZShlYywiIikucmVwbGFjZShqYyxwY1sxXSsiLy8iKSxrLnR5cGU9Yi5tZXRob2R8fGIudHlwZXx8ay5tZXRob2R8fGsudHlwZSxrLmRhdGFUeXBlcz1uLnRyaW0oay5kYXRhVHlwZXx8IioiKS50b0xvd2VyQ2FzZSgpLm1hdGNoKEUpfHxbIiJdLG51bGw9PWsuY3Jvc3NEb21haW4mJihoPWtjLmV4ZWMoay51cmwudG9Mb3dlckNhc2UoKSksay5jcm9zc0RvbWFpbj0hKCFofHxoWzFdPT09cGNbMV0mJmhbMl09PT1wY1syXSYmKGhbM118fCgiaHR0cDoiPT09aFsxXT8iODAiOiI0NDMiKSk9PT0ocGNbM118fCgiaHR0cDoiPT09cGNbMV0/IjgwIjoiNDQzIikpKSksay5kYXRhJiZrLnByb2Nlc3NEYXRhJiYic3RyaW5nIiE9dHlwZW9mIGsuZGF0YSYmKGsuZGF0YT1uLnBhcmFtKGsuZGF0YSxrLnRyYWRpdGlvbmFsKSkscmMobGMsayxiLHYpLDI9PT10KXJldHVybiB2O2k9bi5ldmVudCYmay5nbG9iYWwsaSYmMD09PW4uYWN0aXZlKysmJm4uZXZlbnQudHJpZ2dlcigiYWpheFN0YXJ0Iiksay50eXBlPWsudHlwZS50b1VwcGVyQ2FzZSgpLGsuaGFzQ29udGVudD0haWMudGVzdChrLnR5cGUpLGQ9ay51cmwsay5oYXNDb250ZW50fHwoay5kYXRhJiYoZD1rLnVybCs9KGRjLnRlc3QoZCk/IiYiOiI/Iikray5kYXRhLGRlbGV0ZSBrLmRhdGEpLGsuY2FjaGU9PT0hMSYmKGsudXJsPWZjLnRlc3QoZCk/ZC5yZXBsYWNlKGZjLCIkMV89IitjYysrKTpkKyhkYy50ZXN0KGQpPyImIjoiPyIpKyJfPSIrY2MrKykpLGsuaWZNb2RpZmllZCYmKG4ubGFzdE1vZGlmaWVkW2RdJiZ2LnNldFJlcXVlc3RIZWFkZXIoIklmLU1vZGlmaWVkLVNpbmNlIixuLmxhc3RNb2RpZmllZFtkXSksbi5ldGFnW2RdJiZ2LnNldFJlcXVlc3RIZWFkZXIoIklmLU5vbmUtTWF0Y2giLG4uZXRhZ1tkXSkpLChrLmRhdGEmJmsuaGFzQ29udGVudCYmay5jb250ZW50VHlwZSE9PSExfHxiLmNvbnRlbnRUeXBlKSYmdi5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLGsuY29udGVudFR5cGUpLHYuc2V0UmVxdWVzdEhlYWRlcigiQWNjZXB0IixrLmRhdGFUeXBlc1swXSYmay5hY2NlcHRzW2suZGF0YVR5cGVzWzBdXT9rLmFjY2VwdHNbay5kYXRhVHlwZXNbMF1dKygiKiIhPT1rLmRhdGFUeXBlc1swXT8iLCAiK25jKyI7IHE9MC4wMSI6IiIpOmsuYWNjZXB0c1siKiJdKTtmb3IoaiBpbiBrLmhlYWRlcnMpdi5zZXRSZXF1ZXN0SGVhZGVyKGosay5oZWFkZXJzW2pdKTtpZihrLmJlZm9yZVNlbmQmJihrLmJlZm9yZVNlbmQuY2FsbChsLHYsayk9PT0hMXx8Mj09PXQpKXJldHVybiB2LmFib3J0KCk7dT0iYWJvcnQiO2ZvcihqIGlue3N1Y2Nlc3M6MSxlcnJvcjoxLGNvbXBsZXRlOjF9KXZbal0oa1tqXSk7aWYoYz1yYyhtYyxrLGIsdikpe3YucmVhZHlTdGF0ZT0xLGkmJm0udHJpZ2dlcigiYWpheFNlbmQiLFt2LGtdKSxrLmFzeW5jJiZrLnRpbWVvdXQ+MCYmKGc9c2V0VGltZW91dChmdW5jdGlvbigpe3YuYWJvcnQoInRpbWVvdXQiKX0say50aW1lb3V0KSk7dHJ5e3Q9MSxjLnNlbmQocix4KX1jYXRjaCh3KXtpZighKDI+dCkpdGhyb3cgdzt4KC0xLHcpfX1lbHNlIHgoLTEsIk5vIFRyYW5zcG9ydCIpO2Z1bmN0aW9uIHgoYSxiLGYsaCl7dmFyIGoscixzLHUsdyx4PWI7MiE9PXQmJih0PTIsZyYmY2xlYXJUaW1lb3V0KGcpLGM9dm9pZCAwLGU9aHx8IiIsdi5yZWFkeVN0YXRlPWE+MD80OjAsaj1hPj0yMDAmJjMwMD5hfHwzMDQ9PT1hLGYmJih1PXRjKGssdixmKSksdT11YyhrLHUsdixqKSxqPyhrLmlmTW9kaWZpZWQmJih3PXYuZ2V0UmVzcG9uc2VIZWFkZXIoIkxhc3QtTW9kaWZpZWQiKSx3JiYobi5sYXN0TW9kaWZpZWRbZF09dyksdz12LmdldFJlc3BvbnNlSGVhZGVyKCJldGFnIiksdyYmKG4uZXRhZ1tkXT13KSksMjA0PT09YXx8IkhFQUQiPT09ay50eXBlP3g9Im5vY29udGVudCI6MzA0PT09YT94PSJub3Rtb2RpZmllZCI6KHg9dS5zdGF0ZSxyPXUuZGF0YSxzPXUuZXJyb3Isaj0hcykpOihzPXgsKGF8fCF4KSYmKHg9ImVycm9yIiwwPmEmJihhPTApKSksdi5zdGF0dXM9YSx2LnN0YXR1c1RleHQ9KGJ8fHgpKyIiLGo/by5yZXNvbHZlV2l0aChsLFtyLHgsdl0pOm8ucmVqZWN0V2l0aChsLFt2LHgsc10pLHYuc3RhdHVzQ29kZShxKSxxPXZvaWQgMCxpJiZtLnRyaWdnZXIoaj8iYWpheFN1Y2Nlc3MiOiJhamF4RXJyb3IiLFt2LGssaj9yOnNdKSxwLmZpcmVXaXRoKGwsW3YseF0pLGkmJihtLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW3Ysa10pLC0tbi5hY3RpdmV8fG4uZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSkpfXJldHVybiB2fSxnZXRKU09OOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5nZXQoYSxiLGMsImpzb24iKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG4uZ2V0KGEsdm9pZCAwLGIsInNjcmlwdCIpfX0pLG4uZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihhLGIpe25bYl09ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIG4uaXNGdW5jdGlvbihjKSYmKGU9ZXx8ZCxkPWMsYz12b2lkIDApLG4uYWpheCh7dXJsOmEsdHlwZTpiLGRhdGFUeXBlOmUsZGF0YTpjLHN1Y2Nlc3M6ZH0pfX0pLG4uX2V2YWxVcmw9ZnVuY3Rpb24oYSl7cmV0dXJuIG4uYWpheCh7dXJsOmEsdHlwZToiR0VUIixkYXRhVHlwZToic2NyaXB0Iixhc3luYzohMSxnbG9iYWw6ITEsInRocm93cyI6ITB9KX0sbi5mbi5leHRlbmQoe3dyYXBBbGw6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIG4uaXNGdW5jdGlvbihhKT90aGlzLmVhY2goZnVuY3Rpb24oYil7bih0aGlzKS53cmFwQWxsKGEuY2FsbCh0aGlzLGIpKX0pOih0aGlzWzBdJiYoYj1uKGEsdGhpc1swXS5vd25lckRvY3VtZW50KS5lcSgwKS5jbG9uZSghMCksdGhpc1swXS5wYXJlbnROb2RlJiZiLmluc2VydEJlZm9yZSh0aGlzWzBdKSxiLm1hcChmdW5jdGlvbigpe3ZhciBhPXRoaXM7d2hpbGUoYS5maXJzdEVsZW1lbnRDaGlsZClhPWEuZmlyc3RFbGVtZW50Q2hpbGQ7cmV0dXJuIGF9KS5hcHBlbmQodGhpcykpLHRoaXMpfSx3cmFwSW5uZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChuLmlzRnVuY3Rpb24oYSk/ZnVuY3Rpb24oYil7bih0aGlzKS53cmFwSW5uZXIoYS5jYWxsKHRoaXMsYikpfTpmdW5jdGlvbigpe3ZhciBiPW4odGhpcyksYz1iLmNvbnRlbnRzKCk7Yy5sZW5ndGg/Yy53cmFwQWxsKGEpOmIuYXBwZW5kKGEpfSl9LHdyYXA6ZnVuY3Rpb24oYSl7dmFyIGI9bi5pc0Z1bmN0aW9uKGEpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYyl7bih0aGlzKS53cmFwQWxsKGI/YS5jYWxsKHRoaXMsYyk6YSl9KX0sdW53cmFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpe24ubm9kZU5hbWUodGhpcywiYm9keSIpfHxuKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KS5lbmQoKX19KSxuLmV4cHIuZmlsdGVycy5oaWRkZW49ZnVuY3Rpb24oYSl7cmV0dXJuIGEub2Zmc2V0V2lkdGg8PTAmJmEub2Zmc2V0SGVpZ2h0PD0wfSxuLmV4cHIuZmlsdGVycy52aXNpYmxlPWZ1bmN0aW9uKGEpe3JldHVybiFuLmV4cHIuZmlsdGVycy5oaWRkZW4oYSl9O3ZhciB2Yz0vJTIwL2csd2M9L1xbXF0kLyx4Yz0vXHI/XG4vZyx5Yz0vXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksemM9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO2Z1bmN0aW9uIEFjKGEsYixjLGQpe3ZhciBlO2lmKG4uaXNBcnJheShiKSluLmVhY2goYixmdW5jdGlvbihiLGUpe2N8fHdjLnRlc3QoYSk/ZChhLGUpOkFjKGErIlsiKygib2JqZWN0Ij09dHlwZW9mIGU/YjoiIikrIl0iLGUsYyxkKX0pO2Vsc2UgaWYoY3x8Im9iamVjdCIhPT1uLnR5cGUoYikpZChhLGIpO2Vsc2UgZm9yKGUgaW4gYilBYyhhKyJbIitlKyJdIixiW2VdLGMsZCl9bi5wYXJhbT1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT1mdW5jdGlvbihhLGIpe2I9bi5pc0Z1bmN0aW9uKGIpP2IoKTpudWxsPT1iPyIiOmIsZFtkLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGEpKyI9IitlbmNvZGVVUklDb21wb25lbnQoYil9O2lmKHZvaWQgMD09PWImJihiPW4uYWpheFNldHRpbmdzJiZuLmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbCksbi5pc0FycmF5KGEpfHxhLmpxdWVyeSYmIW4uaXNQbGFpbk9iamVjdChhKSluLmVhY2goYSxmdW5jdGlvbigpe2UodGhpcy5uYW1lLHRoaXMudmFsdWUpfSk7ZWxzZSBmb3IoYyBpbiBhKUFjKGMsYVtjXSxiLGUpO3JldHVybiBkLmpvaW4oIiYiKS5yZXBsYWNlKHZjLCIrIil9LG4uZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gbi5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPW4ucHJvcCh0aGlzLCJlbGVtZW50cyIpO3JldHVybiBhP24ubWFrZUFycmF5KGEpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgYT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIW4odGhpcykuaXMoIjpkaXNhYmxlZCIpJiZ6Yy50ZXN0KHRoaXMubm9kZU5hbWUpJiYheWMudGVzdChhKSYmKHRoaXMuY2hlY2tlZHx8IVQudGVzdChhKSl9KS5tYXAoZnVuY3Rpb24oYSxiKXt2YXIgYz1uKHRoaXMpLnZhbCgpO3JldHVybiBudWxsPT1jP251bGw6bi5pc0FycmF5KGMpP24ubWFwKGMsZnVuY3Rpb24oYSl7cmV0dXJue25hbWU6Yi5uYW1lLHZhbHVlOmEucmVwbGFjZSh4YywiXHJcbiIpfX0pOntuYW1lOmIubmFtZSx2YWx1ZTpjLnJlcGxhY2UoeGMsIlxyXG4iKX19KS5nZXQoKX19KSxuLmFqYXhTZXR0aW5ncy54aHI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdH1jYXRjaChhKXt9fTt2YXIgQmM9MCxDYz17fSxEYz17MDoyMDAsMTIyMzoyMDR9LEVjPW4uYWpheFNldHRpbmdzLnhocigpO2EuYXR0YWNoRXZlbnQmJmEuYXR0YWNoRXZlbnQoIm9udW5sb2FkIixmdW5jdGlvbigpe2Zvcih2YXIgYSBpbiBDYylDY1thXSgpfSksay5jb3JzPSEhRWMmJiJ3aXRoQ3JlZGVudGlhbHMiaW4gRWMsay5hamF4PUVjPSEhRWMsbi5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBrLmNvcnN8fEVjJiYhYS5jcm9zc0RvbWFpbj97c2VuZDpmdW5jdGlvbihjLGQpe3ZhciBlLGY9YS54aHIoKSxnPSsrQmM7aWYoZi5vcGVuKGEudHlwZSxhLnVybCxhLmFzeW5jLGEudXNlcm5hbWUsYS5wYXNzd29yZCksYS54aHJGaWVsZHMpZm9yKGUgaW4gYS54aHJGaWVsZHMpZltlXT1hLnhockZpZWxkc1tlXTthLm1pbWVUeXBlJiZmLm92ZXJyaWRlTWltZVR5cGUmJmYub3ZlcnJpZGVNaW1lVHlwZShhLm1pbWVUeXBlKSxhLmNyb3NzRG9tYWlufHxjWyJYLVJlcXVlc3RlZC1XaXRoIl18fChjWyJYLVJlcXVlc3RlZC1XaXRoIl09IlhNTEh0dHBSZXF1ZXN0Iik7Zm9yKGUgaW4gYylmLnNldFJlcXVlc3RIZWFkZXIoZSxjW2VdKTtiPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe2ImJihkZWxldGUgQ2NbZ10sYj1mLm9ubG9hZD1mLm9uZXJyb3I9bnVsbCwiYWJvcnQiPT09YT9mLmFib3J0KCk6ImVycm9yIj09PWE/ZChmLnN0YXR1cyxmLnN0YXR1c1RleHQpOmQoRGNbZi5zdGF0dXNdfHxmLnN0YXR1cyxmLnN0YXR1c1RleHQsInN0cmluZyI9PXR5cGVvZiBmLnJlc3BvbnNlVGV4dD97dGV4dDpmLnJlc3BvbnNlVGV4dH06dm9pZCAwLGYuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpKX19LGYub25sb2FkPWIoKSxmLm9uZXJyb3I9YigiZXJyb3IiKSxiPUNjW2ddPWIoImFib3J0Iik7dHJ5e2Yuc2VuZChhLmhhc0NvbnRlbnQmJmEuZGF0YXx8bnVsbCl9Y2F0Y2goaCl7aWYoYil0aHJvdyBofX0sYWJvcnQ6ZnVuY3Rpb24oKXtiJiZiKCl9fTp2b2lkIDB9KSxuLmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OiJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdCJ9LGNvbnRlbnRzOntzY3JpcHQ6Lyg/OmphdmF8ZWNtYSlzY3JpcHQvfSxjb252ZXJ0ZXJzOnsidGV4dCBzY3JpcHQiOmZ1bmN0aW9uKGEpe3JldHVybiBuLmdsb2JhbEV2YWwoYSksYX19fSksbi5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEuY2FjaGUmJihhLmNhY2hlPSExKSxhLmNyb3NzRG9tYWluJiYoYS50eXBlPSJHRVQiKX0pLG4uYWpheFRyYW5zcG9ydCgic2NyaXB0IixmdW5jdGlvbihhKXtpZihhLmNyb3NzRG9tYWluKXt2YXIgYixjO3JldHVybntzZW5kOmZ1bmN0aW9uKGQsZSl7Yj1uKCI8c2NyaXB0PiIpLnByb3Aoe2FzeW5jOiEwLGNoYXJzZXQ6YS5zY3JpcHRDaGFyc2V0LHNyYzphLnVybH0pLm9uKCJsb2FkIGVycm9yIixjPWZ1bmN0aW9uKGEpe2IucmVtb3ZlKCksYz1udWxsLGEmJmUoImVycm9yIj09PWEudHlwZT80MDQ6MjAwLGEudHlwZSl9KSxsLmhlYWQuYXBwZW5kQ2hpbGQoYlswXSl9LGFib3J0OmZ1bmN0aW9uKCl7YyYmYygpfX19fSk7dmFyIEZjPVtdLEdjPS8oPSlcPyg/PSZ8JCl8XD9cPy87bi5hamF4U2V0dXAoe2pzb25wOiJjYWxsYmFjayIsanNvbnBDYWxsYmFjazpmdW5jdGlvbigpe3ZhciBhPUZjLnBvcCgpfHxuLmV4cGFuZG8rIl8iK2NjKys7cmV0dXJuIHRoaXNbYV09ITAsYX19KSxuLmFqYXhQcmVmaWx0ZXIoImpzb24ganNvbnAiLGZ1bmN0aW9uKGIsYyxkKXt2YXIgZSxmLGcsaD1iLmpzb25wIT09ITEmJihHYy50ZXN0KGIudXJsKT8idXJsIjoic3RyaW5nIj09dHlwZW9mIGIuZGF0YSYmIShiLmNvbnRlbnRUeXBlfHwiIikuaW5kZXhPZigiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikmJkdjLnRlc3QoYi5kYXRhKSYmImRhdGEiKTtyZXR1cm4gaHx8Impzb25wIj09PWIuZGF0YVR5cGVzWzBdPyhlPWIuanNvbnBDYWxsYmFjaz1uLmlzRnVuY3Rpb24oYi5qc29ucENhbGxiYWNrKT9iLmpzb25wQ2FsbGJhY2soKTpiLmpzb25wQ2FsbGJhY2ssaD9iW2hdPWJbaF0ucmVwbGFjZShHYywiJDEiK2UpOmIuanNvbnAhPT0hMSYmKGIudXJsKz0oZGMudGVzdChiLnVybCk/IiYiOiI/IikrYi5qc29ucCsiPSIrZSksYi5jb252ZXJ0ZXJzWyJzY3JpcHQganNvbiJdPWZ1bmN0aW9uKCl7cmV0dXJuIGd8fG4uZXJyb3IoZSsiIHdhcyBub3QgY2FsbGVkIiksZ1swXX0sYi5kYXRhVHlwZXNbMF09Impzb24iLGY9YVtlXSxhW2VdPWZ1bmN0aW9uKCl7Zz1hcmd1bWVudHN9LGQuYWx3YXlzKGZ1bmN0aW9uKCl7YVtlXT1mLGJbZV0mJihiLmpzb25wQ2FsbGJhY2s9Yy5qc29ucENhbGxiYWNrLEZjLnB1c2goZSkpLGcmJm4uaXNGdW5jdGlvbihmKSYmZihnWzBdKSxnPWY9dm9pZCAwfSksInNjcmlwdCIpOnZvaWQgMH0pLG4ucGFyc2VIVE1MPWZ1bmN0aW9uKGEsYixjKXtpZighYXx8InN0cmluZyIhPXR5cGVvZiBhKXJldHVybiBudWxsOyJib29sZWFuIj09dHlwZW9mIGImJihjPWIsYj0hMSksYj1ifHxsO3ZhciBkPXYuZXhlYyhhKSxlPSFjJiZbXTtyZXR1cm4gZD9bYi5jcmVhdGVFbGVtZW50KGRbMV0pXTooZD1uLmJ1aWxkRnJhZ21lbnQoW2FdLGIsZSksZSYmZS5sZW5ndGgmJm4oZSkucmVtb3ZlKCksbi5tZXJnZShbXSxkLmNoaWxkTm9kZXMpKX07dmFyIEhjPW4uZm4ubG9hZDtuLmZuLmxvYWQ9ZnVuY3Rpb24oYSxiLGMpe2lmKCJzdHJpbmciIT10eXBlb2YgYSYmSGMpcmV0dXJuIEhjLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgZCxlLGYsZz10aGlzLGg9YS5pbmRleE9mKCIgIik7cmV0dXJuIGg+PTAmJihkPW4udHJpbShhLnNsaWNlKGgpKSxhPWEuc2xpY2UoMCxoKSksbi5pc0Z1bmN0aW9uKGIpPyhjPWIsYj12b2lkIDApOmImJiJvYmplY3QiPT10eXBlb2YgYiYmKGU9IlBPU1QiKSxnLmxlbmd0aD4wJiZuLmFqYXgoe3VybDphLHR5cGU6ZSxkYXRhVHlwZToiaHRtbCIsZGF0YTpifSkuZG9uZShmdW5jdGlvbihhKXtmPWFyZ3VtZW50cyxnLmh0bWwoZD9uKCI8ZGl2PiIpLmFwcGVuZChuLnBhcnNlSFRNTChhKSkuZmluZChkKTphKX0pLmNvbXBsZXRlKGMmJmZ1bmN0aW9uKGEsYil7Zy5lYWNoKGMsZnx8W2EucmVzcG9uc2VUZXh0LGIsYV0pfSksdGhpc30sbi5lYWNoKFsiYWpheFN0YXJ0IiwiYWpheFN0b3AiLCJhamF4Q29tcGxldGUiLCJhamF4RXJyb3IiLCJhamF4U3VjY2VzcyIsImFqYXhTZW5kIl0sZnVuY3Rpb24oYSxiKXtuLmZuW2JdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9uKGIsYSl9fSksbi5leHByLmZpbHRlcnMuYW5pbWF0ZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZ3JlcChuLnRpbWVycyxmdW5jdGlvbihiKXtyZXR1cm4gYT09PWIuZWxlbX0pLmxlbmd0aH07dmFyIEljPWEuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2Z1bmN0aW9uIEpjKGEpe3JldHVybiBuLmlzV2luZG93KGEpP2E6OT09PWEubm9kZVR5cGUmJmEuZGVmYXVsdFZpZXd9bi5vZmZzZXQ9e3NldE9mZnNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGcsaCxpLGosaz1uLmNzcyhhLCJwb3NpdGlvbiIpLGw9bihhKSxtPXt9OyJzdGF0aWMiPT09ayYmKGEuc3R5bGUucG9zaXRpb249InJlbGF0aXZlIiksaD1sLm9mZnNldCgpLGY9bi5jc3MoYSwidG9wIiksaT1uLmNzcyhhLCJsZWZ0Iiksaj0oImFic29sdXRlIj09PWt8fCJmaXhlZCI9PT1rKSYmKGYraSkuaW5kZXhPZigiYXV0byIpPi0xLGo/KGQ9bC5wb3NpdGlvbigpLGc9ZC50b3AsZT1kLmxlZnQpOihnPXBhcnNlRmxvYXQoZil8fDAsZT1wYXJzZUZsb2F0KGkpfHwwKSxuLmlzRnVuY3Rpb24oYikmJihiPWIuY2FsbChhLGMsaCkpLG51bGwhPWIudG9wJiYobS50b3A9Yi50b3AtaC50b3ArZyksbnVsbCE9Yi5sZWZ0JiYobS5sZWZ0PWIubGVmdC1oLmxlZnQrZSksInVzaW5nImluIGI/Yi51c2luZy5jYWxsKGEsbSk6bC5jc3MobSl9fSxuLmZuLmV4dGVuZCh7b2Zmc2V0OmZ1bmN0aW9uKGEpe2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHZvaWQgMD09PWE/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oYil7bi5vZmZzZXQuc2V0T2Zmc2V0KHRoaXMsYSxiKX0pO3ZhciBiLGMsZD10aGlzWzBdLGU9e3RvcDowLGxlZnQ6MH0sZj1kJiZkLm93bmVyRG9jdW1lbnQ7aWYoZilyZXR1cm4gYj1mLmRvY3VtZW50RWxlbWVudCxuLmNvbnRhaW5zKGIsZCk/KHR5cGVvZiBkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCE9PVUmJihlPWQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLGM9SmMoZikse3RvcDplLnRvcCtjLnBhZ2VZT2Zmc2V0LWIuY2xpZW50VG9wLGxlZnQ6ZS5sZWZ0K2MucGFnZVhPZmZzZXQtYi5jbGllbnRMZWZ0fSk6ZX0scG9zaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzWzBdKXt2YXIgYSxiLGM9dGhpc1swXSxkPXt0b3A6MCxsZWZ0OjB9O3JldHVybiJmaXhlZCI9PT1uLmNzcyhjLCJwb3NpdGlvbiIpP2I9Yy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTooYT10aGlzLm9mZnNldFBhcmVudCgpLGI9dGhpcy5vZmZzZXQoKSxuLm5vZGVOYW1lKGFbMF0sImh0bWwiKXx8KGQ9YS5vZmZzZXQoKSksZC50b3ArPW4uY3NzKGFbMF0sImJvcmRlclRvcFdpZHRoIiwhMCksZC5sZWZ0Kz1uLmNzcyhhWzBdLCJib3JkZXJMZWZ0V2lkdGgiLCEwKSkse3RvcDpiLnRvcC1kLnRvcC1uLmNzcyhjLCJtYXJnaW5Ub3AiLCEwKSxsZWZ0OmIubGVmdC1kLmxlZnQtbi5jc3MoYywibWFyZ2luTGVmdCIsITApfX19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPXRoaXMub2Zmc2V0UGFyZW50fHxJYzt3aGlsZShhJiYhbi5ub2RlTmFtZShhLCJodG1sIikmJiJzdGF0aWMiPT09bi5jc3MoYSwicG9zaXRpb24iKSlhPWEub2Zmc2V0UGFyZW50O3JldHVybiBhfHxJY30pfX0pLG4uZWFjaCh7c2Nyb2xsTGVmdDoicGFnZVhPZmZzZXQiLHNjcm9sbFRvcDoicGFnZVlPZmZzZXQifSxmdW5jdGlvbihiLGMpe3ZhciBkPSJwYWdlWU9mZnNldCI9PT1jO24uZm5bYl09ZnVuY3Rpb24oZSl7cmV0dXJuIEoodGhpcyxmdW5jdGlvbihiLGUsZil7dmFyIGc9SmMoYik7cmV0dXJuIHZvaWQgMD09PWY/Zz9nW2NdOmJbZV06dm9pZChnP2cuc2Nyb2xsVG8oZD9hLnBhZ2VYT2Zmc2V0OmYsZD9mOmEucGFnZVlPZmZzZXQpOmJbZV09Zil9LGIsZSxhcmd1bWVudHMubGVuZ3RoLG51bGwpfX0pLG4uZWFjaChbInRvcCIsImxlZnQiXSxmdW5jdGlvbihhLGIpe24uY3NzSG9va3NbYl09eWIoay5waXhlbFBvc2l0aW9uLGZ1bmN0aW9uKGEsYyl7cmV0dXJuIGM/KGM9eGIoYSxiKSx2Yi50ZXN0KGMpP24oYSkucG9zaXRpb24oKVtiXSsicHgiOmMpOnZvaWQgMH0pfSksbi5lYWNoKHtIZWlnaHQ6ImhlaWdodCIsV2lkdGg6IndpZHRoIn0sZnVuY3Rpb24oYSxiKXtuLmVhY2goe3BhZGRpbmc6ImlubmVyIithLGNvbnRlbnQ6YiwiIjoib3V0ZXIiK2F9LGZ1bmN0aW9uKGMsZCl7bi5mbltkXT1mdW5jdGlvbihkLGUpe3ZhciBmPWFyZ3VtZW50cy5sZW5ndGgmJihjfHwiYm9vbGVhbiIhPXR5cGVvZiBkKSxnPWN8fChkPT09ITB8fGU9PT0hMD8ibWFyZ2luIjoiYm9yZGVyIik7cmV0dXJuIEoodGhpcyxmdW5jdGlvbihiLGMsZCl7dmFyIGU7cmV0dXJuIG4uaXNXaW5kb3coYik/Yi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrYV06OT09PWIubm9kZVR5cGU/KGU9Yi5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgoYi5ib2R5WyJzY3JvbGwiK2FdLGVbInNjcm9sbCIrYV0sYi5ib2R5WyJvZmZzZXQiK2FdLGVbIm9mZnNldCIrYV0sZVsiY2xpZW50IithXSkpOnZvaWQgMD09PWQ/bi5jc3MoYixjLGcpOm4uc3R5bGUoYixjLGQsZyl9LGIsZj9kOnZvaWQgMCxmLG51bGwpfX0pfSksbi5mbi5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RofSxuLmZuLmFuZFNlbGY9bi5mbi5hZGRCYWNrLCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZSgianF1ZXJ5IixbXSxmdW5jdGlvbigpe3JldHVybiBufSk7dmFyIEtjPWEualF1ZXJ5LExjPWEuJDtyZXR1cm4gbi5ub0NvbmZsaWN0PWZ1bmN0aW9uKGIpe3JldHVybiBhLiQ9PT1uJiYoYS4kPUxjKSxiJiZhLmpRdWVyeT09PW4mJihhLmpRdWVyeT1LYyksbn0sdHlwZW9mIGI9PT1VJiYoYS5qUXVlcnk9YS4kPW4pLG59KTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9anF1ZXJ5Lm1pbi5tYXA="},{"meta":{"name":"clipboard.min.js","url":"https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js","ts":1607838060099,"mimetype":"text/javascript"},"source":"LyohCiAqIGNsaXBib2FyZC5qcyB2Mi4wLjYKICogaHR0cHM6Ly9jbGlwYm9hcmRqcy5jb20vCiAqIAogKiBMaWNlbnNlZCBNSVQgwqkgWmVubyBSb2NoYQogKi8KIWZ1bmN0aW9uKHQsZSl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sZSk6Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuQ2xpcGJvYXJkSlM9ZSgpOnQuQ2xpcGJvYXJkSlM9ZSgpfSh0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIG89e30sci5tPW49W2Z1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlO2lmKCJTRUxFQ1QiPT09dC5ub2RlTmFtZSl0LmZvY3VzKCksZT10LnZhbHVlO2Vsc2UgaWYoIklOUFVUIj09PXQubm9kZU5hbWV8fCJURVhUQVJFQSI9PT10Lm5vZGVOYW1lKXt2YXIgbj10Lmhhc0F0dHJpYnV0ZSgicmVhZG9ubHkiKTtufHx0LnNldEF0dHJpYnV0ZSgicmVhZG9ubHkiLCIiKSx0LnNlbGVjdCgpLHQuc2V0U2VsZWN0aW9uUmFuZ2UoMCx0LnZhbHVlLmxlbmd0aCksbnx8dC5yZW1vdmVBdHRyaWJ1dGUoInJlYWRvbmx5IiksZT10LnZhbHVlfWVsc2V7dC5oYXNBdHRyaWJ1dGUoImNvbnRlbnRlZGl0YWJsZSIpJiZ0LmZvY3VzKCk7dmFyIG89d2luZG93LmdldFNlbGVjdGlvbigpLHI9ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtyLnNlbGVjdE5vZGVDb250ZW50cyh0KSxvLnJlbW92ZUFsbFJhbmdlcygpLG8uYWRkUmFuZ2UociksZT1vLnRvU3RyaW5nKCl9cmV0dXJuIGV9fSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oKXt9bi5wcm90b3R5cGU9e29uOmZ1bmN0aW9uKHQsZSxuKXt2YXIgbz10aGlzLmV8fCh0aGlzLmU9e30pO3JldHVybihvW3RdfHwob1t0XT1bXSkpLnB1c2goe2ZuOmUsY3R4Om59KSx0aGlzfSxvbmNlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgbz10aGlzO2Z1bmN0aW9uIHIoKXtvLm9mZih0LHIpLGUuYXBwbHkobixhcmd1bWVudHMpfXJldHVybiByLl89ZSx0aGlzLm9uKHQscixuKX0sZW1pdDpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSksbj0oKHRoaXMuZXx8KHRoaXMuZT17fSkpW3RdfHxbXSkuc2xpY2UoKSxvPTAscj1uLmxlbmd0aDtvPHI7bysrKW5bb10uZm4uYXBwbHkobltvXS5jdHgsZSk7cmV0dXJuIHRoaXN9LG9mZjpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuZXx8KHRoaXMuZT17fSksbz1uW3RdLHI9W107aWYobyYmZSlmb3IodmFyIGk9MCxhPW8ubGVuZ3RoO2k8YTtpKyspb1tpXS5mbiE9PWUmJm9baV0uZm4uXyE9PWUmJnIucHVzaChvW2ldKTtyZXR1cm4gci5sZW5ndGg/blt0XT1yOmRlbGV0ZSBuW3RdLHRoaXN9fSx0LmV4cG9ydHM9bix0LmV4cG9ydHMuVGlueUVtaXR0ZXI9bn0sZnVuY3Rpb24odCxlLG4pe3ZhciBkPW4oMyksaD1uKDQpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUsbil7aWYoIXQmJiFlJiYhbil0aHJvdyBuZXcgRXJyb3IoIk1pc3NpbmcgcmVxdWlyZWQgYXJndW1lbnRzIik7aWYoIWQuc3RyaW5nKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIlNlY29uZCBhcmd1bWVudCBtdXN0IGJlIGEgU3RyaW5nIik7aWYoIWQuZm4obikpdGhyb3cgbmV3IFR5cGVFcnJvcigiVGhpcmQgYXJndW1lbnQgbXVzdCBiZSBhIEZ1bmN0aW9uIik7aWYoZC5ub2RlKHQpKXJldHVybiBzPWUsZj1uLCh1PXQpLmFkZEV2ZW50TGlzdGVuZXIocyxmKSx7ZGVzdHJveTpmdW5jdGlvbigpe3UucmVtb3ZlRXZlbnRMaXN0ZW5lcihzLGYpfX07aWYoZC5ub2RlTGlzdCh0KSlyZXR1cm4gYT10LGM9ZSxsPW4sQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGZ1bmN0aW9uKHQpe3QuYWRkRXZlbnRMaXN0ZW5lcihjLGwpfSkse2Rlc3Ryb3k6ZnVuY3Rpb24oKXtBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24odCl7dC5yZW1vdmVFdmVudExpc3RlbmVyKGMsbCl9KX19O2lmKGQuc3RyaW5nKHQpKXJldHVybiBvPXQscj1lLGk9bixoKGRvY3VtZW50LmJvZHksbyxyLGkpO3Rocm93IG5ldyBUeXBlRXJyb3IoIkZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBTdHJpbmcsIEhUTUxFbGVtZW50LCBIVE1MQ29sbGVjdGlvbiwgb3IgTm9kZUxpc3QiKTt2YXIgbyxyLGksYSxjLGwsdSxzLGZ9fSxmdW5jdGlvbih0LG4pe24ubm9kZT1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwIT09dCYmdCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50JiYxPT09dC5ub2RlVHlwZX0sbi5ub2RlTGlzdD1mdW5jdGlvbih0KXt2YXIgZT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCk7cmV0dXJuIHZvaWQgMCE9PXQmJigiW29iamVjdCBOb2RlTGlzdF0iPT09ZXx8IltvYmplY3QgSFRNTENvbGxlY3Rpb25dIj09PWUpJiYibGVuZ3RoImluIHQmJigwPT09dC5sZW5ndGh8fG4ubm9kZSh0WzBdKSl9LG4uc3RyaW5nPWZ1bmN0aW9uKHQpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdHx8dCBpbnN0YW5jZW9mIFN0cmluZ30sbi5mbj1mdW5jdGlvbih0KXtyZXR1cm4iW29iamVjdCBGdW5jdGlvbl0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciBhPW4oNSk7ZnVuY3Rpb24gaSh0LGUsbixvLHIpe3ZhciBpPWZ1bmN0aW9uKGUsbix0LG8pe3JldHVybiBmdW5jdGlvbih0KXt0LmRlbGVnYXRlVGFyZ2V0PWEodC50YXJnZXQsbiksdC5kZWxlZ2F0ZVRhcmdldCYmby5jYWxsKGUsdCl9fS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHQuYWRkRXZlbnRMaXN0ZW5lcihuLGkscikse2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0LnJlbW92ZUV2ZW50TGlzdGVuZXIobixpLHIpfX19dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuLG8scil7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHQuYWRkRXZlbnRMaXN0ZW5lcj9pLmFwcGx5KG51bGwsYXJndW1lbnRzKToiZnVuY3Rpb24iPT10eXBlb2Ygbj9pLmJpbmQobnVsbCxkb2N1bWVudCkuYXBwbHkobnVsbCxhcmd1bWVudHMpOigic3RyaW5nIj09dHlwZW9mIHQmJih0PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodCkpLEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbCh0LGZ1bmN0aW9uKHQpe3JldHVybiBpKHQsZSxuLG8scil9KSl9fSxmdW5jdGlvbih0LGUpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgRWxlbWVudCYmIUVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMpe3ZhciBuPUVsZW1lbnQucHJvdG90eXBlO24ubWF0Y2hlcz1uLm1hdGNoZXNTZWxlY3Rvcnx8bi5tb3pNYXRjaGVzU2VsZWN0b3J8fG4ubXNNYXRjaGVzU2VsZWN0b3J8fG4ub01hdGNoZXNTZWxlY3Rvcnx8bi53ZWJraXRNYXRjaGVzU2VsZWN0b3J9dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7Zm9yKDt0JiY5IT09dC5ub2RlVHlwZTspe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB0Lm1hdGNoZXMmJnQubWF0Y2hlcyhlKSlyZXR1cm4gdDt0PXQucGFyZW50Tm9kZX19fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO24ucihlKTt2YXIgbz1uKDApLHI9bi5uKG8pLGk9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIHR9O2Z1bmN0aW9uIGEodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIG89ZVtuXTtvLmVudW1lcmFibGU9by5lbnVtZXJhYmxlfHwhMSxvLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbyYmKG8ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG8ua2V5LG8pfX1mdW5jdGlvbiBjKHQpeyFmdW5jdGlvbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfSh0aGlzLGMpLHRoaXMucmVzb2x2ZU9wdGlvbnModCksdGhpcy5pbml0U2VsZWN0aW9uKCl9dmFyIGw9KGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZSYmYSh0LnByb3RvdHlwZSxlKSxuJiZhKHQsbiksdH0oYyxbe2tleToicmVzb2x2ZU9wdGlvbnMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPTA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09dD90Ont9O3RoaXMuYWN0aW9uPWUuYWN0aW9uLHRoaXMuY29udGFpbmVyPWUuY29udGFpbmVyLHRoaXMuZW1pdHRlcj1lLmVtaXR0ZXIsdGhpcy50YXJnZXQ9ZS50YXJnZXQsdGhpcy50ZXh0PWUudGV4dCx0aGlzLnRyaWdnZXI9ZS50cmlnZ2VyLHRoaXMuc2VsZWN0ZWRUZXh0PSIifX0se2tleToiaW5pdFNlbGVjdGlvbiIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnRleHQ/dGhpcy5zZWxlY3RGYWtlKCk6dGhpcy50YXJnZXQmJnRoaXMuc2VsZWN0VGFyZ2V0KCl9fSx7a2V5OiJzZWxlY3RGYWtlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT0icnRsIj09ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgiZGlyIik7dGhpcy5yZW1vdmVGYWtlKCksdGhpcy5mYWtlSGFuZGxlckNhbGxiYWNrPWZ1bmN0aW9uKCl7cmV0dXJuIHQucmVtb3ZlRmFrZSgpfSx0aGlzLmZha2VIYW5kbGVyPXRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIix0aGlzLmZha2VIYW5kbGVyQ2FsbGJhY2spfHwhMCx0aGlzLmZha2VFbGVtPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRleHRhcmVhIiksdGhpcy5mYWtlRWxlbS5zdHlsZS5mb250U2l6ZT0iMTJwdCIsdGhpcy5mYWtlRWxlbS5zdHlsZS5ib3JkZXI9IjAiLHRoaXMuZmFrZUVsZW0uc3R5bGUucGFkZGluZz0iMCIsdGhpcy5mYWtlRWxlbS5zdHlsZS5tYXJnaW49IjAiLHRoaXMuZmFrZUVsZW0uc3R5bGUucG9zaXRpb249ImFic29sdXRlIix0aGlzLmZha2VFbGVtLnN0eWxlW2U/InJpZ2h0IjoibGVmdCJdPSItOTk5OXB4Ijt2YXIgbj13aW5kb3cucGFnZVlPZmZzZXR8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7dGhpcy5mYWtlRWxlbS5zdHlsZS50b3A9bisicHgiLHRoaXMuZmFrZUVsZW0uc2V0QXR0cmlidXRlKCJyZWFkb25seSIsIiIpLHRoaXMuZmFrZUVsZW0udmFsdWU9dGhpcy50ZXh0LHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuZmFrZUVsZW0pLHRoaXMuc2VsZWN0ZWRUZXh0PXIoKSh0aGlzLmZha2VFbGVtKSx0aGlzLmNvcHlUZXh0KCl9fSx7a2V5OiJyZW1vdmVGYWtlIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZmFrZUhhbmRsZXImJih0aGlzLmNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCJjbGljayIsdGhpcy5mYWtlSGFuZGxlckNhbGxiYWNrKSx0aGlzLmZha2VIYW5kbGVyPW51bGwsdGhpcy5mYWtlSGFuZGxlckNhbGxiYWNrPW51bGwpLHRoaXMuZmFrZUVsZW0mJih0aGlzLmNvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLmZha2VFbGVtKSx0aGlzLmZha2VFbGVtPW51bGwpfX0se2tleToic2VsZWN0VGFyZ2V0Iix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuc2VsZWN0ZWRUZXh0PXIoKSh0aGlzLnRhcmdldCksdGhpcy5jb3B5VGV4dCgpfX0se2tleToiY29weVRleHQiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dm9pZCAwO3RyeXtlPWRvY3VtZW50LmV4ZWNDb21tYW5kKHRoaXMuYWN0aW9uKX1jYXRjaCh0KXtlPSExfXRoaXMuaGFuZGxlUmVzdWx0KGUpfX0se2tleToiaGFuZGxlUmVzdWx0Iix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLmVtaXR0ZXIuZW1pdCh0PyJzdWNjZXNzIjoiZXJyb3IiLHthY3Rpb246dGhpcy5hY3Rpb24sdGV4dDp0aGlzLnNlbGVjdGVkVGV4dCx0cmlnZ2VyOnRoaXMudHJpZ2dlcixjbGVhclNlbGVjdGlvbjp0aGlzLmNsZWFyU2VsZWN0aW9uLmJpbmQodGhpcyl9KX19LHtrZXk6ImNsZWFyU2VsZWN0aW9uIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudHJpZ2dlciYmdGhpcy50cmlnZ2VyLmZvY3VzKCksZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ibHVyKCksd2luZG93LmdldFNlbGVjdGlvbigpLnJlbW92ZUFsbFJhbmdlcygpfX0se2tleToiZGVzdHJveSIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUZha2UoKX19LHtrZXk6ImFjdGlvbiIsc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPTA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09dD90OiJjb3B5IjtpZih0aGlzLl9hY3Rpb249ZSwiY29weSIhPT10aGlzLl9hY3Rpb24mJiJjdXQiIT09dGhpcy5fYWN0aW9uKXRocm93IG5ldyBFcnJvcignSW52YWxpZCAiYWN0aW9uIiB2YWx1ZSwgdXNlIGVpdGhlciAiY29weSIgb3IgImN1dCInKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FjdGlvbn19LHtrZXk6InRhcmdldCIsc2V0OmZ1bmN0aW9uKHQpe2lmKHZvaWQgMCE9PXQpe2lmKCF0fHwib2JqZWN0IiE9PSh2b2lkIDA9PT10PyJ1bmRlZmluZWQiOmkodCkpfHwxIT09dC5ub2RlVHlwZSl0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgInRhcmdldCIgdmFsdWUsIHVzZSBhIHZhbGlkIEVsZW1lbnQnKTtpZigiY29weSI9PT10aGlzLmFjdGlvbiYmdC5oYXNBdHRyaWJ1dGUoImRpc2FibGVkIikpdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkICJ0YXJnZXQiIGF0dHJpYnV0ZS4gUGxlYXNlIHVzZSAicmVhZG9ubHkiIGluc3RlYWQgb2YgImRpc2FibGVkIiBhdHRyaWJ1dGUnKTtpZigiY3V0Ij09PXRoaXMuYWN0aW9uJiYodC5oYXNBdHRyaWJ1dGUoInJlYWRvbmx5Iil8fHQuaGFzQXR0cmlidXRlKCJkaXNhYmxlZCIpKSl0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgInRhcmdldCIgYXR0cmlidXRlLiBZb3UgY2FuXCd0IGN1dCB0ZXh0IGZyb20gZWxlbWVudHMgd2l0aCAicmVhZG9ubHkiIG9yICJkaXNhYmxlZCIgYXR0cmlidXRlcycpO3RoaXMuX3RhcmdldD10fX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RhcmdldH19XSksYyksdT1uKDEpLHM9bi5uKHUpLGY9bigyKSxkPW4ubihmKSxoPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJiJzeW1ib2wiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJiJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlPyJzeW1ib2wiOnR5cGVvZiB0fSxwPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZSYmeSh0LnByb3RvdHlwZSxlKSxuJiZ5KHQsbiksdH07ZnVuY3Rpb24geSh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgbz1lW25dO28uZW51bWVyYWJsZT1vLmVudW1lcmFibGV8fCExLG8uY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsby5rZXksbyl9fXZhciBtPShmdW5jdGlvbih0LGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9KHYscy5hKSxwKHYsW3trZXk6InJlc29sdmVPcHRpb25zIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT0wPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PXQ/dDp7fTt0aGlzLmFjdGlvbj0iZnVuY3Rpb24iPT10eXBlb2YgZS5hY3Rpb24/ZS5hY3Rpb246dGhpcy5kZWZhdWx0QWN0aW9uLHRoaXMudGFyZ2V0PSJmdW5jdGlvbiI9PXR5cGVvZiBlLnRhcmdldD9lLnRhcmdldDp0aGlzLmRlZmF1bHRUYXJnZXQsdGhpcy50ZXh0PSJmdW5jdGlvbiI9PXR5cGVvZiBlLnRleHQ/ZS50ZXh0OnRoaXMuZGVmYXVsdFRleHQsdGhpcy5jb250YWluZXI9Im9iamVjdCI9PT1oKGUuY29udGFpbmVyKT9lLmNvbnRhaW5lcjpkb2N1bWVudC5ib2R5fX0se2tleToibGlzdGVuQ2xpY2siLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5saXN0ZW5lcj1kKCkodCwiY2xpY2siLGZ1bmN0aW9uKHQpe3JldHVybiBlLm9uQ2xpY2sodCl9KX19LHtrZXk6Im9uQ2xpY2siLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuZGVsZWdhdGVUYXJnZXR8fHQuY3VycmVudFRhcmdldDt0aGlzLmNsaXBib2FyZEFjdGlvbiYmKHRoaXMuY2xpcGJvYXJkQWN0aW9uPW51bGwpLHRoaXMuY2xpcGJvYXJkQWN0aW9uPW5ldyBsKHthY3Rpb246dGhpcy5hY3Rpb24oZSksdGFyZ2V0OnRoaXMudGFyZ2V0KGUpLHRleHQ6dGhpcy50ZXh0KGUpLGNvbnRhaW5lcjp0aGlzLmNvbnRhaW5lcix0cmlnZ2VyOmUsZW1pdHRlcjp0aGlzfSl9fSx7a2V5OiJkZWZhdWx0QWN0aW9uIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gYigiYWN0aW9uIix0KX19LHtrZXk6ImRlZmF1bHRUYXJnZXQiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWIoInRhcmdldCIsdCk7aWYoZSlyZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlKX19LHtrZXk6ImRlZmF1bHRUZXh0Iix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gYigidGV4dCIsdCl9fSx7a2V5OiJkZXN0cm95Iix2YWx1ZTpmdW5jdGlvbigpe3RoaXMubGlzdGVuZXIuZGVzdHJveSgpLHRoaXMuY2xpcGJvYXJkQWN0aW9uJiYodGhpcy5jbGlwYm9hcmRBY3Rpb24uZGVzdHJveSgpLHRoaXMuY2xpcGJvYXJkQWN0aW9uPW51bGwpfX1dLFt7a2V5OiJpc1N1cHBvcnRlZCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9MDxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT10P3Q6WyJjb3B5IiwiY3V0Il0sbj0ic3RyaW5nIj09dHlwZW9mIGU/W2VdOmUsbz0hIWRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN1cHBvcnRlZDtyZXR1cm4gbi5mb3JFYWNoKGZ1bmN0aW9uKHQpe289byYmISFkb2N1bWVudC5xdWVyeUNvbW1hbmRTdXBwb3J0ZWQodCl9KSxvfX1dKSx2KTtmdW5jdGlvbiB2KHQsZSl7IWZ1bmN0aW9uKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9KHRoaXMsdik7dmFyIG49ZnVuY3Rpb24odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFlfHwib2JqZWN0IiE9dHlwZW9mIGUmJiJmdW5jdGlvbiIhPXR5cGVvZiBlP3Q6ZX0odGhpcywodi5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZih2KSkuY2FsbCh0aGlzKSk7cmV0dXJuIG4ucmVzb2x2ZU9wdGlvbnMoZSksbi5saXN0ZW5DbGljayh0KSxufWZ1bmN0aW9uIGIodCxlKXt2YXIgbj0iZGF0YS1jbGlwYm9hcmQtIit0O2lmKGUuaGFzQXR0cmlidXRlKG4pKXJldHVybiBlLmdldEF0dHJpYnV0ZShuKX1lLmRlZmF1bHQ9bX1dLHIuYz1vLHIuZD1mdW5jdGlvbih0LGUsbil7ci5vKHQsZSl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse2VudW1lcmFibGU6ITAsZ2V0Om59KX0sci5yPWZ1bmN0aW9uKHQpeyJ1bmRlZmluZWQiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSl9LHIudD1mdW5jdGlvbihlLHQpe2lmKDEmdCYmKGU9cihlKSksOCZ0KXJldHVybiBlO2lmKDQmdCYmIm9iamVjdCI9PXR5cGVvZiBlJiZlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTtpZihyLnIobiksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4sImRlZmF1bHQiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOmV9KSwyJnQmJiJzdHJpbmciIT10eXBlb2YgZSlmb3IodmFyIG8gaW4gZSlyLmQobixvLGZ1bmN0aW9uKHQpe3JldHVybiBlW3RdfS5iaW5kKG51bGwsbykpO3JldHVybiBufSxyLm49ZnVuY3Rpb24odCl7dmFyIGU9dCYmdC5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIHQuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gdH07cmV0dXJuIHIuZChlLCJhIixlKSxlfSxyLm89ZnVuY3Rpb24odCxlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9LHIucD0iIixyKHIucz02KS5kZWZhdWx0O2Z1bmN0aW9uIHIodCl7aWYob1t0XSlyZXR1cm4gb1t0XS5leHBvcnRzO3ZhciBlPW9bdF09e2k6dCxsOiExLGV4cG9ydHM6e319O3JldHVybiBuW3RdLmNhbGwoZS5leHBvcnRzLGUsZS5leHBvcnRzLHIpLGUubD0hMCxlLmV4cG9ydHN9dmFyIG4sb30pOw=="}]},{"name":"极简知乎","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["*://www.zhihu.com/question/*","*://www.zhihu.com/search*","*://www.zhihu.com/hot","*://www.zhihu.com/follow","*://www.zhihu.com/","*://zhuanlan.zhihu.com/*","*://www.zhihu.com/signin*"],"orig_noframes":null,"orig_run_at":"document-end","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1605003081970,"data":{}},"enabled":false,"position":7,"file_url":"https://greasyfork.org/scripts/37823-%E6%9E%81%E7%AE%80%E7%9F%A5%E4%B9%8E/code/%E6%9E%81%E7%AE%80%E7%9F%A5%E4%B9%8E.user.js","uuid":"17272cf7-8e86-49c5-bc2d-af55cd069346","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgICDmnoHnroDnn6XkuY4KLy8gQHZlcnNpb24gICAgICAgICAwLjEuMjQKLy8gQGF1dGhvciAgICAgICAgICBoY2Vhc3kKLy8gQG5hbWVzcGFjZSAgICAgICBodHRwczovL2hjZWFzeS5jb20KLy8gQHN1cHBvcnRVUkwgICAgICBodHRwczovL2dpdGh1Yi5jb20vaGNlYXN5L3NpbXBsZVpoaUh1L2lzc3VlcwovLyBAZGVzY3JpcHRpb24gICAgIOS8mOWMlumYheivu+eVjOmdoizlhY3nmbvlvZUs5bm/5ZGK5Y676ZmkLOm7keWQjeWNleWKn+iDvS4KLy8gQG1hdGNoICAgICAgICAgICAqOi8vd3d3LnpoaWh1LmNvbS9xdWVzdGlvbi8qCi8vIEBtYXRjaCAgICAgICAgICAgKjovL3d3dy56aGlodS5jb20vc2VhcmNoKgovLyBAbWF0Y2ggICAgICAgICAgICo6Ly93d3cuemhpaHUuY29tL2hvdAovLyBAbWF0Y2ggICAgICAgICAgICo6Ly93d3cuemhpaHUuY29tL2ZvbGxvdwovLyBAbWF0Y2ggICAgICAgICAgICo6Ly93d3cuemhpaHUuY29tLwovLyBAbWF0Y2ggICAgICAgICAgICo6Ly96aHVhbmxhbi56aGlodS5jb20vKgovLyBAbWF0Y2ggICAgICAgICAgICo6Ly93d3cuemhpaHUuY29tL3NpZ25pbioKLy8gQHJ1bi1hdCAgICAgICAgICBkb2N1bWVudC1lbmQKLy8gPT0vVXNlclNjcmlwdD09CjsgKGZ1bmN0aW9uICgpIHsKICAgICd1c2Ugc3RyaWN0JwogICAgLy8g6K6+572u6I+c5Y2VCiAgICBjb25zdCBtZW51SFRNTCA9ICc8ZGl2IGNsYXNzPSJleHRNZW51Ij48aW1nIHNyYz0iaHR0cHM6Ly96aHN0YXRpYy56aGlodS5jb20vYXNzZXRzL2Vycm9yL2xpdWthbnNoYW5fd2lyZS5zdmciIGFsdD0i5YiY55yL5bGxIiB3aWR0aD0iMTVweCIgaGVpZ2h0PSIxOXB4Ij48cD7mmL7npLrmj5Dpl67moIfpopjmoI8gPGlucHV0IGlkPSJzaG93UXVlc3Rpb24iIHR5cGU9ImNoZWNrYm94Ij48L3A+PHA+5rWP6KeI5Zmo5qCH6aKY5pu/5o2iIDxpbnB1dCBpZD0ic2hvd0Zha2VUaXRsZSIgdHlwZT0iY2hlY2tib3giPjwvcD48cD7pu5HlkI3ljZXliJfooag6PC9wPjxwPjx0ZXh0YXJlYSBwbGFjZWhvbGRlcj0i5YiY55yL5bGxLOWMv+WQjeeUqOaItyIgaWQ9ImJsYWNrTGlzdCIgY29scz0iMjAiIHJvd3M9IjIiPjwvdGV4dGFyZWE+PC9wPjxwPjxidXR0b24gaWQ9InNhdmVDb25maWciPuS/neWtmDwvYnV0dG9uPjwvcD48L2Rpdj4nCiAgICBjb25zdCBtZW51Q3NzID0gJy5leHRNZW51IHtwb3NpdGlvbjogZml4ZWQ7dG9wOiAxMHB4O3JpZ2h0OiAxMHB4O3dpZHRoOiAxNXB4O2hlaWdodDogMTlweDtmb250LXNpemU6IDEycHg7b3ZlcmZsb3c6IGhpZGRlbjt9LmV4dE1lbnU6aG92ZXIge3dpZHRoOiBhdXRvO2hlaWdodDogYXV0bztib3JkZXI6IDFweCBzb2xpZCAjMDAwO3BhZGRpbmc6MTBweDt9LmV4dE1lbnU6aG92ZXIgaW1nIHtkaXNwbGF5OiBub25lO30nCiAgICBjb25zdCBibGlua0xpdSA9ICcuZXh0TWVudXthbmltYXRpb246anVtcExpdSA1cyBpbmZpbml0ZX1Aa2V5ZnJhbWVzIGp1bXBMaXV7MCV7cmlnaHQ6MTBweDtiYWNrZ3JvdW5kLWNvbG9yOiMyNjQ2NTN9MjAle3JpZ2h0OjIwcHg7YmFja2dyb3VuZC1jb2xvcjojMmE5ZDhmfTQwJXtyaWdodDozMHB4O2JhY2tncm91bmQtY29sb3I6I2U5YzQ2YX02MCV7cmlnaHQ6MTBweDtiYWNrZ3JvdW5kLWNvbG9yOiNmNGEyNjF9ODAle3JpZ2h0OjIwcHg7YmFja2dyb3VuZC1jb2xvcjojZTc2ZjUxfTEwMCV7cmlnaHQ6MTBweDtiYWNrZ3JvdW5kLWNvbG9yOiMyNjQ2NTN9fScKCiAgICAvLyDljLrliIbmkJzntKLpl67nrZTpobXpnaIKICAgIGNvbnN0IHBhdGhOYW1lID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lCiAgICBjb25zdCBob3N0TmFtZSA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZQogICAgbGV0IHBhZ2VUeXBlCiAgICBpZiAocGF0aE5hbWUuaW5kZXhPZigncXVlc3Rpb24nKSA+PSAwKSB7CiAgICAgICAgcGFnZVR5cGUgPSAncXVlc3Rpb24nCiAgICB9IGVsc2UgaWYgKHBhdGhOYW1lLmluZGV4T2YoJ3NlYXJjaCcpID49IDApIHsKICAgICAgICBwYWdlVHlwZSA9ICdzZWFyY2gnCiAgICB9IGVsc2UgaWYgKHBhdGhOYW1lLmluZGV4T2YoJ2hvdCcpID49IDAgfHwgcGF0aE5hbWUuaW5kZXhPZignZm9sbG93JykgPj0gMCB8fCB3aW5kb3cubG9jYXRpb24uaHJlZiA9PT0gImh0dHBzOi8vd3d3LnpoaWh1LmNvbS8iKSB7CiAgICAgICAgcGFnZVR5cGUgPSAnaG90JwogICAgfSBlbHNlIGlmIChwYXRoTmFtZS5pbmRleE9mKCdzaWduaW4nKSA+PSAwKSB7CiAgICAgICAgcGFnZVR5cGUgPSAnc2lnbmluJwogICAgfSBlbHNlIGlmIChob3N0TmFtZSA9PT0gInpodWFubGFuLnpoaWh1LmNvbSIpIHsKICAgICAgICBwYWdlVHlwZSA9ICd6aHVhbmxhbicKICAgIH0KCiAgICAvLyDnlKhHaXRIdWLnmoTlm77moIfmm7/mjaIKICAgIGNvbnN0IGZha2VfdGl0bGUgPSAnR2l0SHViJwogICAgLy8gaWNvbuS5n+aUueS6hgogICAgY29uc3QgZmFrZV9pY29uID0gJ2h0dHBzOi8vZ2l0aHViLmdpdGh1YmFzc2V0cy5jb20vZmF2aWNvbi5pY28nCiAgICBsZXQgbGluayA9CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigibGlua1tyZWwqPSdpY29uJ10iKSB8fAogICAgICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKQogICAgd2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zdCBzQ29uZmlnID0gd2luZG93LmxvY2FsU3RvcmFnZQogICAgICAgIGlmIChzQ29uZmlnLmZha2VUaXRsZSA9PT0gdW5kZWZpbmVkIHx8IHNDb25maWcuc2hvd1F1ZXN0aW9uID09PSB1bmRlZmluZWQgfHwgc0NvbmZpZy5ibGFja0xpc3QgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBzQ29uZmlnLmZha2VUaXRsZSA9ICd0cnVlJwogICAgICAgICAgICBzQ29uZmlnLnNob3dRdWVzdGlvbiA9ICd0cnVlJwogICAgICAgICAgICBzQ29uZmlnLmJsYWNrTGlzdCA9ICcnCiAgICAgICAgfQogICAgICAgIC8vIOa3u+WKoOiPnOWNlQogICAgICAgIGxldCBjc3NGaXggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpCiAgICAgICAgY3NzRml4LmlubmVySFRNTCArPSBtZW51Q3NzCiAgICAgICAgaWYgKHR5cGVvZiAoc0NvbmZpZy5ibGlua0xpdSkgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgIGNzc0ZpeC5pbm5lckhUTUwgKz0gYmxpbmtMaXUKICAgICAgICB9CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXS5hcHBlbmRDaGlsZChjc3NGaXgpCiAgICAgICAgbGV0IGh0bWxGaXggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKQogICAgICAgIGh0bWxGaXguaW5uZXJIVE1MICs9IG1lbnVIVE1MCiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChodG1sRml4KQoKICAgICAgICAvLyDnu5Hlrprmk43kvZwKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hvd0Zha2VUaXRsZScpLmNoZWNrZWQgPSBKU09OLnBhcnNlKHNDb25maWcuZmFrZVRpdGxlKQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaG93UXVlc3Rpb24nKS5jaGVja2VkID0gSlNPTi5wYXJzZShzQ29uZmlnLnNob3dRdWVzdGlvbikKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmxhY2tMaXN0JykudmFsdWUgPSBzQ29uZmlnLmJsYWNrTGlzdAogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzYXZlQ29uZmlnJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHNDb25maWcuZmFrZVRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nob3dGYWtlVGl0bGUnKS5jaGVja2VkCiAgICAgICAgICAgIHNDb25maWcuc2hvd1F1ZXN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nob3dRdWVzdGlvbicpLmNoZWNrZWQKICAgICAgICAgICAgc0NvbmZpZy5ibGFja0xpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmxhY2tMaXN0JykudmFsdWUuc3BsaXQoJywnKQogICAgICAgICAgICBzQ29uZmlnLmJsaW5rTGl1ID0gZmFsc2UKICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpCiAgICAgICAgfSkKCiAgICAgICAgLy8g5pS55LiL5qCH6aKYCiAgICAgICAgaWYgKHNDb25maWcuZmFrZVRpdGxlID09PSAndHJ1ZScpIHsKICAgICAgICAgICAgd2luZG93LmRvY3VtZW50LnRpdGxlID0gZmFrZV90aXRsZQogICAgICAgICAgICBsaW5rLnR5cGUgPSAnaW1hZ2UveC1pY29uJwogICAgICAgICAgICBsaW5rLnJlbCA9ICdzaG9ydGN1dCBpY29uJwogICAgICAgICAgICBsaW5rLmhyZWYgPSBmYWtlX2ljb24KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXS5hcHBlbmRDaGlsZChsaW5rKQogICAgICAgIH0KICAgICAgICBzd2l0Y2ggKHBhZ2VUeXBlKSB7CiAgICAgICAgICAgIGNhc2UgJ3F1ZXN0aW9uJzoKICAgICAgICAgICAgICAgIGZpeFF1ZXN0aW9uUGFnZSgpCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBjYXNlICdzZWFyY2gnOgogICAgICAgICAgICAgICAgZml4U2VhcmNoUGFnZSgpCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBjYXNlICdob3QnOgogICAgICAgICAgICAgICAgZml4SG9tZVBhZ2UoKQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgY2FzZSAnc2lnbmluJzoKICAgICAgICAgICAgICAgIGFkZEhvdExpc3QoKQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgY2FzZSAnemh1YW5sYW4nOgogICAgICAgICAgICAgICAgZml4Wmh1YW5MYW4oKQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICB9CiAgICB9CiAgICB3aW5kb3cub25zY3JvbGwgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaGlkZUF1dGhvcigpCiAgICB9CiAgICBmdW5jdGlvbiBhZGRIb3RMaXN0ICgpIHsKICAgICAgICBsZXQgc2lnbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5TaWduRmxvdy1zdWJtaXRCdXR0b24nKQogICAgICAgIGlmIChzaWduQnV0dG9uKSB7CiAgICAgICAgICAgIGxldCBob3RCdXR0b24gPSBzaWduQnV0dG9uLmNsb25lTm9kZShmYWxzZSkKICAgICAgICAgICAgbGV0IHBhcmVudCA9IHNpZ25CdXR0b24ucGFyZW50Tm9kZTsKICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGhvdEJ1dHRvbikKICAgICAgICAgICAgaG90QnV0dG9uLmlubmVySFRNTCA9ICfkuI3mg7PnmbvlvZUs5Y6754Ot5qac6L2s6L2sJwogICAgICAgICAgICBob3RCdXR0b24ub25jbGljayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSAnaHR0cHM6Ly93d3cuemhpaHUuY29tL2JpbGxib2FyZCcKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIGZpeFF1ZXN0aW9uUGFnZSAoKSB7CiAgICAgICAgY29uc3Qgc0NvbmZpZyA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UKICAgICAgICBsZXQgY3NzRml4ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKQogICAgICAgIC8vIOWQuOW6leeahOivhOiuuuagjwogICAgICAgIGNzc0ZpeC5pbm5lckhUTUwgKz0gJy5SaWNoQ29udGVudC1hY3Rpb25ze2JvdHRvbTphdXRvICFpbXBvcnRhbnQ7fScKICAgICAgICAvLyDnm7TmjqXlsY/olL3pobbpg6jpl67popjnm7jlhbMKICAgICAgICBpZiAoc0NvbmZpZy5zaG93UXVlc3Rpb24gPT09ICdmYWxzZScpIHsKICAgICAgICAgICAgY3NzRml4LmlubmVySFRNTCArPSAnLlF1ZXN0aW9uSGVhZGVyLWZvb3RlcntkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9JwogICAgICAgICAgICBjc3NGaXguaW5uZXJIVE1MICs9ICcuUXVlc3Rpb25IZWFkZXJ7ZGlzcGxheTpub25lICFpbXBvcnRhbnQ7fScKICAgICAgICAgICAgY3NzRml4LmlubmVySFRNTCArPSAnLlF1ZXN0aW9uLW1haW57bWFyZ2luOjAgIWltcG9ydGFudDt9JwogICAgICAgIH0KICAgICAgICAvLyDpl67popjpobXpnaLnmbvlvZXlvLnnqpcKICAgICAgICBjc3NGaXguaW5uZXJIVE1MICs9ICcuTW9kYWwtYmFja2Ryb3B7YmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7fScKICAgICAgICBjc3NGaXguaW5uZXJIVE1MICs9ICcuc2lnbkZsb3dNb2RhbHtkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9JwogICAgICAgIC8vIOmhtumDqOWFs+mUruivjQogICAgICAgIGNzc0ZpeC5pbm5lckhUTUwgKz0gJy5RdWVzdGlvbkhlYWRlci10YWdze2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50O30nCiAgICAgICAgLy8g6Zeu6aKY55u45YWz5pKR5ruhCiAgICAgICAgY3NzRml4LmlubmVySFRNTCArPSAnLlF1ZXN0aW9uSGVhZGVyLWNvbnRlbnR7d2lkdGg6Njk0cHggIWltcG9ydGFudDtwYWRkaW5nOjA7fScKICAgICAgICBjc3NGaXguaW5uZXJIVE1MICs9ICcuUXVlc3Rpb25IZWFkZXItZm9vdGVye2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50O30nCiAgICAgICAgY3NzRml4LmlubmVySFRNTCArPSAnLlF1ZXN0aW9uSGVhZGVyLW1haW4ge21hcmdpbjoxMHB4O30nCiAgICAgICAgY3NzRml4LmlubmVySFRNTCArPSAnLlF1ZXN0aW9uSGVhZGVye3dpZHRoOjY5NHB4O21hcmdpbjowIGF1dG87cGFkZGluZzowO21pbi13aWR0aDphdXRvO30nCiAgICAgICAgLy8g5pyq5bGV5byA5pe25YaF5a655bGF5LitCiAgICAgICAgY3NzRml4LmlubmVySFRNTCArPSAnLkxpc3RTaG9ydGN1dHttYXJnaW46MCBhdXRvO30nCiAgICAgICAgLy8g5bGV5byA5pe25bGF5LitCiAgICAgICAgY3NzRml4LmlubmVySFRNTCArPSAnLlF1ZXN0aW9uLXNpZGVDb2x1bW57ZGlzcGxheTpub25lO30nCiAgICAgICAgY3NzRml4LmlubmVySFRNTCArPSAnLlF1ZXN0aW9uLW1haW5Db2x1bW57bWFyZ2luOjAgYXV0bzt9JwogICAgICAgIC8vIOWGheWuueWbvueJhy/op4bpopHmnIDlpKczMDBweAogICAgICAgIGNzc0ZpeC5pbm5lckhUTUwgKz0gJy5vcmlnaW5faW1hZ2V7bWF4LXdpZHRoOjMwMHB4ICFpbXBvcnRhbnQ7fScKICAgICAgICBjc3NGaXguaW5uZXJIVE1MICs9ICcuUmljaFRleHQtdmlkZW97bWF4LXdpZHRoOjMwMHB4ICFpbXBvcnRhbnQ7fScKICAgICAgICAvLyDlhoXlrrnpk77mjqXljrvnibnlvoEKICAgICAgICBjc3NGaXguaW5uZXJIVE1MICs9CiAgICAgICAgICAgICcuTGlua0NhcmR7bWFyZ2luOmF1dG8gIWltcG9ydGFudDtkaXNwbGF5OmlubGluZSAhaW1wb3J0YW50O30uTGlua0NhcmQtY29udGVudHtiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDt9LkxpbmtDYXJkLXRpdGxle2NvbG9yOiM5OTkgIWltcG9ydGFudH0nCiAgICAgICAgLy8g54K56LWeCiAgICAgICAgY3NzRml4LmlubmVySFRNTCArPQogICAgICAgICAgICAnLlZvdGVCdXR0b257Y29sb3I6Izk5OSAhaW1wb3J0YW50O2JhY2tncm91bmQ6IG5vbmU7ICFpbXBvcnRhbnR9JwogICAgICAgIC8vIOivhOiuuuWxleW8gOWuveW6pgogICAgICAgIGNzc0ZpeC5pbm5lckhUTUwgKz0gJy5Nb2RhbC0tZnVsbFBhZ2V7d2lkdGg6NjUwcHh9JwogICAgICAgIC8vIOivhOiuuuWxleW8gOWFs+mXreaMiemSruWkjeS9jQogICAgICAgIGNzc0ZpeC5pbm5lckhUTUwgKz0gJy5Nb2RhbC1jbG9zZUJ1dHRvbntyaWdodDowO30nCiAgICAgICAgY3NzRml4LmlubmVySFRNTCArPSAnLk1vZGFsLWNsb3NlSWNvbntmaWxsOiM5MTkxOTE7fScKICAgICAgICAvLyDlub/lkYrllYblk4Hpk77mjqUKICAgICAgICBjc3NGaXguaW5uZXJIVE1MICs9CiAgICAgICAgICAgICcuUmljaFRleHQtTUNOTGlua0NhcmRDb250YWluZXJ7ZGlzcGxheTpub25lICFpbXBvcnRhbnQ7fScKICAgICAgICAvLyDlpLnnvJ3lub/lkYoKICAgICAgICBjc3NGaXguaW5uZXJIVE1MICs9CiAgICAgICAgICAgICcuUGMtd29yZHtkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9JwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0uYXBwZW5kQ2hpbGQoY3NzRml4KQogICAgICAgIC8vIOWPs+S+p+mXrumimOebuOWFswogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ1F1ZXN0aW9uSGVhZGVyLXNpZGUnKVsxXS5zdHlsZS5kaXNwbGF5ID0KICAgICAgICAgICAgJ25vbmUnCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnUXVlc3Rpb24tc2lkZUNvbHVtbicpWzBdLnN0eWxlLmRpc3BsYXkgPQogICAgICAgICAgICAnbm9uZScKICAgICAgICAvLyDpobbpg6jpl67popjmoIfpopgKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZGVyJylbMF0uc3R5bGUuZGlzcGxheSA9ICdub25lJwogICAgICAgIC8vIOWGheWuueaSkea7oQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ1F1ZXN0aW9uLW1haW4nKVswXS5zdHlsZS53aWR0aCA9ICdhdXRvJwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ1F1ZXN0aW9uLW1haW4nKVswXS5zdHlsZS5wYWRkaW5nID0gJzAnCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnUXVlc3Rpb24tbWFpbkNvbHVtbicpWzBdLnN0eWxlLm1hcmdpbiA9CiAgICAgICAgICAgICcwIGF1dG8nCiAgICB9CiAgICBmdW5jdGlvbiBmaXhTZWFyY2hQYWdlICgpIHsKICAgICAgICBsZXQgY3NzRml4ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKQogICAgICAgIC8vIGhlYWRlcgogICAgICAgIGNzc0ZpeC5pbm5lckhUTUwgKz0gJ2hlYWRlcntkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9JwogICAgICAgIC8vIFNlYXJjaFRhYnMKICAgICAgICBjc3NGaXguaW5uZXJIVE1MICs9ICcuU2VhcmNoVGFic3tkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9JwogICAgICAgIC8vIFNlYXJjaFNpZGVCYXIKICAgICAgICBjc3NGaXguaW5uZXJIVE1MICs9ICcuU2VhcmNoU2lkZUJhcntkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9JwogICAgICAgIC8vIENvcm5lckJ1dHRvbnMKICAgICAgICBjc3NGaXguaW5uZXJIVE1MICs9ICcuQ29ybmVyQnV0dG9uc3tkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9JwogICAgICAgIC8vIC5TZWFyY2hNYWluCiAgICAgICAgY3NzRml4LmlubmVySFRNTCArPQogICAgICAgICAgICAnLlNlYXJjaE1haW57d2lkdGg6MTAwJSAhaW1wb3J0YW50O21hcmdpbjogMCAhaW1wb3J0YW50O30nCiAgICAgICAgLy8gU2VhcmNoLWNvbnRhaW5lcgogICAgICAgIGNzc0ZpeC5pbm5lckhUTUwgKz0KICAgICAgICAgICAgJy5TZWFyY2gtY29udGFpbmVye3dpZHRoOiBhdXRvICFpbXBvcnRhbnQ7bWluLWhlaWdodDogYXV0byAhaW1wb3J0YW50O21hcmdpbjpub25lICFpbXBvcnRhbnQ7fScKICAgICAgICBjc3NGaXguaW5uZXJIVE1MICs9ICcuU2VhcmNoU2VjdGlvbnN7d2lkdGg6YXV0byAhaW1wb3J0YW50fScKICAgICAgICAvLyDngrnotZ4KICAgICAgICBjc3NGaXguaW5uZXJIVE1MICs9CiAgICAgICAgICAgICcuVm90ZUJ1dHRvbntjb2xvcjojOTk5ICFpbXBvcnRhbnQ7YmFja2dyb3VuZDogbm9uZTsgIWltcG9ydGFudH0nCiAgICAgICAgLy8g5YaF5a655Zu+54mHL+inhumikeacgOWkpzMwMHB4CiAgICAgICAgY3NzRml4LmlubmVySFRNTCArPSAnLm9yaWdpbl9pbWFnZXttYXgtd2lkdGg6MzAwcHggIWltcG9ydGFudDt9JwogICAgICAgIGNzc0ZpeC5pbm5lckhUTUwgKz0gJy5SaWNoVGV4dC12aWRlb3ttYXgtd2lkdGg6MzAwcHggIWltcG9ydGFudDt9JwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0uYXBwZW5kQ2hpbGQoY3NzRml4KQogICAgfQogICAgZnVuY3Rpb24gZml4Wmh1YW5MYW4gKCkgewogICAgICAgIGxldCBjc3NGaXggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpCiAgICAgICAgY3NzRml4LmlubmVySFRNTCArPSAnLlJlY29tbWVuZGF0aW9ucy1NYWlue2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50O30nCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXS5hcHBlbmRDaGlsZChjc3NGaXgpCiAgICB9CiAgICBmdW5jdGlvbiBmaXhIb21lUGFnZSAoKSB7CiAgICAgICAgbGV0IGNzc0ZpeCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJykKICAgICAgICBjc3NGaXguaW5uZXJIVE1MICs9ICcuR2xvYmFsU2lkZUJhcntkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9JwogICAgICAgIGNzc0ZpeC5pbm5lckhUTUwgKz0gJy5Ub3BzdG9yeS1jb250YWluZXJ7d2lkdGg6MTAwJSAhaW1wb3J0YW50O3BhZGRpbmc6MCAhaW1wb3J0YW50fScKICAgICAgICBjc3NGaXguaW5uZXJIVE1MICs9ICcuVG9wc3RvcnktbWFpbkNvbHVtbnt3aWR0aDoxMDAlICFpbXBvcnRhbnQ7fScKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdLmFwcGVuZENoaWxkKGNzc0ZpeCkKICAgIH0KICAgIGZ1bmN0aW9uIGhpZGVBdXRob3IgKCkgewogICAgICAgIGNvbnN0IGFuc3dlckxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdMaXN0LWl0ZW0nKQogICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBhbnN3ZXJMaXN0Lmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgICBjb25zdCBvYmogPSBhbnN3ZXJMaXN0W2luZGV4XQogICAgICAgICAgICBjb25zdCBrZXkgPSBKU09OLnBhcnNlKG9iai5nZXRFbGVtZW50c0J5VGFnTmFtZSgiZGl2IilbMF0uZ2V0QXR0cmlidXRlKCJkYXRhLXpvcCIpKQogICAgICAgICAgICBpZiAoa2V5ID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCBibGFja0xpc3QgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmJsYWNrTGlzdC5zcGxpdCgnLCcpCiAgICAgICAgICAgIGJsYWNrTGlzdC5mb3JFYWNoKG5hbWUgPT4gewogICAgICAgICAgICAgICAgaWYgKGtleS5hdXRob3JOYW1lID09PSBuYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgb2JqLnN0eWxlLmRpc3BsYXkgPSAnbm9uZScKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfQp9KSgpCg=="}]}